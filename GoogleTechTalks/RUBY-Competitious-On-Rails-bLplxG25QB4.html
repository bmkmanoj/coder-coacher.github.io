<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>RUBY: Competitious On Rails | Coder Coacher - Coaching Coders</title><meta content="RUBY: Competitious On Rails - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/GoogleTechTalks/">GoogleTechTalks</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>RUBY: Competitious On Rails</b></h2><h5 class="post__date">2007-10-08</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/bLplxG25QB4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hi everyone my name is Greg Cola donato
i'm your host tonight welcome to google
if this is the first time you've come to
google thank you for coming to take you
to this event tonight don't mind the
dinosaur out in the front yard or the
spaceship hanging over the stairway
they're just props they're not neither
was real actually so thank you very much
for coming tonight the SD form ruby sig
is held here every for a while it was
every month and now we're probably gonna
switch over to every other month this is
our March event next month we have a
hopefully you saw the handouts there's a
there's a ruby conference that the SD
forum was doing and I hope you can all
come I went last year and it was a great
time great weekend so tonight we have a
couple guys from a start-up this just
started last year late last year correct
I read about them first on a tech blog
called TechCrunch which if you're
interested in startups I would recommend
you check that out as well and these
guys are instant coming speaking a
little bit about how they use rails in
their production environment some of the
things they've bumped into so with no
further ado welcome Kris and Andy and
thanks for coming thank you and thanks
everyone for coming out we appreciate
you taking your time to listen to us
speak I'm Andrew holt this is chris
Rasmussen were the founders of a company
called rival soft and the creators of
competition so we're here to talk a
little bit about our experience with
ruby on rails as a startup we'll start
off by telling you a little bit about
ourselves and give you a quick
background and also give you a demo of
competitions for those of you that
haven't had a chance to see it yet we'll
talk a little bit about why we chose
Reba and rails and the decision process
we went through and choosing there's a
lot of languages and frameworks to
consider and why we went with Ruby on
Rails what cookie covers some of the
pros and cons that we've encountered
using Ruby and and then kind of the bulk
of the presentation we'll go through
some of our code some of the interesting
things we've done to solve some of the
problems we've encountered along the way
so my background I have a BS in computer
science from Stanford right out of
Stanford I went to work for Yahoo and
the merchant services section of yahoo
shopping I work to integrate the larger
clients all the big people into yahoo
shopping we moved over to a CPC model
and I became a project manager and where
the self-serve platform for smaller
merchants to become integrated into the
shopping platform I left yahoo after two
years got a little tired of working
there and co-founded a company called
review nity we built a product
comparison engine to help consumers find
the best product for them taking an
algorithmic approach basically
aggregating user reviews in a way that
no one had really done before and then
we also provided the technology for
online communities like forums to help
members share product opinions between
themselves and that was all in PHP I did
that for about a year and a half then we
moved on worked on some interim ideas
and then I met up with Chris and we
started working on a new idea and while
we're working on that we we kind of came
up with the idea for competition such as
a separate thing and we felt the need
for it and the rest is history ok so I'm
Chris Rasmussen I started out consulting
at a pretty young age working on some of
the early hotel reservation networks and
back then it didn't require much
technology to make money so it was
mainly search engine optimization and
things like that in high school I got
interested in 3d graphics and i wrote a
full implementation of quake 3 and java
and software and as well as a procedural
level detailed terrain engine and all
the tools that go with any game
framework i got my degree in computer
science with technical minor in
mathematics from UCLA and i graduated
early and started doing consulting and
design work and then i got picked up by
microsoft and i worked on the SharePoint
platform developing blogs wiki's doing
security reviews for clients scripting
issues and improving the UI and the
general extensibility of the platform or
the feature features as Microsoft likes
to call it I have always been kind of an
entrepreneur so I wasn't too happy there
and didn't stay long and was there had
permission to work on my own company
which was called personal trainer pages
so I left last year about a year and a
half ago and launched a personal trainer
pages which I built on top of a scalable
drag-and-drop Ajax website building
platform and it was pretty advanced for
its time I built it about two years ago
and it's still a pretty cutting edge but
only personal trainers get to see it so
it's kind of sad then I went up with
Andrew and we started competition
alright so how many of you had a chance
to use competition a few people all
right so we'll go through a quick tour
of it since most people haven't seen it
competition is an online service that
helps companies discover organize and
analyze information about their
competitors we launched an initial beta
in October of 2006 we have the tech
runch post the same day it's still very
much in beta we've been developed
developing it since we're working on
some more advanced features will show
you our beta today and walk you through
it but our plan is to change the way
companies consume and act on competitive
knowledge so if you're a startup a brand
new startup you're considering working
on a new idea or you're an established
organization if you want to get market
share you have to know your competitors
are and you have to stay competitive for
us I used to sort of avoid this when I
was working on a new idea I didn't
actually want to find that the people
had thought of it before but you know
even in yahoo we found that they were
they were never really you know good
standards for for finding information
organizing it and then getting value out
of that on an ongoing basis and
disseminating it to everyone that needed
to get it easily an interesting thing is
actually we came up with the idea
because we wanted to make a service
where companies could list who their
competitors were and then see how many
companies had similar competitors to
gauge how interesting their idea wasn't
unique it was because we found that some
of our ideas weren't as unique as we
thought so so this is what we call the
dashboard screen if you use competitions
we organize everything into projects so
I start it might only have one project
one idea you're working on and a bigger
company are going to have several
different products several different
services each of what weight each of
which may have disparate competitors the
dashboard is basically the place where
you can quickly list your competitors
are you can see the recent activity in
the account and then we have the recent
clippings and we'll show you what
clippings are in a second if you click
click on a competitor you go to the
competitors screen and here we're
pulling in things from several sources
we have little exa giving a screenshot
and the traffic data and we're working
on other ways to get traffic we know
Alexis not necessarily the best thing
and then we have google news on the
right for that competitor and on the
bottom we've got notes down here
basically if you want to list anything
about a competitor you want to talk
about their pricing you
to talk about a product and their
features this is the way you can do it
again this is very early we've got a
much better note system in the works
it's really going to improve on this so
on the right like I said you've got
google news you can clip it directly
there and we'll go into clippings
clippings are basically a social
bookmarking service for news about
companies that are competing with you
and about your own company it's very
easy to create when we have a
bookmarklet and we also allow you to
create one manually for us we used to
find news constantly about companies
that competed with us using delicious
wasn't really an option because it's not
secure we needed to be private and so we
used to email each other back and forth
and this is really good solution for
that when you're creating a clipping and
this is editing but it's the same thing
you can set sentiment about any company
listed in the article which is kind of
an interesting thing and going forward
there's a lot of cool things we can do
with that using NLP and try to do it
automatically but this lets you later go
back if you go to the previous screen
you can see that you can filter by
sentiment you can filter by competitors
so you can see quickly positive news
about your company negative news about a
competitor negative news about your own
company places you need to fix and work
on and then this is our comparison
matrix you personally yeah so our
comparison matrix is probably don't know
like a more advanced client-side things
that we have as you can see we right now
we only allow check mark values but in
our current versions that we have
internally we actually have all types of
values you can add with different
attributes and things like that and then
we're going to be doing analytics on top
of that to produce scorecards and things
like that so we do a lot of pretty fancy
JavaScript here and we've what we
talking about how we did some of that a
little bit later rails makes it really
easy to create powerful Ajax
applications but it also makes it easy
to create non-performing Ajax
applications so we'll talk about how to
avoid that okay so I'm sure a lot you
guys are pretty experienced but I'm just
gonna go over the general like kind of
thought process that people have when
they're considering on new web
technology and adopting it on their team
the first thing if you're a small
company is I think development speed is
incredibly important it doesn't matter
how big your projects going to be in the
long run if you're a new company just
starting out you're really going to be
evolving your idea rapidly over time and
it's a
orton to get to market early and be able
to evolve to customer feedback quickly
because it's rare that company gets it
right the first time the second thing is
just the libraries and frameworks that
are available with rails which is the
framework for Ruby pretty much I think
it's a great framework I've had
experience with tons of frameworks and I
really love the rails framework in the
way it kind of stays out of your way and
provides just the right amount of stuff
to get you going scalability is always
concern it's a big concern when people
are considering Ruby obviously Ruby
being an interpreted language and kind
of a not well a new one it's it's not
going to have the kind of raw throughput
the Java or C or something like that's
going to have but generally when you're
dealing with web applications your
bottlenecks are going to lie somewhere
else is gonna be like fetching
third-party data from some other service
or dealing with your database or things
like that so for the majority
obligations the scalability of rails
really isn't an issue and in terms of
scalability and the rails actually
scales pretty elegantly and makes it a
lot easier to do so them with other
frameworks or languages so I think as a
start-up it's pretty safe bet betting on
rails and not worrying about scalability
until that becomes an issue
maintainability on the other hand is an
issue with Ruby as a language being
dynamic and having rails being a lot of
cogeneration going on behind the scenes
it does make it harder to debug code and
it does make it harder to maintain code
over time but if you are a good
developer and you follow the right
design patterns you can avoid most of
those pitfalls and you can typically
work around it so there's just some of
the different maintainability issues
okay we personally chose Ruby on Rails
because i had a huge experience with
Java and tons of different frameworks
and my own frameworks and I personally
got really tired of writing
configuration and plumbing code trying
to tie things to the database and create
my own components and all these things
originally I thought components were
awesome I thought being able to reuse my
code everywhere was great and the fact
that I could like use them with other
clients but the fact that matter is it
rarely ever worked when you start
putting business logic into components
you start writing kind of application
specific code that really doesn't
translate well to other applications so
it's better to try to only create
simpler things for view logic and stuff
like that the other reason was there's
no template languages template language
is yet another thing you have to learn
and yet another
then you have to maintain and extend and
with Ruby the language the syntax is so
elegant that it works really well just
embedding directly inside of the car
inside of HTML and it looks a lot like a
tag library with the prox that you can
pass around and the way that attributes
don't always require or hashes don't
always require curly brackets we also
believe in iterative development and
rapid prototyping and rails makes it a
lot easier to do that cuz the turnaround
time from when you're coding to when
you're doing the application is pretty
much instant on any decently performant
machine and then again like I said
there's less emphasis on broad package
components rails originally had
components integrated into the framework
and now they're removing it most people
really don't need to use them it's a lot
better to just kind of mix and match
partials and helpers and write minimal
view logic rather than trying to embed
business logic all over the place and
try to reuse that because it's I mean
it's especially since rails is such a
terse elegant language you can write
isn't logic so concisely it's in
Business College typically changes and
isn't often reused and then we I had a
Java background and he had a job
background from Stanford as well as PHP
and we were just more familiar with like
the type of syntax that rails or Ruby
uses versus PA or Python but we did
consider adopting Python we looked into
some of other frameworks like dojo or
the Django and turbo years and then
finally I I've written a lot of Jace
libraries I wrote some of the early
jeaious libraries for Ajax about two and
a half years ago before all these
libraries are around and so I have a lot
experience with JavaScript and I really
like the way that prototype handles
things and it's kind of a more of a
lightweight library as opposed to dojo
and script oculus has some great effects
and handles it very elegantly and then
the integration with rails through rjs
templates and things like that is
amazing let me turn this up
kids hear me any better there we go all
right so for us it worked we built the
first version of competition in three
weeks and we launched it on a Wednesday
and by that night we had a post on
TechCrunch and 3000 companies signed up
within a day or two so it's pretty cool
and we had no scale but the issues or
anything like that I mean and that's not
that much traffic so for the most part
most people don't have to deal with
those kinds of things so yeah like the
partials and helpers worked out
components we didn't ever miss them and
we've been able to constantly evolve the
service and we respond rapidly to our
customer feedback and as a result we've
done a lot of press all that just fixing
simple issues journalist Lee like feel
proud that their recommendation got into
our products so quickly and they end up
writing about it which helps you a lot
but there were problems refactoring code
is difficult we were learning rails at
the same time we're using it so we made
some mistakes along the way and you
don't have the benefit of a nice
integrated IDE with code refactoring
where you can right click and rename and
have it just replace everything in your
code you have to be a little bit smarter
about where you're using things
especially when you start getting into
code generation at runtime we rented
some problems with the fact that rails a
single-threaded we didn't realize that
initially and then the fact that the
processes tend to be pretty memory heavy
so you can't run too many on the server
and I became our first bottle neck and
it needed a little bit more work than we
expected to get into production mode and
make it sound like everything's kind of
set and ready for you but there's a lot
of little quirks that you're going to
run into along the way so we'll talk
about some of those and then doesn't
support complex queries which became a
can be a performance issue it really
isn't for most applications but when we
start to get into more polymorphic
relationships and things like that and
we want to like pre or eager load data
rather than lazy load data it can be
difficult with rails occasionally and
sometimes active record you can't even
make it work as much as you try but that
should change over time it's been
getting better even since we started and
then finally it fetches all the data all
the time which means you need to be
really careful about the way you
architect your database because it's
difficult to specify exactly which
attributes you want especially if you're
doing ear loading and including other
models at the same time so a lot of
times it means
architecting a database a little bit
differently and storing you know
creating a new table to store the bulk
of the data for an object and keeping a
separate table for the the main data
that's listed most often and and you can
easily over Cory your database just
because it's so simple to construct
queries with rails because they yeah so
he asked why refactoring code is
difficult with Ruby and the reason is
because there's so much code generation
and things like that going on and
there's there aren't like IDs that can
it's a big dynamic language so the IDS
can't you know you know you can't right
click and you know it's ID support manly
but also the nature of Ruby makes it
really hard to develop good IDE support
so this is kind of our production
checklist just some simple
recommendations I would HIGHLY encourage
anyone who's plans on deploying the
rails app in production to get to svn
set up right away before you start
development and then when you're ready
to deploy get Capistrano integrated
Capistrano is a deployment utility that
enables you to basically manage your
entire server from your development
machines so you can configure it to
migrate your databases to deploy your
application to rollback your application
and things like that and then we use
mongrel as our kind of like our
application container and we get a
little bit more performance reliability
out of that than fast CGI second bit of
advice is that rails logs all of your
requests in the production logs so it's
important to filter out any sensitive
data otherwise you're going to have some
logs floating around with a lot of
interesting information like credit card
numbers or passwords and then obviously
rail store sessions in the on the file
system by default so you want to move
that over to like an active record store
or even better store it in memcache d
using memcache d i don't know how many
you guys are web engineers over here i
have experience but one of the most
important things when developing a
scalable application is keeping your
database round trips to a minimum it's
usually not too hard to do and it's
important to look at your logs and look
at the quarries that are going on and
pay attention to how often you're using
the database and then catch things when
you're using it too much if you can't
figure out another way around it a
important thing is ensuring that your
web server serves static files
like I said Ruby is a little bit slower
and as a result it's slower serving
static files also you're not going to
have that many rails processes that
you're gonna be able to fit on one
machine and when someone comes to your
site they're going to request a lot of
images and it's pretty easy to screw up
your apache config and not have it store
files to test that and make sure you get
that right and then security views is
pretty standard but you know rails it's
so easy to do all this cool javascript
stuff but it's also very easy to forget
to encode some user editable content and
introduce a cross-site scripting attack
it's a little harder to introduce sequel
injection but still possible and also
because rails as a single attribute
primary keys you can run into security
issues with that if you don't pre load
your data before updating it and make
sure the user has permissions to access
it and I say don't rely on with scope
because what scope doesn't always work
when you're bloating including other
associations but we actually modified
rails to make that work all right so I'm
gonna start to give you guys a glimpse
into competition and our architecture
I'm going to cover a few specific things
I don't think actually our overall
architecture is that interesting but
some of the specific problems we solve
this we're not fully restful yet so I
would encourage anyone developing rails
application to read up on restful design
i've been using it with a lot of clients
lately and it really helps you simplify
your architecture and make your code
more maintainable and we're going to be
start to doing more of that with
competitions in the future we have lots
of many to many relationships which
enables us to distribute competitive
information throughout the application
and make it accessible everywhere and we
use the access everything design kind of
paradigm or whatever and we find it to
be very useful and very powerful so we
have an axe is notable which allows us
to attach notes to any object with like
a single line of code axe is laudable
which i'll be talking about later
provides pretty flexible and powerful
logging support to any rails model axis
securable enables us to do things like
email validation easily and access
taggable is pretty standard and access
mutable allows us to attach media and
things like that but we don't have that
in our current release it's in our
development version so we have 19
controllers and 18
models @ so the biggest performance
issue we've encountered is waiting on
other services if you're doing any sort
of mash up or something like that and
you're loading data on your servers and
not on the client then this is something
you should consider paying attention to
this is a problem because like I said
rails is currently single threaded I
believe it's still single threaded some
correctly but as a result you're going
to use up a lot of memory for each
request because you're going to have one
process servicing every request in a
typical rails process ranges from 17 to
70 megabytes and ours are actually
running around 70 because we're using
our magic and other libraries and you
can't count on third-party stars respond
quickly so the first step to mitigate
this issue is obviously caching and this
will reduce the number of times you half
the way we implemented a simple thing
called an object cache it's probably
about 20 lines of code and the way it
works is we pass in a key the amount of
time we want to cache and then a block
and the block can do anything we want it
to do in this case it's probably
requesting third party data if the data
in the cache is expired or is not
available then the block gets executed
and if it is available then we return it
and we can easily move the cash from the
database to memcache d or whatever we
want I think actually rails may have
some built-in stuff to do this kind of
simple caching as well but it's so easy
to write we didn't we didn't bother
looking for it so this will reduce the
average wait time but we're still going
to have the worst way time and in our
case that's forever with alexa going
down pretty often and not all terms of
services are going to allow you to catch
their data so the next step to
mitigating this that we try it out was
pretty easy to get going and that's just
using timeouts so in this case I'm
showing how you can use a timeout when
you're getting some data from another
web service and the way it works is you
pass in the number of seconds you want
to wait for or the maximum number of
seconds you want the request to take and
if that time is exceeded then it will
throw an exception and you can catch
that exception in your cash encode and
return either out of date content or no
content as a result but the problem is
you're still going to have to wait and
even three seconds can be a long time if
you have a heavily used application and
you only have ten processes serving it
so some users are eventually going to
get blocked
so the final step is asynchronous
polling the way this works is you start
up a new process or thread to
communicate with the third party service
at the beginning of every quest and
ideally this new processor thread is
going to use a lot less memory than a
standard rails process so it doesn't
really matter if it has to wait around
on the server for a while and one way
you can do this is using background drb
which is a for Ruby or you could
actually integrate with another service
like something in Java or something like
that if by the end of the request the
data is available then you can return
the data as normal but if it's not
available then you can use Ajax to
continually pull the server and the goal
again is if you're pulling the server
you want your rails process to return
right away if the data is not available
and that's why you use polling and if it
is available than to return it and this
will reduce the number of rails
processes blocked on third-party
services and therefore increase the
number available to service new requests
I mentioned earlier that rails makes it
really easy to write create JavaScript
and you don't even have to actually like
no JavaScript most of the time or even
be familiar with the libraries when
you're using RGS templates and that's
good because enables you to code in this
the same language all the time and use
the technologies you're already familiar
with in this case it may be like a rails
are HTML template or something like that
and you don't really have to get around
and muck around with like the document
object model and cross browser issues
but the problem is if you want to use
rails for all these things then you're
going to need to hit the server a lot in
order to get the new data when you could
be doing a lot of the work on the client
otherwise so the way we worked around
this in order to continue using our same
view logic is we created these things
called JavaScript templates this is
pretty basic stuff so what we do is we
have this helper method called define
jazz template we pass in the name of the
template and then we wrap a section of
code or a template with this this tag or
in this case it's actually a method and
then we have these as in red you can see
a syntax for having variable
substitution on the client side and then
when we're on the client in JavaScript
we just call a single function called
rendered as template the name of the
template and we pass any substitutions
we want to make
a template now the cool thing about this
is is that the defined you guys template
function actually renders a text area
around that section of the template so
that any code that's in that template
doesn't actually get executed until we
want it to be executed with the variable
substitutions in place and this enables
us to hit the server less for things
like in place editing on our comparison
matrix when you click on a field there's
like every field needs a form to edit it
and we don't have to render that form
ahead of time or hit the server in order
to get that form for that specific field
because we already have the data in the
comparison matrix available we just have
to stick it inside of a form so we
render the template ahead of time and
then we use the variable substitution
and create a dom logic out of it and
render that to the client page without
ever hitting the server okay so now I'm
gonna talk about activity logging
activity log is pretty common with any
application and if you're not doing it
you probably should unless it's a big
performance issue there's a lot of
problems associated with activity
logging that are pretty common and a lot
of people encounter them the first one
is that records can be created update
and destroyed in multiple places and
it's just kind of a pain to always worry
about writing logging statements in
those places and you know a lot of times
the logging statements are specific to
whatever it is the type of object you're
logging and so it can be tricky and
painful to do that and a lot of times
you just won't do it because it becomes
such a pain the other problem is that
each different record has different data
that should be associated in the log and
you need a uniform way to capture that
data and display it and then finally
after records are updated deleted it can
make logic log objects go stale and out
of date so if there's something like you
have a log object it says so-and-so
added a new picture and that log any
that log statement has a link to view
the picture and then someone later
deletes that picture you want to have a
way of elegantly removing that link and
still maintaining your performance so
this is an example of an activity log
that I built recently and that we'll be
integrating into competition but here
you can see it's a pretty powerful
activity log it displays the type of
content that was updated the action and
you can see it's not just simply added
updated or destroyed there's also
published and other actions and then
there's a log specific string render
and that's rendered depending on the
type of object which is being logged and
it links to the object that was edited
and in the case of the second entry that
you can see meekness was removed so it
actually removes the link and anywhere
else in the log back in time that link
is also removed so the way we do this is
with the axes laudable plugin we created
it's as simple to use on your model you
define axes law ghable and then the type
of data that attributes on the model
that you want to capture every time
you're logging in and it actually allows
you to provide like a hash of parameters
and you can actually get at you can
access the related models as well and
then in your controller you can easily
set up logging by wrapping whatever code
is doing the logging in this whatever
the model name is dealt with logging and
then you can pass in some state as well
because a lot of times when you're
logging you need to like record the user
that did it or the project they're
working in and things like that and the
really great thing about this is you can
actually put that into an around filter
in your application controller and have
it work throughout your application so
you never have to worry about it again
so it's pretty neat and then we have a
system for creating views so that you
can access that data that you captured
for each object and render it
specifically for that object so it makes
it really easy so the way we designed
this is we have this class and first can
talk about actually the bottom one a log
object the log object is uh is created
for every other object that you're
logging so if you have an object like a
person every time a person gets its
first log entry recorded we create a log
object for that and we store the data
that we want to capture about that that
object in the log object and I'll talk
about why we do this later then log
objects themselves then have log entries
and log entries are the entries for
every action that happens to the object
which is associated with the log object
and here's a little diagram the
advantage of doing it this way is that
every time an action happens to your log
of all record you're actually updating
the data or serializing the data into
the log object in the database and that
when the actual log will record gets
deleted you still have reference to what
the last state of the object was in your
log object and your log object doesn't
take up as much room so you can keep
them around for a lot longer and then
finally also all your log entries are
referencing your log object such that
any time your log abul record updates
the state of the log object the log
entries get updated as well see your log
goes back in time and stays stays
accurate if like a name of an object
changes or something like that and then
we support like more advanced usage in
this case I'm showing how you can use
the this is a pretty common two rails
like when you're including models when
you trying to get a lot of data and you
want to include other models we use like
the same syntax here so in this case
we're using access log oh we're
including the name of the object in this
case the type this is for media the ID
of the media and then over here we're
saying also get the media and include
the name of that so it'll actually
evaluate all that and then we can also
do things like media dealt with logging
and specify an action so instead of just
saying that this object was updated we
actually want to signify that was
published and so this whole valles to do
that and then we also allow you to pass
in other data as well in case the data
that you want isn't available on the
object you're actually logging so I'm
going to post the code the social codes
this plug-in on our blog and I probably
put up a project on Ruby Forge so people
can use it I encourage you to check it
out and contribute to it and tell me
what I did wrong or anything like that
or tell me how you like it and that's
about it also post the presentation as
soon as some you were taking shots of
this thing so we can post the slides up
in our blog as well which won't make
life easier we're happy to talk and
answer any questions anyone might have
we'd love to get feedback on our
application and we're also interested in
potentially hiring people in the future
and we get a lot of resumes sent our way
right now and we can't really work so if
anyone's interested and then the ones
looking for freelance work or full-time
work please feel free to give us a an
email and we'll get back to you as soon
as possible question
yes just one actually yeah yeah yeah of
course um so he asked what was your
first question okay so how many stories
we started we started with just one and
we were able to handle all the load from
or all the press from TechCrunch
ventured me Mashable and all these other
blogs without any problem that's what
Mongol and we actually only run we
started off with about five long ago
processes running and then because of
some issues with the Lex that we bump
that up to 10 now we could probably get
by with less but typically our requests
get serviced pretty quickly dessert and
we're running my sequel oh sorry the
question was what database were running
and we run we run my sequel in in case
you guys didn't know that was a database
we actually develop on Windows I used to
work at Microsoft a lot of people that
Microsoft do you develop on Mac to be
honest but I'm familiar with Windows I
like Mac theater yeah any other
questions yeah if you want to switch to
another language or environment later on
well your database architecture is
typically going to translate directly
over because Ruby or rails encourages a
pretty good architecture a pretty good
database design so that'll be fun so
actually you want off too many issues
with migrating data but in terms of
redesign your application I mean realist
is follow a pretty standard model view
controller architecture and design so
there's a lot of other frameworks and
other languages that also fall out
design but I mean if you're switching
languages or switching languages so
you're going to be rewriting most of
your code and also Ruby does have some
powerful language features like passing
your own prox and kind of cool syntax
and things like that and a lot of those
those things don't directly translate
into other language as well so that you
can run into some issues there
I'm saying is it worth the company's
money might if i paid my people my
engineers to learn this pay them to
learn it and start off with ruby or is
it um well i mean it depends on what
you're developing if you're trying to
develop like a huge platform that
millions of other developers are going
to build off of or something like that
then Ruby might not be the right choice
but if you're trying to solve like a
domain-specific problem then Ruby is a
great choice and it's definitely worth
your money and I think most developers
can pick up Ruby pretty quickly thanks
can just being still like YouTube or
Facebook oh um see theoretically yes but
the issue is that here you're like raw
performance per server because Ruby is
interpreted and interpreted slower than
some other languages and the way it's
implemented will just run slower so
theoretically you would need a lot more
servers to have the same scale but the
actual architecture of rails is a very
easy architecture to scale like you can
easily spread out your database is set
up replication you can add more
application servers because you're using
processes and not threading that also
makes it easier to start adding new
servers because you're not depend upon
thread specific state so you're saying
depends on what site you're building you
would depends on what languages yeah I
mean if you think you're going to become
youtube I would consider some other
things potentially but if you don't
think you're gonna be YouTube or you
think you're somewhere in between um
Ruby's probably a pretty safe choice did
you look at other frameworks for
instance like spring yeah I would get
all this because spring is really unique
and very powerful so I have a features
so yeah yeah it was a big job a guy
before this and I used a high of mine
which is similar to spring and I use
tapestry as well spring is a very broad
framework used for a lot of different
things not just web and most other web a
lot of web technologies integrate spring
into it the issue with spring that I
have is there still a lot of extra
configuration code that you're you know
a lot of extra stuff you're using to
plug services together and things like
that and it's necessary because Java is
not is dynamic and there's not as much
flexibility in Java as there is Ruby but
with Ruby you actually get a lot of that
stuff built in for the language using
like modules and mix-ins and stuff like
that so it's not as necessary and what
would you not what type of things would
you not use Ruby on Rails for um i
wouldn't use Ruby on I would think
before I use Ruby on Rails if there was
a very large development team that I was
managing and I thought I was going to
write a lot of code over a like a period
of like eight years and a lot of people
were going to build off that code
because Ruby is not it's not the best
language to write api's in because the
code access security isn't really there
which means you can't really restrict
what people do with the libraries you
right so if like if you were Microsoft
developing some API and you your
developers had a lot of like internal
methods that they used internally but
they didn't really test that well and
they only wanted to be used internally
you wouldn't really be able to protect
other users from starting to get out
that with Ruby things like that become
issues and then also like I said
refactoring code and Ruby can be a
little more difficult because it's
generating a lot of code at runtime and
that can make you know large-scale
development efforts a little more
difficult it your engineer quality has
to go up a little bit you have to write
a lot more tests so but otherwise I mean
for any any small specific problem or
even bigger problems it's definitely
worth considering first you just got it
how to weigh the pros and cons and
things like that uh I'm curious about
your business model oh sorry i'll let
you go let them go first cuz got the mic
i'm curious about the business model are
your subscription based is that so we're
gonna start having premium subscriptions
soon but we're going to keep the pricing
really low our competitors are up in
like the twenty thousand dollars a year
range and we don't plan on getting
anywhere near that are our end business
model is a little more interesting but
we can't really get into that right now
starting with subscriptions though
so traffic anytime we get a pres bush
will get it around like 1000 to 2000
visit today with TechCrunch we got
around 50,000 visits and then on normal
days we have a couple hundred users
logging in well i'm using restful
architecture and some side projects all
the time our application does have
restful architecture our competitions
does we just didn't write it when
restful support was baked into rails so
we're not really prioritizing it but
we're just using it as we build new
components and things like that there's
certainly issues when you try to like
force a restful architecture on your
entire application but that's not I mean
you just if it becomes too much of a
pain you just don't do it that's the
only issue we really ran into we
actually yeah he asked what kind of
debugging and testing tools we've been
using we don't actually use any fancy
debuggers I'm not really a proponent for
stepping through code unless you're
starting here like jumping into a huge
code base with millions of lines and you
really just don't know what's going on
we actually just use the break point
method and rails and Ruby script break
pointer and then we just look from there
and then in terms of testing we just
write unit tests and things like that
all the stuff that's baked into rails
the question
okay yeah yeah take the mic as I think
we're on the video here I some people
were talking about a little bit but yeah
so I'll have a company funded next week
and I am a reasonably experienced
programmer myself but it took me a while
to get decent at rails and so all the
people i'm likely to hire people who
already know Java framework and if the
mandates to go fast and build something
in four months and concern that I'll be
hiring a bunch of people there's very
few people you can hire with rails
experience now so i'll have you hiring
these java programmers so uh how long
does it take right like to get really
good at it so i switched from java
trails in a month and i built like
competitions and two other projects at
the same time so i picked it up pretty
quick i think i think what you'll find
is most really good engineers have
already learned Ruby so if you want to
higher quality engineers they're
probably going to have no trouble
learning ruby if you just want to hire
cheap engineers I mean that's another
issue it does take a while to learn I
mean there are some it's a very implicit
language or the framework it actually is
very implicit so it kind of takes a
little while like a month kind of
getting comfortable with it and learning
how to browse through the documentation
and sometimes even look into the source
to get answers to your problems but once
you kind of figure out what the basic
design philosophy is of the people who
created it it becomes very very powerful
and you end up writing a lot less code
so I sometimes get you know kind of
incomprehensible error messages that are
deep in the framework code does that
still happen to you guys I think I think
you become kind of accustomed to what
those error messages mean pretty quickly
and it is true that you will run into
some things like that but it honestly if
I give an mms which i can probably
figure it out within like two minutes so
and i haven't been using it for more
than six months seven months maybe
with your background in Java did you
guys ever look at groovy and grails
which you're prolly yeah actually uh
well so groovy is that have anything two
tops tree noto its language today I
never they added support for din
tapestry no I didn't look into groovy
too much I've seen it but I'm not too
familiar with it what was the other one
grails so the rails clone ok yeah so I
didn't get tonight because I probably
picked up rails before that'd and then a
second part of the question do you find
do you find the power in the the Ruby on
Rails stuff is it is it so the community
and the way they think and build their
their tools or is it the language itself
that sort of provides the power um I
think it's a combination of both that's
probably easy answer but uh no honestly
I think Ruby the language itself is just
very elegant and the way you can use
closures and pass her own prox so simply
and so elegantly in the way it looks so
much like what other languages have to
create components horn things like that
encourages like the type of design that
I think a lot of like experienced web
engineers really like and it does it
with less code and as a result I think
and combine that with really smart
people working on it and it all kind of
works out well let's wait till we get
the Mike Harris this both gabba and Ruby
basically duplicated the maturity of
small talk so do you know if he knew
small talk before you find Ruby really
extremely easy yeah unfortunately I
didn't use small talk before but I I've
heard great things about small talk and
that's probably a very good observation
you've mentioned components and Java
versus Ruby a couple of times are you
talking about like dependency injection
sort of know what I'm not really talking
about dependency actually so that's
another issue that you don't really need
dependency injection and things like
that with Ruby as we were talking about
earlier but when i was saying components
i was referring more to component
oriented frameworks like tapestry server
faces and then like dotnet and things
like that are going towards component
orange
design which I was a big proponent of
for a long time hey i just referred
about the trading and processing so can
you explain more like this is the most
reading in Group E oh no Ruby supports
threading but rails was designed to be
single threaded so it I think there
there's like lots of hooks in the code
now where they're trying to work around
that but in general it's a little bit
easier to scale a single process
architecture but I mean it's easier not
necessarily better so I think I think
that it with time it should become
multi-threaded so it doesn't have a
concept of execute trades and things
like that just like in the Blodgett you
have xq threads and worker threads that
you know you can create threads but the
actual framework itself is using like oh
no it's not using thread safe like
variables and things like that so it
wouldn't work when it is multi-threaded
and a lot of the plugins don't either I
actually don't think the link yeah it's
still interested well it would give more
thought forms but you would share the
memory that Ruby is loading so that
that's the big pitfall of the for
reading did I find any other questions
yes oh yes if I had any idea about the
difference in productivity from Java and
spring and all those things I found in
my productivity probably went up 100
fold and that's not joking I was like a
very good job developer that the
vertical content management framework
that I wrote it took me about a year I
was working in Microsoft at the time I
was working pretty hard talking about a
year I probably could rewrite it now in
rails in 20 days so I mean that's me
it's not quite a yeah 10x but you know
there's other things when you're using
javascript and all that stuff my
productivity sheets to the roof so uh
other questions are you considering a
Web API are we considering Web API yes
we are so we will have ways of inserting
clippings and things like that into our
application via API and other things
like that also integrating with
Salesforce any other questions I can go
on google and spend the morning and look
up my competition let's say the five
major companies that I'm competing with
so and I can get a lot of information
just doing my own searching using google
so what exactly are you providing that I
can't do in a morning I'm not quite sure
yeah that's that's good but you know
what exactly am I getting from you guys
that I can't get just googling myself on
it with a day or two you know set aside
to do that right so all that Andrea asks
answer those questions well the first if
you're just by yourself I mean obviously
platforms collaborative that was one big
aspect but we're not so much focusing on
the news yet as much as as the ability
to ongoing have data about your
competitors that you can pull meaning
from so if you find a company's doing
something a platform will allow you to
to start sort of describing what they're
doing so maybe someone announced a new
thing and there was an acquisition
ongoing you can use the comparison
matrix to describe what they're doing
and then we can basically use that data
to in a
quantitative fashion pull out reports
and help you segment your competitors so
you can say based on what someone is
doing this is a direct competitor and we
can use self-organizing maps to kind of
figure that out and you can segment so
these are direct these are sort of
tangential this one poses the biggest
threat and then ongoing just kind of
figure out are there any opportunities I
should be going after I think of that
nature I think I think right so yeah
right now the advantage we have because
he's talking about a lot of things we're
gonna do in the future and there's
actually some really interesting these
we're going to be doing in the future
but right now the advantage is that for
one if you have like queries like a lot
a lot of times Google's going to return
a lot of junk when you search for a
straight competitor named we allow you
to modify that query and then store it
so that everyone your team has access to
it so you have this one place where you
go every day to check up on your news
and right now it's a little painful
because you have to click on each
competitor but in the future we'll have
like an aggregated dashboard of all your
news also we pull like a lot of data in
at once that you wouldn't otherwise look
at every day so it makes it easier to do
things that are usually painful and then
we also enable you to clip that
information and share and talk about it
with other people and build a comparison
matrix that looks better than most
excelled matrices do so that's that's
what we have right now but our long-term
goals are actually much different from
what you can see on the site united's
just just one more thing I'll go with
this just to make it accessible you mean
that in a number of ways from a pricing
standpoint but basically if you've never
really done an actual analysis of
competitors and broken down this kind of
you know threats and opportunities and
done what sometimes it's called a SWOT
analysis see that's the strengths
weaknesses opportunities and threats of
your competitors it's really going to
help you sort of its provide some best
practices for doing these things so
helping you structure your thoughts we
used to do the same thing we used to go
to Google used to look at news for
someone like us we've got competitors
that are the enterprise you've probably
got close to 30 competitors if we
include everyone that's tangential like
jobs bought might be one competitor now
they're not direct we still want to
monitor them and watch the stuff they're
coming out with and make sure that we're
you know really targeting the right
thing and then obviously is in an
organization we've got more than just
one individual the collaborative aspect
is big so disseminating if
mation pulling out reports things like
that yeah John spots Google yep I know
we're trying to solve a specific problem
though and make an application that's
highly tailored for that job spots a
little broader so it's harder for people
to pick up for a specific purpose thanks
um so you guys spent a little time
talking about some of the drawbacks and
certain I guess cases or types of
applications where you would think twice
wasn't ready to talk about having been
in the ruby on rails community how you
think some of those things may or may
not get resolved over time it was a
community development going and are
these things going to be addressed soon
and I asked that sort of from the
perspective of this probably lot of
people in the audience is sort of
wondering you know should we do this
should we invest should we train our
people etc and if you can kind of look
into the crystal ball a little bit
having sort of actually really invested
in yourself and tell us what you think
it's going i think that would be helpful
yeah so um there's been a lot of talk
about a digit just-in-time compiler for
Ruby being developed and that's supposed
to be released I I'm actually not as
involved in the community as I should be
as I'm working most of the time but uh
last I heard it was going to be released
sometime this year towards the end of
this year some people are working on it
there's also integration with running
ruby directly in java and even compiling
to java code which would be awesome i
think so that's being worked on in terms
of like issues with active record like i
said there's like some sort of
relationships and data quarries that you
can't really represent right now with
active record a lot of those things are
being fixed like i fixed some of them
myself in our own code base it's not
it's I mean everything's pretty well
architected so it's if you want to get
in there and do it you can yeah so I
mean in the last six months alone we've
seen tons of issues solved that we had
to solve ourselves when we first
launched competition and so things are
going very very quickly so I would say
that the majority of the problems that I
addressed with the framework itself will
probably work themselves out within a
year and then in terms of the
performance of Ruby that should be
worked out in the next year or two so
upside right two questions
the first one I just wanted to make sure
I understood the point of competitions
right so what I'm doing when i use
competitions is i'm setting filters to
trap information about my competitors
i'm not actually using it to view
information that the competitors post
about themselves oh you guys sheena you
can do both actually but so we are we
pulling like the competitor blog posts
as well on the competitor dashboards so
that's information they post about
themselves but we also then you know
make it easy to set up or we actually
automatically set up queries into Google
Blog search and Alexa to get traffic
information and news about them and
right now like the way we're discovering
information is actually very limited and
we're totally willing to admit that we
don't discover that much information for
you but we do do more than what other
services do we do in one place and we do
use it ourselves every day we're very
reliant upon it and we enable you to
organize that and talk about it easier
so in the future we're going to do much
better discovery of information and much
better analysis of that information
which includes things like natural
language processing to filter out news
that isn't relevant to your company and
helping to find related competitors and
things like that oh and I don't know if
I don't know if he was dogging us but we
don't share data between accounts if
that was what you're saying so if your
competitors on our service we don't like
let you see their information or bad or
recommend competitive extra yeah so we
want to make that clear so we don't we
don't plan to do that either so you feel
safe okay so the second question then
was let's say in a year your your your
demand is huge you know you are you to
you chuck Ruby on Rails and rewriting
something else well hopefully in a year
the performance of Ruby will not be an
issue so I mean it takes a long time to
develop an application in Java if you
can get out the door 100 times quicker
developing a ruby application and then
you just have to invest some more
hardware that's usually worth the cost
um just address the issue about Ruby's
performance um the vm is called yard
okay written by Colicchio sada it has
been merged into the 1.9 tree so you can
check it out it runs almost all the
tests the early benchmarks show it's
about five times as fast as the existing
ruby 1.8 it'll be part of ruby one
point 9 which will be released Christmas
Day this year and Matt's never misses
his deadline so you know everybody says
Christmas Day do you think yeah yeah
dude it'll be released December 25th
this year public that's good to know
thank you are you can i'll repeat your
question if you want to
the lack of static typing oh you mean as
a maintainability issue um no actually
uh I I was worried about that when I
made the switch from Java the question
is whether or not the lack of static
typing in Ruby as a language will become
an issue as the codebase evolves and
gross and my answer to that is that I
don't find that the static typing has
ever been an issue for me I mean when
you're doing web programming you're
typically dealing with requests which
are always strings anyways so you really
don't really have much typing to begin
with with reb web engineering and also I
mean to the fact that Ruby like once you
assign a value to an object it has to
maintain that type and it checks that
from then on out that is I think enough
and in my experience that is all you
really need so that's that's my
experience right I mean it also depends
I think on the quality of engineers and
things like that because you can't do as
much analysis
if you go into the google web toolkit
GWT website they have the compromise
they aware they use Java to develop it
and they convert into JavaScript and
they talk about duck typing and things
like that and people get used to the
code complete of dot and you get all the
properties and methods and all but now
sin if you are starting new and code
complete will really help you because
you don't need to search for the API
look for the exact method signatures and
things like that but Ruby doesn't
provide you that right I think there are
people working on that there's a couple
projects I think funded recently
developing things like that I think
Google might have funded one of them or
just on their little summer code thing
but uh yeah that's true I definitely
when you're when you're learning a
language it does help Dava code
completion in the long run it also helps
out code completion but he's sort of
kind of like with with Ruby in with
rails you sort of it learned to expect
the way things should work and it's
really good at like following that all
the way through so once you kind of
learn what to expect you end up not
having the rely upon code completion you
probably end up becoming a better coder
most of people I worked with the
Microsoft use like Emacs and things like
that without code completion at all all
the great coders so for the most part
you should really like understand your
framework in your language and your AP
is and not be looking things up too
often and if you do need to look them up
I mean it's really not that hard to
alt-tab over to your documentation and
control off and search for something
that you need so yeah it is an issue
though look one more question or zero is
good too all right great thank you very
much
thanks i'll use that occurs thanks a lot
Andrew and Chris for coming to tell us
about their company it looks like this
is by far the best turnout we've had so
far and so I guess this sort of event is
of interest to the community I want to
thank everybody for coming tonight and
also read not I guess we ran out of
these because we had so many people come
tonight so i'm going to read off some of
the information about the the conference
so it's april 21st in april 22nd the
weekend and so the first one this is the
2nd annual Silicon Valley ruby
conference the one we had last year I
went to that and it's a the the genesis
of this sig so we started the sig out of
that conference and it's a lot of fun
it's like I envisioned that it must have
been what the oh the homebrew Computer
Club was like it was a bunch of people
sitting in the room actually mostly guys
kind of like this room and it's like 200
guys in like five women that are sitting
there talking about computers and
figuring out ways to you know make
computers do special things and in this
case all about Ruby there's a lot of fun
it was a great time I encourage
everybody to go I know some people in
this room went so please do consider it
the location is still TBA which is a
shame because I volunteered google and
they didn't want to do it here but maybe
they're going to come back and ask to do
it at Google because it says TBA on the
on the announcement still so we'll see
if you have any ideas for what you'd
like to be presented at this conference
please email me so if you think you
might have an idea get rid of write down
my email address it's G C ola do n which
is great it's the UNIX that's my old
unix handle g Couladin at gmail so
please give me a shoot me an email and
if you have some topic that either came
out of what we talked about tonight or
anything you're interested related to
Ruby or rails please let me know and
I'll pass it on to the people who are
organizing the conference and are there
any final questions or points about the
conference tonight or anything else
otherwise I'll thank everyone for coming
out tonight and hopefully see on april
twenty first and if not we'll see you at
the next one of these which is we may
move it to wednesday's but it would be
in the beginning of may so thanks again
for coming out tonight
right
Oh</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>