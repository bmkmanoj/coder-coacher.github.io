<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>GTAC 2008:  Atom Publishing Protocol - Teseting Your Server Implementation | Coder Coacher - Coaching Coders</title><meta content="GTAC 2008:  Atom Publishing Protocol - Teseting Your Server Implementation - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/GoogleTechTalks/">GoogleTechTalks</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>GTAC 2008:  Atom Publishing Protocol - Teseting Your Server Implementation</b></h2><h5 class="post__date">2008-11-17</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/uRmWTfT91uQ" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">my name is David calavera and and of
course I'm going to talk about item
publishing protocol and how to test your
server implementation so first of all a
little bit out of me I'm from Spain and
I work in a company called 11 870 com or
11 I'd 70.com or what do you want I also
contribute to the server open source
projects like Hudson ornate pins and I'm
a committer of the Apache drop project
so this is the agenda for today first of
all I later gives you some bugger
information and at'em publishing
protocol yeah sorry
i I don't know so well then we talk
about some stuff that we should take a
look at and and finally I'd like to show
you some useful tools to the statim
servers so how many of you are familiar
with sutton publishing protocol well so
well I have three is your questions how
many of you are familiar with atom feeds
and how many of you are familiar with
HTTP well I have i think is the most
difficult question I'd never ask how
many of you are not familiar with XML
let me say so that's what I'm talking
about I'm talking about how to test hdtb
I'm talk about hope this XML and I'm
talking about how to test atom
syndication format so this is just an
introduction to the protocol
specification as a will cover pretty
much everything you can get more in
depth details if you read the RFC 5023
so what's atom publishing protocol it's
a simple protocol for publishing content
on the web it goes original designer for
web blocks but as we'll see it can also
be applied to other areas so yeah it
uses atom syndication format so
resources are represented as a 10
entries and groups of resources are
represented as item fits or collections
and it doesn't only allow allow us to
publish plankinton it also defines the
way
of managing all types of elements like
media files or binary files or anything
so we can find some examples if we use
WordPress and we can manage our blogs
with an attempt at API or it will use me
relax e-governance platform we can
manage all of our services with with
senora attempt at APA and of course most
of the google aps are built on napkin
publishing protocol because I p I
blogger be i do youtube data api are
with an atom publishing protocol
right yeah okay so it goes or HTTP and
it's a rest-based protocol so we need to
find out how the most common HTTP method
works we'll see how how to use the boss
method in order to create new resources
how to read them through the gate metal
hook modify elements to the boot medal
and finally to use the lead method to
remove these resources and of course
atompub uses xml so it's also our next
install protocol furthermore since
people start to use it off site web
blogs they've create the advantage of
ten of extensions in order to complement
the few elements that Adam format first
so we can find an open search board or
urss support or one of the most recent
internet-drafts the item pub multiple
media creation that allow us to create
resources sending multi-party files so
let's look at the whole item pal
actually works it was designed as an
exhaustive protocol so all we need is
you all in order to work with it this
URL will be the end point to the service
document and this document defines the
valuable collection fits that we can
work with it also finds what kind of
data we can retrieve for or add to
specific collection and top of this it
will show us hope we can categorize a
document and it's one of its elements so
once we've got the service document and
the collections you are all that we are
going to use we can start working so in
order to create a new resource we are
send an entry the collections you are
all using the post method and if it was
created successfully the server should
respond with status code of 201 an
allegation header that contains the URI
of the new resource so later if we went
to do if a particular results we can use
that location header that we got or we
can use the Edit link that will find in
each one of the elements or if this is
if the post response contains the
location and the content location
headers and both are equal in means that
we have received the computer source and
we can go we can use it so but there is
no way we will force the feed and
extract an entry because the server is
not required to sign us completely
entries when we retrieve collection p so
this URLs are also useful if we want to
modify or remove our resource if you
want to change it will send a boot with
a modified entry and but to get rid of
it we just need to send out the lid and
if everything goes well the server will
respond with status called 200 so that's
how an attempt at server works but when
we work with media resources the server
behavior is slightly different so we we
have to take a look whoo-hoo the server
works it has to store a reference of the
resources and their meta data so once we
create a new media source the entry got
with the location headers has to edit
links the Edit media link points to the
results that we send but the Edit link
points to the entry that the stores the
metadata so therefore to modify the
source with Senna put to the Edit media
URL but to modify the meter data we have
to send about a boot to the Edit URL and
finally to remove a mute a media
resource will send a delete to the Edit
URL rather than the Edit media you are
on and both the results are the Imperial
and the media link entry will will be
removed so that's how Adam bad actually
works but let's make sure it's working
properly so when we test Adam annular
http-based standards one of the most
important things we need to check is the
response status code so we have to solve
questions such as what happens when the
server doesn't allow to modify or remove
resources Oh what happens when we send
out our resource that the collection
doesn't accept so I event of the most
useful status codes so can anyone help
me can you wonder me with only me
409 sorry nope it's a conflict anymore
01 move it that Miley
and 40 50 method not allowed odd request
what 400 internal server oh yeah to
handle it okay yeah what next so we have
to pay attention to cache controls item
pad uses entity tags and it means that
clients are not sure to receive the most
recent collection vendors so once we
once a new resource is done the server
will send the header etag and we have to
use the value of of this header to
second conditional request so if the
entry hasn't been modified and we send
again with the header if not match the
server must respond with status call of
304 and on the other hand if the entry
has been modified and we sign up put
with the header it max it has to respond
we have stopped to scholar Fort Worth so
another control is your point is Adam
identifiers so every entry must have a
global uniqueid and they have to cover
through requirements out there must be a
valid you are i did must be globally
unique across all atom feeds anywhere at
any time and they must never change so
if the same entry a purse into different
feeds it must have the same ID and there
are no exceptions so we can use our
entry URL because we have brought our
through requirements well it's valid
it's unique and it shouldn't change or
should so actually it's kinda possible
for it to change so we're will building
for example some kind of application
like a block system where our URLs are
made for from dynamic content our disk
cannot change if our yours chain but so
to me user ID is a pretty efficient way
to solve the IDS issue so it's valid its
unique I it never change but whatever
one you choose we have to check that
it's funny yeah check it
it must contain a skin followed by the
authority at us an optionally a query
string and a fragment this is so man I
managing date so it's also an essential
point item formats provides three dates
published create an update but Adam pal
added a new one they edited date and
other we could we could think the edited
means the same as update it doesn't and
most most of the time they should
contain different dates so updated
should be modified when we introduce a
significant change but edited should be
brought up to date when we introduce a
any slight change for instance if we are
writing a post in our blog and we change
a coma for build up for video the edited
date should be Molly file so data
elements are also useful to sort
collections they should be order by the
edited element with the most recent
edited entries coming first in the
document and we also have to ensure that
if we modify one of these centuries the
field is properly sorted so what about
date formats they must conform the RFC
3339 so a dick Carter must be used to
separate date and time and a seat Carter
must be person in absence of the
numeric times some opposite so that
season yeah so and finally a date values
should be accurate as possible so for
example it would be generally
appropriated for a publish for a
publishing system to apply the same
famous time to serve our entries well of
course one of the most important aspects
to take in dragon is the interest
content format we must ensure that
entries that clients em out as well as
we are creating or well formatted so its
entry must contain a valid ID a title
and updated date and then edited date
and on top of this if we don't provide
another day an alternate link we must
provide your content and if this content
is not in line or using code with base64
we should provide a summer as well so
more work we have to check the texts
elements type I mean elements like title
summer your content can contain
hypertext or markup language and we have
to ensure that it's valid that that
doesn't contain cross-site descriptive
with them or is appropriated so we also
have to be extra careful when we manage
media resources
when a new resource is done the server
has to create a new entry that
represents these results and that entry
has to be valid we need to to fill all
the elements and we also have to ensure
that their the item content include the
the source you are all because and well
this this URL doesn't have to be the
same as the Edit media you're all and it
usually gives you a visual
representation this resource like a
photo for these stunts yeah sorry
duty adding cunning yeah we are so hot
no no we have to fill this this these
elements with something but now ? is not
you GF of course yeah we also have to be
careful with question marks so ideally a
deep is to use the slag Heather to fill
these elements for instance or we can
use the multi-part media creation
because it allows us to to sign a media
file and and then entering in one
resource so Adam pal also allows two
categories resources there are two types
of categories fix it categories and I'll
fix it once yep so fix categories never
change and we have to ensure that
clients don't try to use elements not
included in it so if the server receives
an unexpected category its response with
owners with an error code but unfix it
categories can be modified course so if
a client had secretary directory we have
to check that it's included in the
document if it if it doesn't already
there so a denier extensions can be
tricky as well so let's be careful so
there the schema in the atom syndication
format dozen doesn't provide full
valuation for fifth count four feet
extent
rather this Jesus kima escaped the
stanchion elements even when we
extensions contains field or other
entries and in consequence the most
common mistake is to forget name is
pages nobody put so we have to take this
into account and we should validate both
the feed document and the extension
documents apparently well I have to say
that we don't need to write all this
test that there are several tools that
can help us and I think if we follow the
protocol specification we don't need to
implement any functional test because
all these pistols can't help so the
first one is the fifth validator
that is it's a most useful validation
tool for Fitz it works or with Adam as
well as RSS or other formats and it
includes more than a hundred test test
cases and it recognize most of the
standard memory spaces is written in
Python and we can also install it
locally in running to our server it
shows the results as an HTML report and
we can find issues that the document
contains and how we can solve them well
another useful tool is a pee pee test
client it's also a pass on script and it
allows us to test basic aspects of the
Adam pally specification well to me is
its skillet feature is that you can
record the test cases and write it again
and again and again and it generates a
38 structure with all the results
including the version numbers and we can
check all these results and it can as
well so the results as an HTML report
and therefore it enables to find the
reference of the specification points
that our server breaks well if we don't
win if we don't want to play with the
common line we can we can use a desktop
test client so I jump at this client is
it's a testing plan that only works on
window and I thing is switching in Ruby
that it's not open source so I am Not
sure but it's useful because you can
manage several services at once but
oh one last but not least it's the atom
publishing exerciser or the ape and in
my opinion is the is the most complete
tool to test item five servers it
includes more than 50 deaths cases it's
not only at the sting tool but also an
attempt at common library we can we can
create new application with this library
is written in Ruby but it works on JRuby
as well and in fact some test cases use
Java libraries and so depend wholly on
JRuby so we can we can use the app from
the command line with right tasks like
this
think so oh we can run it in the web
server it's not right sorry so why not
its most valuable asset is that we can
get quite easily extended we can add new
education methods it's currently
supporting bicycles WSSC and Google
login we can create new report formats
it's currently supporting text HTML or
Adam reports and of course we can add
new test cases to 2d eight so let's look
at how to add new Bally ages move I
think I have the problem with Max
nope oh yes
ok
hello no it's the same book
were
right yeah it works yeah so am i right
hand I as an attempt at server installed
machine Google work and we can find the
service document
this is the service document it has two
collections that except Adam entries
adventurous and one more that except
everything so on the other hand I have
the source code of the ape so I can
execute break death
I think again what we can raise anything
so I can run my web server as well
Oh cubes
so yes this is a configuration
directorate it's it's located in in the
user's home but again you can verify it
and it has a config file called a
actually what is here well in this file
we can we can disable all the foul test
if we don't want to use or we're going
to specify the name of the collection
that we are going that we are going to
use so if I execute the ape with my
server
with all the debt default test disabled
I can see some information on the server
so it has two collections that except I
don't men trees and wear collection that
accept anything so now again write a new
validator for
the
what is what it is
oh no I don't know Williams
Oh
with the demo
I'm sorry but I don't know what is what
here
so if we use textmate I have some
snippets that can help us well a
validator is just a ruling class
integral a to require presence of means
what did you want to test so we can test
this the service dog or we can test an
int'l collection or or even we're going
to specify
well
that's so I know I'm going to Thurston
and reproduction so this is just basic
this so i want to show
the title
so if it works fine they're not opt ins
should include their the entire
collection and three collection
so if I execute it again so I can see my
my new validator here these are very
basic that's a so I angle I'm going to
disable the be always works
but i think i have to restart it
but now we have a taste we have more
info and well my my atom server has six
hours learning and we can see it in here
and we can see the server responses so
that's it if you have any questions yeah
to the first to the first media
collection that PA yep no yeah media
collection means a collection that
doesn't accept entries Arjun amateurs
but you can specify a just a collection
I want this a collection you don't need
to write entry collection or media
collection yeah yeah enter collections
accept other entries and media
collection doesn't accept eternities
let's see
what yep no no no I have to restart the
DI because the things yep yeah yeah yeah
now it's a it's running all the test
cases
that's my background yeah I i started to
to building atompub service and i need
something to to test it and well the egg
was originally written by Tim Bray and
I'm I'm also one of the developers
no no no it was just accidentally smells
no so thanks for your attention</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>