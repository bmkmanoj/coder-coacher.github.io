<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Playing to Lose: AI and &quot;Civilization&quot; (Soren Johnson) | Coder Coacher - Coaching Coders</title><meta content="Playing to Lose: AI and &quot;Civilization&quot; (Soren Johnson) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/GoogleTechTalks/">GoogleTechTalks</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Playing to Lose: AI and &quot;Civilization&quot; (Soren Johnson)</b></h2><h5 class="post__date">2010-08-30</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/IJcuQQ1eWWI" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hi everyone I'm Matt Landis with ngd you
and it we're thrilled to continue our
serious games Tech Talk series with
Soren Johnson as a designer his work has
included some of the most complex and
commercially successful titles out there
civilization for spore other web based
strategy games and others I'm sure you
can name his designer notes blog and
design of the times column inspires and
informs both novice and experienced
designers and he continues to push the
envelope for complex games that engage
players and give serious game advocates
and educators like myself hope that we
can use these games for learning and
growth and change and it's a pleasure to
welcome Soren Johnson all right thank
you it's great to be here so let's get
started so a little bit of my background
I've got a master's in CS you know I did
a lot of my work previously in AI which
was kind of my first entrance into the
video game field big projects I've
worked on SIF three so four so four was
a project that kind of led from
beginning to end so I was very very
details of that project I came on for
last year and a half of Spore
did some work with AI and helped design
sort of the latter half of the game here
after that I worked on sort of the a
small prototype strategy station calm
which is an attempt to build basically a
model site for strategy games on the web
is actually built entirely with GWT
which I found to be kind of a really
nice toolkit and I'm currently the lead
designer of a web-based MMO done inside
of EA 2d which is a small group inside
of the EA games label but today I'm
mostly here to talk about AI and here's
a little outline of what I'm going
through first of all I'm going to define
two types of AI that people typically
aim to make one all sort of categorize
as good and another type I'll categorize
as fun and I'll go into the details of
you know what the differences are then
I'll talk about civilization because the
AI for that game kind of fits somewhere
sometimes uncomfortably between those
two extremes and
about some of the issues with that
always a popular one people discover the
DEA cheats and they're very upset so
I'll talk about all those issues and
then talk about the development of the
AI and actually the I to savour was
released publicly about maybe six months
after the game shipped so if anyone
actually wants to look through that I'll
provide a link to that code and
hopefully we'll have time for some Q&amp;amp;A
so what what do I mean when I say good
AI versus fun AI so good AI the idea is
you're trying to build an AI that is you
know literally trying to to beat the
player that's that's it's it's pure goal
it's meant to be a substitute for a
person when you know you can't find some
else to play the game with you or you
don't want to wait for someone to do
that turns etc etc funny I is a game
where you're using B algorithms as the
actual content in itself that's all it's
you know these are generally
single-player it's all focused on the
players direct experience you know it's
not about you know trying to replace
another human so you know sort of the
classic example of good AI of course is
something like deep blue you know which
is now capable of playing at the very
highest levels and you know this is you
know just you know you won't play chess
and you don't play against a human you
know that problem is now solved and
people who people are into this field
sort of get take a perhaps a perverse
pleasure in showing us a lot of the
games we enjoy are now over if you want
to play against the AI that no matter
what they could beat us it was proved a
few years ago that checkers have solved
you know no matter what you do the AI
can always find a way to beat you or or
you know draw and you as I mentioned for
you know so for humans substitute you
know people want to play all sorts of
different types of you know war games
strategy games board games and you know
it's simply that convenience it allows
them to practice on their own or maybe
that's just you know the way they prefer
to play they don't like the intensity of
playing against and uh one of the humans
or a friend so with fun AI the
algorithms themselves are the content
now the two examples I put up here are
black and white and the Sims you know
these are both examples of
games which have a lot of AI in it but
that AI is all about behavior you know
what and learning in the case of the the
creature and black and white you know if
you slap it around it does one thing if
you pet it it ends up you know
developing a different way and the sims
is sort of this little you know ant farm
type game where you place down you build
your little house place Daniel furniture
and what makes the game interesting is
seeing how little you know AI entities
you know move around the environment to
neither enjoy their lives or you know
die because their bladder explodes and
here's here's an example that I'm going
to draw on a lot in this talk it's a
game called desktop tower defense which
is a really fun little flash tower
defense game I recommend everyone should
play it because it's a really neat
little game but essentially in this game
you have well I'm sorry you have what
are known as creeps come from one side
of the the grid and they're trying to
get to the other side and your job is
you're trying to prevent that and it's
essentially a game about pathfinding and
what that means is you're going to place
down these little towers which are those
little square things you see on the
screen here and a is going to route
through them and try their best to get
to the other side and you want to you
want to make that as hard as possible
for them want to inhibit their progress
so in many ways this is a game about
pathfinding essentially that's that's
what makes the game interesting if it
didn't have you know a good path fine
engine you know it would it won't be
nearly as fun and the other main point
about funny eye is you know focus is
really on the player and one of the best
examples of this is the concept of a
grow in a memos like World of Warcraft
which which I'm showing here and the
idea here is you know a grows is is a
great case of funny I because it's not
meant to be challenging it's meant to be
understandable comprehensible and for
people not familiar with this basic
concept in MMOs
in sort of classic MMO combat
you have three different character types
you have your tanks your healers and
your DPS the tanks are there to absorb
damage they're the most best defended
they have the best armor for example the
healers are meant to heal the units as
they get hit and DPS characters are
there to actually damage the enemies and
aggro is a sort of internal algorithm
that determines who the AI is going to
attack which you know who the monsters
decide to target and what aggro does is
as you attack as you tech the monsters
it starts deciding okay that guy's been
doing a lot is that guy's been attacking
a lot so we're going to start targeting
him or that guy's been healing a lot so
we're going to target him but the game
gives you a number of ways to control
aggro you know there's various spells
you can use to sort of trick-trick the
AI to attack the wrong characters you
can you know there's you know big web
pages and strategy guys devoted so you
know how to control aggro how to you
know move your characters around so they
don't suck up too much aggro because
essentially what you want is you want
your tank to get all of the aggro of the
monsters and because the tank isn't the
one that's necessarily doing all the
attacking that can be tricky and you'll
see that this is really essentially a
puzzle it's not really AI you know they
they're this is what I'm showing right
here is actually a world warcraft mod
something that people can you know put
inside of the game where they can you
know get quick information about who the
a AI is a growing
who they want to attack and and how that
works and this is a sign that Blizzard
actually wants players to be able to
control aggro it's an active gameplay
element it's not something that the AI
is trying to defeat you right because it
would be very easy for their AI
programmers to essentially say you know
aggro is really kind of a dumb idea we
shouldn't let the players be able to
influence it we shouldn't let the
players be able to find out you know who
is Agron who we should instead you know
always focus on which character is doing
the most damage
but that's not actually fun you know
it's more fun if you know aggro becomes
this little gameplay element that you
can manipulate you know the game is
about the player after all so
essentially you have this spectrum which
goes from you know good AI on one side
which is of Klat with excuse me chess is
sort of the classic example and funny I
on the other side with desktop tower
defense and you know there's I'm going
to talk about a few other games and
where they kind of fit in Starcraft sort
of fits on the left side of the spectrum
here especially because it's a sort of
symmetrical game you're you know you're
when you're playing against one or two
or three AI opponents they're really
playing the same game as you are
essentially I don't mean you know the
balance between Zerg
Protoss and Terrans but I mean that like
they have the same goals they're playing
on the same map you know it could be a
human they could be an AI it's not
really going to matter and also there's
no real diplomacy in StarCraft which is
important something I'll talk about a
lot later a game like here's a mine
magic is more on the fun side of the
spectrum you know this is a game where
you're you know you're taking your hero
character around the map you're bringing
an army with you and you're fighting a
series of battles but the game is
essentially giving you a series of
challenges to overcome it's not you know
it's not seriously trying to need defeat
you in the same way it's a more of an
example of an asymmetrical game now
civilization kind of fits somewhere in
the middle and the main reason it's not
on the far left like Starcraft is
because of the diplomacy issue which
I'll talk about later but let's talk
about a few other things that define the
difference between good a AI and fun AI
one is how the rules change over time on
the far extreme left a game like chess
the rules are very fixed you know
they're they're not going to change so
that the AI becomes sort of a known
problem go is a good example of this
because go AI is actually much much much
worse than chess AI so this is a this is
a sort of standard problem that
you know the AI field is focused on
whereas on the other side of the scale a
game like desktop tower defense actually
changes changes monthly you know they're
constantly twiddling with rules adding
new towers changing the way the mobs
work the point is not that there's some
you know fixed fixed game that they're
trying to you know improve the AI
against it's something that's sort of
constantly changing symmetry is another
big issue when you're talking about good
AI generally speaking the game is going
to be very symmetrical you know all of
the opponents are playing the exact same
type of game on the far right side you
know it tends to be very asymmetrical
where you know it's sort of like player
versus environment essentially you know
you have it have this challenge and
you're facing entities that maybe have
AI but they're playing a completely
different game from what you're playing
usually the only question is whether you
can overcome that specific challenge
generally speaking when you're talking
about these type of games good AI tends
to be multiplayer focused and you know
funny I tends to be single player you
know symmetrical games tend to be mapped
to multiplayer very well because the
idea is you know you just have to to
humans seen down facing so facing off
against each other and they I really is
just a pure replacement another issue is
what type of tactics are available when
you're writing good AI everything is on
the table you know you're you're free to
choose from any tactic that a human
might choose from when you're ready
funny I you very much actually want to
limit the tactics that your AI is going
to pursue similar to my example earlier
about aggro and Wow in that you know the
the AI designers purposely chose to take
some things off the table to let to let
their AI be manipulated with a grow in
desktop power defense for example also
you know you you don't really want the
mobs to develop intelligence so that
they're like okay let's actually gather
our strength and let's wait you know
let's form up a big force for
and then we'll go through the maze you
know that's something a human might do
if they were in control of the mobs but
we don't want the AI to do that because
that's that's not a point of the game
you know the point of the game is that
the player can anticipate the way the
mobs work and anticipate the rhythm of
the game when you're measuring the
performance of your AI there's also a
difference usually when you're talking
about good AI you have a very objective
measure you know we kind of have this
concept of how chess AI has been
improving over the years you know every
every few years at a time and it's easy
to measure that but when you're on the
right side of the scale it's completely
subjective right it's it's just one of
these things that depends upon sort of a
gut feeling about all your players
having fun or not it's almost more of a
puzzle type thing and when you when it
comes to the Turing test you know when
you're on the far left side of the scale
you your goal really is to pass the
Turing test and certainly with games
like chess and checkers you know they
probably have done that unless they're
actually prepped to good at this point
that that may be a question but they can
easily pass that if we want to on the
right side of scale though it's really
irrelevant no one thinks that the mobs
in desktop tower defense you know are
controlled by human it's obvious that
they are not but that's not really a
point so you know here's a sort of quick
summary of the differences between
between the two and this is one you
might want to sum that up you know good
AI is playing to win
funny eye is essentially playing to lose
you know you're you're providing an
interesting challenge for the human but
your ultimate goal is you know you want
the human have fun you want them to win
at the end okay so what about the Civ I
you know where does that fit in before I
dive into that I'll give sort of a quick
history of civilization
now I assume a lot of you have played it
here so I'm probably not gonna go into
too much detail but you know sort of a
classic turn-based game about the
history of the world
Sid Meier first evolved back in 1991
it's had four versions so far although
fifth one is coming out in a month I
guess and there's usually been a version
every four or five years Civ to added
more units you had a different view
created scenario editor Civ 3 came along
in 2001 that was the first one I was
involved in that a culture which
controlled your borders and resources
which you know limited what what you
could build which were kind of the big
big sort of gameplay improvements there
so for was in 2005 added religion and
great people those are the big the big
changes but we also went through and
kind of try to simplify all of the the
design craft that had been developing
you know over the first three versions
of the game to kind of pare back to the
parts of the game that we really cared
about it's also the first game where we
really focused on multiplayer from the
very beginning that you know it wasn't
something that was just going to be sort
of patched on as an afterthought so you
know where does the civic I fit like I
said it's it's somewhere in the middle
so that can that can lead to some issues
because it's not necessarily always
clear where what you know what solution
we should use praveen you know the
various problems you face as an AI
developer so for example when it comes
to whether it's fixed rules or revolving
design Civ is kind of both you know
there's some core things about the sim
franchise that haven't changed in well I
guess in the 20 years it's been around
but obviously with each version things
change so it's not like we can still use
the AI that Sid wrote back in 1991 it's
had to be rewritten every time and with
every expansion pack and even to some
extent Racal game you know you expect
that the your AI opponents are playing
the same game as you are you know
they're simply China while you're India
or Germany you know they're just they're
just a difference of sieve is generally
known as a great single player game you
know there is a multiplayer community
but that's
we're probably 95 percent of our players
spend the time is in the single player
it is a game with limited options and
some people might actually not assume
that you know right off the bat but
there's actually a lot of things we
don't let the AI do because we feel like
it would be annoying they would be you
know types of play that we only really
want that we only really expect humans
should do and a lot of these issues come
down to diplomacy there is there are
some subjective factors here but there
is there definitely are some objective
tests we you can use to make sure our
city is still going well we have ought
to be at some automating testing with
safor where you know every night I could
see whether the AI was improving or
getting worse and so you know there's
some are weights are some ways to do it
objectively and this is probably maybe
the most different one it it people
would like it to pass the Turing test
but it never will it completely fails on
the Turing test and that's because we
really want it's kind of a funny thing
about humans themselves when we write
the AI for sieve we actually want them
to roleplay you know we want Isabella to
play certain way we want Montezuma to
play certain way we want Gandhi to be
nicer than the other leaders perhaps but
even though he's not always but but when
you play humans
you don't actually really expect them to
roleplay I mean they're going to do
whatever they can to win you know
including some very nasty things that
maybe like I said that may be okay from
unzoom up it's not okay for everyone
else so trickier is trying to you know
strike a balance you know where what
should we do with the SIV a I when it
comes in these these really fuzzy areas
where it's not clear whether it should
be good AI or funny I and making this
problem worse is that every player is
different I say there's really kind of
three types of players for for SIV there
is the challenge players and these are
the people who really try to work the
way up the the difficulty scale you know
they want to eventually beat the game of
day at D they oh that's that's what
defines SIF for them there's a sandbox
players you don't really care you know
they they probably come to sieve from
other games like SimCity or something
like that and they're just kind of
enjoying the experience of going through
history and you know and playing with
the different world wonders and with the
different leaders and you know just
seeing how things go then there's
probably also the the narrative players
who really get into the concept of
role-playing you know where they really
want to play a leader a certain way and
they really want the AI to have to have
it so their own personalities and their
own styles so for these players you know
we really it's really important for us
that the AI maintains a memory of the
things you've done but if you stab them
in the back earlier in the game they're
not going to trust you later in the game
and you know furthermore it's okay to
even let the a I fall for traps you know
that if the player has you know gone to
a lot of effort to trick them into
thinking that something is one way when
it's really not you know we want the AI
to make a mistake you know that gives
the player a lot of satisfaction you
know at the end of the day though you
know we really want the players to win
or to at least understand why they lost
that's really the number one thing and
so on top of that we need difficulty
levels for a number of reasons first of
all it lets the sandbags it lets the
sandbox players off easy if you play a
game on settler on so4 it's very very
hard to lose in fact the AI will never
declare a war on you period you know I
mean you can you if you really try you
can lose of course but you know
generally speaking if you just kind of
flow through the game you're going to do
fine but on the other end of the scale
difficult levels give challenge players
something to aim for you know a goal you
know working their way up up the scale
and you know different tactics are
available at different levels which
makes the game you know there's certain
things you could just never do at the 88
you know if you want to if you want to
compete and vice Leon vice versa on
settler so it kind of you know just sort
of changes the nature of the game so
that leads to the question of sort of AI
cheating because the AI and Civ is so
complex there's no way we can just
change the difficulty making the AI
dumber
instead it usually comes down to giving
the bonuses on the lower levels and
giving the penalties on the higher
levels and AI cheating is a very very
very subjective issue and in fact humans
are notoriously poor at judging cheats
I've had years of experience of you know
looking through the forums seeing how
people respond to the games and it's
always very interesting to read so many
times they perceive the AI cheating when
it's not cheating and when it is
cheating they don't notice it you know
it's um it's very very strange and I
know how many people have maybe played a
game called Puzzle Quest but it has kind
of a very interesting issue with
cheating this is a sort of a variation
of bejeweled you know which is a match 3
game you know you're trying to arrange
you know three colored items in a row
and then they disappear and things fall
from the top of the screen and if you
get lucky when they fall it can lead to
chains and you get you know a series of
a series of matches which gives you an
extra bonus so the issue there is when
it's the AI Stern if they get that kind
of lucky drop from the top people
perceive that the I got lucky
you know when the human gets a lucky
drop they always perceive that well
that's because I was smart and I you
know arranged it away so I was you know
my luck would be it was more likely that
was gonna succeed but when the AI gets
it you know it's a dirty filthy stinking
cheater all right are we still on that
just one projector okay he's getting
back
but yeah in uh but the the AI developer
Puzzle Quest has sworn over and over and
over again the di does not cheat it's
just purely random and you know I mean I
can't know for sure but I've had similar
experiences so I believe him
and in fact I you know if I was talking
to my would recommend actually
anti-cheating where they make sure that
the AI just not get lucky drops because
it's more important that the human feel
comfortable that the AI AI isn't doing
something nasty behind the scenes than
to actually have a fair playing field
even if it means handicapping the AI
that's totally fine so there's a lot of
sort of philosophical questions with
cheating but let's get into the details
here so obviously on the far left of the
scale no one wants your chess AI to
cheat you know yeah that's not going to
work they should be stealing pieces
while you're not looking and on the far
right of the scale I mean you don't
really play like you know if if the AI
star warping units around the grid of
desktop target offense you know you just
quit you know it does it would be you
know but you would assume actually it
would be about not really cheating now
for a sieve as I said yes we definitely
cheat but you know how should we chew so
first of all here are the production
modifiers now when you play a game a
sieve on the noble level it's
essentially even where all the texts and
buildings and units they all cost the
same for the AI as they do for you on
settler everything cost the AI 50% more
so it takes some slower on diety
everything costs them 40% less and this
has a huge impact over the game because
of course you know Civ is one of those
games where it's kind of a slow slow
slowly snowballs you know where you know
if if you're able to get your grain out
faster that lets you grow citizens
quicker which lets you work more plots
which lets you build the next building
faster and you know you you it sort of
grows exponentially and here is the the
same idea in graph form see it's a
pretty big difference but actually even
is not really even and this is something
that's bothered a certain subset of our
players a lot they we told you know we
said okay noble is essentially the even
level but it's not really there's a
number of other cheats that the AI gets
it gets bonuses when you're when it's
attacking barbarians it doesn't have to
pay the same amount for unit support or
even upgrades it doesn't have the same
issues with inflation and there's a
reason for that the AI simply needs more
help help in this this area you know
when the human plays the game they have
they don't think of it this way but they
have a lot more options available to the
AI does they can reload right they can
open up the world builder and just give
themselves some free units they can and
even something more basic like you know
when you play the game of Civ oftentimes
people will just leave all of their
cities empty in their interior of units
because you know they know that you know
these units these cities are safe
they're far from their borders and of
course they always have the option of
reloading if if something crazy happens
there's no way I can have the AI follow
a similar tactic right you know if I
said okay you know it's a V I leave half
of their cities empty you know they'd be
wiped off the map very quickly so it's
it's just not option to do those type of
things so the question of like is there
an actual level of a difficult level of
sieve for where everything is completely
even you know the ads playing the exact
same game that's really essentially an
academic question and it's one that I'm
not really concerned about I'm only
really concerned about the player
experience and in that sense you know
cheating should not be linear you know
there's there some things that VI is
going to need help with at every level
regardless so I think this is this is
important however it's very important
that the game never feels unfair in Civ
1 there was essentially free wonders and
what that means is not just production
bonuses but every once in a while if as
if one of the I was falling behind
CID wrote in that you would just give
you the pyramids for free give the AI
the pyramids for free or you have the
Great Wall so on and so forth and this
is something that just felt very wrong
to players especially of course if they
were aiming for the same wonder and it's
funny the difference between
where we give the a I just kind of a
little bonus every turn you know they
maybe can still build the Wonder before
you do but somehow it feels more fair
because you see the AI is actually
building the Wonder instead of just
being granted in it even worse though
was that you have ganging up on the
human which is that in Civ 1 there's
literally a piece of the code that says
if the year is 1900 and the human is in
the lead then declare war on the human
and people suspected it and it's true
but they also they also hated it it's
really that was probably a mistake
so with Civ 3 and so 4 we moved to human
blind diplomacy which means all of the
diplomacy calculations they uses to
determine who to attack when they're
willing to make peace who they're
willing to trade with at no point as it
does it ask whether the person that's
talking to is a human or not however
there are definitely lots of information
sheets instead of three and SIV form and
this is kind of a learning process
because if the if the human can see
behind the curtain it can still feel
unfair so it's something we have to work
on and my favorite example of this is
the amphibious assault problem which is
sort of an interesting exploit that
players found after SIF 3 came out
basically doing in the phoebius assault
is a very tricky proposition for an AI
programmer and so one things we did is
okay we have four transports loaded up
with goods let's look at the IC let's
look at our enemy cities and try to
figure out which one has the least
number of troops in it and we'll go and
you know we'll try to invade right next
to it players figure this out and they
figured out this way to essentially you
know sort of trick the AI or they said
okay we're gonna put one unit we're
going to leave this city empty because
we know the AI is coming with an evasion
force so I see the AI is going to start
routing all the chips towards that city
but when it gets just a turn or two away
I'm going to move a unit into that city
and take a unit out of a city that's way
on the other side of the coast
I think you're already anticipating what
happens because yeah the essentially you
see the entire fleet turn around start
going around goes and of course want to
get there you just switch them around
again and then turns around you got the
AI stuck in different loop looking like
a moron
so you know that's that's not good at
all although I do kind of admire their
you know their ingenuity we random we
start randomly updating the assault art
said okay we only change our target
reate turns every 12 turns you know it
kind of changes randomly we also ignore
temporary data like units so the human
could never just kind of change things
from turn to turn to mess around with
those circulations because really I
actually didn't these are the type of
thing that I don't trust myself to do it
right so that there's there's no way a
human can figure out the way to exploit
it so let's talk about diplomacy right
now because this is this is kind of a
big issue for you know this the sieve a
I you know when when this is okay for
the ally the AI to ally with each other
does that feel fair to human because if
you're facing a big you know AI alliance
you you know are they are they aligned
against you just because you're the
human or is it because that actually
what makes sense in the game is it okay
should the human be trusted ever like
let's talk about the fake peace problem
right the in everyone sure has probably
done this at some point but you know
you're playing game a sieve you're
beating down some some poor opponent and
he comes begging to you for peace says
here I'll give you 200 gold if you just
end war with me and you're like okay
sure I'll take you 200 gold and next
turn declare war right
you know because humans of course can't
be tricked should the AI do something
like that right this is an example of
something where we take an option off
the table and so for we kind of solve
this at the very top level where we just
said okay if you if you make please you
can literally cannot declare war for ten
turns but it's a good example of
something where you know the the AI
cannot really play the game the same way
that the human can you know we want we
want the AI to be role-playing where the
actions they they make seem like what a
a I character what a historical
character would do not a human that's
trying to gain the system that's not
what Raymond for and then there's the
tech training problem which really shows
out that you know cheating is relative
like here are these these three true
sentences that I'll read here you know
we know that when you're playing a game
the AI should be trading text with each
other they were all agreed with that the
AI should be trading texts fairly with
each other it shouldn't be just swapping
texts between each other because like oh
hey you're an AI - okay well we'll give
you a better deal and then it's also
true that the human has the agency to
tell cell checks cell technologies
cheaper than they would normally just if
they you know feel like it's to their
advantage you know the human can can
even give away text if they like there's
a problem here these three sentences
cannot all be true at the same time
there is sort of an issue which is
should the AI be able to sell text
cheaply you know if you're if you're
saying the da I should be able to pursue
all the tactics that a human would then
the answer would be yes but
unfortunately that leads to lots and
lots of problems you know namely that
the main problem is it felt like okay in
civvy I went out and said okay I'm gonna
have the AI tried to trait X the way
humans would so for example if you're if
you're playing you know you're the human
and you're playing the game
Germany is your neighbor they're very
weak they only have a couple cities and
they come to you asking for ironworking
right you've got our key and that's a
very powerful tech you don't normally
want to trade it away but okay Germany's
weak Germany will never be a threat
doesn't really matter to me if I give
away ironworking
however Germany only has 20 gold to give
me right clearly our working is worth a
lot more than that but I could never get
more than 20 goals from Germany anyway
so my choice is either 20 gold or
nothing so in that situation I might
decide okay I am going to trade are
working for much less than it be worth
normally to Germany just because I want
the money I'm going to be better off
than I was after me
metraid fine I could say that's that's
good strategy the problem is is that if
the AI pursues that same route it may be
doing everything fairly you know
underneath the hood but from the players
point of view all they're going to see
is all of the AI essentially you know
moving through the tech tree at the same
rate and also at a very fast rate and
there'll be these these AI sibs out
there that are very weak but have
actually quite a lot of technologies
because you know all the AI is
essentially arbitrage with each other
trying to get these these small gains by
training what all their text in fact
this was referred to by the name of tech
whoring inside of our fan community so I
tried to solve this problem with with
the SIF for AI and I think it seems like
it basically solved it wasn't as big of
an issue with with that game which is
basically that I said ok I'll let the AI
spender sell its technologies for a
third but if at all possible you try to
make up the difference in gold
it only trades on certain random Turing
intervals so it's not just constantly
happening every every turn and almost
most importantly there's kind of a
high-level refuses to trade with logic
that's going on where even if we can
make a deal there's some reason why I
don't like you you have it you know you
have a different religion we have closed
borders we've had conflict in the past
the AI is used that same same logic
between each other as they do with a
human and that seemed to give the system
enough friction that it prevented that
problem you know were they I can still
under cell text but not to such an
extremity you know here is really point
to important to go back to the question
of what's the whole point of cheating
you no are you no are you trying to
write the best day I possible you're
trying to beat the human are you trying
to be fair you know cheating is simply
for challenged which is one source of
fun right you know when when they as
cheating you're trying to provide an
interesting game for the players who are
looking for a challenge but you're
trying to do it in a way where it's
still going to be a fun engaging
experience and something that's not
annoying or make the or make the player
suspicious of AI or think the whole
system is trays you know Jerry rigged
against them
which leads to this other issue of to
what extent do we design for the AI
because it's a submit that's because Civ
is a symmetrical game every option that
we include in the game has to be handled
by the AI as well as for the human which
means there's going to be there's going
to be some options that you know might
be a good design idea but if AI just
complete can't handle it we may have to
take it out there can be some exceptions
to that rule but only if they come in
very specific you know very very you
know small places things like nukes
nukes are very powerful but generally we
basically just disable them entirely for
the AI so they don't have to worry about
handling them and players don't have to
worry about handling them on the
business end I guess but but there are a
number of design changes we made over
the years with the series especially
against f3 and so for where we change
the game design in a way that really
helped the AI managed is Empire things
like moving from localized unit support
where every cities supported a specific
number of units to global where it's
just you know all comes out of your
National Treasury the idea of closed
borders where you can't just wander
freely through someone else's territory
enforced peace treaty which I mentioned
earlier which is the idea that when you
make peace with someone you literally
cannot declare war again for another ten
turns this ICS is a term called means
infinite city sleaze just kind of a
degenerate strategy where players
essentially found a city on every other
tile on the map and you know that's
something we would never want the AI to
do and we don't really want the human to
do it either but most importantly you
know we don't want to have to build the
way I in a way they're supposed to
compete with that however every one of
these times when we make a design change
in a way to to help out the AI we're
also making sure we're not just
designing simply for the AI each one of
these examples is a change that the
human would enjoy as well players really
like the fact that there
was actually meant something now and
they hated a in sip three they hated AI
is just sort of randomly wandering
through their territory so it was a
change that was really embraced by the
the fan community for first if for same
with enforced peace treaties because now
diplomacy and multiplayer games can be
actually interesting you know if you
come to me in a multiplayer game at Step
three
I say hey let's make peace I'd be like
well you know it makes no difference
whether or war peace I still can't trust
you but so for if I say okay you know
here's peace that means we literally
can't attack each other for 10 turns you
know it actually has some meaning now so
I want to take a little bit time here to
kind of talk about some more details
about the the Civ a I so one this thing
that's kind of unique about civilization
is that the AI has always been written
by the game's lead designer which i
think is it shows that the AI is not
it's not really afterthought it's really
much very much thought as a core piece
of the design you know the way the AI
behaves is just as important as how the
gameplay mechanics work it's not
actually a very you know large chunk of
the code and as an example this is this
is the overall so for codebase yai is
maybe just you know 2 to 3% of it and
the big issue with AI to me usually is a
question how do you test it you know it
can be very fairly easy to write some AI
and you know it looks like it works but
you know you don't really know until
you're able to like you know stress test
it essentially you can't really do
traditional testing where you just which
in videogame development means you take
four six eight testers you give them
some checklist and the other play
through the game make sure the AI does
does you know this would that the
problem is there's just so many
variations to a game like soup and so
many things that we're not even to be
able to dissipate ourselves as designers
but that's not going to work so we
usually used essentially a two prong
approach where we had some automated
testing you know every night we would
see you know how the AI has changed from
the previous days build but then we also
gathered about a hundred of our hardcore
fans to play the game for a year year
and a half before we released that made
a huge difference because they found all
the things before we shipped they
usually get found after
we shipped so we were able to you know
fix those things early another thing
that's important about the CVI is it's
what I could have term soft-coated which
that means there's no there's no AI
scripts there's no specific build orders
in fact there's no enums in the in the
code at all
like for example you might imagine that
in the code for frigging like Civ
there's a list of building enums you
know where it's you know zero equals
temple and one equals barracks and two
equals granary it actually was
essentially the way it worked in Civ 1
but something we've moved away from over
the years where everything is
essentially data-driven you know all of
those concepts exist in XML files that
can be changed peer lis as data and you
know we can't even you know the AI has
to anticipate the fact that you know the
this concept of a temple might disappear
you know when you might someday decide
just to take it out or add different
types this leads to less brittle code
you know obviously if you have some sort
of hard-coded build order if the game
balance changes you know that that
really changes the unit suddenly now you
know this this whole strategy doesn't
work
don't lose electable AI which just kind
of can be kind of a mixed blessing so
what well let me give an example here
what this means if you had you know an
enum for a temple inside of the function
where you decide what building to to
choose you'd have something simply like
this you know if this is the building
give it a give it away to 20 and that's
not the right way to that's not the
right way to do it instead what you want
to do is break down the temple you know
look at the temple at a high abstract
level what does it actually represent
well a temple gives you happiness and it
gives you culture so instead let's
assign values to how much happiness it
gives and how much culture and beyond
that you know maybe maybe the city isn't
even isn't unhappy to begin with in
which case now the the happiness that
the temple brings my city is irrelevant
so now suddenly we have a much more
nuanced view of how to give value to a
temple something that could handle the
only type of building we create that has
these type of has these type of values
further generally speaking with the eyes
making decision it uses what I would
call probable probabilistic reasoning
which is we look at a number of factors
we assigned weights to them we adjust
those those values according to the
situation we add some random noise and
then we finally you know come out with a
decision and here is a an example of the
tech value function which is how it
decides which technology research first
obviously this is a much bigger function
in the real game but here's you know
kind of a smaller one so first off you
know it says does this tech provide
irrigation in that case give it a
certain value does it give open borders
okay well if it does have I met anyone
because I haven't met anyone that's
irrelevant if I have okay give some more
value do I actually have coastal cities
because I don't have coastal cities it's
unlikely excuse me that I'm going to be
able to do any trading with them yet
okay I do all right well give a higher
value and then finally add in some
random noise at the end so in a nutshell
this kind of describes how we make the
decisions the nice thing about having
soft co dai is it enables essentially
very data-driven mods double your
pleasure was a very popular mod for Civ
3 or essentially they doubled the game
you know they added 100 buildings add
100 technologies added a couple hundred
units all doing things that we didn't
necessarily anticipate originally in the
AI can essentially handle it because it
uses it looks at buildings abstractly
not in terms of this is a temple this is
a barracks this is a bank so they can
you know create new buildings that do
things very differently in the AI can
still function fall from heaven is a
very popular mod from so for that's
essentially the fantasy version of Civ
and it may even added a magic system
into the game to change the way you can
promote to promote your units to to give
them spells for example and similarly it
had you know building types and
technology types we just never
anticipated and the AI was still able to
handle it I mean obviously not necessary
as well so could the core game because
that's how the AI is balanced for but
still handle it pretty well so we
released the the AI code first
for about six or seven months after we
shipped it essentially allows you to
compile a custom DLL which replaces not
just the eye but actually all of the
core game code you know the code that
determines how texts are research you
know how buildings are built how
diplomacy works so and so forth it was a
hundred percent in depended the engine
so it doesn't know anything about the
graphics or the sound I don't think it
even necessarily needs to be know much
about the operating system even it just
simply extends the end you can use it to
extend the game functionality like for
example if all from Evan they added a
magic system which was only possible
because we allowed them to build their
own game DLL here's a link to the the
SIF for code is easy to find you just
type in m so for code or our AIA SDK and
I'm sure you can find it and that's it
and looks like we have a few minutes of
questions so I'd be happy to answer
anything I had a question about
risk-taking as opposed to randomness
which is what I really like when I would
play these games with a human and then
afterwards you'd be like why the hell
did you do that crazy move and he would
be like I was just going for it man
does the AI ever do that and when it
does these weird things does it ever
sort of log it so you could sort of see
afterwards like oh that was a weird
thing it was trying it wasn't cheating
it wasn't she um you know there's so
much the so much kind of noise and
unpredictable news that's kind of
inherent in the system UCI is such a you
know a giant giant beast that I would
say that sometimes an appetite mostly
that was handled at the high level with
the diplomacy right because that really
changed what the AI was deciding to do
and so that was kind of caustic question
of how random do we want the diplomacy
to be because usually what you're
talking about we're taking a big risk
that usually involves declaring war on
someone or deciding a bit like I'm not
going to help this guy out anymore and I
think we kind of solve that problem with
AI personalities where some of the AIS
are a lot more predictable than others
when I mean ai's I mean you know
Montezuma bhisma or Gandhi Washington so
if you look in there's actually an AI
there's actually an XML file that
defines the personalities for those very
there's those different leaders and
you'll see I figure with our call now
but you'll see some columns they're
literally like you know randomness or
predictable Nisour which is I think
fairly close to what you're talking
about which is you this is this is the
chance that this sieve will attack a
larger opponent you know or try to build
up an alliance unlikely an alliance
against this guy or you know be really
obstinate in in you know refusing to
make peace even when they showed so yeah
we had we had some stuff like that I
mean it's I'd like to I'd like to I
think we there's more we could do like
I'd like it to do some kind of crazier
things yeah I'd like that break down at
the end like if it was random
whether it should make peace so that at
the end you could see oh wow it like
rolled a really low number so that's why
the hell it wasn't yeah that's one nice
thing about playing a game like the D&amp;amp;D
game were actually shows you like oh
actually this crazy thing happened
because this thing actually rolled you
know as opposed to something else how
much does the AI cheat as far as like
intelligence intelligence gathering so I
know in if it was sift three or so for
that added espionage but generally it
seems like the AI opponents like have
more knowledge about like how many
troops you have then they would have
been able to surmise if you had closed
borders so do they do cheating around
that so they'd actually know whether
you're a weaker opponent or if you're
just faking
yeah that's solves a tricky one answer
they definitely do like they have
complete knowledge but that I mean the
AI is not some sort of independent
entity that's kind of looking into
things like I only let them look at
things at appropriate times if that
makes sense
try think of the best way to describe
this for example I'm not I'm not keeping
track of when units move in and out of
the fog of war because at least a really
tricky AI problem of you know can you
can you move that you know can you move
this direction human sees like okay yeah
I had a bunch of units here and now they
just moved in the fog of war and now
they're invisible well I know they're
there where I can't sees them but I know
I know they're there trying to get the
AI to be able to have a similar type of
memory or the like okay there was a unit
here a couple turns ago it's probably
still in this location but I'm not sure
and that's to fade away over time that's
as doable but but everything when you're
developing a game like this is resource
constrained you know it's not an
academic project right so we have to say
okay is it is it worth trying to develop
this very complex memory system or
should we just simply try to handle this
subjectively where we let the AIC
whatever whatever we want to let it but
not go overboard and that's that's
essentially the line we have to walk so
they know they know everything I mean
that we don't limit them from knowing
anything but you know we're making
specific decisions about when they kind
of like get to look get to peek if that
makes sense
it's cool
and it stuck um some real quick kind of
like series of questions one what the
delay for the release of the AI code I'm
just kind of curious and and also did
you see any with any interesting
contributions from the community that
significantly changed the AI right so
the mods you talked about were you know
more gameplay mods and and then maybe a
little bit about debugging if you want
to work that in or maybe after this line
oh yeah I'd be happy to talk afterwards
sure yeah so there was a delay when we
with the AI code I mean that was
partially just because it was kind of a
hard project to push through legally
inside of of 2k it was actually kind of
something I just kept pushing for over
and over and over again and talking
about until it kind of finally just just
happened you know and it wasn't it
wasn't necessarily an easy project it
than to buy in ah because they'd never
done anything like that before but there
was also the issue of games games like
this are big and they almost inevitably
get a number of patches the first three
or four months after that so we figured
we want to figure to be best to release
the AI code when we knew that the code
base was not going to change and so
that's one of the reasons we did that
and there were tons of very very
interesting things that came came
through obviously there were sort of
interesting gameplay mods things like
fall from heaven there's a very
interesting dune mod there's an
interesting mod where they kind of tried
to recreate Alpha Centauri but there are
also some improved AI mods where they're
simply focusing on making a better AI
there's one guy named Blake from New
Zealand I think who made a really
fantastic one and he eventually got
hired as a contractor to work on the
expansion packs and the work he did I
think was literally just rolled into the
expansion packs so he wrote a better AI
for us and you know we used in paid it
for paid him for it alright so the the
amphibious of us all a thing made me
think of this which is that what a human
being would do in that situation is go
go oh he's using the strategy on me and
I'm not gonna win unless I change my
behavior and they was the human being
would represent and then analyze the
other humans strategy and notice that
these programs don't actually tend to do
that
it would be sort of an extremely soft
coded approach which is like figure out
what your opponent's goal is um I've
noticed you guys don't do this in any
kind of AI situation that because it's
too hard or because it would be too
weird and too difficult
I'd say it's too hard and it's beyond
beyond our resources because what you're
talking about is you need some kind of
higher level AI that's above the AI just
watching the AI right like oh you're not
making good decisions you need to change
this and that means there's a number of
problems there challenges you know one
is you just simply that assumes you
understand your code better than you
probably do and in fact there's been
times we've experiment that and then
what usually happens is like oh wow I
didn't realize that that's actually the
way the AI is making a decision so it's
it's really hard it'd be nice but like I
said sort of follow-up is it a matter of
processing resources or a matter of it's
a matter developer resources I don't
know the processor is the issue it's
simply a question of how how well you
can understand your own code which is
constantly get bigger and bigger and
bigger and more complex okay thanks hmm
okay so I was wondering how often when
you were developing the AI you'd have
like some idea for something that seemed
like it would be really cool then you go
and implemented it and totally sucked or
vice versa where someone's someone's
like oh that's a terrible idea and you
put it in and it just works amazingly
well and also just looking back is there
something that you would have wanted to
add to the AI that maybe they're adding
first at five or and also I guess if
anyone's on VC you can pipe in with
questions as well
right yeah I mean we make make mistakes
all the time all the time that's very
much what game development is all about
although mostly mistake size you think
of are generally game mechanics mistakes
things way we were changing the design
of sethrie and so for with ai ai is
usually catching up to the game design
you know the game design plows ahead in
the humans you know when we're testing
the game the humans are the only ones
who are able to really mess around with
it and then sort of the AI comes up
behind when I think of mistakes it's
usually stuff that comes afterwards like
revealed afterwards that makes makes me
look dumb I guess you know things like
the amphibious assault problem
if there's something I really wish I
could have fleshed out better it would
definitely be personalities like I think
there's there's a lot of space to grow
for that we're you know there are
personalities instance if for but I feel
like they could be a lot deeper a lot
richer remember a lot more things you
know when you talk to them players get a
lot of feedback if you say oh I remember
when you attack me here you know stuff
like that you know that I would I would
like to experiment with that do to
extent do AI see have an advantage or a
disadvantage because of their ability to
micromanage units do they use the same
day unit management for kind of a
default automatic one that's what you
must get or do they do something
different yeah there's a couple examples
of places where it's making decisions
automatically for you especially if you
turn on worker automation or or places
citizens and it is essentially using the
same code as the AI uses the AI has some
micromanagement advantages but I say
those really come to play more in real
time strategy games because time is a
resource you know the human can't be
everywhere on the map moving everyone
around at the same time in a turn-based
game I mean that's what happens at the
highest players who can beat the game at
deity and Emperor and so on they're the
ones who can spend twenty minutes doing
a single turn going through every one of
the cities making put making sure
everything goes in the right box exactly
right although that was actually one of
our high-level design goals as safor was
trying to remove that stuff like for
example in previous SIVs if you had if
your research if you were building a
granary and you had more hammers or
shields and you need it they would kind
of go to waste
so it'd be through the players of
package to go back to their cities and
rebalance that and so for we had those
extra shields spill over to the next
project which means you no longer had to
do that type of micromanagement and that
kind of helps the eye and the human and
as a high level that's what we're trying
to get to where you know there isn't
really a micromanagement advantage for
either the AI or the human okay
I guess another question is what makes
in I think most of the sieve games the
AI for naval combat air combat seemed
this totally different and much harder
for the computer to figure out
yeah naval commas especially hard and
this is this is a problem in a lot of a
lot of computer games I would say the
problem is just that it's is so
orthogonal to the rest of the game you
know sort of your classic land combat
kind of fits in with with a lot of you a
lot of the other algorithms about
determining okay these tiles of certain
values there's a resource here we want
to protect it you know this is this
city's important you know I'm spend a
lot of time thinking about pathfinding
over the land the water everything is
just so much different and especially
when you're talking about in fabious
assaults because it's not just moving
some ships you have to build transports
you have to build appropriate number of
land units you have to move those land
units to the bright coastal cities you
got to move the transports to them you
have to make sure you have enough escort
units you know make sure those escort
units are the same in the same cities of
the transports got to make sure all
those transports all ready at the same
time and you have and make sure that
they're going to path to their targets
so one of them is not going to get their
two turns early compare that to like a
land a land war where you literally
there's like okay get all my offensive
units ready move them towards the front
and go you know it's really an order of
magnitude difference between those
problems and you can see that in a lot
of other games too there's a lot of our
chances have have a problem where you
the AI is just really terrible at
entropy entropy assaults and one great
solution was in the the RTS Rise of
Nations where when you take your land
units to the water they literally just
turn into boats you know they walk into
the water they magically become boats
you just cross the sea and they turn the
land units again I think I think I've
heard step 5 is driving trying something
similar to this okay and I think
generally that's that's a good solution
if you can if it's works for your game
all right
and I just want to pause one second yet
to see if there's any questions from the
VC
that thank you very much thank you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>