<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Angular: A Radically Different Way of Building AJAX Apps | Coder Coacher - Coaching Coders</title><meta content="Angular: A Radically Different Way of Building AJAX Apps - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/GoogleTechTalks/">GoogleTechTalks</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Angular: A Radically Different Way of Building AJAX Apps</b></h2><h5 class="post__date">2010-08-16</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/0iQCLlu1dko" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so welcome guys my name is Michiko
hevery I work here at Google and I
always try to come up with crazier and
simpler ways of doing stuff and one of
the things I got into recently is
actually JavaScript I've only been doing
JavaScript for about two years and you
know that's how I kind of discovered
node.js and just how amazed I was by it
but anyways so on a client-side building
web applications building EDX
applications for those of you who have
tried it it's a real pain how many of
you guys have tried building my bap it
is a real pain in the butt isn't it and
so you know what people end up doing is
they create a bunch of libraries to make
your life easier and I basically kind of
looked at it from different point of
view and said could we build a web app
but just make our life easier not
because we have libraries to make our
life easier but because browser is just
smarter and so this is why I'm saying
what I mean by when I say it's a
radically different way of building Ajax
applications so what is angular it's
kind of hard to explain and so I'm gonna
give it a try
but fundamentally it's not a library
it's not a library like jQuery or
closure for manipulating a Dom it's not
library like closure or dojo for having
your widgets it's not a framework like
Sinatra where is that oh if you play by
our rules will you know we have done all
the hard work and you just plug in your
individual pages here I like to say in
libraries you get to call the library
and in the framework the framework calls
you angular's neither of them what
angular is it's a smarter browser
angular is what a browser would have
been like if it was specifically
designed for building a decks
applications obviously browsers are not
designed for building Ajax apps are
designed for building for showing static
documentation so angular is to dynamic
documents what HTML is to static
documents this slide over here is gonna
make a lot more sense after I give the
demo but you know every single kind of
system has kind of a Model View
controller everybody says that it has
completely different meaning - if you
talk to five different people it will
probably have a different meaning in
this world that I'm gonna present I just
want to
now that we do have a separation for the
model-view-controller what the view is
in our system is the pure HTML what the
model and the controller is JavaScript
really model is the JSON and the
controller in our world is the
JavaScript that you have right and I
made a couple of services which is stuff
that's useful for building web apps but
the key thing that makes all this thing
possible is two-way data-binding and
we'll talk about all this stuff later in
a second so really the core of it is the
two-way data-binding
so let me give you a demo so as I said
earlier what we're going to end up
building by end of today is this buzz
client but I'm going to start with a
very very simple demo and that is this
so here we go so if I have a simple HTML
like this which I'm sure you've seen
before and the really interesting part
is this you know have an input field
that says world and I would want to say
hello world right here and what I really
want to say the system is look take the
inputs field over here and put it over
here right now if you open this up in a
in a browser it looks like this and most
importantly it doesn't do anything right
this is the standard static document
that we're all familiar with and it's
all boring so how can we teach a browser
new tricks so we do this by including
the angular script tag inside of it and
again I want to point out that I'm not
really teaching I'm not really calling
any code right I haven't changed
anything I haven't written any extra
code the browser just became smarter all
of a sudden so if i refresh my browser
all of a sudden world gets copied down
here now not only that as I type it
immediately copies it over this is what
I mean by data binding it's literally
moving the data over because I said that
that the the name here and the name
there is one of the same thing
ok so how can you use data binding if
you do something interesting well let's
see
darn I forgot my cheat sheet one second
my cheat sheet is this so if you wanted
to talk to Google Buzz there's a
particular URL we can hit and Google
Buzz will give back our data and so now
the hard part of a building web
application is how do I take this raw
JSON data and present it to the user in
some kind of a form so how can we do
this well the first concept what we have
done here let's see we I mean I've
already included it buzz that JavaScript
right here which is empty so I'm going
to declare a my application let's say or
buzz demo and one of the things we want
the buzz demo to have is access to
resources and I'm sorry this is kind of
complicated so I'm gonna have to copy it
over and what this basically says is
that you know if we go back to oh here
we go
you know see this complicated URL up
here it's JSON well this is where you
dropped the name etc that URL is
essentially this piece over here it says
well this is the URL that you have and I
want you to talk to this URL using the
JSON P protocol and the callback for the
JSON P is this thing be familiar with
JSON P folks some of you guys may be
okay it's just a way of fetching the
data from the client and most
importantly I'm going to name this
particular thing called activity because
that's what the Google Buzz uses they
call it an activity and I'm gonna give
it two methods called get and reply so
if I say activity dot get it will take
the self into visibility so this thing
will become visibility but if I could
say replies then the self will be
dropped over here but
the comments will be dropped up here and
then a user ID and activity ID is what
the user will have to Superbus apply so
basically I'm building a kind of a
language for talking to JSON stream that
Google Buzz provides okay now the other
part is we have some of you guys are
familiar with juice all right so we have
dependency injection in here and so we
want to say we want to inject resource
and that's the resource here okay
now this in itself won't do anything yet
but what we want to do in in our HTML is
you want to say actually I want to put
some behavior some controller behind
this view because HTML is just two views
so I'm gonna say controller is equal to
buzz controller and inside of my buzz
I'm gonna declare our controller so I'm
gonna say function buzz controller and
in here I'm gonna say buzz proto type
and let's make a method called fetch and
let's keep it simple here I'm gonna say
this dot I think I called it once I can
hold it activities this that activities
is equal to this that activity this is
the guy which we declared up here get
that's this method down here and we want
to call a get on user ID is Google Buzz
right and so in a constraint in a
constructor of this thing we're gonna
say this dot fetch okay so when the
controller comes up it's gonna call the
fetch method and the fetch method will
go and fetch all the activities for
Google Buzz now that is not gonna do
much yet so let's leave this demo over
here and say pre activities is equal to
and with a little bit of luck
I've made a mistake all right what did I
make a mistake on oh I see
waha all right I think this were very
good so what what has just happened what
I asked the system to do if you look at
our HTML I simply said instantiate the
bus controller in the controllers
constructor we called the fetch method
and a fetch method maybe I should put
this next to each other like this the
fetch method assigned all of the
activities from the JSONP into the
activities variable and all I'm saying
here is print out the activities
variable so that I can dump it out and
so as you can see when i refresh there's
a second when the activities is empty
and eventually the data shows up and
draws what we have excellent so the next
thing you'll probably want to do is just
touch the data for different people not
just for us so let me cheat a little bit
here it's ready okay so let's do it do
and say input type name user ID and
button fetch click
fetch
okay so now we're going to change the
code a little bit so instead of doing it
in a constructor we're gonna remove that
and instead of just always grabbing
Google Buzz we're gonna grab this this
dot user ID that's the same user ID that
you see over here so now I'll refresh
this and I'm gonna say Google Buzz fetch
and after a second data comes and I can
say fetch myself and I get different set
of data for different people so so far
we're making some progress right I mean
we can fetch our data set and display it
so the next thing we'd like to do is
instead of dumping the data in a row
format it'd be nice if you could somehow
format it nice and pretty so
we're just gonna cheat a little bit here
because I remember everything all right
so we're gonna make a ul which is an
ordered list and then we're gonna say Li
and inside of the Li let's say if I go
back over here let's say I just as you
can see we have activities activities as
data and the data has a collection of
items over here and items for example
has the text and the text is let's see
items actor okay so the actor is the
person who did the activity and the
object that content has the particular
thing so what we want to do is when I
show the content for each of the each of
the the buzzes right that were done over
there so we're gonna say ng-repeat
so we want to repeat the li element for
each item in activities dot data not
items and what we want to print in the
middle of it is is item dot object dot
content right because once we find the
items over here when we go to the object
that content it will print out the
content of it so if I save this and I do
refresh and I do fetch we have
individual allies for each of the text
that the people put in but as you notice
this is actually bolds and breaks and so
on and so forth is actually HTML so
we're gonna change it a little bit I'm
going to say actually the data is HTML
so this is called a filter so we can
massage the data before we show it so
now we do the same exact thing and
voila we have individual Google bus
chats from them so now I'm gonna do next
is I already prepared an ass nice CSS
for us so I'm gonna cut and paste the
CSS here if I do that then I should get
a little prettier view so just a little
CSS magic to make it nicely formatted
okay so what's the next thing we would
like to do the next thing we'd like to
do is we'll probably like to put a who
is buzzing this particular thing on the
top but by the way let me stop for a
second and ask are there any questions
yes what was the ng tag
you mean ng repeat okay so this is a
good point let's let's stop for a second
what am I doing here what I said earlier
is that angular teaches the browser new
tricks right it is what HTML would have
been like if it was designed for
building web applications so one of the
common things for basically we need to
do in web applications is templating
right and hTML is almost there but lacks
certain things and so what if we could
basically create what I call markup and
directives which is basically brand new
attributes that the browser doesn't
understand what if we could just add it
to the browser's vocabulary so that it
when browser sees this it will run this
so let me point out something
interesting I'm just going to disable
this script tag for a second by putting
an X over here and I'm gonna refresh
this notice that it's just HTML nothing
special
it's served at a file colon slash slash
there's no server processing anything
all the magic is happening on a client
this really is a smarter browser just by
renaming that script tag all of a sudden
we're back in business
does that make sense okay any other
questions yes
yes so the question is can you create
more than one iframe and and things
right more controllers exactly yes the
answer is I'm just giving you an
introduction to what this thing can do
yes we understand the concept of routes
controllers partials we can include
other HTML dynamically load and in there
is no limit to what you can do and and
also what we what angular actually is if
you step back further it's actually HTML
compiler on the client now if you think
about it for a second that sounds like
an oxymoron like what I mean HTML
compiler on a client it actually allows
you to give meaning what does it mean
meaning it allows you to attach
JavaScript behavior to any HTML
primitive either an element and
attribute a tag or a piece of text and
that's what we're doing there is a
function somewhere that says if you come
across an NG controller in your HTML
then execute this piece of JavaScript
which makes it look like there is a
controller if you come across a double
curly which is over here then do some
other work if you come across a an input
type text well then register a listener
on that input so that as the user type I
can update the model right and so what
do we really have is just an HTML
compiler that executes in the client and
I believe somebody else had a question
or was that I already answered those
answer all right okay so let's see if we
go can go a little further so I'm gonna
cut and paste a little bit of stuff from
my existing thing and that is to make it
a little prettier and
now notice just this is very little you
know only trivial amounts of code that
I'm pasting here all I'm doing here is
I'm adding oh yes you're required
and I missed something up you are oh yes
I copied this in the wrong location
and fetch doesn't do the work because I
have alright okay I did some other magic
here
so let me show you what we're trying to
get to what we're trying to get to is is
if I hit a refresh
I actually continue having the user ID
in here right and the nice thing about
that is you know it's bookmarkable so I
can take the bookmark and email it to
somebody not only that my back button
now works and if I go to previous you
know it said Google Buzz this is the old
already working client right and so I
would like to get deep linking working
in my application so obviously we when I
type in something here and I hit fetch
notice that the URL actually changed up
here so how did that work that worked
because the the new code I paste it in
it says button on click take the user ID
and copy it into the location hash path
that's basically the URL that you have
so we're gonna do a little bit of
changes on our on our bus clients oops
so let's see what we're gonna say is in
order to enable this we're gonna say
watch the URL and alright and if the URL
changes called this that user change and
we're gonna have a user change method
that says if the URL change that then
copy this that user ID copy the location
all right that's the URL of the person
we want to get a bus information copy at
the user ID the reason we're copying at
the user ID is because we're trying to
get it into our input field over here
that's their user ID field and then once
we have it I want to go and simply go
fetch all of the activities for that
user ID so now we have an exception line
12
oh yes thank you very much ah here we go
so what does this do what it does is
that we are watching the URL which means
if I go and change this to Google Buzz
hit enter notice it automatically copied
it into the input field and also its
fetch the data for our application what
that does is that the back button now
works if I hit back button I go to
mishko hevery if I go forward button I
go to Google Buzz now for those of you
guys who have done quit or Ajax raw
getting deep linking to work is a
nightmare right okay nobody has done it
apparently because nobody's shaking
their heads but yes it's a nightmare and
this actually is pretty trivial if you
think about it right you're just
watching a URL if it changes you're
calling some method and things get
updated now I want to show you one more
thing and that is if I click on replies
currently doesn't do anything but if I
click on replies I would like to go and
show all the replies in line
so I'm going to again just copy this
piece of code so I copied an expanded
replies method and all it basically does
is it says if I don't already have a
replies then go and fetch them over here
otherwise flip a flag called show and
we'll deal with the flag in a second so
that makes it that if I click on it it
will go and fetch additional data but
the problem is our template doesn't show
any additional data so let's go back to
our template and
I'm trying to remember where to paste
this oh I think it's ready here here we
go yep so here comes our replies so what
did I paste over here I simply said give
me another ul the Li inside of it
repeats for every reply in item replies
that data items and the reason why its
data items is because we wrote into the
activity replies right the item replies
now contains the new data and we show
the image in the URL and of course the
content HTML and so the end result is
that we can see the replies being in
line in our application so I can go to
any let's oh of course it's not there's
no way to hide it now so what we need to
do is mean to say ng dot show if item
dot reply starts show that's the boolean
flag that I had a second ago expand
collapse right so we can expand and
collapse this oh yeah and it will be
nice if I could search up here right so
the searching is actually very trivial
because all one has to do is when you go
when we iterate over the items we simply
say dot filter filter on this input
field over here and now we can see if
anybody's buzzing or about me and the
answer is no node no Google
well that's probably everywhere I see
okay New York here we go new New York
there we go so searching instantaneous
searching is really really trivial
because you know angular kind of behaves
like a spreadsheet you change a variable
and all the other pieces automatically
recompute and all this magic is
happening through data binding so I want
to show you one more thing and then I'm
going to kind of talk about more the
structure of it if
go look at the final product over here
if I click replies notice that it kind
of Scrolls this might be too many
replies in here here notice it kind of
Scrolls up and then Scrolls back down
when you close this and let's say I want
to add this effect to our application so
what really we want to do is is say
something like this
my expand show I'll expand when I when
when basically this thing is there right
so I just made up basically a term
called expand HTML browser doesn't know
what it is
and neither does angular and so actually
nothing's gonna happen if I call show it
to you if I expand the items will come
but they're no longer collapse because I
took the show part out and of course
none of the the magical scrolling is
happening so how can we add the behavior
well this is where you can take away
from existing libraries like jQuery or
closure or Doge or any other JavaScript
libraries that are already out there and
you can integrate them in so what I'm
gonna do here is I'm gonna basically
copy a little bit of code that teaches
angular neat tricks or rather teaches
the browser new tricks and what I'm
saying here is this if you come across
my expand tag then I want you to execute
this function and this function
basically says that the element should
have a CSS property display block and
the reason why it has to have display
block is because browsers has never seen
it and so it doesn't know whether it's
an inline or a block property this is a
compiler directive that says keep on
compiling the stuff that up that's
underneath me should be compiled as well
and because it's a compiler it has two
phases there's a linking phase and a
compile phase so the first function we
return is a compile phase which gets to
massage the HTML but because you're
inside of a repeater you might have to
relink once for every instance of that
repeater right because repeaters can
expand and collapse so this basically
says ok here is the compile function
which basically says for each item
inside of a repeater if you happen to be
in one hide the element by default watch
the expression expand that's because the
Acree 8 and expand attribute over here
so whatever is in there grab that
element and then watch it if the
variable changes then if the value is
true then create this is jquery by the
way so create the slide down
behavior and if it becomes false then do
the slide up behavior as well so we have
to include jQuery in our application but
it doesn't have to be jQuery could be
any other existing library that you
already know and love and now if i
refresh this and if i come thing that
does another 2min replies you see we
have the scrolling up and down so we are
teaching the browser new tricks so the
way to think about this thing is that
your HTML is your view and HTML
basically is kind of a DSL right it's a
domain-specific language for laying out
your document that's what the HTML is
but what we trying to do is we're trying
to expand that DSL into realm of what is
useful for building web applications
well what's useful for building web
applications is stuff like repeaters
conditionally showing and hiding things
creating listeners firing off things
copying data back and forth and so on so
we added all of this out of the box but
really we give you the freedom to add
anything else that you want into HTML
and basically you have to build out your
own language to it and now somebody
asked me if you--if we can do something
more complicated with this thing and the
answer is yes we have something called
services one of the services for example
URL routing service where you can say if
the URL looks like this then load this
controller and this partial but if the
URL changes and load some other
controller and some other partial and
then you can nest these partials into
each other and you really assemble the
application on the fly in the browser
does that kind of make sense all right
questions ok
so let's see let's go back so we kind of
did a demo now I mentioned earlier that
it's a compiler and so I kind of
highlighted a couple of things in here
for you the the area in yellow that's
this thing over here we call this a
widget
so if you come across a any either
something the browser knows how to
render like an input tag or something
the browser does not know how to render
something you create your own you can
cause the compiler to trigger some
compile function so in our case what we
trigger over there is a listener that
says okay register a listener on an
input field if the input field changes
then copy the value of the input field
from the email into the controller right
in oh by the way this better be an email
something that I haven't shown over here
but I should for example if I delete the
text over here it becomes red and if I
hover over it it says well it's required
and how did it know that it knew that
because our user ID has a attribute
called ng required and so I added the
meaning to an input field I said well if
you see ng required and complain if you
don't have a particular attribute so
this is what we call widgets right and
you can write your own we also have a
concept of directives which is
additional attributes that are added to
existing elements which basically change
behavior so one that I showed you is the
repeat element that basically says Oh
take this as a template and repeat it
for once in each of the the following
expression and the expression can return
even an array or a object but more
importantly the expression gets
reevaluated whenever anything changes so
this filter function gets revaluated
whenever email changes up here so this
email over here calls as this expression
to reevaluate and then the the repeater
either adds or removes the li elements
into your Dom tree to produce the
rendering this is a markup that you see
over here this basically we can
intercept any text and give it meaning
so I chose the double curlies as a way
of dealing with this thing but you could
create your own expressions inside of
HTML or own text
something special to you and you can
attach behavior to it as well and then
we have a concept of a filter which is
that it takes the value of this and runs
it through another function to make it
uppercase this is very common when you
need to format your data into a locale
or internationalize it or something like
that maybe int an N etc and then here is
an example of a brand new widget like a
switch statement that you're all
familiar with from programming it really
doesn't exist in HTML but we can create
one by simply saying switch on some
particular expression and if the
expression has the word home then show
this diff but if the expression has
let's say account oops
then go and include another HTML file
called account HTML from a different
location and then inline it into this
particular thing that goes back to
somebody somewheres questions over here
whether we could have partials so I'm
just kind of showing how you can turn
HTML into a DSL so that you can build up
anything that's meaningful for yourself
one of the things before example we do
on our project is that we have a we say
button all of our our HTML but we really
want to have a nice pretty closure
button so we have a director that
basically says oh if you come across a
button replace it with this really fancy
closure button and so our HTML is nice
and clean without having to go into
details of adding CSS and etc to make it
style properly ok I want to talk about
data binding for a second which might
not have been obvious so data binding is
kind of one of those overloaded terms
that is used all over the place and so
in most templating systems that I have
worked with they have this property that
you have a template and you have a model
and you merge the two and you produce
with you and this is a one-way street
that is if the model changes you have
two reemerge with the template and you
have to change the view and the problem
is that what if the user has modified
the view in the meantime you're
basically clobbering right and
next working with the with these kinds
of templating system kind of great for
initial rendering of the page but then
you have this whole second problem is
how do I get the data back out of the
page into a model so what angular does
is that's something I call to a data
binding and the idea is that you take a
template and you compile it into a view
and in the view and the model become
tightly interlinked that is whether the
user goes and changes the view by
interacting with the HTML for example an
input field and changes a field inside
of it or the JavaScript changes a
property on some model it doesn't matter
the the data is immediately reflected on
the other side so if the JavaScript
changes the model the view updates and
if the view if the user changes the view
then the model updates and this happens
continuously
so what ends up happening is that your
model is the single source of truth of
application you never have to parse data
out of HTML you never have to worry
about like well did the user type
something somewhere and so maybe my
model is stale or something like that
the model is always the truth and so
here's a couple of more places where you
can read up on this so there's of course
the angularjs org which is where we have
most of our documentation and things
related to angular the current demo you
can see over here and also the demo that
I've kind of done over here and the idea
of resources is kind of placed up there
as well so I'm going to open up the
questions yes
yes questions can you fill create your
own filters everything that you sealed
so let's go back to this page everything
that you see everything that angular
does is completely pluggable so what
angular is in its rawest form is just
HTML compiler and it has no preconceived
notions about anything so everything
that you see on this page can be
overridden changed extended added or
everything else that you desire so if I
wanted to add a new filter all I have to
do is say angular dot filter and then
specify the name of the filter equals
function and if I go and write my own
functions filters can be chained filters
can have properties added to them and so
on so the other thing right yes other
questions yes
this is so the question is what's the
compatibility really with the browsers
on this thing I think that currently in
theory this runs on 8i six but there are
some issues with certain things like
hovering etc which wouldn't require a
little more love which we could get but
as far as I know IE 6 is basically
unsupported so IE 7 and higher this
thing works it also works on mobile
browsers which are WebKit based we have
it tested on so all your great great a
browser is this thing works just fine
yes right so you're asking about speed
in terms of updating a database so
angular really doesn't say anything
about that what angular is is a way of
rendering your your content on a page
right now typically the way it works is
that you have a what we call a resource
so this particular resource has some URL
and you can do get and you can do post
you can do save on this particular URL
and it will write JSON to it how you
handle it on a server side is obviously
your a problem and that's up to you
although we have a second project called
arrestee and one day we'll give a talk
on that as well but really the only
thing we provide is a way of calling a a
data set or calling a URL on a server
the other thing we provide is I'm not
sure if you guys noticed is this
statement over here is really looks
synchronous right and maybe for those of
you guys who have been here for friens
talk just before mine you know
everything in JavaScript is really a
synchronous so how is it even possible
to this thing executes turns out what
what the activity that gate does is
indeed a synchronous which means it
makes a call and at some point later the
data comes back to me but because of
magic of data binding what the activity
that get does is it returns an empty
shell object and it saves it into
activities and then the data binding
simply
render is nothingness the resource comes
back with the data and prepopulates that
already empty shell and a data binding
takes over and renders everything and so
what's missing out of this code for
those of you who have been building Ajax
applications is all of the callbacks all
the code backs that are usually just
littered throughout your codebase
whether it's for listening on buttons
events or talking to a server are
notably absent if you look through this
piece of code it's not that they're
they're not there is that just we're
using clever techniques of returning
shell objects and relying on the fact
that the data binding immediately takes
effect that we simply don't have to deal
with them you say go do this you kind of
queue it off and say go fetch the data
and once the data comes back you know
shove it in here and you know how to
render it you don't need to involve me
in the rendering process because I
already told you everything about
rendering inside of the view yes
I'm sorry I'm having a hard time hearing
you okay good questions the question is
how expensive this is on a browser we
have done some measurements
not a lot we're working on improving the
speeds I think we have an internal
application that we were building using
angular and I should point out that the
application was built using good before
that and when we rewrote it in angular
we went from of something like 17,000
line of code to about thousand lines of
angular code and now the application
does a lot more and it's actually two
thousand lines of JavaScript code so you
get tremendous amount of savings in
terms of speed the load of time is very
fast I think it's something on the order
of three hundred milliseconds to load
render compile and do everything and I
haven't really done much in terms of
optimization yet and as far as a live
typical page that contains reasonable
amount of data you're looking about
something about two to five megabytes of
JavaScript code data code that's kind of
running in the browser this is for
Chrome so ie might be different higher
or larger etc how much is library yes
the library itself is under 50 kilobytes
compressed on obfuscated I have some
ideas on how to make it even smaller so
in the future it might even get smaller
one thing that I like about this set up
is because so much of it is declarative
inside of the HTML as the library gets
as the angular library gets smarter
better and more efficient right
everybody benefits because you described
how the application behaves rather than
programmed every little nuance and every
single callback and so as over time
angular gets better faster supports more
browsers you application kind of gets it
for free yes
okay go ahead BC apologies for just
barging in so I'm wondering about the
Dom stability so when angular goes in
recomputes the result of of the
constraint system is output and then
generates new HTML does it make any
attempt to keep old Dom nodes that
didn't change around when it's replacing
in order to just wipe them all out
within range tml a good question so
question is how do we do the updates
whether we do inner HTML or we modify
the Dom currently we are modifying Dom
in place and we're trying to be really
smart about only talking to the Dom when
we know something has changed because it
turns out that although WebKit is pretty
good about talking to DOM and
manipulating it in ie it's an absolute
nightmare you know every single call to
a Dom manipulation you should be really
careful about that you absolutely have
to do it and so we're just really smart
about manipulating the Dom as it is
right now
however there seems to be some evidence
that you know using just a brute force
inner HTML might actually work better
and so in the future it's possible that
we're gonna rewrite this particular
process to just purely dump inner HTML
into the whole page and just refresh it
that way
it depends you know we'll see how the
performance is gonna end up which one is
gonna be faster but other right now we
modify only the stuff that has changed
and keep in mind that because of
bi-directional data binding anything
that the user interacts with the Dom is
really inside of the model and so as
long as the model gets preserved we can
redraw the Dom in exactly the same state
so that really isn't a problem of do we
accidentally Club or something when we
are redrawing like it's not an issue and
I think you had a question right
I'm sorry I missed a second part oh
testing yes thank you very much is it
hard to test this thing
oh I'm sorry how can I forget mr.
testability myself right thank you it's
almost like you queued this up No thank
you for asking
ah I love testability so for those of
you who know me I test your on all my
code and testability something I take
very very seriously and so let's talk
about this for a second imagine that you
wanted to test the bus controller that I
have just created look at this piece of
code is there anything in there that
makes it hard for tests and the answer
should be no there's nothing in there
that's inherently difficult and the
reason for that is one we're not
manipulating any sort of Dom inside of
the controller which means I can just
instantiate the controller and off I go
call methods on it and do any behavior I
want but there's one thing that kind of
is a problem and there is this whole
activity object right well it turns out
resources are so important and so common
that we took all the stuff that the
browser has and that we call I
affectionately called the global state
of the browser all the nastiness that's
inside of the window and we hid it
behind this service called the browser
and for testability we actually give you
a mock browser so in production you get
a real browser because we have
dependency injection we inject a real
browser into your application and that
you know has the global state that comes
with the browser and it's all in there
but in your test world we give you a
additional javascript file which hooks
it up so that you get a mock browser and
then what you can do is you can train
for example xhr request so you can say
something like browser xhr expect get on
this URL respond with this and then you
can write your controller and you can
write a test that basically says
instantiate the controller and the
controller let's say in some method goes
and tries to talk to a resource the
browser says oh yeah I already was
trained that I was expecting this
particular get and so it responds with
the appropriate data and you can control
at what point the data comes back
through flushing etc so testability
story is really nice both because we
provide these higher level objects that
hide all the nastiness of the browser
and also because at no point in your
code do you have to touch the Dom right
because the Dom is a separate piece of
the Dom is really a view and it's a
projection of your model so you don't
modify the Dom you really just modify
the model and model is just plain old
JavaScript object so that's one thing
that you can do in terms of unit
testability you know great story awesome
stuff for into end test we are working
on a an insolent framework you know way
you can think of it as a selenium but
the problem is the selenium is that some
of them doesn't know how angular works
and so selenium clicks on a button it
doesn't know when angular says I'm done
redrawing you can go and look at stuff
so our framework actually closely works
with the angular engine and so you can
say stuff like navigate to a particular
URL and then you know verify that this
button is present but the framework is
smart enough to say all right
navigate to particular URL really means
that angular has to run all the stuff
and all these things are changing and so
I have to wait until angular says I'm
done so you can go on to the next step
and so it takes away all of the polling
and all of the nastiness that you really
are are faced with in typical trying to
do an end to end testing in your system
and so you have nice simple declarative
way of saying I expect these things to
be true and the end-to-end framework
works closely with the angular engine to
make sure that it executes is nice land
you don't have any weights and it runs
pretty quickly through the system so
thank you for the question that was
awesome yes five minutes yes four
questions all right let's do one at a
time how many people are working on it
mainly myself there's another guy Adam a
bronze who works on it external to
Google also there's the team in Google
who is using it to build an internal
application and those folks from time to
time there's about six of them go and
add stuff into it but I'm usually the
guy who does most of the heavy lifting
over here
how does it license MIT how's the
adoption so far we have couple of people
outside of Google and two people inside
of the Google the people who doing
inside of the Google actually some of
them are sitting in the audience the
absolutely love it I mean how could you
complain when you delete seventeen
thousand lines of good code or in place
with a thousand and you have a beautiful
testability story and and so on so they
love it yes so you can go to
documentation angularjs.org it's still
work-in-progress I'm working on this
daily this is for example a media wiki
for those of you familiar with media
wiki is just what Wikipedia uses the
cool thing is you can go and edit the
pages so as long as you register
yourself the code is directly embedded
in the code examples are directly
embedded inside of the wiki they
automatically render into this kind of a
view that basically shows you what the
HTML looks like plane and source and you
can actually play with the examples
directly inside of the wiki if I go to
source and I copy this code I can paste
it into a file on your desktop and I can
go off and play with this particular
snippet as well if you click on the
documentation you know a lot of these
things are explained over here all the
attributes all the magic that we
currently support the cookbook contains
typical things you know how do you do
hello world how basic forms are usually
done how did you model the controllers
deep linking with pages about somebody
was asking me over here external
resources which is basically the buzz
demo client which I have done over here
again in 50 lines of code as you can see
I can fetch the Google Buzz directly in
here you can look at the source code
directly in line so those are good
resources to go and look at other
questions yes
what are the open issues and biggest
problems my biggest problem is
explaining to people what it is it is
you know people have these buckets in
their head like oh it's a library oh so
it's just like closure well no actually
angular can actually benefit from
closure because closure has lots and
lots of widgets that you can actually
use with closure Oh angular is like
jQuery cousin manipulates the Dom well
actually angular uses jQuery to money
plate down but it's not the same thing
as Dom manipulation framework because
I'd only give you an API to manipulate
the Dom right there's all this data
binding that happens for you people say
well it's a it's a framework for
building web apps well it's not really
because really it's all about the HTML
and teaching the browser new tricks
so explaining to people exactly what
this thing is is I'm having heart
trouble so if anyone we got a good good
at marketing stock to me and help me out
here what was the second question
what are the problems open issues let's
see what are the open issues we have
some issues with when you when the
datasets get really large chrome just
chunks through them no problem like I'm
yet to build some app that would not run
fast in chrome same thing for Safari
Firefox is reasonable IE sometimes has
troubles and so one of the things we
want to really focus now on next is
making sure that this thing performs on
ie just as well as on all the other
browsers now when I say make the
performance better I don't mean that
it's currently slow what I mean by that
is if you have a large data set like
let's say you want to have a table with
thousand rows and each row contains 50
different bindings in it right and then
you do something it might take you know
a little bit of like just enough lag to
know that it's not instantaneous right
and I want to get rid of that I want to
make sure that on all browsers is
essentially instantaneous and so I have
some ideas on how to make this thing
better so it should probably get better
into with time the other thing I would
like to do and I'm hoping that some of
the open source community could take
onto it is let's say I wanted to have
charts inside of angular right it would
be awesome if I could simply in my HTML
say bracket pie
chart and pointed to a data source right
and so if the open source community
would come up and say oh I'm gonna write
maybe a glue between angular and Rafael
which is an open source library or maybe
Google charts or something like that to
make it so you know all of a sudden if
the new person comes and says I want to
have charts in my application all they
have to do is drop a little bit of tag
inside about no code necessary right
maybe animation to be included in there
as well and so on and so forth so what
angular is today is a is a raw set of
primitives it's not really a rich widget
library or anything like that which I'm
kind of hoping that people can pick up
on and I think we're out of time so I
hope you enjoyed it and see you guys
later</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>