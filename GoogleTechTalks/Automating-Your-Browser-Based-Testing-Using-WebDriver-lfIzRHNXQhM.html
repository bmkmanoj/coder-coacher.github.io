<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Automating Your Browser Based Testing Using WebDriver | Coder Coacher - Coaching Coders</title><meta content="Automating Your Browser Based Testing Using WebDriver - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/GoogleTechTalks/">GoogleTechTalks</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Automating Your Browser Based Testing Using WebDriver</b></h2><h5 class="post__date">2012-04-04</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/lfIzRHNXQhM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">thanks everybody for coming you know a
quick introduction to the Google NYC
Tech Talk series this is our I'm gonna
embarrass myself fourth or fifth one in
this particular incantation when I thank
you Simon for for coming here I'll do a
quick introduction but a quick
introduction to Simon and in just a
minute or two but quick Google NYC fun
facts this is the Port Authority
building if you hear massive banging
during this presentation do not be
alarmed
behind that there's a freight elevator
and if you look at the building
blueprints you'll actually realize that
the freight elevator can carry an entire
18-wheeler up and down between floors I
personally want to find the buttons for
that and start playing with it but it's
kind of scary sometimes you're sitting
here and you hear this loud bang and the
floor starts shaking but but that's okay
the this building used to actually move
buses up and down that's what these
freight elevators were used for it's the
second largest building in Manhattan in
terms of total square feet even though
there's only about fifteen or sixteen
floors
I imagine the Empire State Building or
something like that is first I don't
really know but this is the second
there's about 2000 Google people here in
New York and prior to the prior to
Google moving here Google had an office
in Midtown and you know another fun fact
about Google is we're not allowed to be
more than 150 feet away from food right
food as you can see from some of these
pictures around here food is definitely
a something that happens around here as
part of the culture part of the fun so I
put up some pictures of the Google
office I'll just kind of scroll them we
we have a bunch of Lego we have a
cafeteria the cafeterias got a porch
that overlooks the Empire State Building
it's kind of fun this particular picture
the one on the upper left-hand corner
was actually made with Lego
collaboratively by a whole bunch of
Google people in about 24 hours I
remember I walked in one morning
somebody gave me a
a pre-printed 8x8 Google Lego block and
was told to go and put these things in
and next thing I know they had about you
know 100 google people filling out these
little 8x8 blocks and and somebody went
and assembled them and then the next day
the CEO of Lego came and talked to us
and that was why we found out about this
so that was kind of fun
this parrot things also still around and
made out of Legos so that's Google NYC
fun facts just a little culture you know
briefing about the culture here in the
office next talk April 13th
Victor Miller come and talk about
optimal locality preserving hash
functions and I was just literally an
hour two ago we also booked our main
event it's gonna be Google's own Dan
storm and coming and talking about
Google infrastructure as well I don't
have the exact date handy does anybody
know the date sometime in May middle of
May we'll be posting that up on the
website as well that both of these talks
should be phenomenal so today's agenda
quick you know the networking that we
had my quick introduction the main event
will go from about you know classic
Google we're running seven minutes late
we'll go from you know 635 or so to 7:20
ish we're only gonna do about ten
minutes worth of question and answer and
we're gonna go with the online questions
first if any of you have laptops there's
free Wi-Fi here if any of you want to
post a question up on if you go to the
meetup comm page the link is there you
can type your question and then Simon
will put up his questions and answer off
of that we'll also take questions from
the audience but we're gonna stop it at
ten minutes just so we can have informal
Q&amp;amp;A and networking afterwards Simon will
be here there's also lots of Google
people here too lots there's a handful
of Google people there are those of us
that are wearing the traditional Google
black and in honor of st. Patrick's Day
there's some of us who you know who have
green t-shirts that the rest of us who
don't have green t-shirts are very
envious about
but but Google people find us talk to us
at eight o'clock give or take we we do
have to have a hard limit security will
come through and start closing the doors
so we ask everybody to to to leave by
8:00 8:15 or so okay I'd love to
introduce you know a personal friend of
mine Simon Stewart who came here
specifically from this talk all the way
from London you can read his background
he's guy's a software engineer has been
a software engineer his whole life you
know when he and I got together a little
while ago we actually realized that our
past lives have intersected you know the
thought works via some common friends
mutual friends and stuff like that it's
you know very common in this industry
I thought you you know when we started
the series about six months ago I
thought we had James Whittaker dr. James
Whittaker talking about a very different
kind of testing than what Simon's going
to talk about today but both are very
critical to an organization and that's
why we thought it would be very
complimentary to have these two talks as
part of this series you know Simon I
used to work at ThoughtWorks and
obviously as the lead contributor behind
webdriver it's been said that Simon
enjoys writing better software and beer
sometimes at the same time something
that I'd love to measure is the quality
of software before the beer and the
quality of software after the beer I
tend to think one versus the other but
I'll leave that thought to myself
Simon says this is truth Simon
thank you very well there's a lot of you
last time I stood here I tried to do a
demo and I went horribly horribly wrong
hopefully this time it's going to be
better I just need a couple of seconds
to grab my laptop swap over cables and
do exciting things like that so the
screen will now go black so my name is
silence jet going to be talking to you
about automated testing with selenium 2
if you want to follow me on Twitter I am
on Twitter
SHS 96 C if you want to ask me questions
afterwards as Ari said we're gonna have
the automated links so just head over to
that incredibly long URL up there which
I will put on the screen for a fraction
of a second to let you try and type it
into a handheld device good luck with
that
excellent so Wow this is going to be
really easy so I am an SCT a software
engineer in test at Google does anyone
actually know what an se T is or does
yeah I mean not even Googlers are
putting up their hands this is a one
person at the back excellent and at the
front thank you so we are software
engineers who are part of the
engineering productivity group
engineering productivities hate the word
but mission is to enable Google to
deliver software maintainable software
more quickly and more effectively and
the key thing here is maintainable
software it's incredibly easy to write
really grotty software if you don't have
to prove it works I do it occasionally
after one too many beverages but that
that way isn't sustainable that way
isn't good a software engineer in test
is a software engineer whose focus is
working with the team helping them with
design patterns architectural overviews
and helping them address their testing
needs so they can write good
maintainable software and that way they
can do exciting product releases like
like wave
when I was on actually it was a really
good project to be on um the other thing
that we do when we're not embedded in a
team is we do tool development so there
are people working on linkers compilers
and tools that are used by the rest of
the group I happen to work in the
browser automation team funnily enough
and we look after projects such as
selenium or webdriver internally here at
Google as well as some of the
infrastructure that we use for running
the tests so if you've ever watched any
of the presentations that have been done
it GTECH you may have seen things like
the selenium farm being mentioned aadmi
so that's basically what an SCT does
they either work with the team and help
them become more effective or they work
in the tools team and and try and
deliver the things that we need in order
to go faster we're hiring by the way is
that what you wanted me to say yep good
excellent
so who's heard of selenium one selenium
two and webdriver and is just a little
bit confused almost not oh okay
slowly going up yeah more and more
people and that's fine
Jason Huggins on the mailing list Jason
Huggins creator of selenium once came up
with the perfect analogy and I'm going
to steal it wholesale and claim it's
mine and he started by describing Mac OS
so Mac OS from system 1 to system 9 had
one API and that API was carbon and then
Along Came Mac OS 10 and the new API
cocoa appeared and so suddenly if you
were doing Mac OS development you moved
from carbon and you had to and slowly
cocoa became more and more popular and
his and carbon is being phased out
selenium in this particular analogy is
Mac OS carbon in this analogy is
selenium 1 selenium RC and webdriver is
cocoa make sense like it always seems so
easy when you find out finally how I'm
getting thumbs up double thumbs up need
two rainbows with that that'd be great
so what is webdriver that's a very good
question and why is it better than the
existing selenium well the first thing
is it's got an object-oriented API how
many of you do selenium programming in
an IDE okay a few people so in an ID you
can hit control space and you get like a
list of Auto completions now I've got a
30-inch monitor occasionally I just
rotate it into portrait mode so when I
hit control space I can see all of them
in one go without scrolling there are
something like a hundred and thirty
methods on the course selenium interface
which is too many for the human mind to
comprehend more importantly the API is
grown organically so there's type type
Keys type use native attach file
key down key press key up key down
native key press native key native Serna
so just this huge range of stuff that
that repeats itself obviously hindsight
is a lovely lovely luxury to have and
I've got the benefit of it over Jason
and the selenium thing so what happened
with webdriver is we learnt from those
lessons and we applied some basic object
orientation to the problem there are two
key interfaces webdriver which models a
web browser and web element which models
a web element we're not very good at
naming on the project we keep on giving
them obvious names you can guess a
terrible mistake I know and so we've got
an object-oriented API the other thing
that's sort of quite interesting is the
reason why joy selenium is able to cover
so many browsers and support them quite
well is because it's really a extremely
complex JavaScript application it's
running inside the browser written in
JavaScript new browser comes out we
tweak the JavaScript it all worked
that's fantastic the problem is it's
written in JavaScript and that
javascript is running in a browser and
that browser has a sandbox that prevents
you from doing interesting things so
file uploads for example are a devil to
get right on selenium as it stands and
if you take a look at some of the other
bits and pieces like the drag and drop
spec from html5 is so horrific complex
that somebody wrote
ranting blog post about it and then
deleted it getting that stuff right on a
browser fantastically difficult web
driver it takes a slightly different
approach it bound tightly to the
underlying browser with Firefox for an
extension we've got elevated privileges
with IE we use the comm altimeter is and
so on and so forth what this means is
that we're not in the sandbox it means
it's really hard to write a new web
driver don't get me wrong but we're not
in the sandbox and we can do things like
emulating user input at the OS level
rather than the browser level so our
emulation of user input is brilliant
even if I do say so myself
the other thing is like web apps are
becoming richer and they're becoming
more complicated whereas previously it
was enough to just fill in a form hit
hit a button and wait for the page to
refresh now people are doing things like
select these four you know items in your
Gmail inbox and then drag them onto this
label and they'll mysteriously get the
label for you like expressing those
actions is a phenomenally complex thing
to do Aaron massery who's sitting over
there
is working on our advanced user
interactions API this is an API that
allows you to do things like say click
on this element hold down the shift key
click on this one this one this one drag
along a sinusoidal path and release the
mouse button II currently I don't know
of any framework that allows you to
express things in that way now and it's
kind of cool to be able to do that and
that leverages sorry uses the API so
we've got the native events that we've
got access to I think that's going to be
really cool that's a preview version is
in the latest version selenium 2.0 beta
2 and it'll be beefed up in beta 3 which
is coming up real soon alerts and
prompts because we're not in the sandbox
we can do interesting things like if you
write a selenium test you'll come across
you'll do actions and it's fairly
reactive you know load a page click on
this type on this and then occasionally
you become prescient and you can see
into the future you go there will be an
alert and when you see the alert you
will accept it
and then you go back to being normal
like it's it's like you've become some
sort of prophet or something like that
it's a weird inversion of the normal
flow of control
well webdriver we step outside of the
sandbox we're not going to be halted if
an alert pops up so we've gotten alerts
and prompts API that allows you to carry
on being reactive
you can go drive it on switch to alert
and that will give you access to window
alerts prompts and confirms which is
kind of nice means your programming
model is what's the word consistent oh
yeah and who's ever forgotten to start
there selenium server when running the
tests yeah I do all the time and that's
because I'm an idiot the other thing
that's coming up that's really really
exciting is five years ago six years ago
nobody had on them a mobile phone that
could browse the Internet well they
might have but it was a painful
experience and they hated it the iPhone
came along Android came along and
suddenly I'd be surprised if almost
everyone in this room doesn't have a
mobile browser which they use at least
once or twice a day like the uptake of
the mobile web has just accelerated
massively so we're going to need to be
able to test our apps on these mobile
browsers probably you know that would be
a really useful thing in the early days
we used to get away budget by changing
the user agent of Firefox and trying to
run the app through that but the mobile
browsers are different from the browser
so you've got on the phones and so bugs
will come up falling through and stuff
like that
webdriver has support for both Android
and the iPhone with the same API so we
use for everything else in fact I can do
a demo well I say I can do a demo so
here is a running emulator that I
started earlier I could show you me
compiling it but it wouldn't be very
exciting
here is a little IDE and I will pop that
open I will zoom in I will zoom in I
will learn how to zoom in
can you read that so this is is what a
webdriver test looks like the first line
of it here just said creates a new
iPhone driver which knows how to
communicate with the iPhone driver that
we've got assigns that to a variable we
then go to Google duck code at UK I'm a
Brit I'm gonna advertise the UK version
of our site we then find an element you
remember what I said about this object
orientation here we go this is it in
action find element drive it up find
element by name cue I mean you could
show that to somebody who's not a
developer and they probably understand
what it is they might go I didn't know
elements had names but they'd understand
what it was here attempting to do will
then send the keyboard input the word
cheese
yes well yes I will cover that so
there's a question about timing and the
timing of inputs and such I will cover
that in a minute for now I'm just doing
the high-level Hey look this stuff works
which is always nice boom if you've done
that on the dory link like the moderator
link then I could answer at the end of
the at the end of the thing indeed
we then submit the form wait we get the
title we print it out to the console and
then we quit the driver because we're
good and we clean up the resources that
we use make sense nothing too radical in
there I don't think now the last time I
did a demo here it didn't work I'd like
you all to hold your breath briefly
while they hit the magic incantation
look at that it worked
it was incredibly fast did you say to do
the search yes okay I think that
deserves a swig of beer
cool so browser automation frameworks
I've done some heavy thinking about this
and by heavy thinking I mean I've had a
long chat with with Jason of three major
pieces and the first piece is the
ability to query the state of the app as
it is right now now browsers have a
fantastic language for querying the
state of the app as it is right now and
that language is JavaScript it's just
the perfect language for doing that the
problem is you're probably not writing
in JavaScript you're probably writing in
Java or C sharp or Python or Ruby so you
need some mechanism to execute that
JavaScript and get it into the browser
ideally in the same context that the
sort of rest of the scripts are
executing in because that would be nice
of course if you can query the state of
the page it's a bit of a boring test
isn't it it's like fire up a URL and
then loaded you want to interact with it
that would be nice
so the third piece is to do with
interaction so going back to the query
piece the core of webdriver is a library
that we've been slowly extracting back
in the old days each driver had slightly
different behavior because each driver
had its own implementation of like
querying the Dom and and returning
values to the user and most of the time
it was pretty good but it wasn't
consistent and consistency is something
that we all crave is slightly OCD
computer people so while we were casting
around for a solution to this Google
released the closure library the closure
library also comes with a fantastic
thing called the closure compiler which
is a JavaScript compiler will compile
closure JavaScript and output more
JavaScript but minified and obfuscated
with dead parts removed it's brilliant
on top of this what we did is we took
the best herb read functionality from
selenium and from webdriver and from
some of the internal toolkits that we've
got here at Google and we instructed the
smallest indivisible units of browser
automation we called them automation at
because well it seemed like a catchy
name you know and and we refer to things
as being atomic now which makes it sound
like we're stuck in the 50s looking into
the future which is brilliant because I
want my flying car on top of the
automation atoms we are layering the
boat driver API so we're making the
atoms conform to the API contract
offered by webdriver we're taking the
selenium libraries from selenium core
selenium 1 and we're also putting them
on top of the automation atoms so what
happens is as we're building up more
code we're getting more consistent
behavior and things are working far more
easily it also makes it fantastically
easy to work on the code base because
you identify a bug you write a small
reproducible test case in JavaScript run
it and a browser hitting f5 until you
get everything working and then you're
done we do absolutely crazy things to
get these into a browser near you
it's like sausage making a law making
like you know I can tell you the details
but you might be vaguely horrified so
I'm not going to go too far into it and
if you are interested come and find me
afterwards and I will go into great
lengths and astounding detail there we
go
astounding that's a word from the 50s I
think um so webdriver isn't just about
the technical side of things I I love
the technical side of things I'm a nerd
but it's also about making testing
easier one of the things we do is we're
busy promoting design patterns that you
can use on your tests to make them
easier to write design patterns such as
page objects anyone here familiar with
page objects lots of roast hands anyone
totally unfamiliar with them ok lots of
raised hands so the idea is that your
user interface can be thought of as
offering a set of services to the user
so a login page offers the login service
and to do that in is a username and
password Gmail if you go to compose an
email offers the ability to set the
subject the who it's - and the content
at email and to send an email ok
so though it's human language and it's
it's
human facing facing the other way a
paper up a tree object models these
these concepts but facing the other way
sort of toward the browser it has deep
knowledge of the internal structure of
the page it knows that when you want to
set the subject actually it is to find
the element you know with the with the
ID subject or whatever it's going to be
and it needs to send the keyboard event
but it might need to also sort of hit
down in case there's an autocomplete
list that comes up and blah blah blah
rah-rah-rah and all the things you don't
really want to think about when you're
writing tests the nice thing about using
a page object is it reduces the amount
of duplication that that's within your
apps yeah so when you change how the UI
is composed when you move things around
when you modify workflows rather than
having to go through 150 million tests
you only need to go to a ball on place
and fix it there and that's kind of cool
the other thing that we that we talk
about occasionally is bot style commands
or bot style tests so there are
sometimes actions that people do
regularly and repeatedly and you find
these sort of little clumps of code
through the code base like the common
one I see is when people want to answer
their phone thank you it's right when
people want to set a form field what
they do is they go to the form field
they do clear and then they type the
value that they want to type in so they
know that the only content is stuff
they've done and you see these two lines
repeated all the way through the code
base the thing that we advise people do
is just put another layer if we're
computer scientist right nothing can't
be solved with another layer of
indirection so we'll just put on top of
the existing API is a nicer style API
that conforms to how you would like the
framework to be used so rather than
writing like lots of repeated code we
reduce it down webdriver does some stuff
to make this easier for you for the Java
users out there how many people are Java
users how many people here are
developers by the way okay most of you
that's good because I'm about to go all
developer II on you and that would be
awful
there's the loadable component that just
provides a basic template method
implementation the design pattern
template matter
where you can go loadable component get
it we'll figure out whether or not the
page is loaded if it isn't loaded it
will cause it to be loaded if it is
it'll do nothing it'll make your life a
bit easier if you're using the page
object pattern there's an annotation
call find by these look a little bit he
says there you go you can see it all
there you didn't realize this was gonna
be a musical number so this shows the
implementation of both the label
component and the defined by annotation
that we use just to make life a bit
easier you'll see there's an absolutely
bonkers signature heavens above
absolutely bonkers signature up here
loadable component play home page well
that's what it is that means that the
get method will return the right thing
is loaded again another bonkers
signature here is loaded but it is a
void what the idea here is it's a
testing side piece so when you when your
test fails when the page doesn't load
you're making assertions about it and
rather than they're going to our lunar
load it can tell you why it didn't load
in this case we're checking that the
base URL is contained within the current
URL and it knows how to load itself
that's kind of nice the other thing
we've got are these fine buy annotations
so that fine boy ID welcome get started
they means that we can avoid typing
driver dot find element people don't
like for bonus in their tests if they
find that it obscures the intent of
what's going on so this is a mechanism
for getting rid of that if you tried
using the get started'
class like that a field like that
without first doing something you'll get
a null pointer exception the doing
something that you need to do is just
using the page factory init elements
it'll put a dynamic proxying and it'll
all work as if buying magic
yeah figure it out Wow how far how far
can you zoom in oh these things does
anyone know okay it's really nice and to
answer your question there's a mechanism
for doing waiting there in fact two
mechanisms for being waiting because you
know I use the peephole and there's more
than one way to do things the first way
is what I like to refer to as an
explicit wait this isn't one that swears
it's one that's marked out in your test
very clearly using a wait interface and
a webdriver way to implementation and an
implementation of function from the
guava libraries I've got one around here
that I made earlier today there we go so
this is the condition that we're waiting
for
so we'll just check the current title
and this is what it looks like in usage
wait until title changes from current
title actually it's nice and readable
you'll notice that the time that we're
waiting for isn't put there like I've
seen an awful lot of code bases and
people just tend to leave the 30 seconds
lying around
except it's not 30 seconds because
inexplicably time is measured in
milliseconds when you're dealing with
the browser framework and so they leave
30,000 undefined units floating around
webdriver we believe in humans and human
scale of things so our currently
undefined unit is the second and it
waits for 30 seconds and it's on the
weight so run having that that probably
constant please let it be a constant
scattered all the way through your code
base you just put it in one place and
it's a bit cleaner and a bit neater must
learn how to use keyboard it's double
rainbow will your test be more stable if
you flip from selenium or another tool
to webdriver maybe but probably not
stability there are a whole bunch of
issues that affect stability it's an
entirely separate talk again I'm happy
to
Gregg length about it later but changing
the testing framework isn't the thing
that's gonna make your test more stable
identifying root causes and problems and
addressing those that's the thing that's
going to make your test more stable so
how do you go from selenium 1 to
selenium 2 you've probably got a pretty
large investment or maybe a tiny
investment or maybe no investment and
let's imagine the large investment in
your existing selenium tests nobody in
their right mind would want to rewrite
all of those finally because the
personally wrote it three years ago has
left the company and nobody really knows
how it works and stuff like that
fortunately if you flip to webdriver if
you flip to selenium 2 there's there's a
migration path first thing you do is you
change how the selenium instance is
created you run your tests their bits
and minor differences in behavior you
gauge the effort required if it's 20-man
of effort just move everything if it's
more than a tiny amount of effort then
you can do a piecemeal migration and
just modify files as they go along so
you know when I said I forget to start
up the server I was just about to forget
to start up the server so I will open
this this if you're familiar with
selenium is a fairly standard test we
just get hold of a new instance that
I've done at one pointing up at a cursor
you get a hold of a new instance of
selenium we start it because that's what
you need to do we maximize it give the
window focus and then we go to the the
reader play home page has anyone seen
reader play before it's brilliant if
you've ever got like a few minutes to
kill go to there and and I'll just show
you what like news stories that are
coming up for big pictures and it's
pretty and like somebody with a short
attention span like myself will go look
and we wait for the page to load and
click the getting started
we we do weird things like this key down
backslash backslash
39 off the top of your head does anyone
in this room know what backslash
backslash 39 is goods excellent I didn't
either I had to look it up so I could
run this test if you want me to do you
want me to yes you don't have to go I
mean like it's just gonna run a test
musical interlude so this is using the
very tip of tree that I haven't checked
in yet so it might break there we go is
loaded a e and it scrolled right three
times and backslash backslash 39 is
right arrow key to give you an idea of
how easy it is to migrate I'm just going
to comment out how we get the selenium
and I'll say instead selenium equals new
webdriver back selenium and I'll try not
to shout supply I should have should
have written this before lab driver oh
forget it let's do it let's do it the
even easier way Firefox driver yeah no
arguments base URL
that'll be started so I can get rid of
that it starts up nice and big so you
can see it there we go so I've changed
one line in that test it now looks
because it was in tiny text before it's
gone from that so that one line change
now to find out whether it works ctrl
shift f10 zoom in zoom out zoom out how
many hello how much longer I forgot here
we go so it's gone to the home page
hasn't thrown an interception yet there
we go so the test that we had before has
run with no modifications other than the
fact that I changed how we created
selenium that's the sort of key to your
migration strategy ten minutes excellent
scary live coding I'm a terrible typist
well you've just seen that I should read
these things really shouldn't migration
gotchas so they
some differences that are going to come
and bite you
the first one is locators in selenium
you do you know you pass in locators to
almost every method selenium top type
locator selenium zenki's you know
whatever it is
and those locators are sometimes
implicit so if they begin with the
double backslash it's assumed to be an
XPath if it doesn't have any identifying
criteria then it might be an ID or it
might be a name you never know for sure
it's very exciting trying to figure it
all out
web drivers a bit more picky about you
just knowing how your app is built so it
doesn't do a buy ID or name you pick
which one is its ID or name as a rule of
thumb I found that it's generally an ID
unless it's a form input element in
which case it's probably a name the
other thing that you see occasionally is
people using selenium core which is a
sort of layer on top of it's the bit
that runs in the browser the JavaScript
framework you'll see this with get eval
and people who do selenium browser bots
something exciting the web driver backed
implementation of selenium isn't based
on selenium core it mutates sums that
some of the common things that people do
because I realize that people use it but
it won't catch everything and so if you
find your test failing take a look at
where you're calling get eval or execute
script and that'll be the exciting thing
another common anti patent sorry patent
is selenium didn't do very good selenium
1 doesn't do perfect user emulation so
you'll see sometimes like people who do
I've done some input and now I'm going
to call fire event with like a change
event or something exciting like that
webdriver does better emulation of user
events so what you might find is that
that second firing will fail with a
weird like stale element exception or
element not found exception and that's
because the thing that you were going to
kick off with that fire event has
already happened because the emulation
is better and alert like I said selenium
likes to see into the future but it also
stores with some pieces in a separate
location so if you do a patriot you know
gonna be able to get back some of the
values that's those are the major ones
that we've seen most of those are pretty
easy to work around when can you start
using this in the next few days
hopefully fingers crossed if I can get
Firefox 4 up and running properly we'll
release beta 3 beta 2 is already
available you can download it from
selenium google code comm you know video
you can check out the code the downloads
are also available from Solano HQ the
org if you're a Ruby user who's a ruby
user couple of you you can do apt-get
install selenium-webdriver it's pretty
awesome if you're a Python user is
anyone going to admit to being a Python
user yes brilliant wow there's Jason is
brilliant I love it
so you've got a giant developer down
here pip install selenium and you'll get
you'll get that available to you so we
support languages Java C sharp net
really Ruby and Python PHP is missing
from that list if anyone wants to come
and contact me and say I want to write
the PHP driver I will tell you how it
can be done right so I think that brings
us to the question part of this talk
apparently Harry are we hiring
yeah we're hiring so go and chat to
somebody in a black Google t-shirt and
they will direct you or a green t-shirt
especially green t-shirts and being give
them a thumbs up and they will pimp you
the company no that's not right is it so
questions is there a way to record the
browser in webdriver so it's easier to
debug what's going on okay so that could
be one of two questions and I'll answer
them both as a special bonus the first
one is is anyone familiar with selenium
IDE the Firefox plug-in that allows you
to record tests some people really love
that thing like they give it a lot of
attention and love we are adding support
for the webdriver API to the IDE it's
not there yet if you're looking to use
it you can do
there's an export or a formatter that
will output the webdriver back selenium
stuff for Java so you can at least get
started um the other thing that people
sometimes want is the ability to sort of
take snapshots or videos while the test
is running there is an interface that we
supply called Tex Tex Tex screenshot
which does exactly what it says on the
tin it allows you to take screenshots
but that we haven't got a video recorder
that is available in the open source
world if you're using VNC there's a
application called VNC to Swift which
will allow you to take a VNC output
stream and just save it as a flash movie
which is a kind of useful thing to be
able to do I hope that answers the
question so anyone that wants to ask a
question on the floor by the way sure go
for it doesn't there's a microphone just
there so people can he-hey
I've been using someone into for about
two months now I was been using an alpha
now using the second version of the beta
one of the biggest problems that I've
been having is this obsolete element
error it gets thrown a lot especially in
IE ya the biggest problem seems to be
that what happens is the element is on
the page and it disappears and it comes
back again yep and the only way to
really handle that right now is to do
this kind of ugly hack that does a
rescue and then sleeps and then waits
for the element to come back yeah is
there anything that can be done on the
webdriver side to handle that kind of
condition okay so the the style element
reference exception is thrown when we've
got a reference to an element and we
can't find the document it's meant to be
attached to by walking up the Dom now
there's a couple of reasons why the
element might have disappeared one of
them could be that someone's deleted it
using JavaScript one of them could be
we've done a page reload one of them
could be that we've deliberately
detached it from the Dom but we're
keeping a reference in another piece of
JavaScript so we can later reattach it
the problem is from a framework level
all those three things look identical
which is kind of a
in the backside he says politely I mean
New York I should be a lot ruder
shouldn't heck yeah how's that was that
good
yes thank you I'll tell people that J
walk across the street or something will
be very exciting sorry but that was
incredibly camp I'm sorry boner so we
can't tell the difference at the
framework level between these things and
so we have to like because we can't tell
the difference we have to punt and you
have to put a layer of in between so
you're doing the right thing of like
catching the exception and waiting there
is a wait implementation I think for
the.net framework for the co-op bindings
which is I'm using I'm using the Ruby Oh
is very good okay I'm not sure if there
is one I think Gary Gary back in is the
yeah I talked Melvin yeah I am Tim
sometimes Hindman Jim Evans yeah Jim
Evans and the area vacuum that's her the
open source contributors they are
awesome yeah like I'm so impressed like
one of the really nice things about the
project justice inside I'll ignore your
question um is like the community around
selenium of developers and users he's
really nice it's one of the friendlies
once I've actually come across as an
open-source user and developer and the
people that make it are people like Gary
and Jim Erin who just are lovely to
everyone it's amazing
sorry yes so you need to do exactly what
you're doing okay sorry that isn't a
good answer but at least I know why now
Erin thanks cool any other questions on
the floor I shall I go back to the to
the automated ones okay I'll do this one
in what is the fundamental difference
between selenium 1 and selenium 2
interacts with the browsers I think I
covered that but basically selenium 1
written in JavaScript webdriver selenium
2 down tightly to the browser there's
some really interesting things happening
so the next release of chrome chrome 11
we're hoping
to also release a version of the
webdriver API that has been developed in
the chromium source tree alongside and
delete the aprons that the the the
separate crane driver that we've got at
the moment so the chrome driver will be
maintained as part of the chromium
project opera have recently released
their own implementation of the web
browser AP ice as well and the Opera
driver I think that's brilliant
and it speaks to like the long-term goal
of the project which is to help define a
standard for browser automation because
it's totally crazy that the sort of the
selenium team are trying to automate
every browser on every operating system
including the mobile ones which may not
have a hook to get into them and it's
totally upsetting that people who are
trying to write you know automated tests
who are trying to do tasks where an
automated browser would be really useful
have to go and download yet another
project arguing yet another library and
have spotty support at best like it
should be something that's in the
browser I strongly believe that and
we're trying to turn it into a standard
cool there's a whoever gets the
microphone first can ask the question
first there's a microphone just yep good
it's there what version of ie 6 7 8 B 2
3 which is coming out soon has pretty
good ie 9 support as well so the full
gamut of browsers ie versions you're
actually going to see in the wild
IE 9 is fantastically brilliant and fast
and slick ie6 isn't quite so good but
Microsoft have done a really nice thing
like they've kept the Khan automation
interfaces that we rely on completely
stable all the way through the
development of these things so you know
when I use 7 and I EA came out actually
to support that we had to do very little
work Microsoft had done a fantastic
engineering job I know that we're the
only nine they've ripped the guts out
and replaced it but actually from our
point of view it's been relatively easy
to figure out the changes and just put
the support like Microsoft had done a
bang-up
with the engineering on that why does it
keep them doing that come on you could
do you prefer running webdriver from a
command prompt or from an IDE and why
yes Wow it depends
while I'm developing it I like running
it in the IDE when I'm running a suite
of tests that will take an hour and a
half to finish I definitely prefer the
command-line because then I can use my
IDE to do other interesting things like
continue tinkering with the tests as
they're compiling what am i running I
don't really know it's very exciting you
had a question my question was with
everything going to mobile devices now
to try to make sure across multiple
platforms as well as in different
browsers that your applications work
efficiently and fast what do you think
is the next future to try to keep that
sustainability good question so I think
part of it is that we need the
automation hooks baked into the browser
like browsers have been a major part of
our lives for 10 15 years now like we've
been using these things for a long time
testing frameworks like selenium like
webdriver selenium 6 or 7 years old
web drivers just passed this fourth
birthday like we know what these api's
look like they're not experimental
anymore we should put them into the
browser for the bits that we know there
are interesting times ahead I think
where we may be on the cusp of going
back into the dark ages because of the
canvas element and the video element
these opaque things that haven't got an
automation API and that people can do
anything they want with like people go
to me how can I test my canvas based
application is like but have you put any
testability hooks and no like we may end
up having to do some sort of visual
recognition or something and that yes
there's a snort of derision from the
audience is even Moberly visual
recognition is indeed ugly in this
context and fragile and a remarkably
poor idea because I'm a big fan of TDD
like need to be able to read using some
good runs so I think part of it is gonna
be developer education like we're just
gonna have to sit down with developers
and go low if you want to be able to
automate your app I know you've got all
these possibilities but like and we
don't want to take those possibilities
away but provide the hooks we need in
order to verify that your applications
are correct because otherwise like
there's a whole stack of really
difficult problems that are coming just
because a lot of apps are trying to dumb
down what the actual website is on a
regular computer than it is on a mobile
device and they're learning that they're
gonna have to put less and less this is
all so much space on the actual mobile
device when they're designing their
websites when they're designing the
browsers because I know Firefox as a
browser app so does Google when you do
those Google search they have their own
browser app ok so yeah I mean there are
hybrid applications that appear now
where you've got a native component and
in a webview mm-hmm
there is a project that I'm not sure I
should talk about called Sky Tree so I
don't tell you about it written in Tokyo
I haven't told you that where they're
attempting to write an API that uses a
webdriver stuff to test native apps
particularly on Android certainly didn't
tell you that and then we're trying to
figure out how to hook that into
webdriver so you can do like part native
part web driven and just try and do the
right thing it's interesting times like
you know in the proverbial sense like
yeah I don't have a good hard and fast
answer I've got ideas and I think hybrid
tools are probably going to feature
quite heavily thank you thank you go for
it
maybe a Segway there but are you guys
doing anything with flash or flex I know
Jim Huggins pieces with sauce labs now
yeah so they've been doing a bunch of
stuff with flash and deflection
automation and are you guys thinking
about it are you guys gonna bake that
into webdriver so I know you do you know
the UNIX philosophy of like a single
tool doing one thing and one thing well
like I really do think that's the right
way to be writing you know testing tools
like just focus on the one thing the
problems are big enough as they are
without trying to solve for every
problem the source lab stuff that
they're working on hooks on top of a
project by Adams
hey DMC is is username yeah thank you
called flex pilot what that does is you
compile your Flash movie with an extra
module and then it opens up some
automation hooks those are accessed
through JavaScript now web drivers got
pretty good capabilities for executing
arbitrary chunks of particularly
malformed JavaScript so there's no
reason why we can't use the same
automation mechanism so I'm not gonna
bake it into the framework but what I
will probably miss where you are there
we go
I'm not gonna bake it into the framework
but I will make it easy for people to
make use of tools like flex pilot the
other side of the equation like
sometimes people go I want to modify
headers and I want to mutate content as
it comes from the browser from the
server and I want to measure content
length and stuff like that that's the
sort of thing that's best handled by a
proxy so we're working so one of the
nice things you can do with webdriver is
it's pretty easy to specify the proxy
that you want to use so there'll be a
separate project which does a fantastic
recording proxy with mutation
capabilities and you know all the bells
and whistles that's outside the scope
for the project but again we'll make it
easy to hook in and take advantage of
that stuff
yep yeah so there's I haven't haven't
looked at it too deeply but there will
probably be a thin shim layer that
abstracts away some of the common
JavaScript executors things that you
need to do
I notice that areas looking at his clock
and okay yeah good question and the
question was are we going to support PHP
in the future I'm going to do the answer
that I always give people which is it's
an open source project
anyone can check this stuff it really is
an open source project like you know
there are open source projects which
companies work on and they've got like
their own little internal version and
they go and they throw it over the fence
I go look we've done a new release
that's not how this project is run we we
run the entire thing in the open and we
take snapshots back into the company so
PHP support so far nobody's come up sat
down next to me and gone I want to write
this one person did I was at a hackathon
in San Francisco he had working PHP
bindings within about two hours and then
he forgot they had a hot date with his
girlfriend and got a really annoyed
phone call and left in a hurry and I
haven't seen the PHP binding since then
I know they existed for a short while
shouldn't laugh at that that's not good
I mean shouldn't laugh at it but we do
anyway um one last question gentleman at
the back there
so the question is are we going to
really sniff it's a code to make it
easier and demonstrate how to use the
framework right so if you go to the
selenium HQ org you'll find an awful lot
of documentation there we're working on
beefing up those Docs so that if you're
new to the framework you can just go
there read it and get sort of insight
into how it might be used and what you
can do one of our release items before
we do 2.0 final is to have some example
applications some example code so you
can go like you know how are you meant
to use this what are the patterns that
people use how do I set things up stuff
like that for selenium HQ org so if I
just flip back to the presentation using
the keyboard shortcut which I don't
remember and go to the final slide boom
there it is that second link there
selenium HQ org there redox there so
yeah we want to make this stuff really
good everyone I think we're out of time
for questions I'm going to be around for
as long as it's necessary thank you all
for your time thinking all very much for
your attention</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>