<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>GTAC 2008: Boosting Your Testing Productivity with Groovy | Coder Coacher - Coaching Coders</title><meta content="GTAC 2008: Boosting Your Testing Productivity with Groovy - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/GoogleTechTalks/">GoogleTechTalks</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>GTAC 2008: Boosting Your Testing Productivity with Groovy</b></h2><h5 class="post__date">2008-10-30</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/UvWTfVCWKJY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">thanks Lydia for inviting me thanks
google and for providing these
conference and thanks to you guys for
being here because you really are
interested in to testing so first off
why boosting your testing productivity
groovy well I'm here to tell you that
you can have fun while doing your
testing but before we start how many of
you actually are comfortable using Java
or use Java for testing well like
seventy percent of you people all right
how many of you also use another
language for testing your Java code
let's say Ruby Python game or hands
peril the same amount like twenty
percent the small talk javascript okay a
few hands and anybody using Ruby right
now right leg ten percent okay so for
those of you guys that are not using
Ruby hopefully I'm going to demonstrate
how you can use it to test your Java
code in an easier way in a funnier way
and in a faster way I'm eventually an
agile way so this is the agenda what is
groovy then we are going to see a little
bit of integration of groovy with some
testing framework so the testing
frameworks of Java are pretty well known
Jade Union and testing g then we are
going to do some mocking with groovy
anybody here knows oh well you smoke
testing how do you feel about that good
bad because I know that marks have a
love-hate relationship right then we are
going to do database testing yeah
database are are in very important
pieces of code and functionally UI
testing this is another aspect of silver
testing that usually goes out of this
schedule right because you I testing is
hard is harder than testing the database
is harder than
in a server so hopefully we're going to
see one of the many options you have for
testing you eyes and eventually some
resources that you can look afterward
okay so what is groovy well groovy is in
an agile and dynamic language for the
Java Virtual Machine and I'm not saying
just agile because of the sake of this
is a buzzword no really because it has
so many features that you can use right
now that we will just want to the we
would love to have in Java 7 or Java 8
whenever it comes out for example
flushers everybody is talking about
closures are there going to be on Java 7
or not who knows we have to wait for
next year it builds up on the strength
of Jabba but it has its own set of
features inspired by other languages
like small talk like Python and like
Ruby that's what I asked you guys if you
knew about other languages because that
knowledge that you have with Java and
those other languages you can apply it
right away with a groovy language it
also makes programming model programming
features like closures available for you
right now in the Java Virtual Machine
and with an almost Sarah learning cube
because the groovy language is very
close to the Java language but it is
still its own language it is not java
plus plus it is a complete and
individually individual language and
also supports domain-specific languages
so you can create a testing dsl it is
very easy actually we're going to see
one of them and there are many options
for you to create a DSL for almost
anything it also increases developer
productivity by reducing the scaffolding
so for example let's follow the job ins
convention I hope you guys are know
about the javanese convention you have
to provide no RS construction and a
gator and a serial for each property
right how many lines of code are wasted
writing the same things over and over
and again
just to fill the convention right so
that is a scaffolding we all know about
that we will want we would love to have
properties in the Java language
eventually right groovy provides those
features right away it also simplifies
testing because it provides a great
integration with AJ unit framework out
of box I also provides integration with
the test in G framework out of the box
you don't have to import anything extra
once you download groupie you just
ruined your test scripts and you're done
you get your red bar or your green bar
depending if your test is good or bad it
also seamlessly integrates with any
existing Java code java library java
object and that is for a good reason
which we're going to see a little bit
further and also compiles down to job ID
code there are plenty of languages that
exist in the in the java any jbm
ecosystem there are more more than 250
languages and some of those chose to
write byte code valid java bytecode and
some of those done they don't want to be
close to java web this is not the case
with Ruby so that's a big plus for all
of you that are already working with
Java so let's see a basic example and
where's my water all right so you have
basic class that property their Gator
and cell we are following the convention
and we have business method called grid
and we have our main entry point right
every class in Java has to have this so
let's look at the groovy version of the
same code link and you'll miss it let's
see it again java Ruby
so first thing you learn about groovy is
that the syntax is almost equally the
same as Java and right now those of you
java developers raise your hand again
please you have swallowed the red pill
you are now groupie developers you
cannot go back right and this is why
because you can in most cases rename all
dude java source files into groovy
source files and it would run and it
will compile and you will do amazing
things which is actually what you're
respecting here is a more glue of your
example so groovy has a concise syntax
so you can use a jealous in test or you
can use this one so we have the same
class declaration and you can see that
some keywords can be emitted because
there are there are implicit everything
is public there is a property and if you
inspect the bytecode you will see a
getter and setter and this is actually a
script even though it's declare in a
class c there is no main entry point is
you run these through the groovy
interpreter you get the exact same
behavior as the previous example don't
enjoy in groovy are any java so we have
less lines on codes we are more
expressive but we retain the same
behavior this is one of the advantages
are groovy for you java developers you
can have the same behavior with Lance
Lance less less encode and the theory
says if you have less lines of code then
you have less risk and you probably have
less box right hopefully I forgot to
mention if if you want to ask questions
as we are go along please do or if it's
a really burning question if not then we
can wait until at the end of session so
the first thing you have to take into
account when working with Java and
groovy this is the first mantra so Java
is groovy and groovy is Jabba so what
does this means it means that every
single class every single java class is
also a group
us and every single groovy class is also
a Java class you can call java from
groovy and called groovy from Java and
you don't have to use any sort of a
special bridge let's say the job access
scripting engine that came from the Java
6 release you don't need it because Java
and groovy integrate seamlessly just
like that there are other jbm languages
like Ruby that can call your java code
easily almost like there is no
difference in the syntax but if you're
Jellico wants to call your JRuby code
then it's not exactly a cc they're
working on it and hopefully some other
languages will pick up what groovy
already provides is a seamless
integration within the two languages
ruby is also using the saints memory
model and security model as chapa that
doesn't happen with other languages
let's say Jaden and JRuby because those
languages are a port of a native
implementation into the jb m and that's
good for them but groovy has its roots
in the jb m so if you are you have
something in production code that relies
or has a specific ties into the into the
Java language memory loop model and the
security model then don't worry those
constraints will still work if you're
testing your code with groovy there is
no impendence mismatch there so as I
previously said 99% of the code of
Jericho that you already have will work
in groovy you just rename file to dodge
off from Java to dog groovy and you're
done now what about that to a percent
that it may not be Ruby code so here are
a couple of gotchas Jabara initializers
are not supported that is because
how groovy treats the syntax
foreclosures but you can coerce a list
that we have basically native syntax for
users you can coerce enlist into an arai
so it's like you have to do a casting
and it's very simple to do casting with
Ruby it also is a right now is not
supported inner class definitions how
many of you love working with inner
classes three people work there useful
right I mean I I sometimes use them to
define i use my container class to
define a namespace for those other
private helpers I didn't use my internet
classes as private helpers right but
let's face it even james gosling said
before the inner classes in Java are
halfway through having real closures in
Java so because we already have closures
in groovy we can fergal having a support
for inner classes for the timing so in
maybe in the near future we'll be
supporting inner class definitions let's
go to the second mantra and this is
taking from my friend Scott Davis an
excellent person and I groovy aficionado
ruby is Jabba and groovy is not job what
do you mean by this didn't we say we
just say group is java java Scooby right
so this second mantra is contradicting
the first well actually no because a
groupie provides you with a flat
learning curve I mean you can start with
Java syntax right away using groovy and
as you feel more comfortable with those
features provided by the Ruby language
you can move on into a groove your
syntax remember the first hello war
groovy example and then the second one
so if when you are more comfortable with
those features then you will be writing
group your code but you can start with
your with a syntax that you are ready
familiar with also groupie delivers many
features the
are very useful and actually very useful
when you are doing testing for example
closures meta programming capabilities
we have new directors we have operator
overloading finally in one of the
languages of the jb m this is one of the
features that many people ask to james
gosling to add eventually to the Java
language but we don't have that in Java
what we have the new movie we had in
handset beau jo's because you do declare
a property then everything else will be
hand it will be handled by the compiler
all the bytecode required for you to
adhere to the jovenes convention but
it's done by the compiler is not done by
you it's not done by by your IDE is done
by the language itself we have 19 6 in
taxes for for maps and lists so it's
easier for you to create those
structures we have regular expressions
we have enhanced class casting because
as I said you can cast a list into a
right of anything you want to we have
optional typing that's what I said ruby
is a dynamic language remember that well
javis an ecstatic statically typed
language and Ruby on the other hand is a
dynamic type of language well groovy
sits in between if you need types using
their useful where if you do not use
them you don't need them then don't use
it I mean you can use duck typing if
needed that's why we call it optional
typing and well there's only a handful
of features that you can find a Google
language but there are many many more so
let's go directly into testing and why
we are proposing groovy for testing so
the first thing is that any grouping
script maybe gonna test a test case
right away the only thing that you have
to take include consideration is using
the ather keyword that was introducing
in java one dot for enjoy double for if
you want to use the Asura keyword you
have to pass you have to set our flag
right enable assert
while in groovy you don't have to use
that flag it is enabled by default and
that's it is it simplest way for you to
create a test case the second one is
integration with that testing framework
because let's face it if we ever if we
all of us use it simple screens for
testing then what will happen with also
tested fragrance actually we need more
for because not all applications are
born equal not also very sequel right so
groovy provides i agree with a base will
be test case for you if you want to use
j unit 3 x series and that test kit has
some features that you may want to use
and i'm going to show them all so you
can you have a good'n level integration
with junit for and testing g because
groovy is one of the few languages
actually i believe it is the second
language that has full support for java
file annotations and also supports a
static imports same as java file and
also supports idioms that came in java
file this is how we usually test
exceptions in java right we just
probably withstand a test case if we are
in unit 3 and that that is the business
code we want to test right and
everything that is in blue is a
scaffolding that we have to code in
order to assert that that business code
is throwing the expected deception right
so it's kind of awkward to have a catch
block that does nothing I mean many
tools will warn you against this right
you should do something in your cash in
an exception well there is no other way
for you to test this thing let me show
you a groovy way so we extend the groovy
test case and we use a new feature which
is the shoot fail blog
it takes a class or a list of classes
and a closure as our parameters look
that the business method is inside a
block that's a closure if that when the
test is executing that block of code and
if that local crew shows the expected
reception then we're done there is no
need for that try catch block it's done
for you and actually if you set a list
of classes of expected receptions
different exception that that maybe it
will work also work because if you want
to test that case throw in several
expected exceptions then you have to
have several try-catch block right or
least several catches and well it looks
cumbersome and the problem here is that
it adds a lot of visual clutter and if
you really want to test things faster
easier then we have to read them in an
easier way yes question actually it's a
method provided by the groovy test case
so how do you run your Ruby test well
there are plenty of options and we have
we support almost all flavors if we
don't mess in any religious debates if
one AD is better or the other one you
want to use idea go ahead actually idea
has to this day the best support for
groovy right now evenly it evenly
provides a refactoring support within
groovy and java source code at the same
time well you can also room groovy on
eclipse or netbeans or you can use
common line tools if there is your thing
actually I'm a maven fun so but you can
use and you can use
which is a group your version of gang of
ant how many of you love working with
xml come on be honest really love play
five hands how many of you hate working
with xml well they have now you know
what's bad with Java since Java was born
it came with this how can we call it
like symbiotic tween let's call XML
because every time that we want to do we
need to write configuration for our job
applications was the first thing that we
think of is it properties file or XML
XML right so what's up with that okay
Gant is a like a next level of
attraction / and it removes all that XML
thing I mean XML has pointy things and
you really like to work with pointy
things then you're going to hurt
yourself come on stop hurting yourself
so again remove the pointy things out of
the way and you use groovy so the next
thing that you learn about Gant and Ruby
itself when removing XML is that it's
XML a compatible format you can compile
XML you get compile errors with XML no
you don't you get runtime errors with
XML well if you use grube as a DSL for
driving and which in this case is gained
you get compiled time of your build
files that's good at least dice are the
first line of defense against some time
of errors because let's face it you are
working we are developing software for
removing bugs in production we really
don't want to create box on our testing
server right let's get those out of the
way our if you don't are into these
tools you can also use the groovy shell
and the groovy console and the group
interpreter I mean there are plenty of
options actually I really recommend all
of you when yours if you want to start
with groovy
fire up the groovy console it's a new I
application ASAP let's call it a mini
ide if you will and you can replay all
your scripts you can save you can load
you can do many things there and it's
very easy to use okay knocking with Ruby
I know a Harry topic how many of you are
comfortable with a smack okay a little
bit and jmac okay less people don't
worry if you go with easy mark or jmac
it doesn't matter you can use them right
away with groovy and that is because as
I as you can recall any java library can
be used with groovy right away no
problem sir but if you don't want to
depend on an external library or
external software because I don't know
there maybe it's a policy in your
company to reduce the amount of
dependencies for whatever reasons which
may be valued then you can use groovy by
its own I mean you can create dynamic
process as it stops Ruby makes it very
easy for you to create a proxy from any
class and I mean even final classes can
be proxied by groovy because ruby has
these meta programming capabilities did
you know that there are new methods the
grip revised to string yeah we do we
provide the capitalized method we
provide a new split we provide each
which is an iterator over all of the
elements that conform to the shrinkage
of the characters but if you're looking
at into the definition of the string
class it is final so how come groovy can
extend the behavior or a final class
this is done by metaprogramming we have
compiled time at a programming and
runtime metaprogramming both are
powerful and you can use both of them as
you see fit well dynamic proxies use
this feature meta meta meta programming
and we can also use this tool for a map
for
which are pretty much design in the same
way that Jane work works but they do not
have any external dependency it's all
groovy so let's see them in action let's
go to a quick demo of the United praxis
where is where it's okay let's follow
the groovy console like this I'm going
to up the the fun in just a second see
where's my Perry console okay there is
stop it large phone right your front
okay so let's look for our example we
should be Alex sorry whoa whoa desktop
why did I stop yes dynamic proxy sample
is that good enough for you guys at the
back can you read it okay so we have a
basic class sir which is a string
provider let's think of it I like a
regular service that you will use in
your production code and we have an
estranged decorator which uses this
stream provider so the decorator is the
color and the provider is the
collaborator so whatever they provide
the returns the decorator with add
something to it here on this here's
where we define our dynamic proxy so how
many of you say that you work with
JavaScript raise your hands thirty
percent this look like JSON right what
we're actually doing here is converting
a map into an instance of a particular
class so this is the the syntax for a
map this is a key and this is the value
the value is a closure and
we are saying Ruby please grip compiler
port please transform this map into an
instance of a string provider and if you
do do an instance of on that value in on
that variable which is provided it will
say i am a string provided i am no
longer a map i'm a proxy of an extreme
provider so you can pass it around to
any java code that requires a stream
provider and that's it I mean let's use
let's use our decorator here this is
another nice feature a groovy remember
that I told you about enhancing pojos
not only do we provide properties out of
the box we'll also a nice a default
constructor that use that property
support so that looks like name
parameters so we have a trick in groovy
to fake out name parameters that's
actually a map so let's ruin this thing
let's click on the Run button right here
and no errors that means it work I mean
this is a script let's change something
here so our decorator will always add
the appended decorated string to
anything that the provider give us right
and in this case our provider will
always pass Ruby let's change this to
Griffey 2 so this assertion should fine
now right assertion error that's what
you get out of the box this is not a a
unit test cat Noir at test Angie taste
this is a basic group's script this is
how easily you can test anything
questions yeah sir
you can mock anything java angry with
classes this way because you are
actually providing the implementation of
the method so if you set the value it
wouldn't be it won't work you have to
set our closure actually that's how this
mechanism expects you to provide the
behavior for all these classes so that's
a good point yes sir when you're mocking
a class the question is if you're
marking a class do you have to mock
everything no you just only mark what
you need to so let's say that we're a
stream provider has ten methods but we
only care about this one the getvalue we
create a proxy and we define just the
implementation for get back so as long
as you do not call the other nine
methods everything will work everything
will be peachy yes sir yes you can you
just define the parameters on the
closure for example let's say it get
string tricks a new parameter string a
and we return a plus this one or yeah
sure let's do that let's say anything
goes here be Ruby plus B plus decorated
right you're following me I am I going
too fast let's call em wait we're not we
have to set a new body here we can set
we can define types as I said optional
typing or just said anything here let's
say that charter whatever provider
string character and this guy has to be
called getstring right so right here we
called get value now
is that previously it was just value
that's because we are accessing the
property right away but if a method that
looks like a property Gator requires a
parameter then we have to use the long
wave which is good value and set the
parameter so let's say Google now this
should be Ruby google decorator that's
what we expected right the question I
have left is what about two methods of
the same name which differ in their
parameters you can't map those two
separate values in the map you can't
with this feature these out of box a
proxy creation thing cannot work with
that but and here's gossip blog there is
a project called proxy o matic which i
am the creator that allows you that
excellent thank you thanks i sell man oh
sorry well we have a red part that's
that's good right red is a good as green
now we're green yes
actually the groovy plugin for Eclipse
has a good integration with Ju and
testing g it provides both ok let's move
on because I think I'm falling short
done everything is fine Oh print attack
oh ok so in case the demo gods were bad
to me this how we will see the demo ok
hopefully that wasn't the case thanks
God ok so this house stuff and so far
enough forward we are again in our basic
color collaborator way of working marks
and stuff define expectations on
collaborators only mocks our street you
defying expectations on them and you are
expecting those expectations to be
fulfilled in the same order as you
define it and in the same cardinality if
you say it gets trained should be called
twice then if your test the order color
actually doesn't call getstring twice
then there is an error and stops are a
little bit looser than this marks you
can well actually the expectation must
be fulfilled in cardinality so the same
they have to be our gasoline is defined
to be called twice it should be called
twice but you can call let's say get
value between those two in vacations and
that will be fine with stoves because
they are loose but they're here there's
an 1k but somebody asked me these are
proxy stuffs things today work with java
code and Ruby code yes they do but stuff
for a mock for do not work in all cases
the color must be groovy and that is
because of how groovy handles meta
programming Java code calls whenever
Jack code calls an old Java code it goes
directly to it there is no way to do
dynamic dispatch but when groovy code
calls other groovy code or other
java code there is a chance for dynamic
dispatch and stood for a mugful rely on
that dynamic dispatch let's look at it
took for example okay so we have to do
some import here we are back to our
string provider we have now strain
decorator and the thing that change here
is that the decorator which are is our
color is creating an instance of our
provider how can we mode that actually
is the same thing as if we have those
evil single terms how do you work and
test with Singleton's well if you call
this groovy you can you create a new
stuff for your string provider that will
tell Ruby to do some meta programming
magic then you declared your
expectations on your stuff you say a
stop dot demand the map of getstring if
the parameters of gastrin had a number
or a range then that's how you will
define the cardinality by default is one
so there's no point in adding and I
wonder and the closure is again their
behavior of your expectation in this
case well you just return the string we
have optional keywords remember so
return is an optional keyword here the
last evaluated sentence will be the
return value and now we declare that we
have to use our stuff and that use
method which looks like a keyword
actually it's a method that takes a
closure as a parameter and this is the
business case that we want to test we
define a new instance of a signet
decorator under the covers Ruby will do
dynamic dispatching to our stuff of a
stream provider instead of the real
stream provider class that we have on
our
color so this code should work let's run
it no errors looks like magic it's magic
is Ruby metaprogramming you can nest
them but as long as you do it in the
correct order okay next okay again if
the Democrats were not good to me this
is what we will say testing databases
how many of you test databases forty
percent of you any of you used every
unit 34 well I really recommend you to
use at least give it a look I don't know
which holds you use obviously you can
use whatever you need to or want to but
I really urge you to take a look at
every unit which is an extension of data
unit a genuine sorry how many of you
know that you can run J unit tests with
Tess ng testing g is the new generation
of testing frameworks so you can use
Devon unit with testing g there's no
need to switch completely to another
context and there are several options at
your disposal when you whenever you want
to use the a unit for testing you can go
old school which is extended data based
assays as well actually we have five
based database test case classes
depending on how you will initialize the
properties for the connection of your
database or your data source in that
case there is also a more flexible
option which is using the I database
tester implementation this option allows
you test composition so let's say you
are writing an integration test with
HTTP unit or any other genuine extension
that has to that makes you extend a
particular data test case can you use
data devil union now now you
can't because Java has single
inheritance mother right but if you use
composition based on the database tester
then you can do it or the third option
for those of you that feel that you need
to create your own tools you can roll
your own database this case remember
what I said about XML ok here goes again
this is a basic implementation of a
debate union test case notice that it is
not extending extending a test case so i
went with option number two i have an e
database tester as the object that will
be responsible for reading accessing on
right into my database there are two
methods that are important in this case
be there are marked without sanitation
before class and after class so there
are going to be called just once for all
our test suite that's a good thing I
know j unit 4 has this feature but it
was done before in testing g so we
create a new tester there there are four
basic implementations then somehow we
insert the table the schema and the next
thing you will do is fill the data what
happened to that xml that xml is right
here in your java code we're using here
ducks as in Ruby as in Python as an c c
shell scripts we have support for here
ducks just use the triple quad notation
you can put anything there it also has
variable substitution we didn't use bio
substitution here but it's very powerful
so what's the advantage here if your
test data is a small enough it can fit
in right there into the source code or
your test because sometimes you will be
doing some tweaking to your test code
according to your test data if your data
is huge then obviously this approach is
not really recommended but we are still
working with pointy things I remember we
hate
pointy things can we do better than this
yes we can how let's turn into Ruby code
these piece of code the blue one
provides the same output which is an XML
file well actually an XML string but the
advantage here is that that is groovy
code that is code that can be compiled
there is code that can be the bug it's
hard to debug XML I know there are some
tools that provide XML debugging nobody
likes to that to do that well it's
easier to debug regular code right so
remember that I told you about dsl's
well Marco builder actually is one of
the many options that groovy has that
follow the Builder pattern and the
builders are a good way for you to
create dsl's so this looks like dsl for
our data because we're define a company
object or company being with those
properties and that employee which also
belong those two belong to another being
which is the data being there is a
container of these objects and as far as
devi unit is concerned that data set
value is an xml extreme right all right
we are actually finishing this thing so
if we shun our UI testing how many of
you test your you wise in anyways ok
plenty of you I assume in most of you do
web development is that true how many of
you do desktop development and those of
you don't keep your eyes and your hands
raised how many you tested why hopefully
it's good for you because i know this
hard ok this usually these tests usually
require a lot of setup
and they depend on the environment like
no other tests and this is one of the
things that I think is aspiring by James
talk having your test and your
environment couple in in a cohesive unit
that can be repeated in any other place
that's good and well let's see if we can
get there hopefully we will get there
actually non-developers usually like to
dry this test because it is the customer
they end user that will be using your UI
is not us engineers it will be damned a
developer's usually don't like to code
this test because of the same reason
because it's at the end of the
production line of what of what we think
is the end of the production line when
we ship it we're done right unless we
receive a bug report not functional
testing means unhappy customer and that
means happy developer I don't have to
convince you of that well we will be to
the rescue you want to be happy again
doing you a testing you can you can use
any of these options with groovy with
Greg success if you're into web testing
you can use selenium or you can use can
you web test which i will say is my
favorite because of the same reason
instead of using XML if you don't need
to it you don't want to use XML you just
use your record as your test in dsl and
it would work or if you're into swing
testing i suggest you take a look at
fest which stands for fixtures for easy
testing or if you're into the next
generation of testing which is behavior
driven development then you can use ECB
and ECB works wonderful for any java
code and any blue beaker so we're going
to see an example of a CV and fast in
action hope you guys like it now we're
into the whoa that was an exception that
we Presley had go below let me show you
first the application so Barry's basic
application let's go here let's go to
desktop gtech g tax simple code let's
open this up sorry this one level that I
have to do Oh desktop get that anchor
get an example color you see you fast
right source right here so let's run the
application assume that we have a
dictionary of words the dictionary of
this application act just has one word
which is poking the issues yay the means
combative in nature belligerent let's
see what happens if we type anything
else word doesn't exist in the visionary
what happens if we don't type anything
at all please enter a body work so these
are the three scenarios that we have to
test how can we do it
that we source test groovy swing or
finder can you look at the back okay so
basically a set up there how this is how
you can set up fast but the actual meat
of our tests are here three testing
methods we will inject some value into
our text field then we will click the
button and then we will assert that the
return message is the right one so we
will first we will test if the word that
is found in the dictionary actually
exists then we will test if we don't
type any value into the text field and
finally we will test typing gibberish
into the text view this is good for us
engineers I mean many will understand
this right away what happens with the
customers can they understand this will
they understand this would they like to
understand this now they don't they
would like to see well formatted
document with all the scenarios and the
stories and in a very readable fashion
right we cannot give them this but we
can give them something else let's go up
to here
this is the same testing curve but it is
using this framework which is called ECB
now it has the same testing variables as
the previous one but you can see some
new things like they're like a scenario
and some definition and given that worse
finders you why is shown some code and
the user types the word poking anxious
and then some code and the user clicks
on the find button and then we click on
the button then the correct answer is
displayed and we said well we're
expecting combative in nature and
illiterate and then we have the code
that actually does that and finally the
UI will performs its cleanup section
this is once a scenario of a story of
that the has many SNS actually we have
three so what we have done here is split
the code that is understandable by the
developer alone into some code that can
be understanded by customers and
developers alone and i'm going to show
you what's the output or ruling this
thing you sorry let's ramp up a little
bit the font so you guys in the back and
see it will go okay let's run the
developer test I'm sorry that the
success now that does
yay three test run no failures re happy
what about the customer now we're
running the second version of the test
okay and if we look into our output
reports we have one story txt five
what's in there let's look at it well
sorry wrong man this is what you will
give to the end customer anybody can
understand that I mean the user can give
you this description and then as easily
you can translate it into ECB code and
then fill in the gaps with your testing
and now both cams the customer and the
developer are happy there is more to VCB
than this thing then this this is a very
basic example but you can mix it with
anything else coming from the Java whirl
okay let's finish this thing well so for
more information you can go to the
project site which is groovy dot code
house argh are there are some references
for the testing frameworks and the test
code that we have seen JUnit test angie
table unit ECB and the last one is the
page for zip is a project page for fast
and if you care to know more about
groovy testing grube swing and then you
can read more about that at my blog
actually I blog a lot about groovy and
swing a little bit about fast but yeah
that's it so questions
we have questions or you guys hungry
doesn't work that's a good question
which comes up a lot lately and I have
good news group e 1 dot 0 which came out
december 28 something I died of 2006 had
a good level of performance but if you
compare it to Jabba it was bad now
grieve one dot five we came out of mid
of this year has way much better
performance and it's faster than JRuby
the latest beta which is one dot 6 beta
2 has even faster performance than 125
but you have to bear in mind groovy
because of these metaprogramming
facilities has a an abstraction layer
over those calls so Java code calls
directly George our method the groovy
dos own metamagic to do that some din
dynamic dispatch so that layer is
getting very very faster but it is still
a layer up from your regular Java code
so it is never going to be the same wave
of it won't have the same performance of
Java in terms of a speed because of that
small layer but it is getting faster
testing sorry so if i have a hundred
thousands of tests writing in the Yaba
should i forget about groovy no actually
you can just run it with a group
interpreter most of the times if you're
not relying on inner classes you are not
creating inner classes in your test then
you can use groovy if you are not using
right initializers you can use Ruby
right away and if not when you're trying
to compile those classes with a groovy
compiler you will get some errors on
some warnings of what syntax is
supported and which not thanks
yes question yes maven correct yes you
will add the gmail beam plug in as a
dependency and then add some
configuration in your report section and
also I think that that will be all I
mean it's very easy and one good thing
about the g maven plugin is that it not
with only compile your code run your
test code it will also give you a groovy
Michelle and interactive groovy shell
and an interactive groovy console that
will load all your class but all your
dependencies so you can do interactive
testing on your application as you go
with this plugin yes question I'm a want
to start by saying I'm a big fan of
selenium Zapruder balazs possible
looking at the final example you showed
there you had a human readable non
programming readable text which
basically functioned as a comment or an
annotation on the actual Ruby code that
was driving the test can we say that
when i see that i worry immediately that
will get out of sync that something to
make a change in one and not in the
other and your test stops being
representative of the customers intent
and the feedback becomes inaccurate is
there any effort in groovy 22 to
construct testing frameworks that give
you more directly human readable test
commands in a selenium like style so
that you don't have that separation
between what the customer sees and what
the code sees not that I'm aware of
right now I mean ECB is the latest patch
but they may be probably somebody
thinking already in that or probably
doing some code but i am not aware of
somebody actually that has made made it
public yet tellurium is that it alania
selenium no i haven't seen it before
okay you can also use ECB with a with
selenium i believe and if you're into
web application development and
obviously you have seen about you have
read previously about ruby and rails we
have our own version in group which is
called Grails and there is an easy be
plugging for Grails that works in a
wonderful way similar to what you have
seen here with fast you just add can do
web test or selenium with your grant
application and they're done very
business any question multi 12 tracers
are not in groovy along you will have to
rely on any existing Java library right
now I got a couple questions first goofy
is able to reach into the private
members of Java classes right is there
anything you would say to kind of
assuage the fears of certain developers
that it's still okay to write tests in
groovy for java code because it has that
additional capability which I would
actually like and my second question has
to do with just the readability of test
results when exceptions are thrown by
any testing framework they're usually
pretty ugly in groovy they include lots
of extraneous entries have you found a
way to kind of make those more readable
okay first on their first question sorry
was it fixable I was thinking already on
the answer in the second one just how to
calm fears about I private again right
so Ruby can see your privates
that's funny coming yeah right actually
dies a future that is not a bug that is
an intentional feature that is an
intentional design believing is not a
bug it's a feature so why would you let
developers access private data on your
class under test right there are some
times when you really need to do it but
most of the times you had a good design
and if you follow the test driven
development design then you will not
have to relied on those private things
to be tested or to be set into a proper
state in order for you to test it but
that comes with experience yeah I will
say yes you can do you can inspect the
privates of any class but try not to do
it there are better ways for you to test
your classes but there is actually no
way for you is you're working with
legacy classes with legacy data that you
cannot change the source code and there
this is the only way for you to set the
proper state and that invoke the class
then do it the only way and the second
question is about stack traces again
because of this meta programming
abstraction layer you will see many in
intermediate calls within point A and
point B and then you can get huge stack
traces you can reduce their perhaps
actually the groovy shell and the groovy
console already provide means for you to
filter them out but the Eclipse plug-in
also provides ways for you to filter in
those stack traces what wiII happen if
you ruined your Ruby code in say Hudson
a CI integration environment I will
suggest take a look if you're reducing
log4j take a look at making your own
appender to filter out those dosa stack
traces it's not that hard to do and I
really wish the at least log4j
implementation provides autoblog
something like that
there is a path somewhere to be to do
that but it's not taken yet no questions
one more question do we have groovy
drivers available for the sleigh diem
sorry groovy drivers available for the
selenium for example if I want to export
my test cases from selenium IDE to
groovy instead of Java so just like you
mentioned that just changed an extension
from da challa to draw be but if I don't
have the drivers I won't be able to run
those groovy test cases mmm well I'm not
really sure about that I'm not a real
user of selenium but i would expect
somebody to have done something like
that I believe in the you can wait at
the mailing list because somebody has
already done some Sun integration or
some level integration with groovy and
selenium or probably something can be
refactored out of the groovy selenium
plugin for Grails which does what you
need ok thank you ok I think that will
be all that's a wrap and thank us for
being here I know you're hungry let's
enjoy the line
Oh</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>