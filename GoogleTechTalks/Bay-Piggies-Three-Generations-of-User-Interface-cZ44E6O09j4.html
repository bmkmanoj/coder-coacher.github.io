<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Bay Piggies Three Generations of User Interface | Coder Coacher - Coaching Coders</title><meta content="Bay Piggies Three Generations of User Interface - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/GoogleTechTalks/">GoogleTechTalks</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Bay Piggies Three Generations of User Interface</b></h2><h5 class="post__date">2007-10-08</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/cZ44E6O09j4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello welcome to Bay Peggy's I'm Dennis
Reinhart I'll be the first speaker
tonight it looks like our other speaker
isn't here and the third one is ill so
this may run a little bit longer than
was originally on the schedule i'm going
to try and shoot for like 35 40 minutes
as opposed to 25 there's plenty of a
code material here so let's let's get
started what i'm going to be talking
about is three generations of user
interface for the same program i've
implemented the same program using a
different user interfaces and this
program was originally designed as a
user interface experiment and it's my
test bed for working with the user
interfaces but this isn't about that
particular program that will emerge
they're basically three different
methods I use the first that started
with was a direct use of a Windows API
in other words I use C types which
allows you to communicate directly with
the DLLs and I implemented a user
interface that goes back the method goes
back to windows 31 and before often
known as a petzl interface in other
words you're talking directly to the
windows dll's not a lot of people do
that wxpython can see heart was going to
talk about that at more length that was
one of them all I'll be addressing that
and then a couple of ways of
implementing HTML based processes and
conclusions for those of you who are
looking at this that on google video
there are a number of program listings
that are going to be unreadable so
follow along
the URL that's listed here and no URL be
given several times throughout so pull
it up on your computer to follow through
with the program listings so first let's
start with the director windows API
program interfit you know the main
program view is shown at right you see
this thing is basically a drag and drop
icon when you you can drag that outside
the boundary of the window and drop it
on another program that's one of the so
this out process communication is one of
the things that makes this a user
interface challenge most user interfaces
everything is confined within the one
process but this has both in process and
out of process elements which makes it a
good test bed there's see light coating
which you'll see some of and most C
programmers have the entire windows API
laid out for them well you don't have
that in a Python or at least I didn't
and one of the gotchas here is that you
need to use what are called external
resources in other words they're dialog
boxes things that pop up with little
messages on them and those are
structured things that you build with
Microsoft proprietary visual studio and
you can have them as separate files and
then you somehow need to hook to those
so let's um let's look at external
resource here's a here's a typical a
dialog box with some stuff you fill out
and stuff it's a constant and some
buttons nothing nothing real exciting
about that this is the definition of
that dialog box so for example for
example here this yes it's somewhere in
here
well anyway all of these all of these
items on screen are laid out in this
text file this text file is then
compiled into a binary file and many of
these things are given numbers 101-100 a
bunch of 10 ones the a 1050 10 15 10 12
10 13 etc those numbers then get entered
by hand into a Python program so that
I've defined variable names or names
that are equal to those numbers so
there's no other coupling other than
those numbers so given that we have
those numbers in our Python program the
code that reads and writes the dialog
box is pretty ugly-looking there it I
you know it's not particularly beautiful
code and in going through it you don't
have any good I don't have a good mental
model of what we're looking at in terms
in physical terms but it it works and
it's it's tough it's tough to work with
yes question was is the Python code
generating the the screen that we're
looking at and the answer is in part yes
in other words the Python code is
supporting it but there's an object a
natural file object which is you know
called a resource which you then pass to
an API and the API shows the
d resource on screen and the code the
Python code that you're looking and
fills in fills in the variables okay
anyway that that is the direct capi I
got one thumbs down I the the next one
is I tried reimplemented pretty much
this interface in wxpython and what I
wanted was a higher level interface in
other words I think I've convinced you
that what you saw was pretty low level
it worked you know I I say well put
stuff up but it was tough it was tough
to work with here is the front page of a
new interface there there are various
tabs here you'll notice that the tabs
aren't particularly well delineated for
a while I'd struggled with that because
the tabs are supposed to have a little
orange tap top to show that which one is
active and I'm surprised I finally
figured it out in other words that the
the path that's used in the python 2.5
python distribution has to be followed
precisely you can't just move things
around and change the cyst is what I did
it worked and Iran but there were some
dependencies there and so when I went
back and made the assist the the
pythonpath exactly follow the tree
structure of python distribution I think
I think I'd fix that but so as looking
for higher use a higher level interface
basically what i use their tabs which
you can see here splitters a tree which
you'll see in another picture but most
of the pages were actually HTML it was
just you know
he's here to work with when I wanted to
just put some text up on the screen
wxpython has a concept called oh shoot
sizers and boy try as I could I never
really internalized how to use sizers I
know is I was always having to look at
example kind of copy and paste it and I
never quite figured out how that
actually worked but I got it working
there weren't though I didn't use a lot
of it I didn't use a lot of native
features but I used virtually all of the
but these few features use virtually all
of the dll's or the PYD files as they're
called and I'm clearer you know that
just just those few and I had to pull
just about everything in there was a
control they called the grid sizer which
that was about the only one I didn't use
and there was a heavy memory footprint
which I'll go into later so here's some
here's same interface as you saw before
you remember on the the native window
interface there was a bunch of things
that you're the bunch of pictures that
were listed this is now split out to a
separate tab and made to two layer two
levels and what we're showing here is
the wxpython code now we can actually
see it for building this particular tree
structure in other words there's an
there's an here there's a in memory a
structure that contains objects which we
step through we pull the file name out
of the object and then if the file name
changes in other words we're going down
we're going down here so every time we
see a new file name we then go down this
path and at this point
I think it's at this point at this point
we we add this this element at this
point and then for all elements that
we're stepping through at this point we
add this this second level and that's
that's the code which generates the tree
but because because there's no way to
manipulate the the tree or there wasn't
intended to be so I had had implemented
something where we just rebuild it from
scratch in other words there's no good
insert a delete kind of mechanism and so
you know there's something which
essentially just zeros you know just the
throws the entire tree away and then
rebuilds it from scratch and that's how
add delete is implemented oh here this
is a this is the this is what I think
the I think this is the this is this
other page and here you can see that
there's a it's much easier to correlate
what's on the screen with what's in the
code largely because parts of it or HTML
these these icons these icons here
there's a subroutine call it was a
native these are native objects rather
than HTML objects and the reason is
because we're going to have to drop the
mouse on it and drag it and if it were
just a image tag we couldn't do that
well well caveat we could do it with
JavaScript but javascript implementation
has the limitation that you can't you
can't go outside the boundary of your
own window so that's kind of useless for
controlling something else but so so if
anyone says yeah but you can drag it
with JavaScript yeah
to a point alright so that was that one
see a whirlwind tour of WX so we've seen
you know basically a petzold levels you
know see implementation and WX third one
now this splits into two parts all right
in other words sign I wanted to redo
this entire thing in HTML and this is
going to get a little technical here but
the the first way the you know the
obvious way that you think of is here's
my app I have some sort of in process
dll which interfaces to what's called a
calm object which has internet explorer
turns out resident and so i can talk
through the through this dll which talks
come to internet explorer my application
now can use windows api to talk to the
in-process dll again with c types and it
can it also sets up an HTTP server
internally so that it can talk to the
HTML right and you know that's that's
clean it's nice and it's about ninety
seven percent functional but you know
that last three percent is a killer and
what is the three percent which doesn't
work if what doesn't work is copy paste
in other words if you take a block of
text and drop it into an HTML form
muffin and you I forgotten whether it's
the delete or the backspace key doesn't
work one of them doesn't work and so if
you ask somebody to enter some text in
what they're going to see is that the
delete key doesn't work and they can't
copy and paste immediate conclusion is
ah no good doesn't work you know we
erase this and so that was not real
helpful
I did some research and this particular
diello was written in two thousand and
two others had seen seeing the same
thing hadn't hadn't been able to fix it
I actually went through the C code and
fixed one of them and the I think it was
a copy paste but I just you know though
there were allegations that it wouldn't
work with internet explorer 7 but that
didn't make any sense because the com
interface is immutable and so the
interface saw to work but in any event I
got rid of it because it would seek it
wasn't it wasn't Python and it wasn't
working so I went down below beak that
Microsoft releases a shell for internet
explorer alright it's a it's basically
called a HT a HTML application and it's
got about thirty percent of the
functionality you'd want and what it
does is it puts up puts up a frame a
window and you can run HTML in that
window and control the icon title and
stuff like that and I was I was going to
go in this direction anyway so it just
seemed like because I couldn't get this
obvious approach working I'd go this way
and it also had so there's two separate
processors here but processes there's
you know what's my application
communicating with a separate processor
process which has its own in process dll
you know the Internet Explorer I talk
again to the HTML through HTTP and use
across process API well that's not
exactly the same as having this that
isn't the same API as if you're talking
to things that are your
in your own address space but pasta it's
possibly workable and yeah there's some
complications with that it was more
painful than I would guess
okay how would how would the HTML know
where to find an image basically i wrote
the web server and so took care of that
in particular i took care of that by
looking at the extension of what you're
loading so that the py it calls a python
program and if it sees jpg etc it pulls
up and delivers a binary image from a
file structure or you know but it
maintains so so here's some here's a
here's another here's some here's the
this is this is this is generated
entirely in HTML here's the same tree
structure that we saw before done in
HTML here's a here's the detail for this
particular selection you notice that
this is twice the size of that as meant
to be you know to emphasize where you're
selecting and for my money the the tabs
are a superior these are these are
basically CSS tabs right in other words
i did it with CSS i looked up you know
how to do in javascript but CSS was
superior and there's no need for a
javascript here so let's look at let's
look at some Python code again so what
we're doing here is this is this is the
same pretty much the same Python code as
we saw in the WX example where where
we're going through the same in memory
structure checking to see whether we are
encountering the new weather in counting
a new top-level name and if so throwing
out HTML which I i would expect most of
you can pretty much read right to
generate this icon and there's some
elite adconion rate this
and this second level so this is it's
pretty much the same structure as you
saw for WX the amount of code isn't
impossibly larger and fairly you know
fairly readable here's here's here's a
breakout of what would have been a
dialog box but is a you know and you can
basically see there's pretty much fairly
easy linear structure in HTML between
what you see and what's what's coded not
not the world's best Python because it's
just endured mixed HTML but easy enough
to work with all right I promised
complications well here they are I don't
have code because it's painful enough
that i'd rather talk about it not to
talk about the code remember that what
we're trying to what we're trying to do
here is that we're trying to drag an
icon off the window for our process and
on to some other process well that first
you know the first the first thought I
had here is okay what I'll do is I'll
throw up a I'll throw up a you know a
left bracket image and then for am I
think on a mouse down all right I'll
okay or I think it's mouse over one of
those lows JavaScript things I'll throw
out a HTTP request all right which then
I throw back a 20 for response to in
other words meaning no no change and so
I've notified my own HTTP server that
I've seen I've seen this mouse activated
and then I go grab the mat
and do stuff a separate thread well no
go there and there's there's there were
several no goes let's just run through
them real quick one of them one of them
is that when you go off process you
you're not tracking that fast and so you
can you can move the mouse back and
forth too fast and lose mouse interrupts
now I think this is related to having to
communicate through HTTP in a separate
process because if you go to something
like Google Images where they've got a
bunch of images with mouse overs you
just whip the mouse back and forth it it
tracks it and it isn't losing anything
whereas here if if you move the mouse
back and forth because it's got to throw
off an HTTP process and you know it
loses state and you you end up stirring
at it the second thing that's a problem
here is that because the mouse now
belongs to this internet explorer
process my separate process can't let me
fitna can't can't access it in other
words for example there's no windows
function where is the mouse now you get
notification only if the mouse is over
your process or you've captured it but
you can't find out in general where the
mouse is JJ
about a tool for response what were you
trying to reload it a new page or were
you which I would expect the browser to
kind of lose its JavaScript station
stuff instead of using like a
xmlhttprequest which okay um explain
explain a little bit more and go into a
HTTP and going to an XML request all
right um what what the 204 was doing was
it was telling internet explorer not to
repaint in other words who what i was
doing when when i did a mouse over send
out a HTTP request it was basically a
one-way message I was sending a message
to my server and the server because it's
a request response protocol since back
if I got it don't do anything just you
know just show what you've got already
right so that's what the 204 is saying
keep keep showing what you're doing and
don't change anything and I got your
message now I've the term is eluding me
but there's basically there's basically
asynchronous JavaScript there's a a
synchronous JavaScript request which you
can throw off and it would seem a
natural to use that right yeah
xmlhttprequest well I didn't yeah it
sure would seem natural and
unfortunately and I tried it all right
and what I found was that evidently in
the internet explorer implementation
here there's a single thread all right
and so I was able to hang up Internet
Explorer if there was now standing H you
know xmlhttprequest
and so that was terribly non robust but
basically it didn't it didn't it didn't
work wasn't you know it well it worked
but it was way too easy too it's way too
easy to get into a deadlock situation oh
I know oh I know I you know and in fact
you know I my app was multi-threaded and
I guess what I'm saying is that over in
the internet explorer side it wasn't it
wasn't adequately threaded all right now
that you could you certainly couldn't
have multiple XML HTTP requests out now
that may be that may be different with
internet explorer itself but the
embedding here all right in other words
I'm limited by in this implementation
I'm limited by how the rendering engine
is embedded and I think it was embedded
in a single tasking framework all right
so anyway I didn't do that now there was
a there's a third a third problem I've
forgotten what it is oh yeah there are a
lot of api's which simply didn't work
what what you're in fact looking at here
is to separate windows this this framed
element here is a window which is
generated by the the resident part and
is simply overlaid or put on top of the
HTML so that when you drag you know when
you drag one of these things it's in
process and bypasses the HTML it was
real painful doing that because several
of the documented api's didn't work the
way they were documented when you do
this kind of cross process but it
eventually worked
and most of those were related were
related to the mouse all right so
conclusion all right I did this I part
of what was driving a lot of this was
memory considerations going direct to
windows the the download size and the
amount of memory all right which I'm
showing both right we're fairly small
and the first kind of level takeaway
here is that downloads download size and
memory resident part by happenstance
happened to work out to be about the
same thing here and so I was very
concerned and the WX implementation
which this is about the the memory
footprint it exceeds ten percent of a
you know a quarter gig system all right
which is which is a lot for which for
what's an honest it isn't an essential
component of your system it's clicking
dialog boxes and that's that's that's a
lot of memory to take up the HTH ta a
limitation Oh plus plus the second time
night second time in many years that I
ever crashed Python was with WX all
right first time I reported here was the
sea tights tangling with Malik yeah yeah
and this this WX crash was that I tried
to unload WX you know when I close the
user interface notice my program runs
continuously but when but the memory
interface runs infrequently so
to simply close it and unload all that
stuff when the memory interface is
closed and you know I know that worked
until the second time I opened the
interface and then it just crashed it
took a while to trace that down but
basically WX really once you start it
it's got to be there or you crash so I
think it's fair to show that the amount
of memory is the full bore memory
because you can't unload it here with
the here with here with the separate two
HDA process you can unload the decoupled
display part and so a show here to
separate two memory sizes this is this
is the normal case when the interface
isn't up and here's the much rarer case
when you know combined so questions or
comments that that's it okay any
comments on the actual user experience
well I think I think that I think
there's been some evolution in
sophistication along the way all right
on the other hand the overall computing
environment has seen evolution in
sophistication to and whether this is
tracking slower or faster I don't know
no I I don't think I don't think it's
all that I don't think it's all that
different in other words the first
interface is a couple of years old and
you know to import something it's a
couple of years old and do it now is
less satisfying than something that is
more recent but I don't think I don't
think it's I don't think that's a major
factor
yeah I do it's it's fairly clear it's
fairly clear that this this decoupled
model good good indeed serve as a
foundation for a cross-platform GUI in
other words that you have a resident
HTTP server and that you're simply
serving up web pages locally as long as
as long as this Colossus miserable cross
process API is minimized yeah this is
this is one of the things that attracted
me to it to do an application that was
exactly like that but the dual inside
firefox get that native look and feel
but you still get to have all your code
in Python web server and still get you
know these are bleeding comment by guess
i'm doing a jeopardy style and making it
a question why not use a zool with
firefox the answer here is that you can
depend upon Internet Explorer being on
the client system if if you could
guarantee that Firefox is there or that
you're distributing it for example if
you're doing a CD distribution yeah you
you know you don't care what the
download size is and you just distribute
it but if you're doing internet
downloads it be be simpler to simply
depend on what's there
and in fact in fact this this component
this component could in fact be a web
browser in other words you simply launch
the the web browser with a URL points
locally it's a little lund little uglier
because it's got all the web browser
Chrome on it and this cross platform api
is made considerably more difficult
another plug for firefox all right you
ready all right
oh sorry oh just intro this is new code
just for this meeting and as David Reed
here I'll see didn't make it all right
he helped me God all right well he wrote
some of his code and worked with me at
super happy dev house which was last
weekend a hacker party that's around
here which I recommend and you just show
up and work on anything including Python
profiler visualizations I need to push
buttons here yeah good yeah it's
profiler everybody's run the profiler
and seen this right okay I'll talk about
this and then I just want to ask visit
has anybody used k cash grind to look at
Python profiling results all right it'll
be a surprise I didn't I had didn't know
about it before so here we go profiling
means what's that oh sorry so profiling
means running your program in a way that
you can measure how much time is spent
in each function and then you get
results like this which show you that
the majority of the time was spent in a
function called create that doesn't have
a module with it why is that I don't
know there will be lots of profiling
details that I don't know but I don't I
do know how to make this look better and
that's what the talk is going to be
about so that the results this profiler
say that the the CPU is working 4.9
seconds even if the program was running
for five minutes and it's bent the
majority of its time and a function
called create and then the third most
time was spent in sra parts so you would
know that if you wanted this program to
go faster looking at the thing that is
calling the regular expression parser
would be a good place to look see if you
could cut down on regular expression
parsing or something I don't even
remember what program this is I might
have been profiling the profiler itself
or something just to get an example so
the the terms here hotshot is one of the
python profilers there are a few
different modules that you can use to
get your profiling results hotshot is
one of them that's been in Python for
a few versions see profile is a new one
that just arrived in Python 25 LS prof
has anybody who's that all right LS prof
is a outside the standard library one
that I hear is good is it good OLS prof
became super Oh file all right I didn't
get into trying those but I've used hot
shot a lot and so we were getting
results like this all the time I'm
working on a website so soon you're
going to see functions that are all
representative of web server yeah oh
sure yeah that's right so when the
number of calls has a slash I don't it
means that the function called itself
possibly through a chain of other
functions so what is this flattened
flattened called possibly another
function which then called flattened
again so the second call was inside the
call stack of the first one and one of
these numbers is the total number and
the other one is the internal calls I
think or some arrangement like that so
you can see it only comes up sometimes
yeah
well this this function is from SR the
sre compile and the function was called
compile so I'm guessing this is the
function that does the work of analyzing
your regular expression text and putting
in a form that's ready to run so this
happens and if I'm answering your
question oh sorry you're talking about
the timings or just what does the time
mean for an example function like that
those yes so so rough correct so roughly
speaking the profiler notes the time
when the function enters and then the
function calls many other things and
then the profiler notes the time when
the function leaves and that like JJ
said is the difference between total
time and cumulative time and now I'm
even blanking on which one is which
total time is only within that function
and cumulative time includes the
children so you get both results does
that is that what you're asking ok
cumulative includes the children total
is minus the children so it's just a
time in that one function so what that
means here like if we were analyzing
these results sre parses out of my
control I'm probably not going to edit
it and i get it most file about the
python to ask them to make it faster so
when I see this taking up a lot of my
total execution time the best thing I
can do is just call it less often but in
contrast if the if the function was one
of mine I don't know suppose this
netconnect and it was one of mine I
might actually be in control of this and
be able to cut down on the number of
loops or something or do fewer string
operations in there and actually make
the function faster so you either call
it less or make it faster those those
are some approaches once you have these
results but let's let's go into the
pretty stuff so I've been looking at
these results for years I didn't even
know about other systems like k cash
grind which I'll show in a minute and
the project I'm working on is a web
project and so we've done in a habit of
just making web graph for everything so
this is not profiling this is just the
kind of stuff we do is we benchmarked at
one time and then we benchmark the test
a different time and we could compare
them so along those lines I wrote a
program
well grey called P stats to web which
takes the profiles results the profile
profilers results are usually a big
binary file but is just every function
call enter and exit and who called it
and what and made not that and not that
but this so this is the same table so
this was all I was going to show that
mean this is the same as this table the
functions are in order by total time but
it's been dressed into an HTML table and
then I put in cool div bars behind here
so I could actually see the sizes of the
numbers against each other that's all I
wanted and then as I started to get
carried away I also colored the files by
what area they were in are they standard
library are they one of my modules so by
squinting you could get a sense of
smaller oh it was rendering a huge table
but possibly you could squint at this
and see oh the Purple's are really
making it to the top and purple is my
database engine so I'm really wasting
all that time Davis and that was the
idea that's something you can't really
do with the text the text form so well
unless you're using graph or something
you still wouldn't get this sense so I
think there is something new in the
visualizations that we can see that
sizes the numbers and the grouping of
the files other features this are that
it's flat you know a single HTML file
which can be archived and passed around
easily about as easily as you can pass
around the text profile results so it's
easy to keep records of these and
prepare old ones in new lands load the
file names are links to the source so I
should be able to click on one and go to
its source whatever so this is what I
had questions about this so now show a
few more ways to look at profiling data
ah
so this this one completely existed and
I've never heard of it and I didn't know
anyone was doing it and I stumbled
across it recently while researching
this stuff and it's actually great so k
cash brian is a fancy viewer part of the
kk development tools that I think was
originally designed to view like cash
like your cpu's cash that you could
analyze your compiled code and see where
it's making cash misses and stuff it
would be really careful analysis like
that but k cash Brian can draw all sorts
of related things including just boring
profile results and there is already a
thing called hotshot to call tree which
you can get in this Ubuntu package or
wherever pay cash grinds tools are sold
and even run your hotshot binary stats
file which I just threw my temp
directory and make a cake ash grind call
tree file and this is cool so the cult
this is K cash grinds format which is
kind of texting and the Python profile
results are sort of massage so they kind
of fit like see profile results there
are a few mismatches in there but it's
mostly fine we can do cake ash grind
call tree wait for KDE and then all
kinds of fancy things so I've only
looked at this for a few days I can't
see my own screen when we look at this
for a few days but what I found so far
is that you can do the cumulative time
or you can sort by the self time you can
look at all the functions and I had a
good one written down harsh term
right on a purse term this is a map of
wind parks term gets called on average
here's where it spends its time in child
functions so parse term spends the
majority of its time a little bit of
time is spent right in parsed term and
then the majority is spent in New who
has another child cast Python the
literal so if that could be made faster
my par stern would go faster and so on
and then you can vote no there are a lot
of charts in here this is a neat one
which is harsh term and I don't really
know this code but clearly this is
parsed term and the various functions
that it calls and the proportions of the
time that are spent in the functions the
parts term called and you can even walk
up and see who called parse term you
called what like this could this could
be interesting just to understand
someone else's code aside from all
timing reasons it would I think it could
be worthwhile to just run there go
through the profiler just to see this
graph which can do some more tricks a
lot of tricks which I don't know the
thing I profiled here was my RDF server
who itself is in the few hundred lines
of code but it uses twisted so there's
what 10k lines use its element tree
which is not batmanning a number of
large systems are underneath it so i
don't know if it's easy to see that here
well that's the total number of
functions so you can guess from there
one feature so I'm now that i found this
now i'm looking for ways to make my
solution better than this one so at
least mine has a purpose in the world
one problem here is that the majority of
the program's time because it uses
twisted is spent in select reactor so
much time that the auto scaling for
these bars is kind of shot we get a high
resolution bar for the call i didn't
care about and then we can see one more
call and then we can't see anything on
these relative bars and you might have
noticed when i showed my version that I
just chopped off the first few so I
actually have a chance of seeing
the reasonable functions and not like
this is part of the event look so
twisted event loop is always running and
I don't care that's that's what the
program does in its idle time the ones I
care about are the ones right below so I
took a little care for that not sure if
I have anything else 4k cash grind you
can browse a lot of stuff I I've been
playing with profiling data for a week
and I still can't understand how they do
their percents in here and there's that
mode and bat mode and it'll take some
more reading and some more experimenting
but I imagine someone who's comfortable
with those would be able to read
pictures like this pretty fast and then
the Kali map i think is straightforward
like if you had the function you cared
about you could easily see where it's
spending its time in children questions
about that all right what else do I have
oh so in my spare time I play with
semantic web stuff and let me show you
something I found in my spare time a web
page about the president's it gets
exciting because you can limit to the
Democratic presidents and then you can
see more details about them sorted by
party except I already limited the party
group does sorted so it cuts the thing
into chapters and then each of these
president has coordinates for their
birthplace so i can throw birth places
on a map or just the Democratic
birthplaces are well they broke so this
is something coming out of MIT which
says if you have a reasonably small
amount of data you could put that into
JSON which is a data format that
JavaScript can read easily and just send
the entire data set to the browser and
then we could make various JavaScript
libraries that show the data and group
it and sort it and I think they did a
nice job with this user interface like
there's grouping and sorting
possibilities that even the desktop
tools don't have so i recommend it's
called exhibit from simile mit.edu so we
can go to their death places and then
it's got a timeline view so there are
these various that doesn't show very
well
various views and it's not what I
thought the other thing is they have a
bunch of nice examples like breakfast
cereal characters so now I'm just web
surfing which you can narrow down by
brand and then show them on the timeline
of when they came out so it's all the
same so I knew about this and then i
thought i would like to try this with my
profile data so you can see the
connection now so yeah it's all as a
mash-up that's what they're called when
your profile breakfast cereal that was
common
yeah yeah mashup right that's exactly
what the only thing that means so my
piece has to web again is the Python
program that I wrote with help from
David Reed that can that reads p stats
for which we have modules and then it
outputs these at a HTML table and then
we added a little bit of code i'll show
you how little this output thing the
format Jason comes up with a record for
each function that's listed in the
profile and preps the data for adjacency
realized which turns Python data
structures into JSON data structures
Jason is pretty nice and can be like you
can easily go back and forth between
Python and JavaScript it's worth a look
I won't go into it here but so using
Nouveau which is a another project from
the twisted people they provided me with
Jason serialized so this is the whole
function once you have your your
function once you have your functions
out of the profiling data to emit a
really scary file that looks like this
so the Jason serializer doesn't bother
with white space because that doesn't
help and there it is all my items then
so now we're talking about how to make
an exhibit exhibit you get your data
looking like this or similar and then
you write a custom page on how to
display this stuff you use their web you
use their JavaScript from MIT skip that
you can do CSS styling this is the whole
thing I can't scroll comfortably yeah so
exhibit the exhibit javascript walks
through this little skeleton page and
recognizes Oh a view all right I'm going
to make all the view mechanics right
there Oh a browse panel great i'm going
to make browsers for group file name and
function so this is this is what it's
like to set up an exhibit it's extremely
easy and if you don't do anything you
get a reasonable default so I'm a big
an of the exhibit system so now we will
see my exhibit so that that code at the
top that I just blew past was once again
my little div maker that makes those div
bars so exhibit didn't know how to do
that but I taught it so now I have again
my div bars this is an exhibit table i
can say narrow it down to just the calls
from elementary plus the ones from
Nouveau except I have a couple builds of
Nouveau here which is why this is
awkward I could say sort by cumulative
time now so exhibit is providing all
these sorting tables and grouping oh and
it's screwing up the sort order it's
doing an alphabetic sort order on these
numbers which is a bug that David read
again was looking into formula neither
of us is solved it yet and then yeah
workaround would be to do that and then
also my total times just happened to be
the you know the special case that will
sort in order so that it became a low
priority for me when all my numbers were
coming in order anyway but yeah that
needs to be that needs to be done right
so I each of these records has the file
name and calls everything you see here
and then it also has a group and we put
each file into multiple groups we just
peeled off directory names so any any
sub directory or sub sub directories
showing up here as a group I know a good
one so I thought there would be one for
just twisted oh this is so here's
twisted web the functions that were from
the twisted web modules and then showing
up again as web so the idea we we try to
make it so you would always find what
you wanted in this group so you can see
fit the group of functions you want it
then I maybe file name itself be a
selector so we can narrow down to just
the ones in elementary using that whoo
that's not the best display and then
function but of course the each row was
a function name so this is mainly if you
wanted to just stare at do select and do
right next to each other I guess you
could do that that's great so this is
like one day at work because we came and
I don't know what to turn into I had
I've certainly gotten what I wanted
which was to just see who's at the top
and what are their what size their bars
this was fun now and I encourage people
to play with it and then wrap up with
not bad so here the things that I'm
looking for so remember I said a
profiler essentially marks the time at
the beginning the function in time at
the end of the function and then
remembers that and who called and
whatever that's a lot of bookkeeping and
even the seat I haven't tried see
profile yet and I know it's faster but
while i'm testing I don't really want
that program slow down I just want to
know which functions are taking the most
time and a statistical profiler does not
look at the start and end of every
function it's just occasion like how the
census might do sampling on on our
citizens a statistical profiler just
every now and then comes in the program
said what are you doing right now and
the answer that comes up the most often
well that's the function you were
spending the most time in and a
statistical profilers overhead can be
incredibly time and I don't know of one
so i'm looking for a statistical
profiler that i would just constantly
have running and every time I program
exits I would get at least the top five
list and I would just keep in my mind if
some if a new function is climbing to
the top then I could address that while
I still remember how i wrote my code so
i would like to have that I don't the
deal with hot shot so hot shot is the
profiler i'm using the probe the
promoters are the one called profile in
the standard library the one called hot
shot in the standard library and the one
called see profile in the new standard
library hotshot is really slow as your
program is running like it just drags
your program way down to do its job hot
shop quickly race down the data but then
when you try to read the data back then
you go to slow down
so it just defers all that time the
later and it's still not good for your
development iterations seat profile
morales prof might be faster i haven't
looked into this but that that would be
valuable to me another skip to this one
better filter groups in exhibit so here
i was making the ones that were easy for
me like the group and the file name but
I don't even know what I want there like
you don't always want to group by module
I might like to group for just put
functions that do disk i/o and see how
they're comparing is each other and
that's a big project to figure that out
or of the functions we're in the top
five let's see them and anything else
that's in files would then like I think
that could be useful I don't know what
else so welcome suggestions on that one
L stay right here yeah file was involved
in top 10 0 Collies so remember that
call call her mad when I when I went to
parch term and we could see what would
spin what was taking up the time inside
that would obviously be good to have an
exhibit I should be able to pick a
function and get not just that function
but that function and everything that
appeared deeper in the call stack and
then finally and this is a twisted only
thing people noticed it framework the
asynchronous networking framework so the
deal and twist it is that the call stack
is kind of split up by the event loop
and the briefly the way this works is I
make a call and I very loosely the way
this works as I make a call and then I
hand the result I hand it over to twist
it and twist it waits for the result and
then calls my callback and a chain of
callbacks so most functions are being
called from the twisted event loop and
the profiler has no idea that oh those
five functions were actually in a chain
of deferred so and this is only going to
make sense to people whose twisted but I
would like something that can note can
keep track of the deferred chains and
charge all that function time back to
the original function that made the
first deferred and I haven't seen
done so that that would be a great
project I think and that's all I got
questions yeah so that that huge mess of
stuff is JSON it's JavaScript it's
really JavaScript dictionaries and lists
which are close to python ones but not
quite the same yeah json is not a big
invention that the invention was we
could use javascript data structure
stuff as the way of passing data and
there are some good properties event
there's some good write-ups on the web
about why that's a good idea and why is
it's got big advantages over XML so like
the thing I'd like to leave you with is
if everything is in your control
especially one in JavaScript Jason might
be the great way to pass stuff around
anything else all right
we have some announcements
the topix this product is a newbie's
night another one is party prom and my
client is gay mediate possibility are
there people who are going to talk icon
who would be willing to report on their
adventure terrific well let's talk's are
you guys going to go to we have them
anybody else JK reset is less top okay
okay hopefully we can use the biggies
mailing list to fine-tune this on does
anybody have any ideas about a newbie's
night the biggest question in my mind is
when in the next few months is the right
time in other words what is nothing else
happening hey thoughts right after the
pike on one right you can schedule them
in and your race probably will happen
okay then thoughts announcements well
god I'm up to me
oh I don't think that's kind it on the
newbies nya seems to me from the person
Steven McInerney who's interested in
having it rivonia is an opportunity to
invite people who are interested in
Python in interested in the basics the
fundamentals the answering point maybe
some of the design is why use my phone
instead of Perl 6 that it's ever going
to really surface things like that
that's how i'm reading Stevens request
make sense one of the things I think
would be to go around and just talk
about all the different domains we use
Python him to give newbies an idea of
what's it good for why would I want to
learn this you know you all have done
other programming languages most of you
maybe not me but most people and going
around and taught say yeah I went to
python and use it for this because this
is why i like it and going around some
people can kind of get an idea can we do
it in alcoholics Anonymous format where
you get up my name is JJ I've been a
Python programmer for so many years and
maybe give a two-minute speech but good
idea um I would say let's try this put
this through the same test that we put
Mike on in other words how many people
are going to volunteer from minus P in
other in other words are we going to be
only talking to ourselves and how many
newbies are we actually talking oh I was
going to suggest one it sort of a topic
that might be presented for newbies
other than people to know you're not
just selling Python but something like
Python idioms I know where I'm working
now people are starting to use Python
and they have no idea how to make a
program run you know the idea of having
if name underscore underscore equals
main that kind of thing
oh it's just going to see if there's a
show of hands in the room who would say
they're new to my thong just come from a
random sampling
that's so even if you don't bring it
this'll keep a now you're not no raise
our hands and we say well want to make
sure we get that look
yeah I have another suggestion which I
saw all people who are newbies on the
wiki about what you'd like to what they
like what they're into Python for right
now whatever i could hear from us well I
on the wiki is still going English you
know one is fine but I thought the week
is easier because each post multiple
questions you don't get pic with the
email
I have to say something here okay since
I've run a couple of newbie nights
before since I've been remember for
quite a number of years the way it's
worked in the past is two people get up
one person does it talking another
person does a demo so live demo of
here's a for loop here's no statement
here's a while loop here's our creative
class here's how to create a function
and then after that that spawns
discussion and then everybody breaks off
and you know we have the engagement
there but it's really up to those of us
who have been using Python to actually
drag somebody in here who's curious
about Python so it's really up to us to
bring as many newbies as possible to
come for one of those nights so we can
do that on main list and you know they
were pretty well in the past it's a very
nice technically somewhat formal not too
deep but enough to give somebody a high
level overview to see how simple the
code looks it's really all about looking
at code and seeing how it runs how fast
can you write working code using the
language so that's what we've done in
the past it's been actually a couple of
years since we've had a real newbies
night so i would i would suggest it
especially now that i think python is
picking up steam more steam than before
so those are just my opinions on it
anybody have await an idea about
promoting this idea how do weeks you
know that other communities know that
we've got this in the words
flying a Super Bowl ad is out here I've
made a pre-announcement to like SP lug
before the word yeah it's probably a
couple people 45 but not the whole crew
obviously it's just whoever has any kind
of interest in Python so but there's
other user groups there's a freebsd user
group tons of linux user groups even
people that have mac OS mac user groups
because you know i can so if I son comes
with mac OS down so lots of different
places but we have to just actively go
and do it we have to set a specific date
and then people have to actively go and
make appt there was someone I talked to
last meeting who has a Python program
that controls a laser cutter to cut
paper if that person identifies themself
I have a pairing for you laughs I wanted
to write Python uses mathematics to
create tiles for artistics things I
think would be a bit very hungry the big
announcements is it time for schmoozing
it is thank you drew thank you does
Oh</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>