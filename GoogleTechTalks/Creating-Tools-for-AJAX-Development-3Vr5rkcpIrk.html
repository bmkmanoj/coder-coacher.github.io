<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Creating Tools for AJAX Development | Coder Coacher - Coaching Coders</title><meta content="Creating Tools for AJAX Development - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/GoogleTechTalks/">GoogleTechTalks</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Creating Tools for AJAX Development</b></h2><h5 class="post__date">2007-10-08</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/3Vr5rkcpIrk" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">I
I'm merging internet technologies here
to talk to you about our work in
creating Ajax tooling primarily around
Mozilla I know that's what I think
that's what folks are interested in so
I'm going to ask for you guys to
interrupt me anytime with questions let
me know I'm covering the right content
something you want to hear more or less
of I'm just gonna start with some
context of where IBM is getting involved
in Ajax a little bit about the open Ajax
industry consortium a little bit about
our project and then we'll dig into some
of the technical details of how we use
Mozilla and then we can talk about where
we think things are going and how to
help it's all happening an open source
so IBM's vision with Ajax pretty simple
really I mean before even before it was
called Ajax IBM was very excited about
the potential particularly for our
customers to have these rich clients
running with such low cost of ownership
virtually zero right and the fact that
with Ajax and all the buzz and the open
source collaboration that this
technology is finally becoming real and
getting up to the level of traditional
fat clients so we want to grow adoption
both in the development tools make it
easier faster to develop applications
better quality also through open source
we think that's the right way to do it
because it's a lot of cross-pollination
going on between these open source
efforts and maybe too much right now
there's the Ajax toolkits probably
number in the hundreds but we see that
over time there be in consolidation and
many many benefits right now so having
all that development going on so there
are a lot of companies that shared this
this vision and we formed a consortium
we call open Ajax this is back in
February and
the group is looking to primarily make a
statement that Ajax is becoming real
tell customers that all these names
these big names in the industry are
behind it and open Ajax itself it's not
technology there's no code per se called
open ajax's it's an industry movement
each of these companies does have code
many of them are contributing to the
open source and I'll talk a little bit
about what iBM is has contributed to
open Ajax so one of the main goals of
the open Ajax consumption is to address
what's missing to make ajax real in the
enterprise and elsewhere and this is
just a short list of some of the things
we hear most frequently tooling needs
work it's there's some tooling it's
scattered it's not all integrated it's
not certainly not the same quality as
traditional development tools there's
very little in the way of accessibility
screen readers often don't know what to
make out of an AJAX application security
you know a lot of angles there of course
you're in the browser that gives you a
sandbox but there are a lot of ways you
can still use that and nothing else we
need guidelines if not actual code to
back that up internationalization
localization just now starting to appear
in the toolkits a lot of enterprises
need that before they can even think
about adopting a framework and around
reliability well you know do we can for
a liability certainly in the core
platform but we can't certainly be able
to log and find out where the problems
are that kind of thing is very important
and then kind of higher-level concepts a
little bit fuzzier like you know do we
need declarative grammars in which they
look like and what kind of data model
JSON is a great start but you know how
do you find that to your controls and
have higher level abstractions around
your data in interacting with the server
intelligent ways
be a jack stool get framework that
Xavier and I have been working on seeks
to provide an integrated tooling
environment that we've built in the
clips and you'll see the architecture
chart here and shows a Clips workbench
we build on top of something called
Eclipse web tools which provides basic
support for deploying web apps HTML
editors and the like but still doesn't
go too far with JavaScript so we've
added a lot around JavaScript technology
we've integrated with Mozilla to render
and test the applications and again
trying to seeking to provide the base
tooling needed in open source and
encouraging others to join in and build
on top of that and here's a slightly
more detailed chart of the pieces that
we're building the golden pieces are
external pieces that we're using again
it kind of breaks down to two pieces is
the javascript kind of D HTML world we
have JavaScript debugger Dom inspector
some familiar tools JavaScript syntax
validator to catch errors typos things
like that on the right hand side is what
we call personalities and this is our
abstraction for Ajax toolkits just to
make them a little bit easier to deal
with right now we support three dojo
cembran Rico which isn't on this slide
but it's a pluggable system we've pulled
out all the common pieces we can into a
library and there's a template driven a
wizard driven builder that can easily
enable new tool kiss come along and
plug-in in here
so again it's just kind of breaks down
when I discussed some of the pieces we
leverage from web tools some we leverage
from Mozilla and we chose Mozilla not
for its proprietary abilities as a
development platform with zoo or
anything like that but is a a good
standards driven portable browser base
because we really at least the initial
thought was to get people to develop
cross-platform cross-browser code and
mozilla was just the easiest way for us
to tool that it's open source we know
it's in there we can hook it we can we
can instantly get support on more than
one platform this isn't to say we can't
support other browsers as well and I
talked a little bit about the
personalities I'll give you a quick demo
of what it looks like so here's the
Eclipse workbench I know how many of
your eclipse users but on the left hand
side is a list of projects and the
content within each project here I have
a project for the dojo toolkit and this
was created by a wizard which did all
the work for me of setting up the
directory structure injecting the the
assets the javascript code and is a fair
amount of it here and you really don't
have to worry about any of that it does
all that for you if you want to create a
new page in dojo you just use a wizard
so
here we go I want to make a new dojo
application which is really just an HTML
page after all so give it a name and
here it made a directory in my to be
deployed to my web server it's an HTML
file and built off a template it just
includes all the standard pieces you
need to include the libraries and just
an empty shell of a page I'm going to
throw some content in there on the right
hand side you see some Eclipse snippets
this is just another feature we've
started out with in our personalities i
can select dojo and see some snippets
that i can drag and drop right into my
app so i'll take a tree widget and
though just kind of nice it's got a
declarative markup for declaring its
widgets and here whoops there's a tree
with some nodes inside of it i also need
a it's kind of like the equivalent of an
import i need to import all the
JavaScript code right drag and drop them
try that again I need to bring in dojo
widget tree is the class I'll save this
and by integrating with web tools here's
a nice thing to actually see the app run
just one click to run into Mozilla and
what happens is it copies all the code
to a tomcat server starts up the server
and then opens the content in the bedded
Mozilla browser so you know
traditionally that could be a very
tedious manual process and we're trying
to shorten the development time there's
the app there's my tree okay
and we'll talk a little bit more later
about details in bedding Mozilla but we
can do some really exciting things here
because it's embedded not just
graphically but the clips knows how to
reach into the browser internals so I
can do things like we made a Dom
inspector kind of like you see in
missoula right this is an eclipse widget
talking to the browser can see all the
pieces properties we also implement a
JavaScript console so I can see all the
messages getting past and it's
integrated graphically all-in-one
workbench I can I found it really
helpful to have it all in one place
operating off of one model I'll go to a
slightly more complicated example we
made a store prototype using the zimbra
framework now it's now known as apache
kabuki and if i go to the bat HTML page
i'm going to do the same thing except
i'm going to use debug launch to launch
it mozilla so again copied all of this
codes the server launched it in Mozilla
browser and Thanksgiving like that
little bigger so I've got this grid of
servers we sell and as I click on each
one of them it will make a server
request using xml httprequest and my
demo here pull back some data and
populate it down here in the panel below
so what I've done is I've set a
breakpoint in that routine so I can
demonstrate our JavaScript line debugger
so let me click on the iseries 520 so
here's a debugger kind of like bank pin
for those of you familiar with Venkman
integrated into the Eclipse world you'll
see a call stack local variables I can
click on different parts of the call
stack see the code
and at the same time I still have the
browser available I still the Dom
inspector JavaScript console all these
pieces are running and it's one of the
piece i'll show you the xhr monitor
that's short for xml httprequest i'm
going to let this code continue go off
and make the request to the server and
you'll see that I serious 520 it did was
supposed to do populate some data but I
want to see that request we we have this
widget that listens on the wire and here
you'll see the host HTTP POST to the
servlet those are using Firebug that's
something similar what Firebug does I
got request response headers and you can
even see the body of the message so
again nice to have it all integrated in
one place we've added a couple new
things too like syntax checking go back
to the source view so here's my
application if I were to just introduce
a stray character which is so easy to do
right usually I would have to wait for a
full deployment cycle to see that error
and only then if I'm lucky because
JavaScript being interpreted I'd need to
test it that exercises that particular
line of code here as you type we run the
code through a syntax checker it gets
flagged immediately using the Rhino
parser in this example we also use a j/s
lint from what's his name Douglas
proffer there's something like that it's
a public domain utility and your if I
take out a semicolon that'll run that's
valid but Jay eslint flags and suggests
that you add a semicolon so just another
example of the kinds of things we can
accomplish fairly easily in the clips
and add value to this workbench but by
being part of the workbench it goes
beyond just HTML and web development I
can use any other eclipses plugins
available I might be doing my servlet
development java or PHP or any number of
other things a web services anything
else that Eclipse provides deploying and
debugging them here in the same
workspace so that's kind of nice
for those of you here I don't know how
many of you have tried to install a TF
some of the feedback we've gotten is
that hasn't been the most pleasant
experience I'm here to take the arrows
for the team we we are very high on the
Eclipse food chain we have many
dependencies and those dependencies
percolate down we are learning how to
build things in the Eclipse update
system the Eclipse update system still
has its own kinks to be worked out so
there are a lot of places things can go
wrong but we we are providing support
for the early users and if you post well
the Alpha works forms down at the moment
but if you post to our news group or
contact contact us we will help you get
it running we would really love to get
the feedback but the Eclipse updates
kind of interesting we provide our code
as a zip but it pulls in pieces like the
Mozilla integration which we put back to
mozilla org gets downloaded directly
from Mozilla org zimbra comes from
zimbra calm and it pulls all the pieces
together so when it works it's a
beautiful thing it's very extensible and
you also need a special version of
Mozilla called civil runner which we'll
talk about later so you saw I think what
we're calling our 1 point 0 release its
it's our Don Eclipse now in CVS the
source is available it's part of the web
tool web tooling project and here are
some of them there are some of the
shortcomings and some of the things we
would like to try doing in the future
the javascript editor is very basic we
would like to see it improved both the
some of the work we're doing and from
third-party contributions we we welcome
contributions to the project of course
our goal is to be more like the JDT
which eclipses java development where
you can fully model the code we namely
factor all over the place it's really
nice we would love to be able to see
that happen in JavaScript someday and
including more object-oriented support
of JavaScript because that's becoming so
popular now visual editing and Ajax
toolkits certainly on our wish list
and more features around personality
integration like build processes that
may go with them code assists and some
of the other things we talked about
earlier at this point I'm going to hand
it over to Javier is going to talk a
little bit about the Mozilla integration
and some of the technical details there
afternoon so while Adam has been mostly
working with Eclipse and trying to get
ATF up and running what I've been doing
is trying to get Mozilla to work inside
of Java to work inside of Eclipse to
work with SWT so our main thing was to
try try to embed Mozilla Mozilla browser
inside SWT widget there already exists
something out there on linux linux
estimates in sesame t is a platform
specific layer on linux it embeds
mozilla whereas on other platforms and
embeds what's considered the platform
browser on windows in a bit embeds IE on
mac and embed safari but we took the
code that's out there for swt to embed
mozilla and we tried to expand on it one
of the main problems with the existing
code is that it's very kind of static
it's based directly on creating Jane I
wrappers for each interface in Mozilla
the problem that this has is that as we
get new releases of Mozilla you have to
create new rappers for any new
interfaces that have shown up things may
change along the way so you have to add
support for that it's based specifically
on GCC on the GCC compiler so if you
would like to get this working on other
platforms you have to kind of tweak
things around and then rebuild and then
if you want to deploy it you'd have to
deploy ajni library for every platform
which isn't ideal so what we worked on
is we actually created a what we call
java xpcom which is basically java
bindings for mozilla and we use those to
embed to create the SWT wrapper that way
the I mean the embed in SWT so that way
the SWT widget itself is straight Java
it has doesn't have to worry about what
platform it's running in it just uses
the Java bindings and the actual
platform specific stuff is handled by
Mozilla
and when you release Mozilla a company
it would come with the Java wrappers and
it would create something that's nice
and portable you wouldn't have to worry
about shipping platform specific
libraries and so on the other thing that
that afforded us when we were working
inside ATF inside the ajax toolkit
framework is it allowed us to work
directly with some of the things that
are provided by mozilla specifically
xpcom it allowed us as adam already
showed you to work with the Dom
inspector to work directly with the Dom
API is to get access to those features
and to even manipulate them on the fly
the xml httprequest monitor the
JavaScript console and the debugger
those are all things that at the moment
are specific to our Mozilla support in
the future for atf will expand that to
include other browsers but for now it's
it's very much mozilla specific the
other thing the last thing i want to
point out here is as Adam mentioned we
use duel runner which is the current
embedding framework for Mozilla in the
future Firefox thunderbird what have you
will all be based on top of this duel
runner layer and that's what we ship
with and currently it ships with the
Java X become libraries the Java
bindings which I'll get into a little
bit later so I've talked a little bit
about XP common some of you may not be
aware what it is it's a Mozilla's answer
to a cross-platform component object
model it's kind of similar to microsoft
com it allows you to break your code up
into separate components it allows for
discovery registering and discovery of
these components by other components
everything is done with interfaces so
when you're when 1x become components
talking to another it doesn't have to
worry about how it was implemented which
language it was implemented as long as
it adheres to the registered interfaces
everything works out fine it uses all
the interfaces are declared with using
XP IDL which if
familiar with IDL language it's very
similar it's a language-independent
description language but XP ideals does
some Mozilla specific tweaks here and
there so they're not completely
compatible and the base interface for
all X bcom interfaces is called NSI
supports and the three basic functions
is support here are the query interface
which allows runtime type discovery so
you can if you have an object you can
query what interface that object
supports and it also handles the object
lifetime through reference counting so
for Java X become we we latched onto we
piggybacked on some of the features that
xpcom support in order to reflect the X
become interfaces into Java so all the
public interfaces that are available
with written in XP IDL those are now
available as Java interfaces so you can
use your Java program to directly work
with X become objects to allow
communication back and forth between X
become a Java you can pass X become
objects to Java and vice versa this is
something that we were that IBM worked
on and it currently ships with zool
runner the first release of Zorn which
is 1.8 point Oh point one at the moment
the other thing we worked on as Adam
mentioned earlier is to make these Java
the the Java interfaces themselves
available as a jar to be downloaded by
the Eclipse update so if your app if you
create an eclipse app and it requires
these libraries it's very easy to set up
your update mechanism to pull in the
mozilla libraries same with the rhino
libraries so here to get a little
technical on to how javax become does
its thing x become provides a language
binding facility called x PT call it was
originally created tool to to work with
javascript to allow javascript to work
with c++ and to have objects reflected
back and forth between those it does two
things it allows you to
invoke a given method on any X become
interface and it allows you to basically
impersonate impersonate a in X become
interface so in our case a Java class
that implements an X become interface
that object can be passed on to any
other X become interface and just
because it implements the interface
they'll be able to communicate just fine
back and forth the last piece that it
requires is the NS interface info
manager all the libraries all the
interfaces that are defined in XP IDL
are made available through the NSI NS I
interface info manager so you can query
information on that class you quote you
can find out what methods it has what
parameters it takes what are its parent
interfaces and so on so we use that to
that's one of the things that we use to
first to generate the Java interfaces
and also when we're marshaling
parameters back and forth between for
example if my java app my java class is
calling an ex become method that happens
to be written in c++ i have to change
after wrap any java objects that are
getting passed to c++ in something that
c++ won't understand and we use the
anise interface info manager to find out
what parameters that method would take
what kind they are ya was using all
three of these things that while using
XP to call on the NS interface info
manager we create the proxies as I
mentioned but it's flexible enough as I
mentioned it was originally done for
JavaScript I use it to to create the
Java bindings but it's flexible enough
that others have already done similar
things for Python c-sharp Ruby and this
can be used for pretty much any other
language
so the things that we use Java X become
for the the job bindings is embedding
obviously as you saw from from Adam we
embedded inside in SWT widget and we
make use of by calling directly to
Mozilla and doing stuff like the Dom
inspector another thing that we've been
working on is a component loader as I
mentioned X become is all about breaking
up your code into components and for the
most part if you were to download
Firefox one that five right now you
could write your components in two
languages right now C++ or Java Script I
created a java component loader which
allows you to also create your
components in Java this has been a
pretty requested feature once a Java X
pecan was announced and it works out
pretty well one of the things that I
used the component loader to create is
an R my server extension for Firefox the
reason that we wanted to do this was
that it would one of the deficiencies of
how of debugging inside ATF is that you
have to use the embedded browser and
some people don't really want to do that
they want to see it running on the
actual the actual running Firefox
instance it's either just to see what it
would look like on a user's desktop or
also to debug the UI for Firefox which
is also written in JavaScript the other
thing that are my server extension would
allow is to not only debugging a Firefox
instance on your system but through rmi
debugging a remote Firefox instance if
you if you want to debug a problem that
was happening on some user system as
long as there's a network between them
you should be able to use our my to make
that communication work so I actually
have a little demo to give for javax
become so
so here I'll start up a debug version of
Firefox 15 don't have network access
right now so the first thing I'll do is
I'll show you some of the PATA some of
the things you can do with the javac
speak um and the Java component loader
so this is a simple web page which has
javascript on it and when I load it this
is the Java component loader dynamically
loading and generating Java interface
files for xpcom interfaces it's not very
exciting in and of itself right here
this is a talking to the Java component
so if you take a look at the source you
can see the real power here of what we
can accomplish with Java to come and
this is simply JavaScript saying it
wants the implementation that an object
of type Java and it wants to create an
instance and then it just gets the
interface based on NS I sample
javascript has no idea how that
component is written it can be written
C++ it will be another JavaScript
component in this case it's shava it
doesn't care all it cares about is that
it works with the with this NSI sample
interface and then it can call all these
get set and Pope methods that it wants
then over here we just have a simple rmi
server this is similar thing is just
JavaScript it's just JavaScript calling
that object and also based on the NSI
sample well actually this one I didn't
even your face I haven't worked out all
the kinks here and this is all brand-new
stuff here that i'm showing you see
you're the first to see it I know you're
all excited hey so what I can do now is
I have here a simple client the Java are
the rmi server is running on firefox
right now and all this does first is
look up look up that instance in the
local registry in the localhost registry
gets the service manager which is a
Mozilla thing which you can get we can
query components then it just tries to
get the frontmost window and then open
up an alert on it it's all very simple
so I can run that here from within from
within eclipse I'll run my client and
it'll talk through our mi to the running
firefox so just press play and bam there
it is it opened up a an alert on the
running Firefox it's like I said this is
all this is just something I got working
a couple days ago so we haven't really
done much with it the hope is that we
could get this working with the
JavaScript debugger eventually to be
able to do remote debugging as we said
or anything else actually for that
matter that's what I have that's my demo
and now Adam was going to go more in
depth into the debugger
words
my back okay
okay so based on what Javier has done we
were able to build all these tools
talking from Java over the xpcom bridge
to Mozilla we saw them in the demo and
I'll talk a little bit about how we
accomplished the traditional debugger as
many of you know you know Venkman is
considered pretty much state-of-the-art
when it comes to JavaScript debugging
venkman is itself Azul application like
Mozilla applications that means it's
mostly JavaScript and what it's doing is
it's making calls to api called jsd and
those are basically sea level routines
in rapt next become that go right to the
JavaScript engine and it's a pretty low
level debugging api and uses XP connect
which if i'm not mistaken xavier is kind
of like the JavaScript version of what
you just did so JavaScript talking to
native code the works become a good deal
of the bank Minh javascript code deals
with debugging you I menus and just
keeping state of the process and
relatively small amounts of it is really
responsible for talking to the jst
itself modeling that data so here we
were building a toolkit in Eclipse and
we thought wouldn't wouldn't it be fun
if we could use eclipses debugger
interface Eclipse already has a
debugging you I already has modeling for
debug data and events and we could
leverage all the other things Eclipse
has and and make a nice cohesive tool
out of it so the challenge is pretty
much ty eclipses debug api's to
Mozilla's and today the only uses of the
jsd it has been the only user has been
Venkman calling it from JavaScript and
we were told you know you guys can't do
this j/s diese XP connect and the
javascript thing you'll never work from
Java well we tried it and it basically
worked you know some caveats I'll tell
you about
so first I'll tell you what the jsd
looks like here are three of the main
interfaces they're probably a dozen or
more and these are xpcom interfaces most
of the X be calm in the face to start
with NSI which i guess is Netscape I
don't know and jsd is naming convention
for jsd jst I debugger service is the
main class and lets you start up the
debugger set breakpoints and it gets
callbacks anytime anything interesting
happens like execution hook will tell
you when you when you suspend and then
when you do suspend you can query for
JSP I stack frame and value will give
you your call stack in two variables and
there are other details but those are
the major points there on the Eclipse
IDE and the picture is kind of hard to
see is a little UML there I process and
now we're talking capital I these are
eclipsed Java interfaces I process
basically gets tied to the browser these
are all interfaces that are provided in
the core debug you have to implement
them debug target is primarily a
container for threads there's only one
thread in JavaScript okay I think debug
targets where you set your breakpoints
and thread is where you are responsible
for keeping state suspend step things
like that so those two classes kind of
correspond to debugging service from JSP
and then stack frame and variable
obviously correlate to the other jst
interfaces I mentioned so how do we do
it we pretty much just tied the two
together we implemented those interfaces
and there's a each of these
implementations contains a reference to
one of those jsd classes and calling
through the bridge the hours you see
here I stack frame requests at jsd I
stack frame proxy from Javier's code
makes calls to it the hooks are just the
opposite that's where we implement
the hook with the Java class register
that and then get calls back from XP
comp to Java so two-way communication
there and and you pretty much do that
like you would in any do I have a
example running over Singh and here's my
debug thread class and you'll see it
implements I thread just in the clips
interface but it also implements a whole
bunch of jsd interfaces like jst
execution hook which is this generated
stub will show you pretty much just as a
bunch of constants in one method and all
I got to do I mean javax become hides a
lot of the details for me I just
implement that method with the right
signature and and sure enough i get i
get my calls back every time something
execute
oops oh it's the wrong one there we go
so one piece is to tie the two api's
together another piece is to implement
the callbacks and third piece is to make
sure we keep the states and events and
sync between the two models so that
requires a bit of logic any time I get a
suspend I gotta go viral there's a
method to fire an eclipse event that
says hey I just didn't suspend and I
gotta go grab all the stack frames and
pretty much copy them over to my Eclipse
model and there's another trick we have
to create pretty much a busy loop a
system what's it called system wait loop
while you're in suspend we actually need
to make sure we continue processing
things like windows drawing events or
whatever the native platform is so your
your your your browser gets repainted
and things don't hang so the JavaScript
engines frozen but we we have a loop
that make sure is to make sure the
process all this the method is escaping
me but when window paints window
messages and whatever the Eclipse has an
abstraction for that so it'll do the
right thing on Linux too and we had to
learn a little bit about threading
Mozilla at least with the UI code has a
model where the code itself isn't
thread-safe you have to there's a
contract you have to agree to always
execute other on a specific thread and
there is a utility called n aside sports
proxies that used extensively in Mozilla
we tried using it over the bridge with
mixed success we ended up just doing the
synchronization on the Java side
everything all those requests came from
a single javathread maps through to a
native thread had the same end result
performed better so we're happy with
that and then there was another problem
that we had all the stuff working but
the on switch for the debugger was
actually one of the things that didn't
work remember that asterisk Javier came
up with a clever work around to use
something called an observer I really
don't remember the details but we could
we could hash that up if we need to and
so even though jst was never really
intended for use outside of JavaScript
and it was never really tried we were
pretty happy with the results but we did
discover there was some surprises a
couple of the methods like i mentioned
may be wrapped in xpcom but they didn't
they weren't truly xpcom they cheated
instead of returning a value they punch
it into the javascript call stack I
don't know if there was necessarily a
reason for doing this all the time or
just old code so some of those were able
to work around some of them were trying
to fix also the jst does not directly
expose the underlying X become objects
again javascript use a trick to get at
them through casting a pointer we can't
do that in over the xpcom bridge across
the language boundary so there are some
things we're not yet able to do like get
the window object which I need to do for
various reasons and the jst is very low
level it does not encapsulated effing
you'd like there to be a method called
step and instead there's a callback that
gets executed for every PC every every
instruction in JavaScript where there
may be many instructions per line and
you have to watch and see when it
changed lines or when it did the
equivalent of what you think is a step
in or step out or step over and I
personally and we're doing pretty much
the same thing Venkman this year I'm
personally a little uncomfortable with
that logic that I wrote I don't even
know how well it works in Venkman be
kind of nice if that logic were pushed
closer to the JavaScript engine the way
we see it done in most other debugging
api's so again sometimes it just doesn't
feel very precise both from looking at
the bank and killing from our own
experience and thank me i know makes
guesses in some places in terms of which
function you're in and what line you're
at so be nice to see those things
sharpened up a little bit in the API
here's a limitation that's both in bank
minh and the api the jst which is that
you may have many different browser
windows run
they're all kind of tied together
through one process and one debugger and
bank mins modal when you suspend you've
you've locked up all your browsers and
you can only really debug that browser
and you continue and all namespace for
all of the files all the variables that
kind of rolled into one a little
complicated a little bit hard too hard
to work with specially in eclipse where
debugging abstraction usually lets you
deal with many things in parallel we
can't accomplish that today I actually
need the window object to figure out
which context I'm in and I can't get to
it so that's something we'd like to see
fixed at least in our code another
problem is that whenever you have an
eval statement Mozilla gives you the
context if you say have a syntax error
or a breakpoint Mozilla will point you
at the place where the code was eval
where the eval statement took place it
will not give you a context within that
code and it's a bug and we're pursuing
it's a bug that's been in the system a
very long time we're lobbying fab it
fixed and I know I've been doing a lot
of work in dojo which leverages eval too
for pretty much all of its code
bootstrapping so anytime you do anything
you go through this and it makes
development almost impossible there are
workarounds but be nice if it were just
fix natively and there are details in
that bug if anybody's interested its
usual in bugzilla a long long discussion
so some things on to do list if most of
the things on this list seem possible
given the current API support I'd like
to try to finish them up at which point
I think our debugger will be pretty much
on par with Venkman 44 function and I
not to say that there's anything
inherently better about writing a
debugger in Eclipse that in zool except
it is nice to know that we're reusing
pieces from eclipse that have been
tested elsewhere that are used elsewhere
by the same token I think by being an
additional user to jsd we will make jsd
better and spur development in the
buggers and of course you have the
benefit of a virtue of being a
out of the Eclipse workbench all the
other tools and and the community a
greater community there so operate with
so here are some of the things we think
we might be able to do in the future one
of them point goes to Javier's prototype
which just completed like on the plane
so as soon as I get my hands on it I
want to see if we can run the debugger
through it remote debugging and the
bugling chrome would be very cool
Eclipse also supports mixed call stacks
I personally haven't tried this yet but
it seems like it ought to be possible to
have a call stack that spans JavaScript
and native code maybe even JavaScript
and server code and you know Microsoft
Visual Studio does things like this it
will be nice to be able to to get that
level of functionality in Eclipse and
open source multiple multitasking and
debugging multiple targets as i
mentioned i don't have the bugzilla
reference unfortunately but something
we'd like to see work and hot swapping
this is a interpreted scripting language
why can't we just hot swap code should
be very easy to do and I say other modes
of debugging most people really don't
want to see JavaScript people working
with declarative markups and end users
to us but developers working in Ajax
tool kits or declarative markups aren't
going to know what they're looking at if
they break and they see dozens of lines
of code within the toolkit they want
higher level abstractions so xhr monitor
and Dom inspector very nice but we want
to know what else we can do to help
improve the development experience and
although it wasn't our initial intent
both zool community and folks working on
mozilla extensions would find this very
useful and we've already received a lot
of requests when people are free to
reuse these components of course and try
to build ids around them and we'll try
to try to work with them to make our
tools generic enough as needed to do
that so I haven't heard anything yet
from any of you love to know if she's
anything in particular that frustrates
you about
about JavaScript debugging your
experience with that for those of you
who have used our to light left and
gotten it to work I'd love to hear more
about that too yeah we have a mixed
language console
okay so so do we are we able to display
and dispatch both server logging and
browser events and all messages and all
those things right now we have the clips
comes with a view called console do I
still have it running standard Eclipse
console I think its standard out and
from that you see mostly server output
right now we've redirected the output
coming from the browser to a different
view called JavaScript console by
hooking the JavaScript console service
that's where most of the interesting
stuff from Mozilla comes today if
Mozilla does type anything to standard
out we don't hook it yet but we probably
could
I don't know because for mozilla
developers I know stand it out I from I
haven't done this for a long time but I
remember having the same problem as a
dash console you really want to get at
that stuff good point I have to say we
haven't been focusing I know you guys
are all Mozilla developers a lot of them
here and then it's not where we've been
focusing but it's something we should
look at yeah it's a much sure oh ok so
the equivalent of a printf and besides
alert of course which most people end up
using various tool kits have different
mechanisms for that so dojo has a dojo
debug for example which is right here
you see what they did in the standard
template is declared a floating panel I
can even move it and if I had a dojo
debug statement dare I try this
exactly so right now I'll try it again
see if if it runs if I put my debugging
statement in there good I did a dojo
debug foo and it shows up in this
console we were actually we're talking
about this the other day because this
impacts everybody we'd like to try to
hook this Firebug Firebug one of those
utilities does is today hook that
console instead of it appearing in the
HTML screen pipe it to a separate view
maybe the console maybe a new view yes
we're working on that and using magic of
xpcom it should be possible yeah but in
terms of logging again it's going to
vary by toolkit we'd also like to do
server-based logging and dojo has a
package that we really haven't explored
yet I don't think too many people have
but we'd like to support yeah
server-based logging maybe have a view
for that as well to be able to monitor
one or more applications running
remotely and see what's going on with
them and I don't think I forgot to
mention but things like unit testing
automated testing obviously very
important to ya
you aren't persistent objects across
inspect the heap the JavaScript keep
very good question at certainly not in
the jsd I don't know how to get to it
but it'll be a wonderful point to raise
with the Mozilla community say give us
an API and I'll tell you one thing that
is available is a profiler that's
another thing we could help pretty
easily but yeah yeah he keep objects and
events and things like that would be
very nice just even memory usage there
there are no api that i know of
advertised to do that so we would I
think need to get somebody to write
those and make them into the browser for
us how they get that done I mean it'll
be great to start a discussion on our
news group to assemble that list and
then from there maybe we can generate
bugzilla enhancement requests in
Missoula and you know you gotta fight
for them one of the time but if they
have merit maybe it will happen yeah
have you
no I have it right now is just trying to
get it working trying to work out all
the bugs once once I feel like it's at a
decent level then I'll try I'll focus on
performance but like I said just getting
it running has been a has been a big
step so eventually it's definitely on my
list and I've tried to make it as as
lightweight as possible but there's
definitely room for improvement in our
particular application here I mean I can
just say it doesn't feel like that's
ever the hot spot for us at least not
yet just by the nature of what we're
doing I'm not to say somebody else
couldn't write an application that would
demand much more performance yeah
across browsers
the server part of it
exactly so yeah it goes to our
testability and and things that I
conveniently forgot to put it in the
presentation but unit test was one like
Jas unit but also to be able to drive
the Dom API so that would be a great way
to write a test almost like in a grease
monkey approach is combined with the
clips monkey maybe you put two together
I don't know it's very interesting and
also we told you the idea of like side
by side comparison visual inspection
make sure different browsers behave well
yeah those are all all great ideas yeah
from here
okay yeah we deployed to tomcat and I
can't we run the file system it varies
by toolkit zimbra the way it's built
actually has dependency not just on the
server but well the only one they've
implemented is JSP hence the Tomcat
dependency and to make things a little
more complicated wtp that we leverage to
do this only supports j2ee service today
Tomcat be a websphere no reason why they
can't support patchy in fact we're
working on that but as far as just
deploying straight from the file system
you can type into this browser a a file
a file colon URL and see it embedded and
use most of these tools I believe you
can manually plug one of those into the
browser as well we could probably make a
right click launcher that that runs it
locally I don't think there's anything
restricting us from doing that you see
if i go to make a new mozilla
application i can either point at a
project or i can just type in a straight
URL with a file cohen so it's possible
maybe we should just build more
intuitive UI into doing that yeah okay
one more
you say to me so and finally in the soul
files you can point the script I'm
directly to invite reply from within zoo
yes so that I that I think that's
actually I'm not too familiar with it
but that's part of what's being done to
make Python be on the same level of
JavaScript inside zoo to be another
scripting language that you can use to
the actual actions in zoo but know that
we're not approaching that we're not
trying to do javab like that now don't
think anyone as you can suggested it or
mask important i think most people would
be
he added from from a performance point
of view from requiring a JVM point of
view and they would be hesitant but uh
if there's enough support for it if
enough people request I don't see why
there are job implementations of zul but
don't run the Mozilla Luxor perhaps for
what that's worth but to me it's not the
same zool if you're it's not a write
once run everywhere not only it's a
language different but all the bindings
are different the tags are different so
i don't know if that's gone anywhere
haven't really looked at that for almost
a year
right now has a debugger budget
I want to say John ponds up in the back
do we do that debugging server-side
JavaScript today
okay he could debug javascript in the
JSP inlined but not server-side
JavaScript so we've started on the
client we do need obviously more
server-side integration both on the
server and spanning client and server
and that's just stuff we haven't gotten
to yet okay great
to what I'm sorry yes yes swats wit ya
Smith smarter
not sure I understand the question but
you want you want to write to the Swit a
P eyes and have it running Ajax yeah
laying our study widgets
but there was already a zombie something
to do with that I don't remember the
name but it was something like that that
you broke to swt and it just converted
it to javascript on the back end i tried
it out once it was ok but i haven't
looked at it since so there is somebody
doing it we just haven't taken a look at
there are a wide variety of approaches
we've seen a lot of the the hot Ajax
technologies of course being JavaScript
driven great for web developers there
are other companies ice people do the
ice browsers one they're trying to drive
everything from jsf from Java and their
various other projects are open source
and clothes to try to drive development
from Java so we're not taking a stand
for or against them but yeah I mean this
tool kits primarily about javascript in
the browser on the client and to be
extent than any of the pieces are useful
you know they're out there they're an
open source they could be reused so okay
last question yeah we should we should
have just given up and given out of the
zipper or an image or something we're
talking about that earlier yeah I'm
getting a thumbs up from the back room
right now we're still trying to get
things to work in the Eclipse update
site and frankly it got a lot better
until the website it was deployed on
disappeared IBM alpha works it was there
I think we're trying to bring the
website back it was more a matter of
getting the install steps right because
some of its still manual and getting all
the prereqs exactly right because
although we do pull in lots of pieces
there are still some you have to pull in
yourself you have to install clips on
your machine has to be the right version
you have to install the right version of
zul rather manually and you know if you
get all that right you have to be
connected to a network we forgot to
mention that to people and a lot of them
send you home why didn't this work isn't
everybody connected to a network right
so you know once we we got all those we
got a better set of instructions I think
actually had a reasonable success on the
list so i would encourage those of you
who haven't to try again in a couple
days in that web site comes back if you
go to the eclipse aight you will see our
CVS tree you might even see a build
which requires even more intervention
it's a nightly build it's not stable
alpha works going to be the best place
to go if you want to play with this
technology and again go to the newsgroup
if you have questions for us we try to
monitor it frequently and we would
encourage your feedback and
participation so thank you very much</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>