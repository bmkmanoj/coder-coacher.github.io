<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>GTAC 2016: Docker Based Geo Dispersed Test Farm | Coder Coacher - Coaching Coders</title><meta content="GTAC 2016: Docker Based Geo Dispersed Test Farm - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/GoogleTechTalks/">GoogleTechTalks</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>GTAC 2016: Docker Based Geo Dispersed Test Farm</b></h2><h5 class="post__date">2016-12-06</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/EgmSnHFutEc" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">next we have a Jerry and globbing i hope
i pronounced it correctly they're going
to talk about docker base geo dispersed
test farm thank you good morning
everyone my name is Jerry you I'm the
software architect and also managing a
team responsible for testing integration
and testing infrastructure in open
source technology center in Intel so the
organization I'm working for is named
open source technology center which is
the heart of our open source development
activities Intel so we are working on
you know linux kernel graphics driver
virtualization OpenStack you know
embedded Linux so if you know that
Ashley Intel is the top one linux kernel
contributor in recent many years in
terms of both the lines of the code and
a number of the page so that most of
those come from our organization so
today we are going to share the testing
infrastructure practicing in the angel
program which is also one of the system
engineering projects we are doing open
source technology center so coping will
present together with me coping with ya
hello if we want my next mission and I'm
from the Intel open slot Technology
Center as the QA acted working focusing
on the pole and performance and also
automation yeah thank you ok good
so it's good to have this chance to
attend this conference and to not just a
sheer or one practice it's actually a
good a chance for us for me personally
to you know learn a lot of good
practices from youth workers and your
companies actually I already are already
got a lot of resonance from the talks
yesterday you know because I we share
the same pains and share the same
challenges actually you know up project
so I hope you know you will get the
resonance from our talk and then you
know where I we also would like to hear
from you and then you know we can
discuss and get a better idea to make
our work better okay okay I'm going to
talk a bit for the challenges for the
system product engineering regarding the
Tesla infrastructure so which oil
usually translate to the general
requirement like a test as a service
from the engineering team so we will
elaborate a bit what's our understanding
regarding the test as a service so then
i will introduce a bit our testing
infrastructure how dark technologies
play the rowing or test infrastructure
then i will talk a bit the tested
distribution or test dispatch mechanism
in our testing infrastructure so after
that i will pick up a few examples how
we handle the technical challenges in
order to achieve the test
this vision or requirement ok ok this is
this table provides a definition of
several terms I'm going to use our talk
so I'm not going to read it I'm i will
post here for 10 seconds you can read it
you know yes then you can understand the
language we are using in the coming
coming 20 minutes ok ok we start with
the challenge in the system engineering
project right about testing what the
challenges we have actually the I I
would like to correct a bit for this
page actually the first two bullets are
really talking about the challenges in
bigger system engineering which will
involves you know hundreds of developers
engineers involves you know Gio
dispersed engineering teams right so the
first one is you know about the device
shearing we are doing product before
that what we get is the development
vehicle or you know engineer example
right we say so it's always difficult or
disease not able to provide the one
device pro engineer for bigger
engineering project ok so the program
manager will always get much larger
number than the program can offer
regarding the engineer attempt oh so so
for that will require us to maximize the
device cheering for specific purpose for
example testing then we we are always
required to maximize the device cheering
for testing purpose no matter what the
testing is for right no matter is QA
testing see I testing you know DevOps
testing whatever
the second one the same thing the first
ones about hardware the second one is
about you know software right we have a
lot of tests automated the test case is
created by a QA by you know developers
so the the challenges ok the it's those
test cases are most of those are limited
at ooty experts or owners as who who are
know how how to run the a try so so then
we have a general requirements that okay
can we you know enable other users to
run those auto test test automation
right not just the one who create that
or the ones who are responsible to run
that right so the last one is Adam we
have a test infrastructure to support
both then you know we also needed to
think about how to to lower the
maintenance costs if you think about it
if we have hundreds of then test bench
you know test farm we need to think
about the maintenance costs right so
this is the general requirement or we
translate the test infrastructure
requirement from engineering teams to be
eventually you know it's something we
need to provide a testator service right
so we have actually you know we have you
know usually something as a service the
spirit of something as a service is
really to enable the users and too
easily to do something right so so when
it comes to testing it can be abstracted
to a general requirement that we name in
here you know basically you know okay
anyone can run any automated test cases
on any device anywhere at any time right
so the
is the vision of the test as a service
way we we are we understand you know so
the testing infrastructure will played a
critical role and to a G and to achieve
above objectives ok before i moved to
talk our testing first richard i would
like to talk about the audience alpha
what have a test infrastructure the
first one is definitely the CI
infrastructure right so the wii it's
fully automated to to do the prick meet
Prime urge post committee testing right
when the car when the patch come in full
review we the automata the test will be
cheered automatically to verify the
patch is good or not right we need to
verify that all the available target
platforms the second one is the QA
testing release testing so for this type
of testing usually we were wrong as
almost around all the available
automated test cases the target performs
its menu triggered our and it's also can
be
it also can be configured as automated
cheer when used one usage it was
mentioning here is the fail that test
cases rear ong you know this is some
sensing actually John the professor
talked a little bit a bit yesterday
about a flaky tests right actually we
had the same issue we have the same
problem actually besides the flaky tests
because we are doing the product so we
also have the freaky test bench yeah
okay so basically but no matter it is
flaky test case of Reiki test bench for
QA they will need a to rerun right so
the test infrastructure will needed to
you know support testers or QA to round
a few the test cases efficiently okay
the third usage is developed testing
developer testing day well you know they
they will run the selectivity test cases
or domain specific test cases for their
domain only right and the usually test
against the build is in- plated and
created themselves the other user story
here is they were also they will also
have their own dividend developer tools
like digital known only and check or by
check to check for regression check
right where they were also needed to do
the testing so they will their tool will
connect it to our tool testing
infrastructure to offload at a test to
to the test infrastructure ok this is
the overall deployment the diagram for
our testing infrastructure you can see
you know we have basically we have a
worldwide a single master running as a
service entry portal to accept the test
that rook requests from different
front-end so the other services we
exposed as the RESTful API s then you
know different front-end can you know
triggered test of requesters through
those AP is for the front and you know
we have several types of front and one
is the CI system right it's easy to
understand we also for QA we also have
the wave a UI portal which enable the
testers to to define the test job and
achieve the test request we will we also
provided a command line to trigger the
test request to our server service so's
command line can be you know used to
integrate together with developer tool
to fulfill their that test testing
testing needs right to offload the
tested to our test infrastructure so the
at the back end you can say you know
this is our device for more tests farm
so the k idea the here here is you know
we have we have the test slave host
which is basically a pc you know in our
practice we are using the very small
form-factor computer and nuke and next
unit computing and i'm not sure if you
know that inter produced this kind of
just as this this this kind of size you
know where small but its its power
enough to to gac carry on the test so
each tester Steve host will well
connected to multiple talents so for
each test requires when it coming wait
and when the system identified the right
bench to run the test request a new test
and darker appropriate the darker image
will where we spin off to you know map
the device to the darker to map the
appropriate it has equipment too dark
then we can run a test that's the whole
basically that's the whole idea so you
can see you know for the test a host
there is no oh no any dependents you
need to install you physically you can
just install a vanilla ubuntu for
example and the only prerequisite is the
you know the stable host the OS can run
the doc right that's all you don't need
to install any dependency there yet well
you know as what I said mitigate or you
know significantly reduce the slave
caste when you have hundreds of test
bench so the other one is the you know
because the way the test farm is a jewel
dispersed we have the device in Shanghai
we have device in us we have devised in
Mexico we have devised in Romania so so
we have to speed up the image
downloading and the other tested data
and that has artifacts done during we
have the geo local at factory mirror to
speed up that and this city I would like
to
for tested distribution I would like to
talk the key idea here we you know we we
have a test a catalog database we see it
we could be the test case catalog or
test campaign catalog whatever you know
basically this database record the
information like okay you know what I
 test campaign with a kind of
capability and needed in order to run
this test campaign in like okay I I need
a per meter right I need a monsoon per
meter you know I need a USB cutter on
the test bench I need a you know I
already caught something like that we
besides out that we also have the
information like you know the best case
of the execution time of this campaign
the worst case the average and time
write something you know for us to to to
to to schedule the test request
appropriately this is the test campaign
part the device part you can say okay
basically we will log this information
like you know the what kind of
capabilities this test bench has the
same thing you know will you you know
palmiter you know us piccata you know
basically identify the capability that
the campaign this test page can to
support to wrong ok so for distributor
besides the regular like okay sharding
mechanism tested shud anemic and allow
the balance mechanism way the key ideas
you know we match the capability between
the campaign and test bench then
do the appropriate distribution test
requested this position okay this this I
would like to give the some examples how
how you know how we address some
technical challenges in order to achieve
the test as a service we mentioned
previously so the first one is you know
we we need to provide any device
anywhere right to user that means okay
the first one is you know for testing
infrastructure we should be capable to
control the device and I control the
test equipment remotely reliably okay so
at this point you know our practice we
introduced a lot you know equipment one
major the major one is already card we
we create it we design this board and
create it ourselves basically you can
understand this will aid you know signal
the device will the test device on the
testing where we reworked and then you
know we will
connected a pole or like a pulpit and
volume up volume down to this aisle card
then you know we can you know we can
mimic the user intervention like a push
the Pope buttons three seconds push the
pulpit and voting up at the same time
something like that right then with
Danny you actually can you know control
the Divine's no matter you know where it
is right so actually you know
infrastructure when you run when your
test request is dispatched to wrong then
you you actually get a remote here you
can log into then you can control the
device actually the second way in the
state and state transition management
because you know when we because
everything is the whole flow is fully
automated awry so we needed to think
about the state transition divides the
state transition so for for the you know
because the you know we will every time
we do the test we will need to flash the
device right bring the image under tood
advance during that device way off
several times because the device is
allocated to container when the device
is off actually the container laws that
the allocation lost a connection to the
device right well so when the device is
up again you need to think about how to
get the device back to the container
again automatically so this generally
this is done by the user rose you know
we we added you dev rose on the host
machine which is actually automatically
generated at the universe crypt
configuration file so when the device
off we will remove remove the node in
container when it's back we were out of
acting and no to the container so
basically it's a work look like that so
I just give an example you know here too
you know we have some technical
challenges in order to
to enable the user to use the remove the
device drawn the test just like use the
device at their desk right so okay i
will give it to grouping to talk about
you know how we leverage the darker to
manage the test case release the test
case hi i'm back so thank you for
jewelry to sharing the background and
the big picture of a solution and i will
talk more hear about the talk about why
we use talking in the hallway stock or
so the firstly i have a question that
how many people you know what is dr.
maybe a lot of death story yeah it's
great that we have lots of the india
participate on this news instead good so
the forces who never know these kind of
things before the debris a brief
introduction about dog attacked it is
the open platform for the application
packaging distribution and deployment so
what i will tell you the above the talk
later firstly it is can compare with the
traditional virtual machine disk under
the technologists the first advantage of
docker it that it is very lightweight so
fluid humble in on a typical desktop
like the neck the small neck the usually
you can enter on like two or three
virtual machines like we aware of what
you would you keep see discounted at
norwich machines instance so if we if
you exceed this kind of amount of your
neck will most elaborate will start
because it will consider a lot of the
resource on the system but we talked
about the things will be very quite
different so usually you can launch like
the 16 or even study to talk incidence
in parallel so in this way you can save
lots of money too yeah to have to have a
lot of much less host needed for your
test
so that is the first thing and if second
is about the packaging you know that I
fort agra actually a builder you know
the idiot build upon the lexan linux
container and salt so the it will help
you quite easy to pack you this kind of
thing so you know the fall as the test
case developer you may you may not know
enough to just a gift your test k to
your developers to write because he he
also needed to pack you although the
testing environment a lot of depending
library this kind of thing so we stalker
you can easily to pack to this
conversation to in a single binary so
you can directly wrong this talk image
on your host machines so that is taken
see and stories about the hierarchy
which I shoe the graph here you can say
you can see the keep talking support get
like the code maintaining so we can with
their we can we can we can you maintain
our code like Harry actually I think
people who are familiar with the see
progress or Java this kind of the object
oriented programming language will be
very familiar with this kind of thing so
you can see that we can have the first
layer two people working just on the
basically libraries and this ditch
library is packaged hit acapella will be
encouraged by the second layer about it
maybe like the testing projector guys
and the third layer may be the test case
developers so you can you can see these
kind of influenced by the way so and
even with the within the other layer you
can also given the test case domains you
can you can develop imperio to to the
packaging separately so that is the cool
thing that were we why to use talker and
how you tell ya yeah I think that's the
all for the talk or sing so
yeah I think this whole film excellent
Thank You Jerry and guava ng we do have
a lot of questions but I just wanted to
say I liked how you narrow down the
problem to just anywhere and at any
device anywhere in the world at any time
thank you that's a problem so for
questions do you use any orchestrator EG
q brunette ease or darker swarm I know
not yet actually you know the way we use
talk is a pretty there it's a native way
to use now with we didn't use those
arches Jeter to do that yeah fair enough
yeah is this available available for
people outside of Intel group org to use
and it and if yes then could you share
the github location we do have the plan
to think about which piece of the
infrastructure can be or ready to be
open sourced the the problem is not okay
it's a you know business thing you know
it's it's a the the problem is you know
some logic is a very close coupled with
our and the way how we do our product
right OEM in the the engineering process
so it's a really coupled with our
engineering process yeah yes you know
way because at least as a service as we
are thinking about to host the same
infrastructure to support other open
source project we are doing in open
source technology center because we have
a lot of project
or developed in the community way we do
have the similar news from community
users to because we have many device
many machines the developer will not
have right so we need to think about how
to how they can leverage so ok any
questions in the room to just raise your
hand what test management software are
you using for your test catalogue it's
mmm we use the enterprise pastor you
might know that as the static a test
case script management tool but for the
test case catalog itself actually we
created that you know database schema
ourselves but we do dump the data from
enterprise tester to generate the schema
what do we need for our tool right so
yeah we use the enterprise tester you
know test case owner maintain their
those metadata enterprise tester then we
will periodically tompa those data press
some other data we needed to generate
the database yeah no question in the
room but us this first do you monitor
device health like flaky or failing
hardware right this is a good question
because due to the time limitation I
didn't dive into that the key technology
we created for our test infrastructure
is exactly the heartbeat mechanism so in
the heart the heart what I said you know
the heart be you know the heartbeat
depends on what you what are you a
heartbeat heart beating so they what we
need is not adjusted okay the device
there lsusb the device USB devices there
what we need is the device easily you
know take enjoy the devices in example
the device must be easy first of all
first boot canet will Oh Eddie be
connectable which means we are able to
burn the next image right so if not then
you know we were child mechanics are
like okay
can I you know you know you know when I
get it back to try to burn a golden
image which is a window always good
right to get it the device back into
good shape if if we tried all the
mechanism or the message week we can you
imagine still network then we'll take
the test bench as an unavailable state
that means the menu intervention either
to be engaged yeah yeah and so we have
this mechanism hi I wanted to sort of
ask but like your experience is it like
per job you send in like one docker
image with all the code in and like you
reset everything and is that the reason
why it's like helpful for you to know
that the cash is clear everything is
clear yeah man the native the wall of
the major purpose there why we use beef
kind of the virtualization to to clean
and and what is the cost of that
virtualization instead of like this
really lightweight just as I introduce
is very lightweight you can't you can
run on up on the neck you can run like
the more than 50 if you want and then so
in terms of you going and cleaning the
cash yourself versus to relying on the
darker did you see any significant
increase in your time or that wasn't the
case no because in our in our in your
scenario our testing actually having on
the device not on a host so it does not
actually kamaraj about the hull because
it can't but not care so much about how
to host performs right because as I say
that the dog is quite like way so it
will it may be closing like the meeting
second but that that's not here and if
you want to scale this outside let's say
not just hardware but like let's say
desktop code do you guys have any plans
or have you guys experienced that kind
of stuff like for hardware I understand
it's kind of like what you it really
helps for you guys but if or like a
general build
on a desktop well that's what this is a
scalable in there as well sorry for
which progress spurt so for example I
you can send something to get up and
like you know at the bill passes for
like some desktop yeah you just said if
that we really have you that will help
as well and like you don't foresee any
like time big time lags or something at
that yeah yeah sure thanks great and I
think we are out of time so let's give
another round of applause cheering Bobby</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>