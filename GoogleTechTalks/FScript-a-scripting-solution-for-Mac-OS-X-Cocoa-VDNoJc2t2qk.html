<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>FScript - a scripting solution for Mac OS X / Cocoa | Coder Coacher - Coaching Coders</title><meta content="FScript - a scripting solution for Mac OS X / Cocoa - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/GoogleTechTalks/">GoogleTechTalks</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>FScript - a scripting solution for Mac OS X / Cocoa</b></h2><h5 class="post__date">2007-10-08</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/VDNoJc2t2qk" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">a remedy up two weeks after Guillaume
LaForge came out here to do his talk on
groovy he pinged me and told me of
Phillip Phillip mahjongg who was awfully
pollution who's doing a language called
F script which is kind of a small
toolkit language for automation and
scripting on Mac OS 10 so it gives me
great pleasure today to introduce
Philippe from octo technology he is the
creator of f script of the f script
programming language sorry and Ken ferry
is here from the cocoa group at Apple
who's a contributor to and daily user of
F script so that take it away boys good
afternoon thank you this is this talk is
going out as a external googletechtalks
Oh hold any Google specific questions to
the end of your web thanks so for us
thank you dig for our setting of the
session and thanks to guillaume lavage
and chapel jersey my colleagues at octo
technology together we work on things
like dynamic languages for enterprise
system so thank you guys for helping
helping me making this session possible
so today I'd like to show you three cool
things related to scripting first
scripting an interactive layer for the
Mac os10 object system for Coco second
what I think is a really terrific object
browser we'll see if you agree and third
a new high-level programming model whose
goal is to free your mind it's based on
the integration of a reprogramming and
object-oriented programming
so the Mac West an object system is
derived from small talk it is based on
objective c it is very dynamic and quite
powerful in particular it provides a
dynamic a dynamically typed system
metaclass system that is classes are
first class instances and flexible and
very dynamic runtime and in the latest
and greatest version of Mac OS 10 it's
not a 64-bit object system and it has
garbage collection using this model my
question provides many object frameworks
that implement or give access to the Mac
os10 technologies most of the
application are developed with this
object model and the associated
frameworks this amount to thousands and
thousands of applications and quite
surprisingly this probably makes it one
of the most if not the most successful
dynamic object system in use today for
application development so let's
represent Mac OS 10 in a very symmetric
way we have a unique system and on top
of it is the objective c model and a
vast collection of object frameworks yet
objective-c is not an interactive
language like small talk but a compelled
1x clip provides a light white
screeching an interactive layer on top
of this model with it you can
interactively access the mac OS 10
frameworks and your own objects of
course
so it provides you with scripting and
interactive access it is unbearable that
is you can easily put it in your own
application and it is injectable it
means you can inject it into any cocoa
application dynamically at runtime this
makes it a great tool to explore an
application from the inside manipulated
debug it and so on and it's open source
so absolute provides an object-oriented
shells that i'm going to show you it has
various object browsers and inspectors
and it is completely interactive
integrated with mac OS 10 technologies
such as subject persistence is remote
invocation and so on here is a
screenshot of a typical a script session
so you see the object browser here the
objection here bios inspectors so what
are the main use cases for a script so
first it it is used by many Mac os10
developers for as a development tool as
a complement to objective-c it's very
useful to explore interactively the mac
OS and frameworks or so party frameworks
frameworks is ve very useful for
debugging prototyping or even writing
parts of your applications another use
case is to employ it as so you've used
our level language that is to provide it
to your users as an interactive
domain-specific language for instance
what you have to do is that you
motorized your domain as objects and
just let user interact with them using f
script so it's also useful for
automation and application extension for
instance a script is used in color key
which is a popular IRC client on Mac
using a script one can write plugins
that extends the ecology application
another example is daylight popular
business productivity suite on Mac OS 10
in this case the light makes use of a
script in its report engine letting
people directly type f script expression
to customize the reports and it's also
used for scripting
another example is Project X which is a
project management application in this
case F script is used internally as part
of the engine of the soft the last
example here is even horizon a 3d space
game and as as you can see here equities
used directly here to power the player
console of the game console now let me
talk a little bit about the edge script
language itself showing uses some tags
so so we can after that show use the
cool stuff and the demo so first it's a
small top dialect it's a pure object
language everything is an object number
of boolean are objects message sending
is a fundamental control structure and
it has closures and what is important to
note is that the ice cube object model
is the cocoa object model it's not a
separate object models that we are
bridging to the cocoa object model you
re using the native cocoa object model
Apps Script strings are stone de coco
strings arrays astana arrays and so on
there is an example of a method
invocation in Java or C++ we invoke the
method play on the playlist object and
here is how we do in objective-c from
taxes is a little bit different we send
the plane message to our playlist
objects and here we do the same in a
script as you can see the expression is
the same except that we do not choose
brackets around messages this is
basically because our script is a very
simple language and sending a message is
nearly the only thing you can do
so there is no need to have a special
syntax to delimit messages here we have
work a method with multiple arguments so
as you see method names in objective-c
and add scripts are like sentences with
gaps in them when you send a message you
fill the gaps with the actual values in
order to create a meaningful sentence
this way of denoting messages comes from
small talk it's a small dog contacts and
it's very it's a very appreciated
feature of objective-c and small talk
and a script because it lets you a very
expressive message sending expression
in this example we see that as in
Objective C messages can be strung
together expressions are evaluated from
left to right giving us the same
semantics so it's the same as in
objective-c without the brackets unlike
objective-c a script supports binary
messages that is messages with selectors
are composed of non-alphanumeric symbols
in this example we invoke the writers on
method on object one passing object to
as arguments
as you see there is no type declaration
on f script everything is an object and
you don't have to explicitly type
variables the assignments and tax use
colon equal instead of just equal and
the instruction separate or is a dot
like in English sentences again this is
tunde a small torx contacts app script
uses a semicolon for a notation called
cascade which lets you send some
multiple message to the same receiver
secondary without having to we specify
the receiver each time you send the
message and finally blocks in a script
are denoted with brackets the first
class objects and our full closures they
can have arguments there is a block with
two arguments and local variables for
instance here is a blog that takes two
arguments at them and which on the
results we can execute it by sending by
sending it a value value message like
this and the result is this case will be
seven
here is a table that show that shows
other syntax details as you can see
strings are enclosed in single quotes
and comments are enclosed in double
quotes okay this is it for the San
taksim and now i will show you a first
demo which is which is the object share
and the cocoa integration so let me
switch
ok
so this is the app script share the
command line interface and this is not
part of excrete normally it's just a
little demo assistant i will use during
this talk so here i can type f script
expression for instance adding two
numbers okay here i am saying i am
invoking the plus method on the object
to know what if ice under the message
that an object does not understand let's
say to something awful okay it says an
instance of number does not respond to
whatever now let's send a message to a
string to ask for its class okay it
returns an SCF string which is the
stronger classes that is used on my
quest and to implement strings objects
another example of using the standard my
quest an API let's create a date okay
now let's do some graphic stuff using
the stone doll Mac os10 API again using
quads I can for instance draw a circle
so it works the NS busy pass is a
stronger a graphic class in cocoa I
asked it to instance yet a Bezier pass
that we present another video and here I
give a rectangle and I asked it to stock
itself on the screen yeah it works ok I
do it again so it's just thunder using
the stone dark cocoa classes but you are
using it interactively instead of having
to compile a program build a project and
so on let's say I'm more a more complex
example with the converter ok so let's
pass the zoo zoo code yeah
and I would just executive before
explaining what it does are so we can we
can see the end results so I execute it
so it opens a little window here which
is a currency converter converter I I
have constants fifty-dollar to convert
okay and the currency converter is kind
of Z hello world in a cocoa all
tutorials and wide show all you can
build this little application in general
with cocoa you will build this kind of
application using interface builder
which is a graphical design tool but
here since we are looking at the a
script language we do this
programmatically because it's a good
example to show but ave suite also
integrates completely well and
transparently with interface builder so
let's see how it works so first here you
see that I just instantiate a window
passing its some information for
configuring it here I create an extra an
equitable action that will compute the
actual results it works by going in the
form taking the value doing the
multiplication and setting the new value
to the result resulting a text field
here i configure the form itself
here I instance yet and configure
configure button that we see here the
convert button and you see that I set
its target to be my script block here I
instant set and configures the
decorative line and finally I put the
component inside the window and then the
window on the screen using this message
so it shows that you can use the
directly is a stone dark cocoa class or
any objective c class you you are now
let's see another little demo we will
use the car image framework how image is
a relatively new framework in Mac OS 10
that allows for doing optimized image
processing such as deforming images and
playing with with images so let's use it
from a script first I will load an image
that is Todd on my hard disk ok I put it
in a variable name image
okay and then I can display it by just
sending the draw in right message to the
image itself and okay this place nice
now I can we score with the coinage
framework I can apply various filters to
manipulate the image and what is cool is
that the filter can be applied a one on
top of the other and all of that is
translated to optimize each code that is
executed on the GPU for instance I can
apply a you add just filter like that I
just try to filter objects configures it
and set it to use the image to apply on
the image and now I can display again
the image and see how it looks okay so
image has been a body file let's add
another filter on top of that for
instance so edges filter again I just
instantiate the filter configure it and
apply it and I displays the image again
okay another up transformation let's I
want to apply your perspective filter
and displays the image again okay nice
and finally let's load the original
image and I will apply a bump filter on
it that will cut a bump on the image and
instead of just a pain applying it just
one time I will do it in a loop in order
to create a little a nice little
animation so let's do it it is a code so
you see he like create the band filter i
configure it with reduce a scale and
here is my loop where I just change the
filter each time I a passing the loop
and let's see what it does ok so the
bump is going through my image nice
animation I can experiment with it this
is why it's interesting because its
interactive so i can try things for
instance i can change the radius of my
bump let's give it a big value and see
what it what it does ok the bump is
enormous this time so so animation is
different
now let's see quickly a few other cool
features for instance let's define a
simple blog here
so it's a blog that adds two numbers
name it my blood ok I can call it like
that
okay and I can say to it to provide for
instance an inspector so i can edit it
in a more is your way i can test for
some tags okay have you do we do I can
even execute it it is asking you for
argument we will not do that right now
and let's say for instance i want to
send it to someone or save it for later
use well i can use the standard mac west
an archive object archiving system just
send it a save message okay and it asked
me to choose a file to say to save it
let's name it block on my file system
okay I save it now it is in my file
system I can load it again by asking by
doing this I select the object of the
object graph I want to load and click
open okay it has been loud this is using
the standard object archiving system so
it works for any object accessible to
archive itself and finally let me show
you for instance using the ad astra
distributed object system with a script
okay i will open a second a script
instance okay a copy of their script
yeah okay and let's say from here I will
publish my blog as a distributed objects
my blog so you have to give it a cubic
name let's say let's call it test ok so
it returns a connection object you can
look at it if you are interested and now
let's switch to my other a script
instances here i use a script that it
could be any awesome a quest an
application using the distributed object
system and now i will try to I will
define distant blog and i will connect
to my blog in the distributed object
system like that test connect ok so
let's see what i have in my variable ok
i have a proxy for my blog i can send it
a message
and it works
so 11 can make any kind of object into a
distributed object it's fully dynamic
sighs no need to generate herbs or any
special stuff so if a Mac os10
application publish a distributed
objects you can connect to it from F
script and play with it just like that
ok so this was a first part of the demo
I quit this
No Ken Thank You Philly so my name is
Ken fairy I'm in the cocoa group at
apple and I'm also a very enthusiastic
user of F script and evangelist as well
as you can see since I'm here so I'd
like to talk a little bit about some
other uses of a script so far Philippe
has been showing you sort of the the
basics of the syntax and the fact that
you can use it to just play around sort
of in its own world however for my
purposes that's not really what I want
to be doing with it i'm a developer of
the cocoa framework which does not
itself have any f script in it so
exactly what am I using it for well I'm
using it as a development tool it's part
of my environment the same way my editor
is in the same way a debugger like gdb
is but it's quite a bit more pleasant
than GDP and I actually spend I spend
more time in F script that I do in gdb
and it's like is it it's it's the
enjoyable time so I get to give some of
the interesting part of the talk this is
probably also the way most people use F
script though Philippe has given some
examples of the other uses as well so
there are two things I'm going to get to
talk about so one of them is the object
browser this is the other UI complement
to the interpreter that Philippe was
already been showing you the object
browser is used just as much he if he
weren't trying to sort of ease you in
gradually I'm sure he would have already
been using it is in his session but
let's see he was saving it for me so
i'll talk about it i'm not going to say
what it is too much yet I'm really gonna
demo at first but but somehow we're
visually traversing the object graph at
runtime and messing with it so that's
half of what I'm going to talk about the
other half of we're going to talk about
is sort of the basics of exactly how you
do use this as a developer tool how you
end up using it with your own
applications and that's really going to
come down to using this F script
anywhere application which what we're
looking at here by the way this is the
window that comes up when you just first
download the esket package and open it
this is an application developed by
originally by Nicholas Riley at the
University of Illinois at
urbana-champaign and it's now maintained
by Robert chin who's also an apple oops
sorry that's where I want to switch over
to demo so the demonstration is going to
be concerned with I also one second
filippi's is a french keyboard so I
unfortunately have to I'll either be
extremely slow down or I need to switch
to an American one okay uh hopefully
that will do so again let us pretend
that we are developers which is not very
hard but you might have to pretend a
little bit harder to pretend that you
are in fact macros 10 developers which
some of you may be something you may not
but let us say we have an application
and that application is called sketch so
this is one of the standard examples
that ships on Mac OS 10 it's free with
the developer tools which are also free
so it is entirely free and it's actually
it's in the box and you just by the
operating system I think that's pretty
cool ah it's a relatively large
application it's one of the two largest
samples that we ship probably you see
all these files that's really the only
reason I have it here I'm not gonna look
at them anywhere at all right now I'm
just going to build it and launch it and
it was already built so it's very fast
so what is sketch oh it's very similar
to the old application Mac draw if you
happen to be familiar with that I you
can make these ovals you can color them
you can make squares if you want it's
noodles of fun especially if you are
eight so then here we have it I okay
here we are we're developers this is our
application we would like to use f
script what are we going to do or why
why do we want to use Africa well all
right so I'm gonna come over and I'm
gonna hide this for a minute while I go
and look at the f script package as its
downloaded this is what you see when you
first download it and I'm going to open
this F script anywhere application so
what do I see well I see a list of
applications these are all of the cocoa
applications which are currently running
and most applications on the system
these days are cocoa and as we are
pretending to be coca developers so is
ours and our application is in the list
and it's sketch we're going to choose to
install into sketch what this means is
it's actually going to dynamically load
F script at runtime into the sketch
process so it looks exactly the same
unless you have
very good eyes you may have noticed that
there's an extra menu up there now FSA
that stands for F script anywhere and
the anywhere is to say that it's running
in your application space as opposed to
in the f-secure process itself we've
injected it completely a runtime which
is pretty cool so now if I just select
that workspace from the menu I have that
exact same interpreter that Philippe has
been working with if I want to type an
asst application which is I forgot to
change the keyboard layout apparently if
I say Ms application this is the
standard base application class shared
application i get a singleton instance
and look at the delegate this is just
sending some message to it well I'm
getting back some object which the
interesting thing is that this is our
object we're now traversing the runtime
graph of our own application and we can
just mess with it you can do the same
kind of thing in gdb if you're patient
but it takes a long time it's not really
good for working at a high level like
this ok but like I said so what I'm
really going to demonstrate is now the
browser we haven't clicked on this
button yet when you click on that and we
get this this object browser well what
is this thing ah well it's let me
demonstrate it a little bit for before I
tell you what it is so far all we see is
a sis objecting this is representing a
particular object which is present in
the workspace of this application if i
type sis over there that's what it is
and since i haven't given anything else
a name that's why it's the only thing i
see but what we're really going to focus
on and begin with is this button over
here which is select view so as you are
very likely not cocoa brown worse let me
let me tell you first what a view is
what that refers to well we are a fully
object-oriented system everything the
drawers itself on the screen is an
object and and it's NS view is the base
class of all objects which draw
themselves so typically when you look at
a window like this pretty much
everything that seems to the user like
an independent object like those buttons
on the top like the scrollbar like the
well we'll see about the rest of it um
but those are views and what this is
going to do is it's going to let me
click on and select in the browser these
individual views so I'm going to click
right here on the scroll bar what do we
see we say something called and asked
roller
I haven't said what this means yet but
it's obviously doing something related
if I go over here and click on this
button up here this is the Zoom button
well again it's a little hard to see
what's going on but but it is it says
button over here so I'm getting
something related but now I want to talk
about how it relates to the app our own
objects is developers so I'm going to go
click on this this canvas object over
here or else I'll click on the shape
however it happens and now we're
starting to see the true model of our
application these individual objects
that happens are not implemented as
views there's just one big view here you
see wherever I click I'm getting the
same object the same graphic view that's
because there's just one big view here
which is the canvas and it's drawing
itself all of the individual shapes so
we're starting so we're seeing that
detail that's something that you would
not understand if you are not using f
script or if you're not the developer of
the application and and now I'm ready to
tell you what's actually going on here
so each column is going to represent an
object and as we sew and the top is
giving you what the object is this is
the description for it it's an sqt
graphic view which is the class of the
canvas as we go down we see some
properties of the object and this is ok
but actually the really interesting
stuff is when we get past the properties
what's all this text here this is all of
the methods this is object implements
and as we so so it's starting to look
it's fairly similar to a Dom inspector
if any of you are Firefox developers web
developers I mean it's letting you see
your object model it's letting you go
through it but it's a little bit
different because we so for example when
I click on the scroll view there's this
hierarchical structure where where I'm
getting to go through and see in each
column a different object however a
difference from something like the Dom
inspector in Firefox is that this is
entirely message based what we're doing
is we're sending messages and so it's
not I think at least with the I think
you can edit it in Firefox I believe I'm
not really a web devel developer okay I
guess I'll just wait for a minute did I
step on something
okay so it's on one of the screens
should i just go on from there okay I
can't really see it anymore but we'll
assume that it's working alright so for
example watch curiously carefully as I
click on the select all line here well
that's sending a message happens to
nikka argument which isn't very
important but it's selecting to those
graphics so I am actually modifying the
objects I'm not just viewing them and
let's let's take that a little further
so so first of all you might have
noticed i mean this is this is sort of
information overload you cannot deal
with all of this at the same time so so
there's the search field up at the top
which hopefully i can get to good where
I can filter down and look at individual
methods that might be more interesting
to me now i happen to know that those
shape objects are actually of a class
called a graphic and as the SKT graphic
so i filtered down to only see messages
that have the word graphic in the title
when i click on this i get back in a
right I double clicked on it so I could
see these so I could get a better view
at it you of it and when I click on a
single one of these again it's using the
standard there's a certain message
method that all cocoa objects implement
to print out descriptions of themselves
it's called description so this is
invoking the description method on this
graphic view SKT circle apparently that
is describing it so that's pretty cool
and we definitely can get a pretty good
view of exactly what's going on which is
especially nice when things start going
wrong because you can start figuring out
why but let's just mess with us a little
bit more so say for example we wanted to
change the do something having to do
with the color okay well we can send the
fill color methods message and we can
see that this the the circle we're
currently working with has some color
it's a calibrated color this is also
sort of interesting so this is telling
us that if we were viewing it on a
monitor with a different calibration
profile it would still come out as an
accurate color hopefully and if i want
to say cept fill color now i can use the
same f scripts and tax that Philippe has
already showed you to make it say orange
and it just turned orange back there
know if you saw
okay so all right interesting so so one
last thing I'd like to do with this here
is i show how it integrates back with
with the inspector with the interpreter
so that's nice but now if i want to but
but for something is easier to use a
command line interface and its use this
graphical tool so what i can do is i can
select this graphic for you click name
this is allowing me to give the object
and name so i'll call it graphic mute I
would never use such a long names in
have script if I weren't trying to
demonstrate it for you guys but I'll be
nice one letter variable names or the
order of the day when working with
things that you immediately throw away
here it is there's the graphic view it
showed because I gave it a name over
here in the in the browser they're
basically working with the same
namespace so I'm finding it over here in
the inspector as well and this is good
for sending I'm going to preview a
little bit some of the other interesting
aspects of f script that Philippe has
not explained yet he showed you the
basic syntax he has not showed you
however that I've scriptum is a ray
programming language and I'm going to
show off that a little bit so if I get
all of those graphics again here I'm
just sending the graphics message that's
not too special I'll just name that I
can't help myself so I'm not just gonna
call that GS there's the graphics and if
i send the fill color message that i'm
now sending the fill color message to
the collection and i get back the
collection of colors this is using this
the array programming aspects which will
be explained in a minute but i wanted to
do it for now because i'm good to
demonstrate how clear and how easy it is
to do something like oops i'll have to
delete that i don't know what's going on
to change the fill color of all of them
at the same time so what I'll do is I
will set each one to be half opacity and
I will because I have want to make sure
i spelled out everything right I'm going
to use the completions that after that
Philippe has put into f script there's
only one completion for this color with
health component I'll say 0.5 and what
we should see is each of those shapes we
have on the screen should now become
half a pig which it did and and see
that's not very much code normally
have to write a couple of loops to get
that kind of thing well maybe just one
loop anyway that's the kind of thing
we're gonna we're going to take a look
at but that's all I have in my first
demo so let's go back to the slides and
let us sort of contemplate what we have
seen provided I can get this going again
okay so so what do we see well first of
all we saw the object browser okay i
want to emphasize one more point about
the object browser that I have not
discussed yet which is that this is a
really good way to get into F script
development because you saw how little
knowledge I actually had to get to have
of the F script language before this
started becoming useful to me all I have
to do is point at things and click on
them if you're already a Mac os10
developer I really don't know if you
guys are not maybe I should take a quick
survey how many of you actually do coco
development okay three for the camera oh
well for you guys you don't need to know
a whole lot to start using this and to
start being really useful &amp;amp; however once
you've used this browser when you do
need more power it's all there because
you have a full language to use when
that becomes a useful thing to do so
it's really good for exploration it's
really good to understand how your your
application works and how it is
currently working so it's extremely
useful when something is going wrong to
just find out what is the state of the
object network gdb is really good when
you already know sort of where the
problem might lie and you can go into an
individual method and see what's wrong
but often for our things the individual
methods may work pretty well the problem
is that somehow the entire object graph
is connected in such in some fashion
that you weren't thinking about and is
causing problems and f script really
excels at debugging that sort of problem
because you can just take a look at how
everything's wired up and you can take a
look at the actual current state of
things and you discover oh yeah i forgot
to handle this case this is not
something that my code is capable of
dealing with along that line we have the
idea point-and-click debugging which
certainly occurs in other systems but
but is it does not otherwise occur in
cocoa so so in an application like like
sketch and hopefully your applications
as well are reasonably large let's get I
mean sketch is not large compared to
application and there's a lot of code
and so often when you you have a problem
to solve one of the first things you
have to do is you have to go find the
relevant code and that is actually just
busy working away in a script you can
just point at it if it's on the screen
you can get and you can sort of go down
the rabbit hole as far as you need to go
to find the actual class that's relevant
which can really be very quick and then
actually maybe I'll say something about
that it becomes sort of interesting you
realized you make many fewer assumptions
about state if you're using something
like this I often I found that when i
started using f script a lot i realized
without even thinking about it without
off script i was doing things like
assuming oh this is the case because i
know how it was set up I that what I was
trying to do back here was set things up
in this way so that's how they are well
with F script because you're not looking
at the why you're always looking at the
the actual current state of things you
won't fall into as many bad assumptions
that way and those bad assumptions can
be exactly at times when iam spending
hours on some problem that was just dumb
alright and the last thing that I'd like
to go back and do another little
demonstration for is the idea of
experimentation so this is a really good
way to to find out exactly how the
frameworks work and to figure out how to
answer little questions you might have
that will further your understanding of
of cocoa and just a programming in
general hopefully so so let's go back to
this demo and now I'm for the
demonstration for this one I'm going to
use the other big still running I
actually quit this
instead of back to english again
luckily I do actually speak French a
little bit oh and I want to show you the
other sample I kept biggest simple
sample application we have which is text
edit which those of you who are even Mac
users will recognize as the standard
little word processor that we that we
have on the platform but all of the
sample code for text edit is in fact
available it's written by my boss who is
also the head of cocoa development uh
and and here it is this is what it looks
like when it's running you see it
already has an FSA menu that's because
we've set it up so that it which is
often what you'll do if you're actually
working with your own application we've
told that script anywhere every time
this application shows up to the party
every time it gets launched see this
always check box always low def script
into it which is typically what you want
to do when you're debugging okay so why
don't I bring this up well because I
wanted to show you something which is
sort of a you know a little bit more
advanced detail of cocoa which probably
those of you who are not cooking
programs are not aware of which has to
do with the field editor so the field
that is a concept that has to do with
the editing of text it turns out that
editing text is a fairly complicated
process and there are quite a few
objects involved with it and in
particular there are more objects
involved with editing text and there are
with just displaying text so there's an
optimization that is made in Cocoa a
long time ago which is that these
objects which display text are
relatively dumb and relatively small
compared with the object that I'm using
that are in place when I'm actually
editing and the way this works is that
there's actually a shared editing object
the per window basis that's used in all
the places where text is edited and that
is called the field editor and it's it's
a different view it actually draws right
on top of the existing display text
field that's called that's already there
so let's and with that script we can
sort of take that abstract knowledge and
we can observe it so right now I'm
editing the text field that has 25
that's has 75 in it if I poke at the one
that says 30 you see the classes in the
numbers text field that is the
relatively dumb object however if I poke
at the one that had that I'm currently
editing I see i get a text view this is
the field editor and there it is and we
are we are
it is now real for us because we see it
if i send the delegate message to the
textview i get the feel that underlies
it so if i were to click off see that
this field was at memory location 3 b3
160 just remember the end if i go click
on this now that I've switched adding a
different one see that's the 1i now get
when i click directly there okay so
there's the field at it alright so this
is so first of all we've been able to
sort of make more concrete something
that we already seen the documentation
but here's something that's not in the
documentation in a question that I had
nine months ago or something okay so the
question is this how about if we know
that we use the field editor for an
editable text field we know that we
don't use it when it's just displaying
text how about when you have just a
selectable text field does that use the
field editor or not it seems more
complicated but it doesn't seem as
complicated as full editing so with that
script we can we can quickly just get a
good answer for that question so
unfortunately we don't have any text
fields here which are selectable and not
editable so the first thing we will do
is make one so let's go over here I'll
filter down to the word selectable there
it is there's set selectable I'll pass
yes and now if I go back over here and
click as we are changing the object
model at run time it is now selectable
okay great so now let's click on it so
so here is the high I guess we don't
really have a hypothesis but what we're
testing is when I click on this I'm
either going to get a text field or I'm
gonna get a text view in which is it
well click text view it's using the
field editor so we just found something
out uh and that is pretty much what I'd
like to say about that so hopefully it's
interesting to you hopefully for those
of you who are cocoa developers you'll
see that it is really a different way of
thinking about your objects that will
really emphasize to you to what degree
cocoa really is a runtime system and I
just have one more slide that I'd like
to do before I turn it back over to
Fleet and that is on the subject of
encapsulation you may have noticed here
that f script is letting you at a lot of
stuff it is a white box debugging
technique and exploration technique that
is great when you're trying to
problems when you try to figure out
what's going on however there are some
issues with it that as somebody who's
actually on the coat in the cocoa group
I would be remiss not to discuss you are
going to see all sorts of stuff that
you're not supposed to use when you do
this you're seeing private methods
objective-c for those who are not aware
does not have a language level concept
of a private method it treats developers
with a lot of trust there's pretty much
nothing that you cannot do nothing is
prohibited what we do do instead is that
we the way we make about the private is
that we do not document it and we don't
put it in the headers okay that doesn't
mean it's not there however that also
doesn't mean that you should use it I
mean it's really important to respect
the contract that that we set up because
otherwise we find that we cannot improve
the frameworks because we're being held
to this sort of arbitrarily type
contract that we weren't even aware of
in fact a lot of the way that I'm
defusing def script is that hey we I try
to improve something suddenly this
third-party application breaks what am I
gonna do about it I have to figure out
what's going on so so please it's a
sophisticated tool and I you should all
use it but but keep track of what you're
doing you really need to make a good
solid distinction between what you know
I want you all to understand everything
I mean go through I mean I know we don't
document it but there's no reason for
you not to understand all of how Coco
works it will do nothing but make you a
better developer however you can't rely
on it I mean you need to really make a
solid distinction between what you know
and what any particular block of your
code knows okay well this this is the
fundamental principle of encapsulation
in the first place so hopefully this is
not news to you I mean you do this
whenever you write any of your own code
I mean you're when you write this class
over here in this class over there
they're not supposed to have knowledge
of each other's internals so for some
reason people kind of like to treat the
code that ships on the actual operating
system a little bit differently I think
they think of it not changing in fact it
changes quite a bit it's just that we
always try to maintain the public
interfaces so don't go under those
public interfaces uh okay well that's
all i have to say so i'm gonna bring
back Philippe to finish up the talk and
what he's going to speak about is some
of what makes f script you
which is the the way that it melds array
oriented programming with obligatory
programming so Philippe thanks Ken for
this great demo so I'm going to quickly
introduce you to this new programming
model we have been a script so let's go
message sending is a fundamental
operation in object-oriented programming
okay as it supports polymorphism and
encapsulation however it remains a very
fine granite low-level operation in
high-level programming models and
languages or yes models like a web
programming or relational algebra
complex program are able to deal with
entire sets of data at once are now
expressed in a very compact manner
without requiring the use of loops test
or navigation instruction in a data
graph in traditional object-oriented
languages the same program would often
require tens or hundreds of line of code
to do to do the same thing so the goal
we have here with a skirt is to provide
higher level capabilities for object
manipulation to illustrate the point
during the rest of this talk let's
define a very simple object model for an
airplane companion okay we have three
classes flight airplane pilots an
airplane on the pilot is associated with
each flight and we define three object
collection we have a that contact
uppercase s that contains or airplane
instances F contains our flight
instances and P our pilot instances now
to give you an idea of what we want to
achieve here is an example of
programming with a script so the goal
here is to print the names of all the
pilots
ranked by salary in increasing order in
charge of a flight on the B 747 airplane
it was recording a typical
object-oriented language here in Java
and here is a cutting-edge script so the
point here is that it is shorter easier
to write and to understand another
example we want to select the pilots who
are in charge of at least one flight for
each airplane in the fleet again here is
occurred in a typical object-oriented
languages or in objective-c huh and here
is a card with a script just one line
and much easier we'll see how it works
so others it works and what is a
reprogramming so a reprogramming as two
key characteristics first operations
that apply to single values can be
applied with equal ease to entire sets
of data and second a new set of
operations provide powerful means of
data manipulation let's take an example
of a rain manipulation a simple example
well just before that the classic or a
programming language is a PL for which
can Iverson but the Turing award and
it's a longer that is based on the
mathematical notation the possibility of
manipulating vectors and matrices as a
whore so let's see oh we add two arrays
of numbers in APL we just write it as in
math same in a script here we have two
collections of number of objects and we
have down a new collection in
traditional object languages doing
dealing with collections of objects is
more tedious so integrating a web
programming into object-oriented
programming presents several challenges
the goal here was to find a general so
requiring the minimum of modification of
existing languages and in addition we
didn't want to place any constraints on
objects so developers do not need to
know in advance whether the objects will
be used with this array technology this
model introduced a new concept for the
manipulation of objects and it's called
massage pattern so first what is an
object-oriented program we can see an
object-oriented program as a
specification of which messages are sent
to which objects in traditional object
programming the basic syntactic
structure makes it possible to specify
the sending of a single message to a
single object and so what we suggest it
is to adapt a new structure that allows
for the specification of the sending of
complex groups of messages to whole
collections of objects and this is this
new structure that we call a message
pattern so Ashley provides a notation
that our offer specification of message
patterns in an operational manner this
notation enabled the expression of a
wide range of patterns and as some
interesting characteristics for instance
the classic message sending notation is
still supported it just becomes a
naturally a particular case of message
pattern so let's see some example
in the first example here we multiply
each element of an array by 2 by sending
you this message to our array this
message pattern sorry and as you can see
in the second example we multiply two
arrays element wise as you can see these
messages this message patterns
expressions look like traditional
messages sand but they are not
interpreted in the same way what happens
here is that they generate mucci
messages and automatically so up until
now we have seen examples with arrays of
numbers the good news is that it works
for any kind of objects it also air has
some examples in the first one we asked
each pilot object for its name using a
message pattern so we get back an array
of names in the second example yeah okay
so the question is what happens if the
array understands the message that we
want to send to each element right so in
this case the array will respond okay
but there is a notation to express the
fact that we want to send the message to
each element so there is a light white
notation that take place in disguise
inside the massage expression itself
that leads to less that let you specify
to which level you want to go and things
like that
so in the second example we asked for
each each flight for its departure date
we're gettin back on array updates and
message patterns I have the same
president's level as conventional
messages and just can be composed in a
similar way in this example we determine
for each flight whether its departure
date is after the current date okay so
in the end we get a boolean array and as
you will see boolean arrays are
extremely useful in Apps Script and in
our programming so also message pattern
we have seen so far use an implicit
notation in some case we need to provide
more information as you just asked to
describe other kind of pattern for
instance we may want to use message
patterns on nested arrays at different
levels or we are values iteration forms
such as outer products sing like that in
this case we use a lightweight notation
using the add some bar to specify where
the iteration have to take place we're
not going to the detail right now okay
the notion of message pattern alone is
not sufficient to fully integrate a rep
programming in object-oriented
programming message pattern become
really powerful when they are associated
with specific web programming operations
there are a number of such operations in
a script as example i will show you
three of them so first compression calm
question selects certain element of an
array and return them in a new array
this operation requires two operands
first the array from which we want to
make a selection and second a boolean
array of the same size an element is
selected if the corresponding boolean
all true ok so in Apps Script we have
extended the add method which is the
indexing method in order to perform
concussion when given an array of
boolean as arguments so for instance
suppose that already contains seven
pilots objects that we see here if we
want to select element at index 0 1 and
4 we can apply compression as in this
example using this array of boolean and
it will select only these pilots ok now
okay so no as we have seen as you see
compression requires a boolean array but
this array as we have seen previously
are very easy to generate with message
patterns so for instance the following
expression we turn the pilots whose
salary is greater than 3000 and this
expression return the pilots whose
salary is greater than 3000 and whose
age is equal to 40 okay we use message
pattern here and here its completion
another important operation in our web
programming is the possibility to index
an array by your whole array of indices
this provides a very general way to
designate element of an array and are
several method in a script that led to
conveniently generate array of indices
for various purposes like selecting a
particular region sorting and so on okay
let's keep this example of sorting and
go to the end to show you a comparison
between this model and classical
iteration pattern in high-level
programming language in I'll ever object
oriented programming language so we want
to get the name of all pilots we in
smalltalk the standard way to do that is
to use a block that is a lambda
expression and use the correct method in
Ruby we do the same thing just with
another contacts in Python we will use a
proper basis form which is the list
concussion risk compression form in
c-sharp 3 we will use this new link
system which has a sequel like some tax
and we will choose these lambda
expression behind the scene and okay
here we is are we doing at clifford the
big difference here is that here we are
thinking and dealing with one object at
a time whereas here we are dealing with
the world collection at once the last
example something a little bit more
complex get the names of the pilot who
sara is greater than 3,000 again in
small torch will be same thing python
still using a list compensation and
blink you and a script okay again the
difference is that in a script we try to
free your mind from the one object at
the time model okay that's all for today
so if you have any question would be a
pleasure to answer yeah
so okay so implementation of F script in
general also a high stuff in pattern
okay so f script is pretty question yeah
so how fast is implementation this is a
question so f script is implemented as
an interpreter however all the objects
that are used our objective c objects so
each time we send a message to an object
we are going through well going
executing complete compiled code so it's
a general pretty fast the airway staff
is specifically optimized that is we can
we internally the arrays are using one
possible primary primitive type 2 2 2 2
stars our representation and to compute
things the front stance when you deal
with arrays of numbers or a race of
boolean and you deal a lot with this
programming model it's optimized so it's
it's going at the same speed as net
native see arrays and maybe I can add a
little bit so if you're asking about
garbage collection in particular it's
not garbage collected the it's using the
same model that objective c uses which
is explicit retain reference counting so
there are some key and conveniences to
make that sufficiently easy that we
actually call it a semi automatic
reference counting but what's going in
Apps Script going on in m script is
every time you name an object it
receives a retained message which
increases its reference count and every
time it falls out of scope it receives a
release message so it's naive and yeah
and if you're not being careful that
will cause cycles and you'll also leaked
a lot but often for the sorts of things
we're doing we don't really care because
we're just working at runtime and we're
just gonna throw it away anyway so so it
just uses system down Mac os10 memory
management strategy an issue if you
if you use a new garbage collector yeah
it will use a new garbage collector in
my quest and so objective c 2 which is
shipping is part of the next operating
system released leopard has a car is
garbage collected or optionally garbage
collected and philippe will will
hopefully be able to improve a script so
that it also runs garbage have acted
under those circumstances also i wanted
to just maybe add a little bit when
you're talking about the explicit rate
of iterations and text before the use of
that in syntax is really a lot like use
of parentheses you can use it if you
want it's optional in cases where it's
on where it's not ambiguous so i think i
probably tend to get a little bit more
than philippe does because similarly I
parenthesized almost everything all the
time just in general and I also use the
explicit notation except in very simple
cases
it's actually not important but manager
it used to be that's not the case I in
fact you're like thinking of the
distribution it's on my web page which
has the witches as the input manager but
that is not in fact how its infrared now
it's been reabsorbed into the app script
distribution and it uses mock inject
which is a way of dynamically in
injecting the process at runtime into an
application which is also sort of fishy
but but it's a no it's not using an
input manager and it does have some
security stuff in fact one thing we
didn't show is that you have to you have
to make the application set GID in order
to have it be able to inject like this
into the proc mod group a lot of Phi
processes sorry yes so I mean if you
send a message to
will it always end in sequentially
so it's a cymol tikis defined legs as i
repeat the question yes the question was
if you send a message to an array in
order to send the message to each
element of the array will it will the
messages we send second trolley
secondary depending on the order of the
array and so I'm sorry yes
it's intentional it's intentional yeah
it's a it's very useful for some of the
web programming pattern that are used
here some of the techniques it's a it's
useful to have this semantic yes but
that it's would be another another
mother you could do that anyway you just
have to be I think you pretty much
always want to be explicit about that
anyway I mean you'd at least you'd have
to have some way of knowing that the
messages you were dispatching were safe
two parallel eyes so it's never
something that we could just do to
everything right make sense so so yeah I
mean you'd want to be explicit about
that anyway and if you're being explicit
it's basically just sending a message so
yeah you can implement it right in the
same system bedroom getting ready for
another okay so thank you everyone</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>