<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Story Driven Modeling with Fujaba: Turning Scenarios into Automated Tests | Coder Coacher - Coaching Coders</title><meta content="Story Driven Modeling with Fujaba: Turning Scenarios into Automated Tests - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/GoogleTechTalks/">GoogleTechTalks</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Story Driven Modeling with Fujaba: Turning Scenarios into Automated Tests</b></h2><h5 class="post__date">2008-06-06</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/nwcsj_Iz4ao" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">okay so next we have
indoor so he's going to talk about
turning scenarios in two test cases
thank you for the introduction what I
should have done on my slides and I did
not and I apologize for is this is joint
work with all my group and University of
Castle so I should name at least life
guy got unity term christian schneider
and all the young people who are working
there and kasten record and some more
and i'm sorry for not putting in on my
slides so what I'm going to talk about
just our approach to model driven
software engineering so we we use uml
models to do software development and we
do it all on the model level we do not
code at the Java level at all and i'm
not able to show you all the parts of it
but i will focus on requirements
engineering object-oriented analysis and
how we derive j unit tests from the
object oriented analysis face so all
this done is in the context of the food
java project the food java project has
created uml based case to with an
emphasis on code generation especially
for activity and object diagrams and we
will see how this works during the talk
however it's not just the tool once we
have had to the tool at hand be found
out that's not easy to use the tool and
what we need is some kind of process
that guides the user in software
development using our tool and therefore
we came up with this one here which I'm
going to put them and once we have
developed the process we recognized well
for this process you actually do not
need the tool you can do it with pencil
and paper and just hack in the old style
if you would like so it's not a tools
talk not a sales page what I would like
really to present is our approach to
software development our process which
is to our experience much easier than
the standard way so how does this
process work it starts with use case
descriptions this is pretty usual then
we do a pretty funny thing which we
call storyboarding where we use object
diagrams to do affect oriented analysis
from these storyboards we derive class
diagrams which is now a pretty simple
stuff so we do not really have
difficulties here this is no longer
challenging then we do behavior
derivation that one is still complicated
we have some help here but this is not
in the focus of this talk we do code
generation and when we do casting and
the tests that we use are standing from
the storyboarding step so the center of
the talk will be on that one so while
this is a linear process its of course
its use case in its iterative you can
use this for small chunks of your
fertility and it's test waving at all
these modern stuff so what you would
expect as an example i have an
environment here and i should be able to
go there if I know I have to operate my
machine a little bit there is so I have
prepared to an example this is a system
that we use for demonstration I have
hacked this some some months or years
ago and it doesn't has a very pretty
user interface I apologize for this
however it has an application in at our
University we are short of meeting rooms
in our University and therefore we come
up with a reservation system where you
can browse the list of rooms and four
and here you see all your reservations
you have already done and there's one
year up which is called google talk and
i have put it on the wrong date so it's
not the third but it is the force of
june and it lasts until the force of
june and it's 10 almost 20 here or 32
1240 it's okay so i can change this
record hopefully and then view the
corresponding calendar which is just
another user interface of this simple
two and two is all running on some
server on this machine here and we have
some javascript in
behind the screen here and there you see
now here's the google Tech Talk and some
others can you sing scheduled for this
room today so this kind of system we
want to build now and we from now on
this just watch the demonstration of the
user interface so we go back for the
presentation and we assume that we did
not have the implementation yet but we
start from scratch and so what we first
do is we identify use cases so this is
just the what you usually do restart
your system you just draw some ovals
here let me do this as an example
where's blue ink hopefully I always have
problems this step here there will be
something which is at minute stuff
adding rooms and these kinds of adding
people then there will be something
which is reservation and then there's
some other use case for example browsing
for for showing what's on these days
okay and there's of course some user
here which is all doing all this stuff
so this is standard stuff there's
nothing new here we do this as other
guys do this now I take one of these use
cases for example the reservation and we
would like to specify this textually and
here we do advise you to do this in a
very dedicated way so what you would not
like to do is just stayed some general
phrases on how a reservation system
route should look like but we ask you to
focus on example scenarios so you would
like to write down something like what
is the current situation and please do
not write something like a user blah
blah blah because this is too general so
what is this step is all about is
breaking down complexity
in requirements engineering and to our
experiences it is so much easier if you
speak to domain people to domain experts
or end users if you are be as concrete
as you can be so do not write a user is
doing a reservation for some room but
say the situation is that we have the
system is running the system not a
system sorry the system is running runs
it is June the fourth ten o'clock or we
have room are 23 and our 42 and users
Albert locked in and Maria has a
reservation for a 1500 to 1800 for room
23 like something like that so what we
actually asked you be very specific in
the example so look on a dedicated case
do not just state some general phrases
about rooms there are rooms and their
users it's just easier for your customer
to speak about an example if it is as
concrete as you can do it and finally it
will be easier for you to turn this into
a test so keeping the back of your mind
what we are doing here is we are
specifying test cases already and
therefore it's just easier to be as
concrete as you can be if this is a
problem for your usual process so you
would like to state general phrases
first then you can come back later and
we find them to be more concrete this is
another way of approaching this you can
do it this either
so this is now the start situation and
have some step 1 here I Bert reserves
room are 23 from eleven to fourteen
hundred for example and now the system
should be able to do this so step two
might be this works or the system
confirms this report or something like
that this is perhaps the moment I should
apologize for my handwriting so my
students always complain no one can read
this that's the reason why I'm actually
talking about what I'm writing and this
is YouTube you can just check it up
again later so now we have this textural
specification of a dedicated example
scenario and now we can come up in turn
this into a unit test or into some first
domain level design so what the usual
software engineering textbook says is go
through all your sentences underline the
nouns those may become classes or cut
these are becoming candidate classes
underline the verb these may become
methods and so on and thrown so what
they actually recommend to you those old
old style textbooks those former these
ancient stuff is to come up with a class
diagram in the next step and to the best
of our experience is this is a totally
wrong approach this does not work coming
up with the class diagram at this level
here actually requires pretty much
experienced users and skilled people to
do sir you need to know a lot about how
the system later on will work in order
to come up with a good class diagram
here and another problem here is your
domain expert your end user he does not
do very well with class diagrams they
don't understand a class diagram at all
the reason for this is well actually a
class diagram it structures a program it
doesn't structure your application
domain
it says your program consists of decent
decent these classes but it does not say
how does these things behave but
behavior is what we are up for you would
like to specify how the system is
working and not what are the parts of
the system and therefore we prepares do
not do class diagram at this stage it's
the scope pleat wrong approach this is
nonsense throw your old textbook away
it's wrong just start differently start
with object diagrams i will show how we
do this so i go back to this sir the
textual experience textual example which
has several steps and in order to reduce
complexity of the development process
again we now look at one step at a time
at one cent of this at the time and we
try to come up with an object diagram
that models the situation and the first
step here is the system is on and
running so if i go for this one here and
just copy this system is on i would how
would i see this in the data model in my
running system how is this represented
in my computer while the program is
executed and usually this is done by
having a cyst a note of type system here
this name system for example or the
system is probably more appropriate
through such an object representing the
root of the overall system the next step
here was it is june fourth it is june
fourth ten o'clock so there is some what
the sentence actually fast is there
somewhere them need to be system time so
the system needs to be aware of the time
and we now the site to store the time
explicit me in the system as an
attribute value so we introduce
something like time equals 2 jun force
ten o'clock I just do this in the
attribute compartment arm
of this object over here by the way this
tends to become a uml object diagram if
you do not recognize it so what is next
is their rooms 23 and 40 two rooms 23
and 42 so we decide now this is the
design decision to have room objects and
from my experience I know you should not
name this object room 23 but have an
attribute saying the name of this room
is air 23 and there should be another
room whistle name equals 42 so these are
the two rooms and somehow I know or have
the experience that those rooms belong
to my systems and I introduce some link
here between the system and the rooms
next step is we have some users here
there's the user I burped so I just put
a user here user one and its name his
name is Albert and he belongs to the
system somehow he is managed by the
system and this may be a person's link
and there's another user user to which
is Maria she belongs to the system
either and if I go back just need to run
more space here sorry okay you can just
score back in the group in the YouTube
video I have to have a reservation here
and this reservation was for room 23 it
was done by Maria and had a start time
with Wars jun 4 1500 and end time worth
1800 something like that so what I have
developed here now is a simple object
diagram representing the start situation
of my system while doing so I have
already done quite a number of design
decisions i have decided how is my
system organized how do i represent a
reservation how do i represent the
connection between a reservation and its
user I have decided this shall be an
explicit link I have decided that there
shall be an actually see the link
between the room and to the reservation
object we could have done this by named
attribute attribute names here I decided
to have equity links I decided to have
the start and end attributes for the
time and all this stuff here so the next
step of our system or was that I would
want to do another reservation and I
would like to do this step number one
here in addition this would actually
mean that we create a new reservation
object reservation to
connected to Albert connected to the
same room and it is from eleven to
thirteen hundred and this one has just
been created you may emphasis by adding
some plus signs here or any kind of
annotation you would like to have and so
on so and perhaps you would like to
write down this is pretty informal here
there is no conflict here it is okay to
do so because there is no overlap which
those are two reservations for the same
room they should not overlap in time so
this is achieved here so this is just
fine okay now we have done our our
object oriented analysis we just go
through our textual scenarios step by
step reducing complexity by focusing on
very dedicated examples with exit names
doing the object diagrams for one step
at a time which really facilitates the
whole task so this is something you
could actually teach two freshmen in
within sound weeks they are pretty good
in this very soon so the next step here
would now to turn this into software now
we are ready to do this all up to here
is really easily done using just a
pencil and paper mode or you can have
these discussions about object diagrams
very good at some blackboard or
whiteboard in a group discussion so that
all the people get a common
understanding how your system will work
at one time and now the next step is
going to vert to implementation and
therefore you need some classes so now
is the time to come up with a class
diagram however you can still do this in
the pencil and paper mode you can also
go now to your terminal or eclipse
system and just hack it in Java however
I recommend to use some use case case
tool here because for class diagrams all
right they are pretty good in code
generation and you really get some
leverage by using it
here so let's do that and actually I
have prepared this now I didn't come
prepare this but I would of course
recommend our case tool but actually for
this step any other case to it would do
a similar good job and I would like to
have this system here make this a little
bit smaller let it actually now we just
saw in order to show through that this
is not a fake I really open a new
project call it a google project Google
demo for example any objections here
under other names okay you think this is
a fake say I want a new class diagram I
call it mane that's the standard way to
do it I get rid of this model tree here
just to have more space and make this a
little bit smaller so that I can go back
for the object diagram because this is
now the input for the step of creating
the class diagram and something is wrong
here how did this happen you lost signal
I'm so all right I just probably did it
out there here this is electricity
so this must be the yellow cable of this
one here
something wrong with my software
yeah I'm sorry this is not what I'm
looking for
don't we have a whiteboard here let's
again try this here we are cool thank
you so what I go now is I go for one
object at a time and I decide what will
be the class that is used to implement
this object so what I say is of course
we have a system object here so I want
something like a reservation system this
channel has to have time andand out
aside time is a long integer and then
there are users here so I want to user
object user class user yes or why not
users have names which are strings come
on names of type string then users and
whether vation systems are somehow
connected though there is not just one
users and about multiple users and this
is a multiplicity star so look at this
bright star over there and then we have
rooms which again have a name
yep and those are organized in our
system and again it is multiplicity many
over here and then we do have
reservations and reservations are done
by some user 1 user may have multiple
reservations so we need to corresponding
multiplicity up here there's a star if
you cannot see this and it may have room
just one room / reservation however
multiple reservations pair room okay
then there's something like a start time
here which is so long integer and
there's something like an end time here
which is something like a long integer
okay everybody fine with this class
diagram everybody find that this
actually represents this object diagram
so this is a fairly automatic step here
actually if you use our two to build
those object diagrams you could have a
mode that creates the class diagram as a
side effect well you provide types when
you edit objects however the to our
experience is this does not work very
well because the people tend to forget
to go back for the class diagram to
adjust the cardinalities of the
Association so we do not recommend this
anymore you have actually to do this
exit Lee and this is has to be entered
so now we have four class diagram the
next step and we would like to have is
come up with a test a J unit test so
what we would like to do have is to turn
our examples into j unit test that tests
the behavior in this example situation
and again you can do this manually it's
very easy however I now show you how you
would do it with our tool and this is
just easier to bring the message to you
how this is done
and then you can decide whether you want
to do it manually or with some to
support so therefore I just create a new
kind of diagram which we call a
storyboard a storyboard has a start
situation which is actually specially
marked I'm waiting for this for some
reasons take some time and again
something is wrong we see with the size
here however this is some okay now i
need a whiteboard sorry i have a blue
screen my my system has just crashed i
can go on with a whiteboard that's not a
problem but i can reboot this this will
take hours okay yes thank you so how
does such your storyboard look like so
please recall it's actually pretty much
looking like what we have had in the
object diagram you just have to
formalize this a little bit more to make
it more precise so what we start with is
that we do okay an activity diagram and
embedded in this activity diagrams we do
special steps and the first one is that
we say this one is describing the start
situation and then we put some objects
here actually the object we have had in
the step before we do a system in here
and now we provide the type of this
which is reservation system something
like that we at the time are equals so
now time is a long integer you cannot
now write down may something or June
force or something like that and for the
simplicity I do 888 that this is a
current time
and / of course you can use the standard
things of type day to convert between
long integer and time that's that's a
simple stuff okay and now we have a room
here of type room which has the name
which is equal to R 23 and it's
connected and there are some other
objects here and so on and while I start
my system again this will still make
need some time come on
okay I can show from this such as
picture here if you put it into our
system we can generate code and this
code generation is pretty easy what the
start situation tells you is how your
epic structure should look like when the
test starts so what you do is you create
coat which just implements such an
object structure or create such an
object structure so what you do say I
need a new reservation system and store
it in some variable reservation system
this or you can take this name here
system so sorry this cannot be read this
is why I usually program this I'm almost
there and then you do a new room so room
room one becomes new room then you do
the attribute assignment which is room
one a dot set name of course we use
setup Gators are 23 you do this linking
which is again done by accessor
operations created from the class
diagram which might be something like
room 1 dot set system the system here
this this one here and so on you do this
all the time so to time left until all
this object structure here is generated
then the next step in our scenario wars
that we do some step of our example
actually it the example set albert is
doing a reservation for room number 23
from that time to that time so what we
do is we have Albert here of
force and code that creates a
corresponding object actually can go
back to the electrical version and do
try to do this let's see how long it
works there's room reservation system it
has a class diagram cool there's still
some stuff here that's cool so we do a
new story board and we say this is an
actress start situation and then we do
just what I said I had a system here
f-type reservation system I do have
something for that that just needs to go
away
and we do have I just do a smoke I hate
it just do a small cut out which says we
have her there's a buck here I'm sorry
for that you have to go word of that in
here which is we have a room one of type
room we have four room too okay this one
here has named 23 it belongs to the
reservation system this one either and
we need at least one person here and
this tends to hide a little bit and this
is p1 come on of type o its user isn't
it person person oh actually this is a
not the google demo distance another
demo have had preferred before thank you
for that and therefore but still it
works it belongs to this system here and
the name equals Albert
okay and yeah okay what you need is a
reservation actually we wanted to create
a reservation you do not need that one
actually here so and what we do is now
we send her a message to the system
saying I want to do a reservation and it
is Albert who deuce does this so it's p1
and it's room number one and the start
time is something light 999 oh let's say
eight eight eight and the end time is
something like 999 and here we are this
is again does not work so this is a
message we send to this here so there's
a an arc here which should come on so
the next step in our scenario is it that
we specify how should the situation look
like once we have done this so I say
please copy this situation to its
successor so what we do here is just
copy all the objects from that step to
this step now I drop the type name
because we already know that one and but
this is just a proper copy now and now I
do edit just these steps that I assume
the system is going to do that means I
add a reservation object here I hate
this one
so the this needs to go down here off
type or reservation and the start time
she'll be a date and the end time shall
be 99 99 and it shall be long too hi
Burt and to this room okay this now can
be turned into I have to specify that
this is a step that belongs to this yes
some weird stuff going on here from this
I can aid now create coat which is done
with this command here this is actually
what I wanted to show to you and the
code I have generated here is hidden in
these activity diagrams and there's is
so now your test here which has a set of
operation and this is just a step I have
specified before extended by one more
object over here and this object
actually is the tests case itself now
you recognize that it all these objects
and elements have our creation marker on
it which actually sass to our code
generator please generate code that does
this for us I just give you a short
glance on that in then I'm out of time
so what I have generated from this
picture here is code that does actually
what you want your reservation system
you room you room new person setname are
23 set named albert do create a link and
all these kinds of stuff this is
prettier number of coat so these are for
now I think about 500 lines of code we
have generated from the class diagram
and for the tests here the test is just
about well one page two pages it's about
100 lines of code and we did this in
half an hour so it's not it's pretty
good so note there is this code here
that does being vocation of the
operation that we want to test and in
this test scenario operation here there
is another piece chunk of code which is
later unused by the system come up here
to check whether it actually works and
this picture here tells you just give me
a I will explain it using the source
code that is generated here from this
picture we created a whole bunch of
assertions which actually say p1 must
not be equal to now room must be not now
room should not equal the other room
some more here the room number one
should have named our 23 these kinds of
steps two minutes okay and somewhere
here we check actually that this
reservation actually exists this object
exists and the attribute values are
correct this is this code here and that
the links are correct so I summarized my
talk so actually my my main my
powerpoint is gone so do not summarize
what we did now is we have specified a
scenario turned it into a object diagram
put it into our tool and what you get
from this is the J unit test that
actually execute properly and tests
whether the system behaves in this
specific situation as you has expected
as you have specified so because I'm
running out of time thank you for your
attention
now there are there are errors here some
so I just does anybody have a question I
just has a quick one so have you done
any studies to look at like the
maintainability or reusability of the
diagrams like you know in a industrial
ish setting so the maintainability of
the diagrams is better than usual code
you have to split this up so you have
diagrams actually for the actual
productive code for the method behavior
we use similar diagrams and what we have
experienced is those diagrams are easier
to read than the usual source code
because you have a picture showing you
this is the object structure this is
what I do is it and this is just faster
to recognize as if you browse through
code in code you would actually take a
piece of paper and draw the object
structure oh yes this is a situation or
yes this is what they are doing so if
your code is related to object
structures and modifications of objects
structures reading of these diagrams is
much easier than reading code directly
and I actually studied that though I
mean like what have you studied it in
practice I mean it's a real solid
experimental evaluation so I can tell
for my teaching experiences you are five
times faster but but this is not really
statistically evaluated but that's what
I would would claim
ok</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>