<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Hardware/Software Hacking: Joining the Real and the Virtual | Coder Coacher - Coaching Coders</title><meta content="Hardware/Software Hacking: Joining the Real and the Virtual - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/GoogleTechTalks/">GoogleTechTalks</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Hardware/Software Hacking: Joining the Real and the Virtual</b></h2><h5 class="post__date">2007-10-08</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/GyhkQuO5KUo" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">his presentation of what do you gave
last week OS Khan for those of you don't
know Jonathan he's the current president
of Link's Australia he's authored 12
hacks and how to step how to build a
website and stay sane debian developer
organized a bunch of Debian mini comps
for the last five years or something
generally all-around good guy and he's
got a RFID chip in his hand for extra
cred so please welcome Jonathan great
thanks Andrew so I assume just about
everybody in the room is a software
developer or a system administrator
something like that okay so you're
working software basically what that
means is most of the time all you're
doing is pushing bits around ultimately
that's what it is well in the world of
software we change pixels on screen and
maybe we make a bit of sound and it's
not really all that exciting so what I'm
here to do today is to free your mind
basically to to show you how to take the
skills that you already have in software
development system administration and
generally playing around with computers
and then you know the skills you've
gotten bits and pixels and things like
that and use those skills to reimagine
reality and not just virtual reality
which is what exists inside our
computers but physical reality as well
the actual you know stuff that is all
around us and there is a warning though
once you get out of the realm of the
computer there are some things you have
to be careful of some of the stuff I'm
going to show you today if you're not
careful with it can actually do nasty
things to your actual physical body not
just to memory in your computer so I
accept no responsibility I'm hoping that
you'll all go away and try lots of
really cool things out of this and that
you will take some of the ideas and
maybe little snippets of the techniques
and applied into other things that I
haven't thought of but and I'd love to
hear about it afterwards but basically I
take no responsibility so how do you get
out of the realm of software and into
the real world or there a whole bunch of
ways you can connect to your computer
computers have got a lot of different
ports on them there's a parallel port
serial ports of various flavors if you
want to get really hardcore you can even
actually build your own pci cards and in
various things like that sound for a
software developer it sounds
that's a really way up thing to do but
it's actually not really that hard there
are prototyping kits you can get that
will help help you to build pci cards
that you can then talk to directly so if
you're just starting with this one good
thing to get started with is a parallel
port basically because it's dumb it's a
really really simple port it's got no
flow control no comms protocol nothing
you have to worry about basically all
you have to do is worry about flipping
bits and we already know how to do that
if you look at an actual parallel port
it is simply a representation of bytes
of memory space actually adding to the
physical world now those blue pins
across the top art you know the data
pins and there are eight of them it's a
bite so a parallel port basically
occupies three bytes of memory space and
we can talk to it just by twiddling
memory which makes it really easy to
deal with so either control stuff
pushing data out of the computer into
the real world or detecting events and
reading them in but the thing is the
parallel port is bad because it's dumb
as well you've only got those bits to
play with there's not a whole lot you
can do with it you can put extra
parallel ports in your computer but
that's a pretty silly way to go it also
doesn't have any sense of analog input
or output it's just bits and that's it
so there are some better ways to connect
to the computer which we'll get to in
just a moment the other thing is that
scripting language support is very poor
for parallel ports if you're wanting to
play around with little bits of glue
code in Perl or Python or whatever it
can be quite hard to get access to the
the serial port by the parallel port
directly but you can use the trivial see
helper if you want to do it that way so
what we'll do is have a quick look at
how easy that is to do now up here i
have a little device which is basically
a monster LED is connected to the bits
on the parallel port and it's a trivial
circuit unfortunately it's going to be a
little bit hard to see but i did use the
biggest leds i can find now let's have a
look at how easy it is to connect to the
parallel port and either reading from it
or write out to it now if we have a look
at a tiny little piece of code basically
all you need to do is load a couple of
libraries which gives us access to you
know I oh and various things like that
and then we're defining the actual
location in memory that we're going to
be dealing with so a parallel port
exists at hex value 378 generally unless
you've got multiple ports or it's an odd
architecture or something like that and
then it starts at that and then it's the
next couple of bites after that as well
so in this particular case all we're
doing is taking a value that is passed
into the the program is an argument and
we're down the bottom you'll see it's
got an out B or out bite commands
basically that's just pushing that byte
of data at the parallel port very easy
and all you do is let's do some will do
it of a test here opt-out c
we'll see if we can actually make it do
it okay so
tilda value is a 255 uh-huh needs to do
to get access to the the parallel port
and of course I can't type my password
that's better yeah we've got something
okay cool so we could arbitrarily turn
different bits on that port on or off
simply by sending different values to
that little script so that makes it
really easy to control say up to eight
discrete devices we could just connect
relays in place and then we could turn
stuff on and off which is pretty cool
and you can also read from the parallel
port just as easily in fact it's even
easier all you do is set permissions to
give yourself read privileges from the
port and you suck in a bite from the
port now in this case you'll notice that
we've gone for the address of port
address plus one so that's the second
bite of the port in this case that's the
input data and then we're just going it
out so I won't show you that one life
but I've got a just to show you how
simple it is I've got a little circuit
here which is just some buttons that
assert the lines on the parallel port
and that program when you run it will
detect which buttons have been pressed
so it makes it very easy to connect to
anything which is something like a
switch or a switch like device which
raises another thing when you start
looking at the physical world and what
you can connect to just about everything
represents itself as a switch in terms
of an input if you want to connect to a
motion detector for example it's just a
switch if you want to measure you know
angle or tilt or pressure or something
like that most of the time they
represent themselves as a switch so it
makes it really easy to to detect events
and acquire data and then pull it into
the world of software once you got it
into the world of software then we're in
the environment that we're all
comfortable with and we can do things
with it we can make decisions on the
basis of the data that's been pulled
into the system
but as I said the parallel port is very
limited it's good if you want to just
get started because you almost need
nothing at all just a couple of
components go down to radio shack and
you know a dollar will have all the
parts you need pretty much but it's
limited so if you want to take it a bit
further one of the things you can do is
use an Arduino board and there are a
number of other prototyping boards
around now it's probably easier to see
up there I've got one right here as well
and Arduino board is a little micro
controller board this is actually open
source both in terms of the hardware and
software it was developed by a couple of
Italian designers and is based on an
atmel microprocessor so you can go and
buy these pre-built for about us thirty
dollars something like that it's got a
bunch of digital i/o lines on it and the
actual designs themselves are open
source so you can download the circuit
board layout so you can manufacture
these yourself and sell them if you want
to it's under a really liberal license
and there been something like 10,000 of
these boards sold now so they're used in
all sorts of applications all around the
world they come in a few different types
you'll see up there in the top left is
the USB version which is what I've got
right here there's also a bluetooth
version on the top right and there is a
mini version which is basically the same
thing but without all the convenient
connectors on it so it's been compressed
down to a very small board and as you
can see it's got a quarter next to it to
show how small it is so they're really
tiny but they still have all of the the
i/o lines and things like that so if
you're doing prototyping these are
really cool board to use what you can do
is do your development on one of the USB
or bluetooth boards and then when you're
happy with that everything is working
transfer your program over into a mini
and it will just run now these things
are really simple you write the program
in an IDE which once again is free and
especially let's have a look at that so
this is an IDE for this particular board
it's basically a development of
processing how many people here a herd
of the script coding system called
processing
a couple help okay cool which is in turn
based on wiring it's a system for very
rapidly developing developing code to
represent real world objects and things
like that so essentially this is a
hardware representation of the of the
program and also I should point out that
if anybody's got comments and questions
and he's along the way just throw them
out I'm going to sort of just roll
through this pretty fast but I'm sure
they're a bunch of people here who have
done very similar things so if you've
got comments suggestions then yes yeah
the comment was that there is a GCC you
can compile using GCSE for this in fact
the that's what this Arduino IDE uses in
the back end it actually relies on GCC
so it then cross compiles for the atmel
architecture when you tell it to do it
and in fact let's see how easy it is
what we're looking at there is a program
it's just got a loop in it does a couple
of things that we'll get back to later I
went explain that in detail right now
but basically all you need to do is hit
the little verify button which is what
they call compile and it's told us that
it's created a binary sketch down the
bottom so it's actually built that nice
cross compiled that software and then to
send it to the board all I'll do is plug
it into the USB port so it powers up now
when the board first powers up it spends
about the first six seconds i think it
is looking for a device to talk to it
and if it finds it and negotiates a
connection it will then grab whatever
program is available it's basically like
a pixie boots to the system so it'll
grab whatever is available load it start
executing it and it will just run it
forever anytime you reset the board it
just starts up again and it's all held
in non-volatile memory so what we can do
to get that program onto the board is
just press the reset button on it which
I'll do now press upload down the bottom
it says uploading to i/o board and if it
finds it successfully
yep reported firmware version 1.1 5 so
it's found the board is uploaded to
program and the board itself is now
bleaching power off the USB connection
so it will now be running that program
just forever if i unplug it it'll stop
plug it back in it goes through its
power upcycled looks for a new program
if it doesn't find one it just starts
running it again and you can run these
off a battery as well they're extremely
low power so you can just plug in a you
know a 9 volt cell or something like
that and you don't even need the
computer connected it becomes a
standalone device at that point so those
are really cool little devices for
playing around with so let's have a look
at some of the things you can do if
you've got some building blocks that
allow you to acquire data into the world
of software or push control signals out
into the physical world what are some of
the things you can do now what I'm doing
talks about how do we're hacking what I
normally do is use my front gate as my
example of real world things you can
hack most people think what the hell can
you do with the front gate but the
reality is that my front gates probably
got more processing power in it than
most people's offices including dual
Gigabit Ethernet and quite a few other
things so let's zoom in a little bit on
this picture in towards the left you see
the letterbox now going to get check
whether there's an email in your
letterbox is a pain basically a
letterbox is a polled interface you have
to go and keep polling it to see if
there's nothing in it wouldn't it be
good if you turned it into an interrupt
driven interface instead well you can
what you can do is use something like a
reed switch in my particular case on the
back of the door is a little magnetic
switch which detects when the door has
been opened and just to simulate this in
the longer talk that I did at oscon last
week I brought along this box and this
is a representation of my letterbox and
it's got the reed switch and everything
wired into here which actually reminds
me of something I I think I just set a
personal record for the weirdest stuff
or the most suspicious stuff I've
managed to get through US customs so I
arrived in the country with
a box wider with a red switch with
obviously hand soldered electronics
sitting inside it and some various other
things that we'll get to in just a
moment so what you can do is detect the
fact that the letter box has been opened
and then trigger some event which could
be sending an SMS saying hey you got my
own your letterbox go and get it or
sending you an email or blinking into
second life or some other virtual
environment and showing the status of
your physical letter box inside the
world of software similarly on the gate
itself there is a red switch that's just
in the actual frame of the gate so it
detects if the gate has been opened and
then we can have the thing computer
aware that someone has just entered the
property in terms of output there's a
light up underneath it so you can turn
that on in certain situations like you
can tell it to only turn on if someone
enters a property and it's dark other
things you can do ok magnets that is a
big electric a big electro magnet
basically it's a door lock so that is on
the door of my office back in Melbourne
Australia and because it's an electric
lock it means that can be computer
control once again we can pull the
physical world into the world of
software now those things are
ridiculously expensive but if you go out
to local hardware store you can get
something like this this is an electric
striker plate now in australian dollars
these are about forty dollars so what 30
bucks us and all you do is put mount
this in the the actual door frame so
that the the door catch hooks into the
back of it instead of the the little
static metal plate which is normally
installed and by applying 12 volts to it
it releases dead easy so all you need to
do is fire a relay or something and you
can unlock a door electronically which
brings it back once again into the realm
of software and you can control that
from software
now on that same door back in Melbourne
there is one of these all devices so who
wants to guess what that is nobody does
okay well that is an RFID reader and
this just goes to show that there are a
lot of devices that you would probably
think are hard to interface with you
might think they're fairly esoteric they
might have unusual communications
protocols or something like that a lot
of the time they don't in this
particular case or what I have right
here is a homemade RFID reader actually
had a lot of trouble putting this one
together because most of the chipsets
that are available for the US standard
125 kilohertz RFID tags and in Australia
we follow the ISO standard which is 130
4.2 so in the end I had to basically hot
build the whole reader myself I couldn't
use many off-the-shelf components so
it's going to handle one coil in there
and everything but it's got a USB
interface on it so when you plug it into
a computer it simply enumerates itself
as a serial device and then you can talk
to it directly through a serial port now
once again a serial port is not
something that you can trivially talk to
from a scripting language although about
a year ago or so one of my staff
actually wrote an entire serial port
driver natively in PHP which is an
interesting exercise but it worked cody
was insane but it worked but there are
much easier ways around that there's a a
really cool little utility called co2
net or ser to the number two net and
what that does is take any serial port
on your computer and expose it as a
network socket now that opens up some
really interesting possibilities because
one thing that's really really easy to
do in pretty much any scripting language
is talk to a network socket so let's
have a look at that
well unplug the old dueno do we had a
second ago we'll plug this in
and we'll have a look at the config file
for CS Annette now it might be little
bit hard to read but down the bottom
there is an entry which says I want to
map TCP port two thousand you suppose it
as a telnet protocol and I want to link
that to dev TTYL us be 0 so whatever
physical device appears on TTYL us be 0
expose it as a network socket and there
are some configuration there that tells
it what cereal what speed the serial
device is going to be whether it's got
stop bits all of that sort of thing but
it's pretty easy so what we have now is
a serial device and exposed as a network
socket which makes it very easy to talk
to so we could have a look at that and
in just about any language and scripting
language is trivial to open a network
socket so let's just have a quick look
at that one
ok so it's found the device the device
itself has identified itself well CH net
has identified itself and to make things
interesting what I have here is an
implant ER for a implantable RFID tag
it's probably going to be rather hard to
see because it's about the size of a
grain of rice that here we have an
implantable RFID tag so this is what
would typically be put inside you know a
dog or a cat or something like that so
that it can be found and returned to its
owner the RFID tag itself contains a
unique serial number so whenever it's
scanned it will just return that number
the tags themselves are passive so
there's no battery or nothing in it is
simply powered up by induction because
by being put into a field so if we take
that near it you can see that it's just
read the tag so we're reading an
implantable RFID tag using PHP in this
case and it's just as easy to well this
is the old school way of doing it Larry
wall actually saw a talk I did where I
showed this code and he laughed at me
but nowadays you would do it with a cpn
module it gives you access to to doing
this but that's still pretty simple or
we can do it in Python once again dead
easy to open a network socket and just
for the fun of it
you can even do it in TCL
so here we are really an implantable tag
in TCL with only a couple of lines of
code and one little helper script so
doing this to the stuff is a lot simpler
than you might first think once you
start seeing a few of these little
building blocks like see it a net to
expose serial ports it makes it really
easy to start linking into it in
whatever environment you might want to
work in so it really doesn't matter what
your preferred software environment is
this other stuff makes it really easy
okay other things you can control
curtains but lazy people now a little
while ago my wife and I had kids
bedrooms redone so we had replastered
and all of us are the stuff and when we
got prices on curtains I just about had
a heart attack how many people here of
replace curtains in the house only a
couple okay well for those of you that
haven't been laid you haven't because
it's a really scary there are a few more
zeros on the price I was thinking it's a
bit of material it hangs from the
ceiling how much can it cost and it was
a lot and then once I got over that
shock i started thinking it'd be really
cool if we could remote control them and
i started looking for commercial
controllers it turns out that the cost
of an electric curtain track is
relatively high like it's in the order
of hundreds of dollars but in the
overall scheme of things if you're doing
you know new curtains on your drapes
that's actually a pretty small
percentage of the cost so we ended up
putting in commercial electric curtain
tracks so what you can see there just to
the left of the curtain track is the
controller that goes on the wall now
this particular curtain track that we
got is not intended to be networked it's
basically a dumb device there's an an RF
sorry and infrared remote control that
comes with it and some little buttons on
the box on the wall but that's it it's
not meant to be linked into a home
automation system or a computer or some
Frankenstein's monster device that I
typically concoct so but this is an
example of a really important point
which is that just about anything which
has buttons you can control by ripping
the box off and wiring a relay or
something across the buttons you can
control the relay from your computer you
can control the device so this is just
another view of the same thing there's a
little
motor sitting and a really really long
thread that goes down the middle of the
track so now we have curtains that can
be controlled from the computer which
raises some interesting possibilities
like being woken in the morning by some
light coming into your room instead of
an alarm clock blaring and I don't have
a slide for it but a similar project
I've got in the works at the moment is a
computer-controlled skylight cover so
that we can open and close the skylight
baffles so in the morning the room can
go from dark to light another device and
some people say this is going too far
but anyway many years ago my job
actually is to involve using barcode
scanners so I've got a few spare ones at
home and this is a laser barcode scanner
barcode scanners themselves at one
another one of those devices you would
think esoteric they're hard to drive but
most of them simply pretend to be
keyboards so you plug them into a
keyboard put in this particular case
it's a really old one that plugs into an
early Mac so that one's plugged into a
Macintosh LC for 75 or some super power
beast like that and it just acts as if
you've typed directly onto a keyboard so
when you zap a barcode with it it simply
sends the stream that characters back as
if you'd sit there and type the number
in yourself which makes it really really
easy to link it into things so in this
particular case a web browser sitting on
a with focus on an input button so that
when you zap something it simply types
the code into this little form and then
at the after that's finished ending the
code it sounds carriage return which is
if you'd press to enter on your browser
and you've got a form submission simply
by zapping your barcode and once you've
got that all sorts of things are open to
you now this is the project that really
got me started on this whole this whole
kick of modifying typical everyday
objects in Australia we've had a in
Victoria we've had a drought for about
the last eight years we've had some
really
really harsh water restrictions and just
keeping plants alive is a real problem
so a couple of years ago what I did was
started looking around putting in you
know drip feed sprinkler systems and
things like that and went down to the
hardware shop and the computerized smart
controllers were ridiculously expensive
there are many hundreds of dollars for
basically something that was just a
glorified timer and I thought I can do
something a whole lot better than that
so what I did was bought the cheapest
electronic timer tap that I could find
so this is a little garden mate thing
that would sell for you know about
fifteen dollars us or something like
that inside all it is the little timer
that drives a motor so once again I
ripped it open on the bottom you can see
there's it'll RCA connector internally
that goes to a little thing that
bypasses the timer and simply tells the
motor to switch to the on position so
you know screwdriver and 10 or 15
minutes of modification and we've got a
timer that we can control that at the
computer so then we've got all sorts of
possibilities open to us so that brings
us to how this all ties into second life
what I've been talking about so far ways
to take the real world link it into
software but that's not where it has to
end it's not just a matter of
controlling things from the command line
or putting a GUI interface on it what
you can do is once you've got events
into the will of software link that all
the way through to an environment like
second life so how many people here
abused second life okay quite a few
haven't well let's go to second life
you're about to be logged off for an
activity great well I'm not so for those
of you that haven't seen it this is
second life looks a lot like a 3d
first-person shooter basically it's a
shared virtual reality environment that
you can can go into and move around not
all that revolutionary in itself but
there are a few things that make this
really interesting one is that the in a
typical game type environment like a
standard first-person shooter or just
about any virtual reality environment
there is going to be some form of
scripting within it so objects are
scriptable if you've played any
first-person shooter then you would know
that you know objects can react when you
shoot them and things like that you know
you touch a door and it opens the thing
is that that scripting layer is normally
hidden away from the typical end user so
as a user you can interact with it but
there's not much else you can do to
really modify the world you have to go
fairly hard fairly deep in under the
covers and start modifying things the
thing that's really cool about second
life is that they've exposed all about
as much as possible and what they've
tried to do is build a platform that
provides you with the toolkit basically
the canvas to paint on but then it's up
to you to do what you want with it so if
you want to do custom development you
want to create scriptable objects and
things that interact you don't need
anything special if you're inside the
Second Life viewers you've got
everything you need and it's just a
click away so all we do is right-click
and we go create and we get ourselves a
little creation wand and up on the top
left you can see there's a bunch of
polygons so you can select what object
shape you want and in this particular
case let's make a box so just click
there we've made a box and from here we
can do things like rotate we can resize
and you can do all the sorts of things
that you would normally do in a 3d
authoring type environment but just
directly in world so you don't have to
step out move make things and bring them
back in again you don't need any extra
software the other thing is that
everything is scriptable so in this
particular case we can click and select
this again and go a new script
and there is now a script that is
attached to this object now there are a
couple of interesting things about
linden scripting language which make it
a little bit different to other stuff
that you might have seen before the
first is that the whole concept of the
scripting environment is based on the
state machine now state machine is
something that in others other
programming languages you normally have
to create yourself you have to keep
track of what state you're in and you
know what is going to push you into a
different states and various things like
that the entire concept of linden
scripting language is that the script is
a state machine basically you can't get
out of it you have to have a state now
when you create the the basic hello
world or hello avatar program that
creates a single state which is just
default state machines are really cool
if you want to try to create objects
that interact with you in some way or
interact with other objects in a similar
way to the way the real world works
because if you think about devices like
you know a desk lamp over there or
something like that it's got a state of
honor it's got a state of off just about
everything has various states and then
depending on what state it's in it'll
behave differently depending on what
other inputs to take place and linden
scripting language is totally focused
around that concept so everything is
done on the basis of states and then
triggers or events so that you can't
actually define your own events there
they're predefined within the system but
there are a lot of them and you can
define your own event handlers so a
really good example would be a touch
start event which is when an avatar
walks up to an object and clicks on it
so they started to touch it what you can
do is have a touch start event handler
that then calls off into some other part
of your program so you can have an
object which reacts to different things
it might react in one way to be in touch
to might react in another way to think
it's in a different way or for example
if you talk to it it can react in a
different way
so if we have a look at this little
hello avatar entry back in here what you
can see in there is it's got the default
state it's got an event handler of state
entry so when it goes into the default
state the state entry handler is called
and it says hello avatar so that's
basically the equivalent of hello world
in lindon scripting language and then it
has one other event handler so if it's
in the default state and a touch start
event occurs then it does ll say touched
so very easy so it's just like echo
attached or print touched and if we
close this off now and then touch this
it says that's got the name is objecting
this is touched so it's reacted to what
we've done now Linden scripting language
itself is it can be a little bit hard to
get your head around the first time
because it's so intricately it's so
intimately wrapped up in the concept of
being a state machine everything is
happening within the state machine but
once you start working with it you
realize how cool that is when you're
trying to code in a in a virtual
environment so once again though that is
happening within the virtual world so
these are events that are taking place
within within Second Life so the
question is how do you get data in and
out of second life once again how do you
breach that barrier so that you can
start linking things together LSL itself
provides a whole bunch of mechanisms and
the environment that it runs in provides
mechanisms so at the moment second life
runs on approximately 4,000 servers so
why your guy standards that's trivial
but but it's a reasonably significant
network by you know by any other
standard about 12 and a half CPU cause I
think they're running as of last week so
what happens is that the the world or
the environment that you interact with
is broken up into regions and now
basically there is a sim which maintains
a certain region of space or a certain
physical area and that it runs all the
scripts all of the objects and things
within it so the way they scaled it out
is that they have a grid or a mesh of
all of these sims and each one has
Simmons on its boundary obviously and
you can move between them so if you're
in world you can seamlessly walk so you
can start at one corner of the universe
and walk to the other corner of the
University if you want to and you you
could pass across a thousand Sims and it
would be seen what so you're just moving
from one sim to the next and then each
of those sims provides a whole lot of
extra runtime information and
environmental information to scripts
that are running within it so one
trivial thing you can do is email out of
second life so inside Linden scripting
language you can simply send an email
very easy and you can also email into
second life what this means is that you
can interact with in world objects using
email if you wanted to have a if you had
a low priority event in in the physical
world for example and you wanted to
cause some state change within Second
Life you could send an email to the
object every single object in second
life has an ID which is basically like a
long character string and when you
create an object which is called rezzing
or bringing into resolution the opposite
of derezzed an object is automatically
given an ID so every single object in
world has a unique ID and it
automatically gets an email address so
that object that I just created now has
an email address which is just the ID at
LS l dot secondlife.com so it makes it
really easy to address it you can also
do xml-rpc into second life now this is
where things start to get quite
interesting the the Second Life grid
itself has a gateway that we can make
xml RPC calls to and we can send
requests to specific objects within the
object itself you can then have
an event handler that detects the
incoming xml RPC request handles it and
then sends a response back so once you
get to that sort of level you're getting
to the point where you have a reasonable
latency with email obviously you might
have fairly high latency and you also
have no guarantee of delivery with xml
RPC at least you can check on your end
whether anything has come back within a
reasonable time and they're responsible
usually taking in the order of
milliseconds rather than however long an
email happens to thread its way through
various various steps out on the
internet so let's have a look at how we
can do xmlrpc into second life just for
the fun of it okay so I'm well I was
going to sleep okay what we'll do is get
rid of this
and I'll have a look at my inventory
here's one I prepared earlier
and we'll pull out an object this
particular object will go over and
examine it and see what's actually in
the in the script associated with this
so just go to edit and we'll have a look
inside the script now this is a script
for an extremely primitive door what it
will do is have physical presence if
it's locked and have no physical
presence if it's unlocked and what it
does is starts by saying hey this is me
and giving its its identifier because if
we are wanting to to talk to this object
from outside the world we need to know
what its ID is so that we can address it
and what it then does is going to a
state where it's where remote data I'm
coming in from an xml RPC request can
cause it to change into an unlock state
it then sleeps for five seconds and then
locks itself again so the summary is in
this default state it's red it's a wall
you can't walk through it if a certain
xml RPC request gets to it it goes hey
I've just been told to unlock it then
turns green and it puts itself into a
phantom state so you can see it's there
but it can walk through it now if you're
actually going to do a door in Second
Life you do something prettier than this
but at least this is obvious and you can
see it when it's up on the screen and 30
feet away from you so let's just have a
look at this
what I'll need to do is reset this
okay so I reset the object this is
basically like hitting the reset button
on the script and what that's done is
forced it to to reinitialize the script
associated with the object one of the
first things the script did was say hey
I'm a week and this is my ID and what we
can better set it basically as a chat so
that I could see it what we'll do is go
back into chat history it might be a
little bit hard to read but what it's
saying there is ready to receive it
requests on channel and it's given me an
ID
so I'll copy that ID
so we can now address that using
using xml RPC so let's have a look
now how we can talk to that
and
okay so what we have here is a little
bit of code
which reads a race from the serial port
so what it does is opens the local
socket once again so this is using co2
net which is the setup that we had
earlier with the rfid reader which is
currently still plugged in what it does
is sits there and watches the the serial
connection or in the socket which is
representing the serial connection and
if it detects a tag being scanned which
has a certain sha-1 hash it says hey I
meant to go into an unlock state and
then a little bit further down what it
does is prepares some XML so this is the
actual body of the xml RPC request
that's going to be shipped off to that
door in second life in just a moment to
tell it to unlock so what we'll do up
here is will stick in the channel which
we just extracted out of that object
earlier so when it connects to the the
gateway the xml RPC gateway on the
second light grid it'll identify it and
say i want to talk to that object over
there and here's its identifier so
second life now knows what we're talking
about too used to being in vm no Colin q
does not get you out of G at it
okay now we'll move this
over to here so we can see what's going
on
now if you are silly enough to have an
RFID tag in your arm
he and we just unlock the door by just
getting my arm so at that point I should
be able to walk through it except it's
real locked so if I walk up to it while
it's locked I can't get through it but
if I now scan my arms as unlocking xml
RPC request goes through and we can now
walk through the door so we've got semi
real-time control of the door in second
life from the rfid reader which is just
connected to my local computer here
which is kind of cool then you can get
trapped yeah but it's not fatal because
you can always just teleport anywhere
you like that's the good thing about a
virtual will if matter condenses around
you it really doesn't matter
ok
so there are other ways that we can link
into second life as well another way to
do it is with the modified Second Life
client now if you're doing it doing
real-time interactivity or you've got a
lot of data that you need to get in and
out doing something like an xml RPC
request is going to be a real pain it's
Owens faster than email but it still got
a fair bit of latency and there's this
monstrous XML blob that you're sending
to give it you know one integer value
great thanks XML but there are better
ways you can do it one is with a
modified Second Life client now if you
look at the at the moment when I'm
logged into second life I have a client
running on my local computer which
obviously is very latency critical you
need to get information back to your
computer as fast as possible when
someone walks into your field of view
when actions occur and so there is a lot
of data flowing backwards and forwards
between the client and the environment
now one clever way that you can get a
lot of data either in or out of the
environment is by running a modified
client and the actual Second Life client
itself has been open sourced so one of
the one of the very first hacks that was
done when after the client was open
source I think this was about three days
later was a friend of mine British
developer named Matt Bergdorf did a
little hack using one of these Arduino
boards what he did was connect a
variable resistor to one of the inputs
to the analog input and set up a program
that sent the value from the Arduino
board into a modified version of the
second life client so if we have a quick
look at this video what is doing in this
case is sending that value into second
life through the client which is then
chatting to the object so what is God is
an object which moves up and down on the
basis of the altitude that has been told
to go to so on the Left we've got the
little Arduino board with the variable
resistor on it and as he twiddles the
knob that data goes through the serial
connection to the second life client
which then says by the way I need you to
move to three meters altitude
and the object then moves so that's one
way to get data fairly rapidly in and
out of the Second Life world from your
own software environment or from an
actual hardware environment because he
was reading from a physical device in
that case so he was reading an analog
input from the variable resistor now
there are better ways to do that one of
the very first projects that sprang up
after a second life really started
taking off was a project called leap
second life and this was a project to
reverse engineer the Second Life
protocol so this started before the
decline itself was open sourced and as
you can imagine with pretty much any
proprietary protocol there's going to be
someone sitting there on the while
watching the bits flying around and
saying hey I can do that so a project
started called lib Second Life which was
an attempt to create an open-source
reimplement ation of the client
communications protocol and that's
actually been quite successful it's
worked very well and it's got the the
unofficial blessing of Linden Labs who
are the developers of second life and
what live second life allows you to do
is write your own software that pretends
to be a client it implements the all of
the the usual client-side events so it
allows you to do things like log into
the grid passing your username and
password and then get data back from it
the thing is that it doesn't have all of
the overheads of the usual client
obviously it doesn't have to do any 3d
rendering if you don't want to and so
there are some example clients around
which are most of the clients are
written in C sharp that you can also do
development there are bindings I think
for some other things like Python there
are some example clients around that are
actually really cool in only a few lines
of code they let you do things like log
into the Second Life environment and
then send chat messages and receive chat
messages and it means you can do it off
the command line in a very very fast and
resource efficient way much more
efficient than running a whole
full-blown 3d client on your computer
and then passing data in and out of it
so if Matt was doing it again he would
probably actually be using loop second
life but at the time he modified the
official second life client that was the
most expeditious way at the time
another thing you could do is run a
private second life sim now at the
moment this isn't practical the actual
seam itself that represents the world is
obviously the ideal way to get lots of
data in and out really fast the thing is
that at the moment the server itself has
not been open sourced although it's
about to be but there are open source
reimplement ations of it so you can
actually run your own sim the problem is
when you start looking at something like
a very big shared virtual reality
environment there are a lot of matter
management issues that you have to take
into consideration for example if you
have you need to injuries a whole lot of
things like the concept of physical
space which don't matter on the web I
mean you go from one URL to another URL
who cares where the sites actually are
located if you have a sim it has to fit
into a master worldview somewhere there
has to be a definition of the grid and
then what sim fits into each of those
little slots within the grid and at the
moment it's impossible to link an
unofficial sim into the Second Life grid
it's just you can't do it at the moment
Linden Lab is looking at how they can do
that and in the future it probably will
be possible but right now you can't ok
another thing you can do is HTTP out of
second life this is something that
sounds pretty trivial but it actually
opens up a whole lot of really
interesting possibilities from any
object within Second Life which is
running a script you can open arbitrary
HTTP connections to remote machines
which is really cool because that remote
machine could be under your control and
it could take control of things in the
real world so let's have a look at that
that sounds cool
alright let's go back to this this
Arduino code that we were looking at
just before now in this particular case
what we got is code that communicates
via the serial port on the USB port and
it looks for certain values coming in
and then controls outputs based on the
values that you send it so it's really
simple code all it does is going to a
little loop watches the serial port if
it gets a value of one then it sends an
output a certain output high weights
half a second interns it'll Oh again if
you gets a value of to put another
output high wait up a second and puts
the low again what that means is that if
we can connect a couple of relays to
those outputs it makes it trivial to
have software control over buttons
attached to some physical device so
let's have a go up playing around with
that what I have here and it's
deliberately very low-tech just to show
how easy this is it's a couple of relays
each of which is connected to a
transistor a resistor and a diet and
that's it really easy so what we can do
is connect that up to the Arduino board
so that we can then turn those relays on
and off so all I'll do is connect up
ground and then we've got a couple of
outputs so in that particular case what
I'm doing is connecting two outputs
upward pins 11 and 12 and as you can see
in the code they well actually connect
as it scrolled off the screen
somewhere up there so we defined the two
outputs as being pins 11 and 12 so we
can just address them as output 1 and
output to to control those relays now
this little exercise here is really
going to illustrate another aspect of
this which is that a lot of the chat at
the time that you start hacking hardware
you end up linking things together into
a long chain of objects you end up with
a physical device connected to another
physical device connect which is being
run by the Arduino code which is talking
through a serial connection which is
being exposed as a network socket which
is on some scripting language which is
talking to a web server which is then
being triggered in this case by LSL
which is running inside in a second life
so we've got this long chain of events
but each link in the chain itself is
actually quite small and simple and once
you start coming to terms with some of
these little building blocks you can
link them together in totally different
way so this is just one example of how
to take that chain from the virtual
environment all the way through to the
actual physical world so this is the
program which is actually running on the
Arduino right now so we don't need to do
anything much else about that but I'll
get rid of the RFID reader that we don't
need anymore
and plug in the USB cable so that we can
get the Arduino back up and running
again now what we'll do in this
particular case is we want to control a
physical device once you start dealing
with mains level voltages that's when
you're getting to the big scary warning
labels and things that can kill you this
is a really simple way to play around
with controlling appliances without
zapping yourself basically it's an
appliance from my control it's a little
box that you plug into a powerpoint plug
a device into it and there's an RF
remote just like a car alarm remote
control and you can control appliances
now I bought this one up in Portland
because obviously anything i buy at home
is 240 volt this is 110 it reminds me
when I went looking for a hardware store
to buy this from I've discovered there
was a hardware store in Portland called
shown I thought I've got a hack on
hardware from a hardware store called
shown it's too good to pass up so this
is exactly how it comes from the factory
you plug it in you've got to remote
control but of course we don't want to
leave anything factory so let's start
playing around with this actually what
it could do we'll use that lamp over
there so can I get you to plug that into
the wall and then plug the lamp into it
there is no way this is going to stay
the way it came from the factory
so what we have here is the strip naked
remote control I'll pull the battery out
of it for a minute and it's just got two
buttons on it so all we have to do is
wire the relay is connected to this
Arduino across those two buttons luckily
I happen to have a soldering iron right
here
so these are the outputs from the relays
now go to figure out which button is
often which one is on so that one is on
sorry if this isn't very exciting to
watch bit
hard to see hahaha yeah that would make
it exciting to watch
actually got someone from the audience
up to do this for me
it's not a burger soldering iron but
that's what you get for six dollars okay
so we've now got two relays why across
that remote control connected to an
Arduino and we put a power up the remote
control
and
provide some power for the relays but
we're a long way from done yet so from
within the Arduino scripting environment
we now have control over that piece of
hardware but let's have a look at at the
next step in the chain so we need to
talk to the Arduino and send it a value
to tell it which relate a trigger now
what we'll do is use a little script
running on my local machine so much i'm
not going to edit it that's what being
on the same desktop is a 3d render it
does to you okay so this is just a tiny
little chunk of PHP all it does is
receive a variable called command and
then it can either have a value of one
or two and that tells it basically which
button we want to press do you want to
press button one well but unto it then
talks through the serial connection once
again using co2 net so it's a network
socket connection and sends that value
to the Arduino which is running that
piece of code we're just looking at
before looking for a value of either one
or two very simple and I better plug the
Arduino into the serial connection again
and power it up
okay now the next step in the chain this
is running within Apache on my local
laptop obviously now I don't work at
Google I've just walked in here today
and I'm on the guest network obviously I
don't have an external public IP address
so what I've done is actually run
reverse port forwarding how many people
have heard of reverse port forwarding a
couple okay so most of you probably
familiar with normal port forwarding or
local port forwarding which allows you
to take a port on your computer and
expose it and basically tunnel through
to some remote machine when you do SSH
minus L the reason that it's at minus L
for the port forwarding flag is it's
actually local port forwarding if you do
SSH minus R its remote port forwarding
so what I've actually done is done SSH
minus R and then open the tunnel from a
machine back in Melbourne which is my
desktop machine back in Melbourne back
through to my laptop so right now if we
do a query or like a do an HTTP
connection to my desktop back in
Melbourne on port 8080 it comes through
to apache on my local machine here so
what we can do now is go back into
second life and wake up my sleepy little
avatar let's get rid of that door we
don't need that now
never i didn't want that
yes okay I'm ambidextrous and
triple-jointed
and instead what we'll do is create
another couple of objects let's create
some buttons now I'm no good at building
stuff inside Second Life so everything I
make tends to I don't want that
everything I make tens look like a box
so we'll do create to make our buttons
around like little spheres and we'll
call this one on the button very
imaginative and we'll add a script to it
now in this particular case what we want
to do is when this button is touched we
want it to open an HTTP connection back
to the web server and talk to the
Arduino and so on down the chain so
let's grab the code for that it should
be around here somewhere
so in this case we've got a little
object which when its rest is going to
say hello I'm an on button and when it's
clicked it is going to actually we don't
want string action 11 we want one it is
going to make a connection back to my
machine in Melbourne and pass it command
one so the same as if we press button
one so let's get out of there and just
for the fun of it let's make another
button
and we'll call this one
off button give it a script
and the off button if I've got
everything correct here is the second
button so we're going to send an event
of two instead and we're going to go to
have the object say hey I'm an off
button so we'll save that and now this
is where I look stupid if it doesn't
work so let's try clicking the on button
and we'll see what happens just on
button1 then looking happen no that's a
good question yeah the actual lamp
itself but I just thinking what I'll do
is I'll test oh yes daddy's turned on
okay so let's do some debugging back up
the chain
where's my browser
so I'll try bypassing second life and
will work directly from there no okay so
the problem is not with in second life
the problem must be further down the
chain the net I'm not getting a
connection I wonder if my tunnel has
dropped out
yes that's what it was so we'll open the
the reverse port forwarding again hey
we're back okay and now we'll try this
once again click the on button
nope still not liking me just in case
I've got them back to front
we'll try it from here instead of going
through a second life
once again I'm not getting in connection
through
let's just try localhost instead and see
if I've got Apache working properly
okay so Apache is working properly there
I think the problem seems to be with the
external connection I can't get back
into my computer from outside so from
here we can turn we can hit one to turn
it on and we need to to turn it off but
it doesn't seem to work if I go out
through the external address
oh well yeah the general concept anyway
it seems I'm being blocked by something
along the way but the idea is that from
within Second Life by clicking on one of
those objects we can then control the
actual physical device and turn it on or
off so what I've shown you is a few
specific techniques but mostly it's a
little building blocks or things that
you can use to link things together but
from the software realm to the physical
realm so there are three things that I
want you to get out of this whole
session first is free of mine stop
thinking about the world as being the
way it is the world is like a big Lego
set and you can modify it you can tinker
with it and connect things together the
second is hardware is malleable you can
take an object which is designed to do
one thing and make it do something
different modify it to suit your
purposes and finally use scripts as glue
think about how you can link things
together to get from within the software
environment to the physical world and
vice versa and I'm hoping that some of
you will have a lot more imagination
than I do and come up with other ways
that you can use some of these
techniques so what I've done is created
a there's a basic website up now called
second life integration com there is
also a google group called second life
integration and in second life itself
there is a group called second life
integration and there is up on the
website there is a bunch of source code
example scripts for some of the things
I've demo today and what I'm going to be
doing is adding circuit diagrams and a
whole lot of other things but what I
really want is input from other people
that are playing around with this stuff
so if you've got any ideas or if you've
got little projects things you want to
hack on please come along and check out
Second Life integration and submit
anything that you may have that could be
added to it and also these slides will
be up as well for those that want to
refer to it so if you've got any
suggestions I'd love more ideas I'd love
to hear from you afterwards thank you
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>