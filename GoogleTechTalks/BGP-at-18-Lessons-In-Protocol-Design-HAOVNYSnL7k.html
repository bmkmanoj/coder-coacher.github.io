<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>BGP at 18: Lessons In Protocol Design | Coder Coacher - Coaching Coders</title><meta content="BGP at 18: Lessons In Protocol Design - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/GoogleTechTalks/">GoogleTechTalks</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>BGP at 18: Lessons In Protocol Design</b></h2><h5 class="post__date">2007-10-08</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/HAOVNYSnL7k" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">thank you guys for coming we're
recording this for Google video it's
gonna be available externally so save
your confidential or your proprietary
questions till after they finish
recording let's see we're very fortunate
to have with us Yakov whose
accomplishments in the field of
networking are both distinguished and
prolific I personally would like to
thank him for RFC 1918 thank you so
without further delay
dr. Yakov rector thank you yes the talk
about BGP this he actually is kind of an
anniversary of BGP because this year BGP
is 18 years old so if you look at the
human being life when you 18 it's kind
of a big change for you you graduate
high school and you'll probably go to
college so probably move away from your
home you kind of start to live on your
own so it's a big change for you and in
a sense actually be repaired 18 also
kind of reached its own level of
maturity and what I want to do is to
look at the 18 years of evolution of BGP
and just share with you some of the
lessons I personally learned from that
experience some of the lessons from the
protocol design and the expectation here
is that what I hope to get is by sharing
this lessons with you is that these
lessons may apply to other things that
you are involved in so hopefully you'll
be able to learn something from these
lessons so to not to repeat some
mistakes and also to learn some positive
things that I personally love got from
that experience if someone would ask me
to condense all my experience to a
single sentence the experience again
from working on BGP for the 18 years
that would be the sentence in fact that
probably would be the overriding design
principle that drove development of BGP
for the last 18 years that it BGP from
the beginning and until today had been
always driven by pragmatism the design
of BGP evolution of bridge
new features that had been introduced in
BGP all of this 18 years were mostly
driven by very pragmatic very practical
considerations
so let's actually look at more details
about the life of BGP over the last 18
years and to understand that we really
have to step back and look at the dates
that immediately preceded the creation
of BGP so we really have to step back a
look at the environment in late ages so
what happened in 1987 is that National
Science Foundation established a
cooperative agreement with three
partners IBM MCI and married and I
happened to work at that time in IBM
Research Center that's how I got
involved in this
so this cooperative agreement was
responsible for building and operating
what was known at that time as an ACEF
net backbone phase two and the role of
that network was to interconnect several
research and educational networks in the
United States it was fairly modest
network by today's
scale because it was fractional t1 and
number of sites that it interconnected
was just 13 12 13 s or under 20 anyway
the inter domain routing protocol that
was available at that time the only one
that was available at that time was
known as eg P - its exterior gateway
protocol - so let me just say a few
words about this protocol because that
will explain the driving forces behind
the initial creation of BGP well to
begin with this protocol wasn't exactly
routing protocol that's why I put
routing in quotes it was just a
reachability protocol and therefore it
constrained topology at the level of
autonomous system to a single spanning
tree and of course at the root of the
tree was BBN who operated ARPANET well
the other problem with this protocol is
that it was based on the notion that all
the issue bility information has to be
periodically refreshed that's how you
know that each ability information
okay and last but not least it was
writing directly over IP well so if you
look at the creation of BGP it was
created in 1989 at 1280 F many many
years ago many many years ago and it is
no actually as three napkins protocol
and you'll see the next slide why it's
called this way it was produced over
lunch so we didn't spend that much time
actually designing the protocol and it
was produced pretty much by myself and
Kirk Lockett who still works at Cisco
and we also got some help on this
original design of a large from Lanois
Zack who at that time also worked at
Cisco well
this slide actually explains why it's
called three napkins protocol we didn't
preserve the original napkins because
they were kind of stainless ketchup and
a whole bunch of other crap which you
ate over lunch but we convert this
napkin Zinta's three pieces of paper and
that actually was the whole BGP there
was nothing else to it so if you look
actually at it it's pretty much
everything you need to know this is the
packet format this is the description of
all the codes and sub codes this is the
finite state machine and here at the
bottom we'll probably hard for you to
see but this is a contact information
it has email addresses and phone numbers
and even has their working hours for
each of us well that was it so people
who write now produces like you know
hundred pages rfcs I think they should
look at this as an example what really
has to be produced well as I said it was
produced a Feb in January of 1989 and
few months later we had two
interoperable implementations one from
myself and one from Cisco and in June we
decided actually to finally documented
as an RFC that's how RFC 11:05 was born
it was BGP water gateway protocol notice
the sequence
first very short specification second
interoperable implementations last
RFC so what were the original design
goals that drove the creation of BGP
well the goals were actually extremely
modest especially by today's standards
the original goals were just to overcome
the limitations of each repeater
specifically at that point we'll view as
extremely unreasonable to constrain the
interest apology of the Internet to a
spanning tree with our phone has been as
a route it just didn't fit didn't match
the reality and that was probably the
major problem with EGP to that BGP was
intended to solve but there was other
problem with EGP to that we had to solve
and that is as the number as the volume
of reachability information started to
grow we end up in a situation where the
same stability information had to be
carried over multiple IP fragments
remember that each repeater was running
over IP and so as you got into IP
fragmentation we end up in we ended up
in a situation where some of the
fragments could be lost and as a result
and we just had a very severe routing
flaps in the network because there was
no reliable transmission of reachability
information in terms of scalability the
goals were a fairly modest it just to
support a few thousand classful IP v4
routes that was it nobody was aiming at
ten thousand hundred thousand million
routes it was like who would even think
about it so just a few thousand and the
scope of it was also very limited we
just want to deploy it in NSFNET
backbone from the beginning it wasn't
positioned as a long term solution that
is going to solve all problem for people
not at all
it was viewed as some people call it
hack some people call it short term
solution I guess it's polite name for a
hack and that's how it was positioned
well actually if you look at the key
ideas behind BGP it's not that many is
very few and it's pretty simple pretty
obvious ideas and they kind of were
really nicely packaged together that's
what it's all about
so the first idea was that if you want
to really have an inter atomic system
routing protocol not perishability
protocol but routing protocol then you
have to have some way to suppress route
information low bein well the way how a
BGP addressed this problem is by
carrying the sequence of autonomous
system numbers that a routing
information traverses and that's how you
suppress a route information Lewton by
suppressing route information looking
and a side effect bgp also suppresses
looking of the packets in a data plane
the second idea was also kind of pretty
obvious instead of periodically
refreshing the full set of routing
information you just send changes to the
routing information so you use technique
of incremental updates so the big deal
because you use technique of incremental
updates the BJP had to have some sort of
a reliable transport and in this
particular case myself and Kirk Lockheed
said well we're clearly not experts in
the transfer protocols and we don't have
time to design new transport we don't
have desire to design new transporters
by the way tcp/ip stack already has a
reliable transport it's known in TCP as
TCP so what's the big deal let's just
use it it may not be perfect but well
it's probably good enough now from the
beginning
BJP had been known to attract a whole
bunch of controversies so the fact that
controversy still exists as today is
nothing new it's been there since day
one well let me just mention a couple of
fairly controversial subjects that BGP
attracted from the beginning one thing
which people argue against BGP is that
BGP didn't support arbitrary routing
policies well the way how myself and
Kirk address this problem is very simple
we said look it's absolutely true guys
what you're saying and that's okay
because what we have is a hack we have a
short-term solution you guys want to
work
long-term solution that addresses all
the problems that's great go ahead do it
we just have a short-term problem to
solve we'll just deploy it here and
later on when you'll be ready because
long-term solution that solves all the
problems for the peoples you'll do it
though the second controversy attached
to bgp was that the GP decided to use
TCP as a transport
well at that point some of the people
who claimed to be quote internet
architects start to argue against it
because they said it violates certain
architectural principles of the internet
well mine to tell you they never able to
point to us the specific principles
where they document that we've never
seen them but there was a claim it
violates the principles well
the way how we address this race simply
said look we just have to be practical
because we have a time line to deploy
the stuff it was a real operational
network we cannot be bogged down into
this nebulous architectural principles
again long-term solutions will wouldn't
violate any architectural principles
you'll be just perfect it's just short
hack so now they just move forward and
look at the evolution of BGP from its
beginning from its creation over the
next couple of years it's actually as
you'll see we managed to go from version
1 to 2 to 3 at almost like every year or
every other year timeframe so what
happened in BGP - well it was produced
one here from BGP one what did we change
well the most important thing is that we
change the encoding and the reason why
you changed encoding is because we
realized that BGP even if it's a short
term solution and even shock
it'll probably going to stay with us for
a fairly long time and therefore we have
to make BGP fairly extensible as a
result what we did is we decided to
create all the routing information as a
collection of attributes
moro we realized that as protocol
evolves as its functionality vols
some of those attributes may be
necessary in all the cases some of the
attributes may not be necessary in all
the cases so we classified attributes as
mandatory and as optional and of course
to make it extensible
encoded attributes as a variable lens
field type lens value which was also
kind of a fairly new concept at that
point in a tcp/ip protocol stack which
was very heavy kind of oriented towards
fixed lens field
well we eliminated one of the features
which discovered to be useless and which
was present in BGP valves so we see
right now one year from experience we
just prune feature which is useless well
the new feature authentication
well mind to tell you later on we
discover that this feature turned out to
be useless store well we got rid of it
as well later now one more year and we
have yet another version of bgp bgp
three well there was a little bit of
optimization with respect to exchange of
information about a previously reachable
route and then we also held another
mechanism that would restrict a pair of
BGP speakers to the single BGP session
well it's probably probably this
mechanism in retrospect wasn't such a
great idea it was a mistake in fact in
retrospect so what we doing right now
there is a work in progress to allow
multiple bgp sessions between a pair of
BGP speakers one more year 1992 BGP for
that is really a very much major
milestone in the life of BGP
and the reason why I'm saying this is
because it's BGP for that moved Internet
address in architecture from the motion
of classful addresses two classes inter
domain routing on a cider I don't know
what you guys are fairly young here but
those of you who have been around this
area for long enough time may remember
days where there was Class A networks
Class B networks and Class C networks
well nobody knows about knows about such
things today but they did exist at that
point and what cider did is said look
it's really stupid to have different
classes of networks these are all
address prefixes and different blocks of
address that's all what it's about and
it really had a profound impact on the
internet because it's precisely cider
and BGP for that enable bit internet
scale to what we know
as internet today well in terms of the
protocol itself it actually didn't
require that many changes the only thing
we changed is how we encode reachability
information in BGP one two and three a
reachability information was encoded as
a collection of Class A networks Class B
networks and Class C networks
well since insider you don't have it
even called reachability information
just as variable and prefixes notice
again it was widely deployed in the
internet around 93 and about couple
years later after it was very deployed
it got even published as never seen
again lot is the pattern for
specification then deployment then RFC
which is very different from the
sequence of events we witnessed today in
the internet now let's move forward and
look at the life of BGP in mid-90s and
clearly I'm not going to cover all of
the things that happen in BGP in mid-90s
I just want to focus on two particular
developments one is replacement for ibgp
mesh and second route filtering well to
understand the ibgp mesh replacement we
have to go back to the original design
of bgp bgp prior to ibgp mesh
replacement had to distribute route
information both in its own autonomous
system and across autonomous system
borders and so everything it's all
autonomous system the way how BGP 1 2 &amp;amp;
3 was designed was very simple
essentially you have to establish bgp
sessions with all of the border routers
within its own autonomous system and it
was done for very simple reason it was
pragmatic it was expedient it was really
simple to implement and I cannot test it
because I implemented myself well and
this mesh actually wasn't really a big
practical problem from the beginning
because the internet was small because
all of the ASA's were fairly small we
recognized this could be a potential
problem from the from the beginning we
knew it from David Howe however we
decided to kind of to put this problem
on the shelf to see when it will become
a real pro
well it will be it became a real problem
in mid 90s for very simple reason
because you had more widespread
deployment of BGP
and because the growth of the Internet
each autonomous system started to get
bigger and bigger
so this ibgp measures started to get big
and big as well well midnight is
produced not one but two replacements
for ibgp measures one was known as BGP
Confederations and second as BGP route
reflectors the BGP Confederations he is
a very simple approach it follows the
divide and conquer strategy where you
take your autonomous system and you chop
it into several sub autonomous system
sub races and then you have measures
within only each its sub areas but not
across subway as boundaries pretty
straightforward a BGP route reflection
is a different approach because in
effect it replaces this notion of full
mesh ibgp with carbon spoke topology you
may ask me a question whether both of
this very needed at that time and here
is not knowing it's a water under the
bridge it just happened that both of
them very developed at about the same
time keep in mind both of them actually
solved exactly solve exactly the same
problem you may also ask me do we still
need both of them today well for that I
can tell you the answer is yes for very
simple reason because both of them are
deployed today and for an isp who uses
route reflection there is very little if
no incentive to transition to BGP
confess and vice-versa for an isp who
deploys BGP confess today there's little
incentive to transition to route
reflections so it's kind of for whatever
reason just because they were created
both at about the same time we just now
have to live as boss and probably will
live with both for very long time as
well
now let me talk about second area that
happens second area of development of
BGP that happened in mid 90s that is
improved route fields of him which is
also actually a very important from a
conceptual from functionality point of
view yet from implementation point of
view it was pretty simple now you have
to keep in mind that the ability to
constrain distribution of routing
information is one of the key
requirements for any intruder main any
internet alarm system routing protocol
which means it's also a key requirement
for BGP well the way how it was
originally done is filtering was done
based on address prefixes and it was
really complicated and very kind of
labor intensive in terms of
configuration so mid-90s introduced the
concept of bgp community
well what bgp community does effectively
it allows us to mark a collection of
arbitrary routes with a single marker
and then use this marker for the purpose
of route filtering what was interesting
about this mechanism is that first of
all it's a fairly general mechanism
because as I said you can mark our v3
set of routes with a common marker and
once you mark them you could filter
based on that marker what is also
interesting about this mechanism is that
community space from the beginning was
partitioned into two parts
Val that has global semantics which is
known as well-known communities and one
that has local semantics which each
autonomous system could assign all its
own and attach it's all semantics to it
and actually it turned out to be very
useful because it gives some ability to
have globally consistent behavior on
certain communities for well-known
communities but it also allows each ISP
on its own to create its own policies
without going and getting agreement from
the rest of the universe
well let's move forward and let's look
at the evolution of BGP
in late 90s and again I'm not going to
cover all of the things that happen in
BGP during this time frame I'm just
going to talk about three particular
areas authentication multi-protocol and
capability advertisement
so let's start with authentication well
when I talked about early days of BGP I
mentioned bid repeat to introduce this
notion of authentication by using the
marker field if you ask me why did we do
it I can give you a very honest answer
because iesg and IAB at that time said
that you have to have a syndication and
we asked them what do we need to do
authentication I said well put this 16
bytes marker fill this as sure no
problem
well of course reality showed that this
is totally useless well to begin with
actually it was useless for two things
first of all it was underspecified well
if it's under specified clearly cannot
be implemented by multiple vendors
so it wasn't implemented to begin with
but even let's say for the sake of
argument we would food is specified and
let's say for the sake of argument the
vendors would implement that it really
had a fairly fundamental problem this
idea because what we've been trying to
do with this you've been trying to
authenticate BGP and that's really great
except that you missed a big hole which
sits underneath BGP which is TCP so you
can authenticate BGP as much as you like
but if somebody will attack TCP
underneath your BGP authentication does
nothing well so what we really what we
realize at that point is that we really
should be authenticated not BGP but TCP
that's what should be authenticated and
so what late 90s produced is known today
as TCP md5 authentication it's pretty
straightforward thing you just
authenticate CP connections well as a
side effect because you are sending a
TCP connections and because BGP runs
directly over TCP
you authenticate bgp connections as well
so it's pretty straightforward kind of
pretty obvious in fact it's been
implemented by many vendors for many
years yet if you look at today's
deployment it's still fairly limited and
of course you can ask the question why
I'll talk about it later when I'll talk
about secure in BGP let me talk about
second development that happened second
major development that happened in BGP
in late 90s and as
the multi-protocol extensions began to
understand motivations for that
particular development we have to step
back in time and look at the situation
in Prior to late 90s well remember that
from the beginning BGP was designed as
IP version 4 routing protocol and that's
all was all fine except that in mid late
90s internet introduced yet another
version of IP known as IP version 6 well
if you really serious IP version 6 you
really have to have not just
intra-domain but also inter domain
routing protocol IP version 6 so at that
point the ITF people and IPS asked how
you're going to have entered the main
route in 5p version 6 it was a valid
question another valid question that was
asked at that point is that if you have
unicast multicast at the interval main
level and you don't want the two to be
completely congruent then how would the
extra accomplish this add the inter
domain level well at that point we had
two options on the table the first
option was to take what is called as
inter domain routing protocol type which
he was developed in eisah
and from functional point of view it's a
multi four it was multi-protocol on day
one and it actually was a functional
superset of BGP four so that was one
option the second option was just take
BGP for and extend it so let's see how
this options had been played out well
the choice was to go over the second
option for a variety of reasons and all
of them were good in fact well so let's
look at some of the reasons why the
choice was made to extend BGP a rather
than to implement and deploy a drape
well we knew it was it was pretty much
obvious to us that from the
functionality point of view BGP
didn't have and still doesn't have as
many features as I dream and we knew it
from very simple isn't because I've been
very much involved in the development
and design of I trip as well so I knew
it by myself
but at the same time we also knew that
from an implementation point of view the
additional incremental efforts of
implementing of extending BGP would be
much less
and what it would take to implement ID
from scratch also even if I trip for a
huge functional superset of BGP it
wasn't clear at that time and in
retrospect actually it's still not clear
even now whether all of the features
that help in present I jib would ever be
needed in practice remember I trip was
designed in OSI standards and you know
aside people here like to think big like
to think about long term like to predict
the future and of course they all have
crystal balls so again it was a fairly
pragmatic way of addressing the problem
you solve what has to be what had to be
solved and that's it but what we did is
we said well we really have to solve the
problems I mentioned on the previous
slides but where does not just focus on
a point solution let's just solve them
in a fairly general fashion and that's
exactly what we did well the way how we
address this is by introducing
multi-protocol extensions where you
should be able to clearly address
information associated with a variety of
network layer protocols and initial
focus of all was on IP version 4 IP
version 6 and probably OSI that was the
initial focus the implication actually
of doing this we didn't anticipate all
the implications of doing this and
probably we still don't understand all
the implications of doing this but the
implications are enormous and I'll talk
about it later on the most important
part actually of doing this is it
enables bid repeat to be used as a
protocol for extremely wide variety of
applications and I'll talk about some of
the applications of BGP that BGP is used
today for
now let me talk about yet another
development that happened in late 90s in
BGP and netis capability advertisements
and again to understand the motivations
for this particular development we have
to step back and look at propriety
stirry well the question you may ask is
that as you introduce new features in
BGP how would a router find out what its
neighbor is capable of well in
traditional protocol design there is a
well-known textbook approach to deal
with this it's called the version number
and in fact this textbook approach had
been used by BGP from the beginning
until we hit BGP version 4 we had
version 1 2 3 &amp;amp; 4 and it's kind of a que
except that we realized that if you have
whole bunch of independent features then
this approach isn't going to work at all
for very simple reason because if you
have n independent features and you want
to advertise a particular subset of
these features that you support then it
would require probably 2 to the power of
n different version numbers so the
version number field to begin with
probably is going to be very large and
it probably wouldn't make any sense to
figure out actually what are you doing
so that actually led to the development
of what is known as capability
advertisements the idea again is very
simple so instead of mapping a
particular set of features to a given
number and call it protocol version
number we just advertise support for
individual features in a capabilities
advertisement we advertise it at the
session establishment time what it does
it provides us a much more flexible and
in fact much more explicit and direct
way of introducing new features so the
first new feature that actually used
this capability extension was the BGP
multi-protocol extensions but there had
been a whole bunch of other features
that uses capability and it's precisely
because of this feature precisely of BGP
capability advertisements that today
more than 10 years since BGP for in fact
almost 13 years from Ridgid before we
still have exactly the same version
despite the fact that BGP as we know of
today he has a whole bunch more stuff
than the original BGP for
so let's move forward and look at late
90s beginnings of the 21st century and
let's look at new applications of BGP as
I mentioned the introduction of
multi-protocol capabilities one side
effect of it was that BGP started to be
used by applications that pretty much
have nothing to do with the Internet the
first one was bJP MP recipients long
usually as 25:47 VPNs it was introduced
in 1998 that was followed by auto
discovery for VPNs in 2000 and followed
by BGP based virtual private LAN
services we pls 2 years later all this
had been made possible by a Val sync
actually by two things it's a
combination of multi-protocol extensions
and capability adverseness and of course
actually we shouldn't underestimate all
the previous work that had been put into
bgp because all of these applications we
used all the previous extensions of BGP
as is pretty much what is interesting
about this development is that these
developments extended reachability
information carried by BGP well beyond
traditional IP reachability information
well beyond ipv4 ipv6 address prefixes
and this stuff generated so much
controversy you wouldn't believe it
people really got very emotional you
would if you would look at some of the
emails that had been floating around and
still kind of floats around about the
stuff it's just incredible how emotional
people got about it so let's look at
some of the controversy well some of the
arguments against doing all of this was
based on a claim that BGP shouldn't be
used by such applications as 25:47 VPNs
VPLS etc why well the claim was because
BGP wasn't designed to support the
supplications I would be first to admit
it's a true statement it's absolutely
true that BGP was not designed to
support this applications in fact when
BGP was designed we didn't even know
what the supplications are well but if
you look at this argument
then I could also make an argument
saying that in the beginning BJP wasn't
designed to support cider it wasn't
designed to support 200 plus K routes in
the interval it supports today it was
designed to support just a few thousands
of plus four routes it wasn't designed
to support ipv6 and you know this list
could continue on and on and on so
clearly look guys this is totally bogus
argument what really matters is not what
BGP was designed for what really matters
is what BGP can do in a cost-effective
manner that's what really matters
well the second argument in this
controversy was that BGP shouldn't be
used by applications that require to
Kira quote non route information again
why well because BGP was designed to
carry on to route information well so
based on this argument people say well
you can use BGP or ipv6 that's okay
because it's routed information but you
certainly shouldn't use BGP for such
thing as virtual private LAN service
because in this case BGP carries non
routes in information well to begin with
in this kind of argument the first
question you should ask is what is
exactly quote route information which
you know and I was able to ever stem
able to get straight answer to that
question but again look it's totally
bogus argument again it's a dogma why do
you care whether information is routed
or not what really matters from a
practical point of view is whether it's
a good or bad fit between the
requirements for the distributed
information and what BGP can do and if
requirements for the distribution of
information could be reasonably met by
BGP let's go ahead and do it and if it
couldn't be made by BGP it really
doesn't matter well it's routing along
route information BGP is not a good tool
for that
well another argument that was made
against using bit before all this non
Internet related applications is they
said well it gets more and more complex
to implement BGP it's a true statement I
will be the first to admit it again
however let's just face few very simple
facts
if there is a market demand for a
particular functionality then believe me
router vendors are going to supply it
because we live in the market driven
economy there's no magic for that so
this functionality will be implemented
no matter what the one choice in the
table is that whether you're going to
implement this functionality by
extending BGP or by inventing a
brand-new set new protocol well and if
you look at it from a system by its
perspective actually extending BGP makes
much more sense than inventing new
protocols because from the overall point
of view system gets less complex again
keep in mind as long as this new
functionality matches reasonably well
what is already provided by BGP and look
yes you do make system more complex but
overall if you look at this two options
one extending BGP and second inventing
new protocols you will realized that the
overall system complexity is going to be
less with the first option than with the
second well another argument had been
made against extending BGP in support of
new applications is they said well
you're impacting adversely impacting the
overall router software reliability why
well because you're creating software
bugs and in extensions and if I'm an ISP
and all I care about is ipv4 routing and
you write this extension to support
25:47 VPNs and you have a bug there well
you may crush my internet service well
it's kind of also dubious argument
because first of all if you want to add
new functionality to a router you may
introduce bugs no matter what and they
could crush a box so what you really
have to look is how much more you have
to add to a router how much what
software you have to router well you
have to remember it's a basic software
engineering then more protocols means
more lines of code and what is very
important is that the number of bugs
you're going to introduce tends to be
proportional to the lamp so the number
of lines of code you have to add to the
system so actually by extending the BGP
you are going to be actually
use the number of bugs relative to the
other option the option of inventing and
implementing a brand-new set of
protocols and the last but not least
look there is no magic and we have to
remember that in the end what really
matters is a competent system design and
a competent software engineering that's
what really matters and if you have good
system design and good software
engineering then in fact you could avoid
problems I mentioned here in this slide
so now let's move to another topic which
is also somewhat controversial and that
has to be secured in BGP and you know we
all like to talk about security in
various dimensions apply to various
subjects and clearly BGP is by no means
an exception so people like to talk
about security in BGP when we talk about
security in BGP I think the first
question we have to answer is what
exactly we trying to secure what
problems are we trying to solve and this
answer has actually multiple questions
at the most basic level all you have to
do is to authenticate the peer well as I
said that hit that had been implemented
a while ago known as TCP 5 a TCP md5
authentication and as I also mentioned
it still has a very limited deployment
there are two other proposals on the
table that had been floating for a
fairly long period of time one is known
as secure origin BGP as a BGP no
deployment despite the fact that it's
been around for probably four or five
years or even more and the second is
even a superset of the first of the
second the third one is a superset of
the second values that you authenticate
not just the originator but the whole a
is path that has been traversed by the
route information that is known as
secure B GPS BGP again had been around
for quite some time and again just like
the previous one no deployment
whatsoever and you should ask yourself
why and I think there is a very simple
reason for this you have to look at the
cost and you have to look at the
benefits you have to look at who is
going to bear the cost you have to look
at who is going to reap the benefits
look if cost-benefit analysis doesn't
justify deployment it doesn't matter how
great it is it wouldn't get deployed if
those who bear the cost a lot those who
reap the benefits it will never get
deployed you also have to ask can they
be deployed in incremental fashion
because if you require the whole
internet to deploy a particular
technology before anyone could start to
reap any benefits you clearly setting
yourself up to absolutely unreasonable
goal also even if it could be deployed
in incremental fashion you really have
to be able to start reaping at least
some of the benefits in a partial
deployment you cannot sit and wait till
everybody deploys it until you start to
get benefits and last but not least we
really have to keep in mind that
Internet today is composed of business
is peace and this business is peace do
compete with each other and therefore
the interest interest of individual
aspies may not always be well aligned
with each other so now let me just say a
few words about some of the fairly
recent enhancements of BGP and again I
am NOT going to go through all of the
areas of recent bgp development I am
just going to focus actually on just two
more router just one actually router
target constraints well to understand
this particular enhancement around
target constraints we have to remember
that one of the main goal of BGP is
actually to distribute routing
information but also to constrain
distribution of routing information and
I talked about how communities had been
used to tag route information and then
use route filtering to constrain
distribution of route information prior
to our target constrains actually this
route filters themselves were
constructed via
configurations on the routers so if you
want to filter a particular set of Rods
you've tagged this route via
configuration with the particular
community and then in the configuration
you specify that all the routes that
have a particular community should be
filtered
well what route target constraint
introduces is that it uses BGP for the
purpose of distributing these filters
themselves so in a sense actually you
may think about route target constraints
as a recursive use of BGP it's actually
made you may think about it as a pretty
straightforward idea but from a
conceptual point of view again it's a
very major milestone in the development
of BGP because it creates recursive use
of the same protocol and I don't think
you'll find any analogy to this in any
other of the routing protocols you stay
in the Internet so in the conclusion I
guess all this 18 years one of the
important lessons we learn is that the
evaluation by trial and error is just
fine you shouldn't be afraid to
introduce new features don't get excited
about it it's all fine and it shouldn't
debate whether the new feature is useful
or not you'll never find it out you
should test use operational experience
to determine whether a feature is useful
or not because look you can debate until
you turn blue in the face it's not going
to get you anywhere and if the
operational experience tells us that the
fish is useless that's ok cut the losses
get rid of it so what is important if
you have this in mind is that you have
to design protocol from day one that
could easy facilitate addition or
division of features that's what you
really have to focus on not on debating
whether fish is useful or not well
another important lesson we learn about
BGP is notion of in time development
we're not gonna focus it and anticipate
all problems that are going to happen 10
20 X number of years from now we focus
all the short-term problems problems
that we face today are going to face
like two or three years from now and
solving this problem in real time with
emphasis on solid engineering so as a
result if you don't spend too much time
on solving quote anticipated future
potential problems because look the list
of these problems is unbounded so as a
result you can spend unbounded amount of
time just worrying about this problems
and if you have this model of operations
what they really have to focus on you
really have to maximize the use of the
existing mechanisms if you really want
to have just-in-time development and the
way to do it is to make new mechanisms
sufficiently general let's step number
one and to pretty much be satisfied we
is good enough match between what is
required and the existing mechanisms
don't aim at the perfect match perfect
match doesn't exist be happy with good
enough match well finally let me just
say that one thing we learned from BGP
and actually learning from other
technologies I've been working on as
well is that short term solutions tend
to stay for a very long time and long
term solutions tend to never happen it
just the fact of life and we just have
to live with this another important
lesson to learn from I learned from BGP
is that good enough solutions are just
fine you don't have to work look for a
perfect match perfect solutions a lot
necessary and again you're going to
waste a lot of time perfecting your
solution and you probably miss the
market I personally don't believe in
crystal ball I don't have crystal ball
when people ask me to predict the future
my ask them is that I'm not a prophet
and with this in mind I think it will be
much better off to addressing the needs
of a market by focusing on technology
that is flexible and extendable rather
than by trying to stare at this crystal
ball and predict the future and last but
not least development of BGP certainly
teaches us that we shouldn't be afraid
at all
the question and violate if necessary
any dogmas even if this dogmas are
wrapped into the squat architectural
principles and let me just repeat what I
said at the beginning there was one and
there's still one overriding design
principle behind BGP and that is
pragmatism it stayed with up for 18
years it's all it served us really well
and I just hope it'll stay with us again
and at the end of my talk any questions
okay I'm going to repeat this question
because I've been asked to repeat this
for the benefits who are on a video so
the question was whether we are going to
introduce multiple decision sequences in
BGP because I guess the claim is that
BGP right now is fairly inflexible in
terms of decision sequences let me ask
before I ask your question I have to ask
you a question
what exactly do you mean by multiple
decision sequences right so the answer
to my question was that BJP has right
now kind of a fairly well-defined around
selection process and the question is
whether we could modify this route
selection process well the route
selection process is fairly fixed but
you have to keep in mind that as part of
the selection process you have field
known as local preference and the router
could set local preference to whatever
number it likes so it's a purely local
decision and that gives you all the
flexibility in terms of altering outcome
of the route selection process so the
machinery is there whether you use it or
not well it's your local choice any
other questions
back in 1990 probably 95 or so when
Confederations were starting to get
deployed we had a global event where
someone leaked Confederation details
into the global internet and all of us
who ran gate D at the time want up
having our BGP sessions flat because
Gate DS implementation didn't understand
the a s set and a a sequence elements of
the a s path attribute I'm curious how
that event fed back into the protocol
design process if at all
well actually BGP deployment during its
lifetime witnessed several kind of big
meltdowns so that was one of them I
remember quite well another meltdown
when it actually it wasn't the fault of
BGP but it was to a meltdown when people
redistribute BGP routes into AGP it
happened in several IPs and it just
melted down completely
look the example is actually the first
and the second example are the cases of
Miss configuration leaking was because
of msconfig and so is redistribution was
due to msconfig BGP can build only that
much protection I guess it's again it's
a cost-benefit analysis and look you can
protect against your own mistakes only
that far you're not gonna get
bulletproof protocol
I'm sure today you can probably melt
down something in the protocol as well
if you don't do it what BGP does have is
this notion of well-known vs. optional
attributes and so if for example can
that stuff would be encoded with
optional attributes it probably wouldn't
cause gezi meltdown but again it's what
are the breach at this point yes
gbemi by authentication seems to me the
criteria provide incremental benefits
why is it not widely deployed today the
question was that TCP md5 gives the
incremental benefits and why's that well
divided deployed today you know I have
exactly the same question as the other
and I don't have a good answer to the
question I guess my us this is
cost-benefit I speed look at cost look
at the benefits mo not vs. probably I
remember all the does it protects you
against certain attacks at TCP level
probably there is not enough of these
attacks to justify the cost of
deployment
it will all be more attacks probably I
spears would pay more attention this
technology because from a deployment
point of view it's not that hard
there is nothing related to this is that
the original TCP md5 design didn't have
any mechanism to facilitate change in
keys okay so if you want to change keys
you pretty much have to coordinate with
your neighboring ISPs change the key
there is a work going on right now done
by both Cisco and juniper that allows
the support the keychain that we're
deficit AIT's a lot this issue of
changing keys whether that would make a
big difference
well if you have a crystal ball I'm sure
you'll tell me I don't yes
the question is what's the impact of TTL
as the quote pack to do authentication
well it keeps you data syndication only
and the interests batteries it still
doesn't help you for the ibgp sessions
look again you can do it but again look
at the cost look at the benefits yes yes
the question was about recursive
protocol usage and the question was
about using bgp to provide reachability
information to resolve the next Cup
which is carried by some of the BGP well
in fact actually that's been done for
very long relatively long time
that's how 25:47 works and it's been
deployed and it works just fine so it's
a perfectly fine idea the motion of
actually ultimate BGP introduced is the
notion of recursive next cup resolution
because the next cup you carry in BGP
especially in ibgp
is not something which you can reach
directly it's address of some other s
beers in the network and you have to
resolve that next cup into your
immediate next hub and you could
recursive one more time and say well the
next cup which you can invite BGP is
actually may not be directly reachable
even via AGP so I have to look into my
BGP to resolve my next hop it's perfect
providing to them Nana said it's been
deployed
so it seems to me that the fundamental
limitation although in BGP is being
extended many times is the fact that
every roots of chooses its best fruit
and it's only allowed to announce that
best true
so effectively information gets lost I
realize this is one of the reasons why
BGP scales so well in today's internet
but effectively were throwing
information away that if we kept that
information it wouldn't able us perhaps
to make better routing decisions so do
you think BGP can be extended in the
sense so you think that the limitation
is so fundamental that we would require
another protocol to do this I have to
repeat the question well well let me
start answering this question from the
back and that is BGP certainly could be
extended to carry additional routes and
in fact there had been several proposals
had been floating around for a fairly
long time probably like five or six
years to carry additional rows multiple
routes in BGP
but as you said yourself there's no such
thing as free lunch and as a price of
carrying additional routes you also have
more resource consumption and I guess
ice please look at it and the trade-off
was not in favor of K in more routes the
trade-off was in favor of carried less
routes even if it limits your choices
so in principle it's possible it could
be done in practice together cost
benefit yes
sure assign local preference based on
bandwidth funny
see the question was whether it's
possible to prefer routes based on
bandwidth let me tell you something that
days an existing implementation that
actually prefers routes based on
bandwidth
it's a 25:47 case and the case actually
is very simple when you have a site
which is multi-home to a service
provider and it has different capacity
links one let's say you know t3 another
is backup multiple to valence band of
Javad so this BGP extended community
that's called ding bandwidth and in case
this case throughout the season takes
into account among other things link
bandwidth so I have an existence prove
that yes it is possible because it's
been implemented and deployed
go sorry there are some intention by
internet regional registries to start
assigning for the essence and original
DGP specification is limited to the
decimals in fact some of you general
internet registries already assigning
4-bit iessons while protocol is still
not extended and what do you think about
this situation
well actually the statement of protocol
still not been extended to support for
by its essence is not correct days I
know that internet draft and I think
it's already published this RFC's that
supports four bytes AAS numbers and in
fact I know that it's been implemented
by read-back for quite some time I know
that juniper doesn't have it yet I don't
know the Sisk implemented but Rocco had
been extended to support four bytes a s
numbers okay thank you
final question sure more questions ok
guys thank you very much for inviting me
here
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>