<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Exporting 3D Scenes from Maya to WebGL Using Clang and LLVM | Coder Coacher - Coaching Coders</title><meta content="Exporting 3D Scenes from Maya to WebGL Using Clang and LLVM - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/GoogleTechTalks/">GoogleTechTalks</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Exporting 3D Scenes from Maya to WebGL Using Clang and LLVM</b></h2><h5 class="post__date">2011-11-29</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Ek-SkrGVyjY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so good morning I have the pleasure to
introduce johann wilhelm ii johan is a
longtime member of the demo scene and is
the author of inca 3d which is 80 Maya
to WebGL exporter and that's what he
will be presenting today as in hello as
my name is Johan will hear me and I
today talk about exporting 3d scenes
from Maya to web gear using clang and
llvm which is an open source compiler
framework but ok i'm going to talk about
as first what is that really a short
introduction to a betrayer was also
don't know it yet and some prints
principles of illumination how to render
scenes that LOL that are looking good
and then the Inca 3d Maya to Vecchia
exporter there I give some examples and
a bit of technical how it works and in
the end we will see a WebGL EDM oh good
what is that really it's a OpenGL for
the vaporizer it's like light new was
finished finished in March of 2011 and
you are you can program it in using
javascript and yeah it's late legacy
free and restrict it was necessary it
means and it has no fixed function
pipeline any more like the old opengl
enter it can render using directs on
windows using angle which was a project
by google and miss almost native
graphics layer engine and bill which
translates the retakes cause and chide
us to opengl into glsl so
that was also were not so farmed with
computer graphics some principles of
illumination them this is a flat shading
using the Lambert illumination model
here you'll see that there are some this
sphere is made of some some polygons and
because of the flat shading you clearly
see the polygons and that was a quite
low resolution of the polygon mesh now
the goal is to improve the lighting make
the sphere look more realistically
without adding any new thought adding
any new polygons so the first step is
using the functioning and still lumbia
illumination as a functioning is an
interpolation principle that makes look
the the polygons smooth even so if they
are still if let the model has still
flat surfaces and that's why you can see
this on the outline of this feel it's
still like and still has corners but the
lighting looks more smooth was the next
episode I still functioning enter Fong
illumination which adds a specular
highlight which makes it look more
realistic but still like plastic and to
them so the next thing is the texture
mapping and the texture mapping is a
technique of a bio they were wrap an
image around to the sphere so that it
gets some the surface structure but it
still looks very clean and artificial
because the lighting does not match the
the bumpiness of the
texture winter for this tangled space
normal mapping is introduced which
modifies the lighting per pixel using a
norm in it now it's combining the
texture mapping in the tank in space
normal mapping we get this appearance
interim this already looks quite
realistic because there's still more
room for improvements but whether this
is our last example for the introduction
of lighting now and now i can show you
some examples of what to do with inca 3d
by a collector elx porter interim the
motivation of it as the motivation is
owned the artists have their favorite
tools for example autodesk max and maya
or soft dommage and i'd like to do to
support them directly instead of writing
an own tool so many game engines for
example have an own editor but here the
goal is to use the existing tools
directly an airport of course we want to
have every attribute and it may table
for example position rotation scale or
the diffuse and specular color of the
shader and all these attributes have to
be changeable over time then the way in
the example of Maya they're embedded
scripting language code mail and this of
course is a useful tool which could be
supported in a vertex deformation for
character animation or shading networks
and particular systems or features
which are already in the existing tools
into them that's why the question by not
supporting them directly and but this is
not an easy task in this this task I try
to solve with a compiler based approach
where these features are translated to
code and set of data then the history of
the project started in about 2005
there's a first idea of compiler based
engine but compiler technology is quite
an complicated topics it's y Padre came
to a halt but 2008 or on a demo scene
party someone someone recommended me
llvm then and then I restarted it this
llvm in mind and already on the next
demo seen partying in 2009 I had her
first working version for OpenGL ends CG
effects from Nvidia but I replace C 3 of
X then used glsl instead because for
example on mobile platforms there's no
see G of X support interim 2011 the
battery area also was added because of
this compiler based principally it only
talks a few months to a support letter L
starting from the OpenGL toward them
know some examples as I'm not an artist
so the only only shows some technical
aspects you know you know for example
after bouncing amiga boy this is
controlled by a male expression the can
make some 22 d effects by the texture
displacement so it's a one texture
controls the displacement of another
text style
the the offset of the UV coordinates are
controlled by another texture and then
we can do with the projective light
sources the spotlight that projects a
check of our texture into the scene then
also things like brushed metal are
possible using an anisotropic shader
here the direction of N is a chopper is
modified using your text from it so the
circular patterns are produced and also
deformation is possible where the vertex
the position of the vertices are
modified and this vertex de forma is
compiled into the GLS educator into them
these are very new futures is a picking
feature so we can use the mouse and and
determine the object that is under the
mouse and then using this to a change
and attribute also in this case the the
incandescence of the data is set to read
and this works by by rendering the
object ids in interval into a frame
buffer and then it's a position of the
mouse we read back the pixel and this
holds also object idea um so that's why
it's quite fast even on JavaScript and
bacteria the interim the character
animation is also possible so now I'm so
question how does it work the blood flow
over viewers it is directly goes from
wire into battery and other
the portraits are reading FBX or colada
but these are my blog floor only used to
transfer between other tools and not to
the engines for supporting 3ds max would
mean writing in you a spotter for 3dsmax
because this way more features can be
exported for example Trading Networks a
fix in colada don't support rating
networks of Mariah so I can ensure how
it works in the whole actually works
maybe F is a bouncing ball and those are
our bouncing ball in Maya then this is
simply learn simply a male expression
that is or expressions that modifies
translate if the translate y and
translate X are a set of this fear as
well know for example you can we can
modify the height the height of the
bouncing and I was like this into them
we can export it to them no reload that
we have the bouncy ball like this and
then for example we can also change the
the color for example the the ball
starts in in black and if it's this side
it has to be for example right
now we see that the color attribute of
the shadows I animated and no we can
export it again and now it paid from
from black to read into them it's always
a possibility to for example set a
texture map looking over to you smile to
preview it notes at the ball is as green
grass on it and I've been exported again
and no one has green grass on it then
and so it's and in a classic the new
classic the implementation you would do
it like this in in custom quote you look
up the north of the transform node of
the ball then calculates a position and
that it again and in your si mafioso
transform node it holds the vision
rotation scale attributes and calculates
bird metrics from it there's note you
have to find for example using its name
or whatever and it in a compiler based
implementation and and of course in my
eyes I'm also learn done like this we
have heard dependency graph and an
expression note that gets the time as an
input and and calculates the position
and outputs the result of the position
also transform node this can be here in
the can be seen here in the hypergraph
yes sir the time then this goes to this
expression that calculates the position
and he ugh the the output of the
expression is connected to translate X
and translate y of the peace fear term
and its dependence regrow graph jennifer
is consisted of north and every note as
attributes you can connect these
attributes arbitrarily and a loop-free
dependency graph can be transformed to
an sequential code those are the
pipeline of the exported works like this
first the dependency graph this exported
then this is translated to a C++ port
and the last step this is compiled to
JavaScript and glsl using clinger and
llvm term the first step I showed you on
Maya the time connected to other
expression in this connected to the
position of the sphere by the seven
second step looks like this you have the
expression note that calculates the
position and then the transform node of
peace fear calculates the matrix form
from its position rotation scale inputs
into them the last step is like a clang
and la bien and lav em is also split you
used to split up the code between
javascript and GLS area but it also
scene graph is of course executed
completely in JavaScript but but so
jealous if to be split up between GPU
and cpu processor material program which
is of course my own invention there's no
material program on a tree view but the
tests will be done on the cpu and a
transform program that calculates the
transformation of the for example you
have your free materials in the scene
and and android objects then of course
we have more transforms then materials
and
what's as well as also the the Cubs egg
situation current for example for
typical senior for one to ten materials
in the scene and but if you have many
objects using the same material you can
have example 10 to 1 sours and transform
nodes and that's why this distinction is
made between materials transformed
forger program and these two programs
then transfer the output into the GPU
and the vertex shader for example you
have 1000 to 100 hours into the vertices
in your in your scene and 1 million to
one hundred million pixels in your scene
which are calculated in the pixel shader
for example if you have if you have over
draw for example 10 trees standing
behind to each other then then you paint
each pixel more than once so the pixel
shader can be executed more than once
per pixel that's why you can have up to
100 million pixels events that have to
be calculated in term but you here also
we see that the heavy work is done on
the GPU and only a few calculations are
done on the CPU in term in JavaScript or
the lower performance of JavaScript does
not really matter because it's it's
important to have everything GPU or the
heavy work on the GPU what are there any
questions until now because now the last
part is showing the demo created with
this exporter the question is if I'm
hemel handling well expression yes of
course there's not not everything
supported for Mary but the basic
calculations and
different else and some control for flow
is supported in mill its first release
how does the translation of may work but
son only to C++ so my intermediate
language with c++ which can be read in
back lane and that's why they're so
translator from virtual and C++ I guess
I'm ignore into the girl from Steve
Laplace I think there's there's no
possibility in Maya to to you smell in
inertia ad network that's why the values
are always once on JavaScript inside
inside the scene update
the first question is what happens if
they are loops in the sea as a
dependency graph and this is leads to
undefined behavior but it doesn't blow
up everything the only thing is that
that one one connection uses the value
of the last plane because other the
lupus is broken up so in our laboratory
connectionist is removed interim but
also at least father for determining the
the order of the nodes and that's why is
this connection uses the value of the
last frame indium other the other
question is the largest male script
think it was not very large but for
example 15 lines but but I see no
restriction in size they of course
restrictions in features but not in size
another smashing index data or I handed
like data and of course you can do
vertex form our conversions can we can
be done this with la bien what was
basically a data path so measures are
exported and it hindered as data and
then written to a data fire but also
then the SS high alpine better idea more
so by the way the SSI refined is a mulu
soap received rock anthem was done with
a demo group alcatraz by the way on mine
died on monday i first visited alcatraz
myself and then where does the second
place on the demo party evoke in 2011 in
cologne germany and also won the second
place in the mozilla demo online
computation or less everything is
JavaScript in depth really can launch it
directly from the browser
you
then thank you for our attention you can
get a public beta it wowowo to incur 3d
combination of wine that is higher so
basically that's our of the question is
how much of it was exported for Maya and
basically it's the four scenes of the
fellows are three parts are scenes Maya
and the overlay that shows the
introduction picture and they're always
some fun pictures in between this an
overlay seen in a saucer JavaScript code
only controls which scenes a plaint
played when which can also heal with the
soil quote this atrocity in code which
just controls which part is played win
and get into last is the overlay of
course disables the death test and that
doesn't interfere with the existing
scene and was it is as a whole the whole
main part which is written by hand
only expression sir I mean the
particular oil all objects are not
supported as their object heights types
in mail and for example you can also
evaluate the whole scene at a different
time and then gets attributes but this
is not supported so it's basically oil
basic operators like + minus and then
some bus operators and vector operations
let like for the cross product into
anything else and so far not even as
loops are not supported as a 44 loop is
not supported currently but if and alice
is supported and the only is the basic
stuff but it's but in most cases it's
enough budget of course it's ongoing
work try to support more and more and
here is actually waiting for xmas firm
or was an intention of the demo but of
course it's at this time and why is
skinning not supported in the day more
as i said has two reasons it's a time
when was when it was released skinning
was not supported yet because this was
an exercise yet to get the vertex
deformers into the vertex trailer um but
no it's how it is supported but in the
second reason is that i didn't have any
good content for it because i have its
rim was mainly made of existing content
the existing scenes and existing images
and to just loosen together
it made the creditors part in the last
part and and Kaito if I cut was made the
music for it especially if I some but
the content was mainly of existing stuff
and it didn't include any character
animations
you
the customers are also this decision
made between CPU and GPU it's so as
everything that is in the scene in
dependency graph is always executed on
the cpu but for the shaders the first
step is creating a C++ trader which has
no which is one block of code and or
distinction between vertex and pixel
shader and this is analyzed one on the
LA llvm immediate instruction
instructions so for example if you have
a vertex data coming in for example if u
UV coordinate and then every instruction
that operates on this UV coordinate of
course has at least two be in the vertex
shader or in the pixel shader because if
you can't execute it outside if it if it
depends on the vertex input was a very
instruction in the coldest is classified
at which stage it has to be executed and
all stages where for these for these
four stages salsa every instruction and
so data is classified if it if it runs
in one of these four stages imagine
an action as another cell four segments
of them well the segments of tricks and
tada I can show it if my 2011 has
started and every piece of tracking if
it leaves the viewport then it's it's
it's switched back to the beginning of
the track via wire mesh cap it's cooked
so every year every piece of track makes
a ramp like track over time so it it
passes the camera and then drums back
and then passes the camera again and in
turn comes back and there are four of
these who duels interleave so you have
so impression of of a continuous track
but I control you it in a minute and
then of course the credits that are
flying by another the greetings that are
flying by is also only one plane into
them it shows a part of a text from it
and this part is in switched like like
one or an old omnibus you have a large
oil large foil which is send wine it up
to two shows a destination and it's
basically a turn like this
but you'll see is a the trex parts and
vaginas jumping back in terms controlled
yr by a male expression there's a this
medics question to control the the
greetings that are flying by find you
now the interaction works by accessing
the attributes so for example for
example if you have some some attributes
or so translate why if you will change
it then my attached to house or Eddie
Buddhist called in this case is
greetings dot translate y and in
JavaScript to try that you can look up
the assessee boot by this string and
cross in the oven JavaScript and every
attribute as well actually boots are put
in a large array of float32 and it was a
exported coat has a table of all
attributes or attribute names and the
offset in the area so and we can just
look up the array positions and write
something in if you then recalculate the
scenes and that he built is exchanged
you
for example done here they get that he
would if your JavaScript the scene dot
you get fluid back door but this of
course javascript is not typed but this
only for a bit of checking so if the
artist changes the scene and it's not a
float float vector officer given amount
or three anymore then then you can get
Gator warnings that the scene doesn't
match your coat in anymore that's why as
yeah that's why here's a bit of type
information and them then you use them i
attribute name for example joint one dot
rotate or PI 1 dot colored again and
then and these are references references
to the JavaScript arrays and then you
just need to to fill them with your
values and if you then because if you
then update the scene these values are
calculated into the senior office and
used for for rendering oh yes sir osis
was used to access the export it seems
yeah
yeah I guess I'm still early yet finest
tea
question is which part is data on which
part goes through llvm so we can
everything that it goes into a static
vertex buffer this data was was our only
static vertex buffers there's no no
dynamic vertex buffers so in terms
everything that goes into the vertex and
Linux processes data and everything else
for example also calculating the bone
mattresses and and this all goes through
lav em wire every year my purse if you
if you create your own trading network
for example with compasses is a shady
network in Maya this completely is
translated to glsl automatically but
technically it's no difference between
what is done on sea level but on sea
level you have notes and attributes and
in such ad networks yes if notes and
attributes and that's why it's the same
course that does it one or you're only
eft well you need a different would
generate are one is for glsl and one is
for javascript but it's javascript is
also looks like looks like sea but
doesn't has types only as every time a
user's bow instead of float or int so
it's also not not a big difference I
remodeling
emic we figure out on pike analyzing or
boundary no of course it's that's the
fix potter knows what is the theme and
it knows what is the shader with an S a
heart boundary so this is a distinction
between Cena and shader and doll sweetie
formas de formas also handled separately
and and only in the last steps so the
four mines the data merge together if if
you want to execute them on the GPU
cause for ordinary c++ and open trail
you can also do the vertex deformation
or the CP what you like and was there
are some some blocks of code which are
any differently but but whether the
language is the same so that's what as
for one scenes as one coat for or the
scene itself and why blue shader in the
scene this also one piece of code and if
I every deform is the scenes that's also
one piece of code
you
also note could be useful tool for
what's up comic upcoming get really into
web based applications for example to
advertisements or web-based
visualization tools for a special
approach which basically ledge to the
problems and babe maybe even games
currently it's only a rendering engine
and it not a game engine but if you want
to do your game logic yourself you can
do it for games I can use it for games
flesh was the best furnace if could be
used to target a script and scale stage
3d and as I think yes it would be
possible but I for myself I don't have
the time but but but that girl is a
future anything other any questions
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>