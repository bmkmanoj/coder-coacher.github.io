<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>WINE Conf 2007 - CxTest | Coder Coacher - Coaching Coders</title><meta content="WINE Conf 2007 - CxTest - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/GoogleTechTalks/">GoogleTechTalks</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>WINE Conf 2007 - CxTest</b></h2><h5 class="post__date">2008-01-04</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/VBZNOTngyeo" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello so what is six test six test of
allows you automated testing of wine and
cross over and we actually any Express
application under intel mac OS x and
linux if you want to see how it works i
anchor encourage you to go to this
website right here and that's actually
what i do as well oh the basic
architecture looks like this you have
the CX test server vgs in the same time
the web server and you have some kind
some set of tests which you run nightly
those days are running of different
platforms mac and various flowers of
linux and they submit the emails with
the results to central server then it is
possible to view such results via
browser and also to analyze results by
administrator six tests there is also
the sixth as a regression server which
is responsible for finding regressions
oh if you find some situation where
obviously there was a regulation that
machine can find it but this kind of
feature is not finished yet good oh so
that was the quick idea what six test is
and now we proceed to goals we present
it last year on wine cove and we will
compare Oh what we would be heard and
where we are today if I could make it
full screen that would be great but it
looks like f5 doesn't work anymore okay
this
oh I have it in background correct wow
thanks so last bank of we promise that
we are going to work on website the
website basically contain it information
we need it but the two problems were
that it was very slow and the
information we need was there but not
presented anyway which is easily usable
so we did a complete the redone
including underlying DB model and
conversions and stuff like that oh the
six test is installed could be installed
in ball into two ways one of them is
download the binaries no binary the
source code from repository compile
yourself that's the hard way so to make
it easy for end users we provide
so-called six Tests that Sh script which
installs on your machine binary or
version of six tests and basically tries
to make it user-friendly so more people
can test well oh we do not need a
compilation of six tests anymore it's
distributed in binary form we still need
as a part of the compilation of the
installation process compile wine which
takes long it's normal process like make
check out and compel and everything but
it's wrapped by script well we also
talked about supporting windows that
that's a long term plan we do not have
it yet we could we could talk about
advantages to have such a feature but to
keep this presentation on a reasonable
time level with keep it but we can if
you if you have questions well there are
also other things which which are new to
CX test most noticeable most noticeably
it's Mac OS X support it's working on
tiger and we are working on level part
right now there's some libraries in comp
abilities which we solve in few weeks
oh there is also the wine HQ support we
are running or trying to run the wine
make test nightly really it works only
on Linux not on Mac OS X yet and we will
show this on the presentation later how
does it work there's also the direct3d
testing so far we have implemented one
application with 3d mark 2000 and as
well it works only on Linux yet not on
the not on the other platform yet oh
then there was done the job of
synchronizing the testing applications
with applications supported by crossover
and we selected the distributions a
linux distribution which we actually
support by distrowatch we find out that
by beast roars most used ones are open
to open Suzanne Federer core so we
install them and keep them updated oh by
the way if you have any questions while
I'm talking feel free or we will have
the discussion also after Oh additional
things well as we are collecting more
and more results we find out that
managing the files is quite hard because
the directory which contains the images
and log files is big so we made a
compression there is also on the new
algorithm which makes the image matching
we will talk about that we are using
every WM for better configurability
because 06 this depends on the fact that
the same error or back o is is presented
by the same screenshot this is better
achievable if you are using fvw IM dun
dun megacity and also there were some
minor improvements in six test framework
which results in better reliability ok
we go directly to the website now I
switch to remote where I can show you
the left
da so you can get impression what kind
of information you can find in six tests
oh there is the first step which is the
raw data raw data are basically are
basically the data which are submitted
by each of the machines here you can
choose the product and here you see what
was tested when it was tested and what
was the result usually the result is
failed because at least one of the
applications which is inside failed for
example this is a gold site which
contains many applications inside and
some of them failed ok it's true and
windows too it just doesn't work in our
test catches that we have it's only the
sr0 city if you have one of the answer
what is this there's no real bug tracker
from Microsoft classical there is
massive microsoft com
over here so there are several product
support it and one of them is wine and
that's the view i have right now so the
one is is running the the testing
machines are running the wine make test
each night and you can see for example
this result you see that most of the
things are green there are some some red
ones you can see from red ones the log
files this or one of these lines is
probably the reason why it is why it
failed those are run in the winds
actually I don't know that's the
question for Peter do we rather win see
yes it's a running we envy that's true
yeah the order especially the dire the
OpenGL test and GDI which are VNC
affected by we NC test nowadays which is
produced to run and say is guilty well
yeah well in our interface it is not
like failed but yeah we could be
critical command should not report a
failure to report a scale so make
passion give a zero return home
for success what when we met we found
out that make test worked for exactly
one person that's still true does anyone
ever try once in a while okay yeah
that's it breaks with this one and
arrows on different machines it's now
it's one of this little who try to fix
it where a car kind of digital record
yeah Moscow reported a success and I get
crushes and UK KU interfaces ish me I
run it's probably daily know but see you
can make that nearly daily Marcus yeah
but usually good famous usually with
Syria yeah usually with failures but I
investigate new failure so I keep to
failure right stable I run my test if I
changed something yellow rock make this
up again at the other yeah it sucks
wedding fails because I have to go back
and see you does it suck the same way
with the
with a plateau without the patch well so
I mean with all the respect shouldn't
like this BS or evening priority I don't
understand why this is it screaming
priority that should be it seems to me
it should be the case that we all show
you a little run make test and it should
just work trying to make that be true
what is it that makes it felt right for
me serpentia all the nuts on fire by XL
would rush whenever and not just open
jokes but stopped doing that you start
again
and they had the job as a dragon with
his own phones yes yeah because I have a
lot of fun sense that my machine and
some of the funds were different so I
think that was kind of fixed by removing
you by the testing 60 found about a
bunch of issues that I want to invest a
12-ounce package over
really really problem is that no one
really cares we all agree that it would
be good to fix but no what's real it
because it's also its differences in
font difference is an x server it seemed
to be causing them whether the photo
exhibit what's a buggy excellence should
much like a base configuration for like
making make tests or like have a like a
tinderbox have a boxer we say that these
libraries these bonds no no no because
it would work anywhere by the country
when they should work in most places
except when you have a broken
configuration well as I'm saying is to
have a broken configuration you have a
defined working configuration youbut
working anything attention that be when
just one correlation should be lots of
everything what I understand that the
sources have looks like I'm caucus
machine you say oh you're switch these
libraries these versions based upon
these versions on these time to prep
every time when you are everything for
people Rocketeer ugh it without el
horizonte that's why then we have to
update the test to this case honestly
that's not going to happen but I don't
see anybody here changing lots of code
just to make it work on rent at five so
I completely agree that there's some
some sort of level of comfortability we
can sort of require people to have would
be that we actually know about the fact
that it fails on a lot of machine and
that what seeks that will show of you
and then we can discuss the way how to
fix it but really
yeah we can we can't sure not someone so
DG di could be w I want to scroll down
okay here as a font issue actually
that's all sorry not compelled in JPEG
support but I'm not sure whether this is
the case wide failed could be mm-hmm ok
let's continue the others I don't know
what is that I that that's an issue that
Dan is trying to fix this is what as
Nikki the dance trying to fix it's a
bargain widow so it's a little bar yeah
okay
so there are there are cases which are
the configuration dependent like that
OpenGL study our cases are the real box
well we have to categorize them and then
we decide what to do with them of course
it would it would require work on the
test source code I mean
the bugs are number is actually it's it
links to code your internal bug tracker
system and you have to enter that
information once you are categorizing
the results so for certain for certain
screenshot or the processes that you run
it nightly you see the screenshot
appearing the screenshot is back and you
try to replicate the back or manually
without see extent if that happens you
enter the back into the internal bug
tracking system and that back would be
of course in if it is a vine related bug
it could be entered also to whine
bugzilla that's another another issue
yes exactly what would I'm going to talk
about right now for example oh we have
the crossover product and that crossover
product right here here's the test and
here is the screenshot that screenshot
or points to some some back and next
time the system sees the same screenshot
submitted by test results it knows that
it's the back number this one and so
actually it's mostly screenshot based
there are 0 well we when they arrived
the screenshot we somehow categorize
them by checks and stuff like that then
we assign the group to them and then we
have the mechanism how to say about the
incoming screenshot fast make it check
some whether it is or it is not enough
data based already categorized and
categorize means that for example i am
the 6s administrator for that i have to
be locked in and then i have the then i
have the right permission and uncle i
can say about certain screenshot for
example this one that it's no case and
the system remembers the system
remembers of the end yeah this is how it
works there is also it's more
complicated there is also if the
screenshot based matching fails we are
using log files because of with each
test case you have you have several
attachments one of them is screenshot
the another is output of the six test
run and we are matching part of this log
file if the screenshot so the basic idea
is because we have a lot of results
submitted each day and to reduce the
amount of work which has to be done
manually we are using these kind of
things ok oh so there is also the
administration mode which is basically
right mode and the administrators jobs
looks like this every day he comes to
work he locks in he goes to assignment
and he said I want to see how to assign
results in this case system fine based
on the screenshot 1 out of a final
result he just reviews that and says
yeah this is really debug the system is
talking about mostly it what you don't
have to really go
i won and and took check this is just
for confirmation and I see okay I have
this this buck and dead bug has been
automatically categorized as bag number
165 and I can see how that bug performed
last week if I click on this link I see
yes this is happening on Reuben not not
this is actually happening everywhere
except ubuntu and yeah the assignment is
correct so I say correct assign yeah
that's that's possible you can you can
access that information right here this
is this is the package which failed and
you see oh this is the one okay I'll
show it on the other case for example on
this bronze and here oh here you can see
the link of all the images which are
assigned to this failure and one of that
images is exactly the same one as the
one you are trying to assign which one
is it from those it's not clear from
this interface it's one of these and
they're only different by some-some
little difference you see yeah but there
is there is not an easy way how to from
web interface see the referring pictures
you have to go well one by one okay then
that was auto assign results and if the
matching logic fails you have the result
which appears in earnest
find results unassigned means that
actually system wasn't able to recognize
and it's up to you what to do with such
a result well you have the proposed
failure which is based on the package oh
that means the system knows that the
frame-maker 7.1 in past failed with all
these failures and you can choose one of
them or you can enter your own failure
create new if you want in this case we
would said it's non six test error
because if you look to to screenshot you
see that for some reason the file could
not be downloaded we don't know why that
happened so we just say okay we review
this later and assign the back so the
point is to help every day out of a son
and understand without clear so we can
we can see the evaluation which works
with those data oh and that comes to
failures failure is actually the set of
images which we believe belong to the
same back for example fellow number 17
has this description and all these
images which are similar but not the
same belong to the failure we don't
because basically we weren't able to
find a utility which reliably says about
two pictures these are similar or not
well it worked in most cases but not in
all cases exactly
I usually unit test suites right we
tried the GQ view of feature which is
find duplicate images we try to find
image jobs which is the package on of
Debian we tried all the image magic has
also the functionality where you can say
the threshold and it will save you by
error code whether the civ images are
not similar but I did not hear about the
utility or taking up free doing a simple
thing is this doing unit testing
facebook is designed to test 3d vendras
no application but they want they're
having problems with test fitting
because of slight right differences and
see you slide pixel differences you
couldn't really see exactly the kind of
problems we have see these pictures are
obviously the same for a human but not
for not for machine if you if you could
send me link to that or to my address
and Peele car at colliers to link to
that I I would be yeah yeah that is the
way we could we could there was the idea
by Michael who said that let's make a
something like finger a fingerprint of
the screen from wine point of view that
means there are two windows one of them
is named installing information and yeah
it's possible but that would limit the
product just wine based testing which is
not so bad we could do that because we
are trying to to design this as general
as possible so also non wine based
applications could be tested but
sure we could we could have the we could
have the small condition if it is a wine
application and we have the fingerprint
we could use it but basically this
problem is more or less salt we are able
to do that as good that the maintainer
of the six the side doesn't have more
than 20 or 30 minutes a day and he is
able to to handle large amounts of data
so this this is solved the matching
logic and log files logic behind is
strong enough to handle that so this is
not a little problem anymore you do at
least something at least you have you
have the name of the of the windows but
when you come to wine you have a real
deep information regarding the the
widgets which are inside windows so and
those things really uniquely identify
the window in X based application is
more tricky possible but more tricky is
it possible to do what we do what screen
I'm sorry I I don't understand the
question is this screenshot saying that
saying don't use the screen shot use on
accessibility accessibility to query the
data in an already parched form and that
way you're in sensitive to variations in
never actually watched some ups who want
to have ceased operation the way
exuberant but but I think Martin's
overriding point is that this is really
the problem this was a problem he's got
a solutions working pretty well yeah
yeah okay so Oh once you have this
person which makes the regular
evaluation of the results then you can
have the several views to this data all
these views are available until the ever
under the evaluation tab and I will
proceed from most interesting for wine
developers to two most extreme
interesting views for crossover
developer and but they overlap both are
overlapping so you can oh you can
evaluate the one product
I will choose the period which has which
happened quite a while ago this because
is the period where I have the relevant
data for the other periods just because
we do not run it oh so often and nobody
is using it we do not have data so
that's why and I see that in this period
we had mostly everything worth that's
the green part but there are some things
which did not and one of them is what we
talked about like because of
configuration of VNC and everything but
the point here is that you have some
overall view how good or bad the tests
are performing oh well you can click
from here the interface is done in a way
that every number which is written there
is trackable so if you want to know what
actually felt here you can always click
on it and you see in this case it has
been run by two machines or actually
maybe the same machine but two times
once it wore the other ones it did not
and it felt with this with this error so
you can you can check whether the
numbers which are here are correctly
computed always then what you can see
here for for example the crossover
product
okay I go here closer product I am
interested only in a particular bug
number and I see up to 25 yes there is
some error which happens only on ubuntu
it happens from time to time the
screenshot is this we are able to
replicate it manually so we enter the
back in internal bug tracking system oh
you can do the similar way also 46 test
itself because there are not only bugs
in in wine there are also bugs in other
products like six test the six this box
looks like basically the script was
trying to do something and it felt for
whatever reason for the action it tried
to do could be in this case for example
is that this window for some reason did
not have the focus so it wasn't able to
ride the name of the page here and then
it was try to look for this picture and
it simply failed so this is classified
as six test error and somebody has to
look to that find out what's wrong fix
the tires and as we have more and more
supported applications it's more and
more tricky Oh the next thing regarding
evaluation is that you can evaluate the
direct3d benchmarks we have the three
machines but not all of them are able to
submit the results because of because of
bucks in wine and you can say that you
actually want to 15
this is how the direct free evaluation
looks like this is the particle test
from 3d mark 2000 this is the date when
the run acute and this is the value of
the test for example this is in the unit
which is 3d marks there are also does
FPS and I see that the performance is
pretty stable on this machine so
probably nothing got broken during the
top the time period you can also click
on the result and see exactly what was
submitted it looks like this it's a file
generated by 3d mark which is passed by
us and then the information is presented
in this table okay then we have the
overall product error ratio what we call
ratio oh well it's not so bad actually
you can see the quite complicated table
I will go very fast route through the
columns here is the list of supported
application this
sure what is yo sorry so here you can
see the list of supported application
and it's divided into two parts where we
support installer and application itself
of course the new support application
that means that we support also the
installation also the run of the
application but we test installed in a
different way than we test application
it's clear from this for example we have
54 applications which we do support by
crossover and but we have much more
application test because one installer
could have several tests and its most
most complicated for complex
applications like office free 2003 that
application causes of Excel Outlook
PowerPoint and word and for each of them
we may have one or more tests that's
what is in this table so this is
actually what is supported by crossover
certain version and the other thing is
what is supported by six Tests see
supported by six that means that we have
the script for that part of application
for the poly installation so you see the
same list as you saw before but the red
lines means we do not have the six test
scripts for that and the same for
applications then there is a column
which says how many of those supported
by six tests were run during the day
today Oh yep yup oh and yeah cool
awesome on one machine and what is most
interesting for us is the product
failures
here you see the errors which are
produced by crossover some of them for
example this is classified as
installation hangs on the end like well
yeah and it's a timing bug it's not easy
to replicate manually so probably the
most of the people are not affected yep
you can find stuff like this here and if
it is a proven back that means we are
able to replicate it you have pointer to
bugzilla so random window is not like an
important goal give them can you repeat
the question you said that running CX
tests on Windows has a low priority why
is that well it's a complex problem
which we have to solve the other
problems before we can go to Windows
platform because right now it doesn't
even work on well part like Oh ethics
that I didn't say it's not important
it's important but on the schedule we
have there are other things we need to
finish before we do that doesn't make
sense I should also add then I tried
run some tests on Windows that Randolph
wide and stumbled across the problem
that all the screenshots are the same
right so any screenshot based testing
methodology is going to be hard to take
a set of testing to move them to another
platform it's a big in other words it's
a big job yeah but it will be really bad
usual because I think it would work wale
over evaluating the chance I think about
the timing bus they hopefully an issue
in Windows but I'm sure for that tiny
bugs are not a bad thing issues the
bigger issue is you get your tests right
you know that the test works windows and
then if it fails her on a wine you know
you have a genuine failure yet so that
is absolutely which is it's hard ok
you
at least a little box for me to the shed
about ZX passer welcome to understand
why they do
187 tests the Martin wrote to test that
 and validating okay and before we
ship our goddamn product ninety-six
percent of those tests work okay all
right four percent fail all right but
but that gives us a level of confidence
that our product really does what it
says it does and that's why this is
important this is what we should do for
wine before 11 at oceans exactly I'm
trying to provide the platform for that
we are going to hell the east memphis
you
sorry so we do support the sixth as log
files and we are in need of support
crossover log files also the wine log
files because they contain the
information we need then also we are
working on the interface which would
allow developers to easily say okay this
test fails I would like to have this
test run with debugging info plus relay
plus as as something and next day he
could pick up the log files didn't read
it for him then there is the regulation
support wine regulations it's quite easy
to implement but we already had it but
then we switch to CBS 2 from CVS to kit
and we had never time to come back and
fix the scripts to make it work again
then we would like to support a
crossover regulations which is the
problem on its own why it is oh we will
discuss on the next slide it's some
basic problem regarding get then we need
to review the test and define the ones
which are important for us and those
could be more or more complex test
because right now basically what we are
doing which is the default installation
of the product and some basic usage of
the product basic usage means that
forward 2003 it's creative human safety
equipment law document and if it looks
good we say the application is fine the
text text could be more more complex
regarding the future long-term plans
right now the control logic of scripts
is encoded inside the script the script
is actually the bash or something like
that so all the logic is inside if you
want to pour the test to other platforms
up windows it's hard it would be much
better to have some XML based test
definition which is restricted by some
hema so you can pour this easily to
other powerful platforms like Windows
it would also allow the betterment
ability of existing tests because right
now we have around to 100 of them and if
you want to change some simple thing
which affects all the tests we have to
do it by grab and replace and whatever
oh if you have the data structure rised
in XML we could do it automatically by
some transformation then the support for
external GUI scripting languages would
be nice for example out of hot key or
yup oh that would allow us to make it
easy for end users to create tests in
the favorite tool because we know there
are some people around like autohotkey
so we may have more tests if you do that
correct yeah actually this is more six
test is more or less prepare for that
it's not a question of the particular
product out the hot key to be able to
generate information which can be done
later part by the server side so Oh more
work is on the side of of those
third-party products down on our and
then the final goal is to have it good
enough to test any application for
example right now if you are developer
and you could be a developer of some
widely known application like Firefox
you do not have too much choices how to
automate your testing Firefox team they
do have some their own things which they
are using for testing the mono project I
know they help their own things the wine
perfect is building the separate side
which is called I think test dot 1 HQ
com that oil orgy so oh there is no
standard solution for reason if we could
do this good
then people may use it for standard
testing of open source applications that
would be great oh we are coming to the
problem i noticed before the problem
with crossover regression testing i have
a picture paper for that mm-hmm okay oh
I will find it it's in my mailbox and
northern saved in the directory the
basic problem is that when you do the
match from wine to cross over it's not
possible for be sacked we are good to go
through separate patches what you get
actually is that you receive a bunch of
veggies which you cannot clearly
identified which one of them caused the
regression here you can see the view
where these lines represent different
version of the product the yellow line
is the crows 0 is the crossover product
yeah 6.1 I think no it's a tip version
this is the wine and this is some
different non-related branch and at some
point we do a merge of wine to cross
over and 0 later when this when these
merge causes the problems regarding
regulations and that happens quite often
we would like to find a page which
caused that so we do the be stocked with
starting point somewhere before for
example here and the end point after the
match and when you do be sucked
basically in many cases you can end up
in this branch that means the
you do not have in your source code any
crossover related changes so it's not in
most cases is not even comparable and if
it is oh it's not clear whether it is
going to behave in the same way as it
used to as it would behave if it is
crossover this has been also mentioned
by Andrew Morton on his note until there
is so far no solution because it comes
from the way how the grid works so this
is the showstopper for crossover
regressions and if you have any
proposals how to do that one of them was
submitted by Alexander that we could
cherry pick each of these patches and
merge them manually but of course that
increases the amount of war</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>