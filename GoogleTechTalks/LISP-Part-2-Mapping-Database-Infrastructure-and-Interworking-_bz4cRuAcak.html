<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>LISP Part 2 - Mapping Database Infrastructure and Interworking | Coder Coacher - Coaching Coders</title><meta content="LISP Part 2 - Mapping Database Infrastructure and Interworking - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/GoogleTechTalks/">GoogleTechTalks</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>LISP Part 2 - Mapping Database Infrastructure and Interworking</b></h2><h5 class="post__date">2010-03-26</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/_bz4cRuAcak" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">well thank you all for coming to the
Lisp part to talk once again I will not
introduce the man who needs no
introduction you know welcome all so um
let's see who wasn't here yes there are
less Wednesday everybody okay so I'll
just go through a there's a few slides
summary of what we talked about and then
we'll go into part two and then give you
a preview for part three which is next
Wednesday summary we'll gonna start
talking about the design goals for a
mapping database a couple mapping
database algorithms and a service
interface that we have to the mapping
database and then talk about how lists
sites talk to Nautilus sites we call
that interworking not necessarily
transition but we call it interworking
and then some security and network tools
that are available and issues and a
preview for next week so the first thing
we talked about last week was we want to
control the core routing table growth
and we can do that with a level of
indirection by not injecting a ID
prefixes into the underlying routing
system and by doing that we could also
provide low op X multihoming and have
the site control which way packets come
in on each of their links that was the
fundamental multihoming use case that
list can provide we're gonna talk about
some use cases next week
datacenter use cases mobility use cases
but the one that was able to give us the
best use case was scaling the routing
tables and being able to do this
multihoming these slides are just
extracts from last week you're not
supposed to read them it's just those
are the general slides that are
referring to those topics what we did
are trying to do is separate address
space into endpoint IDs and routing
locators we call them a IDs and locators
for short and by creating a level of
indirection it allows us to avoid
remembering sites and allows the top
topology to roam so you can roam
topology because the site addressing
could stay the same and you just change
the locators that access those
prefixes Lisp is the protocol in the
architecture to do that this was a
network based protocol to achieve the
separation in an incremental e
deployable manner you don't have to
change site routers or core routers we
believe the sweet spot for a list but
it's not limited to is the CPE boxes
this uses packet encapsulation versus
translation like a NAT could do and that
is an another example of an eID locator
split it just separates out a private
address and a global address that's used
but Lisp uses all global addresses and
packet encapsulation is what's used to
to be able to separate the dresses and
we mapped from an e ID to a locator to
be able to build the outer header we
described a unicast multicast forwarding
example when there was a map cache hit
so when there was a map cache hit we
used it we encapsulate packets we D caps
later on the other end what we're going
to show you today is that when we get a
map cache miss how we go get the map
cache entry and that's the mapping
database system we'll spend probably
have to talk on we showed how our site
policy and core policy will be achieved
independently how the site can decide
which way packets come in if it wants
active active multihoming active backup
or wants it to be per source or per
destination these policies are can be
achieved with pretty rudimentary tools
and then we talked about three
mechanisms to deal with and few handling
we don't believe it's a problem you
could add a protocol machinery to solve
it and we talked about locator liveness
algorithms so the locators are always
assumed to be up when you receive them
in a map reply in a map cache entry and
then you find out when they go down or
when they come up using the locator
liveness algorithms that we talked about
and then we just talked about a little
history of Lisp and the open policy for
it we described that list started its
work started in the RG the routing
research group of the IRT F and now it's
an IETF working group and we indicated
that it's complete
the open with an emphasis of this is not
a Cisco only solution this is an
industry solution and cisco has no IPR
so let's move on to the talk anybody
want to ask any questions or anything
before I start okay so the mapping
database system so what we talked about
last week was machinery that's kind of
been known have been built before it's
not really you know inventive or
state-of-the-art we're just using
existing mechanisms and just trying to
define it in a very specific way and
implement and learn about it this part
the mapping database is kind of the
research er the new stuff the new secret
sauce so to speak and because we have to
be able when an ITR gets a packet when I
when I encapsulate or gets a packet it
sees it looks at the destination address
and it cut it thinks it's an eID so
that's the key to the database lookup
and so it needs to get a locator set
back so it knows where to encapsulate
packets and we want to require the site
the destination site to be authoritative
and have security secure control over
how it replies and the kicker is we need
think we needed scale to 10 to the 10th
entries that's 10 billion it's a pretty
large database arguably it's an
np-complete problem because if you can
scale it to a hundred million or a
billion arguably you know 10 to the 10th
is using the same set of algorithms so
we'll see and you guys could be the
judge if you think we can scale it to
this to the size the database needs to
be dynamic meaning that we need the
locators to change not real quickly but
at subscription times if you reconnect
to an ISP if you maybe roam from one
subnet to another we need to update it
so it's very much like DNS with dynamic
updates maybe at the same granularity of
time we'll see as time goes on if we're
gonna have to be much faster than that
so that's built in day one and obviously
the algorithm has to be distributed so
we can load split map requests that go
to different places we need to use the
entire network all the boxes bandwidth
CPUs that are available and we don't
want the database to be in one specific
place
or a set of places or it could be das
attacked so by by it being distributed
we've seen this with BitTorrent
applications that if it's distributed
it's really hard to knock the service
down because it's everywhere and you
can't find it all the time and so that's
a good benefit to stay ahead of the cat
and dog game when it comes to security
so scaling internet databases this is
really fun we need this Eid locator
mapping service and really the internet
today really only has two large
databases one's called BGP and one's
called DNS and they're pretty
fundamentally different and I'd argue
that they're at different extremes where
BGP pushes all the information
everywhere it's assumed that the
information you need to route a packet
is being told from everywhere to
everywhere so when you get a routing
table hit you can forward the packet on
the next hop but if you get a routing
table miss you should drop it because
it's an unreachable or an unallocated
address okay so it seems the amount of
defaults and assumes that everything's
pushed hop by hop everywhere DNS is
completely different because it has to
scale at a completely different level
where we will pull data only when we
need it from servers and it scales to
probably two or three orders of
magnitude more than what the BGP table
is intended to scale now what makes BGP
scale is because the key or the
information that's being passed around
in this database isn't a power of two
has the power of two key and it's called
the IP address or ipv6 address and
because you can shorten the prefix you
can aggregate so you can take eight
entries and and and advertise if it's in
the same power to block you can
advertise it into one prefix and lower
the bits lower the mask length by three
bits and because you're allowed to do
that as the information goes farther and
farther away the advertisement
information goes farther and farther
away you can advertise more course
information and be able to scale the
routers that are farther away from the
destination whereas the packet then
moves towards a destination each of the
routers have more and more specific
information to find the exact point
where the destination is so that's how
we're able to scale to a certain extent
if you can keep things in Nice
power-of-two boundaries sometimes that's
challenging and when you have back doors
and special policy cases and stuff
now DNS names are not they don't have
power to keys they're just free-formed
ASCII characters that are basically flat
so if you want to lookup abc.com and on
XYZ comm basically there are 2 different
entries that have to go into this
database so the only way to scale it is
that you need to use a cache and you
only store what you're using on demand
and that's how DNS is able to to scale
so you basically pull or push and you
need to choose your poison because when
you want to scale 10 to 2/10 it's not
clear which is better ok so we need to
trade off state x rate we know that the
states going to be 10 to the 10th if we
can keep the rate down that factorial
there will remain small if they both
have to be large numbers we may have an
np-complete problem so we're trying to
say that the state will be large and the
the route churn will be low and that
will maybe help us solve this problem
and we'll show you how we're gonna go
about it did I mention we have to scale
it to order 10 to the 10th it's really
important ok so mapping database
algorithms we have a few of them and we
documented most of them to tell you that
they don't work and they don't scale
enough so when a new person comes along
says the Hawaii B tried this we say oh
it's in this class go look at this and
then we have one in particular has most
promised there are others that trade off
things differently and there's
interesting new data structures like
dhts that could be used for this as well
but we'll go through each of these
pretty briefly because we want to talk
about the one that that we're using now
so we have to trade off push versus pull
and see what the the benefit cost ratio
is so we have this one called nerd and
basically it's a full push let's make it
look like BGP let's push all the data
mappings everywhere let's push it from a
few authoritative sources in some sort
of trust chain and they could be signers
so you know that the information is
legitimate and coming from the right
place and then when you do map cache
lookups and the encapsulator you will
never miss it's either there and when
it's there you encapsulate when it's not
you should drop the packet on the floor
ok that makes the encapsulator pretty
easy you don't have to have any control
plane machinery at that point
but that kind of violates the 10% a
routing table rule that routing table
rules from Jeff Houston's data saying
that a typical router today has 350,000
routes and it's in a core routing table
but when you look at a 24-day packet
trace of it it only touches 10% of those
destinations so only 35,000 routes are
being used out of 350,000 is that a good
use of memory you might want to question
that so maybe on demand caches depending
on where you are in the network is a
better way to do routing and maybe with
lists now we should change the paradigm
and not use push hop-by-hop protocols
but use a database and when you need to
go somewhere you go request it get the
information you need cache it and then
you use it so that's kind of the
paradigm shift that we're kind of going
towards now with lists because it's a
cache based system so do you really want
to push all this stuff everywhere well
my Linksys router probably doesn't need
a map cache entry my Linksys router at
my house probably doesn't need a map
cache entry for taijuan because i don't
go there very often okay I may go to
China more often so well how do I decide
to do that do I tailor it what do you do
it's probably less is always better and
so it's probably a good idea not to have
to push this around we did some
calculations on this and showed that
only with a few gigabytes of memory you
could probably store everything and if
you compress it it doesn't take long to
download it the question is about
dynamic updates dynamic updates would
always be trickling in you have to
manage that this is probably a
non-starter so we kind of put it in a
obsolete sort of state we have something
called Emacs where we say let's try pull
but let's do intelligent pull maybe we
can take the Eid and hash it to a
multicast group and then all the et
hours of D capsule aiders join that
multicast group and then I can send a
map request when I need that information
to the group of course a bunch of people
will get it which are not that
destination Eid but the one who is will
be the one who can send the map reply
back giving me the information I need
okay so the first thing made a
non-starter is what if I'm at my house
and my Eid range is the same as Google
I'm going to be getting a lot of map
requesting because I'm joining say
multicam
group as as Google so probably not a
good idea so we put that on the obsolete
shelf Kahn's had a lot of promise we
said let's try to do a hybrid push-pull
and we will push CID prefixes because
pushing them with aggregate ability a
power of two addresses would be
something we can do we can do that in a
multi-level thing we you can't build a
pure hierarchical thing because every
isp wants to be at the top we live in a
peer-to-peer mesh is p-type model so
what we want to do is build tier ones to
your twos where all the big guys can be
up there together doing links day and
the next level the next two tier two
guys can be doing links day and so this
was a way to push the eid-prefixes on
this thing and then have the map-request
go up the hierarchy come back and have
the react map replies go back and forth
this was a completely brand new protocol
and we looked at and we said hey we're
using a lot of Technology from the past
link state path vector these sorts of
things but one thing that's bad is that
the map replies have to follow this
hierarchy and they may incur latency
versus you know just going straight you
know I have to go ask somebody where
they live but they say before you ask me
where you live come over to my house and
I'll tell you okay and so it's that
catch-22 situation that we're in so we
came up with something called alt which
was similar to Kahn's pushing
eid-prefixes is probably not a bad idea
and if we can do it on an alternate
topology we could probably make this
scale really well
today when you connect into the internet
your address that you connect into is
based on the topology so you're
addressing depends on topology if we can
build a logical topology that depends on
an allocation policy that the our ir's
are going to give out we can make this
network map hierarchically into power
two chunks and really make the core
store very few routes so what we want to
do is we let's push these eid-prefixes
around using bgp because we just need a
routing protocol let's use BGP as a
distance vector protocol and let's have
the BGP connections between these all
routers PR over GRE tunnels why GRE
tunnels because we want this to be a
logical topology we don't want any
physical
these box with the underlying topology
we just want some peering model between
Verisign and GoDaddy or ripe and Aaron
and it doesn't matter where they are and
by the way those bgp peering connections
are going to stay up because there's a
whole internet underneath you that's
keeping the tunnels up so the tunnels
won't go down the periods will be stable
and will have very strong aggregation on
this topology you'll see in a minute no
changes to PGP whatsoever
these alt routers can be off-the-shelf
Linux boxes they can be juniper routers
it doesn't matter you're just taking a
packet called a map-request
and you're routing it on this logical
topology so we think I'll test the most
promising we've been looking at it quite
a bit
we're and I think our third or fourth
Rebbe of the internet draft and we have
it deployed we'll talk about the
deployment the network the deployed
network next week but we think it has a
lot of promise and it just dropped in so
simple it was one of the easiest
technology introductions that we could
have ever done and we'll explain in more
detail how this alt works okay so
basically we're building
go ahead Steven yes yes right so the
question was is we already have a
mapping database system it's called DNS
why can't we publish these prefixes in
an ad or DARPA and we can we have DNS
updates we have DNS SEC and all these
sorts of things so we definitely started
there day one saying why don't we use
DNS and there's been many variations of
that up to now so first the first gut
knee-jerk reaction was you don't want
directly to depend on routing and you
want routing to depending on directory
so that's an interesting thing if you
needed to get to the directory you'd
have to use locator space and you
couldn't use list to get to it or you
have the cat
22 that was the first thing then the
other thing is as well maybe we just
used DNS the protocol build a completely
different set of hierarchy and maybe
we'd send our packets to something other
than port 53 or whatever and that
certainly can be used as as well and you
know there's the problem that we thought
could occur and we and there's a
proposal now called Lisp tree that the
guys in Europe are doing where they want
to look at this hierarchy like we built
with alt but they want to look at see if
these eid-prefixes could be cached not
the mappings but the eid-prefixes can be
cached and that you can lower latency
we're just not finding on the network
that latency is a big problem it really
isn't that much of a problem so we'd
rather keep the center transport of the
map request pristine because if we have
to pull out the middle and put in a DHT
or the dns idea that you have Steven we
certainly can do that but we don't want
to change the edges the X TR is the
encapsulator Xindi cap slater's we want
them to interface to this service
interface which are made up of map
resolvers and map servers so we have
thought about it but there's a you know
I mean of course the ITF is going to say
no no no and basically you could
actually use DNS as a PKI as well and
you can have you can put you know public
and private shared keys in there or keys
in there and have a hierarchy of trust
and that would work well is also but the
DNS specs say you're not supposed to use
that as a general PKI DNS SEC is
supposed to use to secure DNS okay so
alright right so this is kind of the
model that we have so far and we want to
make it modular so we can pull out that
red thing now what's important to note
is that the caching and the database man
replies happen at the edges and that's
where it's authoritative and the access
to how you get map requests from this
site to this site is serviced by these
map resolvers and map servers which
we'll talk about in detail and then
these guys are just transporting those
packets the alt is basically a control
plane infrastructure just to move map
request a single packet type called a
map request which has an IP
so a Juniper router can take a
map-request which is an IP packet off a
GRE tunnel looking up in a BGP rib send
it out another GRE tunnel to get it on
its path towards the destination site
whose authoritative for responding
that's the idea
questions so let's talk about the
mapping service interface well this was
the example we had last time
where we had s was talking to Dean and
wanted to inject a packet remember
throughout this presentation green means
e IDs and red means locator addresses
it'll be consistent throughout the
presentation so we see that's the the
source is in one zero zero one out of
the provider independent Eid prefix
that's been allocated to the site the
1/8 and it's going to send a packet to 2
0 0 2 which is DS address ok so what we
said last time was when s2 got the
packet and it had a map cache entry we
just encapsulate to the locator do you
one or d2 what we're gonna show you now
is that the map cache look up missed and
so what does it have to do so what it
does is it sends it builds this control
packet called a map request for 2 0 0 2
so the destination address in the in the
IP header says it's 2 0 0 2 that's what
I'm looking for that's the database
lookup key and the source is actually
the encapsulator or to be encapsulator
that his are lok his IP address is going
to be in the source so he has to send
that somewhere let's just say for now it
gets to one of these two boxes own 2/8
and then they're just going to send a
map you fly back to the requester which
is 11001 and it's coming from say D -
that's the map that's the basic service
interface it looks very much like an ARP
request in an ARP reply on a single
subnet that's kind of the idea we'll
talk about how it all happens in the
center in a couple slides what happens
is when the map reply comes back it has
an e ID prefix it doesn't have zeros to
0-0 2/32
they have the Eid prefix for the entire
site so we have a guerilla aggregate
ability of map cache Ang's when we said
10 to the 10th event tended to 10 sites
not 10 to the 10th systems so it's a lot
of individual IP addressable system
so this 2/8 is the entire site here and
we're saying that the two locators that
you need to encapsulate to to get to
anybody's 1200 and 1300 - we showed that
last time once that map requests
map-reply exchange happens you have the
information you can encapsulate to its
pre the question was is that subnet mask
information in there it's 2/8 it's not
subnet information it's it's the entire
power of two prefix that's used by that
site so out of the 2/8 there's a bunch
of subnets here that have more specifics
last 16/20 forts that come out of the -
/a it came back in the map reply they
came back in yeah the question was is
the map request was for a specific a ID
- 0 0 - how did the ITR know that 2/8
the / 8 was the granularity or the
coarseness and that comes back in the
map reply Scott absolutely yeah Scott
asked the question do I have 2 cents
back slash slash eighths and the
answer's no you can send more specifics
back and we refer to that idea as the
Vince shower idea Vince took a shower
one day had this great idea and we refer
to it ever since then as the Vince
shower idea you can this man replied
could come back it can come back with a
longer prefix it should never come back
with a shorter prefix that's really bad
right and we I mean mitigate against
that but it could be more specific
because you may want to say that the Eid
prefix this is the European region and
this is the US region for instance so
sorry
yes there exactly other question
question
so essentially for very busy local
science you're talking about this
essentially very busy sites like us we
have to are a drivers would have to have
full tables with basically everything
right foremost right yes yeah very good
observation let's let's hold the
security questions to the end because I
think I address all those okay so let me
ask the question so the people on the
recording could hear so the the first
question was so yeah that was a good
observation is that large sites have to
carry a large table will that table be
larger than a BGP table not clear
because you probably want people to come
in to you shortest entrance and give
them shortest exit so if you want if
Google wants to talk to one billion
people there it's probably gonna be a
hundred routers talking to a hundred
million each or some power of two or
order magnitude difference so I think
that could be split up by the number of
systems and that will help
let's see your other observation was and
I thought it was a good one was is that
you're really moving the problem form
large routing tables in the court or
large routing tables on the edge the
answer is yes that's true for a big site
like Google MSN Yahoo and that sort of
thing not true probably for the edge
sites right and we have mechanisms where
maybe Google doesn't have to do the map
request in the opposite direction we
could talk about that in a second but
yes it's definitely trading it off but
it's putting the state in the places
where they need it at the point in time
and not putting it everywhere
it's depending on the traffic pattern
absolutely I'm gonna let me introduce
what a data probe is first so everybody
else could understand and then you could
ask that question at the end because
because this could turn into a security
presentation and I don't want that to be
the case other questions wait a second
ji yes yes yes yes yes I will talk about
how the map-request reaches the ETR in
the next slide ji you're on I'll tell
you in the next slide one more question
so the question was is what if the
destination site has multiple
eid-prefixes and a map-request comes in
for say one of them does the destination
site return all the eid-prefixes the
answer is kind of and I'll explain why
if in this case if there was nothing if
this was the only ID prefix you always
return what's what it matches and if the
other ones weren't in the same power of
two block you do not return them you
can't have overlapping prefixes and in
those cases you have to sometimes return
the overlapping prefix in other words
this site can have a 2/8 but it also
could have a 2/16 and in that case you
have to return the 2/16 because the
locator set of the slash 216 could be
different than the locator set of the
slash 8 so we just put in the last
specific
and that when they're nested prefixes
you return all of them did the in the
case of difference you do not return all
of them just the one that you care about
right because if if you go ahead the
question was why not just do longest
prefix match is because if you do have
map request on two zero zero two that
matches the slash eight and now you go
ahead and have do another map request on
another a ID that matches the slash
sixteen you won't you you won't go map
request to sixteen because you got a map
cache it on the slash eight and you'll
use the locator set from the slash eight
and not to slash 16 you got to make sure
that the course route doesn't screw you
is the bottom line is the short answer
you can't have the course route match
something when there's a more specific
here let me continue because the I'll
answer most of your questions and how
things work now the big question is and
I'm surprised nobody asks maybe you guys
don't care is what happens to the
packets that invoked it what do you do
well there's really three things you can
do you can drop the packet just like ARP
doesn't neighbor discovery you can queue
the packet well they'll talk to your
hardware vendors how much queuing are
they gonna do in a data plane or you can
actually use the data packet forward it
and use it as a map request and that's
what Edie was referring to as a data
probe now a data probe means it would
follow the same path as the math map
request but if we sent the data probe
over the alt then the ult's no longer
just a control plane infrastructure
would be used for some type of data
packets and then you do have a packet
ordering problem because you'd be
sending data probes on this alternate
topology and you get the map request
back then you'll send it encapsulated
you know what happens there so we have
it in the spec because we think there's
some data center applications where you
don't need like in an enterprise where
you don't need a safe state or you may
want to send the data probe just on the
default verb and get it and trigger
something back in those cases where you
can't lose packets like storage
applications maybe you want to use the
data probe but in the capital I internet
case
we think that just drop packets it's
okay now let's be clear about dropping
packets here it's only for the first
time a first packet from any source on
the Left talks to any source on the
right after that there's caching and you
don't have this problem okay the RTT
time of the map replay yep yep just like
our just on a larger scale that's there
well he could be referring to various
implementation techniques that could be
used now are they practical and
cost-effective to use another story okay
so let's keep going so let's talk about
this mapping service interface so we can
show you how the map request actually
gets to the destination where it needs
to do so this mapping service interface
comes in kind of two forms if you look
at us - it's this ITR this ITR could
have this GRE tunnel to an alt router
that's what the Purple Line is okay and
when it wants to send this map request
for 2 0 0 - it participates in BGP and
knows the next hop in this case it's
just one it sends a single home to the
alt infrastructure that it just sends it
that way and then the to its destination
the other interface is that the s2
connection we encapsulate this map
request and send it to a map-resolver
and the map resolvers attach city all it
knows how to get the packet to the
destination ok so let's talk about a
little bit more of the mapping interface
well that's how the map request gets on
there but how do we know how do we get
it to the site so let's say we have this
sort of scenario here where we have
these three sites here's a 12/8 11/8 and
over there we have a 10/8 and those are
those locators in green and red
respectively and let's say we have this
all network that set up this all network
can be run by service providers
interconnect providers registries
governments third parties big hosting
companies that start with the letter G
those sorts of places
could could do that and what happens is
what the first thing we say is we these
these map servers that are attached to
the alt as well as well as the map
resolvers as we talked about as well
now what happens each site will register
these mappings to a map service and they
do it securely with a sha-1
authentication key that's shared these
two point the point shared no PKI needed
okay
so they send map registers to these
various map servers what the map servers
then do throw the map okay what the map
servers do is they inject those verified
mappings into the BGP all that runs here
and then at each level this off we
aggregate more and more and more as we
get into the core so basically we built
the topology with a distant vector
protocol called BGP so we can run a map
request from there to this site through
this topology it's as simple as that I
have no idea I don't I don't know what
it looks like everybody likes to
describe solutions in reference
something else and I never like doing
that because then you have to go down
and say why they're different and where
they're the same and you get into
something that turns out not to be a
very fruitful conversation yes this
topology is going to be built to map to
the allocation so if this guy has
another power of two prefix that's maps
into here he could register the map same
map server but if it's not say two years
later needs more address space he then
we'll send a map register to the map
server that's part of that delegation
that allocation delegation and then it
will then have all these slash 24s at
this level that it can enter gate into a
slash 21 and then this guy can take in
the absolutely not yes absolutely not
it's probably going to be registry based
because the the eid-prefixes will come
from registries in certain clumps so if
you get your if you get your prefixes
out
you're probably going to have to connect
to map servers that are going to be
supported in in Europe at the slash 24
level now that doesn't mean that a US
map server can't support a ripe it could
but it's all logical right and you just
you would just have to send your map
registers further on what the question
was what's the difference between the
map server and the map-resolver and I'll
I'll answer that as I keep going through
the example okay where is the one who
receives registration requests from the
ETR so they can inject it into rowdy
okay and then the map request what
happens is these map resolvers sit there
and then when one which is down there
that the map resolver knows the next and
what will happen is each out route or
just forwards this IP packet forwards
this IP packet along the path based on
this distance vector protocol and then
the packet can the map request can and
then once he once he gets once he gets
the map request he can just reply back
to the source directly so the latency to
get the map request goes on this logical
- hold on a second on the logic the map
request goes on this logical topology
and then directly back did I answer your
question yes okay for the vc ops i can
see you're very handsome man but i'd
rather be looking at what you're
pointing at so you're you're pointing to
stuff off in the screen to your to your
rider on the screen gotcha
so let me review it real quickly these
ET ARS here you see my pointer or you
want me to
we're gonna get a VC ops is that okay is
that the table so you're looking at the
slides right are you looking at him but
I'd also be looking at the screen so
when he's pointing at the screen I know
what he's pointing at how about you see
this pointer here floating around
okay that's for I'll use that Thanks so
quick review and I still get to see you
yes no problem I don't know if that's a
feature or bug but okay so the et ARS
basically are registering they sent a
map register message to their configured
map servers for their mappings here and
the map server is injected into this BGP
structure they each run the ebgp over
these GRE tunnels so let me go back to
the animation so you can see it a little
more clearly and then let's just say
when this ITR wants to be able to
encapsulate a packet to somebody at this
site and it doesn't have a map cache
entry it will send a map request on
1000won now it sends it to its
configured map-resolver and that gets it
that gets it to the infrastructure
system that knows how to route it and
then the map request go hop-by-hop down
here because this ms advertised 10/8 to
the alt when the map register was when
the site registered and it goes
hop-by-hop throughout and then you take
shortest a s path these can be each of
these alt boxes could be an a s and
themselves or you can have topology in
here and run an IG p if you wanted to if
you're an isp that likes doing those
sorts of things you can but basically
bgp is being used as a distant vector
protocol so the map request can get to
where you need to send real data packets
and and when the map request gets to
this point here then it says ah yes I
can give you this entry back I know the
source was from this guy and I just send
a map reply back to the guy directly to
his the map you PI message is sent to
the locator address so it goes to on the
shortest path on the underlying network
better ji
okay thanks yes okay so the question was
good question is what's in the rib in
the all routers or AI DS the answer is
yes for that and the next hops are
basically IP addresses that are on the
tunnel interfaces okay so this guy just
says but this guy just said the next hop
to reach 10/8 is this tunnel interface
and then I just yes and then okay so
this guy when he gets the map-request
knows who's registered to him and then
he sends map requests he load splits
them across all the locators that are at
the site which are the etrs so we do get
so if you register into multiple map
servers you can get the map request load
going to multiple map servers and then
each map server then could load split
the map request to all the
etrs that are at the side so that's how
we are able to make the load in scaling
work a little bit better good Steven
okay go ahead the dominant Lane C is the
speed of light and how far you have to
go right right so what we did as an
experiment you'll see this next week is
my list broader is at my house in San
Jose
but my Eid space is not a ripe space and
we wanted to see what it would cost for
people to send me packets but have to go
all the way to Amsterdam to get my
mappings right and we saw you know it's
a typical thing you'd expect between 200
and 230 my milliseconds was the latency
and yes there are drop packets but once
it's cached it's okay now we the map
server spec does say we can do caching
in the map-resolver it's not evident yet
that it's going to be worth it because
don't forget once you everybody's
inclination
say just cash cuz we'll do it better but
no you don't want to because of that guy
changes his nappy
he might know all the encapsulator x'
and he can update them but he doesn't
know how the map resolvers in the world
that are cashing him so the mapping
update problem it's been a mapping
update is defined to be I'm gonna change
this locator set for this or I'm gonna
change the priorities or weights for
that you know use the mouse thank you
thank you so you want to make sure that
when these these mapping updates change
that you know who to update and you have
to do it fast for data center
applications we have to do it really
fast go ahead see an eID yes it won't
because by definition it wouldn't have
injected the BGP prefix absolutely not
because you're we're making the topology
map to that allocation we're not going
to allow you to punch holes and be like
the underlying BGP is today see since
it's all logical and you can point these
guys to any locator and that these
tunnels can be anywhere you want
we have flexibility without changing
physical geographical or topological
structure under underlying structure we
do yes you are
who Google you're my eyes
sorry eyes peas don't get eid-prefixes
then you're Aaron then you're Aaron yes
okay
you made you made the dependency occur
if I want independence from you the
provider I should go to him to get to
prefixes we want to decouple these
dependencies we want to decouple the
depends yet on the physical link with
the address linkage that you have it's
very important if you if we create new
dependencies here where we the
decoupling won't work okay go ahead
Scott so yes we're the boxes that are
put up and I have to keep a short answer
we're not gonna get through the
presentation we could talk about it as
long as you want afterwards but the
point is is they'll D be these different
hierarchical levels and there'll be
different organizations that will manage
boxes at each of these hierarchical
levels those levels are predefined to
carve out the aggregation boundaries of
that address space okay so if you want
to be a tier to this level at this alt
level here and you're going to be
accepting slash twenty fours for map
servers and aggregating them to slash
twenty ones up if you're at this level
and you Coogler could be at both levels
maybe GoDaddy's here in various signs
there it doesn't matter but they're
gonna provide things at different levels
and they're gonna try to create a
service model or now these things could
be monetized pretty easily because these
are standalone pcs that could be put
anywhere we think that the interconnect
providers or third parties will want to
sell these things just like den dns does
like GoDaddy does that sort of thing so
these this isn't changing the
infrastructure this is adding new boxes
to provide a mapping so
that can be monetized by various types
of organizations service providers can
get in this game because a lot of people
think service providers are going to be
out of the loop because you're just
encapsulating and using the poor core
service providers to to just move bits
and do nothing else but the service
providers could sell this service think
of packaging with bandwidth they could
package you with other services and that
sort of thing let me keep going okay
because quick question yes
so if I'm a big organization and I
decide to spin off or split off some
part of me right now I could just take
the subnets that or the more specifics
that that organization is holding and
announce them as more specifics and let
them be on their way for that's private
address if it's a the word the way that
works in the list world is if you get
those more specifics and you branch off
and you go do something else
you will then register those prefixes
register them not advertise them with a
routing protocol register to a map
server that will take the slash 24 or
more specifics so the aggregation could
be maintained in the core that's all
okay okay so let's get to inter working
before we run out of time we have about
15 minutes or so I mean I could keep
going but I don't know what the schedule
is so what's important about
interworking is how does a package
exchange work between anonymous site and
list site again pay attention to the
coloring here because anonymous site has
locator addresses which means their
addresses that are routable on the
Internet where the green the lisp sites
have green addresses which are e IDs
which are not routed underneath so
remember when a packet goes from
anonymous site to list side you got to
always ask the question how is it going
to get there if there's not a route in
the underlying network so we're going to
show how a packets initiated from
anonymous site to a list site and vice
versa okay we have two internet working
or inter working mechanisms right now a
local uncoordinated solution where you
don't need any infrastructure component
to make this work and we call it list
net we're probably not going to push it
very very much further
we've done some prototyping on it and we
use it but we think that really
new type of device in the network called
proxy ITRs in proxy ETRS will be used
and we think service providers and
hosting providers may want to do this or
interconnect providers because this is a
mechanism to attract traffic and that's
good for service providers we coin these
hitters and Peters but I will not burden
you with that name I'll call them proxy
ITRs in ETRS which you can imagine what
they do so inter working with NAT
basically when a list site initiates a
connection anonymous site it's a 1 0 0 1
eid going to a 6400 1
well that packet obviously can get to
the destination because 64 is underlying
routing so that just works
PACA gets there no problem now the
return packet cannot get there because 1
0 0 1 is not on the underlying router
the ID is not in the routing tables
right so what could we do and the ID ID
address must be translated to a locator
so when you egress from a lift site that
1 0 0 1 has to be translated into a
router bowl address and we're showing
right here that's being translated to 10
0 0 1 so when this packet is egressing
out through s1 s1 acts as a NAT replaces
1 0 0 1 with its locator and sends the
packet that means the returned packet
could come back because it's being
addressed to 10 0 0 1 which means on
ingress it just Maps it back that's a
kind of not necessarily a traditional
NAT but it's an address 1 the 1 base NAT
that could be used let's talk about the
cool stuff let's talk about building an
infrastructure with proxy ITRs so let's
say we have this non list site on the
left hand side that wants to talk to a
list site on the right hand side notice
that the addresses are in red and green
which means 128 that 1/16 is injected in
the underlying routing tables because
it's already there today or nobody talks
to that site we noticed that 2.2 / 16
when this site on the right goes to lisp
it wants to withdraw that from
underlying routing because it wants to
be a good citizen and it wants the
decoupling of addressing ok so how will
a pack a gift from a studi well let's
put these proxy ITRs in the
infrastructure there's all kinds of
service models in placements where you
can put these let's go
talk about that right now let's just say
we have these proxy ITRs that will
inject I don't know if you can see in
the middle they're injecting 2/8 what
they're doing is and hang on every word
I'm gonna say these P products are
injecting a very coarse route for the
Eid range you notice that all the sites
will be in slash 16 or whatever their
mask lengths are doesn't matter but it's
gonna inject almost a default route very
coarse so we're going to add a few
routes so we can save hundreds of
thousands of routes that's the idea
there's a little bit of tax okay now why
do we do that because we need to attract
packets from non list sites so what
happens when s wants to send a packet
from his locator to that Eid
we know that the packet will go towards
one of these array one of these proxy
ITRs there's gonna be a ray of ITRs out
there okay so the packets will actually
the packet will actually get to the
proxy ITR the proxy ITR will say ah I'm
gonna look and see if 2 2 2 is in the
mapping database and if it's in the
mapping database I know it's a lisp site
it's not in the mapping database
maybe it's routable underneath and I'll
just send the packet so in this case
when it's in the mapping database he's
gonna do the map request map-reply dance
like he does like he does he's acting as
an ITR at a site but he's doing it for
lots of sources he's a proxy and what
he'll do is he'll find out what the
locator set is for this particular
destination and then encapsulate to the
locator the source locator is his
locator in his infrastructure and that's
how the packet gets 2d 2d 2d capsulate
because he's 1300 2pac gets delivered
that's what proxy ITRs do questions yes
is that kind of a bottleneck
no it's an anycast service you put a
thousand of them out there and they
advertise 2/2 you go to the closest one
it's as simple as that if one breaks
what happens if a proxy ITR breaks well
the 2/8 goes away and you go to the next
closest 2/8 that's not what you meant oh
that's not what you had that wasn't yes
okay what do you mean
yeah I mean happens and what I
don't know you call your vendor and you
say fix it ASAP or I stop paying you for
routers I don't know I that's an
implementation specific I know those
happen in real life you're absolutely
right Steven you do not have to
configure the proxy ITRs on ass they
just inject packets see those those
purple routers there are legacy routers
they don't know anything that's going on
their old routers they're your site
today
all they're gonna do is look at the
destination address 2 2 2 2 and inject
it into the network and they will have a
route to it it's just not going to go
towards the destination it's going to go
through the proxy ITR that there's a
possibility yes but usually it's going
to be more specific
not less specific if it's more specific
then it'll take the native path and by
the way if it takes the native path then
you can reach the destination that means
this guy did not pull out his route if
this 2.2 / 16 gets injected then you
just don't use Lisp
at some point you're gonna pull the
prefix and you're gonna use Lisp and
we've seen some people on our network
say I want to play with lists but I
don't want to withdraw all my prefixes I
only want this section to do Lisp that's
kind of like what Facebook's doing now
they say I want this section to use less
but not that section over there so what
they do is they keep advertising there
more specifics in and they try to have
the PTR do the rest
right now that's a little bit dangerous
because we don't want more specifics to
be injected by the proxy ITRs right was
another question go ahead oh thank you
for my next slide I can move on okay so
my next slide thank you so let's talk
about when a lisp site initiates a
connection anomalous site and then we're
going to get into Stevens problem right
and I'm gonna solve his problem so let's
look and see here we have this source
and it's doing huh so we have this site
on the left hand side it's a list site
and it has it's both doing it has ipv4
and ipv6 eid-prefixes right and oops let
me go back one can't and let's say that
this guy will be here is anonymous site
and the guy in the bottom is anonymous
site it turns out that I wanted to show
you two examples at one time so the buff
sites ipv4 only in the bottom is ipv6
only now what we want to do is we have
these proxy ETRS now of course the
source site wants to be able to send a
packet anonymous sites right so what
happens is that source is going to
inject it to 128 one one one what's
gonna happen is this guy is gonna
realize that I could route it underneath
it will get there right because 121 when
one is read it's in the underlying
routing tables but if this provider a
does not like one zero zero one because
it's not in the routing tables it's
going to you our pfl and drop my packet
it's obviously not going to be an
underlying routing because if it's an
underlying routing we haven't saved the
routing tables and now we're putting the
eid-prefixes into the core and we don't
want to do that so what we want to do is
we want the ITR to encapsulate to this
kind of default or array of proxy ETRS
which it's configured so this guy knows
that he wants to send packets to 6400 to
with his own locator and he sends it to
the proxy ETR of course the proxy ETR
decap sleights and then can forward the
packet all the way the reason we put
this in place is because of the Sun the
Sun says we don't want our pf' to fail
there so all you got to do is
encapsulate it in a locator that this
service provider allow you to do I do
this right now at my house I can get
from my house using ipv6 to ipv6 Google
comm and there's no ipv4 between me
that's the next example I'm going to
show you but I can also get to Darrell's
house with ipv4 and I can load split my
traffic on egress from Comcast and AT&amp;amp;T
no matter from the
same host it doesn't matter what my IP
address is because that outer header is
always a source address from the service
provider that the packet is going out on
this is goodness this is where the level
of indirection gave you a benefit even
though there's cost level in the
direction as well you can't do net
easily when you're multihomed I'm gonna
keep that as a short answer let's go to
the next example
let me go the next example and then then
ask away so now let's say s wants to
send a packet to an ipv6 destination but
now this is an ipv6 list site going to
an ipv6 non-lisp site so what it's going
to do it's going to send it to 2001 to
128 : : 1 and it's in routable space now
it could have the same sort of problem
if it injects it into provider B it's
gonna drop it on the floor guess what
it won't inject it into provider because
provider B's ipv4 only service provider
so you no matter what you do at ipv6
ain't gonna go anywhere you could try to
send it over to link it's gonna be
dropped on the floor
so what s2 can say is I want to send it
to a proxy ETR but I'm gonna use an ipv6
packet in an ipv4 header we can support
all combinations 4 + 4 6 + 4 which is
this 6 &amp;amp; 6 &amp;amp; 4 &amp;amp; 6 all those four
combinations are supported because
they're just EW d s + locators we don't
care what address family they are so
what happens here is the proxy ETR gets
the packet he D capsulate sit and says
others is to 2001 128 Cohen : 1 and my
Peter has attached his provider Y which
does support ipv6 I can open up an ipv6
TCP connection to Google today from my
house which is a lisp ipv6 site to
Google which is a non-lisp ipv6 site all
because my DNS queries are on your
whitelist and you return to quad a
record to me thank you very much thanks
Eric wherever he is
so proxy ETRS are used for these two
basic features and you RPF has been a
problem Stephan and we think we can now
what we can do at ipv6 and we'll talk
about this more next week with the use
cases we okay there
here on public TV the router vendor
screwed up we should have we had 15
years to put dual stack into the core
and we couldn't do it for whatever
reason all the OS vendors have put ipv6
in their stacks we have all the N
systems that could do ipv6 so we have
all this ipv6 on the edges and we can't
get packets through the core if you make
those list sites and use those ipv6
addresses as e IDs you can use ipv4 as
locators and jump over the ipv4 Islands
okay so now ipv4 addresses will be used
to address sites ipv6 addresses which
are huge addresses large address space
can be used to address every single
particle on earth okay and you don't
need a locator for every particle on
earth you just need a locator to get you
close to the particle okay more about
this next week so I put so this
animation go back these stars mean that
these two systems have an ipv6 TCP
connection to each other
even though part of the path the the
packet path is ipv4 so let's look at the
entire architecture one more time in one
view but so remember we had that the the
mrs and the MS is over here on this side
and we had the alt thing not what we're
adding is the CP routers which are the
legacy routers the guys who are not
landless sites and then the P ITRs proxy
ITRs or proxy ETRS that are in the
infrastructure these boxes make up the
entire list architecture and how you get
access to the to the mapping database
system these proxy ITRs and ETRS are
attached to the alt because they must
send map requests proxy ITRs and ETRS
could send map request the map resolvers
to it's just a proxy ITR it's just an
ITR for lots of places but the
functionality is no different than it
being an ITR for specific site same with
proxy ETRS we just leveraged the basic
machinery you already had we didn't have
to make yet another device Steven
yes yes yes yes that's correct yes yes
so let me repeat all that for everybody
on the call so hurricane-like electric
provides ipv6 service I I assume you
meant Google when you said I or you
meant some service provider or something
I'll keep it that way
so what you're saying is you could
deploy these proxy ETRS on that edge and
you can have customers ipv6 through ipv6
list but they're encapsulating v4 to you
so you can D capsulate and deliver the
packets natively to ipv6 to the native
ipv6 host yes right then they're just
changing the type of tunnel it's calling
a lisp router where they have a dynamic
locator and by the way that hurricanes
Hurricane electric tunnel is a tunnel to
one point you can get you can give
people for locators and make it load
split the traffic across ipv4 locators
to get to the infrastructure go ahead
Dave
yes yes yes oh yeah yes yes I didn't
want to say that publicly but you can
okay so lisps security this is I don't
want to give Voltaire this credit for
this I want to give Dave Meyer this
credit for this because he always says
it whenever we try to build too complex
infrastructure he says the perfect is
the enemy of the good
so let security these are the things we
have and Lisp not too much just enough
we think ETRS you share keys to register
mappings to the mapping system we use
sha-1 when you decide what your Eid
prefixes are because you call a registry
and then you connect to your service
providers and find out the locators are
you got this binding now you go by
service from a mapping service provider
and you say I'm gonna register this
binding to you the keys gonna be one two
three four five they can figure it the
same way on the other end and they could
also configure policy on that end to
decide which locators you accept with
this verification key so these a ID
prefixes are not injected into that alt
PGP system unless it's verified by this
manual process this is good manual is
good sometimes the alt PGP is also
secured with peering authentication md5
sha-1 between neighbor pairing things
but when we have local origin type
certification and stuff in security SPG
with SPG for eyes we can actually use
that too if you think the security needs
to be put there don't know the secure
BGP stuff that's going on the ITF that's
all that's all I'm referring to there I
tears do not accept unsolicited eyes I
hope this is addressing your comment and
the point here is is that you must send
a map request and you create a 64-bit
nonce that you remember the map reply
must come back we are using this basic
concept called rot return ability if I
send the packet to Scott and he replies
back to me the packet probably got to
Scott we are not going to address any
man-in-the-middle attacks okay
so you can come and thought that after
the presentation I tears do not accept
coarser eid-prefixes that's really bad
because right now if I think
/ 24 and you returned a / a to my
map-request
then you're saying I'm gonna be the send
packets to these locators for all these
other sites that's a redirection okay
so we we don't do that because the map
server can help you here and you can use
additional probing to find out what the
real prefix is as long as you send map
requests on the alt it is secured the
prefixes on there have been accepted and
are secured so the lengths of the length
of the mask lengths for those
advertisements are real invalidated map
requests are rate limited okay- map
replies can source quench Eid sources so
if there's a source sending too many map
requests the ITR can actually stop
sending map requests for a particular
source and we have these negative map
replies can give you these actions
saying I want you to natively forward a
packet I want you to drop it back it I
want you to send a map request that's
what they and the map-resolver can said
negative map replies and that is the
mechanism to tell an ITR that a
destination is anonymous site because
once you find out it something is
anonymous site you don't want to
encapsulate because you don't know who
didn't capsule a - and there's not going
to be any ETR at the other end so you it
tells you - for natively underneath cash
management suggestions are provided in
aspect we could talk about that offline
that's the amount of security we have no
more no less so comments come later I'm
almost done we could talk about security
let's ben traceroute it's really
important to find the entire path from
source to destination so the trace route
does go gives you the path the Eid path
from the source to the ITR the path
between the encapsulator and D caps
later and the destination it works
really nice for ipv6 because the
unreachable message or the the time
exceeded message contains the entire IP
datagram for ipv4 the original source is
not in that Datagram so you have to do
some fancy caching and the
implementation to do that but that's
over beers - we have something called
leg it's equivalent to dig the domain
internet groper but it's the lisp
internet groper and it's a way to fetch
the database mapping entries
and we have both routed the both of the
the routers that we're shipping and
prototyping now supported and Dave wrote
a public domain implementation that can
run on on Linux and what this league
does is basically lick titanium DN list
for dotnet
is an eID so it's legging for this thing
it's sending the map request to that
map-resolver and the map reply came back
from one of the ETRS at the site in fact
it's the only one and here's the mapping
database entry here's the prefix for it
here's a locator it's up this is what
the priority is you can actually League
yourself and you can do it for ipv6 this
is basically saying am i registered to
the mapping database this is me looking
at my house for my ipv6 ew d and what I
get back is a map reply for myself
saying I have three locators on Comcast
and this 6to4 tunnel is an ipv6 locator
so it shows you how it doesn't matter
what the address type is okay okay so
that's it next week is going to be
really exciting because we're gonna now
so we've told you the what is less we
told you how is less how it gets done
next week we're gonna tell you why we're
gonna provide real business cases and
real problems that are gonna solve and
the key thing you need to remember is
that we are creating a level of
indirection and we can solve so many
problems with the level of indirection
and that we don't need to do hop-by-hop
routing anymore we don't need the core
two to join in on this sort of thing
that we're doing on the edges that's
what the level of indirection gives you
now by doing that we can move lots of
things around by keeping a IDs fixed
people like keeping a IDs fixed because
there's no management of that address
space you don't have to DHCP ie ID
addresses to host anymore the only thing
that changes is the mapping database and
the locators and you don't have to
inject more specific routes on the
underlying network so we're creating all
these movement type features what outs
bastardizing or unscalable core so to
speak so we're gonna demonstrate we're
going to show you the the dual stack
list network we have an all network that
we built we're in the third generation
phase and it's a dual stack so it's it's
support sending map request for ipv4 and
ipv6 map replies can come back either
way we know when the Senate
apply back if I get an ipv6 map request
over this infrastructure I know if I
should send back a v4 map reply or a v6
because I don't know if there's in the
ipv6 path so if I send an ipv6 map reply
back it may not get there so we have
mechanisms where you can hop over these
homogeneous address family type parts of
the network I will show you some content
and applications that are running on it
and we'll validating and testing some
economic and service models this
third-generation network is trying to
model these multiple service providers
mapping service providers and how you
would connect them and we can show you
the aggregation that you've been asking
questions about next week where the
slash 24 s get aggregated the slash 21 s
and how all that works and we can see if
there's a real service that people can
monetize and sell for it go ahead Scott
so Scott says I've been deep hearing for
a decade in the network Sam s you mean D
aggregate DD aggregating huh okay d even
D aggregating is what you've been saying
right and yes and then somebody may have
and the routing tables are completely
flat right there's a routing table entry
for Scott white somewhere which is it
shouldn't be Scott white it should be
Google right or something like that but
yeah yes and then the question was the
follow-up question was can I build my
own mapping database and provide service
to people you certainly could yes and
you don't even have to do it with an alt
infrastructure we're gonna show next
week well one of the use cases that
enterprises will want to use this so say
like a a Wells Fargo or any other Bank
will want to be able to have all these
branch offices they have thousands of
branch offices Home Depot Walmart these
retailers have thousands offices and
they want people to pick up laptops move
from one site to the other and they
don't want them they have to DHCP or
anything they want the same IP address
to be there wherever they move and they
want to build access lists based on the
employee so the eid is going to be
static this is a good thing static is
good
it's gonna be your network name for the
rest of your life this is IP number
portability just like cell phone number
portability and so wait wait
and so what's gonna happen is that
they're gonna build their own mapping
database system as well and we think
it's just going to be made up of map
resolvers and map servers and since the
ETR is registered to all the map servers
they stay synchronized because of the
registration mechanism we don't have a
cache synchronization problem among
those servers up there
so the answer is yes you could build a
separate mapping service yes go ahead
bits the question was is the Eid 32 bits
the ipv4 cid is 32 bits and the ipv6 Eid
is 128 bits ok so then the the real neat
is the use cases and we showed up to now
some multihoming and remote branch use
cases I just gave you one but we'll show
you for datacenter use cases which will
be interesting and we'll talk about list
mobile no and we're pretty excited about
that we are doing a public domain
implementation on Android and we're
doing we're building a lightweight in
Lisp implementation on Linux Android to
show that we can take the concept of
multihoming a site to multihoming a list
mobile node that's going to be really
exciting I wish I mean Dave is the
leader of that project unfortunately to
me at nanog next week but he'll be here
in spirit for sure now that you can move
a mobile node around and change its
locators but keep it CID fixed you can
actually change moving entire topology
you may have a topology of VLANs routers
VMs servers all with an Eid prefix and
you can actually move it to AT&amp;amp;T if they
want to provide a cloud service or or
Google you want to move it to Google and
I'm all that has to change is not the
internal structure and addressing of
that cough that thing that you're moving
but the locators that reach it so
there's a lot of cloud computing use
cases that you can use here as well
questions that's pretty much it for now
but throw the questions is this ordered
in any way questions order no way the
main spec the main multicast fact the
maps are respect they all expect the
interworking spec
the order is not in the way they were
written they're in the order that Dino
typed them in some logical order the
mobile notes pack is there in under it's
still individual submission was the
league's back oh well there's two types
of packets in the internet you know one
that sent 99% of the time and the other
that sent 1% and you know which is which
right so we multicast would be a nice
thing to talk about because we're
starting to believe that trying to get
just like it's hard to get ubiquitous
ipv6 underneath it's gonna be hard to
get ubiquitous multicast underneath
maybe unicast based replication at the
ITR is the best way to go and you build
a bandwidth demand service so the
sources could still multicast at the
site but when you want to leave the site
you can maybe unicast replicate and
we're thinking about can we do that
directly with Lisp or do you run this
new protocol called AMT then encapsulate
multicast in unicast and then run Lisp
underneath that so those are advanced
research topics for the smart people in
the world all the security stuff are
embedded in each one of those there's
not in a separate security draft right
but please look at it and hack if
necessary yes yeah yeah quite a few
security concerns where do I follow the
normal ITF process of mailing the
authors or of the drafts or do you want
a different kind of process I would
suggest you send comments to Lisp at
IETF torgue the working group oh oh
that's a bug not a feature yeah more
than welcome to send it to the authors
send it to the people on the set in
front of this list and we'll be fine
is there a better one to send it to
lispers at Cisco com
that's not a good one okay so Lisp ops
is one you know you set send it to one
of us for so or send it to me Dino at
Cisco calm I'll make sure I forward it
okay we have public list but it sounds
like you want to go a little bit private
and that's just fine thanks oh it to
slides and I think all three parts are
being recorded so definitely and if you
want a subsequent presentation where we
deep dive even further we can definitely
do that and we could actually log in the
routers and show you stuff if you're
interested we just want feedback we want
to learn more we like bringing new blood
into it because you especially guys that
have your kite type of experience
because there's new new new things that
we may have not thought about and it's
nice to bring fresh once see a lot of
this stuff is pretty solid in our mind
and we can articulate it well and if we
can articulate well then you can ask us
the things that we did maybe didn't
think about or why did you make these
trade-offs
so the feedbacks always useful so we
definitely encourage it sorry about that
okay thanks a lot
oh good oh so so the question was about
cache invalidation so we have TTLs
in the US the question we have TTLs in
the implies we're defaulting them to 24
hours now when a negative map replies
being sent we default that to 15 minutes
the negative map reply is not saying go
delete a map cache entry it's saying
that this a negative map reply is a
reply that's saying I have no locators
for you this is the action I want you to
do if you match this prefix drop
natively forward or send a map request
it's clear the next domain um yes okay
okay I'm not I wasn't sure
never there never unsolicited no
negative map replies so what happens is
I'll send a map requests for the
Google's IP address today from my home
Lisp router the map resolver will look
it up in the alt the only thing that's
in the all routing table are
eid-prefixes if it looks up that Google
destination address in there and doesn't
find it it must not be a lisp site so
the map resolver sends it navigated
mapped reply back to me saying in your
map cache put this prefix and it's a
course prefixed by the way very coarse
prefix so that one map cache entry could
hit most of the non list sites that
tells me that when I match that entry to
natively forward and don't encapsulate
okay now and when an ITR is directly
connected to the Alta can look in the
routing table directly but when an ITR
is connected to a map resolver which is
a Datagram it's a loose connection you
just send request to it like a DNS query
it doesn't have all the data locally so
it has to ask the mapping system with a
map request to see if it's a list of
site or not did I answer your question
on invalidation kind of okay okay thanks</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>