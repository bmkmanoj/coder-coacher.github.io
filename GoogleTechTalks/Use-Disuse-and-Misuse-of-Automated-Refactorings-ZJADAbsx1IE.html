<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Use, Disuse, and Misuse of Automated Refactorings | Coder Coacher - Coaching Coders</title><meta content="Use, Disuse, and Misuse of Automated Refactorings - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/GoogleTechTalks/">GoogleTechTalks</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Use, Disuse, and Misuse of Automated Refactorings</b></h2><h5 class="post__date">2012-10-29</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/ZJADAbsx1IE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">thank you David for the introduction
this is this talk is going to cover
mostly the devotee they presented
acceder
so this is more about the human side of
the factory the fracturing is known to
be a common practice in software
development this has been shown by
previously studies um programa nurse
refactoring their code frequently this
is an example of extract method
refactoring which can be done either
manually or using a tool today modern
IDE support Manufacturing's the first
attachment tool was developed thousand
fifteen years ago nowadays pretty much
every IDE support of many be factoring
two are the refactoring menus of three
popular Java IDE Eclipse IntelliJ and
netbeans and in that you can see the
list of supported patrons is pretty long
on the research side there is much
interest in automating more kinds of
transformation typically they identify a
recurring transformation in a particular
domain and offer an automated tool for
performing that transformation um
refactorings applying to various domains
like terrorism really vibrant but my
mission
over recently it's been shown that
programmers do not use this tool with
much so morphic hell and others showed
thousand nine that it is that the undo
the shaking the under utilization rate
of refactoring pool is about ninety
percent and this is based on a sampling
of about eighty commits of to eclipse
project ample de Fuca met and converted
that the eclipse refactoring history and
got it which apartment and enjoy
beautiful full of each one have been
done manual and it turns out about
ninety percent of refactorings have been
performed manually part of the tool
support so this raises questions of why
people choose to perform in fact family
even though won't report it this book
and that that's what derives our study
wana tan question so to answer this
question we conducted a field study
which had both quantitative and
qualitative component be about to data
collectors to capture the refactoring
events and we asked bonus programmers to
install our data collector and use it
for about three mo we collected about of
three thousand refactoring events during
1200 hours of programming of these
programs then we followed up with the
most approached the interviews line of
them
for about an hour oh so let's talk about
it about our participants we had 26
programmers and often we recruited from
recruited by contacting or the mailing
list of open source projects and this
remaining 16 will recruit from the
University of Illinois these were their
grad students or farmer research interns
add one so as you can see a dump 18
participant out of the 24 that he loved
the student had at least five years of
programming so here's an overview of
what data we collect on the left hand
side you can see an example of the data
that floating a spectator collect at the
top you can see an example of the
extract method refactoring performed on
a statement of the print info method and
at the bottom you can see d they are the
coding a spectator collects for this
refactoring event it captures a
timestamp the kind of the refactoring
which is G extract method um the
configuration settings what the user has
said on the refactoring wizard the code
snippet around the selection the actual
selected text the invocation method the
status is any error messages that the
refactoring tool reports to the
programmer navigation history is reports
on every button on the wizard is best
this allows us to measure the time the
user to spend on the refactoring
on items marked as 123 already captured
by eclipse we added the attributes for
27 and we captured this data by
instrumenting the Eclipse source code on
the right you can see another data
collector called coding tracker coding
tracker captures every edit in the Java
editor any deletion or insertion of the
character it captures that a change and
reports it and then we can lay a replay
it to reproduce the estate of the
program at any point in time so use this
data collectors to elect our
quantitative data and also to counter
interviews about the refactoring
activity that we use it to show them
this is whether this is the refactoring
that you did and you remind them about
that that isn't ask them questions about
their specific activity so both of our
data collected an open store we framed
our results in in a well-known framework
in the human automation interaction
community as use this use and misuse so
I'm going to present the results in
three sections first one being you you
should first to a programmer using a
refactoring tool perform a
transformation that could have been done
manually so we have data find a popular
method of invoking the fact you can see
the screenshot of this method this is
called quick assistant eclipse you can
select a piece of code and hit control 1
which involves the context-sensitive
menu that suggests the refactoring is
applicable to the selected context when
the user Kings single click on a
proposal and see a preview and if once
you can commit and perform the
refactoring so just a quick show of
hands how many people have used this be
sure to cook
444 another good so we counted the
number of times people perform the
factions within this feature it turned
out that thirty-five percent of the fact
they were performed is it quick well I
should note that when casters does not
support all refactorings but the ones
that were supported by it 3550 well if
you exclude renames from from this list
the rate goes how to fixify so we think
this is because rename is probably so
common that people just use the shortcut
key rather than going through the menu
this is a pretty significant portion of
the refactoring invocation takes about
nine interviews know about this feature
of eclipse so we asked and why why rely
on it so much well they give us live
ilysm this is a code from one of them
was theirs I'd like the Arctic
sensitivity of this invocation method
the fact that it does digest this upset
of all the refactoring that eclipse
before if now is a decision is ace of
and menu is no longer flutter well the
others mentioned are the reasons for
using this feature like Lucas's keyboard
tree event and it doesn't require much
configuration pretty much users default
options and that's programmer tweak the
result after work so about the
implications of this observation is that
other ideas like IntelliJ your net
things put up you on this feature to
to attract more fully understood
tactical and also because this could
have become more visible a political
detector gested the right now thump or
comments do not realize that the
potential exists just because no one
notify thing about this so call
detective would be a good place to
notify people
so the next category of a result is
about this year this use refers to
performing a refactoring manually in
spite of the availability of food to
pour forth to the idea we asked our
nearest three questions about their
their ameliorative with ditch
refactoring we asked them if they knew
that eclipses the port of the
refactoring the awesome if they knew
what the refactoring did and we asked
them if they performed the refactoring
manual so based on this interviews we
identified several reasons for disc use
the first one being need basically a
program install acid they don't use some
the patterning tool just because the
refactoring is not very frequent and
it's not worth learning the tool for
performing it just a cup of hot as an
example they told us that extract and
pull up are typically more often used
than in line and push down because they
typically a story from a simple design
and gradually generalize it the not
needing the fracturing is wonderful not
bothering to learn the tool awareness is
the second reason it turned out that
programmers are non avere the existence
of them automated Factory so apparently
when they are not aware of it they're
not going to do this the third reason is
name something tempo is bad name could
deter programmers from even trying out
the truth so here's a code from a
programmer who said if I don't realize
but if I don't I generally i don't find
them if i don't know what they do so and
7 i'll identify the 7 of 26 automated
factories had names unfamiliar to the
majority about unity the example is
generalized certified names are just too
technical and hard too hard to get their
function
so first is
and is another factor that feminist
demons use of automation in general
reliability is an important factor in
people busting automation research in
human automation innovation community
has shown if automation is not reliable
the human operator is done dude passing
the tool and stop using however another
thing has been shown is that if the
automation is highly reliable then
operator is likely to forgive the tool
for rare short pop and this seems to be
the case for refactoring although it's
known that the passion fruit of many
bugs the bug depilatories are below well
the dollar refactoring engine and fire
research has identified various partners
these engines they are fairly reliable
and none of the interviewees mentioned
mention the existence of bugs for not
using the refactor but for our
interviews invention is ability problem
complexity of if you are and overhead of
using it as reasons of not using it
exactly but it looks like usability
plays a more important issue plays a
more important role in the utilization
of the talking another major issue with
the factoring pool is their
predictability this is kind of counting
included because one would expect the
programmer to use a refactoring pool for
flex changing because complex changes
are for tedious and they're more
error-prone but it turns out that they
are also less predictable in the
refactoring trooper complex changes and
click changes for is less predictable
and programmers who want to maintain
control over their code are less likely
to use a tool that is part with it so
here's a grammar who says it but the
thing that the refactoring fool does
so complicated that it isn't easy to
figure out things that are all right I'm
kind of just wish to use it so wanted to
learn more about the acrylic effective
but its ability on the use of the time
we decided to assess the complexity of
the pattern tools we took it was kind of
challenging to assess the complexity so
we took it two different approaches one
quantitative and the other one quality
so the three of us rated the complexity
levels of automated refactorings in
Eclipse independently and then we stuck
together and agreed upon some complexity
level we rated each attachment as their
simple moderate and complex that's our
qualitative then we counted the number
of times that we factors in each
category will perform in our data you
can see the count in the count column
and the percentage and the third column
as you can see the majority of the
refactoring people that the pattern true
that the other form were doing simple
change fifty two percent of refactoring
is that is performed for simple and only
ten percent of refactoring to play so
this is qualitative she also took the
quantitative approach but counting the
number of lines and fires affected by
each autumn entity fact and it turns out
an eighty-two percent of effect that
eighty-two percent of the factory
affected at home picked by and
eighty-four percent affected just 15 the
majority are modifying a narrow piece of
code so there could be several reasons
for it like as I said at the beginning
there's may not be enough opportunity
for performing complexity factual on it
so that could be fun and the other
reason you could just for the Kadena me
but
food for 50 factions are not predictable
in our facility on that something good
well the pattern full provided feature
perhaps to make the film or protect the
another programmer to preview the change
both witnesses and the refactoring
lizard provide producer to the faction
before work however notice that people
really treated it thinking about 1% of
the fashion of the treatment just one
and in some cases Eclipse forces it
because of the actual invitation of
video by the programmer throw it up so
we ask them gasps banana why don't you
the preview and the dimensions their own
reasons the preview is pretty butter so
it's a significant overhead to read it
an interpreted but people typically tend
to just perform at so the first power
mentions that he prefers to perform the
refactoring and undo and redo it to to
examine the effect of it on the code
rather than studying the treatment and
the second code is saying it taking
sometimes it's easier just to perform
the refactoring manually and evaluate
the design as I go rather than
explaining bending are leaving the chain
another barrier to using a detachment is
a configurational here is the
configuration dialog of the exact
interface user we measure the time that
people tent on the factoring different
as a proxy for the conversion of the
head eighty-two percent of the
configuration time of performed in fact
we're at most eight seconds so this lip
reading period kind of shows you the
amount of time that people other way on
our visit and if you look at the best
frequently use the factoring like push
down they have a pretty high integration
but to push down it's about for the nine
second the configuration dialog distract
program is from their interactive editor
and force them into a model by witches
and chop chop to the programming
workflow
so identified awareness has more reason
for gamers do not view that concludes
much um perhaps a good idea ability to
facilitate programming changes the
knowledge about the tactical previews
are not effective in making the reply to
improve more predictable so we need to
investigate alternative method for
reviewing it back frame and we should
come up the inlet configuration back the
reduced configuration overhead so the
last category is we define misuse as
using the refactoring tool in a way that
is not recommended by the design here's
an example if so the department pool
check a few preconditions for of doing
the retract the preconditions don't fall
then leave your the program and change
for their maybe compilation father so
they will want to use it about the
columns and break them is warning error
or fatal error based on very different
all when did when did the patterning to
the fourth is warning on an error it's
no longer guarantee
but surprisingly most at the time people
go ahead and perform the refactoring
even though it's not guaranteed to be
there as you can eighty-eight percent of
the time that issue the one in there
before six eight percent of the fact
better so this kind of is in points that
behavior preservation may not be the top
priority a programmer in using
department also perhaps to their other
aspects like predictability or the
equation in the designer people rather
than focusing too much on the behavior
preservation here are four of the 15
most three point of attachment messages
the most frequent one is the warning
that this code modification may not be
accurate as affected resource as
compiler people typically ignore this
message because the method is not a very
detail it doesn't do enough information
about what to do it at the bottom you
can see another warning there's a
variable name is always defined
invisible with so does something that
could affect the behavior program
because it changed the bank
another example of museums that we
identified is an unjustified youth with
the door here the program is using a
repairing to change methods digna chur
to modify the access modifier up a map
that we thought use at the tool for
doing that a simple change before
fiberglass is involved with why did you
choose to go through the factor menu
like this the patch rank and then figure
it make a change that it kept on
manually very football / policy would
like to use the diffraction tool
wherever possible there are cases were
using the de factor improve for even
such a simple change make sense where
there are corner cases and there might
be a risk to change the today programme
but the case was talking about was a
simple case and it was not justified to
do before so we kind of bothered this
one ok go for this
so our data shows that programmers of
and to ignore warning error messages
have one way to this kind of excuse is
to reduce this rate of false warning so
that we are reducing relevant messages
that chemistry and it might be worth
investigating other methods of defining
thief but instead of just reporting
messages in error we could let the
programmer continue with the cook with
the refactoring and validate the
refactoring after one invite them in
fixing places and my attention so the
refactoring tools have their own
limitations their checks are not perfect
and to avoid excessive trust in these
tools we recommend the trainer's born
program is about the limitations of the
pool so that they can use a little
so like any estudiar estudia has its own
limitation I'm going to go over a few of
them some of our participants were at
the University there's always a question
of how the presented upon your
programmers warranties dissident but we
think that they were close to
professional status the due to the
uncontrolled nature of their study the
number for having hours of our
participants very dif that affected our
results but it's not what is all
specificity readily aggregated them
without the pole
so now I'd like to talk about some of
our vision these are not part of the
paper um recent study that thought based
on our previous life so we wanted to
rethink design of the fashion based on
what we observed in a previous study we
consulted another source of refactoring
data from the foundation they collected
refactoring event from hundreds of
thousands of users / up appeared
confident with this data and we analyzed
refactoring data on the left hand side
you can see a graph that shows the
number of implications of the time used
for example you can see it 98.6 percent
of the user involved at most 50 be back
and on the right hand side in the ninety
eight point nine percent of these users
use advanced five different kinds of
fact so this shows you how limited is
the refactoring fluid in the body so we
wanted the how people form let's change
so we thought we hypothesize that a way
to do it would be to compose the very
smart the fact you are mostly interested
in more expert refactoring users as
accomplished that they are the one that
changes you need to go so we limited
this data set those who invoke the
refactoring pool at these 50 times and
do at this five different kinds of our
community fact we limited the status
that delivers it as a result we have the
total of a hundred and four thousand
refactoring event from about a thousand
programmer we took the refactoring
events and take the time window of ten
minutes
you put all the refactorings that
they're involved with in this time we go
in a single that and then ran a data
mining algorithm find the most frequent
steps of the faculty to stay here you
can see the table that that's the most
frequent basis test of the factory the
one thing that can be seen is that
programmers campania facturing is in a
variety of way second is that some
combination patterns are more frequent
than in the visual refactoring for
example if you're looking pull up for
the bottom there's several composition
pattern that are more frequent than the
full of the factory so it shows the
frequency of compositions of the time um
equips they did not have enough context
but we could not tell why people compose
this fact did not analyze so we
consulted our own data set which can
think more actual information all data
set has no context to it allows us to
understand the composition patterns but
identify civil function one being
composition over configuration so we
notice people sometimes composer
factoring is to avoid the configuration
overhead like instead of configuring the
reassuring wizard for pull up to pull up
two methods from one class to another
there they perform two separate full of
the fact this is going to reduce the
version overhead by composing to repack
another reason that we found for
composing refactorings was when you
factor design pop but there is no tool
in Eclipse for referring to the template
method so programmers instead compose
extract method and pull up to them like
this
closely related entity there are several
examples for it one that I think is that
there are entities that are related but
not by binding binding for example one
you keep the programmer renames the
field of a class and then goes off and
renames the corresponding parameter of
the method of the constructor these are
closely related but not really defined
so there are other uses but I'm going to
hold it so the lesson is that people are
already 45 so we decided to we thought
how can we leverage this practice to
come up with another way of doing the
fact the conductor disturb a deferred
markups of our pool and conducted an
ongoing survey asking programmers to
compare two interfaces of the time
depict from the more complex and less
often youth Department will eclipse
mainly extract superclass and we showed
this to each other
good discipline so here's the screenshot
of the existing refactoring we have
simple past Daisy's with the single
method water for gambar opens the
refactoring menu likes to extract stupid
monster factory figures it the first
page of the configuration back in page
find any previews of your factoring and
performs the extract super class
factoring is going to create a new class
flower and move the water math nectar
the phone Daisy review clock so that's
from deep this community and then you
showed our interface which uses the
composition is start and quickest is to
do the same effect so here's the class
is fast easy with single method the
programmer invokes the quickest this
menu the lex first action which is where
the new superclass an empty superclass
will be put it in the fine programmer
can rename it flower
and then like method water and move it
to the immediate superclass which in
this case will be flowers now we have
the two classes in the same five there's
another action to do the time when
you'll find I'm coronary get the stain
is not having new class at the super
class ethnicity so we can't like a
disturbing and we analyze the first from
hundred responses depend on that the
draw do discipline prefer the
traditional approach it followed up with
the data study the example in despair
was going to temple because we wanted to
make it accessible to programmers
filling out the survey online in the
latter study used an example from the
refactoring to design pattern for for
doing the composite effect so we took
this example and applied it on an open
source product HTML parsley and we
divided 13 professional programmers you
try out the two different interfaces on
this piece of code you started talking
about an hour so they try the tools in
random order and then we asked him about
the Juniper ask them which one gave them
will control which one they thought they
more confidence about the correctness of
the refactoring turn is it juice which
one day far had more opportunity
which one is the most terrifying again
of both just participants differently
compositional start so here are some
qualitative comparisons of the book but
you asked before of what they write from
this started out in each approach these
are some of the people so this coat is
saying the second composition onstar
provides a more stepwise deal giving me
more immediate feedback as well as an
ability to run my tests at each step for
the language thank you further the
battering in the right position so this
supports our hypothesis that the
composition on the style is more
predictable thus it performs a small
change initiative and it will control
the programmer but this is a complaint
about the wizard but it gives its
inclusion at first between everything
the outside is that there were a number
of options that i read didn't quite make
it and so i guess they don't have to
worry about that and of course i finally
saw that that wasn't true did things
that I completely didn't expect and it
doesn't get them so again this is
supporting what we found in our previous
that without the ability of the school
and the overhead
so but the compositional in start has
its own shortcomings for example here is
a post from participants saying that I
often extract common superclass from
multiple classes the nice that is the
wizard can who can operate a multiple
end of conducted last something that is
kind of difficult to do is in the
quickest another common is that it's
compositional started doing these
transformations in small steps and they
are kind of independent chore does not
have a quick view of the big picture
sewing so the concern here is that it
facturing when you not be complete on
the other hand of wizard kind of provide
some level of guarantee about the
contributor to the fact so dinner some
of vanity is advantage on the two
approaches overall the thing the
compositional start is a good complement
and is likely to improve the utilization
rate of the time so I'd like to finish
up you
takeaway messages I think these are
studies show that automated rectify
friend more than rewriting code and
providing a deflation guard the honor
think about paternity issues like
predictability will take forever Thank
You Christian talk to really get people
to go to become or factor and the
transformation the dresser and our
studies show that programmers the
compositional in fact roof over the
thick one you think that this is a good
alternative way to bring back change in
a protector</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>