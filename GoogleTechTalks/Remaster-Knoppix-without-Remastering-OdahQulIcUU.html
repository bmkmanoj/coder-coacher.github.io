<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Remaster Knoppix without Remastering | Coder Coacher - Coaching Coders</title><meta content="Remaster Knoppix without Remastering - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/GoogleTechTalks/">GoogleTechTalks</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Remaster Knoppix without Remastering</b></h2><h5 class="post__date">2008-04-11</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/OdahQulIcUU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so in addition to writing several books
kyle is also a columnist for linux
journal and has been featured in several
other publications he's also a senior
system administrator for quinstreet and
he's the current president of the North
Bay linux users group please welcome
Kyle Rankin glue ok so um my name is
Kyle Rankin and I've been actually using
knoppix for quite some time started off
when I was trying to look for the nice
live demo CD to introduce people to
Linux and then solve a lot of the
recovery abilities that it had and so I
started using it regularly and then
eventually wrote a couple books about it
and a bunch of articles but today I'm
going to focus in on a pretty specific
thing how to remaster knoppix without
actually going through the remastering
process so here's pretty much the agenda
for today so for first I'm going to
cover a traditional remastering what
does that look like and some of the
downsides to that and then because of
that why you may want to rematch why you
want to remaster without remastering
what does that mean why you may want to
do that then I'm going to cover a couple
different methods you can use there's
not just one one of them is the
persistence features that knoppix has
built in and has for some time talk
about how to use the save configuration
and tweak and the persistent disk image
all ways to do that then I'm going to
cover how to change the actual boot
settings it's not books boots it's
another common thing you may want to do
when you remaster then how to tweak the
anit rd the initial root disk that the
colonel uses and what you can do with
that finally I'll finish up with a how
to use custom boot scripts to change
what knoppix as a boot and then follow
up with an example where I turn knoppix
into a webcam with very minimal code so
first it's worth talking about what
knoppix actually is in case you're not
never used knoppix before so basically
what it is is a complete linux
distribution that runs entirely off of
the CD or DVD and these
is but there's a lot of different things
you can do with the bank there's a lot
of different software included on the
disk it's it's very general purpose so
among the things you can do with it is
that you can use to demonstrate Linux
you can use it as a portable linux
distribution and that's actually how it
was created was the idea was to have a
CD that had all of the Linux tools that
Klaus kenapa needed and be able to take
those tools from computer to computer to
computer and have them all at his
disposal without worrying about losing a
laptop or losing a desktop or anything
like that so another thing you can use
use it for is to install Linux this was
particularly popular back before debian
and ubuntu came along with better
installers a lot of people would use
knoppix because it was the easiest way
at the time to get a debian system up
and running you can use it a lot for
system administration I use it a lot for
that and as a rescue disk it's a great
tool for rescue a lot of people use it
for live CD creation also i'm going to
touch on that a little bit a lot of
people use knoppix as the launching off
point a couple hundred people have used
that actually to create their own
knoppix based live CDs and they've gone
through the full remastering process to
do that and there's tons of other uses
for it now a traditional remastering
process basically what you do is you
copy the entire knoppix file system to
the disk when knoppix boots it has its
entire file system in this compressed
loopback file it bounced that you have
to mount that and then copy the entire
contents so for a cd-rom that's about it
ends up being about two gigabytes of
uncompressed for the DVD it ends up
being around 10 gigabytes you copy that
somewhere to a filesystem a hard drive
somewhere then after that you see a true
into that file system and then you
perform any changes so for example you
can add and remove packages you can
change configuration files a lot of
times what happens when someone uses
knoppix over time to say this is really
great but if only it had this one extra
tool especially for the cd-rom because
there's only so much that can fit on
there they've had to make some choices
and sacrifices so a lot of people use it
and say if I could only have this one or
two extra things on there or if it only
did this at boot time it would be great
and serve all my needs and so they take
it and they add remove the packages that
they need
it basically acts like any other Debian
system you can run apt-get and remove
packages for ad packages after that the
you the next process is you would exit
the chroot environment then you go
through a series of really long
command-line arguments to create a
compressed loopback file system and and
that takes depending on the disk about a
half an hour depending on the computer
to do then you create an iso out of that
compress with that compressed file
system and the rest of the files that
make up the knoppix CD that you can test
it either on the disk where you can burn
it to a CD and try it out but there's a
lot of problems with that process
hundreds of people hundreds of people
have done it and released their discs
out to the public and many more of tried
it on their own and either didn't
release it because it was just for
personal use or because it was really
hard to get working there's a lot of
problems with traditional remastering
first it's time consuming every time you
want to do this it takes X amount of
time to just copy all the files over to
a hard drive it takes a lot of time to
actually compress that into a loopback
file system it takes a lot of time to
then make an iso and test reboot and
test it and make sure everything works
and then it's really complex there's a
lot that you could there's a lot of
mistakes you can make because knoppix
says a number of interesting things at
boot time that a lot of other Linux
distributions don't there's a lot of
hardware detection that goes on there's
a lot of different things that you
wouldn't normally find in a everyday
install to disk linux distribution the
knoppix does so it can be complex when
you're trying to change that on the
interactions between your changes and
the actual knoppix disks sometimes are
unpredictable there's so there's a lot
of trial and error involved when you end
up remastering knoppix all the times
i've done it it's been a matter of i
make one change create the file system
do everything you know an hour later I
actually can test it oh I made this one
little typo then I have to go back and
do it all over again because it's not
there's no easy way to really just make
one little tweak you have to go through
the whole process their spec their space
limitations like I said the CD even
though it compresses down to about 700
megs when it's decompressed you have to
have at least two gigs
to store just the one copy of the file
system extra space you end up needing
about four gigs of space to store the
entire thing when you're all said and
done then the dvds even works like I
said you need 10 gigs just to start to
copy the file system over and you really
need more like 15 or 20 nowadays it's
not as huge of a deal as it used to be
but still that's a lot of space you have
to give up on your system just to do a
remastering it's also difficult to keep
up to date so knoppix used to be a
really fast moving target there would be
releases every every couple months now
it's not quite that way we've had the
last couple of years it's been one
release a year more or less they're all
the same what ends up happening is you
see so many Forks off of knoppix because
people will make an initial change they
change a couple things even if they do a
sort of a big change they do that and
then a couple months later a year later
knoppix releases another version well
now they have to figure out how to
either upgrade all of their changes
remember all their changes then adapt
into the new knoppix version and then
have to deal with all that or what a lot
of people do is they end up just
sticking with whatever version they have
and in the forking further and further
and further off of the mainline knoppix
that's okay but it you know there's a
lot of benefits that Klaus ins of adding
each year that you end up missing out on
so I've seen some projects they end up
you know finally they scrap it and then
start over again and add their changes
or other ones like morphix have created
their own separate distribution where
they sort of stay in line they sort of
don't like cluster knoppix is a good
example of one that I think is still
today running knoppix 36 which is about
three or four five years old now okay
live CD sprawl there like I said there
are hundreds of live CDs out there that
are in optics based and a lot of them
just do a couple different changes
there's a like five or six that are the
security live CD so they have all the
same security tools on all of them a
couple different tweaks somebody uses
fluxbox instead of KDE or something as
the desktop environment but other than
that they're pretty similar so if you're
using them as if you're a system in say
and you hit use knoppix for more than
just one reason or use a live CD you
find yourself carrying around like five
or six different live CDs each for the
specific purpose even though knoppix for
the most part can do most the purposes
and with a couple tweaks it can do the
rest
so what I advocate and what I've been
doing especially recently is remastering
knoppix without actually going through
that time consuming process so what do I
mean when I say the remaster without
remastering basically what i mean is
changing knoppix its behavior changing
its configuration files consider without
actually touching the knoppix loopback
file system so that's the big on a CD
it's about 700 Meg file called knoppix
in all uppercase that sits on the CD and
that it decompresses and mounts that
loop back and that's how it accesses all
the files when you start getting in and
mucking with that file you start running
into all the trouble i said before but
there's a lot of ways you can tweak what
knoppix says without touching that file
period and that's what I'm talking about
it's a lot faster most of these changes
are taken only a couple minutes to do
and then a couple minutes to try out
it's a lot faster process so it's
simpler so there's less you're less
likely to make a mistake and even if you
do because it's faster there's still
trial and error involved with any of
this but you can the iterations are much
much faster when you do it without going
through the full process plus you can
just carry one disk around most of these
remastering processes can be stored on a
separate USB Drive if you want to burn
it onto a DVD you can do that if you
want but still the idea behind this is
instead of having five different or six
different live CDs that you carry around
all the time you just have one knoppix
ed and then your USB key with all of the
different types distributions you've
made that's forked off of it the other
nice thing is to talk about this when
you upgrade with knoppix upgrades rather
a lot of times is depending on what
changes you made it's a lot easier for
them to be ported into the new knoppix
because you're not actually changing the
actual file system you're making changes
in addition to that it's a lot easier to
gauge the space one of the problems when
you do a remastering is that it's hard
to predict how well it will be
compressed so a lot of times and clouds
does a lot of interesting things on his
side to optimize space like he'll go
through and delete unnecessary man pages
and he'll do a lot of other things to
free up space that you may not remember
to do when you're doing a remastering so
what will happen is you go through all
this work you think you've deleted tons
of files you'd like to remove Emacs
which is one of the bigger ones on the
CD
you remove that and you have plenty of
free space you think and then you then
you compress everything you have it up
and running and then it's like 740 megs
now so it won't fit on your regular CD
you can either decide to expand it or
you know you have a couple options but
so then you have to go back in shrink it
down again with this since you're not
dealing with the compressed file system
you know that say you know that I have
20 megs to play with give or take I know
that whatever I do I can see right now
whether it takes 20 megs and I don't
have to wait for the compressed loopback
file system to kick in and then with a
DVD the actual knoppix DVD has a lot of
free space on it already so there's a
lot of wiggle room if you'd want to do
something based off of knoppix if you
use the DVD you can fit a lot of extra
things on the DVD and then of course if
you use a USB key it doesn't matter
that's the size of whatever your USB
Drive is you can just fit everything on
there it's a lot easier to update am I
great because a lot of times with what
these scripts will end up being is just
a number of settings maybe a shell
script or chew that you're running that
install packages it's a lot easier to
upgrade because if nava comes up with a
new release and there happens to be a
new package for you to use you can just
replace that one package filing your
script more or less can remain the same
so it's a lot easier than having to go
back into the file system and make a
change every time knoppix updates so now
I'm going to talk about a couple of the
different ways you can do this probably
starting from easiest to most difficult
but again all of these are relatively
easy but the first one first method to
remaster is called is the save
configuration script it's actually a
really classic knoppix script that's
existed as I can't even remember when it
didn't exist but it's been at least
since like the 30 series if not before
that basically the script is run by
typing save config or there's the if you
want to click through you can click
through and get it although I notice
actually that on the very latest 531
that just came out this month that the
script existed but the menu wasn't there
anymore I don't know if that was
intentional if they're deprecating it or
if it was just a mistake well i guess i
will find out either on the CD release
the next release basically what it does
it pops up when you run this it pops up
a little gooey on your desktop or
actually if you run it in the on the
terminal
terminal without the GUI it provides
this little in curses interface and it
allows you to save a couple you can
choose what to say but you can save
personal configurations let's say you
make a like all of your dot files and
all the dot directories that you create
any save settings you've changed in
Firefox or anything like that you can
tell it to save that you can tell it to
save all the files on the desktop so say
you're working on something and you want
to resume later you can save all the
files on the desktop all of your network
settings this was actually way more
important in the past when it used to be
a real big pain to get like especially
wireless cards working on a network and
you sometimes you had to go through a
certain level of kung-fu to get
everything working you had it working
great and then you reboot knoppix and
all that work is gone you have to do it
again so this kicked in so that you
could save all that work and then apply
it later graphic settings again this is
some of these were more important in the
past when a lot of the auto-detection
wasn't where it is now but a lot of
times you had to jump through a ton of
hoops to get X up and running on your
particular video card so that what it
would basically do is is a backup all of
your ex settings and so it could reapply
them later and then other settings so
that is anything you may have had to do
a lot of work to do that knoppix could
automatically do like printers and
peripherals that sort of thing this
script can save all those files for you
so you can resume later basically how it
works is it creates a file called
configs tbz it's a compressed be zipped
tar ball on your shows and media when
you run the script that actually will
detect any potential media it can store
this on so if you inject in put in a USB
key it will detect that if you have a
hard drive on the system with partitions
it will find those and list those you
choose which one you want to use and
then it actually will create this file
on that media it also creates a file
called knoppix SH what that is is
essentially just a shell script there's
a little bit of logic in the beginning
but essentially all it does is on tar
that tar ball then at boot what you can
do is there's a little cheat code you
can use at the boot prompt when you boot
knoppix that says my config equals in
this case dev sda1 if that's the device
of your USB Drive
and then it will go through and boot
that or you could say my config ich will
scan and then knoppix will actually scan
all available media for the knoppix
itÃ­s a script and then run it if it
finds it one of the other interesting
things about this is you can actually
store multiple configurations in nested
directories on a USB key for instance so
say you make one that's this is my
security one I have all my security
configuration saved here this is one I
use for my network configuration at home
and there's one for work or wherever you
can save those nested directories and
then in the mic and fig you just list
the directory structure underneath dev
sda1 you know / sysadmin and then it
will look there so a boot you can
actually sahgal between the different
configurations knoppix actually execute
this at the very end of the boot process
so if you watch it boot it'll get all
the way to right before it starts X and
then it will run this script so if
you're trying to think of when you want
to start doing things to knoppix at this
point most the network is generally up
at this point all the file systems that
are going to be mounted have been
mounted all the drivers have been loaded
so if that applies to what you're trying
to change then it boots it at the end so
this is a good place to do a lot of
changes oh alright said this before but
you can store different configs in
different directories so this is how you
would do that I've used that in the past
especially when it was really difficult
to install the new software on a life on
knoppix live I will go through all the
work of setting it all up and installing
everything and then save it to different
directories so I could didn't have to go
through the work again now it's a little
bit easier now one of the ways you can
use this to remit when the best ways to
use this to remaster is to tweak it
beyond what it normally can do so by
default they can save all of your doc
files and some pretty basic things but
you may decide that you want it to save
not all your dot files but just a couple
or you know not every file on your
desktop but just a few so what you can
do is one way is you can start you can
go ahead and go through the process of
creating one of a config and knoppix ssh
file you can then you can extract that
the tarball into a temporary directory
wherever you want to do it modify it you
know change some of the files delete
some of the files from that directory
and then recreate it
or or if you want even another way to do
is you can actually create your own
config tbz you can either look in the
config of the script to find out how
knoppix creates it or you can just run
this command which is how they create it
basically type this command in and then
at the end the argument is your
directory structure so in this case all
I'm backing up is Mozilla my mozilla
config but you can add it you know it's
just at our command so you can add
whatever directories you want to add or
specifically can exclude a lot of
directories so you don't if you have a
limited space you don't have to bother
with that in addition say you have a
config that you've already set up and
then you decide will it be really nice
if I could add some files to this after
I've used it for a little bit well to
add files basically you unzip use the
ends up to to unzip the tarball then you
at our command with dash our option to
add whatever files you want to add so it
pretty general Youssef are like I said
there's not a whole lot of magic here
this is all pretty standard Linux
command line set that he's doing so he's
not trying to do anything too crazy to
delete files similar process you unzip
it and then you use the hard delete
command to delete those particular files
from the system then you just have to
recompress the tarball and then rename
it so that it looks the same to the
knoppix script and then you're done now
that's probably the oldest remastering
knoppix without remastering script that
they put they came out with there's
another one there's another method they
have they call persistent disk image
this is actually a pretty old script to
it used to be called make persistent
home and there's the really long command
name for it what it essentially did was
it created a loopback filesystem on some
sort of media like USB key or a hard
drive and then copied your entire home
directory over to it so you would say I
want a 64 Mick persistent disk image or
back when that was a huge USB key I want
a 30 meg us you know persistent disk
image it would create a loopback file
system mount it and then rsync
everything over from your home directory
on to this image well then what it would
do is at boot time it would mount that
and
and replace your regular home directory
with this USB key and the idea is if you
change your anything on your desktop any
of your settings all that stuff gets
copied over when you boot it now
accesses this home directory and all of
your settings have our persistent any
change you make right now when you stop
knoppix and reboot it automatically gets
saved and then then it gets unmounted
and then next time you boot it's right
back where you left it with the complete
the the safe configuration from before
it only updates whenever you run the
script or whenever you update the
tarball this with this method whenever
the the persistent disk image is mounted
any changes are always being made to it
now this is the old way to do it they
changed what it did because of aufs or
also a union when union FS came into
play which I'm going to talk about here
now it totally changed how this how this
was used because aufs totally changed
how knoppix which use period it opened
up a whole new dimensions of how you can
use knoppix so a little background on
Union FS first is created in 2004 so
it's relatively new technology what it
lets you do is essentially merge file
systems on top of each other relatively
transparently to the user so one of the
one the major applications at first was
in FS so say you have a couple of NFS
servers that you're using for home
directories when the one of the problems
may be trying to get although if you run
out of storage you may end up spanning
that across multiple file system or
multiple computers and then you have to
worry about well if I user logs in how
do I make sure that there that the NFS
mount that they get has their home
directory on it well with union FS you
can just merge 456 however many NFS
shares you want all on top of each other
into your home directory and then if you
have a through m on this server and n
through Z on this server they both to
the user appear to be one consistent
unified file system you can even use it
to merge read-only and read right file
systems on top of each other and because
of that capability that's where knoppix
came in oh here's the URL for it if you
want more details about the project
knoppix started incorporating this
started with three knoppix 38 so at this
point that's probably two and a half
maybe three years ago they started using
the
technology basically what they decided
to do is they've always had a ramdisk
and that's always been a place for the
home directory has been stored on ram
disk some of the etsy has been sim
linked over to the ram disk so you can
change some some essential settings
about the system and you can write to
your home directory but certain really
important parts of the file system like
the user directory will read only
because the livecd you're running off
the CD what are you going to do what
they just so you couldn't actually ever
install new programs on knoppix you had
to go through this hacky method of
installing them to your home directory
in this weird place adding that
directory to your path and then you
could sort of use them and but some of
them with linked against other libraries
under users so if you wanted to you
could hack the binary and change the
location to all kinds of messed up
things to your system what they did
instead was they just take the ramdisk
allocated however much they can mount it
on top of the root I'm emerged the
read-only in READ&amp;amp;WRITE filesystems on
top of each other so basically what what
that means is you can now write anywhere
on the live CD you can treat it like an
installed linux distribution and not in
union FS or aufs now we'll figure out
what to do so if you decide to do a
write it does it puts the right into the
readwrite file system if and then when
you do a read later on if that file
exists on the readwrite filesystem it
gets precedence or if it doesn't then it
goes through and gets the read-only file
so that way like I said you can run
apt-get aptitude synaptic any package
manager you want if you want to insult
nvidia drivers or something which aren't
included by default just download those
and follow them follow their how to you
can treat it like a normal linux
distribution you're basically just
limited by how much ram disk you have on
the system obviously we only have one
gig of ram in the system and you try to
install three gigs of files it's not
going to work but that's pretty much the
only limitation to it later on a ufs was
replaced or union FS was replaced by
aufs which stands for another Union
efest because we like recursive acronyms
and you can go to aufs sourceforge that
i met to find out more about that but
that's what they replaced it with i
would say sometime maybe in the 5-series
beginning of the five series of not
delayed before series they did that
because of because of Union efest and
the fact that you can merge these file
systems the persistent disk image
changed so now they call it knoppix make
image and they actually say instead of
persistent home director they say
persistent knoppix disk image
essentially what happens when you run
the script as you get a GUI that pops up
and ask you how big you want to make the
loopback file system but what it does is
it makes a complete copy of the ram disk
now so that includes any rights that
you've made to the system any changes
period now get copied to this so if you
live install something install installed
under user been whatever that gets
copied to this Ram disk now if you want
it actually actually will prompt you if
you want to encrypt it with aes-256
encryption you can generate a passkey on
the fly there and encrypt the entire
volume if you want that extra level of
security and you don't even have to use
a cheat code anymore for this what
happens is if you have any disc inserted
that happens to have this persistent
disk image available when knoppix boots
it automatically scans in the text
they'll those and then it presents you
with a couple of options so the first
option there's a couple that you can
toggle through you can select one or
more of these options first one is home
essentially what that if you select that
only the home portion of the RAM this
will be mounted on in use by knoppix so
save save all kinds of things use
install programs but you only want to
use your home directory settings right
now toggle this and only those will be
applied if you toggle system essentially
what happens is instead of using the ram
disk at all it actually will mount that
entire file system using your loopback
file system so that means everything
gets applied period etsy settings any
programs you've installed your home
directory everything gets applied if you
tell it to overwrite this is off by
default and you'll see why in a minute
util to overwrite what it basically does
is it will replace the etsy on your
loopback file system it will replace it
with whatever it currently has as its
booted now the reason you'd want to do
this is say for example you booted
knoppix on a system with particular set
of hardware and with a particular video
card and the resolution of 1280 by 768
for instance widescreen
and then you move it to a system that
doesn't have those settings that can
maybe only like a PC or something they
can only do 800 x 600 you boot knoppix
off of it the x settings if you use a
persistent home the old x settings are
going to try to apply even though
knoppix by at boot time auto detects all
these settings that applies them for you
so if you check this option what it will
do is it will basically overwrite all of
your etsy settings that you used to have
with the new ones for the system so you
may want if you may want to use this if
you're moving from one system to another
then finally a net basically what that
will do is if you set up any new
programs especially or you've changed
the NIT scripts added in init scripts
it'll actually execute those for you
here's a cheat code if you even though
it automatically detects this at boot
you may again want to store multiple
versions of different persistent disk
images on a USB drive to have that
flexibility you can do that again you
can nest the directories down so you can
have all kinds of different knoppix at
IMG files on your system and what will
happen is na pics will with this cheat
code will look in that directory for
that knoppix dot IMG file so that's
another again pretty easy to use method
to customize things because you can just
run a script go through a couple of you
know toggle a couple click a couple next
buttons and then all of your settings
are copied over but you can also tweak
the boot settings on the CD now the
first two steps typically you use on a
USB key so you keep that separately but
these settings you can actually apply to
the the CD or the DVD image itself so
you make a copy of it and make these
settings and then burn a new CD or dvd
with these new settings so they're
actually embedded on the CD or DVD and
you can tweak a lot of boot settings and
a lot of knoppix items without actually
going in and messing with that loopback
file system so if you do want to create
a customized knob base that you're
passing out to people so it's all
self-contained on a CD and you don't
have to pass out a DVD to them you can
make some of these changes and burn the
nice new disc and pass it out and you
don't have to worry about well here's
this but you also have this USB key
again what we're trying to always do is
avoid going through the whole
remastering process because for all
those reasons it's really annoying and
you don't need to do it
so first if you go to the boot iso linux
directory on the knoppix CD itself like
if you just slap it into a regular
computer look at the disc you'll see
this directory basically it's if you've
ever used syslinux pixie Linux ISO Linux
before it's basically just a method
loader in a sense there's a nice Olynyk
CFG file that's the main configuration
file for this within this file you can
basically you can do a lot of things you
can change the default cheat codes that
knoppix uses where that's really useful
is a lot of times every year he releases
that German only version of the CD are
the DVD at the see big conference and
then everyone's like well this is great
but defaults the German and I don't
speak German so I have to type in laying
equals e in every time i boot the boot
disk so that it defaults to English
instead what we can do here is you can
actually go into that file edit this
file and tell it don't default to german
default to English or any other new
cheat codes you want to add you can add
to this file you can change the boot
timeouts say you don't like the knoppix
it only gives you 30 seconds before it
boots or say you don't want any time out
you wanted to just stay on the screen
forever you can tweak that you could add
new boot images so by default it
includes some extras like min test 86
and a couple things like that but so you
have new other boot images you want to
add that I so Linux can boot which there
are plenty like for example some of the
like ubuntu's installer that sort of
thing you could actually add that if you
wanted to you can also tweak the boot
messages that appear so say you want to
create a customized knoppix but you
don't want to say knoppix all over the
place you went to college you know kylix
or something like that I think one of
those exists you can go to the boot msg
or f2 and f3 etc there's other files
that are there that have just messages
that appear when you press those
particular keys you can go through and
change it's just a text file essentially
with it sometimes there's a little bit
of like antsy escape sequences to do
colors but other than that it's pretty
much a text file you can go through and
change all occurrences of knoppix the
kylix or whatever you want to call it if
you want or j add other instructions you
can even add say f4 so when you and
tweak the iso linux config to say when
you hit f4 here's extra documentation i
provided that tells you extra stuff I've
done
another thing you can do is tweak the in
a tardy this is a little heavier duty I
guessed and then editing the iso linux
configs because you actually are dealing
with the root disk that linux users by
default there's a lot of pretty serious
scripts that knoppix uses at booth that
said you know do hard as hardware
settings and there's a lot of other
settings but if you want to remaster if
you're willing to go through all those
steps you can actually do a lot of that
again without going into that loop back
file system so basically all you do is
here's the end attardi here's where it's
located many are tgz is what it is you
basically copy it to your local your
current directory you unzip it and then
at that point make a temp directory and
it's a loopback file system essentially
it's an ext2 loopback file system so you
just mount it loop back and once you
mount it then you can go in and edit a
lot of the files some of some of them
are less interesting than others the
most interesting one is probably
probably the Linux RC file that's
essentially the anit script that knoppix
first boots before does anything else so
if there's certain settings you want if
there's certain changes you want to make
that will apply before anything else
happens including before it loads scuzzy
drivers before it loads any drivers for
that matter you can actually edit this
file you can add me bring new cheat
codes that start at the very beginning
of the boot process you can change the
falta knoppix paths because knoppix will
by default look for going to the slash
knoppix directory then look under there
for all these other boot files you can
change all that stuff within this file
when you're done unmount the temp
directory gzip it again and then at that
point you have the same file you just
copy it back over the top of the other
file burn a new CD in your set so
another thing you can do is you can
actually create custom boot scripts this
is a little play on the safe config
script I told you about before basically
what will happen is if you have an OP
access' H file in the upper case knoppix
directory on the CD so there's just a
big uppercase knoppix directory there if
you put a knoppix sh file in there it
will always execute it every time of
boots if that file is present so what
you can do is if you wanted to copy
it executes sleep with safe config at
the very end of the boot process so what
you can do is basically put anything you
want in there but if you wanted to just
copy a safe config that you liked a lot
you want to always work always apply you
can just copy both of those files into
the knoppix directory and every time you
boot it will apply those files it's just
a shell script there's no magic here so
if you want to you can just write any
shell script that you can think of plop
it in here named it knoppix aight SH and
every time you boot it will be executed
so what's possible well for instance you
can add Deb's you know Debian packages
to the CD and not beast rectory and then
in the script right d package that shy
to install them so if there's a program
you want knoppix the head that it
doesn't have by default you can make
sure every time you boot it actually
adds it at boot time it just goes ahead
and installs it here you can there's a
lot there's a ton of programs on topics
like Apache MySQL a lot of other
programs that are installed but don't
start at the by default like SSH one of
the common ones I actually I'm
personally use or at work i use knoppix
as a net booted rescue disk so if i have
any servers that aren't that i need to
rescue instead of going running around
with a CD all the time all my servers
can net boot and i have a kick start
server setup to boot to you know install
them so i just added knoppix to that as
an option when I'm kick-starting so now
i can boot any machine off the network
and putin topics well that's great but
by default it doesn't run ssh so I had
this booted system but then I have to go
through like I should you know either a
serial console of some sort or something
like that to access it with this I can
just sort of ssh see what lease it got
what its IP addresses and then ssh into
it from any terminal i want to use
really can do anything it's more or less
limited by your ability to script so and
again it's just a shell script so you
can run any commands more or less you
want and you're you're only limited by
the things that you couldn't do from a
terminal and knoppix anyway but anything
else you can more or less do so pretty
good example of this this is a pretty
basic and I set this up actually with
the net booted knoppix but it would work
on a CD to I basically turned objects
into a little webcam server for me
pretty basic first thing I do
get my there you go I copy I had I put a
little index that HTML file just very
basic web page on the cd-rom and copied
it to the default doc root for apache on
topics then i start apache then i add
like a little cron job that uses GQ cam
which is a webcam screen driver and
dumped a webcam that jpg tilted to every
minute essentially it will run this
program grab a scheme a screen capture
from the webcam then dump it into this
directory I set up this web page so that
automatically it basically just says
welcome to the webcam or some basic
stuff and then shows that image and then
do like a really cheap refresh auto
refresh every minute it's going to do
this into the crontab and then I start
crying which isn't started by default
and that's all there is to it at this
point all I had to do is take a laptop
or anything really that and then the
webcam that I gnu/linux work with linux
plug it in aim it where I want to aim it
and then boonton topics with this
knoppix sh script on it and it turns it
instantly into a webcam save that
Hardware dies and I need to do something
else with it I can unplug the webcam
take knoppix out and then get a new
laptop or something else and hook it all
up again is boot again and what I like I
said you can do this on the CD what I
did was booted it over the network so
then any machine i wanted to i could
boot over the network point to this
particular instance of knoppix and then
it would instantly be a webcam for me
actually at least temporarily set this
up as a work to wave a problem where I
don't know if you have the problem here
but we have really clean bathrooms the
downside that really clean bathrooms is
someone's routinely cleaning them to
keep them that way well it's always you
know in the mail bathrooms at least we
have that we have a female that cleans
them so there's a sign that goes up in
the bathroom is closed so it's always
closed right when you need to go so you
walk all the way over there then you
have to go all the way back well I
thought will it be really nice they put
the sign on the hallway if I could aim a
webcam just down that hallway I could go
to from my desk I could see is it open
as it closed and then I wouldn't go so
set this up and then you know I could
just go to the we called the can p.m.
but we could go to that website
internally and just see whether or not
there's any
cleaning it and this took me you know
like maybe 15 minutes a setup start to
finish there was not a whole lot to it
that's pretty much the end there's a lot
of other resources so there's the
official knoppix website of course at
nob x.org be sure to use the dub dub dub
they actually knoppix out or go
somewhere else actually no so it won't
load there's an unofficial knoppix forum
at least there's a lot of different ones
but this isn't the english-speaking one
they have a lot a lot of great people on
the forum itself in a lot and they have
a really good wiki that has a lot of
documentation then a shameless plug for
my book of knoppix ex second edition I
have a couple copies up here you can
thumb through and there's also a pocket
reference so it has a lot of the
essential stuff you need to know that I
talked about here but in you know in
your pocket and then this talk which is
going to live here perpetually so you
can flip through if you're interested in
some of the command line options I used
but other than that now open it up for
questions if there are any well okay
thank you very much</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>