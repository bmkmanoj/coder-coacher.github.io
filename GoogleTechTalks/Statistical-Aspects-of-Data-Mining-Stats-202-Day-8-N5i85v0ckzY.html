<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Statistical Aspects of Data Mining (Stats 202) Day 8 | Coder Coacher - Coaching Coders</title><meta content="Statistical Aspects of Data Mining (Stats 202) Day 8 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/GoogleTechTalks/">GoogleTechTalks</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Statistical Aspects of Data Mining (Stats 202) Day 8</b></h2><h5 class="post__date">2007-10-08</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/N5i85v0ckzY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">okay so welcome to the eighth lecture of
data mining at Google the relevant
points up here to you are basically that
we're going to finish up chapter six
today which is on the Association rules
which we started last time so you don't
care about the midterm or the there is a
another homework posted but I will
mention to you we probably won't meet
next Friday but I'll give you details
about that and I'll send that around on
the email so chapter 6 was Association
analysis we started an off last time
with some definitions basically the the
classic data set or the Association
analysis is the supermarket data and you
have for each transaction you know what
people bought and sometimes if they're
using like a club card like a Safeway
that you know actually for each customer
what they bought but in this case it's
actually transactions and you're looking
for strong associations so association
analysis uses set of transaction Cisco
rules indicate like the occurrence of an
item based on the occurrences of other
items so if I bought diapers am I likely
to buy the air if I bought milk and
bread am i likely to buy eggs and coke
etc and we talked about the fact that
implication means co-occurrence of
course you know not not causality item
set our collection of one or more items
the key thing there is one or more items
we're not going to get through the empty
set as being an item set the support
count basically how often does that
items that occur in absolute terms so
milk bread diaper is in the last two so
it's two point count is two but it's
support is two out of five because two
out of the five transactions contained
milk bread diaper and then frequent
items set basically that's going through
all the item sets which have a
sufficiently large support and pulling
those out so the men's support is your
minimum support threshold okay so
association rule what is it it's an
implication expression of the form X
implies Y or both x and y are item sets
so for example milk diaper implies beer
no diapers night upset beers an item set
and the association rule is milk diaper
implies beer now one thing that this
doesn't say is but it's sort of you
wouldn't put anything on the left also
on the right you wouldn't say milk
diaper implies milk beer that sort of
wouldn't be any adding in any extra
information so generally the two items
that's on either side are are disjoint
okay
the two main definitions because these
are the two main metrics we're going to
be using are the support and the
competence and I'll talk at the end of
today about some other measures that are
probably that may be more meaningful
depending on what you're trying to do
but the book spends all of most of
chapter six talking about this problem
formulation using support and confidence
so we'll talk about what those are
support is simply the fraction of
transactions that contain both x and y
so we've defined before the support for
an item set this is the support for an
association rule is basically if you
have the association rule for example
milk diaper implies beer the support for
that association rule is the support for
the item set containing both size okay
so the support of milk diaper beer
basically is the support for milk paper
beer okay so milk diaper implies beer
support is the support from milk diaper
beer and again there's two out of five
so the support for this association rule
is two out of five what does that mean
it means that two fifths of the
transactions contain milk diaper in beer
then the confidence basically is the
strength of the Association whereas the
support is the frequency confidence
measures how often item sets and why and
parent transactions that contain X right
so for milk type revere the competences
out of all the transactions that contain
milk and diaper
how many of them also contain beer so if
you like the probability someone
mentioned last time isn't this just
conditional probability yes it is this
is the probability of milk diaper sorry
this is the probability of beer or a
given milk in diaper so out of all the
people that bought milk in diaper how
many people also bought beer well two
out of three to two thirds 2/3 of the
transactions that contained milk diaper
also contain beer so that's what we call
the confidence okay so these two rules
are - these two definitions support and
confidence are the main metrics that
we're going to be using and at the end
of the day I'll talk about some
limitations on these so I think this was
the first example that we started doing
last time
it says compute the support for items
that's a B D and a B D so and it says to
use the transactions notice we have the
transactions and we have the customer ID
here we're just going to begin by using
the transactions and of course these
numbers are all unique so we have 10
unique transactions so let's see support
for a would just be 1/2
three four five six seven and so I'll
call that the support of a is seven out
of ten seven out of the ten transactions
contain a support for the next one is BD
that one is how many contain both E and
E that's just one two two only two of
them actually have both B and D okay so
that's two out of ten and then the
support for a BD and as you're doing
this you should sort of think about
algorithms right I know that this one
has to be a subset of this one so I
really don't need to look at all of them
anymore I just have to look at those two
that contain B and D and see how many of
those contain a and that would be so
let's see here's the one that's PD that
does contain a the other BD doesn't so
this support is just one out of ten and
so that problem is gone which is number
26 any questions on that one okay
so those are the support for those three
item sets now moving on to Association
rules this one asks you for the
confidence for the Association rules BD
and PI's a and a implies B D now notice
I didn't ask for the support for these
two rules but the support for these two
rules would be of course one out of ten
right because you would just look at the
support of a BD but the confidence for
these rules let's see that one number 27
let's see confidence for let's stow the
first one BD implies a so basically this
is asking out of all the transactions
that contained P and B how many also
contained a so on the top I want to put
basically the support of a BD and on the
bottom I want to put the support for B
and D right out of all those that
contain B and D how many also contained
a and so the top here is one out of ten
and then the bottom here is the BD two
out of ten so this rule we would say has
confidence 50% right 0.5 1/2 so 1/2 of
the transactions that contain BD also
contain a that's what's called the
confidence of the Association rule and
then the other one just to show you of
course it's not symmetric
would be the s for the confidence for a
implies B D right out of all the
transactions containing a how many also
contain B and D well the numerator is
still the same right a B D goes on top
however the denominator now is everyone
who got a right so numerator is still
one out of ten here but the denominator
now becomes whatever seven out of ten so
this rule has much smaller competence
right numerator is still one out of ten
the denominator is now one sorry seven
out of ten and so this rule has
confidence only one seven so you're not
very confident in this right only one
seventh of the people that bought a also
bought both B and D so this is sort of a
low confidence rule so you can't you
know if someone bought a it's not very
likely that they also bought B and D
okay any questions on that
again it's just a conditional
probability calculation I think the
interesting thing is that sort of this
is the problem formulation because we're
gonna talk about problems and
difficulties with formulating the
problem in this way
when when I say this way I mean looking
for rules with high support and high
confidence and I'll explain that more in
a second um the other thing you might
want to do with this type of data we're
doing this at the transaction level if
you do have people with membership cards
you can track the same people over
multiple transactions and of course you
can you can imagine analogies of this to
sort of other applications but if I give
everyone an ID card when they buy
something I know who they are and in
this case I actually know the first two
transactions belong to customer one the
next two transactions belong to sorry
next two transactions belong to customer
two etc etc credits so I have actually
five unique customers so I might not
want to think I mean depends on what I'm
trying to do if I'm trying to sort of
group products together on the shelves I
might be interested in doing things at
the transaction level but if I'm trying
to cater to certain customers right
maybe I want to open a store they caters
to a certain type of customer then I
might be interested in looking at things
at the customer level and that's what
the next question asks it says compute
these things
treating each customer ID as a market
basket so then you can sort of collapse
your table into what is this number 28
you can collapse into customer ID and
there's five customers one two three
four five and you can write down what
each customer bought and I'm gonna so so
the first guy I bought everything right
at some point ABCDE so he bought
everything and we're not really keeping
track of how much of each product they
bought cuz whether or not they bought it
just divine or anything next guy is also
bought everything a b c d e okay but
number three looks like he did not buy a
right number three came a couple times
when he never bought a but he bought
everything else so he bought b c d and
he customer for he did buy everything
except e a b c d and then customer five
bought everything except C a B D D so
let me put these little placeholders
they're done indicate where they didn't
buy something okay so that's the same
data at the the customer level and so
now of course we can compute support at
that level support of a well everyone
but one person bought a so that's four
out of five people bought a support for
BD well let's see everyone bought BD it
turns out right there's no B is missing
node D is missing so that's five out of
five and then support for a BD well
actually I think from these two you can
actually infer to this one right if
everyone bought D I'm sorry if everyone
bought B and D the support for a BD has
to be the same as a support for a which
is Florida five okay so that's the same
calculation only now we've collapsed and
underneath the customer level which may
be more interesting to you if you're
talking about not sort of stocking the
shelves for each transaction but opening
a store to cater to certain customers
okay and then finally we can do using
the customer ID as the market basket
we can also do the strength and
confidence for the association rules and
let's just see this is number 29 okay so
the confidence for which one is first BD
implies a I'll mention to you that you
know the notation here and then a
patient in the book is sort of sloppy so
you know sometimes I'll I'll write set
notation sometimes I won't but this is
the confidence for B D implies a so on
top I put you know the a B D triple
which is four out of five and on the
bottom I put everyone who got B and D
which is five out of five so this one
comes out to be point eight or
four-fifths
so for face of the people before it was
of the transactions now four-fifths of
the people who bought B and D also
bought a well who bought B and E that's
everyone and then for Fist of the people
bought a so that rule has confidence
point eight and then going the other way
a implies B D okay so on the top that's
got to be again the for fist the abd the
trip the support for the a B D triple on
the bottom I'm gonna put everyone who
bought a well that's the support of a
four out of five so this rule actually
has a hundred percent confidence right
one point out everyone who bought a also
bought B and D right who's everyone who
bought a it's these four people and they
also bought B and D but everyone bought
being DS that actually doesn't really
tell you anything interesting right
the confidence of that rule a implies B
D is 100% but anything implies B D is
gonna be a hundred percent because
everyone bought P D and they're all sort
of talk about this as being a limit
limit to confidence that it's not a
relative measure it's an absolute
pleasure but it is true right if someone
bought a then I know for sure they
bought B and D but nothing special about
a in that context okay any questions on
that question
yeah so I think that's the the real
thing and I'll talk about that in a
second if you're gonna talk about the
confidence of a implies B D you really
want to compare it to the confidence of
not a implies B B right you really want
to get that relative comparison and I
think that's one thing that's sort of
missing from this treatment and we'll
talk about it I mean it wouldn't you
could say okay let me look at confidence
of AE implies B D and then compare that
to everything else implies B D but if a
is sort of a majority thing and
everything else does mine or anything
that can be misleading so I think that
as a rule of thumb you know if I'm going
to sort of formulate this problem I'm
gonna do it symmetrically and if I'm
gonna look at a implies something I want
to know the confidence for not it
implies the same thing and compare the
relative terms now I'll do an example
that in a second
okay other questions on on these
calculations or this problem okay so let
me give you sort of a more realistic
example this one is from the stats 202
logs and we can pick on the Yahoo
crawler who sort of tells me that they
visited by leaving me this this string
in my logs which actually has you know I
think we you know has like the help page
where you can read about you know why
are you crawling my site and things like
that
and the question is what is the
confidence for the rule the Yahoo
crawler implies this IP address right
does the Yahoo crawler always use this
IP address or do they you know sometimes
use different IP addresses when they
visit my log right so the question is
given its the app Yahoo crawler visiting
my logs what's the probability that it's
this IP address and so we can take a
look at that let me um find these web
logs again let's see I think it's more
stats 202 logs right here so open with
Microsoft Excel and I do this text to
columns and oops you have to click on
the column I guess okay there we go
data text to columns delimited by the
space will do the trick
okay and all I really care about right
now is the IP address which is the first
column and then this last column which
if you sort of ever look at your web
logs most of the time this is
uninformative it just sort of tells you
the browser type but when it's a crawler
the crawler is usually nice enough to
sort of identify themselves so like
let's see here's you know some examples
I don't really know these are probably
just individuals with um
using that type of browser but even
actually the first observation here is
the Yahoo China Yahoo China caller right
slurp and there's a web page you can go
and read about who they are and usually
on that web page of course they'll tell
you why they're crawling your why your
call why they're calling your site and
how to make them stop and things like
that so that's the China crawler from
Yahoo I'm actually gonna look for the
the US one which will find and then you
can see there's other companies sort of
that have crawlers that crawl your web
pages see the MSN crawler is in here in
some places I think I saw him before
anyway all these different crawlers so
here's the MSN crawler right MSN bot
okay but what I'm interested in is is
when the Yahoo crawler comes is he
always coming from the same ip address
or does he mix it up and in the main
question is what is the frequency of
that IP address given it's the Yahoo
crawler so I'm gonna do the the pivot
table again let me just insert rows this
is IP oops that's IP and I'll put that
this is who before I make the pivot
table I will mention one relevant number
is that there's 1,400 sorry fourteen
thousand and eighty three rows fourteen
thousand eight hundred and three rows
right the first row I put the column
titles so total number of rows is
fourteen thousand eight hundred and
three so that's going to be involved in
this calculation for the support and
confidence fourteen thousand eight
hundred and three rows just remember
that okay now let's say I want to count
up how many times the Yahoo crawler is
using that IP address so I'm gonna do
data to the table into the chart report
ah let's see next first two columns here
ah let's see I want to put actually
first who and then IP right because I
want to have IP nested within who and
I'm gonna vote count of IP here and that
should do the trick and this is sort of
messy here with the low screen
resolution but
me hide some stuff and make some stuff
bigger and might be able to see it a
little better so here I have whoo and
here I have the IP and if you sort of
look through the who and they could who
a little bit bigger so the first one is
who has not identified themselves then
here's Mozilla 4.0 here's the 5.0 is
coming and let's say this one might be
him
nope that's not him let's see what was
it mozilla 5.0 how does it read it's
alphabetical right there's a little
compatible as the next word so I need to
go up to compatible I got compatible
Yahoo slurp so that would be why that
would be down okay there's the Google
bot okay let's see go down some more for
yo whoo there he is
there's the Yahoo crawler calling my
page okay so you see right away in fact
he's not always using the same ip
address he's using all these different
IP addresses here and the one that I was
interested in was 74 619 105 74 619 105
there it is 31 okay so let's see Hugh's
coming 31 times and the other relevant
number so let me write down 31 I don't
forget the other irrelevant number is
the total number of times the Yahoo
crawler is showing up in here and the
pivot table gives you the totals down at
the bottom and that's 714 those are the
three relevant numbers I need for that
question and so now we can answer it it
says support and confidence for that
rule right so let's see okay so we want
Yahoo crawler implies that IP address so
the support has to be all the times that
I have that the Yahoo crawler and that
IP address which is the 31 out of the
one for 803 right that's the support and
I think
this comes out to be about 0.2% you can
check that the confidence is going to be
out of all the times where it's the
yahoo crawler how many times is it that
IP address so that's 31 so you see these
guys always have the same numerator but
the support is relative to everyone the
confidence is relative to it being the
left side right if it's the Yahoo
crawler what's the chance it's that IP
address I think this comes out to be
like 4%
let me check those two numbers otherwise
they'll get emails from all over the
world telling me I don't know how to do
division so let's see what is that 31
divided by 1 for 803 is roughly 0.2% and
then the other one was 31 divided by 714
it is like point is 4 point 3 percent so
we'll call a 4% ok so that answers the
question and so what can we say we can
say well only you know 0.2% of my
records have have the Yahoo color in
that IP address so it sort of has small
support but once I know it's the who
crawler there's a 4% chance that's
coming from that IP address so that's
the confidence for that rule now I can
ask you to the opposite one right if I
said that what is the supporting
confidence for the this IP address
implies the Yahoo crawler well of course
it's going to have the same support
because support is symmetric with
respect to the association rule so that
is still 0.2% but what do you suppose is
the confidence for the other direction
100% right if you look at this IP
address every time you get that IP
address it's gonna be the Yahoo crawler
because you know no one else is using
that IP address and the easy way to do
that would be make the pivot table but
nuts the other one inside that need see
it right away and so if you were doing a
predictive task right that would be sort
of really easy to predict that it's the
Yahoo crawler if you know the IP address
because there's sort of a one-to-one
mapping right there so I not one-to-one
mapping but a direct mapping ok so I
think that's all I wanted to say about
about this any questions on this on this
problem
okay so thinking about sort of these web
logs in this exercise you might think
well you picked out you know I picked
out a specific Association rule and
asked you to compute the support and
confidence for that but that's not how
you would do data mining you wouldn't
say hey I wonder if you know this is
interesting and then figure out the
support and confidence for that right
because how are you gonna know what's
going to be interesting there's so many
Association rules that you can make from
your data that you don't want to have to
figure out the interesting ones the data
mining task is for you to sort of run an
algorithm over the whole data set
consider all possible rules and return
to you which ones are interesting or in
this case which ones have high support
and high confidence and that's sort of
the formulation that your book talks
about for the problem right so this is
an association rule data mining task the
following giving given a set of
transactions so you can stand think
about supermarket data you could think
about web logs whatever you want to
think about find all the rules and this
all is a big number right there's a lot
of rules even with a small supermarket
data set you'll see there's a lot of
rules possible having the support
exceeding some minimum threshold and the
competence exceeding some minimum
threshold that's the data mining pass
that's the formulation of the problem
that the book talks about in sections
one section two section three etc except
that they sort of focus on this one
specific formulation of the problem
which as I said we're going to talk
about today has a lot of limitations but
a lot of people have worked on
algorithms trying to solve this problem
okay find me all rules all possible
rules having a support above a minimum
threshold and a confidence above a
minimum threshold and so here you say
well what would be the brute-force
approach you know what it what rule are
we trying to improve on now this is
really naive and you'll see that you
would never do it but the most naive
thing would be list all possible
Association rules
okay there's there's way too many of
them but you could list them all compute
the support and confidence for each rule
okay a lot of computation and then you
know remove all the rules that don't
meet both of these criteria okay of
course the problem is it's
computationally prohibitive and not only
that it's pretty stupid because you can
see there's a lot of shortcuts right
away the first thing that you notice is
that you can decouple the support and
confidence requirements because whenever
you calculate support the support of an
association rule ignores the arrow and
it ignores what's on both sides right so
for example
all these rules involve milk diaper beer
right milk diaper implies beer beer milk
beer and hides diaper diaper beer and
pies no all of these association rules
are gonna have the same support they're
all gonna have support of point four
because for all of them you're simply
looking for milk diaper and beer so we
say milk diaper beer is there no diaper
beer is there and then it's not here so
all of these have support 2 out of 5 or
0.4 it doesn't matter where the arrow is
doesn't matter what's on what side the
waist support is defined it's gonna be
the same for all of them so this is sort
of suggesting something already you can
sort of first do the support requirement
okay once you sort of pulled out you
know item sets that have sufficient
support so example you know milk diaper
beer then from those three items you can
start putting the arrow in and putting
things on different sides and forming
rules and the rules of course will have
different confidence right like in the
case of milk beer implies diaper well
wherever you see you know I'm looking at
these two things wherever I see milk
beer I also see diaper right if I see
let's see
no milk beer here's milk beer I also see
diaper here's milk beer I also see
diaper
here's milk but no beer okay so right so
that rule 100 percent confidence some
rules have small confidence milk implies
diaper beer right so milk is here here
here and here but how many of those also
have diaper beer well this one and this
one so that's two out of two out of four
point five right so they can all have
different confidence but they all have
to have the same support if they're
involving milk diaper and beer
so all these rules are binary partitions
of the same item set milk type for beer
rules coming from the same items that
have identical support for different
confidence thus you can D couple the
support and confidence requirements so
that's sort of the first thing you can
do and that adjusts this two-step
approach right the first thing is
basically don't look for Association
rules just look for item sets just look
for item sets who have support that's
sufficiently large okay not association
rules just item sets then from these
item sets generate rules by sort of you
know taking the binary partition
it's by putting the arrow in different
spots and so first look at item item
sets that have sufficiently large
support and then from those item sets
generate rules by taking binary
partitions now step one find me all item
sets who have sufficiently large support
it's still a computationally difficult
problem because there's a lot of item
sets okay however there's a lot of in
your text and if you're an algorithm
person you might look sort of like
reading through that about speeding up
the computation of this algorithm using
some creative ways of finding frequent
itemsets but then that step one then
once you have their frequent itemsets
there's a there's a lot a lot fewer
things left and from those you can
generate rules and calculate the
confidence of those rules so that's
basically the problem formulation is
given in your book I'm gonna do sort of
one example of it yeah I'm gonna do one
example of it to show you if we were
just sort of going through I don't say
brute force because we'll be a little
bit intelligent but I'll just sort of
show you how the problem goes question
exactly exactly so the charles's
question is should I start from the
small to the big and of course that's
what we're going to do and so let's
let's just sort of go through and do
this one so it says use the two-step
approach generate all rules having
support at least point four and
confidence at least point six so the
question is you know what items that
should we start with well first of all
you don't need to look at the single
tips right because if you think about
well if you're gonna be sort of
pragmatic about it the the definition of
of item set so you go back to the
definitions right definition of items
set has to be one or more items okay
that's the definition of item set and
then definition of Association rule says
x and y have to be item sets so I need
at least two things right I can't make
an association rule from one thing so
I'm gonna first start with the doubles
and look for all the doubles that have
support greater than equal to 0.4 and
then I think what the point that's made
is if on the doubles that have support
greater than equal to 0.4 then that will
suggest triples right but a triple can't
have support greater than equal to point
four if it's not in some way represented
by some of the doubles and so
okay so let's see we want to find all
rules having support greater than or
equal to 0.44 number 31 and I'm going to
start with just item sets that have two
elements and so if I were to look
through all possible pairs you know you
can write an algorithm to do that or if
you just sort of want to do it by hand I
have oh I could eliminate single things
that don't have yeah
yeah that's true I could let me see
maybe I'll just do that
so which singles can I eliminate anyone
who doesn't occur at least four times
right I can eliminate him are there any
such ones though I don't think there are
all cookies no more cookies okay let's
see if I can get rid of cookie is then
that should speed things up okay we're
there cookies yeah and then get rid of
cookies let's see this will work okay so
there's no cookies do not exist anymore
okay so let's see then I basically just
made a binary representation of what
people bought here and then I can just
go through sort of the pairwise things
right so take like beer who's in column
B to and take his product with
everything and sum him up and what I
would learn from that would be that I
should mention an excel technique here
when when you put the dollar sign by
either the column num the column letter
or the row number that's an absolute
reference so see the bead and it doesn't
change here when I when I go around so
I've taken the column B and taken its
product with everything now B with
itself is uninteresting just tells me
that the sum is four so four people
bought beer but I see zero people bought
beer and bread zero people bought beer
and butter three people bought beer and
diapers which is support 0.3 which isn't
big enough and one person bought beer
milk which is support point one which
isn't big enough so you could go through
like this I guess I only have a few
columns so let me take column C with
everything so this would be and of
course I am doing everything twice I
know that so okay so actually this is
interesting right beer and bread there's
five people that bought both
and there's also five people that bought
both beer and butter and is that true or
did I screw something up it looks an
untruth red I did bread I'm not doing
Peter anyone or did Brett okay
great five people bought bread oh that's
not interesting but five people bought
both bread and butter okay that's sounds
interesting
bread and butter so the support for the
item set not the Association rule but
just the item set bread and butter is
0.5 and of course well whatever else
they might have set so there is one
there is one that's a candidate okay
sided beer I did read I could do butter
which is and uh let's see column D and
let's see that's gonna tell me about
butter oops
so I know this was five already know
this is five three people bought butter
and diapers three people of butter milk
that's not interesting let's see then I
do column E and seven people bought
diapers and there's four there's four
people at the bought diapers and milla
sorry these aren't people these are
transactions for transactions had
diapers and milk so there's another one
that's above point four right diapers
and milk and I probably I'm probably
done right I don't need to check the
last column because I would have already
done it with every other column okay so
that should be all all pairs that I've
looked at and if I forgot any I think I
got so bread butter has support 0.5
diapers milk has support point for it so
step one is sort of done you've found
all what hang on I should say one more
thing about it but the the pairs are all
done I'm trying to find all item sets
that have support at least point four
now at this point I should ask myself do
I need to look further do I need to look
at triples and the answer is yes no no I
do not need to look at triples because
if there were a triple right
it would have to contain you know either
bread butter and something else or milk
diapers and something
however that something else would also
have to be in a pair at least point four
times so because bread butter and I see
okay if this was butter if this was
butter instead of diapers it's possible
that bread butter milk would be one but
because this pair is disjoint from this
pair there's no way right you can
convince yourself there's no way it's
going to happen because any a triple
would have to contain this double plus
something else in this double plus
something else but this double plus
something else it wouldn't happen
because then that other double I would
have picked up as a unique double and so
can't I'm done can't be three has to be
only two items and so any Association
rules meaning the support requirement
has to be binary partitions of one of
these two rolls okay
so that of course then suggests we look
at the following four rules which is red
implies butter the other one butter
implies bread okay ah let's see
diapers implies milk and milk implies
diapers diapers imply it's milk and no
complies diapers that's all that's left
right from all the possible Association
all is initially okay so let's see bread
butter implies milk that the top I
should have the support for if I bought
both of them together so it's a BB and
on the bottom is I know I bought bread
sort of support for bread should be on
the bottom and if you look at this right
turns out they're both five out of ten
it's hard to see here but it's easier to
see here that if you look at bread you
know one two three four five people
bought bread butter one two three four
five people bought butter one you know
they're identical the bread and butter
are identical in this data so both of
these are five out of ten five people
bought both bread and butter five people
bought bread so this rule has confidence
100% and then of course because I said
they're identical this one would be the
same numerator but on the bottom it
would be the support for butter which is
also five out of ten
so this one is also 1.0 okay so both of
those rules have 100% confidence and
they meet the support requirement of 0.4
so these two rules sort of be found them
right
it's our data mining test we found two
strong associations in the data if you
buy bread there's a hundred percent
chance you buy butter if you buy butter
there's a hundred cents you buy bread
and bread and butter co-occur at least
40 percent of the time which was my
minimum requirement in fact they
co-occur fifty percent of time okay so
that leaves us with the last two diapers
milk let me sort of fit it over here so
let's see I want to do confidence for
diapers implies milk diapers implies
milk so on the top I should have the
support for diapers milk and on the
bottom I should have the support for
diapers okay so how many people bought
both diapers and milk looks like one two
three four and then how many people
bought diapers looks like seven people
bought diapers okay so this is four out
of seven which is what like point five
six so I think that doesn't meet my
sixty percent confidence requirement is
that right four out of seven point five
seven either way does not meet my does
not meet my sixty percent right sixty
percent confidence so this guy is out so
there's only one last candidate to
consider which is the confidence for
milk implies diapers on the top of that
one
I should have the double milk diapers
and the bottom I should have milk milk
diapers is still far too ten but now
milk say how many people bars
milk should be one two three four five
people bought milk five out of ten so
this one does it right this is point
eight which meets my point six
requirement so my last rule is milk and
pies diapers
so those three work that one doesn't
okay
so this is sort of the data mining task
that your book formulates in section one
you throw the data set at it you throw
it the supermarket data and you find an
algorithm that says give me all the
roles that have support at least this
much and confidence at least this much
and the two-step procedure is first look
at item sets with that support and then
form binary partitions of those to get
the confidence so if you reads like this
other sections in your book they talk
about sort of more efficient algorithms
for sort of solving this problem but you
could see just as we were going through
by hand there's some obviously stupid
things that you wouldn't do that would
sort of save you some amount of time and
then there's sort of slightly more
intelligent things that you can read
about in the book in terms of how to
save time because the computational
nature of this problem when you say give
give me all item sets that meet these
criterion that's these criteria that's
that's a big problem just because
there's a lot of item sets okay any
questions about anything that we just
did okay so the next thing to talk about
is basically even though your book
spends all the time well most most of
the chapter on this problem formulation
which is give me all the rules that have
a sufficiently large confidence and a
sufficiently large support there's some
drawbacks to that and the first thing
which I think we sort of already noticed
is the fact that confidence is an
absolute measure right so in this data
set and there's nothing like that that's
that special about this data set but if
you think about here the confidence 40
implies coffee right well of the people
that got tea right of these 20 people 15
of them also bought coffee so the
confidence for tea implies coffee is 15
out of 20 75 percent and you say ha if
someone buys tea there's a 75% chance
that they're going to buy coffee so you
know why don't I everyone who buys tea
why don't I give them a coupon for
coffee or why don't I put the coffee
right by the tea or something like that
right
because when to someone's buying tea I
know that they're pretty likely to buy
coffee the problem again is that's an
absolute measure the 75% does not judge
relative to something else so what might
you want to judge the 75% relative to
well you might want to judge it relative
to the aggregate right 90% of the people
in aggregate like coffee so the fact
that when someone likes tea there's a
75% chance they like coffee the 75%
chance there's actually less than the
aggregate 90% chance so liking tea
actually makes you less likely
relatively to like coffee okay you could
also compare it to sort of not tea right
often when we put the bar over something
it means not you could also compare it
to not tea which you know has to be
higher if the I review that's higher
right just has to be so if you don't
like tea 75 out of 80 like coffee right
so 75 out of 80 is 0.9375 so either way
you look at it whether you compare to
the aggregate or you compare it to the
opposite
either way likely flaking tea has a
negative association with liking coffee
right liking tea means you're less
likely than aggregate to like coffee or
less likely than if you didn't like tea
to like coffee so the question is if you
had the minimum support requirement
right right so so the question is yeah
about that it has small support the
other thing that it sort of makes me
wonder about with the support thing is
the following I mean you could you could
say like if I have this minimum support
minimum confidence thing then you know
if this one comes out to have
sufficiently high confidence then so is
this one so I should capture both of
them however the thing that I worry
about is suppose that it's not just like
tea and not tea its tea and a whole
bunch of other minority things then you
might pull out this one but something
like you know some other strange drink
might fall below your minimum support
and you might actually miss this so I
would be worried if you had any
algorithm that turned up this one but
missed this one because you know this is
this is the one that has higher
confidence and so if I if I compute this
one without comparing it to the
I'm really doing myself a disservice so
that's sort of one of the drawbacks of
confidences but it is an absolute
measure and it's not a relative measure
okay and then there's a whole bunch of
other problems along with it your book
talks about oh sorry any comments on
this slide before I move to the next one
okay your book talks about a whole bunch
of other proposed metrics and if you
notice these are all formulated in
probabilistic terms and of course you
can formulate support and confidence and
probabilistic terms right confidence is
simply the conditional probability of
coffee given tea and support of course
is just the joint probability of coffee
and teas so thinking about probabilistic
terms there's a whole bunch of other
ways to look for associations and of
course you can design your own data
mining tasks right you can say give me
all rules that have sufficiently large
conviction sufficiently large interest
sufficiently you know you can you can
use all these all these different rules
and design your own data mining tasks
and with each one of them you know sort
of leads to sort of algorithmic
challenges to make the make the problem
more tractable because when you talk
about all Association rules you're
talking about a lot of possible rules
the book only focused you know really on
support and confidence so that they talk
about some of these others but with
regard to algorithm they really focus on
the supporting confidence and here you
see here again the support is just the
joint probability and then the
confidence is the they actually write
the maximum of the two conditional
probabilities just trying to make it
symmetric right basically you'll pull up
whichever rule you'll pull up a and B if
either one of the rules have
sufficiently large confidence so there's
a whole bunch of other formulations that
your book talks about okay so I think
that's really all I want to say say
about this sort of Association role data
mining tasks for the most part your book
talks about find me all rules was
sufficiently enlarged support especially
large confidence gives you a whole bunch
of algorithms to solve them then sort of
talks about in section six point seven
that there are some drawbacks to that
formulation and mentioned some of the
other formulations I think that's all I
want to say about it the last thing I
want to talk about is is what's called
Simpsons paradox before I move to that
I'll just say are there any comments on
this okay so I think I'm mostly yeah one
question
so you know yeah so people will tune it
and you know and it's sort of a feedback
loop am I getting out too many rules you
know that there really aren't
interesting to me or am i you know the
opposite would be I'm missing some
important rules so there's I don't know
of any formal way to set those
thresholds yeah you could say oh you
know you know maybe I want to have I
didn't plot enough rules maybe I want to
pull out lower one of the two the one
thing I'll say about Association
analysis is it simply a descriptive
exercise right there's no real gold
standard for it it's just am I going to
learn some interesting role from the
data so it's really exploratory and so
there's no like formal there's no formal
one formulation of the problem there's
no criterion for setting thresholds
things like that's really descriptive
you know I think because this is
something that's it's it doesn't seem to
be like so much an academia formulation
of a problem as it does an industry
formulation I think there's some open
research I would I bet there's got to be
one or two goods Supermarket data sets I
mean if I don't know you know what's out
there publicly but I'm gonna quit until
one out there so I don't know of any
sort of competitions or publicly
available to assets I haven't done too
much work with Association analysis but
I'm gonna guess that there's if you look
at this is a book has a bibliography
section too and that might turn off some
stuff for you oh yeah yeah yeah it's a
big prize a big prize to actually I know
like a million dollars or something like
that yeah so maybe we should all okay
bye I won't say anything more about that
okay so that's that sort of Association
analysis now the one thing you'll get
yourself into trouble with and I think
I'll sort of reserve this to talk about
sort of next time when we're sort of
have our minds fresh but we'll talk
about what's what your book called
Simpsons paradox next time and the
problem with this is sort of it's it's
the story the short story is that
when you look at things in the aggregate
it doesn't always tell the same story as
when you look at things broken down by
other variables and so the first example
I give is like a textbook problem but
then I sort of use the same numbers in a
real context and we can talk about sort
of the implications of it and it's
interesting enough that I think I'll
save it for next time but I'll do the
toy textbook example just now to get you
thinking about it so here's the toy
textbook problem the numbers are the
same as my real problem but it's just
sort of a toy example so a Simpsons
paradox and I don't even like the word
paradox which is why I quoted it because
I think as soon as you call it a paradox
you sort of marginalize it and sort of
make it sort of a cute thing that might
happen sometimes but it's really part of
a larger problem which is whether or not
you're going to control for sort of
other variables so it occurs when a very
a third variable right so you're looking
at the relationship between two
variables but there's some third
variable possibly hidden possibly a
variable that you haven't thought about
or that you're not aware of or maybe
isn't even in your data which would be
really problematic when this third
variable causes the observed
relationship between the two variables
that you're looking at to disappear or
reverse direction or even I mean it
could just weaken okay but generally the
paradox is when it disappears or
reverses but it's interesting to know if
it weakens are you interested in the
weak relationship or the strong
relationship when you don't consider it
so the example I'll give you is
basically my friend and I are going to
play a basketball game okay now we're
each gonna shoot the same number of
shots I shoot 20 shots he shoots 20
shots right I basically I shoot 50% he
shoots
40% right eight out of twenty forty
percent so the question is you know top
level question management level question
you know who is the better shooter in a
me oh my friend and in aggregate in the
simplest story you can tell obviously I
am right because I shot 50% and he shot
40% okay now the thing is who is the
better shooter this data suggests I am
now suppose the management you know they
haven't really formulated their question
that well they said who is the better
shooter but what they're really asking
and you kind of have to get this from
them they're not really saying who's the
better shooter they're saying if I have
to pick one of you two guys so maybe
it's a coach right I have to pick one of
you two guys to go into the game
shoot the game-winning shot from 15 feet
Who am I gonna pick and so you look at
the data you say you pick me I'm the
other shooter I'd shoot 50% based on
this game but you think about the real
question the question is like if one
person is going to go into the game to
shoot a certain shot from 15 foot right
we have a play that will create a open
15-foot jump shot
who should I put in so the one thing
that we should really be controlling for
is distance of the shot
right because I know that the person
that's gonna go into the game he isn't
gonna dribble around and throw up
whatever shoddy make can get he's gonna
go in the game and we're gonna run a
play and he's gonna shoot a 15 foot shot
so if that's the real question the real
question isn't who is the better shooter
the real question is who is the better
can shoot er when you control for the
distance of the shot because I'm gonna
run a play to get an open 15 foot shot
well then I should control for the
distance of the shot so suppose I break
the data down
according to far shots and close shots
what can happen right if you look at me
look at me right so in aggregate okay
I'll do the aggregate first this is me
this is my friend in aggregate I am 50%
my friend is 40% okay but if you break
that down into which way did I do far
and close from far I am 25% and my
friend is 33% okay so he's actually
better than me from far away so you say
a-ha okay you must be better than him
from close up that must be what's going
on but from close up I am 9 out of 16
these fractions that I don't know that
what they equal problem 9 out of 16
thanks
I am 56% from close up and he is
actually 3 out of 5 he's actually 60%
from close up so this is the problem
right he's better than me from far away
and he's better than me from close up so
no matter what play the coach is gonna
set up I really want to put my friend
into the game to shoot the shot however
based on
the aggregate data it makes me look
better and so the problem is my friend
isn't a worst shooter he's a better
shooter he just was shooting further
shots when we played the game so if you
control for the distance of the shot my
friend is better but if you look in
aggregate you think I'm better now
again if you did an experiment right an
experiment would be carefully designed
so that it's either randomized or
controlled so that we all shoot the same
type of shots but remember data mining
is never experimental data it's always
observational so this type of thing can
sort of always bite you okay and you're
looking at the relationship between two
variables if there's something else that
you should really be controlling for and
you haven't you can give you the exact
wrong answer and under the next time
I'll give you sort of a more practical
example where this could come up but if
you think about really the problem is
that the question isn't well formula
right if you're gonna put one person to
the game to shoot a 15-foot shot you
don't say who is the better shooter you
say who is the better shooter when you
control for the distance of the shot or
if you're gonna collect data you know in
the data somehow you find somebody to
control for the distance for the shot
but if it's experimental you at least
you know the very least have to measure
it otherwise you're it's gone and you
can't even control for it so this is
sort of the textbook example of Simpsons
paradox I think you can sort of think
about this next Tuesday I'm going to
give you sort of the same numbers but
put sort of a real story behind it so
just to give you a preview of what's
going on next week the class and on
campus has their midterm so Tuesday I'm
gonna review for them for us we'll sort
of finish talking about Simpsons paradox
and I'll just sort of maybe go over some
of the homework problems and if there's
anything interesting I'll point out to
you but we'll probably meet for a short
time Tuesday next Friday we won't meet
and then we'll come back the following
week and we'll do classification and
clustering to finish off the the topics
on the on the list of topics okay any
questions before we take off okay great
I'll see you on Tuesday
one question yes yes if you did yes
yes exactly we must we must contribute
one way we could control for it as we
say you each have to take the same
number of close shots Eve testing some
of the fire shots wouldn't be a problem
and if you're doing an experiment you
would do that an experiment problems
with observational data if you haven't
even realized that the distance is
variable and that it's a huge source of
variability you're really out of luck
and it really depends on how big of a
source of variation it is and here
whether the shot is far or close affects
things a lot more than who's shooting it
so the biggest source of variability is
the distance of the shot not the person
which is why that's sort of overwhelming
it and killing you okay so we'll talk
more about that next time okay I'll see
you guys on Tuesday every weekend</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>