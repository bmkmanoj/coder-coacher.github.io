<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>KML, EarthBrowser and the virtual globe as a platform | Coder Coacher - Coaching Coders</title><meta content="KML, EarthBrowser and the virtual globe as a platform - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/GoogleTechTalks/">GoogleTechTalks</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>KML, EarthBrowser and the virtual globe as a platform</b></h2><h5 class="post__date">2008-07-18</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/DlT-D0DKTPw" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hi everybody my name is Michael Weiss
Malik to introduce our guest today Matt
Geiger is the founder of lunar software
and single-handed basically creator of a
competitor to Google Earth known as
Earth browser because some KML
fermentation or other fun stuff he's
here to talk today about that other
projects thanks Michael first I'd like
to thank Michael for inviting you to
talk here today it's a very great honor
I'm just forgive my slide you're a
little corny so first time i've ever
used keynote so bear with me my name is
Matt Geiger and I've been a
self-supporting shareware author for
over 10 years now at primarily creating
earth browser which is a software
competitor to Google Earth which
actually predates google earth or
keyhole the initial release was in 1998
earth browser was a first virtual globe
as far as i know that actually updated
its inner information over the internet
so i'm going to talk about Earth browser
and an exciting enhancement to KML that
I hope can make it into the standard so
what is Earth browser three point 0 if
you got earth browser com it's a it's an
air application it has a number of
advantages over previous versions it was
built using flash nine ActionScript and
the Adobe AIR runtime earth browser
three puntos supports about ninety
percent of KML doesn't do photo overlays
or regions yet but that's coming and
also terrain isn't really an option at
this point dobie air brings many
benefits to to to a platform it's
multi-platform Mac Windows Linux it has
an embedded web browser and it also has
an internal SQLite database which is
great and actually it's very potentially
can get in with Google gears with the
flash platform at some point in the
future I'm hoping some of the
disadvantages of
of flash and air is that it's very slow
because it's software rendering and you
have to composite things very carefully
and optimize your graphics very very
very carefully so but however I'm not
going to talk about the earth your
browser area application today I'm
actually going to demonstrate the new
earth browser web plug-in so earth
browser three point O was originally
designed to run in the web browser
written in flash actionscript flash has
the largest installed base of any
software project or any software product
perhaps ever i think claimed seven
ninety seven percent penetration in the
market for version 9 their latest one it
says eighty-two percent for the the
latest point release i don't know if
that's ninety seven percent is over
optimistic but most of my customers seem
to have it already so i think it's
probably pretty accurate so since birth
browser is written in java skiing the
actionscript in flash it can run on any
modern computer today without any
installation required so it can't be
overstated how important that is not to
ask somebody to actually install your
software on their computer i find a huge
resistance to that in the shareware
business i have about five percent
people of people who actually look at my
webpage will bother installing my
software just in in a corporate
environment it's just not really even an
option for some corporations and another
advantage is new versions are automatic
since its are automatically downloaded
from a website rather than having to
update your version that's resident on
your computer so ActionScript is the
language of flash and javascript they're
very related they're both based on the
ECMAScript and what this allows is it
allows a simple and easy extensible
bridge between Earth browser objects
internally and the JavaScript web
browser environment and this could also
even access the entire flash library via
the web browser through JavaScript so
the it's a limitless what could be
extended the just a simple webpage
JavaScript so the the new version has
KML features you can control the adamo
script camera timeline events and
exceptions are even transmitted across
the bridge between flash and JavaScript
and it also earth browser contains a
completely skinnable graphical user
interface that you can modify and extend
however you like to give it your own
look and feel so sorry about that i'm
looking at throwing with so i'm going to
give a couple of demos here i don't know
how this is going to work i didn't
prepare it looking backwards but i think
i should be able to do it the first
example i'm going to show a simple
example which should be familiar to most
people how to embed plugin in a web page
using a div and i'll also show some
built-in layers that earth browser
supports and next I'll show adding a
simple placemark using a if anybody
reads my blog which blog at Birth
browser com I've kind of come up with
jsk ml which is a JavaScript dialect of
KML basically mirrors KML in a
JavaScript object notation not strictly
JSON which has its own rules but
javascript object just like in a
javascript so after that I will show an
embedded GUI example and utilize some
event callbacks and then coming back to
the slides here I'll show a proposed KML
extension which I'm actually really
excited about it saves a lot of space
and it enables some new functionality I
think it's it's just the way KML should
go in a lot of ways so I'm excited to
talk about that and finally I'll come
back I'll go back and show show an
example of that KML extension in the web
browser
so let's go to let's go to the example
so right now it's it's blank where is my
mouse okay this should look familiar I
just have some CSS style here and a
little JavaScript I include the
JavaScript library eventually that will
be done through an API from our website
and you'll see on load it just calls in
it so to load the earth browser plug-in
just put it into the div and make a call
back and
and it'll pass you back a reference to
the the embedded plugin so let's just
add a couple things i'll add oops like I
lost focus I have the night i believe
i'll also add let me just copy and paste
to make this quicker
a lot of the night and lights and I'll
also add stars and let's take a look so
we're here we have earth browser running
in a web right in Safari can rub and run
in any any web browser opera might have
some issues I haven't tested that one
fully but you get a 3d flash globe
running right in the web browser which
is really nice you can zoom in just like
in Google Earth here's my hometown
Portland I only have the the NASA on
earth base 15 meter base imagery so you
guys want to donate some energy to me
that would be great I'll gladly take
that so let's go back out let's say
let's take a look at what else we can
add here you see my favorite layers is
the clouds let's
oops quake earthquakes to
and these clouds will animate I'll show
you a timeline later on and you can you
can have that earthquakes animating you
can see here's the latest some
earthquakes it early you'll notice that
some of the earthquakes pop up a little
bit later because I can set an elevation
layer is similar to regions I'd like to
make some changes to the region KML but
that's probably not an option so I just
made my own extension and some are faded
out because I also have another
extension which to KML which fades as
time goes on so for a level at a
magnitude to quake it fades out over two
days so if i did a time animation you'd
see these pop up and fade out and then
you can have internal dibs on popping up
is it as it on the description just like
in Google Earth so let's try let's try
doing a little more stuff here
so you guys probably don't need to see
me typing in so I'm just going to copy
and paste some stuff and right now I
have another base layer that I that's
enable enabled that's the cities and
what that does is it downloads a about
two thousand cities at a time so it
doesn't freeze up the machine you know
downloading one hundred or a hundred
thousand cities at a time and you also
can how there's a special callback for
if you click on a city so that could be
very useful in extending the globe to
you know say if you click on new Paris
France you're going to have some sort of
a list of things you want to show up in
the graphical user interface for that
city so i'll just give a simple demo
where it'll just pop up the information
for a city if you click it in so let's
just wait for some here's Olympia Wash
10 you'll see it just returns what we
have we have times on state longitude
latitude country an ID i use the
geonames org database of names so this
is the geonames ID and it has you know
an ascii name and a in a utf-8 name as
well so that's that's interesting and
something I don't think Google Earth has
which should the you know a built-in
database of cities it's pretty useful I
think perhaps it does but not in this
way so let me show another I need a
useful thing it's adding a feature to
the earth very simple to do I planned
initially on creating a mirror to the
new google earth plugin application api
to you know so i would be compatible
with that people could switch over to
earth browser if they wanted to they
didn't want to you know if their users
didn't have google earth and that
plug-in installed already had default to
me and then maybe go to Google Earth if
that was what they
you know desired so but along the way I
just it just became difficult for me to
create demos and to you know work it all
in i can tell that it was perhaps a c++
interface to java it wasn't but since
it's such a natural extension of
ActionScript javascript is such a
natural extension job to action script I
just found it easier to use this jsk ml
language to add features so let me just
show you add feature and so jsk ml
everything is encapsulated in an object
so you can give it a label as to what
it's going to be so I'm going to add a
place place mark here do they do to know
just one place mark name test
and here's another bone to pick I have
with a camel Lola will put an icon on
here and I wish it was just a simple
icon' href or something that will just
do the way kml requires style icon style
icon href
oops
hug me copy and paste not used to
bending down so much there are
disadvantages to being this tall ugh
okay so and let's also give it a
position
okay make sure we have commas and let's
go back and see what we got so there's
our place mark and doesn't do anything
let me copy and paste a little thing so
too much to type on each just to show
you what's possible the built-in div
things can show built-in flash my name
is layered on top rademaker I'm
technically very fun presentation to
watch so that that's a basic way to add
a feature and you can also you can also
add Oh everything's getting all wavy you
can add an event to that
let's add in the dead
oh wait I already have a description so
that's all written sorry about that i
will delete that try again so you can
see the events or work work farther it
also has mouse over and mouse out and a
number of other events i haven't
published an API yet it's still in
development it's closer I believe I'll
have an api out at sometime next month
so you can also do let me just start
copying and pasting here can do polygons
with line styles transparencies it
pretty much does almost everything the
KML can do I kept writing this in action
script and waiting for the the
inevitable roadblock that would stop me
from doing what I'm doing and it just
never came so I just kept writing and
its really been a pretty amazing process
to to be able to do this whole thing and
just directly and flash without needing
needing to write any C++ code or have
any kind of plugins to install here's a
couple more things just some embedded
things I put have put a frame per second
calculator there see we get some pretty
good that's 18 it's averaging about 18
frames per second here it's a little
slower when you get out when it has to
it's basically limited by fill rate I
believe and here's something to go
fullscreen this is standard flash and it
will work on any website you can make
the globe go fullscreen so now I'd like
to talk about the KML extension that I'm
so excited about and let me for
first okay I've gone through all these
now my KML extension and then I'll show
an example of that my camel extension
has to do with time I feel that time is
a second-class citizen in KML / feature
time is the way it is right now you can
specify a particular time or a time span
and / future time works and it's
flexible it's simple to author use the
ISO standard time representation which
is you know very simple for a human to
understand but it's awkward and it's
limiting in a lot of ways to obvious
examples are animating a moving
placemark if anybody's ever tried to do
that in KML they realize that they have
to jump through some hoops that aren't
really necessary and also animating an
image across a ground overlay my example
would be in Earth browser I have Doppler
Doppler radar overlays over the
continental US and you know frame by
frame I have to have a separate ground
overlay for each frame so the current
state of placemark animation each point
on the animation requires a separate
place mark each of those as a dot there
and it will remain on that dot until you
reach the time frame of the next place
mark dot which at which point we'll
switch to the new location well that's
choppy and unconvincing of an animation
and to turn them off to turn them on and
off placemarks have to be grouped
together otherwise you know you have a
hundred place marks and which one are
you going to turn off if you want to
turn off that feature so you have to
group them in a like folder and turn off
the children another huge problem I
think that really limits the
functionality of google earth is there's
no feature coherence and what I mean by
featured coherence is each object has to
be represented by multiple objects in
KML itself and also internally so you
can't just have a single object ID to
describe a particular thing so you can't
have the camera following it you
can't have sued animation between you
can't to pick out which point you are
depending on which time frame which
point in time you are within the browser
is a difficult task it's impractical so
and the current image animation is
similar to the placemark animation
problem several identical ground
overlays are created for each image icon
which is specified problems with this
are similar but somewhat more severe
than for placemarks because there's a
lot more each animation requires a
separate ground overlay which is in
essence a mesh that's in memory and that
mesh is used for a particular time frame
and then it's not used but it's still
resident if you want to have some sort
of you know latency if you don't have a
latency problem so memory processing and
overhead for each each separate match is
a little more than it really needs to be
so and again there's no feature
coherence which leads us to my proposed
solution which is geometry based time
coordinates so the problem is that time
isn't correctly in my opinion integrated
into KML currently geometry is
three-dimensional which is a convenient
abstraction is something we can all
understand however reality is we live in
a four dimensional world space-time so
the solution is to go Martin time with
the geometry as either a four tuple or
as a separate or separately so you can
keep the optional altitude value
optional otherwise you know you would
you would have to have altitude there if
you were going to specify time so I
think perhaps time as a separate tag
would be more appropriate or you know so
to do this you can't really have the iso
8601 interleaved with with these
floating point numbers which are the
latitude longitude and altitude so I
propose using modified Julian date to
represent the time which if you don't
know what that is it's
the it's the astronomical standard it's
a floating point representation of time
based on based on the original Julian
date olney modified down to have less
precision you don't need as much
precision so it's faster floating point
number is faster to parse it can you be
easily put in the coordinates tag along
with the latitude longitude and altitude
and it I think that's just the way to go
so the benefits you get from geometry
and time place together is you get
reduced file size and complexity in the
example I'm about to show you I've
generated a number of data sets which
would take up 1.2 megabytes because you
have I have every minute i have a new
placemark and at a new location so i
have you know i would have 1800 place
marks each with their own each with
their own time span and it was reduced
down to 60 k which is a and of course
this is all you know gzipped down or
zipped down I should say so it's kind of
relative but what you get is you get
featured go hearings single feature can
represent the entire time series for an
object that's animating you also by
treating it as continuous value you also
can get smooth animation you don't have
the choppy animation anymore you can
also put different types of smoothing
kernels on you can do a nearest-neighbor
which would simulate the Google Earth
today or you could do linear
interpolation which is fast or if you
want to be really you know fancy you can
do some cubic spline continuous cubic
splines or you know perhaps there's more
that would be feasible so what does that
mean for the current geometry how do you
integrate this new time into each
geometry and what did what does each
geometry feature mean with with time
integrated into it point specified
specify moving position that's pretty
clear line string and linear ring could
represent a path trace if you specify an
optional you know how long in the past
do you want the tip the trace to go
backwards so that's a useful thing I
found I'll show you an example of that
with the demo I'm going to give in about
a minute polygons that would be an ideal
situation to do a morph between two
polygons States and that would be a
really useful &amp;amp; earth browser to do
morphing between the three hour forecast
data sets that I get from the National
Weather Service multi geometry probably
would be something like you know a
multiplexer over the timeframes and
model would be ideal to London to search
some sort of a keyframe animation so let
me talk about what I'm what my what my
next little project I did was I asked
Michael here for a key an early key to
the google app engine and i created
Berbick cal calm which is a i love it
that you guys did a Python with Django
and because that's what I use on my
website and I I just love that system so
orbit calc outputs KML for current or
currently orbiting satellites I've
translated a standard or blood standard
orbit calculation routines from CC into
Python and i plan on open sourcing the
project in the near future once i get
some of the kinks worked out in fact as
an aside i have some great ideas that
I'd love to have google give me an
unlimited account to make these open
source project camel resource generation
projects that it would be i think just a
great thing for the computer industry in
general so what Orbach how it does is it
downloads the two line element satellite
descriptors which I believe are updated
updated daily I'm actually waiting for
my own redistribution agreement from
NORAD in the Space Command but I maybe
Sergey could talk to them and get me one
quicker but they haven't replied yet so
it outputs camel using the new GM
geometry time coordinates so let me go
to the demo of orbit calc and
show you what this is all about here
okay here we go so here we have this
also demonstrates some of the the GUI
features this is all in an external file
and the fading the tweening is all done
via JavaScript actually the tweener is
internal to action script because that's
faster but you can call it from
JavaScript and you can have a nice
little drawers or whatever you know this
is a zoom thing you can completely
control here's a time thing and you'll
see here here's the International Space
Station using these time coordinates and
this is where it's at right now you can
see it just crossed the night Terminator
and it's going over the Pacific if
you're getting closer you can see how
it's moving the camera is tracking that
using this linear I'm using linear
interpolate 'add coordinates between
between the point and you'll see here
there's the line behind it as the orbit
track and you can also see let me get it
what happened
okay let me get a full screen a little
little go away so you can see there's
other orders here's the Hubble Space
Telescope glass total pegs and there's i
also have a nice little thing i think is
really cool it's the the latest latest
launched satellites and you can see them
you know kind of getting getting into
orbit there I can't really I don't have
a huge time frame for this but you can
see as their as they're making their
passes decelerating a bit to get into a
stable orbit so that's the that's the
example of of these time coordinates in
action at least in the two in the point
and the line string sense so let me just
go back and finish this finish this talk
off and talk about a little bit about so
what's next for Earth browser flash 10
is out in beta now and it has some great
new features I didn't expect this but
they have they have hardware optimized
3d rendering to some extent in a
restricted for format there's it's it's
almost perfectly designed to speed up
our earth browser there's native matrix
operations there's hardware accelerated
triangular rendering there is even a
pseudo fragment shaving language that
can be used to do things really cool
things I'm expecting you know normal
maps and atmospheric scattering just
there's it's pretty exciting to be a
flash developer at this point so what
what's this all going to me is going to
mean earth browsers going to have to
rain probably within within the next 12
months and I'm also working on 3d colada
models
and GPS track imports importation over
the web that'll be pretty pretty neat
for people who want to you know keep
track of all that all the hikes that
they do and share hikes with their
friends and I've actually begun work on
an iPhone version so that's my talk and
if anybody has any questions please feel
free to ask away
Oh</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>