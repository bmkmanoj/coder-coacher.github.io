<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Greg Kroah Hartman on the Linux Kernel | Coder Coacher - Coaching Coders</title><meta content="Greg Kroah Hartman on the Linux Kernel - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/GoogleTechTalks/">GoogleTechTalks</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Greg Kroah Hartman on the Linux Kernel</b></h2><h5 class="post__date">2008-06-11</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/L2SED6sewRw" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hi everybody since we start a little bit
late I'm going to keep this nice and
short unlike our guest Greg who is quite
tall and yeah this actually rose out of
discussion we were having between some
kernel folks that I know and Bryant's
wetland right over here about sort of
the nature of embedded system well no I
mean like from outside the company
inside the company like don't I'm
speaking here all right anyway uh and so
you know at the end of uh said hey I
want you come out and speak and be fun
for us and fun for you and stuff so here
we are
Greg thanks just working all right I'm
Greg Crowe Hartman I'm Alex Carl
developer I'm a subsystem maintainer of
the kernel for USB driver core I used to
do PCI I to see a lot of weird things
I'm one half of the stable kernel
maintainer group which I'll talk about
later so here we're gonna talk about
kernel process who's doing it how it's
being done
why you should care and why Google
should care and things like that
I'm please heckle ask questions in the
middle I like it make fun of me I can
make fun of you so be even so first
thing this is the most important thing
don't get anything realize this this is
what the Linux kernel did for the past
year and a half from the - 622 - 625
kernel this is what was changed per day
in the kernel this is a stable kernel
this is a stable development process
this is frickin insane
it is the fastest moving project suffer
project known to anybody
um largest project of its kind known to
anybody but it's also created a result
that's never been done before and we
have an operating system that supports
more devices than any other operating
system ever has we support more
processors than any other operating
system ever has in the history of
computing and we're doing it in an open
manner in a very chaotic manner I'm
moving at a rate that fast shipping
something that's stable that everybody
including yourself uses every day um we
broke all the software development rules
and we're continuing to break it if that
doesn't make you guys scared it should
the biggest thing that makes you guys
should make you guys scared is if you
keep your coat outside the kernel that's
going to pass you by do you think you
can keep up with that kind of rate of
change figure out what's going on with
that rate of change if you get your code
into the kernel that rate of change will
happen to you automatically if you don't
it'll blow your bike
so get your code in the kernel it's the
main thing I want to talk about so
that's it that's crazy and also this is
the first question people ask like ah
that's just drivers right drivers are
changing that fast no it's the whole
kernel I look at it I've broke it down
by the proportion of the code size of
the kernel the kernel is about 9 million
lines of code the core the kernels 5%
drivers a little over 50% 55% if you
look at the rate of change in each
individual portion it's exactly
proportion exactly proportional to the
amount of code that's in the kernel for
that section so the core of the kernel
is changing a 5% of that rate the
drivers section is changing a 55% of
that rate the architecture-specific
spots going at Lizza i don't know it's
going at 30% of that rate so it's
uniform it's flat across the whole thing
so don't think the just the drivers are
changing it's the whole thing it's
everything so oh and along with that
rate of change it breaks down to this
it's going really fast three point six
nine changes an hour 24 hours a day
seven days a week during the two five
two two six development cycle we're
running about two point five changes an
hour and that was unheard of nobody ever
thought we could do that since then
we've been going up um I don't know why
we're getting faster we're getting
faster we're doing more rate of change
and it's getting bigger so this is
something that's stable so here's a
graph you want to see all the lines of
code added and modified deleted over
time I just did for the two 6:11 and on
if you look previous to that it was a
little bit less so it's right it's kind
of staying around the same but at lines
out it keep going up it's interesting
it's not really trend worthy but it is
continuously going up what is trend
worthy is the changes per hour is
continuing to go up to 625 changes per
hour is amazing oh and all that rate of
change does not include moving files
around moving files around the kernel
doesn't affect it at all it does not
change that at all so we're going faster
doing more rate of change per hour per
release everybody happy nobody's
questioning that no come on
all right so how do we do this here's
how we do this extensively starts off
the developer on the bottom they make a
change to a file to a they find a bug
they want to add a new drive or do
something then they take that change
that patch and they send it off to the
maintainer of the driver or the file in
the kernel we have about 600 unique
maintainer x' that are listed on who
owns what you can't find what who owns
what you can look in the file using git
and see who modified it last whoever
touched the floppy driver last is the
maintainer never touch the floppy driver
so that person is responsible for
looking at it and then they see it they
review it and then they sign off by it
they say this looks good to me
I think it's okay and they add their
signature call signed off and I'll talk
a little bit more about that later so
developer says it's signed off it's good
they say it's good they send it off onto
the subsystem maintainer subsystem
maintainer like USB PCI BFS security
core things like that they consolidate
all the patches from all the other
people and then they hold onto them they
create these little mini trees
everywhere these little mini trees are
either get using quilt somebody I think
that's all everybody uses some tarballs
maybe and all that every night gets
pulled into the Linux next tree it's run
by Steven o Rothwell
Ross well in Australia works for IBM Oz
labs um he pulls it in every night until
Linux next tree merges them all together
and season with builds or not sends you
angry emails that you break the build
you break the merge it's great it's
awesome it's testing all the subsystem
maintainer stuff for all our development
things Andrew at the same time as
creating is now relying on Linux next
and sucking everything into his tree
about once a week or so and then also he
pulls things from the Linux kernel
maleness our mailing list that happened
to get drop
by subsystem maintainer what not he gets
he sucks us into history and everybody
and then he doesn't release every couple
weeks so that's testing this is the
developmental stuff so all the crazy
stuff two subsystems maintainer czar
holding on to all the stuff is coming
across the mailing list but Andrew picks
up gets pulled into these releases then
when Lina says it's the merge tree
windows open and talk more about that
later
all the subsystem maintainers hit
leanness you've got two weeks to hit
leanness with all the changes you want
so they all go to leanness Andrew sends
a bunch of stuff to Lina's after the
subsystem maintainer to get there and
then we go on cycle releases I'll talk
more about releases later so nice little
tree structure Salinas and Andrew and
next tree that makes sense a nice
hierarchy right nice and pretty so I
tried to graph this looking at the
relationship between people and way
patches flows at a tree thinking be a
nice pyramid what not turned out it
isn't I made a graph that was about 40
feet long and 4 feet tall of one kernel
release it was a mess it's a big giant
spaghetti mess it looks like an internet
routing system which is good because
means that if this person doesn't pay
attention we route the packets around
them Andrew picks it up and then sends
it a subsystem maintainer sends leanness
or this person sends directly to there
and goes around the maintain or this
person disappears for a week so it's
very good it's lossy we can handle
people disappearing handle people cut
reappearing and it works out really well
it isn't a strict hierarchical
development system which is good and it
shows how we can keep up this massive
rate of change so fast it's kind of
scary if you own a file or a driver you
need to accept the fact that other
people are going to be changing it
extensively without you knowing it but
hopefully you should be paying attention
and you just have to accept that other
people can do that you can always change
back if you didn't like it but that's
the way we get things done that's how we
can work so fast makes sense
so here's a release cycle so Lina sensor
release based on something we say it's
good so then we have two weeks we can
throw anything we want at Leena's all
the subsystem maintainer so everything
we want abstence idli it's been tested
in the linux next tree before that had
been testing the mmm tree from andrew so
we hopefully expect that the code has
been tested it builds it hopefully
compiles sometimes and all mergence so
that's when the hundreds of thousands of
patches go in at once two weeks mean
this releases an RC one kernel then the
subsystem maintainer is that we're on
vacation or forgot about the merge
window being open wake up and say oh no
I forgot my stuff they sent leanness
again so then doesn't rc2 couple weeks
later hopefully that's getting better
people are slowing down everything
happens to be gnar C 1 or C 2 then it's
bug fixes we start doing bug fixes we
track bug fixes regressions do or so you
want three four or five whatever until
we think things are slowing down good
enough and boom Lina says okay this
one's good out the door and then we
start the whole cycle over again there
is no stable and unstable development
trees anymore
you step odd was unstable and
development even was stable not anymore
the past four years we've been doing
this model when we finally realized that
this model really worked good we said oh
we should try and do release every two
to three months right if you look we're
releasing on an average of every two and
three-quarter months for the past three
to four years like clockwork you can
trust that a new kernel will come out
between two and three months this is a
really really good thing it lets the
upstream distros figure out in their
schedules when things are going to be
done within a within a reasonable time
frame they can plan when things are
going to come out this shows can figure
that out
developers can figure out all I missed
this merge window when's the next one
going to come around they don't have to
worry that their stuffs going to get
dropped for forever it works really
really well one thing that happened
though is we realized during this two to
three month time what happens about
security bugs or people that actually
use the credit org kernel what happens
then there's bug security problems
happen what are we going to do so we
formed two people form the stable tree
which is me and Chris right works for
Red Hat and we do security updates our
bug fixes dot one two - three - four -
five and we have a real strict
of rules of what we will accept what we
won't accept it's pretty easy has to be
bugfixes only security fixes the patches
have to be in the upstream tree already
unless in some really really odd thing
things like that must be small obvious
we do those releases every couple weeks
whenever we get around to it sometimes
we're slacking sometimes you're not
security updates we can do it usually if
we get it in the inbox we can do it in a
couple hours so we release things as
soon as possible if we can and that's
working out really really good the fun
thing is after that we drop them after -
6:20 comes out we might do one more -
619 stable and then we stop we don't
have to do it won't have to maintain
that for forever you can maintain it for
a forever if you want to somebody picked
up the - 616 Colonel decide to maintain
it on his own for for a long long time
we all thought he was crazy he got a job
out of it so maybe it wasn't so crazy at
all showed that he could do things over
time so it worked out really well
if you want to eff anybody wants to -
6:24 colonel - maintained for a while
let me know I'll give it to you we don't
care so that's how it works
stable releases happen development
releases happen and then we drop stable
trees so we don't have to maintain them
for forever which given our rate of
change previously is a good thing to do
makes sense we're right here happy with
that
is it working all right
we don't have a notion of a preferred
release anymore now every release is the
preferred one the latest one um based on
a rate of change if you report a bug or
a bug problem and to send two kernels
ago its given how fast kernel have been
changing we're going to ask you can you
reproduce this on the current version
the first thing we're going to ask you
so yeah so everything's preferred the
last run was referred now note when the
distros do releases we know what kernels
are going to release so sometimes those
kernels hang around a little bit longer
fedora and openSUSE are based on to 625
right now odds are that kernel is going
to hang around for a little while
because chris wright works for Red Hat
and I work for Sousa so we'll probably
want to hold on to that kernel for a
little while longer make sure bug fixes
get in there and it's good but if you
want the new features things like that
you should go to the latest one not yeah
why two-week window merge when to it not
but why not accept merges all the time
because we want be able to throw a bunch
of things we want to shake things out
and stabilize them we want you to test
and feel good that oh we can at the very
end we don't want to accept a massive
bunch of USB changes that nobody's
really tested or run for the past three
months three weeks or so you know we
want to at least look at some kind of
software good engineering practices look
like it's something we're know what
we're doing here yeah
so there is no there's no gaps where
we're not accepting any merges yes well
we think of ya when we we use get to
send things to Lena so he pulls from the
the subsystem maintainer x' trees and
what merges them in that's what we
merged things but it should be bug fixes
only from our c2 on unless it's a really
odd thing we should have bug fixes only
are going in into the merges um I think
of merging as new features I'm sorry
it's wrong terminology I you can just
get to send stuff to Lena Selena's came
here and talked about git I use quilt
what's really good too so yes how do we
test um
the fun thing about a kernel is there is
no good way to test it except running it
can't run right unit tests you can write
unit tests that obsessively test some of
the external features such as the system
call interface hasn't broken and some
odd things but what really is testing
and what the operating system is running
it on your machine there's so many
hundreds of thousands of permanent
ations of devices and interactions with
timing and everything else that we want
to run on all your machines so we rely
on you to test we rely on the developers
to test and it's the only way we can
obviously test classic example is I had
a problem when you were you plugging
into USB devices at once and yanking one
out the data was being streamed out to
you can't unit test that unless I want
to plug I have a big box of USB devices
that I do test a lot but it doesn't make
for an automated system so we ask you to
test it yourself we rely on the
development community to test that's all
we can do there isn't a sane way to
write a unit test for an operation just
doesn't work because we're relying on so
many external inputs people keep trying
and it's great and we want as many tests
we want as many functional tests as we
can get but like performant and we've
performance test also people are trying
to test them but it's a really hard
thing to do that way
what is so what was holding it up and
with what was the formal procedure we do
track regressions so like people report
a regression hey this worked on two 620
and two 621 RC whatever it's broken
regressions we track so towards the end
of the release cycle we say have we
fixed all the regressions have we fixed
all the bugs that have been reported
some people are trying to track the bugs
that have been reported if it isn't a
regression and it just is a bug that's
always been there or something that new
happens or for something that's been
added that's brand new new support
hardware we don't really treat that as
important as a regression from actually
machines working we want to make sure we
never break a machine that was working
previously we ripped whole features out
because the machine was working properly
which is tough a CPI and some
interaction is a low-level platform code
is nasty so we change that and it breaks
whole models of laptops there's a IBM
series of laptops that was notorious for
breaking whenever did we change anything
in a CPI it's tough so we try and track
those and that's what's keeping us oh
look we know that there's this one class
of bugs that a bunch of people are
hitting let's try and fix that before we
do get between our c7 and the final
release so we do keep track of that so
if you have a problem let us know so as
a developer and as a user if you want to
help Linux out test these RC releases
test them and let us know if there's
problems you have regressions or not and
they're good I mean all these are run on
everybody's machines you don't have to
worry too much about these these things
I wouldn't run it on something that's
production wise but definitely run it on
your local machines I run on my laptop
all the other ones if you want to test
what I want to help us test what's going
to happen next test the Linux next
retest Andrew Moore industry that shows
that crazy developmental stuff that's
still under heavy development that we're
trying to merge in and figure out what
is good enough to go into next merge
window we have features in there that
aren't really good enough to go there
might be a couple releases away
things like that that's a question all
right move on like I said we're doing
this every two and three-quarter months
so we're actually doing what we said we
were going to do and that's a good thing
it's a time-based release cycle it's
turned out to be really nice thing works
really well a lot of open source
projects are kind of switching towards
it it works you know that I will if I
meet miss this feature this window tune
3/4 three months later we'll get in it's
a good thing to do
9.2 million lines we've been growing at
a rate of 10% increase in code size per
year since I started tracking it back to
two six zero it's a linear graph it's
just pretty much straight which is
amazing we're still growing we're still
getting bigger that's a pretty big chunk
of code now not all machines run all its
9.2 million lines of code that's funding
you right in the core and a few drivers
around it not working things like that
so that's everything that's all the
different platforms everything else and
the last year and a half this is the
number that I find the most impressive
we had two thousand three hundred nine
nine unique contributors to the kernel
that's amazing that's showing we're
doing really really well now half of
these contributors only contributed one
patch half the half contributed to have
to have the half contribute three little
exponential curve there but the top of
the curve is getting flatter when we did
the two six two five two two six the top
20 people did 88% eighty percent of the
work now the top thirty people will do
30% of work just by quantity of patches
so we are flattening out and we're
spraying the load out a lot more evenly
I looked it was 200 people 200 people
did eight no 200 people did eight person
something I was looking at top 200
people they did a lot of work spreading
a lot better so that's good and here's
the the backgrounds that graph I did
that crazy graph it's on
Crona Oregon try and load in your
browser it's a good SVG test test
it broke Kinkos machines crushed
Macintosh the only I got somebody from
HP to print it out he had printers in
his barn
the growler printers in his bar and he
printed out Kinkos wimp that's our
number of developers that's good and our
number of individual developers perc
releases going up also our number of
companies they're actually sponsoring
developers is also going up which is a
really good thing showing more companies
are getting involved as a spread of
Linux goods bigger so let's talk about
people quantity we can track people by
quantity this is just quantity not
quality
I'm not going to talk about quality so
this is a number of changes that got
into the kernel top 10 people for the
past year and a half number 1 REM bunk
there's lots of janitorial patches al
Bureau BFS Thomas likes near the x86 no
I 386 next 86 arcs maintainer along with
Ingo Molnar a David Miller networking
core Bart ID Paul month is sh
Ralph Beachley is MIPS maintainer and go
again
Patrick McCartney is netfilter and
tasian is live ata this drive stuff so
to this job guys top 10 that's quantity
that's a number of changes that they got
in the kernel um that's to funding goal
so signed off by remember how I
mentioned every person along the
hierarchical tree signed off on it
actually reviewed it here's the top
signed off this shows who are the
gatekeepers and how who's doing what
andrew is the top leanness is next now
the funny thing is andrew has more than
leanest it everything goes to Lina's
leanness doesn't sign off on patches he
pulls from sub maintainer z-- we're
using git because he isn't looking at
him he's trusting those maintainer to do
the thing so I make up a get tree for
the news to pull from he says great you
pull from it and he doesn't sign off on
this that's why his number is lower than
Andrews so actually the real number of
patches that got in is less than the sum
of those two it's kind of funny so again
David Miller networking Jeff Karthik
network drivers Ingo architecture for
Intel me Thomas our Intel Morrow
does video for Linux little webcam stuff
he does that in his own spare time which
for telecom company in Brazil awesome
stuff Palma Mac Paris is PowerPC John
Linville is wireless drivers so you can
kind of see what areas of the croud
kernel is doing a lot of activity so
video for Linux is a very active area
wireless is a very active area
interesting things top someone so let's
see who is funding these companies so we
can see the people we see the number of
changes they do it so who's doing this
work so again for the past year and a
half
Red Hat IBM Novell Intel Oracle
consultants these are individuals
working for consultants that are being
paid by other companies or working for
consulting companies themselves academia
I'm very happy to see academia is
actually going up that numbers going up
and rene asus releases um i think
they're an sh chip maintainer developer
which is really interesting they just
popped in the top ten so you might want
to guess what's number one and five come
on
canonical I'll tell you where canonical
is later I'll tell you where they are
now they're about three hundred
canonical I had six changes in the past
five years
canonical does not give back to the
community but that's what they do the
next foundation no next foundation is
not on the list anymore
because they only have one developer
leanness they do odd - I'm sorry a lot
of what doctor book doc C has to do with
that isn't that goes in the kernel
anyway outcome Susan is no bail so new
Val Souza same to go HP now HP I I'll
just count you guys amateurs number one
these are people working for themselves
we have asked them who they work for and
they say I'm a hobbyist I'm doing this
on my own time and the number five is
unknown
they are either we have no idea who
they're working for or that they wish to
remain unknown some people say I not
allowed to say who I work for
here's my bad so we tracked these stuff
so between the sum of those two it's
almost 25 well most 1/4 of the number of
changes that go into the kernel is being
done that people they're not being
sponsored to do it another thing about
these unknown individuals
none of them well I think I think about
five of them are contributing more than
ten patches so there are lots and lots
of people on the tail that we don't know
who they're working for
so it's not a large they're not large
contributors
so or you can look at the other way 75%
of the development that send the colonel
is paid for is sponsored because these
companies care about what happens to
Linux if you want to see what's going to
happen to the kernel what's going to
work for you
you need to influence it everybody else
what's going to be coming in colonel
what's next it's whatever you make it to
be whatever you want it to be lots and
lots of companies are working to other
line in Linux you guys rely on Linux
lots of other companies I've given this
talk to a number of companies only one
company I've ever given this talk to is
actually on this list and my thing to
send what Google's not here where it's
goggle Google's 13 if you don't count
Andrew
so without Andrew you can't enter I
count under to Andrew this great work
but so I was trying to think of a metric
do you do do the mean of a company's
developers you know the you look of the
massive body or you count the net
quantity but then smaller companies of
Pewter developers how do you rank them I
don't know how I'm trying to figure out
some fun stuff of statistics why some
graduate schools you happen to be taking
statistics class right now so it's just
lots of ideas I can use here so yeah
without Andrew you guys are 40th you
guys rely on Linux this either means one
of two things that the way Linux is
going and the kernel is going and
working it's just fine for you and you
like it and you love it and you're happy
it's great lots of people are that way
but the other thing is do you trust
these companies to develop the kernel in
a way that matters to you I would say no
you trust these guys they don't know
your business as well as you do you only
know the loads that you do as well as
you do so if it's going as well then
fine I'm happy and I'm not gonna
complain about yep
this you should know I mean if there's
things you care about this fine and
that's fine if you care about they talk
about this thing that's great
a lot of companies I talk to say well
company on ranking so-and-so is doing
our work for us which is great too a lot
of these companies I know idea our red
hat Novell we both do consulting for
other companies and do work for them but
again they're overworked companies and
there's no reason why the individual
company yourself can't get involved we
make it very easy to get involved in the
kernel development process based on our
number of people are contributing it's
kind of working so there's no excuse for
you guys not to contribute so that's my
reason so let's pick out some in other
fun things 27 people I went to look 27
of you guys contributed code lesson here
you are
so Andrew number 11 awesome great very
happy
David number 149 see here I tell them I
was coming so he has a perfect example
of what I'd like to say is a great
person to have he started off working at
a university doing janitorial kernel
work he looked at the kernel here's a
fix I can do start running it did it got
hired by you guys I don't know what he
does and it's contributed now to the
core kernel the via to the what does he
do and I'm stuff out of memory stuff
core kernel guy contributing pretty well
67 that's in the top eight percent of
all kernel developers by quantity out
there right now great job
Paul was Paul do I looked at CPU
scheduling that's good Ken does what
huge TLB and other sort of stuff nice
core kernel work really good then
there's Matt Matt here okay matt puts
everybody else in this company to shame
matt contributed spelling fixes to the
kernel
which is awesome and I will not say and
I love them and that's a really good
thing to have but Matt beat out all your
other kernel guys he's number five out
of the whole company contributing
currently contributing changes that fix
spelling so if you're a developer you
should feel a little shamed about that
yeah I mean I gladly take the spelling
changes I hope they contribute to more
in the future but come on all right guys
and then I didn't I gave up looking at
the rest to get what you guys did I'm
quantity
I'm number of developers um it's pretty
good there's some companies with like
ninety some which is amazing looked at
but then there's smaller companies with
like five developers that are very high
in the list too so it's like I can't
look at pure quantity of unique
contributors I just can't figure out a
number don't look at the mean of the
contributing one I look at the mean here
you're way down at seven you know I
think you guys want me to do that so
Martin where's Martin Martin disappeared
so the joke is when anybody ever goes to
work for Google they enter the black
hole never to be seen come again Martin
used to actually contribute to the
kernel I know Mark it's not going fun
Christel more two patches two patches
two patches then we start getting to one
al
that's cool to see al works here he used
to contribute a lot used to and there's
the rest there are something interesting
that's great and it's awesome and I have
nothing against that but if you can if
you I know you guys do a lot of
development in-house and have your own
custom setups and certain things like
that which is great and fine but if you
think you can keep your changes outside
the main kernel tree and keep up with
that rate of change I think you're going
to have a problem it's really really
hard to do even with our good tools to
handle merging get things like that I
know this really doesn't show it none of
the Android stuff is landed hopefully
this Android stuff will then okay for
this patch is already our Android
hopefully yeah I've heard that before
yes I trust you guys I trust you guys
we'll get the stuff but so trust our
subsystem maintainer your mileage varies
sometimes and help yes and how easy it
is if you ever have a problem with
getting things in talked to me talk to
Andrew talk to the other people we will
help make this happen
I have developers that are willing to
help out with cleaning stuff up we've
taken maintain we take code from other
companies that are not the proper coding
style we'll clean it up for you
well-maintained will get in the kernel
we do this kind of stuff all the time so
it shouldn't be anything like that so my
main point here you guys rely on Linux
there's no reason why you guys can't get
involved
you guys should contribute help them
drive it in a way that you feel is going
to work best for you otherwise it's
going to work good then I hope and I
hope it's source so everybody asked
what's new here's some of the things
that happen into 6:26 it's a joke that
tell you everything that happened to its
some a lot of stuff happened a lot of
stuff so any questions it was fast
in the back
Oh No
the talk of the code 95% of those
drivers no I think you missed in the
beginning 50% of the code and the
Colonels and drivers 55% of the codes
and the Colonel's drivers the rate of
change is proportionately proportional
to the amount of code is in the kernel
so those 4,000 some lines added 55
percent of that is in the driver
subsystem so five percent of that is in
the core kernel it's proportional across
the way so the majority is drivers by a
small bit after drivers is architecture
specific stuff than networking but
that's it so it isn't all drivers which
is scary in a way that means your core
the kernel is changing that fast the
core of a kernel is changing at a rate
that blows all other operating systems
away just by looking at the math is just
touching the core the whole subsystem
think about that Solaris so what's
driving the change the thing in the
quote what's driving the rate of change
in the core it is the fact that Linux is
I mean Lena Zoe's jokes Linux is not
evolutis not intelligent design is
evolution which means we react to
stimuli that's happening in the world
it's like oh no we have to support this
new architecture which means we have to
change the core to do this now we don't
over plan things we take what's
happening right now
so yes new features happen and we add
and we figure out how to change the core
to get them to work people come up with
hey a good idea that we can get this if
we rewrite these we rewrite them locks
to be mutexes instead of spin locks we
can get the RT stuff in there and get
real-time in the core the real-time
stuff shows that you can take these
crazy out of the tree patches and merge
them into the core kernel and now we
have a real-time aware kernel of Linux
something that people said that can
never be done it's just pretty amazing
understand so um it's everything it's
just responding to external stimuli so
we're not over planning we're reacting
at the time it needs to be done which
sometimes means we're a lag a little bit
so some hardware companies will come up
with a new device we're like oh crap
when you do we write this luckily we're
getting better and these hardware
companies are getting involved in the
process look at intel on that list until
it's very
they're very big on Linux because Linux
runs on all their chips they want to
sell chips and make sure it works really
good on their chips so no no look at Ori
come on we look at toy penguin picture
yeah why don't we pay more attention to
consistency some things start change
rapidly and our interfaces do change
rapidly hopefully we never change the
user space interface talk about the boot
line changing for the MTD stuff I don't
know maybe they had a really good reason
to do that hopefully they did and that
sounds like a foolish thing to do we
hopefully never changed we change the
internal kernel API all the time or
recycle you have to have a frozen you
have to have a stable API then you say
what API we have eight nine thousand
symbols we have twelve thousand
different structures I mean that are
passed around inside the kernel you
can't freeze that because it doesn't let
you ever change anything so inside the
kernel we change all the time we change
rapidly we have really good reasons for
doing that but outside the kernel user
space api's we should never change
I can run binaries that were built for
Oh dot six nine six just fine today on
the kernel two six kernel day sis call
interfaces don't change for the most
part there's a little gray area of some
interfaces that around the kernel and
user space like the proc file system
that end up changing every once in a
while but hopefully we catch all the
users around that but we're trying to
document that we're documenting that
user space API now there's documentation
ABI that we document that the command
line stuff we do document now that it
changed was odd I don't know why it
shouldn't have you should complain to
the developers they didn't realize it
broke it sometimes like oh I didn't
realize I broke that you know that's a
buck I need to fix it regressions are
always going to happen hopefully we fix
us
I'm back yes
yes
yes
so the question is a while ago I said
the enterprise kernel should just Rev
the kernel all the time for the
enterprise kernels
while Andrew keeps complaining that the
user space that are quality going down
and are reporting
I think Andrews wrong I see every single
kernel bug that comes into three
different districts or two kernel.org
and the two distros Gentoo and Sousa and
over time that number reported is flat
Red Hat's bugs their bugs before the
kernel is actually gone down now either
that means we have a fixed number of
testers and people reporting problems
which could be true but we're increasing
our size of our code and we're
increasing the number of users our code
so obsessively I'd like to think that we
are doing better because our code size
is going and our number of bugs reported
is flat Andrew sees a lot of a lot of
bug reports he sees a lot of stuff and a
lot of stuff all the time I see a lot of
stuff all the time too but if you look
at our rate of change for what's
happening I would argue that we are
doing better we're doing good if we
break a user space API let us know and
we'll fix it
I mean regressions always happen I can't
say that so as far as the enterprise
version I said it before publicly I
still think the enterprise kernel model
is wrong I get paid by enterprise kernel
company I think it's wrong because if
you look at what they do
so take Sousa or their enter slide 10
SUSE our enterprise 10 it took a to 616
kernel froze it in time and said ok
here's what we're going to do and they
fixed some bugs and make sure it passes
all the regression tests and ship it a
year later companies come along and say
we're going to do a service pack update
because we need to support new hardware
problems new hardware comes out that
changes the guts of the kernel based on
the fact that we didn't know those
things were going to happen we didn't
know the Lib ATA was going to happen we
know these new devices were going to
happen we know the wireless stack was
going to happen there so you go back and
you kind of shoehorn all this stuff into
there if you look at what we have we
have I think 3,000 maybe 4,000 patches
to - 616 it's not a - 616 kernel anymore
it's - 616 with a bunch of bug fixes
that we know were reported to it and
that's scary because we know a lot of
bugs have been fixed between 2 616 and
what we had today - 625 that weren't
reported that weren't fixed or that we
were didn't know about and we didn't
poor so obsessively the kernel user
interface should be stable and stay the
same we don't change that version number
to make people feel good they're used to
the old UNIX model things moving very
slowly the windows model things move
very slowly then go thata stable API no
they just have a slow API all those
kernels all the other operating systems
they change they break their API they
break their driver API I'm on the
Windows driver development mailing list
it's the best mailing list ever used to
see the quotes from the Microsoft
developers oh yeah we did something
change there so we don't remember what
change or you have to test a lot of
angry developers all the time so just
like users it's just like Linux so we
change our API is all the time they
don't have a fixed API so for inside the
kernel outside the kernel they do
hopefully outside of our kernel we do so
I still think that you should move
forward now there's the model of people
that take a box and enterprise box put
it on it and throw it in the corner and
don't touch it for five years and then
an enterprise model that only gets
security fixes and back porch to that
that's great but that's only about 20%
of the market out there because if you
buy a box and shove in the corner and
you're like a year from now on you wanna
buy a new box the new box is new
hardware you have to support that new
hardware on that old version of kernel
and it doesn't work for a desktop it
just doesn't work so I still think the
model is you gotta move faster so inside
I'm trying to argue that Red Hat's
trying to argue that see what works you
know it's an interesting dilemma somehow
we're still making money so I'm happy
that's it you guys are easy
what are we next
what what's next yeah well like I say
it's whatever you want it to be things
that I think are cool at KVM KVM is
really really cool it's running a
virtual machine it's a hypervisor turns
Linux into a hypervisor I think it's
going to win out over the Xen model it's
a different model or the VMware model
like what VMware does that's really
Linux running there so all the big
embedded or big hypervisor guys are
really running Linux kind of funny to
watch um but so KVM is cool
kayvyun was an upward s/390 mainframes
port is 64 or dumb arms coming and there
was some other architecture got ported
to so as KB I'm is really cool that's a
really neat technology lets you run
virtual machines so there's another way
if you have an enterprise distro that
you want to run fixed you can run it on
top of kbm or a virtualized machine you
change the hardware you get new drivers
for your virtualized machine for your
low level stuff then your virtualized
machine you can still run your old
version windows just fine because that
API between the two is fixed and that's
a neat idea so you can run your
applications there running your all that
build things that are running on those
old API it's especially your C++
libraries Enterprise distros have a
certain C++ library you never want to
change that things like that I know some
big shops like shops they're stuck using
Red Hat Enterprise 3 because the C++
developers do not want to ever change
the compiler so what those guys do is
they strip out the kernel underneath and
replace the kernel with the latest
enterprise or the latest kernel.org
kernel and then the user is above that
never even notice it happens they use
then they just not a raw metal stuff
hi kitty Imperium school USB 3 is coming
hopefully sometime in the future I'm
involved with that that should be good
das devices yeah
so it's a load as we yes what happens of
leanness wants to settle down leanness
is pretty settle down settle more the
substance to maintain is what's our load
and as already changed yeah our load has
gone up I know my personal load I
dropped I don't maintain the PCI
maintainer ship anymore because I wasn't
paying enough attention to it I know
somebody that is going to give it my our
attention is now taking over I'm so
hopefully we can are smart enough to
recognize among ourselves that when
things are going wrong we can change we
are nothing but introspective and love
talking about this every kernel summit
we always talk about the process on the
mail if we argue about the process as
our process good or not and we change
things all time we add the stable tree
because people like hey our process
really isn't covering that let's see how
that works the Linux next stuff hey this
process isn't working the subsystem
maintainer czar burning out let's try
this so we are nothing if not keep
trying things so hopefully we just keep
trying things and it seems to be working
really really well well better than we
ever thought it would be we haven't hit
any max limits yet so far every time we
do it colonel release like I this is the
fastest ever a - 625 kernel blows away
all those abs your average number to 625
is the fastest most amazing rate of
change most developers most individual
companies and anything we'd ever done
it's crazy now probably the next one
will be more faster so um hopefully I
don't know where we're gonna stop we've
already broken all the records so I
don't know we're making it up as we go
don't you feel good about Linux now yeah
settle a or sucky that's news they used
more sheep than let the developers know
i mean that's--you no news to me alone
now if they don't know these problems
and that's a big thing if you find a
problem let us know that's the best
thing about our development model you
can find the person responsible for the
code and make fun of them or give me a
patch well that's signed off by
everything so that's really we like it
call it the path of blame
so you see bug Hey look all you guys
miss this fix it so yeah if it's using
too much CPU let us know we'll work on
um taejun's really good really
responsive Jeff Karthik's really go to
that so they're good at this stuff a lot
of stuff is really weird hardware some
of the hardware's written so that it's
requiring more CPU power to do some of
these things just because some of those
manufacturers are also CPU manufacturers
so once you buy this abuse item one
thing about KBM it does make you buy new
CPUs that's why AMD and Intel really
like it
look at the virtualization stuff KBM is
the hyper KBM makes linux be the
hypervisor the way as a kernel developer
it is the hypervisor if you look at the
way the Zen model is they have to have
their own scheduling their own memory
management their own power management so
and then they have Linux running on the
side to handle the drivers because
nobody wants to write drivers Linux is
always used for drivers Hurd uses Linux
for drivers yeah take that so um so
Linux so why not do so Zen is having to
duplicate all the Numis stuff all the
power management never runs then on a
laptop will suck your power dry so why
not just use Linux as the core because
the core of Linux is equal to the size
of the core of zin actually is it Linux
kernel is actually developed by more
people maybe they know more things they
can do more things faster so use so the
KBI model is we use Linux and then the
instance of the Opera guest operating
system runs in there's a little driver
there's a KTM driver and just runs up
there as a it runs as a process so the
really cool thing about that is real
time you can now real time schedule
these guest operating systems and the
real time is a really neat thing some
people can measure Network latency and
latency of processes in dollars and they
can do that dollars and then so if
can reduce that they can make it
predictable they can throw some really
really big machines at it and make their
costs go down and make more money so
real time really matters to those guys
real time might matter for you guys for
Network latency other big companies that
do a lot of web services really care
about the network latency they want to
be able to schedule they don't want to
be waiting for another process to come
in and finish that thing they want to be
able to know what's going to happen
there terminal listicle II this so
anyway so KVM can handle that KBM can
then real time schedule your guest
operating systems Xen can't do then also
did their development off in the side in
the corner and never played nice with
the kernel developers they're trying to
catch up now I don't know if they're
ever going to catch up which is that
they were there
so guys are easy
well ever be a 2/7 colonel we said a
long time ago oh if we ever do four
level page tables or if we ever replace
the timer subsystem maybe we'll need to
development branch over here to do this
we've done those things the really cool
thing about that development model and
the one problem about the development
models we burn engineers time we waste
engineers we make you break your changes
up into tiny discrete units that can be
tested and obviously fit obviously
reviewed so we make you take your oh I'm
going to rewrite the timer subsystem
into a lot of individual steps over time
so you never know things go in so we've
done these major things we thought we're
going to have to happen already and
people didn't notice well some of the
performance guys know this for level
page tables one dinner it killed
performance someplace bleep fix that
since then so I don't know we don't need
to set I mean numbers marketing you know
so I don't think anyway I think we're
running out of time I just this is Mike
active good I just want to remind all of
you that our outgoing opens first patch
process is very very low ceremony if you
got a patch right now you can't rip it
out within the hour
so we're not holding you back as a
company selling fixes consider it
smelling fixed anyone in this crowd can
do a spelling fix so I'll encourage you
to make Linux the best spelled happening
system in the world so
but yeah now we're absurdly fast when it
comes to shipping out patches we only
ask we look at your first couple and
that's mostly to make sure that you're
not insane
and not from a not from a technology
standpoint but actually from a craziness
standpoint so and after that we ended up
trusting you that's how it works
so please do it great looks like you all
for having we bulk not not that I think
that 13 is bad I think it's pretty good
for a company of our type no so it's a
decent place to start okay good but it'd
be great if we were nine yes let you
make that first slide yes so everybody
wants to be on the first slide okay well
thank you very much</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>