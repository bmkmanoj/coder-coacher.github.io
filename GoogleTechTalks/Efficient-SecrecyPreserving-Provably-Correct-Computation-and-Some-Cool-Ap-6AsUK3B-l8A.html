<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Efficient, Secrecy-Preserving, Provably Correct Computation (and Some Cool Ap... | Coder Coacher - Coaching Coders</title><meta content="Efficient, Secrecy-Preserving, Provably Correct Computation (and Some Cool Ap... - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/GoogleTechTalks/">GoogleTechTalks</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Efficient, Secrecy-Preserving, Provably Correct Computation (and Some Cool Ap...</b></h2><h5 class="post__date">2008-07-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/6AsUK3B-l8A" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hi everybody I'm cattleman with the open
source programs office and it's my great
pleasure today to introduce an old
friend dr. Christopher Thorpe of Harvard
University chris has been involved in
computer science for quite a while now
including yahoo and tell me done some
interesting things some of what she's
going to tell us about today thanks for
coming take it away Chris thanks cut um
so I want to tell you about cryptography
that is beyond the kind of cryptography
that people usually think about which is
how do I keep my credit card number safe
when I give it to Google Checkout on the
way right how does someone sniffing my
packets on the way or someone hacks the
merchant obviously they're not going to
have google but they hack the merchant
that gets the credit card number later
on and comes back and how do we encrypt
that information that's not what I'm
going to talk about today I'm going to
talk about some advances in cryptography
that have happened more recently than
the kind of 1970s era crypto that most
people know about which are kind of like
magic if you've never heard of them I'm
going to delve right into that let's
think about an encryption function E and
our encryption function will take some
value we want to encrypt call it a
message m and this is going to yield a
ciphertext C so think about RSA
encryption how many of you have heard of
RS a great so you all know about RSA
what is our essay do anybody know
anybody tell me what the RSA function is
mmm the modular exponentiation good so
modular exponentiation means that we're
going to take the message m raise it to
a power e modulo some number which we
call capital n and when we do this it
becomes encrypted unless you know the
factorization of n typically n
so this is our encryption function an
encryption function of M is M to the e
mod and and n is the product of two
large prime numbers P times Q will call
them just for tradition's sake it has
been shown yes please zoom in on the
whiteboard is that what you want wave at
us if that's what you'd like to see all
right you want to see more of the
whiteboard I will try to write write
bigger there we go okay so that's good
how's that okay so for our television
audiences all right good so this is not
Einstein this is RSA encryption right
now but we're going to get back into we
will see actually I can do this which
looks more like Einstein but it is an
Einstein and we'll show you what it
means in a few minutes so modular
exponentiation means that I can encrypt
things and the RSA problem is the
assumption that if I cannot factor n I
can't break this encryption and one of
my advisors Michael Rabin showed in fact
there's another there's a similar
function to the RSA function where E is
to where you take a number you square it
modulo and and break and being able to
decrypt is equivalent to knowing the
factorization of n so because it's not
known whether you can factor large
composites efficiently we believe this
to be a strong encryption function now I
want to talk about a problem with RSA
imagine i'm going to encrypt all of your
social security numbers using the RSA
function in my secure database
anybody see a problem with that somebody
captures my laptop with all your social
security numbers encrypted with the RSA
function what happens if the laptop is
stolen yeah okay precisely so his answer
what's your name Yasha Yasha says you
can run through all ten billion Social
Security numbers do the modular
exponentiation function and because this
is a deterministic encryption function I
can deduce everybody secure social
security number from the encrypted value
on the laptop so this is why I RSA might
be secure for say establishing a key a
symmetric key that might be used for
encrypting a connection in SSL but is
not suitable for direct encryption of
private data so getting back to Einstein
for a second what happens if I put this
to their
what do I end up with so if my message
is m to the e mod n and now i have m to
the e squared mod n this is M Squared
the e mod n right my exponentiation is
commutative I know your mathematician
right is that right so so what I've
ended up with is an encryption of the
square of my message now it turns out
that can be interesting but there's a
lot more than that and we'll refer to
this as malleability I can take an
encrypted value and I can massage it
into another valid encrypted value so if
i take this exponentiate it to something
else i get something that i can decrypt
by decrypting from RSA right so all
right what is the first problem we're
trying to solve first problem is this
problem that i'm going to call semantic
security actually i didn't call it that
I think Goldwasser and the Colleen some
of their friends called it this but
semantic security is if I have an
encryption of m1 and an encryption of em
too I can't tell given these two values
whether m1 is equal to m2 or not RSA
doesn't stand up to this and this is why
the social security number attack holds
so what I do is I'm going to use a
different type of cryptographic function
that now instead of encrypting just a
message I'm going to encrypt a message
so I'm going to throw away these old
encryption functions and now I'm going
to make a new encryption function that
takes a message and a random help value
R and this encryption function gives me
a cipher text that is dependent on the
plain text message m and this random
help value so that if I see if
I see two ciphertext let's say I encrypt
message m0 with our 10 s AR 0 an
encryption of message 0 with r1 there's
no way to tell whether these messengers
are the same unless these two random
help values are the same and if you pick
the random help values uniformly from
some large space suddenly the
probability of me being able to launch a
successful attack by going through all
of the possibilities is very small so
semantic security means I'm going to
employ a probabilistic well in my case
semantic security means I'm going to
employ a probabilistic encryption scheme
where I use these random help values to
hide the data inside so now I've got
something that I can encrypt with and
isn't going to reveal anything by the
fact that the ciphertext corresponds to
something now when we talk about
auctions and finance why do I care why
do I want semantic security we know why
we use it for social security numbers
why do we need it for auctions and
finance because we are encrypting bids
or encrypting prices and the space of a
stock price might run between zero and a
thousand dollars even you know 100 and
what's with berkshire hathaway in 125
thousand dollars or something so you're
talking about 10 million possibilities
for stock prices in pennies you can run
through those very quickly so we need
semantic security for that the second
problem now is one I alluded to where i
took the ciphertext and i squared it
what I'd like to do is perform some
operations on encrypted values so we we
see with RSA we can do some funny things
now another thing we could do with RSA
is
so let's go back to our essay for a
second which we all know and love if I
have a message m1 which I've encrypted
and a message m2 which I've encrypted
and I multiply them together what do I
get high school math right so I get
an encryption of their product well
that's useful if I want to multiply
encrypted values together but say a
question sure
right
okay this is a great question so if
you're not a number theorist the notion
that i can take this modular
exponentiation modular modulo n and
square it modulo n and get something
that still makes sense is not intuitive
it turns out you can prove that in the
finite field that is defined by the the
so in the finite field of numbers that
are relatively prime to end which
defines the space of exponentiation that
it turns out that the modular the
modular exponentiation operation mod n
if you square something mod n again is
equivalent to something over the the
integer operations kind of intuitively
the operation still makes sense it's
just that we wrap around sometimes but
if we take the decryption operation of
our essay on this thing it works out now
the caveat is if m 1 x m2 happens to be
larger than n then you're going to get
the value that is this mod n so that
also wraps around this isn't a
discussion of number theory this is a
discussion of these cryptographic tools
did I say anything wrong I'm looking at
the mathematicians here there ok all
right so multiplication kind of useful
but we can do better than that how many
of you have heard of a guy named Pascal
pay yay great so who is Pascal pay yay
he was a PhD student in France who was
working on cryptography and he came up
with an encryption algorithm that is a
little bit similar to our essay in a
couple of ways but importantly different
and the pee encryption function is I
encrypt a message with the random help
value and i'm going to pick an end which
is some product of two large primes and
then i'm going to take
and then square it and I'm going to do
my operations module the square of this
thing i'm going to pick a generator of
the group and a generator means that if
i take the generator two successive x if
i multiply it by itself it cycles
through all of the elements of this
group so we pick a generator so that i
don't when i exponentiate i am able to
go through all the possibilities instead
of wrapping around too quickly so if you
imagine let's say I'm working modulo 10
which we think about and I take the
number two and I Square to i get for and
i square for i get six and i square six
and i get six and i square six and i get
sex and I square six and I get six and
this is a problem so similar things
happen when you're dealing with other
products of two primes 10 is a product
of two primes or if you pick the wrong
value that in particular value that is
not relatively prime to the number n you
run into these problems so I pick a
generator I'm exponentiate that to the
message and then I multiply it by my
random help value our to the nth power
and I take all this modulo N squared I'm
not going to work out the number theory
here but let's look at the properties of
this function i'm going to ask you to
take it on faith that this function has
some security properties because
everyone else in the field takes it on
faith that the decisional composite
residue assa t assumption underlying the
security of this function isn't
breakable it actually hasn't been proven
one way or the other so me doing a lot
of number theoretical proof isn't going
to really help because I'll just prove
to you that we still have this
assumption so I'm just going to ask you
to assume a little more and show you the
cool things about this function so now
I've got a function for our audiences
i'm going to leave on this whiteboard so
now my encryption function is
M R is G to the mr2 the n modulo N
squared now let's see what happens when
we take two messages and put them
together
what is this
well so so notice that what happened
with our essay was the messages were in
the base and hear the messages are in
the exponent so what happens is G
happens to be the same base so instead
of multiplying the base together we add
the exponent together this is one of
those cool things about exponents vs.
basis so i end up with my generator to
the power of the some of the messages x
the product of the random help values to
the nth power this is my ciphertext so
if i've got two of these let's call this
ciphertext one and this cipher text to
this is what an encryption of i heard it
say it loud con m1 plus m2 right so this
is an encryption of m1 plus m2 with the
random help value r 1 r 2 sometimes i
use random help values are 2 and D 2 but
that's when I talk at Pixar so now we've
got something really cool we can take to
encrypted values with that are
reasonably secure and using just the
cipher texts we can take their sum ok
and we can get an encryption of the sum
without knowing what the plain texts
were so what can we do with that
well people have uses for voting one of
the first applications of this was I
take a vote every candidate gets a
different power of two and then I some
all the votes up at the end and I can
decrypt them so it's just like bits
right I've got so my first bit will call
it a two to the zero and then maybe I
have to to the 16 22 32 2 to the 48 so
if I have a base where each kind of bit
is one of these values and I get a 0 or
1 and usually these bits depending on
the votes I can sum up a vote for this
guy or vote for this woman or vote for
this horse right and I can sum many of
them up up to 2 to the 16th in any one
column and then when I decrypt it I can
then take the bits back out but I have
no idea given any particular vote what
it was if all I'm allowed to decrypt is
the sum so that's why this is cool for
voting but it's cool for other things
which are not voting so now let's talk
about something like like an ad can i
subtract how would i subtract yeah
divide okay so if i divide and division
in a finite field is simply
multiplication by the additive inverse
right so what I do is I take g to the m2
are 2 to the N and I raise this to the
negative 1 power and this gives me G to
the minus m2 our 2 to the minus N and
now i multiply this with that and I get
the difference ok so i can add i could
subtract can i multiply
who says yes who says no can I
multiplied using an easy operation kind
of we can multiply by constance right we
just did it so it doesn't have to be a
negative one I can take any constant
integer raise the ciphertext to that
exponent and get a encryption of the
plaintext x that constant this is
important say I've got Oh a stock price
that's encrypted and I know the number
of shares so I've got a thousand shares
of some stock price I don't know the
price but you know the number of shares
so i can take the number of shares
exponentiate that and then i get an
encryption of the value of this thing
even though i don't know what the value
of the stock is but we can't directly
multiply two ciphertexts together yep
yes
you know you multiply it no you're
retracting your question okay other
questions yes no so the decryption is I
was glossing over it because it's a
little messy but the decryption is the
same as RSA if you know the
factorization of n you can efficiently
decrypt by raising this to a power based
on so those of you familiar with number
theory may know euler's totient function
fee so if I have feven this is P minus 1
times Q minus 1 which is the number of
elements relatively prime to end and in
my space of exponents I wrap around this
many times because because its composite
not a prime so when I decrypt I raise
this to a power based on this and then
because I know this value I can
eliminate
how do I put this I can eliminate out
terms and end up with just the messages
it's a little messy go ahead yeah is
this secure if you don't use our let's
say we used one for our every time no
why not so a few first off if you use
the same our every time we'd have the
same problem we had with social security
numbers the asha mentioned right no it
doesn't work like our essay because RSA
is taking a message to an exponent this
is taking a fixed generator of the group
to the message as the exponent so it's
somewhat different also we're taking
these things modulo N squared or rather
than module and there are some important
differences but I really want to get
into the meat of what this is good for
not the nitty-gritty of the crypto so we
can add we can subtract we can multiply
by constant can we multiply two
ciphertext together no and if you can
figure out how to do that you could
probably get tenure somewhere because
this is an important open problem to
find a finite field in which you have
closure under both addition and
multiplication it's sort of imagining
two rings with homomorphism between the
Rings and then having to homomorphisms
both of which closed form closures but I
digress a homomorphism by the way is
this operation here this multiplication
operation corresponds to this addition
operation so the space of cipher texts
which looks like this multiplied has a
homomorphism with the space of plain
texts added so that's what i mean by
homomorphism homomorphic cryptography
don't be afraid of that word so I can
however not multiply them together but I
can prove to you that a new cipher text
so let's say now I've got
ciphertext C 3 which is an encryption of
another message times another end of
help value I can prove to you that m3 is
equal to m2 times m1 given well
obviously if I gave um 1 m2 and m3 you
could know that but if i give you c1 c2
and c3 and you can look at the papers
there are various ways of doing this so
the point is I can in fact do this it's
a lot more work so what I have to do is
use some fancy math to kind of if you
think about remember when you were
multiplying when you're multiplying
polynomials in junior high algebra x + y
+ Z plus W and you use foil to multiply
them together you use a similar thing
where you separate them into parts and
then you multiply them together and
prove that their sum is equal and
remember over here we prove that I can
take the sum of two cipher texts and
prove that that was equal so when I
multiply I carefully craft a few special
cipher texts that we use to prove that
the sums are equal am I going to get
into the details ok so now what do i
have i've got addition subtraction
multiplication can i divide
yes kion
division is hard but again since I can
prove multiplication I can kind of
divide I can prove division by proving
to you that well I can I can't I can't
directly do an operation that does
multiplication but I can prove to you
yes we can I can prove to you that m3 is
the product of these two messages given
only these three cipher texts but the
whole point here is here I was able to
calculate on my own a new cipher text
that was an encryption of the some of
these other two plain texts and here I
have to generate a new one and prove to
you that it's an encryption of the
product of the other two and that's a
slight difference so with division the
way we do that is I prove to you that
the result x one of the operands equals
the other one so if I say a divided by B
equals C well all I have to do is prove
that C multiplied by B is a right so
since I know how to do this I can also
prove that all right
so now what else do we need what else
would we like to have if we're doing
some arithmetic operation so we've got
the four basic operations comparisons
perfect you read my mind or you read my
papers so comparisons how do I prove
comparisons I'm going to start out with
an operation that's somewhat simpler and
that operation is going to be proved
that M is less than some constant K
given an encryption of em which will
call a cipher text I can do this using
these other operations and the way one
way that I do that that's very intuitive
for you people since your computer
people is to separate em into bits so
let's think about this for a second
encryption of em let's say I'm thinking
about 0 bids in an auction for a
dinosaur beds so I'll take bids in a
charity auction for some dinosaur right
so how much is this dinosaur going to be
worth well probably not more than a
hundred thousand dollars say so now i'm
talking about 10 million different
possibilities so what i'm going to do is
let's see 10 million is 2 to the Sun
power certainly less than 2 to the 32nd
right so now what I'll do is I'll have 2
to the 0
okay so I need 24 bits thank you I knew
someone would figure it out on their
laptop or in their head but I'm trying
to give a presentation I'm not going to
engage my brain for that so now I'm
going to come up with encryptions of all
these bits and encryptions of 0 and to
represent any number between 0 and 2 to
the 24th minus 1 I will select either an
encryption of 22 that power or a zero
and then at the end I'll sum them up so
if I were going to say let's say m is 13
I'm going to take encryption of this an
encryption of this so this is 1 this is
2 this is 4 this is eight encryption of
this
encryption of this
so if I add these up 1 plus 0 plus 4
plus 8 I get 13 and so I can prove to
you that this encrypted message is equal
to the sum of these for encrypted values
yeah
haha
hey this is exactly right so the
question is but you know you're telling
me that you're going to give me four of
these encrypted values and I'm not going
to believe you unless you tell me what
the values you've just encrypted are
right so how do I get around this
problem where I want to hide this by
representing this as encrypted values
but not tell you what the encrypted
values are so the way around it is this
cut and choose protocol who remembers
what cut and choose Craig a user for
birthday cakes right this is where it
comes from so if you have two kids two
twins and it's their birthday how do you
ensure that they both get equal sized
slices of the birthday cake one of them
cuts the other one chooses and the cut
and choose protocol is you know we both
don't want to we're we want one person
to do part of the operation and the
other person to do the other half the
operation so what we do here is a
simulated cut and choose where I'm going
to create a birthday cake of a very
large number of sets of values so I'm
going to give you a hundred encryptions
of two to various powers and an equal
number of sets of encryption 20 and i'll
give you a hundred of these little sets
of encryptions and then you're going to
say to me okay Chris decrypt 50 of them
but Chris you don't get to choose which
50 I get to choose which 50 and since
I've got to decrypt them according to
your choice you know Craig comes back
and says Chris please decrypt numbers
247 all the way you know of these
hundred i give craig the decryption than
Craig verifies that every one of those
50 sets that I gave him looks like this
is a set of 24 encryptions of 2 and 24
encryptions of 0 and I do that by
revealing to Craig the random help
values I used when encrypting these
values so that's why random help values
a cool
long other reasons but but it is neat
that you can decrypt either by knowing
around and help value or by knowing the
factorization event and that's an aside
but it's important when we're verifying
these test sets I don't have to give
craig n i can give him the decryption
are for every one of these little things
so now I've got 50 of these things that
Craig's never seen but I know are
correct and Craig's going to believe me
that they're correct because the
probability that he happened to choose
50 of my hundred sets that were correct
and the other 50 or incorrect and I'm
somehow cheating isn't astonishingly
small and we can achieve an arbitrary
level of security by changing that
number 152 a very very large number if
we want so now I can prove that M is
less than K where you know let's just
call this to to the T so this is T
equals 24 I can prove that this message
lies between 0 and some value do we
believe that yes ok some of you believe
it some of you are taking it on faith
that's ok the point is that we can use
encryptions of the various bits use our
addition operator to get an encryption
of the sum of these bits now what what
good is that you asked me about
comparing two encrypted values not
comparing value to a constant
so back to some lower math will call it
if I know that a is less than K and b is
less than K and I know that is greater
than zero or equal to 0 what do I know
about the relationship of a and B if I
use one of these other operations so now
I have this and if I also prove that
their difference is in this range what
have I learned
right a is greater than or equal to B
I'm going to be pedantic because if a
and B the same they could equal zero and
I could be giving you all zeros and my
encryption how do I get a greater than
operator if I have this
what's that how do i check that B is not
greater than or equal to AI could do
that but that that turns into the same
thing as a is greater than B so what I
actually want to do because I'm in a
discrete space is just say that a is
greater than or equal to B
and I know how to do that because
remember when i exponentiate it you know
i can i can add a constant by
multiplying be by an encryption of one
so now i've got all my operations i got
greater than less than and greater than
equal to in less than or equal to so now
i've developed all of these from this
cryptographic framework ok so why do
they give me a doctorate
let's think about auctions back to our
hundred-thousand-dollar dinosaur
everybody in this room is going to bid
on a dinosaur that's going to go in a
company courtyard so you know trying to
use examples that are close to home when
we get to stock prices though I'm not
going to use examples close to home
we'll talk about our betray stocks in an
auction why how could I use this stuff
well I could use this because now I can
encrypt all my bids up to already using
already using and so let's call it L how
do I prove to you who won the auction
given the encrypted bids
yeah so once i get all the bids i can
open them all up and look inside and see
what the encrypted values are and then i
can pick the most the highest bid and i
can reveal to you which auction bidder
was the highest by proving to you these
operations on the cipher texts so i can
prove to you let's say bitter two is the
winner i show you that you know the
encryption of bitter too and i'm going
to use this notation with the line
through it to show that it's kind of bid
to is greater than for all for all the
other bids i'm going to show in fact
it's strictly greater than will say
there are no ties all right so why do we
care about this this enables an
auctioneer like the federal government
who does this to conduct an auction
where they prove who won the auction and
everybody who participated in the
auction can look at the encrypted bids
that were submitted to the auction and
posted and verify that the encrypted bit
of the purported winner is bigger than
it represents a bid that was bigger than
their bid so everybody satisfied that
this person won the auction but the
government doesn't have to reveal how
much the winning bid was for ya
you could if the auctioneer were willing
to help you do that so the question is
could you construct an encrypted bid for
every value and compare it these
operations are not something that
anybody can do these operations are
things that I can prove to you
especially you know so so these are
things you can compute on your own right
you can compute an encryption of the sum
or an encryption of the difference but
you can't decrypt that without the
cooperation of the person who has the
key in these things you can't even
approach without the cooperation of the
prison who has the key so the auctioneer
is not going to prove to you facts
beyond what is specified by the rules of
the auction so if this were an Oracle
that you could just go ask you know
here's my encrypted values do this
operation for me then you could do the
attack you specify which is specify all
the bids and ask for comparisons but the
Oracle is smarter than that and is only
going to reveal what the auction is
supposed to reveal at the end Yeah right
so for the cop
so the question is I am dealing with a
fixed constant for these comparison
operations and does that have anything
to do with the difference between the
bids it would if I used a different k
for each comparison but I won't so I'm
going to choose a k that is big enough
to accommodate every bit in the auction
so that any difference is
indistinguishable from any other
difference right so Craig points out
this gives you some information that the
highest bid is at most K minus 1 and so
if you choose K to be arbitrarily large
that you know no one would possibly bid
more than a trillion dollars for a
dinosaur then you're okay so that's what
you do you set K to be high enough that
you can still efficiently compute it but
doesn't reveal anything meaningful about
the bits in the auction so the next step
is how many of you heard of a Vickrey
auction Vickrey auction yes Craig has
heard about your Googlers right you know
victory auctions where does it come up
don't you use it yeah for AdWords ads
right so a Vickrey auction is when you
take the what second highest bid okay so
how do I prove a Vickrey auction how do
I prove to the winner what they should
pay in a Vickrey auction without
revealing to anybody else anything they
don't need to know I take all the
encrypted bids and then I prove this and
then let's say bitterer three is the
second highest bidder and now I prove
that the encryption of bid 3 is greater
than or equal to the encryption of bid I
fraud is lyst and 2i is
less than the three so I first prove the
highest bid and then I prove that this
bid is greater than or equal to all the
others and then I decrypt this bid just
for them by giving this bitter the
random help value I used to decrypt I
used to encrypt this they can verify the
price is fair and nobody else learns
anything except that the winner got the
item yeah yeah I mean people need to
learn that right you want to know that
you lost fair and square if you're
another bidder okay it turns out the
victory pricing is even more complicated
than just second price and some in some
context the more generalized Vickrey
auction computes what the so imagine now
instead of auctioning off a dinosaur I'm
auctioning off a billion dollars worth
of Treasury bonds and not anybody is
going to buy all of the bonds that the
Treasury is auctioning off they're going
to buy a certain amount and they're
putting in interest rates in their bids
and the people with the lowest interest
rates are going to win the auction right
the people who are going to charge the
government the least will win the
auction because the government wants to
pay as little interest as possible
theoretically so in that case I've got
an auction of many items all of which
are identical and a generalized Vickrey
auction I prove that the price that a
bitter pays is the price that they would
pay is a price that the winner of their
items would pay if they weren't in the
auction at all so in a bond auction the
person with the lowest interest rate the
most competitive bidder you imagine the
auction without them and figure out what
the lowest interest rate would be
without them and that's what they that's
what their bid is and so in the papers
we actually develop using these
operations and
accurate generalized Vickrey auction
pricing so we can actually compute and
prove correct the prices that everybody
pays at the end of the auction without
revealing to them anything about the
other bids beyond what is implied by the
beds so you can imagine Anna Vickrey
auction with discrete beds someone
proving to you that you are you know
that your bid is this and your payment
is this other thing you could do some
linear programming to figure out what
some of the other possible bids would be
but you would know that anyway if
someone told you what the price you had
to pay is so we proved is what the price
we tell you is is accurate so this is
how we use these operations and auctions
there's another approach which is not in
auctions at all and this is an important
part of my my doctorate um so I came up
with this idea of what I call a
cryptographic Securities Exchange and a
cryptographic securities exchanges like
a continuous double auction tell me if
this whiteboard is legible you those of
you who have the please assume on white
board you can go right on that if this
is not legible so a cryptographic
securities exchange is one where I have
a limit order book and and those of you
who invest in stock options probably
know what a limit order book is it's a
it's a set of prices that people are
bidding for and asking for a particular
stock on an equities market now a
problem is if I am in a stock market and
i want to sell a million shares of XYZ
corporation and i go to the market and I
say okay sell a million shares at the
market price what's going to happen
price is going to drop right unless
there's somebody who wants to buy a
million shares of the current market
price I'm in trouble so I don't want to
just go sell at the market price a huge
block order alright so I'm selling some
XYZ I go look at the limit order book I
go place in order i'm going to sell well
20 30 is the best price so i'll sell my
million shares at 20 29 now we can play
the Sesame Street game of which one of
these is not like the other and if you
were looking at XYZ stock and you saw
this limit order book what would you
tell me this is unbalanced right there's
something wrong because all these other
orders at various price points are much
smaller than this million shares that
I'm trying to unload and it turns out
that on Wall Street people take
advantage of these kinds of orders block
trades when they leak reveal intentions
of people buying or selling and people
will do something called front-running
sometimes which is I learn about an
order that someone's trying to unload a
big block of stock I run in front of
them to the traitor and I saw before
they do and when I sell let's say I
short saleh borrow the shares sell them
then their trade depresses the price and
then i buy back at the lower price
another form of this is something called
penny jumping which is gosh i see this
order for a million shares why don't I
you know make an order for 20 28 so I'll
sell some shares maybe I'll sell 10,000
shares and if I assume a distribution of
stock prices that's kind of random the
chances that the price will go down
after my order gets filled before this
thing gets filled is high and if i can
make three or four pennies on my
transaction I've just made three or four
hundred dollars minus commissions
so what happens if the price goes up
well the price goes up but they've got
to eat through this gigantic order and
so by the time this order gets eaten
through I'm going to notice and I'm
going to sell i'm going to buy back my
shares from them rather before the order
is filled and so my downside risk is
limited to a penny but my upside risk is
not that limited because the price could
go down a lot more because they don't
have this big what's called a free
trading option sitting here on my limit
or ebook so my solution to this was well
let's encrypt the bids in the asks let's
encrypt the prices and maybe even the
quantities so that people don't know
what's going on in the market and they
can't exploit it so how do I do that
well I know how to encrypt values
already so I'm going to take my
encryption function and I'm going to
encrypt all these things and now all I
see is encrypted values on my limit
order book and I don't know if you're
selling a million shares or 5,000 shares
how does it work somebody comes in they
give the market they're encrypted order
the market operator comes in and says
well okay I'm going to erase some of
these so now I come in with my order for
a million shares and I don't know what
the price is so say I come in and I put
in order to sell a million shares mmm
let's buy so i'm going to buy
it's I'm going to buy a hundred thousand
shares at twenty dollars and
thirty-three cents so what happens these
values are encrypted these values
encrypted but I can prove that 2033 is
greater than 20 30 I can prove that it's
greater than 20 31 so even if the prices
are encrypted I can prove to you that
these orders sitting in my encrypted
book that I've been publishing should be
filled by your order and I can prove to
you that your price is less than twenty
thirty five so this one shouldn't be
filled and that the rest of these
shouldn't be filled so then I fill the
sum of these two quantities and I can i
can compute the sum of the quantities
with my addition operation over there
and then I can leave a new order on the
book so I cross these off and I add a
new order on the book for twenty dollars
and thirty-three cents for a hundred
thousand minus seventeen hundred minus
two thousand which is just an encrypted
value i can calculate by using these
unencrypted values so okay this is kind
of a neat idea but in the remaining five
minutes i want to talk about even going
beyond this and this is because this is
just for one equity so you can imagine
this could be useful a little bit for
block trades of a single equity but it
turns out on Wall Street most of the
asset management most of the asset
trading that is done is not just people
investing in single equities its people
investing in portfolios of equities but
have some correlation with each other so
to do well if you're say david swanson
at yale who's been outperforming the
market for many years he uses portfolio
theory and the correlation of various
equities to figure out portfolios of
equities that are likely to do well in
the future based on how the ups and
downs of the individual equities
correspond to each other ok so if I've
got
a portfolio of equities now i'm just
using ABCDEF I don't want to talk about
any particular one now and maybe the can
we zoom the video in on this for the
remote people great so now what's my
problem here that I can solve well over
here what we were solving was people
putting in orders and those that order
information being exploited over here
the problem is let's say I want to sell
you my portfolio and because I've done
all this portfolio theory work to get a
portfolio that's well correlated I don't
want to sell you six different equities
at different times I want to sell the
whole thing at once because let's say I
sell you a now and D later and you know
look I've got a thousand long of this in
two thousand short of that and a
thousand sort of this if I sell all the
lungs at the beginning and then two
hours later I don't get my short fills
until then suddenly my portfolio becomes
unbalanced and I have market risk so
I've done all this work to get a
balanced portfolio but when i'm trying
to sell this portfolio i need it to be
traded atomically so i'm going to go to
antonio and say hey Antonia you want to
buy more portfolio and Antonio says well
what's in it and I said well I can't
tell you because if I told you you could
front-run me so remember we've just
talked about how if you know about
trades coming up you confront run them
so how do I tell Antonio what's in my
portfolio without telling him what's in
it what I can do is give him risk
characteristics of my portfolio that he
might use in his risk management
software that he might think about in
hedging in understanding what he's
taking on by saying okay what's the
average market cap of the equities in my
portfolio so now let's say
these quantities are encrypted now all
we need to encrypt are the quantities
because everything else is public last
price you know the closing price
yesterday or the current market price
that's public the market cap is public
that's just the outstanding shares times
the price the sector is public obviously
the name of the equity is public so if I
encrypt the quantity of all my equities
then I've got an encrypted basket
encrypted portfolio and I can prove to
you the average market cap by doing what
well I take
now I probably want to do this value
waited so I take the price times the
quantity x the market cap right remember
I can add and multiply so I take the
price times the quantity x a market cap
for each of these things and i end up
with an encrypted product for every one
of these or five six of them add that
all up together / 6 and then I reveal
that encrypted value to you so that you
don't learn the price or quantity of any
single thing you learn the average
market cap now I'm cheating a little bit
here because this is a short position on
a long position and if I use negative
two thousand directly we'd end up with
problems i'm going to assume that we can
either have an absolute value function
which I skipped or that you use a bit
for positive or negative plus the plus a
quantity if I wanted to prove to you
what percentage I'm almost done if I
wanted to prove to you what percentage
of these were in the telecom sector I
could do that by proving to you the
entire value of the portfolio and then
proving to you the value of this and
then taking the difference but you
wouldn't know anything other than the
percentage so i can take this times this
and this times this or this times this
which is this so i have 50k this in a EK
of this i can compute the encrypted
value of the entire portfolio which is
minus 50 k net or c 130 200 330 plus
which so this is the net and this is the
total notional value so i can compute
these encrypted values and divide the
value of any particular sector by adding
the components up dividing by the total
right so the point is these
cryptographic tools enable us to do
things in auctions risk analysis and
financial trading that are pretty
remarkable we can control who knows what
we can control in fact how they know
when they know it which is another talk
some of the research that I worked on
involved sending a message into the
future so you can can look on my webpage
there's a paper called time-lapse
cryptography by Michael ribbon and
myself where we discuss a way of
encrypting a message so that it's
guaranteed to be revealed in the future
but secure until then there's other
things you can do with this for example
I could say I've got this portfolio and
another portfolio in a third portfolio
and I'm going to combine them together
to get a final portfolio and then tell
you the risk characteristics of this
combination of three portfolios so you
could imagine a financial exchange for
portfolios that rather than people
trading individual equities you actually
put in portfolios and this exchange
would tell you the risk characteristics
of all the portfolio's that people want
to trade and then people can bid on
little chunks of that so hope this was
interesting I wanted to give people a
taste of these you know simple
cryptographic tools and the kinds of
amazing things you can do with them when
you apply it to one area of Finance
there are a number of other areas that I
think these crypto tools would be useful
for and that's why I came to Google
because you know here you come with an
idea and you say well I have this
you for this tool and here's how I use
the tool and someone at Google will say
well that's an interesting tool and I
understand how it works for that but we
could really use it for this other thing
so I'm going to stick around I hope that
some of you will tell me and ask now
ideas that you have for how these tools
might be useful in other applications
and ask any other questions that come up
thank you for questions or hopefully
there's some questions or I left
everybody behind i'll even throw the
microphone to you if you don't want to
get up
okay question it seems to me that
interactivity is essential for this
proving for the auctions and is there
any way to reduce that or void that so
the question is is there a way to
eliminate the interactivity can you do
this in a way that's autonomous the sort
of you don't need this third party who
has the decryption key who's proving
these facts to you the short answer is
no and if you think about a system that
isn't interactive in some way how would
you prevent people from learning too
much so if you don't have a third party
who's kind of the gatekeeper and and
complies with the rules then how do you
you know if because imagine that I have
this Oracle that that proves all these
facts right if the Oracle has no rules
and I can just ask it a bunch of
questions and learn everything that I
want to know so you need a third party
who has the keys so that the information
stay secret and selectively reveals only
those things that should be revealed and
and so you kind of need the back and
forth of parties taking their
information that they want to encrypt
encrypting it sending it to a third
party and then the third party revealing
the results of this computation to
somebody else
okay right so in that case you can get
around it by not doing an interactive
cut and choose protocol but you could
use you could use like the a Goldwasser
Macaulay technique of doing a hash you
could take all of these let's say I give
you a hundred test sets we hash them
using sha-1 into some hash value and
then we agree beforehand on a function
that takes a hash value and transforms
it into a permutation of the various
test sets that defines which of the test
sets I have to reveal so you can do it
that way so you can you can make it
non-interactive in the same way that
some of these others euro knowledge
proofs have been made non they're
interactive which you take the inputs
use a deterministic but but hard to
invert hash function on the inputs so
that the so the output is all
deterministic does that answer the
question other questions I'm really
eager to hear coolers perspectives on
what this could be useful for you know i
mean this is this is stuff that i've
said well this could be useful in
financial markets i could hide stock
prices i could hide auction bids but are
there things where we could hide integer
data and perform operations on them the
you our eyes are thinking about that I
am really thought of before would this
be useful in AdWords you know I don't
know what would do advertisers care or
do advertisers just trust you guys to
not be evil and give them fair prices
yeah so you know in these cases where
people are paying a nickel or you know a
dime or at most a couple of bucks right
for Adwords we're not talking about
billion-dollar wireless spectrum
auctions where people really do care
about the outcome
oh no I mean the outcome of the auction
so if the advertiser so the advertiser
is less likely to worry about I think an
advertiser for an adwords campaign is
less likely to worry about being
overcharged in an option by google in
part because of Google's reputation
trust and also because it doesn't seem
like there's a lot of opportunity for
fraud there in the way that there isn't
say a wireless spectrum auction where if
I'm the government and I get one of the
bids early or I learn something that I
shouldn't I can transmit that
information to one of the other bidders
and that can have a really measurable
difference right
right
so that's a good point right the the
auction at Google is used for price
discovery and it's not used for revenue
optimization in the same way
supreme I think not
okay so your point is for the general
public you can give them these
mathematical proofs but unless you have
a PhD in computer science or number
theory maybe the proof is a little
opaque and you don't believe it anyway
you don't understand the proof and so
you have to take it on faith that the
proof make sense and who do you trust
yeah
I've known
right and so that gets into one of the
other things that that I've discussed
which is you kind of want a third party
who isn't interested at all in this
stuff and just makes it as a job to do
these provably correct computations so
you ship your computations off to this
big cluster of computers that do your
math and prove the result correct and
they don't care what the computation is
they just need to be able to decrypt
yeah that's right so yeah I was going to
say that um an area that would be really
exciting right is is cloud computing
right to to be able to make use of a
service right maybe even run my own
script on this service I'd like to know
that they didn't tweak anything right
that they actually ran the script
exactly as I wrote the script um without
having to do all the computation myself
it does this lead to that or is there
still barriers so there's a couple of
there's two things going on and I mean
answer it in two ways the first question
is does this lead to provably correct
computation where I ship my inputs out
to the cloud computer and the cloud
computer computes the result and proves
the result is correct to me it turns out
that this machinery is more than you
need for that and that's because if you
don't care about the cloud computer
revealing your inputs to somebody else
so you don't come you don't care about
you don't care about the security or the
secrecy of the data and all you care
about is the correctness then what you
want is a language that allows you to
define a computation and then define a
correctness proof so let's let's think
about this in a very simple case the pnp
problem I'm joking when I say it's
simple so the whole debate about P
equals NP is can I take a hard problem
like here's a map compute the Traveling
Salesman problem over this map and gives
me the output
or here's a map please color all of the
states on this map using one of three
colors and give me the map back now in
some cases like the three color ability
problem I hand this off to the cloud
computer in the cloud computer either
comes back with the correct answer or
not and I can verify that the answer is
correct efficiently so there are some
classes of problems for which the
evaluation of whether your answer is
correct or not is computable in
polynomial time when doing the
computation is not and in those cases
it's related to this work because we
kind of talked about it where we say
well the whole point of having this
third party is not just to do the
computations but also in the in the case
of combinatorial auctions which I didn't
cover which are far more complicated
where people are bidding on many things
at once and and buying many things at
once proving the optimal result in in
that case proving it correct can be more
efficient you can have this giant
computer spit out the result and then
you can prove it correct and in our case
we can prove it correct using these
encrypted values so that you can prove
to all the bidders who won or lost and
the cloud computer doesn't have to
reveal all of the results of the
computation they can reveal the
encrypted results and those encrypted
results can be verified so it's related
in the sense that there are many cases
in which a cloud computer would be one
of the only feasible ways of computing
the optimal result for a complicated
auction and you'd want proofs of
correctness but the encryption is
orthogonal to those correctness proofs
so the encryption doesn't really help
but the correctness proofs do I am NOT
an expert in provably correct
computation and so I would say
if what you want to know is how do I
prove the result of my computation was
correct off of this giant computer there
are classes of problems like three color
ability that you know that are in NP
that are easy to do but there are other
classes of problems that are harder than
that for which you know say say the
computer comes back and says I can't I
can't find an answer sorry I there's no
three color ability there's no way you
can three color this map how does it
efficiently prove you that fact right so
and I don't already answered them this
is this is a hard problem that I think
is a really interesting one you guys are
dealing with
other questions
okay well if you don't want to ask a
question in front of everybody come up
after and all I'll hang up
Oh</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>