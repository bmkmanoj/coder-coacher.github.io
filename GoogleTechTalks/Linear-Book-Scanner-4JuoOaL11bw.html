<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Linear Book Scanner | Coder Coacher - Coaching Coders</title><meta content="Linear Book Scanner - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/GoogleTechTalks/">GoogleTechTalks</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Linear Book Scanner</b></h2><h5 class="post__date">2012-11-12</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/4JuoOaL11bw" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">my name is Jeff Brownback I'm very
pleased to introduce Danny come saya who
is going to be presenting on an
automatic book scanner this talk began
with a idea of showing this device to a
single person and that person invited
two more people and you're all here
through the incredible power of
recursion so with the with that Danny
come take it away thanks Jeff let me
take a moment and shut it down I'm just
going to tell you about this book
scanner that I built and but first I
want to just show you a few examples of
some book scanning technologies that
already exist for comparison the easiest
way to scan a book of course is to cut
off the binding and then stick it
through a sheetfed machine there are
machines that will just feed each sheet
through and scan it very high-quality
but the problem is you destroy the book
so what we're talking about here are
non-destructive book scanners so there's
a large class of book scanners that are
not totally automatic where a person
turns each page and a lot of the time
there is their glass plates that flatten
the pages out and then there are cameras
that take a picture of both pages so you
have to kind of raise this glass plate
turn the page
lower the plate and then snap a picture
so it's pretty fast but involves a lot
of manual labor there's a there's
actually a large community of people at
the OU iBooks can org that build their
own and they post instructions for how
to build your own so they make them out
of cardboard and wood and all kinds of
things that are lying around there are
some commercial robotic book scanners
there is there's quite a few that have
that used some sort of robot arm the
same way that a person would turn a page
and Kurtis is one of these examples so
they have an arm that kind of suctions a
page and they move it over to the other
side
there's another that uses a very
different method this this company is
called true Ventus and they make a
machine that has this v-shaped thing
that moves up and down and it actually
suctions two pages against it while
capturing images with a linear sensor
along the tip so it's really cool and
these are state-of-the-art machines and
they've gotten a lot of praise for being
gentle to books
the main issue is that they're really
expensive this one of these tremendous
machines can cost on the order of a
hundred thousand dollars so this is a
machine that I built and I'm going to
show you a brief video so that you can
see some closer up views of it and then
I can go into some of the technical
details
so the general idea is this book is
moving back and forth on top of this
prism shaped machine there are their
linear sensors just like in a flatbed
scanner that the book moves across and
captures in a page and then there is a
there's a vacuum in this case just a
regular house vacuum is connected to
those spots it's sucking air and it
sucks a single page page goes across to
is
question was how do you ensure that you
only get one page that's the next thing
I'll talk about this you time yeah and
then the images show up on a computer
so it's really simple and it doesn't
involve very many parts so it's not very
expensive to build so yeah the question
was how do you ensure that it only turns
one page so I'm going to try and provide
a very simple diagram of what's going on
when the page gets peeled off in this
case we have a stack of pages that are
sliding in from the right and I'm
looking at the edge on and they're
sliding along this curved surface and
along that curve there are slots where
I'm applying vacuum suction so hopefully
it's obvious that one page gets sucked
against this the other pages don't
actually receive any suction so they
will tend to stay straight and and go
across and then they get divided by this
piece of metal on this side now it's
still possible for two pages to kind of
be stuck together and to help out with
that in this prototype there's actually
air that blows up from underneath like
onto the edges of the pages and that
help to separate pages if they're stuff
together so next I want to talk about
why the why the channel that the page
goes through looks so strange why it's
shaped the way that it is and try to
explain the motivation for that and I'll
try to explain it by explaining a few
examples that don't work so for example
if you if you have this prism shape and
I'm looking at a top view here where a
page on one side has to get from that
side over to the other side the the
simplest thing to do is to cut a slot
like a diagonal slot in that in that
prism so that the page can slide into it
and go across to the other side the the
problem you run into is when the page is
in the middle of that slot it actually
has to kind of twist the binding of the
book stays straight but the page has to
twist along that slot and that's
something that it just can't do so it's
very likely for the page to tear
so the way that the machine is really
shaped is a little bit more like this
where there's a flat section in the
middle of that diagonal slot the idea is
the pages coming in and while the page
is in that intermediate section it's
actually free to swing across to the
other side and so it can go to the other
side without actually getting twisted so
that works a lot better there's there's
another problem you run into so in this
in this example the the slot for the
channel is just a straight diagonal
along that front surface and there's
another problem you run into if you have
that straight diagonal and you're
applying vacuum pressure to try and pull
the page through so this is trying to
illustrate that basically this is a side
view and here's the page coming from the
right to the left and the the darker
grey area is the channel where the page
is sliding into and the really dark slot
is where the vacuum is being applied
that's where the slots of the vacuum are
so in this case the page is coming from
the right and the corner of it is
getting sucked up against those slots
and curving around that curve so as the
page continues you run into a problem
where the page is being curved along
this diagonal and that curve reaches the
binding and the page basically the
motion of the book is forcing the page
to bend near the binding and that's
something that it can't do basically in
order for the page to continue to the
left it has to pull itself off of that
vacuum area and if that requires too
much force in the page we'll just tear
so this doesn't work very well the the
picture at the top was actually an
earlier cardboard prototype that looked
a little bit more like this and that was
the problem that it had so the way the
machine is actually shaped is a bit more
like this there's a there's a diagonal
opening near the bottom and then the
opening opens up vertically in the top
part so as a book is going across the
page gets suctioned against that dark
area and and
curves around that diagonal but at some
point the page reaches the part where
this opening opens up vertically and so
the page is no longer supported by the
surface that's on the right so it's
actually free to swing across to the
other side so if you have a shape like
this then the page can can basically
slide its way off of that vacuum section
without without applying too much force
to the binding okay so the sensors let's
see I've got one here so these are the
sensors they it's a contact imaging
sensor and it's straight out of a
flatbed scanner or or a sheep fed
scanner it's the same thing that they
use so it has an array of light sensors
and pulses colors that you can capture
each color and it actually did come from
a sheep fed scanner we took it apart we
took apart a lot of schemes actually and
it turns out if you take out the
circuitry and and these scan bars and
just plug them together you can use it
just like that you can tell the computer
to scan and it thinks the scanners is
just a regular Canon scanner and it
captures images so there's very little
software required and we didn't have to
do any of the electronics one one note
about using these sensors is that the
sensor is kind of square and when you
stick it inside of this is an end view
of the machine with the book open on top
when you stick it inside you can't
actually stick it all the way up into
that corner and that can present a
problem because you can't capture an
image all the way into the groove of the
book so the book has very narrow margins
or has content that's all the way into
the groove then you might not be able to
see that content and for this prototype
one way we we improve that situation was
I just took these sensors to a belt
sander and it turns out you can grind
away quite a bit of that circuit board
before the thing stops working
and I was enough to get us within about
nine millimeters of the of the groove
which is which is okay for most books
for for a real machine if you want to do
a lot of scanning it's probably better
to use a different sensor there's a lot
of there's a lot of other scanners that
use a CCD sensor where they have a there
they have a lens and they project the
image onto a linear sensor and in that
case you could actually project the
image all the way from the corner it
wouldn't have this this kind of square
restriction and yes somebody mentioned
somebody mentioned increasing the the
angle of the corner at the top would
help and that's something that's
something we looked into a bit one
problem you run into when you when you
make that angle larger like ninety
degrees is that the book doesn't
actually want to sit completely flat so
the book may act the curve of the page
may may actually still hide some of the
binding from you because it's not
totally flattened out onto the surface
also librarians generally like to keep
they they consider it very bad to open
the book too far and so if you can if
you can keep the angle of opening as
small as possible that's better for the
book so this is the result you get it's
a very flat scan as if you had put the
page onto a flatbed scanner and the
quality is exactly the same so by
default I'm running this at 300 dpi and
but you could crank it up larger if you
wanted and it's it's also a lot better
than using cameras for scanning because
cameras the even though even though they
may have a certain number of megapixels
each pixel is actually red green or blue
and in these scanners when when you say
300 dpi you're actually capturing all
three colors for each pixel so it's so
it works a lot better it has a much
higher quality and these sensors are
only like $20 compared to a very
expensive camera that you would need
yeah
the question was how's the linearity of
motion like is the do I have to do any
correction for the motion not being very
constant and it seems pretty good we've
looked at the images and haven't noticed
any any disturbances the motor is a is a
stepper motor and it has a very
controlled motion and the belt that
we're using is a timing belt the same as
in a regular scanner earlier we had
experimented with ways of correcting for
that using kind of a pattern that's
that's on this saddle so yeah oh I'll
say a little bit about this we're
calling the saddle the thing that moves
the book back and forth it has it has
clamps on it to kind of hold the book in
place and and another purpose of a
saddle is it has these white strips on
it which are used for calibrating the
sensors so it's in the home position
those strips cover up this cover up the
sensors so when you first start scanning
they figure out what color is white and
they calibrate to that the other
important function of these clamps is to
help support the weight of the book so
you if you don't have them you run into
a problem where say you have a very
thick book and you're at the very
beginning or end of the book so all the
pages are to one side that weight can
cause a book to kind of sag and it
causes the pages to sort of curve near
the near the binding and that can cause
problems for page turning or the pic or
the book could just fall off to one side
it's if it's very large yeah now the
question was does this work mostly work
for hard bound books or does it work for
softcover books as well and it does work
for softcover books I guess the the
support for the support from the clamps
kind of works a little bit better for
hardcover books but we haven't run into
any problems using it on softcover books
so so yeah the the the clamps on the
saddle look kind of like that and they
help support the weight of the book
basically when you first start scanning
you set the book down somewhere in the
middle
and then you adjust these so that
they're just touching the book and then
and then on if the book is to one side
or the other it helps to support the
weight so the motor we're using a set as
a stepper motor it's an it's an M drive
and we have this timing belt that goes
around the top and then down through the
machine and this motor actually comes
with a built-in micro controller so and
pretty much the entire code for code for
it is on the right basically you you pre
program it with the code that tells it
how fast to go and when to change
direction and and from then on when you
power it up it just goes back and forth
and does its thing
the extra thing that it does is it has a
serial connection and at the beginning
of each cycle it outputs a new line and
we use that for timing the actual scan
so that we know when the motors arrived
so the software for this is really
simple the the scan image program this
shows there that's a that's from an open
source scanning library called Seine and
so we haven't made in we didn't need to
we didn't need to write any software for
that and we call that with a with a flag
that tells it to capture an image every
time you hit enter that's the batch
prompt and so then all you have to do is
take the take the line breaks from the
motor and and pipe them over to scan
image and then the machine runs so one
command so there's there's some extra
software that Jeff who introduced me
wrote this is this is just a just an
image viewer so it shows you the images
as they're being scanned and it's open
source at the URL at the top and it has
a lot of great features like you can
click on a page number and you can see a
mosaic of all the page numbers that you
scan and that makes it really easy to
tell whether something went wrong during
scanning like you missed a paid or you
duplicated a page basically you can look
down these columns and see like 361 341
320
on 301 you can see all the way down that
everything went fine and that no pages
were missing another way we another way
that we avoid problems and detects
duplicate pages or missing pages is with
a sensor that's right inside right
inside the machine as soon as a page
comes in the slot to be turned there's a
great themed sensor so we detect exactly
when the page arrives and basically if
the page arrives at the wrong time or
doesn't show up then we know that
something's wrong and the motor motor
stops so this sensor is connected
directly to the motor and that's part of
that microcontroller program so that's
about all the details just to just to
give an idea of where things are this is
this is the first non cardboard
prototype so there's still there's still
a lot to improve the first prototype on
the top left that that's cardboard just
from a dumpster that was outside the
office so it cost nothing and it had a
little little air pump from the from an
inflatable mattress and that was
actually able to turn pages and it was
really exciting so I experimented with
the shape of the page turning mechanism
a few times but this is this is the
first actually model that's actually
built out of metal so where it is right
now basically it's very quick to set up
for a book it takes about 40 seconds to
adjust those clamps and start the
scanning the the cycle time of this
going back and forth right now is 11
seconds for a page pair so a 300 page
book would take about half an hour
this is a lot slower than then many of
the alternatives but since it's fully
automatic one Operator should be able to
run like 10 of them you don't have to
you don't have to do more than just
start it and stop it
materials if there's only about $1,500
in materials
about half of that is just the scanner
that we took apart and and there's the
vacuum and then the metal so it should
hopefully be very cheap to build and
yeah now the question was is it possible
to get any sensor feedback from the
motor as to whether the page is hung up
or or tearing and yeah there are models
of this motor where it will know if it's
stalled if something is stuck and I'm
sure there are models where you could
also detect how much force it's taking
to move so yeah if you wanted to get a
fancier motor you do that yeah what
prevents me from running it faster but
right now that's actually the motor if I
if I try to run it faster for a large
book then the motor doesn't have enough
power to move it so an easy way to make
the pastor is just to get a better motor
there's also things you can do with the
arrangement of the sensors and the shape
of the thing basically just make it so
that it has a shorter shorter distance
to travel question is do you need any
adjustments any adjustments for book
size or paper thickness there's there's
a limit to the size of books that this
can be scanned and right now I guess I
was going to mention we've only only
scanned about 50 books basically about
60 percent of the books that come across
are able to be scanned like many of them
are too big or too small so basically it
has to fit inside of the saddle and it
also has to be able to reach those
vacuum slots the book is really small in
it then it won't reach them at all
and so so that's a number that could
also be improved by changing some of the
dimensions basically doing a bit more
experimentation with how the thing is
shaped and then for four thin pages or
thick pages one major factor in that is
how what the power of the vacuum is so
it's it's best if you can adjust that
or so for very thin pages you don't want
to pull too hard on them but again
there's there's a limit on what you can
do for that so this works on most books
we've come across but it won't work on
like dictionary thin pages or or really
stiff kind of cover page material so we
still have a lot of problems basically
about 45% of books have 1 or 2 skipped
pages that we tried and about 45% of
them have some sort of fold or or tear
in the page and that's really bad this
image is there's an example of one of
the bad cases and actually what happened
here was the page already had a little
bit of a tear in the corner and that
presents a problem so when it went
through the machine it kind of
exacerbated that and folded it of the
books yeah not the pages so it's only
only a couple errors in the book so for
most pages it was fine we'll leave those
questions until afterwards that's right
so so yeah and also this was before we
installed the sensor so in this case
where the page was folded it's very
likely that the sensor would have
detected that the page didn't arrive at
exactly the right time and and stopped
the machine before it caused any more
damage so yeah there's a lot of
improvements to make you can there's you
know I still haven't experimented much
with different shapes this is only the
third iteration really and there's
adjustments you can make to the vacuum
like like maybe adjusting where the
vacuum is applied and what the slots
look like there's better materials like
aluminum leaves a little bit of
aluminium oxide residue they can kind of
see on the edge of the book and it would
be better if it were stainless steel or
something like that and of course better
image sensors like a CCD sensor that
would be able to capture all the way
into the corner and then there are
crazier ideas like you could take a
whole bunch of these and chain them up
if you if you have a lot of books to
scan basically this diagonal opening can
be can be
chained pretty close together so so you
could you could have just two people one
at one at each end
loading books one right one right after
another and you could you perhaps can
books really quickly that way so there's
a lot of there's a lot of interesting
ideas about know what to do so that's it
I I just want to sure to thank Jeff who
in person who introduced me he's been
really crucial to to this product he
wrote all the software he helped out
with the sensors he installed the
braking sensor and helped take apart
scanners and and he's given me advice
all along the way and you know given me
a moral support to to keep working on it
and also want to thank my manager
Stephane and previous previously wrong
who were who have been okay with me
working on this and they've supported me
in any way they could
so yeah that's about it I can take
questions okay the question was can you
talk a little bit about hair ins and
what you do when something goes wrong so
right now with this prototype basically
if the page doesn't turn then that sort
of tech sit and then obtain just stops
and so you can notice that at come and
figure out what what happened and then
reset it and start it again right now
there's no way to detect if two pages go
through if they're really stuck together
then that means that you miss capturing
the images of the page that was in
between so that's a problem but there
there are ways that you can detect that
and and there are things that that go
like sheetfed scanners use to detect
whether two pages have gone through and
you can do something similar
the question was do you think you can
make it any cheaper because it sounded
like the scanner part was already the
most expensive part yeah if you if you
did your own electronics for example
these these sensors the part that we're
actually using are only twenty dollars
each so if you built the electronics
yourself at a large scale then it would
probably be even cheaper than it is now
but the biggest cost will probably just
be putting it together and and right now
I mean although all the pieces are
basically flat pieces of metal and so
they're very easy to cut their questions
yeah yeah
when was where did I where did I build
it and I built it on some workshops over
on campus question is what happens if
the book is really dirty does it leave a
streak all the way down the page if
there's something if there's really
something like smeared on the paper then
yeah that could like get stuck to the
sensor and it'll leave a streak and
you'd probably have to have some process
to to notice that and and clean it up
but that we've joked that since since
the book is traveling over these vacuum
slots were actually cleaning out dirt
from the book as it goes and that's a
feature any of the question was it looks
like this machine if something goes
wrong could actually tear a page and it
looked like the other machines we looked
at couldn't actually tear a page so the
the other machines they do tear pages
it's just very rare and and they're
gentle enough that that libraries are
okay with using them for this machine
we've actually talked to the
conservationist from from Berkeley and
and he was really excited basically that
the the benefit of of having digital
versions of these for people to use was
greater than the
the small risk of causing damage to some
books and libraries accept the risk that
like when they check out books they are
going to come back in worse shape than
they were before but that it's worth it
for people to to use the book and to
read the content but yeah hopefully
hopefully this can be improved to the
point that it is it is safe enough to
use on fragile books the question was
why is a scanner so far away from the
slot the the main reason it's there was
just we wanted to have both scan bars
together so that they capture at the
same time and the slot this side the
exit slot actually extends all the way
up to so where the scanner is so could
you could actually make them closer if
you have them separate like one on this
side and one on the other side and that
might make a shorter distance to travel
question was is it two scanners or just
one scanner with two bars this is one
scanner with two it's from a sheetfed
machines for the sheet with feed through
and have a scan bar on the top and on
the bottom and so we one circuit board
and we just took two sensors any other
questions question was where does this
project go from here and I don't know
but we'll talk a little bit more about
that later maybe this is a good time to
end the recorded portion of the talk and
we'll let's get Danny in him</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>