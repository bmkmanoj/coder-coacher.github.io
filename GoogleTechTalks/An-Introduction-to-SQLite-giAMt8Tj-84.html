<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>An Introduction to SQLite | Coder Coacher - Coaching Coders</title><meta content="An Introduction to SQLite - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/GoogleTechTalks/">GoogleTechTalks</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>An Introduction to SQLite</b></h2><h5 class="post__date">2007-10-08</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/giAMt8Tj-84" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">I'd like to introduce our speaker today
dr. Richard hip Richard is the primary
author of SQLite which most of you have
heard of presumably it's a small open
source relational database engine that
has really skyrocketed in popularity in
the last four or five years it seems
like pretty much every week or two I
hear about a new project either inside
Google or outside that's using SQLite so
real happy Richards being able to join
us today to tell us more about it
I'll also mention this talk is being
recorded and it will actually be
available externally so if anyone has
any questions that involve information
confidential to Google please wait until
after the talk to ask Richard
individually great so without further
adieu Richard hip hi everybody my name
is Richard I'm wanting to give you a
brief talk on SQLite that I understand
that we have 35 to 40 minutes so I can't
go into a lot of technical detail I'm
gonna give you a high-level overview now
the way this normally works is that I
have these slides here which if we're
lucky will be roughly correlated to what
I'm going to be saying but I must have
hit the wrong button here there whatever
got it got it so Margaret are you
left-handed okay that's that's what got
me confused alright so um I just want to
give you a brief talk about what SQLite
is about we don't have time to go into
the technical details I'll show you a
little bit of the API maybe but really
to get into the technical details
that's takes way more time than we have
so I'm just going to give you a briefing
objection to the motivation behind
SQLite what kind of problems it tries to
solve who's using it and at the end I
want to give you some general lessons
that I've kind of picked up and doing
this project which are applicable to a
lot of different things I'm going to
need to reduce the resolution all that
because we're off the screen
what's the best way to do that there we
go that's better
so what is this Q line it's an SQL
database engine but it's a little bit
different
most of the most people here SQL
database engine and they're thinking
Oracle something big that you run your
whole enterprise on SQLite is sort of
the opposite
I'm very small so it's very compact some
of the features it's designed to be
embedded in applications or in hardware
it's serverless it writes directly to
the disk driver as opposed to sending
IPC to a server the next care of storing
things a very small footprint the fully
configured it's less than 250 kilobytes
and size generally small databases the
has a lot of interesting features it
allows you to define your own SQL
functions that are just C C functions or
your own collating sequences so if
you're working in and languages with an
unusual collating sequence you can you
can accommodate that the database font
of the entire database fits in a single
source file and weights a cross-platform
source file the entire database fits in
a single disk file which is a
cross-platform so you can write the
database on a big endian machine and
then just copy it over to a little
endian machine and it works fine so it's
been picked up and it's being used quite
a bit the it supports a big subset of
SQL it's really easier to tell you what
things it doesn't support the biggest
omission right now is there's no support
for foreign keys or a little parse them
it'll parse a references Clause it just
want to enforce it for you there's some
alter table things that it doesn't quite
do there's some triggered things that it
doesn't quite do riding full outer joins
it emits you can't write to a view and
as some people get really upset that you
can't grant and revoke but that doesn't
really make sense on an embedded
database we're writing to a disk file if
you can read and write the disk file
then then you can do anything you want
by just doing F open and so how would
grant and revoke really buy you but it
has all the other features and in
particular it's um it gives you atomic
our asset transactions which is a very
important feature
now who's using it right now I
it's it's out there's public domain so
lots of people are using it that I don't
know about every now and then I'll hear
about somebody new that's using it
here's some of the few icons that I
collected recently
I'm told that Solaris TN will not boot
without SQLite Firefox obviously uses
its Indians putting it in their
operating system for cell phones
AOL it's you know the CD ROMs you get
from AOL but you know 1001 hours free
it's got SQLite on there it's built into
PHP some people are using in ways I
don't know like uh like General Electric
and Toshiba wrote to me and asked what
is the XPS Export Control Number for
SQLite so presumably they are using it
in some way and exporting it but I have
no idea how it's used in YUM monotone
uses it monitoring is a configuration
management system that was we've kind of
the inspiration for git which is what
the Linux kernel is is using meal so and
then I've seen some question marks up
there a lot of companies come to me and
they say hey want to talk to you about
SQL IDE and then I signed a
non-disclosure and then they tell me
that they're using it so but because
they signed the non-disclosure I can't
tell you unfortunately so what's it good
for now a lot of people as I was saying
earlier a lot of people they hear SQL
database and then thinking Oracle run
your Enterprise on it SQLite it's really
not designed for that sort of thing I've
got a number of reasons a number of
things that you can do with it up here
I'm kind of broken them up into two
categories there's a few uses up there
that are the kinds of things that people
normally think about using an SQL
database for and then I've got some
other ideas down here that SQLite is
good for that people who have done SQL
for a long time don't normally think of
because these other four reasons down
here a client-server enterprise database
doesn't do these things very well and so
people don't normally think about this
those kinds of things but let me just
briefly go over some of the uses that
you can use rescure like well you can
obviously use it for anything that you
could use a client server database
engine for just
you know substitute SQLite for the
client server database now um this isn't
of advantages you know it it just works
there's nothing to configure that you
don't have to get with your Oracle DBA
to set up an account and all of that and
you can run off a cd-rom for example
which is a really popular thinking
people to do but it also has some
disadvantages because it's a small
embedded database you don't have the
scalability that you would have with a
client server database engine it doesn't
work on it does not work well on network
file system simply because network file
systems are kind of slow it it I've used
SQLite with up to about 30 or 40
simultaneous clients but it give me on
that you're really that's about it where
it's not going to scale to a thousand
simultaneous clients and it doesn't go
into tera base ter terabyte sized
databases on the other hand a lot of
people are using client server database
engines in situations where SQLite would
work just fine they're not using the
full power of their their enterprise
database so this is sometimes a useful
thing to do though it's not really what
it was designed to do another thing
that's really useful for SQLite is to
use it as a stand-in for your big client
server database during testing or
demonstrations or development we don't
want to have the hassle of setting the
big client server database you can just
plug in SQLite as an alternative and
you've got a generic database interface
layer and this actually works very well
because then your developers don't have
to mess with administering your database
they can focus on working with your
product another thing I've seen people
do with it is that they'll have a large
enterprise database and their
application needs to download a
significant or some subset of that
database I mean you know maybe my small
compared to the total amount of
information in that database but it's
still a large chunk of database and see
what you can do is pull that down off
the main database and cache it locally
in an SQLite database to improve
performance and reduce the load on the
enterprise database engine but then we
get into some of the things that you
wouldn't normally think about using a
database for such as what we find SQLite
is here use
or is just a way of implementing complex
data structures in generic applications
when when you've been working with SQL
for a while you find that it sort of
changes your way thinking SQL allows you
to think in a much higher level in the
sense that you don't have to worry so
much about how you're accessing the data
you just tell SQL what data you want
access and this especially with
scripting languages this this actually
plays very well you can embed SQLite in
your application and instead of building
some hash table or using some be tree to
access your data you just store it all
on a database and then you do a query to
pull the data app that you need and
depending on what your application is
this can work really well I know I did a
a quick little application for a dupe
hour where they had this big glob of
data and they needed to sort it 15
different ways and so it was really
simple just to load all the data into a
database and then do a query for the
whole thing with a different order by
calls to make on how they wanted it
sorted and that was a whole lot easier
than trying to load it into a linked
list and doing a merge sort on it um
SQLite is very good for persistence of
objects or for configuration files you I
guess you know in the windows world
everybody will do that when does once
you put everything in the registry but
you need to have all these ini files
lying around you still have a lot of
local configuration files in the UNIX
world and SQLite is a very good place to
store that sort of information this is a
this is a goofy use but it actually
comes up sometimes you have a couple
processes that need to talk to each
other and you're writing an application
that needs to work on the lowest common
denominator which it by that I mean the
only thing that you can really count on
having available to you is disk i/o any
other type of IPC may or may not be
available so you can use an SQLite
database that sort of a chalkboard to
exchange information between processes
that would not otherwise be able to
communicate the most important or the
most interesting thing that I like to
see sqi used for is
an application file format suppose
you're running a new application and
what most people do is by application
file format I mean something like an XLS
file for excel or imagine if you are
writing a something like a good new cash
you know financial management program
you need to distort the thing in a file
like that SQLite it makes an ideal use
for that usually what people do with
this something like this is that they
will long they will create their own
file format and you know lately the
trendy thing to do is to make it XML but
oftentimes it's something customized and
then they'll write their own parser for
it and then they'll have to read it in
and this sort of thing and that's a lot
of work and that you know you can do
that but instead of doing all that and
when the user selects file open just
connect to an SQLite database you can
give it any extension on the end that
you want it doesn't have to be a DB or
something it can be whatever is
appropriate to your application the end
user doesn't need to know that it's an
SQLite database it's just a file to them
but this way your application load
connects to it
it's got you've got all the features of
a relational database engine you've got
atomic commit you've got durable
transactions you've got great waste
accessing the data you don't have to
load the entire thing in the memory all
at once and if you've got a particular
application file format that is going to
be used by multiple applications sort of
a common file format these multiple
applications can be written in a large
variety of languages because SQLite can
be used from various scripting languages
programming languages and they'll all
read the same format with now having to
everybody having to write their own
parser and translator so that's that's
some of the the uses that that we like
to use SQLite for if if you're
interested in working with this it's
really easy to get started using SQLite
just go to the website which is up here
and there's a standalone executable that
you can download
put it on your PC and then just run it
and you just you give the command line
it
it's a command-line thing you just start
up this little executable and give it
the name of the database file if the
database doesn't filed us and exist it
will be created and then you start
typing SQL there's no administration to
set up you don't have to set a password
you don't have to allocate space it just
it sits there for you to work I know
that a lot of university faculty use
this in teaching beginning SQL courses
because it's just something they give to
the students and it just works there's
nothing to set up if you want to start
programming with it the what gets
shipped is basically a C C++ API and
that's we've got eight basic interfaces
here now this is a simplification a lot
of these interfaces are really have
multiple multiple versions to
accommodate different data types but at
the top and the bottom you've got you
open and close the day of connection to
a database and and this gives you a
connection and then you prepare your SQL
statements you can bind parameters
there's SQL statements after you
prepared them if you want to then you
step through the SQL statement you can
use the column commands to access data
and then you can either reset to run it
again or you can finalize it which is as
the destructor for the object here's
sort of a quick example of how you would
use SQLite in your program from C and
once again this is not real code this is
pseudo code the interface is actually a
little bit different but you can read
about the details on the website so you
open a database file and gives you a
pointer to an opaque object which is
your connection and then you can call
prepare to prepare an SQL statement and
in this particular example I've got the
: X on the end that's of a variable that
you can bind to it if you don't bind
anything to it it's going to think
that's a null but on the next statement
down we're saying we're going to bind to
: X to the value 5 and then we go into
this while loop and we're stepping
through the statement and for each as
long as the step function returns is
not returning us your like done that
means there's a new row of resolve and
then we can access the result and print
out the result there and then after
we've run through that we can reset the
statement and then we're going to run
that same statement again while they're
having to reap repair it but I can
change the binding on X from an integer
five to the string hello and so now I'm
going to be doing a little bit different
statement to do it again and then it
finally finalized the statement and
close the connection that's the basic C
API most of the other bindings tend to
mirror that approach I wanted to show
you the typical interface though because
it is a little bit different and it has
some ideas that I'm trying to get people
to adopt in tickle if you were going to
use this what you would do is it use the
command SQLite tree to create a DB
object so DB is now an object and it
becomes a command and you can invoke it
at various places and then I'm going
into a loop here I've got some list of
some list of values that I want to
insert into the database and the for
each loop we'll set well will execute
wants for each element of that list
setting the variable term to be one of
the values and so then I'm calling this
method eval on the DB object and I'm
giving it an insert command and it out
at the end I put a dollar sign term and
that's one of those bound variable
things like we saw before that's like in
the previous example had a colon X if
it's in I think sequel server uses an @
sign and then the name of something for
a bound variable ODBC uses a question
mark
SQLite supports all those different
forms but in this one we're using a
dollar sign and what happens is that
SQLite sees that that's a dollar sign
term and it goes into tickle and says
well what's the value of the term
variable here and actually uses that
directly so you're not making a copy of
the variable there's no chance of SQL
injection attacks or anything like that
you don't have to quote it if term was a
blob that was ten megabytes in size
there's no extra copies made it uses it
directly and also a SQLite of the tickle
interface automatically caches the
prepared statement so that it if we're
going to do this loop
ten million times uh it would only do
the prepare once and then it would just
reuse that that statement multiple times
and that's all taking care of
automatically there's there's nothing
that you as a user have to deal with the
other thing down here below we've got an
example of extracting information using
the interface once again I use the DB
eval method and then I put a little
script after it and for every row in the
result set of this table it's going to
set it's going to create new tickle
variables with the name of the column
that contains the value of that comm and
in this particular case I'm just having
a single column a results at a so it
creates the single variable a and
initializes it to the value that's
extracted all of this to point out to
you that most of the interfaces have
this elaborate system of the coming
implement that emulate the C API where
you have to prepare and then bind and
then step through it and then and so
forth it's a lot of work to do here's an
example of an interface that brings the
SQL very close to the programmer so that
you as a programmer or whoever's using
it don't have to think about what you're
what how to operate the database you can
spend more of your brain cycles thinking
about how to solve the problem you're
trying to solve it fits very naturally
unusual features of SQLite the most
controversial feature of SQLite is that
it it tends to ignore data types this is
not entirely true in traditional SQL you
have to specify particular data type for
each column and it doesn't let you put
things at different data times in that
column SQL SQLite allows you to put
anything you want in any column you want
so if you declare a column V of type
integer and you want to put a blob there
that's ten megabytes in size it will let
you do it now I call this manifest
typing if you're programming I think
Ruby calls it duck typing if it looks
like a duck it quacks like a duck it
walks like a duck it must be a duck this
is this is very much inspired by
scripting languages where where things
operate
you can put days of any type you want
into a variable and it just keep track
of it now to maintain compatibility with
other SQL database engines SQLite has
this idea of type affinity if you
declare a column to be an integer and
you try and put a string into that
column and that string looks like an
integer it'll do the conversion
now if the string doesn't look like an
integer if it looks something it won't
convert it'll store it as a string but
it tries to convert it to integer if it
can't likewise if you take an integer
and your and put it into a column that's
a VAR car 10 it will do its best to
convert that integer to a string which
it can always do so it will always do
the conversion if SQLite also allows you
to clear a table with columns that have
no type specified at all and if that's
the case it makes no attempt to do any
conversions ever and just take some
stores whatever type that you put into
it
this is um I consider this a feature of
SQLite though there are certainly no
small number of people who consider it a
bug another unusual feature is the way
that we store the database schema in
SQLite there's a single table called
SQLite master and it basically stores a
copy of the original create table
statements that establish the schema to
begin with so you could this this table
is normally read-only you can query
against it to to find out what you need
there's a pragma that you can throw that
you can actually write this table though
if you write to this table and you can
pretty easily corrupt your database that
way so if you want to get schema
information out of SQLite you just do a
query against the SQLite master table
the first one there is getting a list of
all the tables select the name -
masculine master table where the type is
table and then order if I name and down
below you can get the original text for
example of the create table statement
for a particular table another feature
of SQLite is the ability to talk to
multiple databases simultaneously
there's a special command called attach
so if you have a database open you can
issue an SQLite command to that
databases as attach give it a file name
and then a symbolic name that will refer
to and then we'll have both databases
open at the same time and once both
databases are open simultaneously you
can do things like joins that use one
table out of this database and then
another table out of the other database
or you can copy information you can do
an insert into this database from a
select out of the other database to copy
information from one to the other so for
example if you wanted to make a backup
of a database of a particular table in
the database you could attach a backup
database like this delete what was
originally in the attachment or in the
backup database and then copy the
information in the main database over to
the backup and because I've done a begin
and commit around that delete and copy
this is an atomic operation so even if
if you lost power in the middle of your
copy you haven't lost anything it would
roll back to its original state here's a
little bit of typical code that actually
goes through and makes a complete copy
of the entire database by consulting the
SQLite master table it knows the names
of every other table in the database and
it creates a creates the schema and then
copies all the information over there
and does it as a transaction I must have
moved the mouse area
Oh in talking to a lot of people you
know there's a lot of people been using
SQLite our SQL database engines for a
long time and really don't have an
understanding how they work on the
inside you really need to think of SQL
as sort of a peculiar programming
language and not many people do this I
think of SQL as a data access language
it's really a peculiar kind of
programming language it's peculiar in
that instead of specifying the algorithm
that you're going to use to do something
you specify what you want the end result
to be and then let the database engine
figure out the algorithm for you so for
example you tell hey I want you know
certain information from certain tables
and then the database engine figures out
the most efficient way to try and access
that information so any relational
database engine really can be divided
into a couple of pieces a front end
which takes SQL and compiles it into a
sort of a little miniature program
that's going to access the data and then
there's a back end which actually runs
this program and accesses the data for
you and so every relational database has
sort of a virtual machine built-in now
something interesting about SQLite is
that the virtual machine is as well I'm
getting ahead of myself so with this in
mind we can revisit the the eight major
interfaces to SQLite and interpret them
a little bit differently the before I
said the SQLite 3 prepares to API
prepared an SQLite an SQL statement here
think of it as a program or a compiler
that's compiling a program to run on the
virtual machine the bind operation
initializes certain variables within
that program the step interface is like
pushing the little step button on your
symbolic debugger it just makes it go to
the next breakpoint reset just reruns
the program back to its beginning and
finalize just erases the virtual machine
ah with SQLite you can actually get a
listing of what the virtual machine
looks like if you put the explained
keyword in front of any any command it
will instead of actually running the
command it will return a bunch of rows
which gives you a sort of an assembly
language view of what this little
virtual machine is doing inside of SQL
SQLite
SQLite is somewhat unusual in that it
has when you prepare an SQL statement it
prepares it generates virtual machine
code that looks kind it's byte code most
other SQL database engines that I've
encountered their programs are really
just a big linked mesh of opaque
Strutter well they're not opaque over of
structures and you have sort of a web in
it and then you walk this this mashup
structures SQLite actually does byte
code that you can actually a view and
trace in real time and which is
interesting especially from the point of
view of people who use SQLite for for
teaching key points I wanted to get
across SQLite is a small self-contained
zero configuration database engine it's
not meant as a replacement for Oracle it
has a totally different role
it's a powerful replacement for things
like F open anytime you're running a
program in and and you're doing F open
to open some little data file think what
would ask you might be an appropriate
use here it's a good replacement for gdb
M or Berkeley DB because it has the
schema layer a lot of times this G line
has been used as a stand-in for
enterprise databases in certain programs
where the full power of an enterprise
database just isn't necessary you get
the cross-platform database files and
and then there's the issue of the
manifest typing where you can store
anything you want into a column in
SQLite and it'll let you do it so some
observations on my history with SQLite
what I've kind of learned from running
is project for last six years
first thing SQLite is in the public
domain and
learned over these six years that this
is not necessarily a good thing from the
point of view of the people who use it I
thought that when I was going to release
SQLite the source code into the public
domain that this would make it easy for
people to use it but big companies they
go so the engineer say hey we want to
use this in the product and they get
talking to the legal staff and the legal
and the lawyer see public domain and
they panic Oh what do we do we know how
to deal with the GPL we know how to deal
with with the MIT license or the
Berkeley license but this public domain
it does apparently people tell me that
there is no such thing as a public
domain program in Europe this is this
purely an American concept apparently
and so I have I have generated an
enormous amount of billing for corporate
lawyers by placing this in the public
and man I know that one one client I had
an r1 company in in Europe
they were not willing to accept the fact
that this is public the program from the
public domain and so they paid a small
token fee to to me and the other
developers and made a sign licenses a
perpetual use licenses just so that they
would be covered so I don't I don't have
an alternative what could be better I
think this is really sort of a political
thing but it it surprised me how
difficult it would be for people to use
public domain software we saw a picture
earlier that you know SQLite uses of a
bytecode virtual engine virtual machine
and there's a lot of programs that that
use virtual machines I mean if it's
there's parrot now for Perl and there's
a in a byte code that runs tickle and
there's you know Java has its stuff and
everywhere every time I look at one of
these virtual machines are all stacked
based in other words you you push
operands onto the stack and then you do
an opcode to operate what's on the stack
and what I have learned in six years of
working with is you like that and I
haven't really tested this theory but my
current theory is that a register base
machine with three operands is a whole
lot easier to generate code for the top
t'l and I would have never guessed I
mean every time you talk to somebody
they're always wanting to do a stack
these virtual machine because they're so
easy to get get going right away but I
think ultimately you need to go with a
register based virtual machine
um when you write something like a
database engine or any kind of complex
program and you put it out there for
people to use people think it operates
by magic apparently because they don't
they don't understand why it can't you
know it I solve this problem seemingly
by magic why can't I solve all these
other problems too that are really hard
and so you get a lot of feedback from
people who don't understand how really
really difficult this is can't you just
wave your magic wand and make this go
away where this comes up a lot in SQLite
is I had a couple of examples that have
just vanished from my mind I'll come
back to that there's a there's this this
this myth that people noblesse sorts
community will help you fix your bugs
not true they'll help you find them but
you're completely on your own to fix
them I get a lot of people coming in and
doing bug reports and a lot of people
are really nice about it a lot of people
are really mean you know they don't pay
me anything that why should you fix this
right now but but it is nice to have the
the people the mini eyes looking at it
and finding problems in your code I
really the I've worked with it for six
years in the manifest time typing idea
the dynamic typing in the database is I
think a really good thing and I know
that there's still a lot of people in
the world who disagree with this but I
if you're one of those people I
encourage you to get keep an open mind
and and give it a try and I think that
after you've used it for a while you'll
find that the dynamic typing is a better
approach to doing databases than having
a strongly type static static typing in
the database the SQLite that you guys
see with you download from this website
is only about 40% of the source code
actually that all of the source code is
available but the part that you compile
and that you build into your application
is really only 40% that's the C code the
most important part of SQLite is the 60%
of the regression test cases that verify
that it's working correctly
we've got 98% code coverage on the most
recent
Lisa s join and and what we found is
this has given us tremendous freedom to
rewrite huge sections of the database
engine from one build the next we don't
even have to do a minor version number
we can completely strip out an entire
system replace it with totally new code
and as long as it passes the regression
test suite we have a high confidence
that it's not going to break anybody's
prop caused any serious problems and
that's I heard people tell me this
before I undertook an SQLite SQLite to
the first project where I did this kind
of high-level coverage and extensive
testing and and I was amazed at how well
it worked it's a lot more work at the
beginning but it will save you a lot of
work in the end a lot of them a lot of
people complain to me a lot about SQLite
is that they compile it on you know the
latest compiler to come from Microsoft
or something and they get lots of
warning messages about you know I'm
casting a signed character pointer to an
unsigned character pointer without
actually explicitly stating the cast and
they're really upset about this Oh
SQLite must be full of bugs because
you're casting sign to unsigned pointers
without express being explicit and and I
try to explain - it doesn't matter I
mean when is doing such a cast ever
created a bug
why is that warning message even issued
but people get really upset about that
and slowly people have been eating to
understand that the the regression tests
are really much better than doing a
static code analysis or finding problems
and finally the love of money is the
root of all evil my original business
plan with SQL I was to give away as many
copies of it as I could for free and
this worked really well for about the
first three years and then people wanted
to start paying me for it which I was
very happy for them to do I mean I did
not solicit business for it or anything
but people company started coming to me
say well what you want to make these
changes for us we want you to support it
and so forth and that worked great but
that is as it's called sort of a dilemma
for me because in the early days people
anybody would come to me with a problem
and I spend a lot of time with might
stop what I was doing it helped them
work through the problem
and but now I have all these people who
are paying me for support and so people
come to me and they say umm and people
who are not paying me with support come
in to me and ask questions and I'm
thinking well you know it you know these
other people are paying me if I help you
as much as I helped and that's not
really being care to them and it's it
created a dilemma here for me I'm this
is not a an observation so much as it is
a question for you I'm not sure how to
deal with this because I really want
everybody to be using I want to be able
to help everybody but when when a
software like this gets to be popular
and people start using it more and
people start paying for it it sort of
changes the dynamic a little bit and I
find myself not getting as much
attention to the people who are not
paying me as those that are and I'm not
sure that's a good thing or a bad thing
it's just an observation and I'm not
real sure what to do about it I have not
kept track of time I don't know how well
my estimate went on 35 to 40 minutes my
head thirty years I was I was dead on
and I said it was going to be my
estimate was 38 minutes and thirty
seconds so I'm assuming we started on
time but now we're two questions yes
I'll get to you in a second
they are
the question is why did I choose to lay
out the database this table oriented or
rather than object oriented I'm not sure
I understand I mean it it's SQL so SQL
is sort of table oriented and I wanted
to be compatible is then I don't think
I've understood your question correctly
though is there object relational
mapping is there an object relational
mapping tool for SQL I started writing
one and once but it never really got
very far I think there are some
commercial of some quasi commercial
packages where you know just a one or
two guys get together and and put
something out on a website you can
download it pay them 50 or $100 um I've
not used them I can't I can't advocate
one over the other now there is an ODBC
adapter and so you could use something
like our one or something I suppose
because won't it talk to any ODBC
database well any any of these these
object relational mapping tools with
they'll usually talk to an ODBC database
and so you could use it that way I
suppose you had a comment to go with
your question or did you want to clarify
your question a little bit
kind of
okay the question was or the comment was
you can model inheritance using joins
but joins tend to be slow and and and
you ask that if it things were and so if
the lay on the disk cluster relevant
data together it would be faster I'm you
may be right I'm not I'm not really
following what what what your point is
so you want to want to talk to me later
we maybe draw some pictures on the child
born it might become clear question here
next you said Peter illusions that
manifest typing was better than static
sizes yes really just stating to be from
your experience migrates to the office
was because of things that static
ejected would have effect well then
here's an example well I find that
static typing tends to mask bugs what
happens in the problems that I've worked
on what I find is that if you have
static type checking you know you might
have a programmer that's that's that's
writing some module and they're supposed
to put say the Latin long of some
coordinate into the database and then
instead they put in two text strings
that say hello world
well static checking would have clearly
type caught that because because it was
looking for two floating point numbers
but you know what if the programmer had
has such trouble that they don't know to
put floating point numbers in for the
Latin long then just because it forces
in the floating point numbers they're
probably not going to be putting the
correct floating point numbers in there
and so I would really rather have hello
world in there and plays at the floating
point numbers because at least that's
going to be easy for me to spot and I
can track the arrow down what I find is
the errors tend to cluster like that so
that if if somebody's putting the wrong
type of data into a data
yeah that's a problem but I can find it
pretty quickly and usually when I'm
looking for that I can find other errors
that are approximately related to it
that are in the same area it gives me a
place to look the other thing is that
the added flexibility usually when you
on designing a schema I don't know how
it's going to be used at the end of the
day if if I've if I have to commit to a
static type early and then later on we
see that we need to extend the problem
or to put different types of data in
there then I have to go back and change
my schema which often involves
recompiling legacy applications so forth
if I've got a dynamic database I don't
have to do that it just put the new data
in and it works question in the back
the question is is the presentation
available online it's on a little flash
stick and I'll be happy to let you
download it if you want it's all HTML
any other questions does New York have
questions here's a question here in red
the same complex data types
well yeah I need to the question was I
mentioned complex data types what do I
mean by that it's you I tend to approach
a problem by you know breaking breaking
the problem down and first what it is
that I am story you know breaking up
into objects treat each objects you know
figure out what your objects are each
object is a separate table in your
database each instance of the object is
a row in that table if you store things
this way you um I do a lot of
programming in tickle TK and tickle DK
is it's a wonderful language but it's
very weak on datatypes every other
language out there is you know got a
bazillion things built in to go to he
has very little so it comes in very
handy there because with equal DK would
just have variables and arrays and not
much hilts and with by putting a
database in there and building that into
my application I can do much more of an
object thing where I can have all these
different structured tables with with
with fields in them I'm not explaining
that very well but
no I'm actually using the rows and rows
in the table as the object itself that's
where I'm storing it and so that way I
get object persistence for free and I
can query large collections of objects
without having to hook them into a
linked list or a hash table or anything
like that another question in the front
you said that you had been using a snap
based virtual machine to deliver one
byte opcode when is you won't be like
registered machines better you think now
what do you haven't actually done again
I haven't actually done yet that's
correct the question was I the question
the question was you know I said I think
that a register based machine is better
than a stack based machine and you're
right I have not tested this theory yet
I just know that I've been trying to do
some optimizations for a number of years
on SQLite and I've noted that boy if I
just gone to a three address register
machine this optimization would have
been so simple some of them I have yet
to implement because they're so hard to
do on a stack based machine in SQLite
the programs are always such that it's a
finite amount of memory and in fact I
can I can compute when I'm preparing the
statement I know in advance how big my
stack is going to be so I can always I
can always do that in sq I know in
advance how many registers I need that's
just the nature of the language that I
had question
they're just parts but the project is
that in some issue the design or is it
something you can prove any time it's
just a the question is why do I only
parse foreign keys but not enforce them
it's a question of just doing it one a
big user of SQLite is embedded device
manufacturers cell phones mp3 players
this sort of thing I've got there's a
lot of companies to do that and they
give me a little bit of money to make
sure that SQLite doesn't get too big
doesn't it bloated because they're
they're trying to fit their database on
this little tiny device if they can save
a couple pennies on the flash chip you
know that that's big for them and so the
foreign keys to put it in would would
cause the footprint of them to get a
little bit bigger for one of course we
could make it an option they could leave
it out of compile-time and that would
solve that problem that's probably I'll
do eventually the other thing is that I
have not personally needed it and so I
haven't been real motivated to put it in
and so it just hadn't hadn't happened
yet you know as soon as I have a
personal need to have foreign keys I'm
sure you'll see them coming pretty quick
any other questions questions from New
York serial it's serialized only
actually I did some extensions recently
that allow you to do read uncommitted
but only under restricted circumstances
it has to be the two connections running
in the same thread and and and some
other restrictions like that it's used
by the embedded device people because
they wanted something less severe than
serializable but by default all you only
get serializable
it's you you can by default it's the
question is is it an in-memory database
well no it's a the database fits on on
disk we goes into a disk file what you
can do is give as the name of the disk
file that it's going to be using when
you're opening it you can give it an
empty string and it'll just keep it all
in memory instead as soon as you close
the connection it forgets everything so
but some people that's useful for cache
or something other questions
back here so again
what's the future of sequel light ah
well it's being a lot of companies are
using it in their products are you
asking where I intend to go with it
what's some new features coming up we're
working on full-text search we are
there's some minor features that will be
going in pretty soon such as the ability
to do incremental reads and writes of
blobs I was really planning to have
coming back to your earlier question I
was really planning to have at least
some support for foreign keys in by now
but I've been tied up with some other
things and just haven't gotten around to
it yet so via foreign keys and the big
thing the big in the near term the big
thing is going to be full-text search
longer term I don't know it depends on
what I need other questions or let me
let me amplify that depends on what I
need or what you're willing to
contribute other questions
the question was sometimes he used
sequel like before and the database
would corrupt well it's not ever
supposed to do that so if you ever if
that ever happens to you file a bug
report or call me and we'll track it
down there have been a few cases we have
found a few bugs in the past that could
lead to database corruption but not any
within the past year and and those are
very rare and people use it all the time
in situations where they're writing to
the database and they they lose power
they're using it in and devices that
don't have reliable power and when power
is restored and the machine comes back
up the the write that was in progress
automatically rolls back and we've not
had any trouble we test that extensively
we've got a for testing purposes we have
a special back end that we plug in in it
there's backends for UNIX and Windows
and Barry says we have this special test
vacuum that we plug in or we can
simulate a power loss in the middle of a
transaction and and we do lots of tests
on that to try and find problems and it
seems to be working if you know of a
case where you're seeing corruption
please let us know because we want to
track that down question
no the the question is when does it roll
back I think is what you're trying to
ask so if you're in the middle of a
transaction you're right into the disk
you lose power and the the data bits of
half-way updated okay later on you get
power back you come back up
the first process that opens the
database sees that it was left in the
sort of a halfway modified state and at
that in that and when it does the open
at that point it rolls back of the
changes so that it restores it to its
state before that transaction began so
that happens when you do the SQLite 3
open it depends on how big your
transaction was not normally unless if
you have a really really big transaction
that she's been running for a long time
it could in theory take a little while
to do but normally it'll do it within
milliseconds question here
our again
that's correct the question was suppose
that you lost power you in the middle of
transaction power came back up you're
starting to roll it back and then you
lose power again that's it correct you
can you can take multiple power losses
and the next time it comes up it'll
start over again from the beginning
trying to roll it back yet again no more
questions thank you all for coming</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>