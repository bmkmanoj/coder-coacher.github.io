<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Enhancing The Developer and End-User Experience on ChromeVox | Coder Coacher - Coaching Coders</title><meta content="Enhancing The Developer and End-User Experience on ChromeVox - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/GoogleTechTalks/">GoogleTechTalks</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Enhancing The Developer and End-User Experience on ChromeVox</b></h2><h5 class="post__date">2012-08-29</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/GzsZG8BWz3g" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">enhancing the developer and end-user
experience on chromevox TV Raman auto
bandaru surjit orca kaguya Liam August
seventh 2012 googletechtalks are
designed to disseminate a wide spectrum
of views on topics including current
affairs science medicine engineering
business humanities law entertainment
and the arts disclaimer the views are
opinions expressed by the guest speakers
are solely their own and do not
necessarily represent the views or
opinions of google inc thank you for
coming everyone i'd like to set the
context for the stock because you're
going to hear three of our interns give
you an overview of what they be building
the summer but there is a bigger picture
behind this a common theme that you will
see running through these three projects
is our work on chromevox so i'll save
them all some time by giving you a
high-level overview of what the
chromevox project is so when you step
back and think right the web and the
cloud are Google's platform but that's a
very abstract treatment the web is not
something that you can go touch and hold
in your hands or run on a computer oh
the web platform becomes real when you
take a call a concrete web runtime such
as chrome so chrome is a fairly
important platform to Google we have
Chrome OS where you have chrome as the
pretty much the only way of running
things on a notebook or a desktop
machine so you have a thin layer of
Linux with chrome on top of it and so
three years ago plus roughly three years
ago we started this project called
chromevox to build accessibility for
Chrome OS and what that does is it says
if the web runtime being chrome is a
platform and you can build all kinds of
applications from word processors to
chat applications to whatever else you
need as a web app then you should also
be able to build accessibility tools as
a web application and that's really what
chromevox ends so chromevox basically
uses web api's and calls out to text to
speech wire Chrome's in Native Client
layer to basically make give you fluent
spoken feedback as you work with all
aspects of Chrome so with that in mind
then we have three pro summer projects
to talk to you about search who will be
going first
we'll be talking about the work he's
done the summer in refactoring the
chrome chrome chromevox code base and
he's done some awesome work that
actually helps the code health of this
project it's it's an exercise in taking
running code continuously refactoring it
and making sure that you still have the
same effect why do you have a cleaner
code base following a surge will be char
who worked on building what we call
chromevox extensions so a year ago
Google Docs actually started calling
chromevox api is to provide some
enhanced user experiences and what we
realized was that exposing those api's
to all web developers would enable us to
write extensions on chrome and Chrome
walks that beverage all of Chrome
extension API and then do a little bit
extra with the chromevox api is to
produce some really nice user
experiences and then finally other will
talk to you on the work is done on
enabling some really really useful
features with respect to focus
management and other html5 features so i
let e to the intense give you an
overview of their talk we'll have time
for questions of then we'll have plenty
of demos take it away hi so my name is
search I worked on redesigning chromevox
how chromevox navigation works
internally and actually I'd like to
start off with a story so it was my
final year in high school we just got in
our last programming assignment of the
year and it was really relaxed there was
not really any restrictions we could do
anything we wanted provided that the
teacher agreed and so you know most
people did like tic-tac-toe or breakout
or some game I was a little weird so I
decided to do an expression parser and
so I went home to my dad that night and
at this point he was he was the guy that
taught me everything I knew about
programming and you know I was all
excited and told me about this awesome
expression parser I was going to build
and it was going to have parentheses and
you could do multiplication and
exponentiation and you have boolean
operators and he looked at me and he
said well you know that's that's kind of
cool maybe but if you wanted to build
something
really awesome you should build an
interpreter and you know I didn't know
anything about interpreters or compilers
but it sounded kind of cool so I agreed
and so I built an interpreter ah it was
I even had a UI for it had a text pane
for input and a text pane for output and
a big green button to run it was a dinky
little made-up language that I made up
and so like I went and showed it to my
dad and he was like well you know this
is this is this is kind of cool but why
do I have to declare all my functions in
the global scope why can't I treat them
the same way as variables and just pass
them around the same way or why can't I
declare them within other functions and
so I was a little ticked off i just
spent all this time building this
interpreter and now he went and made
some stupid request to get me to change
it but you know I I wanted to prove that
that I was still the best and so I went
and did it but I knew in the back of my
head that this would be a hard change to
make just because of the way that I
structured my code previously and so you
know I cranked out some code any kind of
code went didn't matter if it was hacks
you know coffee face was my favorite
weapon and I got it finished and so I
went and showed it to him and actually
should have no there you go all right so
I went and showed it to him uh and you
know expecting that he would be like
really proud of me that this is
something awesome that I built ah but
but he knew that how to push my buttons
like I didn't even expect that he would
ask me to make another change because he
already asked for this stupid change and
like why would you need anything else so
I went to him and he said you know this
is this is really cool I like it I told
one of my co-workers that work that
you're a really awesome programmer and
you know at this point I could feel it
like I was winning and I had a giant
goofy grin on my face and then he said
yeah I told him you built an interpreter
and a debugger and I said wait what I
didn't build a debugger and he said oh
crap I told him that I would show that
to him on Monday
and you know it was friday night and so
I was fuming like how could you do this
to me but you know as angry as I was it
hit me at that moment clean code matters
I I had a lot of hacks in my code but at
least some parts like the UI were
isolated from the rest and so they
weren't part of that mess with a
debugger I had to maintain the state of
everything that was going on and I
couldn't just let my rinky-dink language
run freely as it had before I had to tie
everything together and it was really
hard to do this because of like how
messy it was uh
yeah and so anyway so I I worked the
entire weekend and it took me a lot
longer than the rest of the project
combined like I put in a lot more hours
I finally finished by monday at lunch
just in time to email it to him so you
could shows his coworker and when he
came home that day he told me that you
know he was he was generally impressed
with what I did but I already been
infected I I considered it a failure
because even though I got it into a
working state it was just impossible to
make changes and I knew that if you ask
me to do anything else I I would not
succeed and so you know it's really it's
really frustrating when every everybuggy
try to fix has a higher chance of
introducing a new bug than a fixing the
bug that you're originally trying to fix
so for a couple of months I just I read
a lot and I tried to figure out this
problem like why why weren't other
people having this problem and if they
were what were they doing about it I
couldn't understand how people could
even build large projects in the face of
deteriorating code and so today I'm
going to talk to you a little bit about
some things I do to make Mike some
things that I've learned from that that
I do to make my code suck less so
actually you guys are really lucky so in
at Google you're in an organization
where your managers managers manager
understands that clean coat counts most
organizations in the world are not like
this it'd take me a lot of efforts even
convince you that this matters so I'm
just going to assume sort of that you
believe me and jump into into how to do
it so let's just quickly remember what
refactoring is refactoring is modifying
the internal state of a program without
affecting any of the external externally
visible behaviors so for my project the
second week that I got here I found a
bug in chromevox and you know i dug into
it it took me a really long time i was
like two days and i found it an infinite
loop but it was really really
complicated and i could tell it in this
we have this massive file that in other
places there could also potentially be
infinite loops and but they were all
like they took a lot of effort
to dig into and at the same time this is
before release and we had like 20 bugs
all relating to this issue with where
chrome would just hang depending on some
weird circumstances in which you would
navigate and so you know I did the math
and I figured that it would be a lot
easier to just rewrite this component
from scratch them to try to chase down
all these bugs individually and that's
only if we're considering the cost of
the bugs that we knew at the time and
not the future development that it would
cost for that for that code which is
much higher than the current bugs and so
that's what I did I refactored this this
navigation model and as a result we were
able to laud it a lot of unit tests
testing some weird edge cases that we
weren't testing before and a lot of the
tests that we were getting sorry a lot
of the bugs that we were getting before
are now gone so i'm going to talk about
four things the first is I'm going to
answer the question when should you
refactor then I'm going to talk about
how to prevent changes while you're
refactoring you don't want your
externally visible behavior to be
modified then I'm going to talk about
i'm going to give some tips on good
design practices and i'm going to finish
with some comments on the code review
process so when one should you refactor
the approach that I take is to every
time I have a bug fix or a feature I
modify the code I refactor the code
first so that the changes that I'm
trying to make fits nicely in place and
then and then I make the change so for a
bug fix i would first make it obvious
that there's a bug and then i would fix
it for a feature i would manipulate the
interfaces until my feature plays nicely
with everything else that exists and
then implement the feature and this is
the approach suggested by Steve
McConnell who's the author of code
complete too there's actually a more
aggressive approach so by this approach
I mean modifying the stuff that you
change refactoring the stuff that you
change there's a more aggressive
approach where instead of touching just
what you need to change you refactor
everything that you even need to
understand so all the code that you read
you would be factored on every commit I
personally think this is a bit too
aggressive but you can read more about
it in Martin Fowler's book on
refactoring so sometimes that you can't
you can't
factor incrementally sometimes the code
is like very complicated and hard to
untangle or the business changes are
really hard to make and in that case
it's easier to rewrite the entire
component from scratch than to try to
refactor it incrementally just cost less
effort and this kind of follows in mind
with the approach of not keeping your
code clean as you go along and instead
trying to do it in large chunks every
long once in a while and this is like
way more expensive per unit of code than
than the alternative right it's just the
original developer is no longer there
and even if they are nobody has the code
fresh in their mind and on top of that
code just tends to build up over time
and so there's a lot more interactions
that you need to deal with in order to
make that small change or the small
change that you would have had to make
before okay so once you've decided that
you're going to refactor how do you
prevent stuff from changing you don't
want to break anything that already
works so there's two ways you can do
this the first is you can prove things
rigorously about your programs but
that's really hard and like it reduces
productivity by a lot and you usually
don't need the type of error tolerance
that that gives and the second way is
you know to sort of wave your hands and
say well here's some examples that it
works for so let's just assume that it
works for everything and that's testing
and testing is awesome it gives you
three things the first thing is that it
will alert you when there's a problem so
integration tests are really good at
this they have a really wide coverage
area and so if any of the components or
any of the interactions between the
components have a problem you'll
probably know about it the second thing
that tests give you is that when there's
a problem you know where to go to fix it
and integration tests are not good at
this because they have such a wide
coverage area you don't know exactly
where the error came from you need
something much closer to the component
that's being tested you need a unit test
and with chromevox in particular we had
a problem that a lot of our tests that
were actually almost all of our tests
that were testing navigation we're also
testing event handling and event
handling is asynchronous inherently so
every time we have a bug with navigation
we'd have
all of these asynchronous things going
on that we'd have to also keep track of
and I made it a lot harder than than it
needed to be and so a lot of that is
gone now so the third thing that testing
gives you and this is a lot more subtle
than the other two is that it's a
forcing function to force developers to
write clean interfaces it's really hard
to add unit tests for for messy
interfaces because you have to do a lot
of setup and and making sure the
environment is correct every time you
write a test and so a good developer
that's lazy will realize after adding
the first or second test that it's just
it's not worth their time and it's much
easier to just redesign the interface
okay so now that you have your test in
place you need a tool to actually be
able to do the refactoring and that tool
is good design and as an aside i should
mention that not everybody agrees with
good design so for example Alan Kay he's
the creator of small talk and he coined
the term object-oriented programming he
thinks that objects should not have any
strict protocols and how they interact
so he thinks instead they should be able
to negotiate the same way that like if
two people didn't speak the same
language even though they can't
communicate they can still get things
accomplished but that's far beyond the
scope of this talk and I have some links
at the end that I can point you to if
you're interested in that sort of stuff
anyway so back back to design so the
first tip I have I'm just going to share
for tips the first tip I have is don't
repeat yourself duplicate code even when
mine are different even when there's
minor differences is really a pain to
maintain every time you modify one chunk
you need to go and modify all the other
chance that are that are the same and
developers just aren't good at this as
humans and so with chromevox we had we
had problems with all of the navigation
that you could do on a page was
symmetric in that you could do it both
forwards and backwards and a lot of that
was duplicated and so we'd have weird we
had weird
and so we'd have weird like inconsistent
consistency problems depending on where
the user whether the user was going up
or down the page and a lot of that has
been fixed now to the second tip I have
is replace switch statements with
polymorphism if you see a switch
statement that's testing on the same
expression that's a really good hint
that you should probably turn that into
polymorphism with chromevox we have this
giant file that almost every function
was testing on the same on the same
expression and so moving that away into
its into an isolated class removes a lot
of the class a lot of the clutter and
lets the class deal best with what with
its data so the third tip is break
classes up along internal boundaries if
you see that one part of the class is
being accessed independently of all the
rest of the class all the time you
should probably break that up into a
separate component that prevents you
from having large giant classes that do
try to do everything and my last tip is
avoid circular dependencies so it it's
weird that like I would have this tip
but we use the JavaScript closure
compiler and it's kind of bad at
enforcing things just because javascript
is dynamic and so you can sort of cheat
and get around restrictions like
circular dependencies and circular
dependencies are bad for the same reason
that Global's are bad they introduce a
lot of things that you need to know
about the entire program every time
you're working within just one portion
of it and you know one way you could
cheat is just by having your entire
program in a single file but then like
obviously that's not a very good way to
structure your program so I only gave
four tips ah that's a very narrow view
of what's out there and there's a lot of
really good books on this which I'll
list at the end so I'd like to finish
with some comments on the code review
process so refactoring makes your own
code awesome whereas code reviews are to
make your team's code awesome walk with
me through a thought experiment imagine
if we tweaked the
code reviews that we have slightly in
that you'd have a code go in and
comments go in as we do now but you
wouldn't have any of the names
associated with any of the code or the
comments think about the kind of
comments that you'd get and think about
how the code would evolve you wouldn't
developers wouldn't be afraid of say
looking stupid because they don't
understand something right and you get a
lot more questions and a lot even even
small clarifications that would just
make the code better in general you also
wouldn't have the feeling of this person
won't like me because I just asked them
to redesign this and it's going to take
them two hours and so I really think
that we should be more vigilant and and
really not shy away from from asking
questions and asking people to do more
stuff if it's going to improve the code
and so to recap refactor often make sure
you test so that you don't lose your so
that you don't lose functionality
practice good design and and be diligent
be vigilant in your code reviews so
that's all I have today for today but I
do have some extra stuff so that's
that's cute dog and so some books that i
recommend i mentioned these in the talk
code complete too that's just an awesome
book about maintaining code and just
very good in general i highly recommend
it martin follows refactoring also very
good it's very much in the style of the
design tips that i gave you where they
have very specific patterns that are
obvious that you should change them in a
certain way if you haven't read design
patterns by the gang of four highly
recommend that but it's very hard if
you're just getting introduced to this
topic it's very dense so you might get a
little bit bored so if you're looking
for an introduction head first design
patterns is is good for that and some
talks that i mentioned and some that i
didn't so Alan Kay on negotiation that's
that's very interesting and one more is
John Carmack at quakecon 2011 he has
about a 15-minute segment where he talks
about his experience with development
and it's interesting that even though
he's in a completely different sort of
domain where
his focus is hardcore performance so
that video games can run more awesomely
he tends to converge to the same results
and that's it hi everyone so hire one
I'm Chara I'm an intern in excess inch
to inch team and today I'll be talking
about accessible website development
leveraging the comox platform so first I
would like to imagine that your screen
reader and this is the CNN website from
2000 and as you can see so you're going
to like try to read this to a blind user
and as you can see there is like a lot
of texts and a lot of clutter and but
they're like very few pictures and very
few like rich content so there's like
some sort of challenge in how to read
this website efficiently to a blind user
so you don't want for example keep
repeating the sidebar you want to
directly go to the headline to improve
efficiency but let's go fast forward to
2012 and this is the cnn's website today
and as you can see there's even more
there's even richer content for for user
that can see it's really easy to
understand but from perspective of a
screen reader obviously it will be much
harder now we got a lot of pictures and
a lot of dynamic content here and so as
you can see like as web page get more
complicated with like dynamic contents
and new web technologies it gets harder
it gets a bigger challenge to make XML
screen readers and make web pages more
accessible
so like I've been working on Chrome
locks which is screening duress Rahman
had talked about before and like the two
main challenges I have seen with how a
screen reader should work for for web
pages it needs to first described a web
page accurately yet concisely that a
blind user can efficiently navigate roof
and also it needs to have support for
and good robust navigation system and
this in a lot of cases this requires a
lot of development effort and there are
like certain technologies such as Arya
which screen ders can use to actually
improve the intelligence but most dopers
currently don't time to use it on their
web pages and a lot like all these web
pages need significant reorganization of
their realization of their information
to actually be able to fit into a screen
reader so so as Rama had already talked
about chromevox I just want to like
point out to a couple of the important
features of chromevox which will be
relevant to my top first of all
chromevox is also re aware and it
supports a lot of the sale of RT x
ability web technologies to read
describe each Dom element in a web page
more intelligently but the issue with
Ras you actually have to when you design
the web page you have to like add that
as a tag and like sometimes we don't
want that we may want some other
developer to actually be able to write a
script and make the page more accessible
and also we also may want to explicitly
tell the screen reader how to read a
given Dom object and how to navigate
through the page and that's for where
the API exposed in chromevox come in
handy and so i'll just do a brief
introduction about AP i am there's like
this is list of functions the most
important functionality
of the API is you can change the cursor
of the screen reader to any given
position given element and you can also
change the description of each object
and so you can also read more about the
chromevox api in the documentation of
chrome rocks and Crocs homepage but i
just want to show like a quick q demo of
the API in action so just play the game
and let me call logs here google
accessible jawbreaker google accessible
jawbreaker 00 green so as you can see i
know if most of you will be familiar
with this game this is just a game which
have a lot of colorful balls and you
want to try to pop the same color balls
I mean I used to play this when I was
really young my mom's PDA and so this is
a game which was probably meant to be
which was probably designed for seen
users but I like you with using the
leverage in comox API you can actually
make this accessible so I'll just 10
orange 11 green I can just navigate one
by one I can also do round one orange
green green red orange blue green green
green orange I can read a 11 row to you
know how I idea of my surrounding
circles and I can like Oh score 0 20 red
balls 23 blue balls 32 green balls 25
orange balls and let me play selected to
pot 2 balls 2 3 1 40 selected pops
u-hauls new scored for now on 40 Red
loading so yes I guess a free fun game
but no need to waste to town too much
time go back to demo so location HTML
view of the press blank chromevox is now
inactive okay so
the most important thing to note about
this you know game was the script that
actually has the game logic can be
decoupled from the script which makes
the game accessible so this is more like
if you have chrome locks installed this
second script would be injected to the
page and this will make the game
accessible that's why we call these like
comics extensions so like chromevox is
an extension and we're writing chromevox
extensions and I've been writing a bunch
of these through my project and like so
my first time was wants to was to write
one for Google+ and I wrote it and then
my measure asked me to write one for
books and then drive in gmail and I
realize I've been just like moving code
off like just copying cold and
refactoring it a lot and it's kind of
boring ovc so I I said why do I just
like right at library to you know speed
this up and then what I wrote as the
library eventually became a framework
and this framework it is like something
I've been working on for a while and
hopefully this will provide a more
streamlined easy and simple way to
actually write accessible websites for
comics and this will like basically what
you have to do you for each like Dom
element that you think are important for
accessibility you have to define a
selector which is like I Drake last name
it's a dumb selector and you also how to
define like how you want to read it so
in this one you will also have a
definition for otter content and comment
code you tell different objects for that
this is what I call like speakable
objects and then if when you run this
extension it would be reading something
like Chara said I love googletechtalks
at 2pm thousand comments and so so the
really nice features of this framework
is first of all it allows you to
naturally read each Dom element and you
can actually
you can have a nice overview for each
Dom element that you want to read and
also chromevox api supports this cool
feature to categorize the types of
speech you can categorize each speech as
user value annotation context and
regular text this actually affects the
intonation of chromevox so you can
actually sort stress certain texts over
other another cool feature is with no
further virtually no further development
effort you can actually have a built-in
navigation system and keyboard users
will find it familiar to use J&amp;amp;K to
scroll to a tree or page and if you also
already have like a navigation system
implemented in your website then that's
great because my framer will play nicely
with your new hitch system also together
with chromevox is built in navigation
system it we end up the real robust
actual webpage so I have been like
writing up these exceptions and diesel
actually using the framework and these
will be released as a standalone
extension Chrome extension to chrome web
store so I got excited for Google+ books
calendar use gmail and finance and i
want to show one of these i'll show you
the I'll show one without the extensions
is installed first and then I'll show
how much we can improve on this okay so
first as you can see we okay so let me
disable this let me save all the
extensions and now i loaded google
finance and i'm going to try to now gate
with regular chromevox case here oh i
have to enable header
so let's refresh google finance stock
market quotes news currency conversions
and more so Google Finance doesn't have
its own navigation system so we'll how
to ver stuck in regular chromevox
negation now and let's see what happens
when we talk order list with 11 items
list item plus now I link so it actually
tried to start a ghost on the top right
that's not what we want really because
we actually want the user to be able to
directly access the content of the page
not not like a top toolbar website lists
another flying link you know something
which is irrelevant to the actual page
so I think like we can do better than
this and now I'm gonna like turn on the
extension see how much we can improve ok
Google Finance stock market quotes news
currency conversions and more so now i
have also enabled the J&amp;amp;K support like
the key keyboard navigation support in
my framework and should actually
headline US regulators have britain's
Wild West Bank culture in their sights
by the Guardian two hours ago the Labour
MP John n an outspoken member of the
Treasury select commit so as you can see
it actually the cursor right above the
dom element so why is that happening
well it's not a bug it's a feature
because now we can actually use regular
chrome rocks users may have the Guardian
the high-fat to our to the Labour MP
Iran broadside so as you can see you're
confident using regular chrome rocks
navigation in conjunction with my
frameworks navigation we have a really
accessible web page let's try reading a
table sector summary eight sectors have
gone up on average while three have gone
down the best sector who has been cons
cyclical changing plus 1.92 percent
while the worst performing sector is
utilities changing minus point four five
percent so for those of you who are like
sitting in the back I mean it's actually
as just as you can see like it's
discreet
to its descript describing the overall
information of the table and you can
also go inside where change Zach basic
net capital goods link plus 1.2 four
percent so you can also if you want to
actually go through the table you can
have more detailed navigation with
regular chrome elimination so as you can
see like this framework has a lot of
potential and it like it's like 300
lines of code for the extension which
took me like two days and I had other
stuff to do and I mean it's really
reducing the whole / effort and like
because googles mission is like to make
information in orderly accessible and
like we're helping developers to
actually make their website more
accessible so function HTML chromevox is
now inactive so that's all i want to
show you today um we will be releasing
the framework soon soon and people also
have a documentation for the framework
shortly thank you very much for
attention thanks
um all right hi everyone my name is ado
I'm a software engineering intern this
summer at Google working for
accessibility and here I'm going to talk
about intelligent focus recovery for
chromevox um alright so first things
first here's what we're dealing with
today so there's some so like as you saw
before like CNN like 10 years ago even
was it's a very different place the web
was a different place and now we're
dealing with much more advanced
technologies so nowadays web developers
leveraging things like Ajax and web
sockets and static web pages are thing
in the past like web apps nowadays are
extremely interactive and fast they load
fast they've you know pruned out in
efficiencies with asynchronous stuff all
these things this is all great for most
users but this does present a lot of
accessibility challenges not all of
these features port well over to say non
vision users for example drag and drop
things that are really intuitive for
visions users yeah these are difficult
to do in any other way so coming
stemming offer that developers make
these really interactive apps but
they're not it's they're not reliable we
can't hold them accountable for
upholding accessibility standards and
this happens on of your day to day
websites and you know even some really
really big ones like Google Plus which
will go into later and finally this is
uh this is a web that chromevox is
swimming in you know how do you deliver
a high quality screen reader in this
environment and so I mean these are all
challenges that we're looking into so my
project is about focus so what is what
is page focus page focus is it's where
you want on the page this is what
chromevox is trying to read to you what
is trying to represent to you and for
those of you who can see the it is the
orange active selection cursor and I'm
going to a lot of the demo will be muted
just so you can hear me talking but
there is an active indicator selection
and I will make it audible when I can
okay so
let's get into what is what is google
plus with no intelligent focus recovery
oh it's going to be a simple text I'm
going to open a dialogue close it and
we're going to be lost so let's see that
in action and make sure we have the
right extensions yep okay so this is
google plus i'm just going to tab across
the top we should have volume right now
and let's go why off it is on oh ok we
turn it off last time thank you um is it
ctrl shift got it okay sorry guys
extensions okay so developers refresh
this page this is google plus mom was in
here I'm talking board we're gonna go
across a job let's do it boom news we're
gonna go to the source code doesn't you
find shared Larry Page said always good
just all right so on Larry page's post
he's talking about nasa's mars rover
right um this is all good and like maybe
I have something maybe I want to share
this post I think it's really exciting
so we're gonna we're gonna trap into
this post go through it we're going to
mute some of this so i can tell you all
right so you'll notice like most of
these things are pretty good google+ is
a good job in ordering their icons the
developers note they have accessibility
in mind but when we want to share this
post so we've opened a dialogue and
here's what we've got browse people oh
sad share but canceled all right i want
to i don't actually want to post
anything this is a demo right so I'm
gonna cancel and so all right I cancel
and now what so I what I expect is to
keep reading the stream what happens is
i end up at the top so if you listen
carefully list item list item images let
list item map so this is the top of the
page um and like you don't expect to be
there it's due
reading you menu items right I mean you
expected the next post in the stream and
this is all really confusing if it
really really rich web applications like
Google Plus you could be like
figuratively miles away from where you
were before right and that's frustrating
and that'll happen every single time you
open this dialog and close it and I
think one important thing to say is that
so yeah the the developers do a pretty
good job like when you open the dialog
they place your focus in the dialog and
that helps screen readers a lot but when
they close it a lot of developers forget
that they need to place that focus back
and they have that control but when they
forget that's when you get lost and
that's the problem we're trying to fix
here so that's called drop focus all
right so let's go back to the demo
presentation all right so here's the
problem that we're dealing with this is
what we want to do about it okay dropped
user focus should be detected so when
the developer fails to assign your next
like the next thing to speak into the to
the user we want to be able to tell when
that's happening next we want to restore
the user to the correct place and I'm
correct my Tallis eyes here because I
mean what does that even mean and so
obviously when I implemented this there
were some design decisions to make and
we'll talk more about them later but we
have an answer and i'm sure it could be
improved thirdly we want to return
control of the navigation to the user
immediately after we rescue them and put
them in the correct place because we
don't want to just jerk them around in
the page forever that's that's bad like
we want to give them we want to make
them feel like they're in control
because they should be and finally we
never want to override developer focus
assignments and what this means is
sometimes a developer is like
controlling focus correctly and when
they are doing that we don't want
chromevox to replace that with the best
guess we can't override like the
natively running scripts on the page and
so we have to be really careful around
that and a lot of times they are doing
the right thing so yep want to be
careful um so okay so the general
strategy we used to I guess attack this
problem is the first thing I ran into is
well
thing drop focus is actually pretty hard
it's because like a lot of times the
developer will drop focus like moment I
early in their script and then put it on
something else and that's that's not a
mistake we have to let that happen and
so like there's those cases and in
addition like the browser doesn't yell
at you and be like hey there's no active
elements you know you should probably do
something about it there's like they
were like in the converse analog there's
like the browser will tell you when
something has focused set to it like
there's a focus handler right so we
don't have that like signal so as an
alternative we came up with the concept
of valid places and a valid place is one
that the developer intends the user to
interact with so a common like criteria
for this is like making sure it's
visible like if it's invisible they
probably don't want you two to mess
around with it right use your screen
reader shouldn't be reading that content
also has to be part of the page like so
criteria like that define a valid place
and so like the idea is if your place is
somehow not valid you're probably lost
and I say probably because we're not
sure I mean but if your note is
invisible or it's like not attach the
document anyway like where our chromevox
is best guess is that the user is lost
or is about to be lost and we will
rescue them and so that's what a valid
places and in order to rescue the user
the idea of correct that we had that i
mentioned before is to return them to a
familiar place and to do that you need
to record their progress through the
page and so we'll sort of remember where
you're on the page and then when your
loss will return you there that takes
care of those last two points right so
yeah so a general implementation
overview of how this is done we've
created a new module called navigation
history and navigation history is
responsible for maintaining a list of
recent places you've been and making
sure to like make sure it's clean make
sure all those places are valid so that
at any point in time I can
ask navigation history if if I'm lost I
can ask navigation here to any point in
time for a valid place I could be right
so if you like up we think the user is
lost ask navigation history and then we
can go there so the valid heuristic I
already mentioned some of the factors
before that we use make sure wherever
the user currently is make sure it's
visible make sure it's on the page other
heuristics we considered using we're
like is is the current element that were
on like is that even inside the viewing
port like if it's positioned absolute
like negative 1,000 negative 1,000 you
might not be able to see it web
developer is probably trying to hide it
from you we should think about things
like right um so that's all I heuristic
of whether or not the developer wants
you to interact with an element um all
right and so the way we have all this
play together is we chug along until
something's wrong which is the lazy way
of checking whether or not your current
position is valid so we'll go the user
will be navigating normally and they'll
keep going and then suddenly some script
or event that they trigger will
invalidate their current position this
isn't an example from before this is
when I close the google plus dialogue
I've triggered the closed event by
hitting Enter on the clothes on the
cancel button and I don't know anything
is wrong and I don't check for anything
being wrong until the user sends me a
new navigation command and when they do
I say up you know your focus was dropped
your lost and that's when you rescue and
so that's that's exactly when you revert
the user to a familiar place and so
that's pretty much where we hooked into
chrome boxes is existing at navigation
framework so it just asked navigation
history for a valid place to go and we
go there ok so let's revisit Google+
with intelligent focus recovery so we're
disable this all right so this is a new
chromebox sit still the old Starbucks
thank you audience I see what it did
our starboard list with 11 items alright
so let's refresh poison alright so
ordered list with 11 items back at the
menu up here google plus and we're gonna
jump to Larry page's post exemptions
menu Larry Page August right here 2012
so I'm here 30 06 and sharing details
always good alright cool Larry this is
still really cool but now that we have
the new chromevox let's see what happens
when we try and share the post more plus
one share this post all right we're
gonna share this post it's gonna open up
this dialog clickable edit text
clickable cool we're gonna go through
the dialogue cancel and it's a demo so
I'm not actually gonna share the post
sorry so cancel right and I expect to be
still in the stream I don't want any
over the top of dialogue share this post
button so if you listen carefully you
exit the dialog which is chromevox doing
it that's not new chromevox already
announced that but what's awesome is
that it takes you back to that button to
the share this post button and you are
still in the stream and you can navigate
normally right after this it's
seamlessly fits into the user experience
and you're not lost and i think that's
really important and i'm glad we improve
that so alright so how did we do i think
that diamond demo did it right punch tml
vos modified and lap deactivate this
okay chromevox is now inactive alright
so cool so alright does this meet our
goal so the first one is we do not
detect drop focus and at first it was
like alright that was one of the
original goals but we soon realized that
drop focus is only a symptom of being
lost being lost is more general being
lost is you know is the next note that
we're going to visit is it going to be
meaningful and a lot of times when
focused is dropped it won't be but
there's some other scenarios to that we
actually account for here it's because
we're lazy about checking so we've just
the more general problem is a user is
lost when their current position is
somehow invalidated by the developer and
when that happens navigating normally
from that position usually results in
some
behavior and so as long as we can catch
the user when they're navigating from
there we can we can solve a lot of those
problems um so thirdly we have the
correct position to rescue them to as
the familiar position I mean you can
always ask question can we do better is
there something it like you know should
it be like the next thing in the stream
like is that what they're trying to do
but I think we did come up with a pretty
good answer i think as long as user can
recognize where they are that's a lot
better than putting them miles away at
the top of the page and of course we're
always open to suggestions um second to
last the user is in the driver's seat
right after focus restoration I think we
hit that one in the head fits right into
the framework and they're in control and
finally um does not distract the
developers intentions in most cases so
there have been a couple breakages on
those sites and we're working on those
but for the most part this is huge for
user experience I think yeah a lot of
these apps that are even really
complicated ones like Google+ like this
is a working solution all right um
finally I'd like to talk about some
areas of improvement so I have
heuristics up here and yeah so I
mentioned that a lot like the fact that
you're navigating from a valid place is
a heuristic and like we measured sorry
with a heuristic and I'm sure that can
be improved there's only two real
criteria right now and we're trying to
like see what other kind of criteria
would be good for it um second a better
audio feedback so right now when focus
is dropped right we don't detect that
but we can detect when you're an invalid
place and when we do rescue we currently
have no auditory like ear con or
anything that goes to tell the user that
they've been rescued which i think is
useful information I think that's
definitely one thing that we can do cool
so that's intelligent focus management
yep
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>