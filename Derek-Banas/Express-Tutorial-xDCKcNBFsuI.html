<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Express Tutorial | Coder Coacher - Coaching Coders</title><meta content="Express Tutorial - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Derek-Banas/">Derek Banas</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Express Tutorial</b></h2><h5 class="post__date">2015-11-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/xDCKcNBFsuI" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">well hello internet and welcome to my
express nodejs video tutorial in this
one tutorial I'm going to give you a
very massive overview of the Express
node.js framework and pretty much cover
all the different things aside from how
you would interact with databases I'm
going to break this into three tutorials
I was going to make it originally one
but it just became overwhelming so I'm
going to give you an overview of Express
in this tutorial then in the next part
I'm going to cover databases and then in
the final part we're going to make a big
application now Express is the node.js
framework that's going to provide all of
the capabilities of node.js but it's
also going to allow us to easily develop
robust web applications using something
called middleware you're going to have
to have a pretty good understanding of
how bootstrap and handlebars work before
you can use this tutorial and I have
tutorials on those in the description
underneath the video so watch those
first if you have no idea what bootstrap
and handlebars are and now what I'm
going to do is show you how to install
everything both on Windows as well as on
Linux machines and Mac OS now if you're
on Windows what you're going to want to
do first is download nodejs
so you're going to go to node.js org and
just click on mature and dependable
you're going to get a little message do
you want to run this yes say run then
you're going to do a whole bunch of
clicking on next so click on next right
here click on accept the license terms
click on next
it's perfectly fine to put this in your
Program Files click on next leave
everything exactly the way it is click
on next and then click on install then
after everything is installed we're
going to go in and verify that
everything was installed properly to do
that you're going to want to open up
your command prompt and this is inside
of Windows but you're going to be doing
pretty much the same exact thing in
Macintosh so just stick around here and
do pretty much the same thing so I'm
going to show you how to do it in
Macintosh though so don't worry so very
first thing we're going to do is verify
that nodes installed so we're going to
type in node dash V and it's going to
pop up the version of node that we have
installed then we're going to do is type
in M p.m. in it like that and this is
going to create our package.json file
which is going to define the entry point
for our Express application and for the
most part here is going to be using
defaults whenever you type this in it's
going to either pop up your name or ask
you for your name just type that in and
then you're going to see all the other
different things you have to type in
after we're going to leave this V is
version 1 you're going to want to give a
little description I just type the
express tutorial that's perfectly fine
here's your entry point it's pretty
common to use the index dot JSP
I personally don't like to use it very
much because there's too many index
files inside of web applications that
sometimes becomes a little bit
complicated so I call this Xpress Jas
test command I'm going to leave his
blank
get repository I'm going to leave his
blank and so forth and so on you can see
everything that I did right there and
then you can see that it went and
created that file for us then what I did
is I opened up the directory that's
going to have there's the JSON file that
was just created for us and this is just
to show you how the directory is all set
up and you can see right here this is
the JSON file that we created and what
you're going to want to do is right
after version here you're going to want
to put a comma and you're going to want
to type in private and true and then
re-save that and that's going to keep us
from getting a whole bunch of different
errors and this is notepad plus plus if
you were wondering but you can use any
type of text editor as long as it's not
Microsoft Word or something like that
you want a generic text application then
what we're going to want to do is go in
and install Express so again in the
command problems you're going to type in
MPM install dash dash Save and then
Express and it's going to install
everything there for you once again
we're going to want to install
handlebars so we can use that in our
application so type in npm install dash
dash save Express - handlebars right
like that and that's going to install
and then here you can see exactly how
we're going to be testing everything and
you can see here in a really simple type
of Express application it's going to
allow us to text that everything was
actually installed so the very first
thing we're going to do is give our
Express is equal to require Express this
is just going to import our Express
module for us to be able to use right
here with app set port we're going to be
defining that the web application is
going to be run on port 3000 and then
inside of Express and nodejs you're
going to define things called routes
right here I'm just going to use the
default forward slash route which is
just going to be just a basic access to
the most basic of URL so it'd be
something like localhost colon 3000 for
port 3000 and what this is basically
saying is whenever you go to that in
your guru or our in your browser it's
just going to print out
message on the browser window that's
going to say Express work so we know
that that all works and then right down
here you can see that it's going to
basically tell our web application to
listen on port 3000 for any instructions
in regards to what information to push
out then console.log is just going to
print an express started press control-c
to terminate then to actually run this
application you're going to want to save
this first and I call this Xpress touch
a s you saw me point to that file
previously whenever we were setting up
the JSON file to start your server
you're going to type in node Express
touch a s and you can see right there
Express started press control C to
terminate and that's exactly what you
have here and then if you go into your
browser and type in localhost colon
3,000 Express works prints out and
Express works comes from this point
right here so that is how we go in and
install Express and nodejs and a whole
bunch of other different things inside
off windows and you can see here the
actual layout of everything so I have a
directory called Express Tut inside of
it there's no tools that was all
installed for us Express Tut that was
the file we were using and here is our
JSON file so now what I'm going to do is
jump over into Macintosh and install
pretty much exactly the same things and
then go about creating the rest of our
application exploring the world of the
Express framework okay so here is our
Express Tut directory and everything's
going to be the same on Windows and
Macintosh so what we're going to want to
do here first is we're going to want to
create a public directory and inside of
that I'm going to have images and
they're just going to be my logos that
I'm going to use here just for my sample
website I'm going to have another thing
called random file dot txt just going to
have some random text in it because I'm
going to show you how to read and write
text files we're also going to have a
views directory and inside of there
you're going to have to create two
directories called layouts and partials
just like that feel free to hit pause
and do all this stuff I'm just moving
along here so we don't waste time you're
also going to want to create a readme
file and let's just go into this
tutorial here now I'm going to go LS you
would type in dir if you're on Windows
and I'm going to go in and say that I
want to open everything in sublime text
I'm going to type in su BL like that and
now I have everything here so I have
sublime text here I have my terminal or
command line if you want
and over here I'm going to have the
actual application which is going to be
run on localhost and the port of 3000
and you can see the directory structure
that we have right here let's jump over
and look at the readme file right here
you're basically just going to describe
your project write like this and we're
going to use a markdown language that is
going to allow us to convert into HTML
and this is just a kind of overview of
exactly how that works I'm not going to
get into that too much all these files
are available in the link in the
description but right here we're just
going to simply come in and document or
explain what our projects going to do
very important to create that however so
just like I did in Windows I'm going to
come over here and I'm going to type in
MPM and knit inside of that directory
and you can see Express Tut comes in
there that's perfectly fun version 1 is
perfectly fine description I'm going to
type in Express tutorial and everything
from this point on is going to be all
typed out all the code and everything
I'm going to call this Express taught
j/s and this is going to be the main
application we're going to be working
with here test command leaving that
blanket repository leaving that blank
keywords leaving a blank author get a
bender and it's like is C for the
license is this okay yes as default just
hit enter and now it's created and here
is our package JSON file and just like I
showed you on Windows I'm going to come
in here and I'm going to say private
colon and then I'm going to type in true
and then put another calm inside of
there and then I'm going to save that
file and I'm going to close it now jump
back over inside of here in our terminal
and I'll install Express so I'm going to
go npm install - - save Express and
Express is going to be installed you can
see different things popping up over
here so there we go and everything looks
like it installed perfectly fine now I'm
going to come in and install handlebars
there we go NPM install - Save Express
and waters and that also looks like that
installed perfectly fine yes it did also
going to come over here and create
another file inside of the main Express
application so when you get a new file
right here and I'm going to say ignore
packages installed by NPM because I'm
going to set up get on this I'm going to
say node module
that's where we're going to have well
there's different packages stalled star
tilde DS store this is a Macintosh only
thing and then have something else
called credentials which we're going to
create here in a little bit dot J s and
then I'm going to save this make sure
that I save it in the main directory
Express Tut and this is just going to be
called get ignore and whenever I save
this is going to give me an error I'm
going to say use that and that's
perfectly fine if you're not using it
you don't need to use this at all but I
just wanted to also cover how to use git
so that's closed now I'm going to come
in here if I want to create a git
repository I'm just going to say get in
it like this and then I could come in
and add files if I'd like so get I also
have a git tutorial it all interests it
up and then if I want to also come in
here and commit all these changes I can
go get commit - M initial commit I'm not
going to be dwelling on getting and if
you have no interest in get don't worry
about this and there you can see
everything went inside of there
perfectly fine so now that we have all
the basics basically set up here and
we're going to jump in here and just
start creating our Express application
okay and our main application I'm going
to come in here and create a new file
and I'm going to save this file save as
and make sure we save it in the main
part of our directory and this is going
to be called Express taught j/s and then
click on save and basically what we're
going to do here is structure a series
of possible responses depending upon the
URL that is requested in the browser and
then as we travel through the pipeline
which is going to be a bunch of URLs and
then responses to those URLs typed into
the browser we're going to perform
different actions using either
middleware functions or just our own
code that will be typing inside of there
now if a response is going to be valid
we will display the correct view on the
screen and if not we're going to handle
different types of errors so right here
it's a very line number one this is
going to be our entry point for our
application so the very first thing
we're going to do just like you saw
before is import or Express module I'm
just going to call this Express equal to
require Express and I assume that you
have a background
javascript otherwise you wouldn't even
be here then we're going to define our
application Express now I'm going to go
through a whole bunch of other different
things that we didn't cover previously
I'm going to go in and type in app
disable X powered by and this is just
going to block our header from
containing information about our server
just for security reasons you don't need
to know much more about it other than
that and now I basically want to set up
handle bar so that this is going to work
for us in our application as well so I'm
going to go over here and our layouts
file right here and I'm going to say new
file and I'm going to save file save as
and I'm going to type in main handlebars
and save that and we already installed
the handlebars module so we'll be able
to use that and then I'm going to create
a whole bunch of other different things
are going to be displayed on the screen
whenever the user types in different
URLs and I'm going to do that
specifically in our views directory so
I'm going to say new file and I'm just
going to keep this quite simple I'm just
going to go save as and you can see
right there it's in the views directory
I'm going to type in home handlebars
like this and save create another one
new file file save as again make sure
it's in the views directory I'm going to
type in about handlebars and save that
create another one 404 handlebars save
that and then finally 500 dot handlebars
and save that okay so we have all those
created now let's go and throw some HTML
inside of those going to jump over into
the home dot handlebars first and I'm
just going to keep this very simple I'm
going to go div class is equal to page
header which is going to provide me a
little bit of styling inside of this and
then I'm just going to throw an h3 tag
inside of here and then inside of it I'm
going to say welcome to my Express
tutorial I'm going to copy this I'm
going to use basically the same format
for all the other ones so jump over into
about handlebars paste this inside of
here and I'll just do something simple
like about us perfectly fine save that
for a for handlebars just come inside of
here and type in 404 not found which is
going to be the page that it goes to
whenever they can't find the URL you
requested and then in the 500
10500 and server error which is going to
the be the page you go to and there's a
server error that's basically all we
need to do with those so let's just
close those out now we're back up inside
of Express J s that same file again and
here what we're going to have to do is
define that main dot handlebars is going
to be our default layout and then that
default layout is going to take the
specific information we just defined for
those URLs home about 4 a 4 and 500 and
transport them into the layout folder so
I don't we jump over and actually create
main dot handlebars instead here we want
to first do a little bit of
housecleaning so we'll go into views and
then we're going to go into partials
right here there's nothing in there
right now let's create a new file and
then we're going to paste inside of here
everything that we want to go at the
very top inside of our head section so
you're going to see right here exactly
what all these different things do here
we're going to tell Internet Explorer to
use the latest rendering engine that's
what that does we want to set the page
width on our device and we also want to
set our zoom level to 1 right here we
are installing bootstrap and let's just
do a view and word wrap so everything
fits on the screen
and then right here we're installing
jQuery once again all of this code is
available in the description underneath
the video and of course it's free so
then what we're going to do is we're
going to want to save this inside of our
partials directory right here and we're
just going to call this head dot
handlebars so we keep everything all
separated and keep our code our code
very clean and we're going to say save
then we get rid of that we don't need it
anymore likewise we're going to come in
and create another partial go new file
inside of here and then inside of this
what we're going to do is create our
bootstrap navbar which is going to be
very responsive and nice for us and you
can see right here there's not really
much to see here just basic copy and
paste everything directly inside of
there but you can see right here I am
pointing to my images directory and that
is where I have my logo if we go and
open that up you can see right here
entity logo small dot ping and like I
said I covered all this in the bootstrap
tutorial you can also see here I'm going
to have an about a contact and I'm also
going to have a place where they're
going to be able to upload files so this
guy we're going to save as BS nav bar
dot handlebars and you're going to see
here in a second whenever I am
or that so save that and then we can
close that out as well now I'm going to
be able to jump into main dot handlebars
and this is going to be like I said the
main layout that we're going to define
inside of here and this is just basic
HTML so we're going to go doctype HTML
just like always then we'll type in HTML
well actually throw all that in there
for me pretty awesome I'm also going to
come in and go language is equal to
English the title for this is going to
be Express tutorial and then I have all
those head files I had before
all this stuff that I want to go inside
of every single file so I'm going to go
in and reference that partial and how we
reference partials is to curly brackets
and then we're going to type in head
which is the name of the file the name
say head handlebars and just type in
head and all that stuff is going to be
automatically imported inside of there
actually I want to put this before the
title section there we go
nice and clean then inside of the body
section I'm also going to want to
reference the navigation bar so that
shows up inside of here partial again
and I'm just going to get like this and
then I'm going to reference whatever the
file name is which is BS now for then
after this I'm actually going to have to
put a section inside of here where the
HTML all the stuff that I defined here
this right here is automatically going
to go right inside of here if I go and
put three curly brackets and then type
in body inside of there and that's all I
need to do and keep this nice and neat
I'm also going to surround this with a
div and I'm going to give this the class
name of container which is another
little trick nice little styling tool
that's provided to us with bootstrap and
then after all of this is all set up I'm
going to come in here and throw in a
script tag and that script tag is going
to have the reference to bootstraps so
the bootstrap is going to work here as
well for us again copy and paste get all
that in the same place and that is all
we're going to have to do for our layout
file which is main dot handlebars and
it's in our main layouts directory so
let's save that and we can close it
we're done with it now once again in
express touch is our main Express
application we need to define that main
dot handlebars is our default layout and
to do that we're going to go VAR
handlebars
is equal to
and we'll go require express handlebars
which we installed very early on and
then after that we'll just say create
and define our default layout so just
type in default layout : and then main
and then put a semicolon at the end of
course and then we have to go app engine
handlebars and handlebars engine and all
that it's going to be set up for us and
then app dot set and our view engine is
also going to be handlebars so that's
going to make sure that the HTML that we
defined in our views directory is going
to be transported into the main dot
handlebars layouts now as we go on we're
going to be importing a couple other
different things but I just want to get
the server up and running to make sure
everything is installed properly so I'm
going to do something like more imports
here just a reference where I want to go
over later on and now I'm going to
define the port that our application is
going to run on so I'm going to go app
dot set port process environment port or
3,000 so this is going to run on port
3000 another thing I'm going to do is go
app use Express static and two
underscores for a directory name plus
public what this is going to allow me to
do is access this public directory that
we have ups inside of here and then
reference our images folder so that
we'll be able to import that logo into
our main navigation bar so you can see
right here say image and it
automatically jumped in there and it
grabbed that image folder the reason why
is because we put this in here and
reference to our main directory as being
public for us just going to just keep
everything a little bit shorter and
nicer and easier to work with now we
need to come in and define some routes
which is basically just going to match
up certain actions with certain URLs
that are typed into our browser so we're
going to go apt-get and basically what
apt-get gets is it's going to receive a
path as well as a function and this is
what's going to be known as defining or
route so our base directory is how will
you define this right here and then we
would define function inside of there
now the path isn't going to be case
sensitive so if this was something like
about or about they would be exactly the
same but
I'm just going to keep it that way just
remember that those are not
case-sensitive and about and about
whether any of the letters are uppercase
or lowercase or whatever doesn't really
matter inside of the function you're
going to have a request object passed
inside of here which is going to
represent an HTTP request and it's going
to contain things like query strings
parameters bodies headers and so forth
and so on then you're going to also have
a response object and this is going to
represent the response express is going
to send back whenever it receives a
request so I'm going to close that off
right there and all we want to do here
is point to our view that we created
over here which is home dot handle
Bart's sorry about the zooming there a
little bit and to point to that you're
just going to type in res render and
then home which is going to reference
the home handlebars and what this is
going to do is going to use the main
layout which is main dot handlebars and
it's going to transport inside of it all
of the HTML right here that we defined
in home dot handlebars exactly right
here where we have body you can see in a
second here exactly what that looks like
we can save that and now basically all
we have to do now is tell our
application which port to listen to so
I'm going to go app listen app get our
port that we defined above and then
define the function that we're going to
call and you saw this before this is
just going to print out in the console
or inside of the terminal something like
Express started on HTTP localhost then
we can jump out here and get our port if
we'd like app gets and then type in port
now we'll just put that in there in text
format and then we could say press
control-c to terminate put that there
and then make sure we put a semicolon
right there and file save it and then
we're going to jump over here and make
sure we're in the correct directory so
and go PWD we're in the Express
directory and you can see right here
express jas is right there and then to
run our server we just type in node
Express touch a s and you can see right
there the a message Express store
dah-dah-dah-dah and a little bit of a
here just go up to app set where it has
view engine and make sure that you put
quotes around the handlebars port right
there and if you save that you're going
to see that it automatically goes puts
all that information there on the screen
you're also going to see if we come in
here
well we click on this guy right here and
click on about this is going to pop up a
little message as the sides can't get
about and the reason why is over in the
Express we only define this route right
here so what we basically need to do is
define all of the other routes and
that's the main concept behind creating
an Express application but everything
else is basically set up and you can see
right here that it went and
automatically put in our navigation bar
and will fit in all the other different
things we have right here so now we
basically just sit here and go and
create continual different routes until
we've covered all of them and all the
capabilities we want to add alright so
now let's go in here and actually set up
about so that it works and we're
basically going to do exactly the same
thing here again so you might as well
copy this so let's throw and throw that
inside of there except we're going to
type up out inside of here instead and
about right here which once again is a
reference to about dot handlebars so it
automatically renders that now save it
we're going to have to restart our
server so ctrl C that restart the server
and then if we come over here and click
on about you're going to see about us
pops directly inside of there I'd like
to talk about a middleware now this is
basically going to be an example of
middleware and what it's going to do is
it's going to receive a request object
and a response object like before and
then as well a next function and what
this is just going to simply do is sit
in the middle and it's going to perform
a function which in this situation is
going to pop up in the console the URL
is being looked at and we're going to
use a pues here instead of apt-get we're
going to type in function it's going to
receive a request object to response
object and a next function and the next
function is going to point at this guy
to continue looking for the proper route
it's a pretty simple stuff so if we want
to say alright console.log and the job
of this is to basically log what URL
that's being looked for we're going to
say looking for URL and then we can
get the URL that they're looking for by
going request object and URL semicolon
and then finally we would type in next
so that we can continue looking for our
routes but you can also do other
different things with middleware for
example if they would look for a URL
that doesn't exist we could throw an
error so we could say app get and let's
say they're looking for the URL of junk
we could go and handle this for us and
again it's going to be much the same
we're going to go request object
response object next function close that
off and then here we'll go console.log
and we'll say tried to access the junk
URL which doesn't exist and if we want
to throw an error we'll go throw new
error and we'll say our error message is
going to be junk doesn't exist and since
we have a single quote here we're going
to want to backslash this so that we'll
be able to print that out doesn't exist
and then to catch an error that is
defined inside of here we'll go app use
function error quest object response
object and next again and here we could
print out to our log simply like error
and then print out whatever the error
message was that was sent which is going
to be junk doesn't exist error message
the rest of this tutorials going to be
very much like this I'm just going to
introduce a whole bunch of different
things explain how they work so that
you'll be able to experiment with them
so that you'll be or will have a good
understanding of them whenever we create
larger applications so let's just save
that again we're going to shut down our
server then restart our server and you
can see here if we get in and go junk
for example that's going to print out
tried to access junk and it's going to
say junk doesn't exist and it's also
going to say up here that we can't get
ahold of junk we could also throw it to
another URL so that will be able to be
handled and to do that we're going to
have to create our 404 and our 500 URLs
for our Express application and this is
going to act like middleware again
because we're not going to have a 4 or 4
means that the URL doesn't exist so
we're going to you app
use your going to see a bunch of
examples of middleware here you know
function request response and we're
going to find the content type that
we're going to be displaying on the
screen in this situation it's going to
be text HTML because we already defined
a 404 handlebars HTML that we want to
put there we could also come in and find
our status which is going to be 404 and
we can also come in and define what we
want to render which is going to be the
404 handlebars file you can see render
is all we need to do when we go in here
and also create our 500 page which is
going to be a server error again we're
going to use a pews again because it's
not going to be a specific URL we're
going to work with here however this is
going to be an error situation so we're
going to go next and we could do
something like print our error in our
console error stack we can find our
status which is going to be 500 of
course and we can also come in and say
that we want to render this is our
response I'm going to say we want to
render our $500 to handlebars file once
again and display that on the screen and
we can file save that and now in this
situation well we want to reload this so
ctrl C restart our server jump over here
and now you can see that went in here
and it hit the air jump doesn't exist
all that stuff still printed down here
however because of next right here it
jumps over about because that's not a
matching URL and you can see that it
comes down here and was a 404 error
that's how that matched up because it
was searching for a URL didn't exist and
it still printed out that so a little
bit nicer than just printing out a dead
sort of message there it actually went
to a page now what we want to do is come
in and create another view and this is
going to be for contacts so we're going
to go into views and new file and we're
going to say save as I'm going to call
this contact dot handlebars save this in
the views directory and this is
basically just going to be a form that's
going to allow them to send us
information and we can mess around with
that information you can see right here
this is the important part we're going
to have process form contact us and
you're going to I'm going to be bouncing
back and forth between this and the
other code that we have here you're
going to see exactly how
be able to process that information so
we're going to just save that for now
and come back to it in a second just
jump back over into Express CAS and more
imports up here I'm going to have to
come in here and first off what I'm
going to need to do is install body
parser which is going to allow us to
parse encoded data whenever we're using
post so I'm going to jump over here and
I'm going to shut down our server and
zoom in here so you can see this a
little bit better when you go npm
install - - save body parser and that's
going to install for us I might as well
go in here and install a couple other
things I'm also going to show you
exactly how we're going to allow the
user to upload files and to be able to
upload files we're going to use another
piece of middleware called formidable so
to install that NPM install - - save
formidable and that will install and if
anything is a little bit confusing don't
worry about it I'm going to go over this
stuff over and over and over again and
this is just an overview to sort of get
you inclined to understand exactly
what's going on I'm also going to cover
how we're going to be able to use
cookies so I'm of course I'm going to
need some cookie middleware so I'm going
to go npm install - - save and we're
going to get cookie parser and that will
install and there we go now we've got
all the different things we're going to
need here let me get rid of this right
here and then start installing those so
just to get all this to work I'm going
to go app dot use I'm going to go
require body parser and like I said
before this is going to be required
whenever we're using posts to parse
encoded data so I go URL encoded
extended true then we're going to get
formidable as well this is just going to
import this module for us to use and
just make sure you spell it right it's a
weird word another thing I want to do is
create another file called credentials
which is going to allow me to secure my
cookies and help with sessions which
we're also going to get into in a moment
so let's jump out here to our main
directory and go new file and we're
going to save this save as make sure
it's in the main directory where you
have expressed a s and I'm going to type
in credentials dot J s and save that
yeah I'll go module exports and you'll
see here in a second how we'll be
to get access to this and I just got to
give this a name and like I said before
this is going to help us with security
so we go
cookie secret and then inside of here
you're going to throw in just a random
bunch of strings something you can
remember I guess if that's important so
I'm going to go for stability and I can
do something like Luke father since
we're all thinking about Star Wars right
now and then close that off and then we
can save that that's all we need to do
jump back over into Express j/s and
reference our credentials so credentials
and require then we can reference
credentials AS app use require cookie
parser just allows us to use cookies and
then credentials and cookie secret which
is that random weird string that we had
there now that I have all that setup I
can come down here and touch on all
those different things all at one time
so first thing I want to do is create
the route for contact so contact and
just like before we're going to have our
function request object and our response
object inside of it here we're going to
render a CSRF token and these tokens are
going to be generated in both the cookie
as well as the form data and then
verified whenever the user posts
information again it's just for security
reasons and we'll have contact and here
we'll get more into this later on
whenever we create a real application
but for now we can just go see our F
token here and then also I'm going to go
and create another route and we call
this Thank You which is where we're
going to send them after they send us
different information in the form
request response and here we'll just
render or thank you handlebars file
which we also have to go in there and
create so let's jump over and create
that view so we go view new file and
we'll just throw in some information
thank you for your submission just to
keep that nice and simple file save as
make sure it has the same name make sure
it's saved in the views folder thank you
dot handlebars and click on save and
there that's all setup we can close that
as well and now we need to go in and
actually process the form so inside of
here you can see right here process and
form contact us we're going to go in and
create process to process that
information is being sent to us and to
do so we'll go app post process and then
define the function that is going to
actually process this will go response
and we're just going to print out this
information on the screen I'd like to
save it to a database or something but
that's what we'll cover in the next part
of the tutorial you can just go form and
then request quarry form and print out
all the information that we'll be able
to get from this guy so console.log we
could get to our CSRF token which we
already know what that is
go throw a colon inside of there and to
get that again request body dot CSRF so
open that up the whole way they're also
going to be sending an email inside of
there again that's going to be in
request body and this is just going to
be email because that's the name that we
have for it so if you jump over here you
can see right here there is our CR SF
and here we're going to have our email
which is defined right there and down
inside here we have a question and you
can have down inside of here is going to
be the submit button jump back over here
again and we're also going to want to
come in here and print the question that
they entered into the form and that was
qu es and then if we want to send them
to our thank-you page after we get all
that information from the form that they
sent us we could go res redirect and we
could go to 303 and thank you and if we
typed all that incorrectly we should be
able to test this out ourselves make
sure written right directory yes we are
and then we're going to come in here and
restart our server and I have a little
bit of an error over here I named my
file credentials let's come in here and
open this up let's select everything
copy that rid of that let's go and
delete it so I'll put up that uh delete
file that's gone and then let's go and
create another one again in the express
Tut new file paste that inside of their
file save as credentials dot J s save it
now credentials there is spelled exactly
the same as was there and credentials
little weird silly things that come up
and if I restart the server and go to my
contact page you're going to say uh-oh
the
Tech didn't show up why didn't it I did
this on purpose the reason why is
because it hits the 404 page before it
gets to the contact down here so we're
going to want to do is take all this
stuff and move it up above it so we're
going to copy that
because it's just like a pipeline it
goes through and it hits all the
different requests and then serves up
different functions depending upon the
request so the order is very very
important here so we're going to cut
that out of there and then right after
the About section we're going to paste
this inside of here and now if we save
it and then jump over here restart our
server again now everything's going to
work for us so let's reload contact us
pops up right there and you can see
there's a submit so I can come in here
and type in this and something like how
are you and click on submit and you're
going to see all this information pops
up down here like I said before we could
go and save this information into the
database or something like that but I'll
get into that in the next part of the
tutorial so that's how we process form
information using Express and node.js so
now I'm going to show you how to allow
them to upload files to your server and
what we're going to do again is go into
views and we're going to go new file and
I'm just going to paste this in here and
go over this basically the URL that we
are going to catch or the route we're
going to catch is going to be called
file upload and it's going to be passed
a year as well as a month so that we'll
be able to properly sort these images
and everything else here is just basic
old HTML and with some bootstrap styling
as you can see right here and the
important part right here is if we go
down here we're going to see that we're
only going to be able to accept image
files again for security reasons so that
is that guy and we're going to save that
in our views directory once again as
file upload going to be the name for it
as well as handlebars and that's going
to import that and we're going to save
it so we close that out and go into the
Express J's file again and handle those
file uploads to do so we're going to go
get again because it's going to be a
rout we're going to be dealing with and
whenever they go to file upload URL
we're going to get a function request
resource we're going to go and get a
date being the current date and we'll be
able to store these a little bit better
later on under user names and dates and
things like that and res render now
we're going to render out to the screen
this information first thing we're going
to render out to the screen is the file
upload form that I just showed you a
second ago
and we're also going to be passing in
the year as well as the month might want
to do milliseconds or something like
that and as you can see this is going to
receive it right there
so it's expecting the year in the month
to be passed inside of there so we will
pass it inside of there a year you can
also see here an example of how we can
pass in different elements to be used in
a webpage so get full year and then
month as well and to get the current
month we'll go now get month and that is
the array will pass into that and now if
we jump back over into file uploads you
can also see here that we are going to
be passing year in the month and we want
to be able to handle this new type of
URL so if we jump over here whenever
they call just file and upload we're
going to just get the year in the month
and show the form and whenever they pass
the month in the year we want to be able
to handle that differently so again
we'll go apt-get and create a new
version of file upload file upload and
in this new version we're going to be
expecting year and month to be passed
inside of it like that and if you're in
month are passed inside of it we want to
be able to handle that so we'll go
function quest response close this off
as well and inside of here we want to
parse our file that was uploaded so
we'll go of our form equal to this is
where we use formidable which is that
middle arrow that we imported earlier
incoming form you know a lot of other
different things with format a little
but in this situation I'll just stick to
uploading the image file and then you
just go parse quest and we'll go
function potential error fields file the
file is going to be the important part
here however we want to be
to handle any errors that could
potentially occur here and if there was
an error we'll just return and we'll say
that we want to redirect to an error
file that's going to be created here
three and we'll have to create that of
course so I have to create our new view
and we'll just say something went wrong
something like that file save as over in
two views will call this error gone
handlebars that'll be the thing that
shows up if there was an error jump back
over into Express otherwise if there
wasn't an error will say console and
we'll assume that we received our file
so we'll say that and then we could
store this and reference it in a
database or whatever but for now I'm
just going to print out all the file
information on the screen and then after
or in the console I'm in and then we
will redirect them again to our
thank-you page and those all closed off
and everything looks fine there and then
if we jump over here and restart our
server and click here and click on file
upload type in my name type in email
address and then select a random photo
and there is my photo and then click on
submit and you can see right here thank
you for the submission it sent me to the
thank you page and we jump over here you
can see all the information that we
obtained about the data that was passed
over the file information and of course
in the next tutorial I'll actually cover
exactly how to store these images and do
all that other different stuff whenever
we cover MongoDB and there is all the
file upload and the other file upload
route handling all in one page so that
you'll be able to come in there and make
sure that you typed in then correctly if
you get an error of any type now I'm
going to go in and talk about cookies
now for cookies I'm not actually going
to create any views here I'm actually
just going to go in and handle them so
to handle cookies I'm going to go
apt-get and if they type in cookie on
the screen for the URL I'm going to get
request and response now if they go to
this page we're just going to set a
cookie and to set a cookie you just go
res cookie and then define whatever the
key would be which is going to be
username and then
I can type in a value and you get this
information from the login and if we
want to define a date in which this
would expire to make this whatever you'd
like I'm just going to say expire and
then I'll go new date and then nine nine
nine and then send and we can just
output on the screen username as a value
of Derrick vanna's and in this way we'll
be able to both set the cookie and also
output information on the screen now
that we have the cookie set we could
also set it up so that we can show our
stored cookies in our console so we'll
go app get and if they go to the URL of
list cookies go function request
response and here we'll just keep it
simple and output the cookies in the
console it's going to output all the
cookies not just what we're setting here
and to get the cookies we go request
cookies and then we could also send some
information to the screen this is why we
don't need a view in this situation so
I'm going to look in the console for
cookies and when we also come in here
and actually cover how to delete cookies
we go apt-get again and they go to the
URL of delete cookie and go function
request and if we want to clear our
cookies we'll just go clear cookie and
then define the actual cookie we want to
get rid of which is going to be the key
that we defined which is username and
then in this situation we can pass
information to the screen that says
username cookie deleted
I'll save that jump over here restart
our server and reload you can see that
didn't do anything and we could go in
here and just type in cookie username
has the value of Derrick baÃ±os and you
could see that it was looking for that
cookie information right there if we
want to list our cookies just type in
list cookies look in the console for the
cookies you can see that the cookies all
displayed here on the screen I have
another cookie in there from previously
and then we could also go in and delete
cookie and you can see right here if we
now go back to list cookies list cookies
look in the console for cookies now you
can see that the user named cookie
is not displayed in there so that is how
we create cookies how we list cookies
and how we delete cookies now let's take
a look at sessions now we're going to be
able to store session information in a
bunch of different ways but for
development reasons right now and since
we don't have a database all set up I'm
going to store everything in our memory
store so what we're going to need to do
come over here shut down our server once
again and I'm going to need to go NPM
install Save Express session and that's
going to install that for us there we go
everything looks good what this is going
to allow us to do is store the session
ID in a cookie and the session data on
the server now like I said this works
for development but wouldn't necessarily
work in a regular server because if the
server is shut down we're going to lose
our session information which we're
shutting down our server every couple
minutes so that you can see how that
would be a problem we're going to come
in here and import that module that we
just set up there we're also going to
need to get ourselves another one of
these guys which is going to be parse
URL npm install save parse URL and this
is going to provide info on the URL of
the request object that is passed to us
so we need to get that we'll go bar
parse URL is equal to require and parse
you our own course and then app use
session we're going to define a couple
different defaults here we're going to
define re save as false and this is
basically saying we only want to save to
the session store if a change has been
made and then we'll say save
uninitialized and set that to true and
this is going to store session
information if it is new even if it
hasn't been modified and secret and
we're going to use our cookie secret
that we saved in our credentials file so
credentials make sure we save that or
have the right name there and once again
cookies secret is the name of it and we
can open that up just remember see a
cookie secret save it inside of there so
that's what we're using for security
reasons of course so cookies secret and
that's all we need to do there now I'm
going to provide you another example of
middleware so we're going to app
use and create our function inside of
here
quest resource next and what I'm going
to do here is I'm going to set it up so
that it's going to track how many times
the user has gone to a specific page so
it's just a nice easy example but it's
also going to show you how sessions can
be used to track users for example so it
will define our total number of views of
a specific page and we'll say if there
are not any views come in here to the
views section and we're going to create
an array here which is going to have the
key be the URL that they go to and then
the value is the number of times that a
total went to that URL and we'll go in
here and get the path name that they
currently are on and go parse URL that's
why we needed Porsche URL to come in and
get the path name so we know what page
they're on and then in our views array
like I said we're going to use the path
name or the URL as the key and then
we'll go into views and set it the total
number of times that they've actually
gone to that page and that's either
going to be 0 to start off and we're
going to increment it each time we go
through so each time they go to the page
we're going to increment that over and
over and over again and then of course
next because this is middleware so that
it continues down through the pipeline
if we need to do anything else and then
what we need to do remember this is
middleware that's just going to
increment every time we go to a URL if
we want to actually display that
information on the screen whenever they
go to it we need to handle that so we're
going to say if they go to view count
this is going to be the URL that we're
going to be tracking here with sessions
want to get request resource next and
here we'll just print out some
information on the screen which is going
to be the number of times that they
viewed the page and to send information
to the HTML page I'll say something like
you view this page and then get the
actual information that we store in our
session so request session and we'll
reference our views array and remember
we set view count
is going to be the key for that and then
we could go to thymes and that will be
displayed out on the screen we save that
and of course we need to come in here
and restart our server and we got a
little bit of an error and reason why is
I need to put quotes around this up here
don't know why I messed up and save it
and restart our server and then if we
come over here let's come down here view
count this is the guy that's going to
count the total number of times we go to
this page we can go view count and said
you viewed this page two times you can
see it right there reload it three times
four times five times and you can see
that it's tracking me each time I go to
that page and I can set this up that
would work for any of the other pages so
that's how sessions work in a simplified
type of manner now I'm going to jump in
here for the final thing I'm going to
show you how to both read files as well
as how to write files using Express I'm
going to come in here I'm going to need
to download and know their module which
we'll see get rid of that and that's
going to be the filesystem module so I'm
going to have to go npm install save
make sure you don't put it between them
or before they or make sure you do put
it before the 404 right here we're going
to var require FS which is the guy we
just installed there apt-get and if they
go to the read file directory we're
going to allow them to read a file
function quest response next now if we
want to read the file we have to tell it
what file to read from we just go FS
read file and then we're going to have
to reference a file I think I have it
inside here yes I do random file txt
which is inside of my public directory
and to reference that I'm just go dot
public and then the name of it random
file dot txt and then I need to actually
handle that make sure if there is an
error handle that and then data is
actually going to contain the file
information and we'll just say if there
was an error of some type return console
error and then print out whatever the
error was otherwise if there wasn't an
error that means that we receive the
data from our file so we'll say we want
to print that
information out on the screen will say
rez send something like the file it's
perfectly fun and then to get the
information out of that file we just go
data we want to convert it to a string
we just say to string and close that off
and that's how we read information and
we can come in here and go read file
right like that come in restart our
server this paste that in there and you
can see right there I went read all that
file information just a random file with
random text so that's how we read files
now we'll cover how to write files again
app get write files going to be the name
the directory that I have early url
anyway this is going to write and read a
file quest resource next and we'll go
write file FS write file and we just
give it the name it doesn't matter if
the file doesn't exist it will be
created and we'll just call this random
file - dot txt and then here what we're
going to do is actually define the text
that we want to put inside of it I'm
just going to keep it very simple and
just say more random text that's what's
going to be written to the file and I
need to handle this if there's an error
of some type and writing to that file if
error just do something simple console
error and then print out our error to
our screen and let that closed so though
we officially wrote to the file now if
we want to go in and read from the file
and print it out just to make sure that
it worked we go read file of course just
like we did before we don't have to do
anything special public ran we call this
random file - txt get rid of that right
there that would have thrown an error
and then we're going to do exactly the
same thing before error data and then
we'll say if there was an error
same exact thing we did before return
console error pass back the error that
occurred in reading from our file
otherwise we want to send out some
information on the screen that says file
once again get the data convert it to a
string and output it inside of the
browser and throw that semicolon in
there restart our server and if we go to
write file now instead of read file we
got a little bit of an air
let's go up here and change this to
right file with a capital S or a capital
F come over here restart our server jump
over here reload and now you can see the
file more random text pops up there you
go guys that is an overview of a lot of
things about Express like I mentioned
before in the next part of the tutorial
I'll cover MongoDB and then we'll create
a real Express application hope this
helped a lot and please leave your
questions and comments below otherwise
till next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>