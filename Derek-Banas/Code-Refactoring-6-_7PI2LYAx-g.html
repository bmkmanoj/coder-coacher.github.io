<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Code Refactoring 6 | Coder Coacher - Coaching Coders</title><meta content="Code Refactoring 6 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Derek-Banas/">Derek Banas</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Code Refactoring 6</b></h2><h5 class="post__date">2013-01-18</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/_7PI2LYAx-g" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">well low internet and welcome to part 6
of my code refactoring tutorial today
I'm going to show you some neat ways to
simplify conditionals as well as
completely replace them using
polymorphic techniques and as well as a
more complicated part of this tutorial
I'm going to show you how to replace
conditional statements using the
strategies design pattern and if you do
not know what the strategy design
pattern is or you'd like to learn more
there's a link to my strategy design
pattern tutorial above so I have a bunch
of things get into so let's get into it
okay and last tutorial I actually
accepted a challenge that was sent to me
and since then I've received over 60
challenges and one of them actually
applied to what I wanted to talk to you
today so I'm going to jump into it and
actually go through this and explain it
to you basically what this whole
tutorial is about is the nightmare that
is conditional statements and this is
code here that's going to calculate bag
fees based off of a number of bags that
are submitted and here are three bags
one of them is 25 pounds one of them is
55 pounds on one of them 75 pounds based
off of that we have to go through this
gobbledygook of conditional statements
to try to figure out bag fees I'm going
to show you how to make it much more
readable by using methods I'll just
trust me here what is going on here I
actually simplified it from what they
actually sent me but what this
conditional statement in essence is
doing is this and then I will go through
and explain how to create methods to
solve those problems if a bag weight is
less than 50 pounds this is what this
conditional statement says just stick
with me you'll get it and there is one
bag charge 25 dollars otherwise I'm just
writing this out in plain old regular
English and very often this is a good
way to figure out how to simplify
conditional statements if bag weight is
under 50 pounds and there is a second
bag I want to charge $35 so if there's
one bag I'm going to charge $25 for that
bag and if there is a second bag it's
going to be charged 35 the first one's
still going to be 25 ok so that's one
thing that's going on here you're going
to be amazed how I'm going to be able to
shorten this code down make it more
readable and on top of that it's
actually going to be shorter than this
one thing that I'm right in here if the
bag is over 70 pounds no matter if it's
bag one two or three or four or five or
six I'm going to charge $200 and then if
bag is between 50 to 70 pounds charge
100 if first bag and 150 for each
additional bag okay so that is what the
additional in essence is doing here so
what I'm going to do is I'm going to
turn this into a bunch of methods so
let's start off with the first one
that's quite simple I'm gonna go back
over 70 pounds I'm actually going to
write out exactly what this is going to
do what am I going to do I'm going to
return $100 as a bag fee so totally make
sense then what am I going to do I'm
going to go and static int bag under 50
pounds int I have to figure out if this
is going to be bag 1 or bag 2 in that
situation so I'm going to accept bag
number which bag number is it and then
I'm either going to return or the bag
fee further in this situation bag number
if it's less than 1 because this is an
array that is being used here so 0 is
actually going to be the first bag and 1
is going to be the second bag which I'm
sure you guys know and I'm going to
handle that situation and then what do I
need to handle I need to handle if the
bags between 50 to 70 pounds I'm
actually going to copy this just change
it a little bit if bag 50 to 70 pounds
I'm going to do something different and
if this is going to be bag number 3
basically I'm checking if it's bag 1 or
2 so here I'm going to put in a 2 which
is going to represent bag 3 I'm going to
charge 100 or $150 ok so I simplified
this into the series of methods it might
help if you actually had the code in
front of you you can look at that I just
think this is a great example of
explaining how to simplify conditional
statements by just thinking through it
ok so now we got that all handled and we
can come in here and get rid of all this
stuff that I typed and I'm going to be
able to greatly simplify this absolute
disastrous mess let's execute it here
just to say ok bag fees 320
five just to make sure that I'm
calculating everything the right way
well I need to set and I'm going to put
in some lines here so you know that this
is a new part of the code I'm going to
need to set bag fees back to zero and
then I'm also going to do the for loop
which is going to be exactly the same
for loop there's nothing wrong with the
for loop so let's just copy that and
paste it down inside of here it's just
going to cycle through all the different
bags that are used and now I'm going to
be able to say if bag weight and I'm
actually going to change I this is
another situation instead of it being
I'm going to change it to the bag
because that's going to help me write
code that sounds like actual words like
actual sentences because remember that
is a goal and here I'm going to change
that
so if bag weight and you could in
essence say for the bag is less than 50
bag fees are going to be equal to bag
under 50 pounds and pass in the bag
which is going to represent the bag
number else and here I'm going to say if
bag weight for the bag is less than 70
pounds I'm going to do something
different bag fees plus equal to bag 50
to 70 pounds the bag pass that over and
then I'm going to say else now that I
think about it I don't even need this
guy up here
so I created remember bag over 70 pounds
I don't even need that because I know if
I get the whole way down into this part
that the bag fees or the bag is
definitely gonna be over 70 pounds which
we charge $200 every single time so
there you go I got rid of that so I
actually I'm creating this out of my
head if you're wondering okay so there
you go and now let's see if I did it the
right way it's actually wrote code
better than I thought so I turned that
nasty conditional into this and it's
readable which is considerably better
okay so go outside of my for loop and
let's see if I did it right execute and
there you can see a bag fees is equal to
325 and there 325 so pretty cool now
often whenever you use if and else
statements you're basically saying that
every option is just as likely to occur
as all the other ones however proper
coding actually says that you should not
use if and else
statements if things are not actually
just as likely to occur
what you should instead use is what is
called a guard clause which in essence
is just an if statement get rid of the
else's and in this situation where it
would actually be gets entered odd for a
passenger to board the plane with a bag
that weighs over 70 pounds this is a
perfect situation where we can use a
guard clause and at the same time also
make our code much more understandable
so what we're going to do here is I'm
going to come in I'm going to set bag
fees back to zero and I'm gonna get this
for statement again and I'm going to
show you exactly what a guard Clause is
and how cool it is so let's just cut
through here and bag fees are set back
to zero and we're still gonna be using
this guy because we still need to cycle
through all of our bags the only
difference is now we're going to say if
bag wait for the bag is less than 50 bag
fees I'm going to calculate my bag fees
bag under 50 pounds and I'm going to
pass over the bag which is going to be
the bag number and then I'm going to end
that one right there so there's an if
statement and this is how it's going to
be different I'm in essence just getting
rid of the else statements then I'm
going to do it by going if bag wait for
the bag is less than 70 and bag wait for
the bag is greater than or equal to 50
in this situation I'm going to calculate
my bag fees in a slightly different way
paste that there and then I'm going to
go bag is 50 to 70 pounds and then just
pass in the bag number and then finally
I'm going to say if bag wait for the bag
is greater than 70 and then I'm going to
calculate bag fees again 200 and there
you go so it's much more readable and
also at the same time we're implying
that the chances of this occurring that
the bag is going to be under 50 pounds
is much more likely than the bag is
going to be over 50 pounds up to 70 and
even more likely than the bag is going
to be over 70 and on top of that the
code is much more read
and just to check again to make sure
that I calculated this all right ace
that there file save and execute it and
you can see each one of those is perfect
so the codes more readable considerably
more readable and it still works so
that's awesome and now I'm going to jump
into how to replace conditionals using
polymorphic techniques and the reason
why is very often conditional statements
choose different behavior depending on
the type of object that they are working
with well that tells you immediately
whenever you know that you're going to
be performing different things depending
upon different objects that polymorphism
should play a part in this so what I'm
going to do is actually show you what
this is going to look like without
polymorphism and what it could look like
with polymorphism
let's say we have a string doggie and we
also have another string which is going
to be kitty and let's just say that
that's cat and then depending upon what
is in those strings we're going to call
for different sounds to be called
and we're going to make a method called
make sound and let's say that I'm going
to pass over doggie and then it's going
to figure that all out now what I need
to do is come down here and actually
create make sound and if you get an
error here in this situation the reason
why is I'm using Java 1.7 which allows
you to use strings inside of switch
statements so that's the reason why
you're getting the air so here I'm just
going to go animal which is going to be
passed into this switch statement and
I'm going to go case this contains the
string dog
I'm going to go system.out.print line
and put wolf on the screen otherwise and
we could also put a break statement
inside of there otherwise if they would
type in cat I'm going to have something
else occur which is going to be me out
cash or you see the point there
otherwise I'm going to go to default and
throw new runtime exception say
something like I don't know that animal
okay and if we execute this you're going
to see exactly what it does say it
prints out wolf and the reason why is I
passed in dog and it checked the dog was
in the string and so forth and so on
well if I want to make this more dynamic
that's where I'm going to have to come
in here and actually create classes
because if I created any additional
animal types and then went in there
tried to pass them over it's going to
trigger what the default error and it's
going to say we don't understand what
that is and blah blah blah so my goal
here is to eliminate this switch
statement altogether it's actually
extremely easy what I'm going to do is
I'm going to create instead a class
animal and I'm going to say private
string sound is equal to and just give
it a nothing value and then I'm going to
go public string get sound return the
sound and then I'm going to actually use
my time saver here getters and setters
and then change this to set sound and
then hit OK
and now that's inside of there and then
I'm going to go animal and it's going to
receive a sound that that animal makes
whenever this guy's created and let's
just call super then we'll say this
sound is equal to whatever the sound was
that was passed into it and now that I
have that all set up I'm going to be
able to come in here and create separate
classes for dogs as well as cats
extremely easily dog extends animal then
I'm going to create the constructor for
this guy string and it receives sound
and then I'm just going to pass over the
sound into the super constructor and
save it and now I'm going to come in
here and do the exactly the same thing
for cat and then just save that to cat
and now by creating these subclasses of
type animal you're going to see how easy
it is for me to replace this switch
statement so I'm actually going to
bounce outside of this and let's say I
want to create an animal Rex I'm gonna
have to do dynamically just go new dog
and type in what sound that is that that
dog does no matter what that sound is
and let's say I want to create a new cat
you do the same thing but I can create
an unlimited number of cats and dogs and
then whenever I decide that I want to
print out this very specific sound for
pretty much any type of animal I just
need to come in here and call get sound
slap that on there file save execute and
you can see there that is with the
switch statement and there that is using
polymorphism so that is another way to
eliminate conditional statements using
polymorphic techniques because this one
ran so long in the next part of the
tutorial I'm going to show you how to
use the strategy design pattern to
replace conditionals all together and
add a ton
dynamic capabilities at runtime feel
free to leave any questions or comments
below of the last till next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>