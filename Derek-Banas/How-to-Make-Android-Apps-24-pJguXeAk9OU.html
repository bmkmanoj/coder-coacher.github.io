<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>How to Make Android Apps 24 | Coder Coacher - Coaching Coders</title><meta content="How to Make Android Apps 24 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Derek-Banas/">Derek Banas</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>How to Make Android Apps 24</b></h2><h5 class="post__date">2015-01-25</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/pJguXeAk9OU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">well hello internet and welcome to part
24 of my tutorial on how to make Android
apps in this tutorial basically gonna
answer a lot of questions that I
received after part 23 so to a certain
extent we're just adding additional
features to part 23 so if you haven't
watched that watch that first this time
I'm going to show you how to go and get
latitude and longitude based off of an
address and then we could do a
Foursquare type of thing where we could
put our own markers all over our maps
and then you could even if you had a
database connected put information about
those different locations and I'm also
gonna show you how to get directions so
let's jump over and look at what the
finished app is gonna look like okay so
you can see the new improved application
right here I have the Google map on the
top and I'm also gonna have different
places where we're going to be able to
add markers so I add in an address and
just clicked on marker and you can see
there is the marker right there and I
can click on it and the little title is
going to show up and I also add in
another editable text window well we'll
be able to add another address click on
directions Google Maps will
automatically open and with we click
decide which way we want to get
directions from we can just click on
that and get the directions so there's
all the additional things now let's go
and write the code okay so you saw the
finished application and this is the
previous tutorial what we have right
here and I just need to go into activity
main.xml and I designed things a little
bit different this time up here you're
gonna have your Google map and then down
here you're going to have where you want
to either have your starting address for
directions or where to put a new marker
click this make a new marker and this is
the destination address and this will
get directions so basically if we come
down here and click on the text tab
you're gonna see the fragment right here
you're gonna see I defined the height as
400 DP so it's only taking a part of the
screen this time and yes it's that easy
to do and then what I need to do is just
make the buttons work so I'm gonna come
down here and this is going to be for
the marker button that you just saw a
second ago and I'm just gonna go on
click and I'm gonna say that I want to
call a method called show address marker
so yes if there's anything you want
covered leave them in the comments and I
will do my
to do that so we're going to come in
here and automatically generate this
method for ourselves there we go now
it's over inside of mainactivity.java
then I'm gonna come down here and make
this button work as well again we're
just gonna put another on click event
inside of here and then this time I'll
just call this get directions and there
we go and then we can have that method
also created so that is all we're gonna
need to do to change the activity main
and of course all the code is available
in a link in the description underneath
the video now what are we gonna have to
do inside of mainactivity.java
well right here you see the google map
that i covered previously and i have
some of that code here just so i didn't
need to go over that again but we're
gonna be adding a lot of additional code
as well
I'm also going to want to initialize my
editable text boxes so that I'll be able
to get the starting address and the
ending address and that's just address
edit text and then the other one is
called final address edit text and I'll
have to initialize those down and on
create I'm also going to want to store
latitude and longitude information and
that is stored in the lat/long
data type and I'm gonna have address
position and then final address position
then I'm also going to have markers
let's just go address marker right like
that okay so now we need to go down
inside of on create and start
initializing these guys going to come in
here right before we go and create our
Google map and set all of our settings
for it and we'll go address edit text
and initialize this of course in the
same way that we always do fine view by
ID or dot Aidid our address edit text
and then of course we're going to do
this for the final address out of text
as well paste that in there and paste
this in there okay so we have those
initialized now down here again we are
going to be setting up the Google map
just as you can see right here and then
we're going to be setting the map type
as well as allowing for them to zoom in
on the current location for the user
show traffic show indoor maps if
available show 3d buildings if possible
and also show our zoom controls which we
covered in the previous tutorial and
that's all we're going to need to do
there now we'll go down into the show
a dress marker and there's gonna allow
us to very easily add numerous different
markers first thing I'm gonna do is I'm
going to create a string that is going
to hold my new address and I'm going to
just go out there and get that from our
editable text box get text and then to
string that I can do something I'm doing
this out of my head so let's say that I
want to also come in here and check that
it doesn't have any null value and if it
doesn't what I'm gonna do is call for an
asynchronous task to actually place my
marker and I'm gonna call that place a
marker when I create that in a second
let's go place a marker like that I'm
actually gonna have to asynchronous
tasks I think just to show that you can
do that new address and there we go
that's all we're gonna need to do for
that of course I'm gonna have to create
this guy I'm gonna create it right now
no let's go after get directions and
create that class so we can go class
place a marker and this is going to
extend async tasks and it's going to be
passed a string so I'm just gonna go
string and you can pass in numerous
parameters in this situation and create
that and of course it's going to say
that I need to implement some methods
and I'm gonna allow it to do that so
implement methods - in background which
is going to allow me to go and do all
kinds of things in the background
without messing up the user interface
now what I need to do is go in and get
the address that was passed in so that's
gonna be a store address they'll call
that and to get it you call parameters
which is this guy right here and if you
want the first thing you just put 0
inside of there and what's going on
there is right here where I passed in
new address well that's where new
address is and if you pass in multiple
parameters it's actually going to get
the second one by just changing that to
1 and the third one with 2 but we're
just gonna stick with 0 right now now I
also need to come in here and replace
all of my spaces with % and 2 O so and
we're creating a URL right here start
address because what I want to do is get
our latitude and longitude information
and I need to create a URL to be able to
do that so we could just do a replace
all right like this and then put a space
inside of there and then say we want to
put the % to 0 inside of there instead
now I'm going to call another method I'm
going to
here in a second and it's gonna get my
latitude and longitude information and
what I want to do here is I want it to
also just because what I'm doing I'm
doing two things in this app I'm setting
markers in one situation and in the
other situation I'm getting directions
well for the directions I'm gonna need
to get latitude and longitude twice for
the starting place and the ending place
and whenever I don't need that I'm just
going to just pass in one address and
it's going to set a marker so I'm gonna
do is I'm going to say false in this
situation I'm not going to be getting
directions and I'll create that in a
second and that's all I'm gonna do for
that right now why don't we just go and
create get Latin lawn right now and
we'll do it down here outside of our
class so let's say we want this to be
protected and void get Latin long and
it's going to be passed in the address
that we want to get the latitude and
longitude for and then a boolean value
for whether we are setting a destination
or not which means directions or if
we're just setting a marker now what I
need to do here is to find the URI that
I'm gonna be able to use to get my
latitude and longitude for our address
just call that URI and to get that we
can just call Google Maps up and tell it
we want it and to get latitude longitude
you just go maps.google.com forward
slash Maps API forward slash geo code
and we want JSON data in this situation
I'll also show you how to parse the JSON
data for this and that's all we'll do
right there put a plus at the end of it
and then here what we're gonna do is
pass in the address that was passed over
to this and then at the very end of it
we're going to put a nan signed and
sensor equal to false now whenever we do
that you're going to see the address
right here this is just an example of
what I passed over and what we're gonna
want to do is come in here to the
location part for latitude and longitude
and go in and this is JSON data and grab
those two numbers right there so I'm
gonna show you exactly how to do that
right now this can be used to get JSON
data in general what we're gonna do here
is use the get method to retrieve our
data let's just call this HTTP gets new
yet and then pass in the URI that we
want to use and we just define there
then we're going to create an HTP client
let's just call this client and this is
gonna act as the client which is gonna
execute the HTTP request that we want to
issue and you just call default HTTP
client and that's all you need to do
we're also going to want to receive a
response this just receives a response
from the HTTP request and then I'm gonna
create a string builder this is just
gonna hold all the data that's going to
be received and string builder and then
because we're doing something a little
funky here working with the internet
want to surround everything with a try
block I'm gonna get our response how
we're gonna get that is call client and
then execute and then pass in HTTP GET
and it's gonna give me a little error
it's gonna tell me what catch Clause to
add just throw that in there I can also
come in and receive the entity
information sent with the HTTP message
and say I told you it's hard for me to
say and today you do this in the same
exact way pretty much every time so no
need to go in here and try to memorize
all this stuff just simple then we're
gonna create an input stream that's
gonna hold all of these sent bytes of
data just create an input stream let's
just call it stream and to get that
we're just go entity get content and
then close that off and then we'll
create a while loop and it's gonna
continue reading data as long as data is
available for us to read and let's just
go bite data is equal to call the stream
call read and then say while it's not
equal to negative 1 and I'm gonna have
to come in here create an integer data
there we go now what I can do is just
append all of this information to my
string builder that it's reading in and
we're gonna convert this to characters
or byte data and then after we get
through our catch blocks here we could
create two doubles one's gonna be the
latitude that we want to hold and the
other ones going to be the longitude
that we want to get for that address and
then to get them we're gonna have to
create a JSON object I showed you what
this JSON data looks like in the browser
just a second ago and again we're gonna
use a try block here protect from any
errors you know into
create our JSON object you saw an object
pass in our string builder that has all
of the data that we read we read
everything to string once again it's
gonna add our catch Colossus for us so
we don't have to think too much about
that and then we just need to go in and
get our latitude and longitude data so
we'll go equal to and then this is gonna
be converted to JSON array we go JSON
object get now what do we want to get
let's go look at the browser okay so
here is the browser and if we come in
here very first thing we want to get is
the results the very first tag that
we're searching for and then these are
going to be broken into different
components we're gonna have address
components right there and then all of
this information don't care about any of
that we want latitude and longitude
information there's formatted address I
also have tutorials on JSON if you want
to learn more about it and then you're
gonna see geometry well geometry
actually is gonna have our latitude and
longitude information inside of it and
then we want to cycle down into location
down inside that and then specifically
we want longitude we want the value that
is associated with the LNG key so just
like we had written there before it's
gonna be results is gonna be the first
thing we're gonna cycle through this guy
and then we'll go get JSON object zero
come down here get additional
information and then we'll go get JSON
object and then pass in the next thing
that we want to get which is going to be
the word geometry just like you saw a
second ago and then we'll go get again
JSON object and then the next thing what
we want to get from that is the word
location so that's how we cycle through
that and then we can go get double and
then pass in the key that we want to get
so we're doing the same thing over and
over again now we need to do the same
thing for latitude to be able to read
the latitude information from that JSON
data just type in lat
everything else is gonna be exactly the
same for this guy except at the very end
we're gonna type in lat there we go
that's how easy it is to go and get the
JSON latitude and longitude information
now remember we're gonna be getting
latitude and longitude in different ways
depending on if we're just setting a
marker or if we're getting directions so
in this situation I'm also gonna come
down here and I'm gonna say set
destination if set destination this
way up here stay set this donation
whenever that was called if that was
true we want to set our final address
physician equal to a new lat long and
then pass in our latitude and longitude
data that we just grabbed and final
address position it's stored way up here
where is it right here
see we're storing those inside of the
mainactivity so now we got to do the
same thing for address position copy
that if we want and we can say else
we're not getting destination
information address position is going to
be equal to the new values for latitude
and longitude and then we'll be able to
get those from anywhere but actually I
probably want to go in here and not have
any of this done unless we were able to
actually get the latitude and longitude
information so let's put it inside of
the try-catch block and that is all
we're gonna need to do for getting
latitude and longitude information now
let's jump back up here to get
directions and handle what we're gonna
do if they ask for directions
now we're gonna create a string inside
of here that is going to hold my
starting address so starting address is
equal to and that's going to be the
value that they entered into the address
editable text box and get text and then
to string just like always and then
we're also going to need to get a final
address as well so final address and
that's just gonna be final address
editable text right there get rid of
that we come in and verify that they're
not empty by going starting address we
are equals and then put just nothing
inside of there and then we could put
for statement and then do the same thing
for final address equals and then put
nothing inside of there again and if
they don't enter anything we could make
a toast pop-up that tells them to enter
something so this say something like
enter a starting and ending address and
toast and then link short and then show
of course there we go else if we have
something work within this situation
both the starting and ending address
we're gonna need to call an asynchronous
tasks that we're gonna call get
directions so we'll go new
don't create this in a second get
directions and then to call that again
we're just gonna use execute and then in
this situation we're going to pass in
our starting address and remember we can
pass in multiple different things
because they're all set up in the
parameters string array that we have
inside of our synchronous tasks and well
I'm thinking about it inside of our
placing marker hopefully this doesn't
confuse anybody but inside of this I
also want to go and place the marker
just as I'm thinking about it like I
said I'm doing this almost completely
out of my head here so this guy right
here again I'm in the asynchronous task
place a marker side of this I'm going to
generate onpostexecute override methods
one post execute there it is and I'll
place my marker here while I'm thinking
about it to place a marker I'm just
gonna go address marker is equal to
Google map and then to add a marker I'm
zoom out there let's go add marker and
then go new marker options right like
this and then the marker options are
going to be position and then I'm gonna
pass in the address position for our
marker that I want to show up and then
in this situation let's say I just want
to keep this very simple and just add a
title did this in the last tutorial
it just says address like I said there's
this is how you would do something like
Foursquare where you put in a whole
bunch of different addresses and things
all over the place okay so we got that
out of the way now let's go back into
here and created the class for get
directions now that we have placing
marker all set up let's go and put it
right here and let's go class get
directions extends async task and once
again we're gonna be passing strings
which are going to be the starting
address and the ending address so that
we go and give me an error says I need
to implement some methods no problem
click on that implement methods the one
method I want is doing background so
let's go and have that generated and in
this time I'm gonna be getting two
addresses because I need the starting
address and the ending address so let's
go to start address and to get that
since I'm going to be passed two
different addresses I want the first one
so just put 0 inside of there and while
we're thinking about it might as well go
starting address is equal to start
address and replace all of our spaces
that we have space with our % and 20 so
that we can properly
create our URL and we're also going to
get a new one and this is going to be
the ending address and to get that we
get the second one which is perimeter
one there we go another thing I want to
do is get the latitude and longitude and
long for this address and remember
that's just going to be stored to top
the class way up here again see inside
of the main activity let's come back
down here and see if I lost myself
caught a little bug here get rid of that
get rid of that there we go and then in
this situation not getting directions
let's just get false for that and for
this one I'm gonna say that I am getting
directions so we just have our ending
address is equal to or ending address
and then we're going to replace the
spaces again there we go and then we'll
get our latitude and longitude by
passing in our ending address and then
true so that little boolean thing I came
up with that's just when I pass in true
that is going to set the ending address
and whenever I pass in false is going to
set the starting address all right and
that's all we need to do there then
we're going to have to define exactly
what we're going to do whenever this
executes and I have latitude and
longitude and I want to fire up the
Google Maps to get my directions well
I'm gonna have to come in here again go
to generate and override muffets and I'm
gonna have to go on on post execute
again it's gonna allow me to change
what's on our screen so right after this
guy first thing what I need to do is
create this string that is going to be
sent to Google Maps to get our
directions so let's just call this Geo
URI string is equal to HT u P : and then
we're gonna pass it in maps.google.com
forward slash Maps question mark and
then the latitude and longitude for our
address that's gonna be addr is equal to
now let's go and put this on the next
line so you can see everything in one
place then I'm gonna get my address
position for my starting position and to
do that I just go latitude and then
after that I have to put a comma make
sure you don't put any straight spaces
in here it'll break if you do and get my
longitude information there's longitude
Plus and this time we're gonna put it in
a insan and the destination addr is
equal to and then we need to put our
final address position okay
and then once again get the latitude
plus put a comma with the plus final
address position there it is get our
longitude data and there we go that is
the URL that we're gonna use to pass
over to Google Maps if we want to then
open up Google Maps just call this map
call is equal to new intent and intent
and we're gonna use action view it's
gonna automatically based off the URL
that is being sent is going to say hey
this is for Google Maps and open up
Google Maps I'm gonna pass in your I
parse and NGO URI string there it is
close that off of the bracket get rid of
this right there and then just start our
activity just as easy same start
activity and then passing in for mapped
open and that is it guys that is all
you're going to need to do to make that
application work there's a whole bunch
of different things we covered here
reading base on data I getting latitude
and longitude open up Google Maps and a
whole bunch of others thanks like always
please leave your questions and comments
below otherwise till next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>