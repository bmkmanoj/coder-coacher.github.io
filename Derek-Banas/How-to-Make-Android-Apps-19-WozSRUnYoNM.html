<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>How to Make Android Apps 19 | Coder Coacher - Coaching Coders</title><meta content="How to Make Android Apps 19 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Derek-Banas/">Derek Banas</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>How to Make Android Apps 19</b></h2><h5 class="post__date">2014-12-24</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/WozSRUnYoNM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">well hello internet and welcome to part
19 of my tutorial series on how to make
Android apps today we're gonna focus in
on notifications alarm manager and we're
gonna do a little bit more with
broadcasts because I've confused a
couple people from part 18 a little bit
so I hopefully can clear that up of
course all the codes available
underneath the video in the description
and I'm a lot to do so let's get into it
okay so here we are inside of Android
studio and here is our application like
very often it is very simple but I just
want to keep everything simple so you
can easily copy and paste the code until
you can memorize exactly how this stuff
works basically we're gonna use these
two buttons right here show notification
and stop notification to pop-up
notifications in the taskbar and to do
so we're going to use something called a
notification manager that's going to
allow us to notify the users that
something happened in the background we
are then with this button going to use
the alarm manager which is gonna allow
us to schedule for applications to do
something at a later date even if it is
in the background or if the application
altogether is shut off so basically I
went ahead and just threw those buttons
in there so you didn't have to watch me
do that I know you guys know how to do
that stuff already and now I basically
just have to come in here and tell it
exactly what I want to happen whenever
these buttons are clicked on and we're
gonna need to have the first one open up
a method called show notification and we
can just come in here and create that
create show notification over there you
sit back over into activity main.xml and
whenever this guy is gonna be clicked on
on clicked we are going to have it open
up stop
notification right like that and then we
can come over and have that created over
in activity main or main activity and
then finally with this guy whenever this
is clicked on we're going to have on
alarm fire and then you will be able to
see how the alarm manager works or
actually let's call this set alarm that
makes a little bit more sense there you
go and that's all we're gonna do with
activity main.xml of course this is
going to be in our layout folder right
here there you go and we're gonna create
another one so that whenever the
notifications clicked on it's going to
pop up an activity and show more about
the notification itself and now let's
jump over into main active
and sir Creighton is stuff oh here we
are we have mainactivity created we have
on create here and the first thing I'm
going to do is come in here and define
our buttons that we're gonna be using
and I'm gonna call this show
notification button stop notification
button and then alert button what that
is defined now we're gonna create our
notification manager like I said for
it's gonna allow us to notify the users
that something happened in the
background no matter what application is
currently opened up so it's very useful
let's just call that notification
manager to keep it simple another thing
we're going to do is because we're going
to try to stop notifications we want to
make sure that we track if a
notification is in the taskbar or not
and we're gonna do that by creating a
boolean and I'm gonna call it is nota
thick notification just keep that short
active and it's gonna start off as false
because of course it's not going to be
active in the beginning and I also want
to be able to track my notification so
notification ID and let's just give it
an hour idea of 33 doesn't matter all
right sit down inside of on create now
create some more things first off we're
going to want to come in here and
initialize our buttons get that guy is
equal to and there we go
fine view by ID or dot ID dot and show
notification button do exactly the same
thing for the stop notification button
and the alert button a ride so we have
those initialized so now we need to go
in here and actually define what happens
whenever those buttons are clicked on
might as well just do show notification
here because it is already set up here
for us first thing I'm gonna do is I'm
gonna build the notification that I'm
gonna create and you do that by going
notification compat builder and I'm just
gonna call this notification builder is
equal to new and then I'm going to
define everything all at the same time
notification compat and then builder
this and then I'm gonna be able to come
in here and define the title for the
notification and this is what's going to
be displayed for our notification itself
so let's just have it be message and if
you want to jump to the end of the video
you can see what this looks like when
it's all done and then come back and
then we're going to
find the text that is going to further
elaborate on that so we'll just say a
new message and then after that we can
have what's called the ticker and the
ticker there it is is going to be what
shows up in our taskbar to top the
screen so alert new message also think
of that as the alert and then we're also
going to come in here and define that we
want an icon to show up inside of here
and I already went to created that as
well it's a 24 by 24 logo that I created
and there it is if we want to just look
and see where that folder is this isn't
drawable folder and you can see right
there there's our logo that we're using
and if we want to open it that's what it
looks like when it's all blurry and big
24 by 24 pixels okay so that does a lot
of the work of defining what the
notification looks like now we need to
define that we have the intention of
opening more info notification which is
a another class we're gonna define here
in a moment this guy we want to open
that activity when the notification is
clicked on and to do that we have to
create an intent so I'm gonna call this
more info intent is equal to new intense
you guys should be really good with
intents now if you've been following
along because we use them all the time
and I just need to tell it exactly what
class we want to open up or activity or
whatever and there it is next we're
going to define the task stack builder
and what this is used for is so when the
user clicks on back on their Android
device that it goes to the proper place
and doesn't just kick out and look
sloppy so task stack builder let's just
call this T stack builder is equal to
tusk stock builder create and then just
put this inside of there alright so now
that we have that defined we can add all
of the parents of this current activity
to our stack and then whenever they
click back like I said before they're
going to automatically be able to bounce
back and forth between all the different
activities and everything that you have
defined inside of this one application
I'm gonna get a more info notification
dot class there that is then we want to
also add our new intent to the stack and
just stacked builder thought add next
intent and more info intent is also
going to go on there now what we want to
do is come in and define an intent and
an action to perform with that intent by
another application and what we're gonna
do here is go pending intent let's just
call this pending intent is equal to T
stock builder dot get pending intent and
then you pass zero inside of there and
then we're gonna go pending intent dot
flag update current and what that means
is if this intent exists what we want to
do is update it but not create a new one
there we go and now finally we're gonna
define the intent to fire when the
notification is actually clicked on like
I said before if you want to see what
this looks like go to the end of the
video and look and see what the
application looks like it'll make more
sense it's just basically in the taskbar
the intent pops up it's like a little
message that goes away and if they drag
the taskbar open and click on it right
here we're gonna define exactly the
intent to fire whenever that
notification is clicked on like this and
now we will put our pending intent
inside of here that's what all the
pending intent is basically it's going
to give us more information or sent us
through the activity that's specific to
the notification whenever that's clicked
on that's the pending intent now we need
to get the notification manager which is
going to be used to notify of our
background events so notification
manager is equal to and notification
manager and we'll go get system service
and pass into their context notification
service there we go
and then we want to post our
notification so we're basically just
building everything here altogether
we're going to say exactly what the
intent looks like what happens when they
click on the intent and all these other
different things and we just have to
have the notification manager basically
do it and call the builder and then
build and then we're also going to use
this is notification active and it's
that basically is gonna check that it is
in the notification window on our
application and since we know it's
active cause we went and to find
everything that's going to be inside of
it and we said what's going to happen
when the notifications clicked on and
all those other different things well
then we know at this
time after we go through this entire
function that yes indeed it is going to
be active so now what we have to think
about is what are we going to do when it
is not any longer active and here we're
just going to check
verify that it is not active and if it
comes inside here we know that it indeed
is not active or is active I mean and in
that situation if we want to close a
notification we just call the
notification manager and we say cancel
and we pass in the specific ID so that
it cancels the correct notification okay
so now that we have the notifications
all set up and we have a way to click
and close them what we need to worry
about now is coming in here and creating
more info notification which is going to
be the object that is going to create an
activity that's going to show on the
screen whenever they click on it so to
do that very first thing I'm going to do
is come in here and I'm just gonna get
myself a text view so text view just
drag it in here on our screen and drop
it doesn't matter it's just going to put
some information there on our screen in
the text area here I could just come in
and say something like info on the
notification this is just filler just so
you can see exactly what it looks like
and so it shows up a little bit better
on the screen let's come in here and do
text size and set this to like 16 SP and
there you can see it's just this little
thing this has that little message there
it's not that fancy or anything but I
like I said my videos I want this stuff
to remain very easy to understand that
is the ultimate goal so you guys can
copy and paste until you remember
everything alright so now that we have
that all set up and of course more info
notification that's also in the layout
folder right like that we don't need do
anything more with it so let's just
close it get that off our screen now
let's go into more info notification
right here and this is just a basic
activity just like before the only thing
we need to do is make sure that we come
in here and open up the right layout
file so set content view like this and
we're gonna go our layout dot more info
notification there it is that's all we
need to do for that guy so that's gonna
open up on the screen when the
notifications clicked on so we can get
rid of that and while we're thinking of
it let's just go into the Android
manifest area and since we're going to
be using the
or manager we're gonna be setting that
up here in a second I need to get
permission to be able to use the alarm
manager calm dot Android alarm dot
permission all right set alarm and then
we'll be able to use that alarm manager
but since we have the other activity
there that's going to fire whenever the
notifications clicked on we have to also
define that activity so activity and the
name for this is going to be dot more
info notification there it is
and we could come in and do a label for
this and let's just make it more on
notification and then we could also come
in and define our parent activity and of
course that's going to be main close
that off we could also come in here and
define some metadata and let's say we
wanted to find our name and Android
support parent activity and the value
for that's gonna be main activity close
off that and then that closes off the
rest of our activity and that's all
we're gonna have to do with the Android
manifest now I'm gonna go into the alert
receiver now the alert receiver is gonna
be really neat because what we're gonna
be able to do with it like I said before
is it's going to be able to fire
different things in this situation it's
going to fire a notification pretty much
anytime whether it is active or not or
in the background or anything so pretty
cool so what we need to do of course
it's gonna extend the broadcast receiver
and that means we need to come in here
and define on receive implement methods
there's one receive right there click OK
and this is gonna be called whenever the
broadcast is set and then the broadcast
is going to be set whenever they click
on the button we're gonna create that
over in main activity here in a minute
and let's say that we want to do this in
a separate method so create notification
and it's going to need to be passed the
context and then it's going to define
the message so let's just say time's up
and then we can put it five seconds has
passed because that's what it's gonna do
it's basically going to set a timer for
5 seconds after it's clicked on then the
final thing is gonna be the alert that
shows up above so now what do you need
to come in here and create create
notification and this is gonna be very
similar to what we just did here a
second ago let's just make this public
boy
create notification and like I said it's
gonna be past the context so that it has
all the information and access to
everything that it needs to be able to
do its job gonna receive a message it's
gonna display string which is going to
be the message text that's gonna further
elaborate on it and make sure we spell
this right there we go and then the
final thing is gonna be past is whatever
the message alert is gonna be message
alert there it is and let's come in here
and get rid of that and spell
notification right and just like before
we're gonna do this in a slightly
different order here we're going to
define our intent and the action to
perform with it by our other application
notification intent just like we did
previously pending intent we're gonna go
get activity that's in our context zero
let's go down the next line and then
we'll go new intent sort of condensing
if we're gonna look at the previous code
you're gonna see how I'm able to
condense this down main activity dot
class and then pass zero in here and
there we go so this is basically gonna
open up the main activity area where we
are gonna go back to here in a second
and handle this we need to build our
notification that we want to show up
whenever the five seconds has elapsed
we're gonna do that in exactly the same
way using this builder just like we did
before let's just call this M builder
equal to new notification and then
builder pass in our context
make sure that's uppercase and then just
like we did previously we're gonna come
in here and define everything so let's
say we want to define our icon we want
to show up inside of there our dot
drawable just like we do before dot and
I'm just gonna use that one again and
then on the next line we'll also be able
to set our title and that's just gonna
be the message that was passed inside of
here also be able to set our ticker
she's gonna show up in a taskbar
message alert and then we'll also
finally set the text for our message
which is just gonna be a message text
and let's get this out of here there we
go now that's all set up so just another
notification just like we built before
now we'll define the intent that we want
to fire when the notification is clicked
on set content intent intent which is
going to be main activity in this
situation that's what that is and then
we can also come in here
and define how the person's going to be
notified so we can set our default and
we come in here and say notification and
we could do you can see a whole bunch of
them here I'm gonna use sound but you
could also use vibrate which is just
vibrate or you could use lights which is
gonna use the default light notification
for the device that they have but like I
said I'm just gonna use sound here and
then we're also going to come in and
cancel a notification whenever it's
clicked on in the task bar and to do
that we can just say set auto cancel so
we don't have to go through the process
of stopping the notification it's
automatically gonna be stopped whenever
it's clicked on in the task bar and now
that we have everything set up we needed
to tell the notification manager to do
its job notification manager yeah is
equal to let's put this down here
notification manager get the context get
system service and of course this is
just used to notify the user of this
background event which is our alarm
going off after five seconds and then
pass a text dot notification service
okay
and now if we want to come in here and
post this notification on the screen we
just go notify and let's fast at one and
filter dot filled just gonna build that
now that notification there we go
that's all we needed for the alert
receiver in alert receiver Java now we
need to go back into main activity and
set alarm is gonna be the method that's
gonna be called whenever they click on
that button just make it public void set
alarm be passed the view and then we can
define the amount of time we want to
wait before the alert or notification
shows up and in this situation I'm gonna
make that five seconds so that it shows
really quickly whenever I show you the
example and to do that you go get time
in mils and then you define if you want
it to be five seconds you go plus five
times 1000 and that is going to get to
five seconds in time you need to define
our intention of calling for the alert
receiver class to execute alert intent
is equal to new intent that's in this
and then define alert receiver is going
called then we can use the alarm manager
which is gonna allow us to schedule for
this stuff to happen at a later date and
it doesn't have to be any time soon like
five seconds it can be you know whenever
you want you can be put on a schedule so
that it occurs multiple different times
this is the gist of using the alarm
manager and you just go get system
service just like we previously used it
before and then we just go alarm service
it's very simple to use then we could
just go with the alarm manager and set
it all alarm manager don't want this
stuff on here though let's make this RTC
wake up and then we're gonna pass in
alert time which is the amount of time
it's gonna wait until it comes in here
and fires this and then we'll go pending
intents get broadcast this one and then
alert intent what's gonna actually be
called which is the alert receiver let's
go alert enter and then finally we're
gonna put flag update current and that's
gonna update the intent
just like previously if it is active
rather than trying to restart it again
so I'm just pending intent
so I flag update current so rather than
restarting it's just going to update it
and there you go guys that is how we're
gonna use the notification manager as
well as the alarm manager now let's jump
over and see the application actually
running so that we can see exactly what
we did okay so here's our application
has three buttons just like we all know
if you click on show notification you
can see the notification pops up right
there on our screen and you can also see
that it shows up there in that taskbar
and if we click on it it's gonna open up
with that other layout and you can put
whatever you want there of course and
then we'll be able to click on stop
notification which will delete it from
our taskbar menu as well and then we're
also going to be able to come in here
and click on alert in five seconds which
will wait five seconds and then display
of course this can happen no matter if
the application is open or closed or
whatever you can see the alert right
there and if you click on that that's
gonna open up the application for us
okay so there we go that's the
notification manager alarm manager more
with broadcasts and a couple other
different things please leave your
questions and comments below otherwise
till next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>