<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>How to Make Video Games 10 : Make Tetris 3 | Coder Coacher - Coaching Coders</title><meta content="How to Make Video Games 10 : Make Tetris 3 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Derek-Banas/">Derek Banas</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>How to Make Video Games 10 : Make Tetris 3</b></h2><h5 class="post__date">2017-07-05</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/RwJ4FZFePmk" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">well hello internet and welcome to part
10 of my how to make videogames tutorial
series in this part of the tutorial
series we're going to continue making
Tetris and oh by the way if you haven't
watched the previous parts I provide a
link here on the screen you should watch
them otherwise you will be confused and
in this part of the tutorial my main
goal is to make it so that my shapes in
my Tetris shapes are able to stack on
top of themselves just like they do
inside of Tetris and also we're
obviously going to make more and more
shapes appear and do a whole bunch of
other different optimizations like
always all of the images used as well as
all the code using this tutorials
available in the description underneath
the video so I have a lot to do so let's
get into it
alright so how I want to start this off
is I want to go and see what we
accomplished alright so we can rotate
these guys I can't rotate them the other
way that's something I want to fix and
we can move them down to the bottom of
the screen but they won't stop moving
once they get down there and also new
shapes don't appear so that's the major
goal is to fix all of those things in
this tutorial so what are we going to do
to fix those basically what I need to do
is simulate the grid system just like we
are basically showing there inside of
unity and how I'm going to do that is
I'm going to simulate it inside of an
array of cubes like you can see right
here and then I'm going to basically as
these shapes move down I'm going to
eliminate cubes from the places where
the shape used to be and so forth and so
on and whenever the cubes come in
contact I am going to stop the cubes or
shapes or whatever from moving further
down and I'm going to make other shapes
up here okay so that's what our goal is
and now I'm going to go in and do it
alright so what are we going to do first
I think we should need to open up our
code all right very first thing that
bugs me is if I want to create a grid
system I am not going to be able to use
all these fractions this is going to
cause all kinds of problems so what I
need to do is I need to move my entire
grid system and my entire game four
point seven three spaces to the right
and ten point four five up upwards so
how am I going to do that well it's
impossible to do it with by selecting
all these individual pieces and doing it
that way but one thing I can do is
create an empty put everything inside of
that empty and then
and move everything that way so make
sure I don't have anything selected I'm
going to go create create empty and what
I want to call this guy just give it a
name going to call this game objects
group and then I'm going to select
everything and put it inside of the game
object group now what I can do is move
the game object group so I went and had
what I wanted to make it four point
seven two three to the right so I'm
going to go four point seven three and
then I wanted to make a ten point four
five up let's see if that little change
is going to allow me to go and fix
everything so here we are and I'm going
to say I want it to be greater than zero
and then this is going to be I believe
nine and then this is going to be
greater than or equal to zero I believe
if I have everything right I don't know
like I said the part of the to this
tutorial that's kind of different from
the previous two is this time I'm not
preparing anything ahead of time so
you're going to see me guessing my way
through how to make Tetris all right so
let's play it see if it works all right
playing here we are I'm able up then
it's off by one yeah it's off by one
how's this doing down here and that's
off by two so let's just move it a
little bit also the game camera is a
little bit wonky here let's move that up
a little bit as well over here and let's
change this to two and let's change this
to a negative one see if that improves
it at all actually let's move this down
to zero and let's move this to positive
one I'm going to come over here and get
my Y and I'm going to move it up until
it looks a little bit better so that's
what I'm doing over here move it up and
there it is on the screen looking a
little bit better alright so let's go
and play it again and let's see what we
should change here all right so I need
to be able to go to less on the left
side of the screen and one more on the
right side of the screen and two more
down so so let's make this 12.45 10 that
should be good now and then go into the
code and let's make this guy ten except
let's go back and test it kind
it's good that way that whoops that's
not good on the right side and that's
good at the bottom so what we need to do
is to less on the right side make that
eight should work now save it make sure
we got that safe test it again all right
good
got it on the left got it on the right
and we have it going down and everything
is going to be zero based now so
whenever we create our array it's going
to start down here zero zero and then go
upwards from that point now what I want
to do is I want to stop the shapes from
being able to go down once they hit the
bottom of the screen and then I want to
create a new shape so once again we'll
go into the code and do that where do I
want to put this new function I think it
makes sense to have it be down in this
general vicinity which is going to be
where we have you know where we move the
shapes down so basically what I want to
do here is right after I move the shape
back into position meaning that I can no
longer move down I want to disable the
ability to move that shape it's very
easy to do that inside of unity just go
enabled and false and then what do I
want to do I want to create a new shape
a new shape should come up on my screen
well I already created shape spawner
here it is right here so basically what
I need to do is just call for this
function to execute so we'll do that and
how you do that one of the ways is you
go find object of type and then you put
in what you want and that's going to be
a shape spawner is the objects name and
then I'm going to follow that up with
the function I want to call and that's
it that's how easy it is let's go test
it run it here is misshape I'm going to
go down to the bottom of the screen and
a new one should appear now and it did
all right so there you go pretty cool
stuff all right let's go and test again
to see if a new one could yep there goes
another one and that's going to go
through and that's something else we
have to fix and you can see all right so
everything's working on that end
something else that I did not like was
the fact that I can only rotate in one
direction so let's fix that this guy
right here is where we're rotating I
need to jump into the input input box in
the project settings and let's add
another one this is w so let's make the
other one E and I might as well just go
and create that right now
I'm already here let's just go copy this
paste that inside of there let's change
this to e and then let's change this to
negative 90 and then change this to a
positive 90 all right pretty cool stuff
jump over into unity set that up come
over here
edit project settings input and this
pops up and we come over here and we'll
change this to 23 which is just 1 more
than what it was
makes a duplicate s let's come down here
let's change this to e let's change this
to e don't need to do anything else
except to save its save it and let's run
it and see if we can rotate in multiple
directions ok so that's with W there we
are and this is with E alright looks
like it is working so pretty cool stuff
now what I want to do is I want to
create a new script and it is going to
hold all of my or it's going to hold my
grid then I'm going to base everything
off of so I'm going to call this game
board dot CS obviously and let's create
it and let's open it and here is game
board and what am I going to do here now
just understand this isn't optimized so
da-da-da-da-da you know I'm going to
optimize as I go through so what do I
want to have inside here basically at
this point all I want to have is a
representation of the game board inside
and in Iraq so I'm going to access this
from outside of the array I'm going to
have this be a bunch of transforms so
that I don't have to refer to everything
as a game object transform I can just
refer to them as simple transforms which
is all that I care about let's just call
it game board and then we'll go new
transform and what is this well it's a
10 by 20 array just to represent exactly
what we got there and I don't need to do
anything else here and I don't ever
really expect to do anything with these
right now so let's just get rid of them
all right so let's save that and now I'm
going to jump into shape and basically
what I want to do here is I need to
check to see if empty cells are going to
cells are going to be available for our
shapes so how do I do that and where
should I do that
well let's just look at the code here I
have is in grid for now I just want to
get a working functioning thing so I
think of this
is going to be an okay place right now
to basically set this up and check to
see if I have an empty sale available
for my different cubes so what I'm going
to do is I'm going to say if and game
board game forward and then I'm going to
need to convert these floats into
integers so I just do that and what did
I use how to use vector inside of there
so I'm going to go vex dot X bye and
then once again turn the float into an
integer and I'm going to say of X by Y
is not equal to null and let's go down
to the next screen here I'm going to do
exactly the same thing once again but
I'm going to do this for transform
because everything's going to be null by
default okay
but we're going to also have transforms
inside of here so we'll say transform
and there we go
in that situation I'm going to return
false return false alright and that is
going to provide me that information
that I need but then I'm going to
actually have to update my game board so
we're going to have to create a new
function for that and I'm just going to
have the public void and I'm gonna just
call it updates game board and what
should I do here well basically I'm
going to have to cycle through all of
the different blocks inside of our array
and then I'm going to have to check if
there are null values or there are
transforms inside of set blocks and then
after that I am going to as the blocks
move down through my simulated array I'm
going to have to eliminate I'm going to
basically have to put null every place
where the blocks used to be inside of
the array it sounds complicated but it's
actually really not so let's just go for
int Y is equal to 0 while Y is less than
20 I am going to increment that so I go
through all of that but then I'm going
to have to also do similar thing for
each of our rows of course so that's
going to be in sex is
to zero I'm going to say X less than 10
and I'm going to increment 10 of course
just like we did previously all right so
now is where we're going to do our
business basically our business is just
going to be I'm going to say if exactly
what I did previously
which means optimization is probably
needed but like I said I'm going to get
this working and then I worry about
optimizing it later on so I'm going to
say if the gameboard X Y position is not
equal to null and game board let's just
go and copy this once again and paste
that inside of there is not equal to
well in this situation I'm going to say
parents is equal to transform well in
that situation that means the shape is
going to move down so what we want to do
is remove it from where it previously
was on the game board to do that we're
going to go game board game board x and
y is going to be equal to null all right
so you've got all of that set up I think
I did that right we're going to be
testing everything of course now what we
need to do is to iterate over all the
different spaces on our game board and
add the new cubes for our different
shapes and I'm going to do that after we
get done cycling through our game board
that we have here I'm going to create a
vector 2x and let's call it let's call
this yeah let's call effect 2 and well
actually you know what I'm going to have
to cycle through all of the transforms
that we have and then get the individual
child blocks in each one of those
transforms so I'm going to say for each
transform and this is going to be child
block is what I'm going to call it
meaning the child blocks of our shapes
transform now is what I'm going to
create my vector to some time so I'm
going to go vector to X is equal to
child block position I also want to make
sure that I am below the 20 mark in my
height so I'm going to say if vex Y is
less than 20 and then in that situation
I want to put our Cube
our game board of right so I'm going to
say game board again game board and then
once again we're going to say integer of
X X plus now comma and again in vector Y
and that is going to be equal to our
child block then something else that's
probably I'm probably going to want to
monitor this just to see how it works so
I'm going to come in here and throw some
information into my console so I can
just see where the cubes at so I'm going
to say cube apps and then plus and then
I'm going to go and get these guys let's
just copy this throw that inside of
there and then throw the Y inside of
there as well that little plus right
there all right now on what I need to do
is update all of the movements and to
call the update game board so I'm just
going to copy this guy right here I'm
going to jump up the whole way to the
top here and just find all the different
positions in which I am tracking the
input from the keyboard and then I'm
going to call for the game board to be
updated so I'm going to say is not in
grid and here what I'm going to do is
put in else statements and then I'm
going to do my update game board inside
of there some update game board and
there it is I can actually copy this I'm
going to do that for all of the
different movements so if I'm not in the
grid else update game board and not in
grid and update game board and then
another one right there
I'll moved again and I'm looking to go
fix it alright so and there's that one
and I think that's everything
yes all right so I got the calls for the
update game board all working as well
all right so we got all that set let's
go over and test it I don't see any
errors let's go and run it and see
what's going on might not work at all
all right so my that's a mess okay so
what's going on here know what I think
I'm going to do I'm going to create an
array that is going to display
everything on the screen based off of
what the grid is showing versus what's
going on here in the center of the
screen so how do we do that well the
very first I'm going to do is I'm going
to create a text component inside of my
canvas so I'm going to get canvas and
new UI and text and don't worry by the
end of this tutorial I will get
anything working otherwise I would not
have uploaded this my array is what I'm
going to call this you can see it's huge
over here I'm going to come over here
and dramatically scale this down when we
go something like point two and point
two just like I did previously and then
the font size is going to go down the
leg I don't know let's try to see how
that appears on the screen basically
what I'm going to do is print out what's
in the game board array on the screen
okay so we got that they're all set up
and let's change the color to this to
white and there's that and let's go and
shrink this guy down move it over here
so see a little bit better and then
let's also grab this and bring it down
here all right so let's see how that is
going to work
let's probably make this two font size
is two let's change it to three
oh there it looks like it's a little bit
better okay so now what we're going to
do is I'm going to go into the game
board I'm actually going to temporarily
create a system that's going to print
out everything that is in the game board
array alright so how are we going to do
this well what am I going to call it I'm
going to call this public static void
and I'm going to call it print array
this is obviously something that's not
going to be in the final game so I'm
just throwing it in here I'm going to go
int I max is going to be equal to game
board whoops
game board get length zero and then it's
going to be minus one because I want one
less because it starts off at the zero
index and then I'm going to do the same
thing for the other guy I'm going to
call this J and game board length and
this is going to be 1 minus 1 obviously
okay and then I'm going to create my
four loops that are going to cycle
through this array and print everything
out inside of that text area that I just
showed you so J is going to start off at
J max and J greater than or equal to
zero and then J minus - that's going to
decrement from the top to the zero
position and then the other one let's
just go copy this this one's going to be
I and this is going to be equal to zero
it's going to go from the opposite
direction so this is also going to
change this is going to be less than or
equal to and this will be IMAX and then
this will be I plus plus plus plus
okay so we got all that set up now that
we have those set up what I need to do
is check inside of my array and if I
have a null value I'm going to put an N
on the screen and if I don't have a null
value I'm going to put an X on the
screen which is going to represent my
shapes so I'm going to say if because
that's the only two options I have so
I'm going to say if game board I J is
equal to null well in that situation
well limit do I get my array output now
I didn't put that in here of course not
so let's cut and put that inside of
there I'm going to say string array
output and it's going to start off it's
going to be an empty string and then I'm
going to print it out on the screen
then what I'll do is come down here oops
get rid of that extra thingamajigger all
right so what I'm going to do here is
I'm going to say if that's equal to that
I'm going to say array output plus
equals 2 and I'm gonna get capital n so
I can see it like that and otherwise I'm
going to say else in that situation I'm
going to say array output plus equal to
and then I'll put an X inside of it
because that's what I decided I want to
do and then I'm going to have to also
throw some additional information here
array output and I'm going to do some
just some back step back or some new
ones inside of there any one I'm going
to need to do after I get all that set
up this looks a little bit weird
done oh that's because this needs to be
indented with that guy make sure got
this all right yes everything looks fine
and then this one right here is for the
other one alright so then we'll come
down here and this is where I'm going to
put the information in the text box so
I'm going to say VAR my array component
is going to be equal to and I'll say
game objects finds and I named that text
box my array remember here just a second
ago I'm going to say get components and
and this is going to be a textarea
obviously and that will allow me to
change that text area and this guy's
giving me an error whoops let's just go
over here and it says show potential
fixes I need to import a library and
this is the library unity engine dot UI
there is then what I want to do is put
the array output inside of that text box
so I'm going to say my array components
text is equal to array output awesome
and I have one too many of these little
curly brackets alright so let's save
that going to jump into shaped CS and
I'm going to call for that to print
inside of my function here the update
game board and you know what I don't
think I need to check that this is below
the 20 mark because that's already
covered let's get rid of that and then
let's update our game board right here
so I'm going to do that I'm going to go
game board and I what I mean by update I
mean print it out in our little text
area we just had there that we created
I'm gonna call print array let's see if
that fixes that little error let's also
and let's also get rid of that
additional space right there if we run
it that everything's still getting
fouled up and this is not coming up so
let's figure out what else we did wrong
here
I just noticed down here inside of is in
grid I thought I put parent inside here
but I didn't so let's save that and
let's try running it again yeah we well
okay so up look at that the blocks are
stacking beautiful okay so that's sort
of working I don't understand why this
isn't updating let's go and sweep and
figure that out
ah see what I did wrong here the that
should be an eye okay Internet you
should have told me I made that mistake
alright so let's save it and let's get
tested again there we go ah see look at
that and that kind of neat you can see
the blocks moving down here on the left
side of the screen and let's see what
goes on here so let's move this down
everything stays in place and then a new
block comes down you can see it moving
over here on a side you might have to
actually do this on your own to have
that work and let's goes oops
hmm why is that doing that hmm guys we
got a little issue here where these are
not
oops hmm don't worry we'll figure it out
looking at these blocks okay ah okay I
don't know if you can tell here let me
I'll do it with the next one okay so
let's move this over to the left okay so
that's an L shape but if you look here
you can see that this actually it's
losing one of these pieces let's see if
it's doing it on the right side
oh geez on the right sides is totally
what on earth's going on okay so on the
right side it's not showing up oh yeah
it is okay so you can see right here see
the X moving that's represents the shape
so that is working and then we get to
the bottom and then it disappears all
together oh okay
um so there's a problem there so we are
losing one of the shapes when we move to
the left
on the right we are not are we if
something else is going wrong there and
sometimes it works it seems like in a
sensor it's working
sometimes it's working sometimes it
isn't working why is that well let's
quit this and let's go see if we can
find something else what's going on so
it was a good idea to create that array
that I created or that representation
text representation of the array so I
would have never figured that out so in
our console what do we got here all
right so we have nothing so we're going
to go into shape and we're going to
start printing out some information
about our shapes well after looking at
this I noticed that down here I was
printing out where the cube was located
at and I was using it inside here let me
go and get rid of that because I think
this is where the issue is going to lie
so let's save that run unity run the
game again okay so there we go that
comes up there this goes whatever it
does it falls off the screen and so
forth let's stop it and you are going to
see that yes indeed these guys have a
fraction that is messing with everything
so what I think I need to do is actually
round up all of those so that they are
indeed integers and not actually
fractions that's what I think the issue
is so I'm going to try rounding them up
and seeing if that fixes it so let's go
into shape again and let's go where do
we want to put this guy
I don't want to put it there let's go
and put it right after is in grid so put
this like this and we'll call this
public vector two rounds vector and it's
going to get a vector two objects and
it's just going to round it up so that
we actually do have integers everywhere
instead of having these fractions that
we sort of force into being integers
whatever we want I think that's where
the issue lies so we'll go return a new
vector and then I'm going to round it so
I'll go math F rounds vector X and once
again math rounds and do the same with
the Y vector then where are we going to
have to make this change well we're
going to have to make this change
basically anywhere that we create one of
those vectors so up here inside of is in
grid with this guy I am going to round
it so I'm going to call round vector on
it
and put that right there and put that
right there because we're going to have
to change this everywhere so I'm going
to go round vector there and then I'm
also going to have to do it for the
update obviously because we're we want
the grid to be updated as well so we'll
come down here inside of this same thing
we'll go around
the vector like that and let's test that
to see if that fixed it and aha look see
stamp whoops so it's staying on the
screen the X is all right good so that
was a oh well that's not right um
everything else seems to be fine
I can't move over to the right though
that's just because of the rounding
though I believe so let's exit out of
that and let's go and fix our little
thing so that's going to be in shape and
it's going to be this guy that when is
it this guy right here so we're going to
have to say we're going to have to move
this up to 9 and then it should work I
believe so da da da and we're going to
have to move this to up 1 greater than
or equal to 1 exactly right I don't know
what's test it there is we can move it
to the left we can move it to
the right everything is staying good and
we can move it up I need to take it to
down instead so let's open that up again
and that would be negative 1 oops
negative 1 let's save that and let's
reload it and run it again and it should
work let's test it and there we are we
got our shape let's make sure we can go
over to the left and okay so that was
able to work there let's go and put this
inside here I'm just looking to see if I
can break it like it broke before but it
broke pretty early on so I'm thinking
everything is working here at least
what's going on with that
now there's an error there actually I
think the reason why that is it's
messing up now is because of that last
change that we just made set the app see
this is still messing up let's go and
unforce that shape let's go like this
and let's change this back to zero
whoops change that back to zero and run
it again I bet it doesn't doesn't mess
up this time so let's do that
there and you can see that it's not
going the whole way down but that
doesn't matter but and you can see that
it's not causing errors see it's not
everything's laying in perfectly well so
the problem is having that be negative
one so let's go and fix that and we will
be able to fix everything and quite
simply how we fix that is we go over
here and well this is the game object
group that guy right there and we come
in here and we get this and change at
the 13 and we save it and run it and
everything should be working perfectly
now so let's go get this piece right
here bring it down and bring down
another piece and everything is working
it's kind of weird meeting two Pink's in
a row and that isn't okay those are all
randomized everything should be good and
it looks like I fixed everything and
it's working wonderfully all right guys
all we need to do in the next part of
the tutorial well we need to add sound
obviously and we need to also set up a
system so that when a row is complete
that deletes it and it moves everything
else down and vinyl and also the scoring
system and all that
so that is pretty good tutorial learned
a lot and hope you learned a lot anyway
and like always please leave your
questions and comments below otherwise
till next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>