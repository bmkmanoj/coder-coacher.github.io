<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Wordpress Plugin Howto Pt 2 | Coder Coacher - Coaching Coders</title><meta content="Wordpress Plugin Howto Pt 2 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Derek-Banas/">Derek Banas</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Wordpress Plugin Howto Pt 2</b></h2><h5 class="post__date">2011-05-10</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/RlJmshVCAE4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">well hello internet and welcome to part
two of my wordpress plugin tutorial
where you'll learn everything you need
to know to be able to create custom
plugins inside of WordPress in this
tutorial I'm going to teach you how to
make this top-level
sidebar button right here that's gonna
allow you to make custom changes to your
settings and I'm also gonna show you how
to make this sub menu item right here
that's going to allow you to click on
those and then take you to a settings
page I'm also going to teach you how to
use the register settings function to be
able to set widget options and so you'll
be able to access them from anywhere and
on top of that I'm gonna show you how to
create an install script that's going to
set all of your default options that are
going to be needed to use your plugin so
let's jump into the code okay from the
last tutorial if you didn't see it
definitely look at it we created all
that you see right here well now what
I'm gonna do is go in here and the first
thing I'm gonna do is show you how to
create an install script we're actually
gonna do this before the widget area
right inside of here and it's pretty
easy to do and we're gonna do is set
some default variables so that we'll be
able to go right out of the bat and it's
custom for WordPress plugins to have an
install script just like this so all
you're gonna do with this guy is come in
here and I'm using ntt because my
websites new think-tank and there's a
link to all of this code and the under
bar by the way so we're gonna do is
we're going to create an array that's
going to contain all the values that
we're gonna use with our plugin so I'm
gonna have the title and just so you
remember this is the widget that we
created here that's connect RSS feeds
Twitter and Facebook kind of simple but
I wanted you to be able to understand
how to create plug-in so I wasn't
looking to make something terribly
complicated and if you understand these
basic concepts you'll be able to pretty
much make anything you want so we're
gonna say that I want follow me to be
the default title and then I want to
also create this variable that's going
to contain the Facebook ID that I want
to be able to link to and I'm just gonna
set that to none and then we're gonna do
the same thing here with the Twitter
account so I'm just gonna change it to
Twitter right like that and I'd close
this off and then what we're gonna do is
call update options which is a great
function inside WordPress allows you to
do exactly what I'm doing here and I'm
going to create a function called an TT
defaults and I'm gonna store the array
that I just created inside of it and
that's it so you could do a lot more
complicated things with an install
script but this is
definitely enough for what we're using
right here so now I'm going to show you
exactly how to create this little
sidebar button right here inside of
WordPress so I'm going to scroll way
down to the very bottom of this script
I'm going to come in right here between
our initialize function that I created
here and create that sidebar button and
how you do that I'm gonna call function
NTT social networks and I'm gonna call
this create menu this is extremely easy
to do let's scroll up here okay so I'm
gonna tab in and I'm just going to use a
function called add menu page and what
you do is you provide a title for the
page that's gonna open this guy up
whenever it's clicked on and then you
define what you want the button to be
called and as you saw it's called ntt
settings so that's what's gonna be on
that little label then you have
management options and this is basically
going to define who is able to edit this
commonly we use administrator but
because it isn't very important I'm just
going to allow editors to be able to
come in here and edit and change this
little thing if they want to then you're
always going to type in file which is a
reference to the actual script right
here that we're playing with on the
screen and then you have to define what
function is going to be triggered
whenever this button is clicked on this
is going to be the settings page and
that's it that's a whole entire thing
that's all that you need to do to create
that little sidebar guy and another
thing you can do here is if you'd like
to add a little icon I created a little
18 by 18 pixel image and if I wouldn't
want to have it show up in that little
button I would type in plugins you're
out a point at the plugins folder again
we talked about this in a previous
tutorial and then go images and then
point at your little icon would provide
you with the option to go in and put
that incidents a little neat feature and
then you can close that off you know
what's really cool is if you would want
to actually come in here and create the
sub menu now you pretty much did you
just need to copy this and paste it in
here I'm just gonna call this sub menu
so this is a sub menu item so I'm
talking about this guy right here this
guy right here we just created this guy
so if I want to create that sub menu I'm
just gonna copy and paste it in here I
change this to sub and then down here
I'm gonna change this to options and
that's gonna make it show up under
settings like I just showed you
previously and then I'm gonna leave
everything else exactly the same except
this is not an
option you're not allowed to put an
image inside of there and that is how
you would treat that and you would be
able to put this underneath the settings
area with options inside of here and if
you'd want to put it under any of the
other different things like dashboard or
whatever you'd like I'll show you all
the different ways you would change it
we just call a different function that's
it everything else is identical so if
you want to be under the dashboard you
would just type in dashboard and you'd
want to be in here under posts just type
that and if you want to be in under
media just type in media when it's be in
underneath lengths live in lengths I
think you're starting to get the point
except some of these are a little bit
different pages or pages yes it's silly
like that pages pages comments or
comments then it's theme under
appearance that's a little bit different
I don't know why they didn't just have
it be that and plugins and then there's
one more and I'm just going to type over
here this would be users so you would
just call these different functions
inside of here instead of calling add
options and there you go there's your
submenu so now I'll show you how to use
register setting which is a great
function in WordPress that will allow
you to save all your options for the
widget so that they will be accessible
from any other function inside of this
guy and I'm actually going to put it up
here right after the initialization area
and to be able to do that you just go
function and TT register options that's
what I chose to call this guy you can
call it whatever you want and then what
you want to do is call register setting
and then you're gonna use the same thing
to group all of these different
variables together so I'm gonna call it
work bars each one of these is going to
have that same little thing and then I'm
going to define ntt title right like
that and then I can actually copy this
guy
remember this groups all of these
variables that are over here so I just
have to come and change them Facebook
Twitter all right so now all this can be
accessible inside of WordPress and I
said I wasn't gonna do the settings part
but what the heck let's just do it so
what I'm gonna have to do now is
understanding that I have these guys set
right here and I want to be able to use
them interchangeably with both the
widget as well as my settings page I
have to come up here into the plug-in
and again there's a link to all this
code in the underbar it would probably
help you understand a little bit better
but I have to come in here and actually
change just a couple things inside of
here this guy right here surprisingly
enough is not going to need to change
the constructor can
remain exactly as it is however down
here inside where we define our widget
we're actually going to need to change a
couple things inside of here and
whenever I created these register
elements these guys right here and I
created those how you actually get the
value that is contained inside of them
as you call something called get option
so what I'm gonna do is actually call
this good option and ask it what the
title is and put that variable inside of
there so that's what needed to be
changed there and then what I'm gonna do
is come in here and grab this guy and
paste the same thing inside of there and
basically what this is saying if you
don't remember from the last tutorial if
there is a value here use it if not use
follow me so it's pretty easy to
understand and then I just need to
change all of these guys down here as
well easy enough to use those same
registered settings variable values that
we define way down below and then I'm
just gonna call this NTT facebook
facebook twitter twitter and that's all
setup so we have to scroll down here and
inside of here we're gonna call NTT
title now instead of the regular title
because that's what I called it up here
so I have to change that to make all
that makes sense and then we scroll down
here and we're also gonna have to do the
same thing for Twitter NTT Twitter NTT
Facebook that's all we need to do
because the instance value and all the
other values are all gonna be exactly
the same and then we come down to the
form section which for the widget if you
don't remember again click on widgets
this form right here
this is the form area that we're gonna
be editing all wuff to put NTT inside
here as well just copy this save myself
some time face paste face okay so those
were all set for awfully so let's scroll
down into the forum area where we said
we're going before and again we're
basically going to be doing the same
exact thing again
in array we're gonna change this to NTT
and we'll go and change Facebook then
we're gonna also change Twitter this is
NTT defaults remember we went and
defined this guy before with the dollar
sign I'm head of that and this guy was
defined in our install script see NTT
defaults right here and NTT defaults
right here so I'm just changing all
these guys as well NTT instead of their
previous thing and then died on us out
of here we're going to change this to an
TD title and then change this the
antiquey title as well NTT facebook
facebook twitter twitter and then after
all that's done and the form has been
chained
changed I want to be able to go and set
all those variables that I previously
created so I have to do that I have to
call settings fields and then provide
the name NTT social network bars and I
created that right here NTT social
network forests say so it's all right
there same same exact area and then I
can actually call update option MTT
final and give it the value of the
variables that we created right here and
now I do that is just call it NTT oh you
don't easy enough I know I'm just gonna
copy this because it's the same I'm
gonna update the title and Facebook and
everything else Facebook Facebook
Twitter and Twitter okay so now all
those variables will are all saved so
that's great so I'm gonna scroll right
down here and I'm going to show you how
to create the settings page which is the
page that you were sent to whenever you
click on those little options right
there and what we're gonna do is because
whatever this is clicked down here we
define and we wanted to create a
function or run this function right here
I have to copy that create a function
there we go nothing's gonna be patched
to it and just roll that down there and
it's rolled up so I decided that I want
everything to be held inside of a div so
what I'm gonna do is I'm going to close
my PHP right here for that and then I'm
gonna create a new div and I'm gonna put
an h3 tag and this is gonna be the title
for the page and if I want this title to
be translatable I'm going to put
underscore e inside of there then it'll
translate into other languages
automatically I'm gonna put a reference
to the plug-in name itself so whatever
you named your plug-in would go into
here then I'm gonna close off that PHP
codes and I just put in her close off
the h3 tag and put a brief statement
then you're gonna have to define the
different things that are you know on
the settings page so what we just
created was this in that previous line
of code
now we're gonna create all of this stuff
and how you do that this is always going
to be the same you call form method is
equal to pose you're always gonna do
this exact line of code and like I said
most of the things I'm doing here are
gonna be identical options dot PHP
WordPress handles this for you so you're
always going to call this specific
function then we have to jump back into
the
PHP code call settings field and what
we're gonna do is again pay reference to
the block of variables that we saved so
that we're able to use them and all of
our different functions and then we're
gonna define where they're gonna be able
to change the title and we want it to be
translatable and we're gonna start it
off with title I'm just gonna copy this
this is a reference again to the plug-in
itself we're gonna create a little text
box for them to enter their customized
title that they may want and its name is
going to be equal to NT T you know the
value for it I'm gonna fetch the value
based off of the defaults or whatever
the current value is I'm gonna say echo
and I'm gonna call get option and I'm
gonna call an tt title that's why we
needed to use settings fields here close
doc I'll input a break statement in
there and then guess what we're gonna do
this pretty much identically three more
times or two more times for Twitter and
Facebook it's pretty much gonna be the
same thing except I'm gonna come in here
and put Twitter in and here I'm gonna
put Twitter in and here I'm gonna put
Facebook in here I'm gonna put Facebook
and I'm gonna grab this guy only only a
space sir I'm gonna paste that in
because that is also gonna be the same
pretty much and this is just the title
twitter ID and then this is gonna be
facebook ID ID and then i'm gonna create
a submit button input right it's equal
to submit value is equal to PHP then I'm
going to say underscore and then this
will just be what shows up on the submit
button which is gonna be submit and TT
linked to social networks close that off
scroll that up close off my form close
off my div and then reopen PHP to use
and then as a final piece what you need
to do is to link all of these functions
we just created on two hooks so here we
created our initialization hook so what
we're gonna do is call an action and
here we're gonna create our top-level
Settings button so I'm gonna say when
the admin menu is created I want to call
that function that's going to create
that top-level button this is just the
function that is called to create that
menu and then I'm going to copy this
paste that in there because this is
going to be submenu and nothing
else needs to be changed and then add
action admin in it and to run my
settings page and to call the function
that's going to register all my
variables that I'm gonna use across this
entire plugin I'm gonna call NTT
register options and then close that off
and then there's the PHP code and you
always want to make sure that there's no
white space after that that is how you
create both the settings page as well as
these little sidebar options that are
over here how you print in language
that'll be easy to translate into other
languages and how to create variables
that can be used across any function
inside WordPress have any questions or
comments leave them in the comment
section below and remember get all the
code if you don't understand it it's
heavily commented til next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>