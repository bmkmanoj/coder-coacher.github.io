<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>C# Tutorial 24 Paint App | Coder Coacher - Coaching Coders</title><meta content="C# Tutorial 24 Paint App - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Derek-Banas/">Derek Banas</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>C# Tutorial 24 Paint App</b></h2><h5 class="post__date">2017-04-08</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/cHncA_aCVmM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">with a low Internet and welcome to part
24 of my c-sharp video tutorial on this
part of the tutorial I'm going to cover
canvas we're going to make a working
paint application that's going to allow
you to draw lines ellipses rectangles
and all kinds of other different shapes
and a whole bunch of other different
things like always all the code as well
as a transcript of this video is
available in the description underneath
this video and I have a lot to do so
let's get into it okay so this is just
basically all the same stuff we've
defined up here for our window and all
the previous other parts of the WPF
tutorial and here we have a doc panel
which score where we're going to put the
canvas as well as a toolbar so what I'm
going to do is I'm going to come in here
and I'm going to define a toolbar and
I'm going to give it the name of my
toolbar that's a pretty good name and
I'm going to define that I want it to go
at the top by going doc panel and doc
and then making this equal to top and
I'm going to give it a height that is
going to be equal to 50 and then close
that guy off and then we are also after
that going to come down here and so
let's leave some space that doesn't
really matter we're going to put some
radio buttons in there that are going to
allow you to define whether you want to
draw lines ellipses or rectangles and
then I'm going to also throw canvas
inside of here and I'm going to give it
some names I'm going to call it you may
have guessed it my canvas and you have
to give a background color to your
canvas if you do not give a background
color to your canvas you will not be
able to draw on it just something to
know and while we just make it antique
well to make it antique whites and
there's some canvas and I'm going to say
that it's height is going to be equal to
300 and its width is going to be equal
to 525 and then we're going to put all
sorts of events inside of there but I'm
not going to worry about that right now
and what another thing I want to do is I
want to show you how to use a mole to
draw lines ellipses and rectangles and
it will do it programmatically so that
you know we can catch the mouse
movements and all that
drawn that way so I'm going to show you
two ways so you're also going to be able
to come in here and go to line and then
say something like x1 is equal to 10 and
all you're going to do is define the
starting and the ending XY positions for
your line and it'll draw out 4 so we're
going to put that 10 and then we'll have
Y 1 is going to be equal to 10 and then
the final point is going to be equal to
50 and then Y 2 is equal to 50 and I'm
sure you know how those working and then
let's just keep it stroke color nice and
simple let's make it black and then we
can define our stroke thickness as well
and let's give that a thickness of 4 and
when we close that off you're going to
see the line drew right there ok so cool
stuff and it's going to get a lot cooler
than that I just wanted to cover this so
let's say you want to draw an ellipse
inside of here you can also do that you
can define your fill color why don't I
make it yellow and spell yellow
correctly
and let's say we want a height that's
going to be equal to 50 and a width is
going to be equal to 100 the stroke
thickness let's go and get thickness
there's thickness and let's make that
equal to e stroke color is let's just
make it black as well and then you can
define how far you want it to come off
of the canvass from the left side so you
say canvas left and let's make that
equal to 100 and then you also have to
define how far from the top so canvas
top and let's make that equal to say 20
just to fill it in and do this and do
that and there you go now you draw an
ellipse now I can also do the same thing
for rectangle so let's go rectangle and
let's give it a fill color equal to blue
and let's give it a height that is equal
to 50 and a width which is going to be
equal to 100 and then we'll define
canvas left and canvas right as well so
canvas left and we'll make it equal to
240
can the stop is equal to 20 just like
before and we do this and we do that and
there you got now you draw rectangle all
right so like I said I'm going to
actually go and have it work like a real
pain application though so and now I'm
going to go in here and put the radio
buttons so that we can draw our lines
and ellipses and rectangles using a
mouse so I'm going to select the toolbar
and then I'm going to come over here
where it says items collection and I'm
going to click on that and then I'm
going to define the radio button so what
they're going to do so I'm going to come
down here now I'm going to go radio
button radio button there it is
and I'll say add and you can see one
there and we'll go add and then we'll go
add and we're going to do pretty much
the same sort of thing for each of these
so border brush I'm going to select that
change all these to 150 so there's 150
and there's 150 and the width I'm going
to have that be hmm
say 80 and the height I'm going to have
it be the same size of the toolbar so
that's 50 and then down here for content
or the word that's going to show up
inside of there I'm going to have this
set for a line okay good stuff and there
you can see it's right there and then
next we'll do a lip so a border brush
again this will be 150 150 and 150
hopefully you can see that this is what
I'm changing right here and we'll come
in and do the width 80 and height is
going to be 50 and then the next one is
going to be ellipse so just put ellipse
inside of there like that and that's all
we're going to change and then the next
one's going to be four rectangles so
border brush is selected like that 150
150 and 150 and guess what 80 and 50 and
like I said this is the rectangle so
we're going to come down here to
contents and we'll say rectangle all
right so all those are defined let's
click on OK
they're all there they look good then
we're going to select all of them and
we're going to need to group them I just
held down the shift key whoops did I
hold down the shift key
all right shift key come out of here
click on that hold down the shift key
they're got all three of them and then
very nicely it's going to go over here
and open open up the group name area and
we're going to select that
and we're going to call this shape group
like that whoops I want that G to be
uppercase hit enter and now you can see
all of them have been updated now what I
want to do is come in here and you can
see the none of these have names on them
so I want to go and give them all names
so the very first one I'm going to come
in and I'm going to name it line button
so name is equal to and line button and
then I'll come down to the next one name
is equal to and we'll call this ellipse
button and then the rectangle we will
call rectangle button and there we got
those and what I'm going to do is allow
the user come in here and select one or
other you know the other different
options here and whenever they do it's
going to allow them to draw different
shapes so to do that I need an event
handler so I'm going to come down here
at the end of this this is for our line
button and I'm going to click on click
is equal to and I'm going to say new
event handler and let it draw that for
me or let me create that mean my C++
code and then I will come down here and
when I double click on this to do it and
there when created a lips button 1 and I
will do click again as equal to and then
double click on the new event handler
and it created that save all that and I
think we are done with all that stuff
well we're going to be doing some more
things with the canvas so for now though
why is this giving me an error I don't
know I'm going to leave it there for now
and then I'm going to come down into the
canvas area and define a whole bunch of
different event handlers for the canvas
so I'm going to do one for Mouse down so
let's go Mouse down is equal to and I'm
just going to let it generate that for
me so just my canvas mouse down that
looks perfectly fine let's go do some
more here let's also do a mouse up
because we're going to draw whenever the
mouse is released some mouse up and go
and have it generate that for me not
really sure what all the other things
I'm going to need are let's say I also
did need a mouse move
there's a ton of these little guys that
are inside here so mouse move and have
it generate that for me so I'll save
that oh I know life is complainin it
wants us to be antique white narrowing
not one way okay so that's all I need to
do in the sample code now I'm going to
jump over in the c-sharp code and make
everything work okay so here I am and
this guy right here is what we're going
to be using the system windows shapes
library we're going to be important app
and it is used for generating a limited
number of 2d vector images and it's very
very good at that
and something that's really great about
it is that it's going to allow us to
respond to events just like all of our
other DPF or WPF components so the very
first I'm going to do here is I'm going
to come in and define an enum that is
going to represent our three shapes so
I'm going to go privates
enum and my shape is what I'm going to
call these guys and then inside here I'm
just going to go a line and it ellipse
and rectangle and clothe them down here
and close that one off and then I'm also
going to define the current shape that
has been selected so I'm gonna go
privates
my shape and I will just have this big
current shape and when I want to jump
over here again and inside of the line
button I'm going to have this guy be set
for is checked so by default it's going
to be is checked and so let's go is
check true alright so back over into the
c-sharp code and I'm going to give this
a default value of my shape and line
that's what it's going to be set for but
of course I'm going to change every time
one of the other guys are clicked on
we're not going to do anything in the
main window part of this and you can see
all of these different guys that have
been set up for the line button click
all I'm going to do is come down here
and go current shape is equal to my
shape and line and I'm going to do
pretty much the same exact thing for all
these other guys so this is going to be
ellipse my shape
it's going to be ellipse and then for
this one it's going to be rectangle
there they are that set up now I'm going
to need to track both the starting
points as well as the ending points so
where they first click with the mouse x
and y position and where they release
with the mouse so I'm going to define
two points inside of here I'm going to
call the first one start and the call
the second one end sounds like good
names and then we'll come down here to
Mouse down now whenever they click the
mouse down I want to get the x and y
position of where the mouse is first
clicked that's going to be stored in
start and to do so I just go E and gets
position and then that's going to be
this so that's how easy that was so now
I know where they first click to you to
draw the line the ellipse or the
rectangle then I come into here where I
go Mouse up now what I want to do here
is I want to draw a different shape
depending upon whether they selected
with the radio buttons either align an
ellipse or a rectangle and to do left I
go to switch and I go and get my current
shape that I stored and inside of here I
can then go case in my shape and if it
is the line well then I want to call a
function I'm going to create in a second
called draw line and then I want to
break out of this and then I'm going to
do the same sort of thing over and over
again for all the other guys
so let's come down here and if it's
going to be ellipse well then I want to
draw an ellipse there that is and then
I'm going to do the same thing for a
rectangle of course
so rectangle and this is going to be
draw rectangle and then the default is
just going to say then give me what I
want
so just return and there that is so
that's set up that is for whenever they
release the mouse up and then of course
these guys need to be able to be worked
with I'm also going to however have to
track changes in X&amp;amp;Y and store the final
x and y position for when they release
the mouse and to do that I'm going to go
if E and we're going to be looking at
the left mouse button so
the right one will work and will say
Mouse or the middle one if you have one
of those fancy mice so we're going to
mouse button and state is when looking
for and pressed so if the left mouse
button is currently being pressed well
in that situation I want to get the
ending points so to get that I go get
position and this and that is going to
get me the X&amp;amp;Y position for the mouse as
it is being moved so what do I need to
do now well I need to be able to draw
the lines after I get the X&amp;amp;Y positions
for them so do that I go privates and
void and draw a line it's not going to
receive anything but it's going to give
back oh so much more and what we're
going to do is create a line here a new
line is equal to new line so I'm going
to be drawing a line it's out here then
we need to define a whole bunch of
things well we might as well just go and
do that directly inside of here to save
ourselves a little bit of time so let's
say we want to define our stroke and we
want that to be equal to blue that's how
you do it and then we need to define the
starting x position that's going to be
equal to start dot X just like we stored
it we're also going to get the starting
Y position and that is going to be start
Y and then we're going to have the
ending position x position that is
that's going to be end X and then we are
going to get the Y position and that is
going to be and y dot y there we are
and another thing we're going to need to
do is because the toolbar is 50 spaces
and height what we want to do is we're
going to adjust for that so our Y
position we're going to subtract 50 from
and that will make sure that everything
lines up perfectly fine right there and
then we will come down here and if we
want to go and draw a line on the campus
you just go my canvas children and add
and you add the line and you add it at
all of the
recommended information you defined and
this is giving me some air so let's come
up here to get rid of those a little bit
here so just so that I can come in and
test the line and let's run it and there
you can see it went and it drew out the
line the ellipse and the rectangle and
we have line selected let's see if I can
draw lines and yes I can draw lines and
it's beautiful all right so now we're
going to get a lips and rectangle work
they're actually going to work in a very
very similar way so let's go get rid of
that so we don't forget get rid of that
and always forget things like that and
then I'm going to come in here and I'm
going to set up for the draw ellipse and
draw rectangle all at the same time
let's get rid of that extra space and
bothers me all right so we go and draw a
lips so how are we going to draw a lips
they're a little bit cranky and fancy
because you have to accommodate for the
user drawing the ellipse in multiple
different directions you'll see I'm
going to show you so we're going to go
and create an ellipse let's call it new
ellipse is equal to new ellipse this and
then like this and then like that and
then throws semicolon air and we're
going to define a whole bunch of
defaults for our ellipse so we'll go
stroke is equal to brushes and let's
make this green and of course all these
things can be changed with combo boxes
and all the other stuff I've shown you
already and brushes is the fill color is
going to be red so complementary colors
and I make our ellipses and everything
look crazy we're going to get our stroke
thickness and we'll make that equal to 4
and we can go and define our heights
course is going to change whenever they
draw the ellipse you don't even need to
put it in here but I'm just putting it
in there just because I'm typing and I'm
a little bit crazy alright so let's go
in and now what we're going to do is we
are going to need to accommodate for the
fact that this is going to work
perfectly fine based off of what we
already have done however what happens
if they start in let's say the bottom
right hand corner and drag into the
upper right left hand corner that's
going to mess up everything because our
ellipses cannot draw
in the negative so we need to
accommodate for that so what I'm going
to do is I'm going to say if and X is
greater than or equal to the start X
that everything's fine and this is the
normal way that we would draw ellipses
how we would do that is we need to
define of the left part of our ellipse
how we do that is go new ellipse and set
value and then canvas and left property
and then we would put inside here start
X exactly like that and then we will be
able to come down and we will say new
ellipse and we need to define the width
and how we get the width as we get the
ending X position oops and we subtract
the starting x position so this is if
they are drawing an ellipse from the
upper left hand corner okay else they
are drawing this ellipse from right to
left so we have to accommodate that and
how we do is we go and get this guy and
we paste it inside of there except we're
going to change some things we are
instead going to change this to ending
exposition and this is going to be start
X and this is going to be end X because
we're coming from a different direction
and there you go that is going to work
that handles the x position anyway and
we got to do a similar thing for the Y
decision so here we're going to say and
Y and start Y then we need to handle
this guy which is going to be top
property so I'm going to change this to
top because we're working on up and down
instead of left to right so we just got
to start Y like this again we're going
to accommodate the 54 the toolbar so
just throw that in there that's why
that's doing that and this is going to
be end Y and start Y and I have that
start Y and this is all looking fun all
right this is right around the places
where I make mistakes but I think we're
all right right now all right so then
we're going to change this once again to
a top property and this is going to be
equal to Y accommodate the toolbar with
a negative 50 inside of there and then
this guy is going to be a start Y and
end Y as well and I think I did all that
right now we need to draw our new
ellipse to check out if we did right so
my canvas and children and add and then
new ellipse and let's see if we did it
right let's run it well if it's going to
give me an error it's going to give me
an error because I have this function
I'm calling a function up here that
doesn't exist so let's go get rid of
that but I want to check out what's
going on here makes me feel good so
let's run it again
uh-oh there's an error what's in there
that's it done 1:29 what I did I forget
one of these guys I probably
accidentally deleted one in my haste and
let's write now and let's see if we can
draw ellipses so let's ring it in here
click on ellipse and oh oh I did it
wrong so what'd I do wrong
well something on the y-direction so I
probably made a little error inside of
here that see what I did I should have
made that height so let's change that to
height and change this to height and I
bet you it works now let's come in and
do it again mmm good it is and can we
draw ellipses lips boop boop and there
we go so you can draw ellipses and
that's great and if you can draw an
ellipse you know you can draw a
rectangle so let's come back up inside
here and get the old draw rectangle
ready to go because it's almost ready
and what we're going to do is I think
I'm actually just going to copy this
whole thing so you basically draw
ellipses much the same way that you draw
rectangles so might as well just copy at
all and make a couple little changes
here there so of course one of the
changes is going to be that this is
going to be called draw rectangle so
draw a rectangle there that is all set
up and this of course is a rectangle not
an ellipse so let's get that alright and
then this is a rectangle and this is a
rectangle
we have to go that must be new rectangle
we're gonna have stroke and fill and
Stroke picnic let's just get rid of
height width because it actually doesn't
do anything just makes me feel a little
bit better
and then we'll do in here and do whoops
I just accidentally copied out I hate my
happens all right so let's go get this
guy paste that inside of there paste
that inside of there and do the same
thing for this this and then the last
four so do that nut and this and this
and do I need to do and up there's no
one snuck in there so we have all those
set up and then basically everything is
exactly the same let me look at it here
just to make certain that it is so the
everything looks really good and I think
it all will work ah
there's one thing though with no that's
how it is gonna be the same also think
it's alright I think it's good let's say
let's run it there's one way to check
your pugs this is a bad way to debug but
it's also pretty quickly go rectangle
yay I can draw rectangles all right so
there you go I can draw ellipses to draw
lines and I can do all kinds of cool
stuff
alrighty guys so there you go that is a
simple paint application at some way or
one way model is you can use canvas and
a whole bunch of different things and
like always please leave your questions
and comments below otherwise till next
time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>