<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>How to Make Video Games 22 : Make Ms. Pac-Man 6 | Coder Coacher - Coaching Coders</title><meta content="How to Make Video Games 22 : Make Ms. Pac-Man 6 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Derek-Banas/">Derek Banas</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>How to Make Video Games 22 : Make Ms. Pac-Man 6</b></h2><h5 class="post__date">2017-08-26</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/3tvdbE1AbWA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">well hello internet and welcome to part
22 of my how to make videogames tutorial
series and we're gonna continue making
miss pac-man in this tutorial I'm gonna
provide alternative ways to keep miss
pac-man inside of the maze I'm gonna
cover how to make ghost turn blue also
gonna cover how to animate ghosts and
how to allow the ghosts to go through
portals and a whole bunch other
different things like always all the
images and all the code is available in
the description underneath the video and
I have a lot to do so let's get into it
alright so here we are back inside of
unity in like I say all the time
everything here is the same with Mac OS
as well as Windows I am using Windows
alright so one thing that has come up is
as I was playing pac-man occasionally it
is possible to go through the blocks
that are inside of there
and it happens whenever they're moving
on the left side but not on the right
side so I thought I would use this as an
opportunity to actually show an
alternative way to make sure that Miss
pacman cannot go you know through those
blocks so that it are there okay so
let's fix that what I'm gonna do is I'm
gonna open up game board and here is our
code and if you can't see it feel free
to view this full screen and what I'm
gonna do is I'm gonna create another
array and this is a great alternative
way and normally the way that I like to
actually set up my games so what we're
gonna do is we're gonna go public and
bull and what this is gonna do is it is
going to say if this is a valid block to
move in or not so I'm gonna say valid
block is equal to new and it's either
gonna be true if it's valid and if it's
not it's gonna be false so I'm gonna set
this up so that it is 28 by 31 and let's
go verify exactly why I'm doing it that
way okay inside of unity let's zoom out
of this guy right here and zoom in a
little bit more okay so if we come down
here and we click on this dot right here
got it you could see over here that it
is in the 1:1 mark well what I want to
do is I want to start in the zero zero
mark which is actually outside of that
dot and what I'm referring to is the
actual blue border right here and then
we can come over to this dot over here
and zoom in again just so you can see
exactly what I'm talking about this one
and you can see that is in the twenty
six space so I want to allow for enough
space for not only all the dots but also
these borders that are also here and
once again if we go the whole way up
here to the very top and click on this
you're gonna see this is in the twenty
six spot so basically using that that is
going to allow me to allocate enough
space to define the entire board instead
of just what lies inside of it so
basically I need a way to very easily
put in all of those different valid
spaces so what I'm going to do is I'm
going to create two different functions
that are gonna allow me to do that I'm
gonna create void add Y row and that
I'll have X range so it's gonna add
everything using a defined Y and then a
range of X's inside of it so I'm going
to go in and this is y row and then I'm
gonna have another int and this is gonna
be X start and int X and got that
defined and then I basically just have
to cycle through all those guys and make
them work so to do that I'm gonna go for
int I is gonna be equal to whatever the
X start is let's get rid of this
straight guy that fell inside of there
and then inside of here I'll go while I
is less than or equal to X ends and then
all increment I and get rid of this why
is it throwing those instants out of
there oh I
why because I went into I now that'll go
away all right so it's just in here and
let's increment I all right so we have
that set up then I'm gonna say valid
block the array that I have up above and
in so there I'll throw in the eye for
the ever changing X value and then for
our row that we have inside of there and
since that will be valid I will mark
that as true
that is basically all I need to do for
that I'm basically going to do exactly
the same thing for all of my ex columns
and my y ranges so I just copy this
paste it inside of there and soon do
something a little bit different this is
gonna be X column so X column and this
is gonna be Y range so then we will
change this to X column and this will be
Y start and Y end and then I'm going to
do basically the same thing here I'll
just change this to Y start and this
will be y ends and then I gotta flip
these two guys this is gonna be X column
and then I can throw I inside of there
alright so that's gonna give me all of
those guys and have those set up
properly also what I'm going to do is
I'm going to come in here and provide a
way for other objects to call and see if
there is a valid space here in line so
to do that I'll go public bull is valid
space and this is gonna receive a float
X and a float Y then what I need to do
is I need to take the value that's
passed inside of here and then get to
the floor version of it which means I
need to convert the float into a double
and then back into a float again so I'll
just go floats and the reason why I'm
doing it that way is because that's the
way that I did it in the other you know
the way I have everything structured
inside of the array and the differences
between the value of the actual space
inside of the game board or the scene
versus what is inside of our rack so
then I need to convert this to a double
and if any of this is not making sense
you definitely have to watch the
previous parts of this tutorial series
otherwise you will get very very
confused I'm getting an error there and
that's because I need to come in and go
using system and that will allow me to
use the floor as you saw that one way
also gonna do the same thing for y
changes to y
and change this to why and now we'll
have that all set up and then I'm gonna
go if valid block and we'll go I don't
think I need to convert this to an int
oh yeah I actually do so I'm gonna go X
plus 1 and then I'm gonna do the same
thing
ant and then y plus 1 and if that comes
back is as true which you know it should
will go return true and otherwise if
it's not a valid block obviously it's
going to return false
ok so there we go we went and created
that now what I need to do is go and
populate all of this array with all of
our valid blocks and I'm gonna have to
do that by hand all right so basically
what I need to do here is I need to
let's go and zoom out of this I need to
pass in our x value inside of here which
is gonna be this row right here and then
I'm going to pass in a range into this
as well so what this is going to be is
it's going to be a Y row and then it's
going to be a range of X's so it's gonna
start off right here is 1 1 and it's
gonna end here with 26 1 and how that's
gonna work is right after this for each
block I'm gonna call the proper one so
I'm gonna go add and this is going to be
Y row X range and the y is going to be
the same and the x's are going to change
from 1 to 26 so as you can see it's
gonna provide a real easy way for me to
define a whole bunch of rows and columns
all at one time using those functions
down there and so that you are not bored
to death I went and did that ahead of
time here for ru and there is going to
be all of the different function calls
that I need to make to make all this
work and of course all of this code is
available in the description so go and
get it you know
no point in typing all that out and
that's all I'm gonna need to do with
gameboard so we're gonna save it and
then I'm going to jump over into miss
pac-man
and utilize all this to make sure that
miss pac-man stays inside of the Rose
where she belongs all right so we are
inside a miss pac-man here and what is
this gigantic space here let's get rid
of that and we'll go up to the very very
top of this and right after this audio
clip I'm going to go and get a reference
to the game board and I'm just gonna
call it game board just to keep it nice
and simple and this is gonna be used to
access the function is valid space
inside of game board dot CS I'm then
gonna come down inside of awake and get
this reference and specifically what I'm
going to do here is access the game
board script itself so game woops game
board is equal to and if you want to get
the script of an object you go find
object of type and then type of I'm
going to show you a couple different
ways to access scripts and things like
that inside of this tutorial and then
I'm gonna go as game board and that's
gonna get me access to the game board
scripts so I can call that function now
what I'm gonna need to do is every place
where I try to move miss pac-man I'm
gonna verify that I can actually move in
that position and where I'm gonna do it
at is right here so here what I'm trying
to do is to move left so what I want to
do is actually subtract 1 from X because
that's the position I'm trying to move
miss pac-man into so she is in the to
one position and I try to move left
that's that's gonna mean I want to move
her into the one one position so to call
for the game board script I can then go
game board I'll go and both of these
need to be true for us to be able to
move and then I can go is valid space
and then I'll get whatever Miss
pac-man's position is and I can do that
with transform position dot X and
remember it's minus 1 because we're
trying to move left and then after that
I can just go and since the Y positions
watch aiming changing I can just go
transform position Y and that's gonna
come back and provide me with whether
that is a valid position to take or
movement or what
okay and I'm gonna be doing this a
couple times so I'm gonna copy that I'll
then go down into my D position down
here and do the same exact thing and
whoops I should I put and inside of
there alright so I got that and now with
D of course I'm moving in the right
direction so what I'm gonna want to do
is instead of subtracting one I'm going
to add one okay so that was easy got
that set up that set up now let's move
on to the next one now I'm down in the W
position right side here and I put space
inside there yes I did okay so this time
with W I'm trying to move up so I'm
gonna get rid of the change here to the
X and instead add that value right there
plus one to the Y position and then the
only one left is the S position so you
can see how easy it is to come in here
and just verify all this and of course
that is going to be well let's get rid
of this like that s is down so that
means I need to subtract one from Y and
save all that and here we are back
inside of here and you can see that now
whenever I'm trying to move right it no
longer works well of course if I'm
inside the maze it works but everywhere
else we no longer have the issue of you
know going through walls
all right so pretty awesome and a pretty
easy solution too I'll make sure that
miss pac-man never goes through walls
next thing I want to do is I want to go
in and get my ghost and animate it so
that it's eyeballs look in different
directions so if we open up our sprite
sheets you can see right here this is
our ghost and there is the ghost looking
in the left direction that's what he's
doing currently right and down and up so
I'm gonna switch between those different
versions of the ghost depending upon
which direction and goes from moving and
to do that of course I'm gonna go in
scripts and open up ghost so here is our
ghost and let's go way way way way to
the top and start setting this up and
where am I gonna do it oh it's funny I
guess I already went and put in the
sprites of reference the sprites to look
in those different directions I just
didn't set them up so let's jump back
over and you and the in set those up
okay I'm in back in unity and
we can close all of the dots and all
this stuff so let's get rid of that and
get rid of that and open up the ghost I
don't think i drugged or drag those over
there
no I didn't okay so let's go and this is
gonna be sprites so this is looking left
this is looking right that is down and
up alright so we will get the red ghost
and we'll come in here so this is going
to be a left look left and this is look
right and this is look I forget I think
it was backwards I think it was down and
then up so I'm just gonna do that and
then I'll verify afterwards alright so
up ended at the death so this one right
here three should be up and it is okay
and two should be down alright great
got that set up and save that and then
just switch them over inside of our
scripts so let's open up scripts and
ghosts and here we are now if I want to
be able to change my sprites I'm going
to have to get a reference to my sprite
renderer so let's go in there and get
that let's skip up public sprite
renderer and then let's go and set that
up inside of awake and I'll get a sprite
renderer is equal to game object gets
components and sprite renderer and there
we are that's all we need to do to get
ahold of that sprite renderer whoops I
forgot front put s or inside of there
and there that is and that's all set up
of course you know the sprite renderer
is a component attached to our ghost it
allows us to change the sprite
representing our ghost and now I just
need to go in here and actually change
that and where I'm going to change it I
mean I have to change it in four places
luckily enough come down here inside of
this guy I'm gonna throw a couple more
if blocks inside of here and I'm gonna
say if my move vac is equal to if I want
to find out if I am moving to the right
I just go vector two and right like that
and then I'm going to do this for all of
the other different options so I'll go
else paste that inside of there and this
one right
here is going to check if I am looking
to the left and then I'll go else and
check if I am looking up and then
finally I will check if I'm looking down
so I've got all of those all set up
inside of there then I'm gonna copy and
paste this guy in here a whole bunch of
different times so let's just go and get
this out of here
and this also provides security and
making sure that we are actually moving
in valid directions as well with our
ghost and then I'm also going to change
my sprite and to do that I just go SR
and sprite is equal to look look and
this is gonna be right sprite there it
is and then I'll do the same thing with
the other ones see quite easy take this
little bit at a time so this one is
looking to the left so look left sprite
and then also this is gonna be for
looking down or let know this is looking
up and then this is looking down so just
a couple little code changes here and we
get some pretty dramatic results so this
is look yeah I looked down and there
that is in there that is alright so now
the ghost should animate properly inside
and run it and then see and as you can
probably see the ghost isn't working
right whenever it's making these turns
it's looking in the correct directions
alright so good stuff now what I want to
do is allow my ghost to go through
portals if that becomes a thing that it
wants to do so right after this and this
is inside of the ontriggerenter so this
is checking or being called every time
there's a collision so I'm gonna come
down here and the collision of course is
gonna be with dots they're actually
points I guess I should use the right
words here all right so to verify that I
can go through a portal I'm gonna go
vector 2 and I'm just gonna use the same
code that I used before so let's go yeah
maybe I should change this the ghost
move act makes a little bit more sense
so I'll go ghost move vector
is equal to new vector2 and zero zero
and then I'll go if transform and what
I'm gonna do is whenever it hits a
position I in our maze it's going to
automatically jump so it's going to if
it's going and hitting a position on
moving towards the left it's gonna
reposition it to the right and then make
sure that it continues going to the left
and if it hits a position on the right
it's gonna jump the pac-man across the
screen to the left
and it make sure it goes that way a
ghost I'm not pac-man all right so X and
this is gonna be less than two and
transform dot position dot y equal to
fifteen point five and I'll show you
here in a second where I'm getting these
numbers from so we're gonna transform
position equals two new you can see I'm
changing the position of our ghost here
so this is going to be vector two twenty
four point five F and it's 0.5 because
I'm positioning the ghost in the center
of the maze that's the reason why it's
0.5 then I'm gonna go ghost move vector
is equal to new vector 2 and I what I'm
gonna do here is make sure that I
continue moving towards the left
direction and then go and set the
velocity by referring to the rigid body
of the ghost is equal to ghost move
vector times whatever the value of speed
is for our ghost and then we're gonna do
exactly the same well sort of the same
thing going in the opposite direction so
I'll say else if transform position and
then I just need to change these guys so
what this is gonna be is this is going
to be greater than 25 and this is still
gonna be fifteen point five here I'll
show you why so if we come inside of
here the portal if we click on this this
is going to be fifteen say it's actually
fifteen point five because it's rounded
down to be in the center of the screen
so that's what that Y references and
then right around here you can see this
is X 26 and this is one so what I want
to do is before it gets to that point
and tries to make a decision so I want
it to come in this direction and before
it gets here I want it to jump across
the screen over to here after this point
and then continue moving in that
direction and vice versa all right so
hopefully that makes sense then I'm
going to go in here transform position
and I'm going to change this to two and
F and then this is whoops to F and this
is gonna be fifteen point five once
again and then go smooth vector in this
situation I want it to be moving towards
the right and then this can stay exactly
the same
all right and the last thing I want to
do is I want to set it up so that my
ghosts will be able to change blue if
pac-man eats a pill so I'm gonna come up
here have to change a couple different
things we're not change add a couple
different things one thing I'm gonna
track if our ghost is blue or not so I'm
gonna go bull is ghost because the
reason why I'm tracking this is so that
the animations aren't called so that I
turn to goes blue and then whenever I go
and make a right turn or left turn or
whatever it doesn't switch back to the
red ghost you know that would be kind of
counterproductive so I need to store
that another thing that I want to do is
I want to store the sprites for my ghost
the blue version of my ghost so I'll go
blue ghost I've got that set up jump
over into unity before I forget and
let's go move these up here get rid of
that there's the red ghost and the
sprite for the blue ghost there it is so
I'll go and get this guy and then I'll
find my scripts you can see there's the
blue ghost so I'll grab this guy and
drop him inside of there now he'll be
able to change blue all right so we got
that set up now I need to set it up so
that the ghost is not changed or
animated whenever it is blue someone
come down here to where we were and fix
that right now I think probably the
easiest thing is just to come in here
and change it right here so I'm gonna
say if not is ghost blue throw that
inside of there get rid of this and
throw that inside of there and I'm gonna
copy this so if it you know isn't blue
then you know we can change that
otherwise we will
change it so I'm going to do this to all
of the other different versions as well
and also inside of here and then with
this one okay so moving right along
taking everything together alright so we
got that set then what I need to do is I
need to provide a way for outside
objects to change my ghost Ballou so
scroll through all that code Wow a lot
of code way down here to the very ends
and I'm going to call this is going to
be public void and I'm gonna call this
turn I'm going to turn the ghost blue
and for about six seconds I might change
that depending upon how this plays and
then whoops not flat and not black back
so it's gonna turn the ghost blue for a
couple seconds and it's going to turn it
back alright so got that set up and I'm
going to need to use a start covert een
with this so that means I'm gonna go
ienumerator
and the name of him of this of course
you know what why don't I just call this
turned ghost blue and then call the
other one this alright just to keep it
simple so I'll go turn ghost blue and
then this other one will be and back
alright I think that makes a little bit
more sense so I'll paste that inside of
there and this guy is going to first go
to is ghost blue and change that to true
and after that it's going to change the
sprite for our ghost by calling the
sprite renderer to the blue ghost that
we passed inside of there and then after
that it is gonna wait six seconds before
it changes it back to its original color
so yield return new and of course we'll
use wait for seconds and this is gonna
be six seconds and then it's gonna go is
ghost blue and set it to false and that
is going to allow it to go and animate
again and then here I just go store its
co-routine and then call turn ghost blue
and back
got it set good stuff whoops make sure I
put the parentheses inside of there all
right okay so the ghost is all set up
and ready to be changed to blue now I'm
back inside of miss pac-man here once
again and I'm gonna come down here right
after my game board I'm gonna have to
get a reference to the ghost script so
that I can call that function so I'm
gonna go ghost I'm gonna call this red
ghost script save that and then down
inside of awake I'm gonna f actually
create that guy somebody go game object
very first thing I want to do is get the
red ghost game object so game object and
I'll call this red ghost game object and
how we get game objects as we go game
object and finds and then name of the
game object that we want to get a
reference to and then once we get that
we can now come in here and get the
script that is attached to said game
object so I'll call this red ghost
script cuz that's what it is and to get
that it says ghost and that's the red
ghost script up here you can see it's
elf type ghost and then I go red ghost
or this is gonna be red ghost game
object and get components and type of
and that's gonna be ghost all right and
that's how easy it is to get that red
ghost script now I'm gonna come in here
and get all of my pills
so let's go get these guys and I'm going
to add circle Collider to all of them so
I'm just gonna select all of them go add
components and physics 2d and circle
Collider and also I'm gonna have is
triggered checked for all of those and
also I'm gonna come in here and check
this put the check there that's going to
show them on the screen see they are
there now now they're going so that's
what that check does everything looks
good there
back over inside of my miss pac-man
script and then I'm gonna have to come
down here or where we are verifying that
we hit something with back
which is gonna be the pill in this
situation so let's just go there we go
ontriggerenter to D so we're gonna be
looking for a collision with a pill I'm
gonna come in right here and put in that
reference
whoops make sure it's outside of the
point area I definitely want to be
inside of there that wouldn't make any
sense
so let's come right here after we
checked if we hit a dot or not and here
I'll just copy this guy and paste that
inside of there and this time instead of
dot it's gonna be pill and then I want
to play a sound effect so I'm gonna call
my sound manager so sound manager and
whoops instance just gonna play a pill
eating sounds play one shot and I'm
probably gonna do a tutorial that gets a
little bit more into making good video
game sounds I've kind of avoided that
because of issues on YouTube that won't
allow me to use certain sounds alright
so there's power up eating and then I
need to call the script that's gonna
turn my ghost blue so I'm gonna go red
goes script and then call turn ghost
blue that's how easy that was put these
closing parenthesis inside of here so
that error goes away
this is gonna be moved over here there
we go and I guess that's all I need to
do with that so that's good actually
that might be all I need to do
altogether if we open up this pac-man
let's see if it works
all right so boom there's the ghost it
is blue and is gonna change back someday
I think there it is now it's red there
we go guys there is a whole bunch of new
things we did with pac-man so a pretty
cool stuff and in the next part of the
tutorial I'm going to cover a couple
other things and finish up this game and
move on to the next one and of course in
the comments section below you should
leave any games you'd like me to cover
and which games you'd like me to make
and I will do my best to do so so like
always please leave your questions and
comments below otherwise till next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>