<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>How to Make Android Apps 22 | Coder Coacher - Coaching Coders</title><meta content="How to Make Android Apps 22 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Derek-Banas/">Derek Banas</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>How to Make Android Apps 22</b></h2><h5 class="post__date">2015-01-11</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/fAnXIKdwniY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">well hello internet and welcome to part
22 of my how to make Android app
tutorial today we're gonna cover how to
send and receive text messages so
there's a lot to do why don't we jump
over first and see what the finished
products gonna look like
right so the very first thing I'm going
to do is show you how to set your
testing app as the default texting app
just go into settings and more and then
default SMS app and click on that and
then pick it mine's texting or at least
that's what I called it and here you can
see the basically out of the app very
simple it's editable text box whole
bunch editable text boxes and here I'm
gonna type in a little message that I
want to send and of course I have to
type in a phone number but I'm not going
to show you that and over on my wife's
phone you're gonna see that the message
shows up and if she then would go in and
type a message back to me I'm just gonna
type in nothing just to keep this very
simple and then I'm gonna send it and
you're gonna see that it's going to pop
up back on my phone so let's jump into
the code and create this thing okay so
you saw the finished application very
simple just like all the time so it'll
be very easy for you to implement now
what I'm in right now is the
androidmanifest.xml file now as you saw
I showed you how to set your application
as the default texting app because
that's required ever since Android
KitKat came out what what I'm going to
show you here is how you have to set up
your Android manifest file because it is
extremely specific so that you'll be
able to make your application the
default texting app and I went ahead and
just did this ahead of time of course
all this code is available in a link in
the description what you're gonna need
to do is get permission to send your
text messages get permission to receive
them and read them then as we scroll
down inside of here you're going to see
all of these different actions and
categories you're going to have to
define inside of the main activity right
here this is all going to be copy and
paste type of stuff you're always going
to use the same thing you definitely
don't have to try to memorize that that
would just be silly then down here we're
going to define all of our broadcast
receivers now what I'm gonna do is I'm
going to set these up as static inner
classes inside of main activity and if
you want to refer to a static inner
class you would just type in whatever
your main class is followed by a dollar
sign and then follow it by whatever the
classes name is now this guy is going to
be receiving all of the text messages
for your application
down here we're going to also set it up
so we'll be able to receive different
types of media in the text message I'm
not going to do that in this part of the
tutorial though however you must set
this up whether you're going to be
receiving this data or not for your text
messaging app to show up as the default
text editing tool and then we're also
going to use this headless SMS service
here this also must be set up and that
is going to handle whenever you have a
pre-written message or whatever that is
going to be sent out whenever a call is
rejected so that's what those different
things do and like I said just copy and
paste this stuff into your Android
manifest file and you'll be ready to go
now let's jump over into activity main
you already saw the application it's
very simple it just has an editable text
box up here this line is gonna handle
the phone number this is going to send
the message and this is where the
message is gonna go off and terribly
fancy here you can see everything right
there and how that's set up see right
here we're going to have to create a
method that is going to handle whenever
this button is clicked on and we could
just come in here right now and have
that created over in main activity and
there it is and you can see that nothing
else here is particularly that crazy or
complex and we're just going to now jump
over into main activity and start
writing all the code we need to send and
receive text messages okay so here we
are over in the main activity section
and I just need to set it up so that our
components will be available to us and
there we have those all set up next we
need to also we're going to be using a
static inter-class and so that we will
be able to pass information back and
forth between the main activity in that
static inter-class what we're going to
do here is create a static string and it
is going to hold a list of all the
messages both that we send as well as
the user sends back to us then we're
going to also create a handler and what
this is going to allow us to do is to
update the UI or the editable text
window whenever any new messages are
sent to our application and the version
we want to use is the Android OS version
of the handler and basically what this
handler is going to do is schedule for
our codes
execute at a set point in time in this
activities thread meaning the main
activity and we're gonna set it up so
that it's going to auto update to the
editable text windows let's say every
five seconds next we need to come in
here and initialize all of the different
components that we're going to be using
and we're gonna do that in exactly the
same way that we always do it with fine
view by ID and there we go everything's
been initialized now if we want to be
able to update the editable text box
every five seconds what we're gonna do
in this situation I'm gonna use a thread
just as an example of how to use threads
this works good enough and we would go
runnable and that's gonna create
everything for us and then inside of the
run area we're gonna say while true
which means it's gonna run for a while
here of course we're gonna say try and
then thread sleep 5000 which is gonna
make this sleep for five seconds there
we go
call our Handler and post new runnable
and again we're going to put another run
inside of this and then inside of here
we're just going to call the editable
text box I've got right there and then
just every five seconds we're going to
update that with whatever information is
stored in our messages variable above
messages is this guy right here and
let's call it messages because messages
makes more sense than message and
whatever yet this is gonna say we need
to add some catch clauses make that
error go away and then of course put a
semicolon here and then the final thing
we need to do is go down here and call
Stuart for this thread to execute all
right so that's gonna handle updating
everything every five seconds nice and
neat pretty easy to set up and
understand now we'll get down into the
send message ports very easy to send
text messages first thing we're gonna do
is we're going to get the phone number
that they provided in the other editable
text box in our application there that
is and of course just go get text and
then to string and there that is now
we're going to also get the message that
they want to send there that is it tucks
again and then to string okay so we have
our telephone number we want to send our
message to and our message may be doing
some funky things we're gonna need a try
block here then we're gonna have to
create an SMS manager and this is going
to handle sending and receiving data and
for us just call it SMS manager and to
get this guy we're going to call get
default there you go
code writes itself there we go SMS
manager again and we're gonna say send
text message doesn't get much easier
than that
first thing we're gonna do is provide
the phone number that we want to send to
in this second part I'm gonna mark this
as null this will be for our service
center address which we're going to
ignore and then the next thing we want
to do is put in the message that we want
to send and then if this wasn't marked
as null this would broadcast whenever
the message was successfully sent and if
this wasn't marked as null this would
broadcast whenever a successful delivery
was sent and we can come in here and put
a toast of some type make text and say
something like message sent there we go
and show and the catch Clause here that
we want to handle is going to be if they
did not provide a telephone number or
data or whatever and that guy's known as
illegal argument exception and we could
make another text and we could say
something like enter a phone number and
message and then show of course there we
go
we could also pronounce dark trace of
course there we go and then of course
the only other thing we want to do is
update the messages so that we'll be
able to display them in the editable
text box and I could say you just to
keep that simple
and message with a break and that's all
we need to do there or actually let's
get that out of there and put this after
here don't want to put it into catch
clause there we go and then this isn't a
close that guy off next thing we're
gonna do is set up the broadcast
receiver to be able to receive text
messages and like I said before I'm
gonna make this static class call this
SMS receiver and this is going to extend
our broadcast receiver which we've
talked about a lot in the last couple
tutorials and of course this is going to
want some methods implemented so
implement those methods okay there we go
there's on receive we're going to set up
another SMS manager just like before
it's gonna allow us to send a receive
data and text call get default we're
also going to for the Android manifest
going to have to set up a blank
constructor
for this guy there that is and then
we'll go into onreceive and decide what
we're going to do whenever a new message
is received information is going to be
sent as a bundle so let's go a bundle
and then call intent get extras and like
always throw this in a try block we want
a first check if we received any data so
we can say a bundle not equal to null
and we can do some things then we want
to store the data sent as a PD U or a
protocol data unit and that just means
it's going to include both the number
and the text and other such things and
let's just create an object right here
and let's call this PDUs object for PDU
protocol data you know like I said
before change out the pain and then
let's cast this object to right and then
go bundle gift and then pass inside of
this PDUs now we want to cycle through
the data that we received so it's just
create an integer well this is greater
than us objects the length the number of
different items we got there I then
we're gonna create an SMS message object
from our raw PDU data and let's go in
here
make sure we get this guy there it is
there we go and we'll say create from
PDO cast us to a byte array and throw I
in there to increment through that now
if we want to come in here and get the
telephone number that sent us the
message just store this inside of a
string and phone number we just call SMS
message and get display originating
address that guy right there that's
gonna get us our telephone number and
then of course we're also gonna want to
get our message SMS message dot get
display message body and that's gonna
have our text message now I didn't do
this in the app whenever I first showed
it because I didn't want you to see the
telephone number I was sending but if
you wanted to be able to update messages
with the telephone number just go to
messages plus and if we want to get our
phone number of course we just type in
phone number and then if we want to also
display our message put message in there
and then we want to also put in a new
and there that is and then we want to
get down into our try block area here
and let's just do a generic catch go
just do log message SMS receiver and
just say exception SMS receiver so we'll
be able to figure out what happened
there and that's all we need to do to be
able to receive the text messages the
only other thing I'm like I said I'm not
gonna get into it right now want to also
be able to handle multimedia messages
and whether you're doing this or not
remember if you want to actually have
your app be available as the default
text in the app you have to have this in
here whether you're utilizing it or not
so I'm just gonna go public class mms
receiver and this is going to extend the
broadcast receiver just like before and
then we're going to have to implement
some methods here my methods and that's
gonna be on receive just like previously
there it is and then we could just come
in here and say that this is unsupported
everything will still work whether you
have this all set up or not there it is
and we could do something like not
implemented yet then you're basically
gonna have to do a same exact thing for
the Headless SMS service and like I said
before this is gonna handle whenever you
want to send a pre-written message
whenever a calls rejected I'm just gonna
paste this in here again let's call this
Headless SMS send service this is also
gonna be a broadcast receiver and then
you're also going on want to come in
here and set up blank constructors for
these guys that's all you need to do and
then do the same thing for this class
and then the final thing we need to do
is remove callbacks for our anonymous
runnable x' and how we're gonna do is
just come in here and go to generate and
then override methods and then we'll go
into on destroy and then right here
we'll put in our handler dot remove
callbacks and messages and then inside
of here we'll just type in null and
that'll kill everything there you go
guys that is how you're going to be able
to send and receive text messages inside
of Android and all of the code is
available in a link in the description
and please leave your questions and
comments below otherwise till next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>