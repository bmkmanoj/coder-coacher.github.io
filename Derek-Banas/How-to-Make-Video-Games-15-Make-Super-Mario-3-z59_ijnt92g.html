<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>How to Make Video Games 15 : Make Super Mario 3 | Coder Coacher - Coaching Coders</title><meta content="How to Make Video Games 15 : Make Super Mario 3 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Derek-Banas/">Derek Banas</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>How to Make Video Games 15 : Make Super Mario 3</b></h2><h5 class="post__date">2017-07-22</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/z59_ijnt92g" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">well hello internet and welcome to part
15 of my how to make video games
tutorial series in this part of the
tutorial series we're going to fix that
collision error we were having in the
last part we are also going to create
our prize blocks make those work I'm
going to cover animation curves
soundmanager
the user interface the brick block coins
and a whole bunch more and like always
all of the code and the images and
sounds and everything is in the
description underneath the video and I
have a lot to do so let's get into it
okay so at the end of the last tutorial
I told you to try to figure out why we
are having this problem where we are
colliding with something that isn't
there
well actually what is going on is
whenever you put many colliders next to
each other there can be errors it's just
you know where one collider will just
catch on another one and it's very easy
to fix what we're going to do is we are
going to come in here and I throw a
wrapper around everything because I do
that a lot but you don't need to do that
in this situation either way so what I
want to do is I want to come in here to
our graph section and I want to grab all
of these different guys and do I have
box clutters on all of them yes I do
okay so what I'm going to do is I'm
going to come over here and I'm going to
remove the component from every single
one of these guys so none of the graphs
have box clatters now then what I'm
going to do is I'm going to select the
empty shell that contains all of our
grass and then I'm going to add a box
Collider to it so I'm going to go
physics to Z and box Collider 2d don't
need to do anything there and then I
just need to position it properly so
we're going to zoom out of this guy and
we'll select this and then we need to
position the collider what I'm going to
do is come down here and mess around
with the offset and size to get
everything to work here so let's just go
and increase the size on this and let's
go and increase the offset on this or
it's going to be decrease in this
situation let's go and bring the law
down and what I'm doing here is just
moving these guys backwards and forwards
okay so let's bring this down to roughly
in the middle of our empty shell that we
have are all of our grass objects in
we're just
and zoom out just a little bit so that I
can position this and then increase the
size until it completely surrounds all
of our graphs objects something like
that
over here and of course I can come in
here and grab those things and then
increase the Y value as well and there
we go
so now we can come in here and if we run
it again we are going to get rid of
those collision errors and we are going
to fix this issue with our jumping as
well and also we're going to make our
coins work we're going to make all these
blocks go and break and a whole bunch
other different place all right so we
are no longer stuck on any of these
false collisions all right so that
problem solved now I'm going to go in
and set up the sound manager and I've
done this many times before what we're
going to do in all the previous
tutorials but I'm going to do it here
real quick so I'm going to go create
empty I'm going to sort of like this guy
and I'm gonna rename it sound manager
okay so we got that set up going to
select the sound manager I'm going to
come over here and go add components and
come down to audio and go audio source
and then I'm going to come in here and
I'm going to go into the scripts area
and I'm going to create a new C sharp
script and I'm gonna call it clown
manager of course and if you're on Mac
OS or whatever by the way everything
here is exactly the same alright so I
just want to always say that so it's up
in a visual studio okay so here's the
sound manager I'm going to do exactly
the same thing that I always do with the
sound manager and as you're going to see
basically what I'm doing here for you is
I'm creating a whole bunch of cut and
paste sort of solutions that you're
going to be able to use eventually to
make just about any game you can imagine
so we only ever want to have one version
of our sound manager so what we're going
to do is we're going to create a what's
called singleton which basically means
we are going to create a single instance
of our sound manager and if anybody
tries to create another sound manager
we're going to delete it and return the
one that we have so what we're going to
do here is we're going to define all of
the audio clips we're going to use so
I'm going to have audio clip and jump
and I'm going to have audio clip get
Coyne and we might add other ones at
some point and I'm also going to say
rock smash which is going to be whenever
we break our blocks and let's also come
in here and I
refer to the audio source so that I can
play my different sound effects so I'm
going to say audio source and call this
sound effects audio and then inside of
start this is where we are going to
create the instance of our sound manager
so what I'm going to do is I'm going to
say a instance is equal to null that
means that it doesn't exist well in that
situation I'm going to say instance is
equal to this alright so we're going to
create that else/if instance is not
equal to this well in that situation I
want to destroy the this game object ok
so that is going to guarantee that we
only ever have one sound manager then
after that we can come in here and go
audio source I'm going to call this the
source is going to be equal to and get
components and you can just say audio
source to get a hold of that component
that is attached to this sound manager
and there it is and sound effects audio
is going to be equal to the source okay
so we have that all set up we are not
going to need update all we're going to
need is a function that is going to be
callable from any other class or
whatever any other piece of code that
you have whoops and it's going to play
sounds so play one shot it's going to
receive an audio clip that's going to be
sent in and then it's going to play it
and to play it we just go sound effect
audio dot play one shot and whatever the
clip is ok so there you go now you can
play sounds and everything is awesome so
there's a sound manager once again now
what we're going to do is we're going to
go get our sounds so I went and created
a couple sounds here and I have them you
know in the link on my website and drag
them drop them in the sounds area
everything's free by the way I mean I
don't sell anything
I sell nothing I get sponsored by nobody
so just so you know alright so grab my
sounds and you can see over here I have
all of my audio clip areas so I'm going
to go sounds and I'm
GoGet coin and drag it and drop it right
there and I'm going to go jump and get
it and drop it right there or did I grab
it now okay jump trigger it is and rock
smash whoops whoops what I doing here
grab the sound pitcher once again well
actually I need to grab my script first
and drag that over so sound manager grab
it drop it right there and you can see
the coins and all that sounds and all
that stuff set already and then I'm
going to get sounds and I'm going to go
and get rocks smash and rig it and drop
it right there okay so there's all my
sounds and they're attached to my sound
manager fantastic so we got all that set
up now what we're going to do is make
our prize block work so what prize block
am i I only have one prize block so I'm
just going to select it right here in
the scene area so there's the prize
block and I'm going to need a couple
things here I'm going to need a box
Collider so let's go physics 2d box
Collider what else am I going to need
I'm going to need a rigidbody so I'm
going to go physics due date because I
want to animate hitting the prize block
and bouncing so I'm going to go
rigidbody there it is click on that this
one's going to be kinematic and the
reason why is it's only going to move in
one way and that's it we don't really
need to control it otherwise so we're
going to click on it so that that is set
then what we're going to do is we're
going to create another script so it's
going to scripts area here right there
right click and c-sharp script and I'm
gonna call this prize block and open it
up and here's the prize block alright so
I want to add an atom animation effect
to this so that whenever the prize block
is hit it jumps up in the air how you do
that one way you can do that is you can
go public animation curve let's call
this animation or whatever and what else
am I going to do with this well I am
also going to have the allow the user to
define how many coins are stored inside
of this so I'm going to say coins in
block just like Mario and it's going to
be 5 all right so we got coins in block
what else am I going to do with this
umm I don't know right now that's not
really certain kind of programming this
live if you're if you're unaware of that
all right so what am I going to do well
I'm going to go and set my animation
curve first so let's come over here
and we will get our prize block this is
this guy right here so prize block I
have a prize block empty but I didn't
put it inside of there I can drag and
put it inside there why not okay so now
it's inside of that okay so I got that
selected now what I'm going to do is get
the prize block script drag it over here
drop it inside of there and you're going
to see right here this is going to allow
me to define how my animation is going
to work so I'm going to click on that
and you're going to see the way that
we're going to be able to style my
animation now what I want to do with
this animation and was whenever mani
hits it I'm with the block to sort of
jump up real quick and then fall down
real slow how do you do that well what
we're going to do is we're going to
select this guy right here so I want it
to jump up real quick to the highest
part so I wanted to jump up one space in
transform jump it up that one area and
then I want it to sort of smooth out so
I'm going to take this at about like I
don't know it's up to you whatever looks
cool to you so let's add that and then I
want it to come back to where it was so
right here and there you can see it's on
one and it's everything's exactly the
same and you can play with this all you
want and try different things but that's
the animation right there
okay so cool stuff and that's how we do
a little animation inside of unity
and that actually reminds me of
something else I'm going to need a user
interface because whenever we click on
this or jump and hit this prize block
we're going to generate coins which
means that we are going to have to have
a score so let's go create and I'm going
to go UI text and it's going to create
text area and also a canvas area I'm
going to select this well let's just
double click on this whoops there it is
down there you can see a quick way to
get to whatever thing you're trying to
work with but he the way I'm going to
select it I'm going to call this score
so there it is it's called score now go
back into my canvas selection and I'm
going to mess around a couple different
things here I'm going to go a screen
space camera and the reason why I'm
doing that is I want the UI elements to
move as the camera moves on the screen
otherwise they'll like fall off the
screen will just you know would look
stupid so let's grab this grab it over
here and drop your camera right there
fantastic let's jump back over here to
score and select that guy and let's
change a couple different things I want
this to be Arial bold and I don't
what I want the size to be I'll see in a
minute and the the color I know I want
that to be white so let's go and select
that there it is now it's white like I
said if you double click on this it's
going to take you right to it and you
can see it's kind of blurry we're going
to fix that don't worry let's go back to
select canvas again okay so now what you
need to do is go and get your text which
is down here and moving into position so
that shows on your screen so I'm just
going to grab it and I'm going to drag
it up here let's go and move this down a
little bit and see how we can position
this I'm just going to have it be a zero
though so I'm going to come in here and
just change this to zero and let's go
and play it and see what it looks like
now you can see it's right here really
really little it's messed up okay so
let's move it in to it this is basically
just a guessing game to make this lay in
here right I'm going to increase the
size of my text and I'm also going to
increase the height on this let's change
this to fifty or something okay so it's
getting bigger let's have it be
something like forty that looks about
right
and I'm going to drag it and sort of try
to position it I personally don't
understand why you can't lay it in here
to get this to work but this has always
been the way that it's been at least
lately with unity okay can you see it's
right there so we want to move it over
and then up a little bit alright so over
here everything has little quirks and if
you guys know how to fix that please
tell me in the comments I'll be very
appreciative and move it up there and
see where it lands and now it's off the
board let's move down a little bit and
there it is
okay so there we have our score now what
we're going to need to do is go in and
change the score and play sounds and all
that other stuff so to do that we're
going to go and double click on our
prize block and here we are
so what are we going to do well we are
going to need to track for a collision
and how we check for a collision from
Manny into our prize block is we create
a function called
on collision enter 2d and we are going
to receive what collided with our prize
block and then we're going to react to
it now the very first thing we want to
do is we want to make it so mannequin
on top the blocks but also if he hits
the bottom of the block it will react so
it's going to ignore any strike upon
this block unless it's at the bottom of
the block well how you can check for
that is you can go well what did we
collide with content and then check if
it collided with the bottom of our block
or not so point y plus then
transform.position
Y and the transform.position y is the
prize blocks y so we want to see if the
contact with the thing that contacted us
or Manny when he jumped up we want to
check if his Y point is below the Y
point for a transform and if it did well
that means that he struck the bottom of
our prize block so we want to allow that
then what we're going to do is we are
going to create a KO routine and that's
going to allow us to pause things so
you'll see so I'm going to go start
co-routine and I'm going to call it run
animation then we have to create that
guy now let's just go create it right
here now all of these code routines need
to return an eye and numerator numerator
and we called it run animation and what
we're going to do here is we are going
to use the animation curve we defined
for moving the block up and down and
we're going to make it work do so we
have to very first go and get the
starting position for our plot PRIZE
block so I'm going to say transform
position so that we can move it back
into its other position then we're going
to cycle through all of the different
keys in our animation curve so that we
know how many y-values to move the block
up and then back down again so we're
going to go for float X is equal to zero
while X is less than and get our
animation that we defined with that
little curve and we want to get the
length of it minus one and then time
because it's over a period of time we're
going to be cycling through this stuff
and then we're going to increment
X based off of the passage of time so
that it moves in time just like we
expect then what we're going to do is
we're going to go transform position is
going to be equal to new vector2
and we're going to use starting position
X and let's go down the next line
starting position y + and we want to get
our animation change and how we do that
as we go evaluate X and then close that
off then what we need to do is we need
to yield back
we want to continue looping at the next
update to period which is going to be
based off of your frame rate and how you
do that is you go yield return and null
okay so we'll come back up inside of
here then what we're going to do is
we're going to check if our block
actually contains any more coins so
we're going to go coins in block and if
it's greater than 0 well then we know
that we can continue spitting coins out
so one thing I want to do is each time
we spit out a coin I want to call the
sound manager to play a sound so I'm
going to go instance and play one shot
and then to play that specific sound we
go sound manager instance and we want to
play the get coin sound so there's a guy
what else do we want to do well we want
to increase the score in our text
components and that is going to be
increased text UI score and this is a
function another one of those functions
that I use all the time I'm going to
create it in here in a second and then I
want to also coins and block I want to
decrement that by one value then we're
going to come down here and create
increase text score and we can just come
down here get rid of all this stuff
blink on alright so then we're going to
go avoid increase text score and how
this is going to work is it is going to
find the score UI component so I'm going
to go VAR text UI component is equal to
game object
find and if we call it score remember
on our screen and then I'm going to say
getcomponent text and that's how we're
going to be able to get the value that's
stored inside of it and also change it
send then we're going to go and get our
score right here is going to be equal to
and I'm going to call int parse we're
going to convert from a text object to
an integer so we'll get the text from
that component and convert it into an
integer we're going to then increase the
score by a value of 10 because that's
how much we want the coins to be worth
it doesn't really matter then I'm going
to go text component text is going to be
equal to score and we have to turn it
back into a string whenever we update
the user interface and that is all we
need to do now we can jump over and test
it all right everything looks okay
whoops nope nope nope rod block error it
says the type or namespace text could
not be found I forgot to call for the
unity engine UI so I'm just going to
come up here I do this all the time
I'm gonna go using UV engine dot UI
and there it is now to work all right
let's run it see if it works
there's mani Hey look at that what my
scores not updating why isn't it
updating I don't know let's go and fix
that when does it stop no it isn't
stopping all right so what'd we do wrong
we'll fix it well one thing I forgot to
call this score I thought I did but I
guess I didn't so let's call the head
score and that should work let's go test
it and run over here and there goes aha
and that fixed everything okay so now
we're jumping and hitting the block but
it's not giving us any more coins all
right so there we go our prize block is
working the sounds working the score
change is working also might want to
change out from that let's increase the
size of it or something all right so
let's go and change it to one point ah -
lets go a bit bigger let's go - and to
try something like that let's run it
again that's okay that looks a little
bit better let's change it there too
let's zoom out a little bit and
grab this guy move it down a little bit
something like that and there's our
score all right that looks a little bit
better solar kind I don't know okay so
we could our scores set up a prize block
is working and now we want to make our
brick blocks work let's zoom out of here
move in there and zoom in you know
something weird happened this is going
to happen to you all the time all right
so you're going to see we're not all the
time just randomly okay you're going to
see that I can see my scene here right
now but as i zoom in on it it turns gray
how you can fix that is to come up here
and just right click and then go add tab
and scene and create dip see it's back
now and then just come up here and
delete this scene not sure just a weird
little bug in unity but that's how you
fix it so just so you know something
that will come up eventually all right
so now what we're going to do is we're
going to go and fix our brick blocks
we're not going to change this one but
we're going to change these three so
what we need to do is we need to select
all three of these brick blocks there
they are let's go and just get which
ones we need so we need this one is this
one and this one and not that one so
let's go and select all of them well
actually let's go and select every
single one of them because we are going
to want to add collisions to all of them
so we're going to come over here and go
add components and physics 2d and box
Collider all right that's all we need to
do for those then we want to set it up
so that whenever many jumps up and hits
one of these on the bottom that they're
going to explode and we're going to go
and throw a different sprite on that and
that's bright is going to be this
exploded block okay
so we're going to go in here and create
a new script so right click on this
create C sharp script and we'll call
this brick block that we are and let's
open it there it is and let's jump back
over to unity and drag it and attach it
so once again we're going to select just
the blocks that can be hit from the
bottom which are going to be these three
right here and then we're going to go
and get our brick block and drag it down
and then attach it just to those guys
then open up brick block again okay so
here it is so what are we going to need
to do with the brick block well I'm
going to need to change my sprite
because I want to change it to the
exploded sprite and you use spray
renderer to do that I'm going to also
define in a public way the sprite that
we are going to change into and I'm
going to call that exploded block I'm
going to define again in a public
changeable way in the inspector a period
of time to wait before switching sprites
and call that seconds before sprite
change and set that point to f4 now
don't know what it's going to be another
thing I want to do sometimes we have
problems with the sprite renderer and we
want to make sure that whenever this is
first created that our sprite renderer
is set up so I'm going to do that inside
of a wake I'm going to go get component
let's not get hash code you get
component and sprite renderer and there
that is and then I'm going to handle the
collision don't need to start or update
for being able to do this I can just
come in here and go void on collision
enter 2d we're going to do exactly what
we did before all slightly different and
we're going to go collision 2d and then
inside of here we're going to check that
it hit on the bottom once again just
like we did before so here we'll go
contacts points dot line exactly the
same as what we did for the prize block
transform.position this is going to be
comparing the Y position for the blick
brick block to Manny's once again we're
going to call for our sound manager to
play a sound so sound manager instance
play one shot and then call the sound
manager and tell it exactly which of
those sounds we want to play it's going
to be rock smash got that set then we're
going to change the sprite for our brick
block to whatever the exploded block is
set for we're going to wait a fraction
of a second then and then destroy the
brick block all together and we call
destroy object game object which is
going to be the brick block this brick
block and then seconds before sprite
change and that's it that is so simple
that is
we need to do so we got that all set
back over in unity and we're going to
select our brick blocks all of those are
the same the amount of time before we
change and all that and then we're going
to get our sprite that we're going to
change to that's exploded block drag it
drop it right there save it and run it
watch how cool this is all right and oh
okay so those work also very cool and
we're going to fix the jumping sort of
issues that man has here in the next
part of the tutorial okay so we got that
all set now we're going to make the
coins work so how are we going to do
that well we're going to select our
coins there's the coins they're hidden
inside of here so let's just select
every one of them we're going to add a
Collider to those so physics 2d and box
Collider we could have a circle Collider
then let's give a circle Collider it
doesn't really matter alright so they're
all surrounded with circles because they
are circles makes sense and what are we
going to do we're going to create a
script that is coins so creates c-sharp
and we'll call this coin get out of
there and a little open coin and make
everything work all right so we got
we're inside of here what are we going
to do well we are going to go and create
our collision function so to do that
we're going to say avoid actually we're
going to do so many things the same
let's jump over here there's surprise
block we're going to get this guy right
here and copy it and we will jump over
where is our coin oh there it is oh I
see that it's an asset script let's go
fix that right now so let's go and close
that and jump back over there Save
Changes
no alright jump back over into the unity
and select assets where did it go mmm I
don't know well there's coin I don't
know what was going on with that let's
open up scoyne again okay there's coin I
don't know what was going on with that
either way it's going to be fixed all
right so let's paste this in here
because we need this guy and let's go
and close off this curly bracket right
here so what are we going to need for
this well we're going to need to play a
sound and then increase the text score
and then destroy the coin so let's jump
back over into the prize block once
again we're going to have to play a
sound great
and we're going to have to increase the
text score there we go copy that jump
back inside here paste that side of
there get coin is what we are going to
play just like we did before increase
the text score and then we are going to
destroy the coin so we'll say destroy
game objects and there that works and
now we need to get increased text score
you I jump back over into the prize
block again and where is it
there it is increased XCore you I select
it copy jump back over inside of here
jump down here paste it inside of there
doing the same thing over and over again
that works perfectly fine and that's all
we need to do to make our whoops nope
remember this here see text it's saying
I need to do that the bring in this
unity engine you are so there it is
let's go and get it automatically and
it's up here there it is our next super
save it jump into unity and check it out
so here we are and let's run and we'll
check everything make sure it works
coin block works awesome I'm going to
fix that jump here next time oh you
silly thing
and I don't why man you need strong okay
so let's jump up there see I got that ah
I'm going to jump up on top of here also
oops
I didn't get my coin why didn't I get my
coin I know why did I not save it to the
coins and that's what I did so let's
select all of our coins I do silly
things all the time grab our coins
script drop it in there so now it's
there save it running again and let's go
for it
Manny and you can see they went and
changed and the blocks break also
alright so super awesome I hope you guys
enjoyed this tutorial series like I said
in the next part I'm going to try to
make Manny jump a little bit better and
also we are going to add enemies so like
always please leave your questions and
comments below otherwise till next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>