<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Django Tutorial 3 | Coder Coacher - Coaching Coders</title><meta content="Django Tutorial 3 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Derek-Banas/">Derek Banas</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Django Tutorial 3</b></h2><h5 class="post__date">2016-11-05</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/McGAWgLw1o4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">well hello internet and welcome to part
3 of my django video tutorial and this
part of the tutorial will continue where
we left off with part 2 so if you didn't
watch part 2 you have to otherwise
nothing in this tutorial is going to
work because we made a whole bunch in
part 2 and this time we're gonna focus
in on the admin part of Django
we're on databases I'm going to
introduce templates we're gonna cover
form processing and a whole bunch more
like always all of the code as well as a
template or transcript of this entire
video is available in the description
underneath the video and I have a lot to
do so let's get into it alright so
Django automates the interface that
you're going to use to add change and
delete content for your web application
but before you can use it you need to
create a user so make sure you are in
the proper directory you're gonna type
dir if you're on Windows to see this and
make sure you're in the manage dot py
where where that file is located and
then if you are on a Macintosh we're
going to type in Python 3 if you're on
Windows you're gonna type in Python and
then you're going to type in manage a py
and create super user and hit enter and
you're gonna have to create a user name
here so I am going to call this this
admin and then email address I can just
type in whatever there we go
and a password and there that is and
it's gonna ask you for it again and
there you have now you have a super user
created now we can jump over into the
admittin part of django and test this
out alright so here we are I have
pycharm over here I have Google Chrome
over here and down here I have my
terminal or the command prompt in
Windows and what we're going to be going
is localhost colon 8080 n but of course
to do that I'm going to have to first
start the server and to do so I'm going
to type in Python 3
managed py and run server poop it up and
everything's running right there and I
can loafer here and I can load this and
you can see right here we are in the
admin section of Django and I can type
in this admin for the user that I just
created a second ago and the password
for that and click login and now what we
could do is actually work with our
database and you can see everything that
we have right here now we already have
created the pols part of our application
and it isn't showing here or the
questions and choices aren't showing
here so what I'm going to do next is I'm
going to actually set all that up and
you can sit in here and play around with
all these different things click on
users you can see the different users we
have in our account and click over here
click Add users and do a whole bunch of
different things with that stuff so
something to explore and we'll be
getting more into that here in a moment
but the very first thing that I want to
do is tell admin that our poll system
has an admin interface and to be able to
do that I have to come over here to
polls and I'm gonna click on the polls
directory and go new file and then
inside of here I'm gonna type in admin
dot py and click on OK and that's gonna
open up this guy I'm gonna make a couple
little changes here first off go into a
Django contributor to show up inside of
here so I'm going to say from dot models
import question and then to register
question for showing inside of the admit
I'm gonna go admin site register
question and save that and if I do and
reload this might need to restart the
server yeah it looks like I do come over
here
shut down the server and then click that
we want to run it again and then come in
here and reload this and now you can see
questions shows up inside of there and
you can click on questions you can add
questions by clicking on this guy and so
forth and so on you can click on what's
up and see everything that we have right
there
okay so that's how easy it was to go in
there and set up the questions part of
our database in our web application in
the admin application so now what we
want to do is go over and add some more
views in the views folder inside of our
pulse directory so let's go and get that
guy and open it up and you can see right
here it was very very simple what we did
before now we're gonna add a little bit
more functionality to that now we're
going to be adding a view that's going
to be represented by a function and
we've already created index and we're
going to create two more of them where
index is just going to display the
latest questions we're also going to
have detail which is going to display
the question and any choices assigned to
it so we'll just come in here and call
this detail and we'll change that here
in a moment and also we're going to have
results which is going to display
question results and inside of our
detail section right here I'm going to
be passed the question ID that is
assigned to this and then inside of the
response here let's just get rid of this
and I'm going to type in you're looking
at question and accept a string in this
situation and get outside of those
double quotes put another % and put
question ID inside of there like that
well let's do this for detail here first
detail that works better for detail and
then down here for results we're once
again going to be passed the question ID
and here I'll do something a little bit
different I'm going to go response is
equal to and you are looking at the
results of question and get our string
inside of here now down here inside of
our response if you just want to keep
this a little bit less busy
you could put response down inside of
there and then a % and your question ID
and that way it's going to automatically
put that right here where we have this
string setup and now I'm going to go and
add those
to the URLs dot py file inside of our
polls directory so we'll come into this
guy right here yeah let's just go and
copy this we already have index inside
of there paste two more of these guys
inside of here I'm gonna be passing some
different information inside here I'm
gonna replace well I'm going to keep
indexed right there and I'm gonna
replace this guy right here
with detail and then change the name
over here to detail of course then
inside of this guy I'm going to want to
get the question ID I'm gonna do it in a
slightly different way this time I'm
going to put a question mark with P and
question ID and close that off and then
I'm going to say that I expect to
receive one or more numbers and this guy
right here we already know if we put
parentheses around something if that's
going to be returned so let's cut this
closing parenthesis right here but what
this guy means right here is this is
going to define the name for the data
that we are going to be taking from the
information that is inside of the
parentheses which in this situation is
going to be the question ID and replace
this guy down here because they're going
to be doing very very similar sorts of
things we're instead going to put
results down inside of there like this
and then a forward slash and then this
is going to be changed to results of
course to line up with our function we
created here a moment ago that's gonna
accept this information and process it
and then another thing I'd like to add
to this file is a namespace so basically
what I'm going to do here is add a
namespace so that Django knows what
directory to load if another application
for example had a directory for results
or a directory for details and how we
can use this I'm gonna use it here as
the tutorial continues I'm just going to
type in app name is equal to and then
we're going to put the polls part of our
application because we can have numerous
different applications inside of each
project this is going to allow us to
specifically target this part of our
project if we'd like to and now we can
jump back over into the views section
and update a couple other different
things
we can of course come in here and just
get rid of that part right there and
just go to localhost colon 8080 right
here that we're in the polls index and
in a moment we'll make all those other
different directories work for us as
well but first before we're able to do
that what we're gonna have to do is come
in here and import both the question and
the choice models so we're gonna say
from models import question and choice
and then we're going to change the way
index works so that we actually are able
to print out some questions so that we
can then click on them and then jump
into the details and the results part of
our application so what we're gonna do
inside of index is we're going to say
that we want to receive a list of five
questions some say latest question list
is going to be equal to question objects
order by and then I'm gonna say that I
want to order them by their publication
date and then if we want to limit this
to just five results we can just put a
colon and five inside of those two
brackets right there then I want to
cycle through the questions to create my
list so I'm just gonna call this output
and let's say we want these to be
separated with commas then make a call
to join there's only one question inside
of that right now but of course you
could go and add more questions in the
admin section to test this out so I'm
gonna say question text for queue in
latest question list and then down in
the HTTP response part we're just gonna
put output inside of there and save that
and now I come over here to the index
section and run it and you can see that
what's up shows up there as an option
now using these guys like this to go and
create our different pages isn't
necessarily the best solution because
the results are going to be hard-coded
into the Python code so a better option
for us to use is to use a template to
separate the design from the code so to
do so I'm going to come over here inside
of polls and I'm gonna create a new
directory and I'm going to call this
templates and the naming does matter so
call this templates and
inside of template's I'm going to create
another new directory and this new
directory is going to be called pulse
now inside of this I'm going to create a
file or a template for each one of these
guys so there's going to be an index a
detail and a results sometimes we'll
just create those right now so we have
her inside of here and we'll create
index dot HTML click on OK create
another one file and this one's going to
be called detail dot HTML and then we
will create results new file and results
dot HTML and click on OK so there we go
we have template pages for each of those
different parts of our application so
let's go into index.html and start using
this alright so we are inside of
templates polls index dot HTML right
here and what I want to do is list out
five questions on the screen so what
we're gonna do and I'll get more into
how to work with this template code but
it should be pretty understandable
because it's pretty straightforward what
we're gonna do is put a curly bracket
and a percent sign and then we're gonna
say if latest question lists present son
and then close the curly bracket so
we're saying if there is a list of
latest questions then in this situation
what we want to do is create an
unordered list and then I'm going to use
a for loop to cycle through all of the
different questions inside of that
question list so I'm gonna say for
question in latest question list once
again close it off with a percent sign
and the curly bracket and then in the
list item part I'm going to create a
couple different links I'm gonna go age
reference is equal to and to pull this
information out of our database again
we're gonna use curly bracket % then I'm
going to type in URL and polls dot
detail that's polls dot detail and this
right here by the way wouldn't have
worked if we hadn't have come into the
URLs py file and put this app right here
so that's what we're using we're using
the namespace right there so that's
where that comes from
so back inside of index so polls colon
do
- and then question dot ID and then
we're gonna close off that % and curly
brackets it'll close off that tag right
there and then inside of here we're
going to actually get the question text
and put it inside of there so we're
going to do that we're gonna put two
curly brackets and then question dot
question underscore text and then close
that off with two curly brackets okay so
we got our unordered list of different
questions and we're gonna have to close
off our for loop
so again curly brackets % and to do that
you say n 4 then we have to handle the
situation in which there was no
questions inside of the latest question
list so here we're gonna % and else %
and then handle this guy and what I'm
gonna do is just create a paragraph and
inside of the paragraph we'll say
something like no poles are available
and then of course we have to close off
the if statement and to do that we say
and and I'll get more in detail with the
templates as we continue here so let's
save that and now we'll jump back over
into views dot py to update the index
now with this guy we're gonna come in
here and we are going to send our
information or the question list to our
template but to do that we're gonna have
to import some more information we're
gonna have to go and go from Django
shortcuts import render what this is
gonna do is render a page whenever it's
passed a template and any data that is
required by that template such as our
list of questions once again we're still
only going to be receiving the request
inside of here for our index we're still
going to be asking for the first five
poll questions that we have inside of
our database one thing that we need to
do different here however is to find the
name for the data that we're going to
pass into our template and call this
context is equal to curly brackets and
this is going to be latest question list
just as you saw over inside of our
template that we just created a second
ago
and then we'll say latest question list
is what we're going to be passing inside
of it put a little comma there now what
we can do is get rid of all of this
stuff and now say return render pass the
request inside of here pass in the
location for our template and then also
pass in our question list and we can
save that reload this and now you can
see it's listed as an unordered list and
if we click on this you're gonna see
that nothing comes up there but that's
not gonna be an issue because we're
gonna come in here and now fix up the
detail and the results part going to
have to come in and import some new
libraries for us to be able to use one
thing is that we would like to open a
404 page if we don't get a result
whenever we click on something so to be
able to do that we go a little to
shortcuts and import function called get
object or 404 I want to use this inside
of detail and what details going to do
is whenever it has passed a question ID
it's going to first check if it exists
and if it does it's going to go to that
detail page if it doesn't however it is
going to open up a 404 error page so
we're going to go question is going to
be equal to and go get object or 404 god
we just mentioned a second ago and
inside of it we will pass question and
then specifically the question ID that
was passed into this function and it's
going to show either the 404 page in
this situation otherwise it is going to
render our detail template which we're
gonna create here in a second let's go
get rid of all that stuff pass in
request and then the future home for our
detail template which is going to be
detailed HTML we already created that
file and then of course we are also
going to pass and the specific question
that we would like it to look up
question and question so jump over into
detail dot HTML and I want to show the
question that was passed inside of here
inside of h1 tags and get that just put
two curly brackets and then we're
type in question thought question
underscore text of course close that off
of two curly brackets it's question
underscore Tex then we are going to send
sometimes an error message which we're
gonna create this in a moment so I want
to be able to handle that so I'm gonna
say if an error message was passed
inside of here I want to show that error
message I'm gonna put some emphasis on
it here and we can get that specific
error message and display it close that
off and also close off that if statement
and now what I'd like to do is create a
form which is going to allow the user to
pick a choice for that specific question
and let's jump over to the view section
here and create vote inside of here and
it will be passed request and the
question ID specifically and we'll just
keep this real simple here and step into
it slowly so we'll just say return HTTP
response and you are voting on question
and just show a string for this and then
put the question ID inside of there save
that and then we're also going to have
to jump into the URLs dot py file this
guy right here
and put a link to the voting option that
we have right there so let's just copy
that down here paste that inside of here
once again the question ID is what's
going to be passed inside of it and
specifically we're gonna put a forward
bracket here and we're gonna put a
forward slash here and then vote and
another forward slash and we're just
gonna change this to vote of course and
then change the name also to vote save
that and let's jump back over into the
detail section save it and now we can
get back to creating the form which
going to allow the user to pick a choice
so we're gonna say form action is equal
to curly bracket % URL polls once again
this is using the name space which we
defined over in URLs dot py this guy
right here so back into details just
wanna make sure you're aware of what's
going on there and then we'll put
question ID cents on close the curly
bracket close off that double quote make
sure you just have one quote
and we'll be using the post method here
and close that off now inside of our
form what we're gonna another thing we
can do is put a percent sign and type in
CS our F token and this is here for
security reasons and basically what it's
gonna allow you to do is protect your
site from cross-site request forgeries
and those are going to occur whenever
another site tries to target your form
so basically if the form isn't being
processed directly a hundred percent
inside of your site it's gonna block it
from passing form information into it
okay
now what we want to do is cycle through
all the choices for this question and
then create a radio button for each one
of them so we're gonna say for choice in
question choice set all close that off
and then we'll create the radio buttons
for them and so we'll say input type is
equal to and this is going to be a radio
button name is going to be choice as
well go down to the next line the ID for
this is going to be choice and then we
can get the specific choice with two
curly brackets and then for loop and we
can get the current counter for that
close that off and then we can also
assign the value to it by just going
Jois dot ID and then close off that tag
so that's going to create all of our
radio buttons likewise we can come in
here and create a label so we'll say for
choice and get that counter just like we
did before by typing in for loop dot
counter and the two closed in curly
brackets close off that part of the
label and then go choice and get the
choice text and show that as an option
next to the radio button now of course
we're going to want to throw a break
statement inside here after that and
then we'll want to end our for loop just
like we always do so and for and then
we'll put an option in here so that they
can click on a submit button so we'll
say input
it type and this will be submit and then
the value is going to be vote and close
that tag off and we could save that and
then update the vote part of our views
file once again and we're gonna use the
get object or 404 once again so we must
just copy this guy come down here into
the vote function paste that inside of
there and we'll leave question be like
this and the question ID be the same
just like we did previously now we want
to make a couple changes so that we will
be able to accept the choice that was
picked whatever radio button was clicked
on and then followed by whatever the
submit button was clicked on we want to
throw in another module here the first
so let's come up here and we're gonna
say from Django HTTP dot import HTTP
response redirect and what this is going
to do for us is avoid receiving data
twice if for example the user would
click the back button so that the page
would reload this is gonna keep it from
sending data multiple different times if
that should happen get rid of that extra
period right there and we're also going
to import another library so this is me
from Django dot URLs import reverse and
this is going to allow us to return a
URL we can point to based on whatever
the current question is we're dealing
with and you're gonna see that here in a
second let's go down inside a vote now
and continue creating this guy so we'll
be able to process these votes whenever
they are clicked on first thing we're
gonna try to do is get the selected
radio buttons so a selected choice is
going to be equal to question
Jois set and get so we don't know if
we're gonna be able to get a choice or
not so that's the reason why we have it
inside of the try block like that and
then we'll go PK is equal to request and
post and specifically we will look for
choice inside of that post then we will
handle any exception that would occur so
key error and specifically what we're
looking for is the choice does not exist
and if the choice does not exist then we
were going to rerender the forum for
them to try to make it check the next
time so that's where render is gonna
come in and what render is going to do
is receive the request and then
specifically what we want to open up
here is polls and the detail page once
again the template for our application
and then inside of here we're going to
pass in question and then pass in the
question write that and then also we
will pass in an error message and we
handled that error message previously
and the error message is going to be you
didn't select a choice before you
clicked on the submit button and if none
of that happened we will say else if a
choice was selected we want to increment
it inside of our database and to do that
you just selected choice and
specifically votes and increment the
value of that and then selected choice
and we need to save that inside of our
database so save like that and then like
I said before we want to block the user
from accidentally sending the
information two times if they would
click on the back button or something
like that or reload the page and so to
do that we use HTTP response redirect
and then we'll pass inside of here
reverse and polls results and then the
argument we want to pass inside of here
for our results is question ID so that
we know what results the show and to get
rid of that error message right there
you can just put a comma inside of there
and that will go away and that leaves us
with the results template that we have
to fill out okay so now we're over here
and what this is gonna do is just
display the choice results for the past
question was sent to it so I'm going to
go create an h1 tag and we'll put the
question inside of here so to do so we
just go question and question text is
what specifically will make sense in
that situation and now we want to create
an unordered list and just print out all
of those different options inside of
here so we'll say for choice in
question choice said all and then we'll
list out all of the different choices
inside of here and then next to that
we're gonna put our you know how many
different times they were selected how
many votes they've received do that was
a choice thought choice text - - it'll
say choice and get the votes for it and
then we're really gonna put a vote or
votes and specifically if they put one
inside of here so there'll be one vote
that is going to be the only situation
in which we're going to not include the
s otherwise we are always going to
include the S even zero votes makes
sense
so we'll say choice votes and then we'll
say PluralEyes and that's what that's
going to do for us and I'll put an S in
the situation in every situation unless
there's only one vote and then that ends
our list items and then we have to come
in here and and our if statement and the
unordered list right there and then we
will throw in another link here and
we'll go URL and we will point at the
detail page and it passed the question
ID and give them the option to vote
again right like that alright so that's
all we need for the results template and
now let's jump back and update the
results function inside of use dot py so
here we are and let's go to the results
function right here specifically what
we're looking for
and it's going to receive a question ID
and let's get rid of this guy right here
and let's get the question ID that was
passed
so we'll say question is equal to get
and if we didn't get one pass we're
gonna throw up a 404 page like we have
done previously and we'll say question
and specifically we're looking for a
question ID and then we'll come down
side here and we'll say render inside of
this we're gonna pass in the request and
polls and the results we're going to
point at our template and the
information we're gonna pass to it is
the question that's
and the question and save it and now
after making all of those changes let's
come in here and let's restart our
server run it and we are in the index
part of there are poles applications
nothing inside of there let's reload
this now let's click on what's up yeah
it looks like I did something wrong
inside of my urls file so let's open
that up take a look let's put a forward
slash right there save that
let's try reloading it and there you can
see now we have the question what's up
not much in the sky click on not much
click on vote yeah it looks like I have
a little bug here on line 8 inside of my
results template let's see what we got
here I typed and if instead of n 4
slowly me save that reload it and you
can see right here what's up shows up
not much is equal to 2 votes and the sky
comes back as 0 votes we can click on
vote again we can click on the sky vote
and now that works and jump back into
the polls once again check that out
what's up still there click on what's up
and now of course we go into the admin
section and create additional questions
and choices and so forth and so on and
explore how that changes the overall
application so there we go guys that was
a rough overview of some more in regards
to the admin section databases how to
process forms and templates and in the
next part of the tutorial continue
working on application until we have
covered pretty much all that you need to
know about getting started with django
so like always please leave your
questions and comments below otherwise
until next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>