<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>How to Make Video Games 30 : Make Zelda 7 | Coder Coacher - Coaching Coders</title><meta content="How to Make Video Games 30 : Make Zelda 7 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Derek-Banas/">Derek Banas</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>How to Make Video Games 30 : Make Zelda 7</b></h2><h5 class="post__date">2017-12-21</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/qgjjlZdGet8" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">well hello internet and welcome to part
30 of my how to make videogames tutorial
series and this part of the tutorial I'm
gonna do something really fun I love it
when you guys ask me a question and then
I can go and create a tutorial to answer
that question and basically the question
I received is how to allow or create the
artificial intelligence for a villain to
chase a character such as link around
the game board in which that villain is
not locked into a specific maze so it's
a free-floating area like we are
creating in this game so I will be able
to do that and even better yet I'm gonna
write all the code out of my head and so
you'll get to see my thinking process
and how we can work our ways through
solving problems and whenever we're
creating games so I have a lot to do so
let's get into it
okay so here we are and of course all of
the code is available in the description
underneath a video alright so here we
are inside of unity you can't see this
view at full screen it is an HD video
now what we are trying to do here is
trying to figure out how to move our
villain here around this world now of
course he's gonna collide in the things
we have to think about that because that
can cause a lot of problems what if our
villain is up here and he is trying to
get over here well he's just gonna hit
this trees right here and not go
anywhere so we could solve this in a
bunch of different ways um and all of
them could be valid however some of them
are going to be very machine intensive
while other ones will not be so we could
go and create a very elaborate and maze
type of system and then go and plot the
quickest path to link for example and
that would be very very machine
intensive and it would work but it would
be a machine intensive which isn't a
good thing and we could do numerous
different things like break casting and
so forth and so on but what I think I
want to do is I want to create a node
type system that our villain will travel
across so I want to create nodes in all
of the different parts so let's say I
want to get down here to where link is
I'm gonna put a node there and then I
want to have line of sight between all
of my different nodes a list might not
be the best way to solve it but it's the
way that I'm gonna do it and I'm just
gonna put nodes all around the entire
board
and then I will move from node to node
and check with link to see which node
he's the closest to which is very easy
to do and then move around such as that
so that is my goal so what am I gonna do
here well first thing I'm gonna do is
I'm gonna create an empty and I'm gonna
put all my nodes inside of this empty so
I'm gonna call this travel nodes all
right good
and let's go and create another empty
and put it in the travel modes and I'm
gonna call this node 0 and to this node
I have to think about what I'm going to
need my nodes to be able to do well one
thing I need them to be able to do is to
be aware of if they're collided with
something such as said villain so I am
going to go and create a Collider on all
of my nodes so physics 2d and let's have
it be a box Collider is fine I'm gonna
set is triggered then on top of that I'm
going to want the size to be rather
small I'm just gonna say 0.2 right now
just to see if that makes sense and then
I'm also going to want my offset a
little bit higher so that my villain
will be able to get right around there
so I'm just gonna put it as 2.25 all
right and let's see what that looks like
Oh also on top of that I'm gonna come up
here and give it a different type of
color so let's make it orange or
something like that alright and this guy
the travel nodes I'm gonna have that set
for 0 0 so 0 whoops I hit OH 0 and 0
that's set for this and then this node 0
I'm gonna have it set for 1 and 1 which
should be right on top of Lynx head and
if we look here we can see that that is
indeed where it is
alright so good stuff anything else I'm
gonna want to do I'm probably going to
want to be able to search for tags maybe
not maybe I will don't know so I'm gonna
come in here and choose the tag right
here and I'm gonna go add tag
I am going to create a new one of course
and I'm gonna call this villain node and
save it so everything is gonna have the
villain and all these nodes are gonna
have the tag villain node once again I'm
not certain that I need this but at the
moment I think that it's a good eye good
bat alright so I just need to create
more of these nodes so I let's say I
want to have a node here line of sight
remember and then and maybe another one
up here and so forth so I'm gonna come
in here and I'm just going to duplicate
to this guy and I'm gonna give him a
different name I'm gonna call him
whoops node 1 and where am I gonna place
him I only don't want to place him like
right around in this vicinity so let's
say that I want this to be let's try
like 10 10 and 2 all right so that looks
like it's probably line of sight and it
is 10 and 2 and let's go and duplicate
another one and we'll call this node 2
so node 2 and let's move it into like in
this area right here
remember line of sight so let's make
that like 5 and 9 and I think that looks
about right
and yes it does and let's go and create
and many more so how many am I gonna
need let's go just create a whole bunch
of these guys um this is gonna be node 3
and this will be node 4 and let's try
mmm like a 5 and 9 something like that
oh I did that already didn't I mmm ok so
5 9 and that is here so I'm gonna go up
here so that's gonna be more like 715
something like that oh let's try it and
so 7 and 15 and there it is once again
the nodes can see each other and then we
want to put another one like right here
so there might be some tweaking that
goes along with this to make sure it's
exactly right that's okay and I don't
know if it's gonna be ok there or maybe
I should put it over just a little bit
more I'm gonna leave it there right now
see how it works out let's go and delete
Bukit some more of these guys and like
this and that's gonna give me five I
mean the goal here is to keep everything
with the least intensive as possible and
very often the very first thing you
think of is something that is extremely
machine intensive and that's almost
always a bad idea so let's get rid of
that and we've got eight I don't know
how many of these I'm going to need so
that is this guy so I want this one
underneath here this is 13 15 and I want
to put one like right in this vicinity
so um 1915 mm let's try 1510 and that
looks pretty good that should be able to
hit there it might hit this wall though
and after this let's try 15 3 just keep
a straight line and it's down there then
I'm gonna put one between the trees
right here and mmm let's try like twenty
two and three okay that's good and
another one let's try like twenty four
and five might be okay and how many more
let's see if I can do it with two more
of these guys so duplicate and duplicate
and change this to nine and this one to
ten alright and we'll have this one be
twenty one and nine twenty one and nine
okay pretty good and the last I'm gonna
put up in the upper right hand corner
23:13 good okay so I got all my nodes
created and I think that we have a
pretty good idea what's going on so now
what I want to do is I want to get my
villain and try to teach him how to move
around these notes so to do that I'm
gonna have to go into scripts and open
up a villain dot CS alright so now I
need to think about what I need to add
to my villains so some things oh I
definitely want to have an array that's
going to contain all of my different
nodes so I'm gonna call these villain
nodes and create that just go new and
I'm gonna have it just be int and then I
can put curly bracket and then I'm gonna
have to put in all of nodes I
have there so I went and wrote all of
those down here in between switching
screens so I can just copy them here off
of my piece of paper
ten and two five nine seven and fifteen
and these are just the locations for all
the nodes that you just saw me create of
course and there you go there's all of
them if you want to pause your screen to
type those in whoops there you go now
you can do that I just didn't want to
keep talking to myself all right so what
else am I gonna need well I might find
it useful to have access to the current
node that's our villain would be on and
that would be like two is the closest
one so I'm just gonna put that in there
I then also want to track the target
node which would be where he's gonna go
to and I'm gonna put int and target node
and have that be - so let's change this
from current node let's make that one
and then - so he's like bouncing around
in between those two nodes and I can't
think anything else that I need so let's
think about what else we need to do with
this to make it work well in the awake
area I can't think of anything I need
but inside of fixed updates I can think
of some things so I'm gonna need to add
inside of here I think I also want to
get rid of this and have that be inside
of update as well
so rather than deleting it and what I'm
gonna do is just comment it out and you
know we'll figure something else out all
right so what's the logic here that I
want to basically I want to make it work
and then and later in this tutorial or
in the next tutorial I'll have it
automate so that's I want to make it
work first so what I'm gonna do here is
I'm gonna say that if a certain key is
pressed on that I want to get key and up
so what I do is I'm gonna say if I press
F so basically what i'm doing here is
i'm sort of debugging my way through
this so if they press f in that
situation i want to do i want to go
forward and if they press b i want them
to go backwards why is it doing that
let's see r all right so let's go and
let's just copy this
and down inside of here and I'm gonna
say F and B so this is gonna work this
way so what do I have to do here well I
definitely want to not go try to go to a
node that is greater than 10 so I'm
gonna say if and target node and this is
hardwired in here you might prefer to
instead get the length of your array but
I'm gonna just do it this way because
it's gonna work exactly the same for
everything else then what do I want to
do well whenever the F is is pressed as
long as I still have another node to go
to well I want to increment through my
villain nodes so I'm going to say my
target node is gonna be equal to target
node plus 1 okay
so there's that what else am I gonna
want to do well I need to move my
villain to that node so I'm gonna create
a function that I'm gonna call go
forward two nodes I'm gonna go go
forward to notes I'm just logically just
thinking out what do I want to do I
don't not create that here in a moment
what else am I gonna need I can't think
anything else so let's go and figure out
what we're gonna do with B also so I can
I'm gonna basically just going to do the
opposite so I'm gonna paste this inside
of here and I'm gonna say while target
node is greater than zero because zero
is my maximum one I'm going to decrement
okay pretty simple stuff and then go
forward to node and everything else is
pretty great right there okay so we got
that all set up and now what I need to
do is just figure out exactly how I'm
going to make go forward to note how am
I going to move my villain so that it
will go forward to the next node so I
have to create this function right here
and is it going to return anything I
don't think so
so let's just paste that inside of there
and is it gonna receive anything I can't
think anything it needs to receive all
right so go forward to node how are we
gonna make it move there well I need to
find out first if I am already at my
target node because in that situation I
don't want to go forward so I'm gonna
say I'm going to create that in a
function also I'm gonna say at target
node
and I like to break these into multiple
different functions so what am I gonna
do here well I'm going to you know what
it might actually make more sense for me
to create at targetnode first so that I
can think about how I'm going to do this
part so how am I gonna check if I am at
my target node well this is gonna return
a bowl and is it gonna receive anything
I can't think anything that it's gonna
need all right so how do I check if my
current position of my villain is at the
target node it's rather simple I just go
if and transform and position X is equal
to and then I need to access my array
that I have and then I'm gonna go target
node 0 is going to give me the x value
inside of my multi-dimensional right I'm
gonna say and and I'm gonna do the same
thing so I'm going to use the Y in this
situation so this is gonna tell me if I
am indeed at the target node that I'm
aiming to get to and then one is gonna
give me the other value the y you know
the Y value of course and I'll return
true in that situation and otherwise I
will return false so there we go we
created that guy what else am I gonna
need well remember I got rid of this guy
up here so I am going to go and set this
inside of my update function down here
so let's go and do that also so I'm just
going to I don't have updates set up
inside of here already do I no I do not
all right so let's just do that so I'm
gonna say void update and I'm just all
the update functions gonna do is get the
rigidbody and change the velocity on it
to be equal to the direction all right
so I got something else done so that's
good now let's come back up inside of
this guy and let's try to think through
now go forward to node and let's try to
figure out what we're gonna do based off
of how we know at target node works so
I'm saying that if I'm not at the target
node
then I want to move towards it so what I
want to do is I want to define the
target x and y position so I'm going to
say vector two and target position is
going to be equal to new vector2 and
villain and nudes I'm gonna access that
array and target node and this is gonna
give me my XY position and the only
thing is I want to subtract my current
position of my villain from that I'm
gonna go - transform dot position and X
okay so that's gonna give me my new
target position that I want to move to
and then I'm gonna do basically the same
thing for my Y position also
so let's come in here and let's just
copy this guy and jump down here and
paste this in and this is going to be
target node and remember we're gonna be
one to get the Y value and then we are
going to subtract Y from this so that is
going to give me that all right so we
got our target that we're aiming for so
now what are we gonna do I'm going to
just set my direction to it so we can
say directions equal to target position
and there we go
all right so that's where we are going
to be moving towards see all these
functions nice and short and that's a
good thing and now I want to come down
inside of ontriggerenter and what I'm
gonna do inside of here I'm gonna do
this outside of this area right here is
I'm gonna check if my villain collided
with a villain node so I'm gonna say if
and thing I collided with tag is equal
to villain node well in that situation I
am going to come in and check if I
collided with the target node that I'm
aiming to get to and if I did well in
that situation I'm gonna stop movement
on my villain until the next F is
pressed and I'll be able to get to the
next one or I'll go towards the next one
and I'm going to use the same exact
thing again
targetnode x value and or actually this
is gonna be x value i was reading out or
thinking out of my head and not thinking
with my head all right and humming all
said check the same thing for the Y
value of course
so let's come in here and do that paste
that down there and check for Y so that
is the villain's position and one is
going to give me the node that I have
and I'm going to in the situation which
I did to hit my target node I'm going to
say that my direction is gonna be equal
to a vector 3.0 and that is gonna bring
my villain to a complete stop all right
so I have all that set up and I think I
will now be able to traverse our little
area here with my villains so I'm gonna
hit play inside of here and you can see
the villain go I'm gonna go forward
whoop he moved a little bit weird so
let's try that again
play I'm gonna go forward good back good
back good and he's moving and then I can
go forward again and forward I'm just
hitting the F button and forward and
forward and forward F he did hit that
but he went through it and there's some
tweaking involved here but what my major
goal is just to make this all work and
everything looks like it's working
pretty well and there is literally like
no calculations being done definitely
not in regards to using Ray casts or
using gigantic arrays that I try to
float through so you can see that my
villain is able to go from node to node
the node and pretty much cover the
entire board all right awesome
so now the goal is to be able to get my
villain to find link and to do that once
again I'm gonna have to jump over and
write some more RC code or c-sharp code
inside of villain dot CS alright so what
am I going need to do or change inside
of the code I have to think about some
additional different values I want to
track so basically what I want to do is
I want to be able to find out which node
link is the closest to so to do that I'm
gonna create an array of game objects
and I'm going to call it villain and
dude gos for game objects and I will
fill that in time what else am I going
to need um I'd also like to store the
node that link is closest to once I find
what it is so that the villain will now
have a new target node that it needs to
go to so I'm gonna go node so that's
gonna hold links closest node and as far
as I know that's all I'm gonna need for
that and because I am going to be moving
through this slowly and checking as I am
going I'm gonna come after this and I'm
just gonna output links position so I'm
gonna say links closest node game object
is gonna be equal to and I'm going to
create a function that's gonna find out
and it's gonna make links closest node
there's gonna be in the name of the
function that I'm gonna be calling for
and let's make this uppercase of course
links closest node and whenever I get
that information I am going to go and
output it this is gonna give me the game
object but what I also want is I want
the actual index so I'm also gonna
create another function it's not only
gonna give me the game object but it's
gonna give me the nodes index inside of
my array so and I'm gonna call this
function get index for link closest node
hey that's kind of long-winded and what
am I gonna do with that well I'm gonna
pass inside of it links closest node the
game object and it's gonna search
through the array and find the one that
matches up with it all right so now I
have to create these two beasts these
two very very long names so let's go and
create links closest node came object
first oh I just thought of something
else I'm also going to want inside of
awake
I want to initialize the villain node
game object array so I'm gonna go get
this guy and paste that inside of there
and that's gonna be equal to to get all
of the nodes that match this all I do is
go game object thought find game objects
with tag and then pass in villain node
because that's what all of them are
called all right so that was very easy
so now I have an array of all the game
object nodes so now what I need to do is
create links closest node game object so
I'm gonna come down here and let's let's
go after update and this is going to
return a game object obviously and
throat without sin whoops
it's not called that what did I call it
I forget what I call it I called hit
links closest node game object all right
so let's go and get that come back down
here or did I do it there we are so that
we links closest node game object and I
am hmm you know what in hindsight I'm
gonna just change this and come back up
inside of here and get rid of this all
right it's a little bit long-winded
all right so links closest node and and
then we're gonna come down here so go
and create that so what's this function
gonna do for us well it is going to
first off obviously it's gonna return
the game object and I'm gonna call that
closest node game object and it's gonna
start off with a value of null and then
what I'm gonna do is I'm gonna cycle
through all of my villain node game
objects so I'm gonna use for each to do
that
and game objects or what I'm gonna be
getting back so game object and I'll
just call this node game object in and
villain nodes game objects is the name
of that app that's spelled incorrectly
let's fix that and let's go and fix the
other one villain node game object so
dum de dum
you know spelled it wrong there also and
this is the problem whenever you are
writing stuff out of your head and make
a couple more mistakes but that's okay I
think it's beneficial
so let's come in and we got all those
set up and for each and then what I'm
gonna do is I'm gonna say if closest
node game object is equal to null now
check if it doesn't have a value in that
situation I'm gonna say a closest node
game object is equal to
whatever the first game object is
because we will then you know go down
from there so okay so we have that set
up and I know I'm not working with null
values which is good then I'm gonna say
if vector three and I can check the
distance between link as well as my my
notes so I'm gonna say vector three
distance link game object transform
position and I'm gonna say to do the
same thing with the node game object so
node game object dot transform position
there's something else I don't believe I
have ever covered and come outside of
that less than or equal to and then I'll
say vector three distance and once again
link game object transform and position
it's too much busyness here link
transform position say like that want to
make sure that you can see everything
here so I'm checking the links game
object transform position and I'm
getting the distance between it and the
current node that we are checking inside
of our array and then I'm seeing if that
is less than or equal to links current
position and let's go and do another one
of these then I'm gonna say closest the
previous closest game object transform
come on give me that and position and
one negative two doing these the text so
large is the pop-up the code completion
is really big to alright so that's
pretty simple and straightforward I'm
just cycling through every single item
in there and seeing which is the closest
to length and then after I do that for
all of the nodes then I will get my
final closest node game object returned
all right so good stuff what else am I
gonna need to do well I'm gonna need to
get the index for said game object so
let's go and create that guy and what
was that called get index for something
let's go up here and look get index for
line
closest node alright so I come back down
here once again and create it and this
is going to return an int so get indexed
for links closest node it's going to be
passed a game object that I am going to
call links node game object inside of
this and then hmm
basically I'm just gonna go int node
index is gonna be put a zero and I'm
gonna cycle through all of the villain
nodes and I'm going to look for a match
with the position for the node so I'm
going to say int I is equal to zero and
I is less than or equal to and here
we'll say villain node get upper bound
found and zero and then I'll increment I
of course and then to check each one of
the items inside of there I will say eff
links node game object and inside the
code I'm gonna put a couple little like
debugging things just see you guys can
you know test everything further and of
course all the codes in the description
and it's free sometimes people think I
sell it I don't sell anything
all right so villain nodes and again I
want to get the x value so I'm gonna go
I and 0 and then I'm gonna go and I'm
gonna do pretty much exactly the same
thing for our y so let's go get this
come down here and this is gonna be the
Y position and this is gonna be one
inside of that right and in a situation
in which both of those are true I'm
going to say node index is equal to the
match and then after that I'm going to
say return node index and I think that
is all I need to do for all of the
things that I wanted to do with this
part of the tutorial so I'm gonna save
it and jump back into unity alright so
every time I hit F it is going to output
in the
console the index for whatever the
closest note is all right so go like
this
I'm gonna go F all right and links
closest node is ten well that's not
right
hmm why are we getting that links
closest node is ten let's go move link
to like right here and let's try F again
links closest node is ten ok so there's
an error let's jump over and look at the
code oh I see what I did I forgot to
come in here and assign the value 4 for
the lower game object so closest node
game object is going to be equal to the
current node whoops
the node that matches that so let's save
it and let's go test it hey here we are
once again shut that off and start it up
again and hit FF and links closest node
is zero let's move him over to this node
and hit F again and it should be one
good and now it should be two and F and
it is and we can continue onwards this
should be three and it is and you can
see right there zero one two and three
all right so I think I covered a lot of
things in this tutorial so what I'm
gonna do you can use this as homework
for next time what I'm gonna do is leave
you with this and then in the next part
of the tutorial I will change it so that
the villain will check where net where
link is and then move towards link and
then attack all right so please leave
your questions and comments below
otherwise till next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>