<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Web Design and Programming Pt 22 | Coder Coacher - Coaching Coders</title><meta content="Web Design and Programming Pt 22 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Derek-Banas/">Derek Banas</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Web Design and Programming Pt 22</b></h2><h5 class="post__date">2011-01-22</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/67C0IZIPOl4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">well hello internet and welcome to part
22 of my web design and programming
tutorial in this tutorial I'm going to
continue on creating a second layer of
defense for my previous logon script
that I created in part 21 of this
tutorial definitely watch that before
you watch this otherwise this is totally
not pertinent and also in this tutorial
I'm going to show you how to create a
valid log out script so here is index
dot PHP which is where a person is
directed after they fill in the user ID
and password and CAPTCHA system that I
talked about in the previous tutorial
and this is gonna be really short what
I'm gonna do here is show you how to
check the second token security feature
that we set up in the login script so
here's all the stuff you're used to
saying here I start the session here I
bring in some of my security functions
that I need as well as connected the
database and and what I'm gonna do is
ask if set so this is exactly where
they're gonna go right after they
created or completed a login what I'm
doing here is I'm checking the first
name is filled in and if it is that
tells me that they passed the first step
in logging into the system and what I'm
going to do is create a query and I'm
gonna get the token ID that I set up in
the login script and that will be
changed anytime the user does anything
like login change password so forth and
so on
so remember these single quotes here
that's a common error with queries
alright then I'm gonna get my result is
equal to MySQL query SQL or trigger
error logged okay
and I'm gonna say if MySQL affected rows
meaning the rows that were affected from
the last query remember there should
only be one because there's only going
to be one user ID that is going to be
equal to this session ID user ID so if
they somehow got here and this result is
greater than one that means something
malicious is probably going on create
row fetch the results from the last
query and by understanding how these
functions work you can pretty much do
anything regardless of your project
using PHP and MySQL nice ql3 result
and doing this to free memory - ql
colobus closed database and then exit
closed script just like that perform
another if conditional session token' ID
and this is the secondary token that was
randomly created and this zero right
here comes from the fact we jump up to
our query this represents the zero
placeholder so that's why that's 0 echo
session and here we'll address them by
their first name and here we're going to
put a placeholder in there so that we
know that this person is logged in else
I go to screen you are not logged in
logged in is equal to your or false and
then MySQL closed exit closes grip like
that jump it over here close that if
statement jump over here closing this if
statement man that go close off the h1
type and then everything else that is
here on the screen you saw in the
previous tutorial and this is where we
create the different links depending
upon the status of whether the person's
on the log out PHP page and whether they
have a valid user ID okay so this is
what this code does if I jump over here
and I plug in let's try different user
Jimmy John one his password and the
captcha you can see here welcome Jimmy
see what he did was he pulled the user
ID the first name right here and plug
that in on the screen and then
dynamically changed the links based off
of the fact that he is currently logged
in so that's what this code does right
here pretty neat so now what I'm gonna
do is I'm gonna show you what a log out
function would look like and this is all
gonna be the same except we're gonna
take this guy out of here so we're gonna
select all of this and we're not gonna
need these links right here all we need
is this ending part right there and then
I just have to put my PHP code block
inside here and I like to keep
everything all nice and neat alright so
for the logout or the first thing we're
gonna do is make sure that the first
name is currently set that's why I have
the exclamation point here or the knot
symbol so what I'm saying is if first
name is not set how did they get to the
log
out page we don't want them there so
we're gonna use the header function
again and then send them wherever you
want to send them and they will go and
then we want to exit out of the script
so that kills the script throws them out
and kills the script for you otherwise
if they do have a value set for the
first name that means they are logged in
and it does make sense if they'd want to
log out we want to destroy all the
variables currently stored in the
session and that's what that guy does
right there and then we want to destroy
the session itself and that's how we do
that and for added measure setcookie
session name get the current time - 300
for the current directory and this will
in effect make sure that the session
cookie is dead and we just want to close
off that code block and an echo - screen
with an h3 tag on out and then this
closes off the PHP code area of your
script and you could of course clean
this up if you want and if we save that
jump over here and if he clicks on the
logon screen we're now logged out you
are logged out
so those are two handy scripts up next
I'm going to show you how to create a
secure forgotten password script which
is often one of the most hacked scripts
that people have on their website I'm
gonna try to make a really secure one
then I'm gonna redo my JavaScript
tutorial because you guys asked for that
and while I'm doing that JavaScript
tutorial I'm gonna create a bunch of
random PHP scripts that cover a whole
bunch of things based off of user
submitted questions on PHP then after I
think I've covered it enough in regards
to JavaScript I'm gonna cover cross-site
scripting because you guys have asked
for it and then after we're all done
with that I'm gonna get into the inner
workings of WordPress because you will
now be an expert in MySQL PHP and
JavaScript and jQuery so you will come
have a complete understanding on regards
to how to manipulate WordPress if you
have any questions or comments leave
them in the comment section below
otherwise till next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>