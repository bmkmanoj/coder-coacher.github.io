<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>How to Make Android Apps 21 | Coder Coacher - Coaching Coders</title><meta content="How to Make Android Apps 21 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Derek-Banas/">Derek Banas</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>How to Make Android Apps 21</b></h2><h5 class="post__date">2015-01-05</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/zVjSnhJu9qw" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">well hello internet and welcome to part
21 a my how to make Android apps
tutorial today I'm going to cover two
concepts that really confuse a lot of
people I'm going to make it very simple
I'm going to talk about content provider
as well as the content resolver and
we're going to use content providers
basically to allow applications to share
data using a very simple API so we'll be
able to go in and delete insert query
and update data even between two totally
separate applications and in this
tutorial I'm going to actually create
both of these separate applications so
let's jump over and look at what it's
going to look like when it's all done
okay so this is the content provider
very very simple and all I'm going to do
here is allow it to enter in your name
the content resolver however is going to
do more thing so we have ad name there's
no information on whether that was added
however we're now going to go to the
content resolver part which is going to
allow us to get contacts and you're
going to see all the features we have
right here we're of course going to be
able to go and click on show contacts it
automatically loaded whenever the app
came up but you could also force it
there we're also going to be able to
enter an ID right here and this is going
to be using this separate content
provider app and you're going to see
delete ID see it deleted and we're also
going to be able to find contacts so I
can come in here and enter in seven and
click on find contact and it's going to
show just that one contact and also
we're going to be able to click right
here and then try to type in a name and
it's also going to allow us to add
contacts pay isn't really a normal name
but either way I went in and clicked on
that contact and you're going to see
that it shows up right there so that's
how we're going to use contact providers
or content providers and content
resolvers okay so you see how it's all
done what I'm going to do here first off
is I'm going to create my content
provider now these are always pretty
much structured exactly the same but I'm
going to go through and walk you through
everything what's actually going to be
kind of new about this tutorial is how I
use the content resolver and I'm
actually going to put a link in the
description so you can jump directly
there because as far as I know that's
never been covered in a tutorial at
least in the way that I'm covering it so
the very first thing we want to do is we
want to come over here and this is where
we are going to actually declare
our provider and like I said this is
going to allow another application to
share data that is provided or
structured inside of this guy right here
it's very simple you're going to put in
right here whatever you use for your
package so you look at that guy right
there
and you're going to see it's exactly the
same as what we have right here and then
we're going to also put contact provider
because this guy right here is going to
be our contract provider and we're going
to create that here in a minute so here
you can see exactly what you have to put
inside of your Android manifest file
okay that's what makes that work okay
and of course all the code is in the
description it's all free and all
whatever okay so now we're going to jump
over and we're going to look at this now
I just structured this very simply as
you're gonna see the content resolver is
gonna be really complicated as you just
saw but here I just decided to put in a
way for us to add a contact and it's
very easy to add additional inputs like
if you want to put that email or
whatever and you're going to see that
here in a moment so I'm going to jump
over into contact provider right now
start structuring this guy first thing
I'm going to do is go here which says
activity and change this to content
provider I like that and it's going to
give me an error message and it's going
to say that I need to implement a whole
bunch of methods so implement methods
and I'm going to need to choose that I
want to implement all of them and click
on OK as you can see everything's
normally going to be created in pretty
much the same way in these guys now what
I need to do now is come in and provide
a unique namespace for my content
provider so that other outside
applications are going to be able to
access it so how we're going to do that
this is public static final and string
and this is almost always done in the
same way provider name is equal to and
then you're going to take this guy right
up here just like you saw what I did
with the manifest file and put that
inside of this there we are and then at
the end of it you're going to put
contact provider this got right here and
there you go that's going to be your
unique namespace or way to refer to the
contact provider right here now you're
going to create another constant and
it's going to be a string as well and
this is going to be the URL now these
are always started with content this is
for the content provider of course and
then after that you're
to use your unique namespace this guy
right here but we're just going to come
in and put provider name and then at the
end of it we're going to create our
directory and I'm going to call this CP
contacts right like that now we're going
to come in and create another constant
and this is going to be called content
URL is equal to and you're going to go
URI parse and then pass the URL inside
of that and this is what we're going to
use over and over again to refer to this
now we need to come in here and define
all of the different columns that are
going to be in our database so this is
another thing that's going to be
constant and this is going to be string
and I'm going to have this be ID is
equal to ID and also so that we can have
more than just one thing here we're also
going to define name and that's going to
be name of course you can add many more
of these we're also going to create a UI
code here I'm just going to give it the
value of 1 and then we're going to also
be storing key value pairs so it's going
to be an ID with a value a name and a
value and how we're going to be storing
those is inside of a hash map which just
has key value pairs let's just make them
both strings and give this the value of
values and if you stick with this this
is all going to make sense it seems
really complicated but after you see
numerous examples it's all going to make
a lot of sense now we're going to create
URI matter which is going to match our
unique URIs with our content providers
it's just a way that we're going to be
able to come in here and refer to our
content providers URI matcher and then
here we're actually going to assign
these unique your eyes so new URI
matcher URI match like I said you're
going to do this almost identically
every single time you work with content
providers so this is how you would add
those unique urs or this one unique URI
you could actually come in here and bind
to multiple different pieces of data but
here we're just going to work with one
because it's simple and it's going to be
CP contacts just like we defined above
and then you can put your unique your
eye code in there as well okay so CP
contacts is this guy it's just a way for
us to bind to all of these different
disco
right here this directory just a way for
us to be able to go in and point and
work with these unique content providers
now we're going to come in and create
our SQL Lite database which I talked
about in the last tutorial that I made
we're going to define our database name
and call this my contacts I'm going to
also come in and define my table name
which is also never going to change
table name is equal to names define a
database version this is going to be the
first version and we're going to define
things like that because we're going to
be able to update these tables and so
forth and so on then we're also going to
come in and define how we're actually
going to create this table so that we'll
be able to use this over and over again
quite simply we put table name like that
and then we're going to have ID and this
is going to be the primary case integer
primary key auto increment for us so we
don't have to add that in and then we'll
also have a name inside of here which
can't be null and then close that off
and that is going to allow us to create
our table now we'll get down inside of
on create and whenever our content
provider is first set up we're going to
call for database helper which we're
going to make here in a minute new
database helper and it must be passed to
context so it knows what's going on and
can do everything it needs to get done
while we just create that right now
scroll way down here to the bottom this
is going to be an inner class private
static class database helper
stens SQLite open helper it's going to
say it needs to implement some classes
implement methods there we go or
implement some methods I mean and there
they are we're also going to come in
here and create a constructor for this
database helper pass in our context our
database name and database version I can
see where all those are being used
that's all we need to do there and then
for on create all we're going to do is
call our SQL database and call for the
creation of our table there that is and
then also you know on upgrade this is
going to recreate the table whenever the
database needs to be upgraded call for
the database and then this situation
will say drop table if exists and then
we can put our table name inside of here
and then call on create
and pass in our database have to go
create this guy up here inside of on
create SQL database is equal to DB
helper dot get writable database and
we'll say if SQL database is not equal
to null return true else return false
and then we can come up here change this
to there and this right there and there
we go and everything is all set up here
next thing I want to cover is the query
actually querying for this information
and I'm going to go through all of the
different things that are passed in
first off our content providers unique
URI is going to be passed in right there
then we're going to have projection and
the projection is just going to be an
array of columns that you want to
retrieve with your query and that's for
each row of course selection is going to
be the where part of your query
selection so where ID is equal to one or
where our name is equal to Derrick
that's that then you're going to have
selection arguments and I'm going to
provide a really nice example of how
this works here in a little bit but
basically inside of selection you're
going to have the where part and let's
say it's where ID is equal to and let's
say the value is going to be one well
you're going to store all of your
selection arguments over here so let's
say you want to do a query enrich all of
the rows of data or received or returns
if the ID is equal to one two or four
well you would have this right here be
the where ID is equal to part and then
here you would have one two and four
stored inside of this string array like
I said doesn't make total sense stick
with me and then finally here is going
to be sort order so how you want all the
data to be sorted so let's go into the
query section start creating this you're
going to first create a query builder
here and it allows you to build queries
just like you may have guessed just call
it query builder equal a new SQLite
query builder and you're going to set
the table that you want to query just
change this to query builder and the
tables that we want to work with is the
only table we have so that's our table
name right there
then you're going to use a switch
statement here to match the URI with the
content provider and this is where your
I mattre comes in this is also where the
URI code is going to come in
so we're going to say case URI code
you're going to then set your projection
map which once again is going to be all
the columns of data that you want to
receive so that projection map and
that's going to be values so that's
going to be ID let's come back up here
again here you can see our hash map and
you can see that we're going to be
searching for ID and name that's what
those are and that's what we're going to
get most of the times let's break out of
there otherwise we can throw an error
say default throw no argument exception
and we could do something like unknown
URI plus whatever you are I was sent
that's all we need to do with that
now if we get down inside of here we're
going to create our cursor which if you
remember from the last part of the
tutorial it's going to allow us to read
and write the data from the query that
we set for our database and how we get
it as we go query builder query pass in
the SQL database projection or the
columns we will work with selection
which is actually going to be an array
and then selection arguments which once
again is going to be the array of
possible values if selection is where ID
is equal to selection arguments is going
to be the list of ID's we want to use or
the one ID we want to use and I would
just throw two dolls inside of here and
then sort order is the last thing but
we're not going to worry about that
either okay so there's a query now we're
going to get cursor that's going to
allow us to access our results we're
also going to say that we want the
cursor to watch for URI changes how we
do that is go get context like I said I
want to reiterate this is pretty much
the way to do content providers all the
time I'm just going through and
explaining what's going on and here
we'll get the content resolver which is
going to provide access to the database
using little really nice little methods
passing URI and this is get content
resolver you're going to see one of
those being created here in a minute and
then finally returned cursor it's going
to have all our results now I get down
into get type and this is basically
going to handle requests for the mime
type or the type of data at our URI
again we're going to do the same sort of
thing we did up here with this guy let's
go and copy it paste it inside of there
and in this situation we're going to say
return again this is something that's
hard coded you're always going to use
the same thing with a
it and put directory and then we're
going to put CP contacts so this is
always going to be used and this is the
thing that's specific to our content
provider and for default here we're
going to say illegal argument exception
again and then this time we'll say
something like unsupported URI okay so
let's get type got done with that now we
can handle inserting data and kind of
like you probably would have guessed
this is used to insert a new row of data
into our provider and of course it's
going to receive the URI right here and
selection which is going to be like I
said ID is equal to and in selection
arguments is going to be the list of
ID's or whatever it's going to be there
whoops
accidentally jump down into the leap but
now you know how delete works content
values and his situation is going to be
the ID and the ID value whatever's
assigned to it the name and the name
value that's assigned to it that's
what's going inside of there go here
here we'll get our row ID for this
insert and we'll do that by calling the
SQLite database and calling for insert
and we're going to pass in our table
name null and then values and like I
said values is going to have the key
value pairs we want insert it into our
database table name is going to be the
table we want to insert into and then
null in this situation is going to be
used in a situation which you try to
insert empty rows like I said don't
worry about it now what what you want to
do is verify that this row was actually
added so I will say if row ID is greater
than zero well we know something was
inserted in that situation I'm going to
go and create URI and let's say I want
to do underscore URI so I can use that
again and then I'm going to go to
content your eyes with append ID and
this is going to append the given ID to
the path and then return a builder which
is going to be used to manipulate the
URI references and we go content URL row
ID this is appended ID and we'll go get
context here we're going to use the
resolver again get content resolver and
notify changes here we'll pass in the
URI and then all in this situation and
what this is going to do is notify all
observers that the row was actually
updated whenever this insert went inside
of here the URI inside of that
and you are i under there and there we
go and then if we get down here and it
was situational that means that our
insert failed so we could do a toast or
something and show that of course and
then otherwise we can just return null
or something like that ok got all that
done so now let's come down into the
lead I already explained selection and
selection arguments multiple different
times you're going to see it a little
bit a little more later on here we're
going to track how many rows were delete
it zero again we're going to use this
guy up here
exact same thing over and over again to
match our URIs so let's just copy that
back down inside it delete paste that in
there down here we're going to go rows
deleted and query for a specific row to
be deleted and we'll say delete and
we're going to use the same table name
again and selection and selection
arguments again
and that's going to allow us to delete
multiple different rows and break in
that situation and otherwise illegal
argument exception again and we could
say something like unknown URI or
something like that and after the switch
statement is done get our context and
then we're going to get our resolver
content resolver and this is going to
again notify all the observers that a
change has been made and will pass in
URI and null and then we could also
return the number of rows that were
deleted and there we go and that brings
us to update which is the last thing we
have to do before we can go into our
resolver and actually play around with
all this stuff and once again this is
almost exactly the same it's going to be
rows updated give it a value of 0 again
we're going to match the URI to make
sure we're dealing with the correct
thing so we're going here and grab this
switch statement again and this is going
to be rows updated and if we want to
update just change delete into update
table name is going to be the same the
selection of selection arguments are
still going to be here but we're also
going to come in and put our values that
we want to update and I think you can
figure out how that's going to work and
then we'll just leave unknown URI there
and then after our switch state what
we're going to do exactly the same thing
we're going to notify everybody of all
the changes that were made so there's no
reason to type that in just copy this
and paste that inside of there except
this is going to be rows updated there
we go
pretty simple and that is all we're
going to need to do to set up the
contact provider which is going to allow
us to update delete edit insert and do
all those different thing
now we'll jump over into mainactivity
and set all this up okay so here we are
inside the main activity here's our
editable text our contacts name remember
this guy is only going to do allow us to
come in here and add a name that's all
it's going to do the other ones more
fancy but we'll get into that in a
second for this guy all we're going to
do is set up this or initialize this
editable text box equal to and this is
edit text it is fine view by ID and
that's going to be our ID dot contact
name editable text there it is
and then over inside of this guy if we
come down here to the text part of it
want to come down here to add name and
whenever that is clicked on it's going
to open up a method come over here and
just create that create add name over
here inside of mainactivity.java and
whenever they click on that first thing
we're going to do is we're going to get
the name that they want to add and
that's going to be contact in that
editable text box and then get text of
course and then to string of course that
is now we got the name that we want to
add to our database and then to add it
we're going to be storing everything in
what are called content values which are
just key value pairs again so content
values and we'll just call this values
is equal to new content values now if we
want to add in those key value pairs
will go values dot put and contact
provider the name and then name in this
situation is going to be the value that
we got from that edible text box this
guy right there
we're then going to get the URI unique
way of referring to our content provider
and we'll go get content resolver and if
we want to insert we go insert and we
pass in contact provider and our content
URL guy right there
our unique way of referring and we say
we want to pass in those key value pairs
and that is how simple that is and you
want to do a toast again and then of
course show it and there we go that's
all we're going to need for the content
provider now we're going to go over to
the exciting new port and talk about the
content resolver okay as you previously
saw when the application was running
this guy is going to allow us to click
on this button to show all the contacts
here we're going to be able to enter an
ID and delete it here we'll be able to
search for a specific contact
act and here we'll be able to add a new
contact so we're going to be able to do
pretty much everything with our content
provider using the content resolver
like I said this is a very simple
interface but I provide a link to it in
the description if you want to go and
see exactly how I made it
now what are we going to do we're going
to need a unique way to target our
content provider first and of course
that's going to be a constant for us I'm
going to call that content URL you go
URI in this situation I'm going to our
everything on one line just to keep this
very simple and to refer to a content
provider I'm going to go to content and
then we're going to get our unique ID
way of referring to it just copy that
paste that inside of there then at the
end of this we're going to put contact
provider because that is what we called
it before over in our contact provider
code and that's going to be contact
provider and then CP contacts if you
remember from before that's what I call
it and that's going to give us access to
that unique content provider anywhere in
any other application as long as it's
available of course here we're going to
have a text view and this is going to be
where we are going to be storing our or
printing out all of our information to
give us a value of null editable text we
have a whole bunch of them delete ID
edit text will initialize those in a
second then we're going to create our
content resolver
which is going to provide us access to
the other applications content provider
let's just call this resolver and here
we are inside of all and create once
again this is in mainactivity.java
everything's going to be done all in
this one part of the application we can
come into the resolver area to get this
we go get content resolver right like
that we can initialize the editable text
boxes in text view there's our text view
and there is our editable text boxes
initialized and then I'm going to call
get context which I'm actually going to
create here in a second get contacts
when you use that multiple times in
these different methods so might as well
create that right now like I said we'll
call this from a bunch of different
places once again we're going to create
our projection and like I told you
before I'm going to make this very easy
to understand projection is equal to new
string there we go
and what is it made up
well it's made up of an ID and a name
those are the two columns we're going to
work with and here we're going to be in
essence be querying for everything
that's currently in the database and
we're going to call our cursor which is
going to have all of our data inside of
it we'll be able to work with and how we
get it is we go resolver query and we
pass in our unique ID so content URL
we're going to pass in the columns we
want which is going to be our projection
and in this situation because we want
everything we don't have to do anything
else so these other values can all be
null okay so in this situation which you
just want everything you don't need to
put in all the other information you're
going to see here I'll use all those
here in a moment and I can go contact
list like this and I'm going to store
all those that I'll then put in our text
view if I want to cycle through all of
the results I just go cursor and moved
first that's going to tell me I got
results and then to cycle through those
results and create string ID just like I
did in last part of the tutorial and we
can go cursor and get string and then
specifically go cursor get column index
and we're going to get the column that
has the index of ID in this situation
string do the exact same thing for the
name in exactly the same way and we'll
say get string again and then we're
going to pass in the same thing again
cursor again get column index and the
index in this situation is going to be
name then as we cycle through this whole
entire thing we'll go contact list is
equal to contact list plus and then
we'll put the ID plus and then we can
put a colon or something inside there
and do the same thing for the name and
then finally do a backslash for a
newline and there we go that's going to
give us all that information that we'll
be able to output and we're going to
continue to cycle through here as long
as this comes back true move to next
there we go and then don't forget to put
that semicolon there and then after we
go through our whole entire while loop
we can go contacts text view and set our
text to our contact list and that is how
we perform a query to get all of our
call
tax and then output them if we want to
come in here and delete a contact this
is going to be called whenever that
button is pressed on over in activity
main here we can go to string ID to
delete because we're going to get to
side of the editable text box and to get
that we'll just go
leet ID edit text and get text and then
finally to string okay so and we know
what we want to go and delete now what
we're going to do is get our ID deleted
and we get that by calling the resolver
and then calling the lead on it we're
going to pass in our unique ID for that
guy we're then going to pass in you're
going to see exactly what it looks like
right here remember I said we go like a
where clause so we're going to go ID is
equal to and you're going to put a
question mark inside of there and then
here what we're going to do is we're
going to put in specifically what we're
going to check for here this is going to
be a string array but in this situation
we're only going to delete one thing at
a time you could actually put multiple
things in there and delete multiple
things from the database all at once if
you wanted to and then if we want to
update our contacts list in the text
view we call get contacts and that's
going to execute lookup contact we can
come over here and go and have that
method created for us create lookup
contact there it is lookup contact and
then we can jump back over an activity
main and go to the add contact part
right here add contact on click and
create that method as well just so we
have it if you want to look up a contact
and display that just that contact well
first off we're going to go and find the
ID that we want to show is equal to ID
look at that edible text and get our
text and then to string and there we go
then specifically we need to define our
projection which is going to be the
columns of data that we want to retrieve
and in this situation that is going to
be ID and name
that's another look at exactly what a
projection looks like again we're going
to create a cursor which gives going to
hold the results of this query and we're
once again going to use the resolver to
issue that query again we're going to
send in the unique ID for our content
provider we're going to pass in the
projection which is going to say exactly
what rows of data we want to receive
we're going to use our where clause in
this situation which is going to say
where the ID is equal to whatever that
question mark is going to be and
question mark is going to be a string
array but in this situation we only have
one value we want to search for and
that's ID to find and then the final
thing here is sort order and I'm going
to leave that be null again it's just
going to come back based off the ID
which makes sense to me and we'll then
create our contact here which is going
to be the one contact we're trying to
find and all the data on it we want to
check that actually we receive some sort
of information here so we'll say move to
first if we did receive a result from
our little query we're going to get
inside of here we're going to once again
get the ID let's just copy this it's
exactly the same as up here this right
here and this guy right here and what
the heck let's just copy that to come
back down inside of here paste that
there exactly the same this is going to
be contact and this is going to be
contact everything else will be exactly
the same we come in here and do an else
if we want and pop a toast inside of
there if we were unable to find a
contact and otherwise we know we found
one so we'll go contacts textview and
we'll set the text to this one contact
that we were looking for and there we go
now we know how to go in and search for
a query now let's go in and add a
contact so we're going to go string name
to add is equal to add name editable
text box we want to get our text to
string we want to create our content
values which is going to have the column
names and the values all that values
again new content values and then the
specific values here that we're going to
be using to add to our database is going
to be name
or the ID Otto increments and this is
going to be named at and then to execute
we can go resolver insert we could go
and get the value returned here but
we've just touches to it this way keep
this simple
there's our unique ID and there's the
values we want to add to our database
and then if we wanted to come in here
and go get contacts there we go we can
do that
any only thing that's left to do is if
we go over inside of here and click on
the show contacts part this guy right
here you're going to see that it wants
to call a method called show contacts
let's go and have that created create
show contacts there that is and all
we're going to do whenever that is
clicked on is call get contacts and
that's going to print off the screen so
there you go guys there's content
provider content resolver and a whole
bunch of other different things hope you
guys find this information very useful I
know a lot of people are confused by it
hopefully you're stuck through the whole
entire tutorial and learned at all and
if you didn't please leave your
questions and comments below otherwise
till next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>