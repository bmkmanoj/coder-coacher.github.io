<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>C Video Tutorial 8 | Coder Coacher - Coaching Coders</title><meta content="C Video Tutorial 8 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Derek-Banas/">Derek Banas</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>C Video Tutorial 8</b></h2><h5 class="post__date">2013-08-17</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/PYzqi0eOxIg" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">well hello internet and welcome to part
8 of my C video tutorial today I'm going
to talk about how to dynamically
allocate memory using the memory
allocator function if you missed any of
the previous parts of this tutorial I
provide a link in the upper right hand
corner and of course all the code is
available in the description for the
video so I have a lot to do so let's get
into it okay normally whenever we
allocate memory we allocate it directly
inside of our code so whenever we create
a character data type it's going to get
8 bits 8 bits to set aside inside of
memory 8 bits of course is one byte and
if we want to store more information
than that too bad also whenever we want
to create an integer it gets four bytes
no more no less but you may say well a
character array will allow us to store
pretty much as many bytes of data as we
could possibly want the only problem is
we have to hard code that we cannot
actually increase that size or increase
that size of the array at runtime that's
where the memory allocator function
comes in that's basically what you do
with the memory allocation function
that's what I call it you can call it
may lock or you can call it whatever you
want to call it basically what it does
is allocates memory at runtime that's it
and what you're basically going to do is
pass over to it at runtime the amount of
space you want and it's going to provide
it so I'm just going to create a little
example program here let's say amount of
numbers to store and this is an integer
and this is going to hold the number of
numbers that we're going to say to the
memory allocator that we want to store
for us and just get printf how many
numbers should we store we're then going
to use scanf this is going to be an
integer and we're going to say amount of
numbers to store then what we're going
to do is create an integer pointer and
what's going to do is set aside enough
space to hold the number of intz that we
just asked for and it's a pointer so I'm
going to put a P in front of it that's
just something that I like to do then to
it I am then going to put this typecast
in here now inside of C you do not need
this and actually some people prefer
that it's not you
you do however you use it or need it if
you're going to be programming inside of
C++ so I'm just going to put it there
just to show that I am casting this
pointer amount of numbers to store and
then I'm going to multiply that times
and this is where you're going to define
exactly how much space you want the
memory allocator to set aside sizeof int
it's going to be storing integers inside
of it and I'm just going to multiply the
number of integers that they said they
want it and that's it that's the memory
allocator function then what I want to
do here and this is important to do
because if the memory allocator wasn't
able to set aside the amount of space
that we wanted it is going to send back
the value of null so we're going to say
if not null and we're going to set up an
integer I say print F enter a number for
quit basically I'm going to set this up
so that if they enter anything that's
not a number an integer number it's
going to quit and what we're going to do
is just create ourselves a while loop
and we're going to say that we're going
to continue accepting numbers as long as
I is less than the amounts of numbers to
store throw that in there and we're
going to say scanf and we're going to
say that we want to get ourselves an
integer skip to the next line and then
we're going to store our values by
referring to the pointer and I'm
actually going to show you a couple
different ways to access this
information this time I'm going to show
you how to access the information using
array notation and then the next time
we're going to use pointer arithmetic
and as long as one comes back we know
that they entered the proper information
they enter anything that's not an int
it's going to kick it out then we're
just going to say printf enter a number
or quit and then we're just going to
increment I and store all that
information as if it's an array then
after we have all those numbers entered
in I'm going to say printf throw a
newline inside of there and I'm going to
say you entered the following numbers
then I'm going to cycle through those
numbers using a for loop I'm just going
to define J inside of here
while J is less than I which is the
number of numbers they entered I could
also go in here and force them to enter
the maximum number but we don't need to
do that gives us a lot of leeway and
then I can go printf and print out all
these numbers and this time we can just
refer to it using ray notation like that
and we just have to change this to J and
then after we're all done with all that
stuff down here we are going to use a
function called free and what it's going
to do for us is return all of the memory
that was allocated by the memory
allocator function back to the system to
use in this program which it does
actually this isn't even needed there's
a lot of misconceptions about free and
what it does and what it doesn't do the
reason why free isn't really needed this
time is because all allocated memory is
returned back to the system when the
program terminates what free is really
used for is in situations in which you
are allocating large box of memory over
and over again without returning it and
if you would say let's say I'm going to
get into this let's say you get 10 K of
data you use it but you do not use free
to send it back to the system however as
your computer program continues it has
no use for that 10k you then come in and
you get another 10k and then you come in
and you get another 10k eventually if
you keep doing that I just want to point
out no longer used but memory not freed
so you get 10k the rest of the program
you don't use this 10k but you do not
free it then you get another 10k again
no longer used but you do not return it
and again and again and again if you do
this enough times you will have what is
called a memory leak and that basically
just means you run out of memory and
your program crashes and that's a bad
bad thing so use free all the time just
to understand that in this situation we
don't really need to use it and you do
not need to fret about the idea of not
using free thinking it's going to crash
all computer that's not going to happen
okay so we're going to save it bounce
over here and compile it and there you
go how many members do you want to
store and in this situation I am going
to say ten it doesn't matter enter
anything and I'll just go one two three
four five and then I'll type in Q see
that it ends and it prints out that
information so that is the basics of
exactly how the memory allocator
function works now let's go in and do
something a little bit more complicated
now we're going to dynamically allocate
memory inside of here and store strux
inside of it and of course I have
tutorials on strux if you haven't seen
them before I'm going to come in here
and create a products truck and inside
of it I'm going to have a float that's
going to represent price and I'm going
to have a character array that is going
to have product name inside of it and
I'm just going to say 30 characters is
big enough and for this example it is so
then we have to actually create a
pointer to the struct so I'm going to go
like this products then I'm just going
to create a couple junk variables so I'm
going to need later on to iterate
through this guy I'm going to say int
number of products because we're going
to allow them to dynamically say how
many products they want to enter and I'm
going to say printf enter the number of
products to store going to use scanf
again and we're going to store number of
products then we have to get our pointer
that we created up here and point to the
address for the memory that we're going
to have the memory allocator allocate
for us and it's a struct and it's
specifically it's a product struct and
then we're going to say a lock and do
exactly the same thing number of
products like this times and then we can
also come in here and go sizeof struct
product which is also something that can
be defined of course data type like any
other it's nothing special about it
except you created it which I guess
makes it kind of special that's how that
works and what we're going to do is
create a for loop is equal to 0
that's remember I said junk
values I'm going to use that's where
that comes from I'm gonna say wow I is
less than the number of products that
they said they want it I'm just going to
keep this simple this time and then
we're going to increment I say printf
enter a product name and then I can come
in here and I'm going to show you how to
use pointer arithmetic this time to
cycle through our data so we're going to
be getting ourselves a string and then
we can go P products this is using
pointer arithmetic of course which we've
covered before and then we just point to
product name which of course is this guy
right here there we are
okay so we got that then we have to do
exactly the same thing for the price
enter a product price and of course make
sure this is I and not one that's
important there we go that's better so
it's going to cycle through and store
inside of there and then here we just
change this to price and after we have
all those stored inside of there we can
come in here and go printf and do
something like products stored and the
next time I'm going to do a little bit
more complicated struct sort of pointer
slash memory allocator program but for
now I think this is good so I want you
to completely understand how this works
and J then we can say printf and it's
going to be a string and let's throw I
don't know a tab inside of there to do
something different and then we're going
to say we want two decimal places and
then let's throw a new line inside of
that and then we have to put the
information inside so we're going to go
P products just like we did up here P
products and here we're going to do plus
J and we're going to say we want our
product name skip down to the new line
here and let's just copy this paste that
in there and then this is going to be
price it's not that hard like that and
then here we have two free we don't have
to but we're going to because we're good
programmers we're going to say free the
pointer and it have a little bit of a
bug here up here change this to F see
prices float make sure you don't make
that error and if we file save that jump
over here pile it enter the number of
products to store let's say we want to
enter enter 3 enter
name let's say egg and let's say the
price is 25 cents and then let's say
fish and let's say the price is 11 and
then we'll say bread and the price of
that is $3 and there you can say
products stored egg fish bread so that's
how you use the memory allocator
function as a tutorial continues I'll
get more and more complicated just want
to ease you into the process though
please leave any questions or comments
below otherwise til next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>