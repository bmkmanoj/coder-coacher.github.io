<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>How to Make Video Games 12 : Make Tetris 5 | Coder Coacher - Coaching Coders</title><meta content="How to Make Video Games 12 : Make Tetris 5 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Derek-Banas/">Derek Banas</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>How to Make Video Games 12 : Make Tetris 5</b></h2><h5 class="post__date">2017-07-12</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/8A7hgS-6I08" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">well hello internet and welcome to part
12 of my how to make videogames tutorial
series in this video we are going to
completely finish Tetris we're going to
add some sounds we're going to provide a
way to increase difficulty over time
we're going to create a game over scene
we're going to display the next shape
and a whole bunch how they're different
things like always all the code and
images and sounds and everything are
available in the description underneath
the video and I have a lot to do so
let's get into it alright so here we are
in unities what do I need to do now well
I'm going to be adding sound so I went
and grabbed some sounds like I said I
have them in a link in the description
and I'm going to select all these sounds
and I'm going to drag them up and put
them in my sounds folder alright so we
got that set up and obviously we have
the cube there and we click on sounds
you can now see there they are and this
little orange thing here says that
everything is OK with them now what we
got to do is create our sound manager so
we're going to do this in the hierarchy
we're going to create audio and audio
source there it is and we're going to
call this sound manager and this is
going to basically allow us to grab the
sounds and play them whenever we would
like we're then going to create a script
and we're going to call it sound manager
there it is and there is sound manager
ok then we'll select the sound manager
little guy over here in the hierarchy
and we will grab this the sound manager
script we have and drop it right there
and now we're going to double click on
sound manager and get all this working
ok so what do we need to do well first
off I only ever want there to be one
sound manager because you know that
doesn't make sense so what we're going
to do is we're going to create a
singleton and basically setup everything
so that only one sound manager can never
be created so sound manager is the type
and instance is going to be equal to
null we are then going to provide a way
for the user to go in there and set all
of their sounds so these are going to be
audio clips not boughten not audio
behaviors sorry about that and I'm going
to call this the rotate sounds and let's
go make a whole bunch of these I am NOT
going to play the tetris music because I
am
just positive that it's probably
something that is copy written or
something and I don't want this to be
blocked in any way this video so you can
add that background music but you know
I'm not going to and I showed you in a
previous part of the tutorial how to add
background music and how to keep it
playing even whenever a scene ends so
here is a whole bunch of these and game
over alright so there's a bunch of
different sounds not certain I'm going
to use every one of them but I think I
will alright so then I need to revert to
refer to the audio source that's going
to be added to the sound manager to play
sound effects so I'm going to say
private audio source and sound effects
audio and then down inside of start this
is going to be the singleton area and
what I need to do here is make sure that
there's only one sound manager and if I
ever come across another one I'm going
to destroy it
so what I'm going to do here is I'm
going to say if we are trying to create
a new sound manager I'm going to check
if instance is equal to null and if it
is well that means that whoops let's go
close that off and get rid of this and
if it is well then that means and I can
set instance to this guy right here and
else if the instance is not equal to
this in that situation I am going to
destroy this version of the sound
manager to make sure that there's only
ever one oh this is I need to put game
object in there whoops sorry about that
alright so there it is and then after
this I'm going to say audio source the
source is going to be equal to and I'll
go get component audio source like that
and then I can go sound effects
audio is going to be equal to the source
and then the guy that actually matters a
lot this is going to be the function
it's going to be called every single
time I want to play an audio clip I'm
going to call them they're going to it's
not going to return anything it's just
going to play a sound so
play one shot and it's going to receive
an audio clip we will call clip and then
I'll go sounds effects audio play one
shot and it'll be whatever the audio
clip is they passed in okay so got all
that set up I don't think there's any
errors and now we can go and drag over
our audio clips okay so here we are and
we're open up I just clicked on the
sound manager here and you can see over
here all of the audio clips that are
listed and then I'm just going to go
sound so I'll go game over and drag that
down there and then there's the rotate
sound let's drag that right there and
Road deletes drag that right there and
some shape move where's that other shape
move shape move right there and go tune
shape stop where shape stop mmm let's go
and look I don't know for some reason it
wasn't in here let's paste it in there
again there it is and we'll drag it over
here and drop it in the sounds there it
is not showed up don't know why that
happened
all right so we got it fixed doesn't
really matter so let's grab shape stop
and put it right there so we got all of
our different sounds pretty good we'll
save that now we have to figure out
where we're going to put all these guys
I'm going to go scripts and game board
is where I think I want to do it so
let's just go to the top and figure out
where we are going to put all of our
different little guys we got here well I
do not need any here actually I don't
even need this print array anymore I can
get rid of it all together why don't I
do that because it's getting a little
too busy here so let's get rid of that
all together and I do not believe I have
a reference to it I think I'd black that
out in the last part of the tutorial
series
here's delete all full rows there is
going to be a place that I want to play
a sound effect up see I have it right
here make sound okay so that's good so
let's get rid of that and to play a
sound we just go sound manager and
instance and play one shot and then you
refer to the name of whatever the sound
is that you gave it so instance and row
D leaks
so there it is that's how we play a
sound pretty easy stuff let's go and
let's copy that and then we'll test it
here in a minute to see if it worked
then we're going to jump over into shape
there's going to be a whole bunch of
different sounds we're going to play
inside of here let's scroll down inside
of here we're going to basically be
playing a sound every single time we
move in any way so where are we going to
play these sounds well we're going to
play these sounds right here under
update game board just paste that inside
of there and what we're going to play
here is shape move shape move and here
we're going to play shape move again
muscle just copy shape move and paste
that in there so copy that sounds shape
move now again keep going and where else
do we guys
oh well there's another update game
board I'm actually going to do two of
them inside of here so I'm going to
throw this right here and this is going
to be shape stop let's call shapes stop
and then another one after my update
game boards paste that in there and this
one is just going to be shaped move just
like I did previously and then we have
our rotates we're just going to paste
this there and this is going to be
rotate sound I believe rotates sounds
and there's going to be another rotate
sound so let's copy that and that's
going to come here again update game
board of course and I think that's it so
let's go test it look down here don't
see any error so everything should be
okay let's run it and you can see their
sounds and there's the rotate and and
there's another sound from when it stops
I'm trying to get a completed row here
to show up so that I can just test my
one last sound and here's a completed
row so let's just go and test that and
there it worked
alright so cool so now what do I need to
do let's check the console just to make
sure yeah I don't see any bugs and no
don't see any bugs all right so that's
good so now what are we going to do well
I want to slowly increase the speed of
my falling shapes just to make it a
little bit more difficult so where am I
going to do that I think I'll do that in
shape all right so back to the top what
am I going to need to define inside of
here I think I'm going to change
speed in this situation I'm going to
have this be well I can just leave it
that way I'm going to make it static
though so let's make speed static and
then down inside of the start area I'm
gonna do a couple different things here
um-hmm actually I'm kind of thinking
that I might need to set up the game
over scene here before I do this it
might make a little bit more sense so I
think I'm going to do that so I'm going
to come back inside of here and I'm
going to create a new scene in my scene
folder and I'm going to call this game
over so let's go inside here and so
let's create a new scene and we'll call
it game over alright so that's good and
let's go and let's save everything make
sure everything's all saved so file save
project file save scenes and then double
click on game over and then for this guy
I'm going to want to create a text
component I'm going to keep this
extremely simple so you can make this as
complicated as you'd like but I'm going
to keep it a very very very simple I'm
going to just call it game over just for
anything doesn't really matter and let's
come over here and let's just say game
over like that for our text don't know
if I'm going to do anything otherwise
with that I'm then going to click on the
canvas go in here and set a couple
different things I'm going to set this
to world space like I always do I'm
going to get my camera drag it over here
drop it inside of there like I did right
there dynamic pixels per units I'm going
to have that be 10 my positioning on
this is going to be zero and zero and
zero for all of those guys I'm going to
change my width and height and I know
what this is because I did this already
on the other scene I'm just basically
using exactly the same things as I did
previously and then let's zoom out of
here and see where our text is so where
is that guy hidden that sometimes it's
in wacky places and sure enough it's way
down here if you can see it so I'm going
to drag it up here throw it in the
middle and then zoom way in I'm going to
shrink it down here first off shrink
down a lot put that right around the
middle I'm going to change this to a
white
and there that is I'm going to change my
main camera to black that and definitely
need to shrink this down a lot so grab
this remember if we want to keep our
text looking good we want to scale it
here not in the font space so we're
going to scale this down to say I don't
know like 0.3 or something like that so
let's try try that point free whoops
23 something like that and that's still
not good enough let's grab it I mean it
sort of works but okay I don't know
that's that's a little bit intense so
let's go and let's scale it down just a
little bit more let's say 0.25 0.25
something like that there you go good
enough so there is our scene and even
what you want to be able to change your
scenes you also are going to need to add
that to your build settings so we're
going to go file and build settings and
add open scene like that and then close
it and then go file save scenes and file
save project and then let's jump over to
our main scene and then we'll add that
as well whoops double click it make sure
well come over here and click on open if
it doesn't open that way all right so
now we got everything all open there and
then we're going to come up here and go
file once again build settings add open
scenes there's that one and then drag
our main scene overtop of the game over
scene and then close that okay so now
we'll be able to use both those scenes
okay so now what we're going to do is
we're going to set it up here so that
our game will have an ending to it so
let's go into our scripts and we're
going to do that inside of shape okay so
here is shape now inside of start what
we're going to do is we're going to say
if at any point in time our a shape
shows up and it is not in the grid that
means it is messed up in some way that
is a sign that we have shapes
overlapping shapes and in that situation
we are going to want to end the game so
we're going to say if it's not in the
grid then we got a problem so and
obviously this is a function so there it
is and we created that in previous parts
of the tutorial all right so what are we
going to do now
oh well we should play a sound so let's
see here do I have a sound somewhere
here we are so grab that and throw a
sound inside of there and the sound
we're going to play is the game over
sounds game over okay so we got that now
what we want to do is we want to call
for our game over scene to show up so
how are we going to do that well I'm
going to use invoke which is going to
call a function and the name of that
function is going to be open game over
scene and it's going to call it after a
certain number of seconds of pass let's
say like half a second has passed really
really brief so there that is so then we
come down here and I'm going to say
invoke repeating and this is going to
slowly increase the speed of our shapes
on the screen so I wanted to I started
off doing that but then I wanted to get
the scene out of the way so what it's
going to do is it's going to wait two
seconds and then every two seconds after
that it is going to call this function
increase speed which we are going to
create here in a moment but now what I
ought to create is the open game over
scene so let's go void and open game
over scene and this isn't going to
receive anything it's just going to open
up the game over scene and this is it
after a half a second it's going to open
that up so what are we going to do with
this well we're going to destroy our
shape so we're going to say destroy and
that's going to be game object so there
that is destroyed and then we got to
call the scene manager load scene and
the name of our scene is game over
whoops game over there we are okay so
and this is giving me an error it's
saying shift and fixes the victor and
the guy that I need is scene management
is it even here oh yeah there it is
that's what I need to be able to switch
scenes inside of my code alright so got
that set and now we got to create the
increase speed
to do that I'm going to void and
increase speed and it's not going to
receive anything it's just going to
increase the speed and here we'll go and
refer to shape speed the static that we
just created and we will decrement that
down by a certain amount will go 0 0 1 F
and see how that works out might work
might not don't know find out so when
are we going to increase this speed
that's going to lie down inside of here
what we want to do here is we want to
change up this just slightly so what I'm
going to do instead is I'm going to say
time time - and then I'm going to say
last move down greater than or equal to
and then I'm going to say shape speed
instead of 1 so that will make it change
over time so shape speed there it is
alright so that's going to you can
change scenes and then have this speed
increase you can do whatever you want
this is just what I'm going to do you
know and you can move it and do whatever
you want in your own version of Tetris
and we're going to run it and we're
going to see I'm on purpose going to try
to lose here so that's what they all say
ok so and it's being very useful here
and there it gets came over all right so
that worked good all right so what else
did to do here all we wanted to see if
the speed increases for the shapes and
how that works so I'm going to play this
here for a moment and then you're going
to see that it changes and as you can
see the spaces are moving quicker and
they'll eventually move much much much
much quicker ok so there we are doing
that so we know the speed is increasing
and also these are stacking and all that
stuff now let's get rid of this guy and
then push the next shape inside of there
all right so the first thing we want to
do is get rid of the my erasing here it
was useful at the moment but now it is
no longer useful and we're going to save
that and then we're going to jump into
shape spawner which is going to be where
we go and display the next shape the
only thing is is we have these prefabs
here what we want to do with them is we
want to get a version of the prefab that
doesn't have the shape script attached
that's you know because if we go and we
throw this prefab on here with this
attached to it that's going to cause all
kinds of problems so how do we go and
dislocate that well what I'm going to do
is I'm just going to grab the shape I
shape drop it on there I'm going to
change its name I'm just going to put an
S on there for next shape grab it throw
it in to the prefabs area go get this
delete that and then get this guy right
here and then I'm going to delete the
shape component off of it okay
let's do that one more time and then
I'll do it for all the shapes and then
you know whatever so let's go and do
this and then grab it throw it into the
prefab section and then with it selected
we are then going to remove components
and then we're going to come over here
and delete it okay so now I'm going to
do that for all of them so we will be
able to display them over here under
where it says next alright got it all
set up here just going to set up my Z
shape grab it drop it into the prefab
section come over here and remove the
script and then delete this all right so
we got those all set up super awesome
now let's jump into shape spawner now
what are we going to do is shape spawner
well basically I'm going to have a new
array and it's also going to be made up
of game objects but it's going to be
those shapes that don't do not have the
shape script attached to them so they
won't move
basically alright so let's go in here
and create this let's call these next
shapes because that's kind of what they
are and make that capitalized alright so
got that set I then want to hold a
reference to the game object that it is
going to represent so I'm going to say
game objects and up next object is going
to be equal to null and you know what
since we went and created this array
let's go and propagate it with all those
shapes right now alright so here we are
and let's go and shape spawner and
here's next shapes and this is going to
be 7 just like it is above so let's go
whoops not 77
there's all those guys and we'll go and
drop all of the new images in there so I
shape drop that there and make sure you
get the ones with the NS at the end of
it so there's J and make sure you get
them in exactly the same order otherwise
it's going to cause problems there's
that oh and s and T and then finally Z
okay so they all look i jl OS TZ all
right they're in the same order good
stuff and let's go and save that and
then jump back over into our shape
spawner script here we are now after
this what I want to do is I'm going to
get I want to create a shape index and
I'm going to give it a default value of
zero and then I want to create another
one and it's going to be the next shape
index and it's also going to have a
value of zero okay so we've got that set
then we come down into spawn shape we're
going to be changing some of these
things here I want to generate a random
index however this is going to be equal
to next shape index like that and create
the shape at the shape spawner location
that is still going to stay exactly like
it is I am then after this is all done
I'm going to get the next shape index
and I'm going to get it exactly like I
did before which is random range
shouldn't it deleted ina could have
copied and pasted it but whatever so
zero through six got those all set up I
then want to define where the next shape
is going to be positioned so I'm going
to do that with a vector of course I'm
going to go vector three next shape
position and this is going to be a lot
of messing around to try to figure out
where to put this so I'm going to go new
vector 3 and I have no idea what this is
so what I'm going to do is I'm just
going to put 0 0 inside of here right
now and figure it out just by trial and
error by dragging things around and
seeing how they work after that I need
to destroy the next shape sprite if it
already exists on the screen otherwise
I'll have a whole bunch of sprites
printing on
off of each other and that's bad so I'm
going to go up next objects not equal to
null in that situation actually I don't
need these in that situation I can say
destroy up next object so if one of them
exists I don't want any to exist before
I put a new one so I'm going to just
destroy it and then I'm going to say up
next object is going to be equal to
instantiate whoops Stan she ate and I'm
going to throw next shapes and inside of
here I'm going to put the next shape
index let's get that guy in after that I
can get my next shape position which is
going to be you know the vector that I
think I'm going to figure out here in a
moment and then I do that weird thing
that handles the rotations and identity
okay there we go
whoops identity not indentity okay set
it then down inside of my start area
before I spawn my first shape I need to
go next shape index is going to be equal
to and then I need to generate a random
value so I'm going to grab this guy copy
that paste that inside of there save it
I don't need to do anything with
updating so now let's go and test to see
if that all worked I do not see any
error so let's run it
that's okay well there's the you know
the thing up next remember I didn't know
where to position it so let's go and
look at that see it work so now what I
need to do is through trial and error
figure out how to move that right there
and then I think we're done and there
you go guys got all of that all set up
just make sure our shape comes up the
way we want it and there it is let's see
if we then get another yellow cube and
we did and we're just going to come in
here and drop it okay cool stop all
right drop it as far as I can tell
everything is working you too
all right so hopefully you guys enjoyed
this tutorial series I definitely
enjoyed making it was a lot of fun
and up next I don't know what I'm going
to do them either going to be pac-man or
Mario haven't decided yet you guys wall
to mat lead aside and like always please
leave your questions and comments below
otherwise till next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>