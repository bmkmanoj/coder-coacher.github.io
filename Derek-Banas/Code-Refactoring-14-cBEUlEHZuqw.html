<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Code Refactoring 14 | Coder Coacher - Coaching Coders</title><meta content="Code Refactoring 14 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Derek-Banas/">Derek Banas</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Code Refactoring 14</b></h2><h5 class="post__date">2013-02-03</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/cBEUlEHZuqw" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello internet and welcome to port 14 of
my code refactoring tutorial today I'm
going to show you how and when to use
the adapter pattern and for all you guys
out there that are asking for an
algorithm and data structure a video I
am going to make those together with my
code refactoring tutorials to try to mix
it up a bit but either way let's just
jump right into the code okay for this
tutorial I'm actually using some code it
was a question that one of you guys sent
me a couple weeks back and this is code
that came from the creation of a video
game the only thing I did here was I
swapped out actual actions and graphics
and all that stuff out of here for just
a simple printout of what was going on
to keep this tutorial a little bit less
complicated so either way one of you
guys sent me one of these things and
what it was was an asteroids type game
however you wanted to use multiple
different types of enemy ships and this
code was not working for us he asked me
to improve it well the adapter patterns
gonna do that for you
in this example code as you see here new
enemy ships are created first off using
conditionals and if you think to
yourself well I would never do that just
stick with it here because later on this
person adds additional functionality
that is very very common so basically
with the way everything was structured
was different enemy ships would be used
as levels increased in the game and then
we would assign different names as well
as attack power and spaces that the
ships moved as well as graphics and so
forth and so on
well after a while this became a little
bit tedious for the person and they
wanted to add a completely different
type of ship one that warps around the
screen and you can see here what they
decide to do then was add a subclass of
enemy ship and then change completely
the way that this enemy ship moved and
then they also planned on creating
additional subclasses as they needed
additional ships well what I'm going to
show you here next is how with the
adapter pattern we're going to be able
to create a new class without disturbing
any of the code that is already here and
on
pop of that adapters are gonna make it
easier for us to swap in code at runtime
and they're also going to allow us to
communicate with code using method names
that are going to make sense to us so
not only am I going to improve upon the
code that was sent here I'm going to
show you how to add flexibility that is
code so that you could add a limitless
number of different ships that do nearly
anything even if the method names don't
match up so I'm going to erase this code
and we are going to create it anew okay
so with the adapter pattern what I need
to create first here is an interface the
client is gonna work with and then it's
going to be the adapters job which I'm
gonna create here in a couple minutes to
make sure that new classes are
compatible with this interface so I'm
just gonna go interface enemy and define
the different methods that I want to use
now would be a good time to make sure
that you could put in basically every
single method you would ever want to use
but either way I'm gonna keep this
simple and at the same time by limiting
this interface I'm gonna be able to show
you something else really cool you can
do with an adapter alright so there's
our basic interface for our enemy ships
now I'm actually going to come in here
and create a class that is going to
implement the enemy interface as we have
here on the screen and of course it's
going to say that I need to bring in
different methods here and unimplemented
methods okay great so there's the two
methods that I want to use here I'll
stick with me here for a second because
I'm gonna throw all kinds of wrenches in
my own code and then fix it as I go on
what this guy's gonna do basically is
it's going to have an attack power just
like the code that I previously showed
you and all the code that is here is
available in a link under the video and
it's Eveleigh commented and it should
help you learn this stuff a little bit
better and of course it is right okay so
spaces move per turn and we're just
gonna set this as two so we're just
gonna get rid of those conditionals
altogether then on top of that like I
said before I'm just going to print out
exactly what's going on on the screen to
keep this simple so here I'm gonna go
Galax moves which is the name of the
ship and then this is gonna be spaces
moved for turn there we are
and there is spaces
and I'm gonna do the same thing down
here with make ship attack and then I'll
show you what happens whenever we're not
using these method names because
remember I said the adapter patterns not
gonna force us to use the method names
that are defined in the interface and
then here we'll just say Galax does an
input attack power damage alright so
this is the obvious way to use this
interface well now we're gonna bring the
adapter into it and the reason why is
we're going to have what is called the
adaptee this is gonna be a class that is
not going to follow any of the rules for
the interface it's not even gonna
implement the interface and what the
adapter is gonna do which I'm going to
create after this guy's it's gonna call
the right methods here in Galax prime
when they are called in the enemy
interface so let's go call this Galax
Prime and I'm gonna go protected string
name is equal to Galaxian Prime and then
I'm gonna go this doesn't have to be
attacked power by the way just because I
used it before but I'm just using it
protected and this guy is supposed to
warp around the screen which means it
disappears and it appears somewhere else
that's the reason why they decided they
had to subclass it well I say why don't
you just create a method with the name
that you wanted to use which was turn
force field on this guy also had a force
field and then have this method do
exactly what you want it to do so here
we're gonna go name + turns on force
field and as you can see I'm on purpose
giving it completely different names
because I know with the adapter I'm
gonna be able to fix anything I can use
the method names I want to use I'm not
going to be tied to the interface and
then here we're just gonna go name of
the ship warps spaces moved per turn
spaces and imagine all kinds of things
they up here this is only two methods
I'm already up to two and I'm not
following any of the rules and I'm not
gonna follow any of the rules or create
any of those because I'm not
implementing the interface then there
was supposed to be a pause charge
phasers before it could fire and here
we're just gonna go to name charges
phasers and then after that we're gonna
have it actually fire phasers
name fires phasers for and then let's
just put in attack power so this is the
adaptee this is the oddball that we want
to work just like any other enemy well
to do that we're going to need an
adapter and what its gonna do is provide
completely different actions or methods
as you saw right up here these method
names are not the same as the interface
for those methods that are defined in
the interface so how we create this
adapter is we're gonna go to class and
I'm gonna call this enemy adapter if
it's an adapter I'd like to have adapter
in its name and it's gonna be implements
enemy it is gonna implement the enemy
interface and then it's gonna of course
have to add those on implemented methods
and there they are now what the adapter
is gonna do is it's gonna contain an
object of type adaptee so that is gonna
be this guy up here galux Prime so it's
gonna contain Galax Prime inside of it
so Galax Prime and let's just call him
Galax Prime then what it's gonna do is
all the calls that are going to be sent
to these enemy methods for move ship and
make ship attack it's going to
automatically send them instead to the
proper methods in the galaxy I'm class
so move ship the way that's gonna work
well first off we have to create a
constructor for this so let's just go in
here and I'm gonna go source and do that
instructor using fields and Galax primes
the only one that I have inside of here
and let's say that I want to put it
after Alex Prime so there it is now for
move ship that I since I have Galax
Prime stored inside of there I'm gonna
go turn on force field which is gonna
happen before the ship starts to move
call that method and then I'm gonna go
warp to space remember it disappears and
then reappears boom done
so there I just completely changed the
way that it moves and also remember it
has to charge its lasers before it can
fire no problem just gonna come in here
to charge phasers charge phasers done
and then I'm also going to go and fire
the lasers which fire the phasers anyway
and
there that is that's done so that's how
you create an adapter and now we can go
in here and we can test this guy to make
sure it's gonna work for us so I'm just
gonna go class test enemy adapter create
my main function and now what I can do
is I can define enemy galex just like
normal just go new the Alex which is
like a week or show and if I want to use
my Galax Prime what I need to do is go
Galax Prime galux I'm gonna call this
Galax Prime adaptee because that's what
it is new Alex prime and then if I want
to use Galax Prime as if it is an enemy
no problem
I'm gonna go enemy galux Prime this is
actually using the adapter and I'm gonna
use the adapter enemy adapter like that
and then I'm just gonna pass in Galax
prime which is gonna get saved inside of
here let's go up here just make sure you
know there's Galax Prime and there is
enemy adapter sake Alex Prime's gonna be
saved inside of there because here is
where it's getting sent in for the
constructor and then I can test this so
let's see if Galax works in exactly the
same way that my Galax Prime that has
completely different methods so I'm just
gonna go move ship just like before like
we did no problem and then we're gonna
come in here and we're gonna go make
ship attack no problem just throw in a
new line there just to separate these
and then with Galax Prime I'm going to
do exactly the same thing click on that
and click on move ship good no problem
galux prime make ship attack no problem
did it in exactly the same way then if
we want to execute this guy I'm just
gonna go over here with this guy and run
as java application and there you can
see Galax moves two spaces Galax does
five damage and here is Galaxian prime
which works in a completely different
way with completely different methods
and yet it's going to work with this
interface just like everything else so
there is an example of how to use the
adapter pattern it's a great pattern
please leave any questions or comments
below and like I said before the next
tutorial we'll start getting into data
structures and algorithms
but I'm not giving up on refactoring til
next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>