<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Learn to Program 14 : Python Threads | Coder Coacher - Coaching Coders</title><meta content="Learn to Program 14 : Python Threads - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Derek-Banas/">Derek Banas</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Learn to Program 14 : Python Threads</b></h2><h5 class="post__date">2016-08-03</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Bs7vPNbB9JM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">well hello internet and welcome to part
14 of my learn to program series in this
part of the tutorial I'm going to focus
100% on threads if you haven't seen any
the previous parts of the tutorial I
provide a link here in the video so you
should watch those otherwise you might
be confused also underneath the video in
the description you will find a link to
a transcript as well as all the code you
find here in this program and I have a
lot to do so let's get into it okay so
here we are now whenever you use threads
is like you're running multiple programs
at once threads actually take turns
executing however however it might not
seem like that and while one is going to
execute the other is going to sleep
until it's its turn to execute and a
thread is just a block of code that
executes that's it it's we've been
working with one thread the whole entire
time now we're going to have multiple
threads so let's come in here and let's
just import what we need so we need to
import threading and I'm going to do
something with time so I'm an import
time and I'm going to import a random
now let's come in here and we will
define a function that will execute as a
thread and it's just going to receive a
single value here and what I'm going to
do here is print out some information on
the time so I'm going to say print and
I'll say thread sleeps at and I'm going
to print out the time when it goes to
sleep and then we'll use format to put
the information inside of here and we'll
just have eyes going to represent an
identification for the thread that we're
going to be executing here and then I'm
going to use a formatted time method
from the time import we have here so
it's STR f t I M so it's formatted time
so this is something new to see and
inside of here I'm going to define
exactly what I want to say so I want to
see the hour with a colon and then I
want to see the minutes with a colon and
then I want to see the seconds with a
colon and then after the
at the time and I will get gymtyme then
I want to generate a random sleep period
for my threads so I'm going to come in
and generate a random integer and it's
going to be between 1 and 5 seconds just
so we have something a little bit
different here and let's name this sleep
so that that's spelled right and then to
make a thread or a group of code pause
and let other threads jump in and
execute we call time and sleep and then
inside your I'll put the random sleep
time and then after that I'm going to
come in and print out after the thread
it has awoken
so we'll say thread stops sleeping at
any specific time here and then we'll
come in and do the format again so we
can just copy this whole entire thing
let's just copy that and paste that
inside of there and then down here oops
actually I see a common error here
you're going to zoom in on here this is
a question I've get a lot it says end of
statement expected whenever you see that
normally just means you have one too
many parentheses so there you go solve
that little error now we can come down
here and start creating some threads and
then run them and see what happens so
I'll say range 10 and then I'm going to
create a thread and to do so you just go
threading and thread and then you have
to tell it what you want to have
executed so the name of that function is
going to be equal to and this has to be
called target the name of this is going
to be execute thread however we get rid
of those parentheses and then you have
to pass arguments into it so these are
things that are required and this is
expecting a sequence to be passed to it
so what we're going to do is we only
want to pass in an identification for
the thread name so we're going to put a
comma after that and what's going to
happen here is each time we cycle
through our looping structure here a
thread object is going to be created and
then we're going to pass it to the
method that needs to be executed or the
function it needs to be executed as well
as the arguments that need pass to that
specific function
and then after we do that we say thread
and to start the execution we call start
and then I'm going to print out some
additional information and we say active
threads and what this is going to do is
print out the number of threads that are
currently executing and we could also
come in here and return a list of all
the active thread objects that are out
there so we could say thread objects and
to get those we just call threading once
again and enumerated with the
parentheses inside of there all right so
we're going to create 10 threads and
execute them and don't forget to come up
here and put in inside of there alright
so now we got that set let's run it up
got a little bit of a bug here see what
this is ah so this right here says we
need to call this a numerate
unenumerated sorry about that and let's
run it and you can see there we go and
we are running all right so what's going
on here so we can come up to the top and
you can see that thread 0 is going to
start however inside of the code it's
going to come in here and then execute
this statement right here and then it's
going to go to sleep whenever it goes to
sleep that means that it's going to be
able to call for the second thread to
execute now you may ask yourself right
here why are there 2 active threads well
you can see right here the answer is
main thread the actual program this guy
right here is also a thread so that's
the reason why so you have this up here
that's going to be running this code up
here with the first thread you create as
well as this is also going to be a
thread so that's the reason why you have
to there and you can see we were able to
print out the information in regards to
what threads were executing and you can
see each time that it's going to be
incrementing upwards and you can also
see the number of threads is also going
to be incrementing upwards now we came
inside of here and we said we wanted it
to go to sleep which means we want the
next thread in line to be able to
execute and this is going to be a random
value between 1 and 5 and if you come
down here you're going to see thread 3
stop sleeping at and the specific time
and the reason why they're out of order
is because they are going to sleep for
different periods of time between 1 and
5 seconds
and one in five seconds is like a
million years in computer world and
that's the reason why you don't have
these stumbling all over each other and
also the reason why you have thread
three stop sleeping right here before
the Red 9 + 8 + 0 + 2 + 4 + na da da da
da so there you go
very simple example of how threads work
and it's just basically they're going to
line up and create a whole bunch of
threads that want to execute the same
exact code doesn't have to be the same
exact code by no means but then you're
going to take turns each time one of the
threads goes to sleep executing their
specific lines of code until all the
threads have executed their lines of
code and everybody's happy and the
program finishes and now I'm going to
get into a little bit more complicated
topic I'm going to talk about how we can
subclass a thread and basically you can
subclass the thread object and then
define what happens each time a thread
is going to be executed inside of a
method called run so we're going to
create this just like we create all of
our classes so I am going to call this
custom thread and I'm going to define
that I want threading - I want this to
subclass the threading thread object
that's available inside of here now I
have to just define everything so I'm
going to say Oh
initialize and it's just going to
receive name so that we can identify the
different threads inside of here and
then what you have to do is call for the
super thread class to execute and I'm
just going to call initial eyes on that
guy and then you just pass self inside
of there and that's all you need to
worry about with that and then
afterwards I'm going to come in here and
store the name that was passed inside of
here so we can refer to that once again
we're going to come in and we're going
to define the run method and this is
going to be the method that's going to
execute whenever we call for our thread
object to execute and basically what
it's going to do is it's going to call a
function get time and to it it is going
to pass the name so that we can know
what thread is working and then
after that we were going to go Prince
and we'll say thread and then get the
threads name and then we'll say
execution ends so this time what we're
doing is we're having all the code
executing an outside function and then
jump out inside of here jump back inside
of here and that is what's going on so
another thing we can do now is to create
or get time function once again it's
going to receive the thread name and
inside of this we're going to print out
exactly the same thing we did before
which is this guy which is going to
print out the threads name and also
whenever that thread went to sleep to
allow other threads to execute and then
we'll generate our random sleep time in
exactly the same way so you're going to
see the same exact example just done in
two different ways one using a thread
object and another one using a custom
thread object so random int and then
we'll do 1 through 5 just like before
and then inside of here also we're going
to be able to code and call for sleep to
occur for a thread and random sleep time
is that guy then we have to do things a
little bit different we're going to
create some thread objects this time so
we're going to say thread 1 is going to
be equal to and then we have to call our
custom thread and all at once passed is
a name and then let's go and create two
threads here paste that side there let's
call this thread two and give it the
name of two and then to start the
execution you're going to do exactly the
same thing you did previously you're
just going to call start on this and
thread two and start stop starts
executing we can come in here and check
if a thread is alive which means that
it's running here and to do so we just
reference the threads name followed by
is alive and that's going to come back
with either true or false and it will do
exactly the same thing with thread - we
could also get our thread name so let's
say print and thread one name and that's
going to come back
one as you'll see throw one and get name
and you're going to be able to also
change the name or set it with set name
but we're going to get it this time so
we don't want to put the set name inside
of there obviously I'm going to do the
same thing with thread two and two and
then we use join to come in here so that
we can wait for threads to exit and then
we'll do the same thing with the next
one and then finally we come in here and
just print a little message that says
execution and so we know what's going on
so let's run this and you can see right
here pretty simple thread one is going
to call the get time method which is
going to say that thread one sleeps at a
specific time and like I said a second
in the computer world is extremely
extremely long so that's the reason why
these are exactly the same time they go
to sleep at exactly the same time you
could see that we came down here and
asked if they were alive and it came
back as true and true you can see that
the name comes through as one and two of
course just like we have here and you
can also see thread to execution ends
and thread one execution ends so thread
should make a lot of sense now so what
I'm going to do now is jump into a
real-world situation so we can see an
example of why we would use threads all
right so whenever you are using your
threads you can lock other threads from
executing so let's say if we tried to
model a bank account in that situation a
thread would make a lot of sense or
using threads would make a lot of sense
because let's say you only had a hundred
dollars in the account however there
were three different people that had
access to that account now you wouldn't
want them to go and withdraw more money
out of the account than is actually
there so what's going to happen is if
somebody goes and tries to withdraw
money from the account all other ATM
machines or the ability to access that
account will be locked out until the
first user is finished withdrawing funds
from the account so we're going to come
in here and we're going to create a
custom class that is going to be a
subclass of thread that is going to lock
out other you
remember using an account so let's come
in here and let's create that and we're
going to do the same thing again
threading and thread going to do the
same thing we're going to need to
initialize this guy and in this
situation I'd like to come in and have
the name of the person trying to access
the accounts and the amount of money
that they are trying to request so we're
going to come in again and go threading
and thread and initialize this guy and
here we'll just pass in self once again
then we'll also come in and assign the
name of the person accessing the
accounts and also the money that is
going to be requested so that's
initialized so now inside of run what
are we going to do we're going to go
define run first thing we want to do is
get a lock to keep other threads from
being able to access our account so to
do so call thread lock and acquire and
this guy's actually going to be created
down in the main thread so I'll go
thread lock is equal to and I'll go
threading lock also inside a run I want
to call a static method that's going to
go in and try to access and get money
and withdraw money from the account so
I'm going to go bank accounts get money
past self inside of there because I want
to be able to access the name and the
money requested inside of the static
methods so that's a requirement and then
after it tries to get the money out of
the account I'm going to release my lock
to let other threads go in there or
other customers go in and try to access
that information now to create a static
method did this in previous parts of the
tutorial just go static method like that
and here is where we're going to allow
them to access the account and try to
get their money so we're say get money
the customer is going to be passed in
here you can see self so it's going to
be the bank account for said customer is
going to be passed inside of here and
then I want to print out some
information about exactly what's going
on inside of here
so I'm going to say the person's name
tries to
with draw and a certain amount of money
at and then we'll say specific time just
to have this be a little bit more like a
real-world thing will go customer name
is what we want to print out there and
then we'll say customer and the money
requested and then we want to come in
and print out some information about the
time so there's that same formatted time
function we saw previously and then
after this we have to find out if the
information tactually has money inside
of it so I'll go bank account and we can
go account balance and let's come up
here and we'll throw in a static
variable that's going to be account
balance its equal to let's just say the
person is poor only has $100 and
subtract out the customers money request
and see if it is greater than zero and
if it is we want to come in here and
update the bank accounts balance by
subtracting off how much money they just
requested and then we can print some
information about the new account
balance accounts balance so I hope you
see here a situation in which threads
really make a lot of sense in a real
world situation so we can go format and
then we can go bank accounts and get the
new account balance otherwise if they
don't have enough money inside of their
account we need to print a message that
says not enough money in account and
then let's also show them their current
balance so that they know how much can
be taken out of it and format that and
go in and put bank accounts and the
account balance and then also we can
commit and go to time sleep and just set
that to 3 seconds then we'll come down
into the main part or the main thread
for our program and make all this work I
already said this is going to allow us
to lock our threads from executing let's
go and
a couple customers here so bank accounts
here and Doug is going to be accessing
it and Doug only once one dollar and
then we'll do the same sort of thing for
two more so that you can just see how
this is going to work so the next person
is going to be Paul and let's say that
Paul thought he was going to be sneaky
and go in there and take all of the
money we're going to see what happens
there and then let's say we have Sally
Sally comes after Paul and tries to
withdraw money and she wants fifty
percent or fifty dollars we're then
going to have to start our threads
executing and do it in exactly the same
way as we did previously and there we go
of course we want the threads to wait
for the previous threads to terminate so
we'll do join here and we'll do that for
all of these guys and then there's Sally
and then let's print a message here at
the end so that we know when the
execution ends all right so now we can
do this and we can come over here and
watch it all take place so run it whoops
little error come over here it says bank
count has no attribute account balance
what did I name it come up inside of
here up I typed out account so let's get
rid of that and run it now and here you
can see it's working
Doug tries withdraw a dollar and that's
a specific time new account balance is
$99 Paul tries to withdraw $100 at that
time it says not enough money in the
account prints out the current balance
and then Sally comes along and tries to
withdraw $50 you can see now the current
account balance is $49 and execution
ends so there you go guys there are
three examples in ways that you can use
threads hopefully that clears up threads
because I know a lot of people out there
we're struggling with understanding how
they work and if you take some time now
and think up your own scenarios in which
threads work write down and go and
create your own little programs to test
them out I think there will be no
problem for you in the future so like
always please leave your questions and
comments below otherwise till next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>