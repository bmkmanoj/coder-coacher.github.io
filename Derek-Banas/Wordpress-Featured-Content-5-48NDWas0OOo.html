<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Wordpress Featured Content 5 | Coder Coacher - Coaching Coders</title><meta content="Wordpress Featured Content 5 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Derek-Banas/">Derek Banas</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Wordpress Featured Content 5</b></h2><h5 class="post__date">2011-07-13</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/48NDWas0OOo" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">well hello internet and welcome to part
5 of my wordpress featured content
tutorial where I'll teach you how to
make a super nice featured content tool
inside of wordpress this is a
continuation of both that tutorial as
well as my news theme tutorial which
I've been working on and hear what we're
going to do is actually create this meta
box that you see right here on the
screen where it says set image and it's
going to allow people to choose whatever
featured picture they'd like to assign
to any post they make inside of
wordpress if we zoom out here you can
see or they will click on the media
library and come in here and select
files and pick files from the media
library and all kinds of other different
things so pretty neat stuff so let's
jump into the code ok if you didn't see
my previous tutorial on how to create
plugins definitely check that out I
provide a link to that now and here is
just basically where you describe the
plugin name the URL associated with this
plugin description versions author's
name websites and your license and then
after you put all that in and you save
that you can actually jump right in
WordPress so if we come down into
plugins just that little tiny bit of
information to go into plugins you're
going to be able to see that right here
ntt featured content it's not activated
right now but it's showing you all this
information the plug-in has been created
in essence it just doesn't have any
functionality so let's give it some
functionality so we're going to open up
the PHP part and we're going to tell
WordPress what function to run whenever
a plug-in is activated and how you do
that is you type in register activation
hook and then I'm going to do underline
underline file this is a reference to
the plug-in so whenever this plug-in
right here is activated I'm going to
define a function that I want to be
called and it's going to be called
auntie T for new think tank the reason
I'm using that is to make sure that this
function doesn't have any problems with
any other functions so that's why I give
it a big giant name and then I have to
create the function itself I'm just
going to copy this paste that in there
doesn't get any attributes then what I'm
going to do is verify that the current
WordPress version is at least version 3
how you do that is go if version compare
call this function and then we call get
blog info this is the function you call
whenever you want to find out what
version of WordPress is being used and
then we're going to say three point oh
we're going to ask if it is greater than
and if it is not we're going to
deactivate the plug-in immediately and
how you do that is just by typing in
this function deactivate plugins and
again reference underline underline file
we're goin underline right like that so
I oh that's what that function does and
if we don't hit that well that means
that they have at least version 3 so I'm
going to create a variable that's going
to store the number of featured posts
that I have and the call that ntt
featured images and for now I'm going to
create an array that's going to contain
a bunch of variables and inside of this
array i'm going to put number each posts
so that's going to allow me to track how
many featured posts there are and i'm
going to set that a 0 and then i'm going
to close off that function and then to
save the changes to that newly created
array i'm going to call update option
and i'm just going to give it this guy
right here and this right here okay so
that is all that I need to do to
activate my plugin at this point in time
and i'm going to close off PHP because
it's generally the way that it's done
inside of wordpress and then open it up
again and make sure you don't want to
have any white space after this or
before it that's very important because
that will trigger errors and now i'm
going to also call another function if
this plug-in has been deactivated and
it's just register deactivated hook
again this is a reference to the actual
plug-in and then this is the function
that's going to be called if it is
deactivated so then what do I got to do
I'm going to create this function again
you have to do this for all your
different plugins paste that in there
and for now I'm just going to leave this
empty I'm not going to put anything in
there that's of course going to change
very soon let's scroll this up and then
I'm going to open up PHP again and here
I'm going to create the meta box that's
the box that was on the WordPress screen
i showed you before and you just call
add action i'm going to hook this on to
the hook add so whenever wordpress is
prepared to put metal boxes on the
editing page i'm going to tell it to
call this function ever it does that and
guess what I got to do I'm going to
create this guy function paste that in
there close that function off and here
I'm going to create the meta box so easy
it is to do give it a name set image is
going to be the title for that matter
box if we open this up say set image is
right there then you define the function
that is actually going to create the
meta box and then do you want this meta
box to show up on posts or pages I'm
going to put it as post then you have to
define where you want the meta box to be
displayed either normal which is where I
have it or to the side which is actually
a new option it's available and then you
set the priority in this situation when
I set it too high you could also set it
to low and then after this you could
define additional arguments that you
want to send to this function right here
but I have no reason to do that for
right now but I do need to create this
function right here and that is exactly
what I'm going to do clothes off PHP
reopen PHP function like that and
whenever this is called it's going to
pass over the post that was affected the
ID for that post so we're going to be
able to go in there and make changes
first thing I want to do is echo into
the meta box a message which I'm
actually just going to grab here rather
than type it because it's not really
important so there you go there's just
some text that's going to be printed
into the meta box then I'm going to
check if the meta value has already been
assigned for this featured image ntt MBE
and I got some of this code from an
absolutely fabulous book called
professional wordpress plugin
development this isn't a sponsor or
anything I just wanted to state then I
got the code from this awesome book
because I just think that's the right
thing to do and we're going to say okay
for the post ID is there a value set for
ntt in the e image so that's going to
return to me this image value right here
close off the PHP right there so now i'm
going to create the input field for the
featured image so I'm just going to go
in put give it an ID equal to n TT and
me image type is equal to text size
that's just the length of the field it's
going to be 75 and the name is going to
be equal to n TT MBE image and the value
for it I have to open up PHP to get that
call echo and escape URL which is going
to sanitize the URL and encode any HTML
entities inside of it so let's just
clean it off that's all it's Dylan don't
forget to put equal sign in or for size
and I'm just
call for this image closed off the PHP
and close off the input and close off
that quote then I have to actually
create the button that they're going to
click on whenever they want this guy to
save it's a type button' value is equal
to a library image class is equal to
button secondary because that's tweets
defined and then throw in a break
statement and then remember no
whitespace whenever you put this PHP in
here then we're going to close off the
end of this function and then to give
everything the same i'm going to put
that inside of there and scroll this up
then I want to add another hook here so
that whenever the post is saved so if
post I want NT to MBE image save meta
this function to be called so what do I
have to do have to create that function
and I want to pass to it the post ID
then I want to check if an image has
been defined inside of the post a
featured image and they call to NT tmb
and there's a link to all this code in
the underbar then i need to update the
value of the image the featured content
image and you call update post meta to
do that pass post ID and underscore NT t
mb the name for your image and then i'm
going to call escape your row again this
just sanitizes everything the only
difference between escape URL and raw is
that escape URL rod is not encode HTML
entities so you don't have to worry
about decoding that TT MBE underscore
image and then we're going to close off
that if statement and then jump down
here and close off the PHP code and
let's create another PHP code block
scroll that out and hear what we're
going to do is say that whenever the
post editor is called this is it this is
the post editing whenever this is
displayed on the screen I want certain
functions to be called and how you do
that is again add action then what we
want to say is whenever this function
right here admin print scripts post
these aren't underlines these are
straight dashes dot PHP whenever this
function is called we want another
function to be triggered which is NT t
underscore
MBE and this is the reason why I needed
this code from that book by the way I'm
going to actually copy this this on a
new line paste this in here and at the
end of this i'm going to type in New so
whenever either one of those functions
is called this function right here is
going to be called by wordpress so what
do I got to do create this real quick
function what this is going to do is
call some custom JavaScript anytime you
want to call javascript inside of
wordpress from outside like in a plug-in
for example this is the function that
you call and this is the name for the
custom script I want to call it in the
future and I'm going to call my actual
plug-in how you do that is with plug-in
URL followed by and then forward slash
so this is a reference to the actual
plugins folder inside of wordpress NT to
meta image j/s this is the actual
javascript code that i want to put in
here and then after this if you need any
other scripts to be run before this is
run like for example jquery you plug
that in there and automatically will
pull in all the code needed to load
jquery and the script for uploading
media and also thickbox which is just
the pop-up window that is going to
contain all the media that's uploaded
this guy right here you click on this
what I'm doing is creating this guy
right here in thickbox surrounds
everything so that's what's going on
there and then the function is closed
off and then I closed off my PHP and
that is all that's needed to create what
I showed you here at the very beginning
of this tutorial and now we're going to
create all the JavaScript that's needed
this is how you start off basic jquery
function form field is equal to null
we're just going to create a variable
here and then i'm going to target with
jquery an ID with the name of upload
image button and i'm going to say if
it's been clicked I want to run some
code and I'm just going to put this
function in line right here I'm going to
target HTML and I'm going to add a class
name of image and then to form field I'm
going to go get the value of the
attribute name for the featured image
can hash symbol its reference to ID if
it was a dot that would be a reference
to a class so i'm going to say i want
the name for that featured image I'm
gonna save it to form field then i'm
going to call thick ball
to display the pop-up and I'm not giving
it a name and I'm going to call a
function inside of wordpress called
media upload dot PHP and this is going
to display the featured content that I
showed you before and it's going to be
displayed in an iframe and return false
and I closed off that function then what
I need to do is whenever the person
comes in here to the media library image
and clicks on it and let's say they
click on media library show and then
here where it says insert into post well
if they clicked on this this would try
to insert this image into the post which
is not at all what we want to do we just
want to be able to use this tool to be
able to populate this box right here so
we can define the featured image so what
we need to do is to shut down that
functionality and how we can do that is
go window original send to editor we're
going to override the send to editor
function that will try to insert that
image into the post and instead tell it
to call our function instead which is
going to insert it into that box and
then we're going to take this value
right here and sign it this function
interested now create a variable inside
this function called file URL and we
need to check if the image has a name
attribute assigned to it we go if form
field is not null assigned to file URL
image HTML dot the attribute for source
so we're getting the source for this
image or the location of it and be image
which is the name of the featured
content we're saying we want the value
file URL we're assigning the value for
this image to the URL that we took from
right there and then we want to remove
the pop-up so this is after they click
on it they say okay I want to upload it
what we're doing here is taking whatever
value they put into the text box we're
assigning it to that image and then
we're closing the pop up afterwards and
then we're going to straighten
everything up and make it the way it was
before anything else was done here so
we're going to remove the class we
assigned to HTML being image it's set
form filled back to null and then if it
didn't have a value we want to reset
window original send to editor back to
the way that it was
of that else statement lose off that
function that we created there and then
closed off the jQuery all together and
that is all the code that goes into
creating that meta box in the next
tutorial I'm going to move on to create
more functionality for this featured
content tool for WordPress until I
everything's done till next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>