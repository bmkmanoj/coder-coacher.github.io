<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>C Video Tutorial 12 | Coder Coacher - Coaching Coders</title><meta content="C Video Tutorial 12 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Derek-Banas/">Derek Banas</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>C Video Tutorial 12</b></h2><h5 class="post__date">2013-08-31</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/oSXIkgCSAoI" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">well hello internet and welcome to part
12 of my C video tutorial today I'm
going to cover binary file IO and a
little bit on error handling in the C
programming language if you haven't seen
the previous parts this tutorial I
provide a link in the upper right hand
corner I have a lot to do so let's get
into it okay so like I said I'm going to
dabble a little bit in error handling
and to do that I'm going to have to
bring in this new library and then we
are going to just jump right into our
little main program here and throw our
return statement in there okay the first
thing I'm going to do is just like
before I'm going to create a file
pointer I'm just going to call it P file
then I'm going to create a buffer and
the very first thing I'm going to do
here is just demonstrate printing text
out to a binary file and then reading it
back in real simple and then in the next
part I'm going to actually write an
array out to a file and then read that
data from the array back in then a new
thing we're going to use is size T and
what size T is is it's a data type
that's used to represent the size of an
element in bytes so for example ten
characters would be equal to a size of
11 that's what would be stored if you
had ten characters and then you wanted
to store the number of bytes in this
size T file that's what it's going to
hold just the number of lights that's
all it is I'm going to call it data and
file and then I'm going to create a long
and call it file size and it's going to
hold the size of our file and then I'm
going to actually call F open just like
before except in this situation I'm
going to call this names dot bin and
then since this is a binary file I'm
gonna put our B+ inside of that guy and
then what I'm going to do is check if P
file is equal to null and we're going to
do a little bit of error checking and
I'm actually going to force an error to
occur here since this is saying that we
want to read data that is actually going
to throw an error if the file doesn't
already exist so I'm going to catch that
error I'm going to use this function
right here called Pierre and what it's
going to do is it's going to print the
string provide
so if I type in error occurred like that
it's going to print that string and then
it's going to follow that with a
standard error message and then on top
of that if I say print F error code it's
also going to provide an error code in
this value right here for this variable
and actually actually all I'm going to
do so let's jump over here and execute
this we know this is going to cause an
error it's going to compile then it's
going to say error occurred no such file
or directory so that's exactly what it's
going to do in the error code for that
is - okay so how exactly could we
correct that error well first let's say
that we want to put a message out on the
screen that file is going to be created
instead since this our error occurred go
to lines inside of there and then since
the file doesn't exist we're going to
say names dot bin and put WB + inside of
there that's going to say create the
file for us so here we're going to read
from the file if it already exists and
if it doesn't we're going to use WB down
here and create it now of course there
could be an error that occurs in this
situation and we could do the same sort
of thing just coffee this paste that
inside of there error occurred just have
that all print out and if an error
occurs in this situation let's say we
just decide we want out of here so we're
just going to exit from our program
otherwise we know that we got our file
created and we're going to be able to do
some stuff with it first thing I'm going
to do is create a character array and
I'm going to store my name inside of it
there we go now if I want to write
binary data to a file we're going to use
a function called F right so we're going
to say F right and then inside of it
we're going to pass a pointer to what we
want to write to the file so that's
going to be this and it's a pointer by
default so we don't have to do anything
we just put the variable name inside of
there then we're going to put the size
of each element in the array inside of
here and to get that we just have to go
size of name so this is an essence going
to get the size of a character and if
you were for example throwing a struct
inside of here you
you could just put the struct or
whatever you wanted to put inside in
there but either way we're just going to
work with this for now then the third
thing is going to be the number of
elements that we plan on writing to our
file and to get that we're going to use
two size of x'
so we can just like this and it's bounce
down here size of and then this is going
to be name which is going to be
everything and then we're going to
divide that by size of an individual
element and then the final thing we're
going to put inside of here is the
actual file that we are going to be
writing this data to so that's f right
and then how f rate works then the next
thing I want to do is actually get the
file size and the first thing I'm going
to do is call F seek so that I can move
to the end of our file and I can just do
0 and then seek end that's going to put
our cursor at the end of the file and
then I'm going to be able to get my file
size by going F to P file and there we
go so that's going to get the total file
size then what I want to do is use
another new function I'm introduced a
ton of functions in this tutorial this
is going to rewind us back to the
beginning of our file so it's easy to
remember then what I'm going to do is
I'm going to create a buffer and
remember we don't need this character
data in here for C but we need for C++
so I'm just going to leave it there and
I'm going to use the memory allocation
function and I'm just going to set aside
enough space to be able to hold our file
and figure out how much that's going to
be I'm going to call character times
file size which is going to be the
number of elements inside of it then I'm
going to say if our buffer is equal to
null and we know we don't have something
in there so we know some error occurred
and let's just save ourselves a little
bit of time and just copy this right
here it's a nice thing about using this
you don't need to worry about printing
out exactly what the error you think it
is it will see compiler will actually
tell you so error occurred and then
let's change this exit to two so we know
exactly what was going on there and then
to read this information from our file
into our new buffer we're going to use a
function called F read and must store
this in data in file and
come up here to data in file there you
can see that's going to say how many
bytes of data there is and we can just
go F read and then inside of this we're
going to provide the buffer we're going
to be reading information in two and
then the second attribute is going to be
the number of bytes taken up by each
element that's going to be read and it's
a character so that's going to be one
and then the third thing is going to be
the number of elements which is going to
be stored in file size and then P file
is going to be the file that we're
reading from so that's how F read works
now we want to just double check the
data in file if it is not equal to our
file size well that means an error
occurred so let's just paste this error
message in here again and change this
error exit code to three and otherwise
we know that we got our information so
we're going to say printf buffer there
that is and then let's also say we want
to throw in a new line here and then the
final two things we're going to do is
call F close on our file to free up that
memory and then I'm also going to go
free on our buffer and this is going to
deallocate the memory block that was
created for our buffer and if we save
that whoops and got a little bit of an
error message no big deal just so you
don't know cuz I don't know if I've ever
actually said this see this actually
tells you where the error occurred on
line 24 and it says error P file
undeclared so we'll just go to line 24
right here and you can see right away
that this needs to be an uppercase F no
big deal and if we execute it you can
see that our original error message
prints out because we had to create our
file just like before so it says error
occurred no such file or directory error
code too so in this situation the file
is going to be created everything's
peachy keen and then we're gonna call
and we're going to print my name up so
that's how to write a string to a file a
binary file and then pull that
information out and print it on the
screen next I'm going to show you how to
create and write an array to a binary
file and then read out any element
inside of that file out the screen ok so
here we are once again and I'm just
going to be changing a couple
random things so what I'm going to do is
I'm going to generate an array of random
numbers and then randomly allow the user
to pick one of them and then pull it
from the file so I'm going to call this
random number
in I'm going to leave this for reading
and I'm also going to use what we had
before where the file wasn't created and
if that occurred then we are going to
create our new file so that'll be useful
but for the most part everything else
has been deleted so we're going to come
down here now that we know our file has
been opened or an error message has been
triggered and it hasn't been opened and
then we're going to create a random
numbers all right and it's going to have
20 random numbers inside of it then I'm
going to create a for loop and it's
going to generate all these random
numbers
so no random numbers I is equal to and
I'm going to go R and 100 so it's going
to throw random numbers in there from 0
to 100 in the MS a number D is d
backslash n just so we can print this
information out to screen and see that
it actually worked so I'm just going to
print out I and then I'm going to print
out random numbers I like that so now
that we have that information in our
file if I want to write this array into
our file I just call F right just like
before and I pass in the array that I
want to write and then what each one of
those elements is going to be size wise
so I just go sizeof int and then how
many 20 and then where do I want to
write it to the file that's all and then
let's say I want to get a random index
number I'm going to allow the user to
actually dynamically pick the random
number from the file that they want
create an INT and call this number at
index because it's going to be in since
I'd of here of course and then let's say
I want to go printf which random number
do you want and I'm going to allow them
to actually tell me what index they want
me to pull the random number from and
let's just use scanf because that's easy
enough I'm just going to get this long
which of course I need to use random
index
number four that to write to that
pointer and then to actually put my
cursor at the position in which they're
asking for I'm going to use F seek in
binary mode just like I've used it in
the past and the only real difference
here is whenever you're using F seek in
binary mode you have to make sure that
the offset is the number of the element
that you're looking for times the
possible size so normally we would say
random index number like this you can
try this for homework or practice or
experimenting or whatever try just
passing that you're going to get errors
what you need to do is then also
multiply that times the number or the
size and bytes with what we're working
with so that's what we have to do there
and then since we're going to be looking
for a specific index inside of that
array we have to put seek set well then
we use F free just like before to read
the next int from our file after we move
our cursor to the right position and
we're going to store this number at
index like that and then we have to pass
along size of what we're going to be
reading which is going to be an int and
we're only going to be reading one
number from the file so we're going to
put one and then a little file that
we're going to be working with just like
that so after you do this enough it just
becomes easy you just remember it okay
then if I want to print out something
like let's say the random number at
index whatever they said they wanted is
and then whatever the file is in a new
line and we can say a random index
number and number at index like that and
then we can have all this stuff all work
just like before but this time I'm not
using a buffer so I'm just randomly
going in here and actually pulling
information out of that and I don't have
a buffer here either
so okay so now that I have that set up
look there's another error no big deal
line 35 if you can't tell I'm just doing
this right out of my head so for enough
Oh big deal got that in there execute
run it and there you can see it's
printing out all the random numbers that
we're going to be storing in our array
if you look right here at index 15 is
the value of 3 and it's saying which
random number do you
once well I'm going to say that I want
15 because I know what that is and the
random number at index 15 is 3 so that
is how you use binary IO to store
different types of data inside of files
please leave any questions or comments
below otherwise till next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>