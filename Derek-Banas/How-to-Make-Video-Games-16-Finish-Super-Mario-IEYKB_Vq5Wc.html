<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>How to Make Video Games 16 : Finish Super Mario | Coder Coacher - Coaching Coders</title><meta content="How to Make Video Games 16 : Finish Super Mario - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Derek-Banas/">Derek Banas</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>How to Make Video Games 16 : Finish Super Mario</b></h2><h5 class="post__date">2017-07-26</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/IEYKB_Vq5Wc" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">well hello internet and welcome to part
16 of my how to make videogames tutorial
series in this part of the tutorial we
are going to finish Mario which means we
are going to have to teach Mario or
Manny in my situation how to jump off of
walls we're going to animate enemies and
then we're going to have Manny fight
against an evil snail of course I'm
going to cover all kinds of other
different things to wrap up this game
and like always a link in the
description will lead you to all the
code as well as the images and all the
sounds using this tutorial series and I
have a lot to do so let's get into it
alright so here we are inside of unity
and let's run our game here just to see
what's going on and it's eluding and
here is Manny and he's jumping and he's
getting some coins and he's stuck on the
edge of that and we're going to fix that
say we can't wall jump right now but we
will be able to all jump at the end of
this and you can see everything else
that's going on here and also I want to
make sounds whenever many jumps and I
also want to set it up so that we can
have our eat our snail he's going to be
going back and forth right here and
we're going to he's either going to kill
Manny if Manny doesn't land on his back
or amazing to kill him if he doesn't
land on his back so here we are in here
what do I want to do first I think I
want to add the jump sound ability for
Manny so we have our sounds right here
and you're going to notice that Manny
dies as a new sound by putting inside of
there and I have get coin jump Manny
dies and rock smash so let's open up our
scripts area double click on Manny and
then we have to think about where
exactly we want to have this sound play
basically I want it to play in an area
like this is he on the ground yes
Andes jumping currently false yes that
means that it's only going to trigger
once so I won't have jump sounds you
know going off numerous times as Manny's
in the air so let's go and add in that
capability to do it of course I'm just
going to go sound manager and instance
and play one shot once again sound
manager and instance and jump and that
is going to be all we need it add the
jumping sound here we are
then let's go and run it there you go
and you can see the jumping sounds in
there okay so it's exactly like we would
like it to be now what I want to do is I
want to go in and I have all of my
sprites here and I want to create some
animations for our snail so I'm going to
go into GIMP and set up a sprite sheet
specifically for our snails so here we
are in GIMP I'm going to go file and
then I'm going to go new and everything
I have set up inside of my game is 32 by
32 pixels so I want this to be 64 by 64
pixels click them okay and then I'm
going to click in the zoom tool by
clicking on Z and zoom in here like this
and I'm going to define my 32 pixels
just drag this over until it goes to 32
and then over here to 32 going to select
this guy I'm going to come up here in
this corner going to click on it I'm
going to go into the layers menu and add
alpha Channel
and then I'm also going to come up here
and go layers menu and new layer and
this is going to be transparent 64 by 64
click on OK then click on the background
and let's delete the background now
it'll be transparent click on the zoom
tool again I want to zoom out here and I
want to go open up my snail so I'm going
to go file and open and get both of
those snails and place them in a sheet
all by themselves and that is in local
disk and users and tech Venice and
documents and unity and Mario assets
that's where I have everything and I'm
going to open up both of these click on
open and there you can see both of our
snails I'm going to do a select all on
that and a copy actually you know what I
want to flip them because Manny's facing
to the right so I want these also to be
facing to the right also and how you
flip things inside of GIMP is you go
image transform and flip horizontally
and now you can see is facing in a
different direction I'm gonna click on
this and I'm gonna go image transform
flip horizontally and there he's facing
I'm going to select all with this do a
coffee jump over into our sprite sheet
for our snail paste it inside of there
grab this little guy then I'm going to
move him right there I'm going to jump
over and get the other one
do a select Oh coffee jump back in here
here to another paste inside of there
and there we go
and then I'm going to go and draw the
dead versions of our snail so I'm just
going to do a paste go down here and I
don't know what I'm going to do with it
let's just come in let's do a select
none on that well or you can just click
on this there we go
do is zoom in on this a little bit
switch over to our pencil tool of course
we're going to have to come over here
click on this guy right here select
pixel and the size is going to be one
pixel and everything else there is
perfectly fine I'm also while I'm here
I'm going to go racer this is pixel this
is one size I'm going to click on hard
age and then I'm going to sort of think
about what I want to do it's our little
snail so I'm just going to his head go
down just keep it whoops
real simple so something like this go
switch over to my eraser tool by
clicking on capital e get rid of this
maybe get rid of all this stuff right
here all that right there and this right
here and switch over into our eyedropper
tool by clicking on Oh switch back into
the pen by clicking on the N and then
just have it go something like this drag
it over here Oh again for eyedropper and
we're going to do a little bit of pen
work here let's just draw this inside of
there like that up it's not coloring
exactly the same color the reason why is
I forgot to come in or actually
accidentally hit the brush I'm going to
hit this guy but I want to come in make
sure that this right here the pressure
is set to OFF so dynamics off and then
we can come in and draw this inside of
there and it'll be a hundred percent to
color I'm going to go once again select
this guy and then we can do something
like that I don't know just doing
something real simple capital e for the
eraser tool and delete this and then
what I'm going to do is come in here and
select all this my flattened little
snail
something you would not want to call a
loved one and I'm going to go copy and
paste and drag this guy over here so
there you go there's the dead version of
our snail as well as the animated
versions ok I'm going to go up here and
go file and export as and I'll throw
this in my unity folder let's see where
is up that's the wrong one I'm going to
jump into the correct one users there
Fanus and
comments' and unity and Mario assets and
I'm just going to name this guy snail
and of course I'm going to save it as a
ping file and I'm going to click on
export and then click on export alright
so we are done we have our snail sprite
sheet so now I'm going to go and slice
it up and it start animating it alright
so before I get the snail on the screen
and have it start doing everything I'm
going to go back to my original promise
which was to teach Manny how to wall
jumping I'm going to do that right now
by going into scripts and then demanding
script so what are we going to need for
wall jumping well basically what I'm
going to need to do is go and have Manny
increase his velocity in the y direction
whenever he specifically wall jumps so
what sort of things am I going to need
to store inside of here well I
definitely am going to need to have a
float that is going to store how much I
want to be velocity to change so I'm
going to change this to wall jump Y and
I'm going to give it a value of 10 F all
right so we might change that depending
upon how well this works then what am I
going to need to do well I'm gonna need
myself some functions basically I'm
going to need some functions that are
going to tell me if Manny is on the next
to a wall or not so I'm going to
calculate that I'm going to calculate
with a ray cast just like it did
previously so I'm going to go public
Bowl and I'm going to say is wall on
left and if it is well I'm just going to
say return and this is going to give me
true or false as an answer I'm going to
go physics to D and then I can say ray
cast new vector2
transform and I can get to the position
X minus the width of nanny and the
transform position of Y because we don't
care about that because we're trying to
see if a wall is on the left side then
I'm going to go negative vector 2 right
and this is going to check to the left
with our ray cast and then I'm going to
define how far how long the raycast is
how far out them in a check ok so we got
that I'm also going to need to check if
the wall is
on the right so just copy and then
spacing that in there is wall on and
we'll change this to right and what do
we need to change here well we're going
to need to increase it cause going in
the right direction is an increase for
the value of X while going to the left
is a decrease and then we're going to
change this to actually check right okay
so there we go we got two functions one
checks if the wall is to the left and
one checks if the wall is to the right
what else are we going to check well
we're going to check if there is a wall
on the left or right by checking both of
them and we'll narrow down once we find
out that so we're going to go is wall on
left or right all right so we got that
and to find that out we can just go F
and call is wall on left and of course
that's a function or is wall on right
and again once again it's a function and
if both or if you either one of those is
true we're going to say return true
otherwise we're going to return false
all right so simple stuff okay so now
we're able to test if there is a wall
we're also able to test if it's a wall
on the left or right what else we need
to do well we need to get our wall the
direction if it exists and then what
we're going to do is multiply the
results against mani's X velocity so I'm
going to go public and get wall
direction and then I'm going to say if
is wall on left and remember that's a
function well then we're going to return
negative one because that's going to
make us go left whenever we have it's
negative one and then we're going to say
else if is wall on right well in that
situation we're going to return whoops
return one which is to the right
direction and otherwise we're going to
return zero so we'll say return zero all
right so we got all of those set off
website to put space here and there you
go now it's fixed so now all we need to
do is come up here and utilize those and
we're going to utilize them inside of
the fixed update area and I'm going to
come in right here and what I'm going to
do is I'm going to say if meny is
jumping next to a wall his velocity will
we'll go upwards in the y-direction so
I'm going to say if is wall on left or
right and many is not on the ground so
we're going to say naught is on ground
there it is and horizontal move is equal
to 1 well then we're going to go and set
the velocity equal to new vector to
negative get wall direction and then
multiply that times our speed times
negative 0.75 F and then we're going to
pass in our new wall jump Y velocity
which is going to which we very first
thing we define inside here all right so
let's save that and we'll test it okay I
don't see any errors let's run and see
if we can wall jump run jump up there we
go
yep see we're not getting stuck anymore
say we're able to jump into things
oops hit that would it work better if
there was more things but you can see
I'm able to jump look look at that see
do all kinds of cool wall jumps all
right
so neat stuff and you can go in there
and stack all kinds of different blocks
next to each other and test out the wall
jumps but just touches it here you can
see whoo and you might want to actually
the ten that I have inside of there this
guy right here wall jump why that's
probably a little bit too much so you
might want to cut that down but for now
I'm going to keep it exactly where it is
so now where we got to do well I'm going
to jump back over into unity and let's
make our snail work so I'm going to come
in here to my sprites area and I'm going
to specifically find my snail whoops I
guess I didn't drag them in there I'm
going to go get them so here we are and
there is the snail sprite sheet so I'm
going to grab that and drop it in the
sprites folder there it is now I can
grab this guy so I'm going to go and
select him right there and you can see
all this stuff popped up over here I'm
going to go in and change the sprite
mode to multiple pixels per units gonna
be 32 because everything's 32 by 32
let's go get rid of that all right 32 by
linear is going to change the point
because we're dealing with pixels
remember then we're going to click on
our sprite editor
says unapplied import settings oh yeah
click on apply' here it is we're going
to go slice and then we're going to go
grid cell by size 32 by 32 remember
that's how we defined everything and
then click on slice and then click on
apply all done click on that close it
and now you'll see if we come over here
that our snails have been created for us
and there they are awesome now let's
make them animate so I'm going to grab
the first two this is the walking snail
I'm going to grab him and I'm going to
drop him let's drop them right here and
this is going to open up and I'm going
to rename this snail run so snail run
and that's animation file make sure that
you put it in the right place I'm going
to go assets and then animation so the
things don't get confused and then click
on save and then we're going to go and
get snail 2 and 3 also select both of
them at the same time we'll drag them
all over here and we'll drop that right
there so that's our dead snail and I'm
going to call this snail death not very
nice name is it I don't death there it
is make sure it's in the animation
folder so assets once again animations
folder and then come in here and click
on safe
you can now come in here and actually
delete the dead snail thing we're going
to get rid of that so we'll go in here
and we'll do a right-click and delete
you're going to see both the end all the
animations are inside of here so it's
all cool now I'm going to double click
on snail 0 inside of my animations
folder and you're going to see all this
stuff pops up inside of here and then
I'm also going to come over and get
snail death the animation and drag that
over into the window here it is I'm
going to select snail run and I'm gonna
come over here to speed and I'm going to
change this to 0.5 I need to then create
a parameter and it's going to be a
trigger so we click up here click on
trigger and I'm going to name it name it
dead so there it's the snails leave the
community alive or dead I'm going to
create a transition from Run to death so
I'm going to right click on run up here
and go make transition and then click on
death I'm going to click on the
transition between these two guys and
I'm going to come up here and go has
exit time and make sure that that's
unchecked and then I'm going to click on
the plus sign right here and there is
equal to dead so it's going to
transition from 1 to death whenever it
is equal to dead pretty simple
everything else here is
in pretty good so I just need to go in
there and add some box colliders and
rigid bodies to miss nale so I'm going
to go back and click on scene once again
click on my little snail man and I'm
going to go and add some different
components to it so I'm going to go add
component I'm going to add a box
Collider to it so physics 2d and box
Collider and I want to play around with
the offset and size to make sure that it
fits around my snail as closely as
possible so I'm just going to come in
here and play with this try moving this
in just slightly move in the Y just
slightly as well and then I'm going to
change my size on this so just shrink it
down just a little tiny bit and then
also change the Y amount a little bit
more than normal
something like that now you can see this
guy there is the collider I'm gonna have
to move this down that should have been
more like negative all right and there
you can see there is the Collider around
the snail and it's pretty small and you
can see over here the final results but
your numbers very well might be
different than mine okay
then I'm going to come in and add a
rigidbody so physics 2d once again and
rigidbody 2d I'm going to freeze the
rotation I want my snails flipping
around so I chained it froze the
rotation on the Z I'm going to change
collision detection to continuous and
everything else there looks pretty good
now what I want to do is have my snail
of course move backwards and forwards
and to do that what I'm going to do I'm
going to open up my rapper first off and
drag this inside of the rapper just so
he shows up inside of there rename this
guy snail just to give them a different
maybe a little bit better name than
snail you could come up with that I'm
just going to leave them snail for now
and then if I want my snail to move
backwards and forwards between two
points I just have to create those two
points so I'm going to come in here and
go create and create empty and then
create create empty there's the two
points I'm going to call this snail
start and then the other one is going to
be snail end of course the names don't
matter for anything in that situation
then I'm going to position snail start
right over here and then snail end right
over here and as soon as it hits one of
those God's going to flip and then turn
in the opposite direction something else
it might be a little bit useful is I
snail start up here I can come in here
and create a gizmo or a better icon for
it so it's a little bit
easier to say so let's select that guy
and this isn't going to show up in the
game it's only going to show up inside
of your editor so click on end over here
click on this and let's have that be
orange instead all right so we can now
up they're actually on top of each other
which is perfectly fine we're going to
move them into place so I got snail
start selected here and I'm going to go
and change the position on it and move
it over here by the pipe and let's go
and move it down like there so we don't
want the snail to turn around until it
hits that so we're going to make it look
like it's hitting the pipe I'm going to
go negative five and see if that works
that's good enough and then I'm going to
select snail end and do the same thing
with it so move it further over here I'm
going to put it in the block area like
that and then move it down it'll
actually don't even move it down just
have this be in negative five just like
the other ones we want to have them on
the same height okay so that's good so
there you see right there is numbers and
there you see this numbers for stay a
snail start okay then what we want to do
is select both of those and we want to
add circle colliders to them so physics
2d and circle Collider and that's all
fine whoops we're going to have to go is
trigger so that's how we're going to
trigger the snail to go left and right
also select snail end and add component
circle Collider once again physics 2d
circle Collider and is trigger we're
also going to come in here we can shrink
down this Collider a little bit it's a
little bit too big
there you see I went and moved it down
to point three and I'm going to get this
guy right here and maybe that'll be 0.3
also go see 0.3 looks about right so as
you can see the colliders right there on
the edge of the pipe and the collider
right there on the edge of the block so
that's going to make him go backwards
and forwards when he hits us now to get
this to work I'm going to have to go in
there and create a script specifically
for my snail so scripts and creates and
c-sharp script and we'll call it snail
of course and we'll open that guy up all
right so what are we going to have to do
inside of the snail well of course the
snail is going to have a speed we're
going to make it public so that we can
change it just in case you know it's
moving too quick or it's not moving
quick enough or whatever so there we go
there's the speed for our snail and also
it's going to have to have a direction
so we'll go vector to direction is
equal to vector - and we're going to
start them off going in the right
direction that's perfectly fine what
else we're going to need to do well on
fixed updates we are going to flip get
rid of that right there and go void
fixed update okay we're going to move
our snail inside a fixed update and to
do that we'll go get components and
rigidbody for our snails rigidbody and
that's to D and then we're going to go
and set our velocity equal to whatever
the direction is okay so that's pretty
simple
what else we're going to need well we
set up the on triggers so that whenever
we're not going to need start we're not
going to need updates remember these
guys over here
snails start look if we go and select
those you're going to see see on trigger
or is trigger whenever these guys are
hit by our snail we are going to make
the snail go in the opposite direction
so to do that we're just going to say
void on trigger enter to D and then go
Collider and then whenever it collides
with one or the other of those different
things we're going to flip the direction
of movement for our snail to do that I
showed you how to flip it before it's
just set local scale and new vector2 and
then negative one times whatever it was
before so transform and then for the y
part will go transform local scale Y
okay so that's not going to change all
right look just notice that I need to
multiply this kinds of speed also the
one and I forgot that okay so we got
that fixed and then we come up here to
transform and local scale whoops local
scale dot X and that's all good and then
we're going to go and change direction
equal to new vector two negative one x
direction dot X and then direction Y
stays the same because I didn't change
all right so have that all set up and
now what should happen is our snail
should be moving back and forth we'll go
in and run it see if that's working and
snail is sort of oh I forgot to attach
the script to the snail let's
go in here and grab our snail over in
the hierarchy and then goes scripts and
then get our snail and drag it down here
and drop it right there and there it is
right there and we see we have all that
setup looks good and we'll run it and
see how that and there's our snail whoop
he went over there everybody didn't flip
what any flip let's go see if we can
figure it out oh I see this is supposed
to be Collider 2d so a little slip-up
there let's save that and now we'll come
in here and run it up there's an error
once they're 21 it says I forgot a
semicolon go in there throw semicolon
inside of there and save that and let's
run it to see if our snail is animated
and it is looks good there we go and our
snails animated so super everything
looks good
all right so now all we have to do is
allow Manny to either kill the snail or
have the snail kill Manny first thing I
want to do is I want to go into my sound
manager so let's open up the sound
manager script that we have and I'm
going to go in there and put a new audio
clip inside of here so let's click on
that and this guy is going to be called
Manny does and that's all we need to do
with that click on our sound manager
over here in the hierarchy go and click
on sounds let's go find Manny dies grab
it drag it over here and then drop it
right inside of there okay so the sounds
all set up so we'll save that and now we
just need to jump into this snail script
and set it up so that when Manny jumps
on top of snail it dies and if the snail
hits Manny but not from the top then
Manny dies okay so how we're going to
set that up is we're going to go and use
on collision enter 2d and this is a
collision 2d must add up last time won't
mess it up again then what I need to do
is I'm going to say if they Manny that I
collided with has the name that is equal
to Manny which is what I named it in the
hierarchy well if I hit from above then
I want to basically play a dead
animation and remove the collider from
the snail and then have the snail fall
off the screen so I'm going to say if
the thing that collided contacts 0 dot
points Y is greater than
transform.position
of my snail well that means I hit the
snail from the top well in that
situation I want to go gets components
and call the animator and then I can say
sets trigger to dead and that is the
animation that we set up when we first
started the you know of course you know
that animation could be more of an
animation was basically the same thing
over and over again but you guys get the
idea I'm sure you can figure that out
then I want to remove the collider so
that our snail can fall off the screen
so I'll go enabled and set that to false
so now there is no Collider and then I
want it to fall off the bottom of the
screen so I'm going to set its direction
for our snail is going to be whatever
the direction X was for it so that's not
going to change and then I'm going to
set this to negative one then I want to
destroy the snail altogether but I want
to wait to destroy it so I'm going to
say destroy object and game object is
the snail since I'm in the snail and I'm
going to say I want to wait three
seconds I'll give it plenty of time to
fall off the screen all right all there
was I know that the snail contacted
Manny from the front or the back
anything from except you know what I
mean when I said pack I mean the the
front of the snail or the back of the
snail not meaning the snails back all
right so all right hopefully that made
sense so I want to play a sound this is
going to kill Manny so I'm going to play
one shot and I'll go sound manager and
reference Manny dying's sound inside of
there and that is in Manny dies so going
to play a sound and then it is going to
destroy Manny so we'll go and get this
and I could I didn't do any a death
animation for Manny so I can just go
like this and the thing it collided with
which is Manny and I'm just going to
have this be very brief okay and I think
I did everything I need to do is jump
into unity and see if it all works all
right let's play it here is Manny whoop
is my wall jumping
AR and then let's see what happens Manny
gets it and Manny died all right so it's
like the snail ate them let's try it
again
this time have manny jump on the snail
poop and the snail died all right so
there you go guys that is a pretty
complete of course I could make the
scene longer but you can do that I
showed you how to make the scenes I
showed you how to make this jump I show
you how to set up wall jumping I showed
you how to set up rise blocks coins and
just everything else that we cover here
this was a really fun tutorial and
hopefully you guys enjoyed it and you
can do so many other different things
platformer wise now with the knowledge
that you've gained from this tutorial
and up next I think I'm going to do
pac-man haven't really decided yet you
can of course leave your comments below
and like always please leave your
questions and comments below otherwise
till next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>