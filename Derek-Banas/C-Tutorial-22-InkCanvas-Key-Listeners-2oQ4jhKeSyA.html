<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>C# Tutorial 22 InkCanvas &amp; Key Listeners | Coder Coacher - Coaching Coders</title><meta content="C# Tutorial 22 InkCanvas &amp; Key Listeners - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Derek-Banas/">Derek Banas</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>C# Tutorial 22 InkCanvas &amp; Key Listeners</b></h2><h5 class="post__date">2017-03-22</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/2oQ4jhKeSyA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">well hello internet and welcome to part
22 of my c-sharp video tutorial on this
part of the tutorial we're going to make
a simple paint application and cover how
to use calendars tab controls how to
capture key events and a whole bunch
more like always all the code the
transcript of the video is in the
description underneath the video and I
have a lot to do so let's get into it
okay so here we are once again and
everything is the same I didn't change
anything up here it's the same as the
last couple videos and I'm going to go
inside the grid now the very first thing
I'm going to do is I'm going to come
down here inside of my tool box and I'm
going to grab this guy tab control and
I'm going to drag him way up here or her
don't know which one it is and there you
go and we can position this a little bit
let's just come down here and click in
tab control gets the whole entire thing
and then we can drag it over like this
and drag it over like this and have it
take up the total of the screen and drag
it up here so it butts up there and then
we will drag it down here so that it
fills the entirety of the entire screen
now we can come in here and select these
individual parts and I am going to call
this guy calendar and then you can go
and add additional ones just right click
here and click add tab item there you go
you have a new tab and I'm going to
click on this guy right here and I'm
going to call it hmm paint or draw about
draw alright so the very first thing
we're going to do is we're going to come
in to the calendar section and I'm going
to go and search for a calendar down
inside of here so let's go and find a
calendar can't find it here so that
means it's further down inside of here
and there we can see it right there is
calendar let me go up so you can see
where it is it's down here where we have
common WPF controls and then we're
specifically going to look for the
calendar one so let's come down just a
little bit more and they're sort of all
over the place and if we come down here
you're going to see all WPF controls
actually it's lying to you it's not all
of them there specifically calendar so
I'm going to grab calendar
drag it up here and wrap it in and we
can maneuver it around with our arrow
keys to wherever we want it to go and
then I'm also going to get a text box
and there is a text box and drag it up
and I'm going to drop it right inside of
there now with our calendar I'm just
going to select the whole entire thing
there's a whole bunch of different
things we can do with it so I'm going to
first I'm going to move this down here
and I'm going to give my text box a name
so go name is equal to and let's change
this to text box date selected so I'm
going to have this update whenever the
calendar is you know change so when and
one of the other dates is clicked on I'm
also going to want to make a lot of
changes to the calendar so I'm going to
close that off right there and then come
down here and I'm going to type in
calendar to close that off then we can
put all kinds of neat things inside of
here I can go and give the calendar a
name of course let's move this down here
like that and move this guy up here and
I'm specifically going to give this the
name of my calendar I can of course come
in here and change the background color
for this as well so where should we put
that how about we just put it in here
after this guy right here so we'll have
all our new stuff underneath here so we
can say background is equal to and it
gives you all sorts of different colors
to choose from I'm just going to pick
Alice blue we can change the display
mode and you'll see exactly how that
changes so we have here decade month and
year if we click on month you're going
to see that it's exactly the same as it
was previously and let's get rid of that
and we could also come in here and pick
a decade see how that works and here you
can see it just shows the years and then
we could also come in and type in year
and you can see that it shows all the
months in the entire year but month
makes more sense so that is what we're
going to do for now
we're also going to be able to display
the start date so let's say I want
display dates start and I want it to
start off with 3 1 2017 I can do that
and now it goes and gets rid of all the
February dates it can also come in and
define where the dates will end so we'll
go display date end is equal to and
let's change that 331 2017 and you can
see that's changes that we could also
define what we want to define as the
first day of the week so let's say that
I'm a person that believes Monday is the
first day of the week I can come in and
change this and then put Monday inside
of there and you can see the date change
there in the calendar we can define if
today's date will be highlighted or not
- sometimes that makes sense and
sometimes it doesn't and in my situation
I'm going to say that it does make sense
so that's going to stay the same as it
was I can also define some selected
dates so let's say I want something to
be selected other than today's current
date I can go selected dates changed and
then I'm going to point out something
that I'm going to create here in a
second that's going to have other
selected dates so I'll go my calendar
selected dates changed and then inside
of here I'm going to be able to define
all that information so let's move down
a little bit I'm also going to be able
to X out certain dates so I can do
something like calendar and black out
dates and close that off and then inside
of here define what those black out
dates are going to be so calendar again
and date range and I'm going to say that
I want to start at 3 1 2017 whoops I
messed that up let's get rid of this
okay so there is my start date and then
I want to define my ending date to be 3
ah what makes sense let's go 10 2017 and
when I do that and close that off you're
going to see all those dates are now xed
out so something else kind of neat and
then I can reference the selected dates
changed so let's go and add in some
other dates that we would like to
highlight I'm just going to do one here
just to keep this simple say calendar
selected dates and then inside of here
I'll define some dates so
sis and date time and then throw another
date inside there will say 3:25 2017 and
you can see that's 325 2017 is selected
and now what I'm going to do is this is
going to work as an event handler so
anytime this guy right here is clicked
on it's going to call this function
right here over in my regular CSS code
so it's bounced over there and
everything here is exactly the same as
it was previously and I'm going to go
try this void and there's that and this
is going to be receiving whatever sent
it whatever triggered this and then
selection changed event args and we will
give that the name of E and then to go
and update our text box any time the
date changes inside of there I can go
and get a reference for my calendar and
that's going to be the sender and I have
to say that it is a calendar then after
that I can check that it has a value
that's very important so calendar again
and select a date this is going to be
the date that they clicked on and then I
go has value to check that it actually
was assigned a value and then I need to
come in and display the date in the text
box and I'm first going to go date equal
two and calendar selected date and get
the value out of that and then there is
a bug inside of c-sharp at this point in
time so whenever you do this what we're
going to have to do is throw this in a
try block to catch it because it tries
to go and get to select a date prior to
it actually being selected whenever the
app first starts off so we're just going
to throw this in a try block to make
this work and we can go dates and then
you go to short date string and then
outside of here we can go catch and what
this guy obviously is doing is updating
the text box that we have inside of
there and the error that you're going
catch is the null reference exception
and for this I'm just going to
even exactly like that so now we can run
it and test to see if everything works
right and there it is right there
and if I come in and select the
different dates you're going to see the
day update so that's some of the stuff
we can do with the calendar and if you
want to see more of them just tell me in
the comment section and I'll do some
more otherwise I'm going to create a
pretty simple paint application to show
you a whole bunch of other things as
well as how to catch key events so here
we are over in these amyl code and then
we're going to come down to our draw tab
to start creating some additional things
inside of here if I want to catch any
key events with this guy I'm going to be
able to go key up is equal to and that's
going to catch any keyboard presses and
I'm going to go draw panel key up sounds
like a good name and then I can catch
any key events with this let's bounce
over to the CSS code and I can go
private void and draw panel key up and
once again that's going to get the
objects as well as any type of event
that came through on that let's just
copy those and paste it inside of there
and the specific event we're going to
get here is key event args and then
inside of here what we can do is we're
going to cast the key into an integer
which is going to be whatever its key
code is and I could say something like
if the key is greater than or equal to
35 and and let's cast this to an int
once again the key is less than or equal
to 68 then I want to do certain things
with it and I can do something like
switch and once again cast this e key
and throw that down there this is upper
case key sorry about that and then I
could do something like case 35 and what
I'm going to do here is I'm going to set
a key listener that's going to allow me
to increase my strokes size as well as
allow me to change color so I'm going to
come back to this I'm going to jump back
over into the sample code and do a
little bit more with this now I have my
tab item open here and what I want to do
is take a look at document out
on so let's just click on that you can
see these guys right here and what I
want to do is change the tab layout type
from grid to a stack panel let's go and
see all this and if I want to change
this I just go and get the grid part and
right click on it come down to change
layout type and I'm going to change this
to stack panel just click on that and
it's changed and now what I want to do
is add a toolbar to this guy so let's
just get rid of the document outline
right here and let's look for our
toolbar and there it is down here so I'm
going to drag that guy up here and drop
it in there to the stack panel you can
see toolbar shows up right there and
then what I'm going to do is I'm going
to add a whole bunch of different items
to our toolbar so I'm just going to
select it with the left left mouse
button and then over inside of
properties let's open this up a little
bit actually first I'm going to give
this a name so I'm going to go name is
equal to and I'm going to call this
drawing toolbar and then find the height
as well so let's change the heights
equal to 50 there now it has a little
bit size to it and now I have it
selected and I can go over here to
common and specifically items and I'm
going to add a whole bunch of different
items to it so just click on that guy
right there
and what I want to do is allow the user
to draw a race as well as select and
load and save drawings so I'm going to
add a whole bunch of different items of
this since I only want them to be able
to draw a race and select one or the
other I'm going to actually sign these
up as if they're radio buttons so I'm
going to go click on this guy right here
and then come down inside here so I get
the radio button and click on radio
button click on add you can see it shows
up right there and I'm actually going to
add two more of them to that and then I
could set a whole bunch of different
things so let's say that I want the
border for this to be 210 just so that
it's stands out a little bit so I go to
10 and 210 and I'm going to change all
these to 210
so it's also jump over here and to 10
and to 10 it's going to be like a kind
of a grayish color of course because
anytime you have RGB set to the same
color you're going to get
right works are gray or black or
whatever okay
got all those set and I'm also going to
change the width and height for each one
of these so I want my width to be 80 and
I want my height to be 50 and I'm going
to do the same for all these so jump
over here and eighty and fifty I'm going
to check out how these look and then I'm
going to add in the additional buttons
that are going to be used to both load
and save all these different guys I'm
also going to scroll down inside of here
and give all of them names and this guy
is going to be called select and this
one's going to be called a race so let's
bring that down and this isn't contents
and then this final guy up here is going
to be draw so there's that so let's save
that and take a look and see exactly
what it looks like okay so there you see
draw a race and select now I want to
group all of these so that you can only
select one at a time how I'm going to do
that is I'm going to select that I'm
going to hold down the shift key and
select all the other ones then I'm going
to come over here under column and once
again and group name and I'm going to
give them all exactly the same group
name I'm going to call them draw group
like I said that's just going to make
sure that I can only select one at a
time so there's draw group and you can
see they've all been added to the draw
group group name and now what I want to
do is actually go in there well I might
as well select my buttons also so let's
just select our toolbar once again and
then come over here and items and let's
throw our buttons inside of here so this
time we're going to be adding some
buttons so let's select this guy right
here and then we're going to get buttons
already in there so let's throw another
button inside and another button inside
going to select these guys and
everything looks pretty good so I'm
going to use exactly the same border
color on this and I am going to use the
same height and width as well so let's
just go 80 and 50 and then I'm gonna
call the first one saves so come down
into content and goes save and
everything is good there and it will
just do exactly the same thing border
brush make sure that's selected
to tune change this to to tune change
this the 210 and the width is going to
be 80 and the height is going to be 50
and then this one is going to be open so
find content and write open inside of
there and those all look good okay and
there we go so we can draw erase and
select we can only select one at a time
and we're going to be able to save as
well as open save files that we have
inside here for these guys also going to
want to add in an event for all of them
so bring all my radio buttons up here
all at one time I'm going to go inside
of here and I'm going to create a click
event and I'm going to give them all
exactly the same click event name so
click and let's get rid of that and
we'll change this to draw button click
sounds like a good name and I'll copy
that and then we're going to do exactly
the same thing for the other two radio
buttons and that is and then I'm going
to come down for this guy right here and
this is going to have a separate click
event so I'm going to have click again
and I'm going to call this Save button
click and then let's go and get this and
let's paste that inside of there and
we'll call this open button click next
thing I want to do is go and get what's
called the ink canvas and that's what
we're going to be drawing on now it
might not show up down here inside your
toolbox we can come down here and we can
look around forth so this pink can just
show up here at all yes I have it right
here see in canvas but I probably use
this previously if you don't see in
canvas you can just right click and then
come inside of here where it says choose
items and click on that guy and it's
going to load up a whole bunch of WPF
components all of them it's going to
load them up and you're going to be able
to select all the ones that aren't in
there so then you just need to scroll
down until you get to ink canvas and put
a checkmark inside of there and then
click on OK
and it's going to automatically come in
there and load all those inside of there
but I got it already so I'm just going
to grab in canvas drag it up here and
drop it inside of there and then I'll
select it and I'll make sure that it
fills the entire screen because that's
what I'm looking for now I'm going to
give my ink canvas and
of course because we're going to need
that this is equal to and let's just
call this drawing canvas and the height
is perfectly fine the way that it is now
you come in here and set a whole bunch
of defaults for the in canvas of course
so let's just come over here and ink
canvas and close that off and then we'll
set some defaults inside of there so one
of the defaults let's say I want to put
inside of here is the width and height
and color for the default stroke so to
do that you go in and you go in canvas
like that and then you go default
drawing attributes and now that guy is
and then you can define a whole bunch of
them inside of here
we're going to go drawing attributes and
then name and I'm going to call this
stroke attribute and I'm going to say
that the default width for my strokes is
going to be equal to 3 and the default
height for my stroke is going to also be
equal to 3 and I'm also going to define
that I want the color for it to be black
and I could throw an ending in for that
tag now hopefully I have everything set
up there I don't see any errors so now
I'm going to jump back into the CF code
I'm going to make all of these buttons
here work alright so let's just come up
here before we get involved with
capturing the keyboard clicks and I'm
going to handle all the events for my
draw buttons being the draw erase and
select buttons radio buttons that I
created earlier and it's called that
draw button click all of them are going
to be sent here and this will be the guy
that triggered the events there you go
routed event args call it e what I want
to do first is get a reference to the
radio button that was clicked on so I'll
go radio button let's just call it radio
button and we'll go sender as radio
button then I'm specifically want to get
the radio button that was pressed so go
radio button pressed is equal to radio
button once again and then I want to
convert
the content name is that is into a
string and then I'm going to change the
settings based off of whatever the you
know the content name for that radio
button is so radio button pressed and if
it is equal to draw let's go put space
in there draw in that situation I'm
going to go this drawing canvas editing
mode and we'll change our editing mode
for this is equal to in canvas editing
mode and whenever you're drawing it's
going to be called ink and otherwise I'm
going to say else if and we're going to
do the same thing here that we did with
this one let's just go in there like
that throw that in there like that and
the second option we had there was that
was going to allow them to erase and was
just going copy this guy paste that
inside of there and here what we're
going to do is to change the editing
mode for this guy to erase by stroke you
can play around with this there's a
whole bunch of different options so I'll
go erase by stroke and then I'm going to
go let's just copy this whole entire
thing and paste that inside of there
else if radio button and the last option
we had was select and in the situation
in which the select button was clicked
on we're going to put it in selection
mode and that's all we need to do and
that's going to completely make our
drawing surface work with those radio
button options that we have there so
pretty cool stuff now I also want to
come in here and allow the user just by
clicking on different keys on the
keyboard to be able to come in and
change the stroke size as well as the
color for the strokes so this guy right
here 35 is actually the key code for one
on your keyboard and let's say in this
situation what I want them to do if they
click on that I want to come in and
change the stroke attributes for the
width to be equal to two and I'm going
to do the same exact thing for our
height so we'll go height and then we'll
do the same thing for a whole bunch of
other ones so we'll just copy this and
you can put as many of these in here as
you'd like let's have it be 36 and we'll
change this to 4 and 4 and we'll do some
more
1:37 and we'll change this to six and
six you're going to see in a second what
this does just changes the size of your
of your stroke that's it makes it so you
can draw thicker lines and ate and ate
and that's pretty good and then I'm also
going to allow them to change the color
for the stroke so in that situation if
they click on the key for B that is
character code 45 I'm going to allow
them to change the color for the stroke
and to do that you go stroke attributes
you don't remember what that's from
spouts over here stroke attributes right
here that guy right there that's what
we're referencing so bounce back and I
specifically want to change the color
and how you do that is you need to cast
this to a color and Ango color converter
and then convert from string and blue is
the color that I want to change if they
click on the B button now let's add two
more colors you can do whatever you'd
like here so let's go and throw that in
there and let's say that I want to move
a little change it to green if they
click on the G well the number code for
G is 50 do that like that and we'll just
change this to green and then for the
final one let's say we wanted to be
yellow we'll change that to 68 and
change this to yellow and save it and
while we're inside here won't we go and
also well that's got popped up let's get
rid of that now we'll leave some of the
stuff here let's set up the Save button
so Save button click and this is going
to be routed event args just like before
everything else is the same and if we
want to save this using a file stream to
do so file stream equal to new file
stream and I am going to call the file
that it's going to save to by default my
picture dot bin and then we're going to
use file mode create for this guy and
then I can just go this drawing canvas
like that and I can save all the strokes
for it in that file and there's our file
stream and there we go we save that and
then finally
let's go and do the same thing for our
open button click so this is going to be
open button click and this is going to
be the same I'm going to use the same
exact file except I'm going to be using
the file mode of opening the file and I
also need a file access to be able to
read from the file and there that is and
if I want to be able to load all of
those strokes in there I need to create
a stroke collection that's going to
allow me to store those and get that
like this new stroke collection and pass
in the file stream then I can go this
drawing canvas strokes is going to be in
this situation equal to that stroke
collection it's going to load it alright
and that's all we got to do let's run it
make sure we don't have any errors don't
see anything wrong here right now and
there you can see our calendar just like
we did first and I'm gonna click on draw
and by default it's going to allow me to
draw let's go in here and click on erase
you can see it allows me to erase click
on draw again there's that let's change
it to green I clicked on G let's go and
change this before and yellow and I went
now and change that as well and we're
also going to be able to go select and
highlight different things we have to
completely highlight it like that now
they believe those strokes around and
I'll also be able to come in here and
save this and then click on erase delete
everything and then open and it loads
everything back in alright so there you
go guys that's some different things you
can do with the calendar component as
well as the drawing component and tabs
and more information on toolbars and how
to draw and do a whole bunch of
different things so if you guys found
that useful and like always please leave
your questions and comments below
otherwise till next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>