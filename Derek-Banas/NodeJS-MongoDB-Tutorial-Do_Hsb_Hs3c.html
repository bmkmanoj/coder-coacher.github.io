<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>NodeJS MongoDB Tutorial | Coder Coacher - Coaching Coders</title><meta content="NodeJS MongoDB Tutorial - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Derek-Banas/">Derek Banas</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>NodeJS MongoDB Tutorial</b></h2><h5 class="post__date">2016-01-18</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Do_Hsb_Hs3c" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">well hello internet and welcome to my no
js' and MongoDB tutorial in this one
tutorial I want to show you how to a
query insert data and so forth using
nodejs and MongoDB as well as Express
and because you guys asked for it all
the time I decided to record myself
while I make this video today and watch
out for the hands because I move around
constantly and if you have no idea what
no Jes is or you don't know how to
install it or know how to install
Express or Jade or a MongoDB I provide
tutorials in the description underneath
the video that will show you how to
install those things whether you're on a
Mac or on Windows and of course all the
code is available in the description as
well for free so I have a lot to do so
let's get into it if you guys ever
wondered what it looks like note wise
and regards to what I use when I make my
tutorials these are my notes that's all
that I use and the very first thing
we're going to have to do here is we're
going to have to install nodejs as well
as North MongoDB and to install node.js
you're just going to have to go to
node.js org right there and pick out if
you're on Windows Macintosh or on Linux
and install it and you're also going to
have to go and install MongoDB and you
just go to MongoDB Dork downloads and
that's how you get all those things and
like I said I provide more detailed
information on the how to install and
setup those guys in the detailed videos
that are in the description ok so now
that we have those guys installed what
we're going to have to do is open up
either our command prompt if you're on
Windows or your terminal if you're on a
Mac and install a whole bunch other
different things so we're going to open
up your command prompt and you're going
to install Express if you don't have it
already so you're going to go NPM
install - - save Express and hit enter
and it's going to install that stuff for
you then you're going to install the
express scaffolding generator which
we're going to use in this tutorial
didn't use it previously but thought it
would be useful so to do that we just
type in all this stuff and hit enter and
that's going to install that and you're
going to do this on windows and Mac's
if I haven't said that already then
you're going to install Jade which we're
going to be using and to do that you're
going to type in MPM install Jade and
then of course you're going to install
MongoDB now what we're going to need to
do is we're
I need to go to the directory wherever
you want to set up your site so make
sure you're in that proper directory and
then once again inside of your terminal
you're going to be typing in Express and
then whatever you want your sample site
to be called I'm just going to call mine
sample site and it's going to generate
all these individual files that we're
going to be using and I'm going to go
over exactly what all of them do here in
a little bit and then what I'm going to
use is sublime text to execute all this
so if you're on Windows you're going to
type in sublime followed by the
directory you want to open up inside of
it or if you're on Mac you're probably
going to type in su BL dot and that's
going to open up all of the different
files that you have here that we're
going to be working with first file
we're going to open is going to be
package.json this guy right here and
you're going to want to come in here and
add in MongoDB so you're going to want
to type in a comma and then you're going
to type in Kerberos tilde 0 dot 0 dot 1
7 and then MongoDB so Mongo DB colon and
then you're going to type in another
tilde and I'm going to type in 2.0 0.33
and you're going to save that file and
you're not going to need that anymore
now you're going to come over here again
in your terminal and you're going to
have to make sure you're in the correct
directory so just list out everything
that we have here you're going to type
dir if you're on Windows and there's
sample site the site I created I'm going
to change my directory to sample site
and you can see that I'm in there now
and then you're going to type in MPM
install and enter and we'll see if we
get any errors here whenever we install
this everything looks like it installed
properly so that's good if you do get
any errors what you're going to want to
do if you're on Windows you're going to
want to type in sudo and then followed
by npm install - g n p.m. @ latest and
hit enter and that should correct any
errors that you have or if you're on
Windows you're gonna do exactly the same
thing except you're not going to type in
the sudo part ok so that's all you need
to do but we don't have any error so
that's great then what we're going to do
is we are going to create a directory
inside of here that we're going to call
data so once again make sure that you're
seeing all this stuff inside of here dir
once again if you're on Windows and
going to come in here and make a
directory and I'm going to call this
data and then we can check and the data
directory is indeed inside of there so
we got that all created that's going to
be used for MongoDB now inside of here
we're going to type in M p.m. start to
start our web server just hit enter
and we don't see any errors which is
really awesome so let's shrink this down
and now we should be able to come in
here to localhost colon 3000 and hit
enter and you can see right there
localhost colon 3000 is going to show
Express welcome to Express so everything
is all set up we can also close package
JSON don't need that anymore
now once again in the terminal I'm going
to open up a different tab don't close
the tab where you have your web server
running open up a new tab you're going
to start off MongoDB server by going in
and typing in Mongo D like that - - DB
path make sure you type all this
correctly and then after that you're
going to put the location for your data
directory so let's open this up you can
see here's sample site which is what I
created here's the data directory so I'm
just going to drag this over here or if
you're on Windows you can have to type
that out keep that open and I'm going to
execute and there we go waiting for
connections so we know that that's all
setup and then over here we can just
type in Mongo and that's going to open
up our shell for us to use and I
specifically I'm going to use a database
inside of here that I'm going to call
sample site so sample site just to keep
the names all the same switch to sample
site like that and then I'm going to
enter some information and let's enlarge
this so inside of this guy I'm going to
throw in a sample document so I'm going
to go DB and this is going to be the
collection that I'm going to call
students and I'm going to insert some
student information inside of here so
first thing I'm going to do is I'm going
to throw in student it's going to be one
of the names and a specific name I'm
going to put in here is Dale Cooper then
I'm also going to throw the street as
well as city and there that is there's
the state sex mail GPA 3.5 and I'm going
to close that off with a closing bracket
here
closing parentheses and hit enter on
that then if I want to come in here and
check that I actually entered that
information I can just go like this and
you can see that there's information so
that's going to be the starting off
individual that I'm going to throw
inside of the database that we'll be
able to play around with now to start
getting everything working I'm going to
open up a pas so I'm going to make a
couple little changes inside of here
going to be able to keep all this stuff
here exactly the same right here however
I'm going to create a connection for my
MongoDB database so I'm going to go var
Mongo is equal to require MongoDB and
like I said that's just going to allow
us to get a connection to our database
we can keep the routes here the users
all that exactly the same we can use
this exactly the same I cover what all
this stuff does in my Express tutorial
who you want to watch I just want to
keep this short and condensed so that
you can get a complete overview of how
to work with nodejs with MongoDB so to
avoid any confusion all this stuff can
all be left exactly as it is this can
all be left exactly as it is we're not
going to be using users here however and
what these two guys do here which is
very important is that they define what
route files to use so for example this
guy with nothing inside of it is going
if we go over here to the routes we have
that's going to have four actually
reference index J is where we're going
to make a lot of the changes that you're
going to see here and those route files
are actually going to define what
actually gets shown or rendered on the
page whenever the user types this into
the URL that they want to open up and
the 404 all these error handlers all
this other stuff all can remain exactly
the same so that's all we're going to
have to do in regards to changes to app
KS so we're going to save that so now
we're going to go over into index J s
make a whole bunch of different changes
first thing we have to do is require the
MongoDB library so Mongo DB is equal to
require MongoDB easy enough just like we
did before then you come down to this
guy right here and what this is going to
do is define the
route route and the get function here
specifically is going to receive a path
as well as a function and then what this
specifically is going to tell us to do
is to render the index page whenever the
user goes to just a plain regular old
forward slash with nothing after it and
this is saying that we need to open up
the index file to go along with this and
render that out and where you're going
to see that is up inside of here in
views so we can click on that then click
on index and there's the index file that
we see right there and this is actually
what you see over here see where it says
Express welcome to Express say Express
welcome to Express we're not going to be
doing anything with that Jade file we
are going to be creating ones aside from
that however so that's exactly what that
does it tells it exactly how to render
that page out and the req here is going
to represent the request which is going
to provide information on the query
string parameters body and header and
other such things and the re s here is
going to represent the response which is
going to be the response that expressed
sore nodejs is going to send whenever it
information is requested so now what we
want to do is after this first guy is we
want to go in and allow for the request
of all the students that are currently
in our database and we're going to show
those on the screen so how we're going
to do that is we're going to type in
router again get and I'm just going to
call this the list and then we're going
to do the same thing again we're going
to say function request response close
that off of semicolon and then the very
first thing we need to do is go and get
our Mongo client so that it will be able
to work with our Mongo server so we're
going to say I Mongo client is equal to
Mongo DB dot Mongo client we have to
then define exactly where the MongoDB
server is so I'm just going to call this
URL is equal to MongoDB and this is
localhost in this situation
: to 701 7 which is the port that
MongoDB uses by default and then sample
site is the name of my database so
there's the location for our database
now it's time to connect to the server
so I'm going to say Mongo client connect
and then going to pass it the location
for our database and then we're going to
have a callback function here and it's
going to either get an error or whatever
and there is our database and then we'll
say if there was an error we want to put
some information on the console so we'll
say console log unable to connect to the
server and then if we wanted to put it
some information out in regards to the
error we could do so but we're going to
stay positive here and we're going to
hopefully not have any errors I'm going
to say else if there was no error we're
going to know that we are connected so
we could say something like connection
established so our goal here is to go
and get all the current documents in our
database so we're going to need to get
our documents and we'll just call this
collection and to do so you go DB
collection and then the specific
collection you want which is called
students which is what I called it
whenever I created the different
documents inside of my database and I
need to find all of my students inside
of there so I'm going to say collection
find and you can do queries to get
specific information but I'm just going
to say I want everything so I'm just
going to put in nothing between the
curly brackets I'm going to say I want
this converted into an array and then
inside of this I'm gonna say function
error and I'm going to get my result
from that close this off now once again
I'm going to check that there was if
there was some type of error if there
was I could go if I wanted to print some
information out on the browser screen I
could go res send and print that error
on the browser screen just just to show
you some different things you could do
otherwise I could say else if result
comes back with a length which means
that there was some information to show
in that situation I could go res render
and in this situation I can say that I
want to use a jade file to render this
information out I'm going to create that
Jade file here in a second it's going to
be called student list and the
information I want to pass to that Jade
file is going to be my result which was
the result of the query we can close
this off right here and this is the end
of that else statement so I'm going to
throw in an additional else if we get
here
say that I want to print some
information out on the screen and that
information is going to be no documents
found that means we were able to connect
to the database but there was no
students in the database to show so then
we don't have anything and then finally
after we get through all this we can
close our database connection so close
database and that's all those guys so
that's how we're going to be able to
show all of that information now I'm
going to go over and I'm actually going
to create student lists inside of my
views so I'm going to just click on this
I'm going to say new file and I'm going
to save this as student lists of file
save as so we'll call this student list
dot Jade and I'm going to save that and
once again I'm looking in a ton of
detail here but basically if you want to
know how Jade works I have a Jade
tutorial so just start off the Jade file
we're going to say extends layout and
you're going to put everything in a
block content inside of Jade very first
thing I'm going to do is I'm going to
create an h3 tag and that h3 tag is
going to contain the text of students
need to zoom in that for sorry about
that then we have a list of students I
want to output on the screen if I want
to cycle through all of those students
I can go each student call my I in
student list which is what was passed
over to this Jade file and then inside
of it I have list item and what's that
one each list item to have an ID of
student list item and I could throw in
this is going to be you know quick and
dirty here I'm just doing this just to
show you stuff so to say the whole thing
is a link and the information that I
specifically want to show is the student
name which I call student inside of my
database and I'm going to do something
like lives at and if I want to get
another let's I want to get another
piece of information I can say student
and get their street and then I'm going
to just do student City and then I could
throw a comma inside of there and this
is just going to take all that database
information and put it out on the screen
that was passed from all good eBay and I
can save it and that is all we're going
to need for the student list dot Jade
files so I can close that out so now I'm
going to jump back over into index j s
and
and the option to add new students and
this is going to be a forum so make sure
you put it before this line right here
and we're going to do exactly the same
thing we did before so we're going to
say router dot git and I'm going to call
this new student this is the URL that
the user is going to be able to go to
again and throw a function inside of
here it's going to have the request
information as well as the response and
then I'm once a render the Jade file out
onto the screen so I'm going to go res
render new student is going to be the
name of my Jade file and if I want to
pass over the title for this I can do so
there you go ad student or whatever and
make sure you close this off with
another semicolon so now I'm going to
create another file that's called new
student that's going to be a Jade file
over here in my views and I'm going to
save this as new student dot Jade and
save and once again we're going to say
extends layout we're going to use block
content again because we always do I'm
going to go and throw an h3 tag inside
of here and I'm going to use the title
that I passed over I then want to create
a form so I can give it
identification of form add student or
whatever I want and then the attributes
I'm going to have for this and it's
going to have a name which is going to
be ad student method is going to be
equal to post let's go down the next
line and then finally the action or the
URL that it's going to send this
information to is going to be ad student
which we're going to create here in a
second which is going to be another
route again I'm going to keep this
really quick and dirty we're going to
have to tab in and I'm going to throw a
span inside of here with name and let's
say that I want to put a space after
that this isn't pretty but it's just uh
just trying to keep everything as simple
as possible then if I wanted to receive
input input box put its ID there so
let's say it's input name and then going
to type in all of the attributes for it
text and the placeholder attribute is
going to be student and then finally
name is going to be student as well and
I'm going to do that for all the rest of
these but I'm going to throw a break
statement and another break statement
there and as you can see right here I
went and also threw in a whole bunch of
additional ones of these so so I went
and not only do I have the student
information I'm also going to receive
street and city and state and sex or
gender and GPA and then finally we're
going to throw in a submit button right
here and that's all you're going to need
to do with that like it's set all the
codes in the description it's pretty
simple if you don't understand Jade
however you can't be complicated but
that's why I have a Jade tutorial for
you to watch now let's jump back over
into index CAS because this guy right
here is going to be calling a URL called
add student so I have to create add
student and you do that inside of index
J s I can however go over here and show
you the list of students which is just
one like this and throw the list inside
of here and if you reload that what
you're going to do is get a 404 error
because it doesn't exist and what that
means is we're going to have to go
inside of node right here and you're
going to have to go ctrl C to shut this
down and then restart it and now if you
restart it we don't see any errors so
that's a good thing and we can reload it
and you can see right there Dale Cooper
lives at 1-2-3 Main Street Yukino
Washington which is kind of cool so now
let's come down here and provide a way
for us to add new students now this is a
post request not a get request so we're
going to change this from get to post a
lot of the other stuffs exactly the same
however add student is the URL that's
going to be receiving this post request
however and again you're just going to
type in function and request and
response and we're going to come in
again and get the Mongo client so that
can access the server MongoDB Mongo
client we're going to define the URL for
our database we could do this separately
but I just wanted to cover it multiple
times so let's just go and grab this guy
right here I'm down here and paste this
inside so that's the location for our
database got that as well and then we're
going to
act so we'll just go Mongo client we're
going to be doing different things here
obviously because we're going to be
updating the database instead of pulling
information from the database so we're
going to go function and there's air
there's our database inside of here of
course we're going to say if there was
an error we want to do stuff so we could
do console.log just to do something
different will say unable to connect to
server'
and we could print that information out
of course put this inside quotes we want
to print out our error we could do so
else that means we did connect and
that's a good thing and we could go
console log once again if we wanted to
come in and put that information and the
specific information we could have here
is connected to server and we're going
to do a whole bunch of other different
things of course so that our first thing
is we're going to get the documents from
our collection so let's create got
called collections equal to and go DB
collection we need to define what
collection we want to pull information
from and that's the students collection
then we want to get our student data
that's passed from our form some annex
kovar let's just call a student 1 is
equal to student and if we want to get
the information passed from our form
we're going to go request body student
and we're going to do the same thing for
the rest so we've got the student we got
the street we got the city we got the
state sex and GPA so all that
information set for us ready to use and
now we just need to put that information
that was entered in the form into our
database and to do that we just go
collection insert and inside of here
we're just putting one student inside of
here you can put multiple students but
I'm just going to put student one right
there and then after that we'll say
function and just like before we're
going to say error and result that
semicolon there so don't forget it
here we'll check for an error as well
and let's just go console.log and then
we'll just keep this really simple we'll
just type error inside of there and else
if there was no error we want to
redirect so we're gonna go res redirect
to the list URL the guy that we defined
above and that's going to show us all
the new students that we're entered so
that's this guy up here
the lists so that's how you redirect to
a new URL inside of nodejs or Express or
whatever you want to call it then after
your redirect you're going to come down
here maybe gonna say DB close to close
your database connection and that's all
you need to do and then we're going to
come down here and we are going to shut
down nodejs so we'll go ctrl C and then
we'll restart it and we don't see any
errors which is ridiculously awesome we
don't even see any warnings
there's nothing okay so we can just come
in here reload this and you'll see the
list and then we could come in and type
in new student I think that's what I
called it new student boom and we can
come in and say something like George
Thomas Toma a lat Thomas let's keep it
correct one two three main street Dairy
P a male and let's give him a 4.0 GPA
and click on submit and you can see
right there George Thomas lives at one
two three main street dairy PA there you
go guys there is rundown of how to use
quite simply MongoDB with nodejs as well
as Express and to end I'd like to say a
special thank you to all my patreon
supporters after earning about three
dollars and 49 cents off of eight videos
I realized I was going to need new
revenue sources and a lot of you guys
out there have joined in thrown a buck
or two at me and helped a ton can't even
imagine in my patreon page of course is
at patreon.com forward slash and Eric
Bana so I'm going to be updating a ton
of exclusive content over the next
couple weeks so just like always please
leave your questions and comments below
otherwise till next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>