<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>How to Make Video Games 21 : Make Ms. Pac-Man 5 | Coder Coacher - Coaching Coders</title><meta content="How to Make Video Games 21 : Make Ms. Pac-Man 5 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Derek-Banas/">Derek Banas</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>How to Make Video Games 21 : Make Ms. Pac-Man 5</b></h2><h5 class="post__date">2017-08-19</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/zIrTVkDajH8" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">well hello internet and welcome to part
21 of my how to make videogames tutorial
series this one is going to be a
challenge for me in this part of the
tutorial I am going to create the ghost
AI algorithm that's going to allow all
of the ghosts to maneuver their way
around the maze and I'm also going to
make the portals work like always all
the code and all of the visual assets
used in this video are available in the
description underneath this video and I
have a lot to do so let's get in way
okay so here I am back inside of unity
and I have the miss pac-man script open
and just a warm up here what I'm going
to do is inside of my ontriggerenter 2d
this is going to tell pac-man whenever
it collides with something I'm going to
set up the portals so that we can go
through the portals on the side of the
game and I'm just going to stick it in
right here
because that looks like it's going to be
a good place to fit it in first thing
I'm going to do is I'm going to create a
vector to that is going to be used to
move pac-man around and or to move
pac-man to the opposite side of the maze
whenever he hits a portal okay so we got
that all set up so let's move this up
here so we can see it all and the next
thing I'm going to do is let's jump back
over into unity alright so where do we
have these different points this guy
over here let's go and open up the
inspector this is at 1/16 and this one
over here is going to be a 26 16 so
basically I want to have it set up so
that when it's going to enter the portal
and then it's going to come out right
here after this point so that it doesn't
get in a situation where it's colliding
with the points which could definitely
happen so that's what I want to have
that set up so I'm going to do that in
the code so what we're going to do here
is I'm going to say if transform
position
this is pac-man's position of course and
if it is less than 2 and the transform
position I have to set it up so that it
will only hit on the y-axis where the
portal will exist so I'm going to say
transform position Y is equal to 15
point
five in that situation I want to set my
transform.position so I want to move
pac-man to this new vector2
and I'm gonna go back to two and I'm
gonna have it set for twenty four point
five F and fifteen point five apps so
that it avoids the other portal then I'm
going to go and set my move vector for
pac-man that I'm setting up here and
that is going to be equal to new vector2
and I'm going to have it go left so if
it hits the Left portal it's going to
jump over to the right side of our maze
and then I'm going to tell it to proceed
going to the left all right so that
makes sense and of course then I have to
go in and set our velocity and that's
going to be equal to the move vector and
multiplied times pac-man speed and that
should have that work and what did I do
here PM move vector move vector I wrote
alright so we got that set up alright
and that's all I need to do for that so
then I just need to handle the other
side so I'm going to say else if and
transform.position
whoops position dot X if that is greater
than 25 and the transform position on
the y axis once again to make sure that
we are only paying attention to the
y-direction on you know where the portal
is well in that situation I'm gonna do
the same thing sorta so let's just copy
this paste that in there and here what
I'm going to do is I'm going to set this
to two and hopefully that'll work in
15.5 is exactly right
and then I want it to go in the to the
right because we're going to hit the
right portal and then jump over to the
left so I want pac-man then to proceed
going to the right and then the velocity
is same okay so hopefully that works
let's give it a try here we are in unity
and
let's run pac-man here we go she's
eating dots look mister portal yeah baby
alright so that was simple
I got that all out of the way the
portals are working and now I'm going to
get to the hard part I'm going to make
them a ghost work alright so this is
going to be a real doozy so the very
first thing I'm going to do is I'm going
to create and empty so well first off
let's close this all these different
pivot points so I'm going to go in here
I'm going to create an empty and I'm
going to call it ghosts so ghosts
because obviously we're going to have a
bunch of them and I'm going to want to
position that the same as the canvass
know the turning points because
everything is going to be based around
the turning points so I want to make
sure that the the empty that's going to
hold all this is going to have exactly
the same position as my turning points
otherwise complete chaos would ensue so
I'm going to change this to negative 0.5
and then turning points is negative 0.49
so let's change that to negative 0.49
and there we go then what I'm going to
do is I'm going to get my sprite and
here's the sprite sheet and I'm
specifically going to get this ghost
right here the red one that's what's
going to be my test ghost this scripts
going to work on all the different
ghosts so okay so we got that guy inside
of there and I'm going to name this guy
red ghost because you know that's a
great name I then want to turn it into a
prefab so drop it over in the prefab
section there's the red ghost and then
come in here and delete that and grab
the red ghost throw it back inside of
there got that set up and I'm going to
want to move it to say like right here
I'm going to have the ghost sort of
sitting in here and then one by one
they're going to come out so that red
ghost right there so what is this
position right here is 1519 so I'm going
to put it 14 19 so let's go close that
again and let's try 14 19
nineteen there you go looks good okay so
we got him in that position I'm not
going to worry about doing anything with
the other ghosts at this point in time
but I am going to have to add some
components to this so I'm going to add a
rigidbody to this and physics 2d
rigidbody and I'm going to set the mass
to a small amount so that that has zero
effect on anything whoops what get rid
of that there we are and this is going
to be point zero zero one okay got that
set I'm going to have my gravity scale
set to zero gravity is not going to do
anything here and my collision is going
to be continuous and it is going to
freeze the rotation on the z axis and I
think that's all I need to do then I'm
going to come in here and I'm going to
create a box Collider and box Collider
and this is going to have um is trigger
on it because we're going to have the
ghost you know do things whenever it
hits the pivot points or the turning
points as I call them I'm going to
decrease the size on this I'm just going
to sort of eyeball this let's try like
0.8 it's now let's try 0.5 now let's try
like 0.88 areare 0.88 and if you can't
see this you know you can view a full
screen it's a 1080p video so it should
look good and that's all I need to do
with that as far as I know and now we
need to do the hard stuff which is I'm
going to come in here and I am going to
create a script c-sharp scripts and I'm
going to call this ghost and I'm going
to then select my red ghosts and drag
the go script over here and drop it
woops
okay I gotta get this down here alright
so Co script and drop it in there um
there it goes alright so there's my
ghost script and now that I have that
set up I'm going to jump in there and
start writing some code okay so what am
I going to need to do well one thing I'm
going to need to come in here and I'm
going to need this guy later on to sense
if the ghost hits the wall so i'ma go
system
we'll get into that here in a bit all
right so what keep our what properties
are my ghosts going to have to have mmm
okay so I'm the well obviously they're
going to have a speed so I'm going to go
float speed and I didn't do anything
ahead of time here just so that I could
you know keep this a little bit you know
off-the-cuff so I thought that would be
exciting and fun however quite
aggravating for myself but that's a SOHO
kelly in there and I'm also having my
rigid body of course which I'm going to
need if I want to move my ghosts around
on the screen let's just keep that like
that all other things well I'm going to
have it set up so that the ghost sprite
is going to change so if it looks left
it's going to use a a sprite look left
sprite and also it's going to obviously
look in all the different directions
I already have that set up and if you
haven't seen the previous parts of this
tutorial you know you should definitely
watch this otherwise this will not
literally not make any sense
so let's come up here and we'll also
have look up sprites and also look down
sprites all right so we got all of those
all set up then what else we need to
need well I'm going to move my ghosts
around on the screen in from one vector
to another vector so I'm going to start
it off in the center and I'm going to
move it to the upper left then the far
right upper right and bottom right and
then the bottom left and then move it
back up to the top so I'm going to use
an array that is going to store all of
these destinations so say destinations
is equal to new vector2
oops vector 2 and that's an array and
then I'm going to populate it so what
are the different parts going to be well
we're going to obviously there's going
to be a vector 2 and this is going to be
new vector 2 and the very first thing
I'm going to do is I'm going to go in
the upper left-hand corner if I come in
here and check that out I'm going to
check this guy so let's come in here and
so the upper left-hand corner is 1:29
and the far right corner is going to be
26 29 and the bottom is going to be 26 1
and 1 1 and let's just look around here
what's this level right here 616 ok so
I'm going to write all of those down and
I'm going to put them in my array so
here we are and so I'm going to start
going 129 and because we set this up
well we're able to actually use the real
vectors here which is you know really
awesome oh and first go up here and
change that put that array in there
alright so then we need a little bunch
of these let's say we get those 5 so
this script probably is going to be work
or used to also track or chase after
pac-man so it's not only going to be
used just to go around the screen but
later on it's going to be used to go
after pac-man so quite usable hopefully
alright so let's get that inside of
there and then finally we'll go to the
bottom left-hand corner and then we will
go to the that midpoints and it will
start it all over again all right so we
got our destination array and of course
if we have that we're also going to need
a destination index so I'm going to come
in and go public int and this is going
to be called destination index and
that's going to change each time we
reach a destination we're going to
increment that up I'm also going to have
a direction the ghost will move in
whenever it hits a point so we're going
to change that constantly and I'm going
to call that move vector and I think
that is it so now what I'm going to do
is go void and awake and I'm going to
set up my rigidbody here right whenever
the script executes so get component and
that's rigidbody 2d and we'll have that
all set up whoops there we go ok and I
don't think at this point I need
anything else with awake we are going to
be using start here so I'm going to go
start and very first thing I want to do
is get the X of the destination
turning-point so I'm a floats X
destination is going to be equal to
destinations and then I will throw my
destination index inside of there and
specifically get the x value so I want
to have the option to either move to the
left or move to the right with the
ghosts whenever they first come on the
screen then what I'm going to do is I'm
going to say if transform position X is
greater than the X destination well in
that situation I want to move my ghost
to the left so I'm going to go and get
velocity and that's going to be equal to
new vector2
and left obviously is negative of 1 0
and then we will multiply that times
speed so we have that set up and then
we're going to do just the opposite for
the other so come in here I'll say else
and paste this inside of here and then
just change this to move it to the right
direction we have that let's come up
here and go file save all and then jump
into unity and run it and you can see
the ghost moves to the left whenever it
comes up so that's good all right so
what is the next thing I'm going to do
well I'm not going to use updates I am
instead going to base everything off of
collisions and reacting to said
collisions so I am going to have on
trigger enter 2d because remember I set
that and this is going to be a Collider
2d and this is going to be the turning
point that we collided with so there's
that guy I'm definitely going to need
that and I'm also going to steal some
code from this pac-man so let's come in
here and specifically what I want to
steal from Miss pac-man is going to be
that thing that I used can I move in
direction or is it sits in here
somewhere
so can I move in direct
and can I move in direction here it is
right here let's just go and copy this
and let's see what I want to do with it
so copy and then we'll jump over into
the ghost all right and I'm going to do
this first ontriggerenter is going to be
where most of the meter this is going to
be at so let's come in here and let's
take a look at how we can change this or
if we need to it all so basically this
is going to get sent the way this is
going to differ is it's going to get
sent a chosen direction and then it's
going to search for that chosen
direction in the array and that is going
to hold references to all the pivot
points so it's going to get this
direction but also what it's going to
get is vector to the point vector that
we hit because this is going to be all
automated
remember with Miss pac-man I could say
that you know my controls on my keyboard
would define the direction miss pac-man
win it here's a ghost have to do all
that on their own
so what else am I going to change here
well I'm also what's the position is
perfectly fine so we'll just keep that
then we have transform position and here
I was looking for our grid and I'm
getting all of the points out of there
but here I don't want Miss pac-man's
position I instead want this point
vectors position so I'm going to go and
change this to points vector X and this
one is going to be the same so points
vex Y ultimately I don't know if I'm
even going to need to convert these to
integers but at the moment I'm going to
keep them that way
then what I want to do is we'll once
again say did I find a point here and
that's going to be good once again I'm
going to get the points that are
associated with our game object down
here I'm also going to get the VEX to
the next point array that's attached to
each one of my points to find out all of
the different directions that I can go
in so with these guys if you don't
remember this whenever each of the
different points on our screen are going
to be able to go to a certain number of
other different points and this is an
array and that's the array that I'm
going to be getting and then vector next
point is literally the translation of
these different points so 33 which is
down here this vector next point is
going to actually be associated with
that and it's going to have a value is a
vector to of 0 negative 1 so because
that's where it is in relation to this
point ok if you don't remember that look
at the previous tutorials alright so we
got that set up anything else that I'm
going to need to change to make this
specific to my ghosts well I'm probably
going to want to come in here and
actually put some debugging information
in here ahead of time because no doubt
I'm probably gonna have some issues so
I'm gonna have to correct them so I'm
going to go checking vex and this is
going to be the direction that I want to
go in and then as I cycle through all of
these different guys I am going to want
to print out what I'm searching for so
this is going to allow me to debug and
find different errors that I might have
in my code somewhere so I'm going to say
I'm now checking and it's going to print
out whatever the vector is that I'm
working with and then we'll have da da
da we're going to cycle through all
those different things and look for the
option that I'm looking for and that's
that so yeah so we had to make a couple
cosmetic changes to can I move in
direction but in general we were able to
keep it just like it is so that's great
ok so now on to this guy this of course
is going to be called every single time
one of our ghosts hits a trigger point
or pivot point or whatever turning
points so what are we going to do inside
here well the very first thing we want
to do is I want to make sure that the
ghosts actually hit a point so I'm going
to say if the thing that I just collided
with game objects has a tag that is
equal to points well then I want to be
able to do some stuff so there we go we
got that out of the way and what am I
going to do well I want to get the
vector my ghost wants to move to some
I'm going to say not move vector is
going to be equal to and I'm going to
call gets new direction which is a
function I'm going to create here in a
second actually I might as well just
create it right now so I'm going to go
to Tran
form you know what I'm going to create
the whole this whole thing and then I'm
going to create get new direction
because now that I'm thinking about it I
think I want the get new direction
function to do a lot of the heavy
lifting and keep this a little bit
lighter so yeah I'm going to create that
in a second then what I want to do is I
want to position the ghost at the point
on the screen remember I'm going to have
to put it in the middle all of our our
game board array everything is based off
of integers because it makes more sense
that way what I mean by that is just
simply this point in the array right
here is going to be equal to nine
thirteen okay but if I want to position
one of these objects inside of the box
it's actually going to be halfway
between say I just clicked on that
pac-man and that is halfway between all
of these different points sake whoops I
am got pac-man in this done city
thirteen point five six point five and
so forth and so on so I have to
accommodate for the fact that I want it
to be in the middle of that point so to
do that what I need to do is just go
transform position and that's going to
be equal to new vector to and int it's
just going to cast that and the thing
that I trend are that I collided with
which is a dot a point obviously and
that's going to be dot X plus 0.5 F and
then I'm going to do the same exact
thing for the Y direction so we'll just
copy that out of there and jump down to
the next line throw that in there change
this to Y and there we are so that's
just going to take the the integer based
position inside of our grid and add
point five to it so that the point or
the object is going to go in the middle
of the screen
that's all that's doing all right so the
next thing I need to do is I need to say
if move vex X is not equal to two what
I'm going to do with this is I'm going
to send back a two if we had some sort
of error from get new direct
so I just know that that's something
that I'll be able to recognize as an
error because everything vector to wise
is negative 1 1 or 0 and in this
situation I'm going to go and set my
velocity equal to the move vex which is
multiplied times my speed which is going
to change the direction of my Ghost
all right so now we got that out of the
way now let's come down here and we'll
do our heavy lifting with the get new
direction so we'll copy that guy and
this is where all of the magic is going
to happen moving the ghosts around and
so forth so this guy is going to return
a vector - just as you saw right there
get new direction it's going to receive
a vector - which is going to be the
point a vector just clouds ride back up
here again see get new direction so I'm
saying is there a point here's my move
vector it's going to call the new
direction which is going to be the
location for the point that that I
collided with and it's going to get a
new direction for my ghost based off of
which point was collided with ok stick
with me here we'll make sense the more
and more I do because I'm gonna have to
do a lot of repeating myself this time
so what do I want to do well the very
first thing I want to do is I want to
get my ghost position minus the
additional point five for the X&amp;amp;Y that I
added before so I'm going to keep this
afloat call this X position is going to
be equal to and convert this to a float
and then what I'm going to do is go
math.floor and convert and to double and
transform position X so that is going to
get me the position for my ghost and
it's going to get rid of that it's going
to round it down that's all it is looks
complicated but it really isn't and then
I'm going to do the same thing for the Y
position and to do change that just
change that to Y alright so we got rid
of the 0.5 on my ghost then I also want
to do the same thing for my pivot points
so I'm just going to come in here
and I will change oh I saved that in
here didn't I
let's go up here and make sure Oh point
vector yeah I got it up here say there's
the point that I'm working with so I
don't need to do this I can just come in
here and go point vex dot x and come
down here and go and do the same thing
points vex dot X and then I'm going to
do the same thing for the Y so all I'm
doing here is getting rid of those point
fives that are attached to both of these
guys so as that which just puts them in
the center of the space on the board
which is different than my grid
everything needs to be normalized here
next thing I want to do I want to get my
destination where I need to go I define
that at the very beginning here so
that's going to be a vector two and
destination is going to be equal to
destinations and destination index is
specifically what I'm looking for then I
want to check to see if the ghost hit a
destination and if it did I want to
increment up to the next destination
that's coming up so I'm going to say if
I'm going to set point of X dot X and I
need to increment this up by one because
there's a discrepancy between the
on-screen grid and the array grid by one
okay that's the only difference
so that's what that's doing right there
just moving it from the bottom left hand
corner by one one up and one down and
this is going to be destination X and
and then I will do again point of X Y
put one in there again is equal to
destination Y so if we hit our
destination the point that we ran into
if it is equal to the point we hit is
equal to the destination we're looking
for well then I'm going to go and get my
destination index and it's going to be
equal to destination index once again if
it's equal to four because I have a
maximum of five indexes so this is zero
one two
three four okay so that's what I'm
checking here ternary operators all this
is well then I'm going to switch it back
to zero and otherwise I'm going to go
and get my destination index and
increment it by one so pretty simple and
because something major is actually
going on here another thing I want to do
is I also want to update my destination
here let's do it right outside of here
and also because I'm doing something
pretty major here which is changing my
destination I am also going to throw one
of these key bugs in here just to make
sure that I can see in the console that
a new destination has been set and I'm
going to put that destination
destinations and throw the index
destinations index inside of there and
that's going to print out on the screen
so that I can see that that has changed
all right good stuff
I knit then need to set it up so that by
remember up here I checked if move X X
is going to be equal to two that that
was a sign that something went wrong so
I want to set that up so that I don't
forget so I'm going to go vector two and
this is going to be the new direction
that my vector or my ghost is going to
be turning to but the default value it
is going to get is exactly what I just
showed you there it's going to be two
zero all right so that's an error if we
get to that point we know something went
wrong but we should never get to that
point now I want to set up a couple
different properties that I'm going to
need here so I'm going to need the
previous direction that my ghost was
moving in because with the way pac-man
is set up they have it set up so that
pac-man will or the ghosts will not go
back to their previous direction so you
know so that they don't you know get in
a situation where they bounce up and
down from point to point to point and
how you get that previous direction the
pac-man was moving in before it hit this
new dot as we go and get the rigidbody
and the velocity and then we normalize
it so normalized so that's
that none of the thing is I want to hold
the opposite of the previous direction
that was traveled so that that's
something that I can very easily get
access to so I'm going to just call this
OPP opposites previous Direction is
equal to previous direction multiplied
times negative one all right so we got
thoughts sets another thing is just to
keep everything really simple
I'm obviously only going to move in the
right left up or down directions so I'm
going to set some custom things here
we're just because I think this will
make the code a little bit more readable
so I'm going to say go right is going to
be new vector2 and that obviously is
going to be one zero and then I'm going
to need four of these guys so I have go
right and I'm going to have go left and
that's going to be negative one and then
I'm going to have go up and that is
going to be a zero one and then I'm
going to have go down which is going to
be zero negative one zero negative one
all right so we have those set just to
make the code a little bit easier to
read that's the only reason those are in
there what else I need well I'm going to
have to get the distance from
destinations and what I'm going to do
here is I'm going to say for example
let's say I have to move in the upper
left-hand corner I want to move closer
or move in the x-direction or left if I
am closer to the X or if I am closer to
in the in regards to the difference
between the position of my ghost and the
destination in the Y Direction well then
I want to move in the Y direction first
I want to give like a bias to it another
thing that I'm trying to do let's move
in here is I want to try to set up my
ghost movement so that my ghost looks
like it's sort of moving erratically so
I want it to sort of weave in between
all of these different things and then
also I wanted to sort of circle around
if at all possible these different areas
so that it covers as much ground
humanly possible some thinking like
something like it does this it might
weave down here go up here try to weave
in these different directions like this
so sort of maybe it will go like this
but instead of going straight up there
it might do a roundabout sort of thing
like this and like that
so that it looks like it is moving
erratically so that is another goal that
I'm going to try to do here with the AI
for this ghost so I'm going to calculate
the diff the difference between the
current position of our ghost and the
ultimate destination so I'm going to
call this destination X distance is
going to be equal to destination X minus
whatever the current position is for
this is the point right x position
there's this guy yeah the point that I
hit with my ghost is what I'm looking
for so whenever I hit a point it's going
to say okay what's closer from this
point to the destination the X direction
or the Y direction and it's going to
move in that direction based off of
whichever is less I'm also going to do
the same thing for the Y obviously so
let's throw Y inside of there and then Y
right here and I'm doing a lot of major
things here so I am going to print out a
lot of debug information so let's go
these guys and let's paste this in here
so what do I got going on here what do I
want to print well right here I did I
changed the position for my ghost or the
direction that the ghost is going in so
I'm going to print that out and then I'm
going to also print out the exposition
so whatever dot I just currently hit
some position and that is expose as you
just saw just a second ago going to be
getting a whole bunch of other different
things let's just print out as much
information as we could possibly need so
let's go I think that's all that will
cover it I also want to get the Y
position for the dot that I just hit I'm
also going to want to get the
destination and that is going to be des
T dot X to the
same thing for the Y position D s to Y
and D est Y and then I'm going to get
the point position so let's go well
let's just change this to point and that
guy is going to be points of X and then
point this is going to be Y point of X
and remember this was what was passed
into our function right up here where is
it it sits right there say point VEX
that's the direction that I want to go
in when I think that's it all right so
now it is time to actually do the logic
so very first thing I need to think
about alright so we are going to the
very first thing we're going to do is
I'm going to move in the upper left hand
corner this is the logic I'm trying to
figure out
so what could go wrong all right so
we're going and let's say we're going
this direction we come down here we hit
this one thing that I definitely want to
do is I want to handle for it hitting
the portal going down this direction for
what I'm doing right now I want to avoid
the portals with the ghosts because it
will go I'm trying to go to the upper
left hand corner it's very very possible
it could come down here hit this go
through the portal come out over here
and create like a horrible loop so want
to handle that then I'm going to also
handle for if I'm closer to the X or the
Y and so let's say I'm closer to the x
position in that situation I want to
tell my ghost okay try going to the left
first then if you can't go to the left
then go up and vice-versa if I'm closer
to you know on the Y direction so let's
go and let's create that so first I'm
going to do is I'm going to let's go and
put a comment in here also because this
could become unwieldy so we'll go upper
left that is the goal of what we're
working on currently so I'm going to say
if my destination Y distance is greater
than 0 and my destination X distance is
less than 0 well then I want to do
something
all this is saying right here is this is
saying I want to go in the upper
left-hand corner that's what I want I
want to find out if I'm checking right
here I'm saying okay where is where am I
currently at with my ghost and I'm
subtracting that from my destination
which in this situation is going to be
the upper left-hand corner now if the
destination is less than in the water in
the Y Direction let's or the x-direction
let's look at that first
that means it's to the left okay so if
the destination X Direction comes back
as this that means that this is moving
to the left
if in the Y Direction destination Y is
greater than if we take the destination
minus the current position of the ghost
and it comes back that that is greater
than zero that means that that is going
to be in the upper part of our game all
right
let me come in here and just to verify
this all right so here is our ghost
position its current position is 14 19
and if I want to move into this
direction up here remember 14 19 well
here you can see X is 1 so if we go and
get 1 minus 14 well guess what that's
going to be negative so that means if I
want to go in that direction I'm going
to have to check that the destination
distance on the x axis is negative and
then vice versa also for y okay so
that's 29 and you can see if I can click
on the ghost here it is 19 okay so falou
that makes sense all right so that is
how we are going to decide that we are
moving in the upper left-hand corner
then remember I wanted to also handle if
I hit the portal
to ignore it because that would cause
all kinds of problems so I'm going to
say points vex X is equal to 5 and
points X Y is equal to 15 in that
situation I'm going to check if I can
move and I move in direction and I'm
going to say go up so can I go up so
instead of going left I want to make
sure if I ever hit that portal
I always go up and then I'm going to
pass in my point vector then I'm going
to say and go up is not equal to
whatever the opposite direction I was
that I was going previously because
remember inside a pacman one of the
rules is you should never backtrack so
that's what I'm doing there all right so
if I can go up I'm going to go up and I
am going to also verify that this I'm
not repeating you know going in the
opposite direction or backtracking all
right so I got that set in that
situation I'm then going to say new
directory is going to be equal to our
new directions going to be equal to go
up and that is going to be ultimately
returned
whenever the function is all done with
so we can come in here and look at that
so that is going to be right here so
right at the very end of this function
I'm going to say return and new
direction is going to be returned so
good stuff
then what I'm going to do is I am going
to pick up or left depending on whether
I am closest to the destination X or
destination Y so I'm going to say else
if and here I'm going to go destination
Y distance is greater than destination X
distance so if I am closer in regards to
the X in that situation I'm going to
want to move to the left so that I can
get there quicker so I'm going to say if
can I move in direction and of course
I'm going to pass in go left and my
point back and go left is not equal to
the opposite of whatever my previous
direction I was going in and it's
capitalized so change that to capital C
and that will go away well in that
situation I'm then going to set my new
direction to go left so pretty simple so
it started off really complicated but
now it's really straighten itself up and
getting a lot easier and you're going to
be doing a lot of copying and pasting
from this point on so we're going to say
else paste that in there so for first I
wanted to do
go on the left direction can't do that
well I want to ultimately go in the
upper left-hand corner so I'm going to
change this to up and I'm going to
change this to up and then change this
top all right and then what I'm going to
do is I'm going to say if I can't do any
of those things well then I want to I
guess go right I don't know I'm just
making this up
doesn't matter what it really is so
let's say go right and if I can't go in
that direction I'm going to say else the
only other option I have in this
situation is to go down someone changes
to go down and this is probably not the
most optimized way of doing this but I'm
just sort of logically going through and
solving this and not worrying all too
much about everything being optimized at
this point like that up make sure you
change this to go right go right go
right and this is up that's up that's up
this is right and then this is going to
be down and this is go down and this is
go down and then ultimately I don't know
if I'm going to need this or not but I'm
going to throw it in here just in case I
am going to say as a last ditch you know
way of solving this if can I move and
I'm going to throw the opposite
direction thing inside here so I'm going
to say opposites previous direction if
that is the only option well then I
guess I'll do that so and then I'll just
get rid of this guy right here
so I once again I don't think there's
going to be any situation where I'll
have to do that but I'm gonna do it just
for the heck of it so in that situation
opposite previous direction oops
direction like that alright so we got
that set up then what do we have
basically we are going to have this guy
over and over and over again forever so
I'm going to go else if and I'm just
going to copy this copy this whole
entire thing and then I'm going to paste
in elsif and I'm going to come back up
to the top here and I'm going to say
this is going to be the opposite of what
it was previously and then I just need
to change these guys so in this
situation it is easier to go up than it
is to go left so I'm going to change
this to up and change this to up and
change this to up and then we will
change this to left as a second option
I can't make a upwards turn left and go
left and then we can leave this go right
and go down and go in the previous
direction exactly like that
and if we save that we should actually
be able to run it and see it work see if
it works and it looks like it's working
pretty good got it hit a situation where
where it went off of the rails why did
it do that um so it's moving along here
perfectly fun deducted uh and then it
goes off the rails I think oh I know why
I think I figured out why um there is a
potential in which since we're basing
everything off of going left or going or
going upwards if the you are on the path
you know like you are if your goal is to
go to position one inside of your grid
if you're already there then you are
going to have the potential going left
so what I'm going to do is create
another script that is going to handle a
situation in which you are already at
your ultimate goal on the Y as well as
the x axis okay so I shrunk that text
down a little bit here just so I can see
this a little bit better and now I'm
going to set up the part that is going
to test in situations in which the Y's
are going to be equal and I want to move
to the right so here what I'm going to
do is I'm going to say if and cast to an
integer and we will do destination dot Y
is equal to int and the Y position and
then I'm just going to paste in all of
what I'd done before so we'll have if
can move in direction and specifically I
want to go right so I'm going to go
change that to go right and go right and
go right and what else can we do here
let's give me an error because this
extra curly bracket so let's get rid of
that
and this one as well okay so let's just
get those out of there and come back
inside of here again go right go right
and then we want to go up because
remember this is going to move us in the
upper left-hand corner so we'll say go
up and go up and then we will do go down
and go down and go down then I'm going
to put go left inside of here and go
left because remember this has to also
work on whenever we are on the right
side of the screen and I'm going to chop
this guy off of here I really don't
think I need this but I put it in there
you know like I said I'm writing this
I'm you know we're testing it so we're
testing to see that everything works and
I could also come in here and just do a
copy of this and do another one so we'll
go coffee and for the next one what this
is going to do is this is going to test
for a situation in which the Y's are
equal and I want to go to the left or
actually I there's something I need to
make a change to this so I I said the
Y's are equal and I want to go to the
right so I'm also going to have to come
in here and go distance x distance is
greater than 0 then that'll work ok so
that's good and let's just go and copy
this whole entire line right here so
just copy I'm down here and we'll
replace this guy right here and then all
we need to do is change this to less now
then in this situation we will change
this to left because we're going to move
to the left
change this to lift and change this to
left leave the rest of these the same
and then change this to right as the
last option like I said we're not going
to get here and I'll probably get rid of
this right option but for right now I'm
just going to leave it there and then
I'm going to do exactly the same thing
in the situation in which the X's are
equal and I want to go up so let's just
go and get those out of the way so let's
go and copy this paste that inside of
there and this is just going to be
changed to an X and this is going to be
changed to
X and here we're going to go distance in
for y and change this to greater than
and then what did we say we want to do
we X's are equal and I want to go up so
I'm going to change this to go up and
change this to go up then we're going to
have right and left so this will go
right and go right and then this will be
left right yeah or no yeah do left and
go left and go left and then finally go
down which is going to be the last thing
I want to do my main goal is to go up
well then I don't want this here so get
down and go down and then we will do it
or we will set it up in the situation
which the x's are equal and i want to go
down so pretty simple just copy that
make another one of those change this to
less than and i want to go down instead
of going up so i'm gonna sit down and
down and down and then this will be the
downs will be changed ups okay so good
stuff here I think I'm going down the
right path and like I said I wouldn't
even have uploaded this video but if
this isn't the right thing so alright so
we got those all out of the way so let's
save it and test it and here goes the
ghost and it's going up and left and
whoops went off again hmm why is it
doing that and after looking into it I
see my hair right here see it's saying
go left whenever it supposed to be go up
so it's just going to fix that and then
verify that all the rest of these are
okay so there's left left left and down
down and down and we'll save it and test
it again and there goes our ghost and
there goes and left and up and hits the
best nation point and then because it
doesn't have anywhere else to go they
wants to go right and in the upper right
hand corner doesn't have that so that's
the reason why it goes off the screen so
now we're going to create all those
other guys which is actually quite easy
I actually decided to go in here and do
it ahead of time so you didn't have to
watch me basically do the same thing
over and over again like I'd say the
codes all in the description
heavily commented I'm going to run
through it real quick so if I went to
check it if I was in the upper right
what I'm doing here is verifying that
the y-direction is greater than zero and
also that the X since it's in the upper
right-hand corner and I'm starting in
the middle that's going to make sense
and then of course I am going to want to
move to the right and also upwards first
and then I'll check all the other
different options that we have there and
in the situation in which the Y distance
is less than the X distance then I'm
going to move more towards up and then
to the right and then left and down of
course and then we also verify if I want
to move my ghost to the lower right you
can see here we're verifying that with
this line of code right there and then
of course I want to move to the lower
right so the very first thing I'm going
to do is try to go to the right if I can
if I can't do that then I want to go
down and then I want to go left or right
that doesn't matter at all
and then once again I do the same thing
if the distance is to the Y point I'm
aiming for is less than once again we're
going to go down and to the right and
all this flipping here is the down and
right and then this one up here says
right and down see right and down and
that's just so that I have were kind of
like a circular motion like I said
whenever you see the finished ghost it's
all going to make sense and then finally
a for the lower left-hand corner I am
checking right here that the Y and the X
are both less than my ghost position
once again ghost position is in the
middle of the screen so I'm going to the
lower left that means that x and y will
be both be less than the ghost position
and then I have to decide if I want to
go to the left or go down whichever is
most important and then once again slip
those and go down and left and you
already saw all of the rest of the stuff
this is the part where I check if Y's
are equal and I want to go right so I'm
going to save this and we're going to
run it you're going to see the finished
code here is our ghost and we're going
to start running this guy test him out
that one thing I don't like is the dot
was on his head or the
dots are on top of the ghosts I'm gonna
go close this here's my red ghost I am
going do I have a ghost tag I think I do
no I don't alright let's add a ghost tag
click on the plus sign over here and
change this to ghost and then the
sorting layers we have miss pac-man
right here and we're going to add a new
one inside of here and move this up here
let's have the big miss pac-man go on
top of the ghost but the ghost go on top
of everything else change that to ghost
and then get our ghost right here and
give it a name Oh ghost make sure you
select the ghost and sorting layer and
change that to ghost like that
and then save everything and run it and
here are the ghosts and they are on top
of the dots now just like I want them to
be and we can watch it as it circles
around see it sort of looks like it's
just doing random crazy stuff and it's
circling around and that's because of
the circular type of path that I just
find that I wanted these guys to follow
and you can see the ghost going pretty
good and here we're going down to the
bottom right hand corner and it gets
there and you can see it's staying
inside of the maze which is awesome and
then it's going to go down to the bottom
left hand corner and then back up to
that midpoint and of course you could
have its circle around anymore as much
as you want and then go back up to the
upper left hand corner alright so
everything works exactly the way that I
wanted it to work hopefully you guys
learned a lot from that this game
mechanic can definitely be used in
numerous different games and like always
please leave your questions and comments
below otherwise till next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>