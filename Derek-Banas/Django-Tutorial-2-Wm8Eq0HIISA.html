<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Django Tutorial 2 | Coder Coacher - Coaching Coders</title><meta content="Django Tutorial 2 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Derek-Banas/">Derek Banas</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Django Tutorial 2</b></h2><h5 class="post__date">2016-11-02</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Wm8Eq0HIISA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">well hello internet and welcome to part
2 of my django video tutorial in this
part of the tutorial we're going to talk
about MVC or Model View controller I'm
going to show you how to connect URLs to
functions we're going to play around in
the settings area for Django we're going
to setup SQL light and then we're going
to move on to the example pols example
that is on the Django website and a
whole bunch more I'm going to be using
PyCharm in this tutorial and if you
don't know how to set that up I have a
link in the tutorial in my learning to
program series at the 37 minute mark I
show you how to setup PyCharm and of
course that link is in the description
as well as all of the code as well as a
cheat sheet and a transcript of this
entire video is also in the description
so I have a lot to do so let's get into
it alright after telling you so many
people to do so many different things I
probably lost half my viewership but
whatever will continue alright so
everything here is going to work exactly
the same on Windows as well as on
Macintosh right here I have pi charm
over here I have Google Chrome you can
use any browser you want and down here I
have a terminal and of course on windows
that would be your command prompt so the
very first thing I'm going to do and
it's very important to put this in the
right place is I am going to create our
polls app that we're going to actually
be doing here in a little bit but I want
to get this out of the way so you're
going to want to make sure we're in the
last tutorial we created sample site so
you want to make sure that you are going
to create this where manage dot py is
located as well as sample site and then
you are either going to type in Python 3
more than likely if you're on a Mac or
just Python if you're on Windows and
then you're going to call manage py
start app and polls and hit enter and
it'll create all that stuff for you if
you had LS now you see polls here and if
you change to the polls directory and
you would do dir if you're on Windows
instead of LS and there you can see
everything's all set up you're also
going to see that hopefully this has
been updated yes it has it has been
updated inside of pycharm so here are
going to be all the files we are going
to be playing around with now the very
first thing well I probably talked about
viewcontroller if you're here you've
probably heard of it already but
basically the model is going to act as
the interface to your data the view is
going to be the interface that the users
see and the controller is going to pass
information between both of them and I'm
going to show you a whole bunch of
examples of how that works and let's
start off your simple and then I'll get
into more complicated things as the
tutorial continues now the very first
thing I'm going to do and make sure you
open this in the right place you're
going to go to sample site and you're
going to go a new file and you're going
to go views dot py and you're going to
create that file this isn't a normal way
we work with Django but I'm going to do
it this way just to try to simplify the
whole idea of Model View controller and
how it works out for us so basically
inside of here I am going to start off
by going from Django and I'm sorry if
some people think I'm pronouncing Django
wrong I think it's my accent its Django
but sometimes sort of sounds weird
because I have a strange accent so HDB
response and there we are and we're
going to be using this guy to pass
information back to our view so this is
going to be a way of responding whenever
a function is called this is how we're
going to pass information back to the
view so that it is displayed and I just
deleted it alright so there we are then
I am going to do something with random
numbers here in a little bit so I'm
going to import the random module as
well and then I'm going to create our
very first view function which is going
to receive information whenever it is
called and I am going to start off
simple here and I'm going to create
hello world and it is going to get a
request from our view and then it is
going to return a response using HTTP
response so I'm just going to keep this
really simple and go HTTP response like
that and I'm going to then say hello
world and that is all that I'm going to
need to do for our view function that we
have right here so I'm going to save
that guy and then I'm going to open up
URLs dot py again in the sample site
area so just open this guy up and
there's
whole bunch of mess inside here but I'll
explain exactly what's going on here as
we continue and it's going to import
some different things here basically if
you want to know what these imports do
this very first one meaning URL is going
to match the URL in the browser to a
module in your de Django project and
then admin is going to load URLs for our
administration site we'll get more into
that in the next part of the tutorial I
am then going to have to load in my
functions that I created I created the
HelloWorld function here first so I'm
just going to go sample site and views
and then import and type in hello world
and that is the guy that we just created
here a moment ago this guy over here
that's a little world that's what I'm
referencing then we get down into this
guy right here now this is basically
going to list all of the URLs that we
want to tie to specific functions so
what I'm going to do here first is add
the directory in the URL that's going to
be tied to my HelloWorld function and if
you're wondering what this guy means
basically whenever we have an R here
this is a regular expression what we're
creating here and if you haven't watched
that might learn the program series I
talked about regular expressions but I'm
going to cover it here as well the are
basically means that we want to treat
this like a raw string that is going to
allow us to include back slashes so that
we won't have any issues with that and
then inside of these quotes that we have
right here we're going to define a
regular expression where this caret
symbol right here is going to represent
the beginning of the string and then
after that we have admin that's going to
reference the administration part of
Django that's built directly inside of
Django and then sometimes you'll also
see a dollar sign right there the dollar
sign represents the end of the string so
basically what we're trying to match is
the at the end of localhost colon 8080
min right there and if it meant is
called then we are going to call for the
administration version of Django to be
loaded into the browser but not that's a
little bit complicated so what I'm going
to instead do is
just load hello world in here so you can
see a more simplistic example so I'm
going to say URL R this is going to be a
raw string once again so we don't have
to worry about back slashes and forward
slashes and all that stuff then we're
going to put a caret symbol which is
going to represent the beginning of the
directory we're calling up inside of our
browser then we're going to need to
scroll for hello world and I'm just
going to go a little world like that
then we'll have a forward slash and then
we'll have the dollar sign which ends
the string and basically what we're
going to say now is anytime somebody
goes to this specific directory inside
of our localhost that we want to call
for our hello world function to be
called and of course that is going to
return the text that says hello world so
pretty simple stuff and that's all that
we need to do with that guy so we can
save that now we can jump back over here
and let's make sure we are in the
correct directory we want to be in the
directory that has managed py inside of
it and we want to run our server this
time so once again on Mac and type
Python 3 more than likely and if you are
on a Windows based machine you're
probably going to just type Python and
then we're going to say run server and
we will run that and there we go and
then we'll just come over here to a
localhost and if we run that you're
going to see that that is giving us an
error message right now let's go inside
of here instead and we'll type in hello
world like that and run it and you can
see hello world pops up inside of there
alright so that is a really really
simple example and we'll get into more
complicated things here as we continue
so let's say that we want to instead
interact a little bit more with the user
we're going to create another function
inside of here and basically what this
is going to do well why don't we go and
create our root part of our site as well
so we don't get that 404 error anymore
so we're going to say root page and
we'll say request inside of there just
like we did previously and here we are
just going to return type it up to does
same exact thing we're going to Reince
return some text inside of here and root
home page and save that and then jump
over into our URL section and tie in a
new URL so we'll just go
: and carrot symbol for the beginning of
that guy and here we're just going to
basically say that this is going to be
nothing so we're just going to say that
the string basically doesn't exist
there's nothing there and here we will
say that we want to call our root page
function whenever that is set up and of
course we're going to have to you can
see over here it's and root page is not
defined well we just come over here and
go root page like that and now
everything's wonderful and if we now
come in here and we change our URL to
just basic localhost colon 8080 opps up
okay so that's how simple that is so
let's create some more alright so now
we're going to do something like I said
a little bit more complicated we're
going to need to receive a number passed
into our URL and then we're going to
return a random number so we're going to
say random number it's going to be the
name of this and we have to put the
request in there just like always and
we're also going to say that we're going
to receive a max random number that the
user once sent to us or by default we're
going to use 100 now what I want to do
is calculate a random number between 0
and the number passed or if they didn't
pass anything well then in that
situation I want to instead use the 100
so to do generate random function we go
random and random range and zero and I
need to convert that from a string into
a integer and then let's go and place
our string and the random number inside
of a message that we will then send back
to the browser window so I'm just going
to give a message and I'll say random
number between 0 and we will go and get
our string that was passed in as the
maximum and then I will output on the
screen a random number and after that
put our percent sign and we will get our
different values so we'll go max random
as well as random number a random numb
and let's change this to random not as
well so we don't have confusion about
the name of the function and
other thing like that okay and then we
would just say return once again HTTP
response and here we will send back our
message now what this is going to allow
us to do now say that we'll first have
to jump into URLs once again and we'll
have to create a new one here make sure
you put that little comments out of
there and you might we'll put the column
inside of there right there as well
and now what we're going to do is inside
of this guy we're going to say random
and we're going to put another forward
slash and then inside of this we're
going to expect the user to send us a
decimal or a digit that's going to
represent the maximum value and if you
want to pass a value to our random
function this guy over here we want max
random what we're going to do is just
put it in between parentheses like that
and that will pass that digit
automatically for us that's pretty cool
I'll put another forward slash inside of
there and then we will call our actual
function that we use will say random
number that is the guy we have and of
course we have to come up here otherwise
it's going to give us an error and we'll
say random number to pull that in from
our views directory and if we save that
and we come over here go down here make
sure we got random all right so that's
what we want to do and here we will
start off saying random and then we'll
say something like 1,000 hit enter and
you can see that it generated a random
number between 0 and 1000 so we know all
that went through and it created it all
right so that's one way we can do
something a little bit more interactive
inside of here so pretty cool stuff and
now we'll jump over into our settings
folder which is right here so let's open
up settings and we'll talk about some
stuff here there's a whole bunch of
different things we have right here but
I'm going to come down here to where we
have installed apps now this guy right
here is going to represent the Django
admin system which we'll get more into
that later and we'll get into all these
things a detail later I'm just going to
briefly cover them right here this is
the authentication system this guy is
going to be a framework for content
types once again more into that later
this is going to cut this is our session
framework more later this is our message
framework and this is a reference to
static files that we have inside of our
application and then the nice thing I
want to do we're going to come back to
settings here later on we set up the
pols app but I want to come down here
where we have our time zone and I want
to set that up now if you want to find
out what your time zone is you can go to
Wikipedia or wiki list of TZ database
time zones and you can find this link in
the description all right and we're
going to come here and I'm going to look
for my specific time zone just to keep
this simple let's just go New York and
America and New York pops up right there
and of course you would select whatever
you wanted to use and copy that guy and
then come down here in the time zone
area and paste that inside of there and
then the last thing I want to do is set
up the path for my static files and to
do that I'm going to say static
underscore route is equal to and
everybody should do the same thing here
that I'm doing right now because this is
how we're going to set up our pull app
and other things we're going to do later
and we're going to say join and base
directory and static so that's all we're
going to do with settings for now but
we're going to get back into that here
very soon and if you didn't see it when
because I scrolled pause the screen
there it is right there that's exactly
what you're going to type in and now
we're going to go in and start creating
views for our poll application and to do
that we're going to go into the polls
directory make sure you're in right
directory and specifically you're going
to look for views there it is we don't
have to create it this time it was
created for us and we are going to need
to make HTTP responses so let's just
copy this guy and we will paste this
directly inside of here and then we're
going to define the index for our poll
so we're going to do it in exactly the
same way we did all the other stuff will
say index and say request and colon and
return and HTTP response and we'll keep
it very simple we'll just say you are in
the polls index and remember we created
the polls application before it's very
important to understand that you can
have multiple different apps inside of
each of your projects so this is just
one of what could be many different apps
so now that we have that set up now we
have to jump over and attach the view to
our URL and we're going to do that over
in the polls URLs directory which is not
here so we're going to have to create it
for ourself new file and we'll call this
URLs dot py and ok and there that guy is
and this is going to be very similar to
our other ones so we're going to copy
some stuff out of this not going to have
an in Min section so we don't need to
worry about that so let's paste this
inside of there we're then going to
import our views from the directory that
we're currently in and that's how we do
that and I will add a reference to the
view and assign it to the route URL for
our polls so they might as well just
come over here and get this guy whoops
wrong one again there we are grab this
guy right here and we'll just copy that
right there jump back over here paste
that inside of there and down here and
then inside of here we can go and design
our root directory
so we'll just go like this caret and
dollar sign and then change this to
views index and that name is going to be
index so we just made our own views and
URLs part for our web application now
all we have to do is point the root URL
file to our polls application and to do
that we're going to go into the sample
site URLs py file and we're going to
import a new module inside of here
that's going to allow us to reference
the URL files that are in our polls
application
so we'll say from Django fig URLs import
include and then down inside of here if
we want to reference that we will say
URL once again we are referencing the
root of our polls application here raw
text file caret symbol
polls forward slash and then here we can
use include to grab that specific URL
we'll say include polls URLs put that
comment side of there and then we just
need to test - by running the server to
see if that was all set up
so now we'll come over here to localhost
8000
up no I didn't you're in the polls index
alright so that was how we were able to
pull that outside polls application
directly inside of our main project now
we want to jump back into settings and
we'll come up here because we have a new
installed application and that is going
to be our polls application so we're
going to say polls apps polls config and
now we need to come down here and set up
our database and then after that we will
create our model for our database and
we're going to be using the default
SQLite database like it said previous in
the last tutorial it's very easy to
setup any database using Django and
basically to use those other different
databases all you're going to need to do
is change this line right here and I'll
show you the different ones so it's just
going to be back ends and if you want to
use MySQL we're going to type minus Q
all inside of there and I'll get into
this later and we can have Postgres and
then also there is an oracle option okay
but we're going to be using SQL Lite
because that is what we use by default
and there's no reason to get anything
complicated here in the beginning the
only thing is whenever you use those
other different databases you're more
than likely also going to have to
provide a user password and host like I
said in further tutorials I'll get into
that in detail so now I'm going to jump
over into models py once again this is
in the polls directory and I'm going to
follow the polls example that is
provided on the Django site because I
think it's particularly pretty good and
then as that Sherrill continues we will
create some other ones so we'll go in
here and we're going to need date/time
because we're going to be playing around
with some different things with that
module and we're also going to be
messing around with timezone
Chango utils import time zone and now
we're going to create our model now each
model is a class with class variables
that are going to represent fields in
your database and what we're going to do
here is set the column names and data
types and then allow the database to
create the tables afterwards so what
we're going to do is we're going to have
a question as well as choices that are
going to be tied into it and you're
going to have to go models dot model and
then we can define a database column so
we're going to say that we're going to
have question text be one of these guys
inside of this table and then we'll say
models and we will define that the data
type is going to be a character field
make sure you put a dot in between there
like that and we're also going to define
the max length for this character field
to be 200 in length we're also going to
define a publication date inside of here
for when this question was created and
we're mainly doing this just so we have
an excuse to play around with our
database and we can also come in here
and as an option pass text in that's
going to be more human readable so and
we'll do some more stuff about as well
so we'll say a date published is going
to pop up for the question
a little bit more information about
exactly what this is and then we will
come down and also create another one
for choice
so these going to be the different
choices as answers for our questions so
we'll say models model say that we want
to define that each choice is going to
be related to a single question
so we'll say question equal to models
foreign key question and then on delete
equal to models cascade and then we are
also going to come in here and define
text for our choice so choice text equal
to models dot and this is going to be a
character field as well
and
of the max length be equal to 200 as
well and then we're going to also
provide for an option to vote for which
is the most popular choice from the
choices for each question and this is
going to be an integer field and it's
going to start off with a default value
of 0 and now after we have defined the
model we need to include the app in our
project of course and we did that inside
of settings so where would you go we
were up here settings there we are so
there is where we included that and now
what we can do is come over and notify
Django that we have updated our model so
to do that we're going to stop our
server and then we'll go python 3 or
python if you're on Windows managed py
make migrations polls and hit enter and
there we go you can see that it created
the model for the choice as well as the
questions and you can also come in and
say python 3 managed py migrate SQL
migrate polls 0 0 0 1 and hit enter and
what this is going to do is show you the
SQL that will be used to create your
tables and you can look at that in
detail if you'd like and then after we
have that all set up we will go Python 3
manage py migrate to create our database
there you can see all those things came
back is ok so now we know that our
database has been created and there if
we zoom in you can see everything that
is all listed out there and everything
that all was all set up now what we're
going to do is add database or add data
to our database using the Python shell
so to do so you're going to come in and
go Python 3 manage py and shell and
there we are in the shell what we want
to do is import our modules or our
models inside of here so from pols dot
models import question as well as choice
and we can display all of the questions
that we have defined so far which is
none but whatever we're just going to do
it so we'll say question objects all say
it's empty so let's go and create a
question now remember we
we're messing around with time zones
inside of our database so we need to
pull in that guy so we'll say Django
utils import time zone and then we'll
create a question so we'll say a queue
question we have to define question text
which is something we defined in our
model and we'll go
what's new is question we want to ask
and we'll also set the publication date
equal to whatever the current time is
timezone now and if we want to save
question to the database we just go
question save and there that's been
saved we can then get the questions ID
which is going to be equal to one
because that's the only one that we have
created so far we can go and get the
questions text by going dot and question
text just as we defined it so question
text and what's new pops up there we can
also get the publication date so pub
date and there you can see that's
whenever I created this right here and
we could also come in and change the
question just go do dot question text is
equal to and we'll say what's up and
then anytime you make any changes to
anything you have to save it and now if
we go in here and go question object all
whoops let's say objects all you can see
right there that that question comes
back however this is not a whole lot of
information and if we would like to
actually show the actual question inside
here we're going to have to make some
changes inside of our model so let's
shrink that guy down right there and
we'll jump over into models this guy
right here and specifically come down
inside of here and we are going to
return some text anytime that question
is called and one way to do that with an
object is by using the string function
it define two underscores string two
underscores and then we'll have self
inside of there and then here what we'll
do is we'll say any time this is called
we want to send back
texts so that we will actually see the
real question displayed on the screen
and while we're inside of here won't we
go and create a custom method for
returning whether the question was
published recently or not so to do that
we can say something like was published
recently so and here what we're going to
do is say return and get our publication
date that we defined whenever this was
created I'll say greater than or equal
to time zone now and we'll pick an
arbitrary length date time Delta day is
equal to 1 all right like I said this is
from the official Django tutorial so
this is just something they wanted to do
it's just an arbitrary way of calling
this function we know it's going to be
called likewise we can come down here
and do the same things with our choices
so throw that inside of there and
instead this is going to be choice text
and you'll see here in a moment how
that's going to change and we'll save
this and then we'll jump over here and
we will test all the changes we made
here we are and like I said if you want
to get inside of this guy whoops what
did it do if you want to open this up
this is the shell we're going to tell
you Python 3 manage py followed by shell
but don't do that because we're inside
of the shell right now and we already
imported the questions and the choices
and if we want to get a more detailed
list of our questions if this works
otherwise I might have to restart the
shell so we'll say question objects all
up didn't work so what we're going to do
is we're going to jump out of the shell
and we'll say quit and then we're going
to jump back inside of the shell and
then that should update for us to back
up inside of here and let's go and
import our question and choices so from
polls models import question and choice
and everything should be updated now so
whenever I say question it should
actually give me back the actual
question inside of here so question
objects all and you can see that it did
what's up different wondering where that
came from and close its down we did that
right here say right here question text
is popping back so that's how we did
that inside of our model stop py file
let's go in here and do some more
advanced
let's say we want to get the question
with a matching ID we're going to do the
same type of thing we're just say
objects except this time we will say
filter and we'll say that we want ID 1
and if we do that you can see that pops
up there we can get the question that
starts with a specific string to do that
we'll say a question objects filter will
question underscore text and then we're
going to put two underscores to separate
the relationships between this different
type of information so we'll say we're
looking for question text that starts
with the word what of course we only
have one question inside of there you
can see the what's up comes up there we
can get the questions published year
first before we do that we're going to
have to come in and go from Jango dot
utils and then import timezone we can
calculate our current year or get our
current year by calling timezone dot now
and then specifically year after that
and now we'll be able to ask for a
question that it was published in the
current year again we're going to use
objects again this time we'll use get it
will say published date and specifically
we want the year so we're going to put
two underscores there and then type in
year and we'll see if that is equal to
our current year that we just created
for ourselves and you can see that ID
indeed was now what would happen if you
come in here and try to call for
something doesn't exist again we're
going to say question objects dot get
and you look for a question that has the
IDF - there's only one in there look you
could say that's kind of a mess you get
an exception raised any time you do that
we'll get more into how to fix that
stuff later on we can also do a search
for primary keys so we can say question
dot objects dot get and look for primary
key equal to one there you see what's up
comes back again we can also call for
our special function was the was it
published recently to do so that is a
question is equal to
and question the objects dot gets target
the primary key one and then after that
we can call the function that's inside
of it so it was published recently and
you can see that comes back is true we
can also so choices that have been tied
to our question it's a question choice
set and call for all the choices you can
see it comes back as empty so let's come
in here and add some choices so we could
say choice sets and create a choice and
create a choice you have to define
choice text so here we're going to say
not much is going to be one of those
choices and vote has a default value of
or votes as a default value zero but
we're just going to put zero inside of
here just so we know we're going to do
the same sort of thing here for this
next one we will change this to the sky
and leave votes a zero again and then
we'll also come in here and we'll say
the clouds and there that is alright so
now we have some choices tied to our
questions and now we can come in once
again and display all of our choices
here do I have that yep choice set all
and you can see there are all our
choices we could also come in and
display the number of choices by choice
sets and then we're going to call count
on that we can see we have three choices
tied to that one question and let's go
and show you another example we can also
be able to show choices for questions
published this year and again we're
going to use the double underscore to
separate relationships so we'll say a
choice objects filter again we're
looking for question and we're going to
look for publication date and
specifically we are interested in the
year equal to current year and there you
can see all those choices come back at
Gann and we also come in and delete a
choice so we'll go cue choice set filter
and we'll look for choice text that is
going to start with equal to and then
we'll say the clouds that is an option
right
clouds yes so now we grab that specific
choice and then go see dot delete and
that's going to delete that choice
alright so there you go guys in the next
part of the tutorial I'm going to
continue adding on to the poles example
from the Django site we're going to get
into a lot more detail and we're going
to bounce back and forth and like always
please leave your questions and comments
below otherwise till next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>