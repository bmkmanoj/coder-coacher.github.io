<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Android Development Tutorial 8 | Coder Coacher - Coaching Coders</title><meta content="Android Development Tutorial 8 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Derek-Banas/">Derek Banas</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Android Development Tutorial 8</b></h2><h5 class="post__date">2013-05-19</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/facoiyC7pC8" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">well hello internet and welcome to part
8 of my android development tutorial if
you haven't seen the previous part 6 &amp;amp; 7
there's a link in the upper right-hand
corner so you can do so otherwise you
may be quite confused and in this part
of the tutorial I'm going to continue
working on my XML parsing multiple
activities stock quote picker and I'm
going to focus in on showing you how to
parse XML the traditional way using the
Dom in the next part of the tutorial I'm
going to show you how to do the same
exact thing using XML pull parser so I
have a lot to do so let's get into it
okay so if you don't remember previously
I'm going to be pulling all of this
information from a Yahoo web service and
it's available at developer yeah uh com
/y QL forward slash console and
basically what you need to do to get
this stock information and there's a ton
of other information you can get is to
go to this website and click on show
community tables first and then what
we're going to do is cycle through all
of these different sources that are
available to us until we find Yahoo so
this is very useful in doing just about
anything you'd ever want to do with a
web service I click on Yahoo and then
I'm going to come down through here
until I find quote click on that back up
here come over here click on Diagnostics
shut that off and let's just get
information on one stock being Microsoft
got that hit test and this is going to
be all of the information that I'm going
to want to pull from this web service
and I'm specifically going to come in
here and get change days lo days high
your low your high name of course last
trade price only and then finally days
range so what I'm going to need to do is
to bounce back over into eclipse and the
first thing I'm going to do is just to
get this out of the way I'm going to
come in here and this is where all of
our data for our stocks is going to be
saved so I'm going to for all those
different things I pointed out go day is
low and give it an empty shell and I'm
going to need seven of these guys and
we're also going to have days high of
course I'm just copying everything from
there your low your high and all the
code is available in the link in
description and the whole entire package
is available there as well name last
tray
price only change and I forgot one we're
also gonna have days range so those are
all gonna be saved inside of there now
instead of going in here and creating
constructors I'm just gonna right click
inside of here and come down here where
it says source come over here and then
go generate getters and setters just
click on that then this is gonna open
and I'm gonna select all these different
guys here come down inside of here click
OK and those are all my getters and
setters all set up for me and then I'm
also going to create a constructor in
the same way come down here go source
and then generate constructor using
fields and then just make sure all these
guys are selected come out of there and
hit OK there's our constructor and there
are all of our different getters and our
setters so that is all we're gonna need
to do with that actually we're not even
use the setters but I'm just gonna leave
them in there anyway and we're going to
save that inside of stock info dot java
and of course stock info Java is in the
source folder and that is all we're
gonna have to do with that so we can
just close it and file save it now
rather than forcing you to go through
and come in here and Creole these text
view areas which is all they are I'm
just going to select one right here come
over here because I've shown you how to
set up these layouts numerous different
times you can see your low text view I
just went ahead and created all these
ahead of time and basically what we're
going to do is we are just going to
output the information that we parse
from that XML web service and stick it
next to all of these text views and
everything is very very very simple I'll
just bounce down here for a second into
the XML file itself and you can see I
just have a whole bunch of table rows
match parent just like I did before for
all the other table rows inside of the
text view area here we have the name of
the stock table row again match parent
come down here to make sure that it
fills up all the space that I wanted to
whenever I have two text views I'm going
to assign layout weight one for the
first one and then I'm going to assign
layout weight one for the second one as
well and that is all that I really need
to do with activity stock info XML and
of course that guy is saved down here
inside of the layout folder activity
stock info dot XML and of course that's
in the resources folder as you can see
right there so that's all done so I'm
not going to make you sit through that
and that finally is going to bring us to
stock info
activity and this is going to handle the
activity that we created and go and
parse xml data and do a ton of different
things now the very first thing I'm
going to do I'm not sure if I showed you
this before there's a thing called log
cat and it's basically going to allow
you to monitor all kinds of different
things
as your application is being run and if
we ever want to send any type of
messages inside of here to debug this or
see if things are working properly what
is common to do is to identify your
application inside a log cat so that
it's going to be able to output messages
and so forth and so on and how you do
that is go private static final string
tag is equal to and I'm going to go
stalk quote which is the name of the
class so that's what that's for it's
just to help me know that the message is
coming from my application and this is
very common to do well then what I want
to do is come in here and define all my
text views that I created before so I'm
going to have company name text view and
go and get the libraries as they ask for
them of course like that I'm going to
create a whole bunch of these different
guys and I know from last time that we
have eight of them and then just go your
low text view if you have any questions
feel free to leave them in the comment
section below I do my best to answer all
of them and we're going to have days low
text view and we're going to need these
because we're going to be changing them
as the application is running putting
all of our stock information in there
day's high text you last trade price
only text view change text view days
range text view there we go so I have
all my text views all defined inside of
there so I'll be able to refer to them
later on another thing I'm going to want
to do is save all of my node keys and
here I'm going to go quote which is
going to be the parent node for my XML
data as you can see here if i zoom in
quote see there's quote so that's where
that's coming from and that's going to
be a string of course and now I'm going
to need nine of those and we're gonna
have key name I'm just going to put name
inside of here your low your high days
low days high last trade price change
and then finally days range and that
will allow me to save all that
information is the
vacation closes or what have you and
then I'm basically going to do just
about the same exact thing again here
I'm going to put in all of the xml data
that I'm going to need and a lot of this
information I'm just throwing in here
just in case I need it so just replace
textview with string like that and then
I'm just going to replace text view
again by assigning this default value to
each of the variables so pretty simple
stuff okay so now I have all those
strings set up to represent the notes as
well well then what I'm going to do is
go back into Yahoo and you're going to
see here way down here where it says the
rest query this is going to be the URL
that I am going to call whenever I want
to get this XML file and as you look at
this guy you're going to see eventually
MSFT right here so what I'm going to
want to do is I'm going to take this
beginning part of this URL and save it
then take the symbol put it in the
middle and then paste this ending part
of the URL and that is how I'm going to
get the XML data so I'm just going to
copy that now it's back inside of here
and there is an actual and error inside
of eclipse or inside of the Google
plugin that won't allow me to do this
inside of the strings dot XML file which
is normally where you would do this so
in this situation I just have to paste
the URL directly inside of here and I'm
just gonna call this string
Yahoo URL like I said if I could I would
put it in strings.xml but I can't
because of the goofy error okay so I'm
going to paste all that in there right
up until MSFT which is the Microsoft
stock symbol I'm actually going to go
and I'm going to copy this or cut it and
then come down at the end and make sure
we get rid of MSFT just like we did
right there and put a semicolon and then
after that I'm gonna come in again and
go string Yahoo URL second is equal to
and paste in the rest of that URL after
that and put a semicolon so that's where
all that information is coming from okay
so now that I have all of that setup I'm
going to need to come in here and create
on create so how we're gonna do that is
come up here and I'm gonna go extends
activity like that I'll save it okay now
after I have that all set up
come down here inside of this guy and
create my oncreate method which is going
to be called as soon as the activity is
started on create bundle saved instance
state this is going to be all of the
values that I'm going to want to save if
the activity should be shut down that's
where all that comes from that's what
that stands for let me go super on
create and inside of that saved instance
state just as it did right there then
I'm going to call set content view or
layout activity what this guy is doing
is it's going to create the window that
is going to be used by the UI and stock
info is the guy that we're going to
create inside of this and of course you
know where that comes from
and what I'm going to do is call for the
intent that actually called for this to
be created and get the stock symbol that
was entered inside of that and what I
mean by that let's just go grab this
library here while we're here
if we come back over into main activity
and let's just come up here copy stock
info activity right like that and then
go into main activity and do an F and
paste talk info inside of there and do a
find you're going to see this say intent
and there is stock info activity that is
when our class is going to be called and
the information that's going to be
passed to our new activity is going to
be the stock symbol that we need to look
up so that's what that all means so get
them on back down inside of here and
then we're gonna go string and get our
stock symbol that we're looking for so
that we can properly call it up inside
of Yahoo get string extra and we're then
gonna go main activity dot stock symbol
and just to make sure you're aware main
activity bounce inside of there
here's main activity stock symbol say
that's how we're able to pass that
information so back into stock info
activity debt Java again bounce inside
of this now I want to come in and
actually initialize all of my different
text views so just to save some time
gonna come up here and copy all these
guys file save I'm going to bounce over
here as well and grab the initialization
information so that I can just do that
real easily bounce back in there except
this is going to be text
view right like that and delete that put
a dot inside of there and then go
company name text view that's pretty
easy copy that paste this inside and
then we're just gonna come in and do
exactly the same thing dot look for year
lo text you in here dot this is gonna be
your high I'm guessing yes days low days
high days low days high last trade price
change last trade place there we go then
this was going to be change and then
days range finally days range and there
we go and that's all set up so those are
all initialized so we just keep on
moving on now remember I said up here I
was going to use tag to send information
to the logcat if I would want to well
one thing that we could do just to check
or to state where we are in our program
during execution oh here we even get a
tag and let's say that I'd want to do
something like before URL creation and
then also let's say that I would want to
monitor that the stock symbol got inside
of here well that's how I would do that
so that's going to output on the screen
so that's how you do that of course you
need to import that library then what I
need to do is go and actually build the
URL for the Yahoo web service that is
going to give me my XML file and to do
that it's gonna be Yahoo
URL first plus and then it's gonna be
stock symbol and then Yahoo URL second
and I'm sure you remember whenever we
created all that so need to look up
there and there we are now we have the
URL that we're going to be looking up
and parsing data from and now we get to
something a little bit jazzy now the
Android toolkit is not thread safe and
what that means is whenever you are
going to be going and using network
information or so forth and so on you
are going to have to do this in an
outside thread and then use a very
special method inside of this class
we're going to create here in a second
to actually write information to the UI
and it's very important to understand
that if you ever
do any type of network operation for
example such as grabbing XML data you're
going to have to do it in its own thread
and how we're going to call it is by
going new my eye sync task and then
calling execute on it that is going to
start this guy but now I'm going to have
to actually come in here and create it
and async task there we go now I got it
right and now what the async task is
going to allow us to do is perform
background tasks such as using or
parsing XML but what it's also going to
allow us to do is go and actually change
GUI components inside of our application
and this is probably the easiest way to
both go out and use network operations
or grab information off the web and at
the same time be able to go in and
change the GUI interface like this is
kind of the common way to do this and so
we're going to have to set up this class
so it's going to be private class my
async task extends async task and right
here what we're doing to be doing is
just pulling in default information and
then what I need to do is actually
create the method that is going to allow
me actually I'm going to create it I'm
going to have clips create it async
tasks well import that file save and
then I'm going to come in here and say
hat on implementing methods ok and only
doing background is going to pop up we
actually are going to need another one
that's going to actually write to the
GUI interface and inside of here we're
going to define everything we need to
parse our XML data and just if you're
wondering string dot argh zero that is
the same as if we would go string orgs
so it's the same exact thing so that
this guy and string with the array orgs
they are both the same things just a
string array there's nothing that
complicated now since we're going to be
doing something that could cause a lot
of errors we have to of course put this
inside of a try block and the very first
thing we're gonna do is go and get the
XML URL that was passed into us whenever
this guy was started and to do so you're
gonna go new URL and where was the past
n it was passed in
this got right here so that's where
that's coming from so to get access to
it you just go args zero since there was
only one thing passed in there then
that's how that works and I prefer
putting args inside of there it just
makes more sense to me then we're going
to have to create a connection between
the both the application and the URL
that we're going to read our information
from so we're going to go URL connection
and I'm just going to call this
connection and then I'm going to connect
the two of these guys if I go in
connection is equal to URL open
connection and there we go then we're
going to go HTTP URL connection and what
this kind of is going to do for us is
it's going to allow us to take advantage
of a TTP specific features and it's
going to also provide us a bunch of
tools to tell us if the connection was
made or if it was lost and in other
words it's just going to send us back
HTTP status code so that we know what's
going on I'm going to go connection
you're actually going to see I'm going
to check for one of these guys in a
second here I'm going to do a cast for
connection and then grab libraries and
then what I'm going to do is ask this
guy if we were able to properly connect
with a URL and to do that I'm going to
go int response code is equal to HDTV
connection and go get response code and
that's going to tell me if we were able
to connect properly or not now that I
have that information I can say if
response code is equal to copy this guy
up here paste it inside of there and
then go dot and I want to look for HTTP
okay which means we properly connected
well if we have a proper connection
inside of there and make sure we spell
response right well then I'm going to
start reading the information from our
connection I'm going to go input stream
is equal to I'm going to be able to come
up here grab this guy paste that in and
go get input stream and then now that I
have all this input
I'm going to go document and like I said
before in the next tutorial I'm going to
show you how to use the XML pool parser
but for now we're just going to use the
simple way using the DOM and what this
builder is going to do for me is provide
a simple way for me to parse
objects from the XML document paste that
in there and go new instance and then
create a document builder which is going
to provide a Dom document from the XML
page and to get that I'm going to go DBF
new document builder like that I'm going
to go document Dom and this is actually
going to parse the yahoo financial YQL
stock XML file and go in and now what I
want to do is actually define the route
element that's going to be inside of
this document and they go Dom dot get
document element it's alright yeah and
that's going to provide me with the
route and make sure when you come in
here and go element that you come down
here and go w3c Dom that's the right one
and then if I want to get a list of
nodes from this document I'm just going
to go doc l get elements by tag name and
this is going to be quote because quote
revolves around all of the different
information that I want to get out of
that XML file now the very first thing I
want to do now just as a check is to
make sure that I actually was able to
find the quote tag and just so you're
aware this is the quote tag that I'm
looking for and there's always a quote
tag assigned for every stock that you
look up so now I want to make sure that
I found that and I want to get the
length to make sure that there's actual
data coming across here and if that was
true just to show you here just in case
there are multiple quotes you would want
to do all at the same time I'm actually
not using that here but this isn't going
to hurt anything to show you this
because of course it would be common for
you to do that if you wanted to cycle
through all of the different nodes for
multiple different quotes you would just
do this like I said it doesn't hurt
anything to have it in there then what I
want to do is create stock info which is
the object that's going to hold all of
our stock data for us this guy remember
we created that right at the very
beginning of the tutorial so I'm going
to create stock info and I'm just going
to call this the stock is equal to and
then
go get stock information which is a guy
I'm going to create here in a second and
then pass in doc L which is going to be
the root for our document and then what
I'm going to do just to save a little
bit of time right here right before I
create this is zoom up inside of here
and I'm just going to copy these strings
then zoom Bekins down inside of here and
right after this and then I'm going to
go the stock dot and go get name so I'm
going to pull that out of there like I
said in a second I'm going to create get
stock information I just want to get
this out of the way because I'm almost
done with this and then we're going to
do basically the same thing and here I
can just go dot your lo dot your hi dot
days lo where is it there it is days lo
dot days hi last trade price only dot
get last trade price only which is this
guy get the change and then get the
range days range there we go so I'm
going to get all that information out of
our object and that is all I'm going to
need to do for that part of that class
and we'll let this be exactly the same
but I have to come in here and actually
create all my catch responses so what
we're going to do first is come down
here it's going to say that we need a
finally defined inside of it now I'm
just going to go finally like that and
then I'm going to go and catch all of
the potential problems I'm just going to
paste those in there and there we go
so those are all set up and that whole
entire class is all set up now what I'm
going to do is create get stock
information so come way down here and
what this guy is going to do is be sent
the route XML tag just like we said
before as well as the tag name we are
going to be searching for is then going
to be sent to another method called get
text value for processing and then we're
going to use all that information to
populate the stock info object here just
watch you will see so we're going to go
private and we're going to return a
finished stock info object paste that
inside of there and remember I said the
root element is going to be passed in so
there that is and then I'm also going to
have all this information be pulled from
another
now food so in that one I'm just gonna
pass in again the root element and name
for all the different pieces of data
that I'm gonna want to grab so there is
your low your high as you can see you're
doing pretty much the same sort of
things over and over again days low days
high last trade price only in days range
and then we're just going to copy and
paste all those things on the left side
of the screen over on to the right side
of the screen because this is the data
I'm trying to pull from the XML file and
there you go so that's all set up and
then after we have all those set up I
act to actually create stock info just
going to call this the stock equal to
new stock info and then inside of all
these guys I'll make sure we come up
here and go stockier hi sorry about that
there we go bounced over into this guy
and here are all the different things
we're gonna need for the constructor
whenever we call it bounce back over cut
the strings out of this constructor call
and then I'm just going to upper case
all these days days there we go your
name last trade price only sure that's
uppercase because that is change and
days range and then we're going to go
and throw stock on the front of all
these if I'll save that and now that
that stock info object has been created
I can go return the stock send it back
to it and that'll be done with that and
now what I need to do is create get text
value so come after this and go private
string get text value it's going to
receive the root element as well as the
tag name that I want to search for
inside of the XML document so I'm going
to go to tag value to return this is
going to be the actual value between the
tags we're searching for and then gonna
have to create a new node list using
entry that's the route and go get
elements by tag name and put the tag
name inside of there there's only going
to be one then we're going to say if
node list we want to make sure that we
actually got a hit is not equal to null
and the node list make sure that the
length of this guy
is greater than zero just like we did
before then where you go elements have
to cast this element and then we're just
gonna go node list item zero because we
know there's only going to be one and
then we're gonna go tag value to return
to get that value we just need to go
element get first child like that and
then go get node value and that's going
to give us the value inside of there and
of course put an equal sign there and
now that we have the value that's inside
of the tag that was sent over here that
had the root element here bounce down
after this and go return tag value to
return there we go we properly parsed
and grab the values that we were looking
for so the only thing we have left to do
is to take all that data that was in
that stock object that we created here
remember get text value that's calling
this method here which is going to find
the specific tag name return the value
then it's going to pop up here and
create this stock object but I need to
then take that stock object and actually
save it to the GUI interface and to do
that what we're going to do is actually
to go I'm going to keep this all in one
place remember here where we created do
in background and remember I said that
this is going to allow us to access
network information however we're not
going to be able to write to the GUI
interface well to write to the GUI
interface we're actually going to have
to create another method inside of this
I'm actually going to bounce here and
put it right here and that method is
going to be called on post execute and
to create it you're going to go
protected this basically means after the
above has been executed this is going to
be corrects acute 'add and here I'm
going to put result and then what I'm
going to do is go company name text view
set text and going to put name inside of
it and I'm going to do that for every
one of these different GUI pieces inside
of this guy
so there's your low and in this
situation I'm going to need to put in
the
or to the GUI interface that is already
there for the textview right like that
your high days low days high and there
are the rest of them and that is it that
is all the information so now let's
execute it and watch work and here is
our application and if we hit quote it's
going to pop up all of our information
so there is an absolute ton of
information on how to parse XML if you
stick with this guys I'm going to show
you some of the apps in so many
different ways to do this stuff and
provide an immense amount of repetition
that it's just going to get ingrained in
your brain next time I'm going to show
you how to use the XML pull parser
please leave any questions or comments
below otherwise till next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>