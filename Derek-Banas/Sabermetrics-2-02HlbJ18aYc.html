<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Sabermetrics 2 | Coder Coacher - Coaching Coders</title><meta content="Sabermetrics 2 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Derek-Banas/">Derek Banas</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Sabermetrics 2</b></h2><h5 class="post__date">2012-04-18</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/02HlbJ18aYc" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">while loader net and welcome to part 2
of my sabermetrics video tutorial if you
haven't seen part 1 definitely stop and
go watch it there's a link above
otherwise you'll be really confused
because in that part of the tutorial I
showed you how to get all your tools and
explained all the basics behind
performing different calculations and
issuing queries and all that and on top
of this just being a basic sabermetrics
tutorial this is also what I would
consider to be a fun SQL tutorial
because I've knit a lot of requests for
that like I said I like to have my SQL
part of my terminal and left hand side
of my screen and then a basic text
editor on the right hand side of the
screen and that way I can perform
different calculations keep everything
nice and organized well just like before
in this situation I'm going to calculate
the top 50 players in regards to RBIs
runs batted in and just like before
we're going to ask the database for
certain information and you do that by
typing in select and then I'm going to
say B dot player ID because I want to
get the player ID and here's a new thing
you haven't seen before
called can cap which stands for
concatenate and what this just simply
does is it allows you to join different
types of data together and present them
all at one time so in this situation I
am going to combine the first put a
space and then I'm going to put my last
name actually it is named last and then
I'm going to also say that I want it to
have an alias of name right like that
and then I'm going to get some other
additional information now if I have a
whole bunch of players in a table and I
want to get their RBI's for each
individual year and add them all
together just like previously I'm going
to have to use some and I'm going to
type in RBI and I want to display that
as RB I if I don't have this part in
here it's going to display or have the
title of the column be this long thing
so that's the reason why I'm putting RBI
in there and then I need to come in here
and say where do I want to pull this
information from well I want to pull it
from two different tables one being
batting and I want it to have an
abbreviation of B so I can use that
later on and then master is the other
table and very often whenever I'm doing
these calculations I want to use the
master table in those situations in
which I need to get at information
that's not in the batting table such as
name first and name last or last name
inverse name
then I need to have some stipulations in
here since I'm joining these two tables
together and what I'm going to say is I
want the RBI's and I want to make sure
that the player IDs in both of my tables
are the same for all the information
that it gives me and then I want to say
that I want to group everything by
player ID and then I want to order them
by RBI so everything's going to be in
descending order
that's highest the lowest and I want to
limit my results to just 50 of those now
I can easily come over here and copy
this paste it in left side of the screen
and get my results and there you can see
we have way up here to top the screen
and Charon with two thousand two hundred
ninety seven total RBIs and then Babe
Ruth and da-da-da-da-da so that's a real
simple way of pulling those statistics
together you can see all of that data
and of course you could pull in a lot
more information now since I have my
text editor over here I can perform a
couple other different calculations
while just changing a couple different
things so let's say I wanted to find out
who has the most home runs and I know
this isn't normal sabermetrics sort of
formulas but I wanted to start off
simple here if I want to get home runs
instead of RBIs I just type in HR and
all of the code everything I type
basically in this tutorial is available
underneath the videos to just look for
that I'm going to be pulling all this
information from the same two tables and
everything else here basically is going
to be the same except I need to change
this to home runs and then I can just
copy this guy right here paste it over
here and then get a listing of the top
home run hitters in Major League history
and there they are they're all the top
home run hitters all listed out there on
the screen that's also very very neat
let's say I wanted to get the top
batting averages just again because I
have the text editor here I can make
just a couple little changes and I'm
also going to get at-bats let's just
come in here let's get rid of this all
together and in this situation I'm just
going to say some I'm going to say that
I want to get at-bats and I want to
display that as at-bats and then I also
want to get the average know how I'm
going to do that is go some and then put
in here hits and then divide it by some
at-bats and then I want to say that I
want to display that as average and I
pretty much everything else here the
same cept again I'm going to have to
change order by to average and because I
am calculating averages I'd want to push
out those people that maybe only had
like five at-bats in the major leagues
and so forth because that might distort
dramatically my numbers here and if I
want to do that here's another new SQL
tool I can type in having at-bats which
comes from this guy right here greater
than 1000 so that's going to help me
eliminate any like major distortions in
this number and also another thing if
you would want to put a comment in here
makes sure over 1000 that is how you
would put a comment inside of MySQL then
we can copy this and find out who had
the greatest batting averages of all
time and as you can tell this comment
did not in any way mess up anything we
have going on here and there you can
sing we scroll up
Ty Cobb had the greatest batting average
of all time and Russ Barnes and Dada
da-da-da-da-da-da there's a whole bunch
of additional information you could pull
inside here so now let's get into
something that's a more cyber metric II
type of thing being on base percentage
which is basically how often a player
gets on base real real simple stuff
let's jump back into our little text
editor here I'm going to leave that bats
in here also and I'm also going to leave
an average in here this is going to
allow us to perform a little bit more
interesting calculations change this to
on-base percentage and we need to come
in here and actually figure out on-base
percentage
on-base percentage is basically going to
be hits plus balls plus hit by pitch
divided by at-bats plus balls plus hit
by pitch plus sacrifice fly now
sacrifice fly is going to be a little
bit weird because if we're looking at
old-time baseball statistics they were
unable or they didn't actually keep
track of sacrifice flies so how do you
use this information in some situations
but don't use it in other situations
well there is another nice little SQL
function it's available called coalesce
and in this situation if we wanted to
use the sacrifice fly information if it
exists but in those situations in which
it does not exist we wanted to say use 0
that is exactly how that you'd be able
to do that now the only problem is this
is going to calculate every
thing on a year-to-year basis so what
does that mean that means I need to come
in here and sum all of these different
individual parts so I'm just going to
come in here like that and let's shoot
to solder a little bit make sure we
don't make any errors some and then down
here and coalesce face the some inside
of there come down here and close off
this bracket and then we're going to say
that we want this to be on base
percentage and just those couple changes
we're now going to be able to calculate
who had the best on-base percentage in
Major League Baseball history so let's
just paste that in there hit enter and I
had a little bit of an error no problem
because I see what it is right here
after average I have to make sure I put
a calm inside of there so that's good
that's another good reason to have this
text editor right here I'm back in paste
and now I can see that it's working now
it's going to give me a whole ton of
information basing everything on on-base
percentage you can see here Ted Williams
of the greatest on-base percentage of
any major league baseball player and
we're also able to see his total at-bats
as well as his total batting average
just kind of neat all that information
they're all on the screen all one time
something else that will be kind of neat
is if we could get this information plus
we could get the position for the player
not simple this situation right after
this guy went to make sure we put a
column inside of there and we're going
to say F dot POS and I'm going to say as
POS we're just going to pull in another
table full of information the reason why
we have this is because the position for
the player is not available in either
the table batting or the table master so
I'm going like this and then we're going
to type in fielding followed by the
letter F and then we have to put in a
couple more constraints here because we
just pulled in another table and the
constraints that we're going to do here
is that be player ID is equal to F dot
player ID and that's going to make sure
that everything matches up inside of
there we're still going to group
everything by player ID we're still
going to make sure that our at-bats is
over a thousand and we're still going to
order by on-base percentage now copy
that I'm so over here paste it in hit
enter and there you go now you're going
to be able to see all this additional
information as well as what position and
of course they pull out the very first
position that's the reason why Babe Ruth
is listed as a pitcher here but you
could go in there and play around the
different position types and be able to
pull in their last position
or to show how to shoot out all the
different positions they've ever played
so you could use something like this to
figure out what is the greatest baseball
lineup in history and of course you
could also change the year by year
information to figure out what are the
best players based off a position for
any individual year or any decade or
anything so it's also kind of neat and
also check out here at see it took fifty
point nine seconds we did a lot of
calculations here you have to know that
sometimes you're going to have to wait
for these quarries to issue out
everything that you would like to take a
look at and just so you know if you
wanted to see what the fielding table
would look like there you go so that's
what you're gonna have to do you have to
understand what types of information is
in all the different tables so you know
what information that you're able to
access and then pull that information
out because there is a ton a ton a ton
of information and then here is the
master table you can see all the
different things that are available
there so it's really really neat as well
another thing is kind of cool let me
just clean this back here is let's say
we wanted to do yearly so that means
what we're going to do is we're going to
look for which player in each year had
the best on-base percentage
year-over-year how would you be able to
do that it's actually going to be pretty
simple basically what you're going to do
is I could actually have calculated it
as before you're just going to have to
come in here and eliminate all of these
sums and bracket off the division here
just to make sure that that goes through
right there's getting rid of all the
different sums and all of these sums
because remember sum is going to
calculate all of their at-bats or all of
their walks and we don't want all that
we just want a year by year and also on
top of that I'm going to pull in some
additional information so I'm going to
throw a column in here and let's say
that I also want to pull in salary well
I'm just going to type in s salary and
then I'm also going to come in here and
go B and I'm also going to pull in the
year ID so pulling in a new thing from a
new table so that means I need to point
at the salaries table and that's going
to mean that I need to put in some new
clauses inside here this one's still
going to be good this one's still going
to be good here as well go down to the
next page I'm also going to go and I'm
going to go B dot year ID and let's say
that I want to look at 2010 data and I'm
going to say that s player I do
is equal to B dot player ID and s dot
year ID is equal to B dot year ID so I'm
just matching up all those different
tables so that everything is pulled in
properly and then now I'm not working on
historical information so I'm just going
to change this to three hundred instead
of a thousand but everything else is
basically going to leave exactly the
same let's copy that throw it over here
and see what happens and there you could
say now we got a whole bunch more
information not only this is all 2010
data we got our averages we have our own
base percentage we have our position we
also have our salaries you can see who
is really a great player based off of
their overall salaries so play around
that's kind of neat and then I'm going
to do one more here for you this is
going to be slugging percentage which is
the overall measure of a power of a
header and because we have everything
here this is going to be pretty easy to
do pull this over here and I'm going to
get rid of this on base calculation here
to simplify things a little bit then
we're going to calculate slugging
percentage and we're going to do that by
going in here and going some and we're
going to get our hits plus some and
we're gonna get our doubles and then
multiply that times 2 plus some and
we're gonna get our triples multiply
those times 3 and then some you can see
that it's going to weight homeruns and
doubles and triples more than singles
hence power and then we're gonna divide
those by some at-bats and then we're
gonna give it s LG as an alias in this
situation I'm just going to get rid of
salary also get rid of year so I don't
need the salaries table and I'm also not
going to need this additional
information is down here we're going to
continue to group by player ID I'm going
to say that I want my hat bats to be
1000 and then I'm going to order
everything based off of slugging
percentage if we copy this guy that's
over here paste that in and there you
can see all of my players are now based
off of slugging percentage and you can
see Babe Ruth rank someone again and
there's the position listed as pitcher
and there's all these other additional
players throughout the history of
baseball so there is a bunch of new ways
to play around with all of this data and
next part of the tutorial I'm going to
cover theoretical team runs created
batting average on balls and play and a
whole bunch
two other really neat intricate little
types of formulas that you can run here
leave any questions or comments below
otherwise till next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>