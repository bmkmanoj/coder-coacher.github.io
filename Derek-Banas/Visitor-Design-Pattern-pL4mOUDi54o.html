<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Visitor Design Pattern | Coder Coacher - Coaching Coders</title><meta content="Visitor Design Pattern - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Derek-Banas/">Derek Banas</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Visitor Design Pattern</b></h2><h5 class="post__date">2012-11-02</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/pL4mOUDi54o" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">well hello internet and welcome to part
26 of my design patterns video tutorial
this is going to be the final part after
covering 24 design patterns today we're
going to talk about the visitor design
pattern which is often confusing to
people but by the end of this tutorial
you'll completely understand it and like
most of the other design pattern
tutorials
this is 100% encapsulated so you don't
need to watch the other videos if you
just want to learn about the visitor
design pattern so let's get into it so
what is the visitor design pattern well
it allows you to add methods to classes
of different types however they don't
have to be different types but that's
just an added level of complexity
without much altering to those classes
this allows you to make completely
different methods depending upon the
class that is used and to phrase it
another way it allows you to define
external classes that can extend other
classes without majorly editing them so
let's look at this in pictures and make
more sense of it this is a basic sort of
UML class diagram of the visitor design
pattern and basically what you're going
to have here is the visitor interface
and we're going to implement the visitor
interface in this very specific example
using what is called tax visitor what
I'm basically going to do here is act as
if no taxes existed of any type on
products when you buy them and our job
is to implement taxes however implement
them in a way so that different types of
products being either liquor tobacco or
necessity items are taxed in completely
different ways and then what we're going
to do is create the visible interface
and it is going to have a method that
every class that implements it being
either necessity tobacco or liquor is
going to have that accept method inside
of it so let's look over here at what
the clients going to do to further
explain what's going on over here
first we're going to create tax visitor
which you can see in the lower left hand
corner of your screen and then we're
going to define one of our class objects
so we're going to define milk as a
necessity and we're going to say that it
has a price of three dollars and
forty-seven cents a gallon what then is
going to happen is this three dollars
and forty seven cents is going to come
over here and how we get this double
which is a return value is we call
visitor visitor using method overloading
is going to say okay you passed me a
necessity so I'm going to use this very
specific form of the method visit and
I'm going to perform a tax calculation
bounce that back as a double and then
that double goes right here which we can
of course receive right here what this
is going to allow us to do is to create
completely different ways of taxing
different objects as well as very easily
implementing new ways of taxing just by
implementing the visitor interface so
let's get into the code and show you an
example of exactly how this whole thing
is going to come together so here we are
this is a visitor dot job which you saw
previously and all the code in this
video is available underneath of the
video in the description area and you
should definitely take a look at it
because it is heavily commented now this
is going to be an interface called
visitor and it's going to be very very
simple and it's just going to allow us
to perform the same action on many
different objects of different types so
we just need to go public double visit
and then here we're going to handle if a
licker object is passed over right like
that and then what we need to do is use
method overloading to allow us to accept
other different types of objects that
are passed over so here we'll have
tobacco and then let's just say this is
a tobacco object and then also we'll be
able to handle necessity objects which
would be like food and then we're gonna
call this a necessity item there you are
you done with that visitor interface now
we're going to go into tax visitor Java
which is going to implement this
interface and as you can see I did that
right here and up here I'm going to be
changing decimal formatting so that I
can show sense in just two digits so
here's tax visitor and implements
visitor which we just created previously
and let's just get the decimal format
thing out of the way because it really
doesn't have anything to do with this
but I just thought it would be important
to use so there's decimal format and
then here we're going to say that we're
going to Sept one or more digits and
then there for our cents then we're
going to come in here and go public tax
visitor which is the constructor for
this guy and in essence he's going to do
nothing he's just going to sit there I
could do all kinds of things with him
and you might decide later on you want
to but for now that's just going to sit
there then what I'm going to do is go up
to tax
sitter and it's going to say hey there's
methods you need to add in here I'm
going to click on that and create all
those so I don't have to type it out and
then I'm just going to override these to
make them do exactly what I want them to
do so in this situation
I'm going to go system.out.print line
and say this is a liquor item price with
tax is going to be shot out and then I'm
going to go return then I'm going to do
a couple things I'm going to say double
parse int parse double and then do DF
format the reason why I have to convert
this into a double is because DF format
shoots out a string and then for just
liquor items I'm going to get my price
and multiply that times 0.18 which is
going to be the taxation on liquor items
and then I'm going to go to liquor items
again and this just provides an easy way
for us to be able to calculate tax in a
completely different way without
altering the classes themselves so
that's why that guy's there and then get
price doesn't need to have anything
inside of it okay so you can see exactly
how visit is going to work in this
situation
and guess what visits going to work in
almost exactly the same situation if a
tobacco item is shot over here so we're
just going to paste that inside of here
and all I need to do is go to back away
time price with tax and then this is
going to change to tobacco item and then
we're going to change the tax on that
just that specific item 232 and then
we're going to do exactly the same thing
for necessity items like that and like
that except in this situation we're
going to say that the necessity item
doesn't have any tax just to make it
simple and show something completely
different so there you go there's tax
visitor Java so now what I need to do is
go in and actually show you what these
classes would look like before they were
ever created and the changes that are
going to be needed to make them work so
what I'm going to have to do here is
create what's called visible Java this
is another interface and inside of this
very simply I'm just going to go public
double and this is the only change it's
going to have to be made to your classes
to be able to implement the visitor
design pattern so now let's go into
liqueur Java and show you exactly what
it would look like before visible was
ever even created so let's say we have
private double price and the way that
this used to work is taxes didn't exist
so we're just going to
say okay we're going to get a double
passed over to this like that and then
we're just going to say price is equal
to the item price that was passed over
and then we're going to say public
double get price return price okay so
this is the way that all of these
methods were going to look before
visible was every ever implemented so
let's actually go and create all those
so let's just go copy let's jump into
tobacco do pretty much exactly the same
thing there that is except this of
course needs to be tobacco everything
else can stay exactly the same and then
we'll go into necessity items and that
also is going to be exactly the same so
and that all works now what happens in
the situation where now all of a sudden
we have to implement taxes well we could
come in here to each one of these
classes and create that capability for
calculating taxes however the problem is
what happens whenever we have to
implement even more different
capabilities to these classes we're
going to have to keep going in to every
single one and changing them over and
over and over again or what we can do is
use the visible interface that we just
implemented here in this guy and we just
come up here and say add unimplemented
methods and then we hit file save and
now what we can just come in here and do
is go return visitor dot visit and then
pass it over to this which is a
referenced in this situation to this
class which is liquor so that's going to
be passed over to this guy and this can
be used over and over and over in
multiple different ways and execute
multiple different methods and this of
course doesn't need to be called except
I'm using that because that's a common
jargon way of referring to these guys
but you can see here if I pass over this
meaning liquor then should've jump over
into this guy and it's going to say ok
this is a liquor item and we need to
perform certain calculations based off
of that fact and then it's going to go
down here to tax visitor which
implements the visitor interface and
it's going to come down here to liquor
item and perform this very very specific
calculation just for that type of object
so that's what's going on with that and
you can see here it's very very simple
and except is exactly the same in every
single one of these objects so let's
copy it and we can come in here and
paste that in okay now that works and
then we can do the same thing for
necessities we don't have to care
at all about anything just let the
accept method handle everything for us
and then what school or even yet is we
could have multiple different types of
calculations so let's say that the
government wants to institute some type
of tax holiday provision well we could
handle that so let's just go into tax
visitor and show you exactly how easy it
would be to do that we're just going to
copy what's already been done right here
jump over into tax visitor paste that
inside of there and then this is all the
same however this is going to be tax
holiday visitor don't need to change
anything else I mean everything else is
exactly the same and then we can really
really quickly come in here and say okay
let's drop the tax on liquor 210 during
our tax holiday and tobacco to 30 and
then necessity items don't need to
change because they're already at zero
and then we can file save those now we
just implement it in a couple clicks a
completely different way of calculating
taxes and as you can see overall this
whole thing came together quite quick
and then we can go into visitor test job
and actually see what we got right here
so we'll go tax visitor and I'm just
going to call this tax count is equal to
new tax visitor this is all about speed
that's the whole reason why you're going
to use this guy and also not being
happen to change anything in regards to
your classes and then we're gonna have
tax holiday visitor we can perform
completely different calculations in
that situation just type in all the day
their holiday there and then change that
to an uppercase C holiday C I'll save
and you can see really quickly how we're
able to do all this and then we're gonna
be able to go necessity and say milk for
example is equal to new necessity and
say the price on it's three dollars and
47 cents right like this pretty simple
and then we're going to do the same
thing for liquor and let's just say
vodka and I have no idea how much vodka
cost let's just say 1199 and then
tobacco and we'll just say cigars and I
also don't know how much the cars cause
so let's just say $19.99 for a box of
cigars I don't know there you go we
created our different objects and now if
we want to be able to print out our
changes in taxes it's going to be very
very easy we're just going to say milk
accept and pass it tax calc which is
going to be our calculation we want to
use at this point in time and then just
everything spread out I'm going to throw
a new line inside of there and then I'm
going to be able to copy that and then
just change this to vodka and then
change this to cigars didn't have to
change anything else that's pretty cool
and then we could also come in here and
do something like tax holiday prices
then we're just going to copy these
three guys right here boom and then we
can come in and say all day tax holiday
and then we can copy that paste that in
there and paste that in there she just
created two completely different ways of
taxing actually sex and if we execute
this guy you can see exactly how it's
going to work and that's exactly what
you say scene assess the items price
with tax 347 liquor price 1415 dah dah
dah dah
of course necessity prices don't change
this is during attacks holiday and so
forth and so on
there is a extremely useful design
pattern caused it a visitor design
pattern if you didn't quite get it take
a look at the code really meticulously
look at it and I guarantee you're going
to get it so what comes up next next
week for the people to watch my videos
all the time all 150 of you guys I'm
going to hold a big giant vote I
basically have two groups of people out
there who want two completely different
types of tutorials both of which are
completely huge so from November the 6th
through the 12th of next week I'm going
to allow you to decide based off of just
a simple vote which one I'm going to
cover I'm even going to go down the
Android game path which is also going to
include the C programming language
drawing a whole bunch of math and a
whole bunch of other stuff you see right
there on the screen or I'm going to go
down the Java Enterprise Edition path
which is going to have all the things
you see on the right side of the screen
with a bunch of other things you don't
see that will make sense so I leave it
completely to you guys starting November
the 6th through the 12th go out there
and vote last time I had a vote like
this that defined what I did at about 43
people vote so your vote will count and
then this tutorial is going to last
anywhere between 6 to 8 months both of
them so you know they're going to be big
giant massive tutorials and they're both
going to start immediately after my UML
2.0 tutorial which is going to start
pretty much the next couple days and my
refactoring tutorial which is going to
answer the big question of when do I use
design patterns so there is everything I
got planned
out there and that is in essence kinda
sorta the end of my design patterns
video tutorial please leave any
questions or comments below otherwise
til next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>