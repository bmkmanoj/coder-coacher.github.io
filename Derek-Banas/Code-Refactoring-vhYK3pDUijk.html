<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Code Refactoring | Coder Coacher - Coaching Coders</title><meta content="Code Refactoring - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Derek-Banas/">Derek Banas</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Code Refactoring</b></h2><h5 class="post__date">2013-01-06</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/vhYK3pDUijk" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">well hello internet and welcome to part
one of my code refactoring tutorial I'm
going to show you in this tutorial how
to create great code that is easy to
modify as well as understand now while
part 1 of this tutorial is going to be
heavy in regards to the presentation at
the end I'll give you some code examples
of some bad smells which we're going to
know exactly what that means and the
rest of this tutorial following part one
is going to be very heavy code wise so
let's get on what so what exactly is
refactoring well basically software
normally fails when it becomes so
complex that it can no longer provide
the additional features needed while
remaining error-free refactoring is used
to improve code design to make it easier
to understand and extensible or easy to
extend and if you believe a feature may
be needed in the future and your current
code won't easily be able to accommodate
it you refactor that code to make it
easier to add that feature now rather
than worrying about what you need to
change with your code to add the feature
later so why should you refactor by
removing duplicate code you remove the
amount of code and hence the less code
that you have the easier it is to modify
as well as understand which I'm sure
you're well aware if you've looked at
huge programs and tried to understand
how they work by writing understandable
codes you and others of course will be
able to easily modify and by refactoring
code using code you understand you
better understand the system and this
would come into play if you were given
someone else's code very often you can
look at that code and not have any idea
what's going on but if you go in and
refactor it on your own you'll
completely have an understanding of how
the system works and by better
understanding the system the easier it
will be to spot bugs refactoring also
helps you write code quicker if you
write understandable code of course
you're going to spend all of your time
adding features instead of gaffing to go
back and trying to understand the pass
code that you have written as well as
going back repetitively to fix bugs and
add features and fix bugs that occur
because you've added fee
refactoring also makes code easy to read
eliminates duplication makes
modification easy and minimizes complex
conditional logic and many people think
refactoring only deals with forcing
design patterns into your code this is
absolutely not true however that is what
you spend a lot of your time doing
creating a better design is the simple
goal with refactoring and that will
often lead of course for you to pull in
design patterns and use them however
very often you will find that you will
be pulling away from design patterns
during the process of refactoring so
what are bad smells
while you are refactoring code you are
doing what is called looking or
searching for bad smells or in common
language design problems bad design is
normally just simply unclear complicated
or duplicated so that is what a bad
smell is so what are some examples of
bad smells
well of course duplicated code which I'd
mentioned before and that duplication is
either going to be very very obvious
meaning that you're going to see the
exact code over and over again or of
course it could be subtle if the
duplication occurs using completely
different code also another bad smell is
long methods they are going to hamper
your ability to share logic solutions in
comparison to if those long methods were
broken into many other smaller methods
and you're going to find that systems
built using many small methods are also
easier to understand and in general you
should aim to have methods that are no
longer than 10 lines in length or have
an average length for all your methods
of approximately 5 lines another bad
smell is complex conditional statements
which I've talked about many times in
the past and of course they're just
going to limit your ability to extend a
system and provide reuse they also of
course make it hard to understand
systems over time
primitive obsession revolves around
giving up on the dynamics specialized
purpose of a class by constantly using
primitives over using class objects and
by primitives of course I mean ants and
doubles and Bowl Ian's and all those
things which I'm sure you know about by
moving away from the use of primitives
you're going to find that your code also
is going to be cleaner and
more extensible indecent exposure occurs
when methods or classes are made visible
when of course it is best to keep them
private solution sprawl occurs when code
is used to solve an issue that is
sprawled across numerous classes
whenever it's better to keep them all in
one alternative classes with different
interfaces occurs when interfaces of
different classes are different but the
classes themselves are not different and
of course in that situation is better to
refactor those two different interfaces
into one lazy classes refer to classes
that should be consolidated and that
just simply means that they don't really
do much on their own so you should move
the capabilities that they have in other
classes then we get into large classes
which can occur if you move too much of
what's in a lazy class into another
class and it's just simply refers to
classes that have way too many
responsibilities and of course one way
to spot the large class problem is if
you are using many instances of that one
class over and over and over throughout
your code to solve many different
problems switch statements or
if-then-else statements should also be
eliminated if they make your system
restrictive and if they do it's quite
simple to go in there and replace them
with an object polymorphic solution like
I've talked about in the past but which
we're going to get into in great depth
in this tutorial combined at Oriel
explosion occurs when you use many
methods to perform actions that could be
done with one method that isn't as
specialized and an example of this would
include creating methods for each
database query rather than just creating
one method that could handle numerous
queries and then finally we come to just
general oddball solutions that occur
whenever you solve the same problem in
many different ways and of course in the
situation where that occurs you need to
discover the best one solution and use
it while deleting all the other
duplicates solutions that don't work
quite so well so that is a whole bunch
of talk so let's start getting into some
bad smells and how to solve them now the
first two problems I'm going to cover in
this tutorial we're going to be kind of
simple to sort of ease you in I promise
you these will get very complicated very
very quickly now the first thing I'm
going to cover are
creation problems now a creation method
is just simply a method that creates an
instance of an object and what we're
going to do here is we are going to
replace constructors with creation
methods and the reason we're going to do
this is normally whenever a programmer
is handed a class they have to try to
figure out which constructor to call
based off of parameters and then they
can get confused because of course
because it's a general constructor that
uses the same name as the class the
method name might not be descriptive
enough to actually explain what's going
on and then you get into other issues
with constructors where you can't have
two constructors with the same number of
attributes or if the types of those
astra buttes are the same and this is
known as a attribute signature if i
refer to that in the future that is just
the list of attributes that a method
would receive or a constructor in this
situation the reason why we use creation
methods is you can have descriptive
names and because you can have many
creation methods you can have different
ones with the same attribute signatures
instances are going to be created just
like with constructors and the only non
standard practice in using creation
methods versus constructors is you are
not going to use new with creation
methods so let's go in here and look at
an example now throughout this tutorial
I'm going to try to use really simple
code so that you completely get it
now what I'm going to do here is I'm
going to demonstrate the creation method
replacement of constructors and this is
all based off of football teams sort of
things now if you're creating a football
player some of them might have a passer
rating like a cute quarterback others
might have rushing receiving yards total
tackles interceptions field goals all
these different things but a quarterback
isn't normally going to punt the ball or
be involved in kickoff returns and so
forth and so on
so that means we're going to have to
create numerous different constructors
to be able to handle these guys so let's
just go in here and using the old way
let's try and figure out how we're going
to do it and see what problems that we
would have so we're just going to have a
football constructor inside of here and
let's say that we want to create a
after that would be specific to a
quarterback so quarterback passer rating
would apply and then we would have
rushing yards would also apply so we
would put those into our constructor and
we would go about trying to create a
quarterback and of course we could just
come in here type in this with that is
equal to blah blah blah this rushing
yards is equal to rushing yards okay so
everything looks fine now we have our
quarterback constructor and it seems to
make sense because the quarterback
wasn't going to do return yards and so
forth and so on so now let's say we want
to do another constructor that is going
to be specific to just running backs
well passer rating wouldnt really matter
with a running back so we're just going
to come in here and initialize it with
just the rushing yards and so far that
looks good this is for quarterbacks this
is going to be for running backs so
let's go in here and try to create a
constructor that is going to be specific
to a wide receiver
well passer rating is going to make
sense and normally rushing yards isn't
going to make sense so let's say we just
want to come in here and do receiving
yards so we go in here and we see some
errors pop up what is this well we're
hitting the problem where the attribute
signature is the same here in regards to
this is an int and this is an int so
this is not going to allow us to come in
here and simply copy receiving yards to
here and there and then have our wide
receiver create it and that is all
occurring because we have the same
attribute signature for both of these
both of them are receiving an int and
nothing else so what do we do in that
situation well that's where creation
methods come in so let's just come in
here and instead what we're going to do
is we are going to create a catch-all
constructor and this constructor is
going to have all of these different
guys inside of it and there they are
so that is every single thing that a
football player can have inside of it
and now what we need to do of course is
to assign all of these things with this
and there we go real simple and now
we'll create our creation methods for
all of these that are going to need to
call that constructor so we'll just go
in here and go public static football
player it's going
returned a football player object and
we're going to call this create QB and a
QB is going to have a passer rating and
rushing yards very descriptive name we
know exactly what this guy's going to do
and then what we need to do is just go
return new football player and inside of
this we're going to put passer rating
and rushing yards and I'm just
explaining there's actually the part of
this that comes after is going to show
you another neat way to even make this
tighter but just want to explain one
little part at a time and there we go
now we're going to be able to create our
quarterbacks using very descriptive
names and we can specialize these as
much as we could ever want them to and
then say we go down into Maine and we
want to create a new football player and
let's say we want to create Aaron
Rodgers we can just come in there and
you go create QB and pass in 108 0 and
259 and there we go we just created our
football player and a nice neat small
amount of code down here and then if we
wanted to print this out with the passer
rating for example we could just simply
do this pounds up here of course for one
second and then go public double get
passer rating and return passer rating
and then go back down inside of here and
call for get passer rating and execute
and it's going to work Aaron Rodgers
passer running and it's going to print
it out so that's cool and of course we
could come in here and do exactly the
same things for running back or defense
or whatever we would want so that is a
very simple way to solve that bad smell
so let's go in and try one more to
finish off this tutorial now another
problem you're going to have is you're
going to want to avoid duplication
inside of your constructors and you're
going to do that by chaining
constructors and the reason you want to
do this is of course numerous different
reasons but one of the main reasons is
that the more constructors you have the
more likely it is that someone's going
to come along someday and will want to
update one of your constructors and
forget to update all of the other ones
which will cause catastrophic problems
this problem of course is going to be
easily solved by having a few
constructor
years that always call a general-purpose
constructor that's going to eliminate
all the duplication in regards to
assigning values to your different
fields inside of your constructors let's
jump back in and look at some more code
and you can see here is another example
where I'm using football players and
each one of these gonna have a name a
college and then I'm going to have their
best for - your - number of bench
presses and their best 60-yard - and of
course here's just some different
methods that are going to get me all of
these fields up here and you can see
right here here is a constructor that is
going to create a football player and it
is going to get a name get a college
40-yard dash and 60-yard dash and it's
going to assign all those values to
those fields and then it's going to do
the same thing where it's going to
receive player name college for your
dash and in this situation instead of
six yard dash it's going to get bench
press reps and you're gonna see that
it's again assigning player name
collagen for your dash and then down
here again you're gonna say that it's
assigning player name college for your
dash bench press reps and 60-yard dash
how can we eliminate all of the
duplication in regards to assigning
player names college and all these other
different things numerous different
times the answer is of course chaining
constructors while creating a
general-purpose catch-all constructor so
let's just come in here get rid of all
of this waste and we're gonna keep this
guy right here and he is going to be our
catch-all and he's gonna have player
name College 40 or - 60 order - and the
one thing that's missing here is bench
press reps so we're gonna copy that sky
and throw him inside of there and there
we go this is going to be our general
purpose guy and all we need to do is go
this bank is equal to benchpress reps
now we have one constructor to work with
and then we just have to create
constructors for the other guys man
might as well just copy this here save
myself a little bit of time so there's
football player now the other
constructor we had here did not include
60-yard - so we're just going to
eliminate 60-yard - from that and then
inside of this we just need to call the
constructor the main constructor and we
can do
that just by calling this and then we're
gonna go player name College 40-yard
dash reps benchpress and then for the
one thing we don't have we're just going
to put zero point zero inside of there
and there we go
and then to handle the other needed
constructor we just need to pretty much
do exactly the same exact thing except
in this situation we're gonna replace
bench press reps with the 40-yard dash
or the 60 yard dash I mean so there we
are replaced and then in this situation
this is going to be the 60 yard - number
that is passed into it and this guy if
you didn't do any bench press reps we're
gonna have it be zero and if we file
save it you can see down here I created
a generic guy I'm going to execute it
and there you can see it work so those
are two bad smells in a general overview
of what I'm going to be covering in the
code refracting tutorial please leave
any questions or comments below or
anything you want me to make sure that I
cover in this tutorial otherwise till
next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>