<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Learn to Program 19 Python SQLite Tutorial | Coder Coacher - Coaching Coders</title><meta content="Learn to Program 19 Python SQLite Tutorial - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Derek-Banas/">Derek Banas</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Learn to Program 19 Python SQLite Tutorial</b></h2><h5 class="post__date">2016-08-20</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/yCA5Wzdkfag" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">well hello internet and welcome to part
19 of my learn to program series in this
part of the tutorial I'm going to show
you how to work with SQLite databases
inside a Python and a database just
makes it easy for you to organize your
data for storage as well as provides for
very fast searching of that data and I'm
going to focus really in on how to work
with SQLite databases in this tutorial
specifically on the Python end but if
you want to really get good at working
with them what you should do after you
watch this video is watch my SQL Lite
tutorial because there's no point in me
going and reviewing things that I've
already created so that tutorial is
going to be ready for you as soon as
you're done watching this one and then
you'll know just about everything about
SQL Lite so I have a link to that
tutorial in the description underneath
the video so definitely check it out and
I have a lot to do so let's get into it
okay so what we're going to do here is
I'm going to show you basically well
let's go and first cover our imports if
we want to work with SQL Lite inside of
Python you have to import the SQLite 3
module and I think I might need a couple
other different things here I think I
may use the SIS model I may not and I'm
also going to maybe use the CSV name not
going to use that one all right so just
those two modules that's all we're going
to need now if you want to connect or
create a SQLite database you're going to
do it in the same way you're going to
just call SQL Lite 3 followed by connect
and then test DB or whatever you want
the database to be called and if test DB
isn't already created it will create it
for you otherwise it will just connect
to it and if you're wondering where this
is going to show up it's going to show
up wherever you have this file stored so
I'm cool using Python py the directory
where that is is where you will have
your SQL like database show up and we
can come in here and we can say
basse created and then after that we can
close the database you always want to
close your connection and you do that by
just calling closed and then here we
could say something like database closed
all right we run that you're going to
see database created and database closed
and if you go and look in the directory
where you have everything saved you're
going to see testdb
is right there so exactly like I said
now if that was all you could do with
the database it would be pretty boring
so how let's go and create some other
things now a cursor is going to be used
to traverse the records of your results
you're going to issue queries or you're
going to say basically what a query is
is just a request for information and a
cursor is going to allow you trigger to
traverse through all of the information
that is returned and to create that you
just come in and reference your database
connection and then call the cursor or
function after that and then what we
want to do is we want to create a table
so to create a table you just go DB
connect once again and then you're going
to call execute and execute execute
execute a SQL command and we're going to
organize our data in tables by defining
their name as well as the datatype for
the data so let's go in here and let's
just create that quite simply what
you're going to do inside here is you're
going to say create and it's very common
to have the SQL specific commands be in
uppercase so we're going to say we want
to create a table and it is going to be
called employees so pretty simple it is
going to have inside of it a unique
identification number and then I said we
have to also define the datatype so
we're going to have that the integer and
I'm going to mark this as a primary key
and a primary key is just a unique value
that's going to differentiate each row
of data inside of our table because we
need unique things inside of here and
it's going to be a number that is going
to increment every single time a new
employee is created so we're going to
mark that as Auto increment
what that means is it's going to start
off at one whenever you create the next
one it's going to automatically
increment that to two and so forth and
so on and I'm also going to say that it
can not be marked with the value of null
null meaning that there is no value or
that the value is null so we definitely
want each of the employees with the work
that we create to all have unique
identification numbers and they must
have those numbers and inside of it I'm
going to say that we also want to have a
first name stored and that's going to be
text and basically there are five
different types of data types there's
null which is what I talked about before
there's integer which is going to be a
numeric value without decimals text is
going to be a string of variable length
real is going to be a float or a number
with decimal places and then blob is
used to store binary data don't worry
too much about blob right now I cover
that in more detail in the SQLite
database all right so we're saying that
that can't be null and then we're going
to come in and have the last name also
be defined and that's going to be text
and not null and we're also going to
store age inside of it it's going to be
an integer and let's have that be not
null we're going to have an address
inside of it have that be text salary is
going to be a real value and you could
also store a date inside here so let's
say we wanted to have it be the hire
date and we can put those in a couple
different places go to I'm going to put
them in just simply as text then you
close off your command right like that
and now after we have set that that's
what we want to execute we then call DB
connection and we're going to call
commit which is going to have that be
executed and then we can have something
like prints and table created and of
course another thing we can do and
probably should do is come in here and
say something like try and handle any
exceptions that might have occurred so
let's tab that in as well and then if we
want to catch our exceptions that's
normally going to be SQL Lite 3 dot
operational error and then here just to
keep everything simple we're going to
a table couldn't be created another
thing that's also kind of useful to note
is how to delete a table if it exists so
let's say you wanted to delete this
table and then recreate it how you would
do that is go DB connect and then call
execute and then you could call drop
table just like delete drop table if
exists and then we'll type in employees
and then of course we would also come in
and do a DB connect and a commit on that
guy and we can run it and you can see
here database created table created
database closed okay so we know that all
that went through okay so we know how to
create tables and how to delete them so
now what we're going to do is cover how
to insert data into a table
so let's just come after here but before
we close our database and to do that
just again DB connection once again you
could also use the cursor as well to
execute these commands and in some
situations you have to but I'm just
going to continue doing it this way so
so all we do is we say insert into
whatever the table name is and then we
define the data that we're going to be
entering in and you'll notice here I do
not have ID here and the reason why is
it's auto increment so I don't have to
put it in there it's going to
automatically create it for me and auto
increment it so you're going to list all
the different things you're going to
want to put inside of this database and
there's higher dates and that is going
to be everything that we have here so
for and then I'm going to close off the
parentheses there and then what you do
is you follow that up with values and
all of the values you want to sort
insert into those specific pieces of
data so Derrick and - and also note I'm
using different quotes inside here
double quotes and the outside single
quotes on the inside that's perfectly
fine 41 and
age and we can go and throw a address
inside of there and since I can give
myself any amount of money I could
possibly ever want I'm going to get
myself five hundred thousand dollar
salary that would be pretty nice and
that's integer but make sure we take
that out of there
so that we don't cause any problems and
then finally I want to put the date in
the employee was hired and there's a
nice easy way to do that you can just
type in date and then now inside of
there like that and just like that we
are able to insert an employee into our
database so pretty easy stuff we're then
going to call the database connection
and we're going to call commits to
execute it and then I'd like to print
out this information so what I'm going
to do is I'm going to create a function
and let's call it print DB and I'm going
to use that to print out all the
information in my database so I'm going
to scroll up here and I'm going to
create this guy right here so let's say
I want to call define and print DB or
database and inside of it let's go and
retrieve the data from the table and
we're going to use a command called
select to do that I'm going to put it
inside of a try block here though just
to be protective so I'm going to say
result is equal to and here I'm actually
going to use the cursor just to show you
you can use either of these and we'll go
and go select and the specific
information I went back which is going
to be the ID let's make sure it's the
same though top see I have uppercase ID
right there so let's put uppercase ID
right there then we get the first name
the last name the age
the address and there's tons of
different commands you can use with
select to get specific information but
like I said watch the SQLite database
after the database tutorial after this
and then you'll know everything there is
to know about SQLite and there you go
alright so that's how we're going to get
all that specific information from
inside of our database that's going to
get us all of our results and then after
we do that we can cycle through those
results so we'll go row in result and
then print out this information and how
we can get it is just by going row to
get the first piece of information then
we're going to do this for a whole bunch
of these other guys Oh F named and LM
age address salary and hire date and
then we'll just increment these because
they're just a list so there we go and
then we'll catch any exceptions that we
might have had here so accept and we
could say SQL 8/3 operational error and
we could do prints something like the
table doesn't exist or whatever of
course we can catch any other errors
that could potentially be issued and we
could say say couldn't retrieve data
from database and in these situations
very often you would use a finally which
would close the database but I don't
want to do that because that's going to
mess up my tutorial that I have here and
now that I have all of that all set up
we can run it and once again we're going
to insert this information into the
database and then we are going to call
for that information to print run it and
there you can see it did say it printed
out all of the information that I have
stored inside of my database so pretty
cool stuff you're also going to be able
to come in here and update information
in our database
and use the update command for that and
very often you're going to use something
that's unique like the ID is unique so
you could say try call your database
connection and execute and like a set
you're going to use update from and then
it's going to be whatever the tables
name is and then you're going to use a
unique ID so you're going to say
something like where ID is equal to one
we only have one thing in there so
that's pretty much what we have to use
and then we're going to come in and
database connection again and commit and
paste in that exception right there and
table couldn't be updated and otherwise
we're going to print out the new
information and run it and whoops I
forgot to actually update something so
so let's go update employees whoops I
don't know what I was thinking there and
here is where you're going to call set
and then address is equal to and we're
going to update the address we're going
to say that I moved across the street so
let's just change this to Street and
everything else is exactly the way that
it should be so let's run it sorry about
that little error and now you can see
the address has been updated right there
okay okay so I know how to input
informations create tables and all this
other stuff and update tables now of
course we're probably going to also want
to come in here and delete individual
rows or individual table parts and how
we do that let's go and use a try block
again and really go database connection
and this would work much better by the
way if all of these individual pieces
were inside of separate functions so
we're going to say execute and if you
want to delete something you type in
delete from the specific database you
want to delete from and then you're
going to type in some unique reason why
that information is deleted well we only
have one customer or one employee inside
of here so we're going to say ID is
equal to one and database connection
once again and commit and that is going
to execute that for us guess what we're
going to use this once again
and paste that inside of there and run
it and here that guy is going to be
deleted which you'll see here in a
moment okay so that's how we delete
individual employees we could also let's
say that we made a mistake and we
decided we didn't want that to go
through we can say that we want our last
command to be rolled back so that it
never occurred you just call rollback on
it
and there you go now that's just as if
we did not delete that whenever we call
that you're also going to be able to add
new columns or pieces of data you want
to add to a table and how
do that let's go try again and we get a
database connection and execute and
alter table and we can say employees the
guy that we want to work with and add
column and let's say we wanted to put a
picture of the employee inside of there
we could say image and blob and give it
a default value of null and DB connect
commit is so now our tables are also
going to have a piece of data inside of
them called image and they're going to
have a default value of null and it's
going to be a blob and we could throw
this inside of their table couldn't be
updated seems pretty good to me so just
leave it that way we're also going to be
able to retrieve our database table
names and to do that you have to use the
cursor and we'll say execute and then
inside of this will say pragma table
info and then inside of here you're
going to put in the specific table you
want to return information on then after
that we're going to be able to fetch all
of those different results of what we're
going to do is we're going to call this
row names is equal to and we're going to
use a function called fetch all which is
going to return all of the rows of data
we're looking for call this name tuple
so we can display it a little bit better
and we'll say for name tuple in call the
cursor and then fetch all and then we
come in here and print out all of our
row names run it and there you can see
printed out all of the different row
names IDF name L name that it added up
and you can also see images there
remember we changed the our table so
that we had image inside of there it's
also there a couple other random things
we can do let's say that we wanted to
get the total number of rows stored
inside of our database we could do that
execute select and you use the command
count to get that guy from employees so
SQL is pretty easy to figure out just a
little bit of practice you'll get pretty
good at it I mean it makes total sense
basically it's and select from the table
of employees the total count
of employees all right so pretty simple
stuff and let's call this num of rose is
going to be equal to the cursor and then
once again we're going to use fetch all
to get all of those results and then to
print out that information it could say
something like total rose and then
follow that up with gnome of rose and
we're going to go 0-0 that guy and run
it
total Rose is going to be equal to zero
why is that well it's because we went in
there and we deleted our only item
inside of there whenever we came up here
and say delete from employees where ID
is equal to one so that's the reason why
that comes back at zero create a whole
bunch of employees and test that out
another thing we can do which is
sometimes useful is get the SQL Lite
version that we're working with and to
do that we could say execute and we say
select SQL Lite version and that's going
to be a function and then to get that
guy and print it out let's go SQL Lite
version and then we're going to call
cursor again and here we're going to
call fetch one because there's only
going to be one result so that's one of
the situations which you use fetch one
instead of fetch all and you could say
there is the SQL Lite version we're
working with another thing that is
sometimes useful is to use what is
called a dictionary cursor to retrieve
data in a dictionary and to do that
we're going to say with our database
connection then you're going to call
database connection and row factory is
going to be equal to SQL light three row
we're going to recreate our cursor to
cycle through the results of this and
database connection once again and call
for a new cursor and then what we're
going to do inside of this is select
everything from all of the employee
tables and just like this execute and
how you do that is you
select everything from employees create
a new variable called rose and let's get
all of our results from that so fetch
all and now what we're going to be able
to do is cycle through this so we'll say
for row in rows and then print out all
of those results so we're going to use
format here and specifically let's say
that I just want to get the first and
last name and then format them on the
screen so we're going to say row and and
then inside of brackets we're going to
put first name and then we're also going
to do the same thing for the next one
row that and last name and let's go in
here where we were deleting things so
that we actually have some information
so this guy right here we're going to
come in here and comment out that block
let's give this get rid of that after
that duh let's get rid of the role back
to and run it and you could say that it
went and printed the only piece of
information out which is Derrick Vanus
if you added more in there you would
have gotten more results though of
course and then the final thing I'm
going to show you how to do is how to
write data to a file and this is very
useful if you want to backup your
database data so you could say with open
and we're going to store all this into a
file called dump SQL I'll show you here
in a second we're going to write
information to that rid of that extra
quote and then we'll say as F and put
that extra quote in there like that and
now what we're going to do is go for
line in connect and we're going to call
a function called iterator dump and this
is going to return an iterator to dump
the database into SQL format which
you'll see here in a moment and then to
write to it right to the file will go F
right and this is going to be a string
and new line in the line we're going to
be writing inside of there and if we run
it whoops got a little bit an error can
throw s in there for the string sorry
about that
run it again and now if we go and look
in our directory you can see it right
here so where is it
don't SQL and if we open that you're
going to see right here is everything we
would need to do to recreate our
database and repopulate our database
there you go guys that is a rundown of
how we can use SQL Lite 3 with Python
and now you should go over and watch the
SQL Lite tutorial and then you'll know
everything about SQL Lite and using SQL
Lite with Python and like always please
leave your questions or comments below
otherwise until next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>