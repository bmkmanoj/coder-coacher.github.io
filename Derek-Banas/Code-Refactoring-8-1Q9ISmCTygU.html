<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Code Refactoring 8 | Coder Coacher - Coaching Coders</title><meta content="Code Refactoring 8 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Derek-Banas/">Derek Banas</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Code Refactoring 8</b></h2><h5 class="post__date">2013-01-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/1Q9ISmCTygU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">well hello internet and welcome to part
8 of my code refactoring tutorial today
I'm going to show you how to eliminate
duplicate code using the template method
pattern so in going through and
explaining how the template method
pattern works in this refactoring the
template method pattern actually fits
into a part of code refactoring called
generalization and what it is used to do
is transform specific code into general
purpose code and in so doing this is
going to simplify as well as remove
duplicate code now the template method
pattern itself is going to help you
eliminate all that duplicate code and
you're gonna know when you need to use
it when you notice that objects are
performing similar steps in the same
order in that situation you're gonna
implement the similar code in what is
called a template method and then allow
subclasses to override the behavior that
is gonna vary so Knuffle breeding a
presentation and let's just start
writing some code okay so let's just say
I kept this very very simple so I'm a
hundred percent pause if you're gonna
get it let's say you want to make a
series of different class objects that
represent different types of sandwiches
how might you do that well you might
just come in here and create yourself a
boolean or a whole bunch of boolean that
are going to represent for example if
the customer wants condiments and I'm
just gonna leave it there and just
imagine that there's a whole bunch of
different boolean x' then what would you
want to do well you'd have to create a
constructor of course that is going to
have to accept all of these different
types of boolean x' like this one but of
course there's gonna be many many more
and it's gonna handle what differs
between all of these different
sandwiches and we're gonna have to
assign these to whatever is passed over
inside of here which is gonna make for a
kind of complicated constructor but
either way then what are we gonna need
to do after we handle all of those
different boolean swell we're gonna have
to come in here and we're gonna have to
make our sandwich for each one of these
different sandwiches and what are some
of the things that are the same between
every sandwich well for the most part
anyway
you're gonna have to cut a bond if you
want to make one maybe add meat
definitely if it is going to be a
hamburger then add
two bowls of course and all the code
that is available underneath of the
video if you want to look at it do
whatever you want with it then on top of
that of course if a whole bunch of these
other guys up here already didn't have
it you're gonna have to go through all
of these different Bowl Ian's and you're
gonna have to check to make sure that
you are making the right type of
sandwich for them on the mints so there
we are if we are we're gonna call the
add condiments method and then after
that's all setup we're gonna wrap up our
sandwich and it's gonna be ready to go
now let's say that we also wanted to
create a veggie sub in veggie sub Java
what is it gonna look like well chances
are it's gonna look a heck of a lot like
this hamburger we're still gonna use a
bun add meat well that's something
that's gonna differ like I said before
we have a way to handle situations where
different methods are needed inside of
these class objects add vegetables well
it's a veggie sub it needs vegetables
we'd still like to give them the option
of whether they want condiments or not
and we're always going to wrap the
sandwich so really the only difference
between making a hamburger and making a
veggie sub is this method right here so
this is a situation where the template
method pattern makes a lot of sense so
how exactly are we gonna make it what
we're gonna do is I'm gonna make a
public abstract class called sandwich
dot Java build everything in there and
then extend our sandwiches from the
sandwich dot Java class now remember
this is what we're trying to do here we
want to implement the similar code
inside of the template method what
you're gonna see here in a second
however allow subclasses to override the
behavior that varies and the behavior
that varies between a hamburger and the
veggie sub is the ad meat that's it so
what are we gonna do we're gonna go
public abstract class and this guy right
here is gonna be called sandwich and
then we got to implement all these
different things so what are we gonna do
we're gonna go final void and we're
gonna go make sandwich because we want
to make sandwiches here and then how
exactly is this gonna work well it's
gonna look really close to what you just
saw just to clear things up I think I'm
gonna put in a print line here and have
it be something like a new order
and that we are and then what are we
gonna do well we're gonna cut our bond
just like we did before because all our
sandwiches are gonna require a cut bun
then we might say something like if
customer once meat well then we're gonna
call the add meat method pretty simple
what you notice in here though is there
is new except for the built-in
constructor we're not going to be
passing all this information over like
we normally did inside of that busy
constructor we got rid of that well then
after we decide we want to add meat or
not let's just say we're not giving them
an option we're putting vegetables on
there whether they want them or not and
we might also ask them however if they
want condiments and there we are if
customer wants condiments we're gonna
ask them and if they want condiments
we're gonna call the add condiments
method and then we're gonna go wrapped
sandwich and get that sandwich ready for
them to eat then what you wanted to fine
are all of the methods that you want to
be overridden by subclasses and how
they're gonna stand out is they're gonna
start off with abstract void which is
gonna force them to be created inside of
the subclasses and right like that and
the other one is gonna be abstract a
void and this is gonna be condiments so
by defining them as abstract that means
they must be overridden then you're
gonna have to add all of your methods
that every sandwich is gonna use so
public lloyd cut bond like we defined
both and in that situation we are going
to just come in here and say something
like the bond was cut and there we are
thankfully there's no cheese on any of
these sandwiches and then we're gonna
come in here also and public void add
vegetables and this is gonna be
something else that every one of these
is gonna have and to keep myself and
typing out everything let's just go
system out and let's just say we got
lettuce onions and tomatoes and now we
are so we have that also set up and what
is something else that all these are
gonna have well rap sandwich so we're
gonna come in here and go rap sandwich
like that and then inside of this we're
gonna print the
sandwich was wrapped and there that set
up so that's good
then what we're gonna have to define or
what are called hooks these are going to
be methods that can be overridden
remember abstract when that's in the
beginning it is going to force all of
these subclasses to override those
methods these are going to be optional
and this is also the reason why we don't
have bullying's all over the place
because we're gonna find these inside of
methods here we're gonna say a customer
once meet if we think most of our
sandwiches are going to require meat
we're gonna give this a default value of
true and that's gonna save us a lot of
time and we're also going to come in
here and go customer once condiments if
we think most customers are gonna want
condiments we're also going to mark that
as true and there you go all set up and
sandwich Java is also set up so let's
now take a look at hamburger now it's
gonna change so here we are inside a
hamburger now remember sandwich this guy
right here is the template method and it
is mark final that means this guy cannot
be made in any of the sub classes so we
are going to be forced to get rid of
make sandwich gone so make sandwiches
now going how are we gonna fix this well
I'm actually gonna call so come in here
and get rid of these guys right there
don't need any of those because the
template method is gonna handle that for
us and inside of the hamburger class
well of course we're gonna need to go
extends sandwich and then that's gonna
give us an error because we need to add
unimplemented methods just come here
click on add-on implemented methods and
one of them is going to be add meat now
we're just gonna have to come in here
and define what is different because
remember adding meat is something that
we must override so we're gonna go
hamburger added and there that is that's
all setup and the other thing that needs
to be overridden here is add condiments
and here we're just gonna come in and
put special sauce added if I'll save all
done so as long as we don't need to
override any of these guys down here
customer wants meat they do customer
once
condiments they do we don't have to pay
any attention to us however in veggie
sub Java we will so how we gonna set up
veggie sub well pretty much same where
we're me a public class veggie sub
extends sandwich I like that and it's
also gonna give us an error add-on
implemented methods and there we are so
that's all set out one thing that's
gonna change about this is we are gonna
come in here and we're not gonna want me
Thanh our veggie sub so how are we gonna
define that inside of here we're just
gonna come up here and override it by
going boolean customer once meat put
that there and whenever it's called for
the sub class it is gonna return false
and what else do we need to do well add
meats not gonna do anything so let's
just go in there and delete that and
then down here add condiments well we
want those in this situation so we're
gonna go system.out.print line and then
put something like vinegar and oil added
and there we are got that all set up and
guess what everything else is set up so
now we're gonna go into cook dot Java
and we're gonna take a look at exactly
how we're gonna run all this so if you
want to create a new sandwich now we're
just gonna go sandwich and let's say the
customer one that comes into our new
store says I want a hamburger and you
say ok hamburger and there we are we
just got that all set up and if we want
to make our hamburger we're gonna go
customer one and make sandwich like that
and the sandwich will be made now if we
want to do the same thing and the next
customer wants a veggie sub no problem
we will make you a veggie sub and we'll
just put that right there and if we want
to initiate the order we're gonna go
make sandwich just like before except we
want to make that sandwich call that and
if we execute this guy doink
new order pops up here and then we see
here Bonnie's cut hamburger added
lettuce onions tomato special sauce
sandwiches wrapped and then the next one
bonus cut lettuce onions tomatoes
vinegar and oil added sandwich is
wrapped and that is the template method
feel free to leave any questions or
comments below otherwise till next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>