<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Create a PHP Forum Pt 4 | Coder Coacher - Coaching Coders</title><meta content="Create a PHP Forum Pt 4 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Derek-Banas/">Derek Banas</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Create a PHP Forum Pt 4</b></h2><h5 class="post__date">2011-03-24</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/ZvktSa9guvw" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello internet and welcome to part 4 of
my PHP message board tutorial where I'm
going to show you all that goes into
creating a message board and on to a
certain extent gonna make this about as
complicated as it can and as gazillion
different features and this is also a
review of pretty much everything you've
learned throughout my web design
tutorial well in the last part of this
tutorial part 3 if you haven't seen it
definitely go back watch it otherwise
this will be confusing because I'm gonna
jump right into this and act as if
you've already seen that tutorial back
then we created a link that was emailed
to the people and you can see here all
the workings that went into creating
that link so that whenever the person
was emailed this link they would then
click on it and it would then activate
the account if they did not activate the
account through email they would not be
able to log in it's a security provision
what we did was we took what you have
right here this link right here and then
followed by X is equal to this is gonna
be their user ID and then this is going
to be their activation key and if we
jump over to the terminal you can see
that the user ID right here is 1 and
then the activation key is this gigantic
thing that somebody's not gonna be able
to guess and also funny enough I
actually spelled my name wrong but
either way let's get rid of that and
let's jump over to the browser so what's
gonna happen is they're gonna be emailed
something they're gonna click on that
link and then all this information is
going to be here of course it's not
gonna say localhost it's gonna be
whatever the website is and then you can
see here X is equal to 1 and Y is equal
to and this is the activation code well
if they click on that and go there
you're gonna see the account is now
active and you may now log in so
everything is all set up and if we jump
over into the terminal and rerun this
you can see now that this is set to null
and the account is now active so now I'm
going to get into exactly all of the
code that goes into creating this
activation script and all of the code is
on new think tank comm you want to
download it now we're gonna create the
rest of our program here so what we have
here in the beginning is just a header
section which we talked about in
previous tutorials this is the login
section which is going to put up links
based off of if the person is logged in
or logged out that is all that I have
pre done just to save myself a little
bit of time and now I'm going to jump in
here it's just start right in this code
so again this is the page that they're
going to go to to activate their account
so I'm just gonna put an h1 tag in here
activate account alright
at the top of the screen everything else
is the same from before PHP now I'm
gonna be sending two variables ones X 1
Y X is equal to the user ID Y is equal
to the activation code and so I'm gonna
say if is set meaning if these X and y
variables are sent I'm gonna then
perform some operations upon them to see
if the information sent is valid and I'm
going to check if the user ID was sent
first off and if it was I'm gonna set
this to an int because I know it's gonna
be an integer I want to treat it as such
else if X was not so I'm gonna set the
value of x equal to 0 or false and then
I'm gonna check if Y was sent which is
the activation key I'm just gonna copy
this scroll that up and put Y inside of
here
but Y right there and Y right there
except the activation code is not going
to be an integer it's going to be a
string so I'm just going to get rid of
that because I don't want to convert it
to a string and again I'm performing
exactly the same tests and then I'm
going to check to make sure that X is
greater than 0 because it has to be and
string length of y is equal to 32
because we know ahead of time that this
is going to be a 32 length activation
code if all of those things are true I
want to set activation to null where
user ID is equal to the user ID that
they passed and active is equal to the
activation code that they passed over
and I'm escaping data for security
reasons this is in the header file to
make sure nothing bad was passed along
to this guy
I'm gonna limit this result of 1 and
then I'm gonna store the result of this
query or if there was an error I'm going
to trigger an error message and then
it's up to you if you want to actually
put the error out there to screen if you
wanted to do that but you probably don't
but if you did that's what you
definitely like that I'll scroll this up
now I'm gonna print a customized message
to them based off of my result if the
end number effective Rose is equal to 1
because if they're performing that query
and they haven't messed around with it
to try and break through some sort of
key security there's no way it could
possibly affect more than one Rose now
let's put an h3 tag and say your account
is active you may log and
and enclose off the h3 tag else if more
than one row is affected well you'd
actually probably want to tell your log
files that somebody's messing around but
let's just say let's just copy this and
paste that in your account is a mess
that's you definitely wouldn't want to
do that that would be fun
okay I'm gonna put else in here I'm
gonna get define exactly the URL that
we're then going to send them to we're
just going to be the hosts if we
currently are on and then we're gonna
take their current location which is
what the variables in this array do
there may be a trailing slash which
we're gonna want to get rid of so if
there is a tear trailing slash like that
or an substring is just taking a sub
part of that string and negative ones
gonna get me the very last part of that
website address they're currently at and
if it is there you want to get rid of it
because we're gonna slap on our own page
and this is the page that we're going to
be sending them to which is just index
and actually send them to the index page
we're gonna call header and change the
location to URL which is the index for
the current site that they're on which
is going to be my site and then after
that you're gonna want to exit out of
the script and actually previous to Xing
out of the script you're gonna want to
close the database connection as well
and then put a curly brace in there and
then that's it and that is how you
create the activation page for your
website and that will help you with
security and it will help you with
numerous other different things and I've
already showed you exactly what that's
going to do and next part of the
tutorial we're actually going to be able
to log in if you have any questions or
comments leave in the comment section of
the villa otherwise till next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>