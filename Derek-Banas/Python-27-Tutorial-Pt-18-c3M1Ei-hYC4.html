<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Python 2.7 Tutorial Pt 18 | Coder Coacher - Coaching Coders</title><meta content="Python 2.7 Tutorial Pt 18 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Derek-Banas/">Derek Banas</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Python 2.7 Tutorial Pt 18</b></h2><h5 class="post__date">2010-11-20</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/c3M1Ei-hYC4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">well hello internet and welcome to part
18 of my programming with python 2.5 3.7
tutorial today I'm going to show you how
to make a basic chat server and I'm
gonna use two different modules I'm
gonna use the Aysen core module and the
ACE in chat module and basically what
we're gonna do here to make this more
simple is the data or the information
that's being passed in is going to be
sent to what we call a dispatcher in
this module and you could think of that
as a socket if you'd like and then
you're gonna have the port that we're
going to define to listen for incoming
data and all that information is then
going to be processed by methods inside
of this module so if you want to think
of this port as the end of a hose then
you would think of these sockets as
little connectors attached to the end of
the hose and all the data flows through
the multiple sockets into the one port
and then this module processes
everything so hopefully that makes sense
this is going to allow for people to all
log into the same port and talk to each
other so the first thing we need to do
is to import our modules that we are
going to need here's the dispatcher I
talked about earlier a nascent core
basically what it does this module is it
reads all the information passed to
whatever does fine port that you tell it
to look for and it just continually just
checks and checks and checks until it
gets information and the dispatcher like
I said serves as a socket that stands
between the data sent to the port in the
application that will interpret that
information and I typed import in here
twice like I like to do and we're also
gonna need the ACE in chat module and
this basically is going to allow us to
easily read and write to the socket so
we're gonna read information that comes
into the socket and then we're also
going to output information from the
socket using this little guy and finally
the socket module and then we have to
define a port that we want to use let's
just say it doesn't matter on this let's
say 5,000 and we have to give it a name
and I'm just gonna call it basically
what I'm doing here is I'm importing all
of these modules and they have defined
methods that I need to go in
override and all of this information is
basically taken from that website the
creators of this module with some
changes here and there and I'm making a
call to the constructor calling the
constructor for async chat and if you
wanted to do this you basically can just
copy the code that's all it is I mean
you're just when are you working with
modules inside of Python I guess I
haven't really done this before
but a lot of the things you're gonna do
is just import the said module and then
define a couple specific things but for
the most part if you want to create a
chat system you're gonna follow this
basic rule and the Terminator basically
is a newline statement so what's gonna
do is every time a new line is entered
meaning the person hits type something
in and then hits enter that's going to
signal to the dispatcher that it needs
to send that information somewhere and
here we're just going to store that
information in list and this next
collect incoming data is just called
whenever text is passed through the
socket again I know to use these methods
because the module specifically tells me
what methods that I need to use and how
I need to override them so it's
basically just copying I'm not doing
anything really amazing here in here I'm
going to define what to do when somebody
types in a new line what this guy's
going to do is every time I new line is
signaled or it goes through it's
basically going to notify everyone else
who's connected to the same port that
new information is mid-time use the join
method create another list all that data
and then the next line of code is going
to send all the data sent to each client
currently connected I'm gonna define
this Ballou hopefully this is
understandable this is why I don't do
network programming stuff because
something this starts to become a little
bit complicated and just send it that
string that I called line and then
you're also going to have to define
what's going to happen when a connection
is closed and this method service
basically going to be called whenever
somebody disconnects from the server we
just want to say we want to disconnect
them and I could have this set up so
that would only allow people to log on
with the user ID and password but I
thought that was getting a little bit
complicated
and here I'm defining the dispatcher or
the actual pipe controller ends I'm
gonna have to call the constructor and
send it to port and the name that we
define and here we're just going to
actually create the socket using again
already defined predefined methods that
the module tells me to enter and here
I'm going to use transmission control
protocol which is pretty much standard
across the internet and I define that by
typing a F I and II to again this is
just copy and paste if you want to use
this Sox dream means that there's going
to actually be a real connection to the
port and then as some protection and
basically with this next method I'm
going to protect and keep the port open
even if somebody disconnected from said
port in the wrong way find this just
basically binds the socket to the port
that I specify and here I'm going to
define that I'm going to listen for any
incoming connections with a maximum of
five total queued connections and here's
a list for all the different sessions
and then I'm almost done actually I have
to come in here provide the disconnect
method and then here is broadcast this
is called anytime anybody sends
information to the server what it's
gonna do is send it to everyone else
who's currently connected to said port
it's just gonna cycle through all the
current sessions and use the push method
to send the same message to everybody
and I'm just gonna put these dashes in
here so that are these two carrot braces
anyway just so you can tell the
difference between what you type in in
comparison to what is being sent out and
line is just going to be the string that
was sent and I'm going to signal a new
line and this is going to be called
whenever the server accepts a new
connection and this allows the new
client to connect to the server and
whenever a purpose client is assigned to
the server is going to assign them a
socket that is special to them and with
this method we're gonna add a new
session to our list and and here I'm
gonna set it up so that this would
actually operate if this program was
running on its own I've already talked
about this in previous tutorials which
is obviously going to run on its own and
chat server here is going to keep a list
of all the current sessions connected
and here we're gonna set up some
protections with exception handling and
this loop right here is just continually
gonna check over and over and over again
if anybody sent a new message and that
is all the code I mean I know it was
kind of complicated I'm not certain that
you got all of it hopefully you did and
we're gonna just run this guy see if I'm
hit any errors and typing and I actually
had to come up here I chose 5,000 port
which was currently in use so I changed
it to 5,000 and 6 so now it works and
then I'm gonna jump into my terminal
here and I'm gonna call talonnet and
change this to sex which is the port I'm
using and connect and if I type in hello
you can see that it's signaled back
hello which isn't very impressive but
let's say I open up another window basic
so now I have two terminals open at the
same time on screen and if I type in
again and this guy is also logged in he
types in hello you can see but that
information these people are
successfully chatting to each other and
type in all bunch of nonsense so you can
see that information passing back and
forth so that's basically how you set up
a chat system using Python and this was
originally supposed to be the last
Python tutorial but Scott sent me an
interesting request in regards to
natural language processing and a whole
bunch of other things so I think I'm
going to continue doing these
little guys here for just a little bit
longer so if you have any questions or
comments leave them below till next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>