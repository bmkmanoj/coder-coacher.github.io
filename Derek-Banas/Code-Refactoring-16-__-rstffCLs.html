<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Code Refactoring 16 | Coder Coacher - Coaching Coders</title><meta content="Code Refactoring 16 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Derek-Banas/">Derek Banas</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Code Refactoring 16</b></h2><h5 class="post__date">2013-02-08</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/__-rstffCLs" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">well hello internet and welcome to part
16 of my code refactoring tutorial today
I'm going to use a question one of you
guys sent to me and I'm gonna show you
how to move embellishments using the
decorator pattern okay so what you see
on your screen is a bad way to add
functionality one of you guys sent me
this code here and it's basically set up
to calculate the price of a haircut
based off of using an enumeration here
and if they want to base a cut a perm or
a hair frosting it's going to
automatically shoot out a description of
the service and as well it is going to
calculate prices and so forth and so on
and the way this program is set up is
every single time we add a new haircut
option or we change a price and we do
anything we're gonna have to go into
this gigantic method here and try to
change everything
that is bad and this is bad because when
whenever we add new features it is
always a bad idea to add new code to
older classes and each time you would do
so what you're doing is making compact
easy to understand classes complicated
because you are breaking the single
responsibility principle which is that
every class should have a single
responsibility now I'm gonna use the
decorator pattern instead to replace all
these special case behaviors or
embellishments as they're called and I'm
gonna put those behaviors into their own
class also by using a decorator pattern
we're gonna be able to satisfy another
solid principle which is something
people keep asking me about and that
principle being the interface
segregation principle by using many
specific interfaces using the decorator
pattern rather than one general purpose
interface we're going to be able to
satisfy that solid principle so let me
just go in here and completely delete
all of this code and let's start doing
it the right way so let's just come in
here and we are going to be programming
to an interface and it is going to be
haircut
this is a general way to teach the
decorator patterns this is why it
probably came up in the class and what
we're gonna do here is get description
and get cost so those are going to be
two of the methods that we are going to
need for interphase and to create
everything here now I'm going to create
the decorator and what its gonna allow
me to do is add features while keeping
them completely separated into their own
class so I'm gonna go abstract class and
I always try to fit decorator into the
name and this is going to implement
haircut and then inside of this I'm
going to put a haircut field and then
the decorator we will be able to
dynamically customize all of my haircuts
for me as you're gonna see here this is
a very neat pattern so haircut decorator
and is going to be past a haircut object
whenever it is created and then I'm just
gonna grab this guy right here and throw
him in there well first I got to come in
here and go haircut is equal to hair cut
of course now I'm gonna be able to throw
the description in there and I'm gonna
also throw the cost in there of course
there we are and all the code is
available in the link underneath the
video to help you learn this stuff so
now what this is going to do is it's
going to take the haircut object that's
up above stick with me here cuz this
gets really neat really quick and it is
going to return that description and
then down here for cost it's going to
return haircut get cost and there we are
ceased nice simple neat methods very
very simple very very easy to understand
now what I want to do is I want to
represent the most basic type of haircut
and this haircuts gonna be used every
single time before an upgrade to one of
the other options just as we are seeing
here everybody is going to get a haircut
so I'm just gonna call this regular
haircut and it's going to implement
haircut just like before and I'm gonna
come in here and have it add
unimplemented methods for me and then
inside of here
I'm just going to return exactly what it
is going to do so this is just gonna be
trim hair like that nice and simple and
the cost is going to be $10 for a basic
haircut there
go very easy to understand precisely
what is going on there now with a
decorator we're gonna be able to easily
add additional features as well as
calculations without changing the code
that already exists so everything we add
a new feature or wear every single time
we add a new cost no problem we're just
gonna come in here and create ourselves
a new class so if we want to do a perm
which is just rollin hair in rollers in
add constructor for me and then this of
course is going to pay reference to
haircut which is inside of my decorator
see that guy right there so I'm gonna
pay reference to that over and over
again and then I'm gonna come down
inside of here and just create my
descriptions so get description just
like before and this guy is going to
return haircut get description so if
we're going to be adding multiple
different options for haircuts we're
gonna do that so for a perm we're gonna
add chemicals and put hair in rollers I
am just literally typing exactly what
was in the code so I don't know how to
do perms I suppose that's how you do
them ok so public and then we got to do
exactly the same thing for cost so get
costs and here we're just going to be
returning haircut get cost and this is
going to be the haircut that was defined
in the haircut decorator and let's say a
perm cost $75 well there we go we got
that all set up and that is all we need
to do I mean we can of course add more
classes but we don't need to so I'm
gonna come in here and go test hair cut
real simple and inside of my main
function if I wanted to create a new
haircut I just go hair cut and let's say
they want a perm and a cut no problem
we're gonna go new and then we're gonna
go perm which is going to be the extra
added on thing and then finally whenever
we get to this part regular haircut is
always going to be done so great there
that is so this is the added
embellishment the added feature that is
what's going to be in the outmost part
and then the core program is going to be
the final object that we
create inside of there so that's how
that's set up and then let's say we want
to do something like services I don't
know and then if we want to output our
description of the services no matter
how many of these embellishments are
added on no problem
they're gonna do all of them just do
that and then if we want to calculate
our price no problem it's going to add
all of our prices for us we need to add
everything up no matter how many of
these we put in here get the cost and
then we are so let's execute it see if I
did it right there you can see services
permanent cut we're gonna trim the hair
which is the basic guy that we
implemented here for regular haircut and
you can see regular haircut is this
object that we created inside of there
and then whenever we come down to perm
it's going to add chemicals and put hair
in rollers and then it's going to add up
the price for both services this can be
implemented and used in numerous
different ways it's an absolutely
fabulous design pattern please leave any
questions or comments below otherwise
till next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>