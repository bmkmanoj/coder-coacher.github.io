<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>How to Make Video Games 29 : Make Zelda 6 | Coder Coacher - Coaching Coders</title><meta content="How to Make Video Games 29 : Make Zelda 6 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Derek-Banas/">Derek Banas</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>How to Make Video Games 29 : Make Zelda 6</b></h2><h5 class="post__date">2017-12-13</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/FvKq2-RUkjA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">well hello internet and welcome to part
29 of my how to make video games
tutorial series of course we're gonna
continue making zelda today and i'm
gonna show you how to animate the
villains as well as create the code for
the sword attacks we're gonna be using
like always all of the code using this
tutorial is available in the description
underneath this video and i have a lot
to do so let's get into it okay so here
I am back inside immunity and I don't
know why I didn't do this before but I
want to go and change my background
color to this okay so now everything
blends in alright so we got that out of
the way that was pretty easy now what I
want to do is to create and animate some
enemies for or link to fight with so
what I'm going to do is I'm going to go
and get my sprites and open these up I'm
gonna get this one and this one zero and
one and this is gonna be used to allow
my villain to walk to the right and the
left so let's just drop them down inside
of there and I am going to make sure
that I am in my animations folder and I
am going to call this guy enemy walk
right alright so that's a pretty good
name and I'm gonna say save and that's
going to open up or if I open up my
animator or actually I want the
animation window to open up so I'm gonna
click on window and I'm gonna come down
here and click on animation if you can't
see this view at full screen and I grab
animation and put it down here in the
bottom whoops let's go and grab that
again and put it down here and that's
bottom of that now let's also go and get
the animator and throw it down there
also okay so here we go I have enemy
walk right now this is going to go way
too fast
I'm also what I'm gonna do is click on
this and come over to the sorting layer
and come down here and pick villain and
now you can see he shows up inside of
there I'm also going to create and empty
and I'm gonna call this empty game
object villains and that's pretty good
and then grab this and drop it inside of
there and we'll just call this villain
look there we are villain I thought what
villains was spelled kind of weird and
because
that I always spell it wrong so let's
get rid of that and there I have it
spelled right okay so I got my villain
inside of here I'm gonna select the
empty I'm gonna zero this out so zero
zero zero across the board and then I'm
going to position my villain up here in
this area because I think that looks
pretty good so let's go and grab that
and where do I want to move them to kind
of want to move him up into this area
right here that seems to be pretty good
and then we can come in and maybe change
this to 5 and change this to 6 something
along those lines
and then change the 0 to 0 also and
maybe let's take it up a little bit
change this to 7 alright so there we go
I got my villain in place now if we go
and play this animation you're gonna see
he's running pretty quick so what I'm
gonna do is change my samples to 3
instead and hit that and now he looks
like he's moving at a more reasonable
pace so I'm gonna keep it like that I'm
also gonna come in here and create
another animation so let's create this
and let's call this enemy walk left and
just select that and then change this to
left and then click on save and then
that's going to not show anything inside
of there I'm gonna change this to 3
again that's gonna make it a lot easier
to see and I'm just moving the scroll
wheel to be able to do that on the
screen and then I'm going to get 0 once
again and drop it directly inside of
there and then get 1 and drop it inside
of there and then what you could do is
you can actually flip these guys and
everything will work perfectly fine so
we'll just come over here and click on X
flip and everything will be perfect and
if I go play you can see that he's
facing to the left but he's walking
alright so there we go now we've got two
of them done now I need to create enemy
move down so I'm just gonna come in
again create new clip and this is going
to be enemy move down just select that
enemy move down and click on save and
for this one I'm gonna use sprites 2 and
3 and let's just go and change the
sample already so this is gonna be
sprites 2
and Sprite three so grab that drop it
right there and then in the one space
next to it grab this and drop it inside
of there and if we run it you can see
he's walking down all right so that's
good yeah let's go create another line
and this one's going to be enemy move up
and me move up and we can that's what we
called yes and for this one we're just
going to go and get sprite four I don't
I didn't make it an additional one for
the move up animation but that's fun
whoops I'm gonna make sure I have
everything in the right place change it
up to three and grab four and drop it
inside there of course you could have
multiple animations but whatever that's
what I got right now also let's go and
create another one and this is going to
be the idle animation so enemy idle and
that of course is gonna do nothing and
is going to be which one do I want to be
idle probably want to to be idle so
let's go grab two and whoops it doesn't
really matter but oh my god it's this
like that
and two and that's going to be his idle
animation all right so we got all those
saved and I also have my controller set
up here with the animator so all that
set up with my villain can also come in
here and to the animations part you can
see that this is currently set up for
sixteen by sixteen right zero I could
come in here and change the controller
for that so we can call this enemy
controller let's just call it enemy
that's perfectly fun and if we come over
here to villain that automatically
change so that's a good thing like to
add a box Collider to my enemy now and
so I'm just gonna come over here to add
component physics to Z and box Collider
and what am I gonna do with this well
for one thing I want to shrink the size
down so that the player has like a
little bit of an advantage when
attacking the enemy so let's just change
that to 0.7 and we can see right there
that's the Box Collider part is that I
might want to change it later on if you
know the player has a hard time killing
the villain you know why don't we'll see
how that works out and I'm gonna leave
is triggered turned off for now and I'm
gonna go again
physics 2d and this time I'm going to
add a rigidbody
and that's so that the villains gonna be
able to dynamically bounce off of a
couple other game objects that I create
here in a minute so it looks like he's
pacing around so what I'm gonna do for
this I want to first off freeze the
rotation for that so that it doesn't go
in circles I want to minimize mass a lot
because I don't want him to have a lot
of effect on his environments I'm going
to check for collisions constantly and
gravity scale I want that to be zero
otherwise he'll slowly fall off the
screen so we don't want that all right
so we got all that set up now what I
want to do is I want to create two
empties inside of this villains area so
I'm gonna get physics and create empty
and I'm going to call the very first one
villain start and this is going to be
the starting area thing that it's gonna
bounce off of and I'm gonna create
another empty and I'm gonna call this
once again villain ends it's not sound
good yeah it sounds good and I'm gonna
drag those inside of here so start and
end and there they are now I have my
enemy currently set at five seven so I'm
gonna put the start like right here so
let's go to this and change it whoops
to five whoops there we go five and
seven and how about we make it four
instead and so that I can see it I'm
gonna click on this little guy up here
and put a little dot see there you can
see it's not gonna show up in the game
but it's gonna help us know where stuff
is so we're gonna keep that there and
I'm going to want another one like right
here so that should be something like
five six seven eight nine ten something
like ten let's go and see if that's
right select all those change it to 555
five and it will change
well actually this one's gonna still be
seven and then this one's gonna be ten I
think so we'll get that and then we'll
go and get this and soon and that's
perfect that's exactly what I was aiming
to do I'm also gonna want to put box
colliders on this so that the villain
will hit them and then we can react to
it so I'm gonna go get this and fizzy
Toodee and box colliders and I'm gonna
shrink these box colliders down a good
bit so let's change it down to like 0.5
and 0.5 so it's a little bit more about
the same size as this and is trigger is
going to also be these box colliders are
gonna define what happens when the
villain hits and once again box Collider
is trigger and then shrink this down so
both of them are exactly the same good
stuff
now what I need to do is go and have the
villain react so I'm gonna go into my
scripts area and I'm gonna create a new
script so c-sharp script and I'm going
to name this guy villain so villain and
there that is and there's villain and
then I'm gonna open it up now before I
go over and create my villain code I'm
was asked by a lot of people to use
monodevelop so how you do that is you go
edit and preferences this is instead of
Visual Studio everything's the same key
code wise either way so I'm gonna use
monodevelop just for the heck of it and
that's all you do you just come in there
external tools and then change it to
monodevelop instead of Visual Studio
2017 or 2015 ok so I'm going to use mana
developed for the rest of this tutorial
alright so here is our villain what are
we gonna need to track with our villain
well I'm going to probably have to tweak
the speed that our villain moves in so
I'm gonna make a public field for that
and also the villains gonna start going
in and to the right whenever it first
comes on the screen so I'm gonna go
vector 2 and direction and equal to
vector 2 right so as soon as it appears
on the screen its gonna start going to
the right and then we're also gonna
change the direction as you know it
continues I'm also gonna have to track
if I'm chasing a link or not and I'm
gonna set that as false it's just gonna
basically bounce back and forth until we
get to the part where we start chasing
link around I'm also going to get a
reference to an animator so that I'll be
able to change the animations for my
villain and I'm not gonna use this right
now but I'm gonna create a game object
that is going to be
link and have to make that public also
so that I can just drag and drop that
over inside of there
another thing is rigid body I'm going to
go and define that and then inside of a
wake create it and I think that's it for
now alright so let's go and create awake
and this is just where I'm going to
initialize everything so let's go and
get a reference to link I can just do it
this way game object and then there's
only gonna ever be one link so I'm just
gonna do it this way alright so we got
that and we're also going to have to set
up the rigidbody to do that just go get
component these are things I've done
before rigid body and just reference
what you're trying to get ahold of
easy-peasy and the animator also get
component and there's that and then
animator and we do this inside of awake
so that we are certain that everything
is set up before we call for it to be
used alright so there we go we have all
that set up now we get into the meat and
potatoes of what we're gonna have to do
here so first off fixedupdate
is going to call our rigidbody and
change the velocity on it on a regular
basis based off of the direction we want
to go and to do that just go rigidbody
and then we're going to go velocity and
set that equal to Direction times the
speed mmm it's set up so that we'll be
able to change the speed to tweak the
way our villain works and the only other
thing we're gonna need to do is handle
if our villain hits one of those
triggers villains start and villain ends
so on trigger enter 2d and we'll get
what we collided with so Collider 2d and
and we have to decide what we're gonna
do first we're gonna say are we chasing
or not so if we are not chasing what
we're gonna do is whenever we collide
with one of those little dots we're
going to switch the
animation so it faces in the opposite
direction so transform and I could do
this also and in the next tutorial I
will change the move direction but for
now what I'm gonna do is just flip it
because it's nice and simple and
extremely quick
there's no pause whenever you change in
this way and sometimes there's pauses
whenever you're changing animations and
to do that it just go negative one times
transform and local scale X we're only
going to be changing the X not the Y so
we'll just go transform and we will go
local scale and Y is gonna be exactly
the same as previously done and then of
course we're also gonna have to change
the direction that we're going to be
moving in that situation after the
collision so once again vector two and
we're going to just go in the opposite
direction so simple and on the X plane
we're gonna go in the opposite direction
so there we go and oops
direction Y and I spelled Direction
wrong why did I do that and there it's
corrected and is there anything else I
need to do um I'm gonna throw it else in
here but I'm not gonna use it right now
that's gonna be whenever we are chasing
link
I can I think anything else so let's
just save that and jump over and test it
alright so here we are and you can see
our villain down ere and let's play this
and see what happens I'm gonna zoom out
here first off and we could see our
villain and let's run it you can see
he's going over there he hits he changes
direction
alright so good stuff exactly what we
wanted and now what I'm going to do is
I'm going to show you a new way that we
can go and animate a sword attack for
link alright so what I'm gonna do here
is I went and created a weapon I'll
empty just by going create empty calling
it weapon and a dragon and under link
and what that's gonna allow us to do is
to go in there and change the weapon
that's inside of it I'm going to then
also create another empty so create
empty and I'm doing it this way just so
I can show you a different way of doing
an animation than I've done it before
alright so we went and created another
sword now what we're gonna do is you
know what I'm gonna delete that and
instead what I'm gonna do is I'm gonna
come over here to sprites and sprite 81
is my sword so let's go get it yeah I'm
gonna zoom out grab 81 up here and drag
it directly inside of there and that is
going to be our sword correct yes and
all I need to do is change the direction
that it's facing so I'm gonna go and
select this guy and change its name to
sword and also I want to make sure that
weapon is zeroed out which it is there's
zero zero and I'm gonna need to position
that so let's go and get our sword and I
want its lair to be the same as link and
there you can see it is right there
and then we need to move it first off we
need to flip it so I'm gonna come up
here to this guy click on that and I'm
gonna go and completely flip whoops I've
selected first and there it is right
there
so we're gonna come in and flip it
whoops you grabbing the wrong thing
there we go and we're gonna turn it
completely upside down and that should
be negative 180 to make it a hundred
percent the same so let's just change it
to negative 180 and then it'll be nice
and clean and what I'm gonna do is I'm
gonna drag it oops I don't want to grab
it on that plane let's switch it back
over here grab this guy and
going to position it now you're gonna
see that the sword is behind link and if
we click on link we're gonna see that we
have link in the sorting layer and the
ordering layer is one so what I'm gonna
do is I'm gonna go and select sword and
change this to one and now the sword is
on the same plane and another thing
that's interesting to know is you're not
actually able in the code to change the
order in the layer so what we're gonna
be able to do is change it a Z and
that's going to allow us to move it up
or down in regards to link you know and
see there it appears so we're going to
make sure that that is basically less
than zero and then it's gonna appear on
top but we're gonna change that here in
a minute and what else do I want to do
um on the Y plane I'm gonna set this to
zero and then on this plane right here
I'm gonna set that to three and see how
that looks all right that looks pretty
good okay so whenever a link is
attacking this isn't he's not gonna be
running around with this but only when
he attacks is the sword going to appear
on the screen and go and then you know
like stab things alright just I'm just
trying to show you a different way of
animating all right so we got that set
up I don't think there's anything else
oh yes I want to add a box Collider to
the sword so I have the sword selected
I'm gonna come over here add component
physics 2d and box Collider and we're
going to obviously shrink this down a
lot so I think the offset I'm going to
leave this be zero and then this one is
going to be 0.5
and then I'm also going to change my
size down to like point three five and
five like that so there it's only gonna
collide with that area right there which
is gonna be the blade alright so that
looks good
mmm I don't think I need to do anything
else with it except write all the code
to make the sword show up in the right
position so I'm going to jump back over
into monodevelop and write all that code
okay so here we are in link to what am i
gonna need to do well I'm gonna need a
reference to both the weapon game object
as well as the sword game object unless
we let me just jump over and verify the
names on those okay so they are
uppercase weapon lowercase or uppercase
sword okay good
back so where am I gonna start putting
this stuff inside of here um mmm I think
I'm gonna put it right here obviously
right after the animator okay so I'm
gonna go game object and I'm gonna call
this weapon game object and I'm gonna do
the same for the sword
so sword game object and then I am I
gonna need anything else you know what
I'm going to track the direction that I
want to attack within a gnome so I'm
going to call this attack direction and
then I'm gonna have obviously left right
up and down are going to be my different
attack directions and then I'm
specifically going to have attack
direction and I'm gonna call that attack
direction alright so got that set up and
that looks good now down inside of a
wake I am also going to throw in or go
and create or get references to those
game objects so weapon game object is
going to be equal to and I can find it
by name so we can go game object and
then find
this is going to be weapon so we got
that and then I'm also gonna do the same
for sword so sword game object is equal
to game object and fines and this is
called sword all right so I got my game
objects already to work with now what I
need to do is let's come down inside of
here and there sixth update this is
where we're going to be making a lot of
our different changes and mmm so
animator play s that is going to be let
me see here
OS is gonna be my walk down so what I'm
gonna want to do here is I'm whenever he
walks down I'm going to want to set my
attack Direction equal to attack
Direction down and then that'll track
everything for me so that'll make
everything really really nice and easy
I'm gonna do exactly the same thing for
up which is next so we'll come in here
and paste that inside of there except
this is going to be up this makes it
very easy and then I'm gonna use a
function down here to have everything
work and basically what I need to do is
just rotate the sword depending upon
whatever direction you know link is
going in so we have that and for D um
actually got rid of this flip animation
I'm leaving it in there it's just
commented right now and I might get rid
of it altogether later on but okay so
whoops
I'm just paste and in this situation
it's D so that means he's going in the
right direction so what I'm gonna do is
just make the sword appear on the screen
and then disappear and a is going to be
the left direction
so right here paste that inside of there
and then change that to left alright so
that's pretty simple stuff now what I'm
going to need to do is go down and
actually allow them to trigger the
attack and I think what I'm going to do
is have that occur whenever the link or
whenever the user clicks on return so
what I'm going to do is I'm going to say
if input gets key and to reference
return the return key go keycode and
return and that is going to give me the
return key and whenever that happens I'm
gonna call a function that I'm gonna
create here right next called link
attack and link is going to attack the
whatever is you know right in front of
them so let's create that function so
we'll link attack doesn't receive
anything because it doesn't need to it's
gonna use its gonna make judgments based
off of the enum that we have set so what
I want to do is I'm gonna create another
function also and what its gonna do it's
gonna use a cocoa routine here so what I
need to do is go I and numerator make
sure it's a numerator and not enumerable
totally different things and animate
sword is what its gonna be and what its
gonna do is it's going to receive a
float which is going to represent how
much I want to rotate the sword
whenever I display it on the screen and
also if we have a vertical movement that
we want to make alright so we have that
set so now what I'm going to do is I'm
gonna create the animate sword function
here to get this out of the way very
first thing I want to do is make the
sword up here and how you do that is you
reference the sword game object and then
you go get component and renderer and
then you go enabled and set it to true
okay so that is going to flash this
sword on the screen then after that I am
going to go weapon and game object and
transform and here what I'm gonna do is
I'm actually going to take that and
rotate it so rotation rotation and set
it by calling quaternion
and then I'm going to 0 and rotation
okay so that is how why do I keep
spelling rotation wrong okay so there we
go so that is going to rotate it in the
right direction and then I'm going to
need potentially to move it vertically
and that's gonna be whenever it flips
from link moving downwards to upwards
whenever he starts moving upwards
obviously the swords gonna go in the
other hand in the same hand so to do
that I'm gonna go transform and position
equal to new vector to our vector three
and transform position and X and also
transform position y plus whatever the
vertical movement is that I want to have
done and then transform position C
alright so that is gonna handle that and
then what I need to do is wait a second
before hiding the sword again to do that
you go yield return and new wait four
seconds
yawns point 2f and we'll test out if
that's a long enough period we just want
to flash on the screen we don't want it
to hang around for a while so we'll go
get get the sword game object and get
component once again and get the
renderer and go get enabled and set it
to false all right so we have all of
that set up now what we can do is we can
go up inside of link attack and we'll
define everything inside of this so what
I'm gonna do is I'm just gonna have a
big switch statement inside of here
someone's go switch and depending upon
what the attack Direction is I'm gonna
do different things so I'm gonna say
case attack direction is down well in
that situation I'm gonna go start coding
and animate sword and I'm not going to
do anything with it because that's how
it's set up so we don't have to make any
changes in a situation which we're going
down because that's the default that we
have already set for ourselves and then
break okay so there are that handles if
we're going down
now let's handle tech direction and if
we are going to the left and I actually
paused for a second there to figure out
what I'm gonna need to do rotation wise
so you didn't have to worry
it was just moving basically moving the
the sword on the screen and then
verifying what the you know like by hand
and then seeing how much I needed to
rotate so not rocket science
alright so animates sword and then let's
get that off of the screen there and
then sometimes whenever I do star show
something really really big like that it
won't go away I mean when I increase my
font size is really big so alright so I
animate sword and then break and so we
got that and of course we're going to
also have to do the same for the right
so let's just come in here do this and
then change this to right and in this
situation this is going to be 90 and
then this is going to be perfectly fine
we're not going to need do anything with
that so change that back to zero and
then we will have to do one more for up
so let's change this up and this is
going to be 180 this time so 180 and
then this is going to be 0 also if I did
everything right and I think that's it
so save that and everything looks good
jump back alright and now we're gonna
test if we are able to make the sword
appear or not so let's run it and
there's linked up it's not working why
isn't working
yeah we'll figure it out I see what I
did inside of this area right here where
we right before we have the link attack
what I need to do is I need to go and
get my sword game object and get
component components and the renderer
and call for it to be false so that it
doesn't show on the screen alright so
that's pretty simple and guess what I
need to do exactly the same thing inside
of the awake function whenever it's
called
alright so just place that in there and
save it and here we are with Lincoln
let's test to make sure everything is
working out good alright so yep there's
the sword it's appearing well where I
want it to be what's going up it's going
down and so forth and so on alright so
we are able to attack we got villains
and so forth and what I'm going to do in
the next part of the tutorial is get all
of the other weapons to start working
and
so equipped our villains with weapons so
like always please leave your questions
and comments below otherwise till next
time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>