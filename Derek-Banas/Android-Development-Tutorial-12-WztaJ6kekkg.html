<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Android Development Tutorial 12 | Coder Coacher - Coaching Coders</title><meta content="Android Development Tutorial 12 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Derek-Banas/">Derek Banas</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Android Development Tutorial 12</b></h2><h5 class="post__date">2013-06-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/WztaJ6kekkg" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello internet and welcome to part 12 of
my android development tutorial today
I'm going to show you how to use code to
create open issue queries and a whole
bunch of other things with SQLite
databases inside of Android and I
structured this so much like a cheat
sheet that it would be a good idea to
get the code that is in the description
underneath of the video and take notes
on it and if you missed part 10 or 11 of
this tutorial series whenever I first
started off creating this SQLite
database app I provide links to those
videos in the upper right hand corner so
I have a ton to do so let's get into it
okay so here I am inside of what I am
referring to as contacts app and I
restructured this whole thing to make it
very very understandable and the exact
file I'm going to be used is going to be
called DB tools for database tools and I
set up this class so that it will be
able to be used over and over pretty
easily inside of just about anything
else and I have this inside of the
package which is going to be new
thinktank contacts app and this guy
right here of course new think tank can
be your name if you don't own a website
address that's just what I use alright
so first thing we're going to do is
create a new class called DB tools
course and it's going to extend SQLite
open helper and it basically does
exactly what the name says it's going to
in reference to SQLite open helper going
to either open or create a new database
for you to use and this guy is going to
require me to go and get myself some
libraries so got that and then DB tools
is going to say that we need to add a
constructor which I'm just going to do
that by hand so let's just come in here
and go public DB tools and it is going
to receive a context now a context is
going to provide you access to different
application specific resources and
classes and this is going to be needed
by the SQLite open helper super method
whenever we call it so that it will be
able to create our database for us so
context and this is going to be called
application
in context and of course may have to
come inside of here and import context
and then I'm going to make a reference
to the SQLite open helper construct your
file and pass it application context and
of course you can come in here and
change this to uppercase see if we want
to do that and there we are and then we
are also going to pass to it the name
that we want for our database and I'm
going to call this contact book dot DB
and then you can just type in all and
one this is something you don't need to
worry about one is in reference to a
version and so forth and so on don't
worry about that alright so now that we
have that set up let's go up the DB
tools and it's going to want us to add
on implemented methods just click on
that and allow it to add those in and
it's going to create an on create method
and an on upgrade method so first let's
go in here to the on create method and
what on create is going to do for us is
whenever our database is created it is
going to be called and inside of here
would make a lot of sense to create your
tables so that is exactly what I'm going
to do I'm going to a query just like
always and I'm going to say create table
just like we've done before and I'm
going to call this contacts and then I'm
going to go contact ID and integer just
like always same old stuff primary key
like that and then I'm going to put in
first-name and it's going to be text put
in another comma just creating a query
just like any other time and then down
here we're going to continue making this
query and so we're going to have
lastname also going to be text phone
number in this situation also going to
be text of course email address text
home address and let's get rid of this
so we can fit it a little bit more
information text and then at the end of
that after we're done putting everything
in put in your final brace but do not
put a semicolon it's a very common error
so that's the reason why I bring that up
and there we go now we have our query
all set up for us so now what we're
going to do is execute our query and to
do that I'm actually going to call this
database and to do that
have to come up here and go to database
inside of there makes a little bit more
sense to me and then I'm going to call
exact SQL and what this is is the method
that execute the query provided as long
as the query isn't a select query or the
query doesn't return any data this
creates a table so it doesn't return
anything so that's perfectly fine and
then we're going to throw our query
inside of there so whenever on create is
called which is going to be called
whenever this object is first created
it's going to come in here and create
our table now of course if you have more
than one table it would be wise to
create more than one table inside of
here and then we get into on upgrade and
on upgrade is going to be used to do
things like drop tables add tables or do
pretty much anything that relates in any
way to an upgrade of this database and
what we're going to specifically do in
our on upgrade is we're going to drop
the table to delete the data that is
inside of it and then we're going to
call on create again to create a brand
new empty table so it's pretty much like
deleting what's the data that's inside
of there and replacing it with new debt
and we're going to drop our table just
like we would with SQL if exists
contacts and there we are that's going
to be the query we're going to issue and
then we're going to need to go database
again so let's change this to database
and since we don't need to receive any
information exec SQL is going to work as
well just like before and then remember
we want to go and recreate our database
afterwards so let's just go on create
and pass it the database so that's going
to recreate an empty database for us so
what are some other things we're going
to need to do well we're going to need
to insert people into our contact
database and to do that we're going to
go to public void insert contact sounds
like a good name to me and here we're
going to use a hash map and we're going
to have string for the key value pairs
and this guy is going to be called query
values so this key valued paired hash
map is going to come in here and pass in
all the data that we want to put inside
of a table in our database
now to do this we're going to first need
to open our database for reading and
write
and to do that we're going to go SQLite
database like that
and let's just go database is equal to
this and then we're going to say get
writable database and this is a
reference to this guy right here so
that's where that's coming from so now
we're going to be able to read and write
data to the database we're going to need
to create a new class called content
values and the reason why we are going
to use content values well first off
content values is going to give store
key value pairs being the column name
and the data that's in that specific
column and the content values data type
is needed because the database requires
its data type be passed to it what
you're going to see here in a second so
I'm just going to call this values just
to keep it simple is equal to new
content values like I said you can use
this as a cheat sheet you know there's
no reason to try and memorize all this
stuff and all I'm doing down here is
coming in and importing all the
libraries that I need you could say now
what I need to do is add this
information to it so I'm going to use
put and key well first name is going to
be the key and then the value I'm going
to get from query values which was the
hash map that was passed into this and
I'm going to say get and then inside of
it first name because everything is
going to be stored that same way in the
hash map well I'm gonna need three of
these guys or I'm gonna need four more
two three four and of course we're going
to store last name and I'm gonna say
last name like that and then here I'm
going to go phone number and here phone
number I changed some things up here I
figured it would be easier since we're
referring to the same type of data to
keep the names the same just a judgement
call on my part and then finally home
address and home address okay so we have
all that setup and then we can call our
database and call insert on it and this
is going to handle everything for us and
we need to put our table name inside of
here and that's gonna be contacts and
all calling hack just leave this is null
don't worry about
and then values is going to be what we
put in here which is the content values
that's what it's expecting data type
wise so that's the reason why we're
using content values then after we have
that set up we want to release the
reference to the SQLite database object
and to do that we're going to say close
and we are all done with that so another
thing we might need to do is to update a
contact now update contact sounds like a
good name to me and it's also going to
receive a hashmap so there's no point in
me going and recreating this let's just
grab this guy copy it come down inside
of here and paste it in there and then
inside of update contact well I need to
open my database and I'm also going to
need to do a whole bunch of the same
sort of thing again
it's what I'm going to do is just come
up here and copy this and I could have
had it in a separate method but I'm just
going to do it this way for now so we're
going to create our new database and
it's going to be read and writable
content value saw before stores key
value pairs here we're going to put in
those keys and values in exactly the
same way and then we are going to return
database dot update and database update
as you can see is going to have a table
name that's this right here content
values that guy right there is going to
go there then we're going to have a
where clause and then we're going to
have where Clause arguments inside of
there so the table name is going to be
contacts just like before values is
going to be the same because there that
is that's what we need and then inside
of it we're going to need a where clause
and I'm actually going to put this on
the next line and draw that guy inside
of there
and what we're going to do is we are
going to update based off of the contact
ID being equal to and then question mark
and then inside of this guy where
arguments we're just going to be passing
in one ID inside of it here we're going
to create it as a string array but we
don't really need that and then we're
going to say Corre values dot get and
then we're going to get whatever
the value is for contact ID in this
situation curly brackets and then close
that off and there we go got that all
updated and that's how you update and
SQL like database using Android tools
something else we might need to do is to
delete a contact so we're going to do
that yes a delete contact and again
we're going to get a string ID the
contact ID is how we're going to decide
that we want to delete information so
what we need to do well we need to
create the opportunity to read and write
to our database so copy that base that
inside of there then we're going to
create a query for deletion delete query
going to be equal to and we say delete
from contacts which is the name of our
table where contact ID is equal to put a
single quote and a double quote inside
of there and then I'm going to say ID
plus double quote put a single quote
inside of there and again remember don't
put the semicolon right here after this
single quote put it at the end there and
what we need to do is execute this query
so database Zek SQL and remember we can
use that in the situations in which we
do not have anything being returned and
there you go that is how to delete a
contact no other thing we might need to
do inside of here is to get all our
contacts returned to us and they're
going to be returned to us in an array
list and guess what that ArrayList is
going to have inside of it a hash map
and it's going to be strings for the key
value pairs and I'm going to call this
get all contacts like that and this once
the ArrayList library of course so let's
go get it for it and this ArrayList of
course well let's just come in here copy
this one I type that out again that
would be silly
this ArrayList is going to contain every
row in the database and each rows key
value pairs stored inside of a hash map
so I'm going to call this contact
ArrayList and this is going to equal to
new and then I'm just gonna copy this
again and throw that in there okay so
there's our ArrayList with hashmaps then
I'm going
to create my select query this time is
equal to and I'm just going to say
select well I want everything so select
everything from contacts then I need to
open my database for reading and writing
so to copy this guy come down here and
paste that in and then I'm going to have
to create what is called a cursor now a
cursor is going to provide read and
write access to the data that is going
to be returned from this database query
and I'm just going to let it be named
cursor just to be simple and then I'm
going to issue a different type of query
this is going to be a raw query and this
is going to be used whenever you need to
execute a query that's going to return a
result as a cursor and just like before
we're going to put in our query inside
of there and then selection args we
don't need to do nothing for that and
there we go we're fine and of course get
the library for cursor and of course
spell cursor right OVR now we got that
working and now import the library well
then what I need to do is cycle through
the data that is returned and stored
inside the cursor and to do that I go
cursor dot move to first to move to the
first row of data and we put it inside
of an if clause so that we don't waste
our time in the situation which we don't
have any data then I'm say do create a
do-while loop inside of here and this is
gonna be a hash map again string string
of course and I'm going to call this
contact map equal to new hash map string
string they start in their face that
they're da-da-da-dah all right got that
then what I need to do is go contact map
and put it in the key value pairs so the
very first one is going to be contact ID
and then the value to get it well it's
going to be taken from the cursor which
is right up here and to get information
from the cursor it is going to be stored
as index values here's a get string and
the index for this is gonna be 0 you
might ask yourself well how do I know
it's 0
well if we scroll way way way up here
you can see contact ID is the very first
part of the table first name is
part so this is going to be index 0 this
is going to be index 1 and so forth and
so on everything is in the order of how
it was placed inside of the table there
we go got all this set up and then we
just need to come in here first name and
this is gonna be one this is gonna be
last name this is gonna be equal to two
this is gonna be phone number it's going
to be three
this is gonna be email address this is
gonna be four and of course there's one
more and this is gonna be home address
and this is gonna be five and then after
we have all of that data taken out of
that we're going to add it to our
contact ArrayList add and this is going
to be contact map and that hash map is
going to be stored inside of our
ArrayList and then we have to put the
condition down here in which we want to
stop and that condition is going to be
whenever you call move to next with the
cursor it's going to come back with
nothing and move to next what it does is
moves to the next row so if it gets to
the point where there is nothing more to
pull out of course it's going to come
back as negative and then remember what
we're doing up here is we're going to
return an ArrayList that is full with
all those hashmaps
so after this guy we're gonna say return
contact array list and there it is so
what's something else we might need well
we might not need all the information we
might just need one piece of information
and in that situation we're gonna be
returning a hash map and this guy is
going to be called public and like a
hash map string string that's going to
get just one piece of information I'm
going to call this get contact info and
you're going to pass in an ID and it's
going to return one hash map full of
information so I'm going to need a hash
map and I'm going to call this contact
map as well is equal to new hash map
dah-dah-dah-dah like that got that set
up so we need to open our database again
so I just come up here grab this guy
copy come down inside of here paste it
in and in this situation we don't need
to write to it so let's just change this
to readable and that's used when we
don't need to right and then we're going
to
a select query equal to and in this
situation we're going to say select
everything from contacts where contact
ID is equal to single quotes started on
put that down there
put in ID that's passed inside of there
like this like that single quote inside
and a semicolon so that's going to be
the query we're going to use and then
we're pretty much going to do exactly
the same thing again with the cursor so
I might as well just come up here and
copy it cursor copy and paste it in
there and everything is going to be the
same as we used last time
so cursor of course the bra query is
going to execute query and return the
results and store them inside of the
cursor just like that moved first move
the first row we're going to continue
getting this information but in this
situation I don't need this so let's
just get rid of that because I stored it
outside so there's that contact map of
course contact map that is up here so
there that is and we're just going to be
storing contact first name last name
dah-dah-dah-dah and in this situation
since I'm only going to get one map I
don't need to put that information in an
ArrayList first remove the next all
that's fine and then the final thing
we're going to do is return a single map
return paste and there you go that is
how to do a whole ton of things with SQL
Lite inside of Android in the next part
of the tutorial I'm going to continue
working on this app I'm going to finish
the whole entire address book Android
app up please leave any questions or
comments below otherwise till next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>