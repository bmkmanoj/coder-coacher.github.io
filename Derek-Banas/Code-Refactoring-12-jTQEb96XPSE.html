<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Code Refactoring 12 | Coder Coacher - Coaching Coders</title><meta content="Code Refactoring 12 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Derek-Banas/">Derek Banas</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Code Refactoring 12</b></h2><h5 class="post__date">2013-01-31</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/jTQEb96XPSE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">whoa Internet and welcome to part 12 of
my code refactoring tutorial today I'm
going to cover something that sounds
terribly complicated but it absolutely
isn't I'm doing this tutorial both to
show you something you're gonna use all
of the time and at the same time get rid
of some jargon teach you some jargon
whatever you want to say but either way
this is what we're gonna do in this
tutorial we're gonna eliminate large
accumulation methods by extracting
methods and using a collecting parameter
sounds so complicated but it isn't it's
so uncomplicated I'm gonna jump right
into the code so let's get into it okay
so all this a code is available link
underneath the video and this guy right
here is what we call an accumulation
method and this is from the last part of
the tutorial if you haven't seen it you
should definitely check it out and
basically what we're gonna do here is
we're gonna take this accumulation
method which is to string and we are
going to break it into a whole bunch of
other pieces now large methods that
accumulate a lot of information like
we've talked about before into a single
variable like item information that you
see right here are very very common now
like we've learned before because large
methods complicate code what we're gonna
do here is we'll extract all that code
out into many different methods now the
only problem here is the string datatype
which item information is won't allow me
to accumulate information across methods
so what I'm gonna have to do is instead
use a string buffer which well and that
string buffer is known as a collecting
parameter and it's going to be passed
from method to method while collecting
information that we need just like item
informations collecting all that
information in this one method so this
right here is an accumulation method why
because it is going to slowly build the
information or accumulate information
into this variable right here instead
we're going to use a string buffer and
it's gonna collect information in
exactly the same way except it's gonna
collect it as we move from method to
method and that string buffer is known
as a collecting parameter so let's just
start creating this code and changing
this
long method into something that is much
more manageable so what are we gonna do
well we're going to need our collecting
parameter string buffer and I'm gonna
call it item info for now here new
string buffer and there we go so this is
gonna be the guy's gonna collect
information from now on then what am I
gonna do here well I'm gonna take all of
the individual pieces of this method and
break it into a bunch of different
methods so what do we want to do well in
this line we see we're adding the item
name and a newline character not exactly
a lot of information then we see down
here that we are cycling through the
hashmap
which is going to contain all the
information for this item right here and
we're going to be storing that inside of
item information as well right like that
so I would like to extract this
information out of this big giant method
and throw it into its own method because
I think that makes more sense and the
method I'm gonna create is gonna be
called add item in formation and what am
I gonna pass it I'm gonna pass it item
info right like that
and before I go and create all that I
want to test to see what my output looks
like it's gonna be exactly the same as
from last time and there you can say
this is what's going on it's printing
out all sorts of information that we
have stored in our tree structure okay
so if any of this is confusing it's
because you haven't seen port 11 go
watch that first okay so that's what we
currently have and of course we want
exactly the same output
except we want our code to be more
readable so that means I'm gonna have to
go down to item information actually
it's just copy this whole guy and let's
create that method so we'll just come
right down here right where this ends
and here we're gonna go private void add
item information and this is going to be
a string buffer that is going to be
passed into this guy and then inside of
here we're just going to extract what
was already up inside of this so we're
just gonna literally cut it right out of
there and there we go and then come down
inside of here and paste that inside of
there and then what we're gonna need to
do is instead take item info and put
that right here paste that in and since
we're working with a string buffer we're
going to have to put a pend inside of
here instead
of the old way of doing things so there
we go got that saved and then we're
going to have to do exactly the same
thing here
paste that there paste that there it's a
sort of a review on how to extract
methods as well and lets file save that
and then let's go up here and look and
see how we're gonna extract other
information okay so the very next thing
that we're gonna do is we're gonna cycle
through and see if we have any children
elements and then we're gonna return
item information well this is just one
thing going on here so I'm just going to
want to take this information and
extract it to another method now there's
only one thing here that looks a little
bit crazy that we're gonna have to think
about and that is the fact that this is
a recursive call because this node down
here recursively calls to string which
is the method that I am in right now I
can't pass a parameter like I did here
where I'm passing the string buffer so
that means I'm gonna need to create
another method to handle what to string
used to do but that method is gonna
differ from to string in that it will
accept the string buffer passed as a
parameter so how are we going to do this
well one thing I'm going to do is I'm
going to create a new method that's
gonna be called add item info and
children because here I'm adding item
info and here I'm adding children and
add an item information right there is
going to get moved to the add item info
and children method that I'm gonna
create below so let's just come down
here and let's just do that
because that name makes more sense we're
gonna go private void add item info and
children and this is going to accept a
string buffer and then I'm gonna go item
info give it a name and then inside of
this I'm then going to call add item
information this guy right here
copy that paste that inside of there and
we're gonna change that a second course
change this to just item info like I
said before we couldn't do this with a
string so that's why we're using string
buffers in this situation feel free to
leave any questions below I'll be happy
to answer them then what we're gonna do
is we're gonna create another method
that is going to call or that is going
to be called add children information
because that is what it's going to do
and it's going to add additional
information to that guy so that means I
need to create a method called add
children information and this guy right
here is not gonna change anyway here
we're gonna go private let's just move
this up might be helpful if you have the
code and for any of you void and then
we're gonna go add children information
and like I said before this is going to
receive a string buffer and what's gonna
go inside of here well all the
information that was up in our old
method so we're gonna come in here to
where it says iterator and the whole way
down here where that ends and we're
gonna cut that out of there come down
inside of here again I think this is a
good tutorial in regards to just making
sure that you know everything that is
going on inside of here it's a review of
extracting methods it's a review of a
whole bunch of different things so I'm
gonna give this item info as a name as
well some people like doing that some
people don't I'm a person that likes
doing that then what are we gonna do
well we're gonna take item info and
we're going to make the changes we need
here so that'll work and then append
like that and then this is gonna go
right there so that all works and we're
not gonna need to change anything else
with that and then let's come up here
and let's look at this add item
information receives a string buffer
we're gonna append that information onto
there it's gonna cycle through here
append that information onto there
so that I all looks good so let's get up
to add item info and children and that
is going to call add item information
and add children information see
everything is very very very readable
now so then what we're gonna need to do
is come back up to this guy and instead
call this method right here I'm just
gonna copy that directly get rid of this
bang like that and then item info is
gonna be passed like that now it's very
easy to see what's going on here and
then down here where the return
statement is remember to string does not
allow you to send a parameter we're now
gonna have to spit out item information
when this is called and we're gonna have
to convert it to a string so item info
to string right like that file save it
and let's check it out
boom exactly the same thing so we were
able to go in and take that really long
method and shrink it down to just three
easy-to-read lines of code we created a
new method that is very readable we know
that's going to add item info and item
children and what's this to add item
info add item children very easy to
understand all of this information is
just as easy to understand if not more
so because we took it out of that giant
method now it's only three lines of code
and this guy down here is only four
lines of code so the codes much more
readable much more easy to deal with
feel free leave any questions or
comments below gonna be using a lot of
this stuff in the next tutorials that
are going to come after this otherwise
until next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>