<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Android Development Tutorial 17 | Coder Coacher - Coaching Coders</title><meta content="Android Development Tutorial 17 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Derek-Banas/">Derek Banas</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Android Development Tutorial 17</b></h2><h5 class="post__date">2013-08-02</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/D88gtGD5bJA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">well low internet and welcome to part 17
of my android development tutorial today
I'm going to talk about how to interact
with multiple Android fragments also
we're going to cover how to use
fragments on devices that support
Android level 4 and later and on top of
that we're also going to cover how to
use a different number of fragments
depending upon the screen resolution if
you didn't watch any of the previous
tutorials I provide a link in the upper
right-hand corner you most definitely
should check out port 16 before watching
this because I cover the basics of
fragments in that part and of course all
of the code is available in the
description just like always so I have a
lot to do so let's get into it
ok so unlike most of my tutorials this
one is actually going to for the most
part come from the Apache foundation
which wrote a absolutely perfect
tutorial on how to interact with
multiple different fragments and what
we're going to have here is a lip some
Java class that I created here and I
made some changes but nothing that
dramatic what this guy's going to do for
us is it's going to contain two string
arrays and they are going to contain
both the headlines as well as the
articles the headlines are going to go
on the left side of the screen and the
articles on the right side of the screen
if they can fit on the device in a
situation in which they can't the
headlines are going to show up in a
fragment and take up the whole screen
and whenever a headline is clicked on
said article is going to pop up on the
screen thereafter and to set something
like that up we actually are going to
have two different folders one of them
is going to be layout and one is going
to be layout large and I'm going to
create all of the code that goes into
these in this tutorial layout large is
going to contain both fragments and then
article view and news articles is only
going to contain individual data so now
let's go into dimensions XML and define
some dimensions we're going to need so
I'm just going to go
name is equal to and I'm going to define
article view padding and I'm going to
set this up so that it's independent
pixels so that it will easily scale
regardless of the resolution of the
device and I'm also going to set text
size and I'm going to have this be 18s
pay just because it looks good and there
we are we're done with dimensions dot
XML now we have to define the news
article and this is going to all be in a
frame layout and what a frame layout
basically does is blocks off part of the
screen and then what we're going to do
is put a ListView and a group of list
items that are going to represent all of
our articles and the ultimate size of
our frame layout is going to depend on
the largest child or the article with
the longest name and basically all we
need to do is just throw in a frame
layout to find it that way give it a
name which is going to be fragment
container and then define the width and
the height in a generic way and that is
all we need to do with news articles and
that's going to bring us to the article
view which is actually going to display
said articles when they are clicked on
and inside of this guy I'm going to have
just a text view that's it and then we
can go in here and define an ID for this
guy and then I'm going to call this
article and then because it's new I'm
going to put a plus sign inside of there
I'm going to bounce over into news
articles and just borrow these widths
and Heights because they're going to
work for me paste those in there and
then we're going to come down here and
define the padding that I actually
created in the dimensions and to get
that of course we go at demand forward
slash and then I'll bounce over here get
the padding article view padding jump
back inside of here paste that inside of
that and then we're also going to do of
course the same thing for our text size
so change this from the text size and
then this one is just going to be
changed from padding to text size and
there we go that is all set up and I'll
just indent that to make it look pretty
and there we go that is the end of our
view xml then what we need to do for our
larger resolution devices is we're going
to come in here and define both
fragments all in one place and all of
this is going to be put inside of a
linear layout and everything here is
pretty much default and to put these
fragments in which we're going to create
later on in their own class files we're
going to go fragment Android name is
equal to now we haven't created this yet
so we're gonna have to put calm exam boo
Android fragments and I'm going to call
it headlines fragment and that is going
to be the class name which we are going
to create here in a little bit I'm
actually going to have both for AG mints
at the same time here and I'm actually
going to create them at the same time
paste that in there because we're going
to be doing a lot of the same things
well then I have to actually give an ID
to this fragment come in here and select
that save some time and this guy is
going to be called headlines underscore
fragment again this is a new guy I'm
creating here so I'm going to put a plus
sign as out of it then I want the actual
articles or headlines to only take up
one third of our screen so of course I'm
going to use layout weight which was
nice enough to come up there and see me
and I'm going to throw one in there and
you could guess this is going to be a
two down here and then to enforce that
and make sure that it really pays
attention to what I define in weight I'm
going to go layout width and define that
as 0dp
density independent pixels say right
there and then for our height I'm just
going to come up here and copy this guy
and paste that in there and then close
off that fragment definition right there
and I'm going to do pretty much same
thing down here throw that down there
except this guy of course is going to be
article fragment and this one's also
going to be article for AG mint weight I
want this to take up two thirds of the
screen so that's going to be a to make
sure that is set for zero and match
works there as well so that's going to
handle whenever we are at higher
resolutions with our device so pretty
cool now what I'm going to do is jump
into headlines fragment and create the
fragment so here I am and the headlines
fragment like I mentioned before is
going to extend the list fragment and
then of course I'm going to come in here
and import android supports version 4
make sure you get that and if I didn't
mention it before what this is going to
allow us to do is use fragments on
devices that are going to support
Android level 4 and later so make sure
you get that one and now that I have
that defined what I'm going to do to
save myself just a bit of time is I'm
going to right-click and then I'm going
to come in here to source come over here
go down here and look for override
implement methods I'm actually going to
be using a whole bunch of fragment
methods inside of this guy so we have to
open that up and what I'm going to
specifically be pulling out from there
is on create this guy right here so just
put a check in there also going to get
on start so select that and I'm also
going to once on attach which is right
there and then after we have that all
set up I'm going to set this for first
member and hit OK and that is going to
create all of my little guys inside of
here
I want to create first seems like every
time I do this I do that and paste that
inside of there now before I get to all
of those different guys what I'm going
to do here is I'm going to actually
create an interface that is going to
allow my activities and fragments to
talk to each other I'm going to store
that in on headline selected listener
which I'm going to define here in a
second I'm going to call this on
callback then I have to actually create
the interface public interface and it's
going to be on headline selected
listener and then to work with this
fragment we're going to make sure that
this function on article selected is
created and used and the position is
going to represent whatever
article is currently clicked on or was
previously clicked on so the containing
activity in this situation must
implement this interface so that our
fragments will be able to deliver
messages whenever things are clicked on
that's all we're going to need to do
from there we're going to go into on
create I'm going to get rid of this to
do so that I don't clutter up my Eclipse
and of course like always on creates
just going to initialize the fragment
for us and the very first thing we're
going to do is define layout and what
this is going to do is store the text
view layout' ID for us save us some
space or layout simple list item one
there we go
and now what we're going to need to do
is create a list adapter which is going
to populate the ListView for us with the
information that was in the arrays
inside of the lip 'some class which is
right up here and to do that we're going
to say set list adapter and then we're
going to have to create ourselves a new
array adapter and it's going to hold
strings and the array adapter is going
to deal with the arrays for us but to do
that we have to go get activity which
gets us an intent so that we'll be able
to start a new activity and then we're
going to pass inside of here the text
view layout' ID which we defined above
and then finally going to define the
actual arrays that we want to use
headlines like that and of course we're
going to have to come in here and get
ourselves couple libraries and that's
all we're going to need to do with on
create for our headlines fragment so
we'll have to come in here now to on
attach and of course this is going to be
called whenever the fragments is
attached to an activity this is
basically going to be really simple all
we're going to do here is we are going
to verify that the activity that is
going to use this fragment has
implemented the interface that I defined
right here so we need to check to make
sure that is true and one way to check
that is go on call back and try to cast
it to on headline selected listener if
it implements it then we're not
have a problem and then pass in activity
and if we have a problem with that well
we want to catch it and the problem
would be class cast exception because
we're trying to cast to something that
may not exist and if that happens we
want to throw new class cast exception
and maybe add ourselves a little bit
more information activity to string and
then down here we'll say something like
must implement on headline selected
listener and then close that off and
there we go that's all we're going to
have to do for on attach now for on
start which is going to be called when
the fragment is made visible on our
screen we're going to need to check if
both the article names as well as the
articles themselves those fragments both
fragments are on the screen at the same
time and if they are it would make sense
to highlight the selected current
article that is being displayed and how
we find that out we're going to say get
fragment manager and we're going to say
and they get fragment manager well
that's going to do is return the
fragment manager to us which of course
like we talked about previously is going
to allow us to interact with the
fragments associated with whatever the
current activity is then we're going to
say find fragment by ID and we're
specifically going to look for our
article fragment because we're inside of
headlines fragment so if we can find
that we know what's going on and we want
to check that it's not equal to null and
if that is true we're going to say get
list view and of course get list viewed
gets us the list view that we need and
then we're going to say set choice mode
and go list view choice mode single
select that and that's just going to
only allow us to select one item at a
time so that's what that's for because
it wouldn't make sense to have more than
one article available because that's not
possible and that's all we need to do
for onstart now we basically have to
handle whenever a list item would be
clicked and what we want to do so I'm
going to go on list item click and this
guy is going to have list view and view
and we're going to want position and
those are just default attributes and
whenever it's clicked on we want to go M
call back on article selected and pass
inside of it the opposition or the
current article that was selected and
then we're going to go get list view and
set the item as checked or let's make
sure that the article is highlighted if
we're in a two pane layout so set item
checked for whatever the current item is
and set this to true and there we go and
that's going to handle everything we're
going to need for our headlines fragment
and that's going to take us to our
article fragments which are actually
going to hold the articles and for this
guy called the class article fragment
and this guy is going to extend fragment
for us and we're just going to come in
here again and right click just about
anywhere go into source just like we did
before come over here come down here
override implement methods and we'll get
a whole bunch of them here on our screen
one thing we're going to want is on
create view just scroll through here and
there it is check that guy we're also
going to one on start select that guy on
saved instance state is going to be good
as well because we're going to want to
pass positions around and that should be
it so it's it okay and there we go have
all of them in there and then before we
go into on create view we're going to
create ourselves a string here and it is
going to be the current article that is
selected and this specifically is going
to be passed back and forth between the
fragments
that's going to be our position and then
also we're going to define pretty much
that same thing but it's just going to
be within this class and it's just going
to be the current position and start off
let's just make that negative one like I
said that's just going to be used to
track the current article within the
class then inside of on create view what
we need to do here is check if the
activity was created for example from a
screen write what we're going to want to
do is restore the previous article that
was selected and of course that
information
come from on save instance state and
this is mainly going to be used with the
two pane layout because lots going to be
needed and to do that we're going to go
saved instance state is not equal to
null and we're going to go get the
current position set it for this
specific object or class and how we're
going to do that or how we're going to
get that is go say Vincent state and
we're going to say get int and arg
position like that and now we'll know
that and then down here we got to make a
couple little changes just get rid of
this all together what we're going to be
doing here is calling the inflator
and it is going to inflate our fragment
into the activity and we're going to
have to say our layout and then we're
going to of course use the article view
because that's what we are working with
the article fragment and then pass
inside of it container and false and
there we go all set up and then of
course we have to come in here and spa
inflator right I do that all the time
and there we go so that's all set up now
I'm going to come down here to on start
get that fixed and basically what we're
going to do here is create a bundle and
of course bundles are used to pass
information back and forth between
different activities and we're going to
see if we can get those potential values
and basically the reason why we're going
to do this in on start is because the
layout has already been applied to the
fragment at this point so we know that
we can safely call different methods
below so that we'll be able to set our
article text but we do want to come in
here and check if the article has been
selected check if it's not null and if
it wasn't we're going to go update
article view and set the article based
off of whatever the argument that was
passed in here which is the position or
you know the article that should be
displayed and to get that we're going to
say get int and say Arg position and
that's going to return an int and then
we're going to create update article
view here in a second otherwise I'm
going to say else if M current position
is not equal to negative one remember we
set that before
in that situation we're going to update
article view with whatever the current
version or value for current position is
for said object or class that we're
working with here right now and that's
given us errors because update article
view hasn't been defined yet so let's go
to find it and basically what this guy's
going to do is put the text for whatever
the currently selected article is inside
of the article text view void update
article view of course it gets the
currently selected article there that is
and it's going to go text view and the
text view is going to be our article so
we're dealing with this guy
this article view dot XML this guy jump
back over here and to get it we're going
to say get activity and then find view
by ID and that specific view is going to
be article and what we do is go article
and set text with data that's in the
Lipson class to get it we just go
articles and pass in position and then
current position is also going to we
want to make sure that it also has the
same value as the current position and
the only thing we didn't do you was set
up on saved instance state which is this
guy and what we're going to do with this
is go out state put int or position and
it's going to contain whatever the
current position is the current article
selected that value it's going to be
stored inside of there of course in case
our app is all accidentally shut off or
it's rotated and that brings us to main
activity there's a very very very last
guy and of course we're going to go
public class main activity and this is
going to extend fragment activity
because we're going to be using
fragments here and then what else is it
going to do it needs to implement the
headlines interface we defined inside of
here so that we'll be able to
communicate whenever things are clicked
on so go and get that guy come back over
implements and there that is and then
for fragment active
again we're going to make sure we get
the Android support library the right
one there we go and then we're also
going to want to come in here and go
headlines fragment to reference that and
of course this is going to say add
unimplemented methods and we click on
that and there is the specific method we
have to use if we're going to implement
this interface but first a couple other
different things want to do here going
to go and get some other different
methods that I'm going to need for
fragment activity
so again source come down here override
implement methods and then of course
we're going to need on create so select
that and for now that's all I'm going to
take click ok and there is on create for
us so whenever this activity is created
for us we need to set up everything
properly I'm going to change this to
saved instance state like that and then
of course we're going to have saved
instance State down below and then we
also want to set our content view which
is going to be our layout and we're
going to say news articles there's that
guy then what we need to do is check
whether this activity is going to be
using the layout version with the
fragment container frame layout and if
it is we need to add that first fragment
so we're going to say if find view by ID
pass inside of it ID fragment container
say this guy right here over in news
articles XML that's what we're looking
for
bounced back over here then we're going
to check if it's not equal or not null
and then what we need to do inside of
this is go saved instance state and in
the situation in which we are restoring
from a previous state well we're not
going to then need to do anything and we
should just go and return from that and
this is very important because if we
don't do this if we don't check that
this information is already on here or
these fragments are already on the
screen it may actually throw more
fragments on the screen so we always
want to make sure that we check that
will just click return in that situation
get out of this all together otherwise
we're going to create an instance of the
fragment
is going to hold all of the titles for
all of our fragments or otherwise create
a headlines fragment object and call
this first fragment is going to be equal
to new it lands fragment then what we
need to do is to check if there is any
information out there like the current
article that was selected and to do that
we go get intense and then go get extras
that's going to get any extra
information it was passed in whenever
this guy was called and then we have to
add the fragment to the fragment
container to do that we go get support
and get ourselves a fragment manager
then we're going to call begin
transaction because we need to do this
before we begin editing fragments in any
way and then we're going to go add our
fragment container and specifically a
first fragment and then to keep this
nice we're just going to say commit
which is going to say hey whenever you
get a chance to do this do it and that
brings us to on what exactly we're going
to do whenever on article is selected
well we're going to say article fragment
and capture the article fragment from
the activity layout and to do that we're
just going to say get our fragment
manager again and then we're going to
specifically get that fragment by ID and
it's going to be our dot ID article
fragment then after we have that we want
to check if the article fragment is here
and if it is we want to have it update
itself and it's going to update itself
by calling update article view and all
we need to do is pass the position the
current article that's selected to that
else if not what we're going to do is
use the one pane layout that is just
going to show one guy at a time and swap
back and forth between the articles
themselves and the headline fragment
which has the list of all the possible
articles and to do that we're going to
say article fragment create a new
fragment like this then we're gonna go
bundle so we can get some information
I'm going to want to save our current
article value and that's going to
be available by calling article fragment
org position and then of course what
we're going to put inside of there is
whatever the value of position is here
so that's just a store whenever we are
bouncing back and forth between the list
of articles and the actual articles
themselves then new fragment is going to
be ready to set arguments with that
bundle pass that information back and
forth and then we're going to create our
fragment transaction which is going to
allow us to add and remove replace and
do animations and so forth with
fragments just like I talked about
before and we just have to go get
support we have to go and get ourselves
a a fragment manager again like we've
been doing here a whole bunch of times
and say hey we'd like to start doing
some things which means we need to do
what begin transaction and for this guy
of course we're going to want to go and
get our updated libraries or is it there
it is they got that and I was
remembering an old Android thing here
and of course this is get support
fragment manager there we are sorry
about that
then we're going to have to go into the
transaction and replace whatever is in
the fragment container view with our new
fragment and to do that we go replace
our D fragment container because
remember these fragments can actually be
put on top of each other which is a bad
thing and we want our new fragment
inside of there and then what we need to
do is call transaction again and this
time we're going to call add to back
stack and pass in null and this just
causes the transaction that we created
here to be remembered and then after I
got all that set up I just need to
commit say get to this whenever you get
a chance and that's it that was a whole
ton of different things but if we now go
up inside here and I actually created a
new device so I have a couple different
devices here is my old emulator and this
is a new emulator and this one's going
to be a lower resolution and it is going
to allow us to demonstrate how to
actually use just one fragment at a time
versus using multiple fragments at a
time and I'm actually going to use that
lower resolution device here and then
you guys go and get the code I'm going
to provide the whole entire package in
the description for this video and
you'll be able to go and test it on
different things and see how it changes
but we're going to come in here we're
going to go run configurations just like
always and to test our new device we're
going to go into target I've been asked
about this couple times if you want to
use a different device like I'm going to
shut this off and say no I want the
lower resolution because I want to see
what that looks like and just like
always you're going to have your project
and you're going to select your main
activity and click run and here you can
see what it's going to look like on a
lower resolution device see we're going
to be able to switch back and forth this
way but it's not going to show the
articles at the same time and what the
heck I'll show you what it looks like on
a higher resolution device all we're
going to do jump up here again run
configurations this pops up and let's
change our target to the higher
resolution everything else is exactly
the same and run it and here we are in
higher resolution device and you can see
that in this situation if you click on
the different titles that it shows
everything on one screen so that was a
massive tutorial covering a ton of
different things please leave any
questions or comments below otherwise
till next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>