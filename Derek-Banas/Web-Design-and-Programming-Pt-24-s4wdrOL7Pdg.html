<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Web Design and Programming Pt 24 | Coder Coacher - Coaching Coders</title><meta content="Web Design and Programming Pt 24 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Derek-Banas/">Derek Banas</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Web Design and Programming Pt 24</b></h2><h5 class="post__date">2011-01-25</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/s4wdrOL7Pdg" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello internet and welcome to part 24 of
Maya web design and programming tutorial
today I'm gonna show you how to grab
extremely complicated information from a
website using regular expressions to a
certain extent this is going to be about
how to think about regular expressions
and how to look at data so this is
definitely something I've never done
before that wrote in and he said can you
get this information here as well as
this information here from website and
take all these individual pieces of
information and then save them over into
a database well I took a look at this
and the first thing I do whatever I'm
looking to scrub a website is I look at
the source this is very bad
why is it bad there are no tags okay
that's something that's the easy way to
grab information but since there are no
tags I just have the data to work with
and just so you know it was a success I
was able to grab all this information so
this is the final output now - how
exactly do I look at this information
okay well let's just consider the fact
that all of these lines have the same
format and they do so I know Derby Lane
and I'm gonna have this same format
meaning that there's going to be a
certain number of letters certain number
of letters always two numbers followed
by four numbers followed by certain
number of letters and so forth and so on
okay great so I'm gonna create a regular
expression it's going to specifically
target this line of text and throughout
this entire form what is awesome is all
of these have this exactly the same
format alright so then we move on to
this line okay well if you look at this
briefly it might look that all these
lines have the same format but they do
not look down here you can see that
there's an additional number on this
line that is not on any of these other
lines okay so what I'm gonna do in my
head I'm thinking as I'm looking at this
is I'm gonna grab this whole line of
information with a regular expression
and then what I'm gonna do in this
special circumstances just treat these
lines differently based off of how many
numbers are contained starting here and
ending there and how the different
number of numbers will affect how I
handle this data then on top of that you
see this funky little fraction symbol
here I'm gonna show you in this tutorial
exactly how to account for that then on
top of that we have a star here so I'm
gonna have to account for that it shows
up randomly and also we have a random
number of numbers here that precede the
DOS
small place and also sometimes there's
one digit sometimes there's two digits
here and even if you scroll down
sometimes characters jump into the mix
so what I'm gonna do in this tutorial is
to take all of this information that
doesn't seem to be organized very well
at all not even accounting for the fact
that there's a different number of
spaces but in between all of these
different pieces of data and I'm gonna
show you exactly how to grab all of it
so I grab my trusty text Wrangler
notepad this took about 20 minutes to
create this whole entire thing before
and I know because I'm grabbing two
different lines of information what I'm
gonna do is I'm gonna use em open twice
and I'm gonna jump in here and I'm gonna
grab this guy right here and hit copy so
I'm gonna type all that out and paste it
in there just like that
close that off with a quote followed by
I just need read permission so that's
all I'm gonna use and then I'm gonna
copy this whole line of text paste it
down here because I'm gonna have to read
it in twice because I'm doing two
regular expressions on this information
and I do not want searching through some
of the information to affect some of the
other information then what I'm gonna do
now that I got those guys is I'm gonna
go while not Fe Oh F what this function
does is it tests if the end of the file
has been reached and I'm gonna form this
just on file right like that and then it
comes down to the regular expression
itself well I'm gonna use Prague match
all and it's just searches for all
matches to the regular expression and
then stores them in an array that I can
then iterate through I'm going to use my
delimiter which is going to surround the
entire regular expression use the caret
symbol that's going to signify this as a
beginning of the line of text and
because I don't have to worry about the
fact that these race is gonna be taking
place in more than one place they're
always gonna start with Derby Lane super
I can start off searching for Derby Lane
then I know that there's gonna be one or
more space and just to make this a
little bit easier to understand let's
jump over here and let's grab this whole
thing right here and jump back in
because this is exactly what I did while
I was creating this guy put the regular
expression that I'm or what I'm
searching for right here on the screen
okay so you can see this being built as
we go
so spring match all so when I know it's
going to start with Derby Lane and
there's
gonna be a certain number of spaces but
I don't know how many so I pull it back
/ s and then a plus sign and then I know
that I can expect a certain number of
characters gonna put a plus sign in
there and I'm gonna put the question
mark in here so this is non greedy close
that off and then guess what I know I'm
gonna have a certain number of spaces
again and then what I'm gonna do is I
know that I'm gonna have a certain
number of characters backslash W
followed by the fact that I can expect
them always to be three in length
followed by a space or a number of
spaces that I don't know how long and
then I'm gonna come in and do the same
thing with digits and I know in this
circumstance that I'm gonna have two so
I put that in there followed by spaces
that I don't know how long followed by
another digit that I can guarantee
there's going to be at least four of
them and I don't know if you've noticed
but I put these parentheses in here what
these parentheses are doing it's gonna
grab me Derby Lane and then it's gonna
grab me this word here and then it's
gonna grab me this whole string of first
three characters meaning January and
that's gonna grab me two digits and it's
gonna grab me four digits okay so I'm
gonna have this whole date right here
and that's why the parentheses are
around there because I want to grab that
whole piece of information and backslash
s and then I don't have a certain number
of characters close that off followed by
certain number of spaces don't know many
followed by some type of character
followed by the word grade followed by
spurt number of spaces and then some
more characters followed by a certain
number of spaces followed by three
digits and then I'm gonna expect that
there was gonna be a parenthesis so why
he need to zero that out that's why I
have the backslash in here
backslash it out whatever you want to
say it's full advisor number of spaces
followed by the word time : certain
number of spaces followed by a bunch of
characters that can be in the side of
there and then I'm gonna have the end of
the line is going to be met or should be
expected
put the delimiter inside of here then
I'm gonna call a function called F gets
what it does is he just gets the line of
text from the file that I define and
then everything that I've defined inside
of parenthesis over here is going to be
stored inside of an array in this
circumstance called
race info then I'm going to put Craig
sent order and basically what this does
is it wears the results to be based off
of this first sub pattern in parentheses
so everything's gonna be in the array
based off of the order that I put them
in parentheses I know that I was able to
get ahold of Derby Lane that it added
added added a super well now I need to
worry about the other line of text so
I'm gonna come in here and I'm gonna
grab both of these guys paste them both
in here great right like that
so now I know exactly what I need to
work with here so what I'm gonna do
put another delimiter in here caret
symbol again and then I know that I'm
gonna start off with capital letters A
through Z lowercase letters A through Z
potentially a quote potentially a space
and I want to store that and then I want
to store the next thing also which is
gonna be digits that are going to be two
in length that's consistent and then
potentially I might have to grab one of
these guys inside of here and how you
reference these weird-looking fractions
is a backslash followed by P followed by
capital n however I don't know if it's
gonna be there so what do I do I put a
question mark inside of there so that's
what you use the question mark for and
then I know I'm gonna have digits I'm
gonna have one digit followed by spaces
but I don't know how many then I'm gonna
have another digit followed by space
then I don't know how many followed by
another digit guess what's coming spaces
don't know are many and then I'll accept
any characters as long as they are not
uppercase a through Z so that's what
that caret symbol does right there
expect a whole bunch of them potentially
and then I'm gonna put in that this
whole pattern is gonna end with an
uppercase letter A to Z and as you can
see I'm uh put parentheses around
because I don't want that information
and it's gonna be one capital letter
followed by any number of additional
characters right like that and that's
the end of that regular expression and
then I'm gonna be using pretty much the
same information so I'm gonna copy and
paste this copy come in here won't get
rid of this extra comma except in this
circumstance it's gonna be file two and
I'm gonna call this guy right here dog
info and everything else is exactly the
same alright so all of in parentheses is
going to be stored in these two
different arrays one of them's called
dog info
it's called race info you know edit a
lot about what's going on here I'm
actually gonna leave these in here how
am I gonna iterate through these arrays
with for each I think it's about right
and I'm gonna go through race info give
it a temporary value vow jump in here
tab echo match is going to be the first
thing I pull out of here and since it
was the first thing in the parentheses
it's going to be in the index 0 grab
this I'm actually just gonna shoot this
out on the screen get the parentheses as
follows
I'm just increasing these values so now
I got to do is come in here and change
all these alright got all those in there
they all look good move up the screen
here now I'm gonna do exactly the same
thing for dog info as my store these
involve two and now I'm gonna continue
to do this as long as string length and
then I'm gonna use the string string
function to find out if the string and
Val two contains the word Derby Lane
strange oh wow two zero right like that
and then Darby Lane right like that and
then let go dog info without to zero and
I'm gonna copy this copy and I'm gonna
need four of these guys right like that
come in here one two three four and then
we're gonna have name wait and you might
not be able to tell what I'm doing here
but basically what this is scroll up
here for a second see how I know this
line and this line or going to be the
same up until the point that this shows
up what I'm doing down here is I'm going
to just print out up to this point for
every single line in that contains
information on the dog
okay and position it break is the very
last thing alright so I know that this
is going to be the same for every single
dog up until that point well now I'm
going to close this off and then what
I'm going to do is I'm going to call it
the rest of numbers is equal to preg
replace and I'm replacing here any
instance of multiple different spaces
excuse to use regular expressions with a
single space okay so I just cleaned up
all my data I know that there's gonna be
a single space between each of those
values or previously I did not know that
it's just your clear value to the index
six is going to be all of this
information
right here that I'm gonna be working
with okay all right so there's a
different number of digits here
sometimes we're going to have one two
three and sometimes we have one two
three four five so I have to handle that
it's really no problem now what I'm
going to do take rest of nums then I
explode this strength dividing the data
between the single spaces which I know I
have single spaces because I did this
guy right here rest of noms boom boom
right like that and now what I can do is
count the number of items that are in
this new array and that's what the count
function does and if they're equal to
six the type of rest of noms right like
that and then break lead copy that put
that in there one two three good see I'm
pretty much doing the same thing over
and over again this is just the way my
brain works some other people are very
efficient other things and I'm not one
of those people that thinks there's
definitely a way to do things if it
works in my opinion that's great
oh and by the way the regular
expressions that you saw up there yes I
couldn't make those much much shorter
but I chose not to because of wanting it
to be understandable that's another
thing I just do I like having things be
understandable rather than short and
confusing but if you like things to be
sure
let them be sure I don't care in here
you can actually I'm still gonna use all
these things point right inside of here
one thing that's gonna be different here
though right here and you don't need to
know what all these technical dog things
mean either
don't let that confusion seconds
complete race and final odds and then
all I need to do is come in here and
type in to type in three type in four in
here just for neatness reasons I'm gonna
throw that guy right there and then I'm
gonna close this off
I'm going to close out I'll leave this
where it is and close off the final
thing type in half close close that file
if close to to close that as well and
exit to exit the script and that's it
that's the whole entire thing
right there that is how to scrub through
a website that doesn't give you much to
work with in regards to tags and to a
certain extent has oddball information
one thing I wanted to cover at the end
of this tutorial because I keep getting
asked this question and I'm not a
political guy or anything but I just
wanted to answer it people keep
asking me and I know this is completely
off-topic from this so I just want to
get this done with people keep asking me
what it means when they hear in the
media that the government is providing
corporations with tax breaks to ship
jobs overseas obvious I live in the
United States and this is the United
States issue basically what it means is
if you have a corporation in the United
States they're supposed to pay thirty
five percent tax on all of their profits
well in the tax code there is a rule
that says if a corporation makes a
profit overseas they do not need to pay
this thirty five percent until they ship
that money back and incorporate it as a
profit for this corporation so hence any
corporation could make a billion dollars
for example and if they make it in China
or wherever they make it and they never
ship this profit back to the United
States they never have to pay this
thirty five percent so what they're
talking about in regards to shipping
jobs overseas is if they take this money
into China or wherever and they spend
that money they're paying people
building factories blah blah blah blah
blah then they never have to pay taxes
on this offshore profit so real quickly
and dirty that's how to answer that
question because I keep getting it over
and over again and I didn't think it was
worth my time to do a whole tutorial on
just that little tiny thing so there is
actually two totally bizarre tutorials
in one if you have any questions or
comments leave them down below otherwise
until next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>