<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Android Development Tutorial 15 | Coder Coacher - Coaching Coders</title><meta content="Android Development Tutorial 15 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Derek-Banas/">Derek Banas</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Android Development Tutorial 15</b></h2><h5 class="post__date">2013-07-14</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/qcotbMLjlA4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">well hello internet and welcome to part
15 of my android development tutorial
today I'm gonna focus in on one topic
which is confusing a lot of people to
make it a hundred percent
understandable today I'm gonna show you
the easiest way to parse Jason with
Android so I have a lot to do so let's
get into it okay so the very first thing
I am going to do is go and use a Yahoo
restful service and it's gonna be at
developer.com /y ql forward slash
console ok and we've used this before
and what i'm gonna do is i'm gonna get
stock information just like before now
of course i'm gonna come in here and
switch this over to Jason shut off
diagnostics like that then I'm going to
come over here to this side of the
screen and click on show community
tables like that and then I'm gonna
scroll through this until I find my
stock information which is gonna be in
Yahoo and here it is I'm gonna click on
that and then I'm gonna search through
this guy until I find quote click on
that and here all this information shows
up and I'm just gonna cut it down to
just one stock and I'm gonna shut off
diagnostics turn on Jason hit test and
there you can see all of the Jason
information now these guys are going to
be considered Jason objects so query is
going to be a JSON object and I'm going
to leave in the CB function in this
situation because I'm gonna show you how
to delete it because that comes up a lot
and I'm not really gonna focus in on
arrays and how they work but I'm gonna
cover everything else my goal here is to
make this as simple as humanly possible
so now that we have all of this
information here what we're gonna need
to do is go down here and copy this URL
just select it hit copy and then we're
gonna jump over and write ourselves some
code ok so here I am inside of Eclipse
and I created this application I've done
it so many times I'm sure you guys know
how it works we're only going to be
working with two different files
mainactivity.java and main.xml which is
gonna handle our layout and i'm gonna go
into this guy and since i have my you
already set up I'm just gonna set this
up as static string and I'm gonna call
it Yahoo stock info is equal to and then
I'm gonna print out that URL and at the
very end of it put a semicolon so that's
all ideas copy and pasted that
information and you can see here if we
scroll down inside of it this is where
the Microsoft part is so if you wanted
to go in here and make this a more
dynamic application all you need to do
is go in here and change that part which
is very easy because we've done it
before we just have this be one string
the beginning part and then after the
Microsoft be the other string and then
throw in whatever your symbol is for
your chosen stock but I'm not gonna
focus on that I like I said I want to
make this simple so now what I'm gonna
do is jump over into main dot XML inside
of this guy this is just a linear layout
you can see JSON parser is what this
guy's gonna be called then inside of
this guy what I'm gonna do is go over
here to the form widget so I'm gonna
grab medium and drag it over and just
drop it inside of there and since it's
highlighted I can then come over here
and I'm just gonna call this guy the
line one and all this code is available
in a link in the description so get it
and look at it it'll really help you if
you have it so I just changed that to
line one like I said nothing fancy here
and then we're just going to update the
our file then I'm gonna grab another
medium text element and drop it inside
of there and I'm gonna grab another one
to throw it inside of there as well
there's three medium text documents or
text components and I'm just gonna
select this guy over here come down here
and on this situation I'm gonna name
this guy line two very simple hit OK
come back up here select this guy text
you again and this one's going to be
called line three I'm out of there hit
okay all of these guys are all set up
and if I come down into the main dot XML
to see the actual code here is
everything all set up for me and if I
want to I can come in here and just
delete that medium text part right there
it doesn't really matter cuz it's gonna
be deleted immediately whenever the app
starts running bounce back over I missed
this one and there we go
and I could also come in here and if
this was just a regular textview I could
also come in here and do something like
style is equal to at Android style
forward slash text appearance dot medium
like that or I could have just selected
this one right here which I'll just do
and put those inside of there instead of
having this be here but it really
doesn't matter I mean you can do it
either way I just wanted to show you
there's a couple different ways to do it
and if you jump over in a graphical
layout while there's nothing there so it
doesn't really matter and that is all
we're going to do with the layout part
so now I'm gonna jump into
mainactivity.java and start creating
everything else now first thing's gonna
show up there's a red line here that
means I need to import activity library
did that and what I'm gonna do is
actually define the content that I want
to get let's jump over into Yahoo and
take a look at that there's a couple
things we need to think about whenever
we're using this data what we're
basically gonna do in this program is
we're gonna jump in and grab the query
JSON object and then as we go down
through here you can see there's no
curly braces no curly braces no curly
braces and then there's another opening
curly brace well that means that the
JSON object named results is inside of
query so we're gonna jump in grab the
query object and then we're gonna say
hey we want the results object that's
inside the query object and you can see
another opening brace and that means
that quote with another opening brace is
going to be another jason object then
what we're gonna do is come inside of
here and ask for these jason strings
that are inside of here and that's how
we're gonna get all of our data we'll
revisit that here in a second so now
that we know all that let's go in and
we're gonna grab symbol we're going to
grab change days low in days high just
to keep it very simple and all of these
guys are strings so we don't need to
worry about anything else real simple to
work so now I'm just gonna make these
static again I'm going to call this a
string stock symbol is equal to I'm just
define all these and give them a value
of nothing and inside of this I'm gonna
call this stock days low and then this
is gonna be stock days high and then
this is gonna be stock change so those
are gonna be all the different values
I'm gonna be working with now that I
have that all set up let's go public
void on create bundle saved instance
state we're not gonna be saving anything
if in case this should crash or
something in this situation so we all
need to worry about that an import and
this is going to be actually overriding
the oncreate method that comes with the
activities so in that situation I'm
going to type in override and with this
guy I'm gonna call the superclass on
create and pass it saved instance state
just like before just like we've always
done
then set content view and this is just
going to be a reference to the layout
file that we're gonna use with this
which is gonna be main dot XML so to do
that we just go our layout dot name very
simple now we have that setup and then
we're gonna go new my async task and
call it to execute and the reason why
we're gonna need to use async task is if
you ever need to perform any type of
background tasks like you need to go to
a website or a restful service and grab
information and you then want to write
that information to the GUI you have to
actually use an async task to perform
that operation because it's going to all
be done in the background and down here
I'm actually going to define that whole
entire thing so I'm gonna go private
class my async task extends async task
and it's throw in string string and
string and then we're gonna have to go
and grab this guy so we're gonna have to
import that library and now that we have
that all set up we're gonna have to get
the unimplemented methods and there's
actually going to be two methods we're
gonna have to create there's going to be
doing background and then there's also
going to be the method that is going to
be called after all the background in
formations all done and it's called on
post execute and with this guy we're
just gonna change this to result and
then we'll get back to that in a second
okay
so the very first thing we're gonna need
to do is get an HTTP client that is
going to support both streaming uploads
as well as downloads now in this
situation we're going to be getting a
download of information from that
restful service from Yahoo and I'm just
gonna call it HTTP client is equal to
new default HTTP client and then I'm
gonna go new basic HTTP params then we
just need to come in here and get all
these different libraries then after we
have that set up we're gonna need to
define that we want to use the post
method to grab data from a provided URL
which is gonna be from Yahoo just like
before how you do that is HTTP POST I'm
just gonna call it HTTP POST is equal to
new HTTP POST and then pass inside of it
Yahoo stalk info which is the URL for
that data that we're gonna want to get
now that we have that set up we're gonna
define exactly the type of web service
that we're gonna be using which is gonna
be a JSON service of course set header
and we're gonna say contents type
application Jason then we're gonna have
to get ourselves an input stream which
is used to read data from the URL of
course I'm gonna just call that input
stream give it a null value and then I'm
gonna create a string and I'm gonna call
this result and give it a value of null
and it's going to hold all of the data
that we get from that URL and I'm gonna
create a try block going to ask for a
response I may get one I may not from
our web service HTTP client execute pass
an HTTP POST to that then I'm going to
create an HTTP entity well that's hard
to say HTTP and I'm just gonna call it
entity and what this guy's gonna have is
all the content from the requested URL
along with headers and all kinds of
other information and to get that you go
response get entity
there's no reason of course I memorize
all the
stuff trying to keep it nice and simple
input stream I need to get the main
content from our URL then I'm going to
create a buffered reader and it's gonna
read all the data from the input stream
until the buffer is full and just helps
us grab everything in bunches rather
than trying to grab everything
willy-nilly bufferedreader and then
we're gonna go a new input stream reader
pass the input stream to it and then
Jason it is utf-8 by default so we're
gonna go UTF dash 8 and then throw an 8
at the end of that and there we are then
we're gonna create ourselves a string
builder the string builder and it is
going to store all of our data for us
create another string called line give
it a null value and I'm gonna read all
the data from the buffer until nothing
is left so to do that I'm gonna create
myself a while loop and I'm gonna say a
line is equal to reader read line and
we're gonna continue until we hit a null
statement and then as we go along I'm
gonna take the string builder and append
the line of data and then I'm also going
to throw in a new line and then after we
are done reading all the data we've read
it all we're gonna go resolve is equal
to the string builder and convert it
into a string so everything's gonna be
inside of result now and then we have to
catch any exceptions that are thrown
just to keep this nice and simple I'm
just gonna catch all of them and
e-prints stacktrace and then we're also
going to put in a finally in this
situation and it's job is to just close
the input stream for us but to do that
we're gonna have to wrap it in a try
block and then I'm just going to say if
input stream it's not equal to null
input stream close ok so we got all our
data already we're done with that we
grabbed it all and then exception wise
we're just gonna catch all exceptions
again there we are so now what we need
to do is to create a JSON object and I'm
just gonna call it JSON object and what
this guy is going to do is hold a bunch
of key value
hairs from the json source that's it and
i showed you what they look like here
previously and now inside of a try block
once again remember i said that i want
to show you let's look at yahoo i'm
right we have CB func inside of here
well if we want to get rid of that i'm
gonna show you how to do that if we come
up here see right here now if i want to
delete
1 2 3 4 5 6 7
i want to delete all that data off of
there how i do it these go result
remember that stores all the information
and then I go result dot substring I
want to start after the 7th part and get
a substring get everything else that
falls after that so that's how you chop
off the beginning of that and then how
you chop off the ending all the back
over in Yahoo come down here we want to
chop off this ending part right here no
problem
just go into result and I don't purpose
threw that in there just to show you how
to do this is you have no idea how many
people have been asking me for this
tutorial like its constant that's why
I'm doing it then we go result dot
length like this minus 2 and there we go
now we got that substring so that's a
nice quick and easy way of cutting off
the beginning and the end of that and if
you actually want to print all the
information that we just downloaded
you could go log dot V and then say we
want to do something like type of in
JSON parser result i'd like to use
uppercase letters so they're easier to
say and then we could just type in
result and that would print all of our
information well after we get the
library for this that would print all of
our information inside of the logcat
panel down inside of here that's a great
way to debug android applications if
you'd want to do that but for now i'm
just gonna call them at that out then
what i need to do is go inside here and
get the root JSON object and to do that
we're gonna JSON object obviously and
then we're gonna say new JSON object and
then we're gonna pass in result to that
so that's gonna get us an object of all
all the data then after we do that we
want to get the query object so that's
right here say this guy right here we
want to get that object and then what
we're going to be doing remember is
getting result
after that so we're gonna get quarry
object and then we're gonna get the
results object that's inside of the
query object so bounce over here again
JSON object query JSON object is equal
to and then we're going to take the
whole entire thing right there paste
that inside of it and then say get jason
object and we are and what's that JSON
object we want to look for well it's
called query okay there we are it's not
that hard I don't know I've seen a lot I
don't understand why you guys are
confused though because I've seen some
terrible tutorials on this stuff and
then if we want to get the results JSON
object just copy this whole entire thing
because that's what we're doing except
this is going to be results and results
I mean this guy that's highlighted right
here results not result the whole entire
thing
sorry about that name in conflict but
it's not gonna bother us in any way and
then we're gonna grab the query object
that we just created here paste that
inside of there except the thing that's
gonna change is we're gonna say hey we
want the results JSON object this time
and then after we get that what we want
to do is we want to get the JSON object
name quote again come over inside see
there it is quote and that's gonna have
all our JSON strings inside of it say
we're almost home to get that gonna do
the same sort of thing again paste that
in there except this I'm gonna call
quote JSON object and then we're going
to be looking in the results object for
the quote object let's paste that there
same we're just walking ourselves
through the tree then we're gonna look
for quote that's the name of it there we
go so now we got our final object where
all of our data is going to reside and
that's where we're gonna be pulling all
that information from so what we need to
do now is get the JSON strings that are
inside of that quote object and we're
gonna store them inside of those strings
that we created very very much at the
beginning of this tutorial and to get
them we go quote chase an object because
that's where they reside instead we say
get string in this situation and how we
get it as we pass over the key which is
symbol in this situation and there we go
now we have that information pulled from
the JSON restful service and it's all
stored for us so then we go days
same thing and it's called days low of
course bounce over inside of here saying
that's all I'm doing I'm entering in
these names and it's gonna give me back
these values very useful come in here
again
this is gonna be days high and to get
that we're just passing days high I know
we are and then finally change and
change there we go we got all that
information we want we could of course
prey on all that information out using
this little log method up here just like
before I'm not gonna bother with that
and in this situation we're all done so
all we need to do now is catch an
exception and the only exception that
could be thrown here in this situation
that I can think off off pop in my head
is adjacent exception so we're just
gonna catch that and then print that
error if it should occur and then this
guy we're gonna return result it's not
really gonna matter but whatever
so all that leaves us with is the on
post execute and what this guy is going
to do for us is write all that
information to the text views in our
layout so to do that we need to create
the ability to do that and remember this
was called line 1 and textview and we're
gonna say find view by ID and pass in
our or dot ID and the name of that guy
was line 1 see line 1 there it is and
then we need to do this for all of the
text views and there's only gonna be
three of them and this is going to be
line - this is gonna be line 3 and then
this is gonna be line 2 and this is
gonna be line 3 then we just need to
change the data that is inside of those
text views so to do that I'm gonna go
line 1 dot set text like this and then
go stock + stock symbol get that at that
in there and let's say that I want to
put a space inside of there and then get
the stock change for the day there we go
now we need to do that for the other
text views so I'm gonna go to line 2 and
line 3 change this today's low rid of
all this stuff and just type in stock
days hello
and then this guy is gonna be days hi
and this is gonna be stalk days alright
and there we are we got that all set and
we are done really this is it
but I want to show you a couple other
things you can do with Jason inside of
Android so whenever we looked at the
Yahoo information there's all these
results and let's say that we would want
to store them inside of an array how
would we go through and get all this
information we already know how to grab
the values if you have the keys so in
this situation I'm just gonna grab all
the values so we're just gonna jump up
in here and I'm gonna type in not needed
for program so this stuff's not needed
but it's something I just want to cover
just to show you how to grab an array so
to grab an array we're gonna go and
create a Jason array and let's say I
want to call it query array like that
this is definitely something that you
would do jason object and to get
everything in the quote jason object
which is gonna be a list of all the
types of data that's in there you just
type in names and that's gonna return
all of these different guys then I'm
gonna go and create myself a list of
strings because those are all gonna be
strings I'm just gonna call it list is
equal to new array list which is gonna
be a string and then I'm gonna create a
for loop inside of this go int I is
equal to 0 while I is less than the size
of my query array length won't increment
this guy and then I'm going to add them
to my list to do that I just go Korea
array dot get string all right like that
and then if I want to print out to the
screen all of that data I'll you can
just go string item and list which is my
list jump up here and just grab this
bounce back down inside of here and then
maybe I want to call this something like
Jason array items and item that's gonna
print all those in my logcat panel which
is gonna be really awesome and I also
have a couple other little things that
is in the code if you want to
those different things just go get the
code okay so I have all that information
couple different ways to work with JSON
objects and JSON data in general so
let's execute it and there you say stalk
Yahoo there's the daily change there's
the data's lilo there's the daily hi and
there is all of our information and then
also if we come over here go down to the
logcat right here grab this guy you're
gonna also see that all that other data
that we asked to pull in like the array
items and all that other information is
all down here inside of the logcat panel
so pretty cool whole bunch of ways to
work with JSON data and up next I'm
going to take this information and I'm
going to put it into a new Android
application as we explore fragments
please leave all your questions and
comments below otherwise till next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>