<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>How to Make Video Games 18 : Make Ms. Pac-Man 2 | Coder Coacher - Coaching Coders</title><meta content="How to Make Video Games 18 : Make Ms. Pac-Man 2 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Derek-Banas/">Derek Banas</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>How to Make Video Games 18 : Make Ms. Pac-Man 2</b></h2><h5 class="post__date">2017-08-09</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/YtVaV2Y7Mlg" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">well hello internet and welcome to part
18 of my how to make videogames tutorial
series in this part of the tutorial
series I'm going to cover numerous
mechanics they're going to make it
possible for you to make many different
games what I'm going to specifically
focus on is moving miss pac-man with
precision through a maze and we are
going to be using pivot points rather
than collision detection and pivot
points are going to make for very
precise handling and movement without
any sorts of problems and it's also
going to be a much more lightweight in
regards to the calculations that are
going to be needed to perform and I'm
also going to cover organizing game
objects inside an array and numerous
other different things like always all
the images as well as all the code is
available on a link in the description
underneath the video and I have a lot to
do so let's get into it okay so here we
are inside of unity and I went ahead and
did a couple things ahead of time and I
did this because I think it might be
easier for you to understand so what we
have here I went and created turning
points which is an empty folder here and
then at each of the individual points
inside of our maze that we have here
every single point in which pac-man or
miss pac-man would be able to turn I
have a point and these are all empty s
as well so I just went and created an
empty I just want to appear and I went
create create empty and I created all
these individual points then what I did
was I went up here and I clicked on
these little guy here I call these
gizmos and gave each one of them a
little dot and that's just so that we
will be able to see the gizmos on the
screen also what I did I went into our
dots folder selected every single dot
and you can see right here I went up
there and I went and created a tag for
each one of those how we do that is I
just go add tag I go well let's just
show you add tag and then you click on
the plus button and I've made tags for
points dots pills as well as MS pac-man
and then I just went and selected them
right like this as you can see right
there so I did that ahead of time and
like I said I did that for all the dots
all of the pills as well as Miss pac-man
and also for all of our turning points
just like you see there in regards to
the individual points of course they are
going to just be moved in to pass it
into place with precision once again one
and one you're just going to go throw
the empty point inside of there and then
you are going to select it and put it in
position inside of the inspector I think
that is the best way to precisely place
all these points and as you can see
there they are all placed inside of our
little maze I then created scripts for
the points the individual turning points
and you can see right there what I put
inside of there I have the turning point
next points that we are going to be able
to move into and to set all of those up
what I did let's just go and select all
these so I'm going to select all of my
points just you can see them on the
screen I went and let's say we are at
this turning point I went and dragged
into the inspector all of the potential
positions or points pivot points that we
could move to from this point so let's
say you're coming up here you hit this
guy and you know you can make a right
and up a left or a down I went and put
all of those individual points whoops
let's go arm throughs how do we even
select that um let's just go grab this
one here by default all right so we have
this individual point based off of this
code that I have right here I can zoom
in and show it to you I'm going to write
a lot more code inside of here also as
well this is where we're going to store
all of the individual points we will be
able to move two from each of the
individual points so let's go and select
a random point once again so you can see
I selected this guy right here from that
point I'm going to be able to go to the
23rd or the 30th points and you're going
to see that if I click on 23 see it's
that one down there and then if I click
on the 30th point you're going to see
it's over there all right and how I did
that was I just created that array of
course and then I dragged those
individual points from over here in the
hierarchy into the position on the
individual screen there's no way to
really do this programmatically so I
just did about
and then we are going to generate also
the directions that these individual
points are inside of code I'm going to
write that code here in a minute and
that's going to go to or that's going to
go inside of another array I also
created a miss pac-man script here and
attached it to mix miss pac-man you
could see that there's nothing there I'm
going to be creating that also created a
game board script and that is going to
be assigned to my game board of course
which is called GB grid or Gameboy grid
we're going to write all the code for
that in this tutorial as well and then
the final thing that I did was for Miss
pac-man I went in and I created a
rigidbody as well as a circle Collider
for Miss pac-man and you can see all of
the settings that I set up for that so
you can just go pause your screen and
put all that inside of there I've
covered all of these things numerous
different times so I don't see any
reason to you know go over exactly
what's going on I'm just showing what's
going on here and we have miss pac-man
set for triggered of course so that
whenever she hits one of our pivot
points we will be able to acknowledge it
hit a pivot point and then react to that
movement inside of that pivot point I
also with my points also created a
circle Collider and you can see is
triggered is also set there and that is
every single thing that I did ahead of
time it sounds like a lot but not really
and you can go and pause your screen and
set up your screen exactly as I have it
setup also should already showed you
that and I didn't do anything with my
grid previously and I did nothing no
changes to my main camera either so now
what I'm going to do is I'm going to
jump into the game board script and set
up the array that is going to hold all
of our individual turning points for a
game and you may be wondering why I
didn't just come in here and why don't I
just come in here and play this just so
you can see something because I want to
demonstrate exactly why I'm doing things
the way that I'm doing one all right so
let's say that I would have instead
surrounded all the individual parts of
this with colliders I could
did that however that would cause a lot
of problems let me cover a couple of the
potential problems if you remember from
our Mario game whenever Mario was moving
across the long platform he would
occasionally hit a problem with it and
collide with a Collider even though it
wasn't supposed to be that there are
sometimes flaws with using colliders and
that's one of the reasons why I did not
put colliders on all of these individual
pieces and then had miss pac-man go
inside of them another problem is let's
say miss pac-man is moving along and she
comes and she wants to go inside of this
part of the maze she wants to go from
here up into here well as she's moving
if she isn't precisely at an individual
part like exactly in the middle and she
comes up here and she collides with say
the collider that's right here that is
going to throw her over here and she's
actually not going to move like Miss
pac-man in perfect alignment inside of
our maze but instead she's going to get
pushed sideways or diagonally whenever
she hits this Collider and get some
pushed over in this direction and it's
just going to look sloppy so what I'm
going to do is instead use those pivot
points and that's going to allow me to
have everything be very very precise so
hopefully I cleared up all that stuff
now I'm going to jump into the game
board script and start setting
everything up alright so here we are now
what I want to do inside of my game
board script is I want to create an
array and it is going to hold all of my
game objects eventually but at this
point what it's going to hold is just
the turning points so to create this I'm
going to go public and we're going to
store transforms inside of here and like
this and I'm going to call this game
board points because it's going to have
all those pivot points inside of it and
we go new and transform and how big
should it be let's jump back over into
unity now if we come inside of here and
we select these individual points I
always say that's trying to find there
we are alright so we have this guy up
here it's as high as it can go remember
it starts off at 1 down here in the
x-direction 0 is the outside of our maze
so
based off of that we know that this is
29 so our height is going to be 30 let's
see if I can guess where I don't need to
guess I just need to click a couple
times here there we go
so there is our third point which is at
the far right of the screen and you can
see that that is set for 26 so it's
going to be 27 by 30 all right so we're
back inside of here so we're going to go
to 27 by 30 so that's how big our array
is going to be to hold every single
thing we need for our game what else we
going to need to do well I'm going to
need to get references to the empty
that's going to contain all of my points
so I want to get ahold of the game
object called turning points which is
like that folder and I don't you know I
want to get ahold of it let me jump over
to you and show you again so what I want
to do is get ahold of this guy then what
I'm going to do is I'm going to show you
how to cycle through and grab all of
these individual points and then throw
them into the array that we just created
so this is what I'm trying to get this
game object so to get that sum game
object or let's make that private
there's no reason for it to be public so
we'll go private game object and turning
points
it is this should be public because I
need to get ahold of this array and do
things with it so that's definitely
going to be that all right so we go
turning points got that set up I don't
need to create anything else inside of
start now I'm going to just create
everything and I'll never have to do
anything else with a game board at least
at this point so the very first thing
I'm going to do is get the empty that is
named turning points which it just
showed you a second ago so I'm going to
go turning points is equal to and to get
that you just go game objects and you go
finds and you type in what you're
looking for so I'm going to go turning
points and there it is and then what I
want to do I want to cycle through each
point inside of that empty and I want to
put them in the array so to do that
these are all transforms of course so
I'm going to go transform and I'm going
to call it point in turning point oh
this is going to be turning points oops
there we are turning points and
transform all right so we got all of
those we're going to cycle through every
single
one of them then what I need to do is
get the vector position for our points
and that's going to be a vector to of
course position is equal to point
position and then I can go now and put
the point inside of our array using the
location it is inside of our grid all
right so when we go game board points
and I need to I mean it is an integer
but I'm just going to make sure so I'm
going to cast it to be an integer and
position X and once again integer again
and this is going to be position Y and
then I'm going to store the point that
we found inside of there inside of that
all right so that's how we set up our
array and put all of our turning points
or our pivot points inside of it and
that's all we're going to need for game
boards so now what I'm going to do is
jump over and set up our turning points
all right so I went ahead and I already
talked about how we are for each of
these pivot points or turning points we
are going to store references to all of
the pivot points that can move towards
and of course it doesn't have any of the
ones and it doesn't can't move towards
all so what we're going to do inside of
this guy is we are going to store for
each point inside of here we are going
to have an another array that's going to
be exactly the same size and what this
is going to store is the position in
relation to each of my pivot points so
here we go let's come in here and just
look at this so that means if we're
using this as an example this pivot
point right here and we know that it can
move upwards or it can move to the left
what we want to know is what direction
in our game board is that so if we want
to move from this pivot point to that
pivot pivot point how do we do it
well we would use a vector to that is
going to be a negative one for the X and
a zero for the y and if we want to move
in this direction it's going to be a
zero for the X or the vector two and
it's going to be a positive Y so we need
to store inside of the other array the
let's grab this guy inside of vector
- next point we are going to in this
situation let's just grab this one
instead we're going to store a from this
to the next pivot point is going to be
two negative x and the y is going to be
0 and in this one it is going to be a 0
for X and a positive Y to move up
alright so we're just moving using
vectors on the XY point and now I need
to go in and I'm going to generate those
guys automatically or programmatically
so here we are again
alright so let's set this up very first
thing I want to do is I want to
initialize the array that will hold the
vector to each of my nearby pivot points
or turning points so that is going to be
called back to next point probably came
up with a better name than that um let's
go and this is going to be vector twos
of course and I'm going to go next
points lengths it's going to be exactly
the same size as this array that we have
right there of course then I'm going to
create a for loop and I'm going to cycle
through and generate all of those points
so I'm going to go I is less than next
points length and then generate that
then what I need to do is get each point
so that we can find its position in
relation to our current turning points
so I'm going to go and this is going to
be a turning point and this is going to
be called next point equal to next
points then I need to get the vector to
the next starting point so for example
if it returns a vector to that is 1
comma 0 that's going to be to the right
or if it returns a vector to that is 0
negative 1 that's going to be down so
I'm going to go vector to once again
point X is equal to next point transform
and then I want to get the local
position and then subtract from it
subtract from it transform dot local
position which is going to be this
turning points local
position and then the final thing I want
to do is store the vector to the vector
to array and to do that I go back to
next point is going to be equal to point
vector and then I have to make this mark
this as normalized and the reason why is
this could come back with say a negative
five and comma zero I want it to be
force I want to force the negative five
to be just a negative one because that's
the way vector twos work so basically
that's what normalized does it receives
a value and then it converts it into
either a zero or a one because that's
the way everything's set up in unity and
that's all I need to do for my turning
points and it's going to automatically
generate all of those directions so now
what I got to do is jump into my miss
pac-man script and then we're going to
start animating miss pac-man all right
so the very first thing I need to do is
I need to come in here and get our
system library you're going to see in a
little bit what that is going to be used
for and then I have to think about all
of the different things I'm going to
have to store you know property wise for
our Miss pac-man to work so she is going
to have a a speed of course so we're
going to give her a speed I'm gonna have
this set for zero point four out I use
that a lot I don't know to my eye that
looks like a good thing what else might
I need well I need to be able to move
miss pac-man so of course that means I
need to have access to her rigidbody so
I'm going to go rigidbody 2d and I'm
just gonna call that RB what else am I
going to need well I'm going to need um
I don't know that's all I can think of
right now
so what I'm going to do is I'm going to
create our awake function inside of here
and this is just going to make sure that
components have been created whenever
the game starts so that I don't try to
access a component that hasn't already
been created and the one that I'm going
to need is a rigidbody and to get that
I'm going to go get components and this
is going to be rigid body 2d and I'm
going to set that up so as soon as the
script runs this guy right here is going
to be run
it's going to make sure that everything
is set up and is ready for me to go then
inside a start what do I need to do well
only really one thing I need to get miss
pac-man and have her start going to the
left whenever the game starts to do that
I'm going to go rigidbody and velocity
and set it to a vector 2 so if we want
to move something to the left what do we
do we pass it a negative 1 for the X and
0 for the Y and if I want to move it at
a certain velocity I'm going to go and
multiply that time speed all right so we
have that set up now what do I need to
do well I want to move miss pac-man
around on our screen and to do that I'm
going to use fixed updates so I'm going
to go fixed update and we use fixed
update whenever we move things using
rigid bodies and there's going to be a
lot of code here so basically what I'm
going to do is I'm going to accept input
on the keyboard so if we want miss
pac-man to go to the left we're going to
have a 1 or 2 go up that's going to be W
go to the right that's going to be D or
down that's going to be s so I want to
get her horizontal movement I'm going to
call this her eyes the horizontal move
whatever that's good and to get that I
go input and then I go get axis raw and
this is going to be called horizontal
when we've done this in previous parts
of the tutorial that's just going to get
me either input from a or from D and
I've covered that previously so I'm not
going to get into where that comes from
comes in unity I'll what the heck I'll
show you all right so if we come in here
and we click on edit and we come down to
project settings and input and then axes
say horizontal there it is and this is
going to be negative button is left and
the positive button is right and then
we're also going to have everything set
up for a or D alright so there it is and
vertical has exactly the same thing say
S or W alright so that's where it comes
from I like to cover everything just to
make sure people aren't confused all
right so we'll go input and once again
I'm going to say get access row and
vertical alright so there's that so now
we got it now what are we going to do
well we are going to check if they press
so to do that we go if and input now
what we're going to do here is we're not
going to pay any attention to the maze
at this you know moment what we're going
to worry about now is getting this
pac-man to move and that's all we're
going to care about so we're going to go
and get a and to move her around what I
need to do is change the direction to
the left in this situation since a was
pressed and to do that I go get the
rigidbody and I go velocity and that's
going to be equal to new vector2 and I'm
going to go horizontal move and that's
and then that's going to be zero of
course and we're going to multiply that
times speed and speed of course is going
to be able to change if you want miss
pac-man to move quicker or slower and I
have as public say up here and if you
want to change that directly inside a
unity you can just if we click on this
pac-man you can see that speed is going
to be set in our script well why isn't
it there I didn't save it yet that's
probably why it's going to be right here
whenever I saved the script all right so
here we are again
so let's come back and what do we want
to do we want miss pac-man to face to
the left the sprite for miss pac-man and
to do that we go transform and local
scale is going to be equal to new vector
two and one and one and then I also want
to set the rotation to the default and
to do that we go transform and local
rotation is equal to and there's that
crazy thing and we're going to go zero
zero zero then we're going to check for
other input options we're going to say
else if and we can go and copy this so
let's just go and get all of it
so we'll go elsif and grab all of this
because it's going to be very similar or
actually let's grab all this so let's
just grab all of that and then we're
going to also have the elsif so go like
this and then paste that inside of there
and we'll say else if if they pressed d
we're going to change that and we want
to move to the right but we don't need
we can keep using the horizontal move
that's no
not going to be a problem to move to the
right however we want this to change the
direction to face the right so in that
situation we'll change that to a
negative one and then we'll keep the
rotation exactly the same then we'll
come down here once again paste that
side of there and now we're going to be
moving in the upwards direction with W
so we're going to have to change these
guys since we're moving in that
direction we're going to now change that
to zero and then we're going to use
whatever the vertical movement is right
there for that guy what else are we
going to do the transform local scale is
going to remain exactly the same one and
one and the rotation is going to be the
same okay so we'll keep that there and
then for our final one we are going to
check if they press s if they want to
move miss pac-man downwards put that
inside of there
once again we're not doing it in on the
x axis so we're going to use a vert
and that's going to move that downwards
and all of the rest of this looks like
it is going to work perfectly fine so we
got that that and that
we can get rid of the else--if because
there's nothing else there and we could
save that and jump over into unity and
test it out so let's go and run this and
you can see there's miss pac-man boy she
is not moving well is she what's going
on this back man and you can see her
face is going why is it going so slow
let's go and change that oh I see what I
did I meant to have this be the speed
before instead of point four I don't
know what I was thinking so just change
that for and also made another little
mistake with the miss pac-man here if I
want her to look up whenever the
keyboard button is pressed the S or
that's going to be looked down if I want
her to look down I need to change this
guy right here to 270 and then whenever
the other one is pressed right down here
I'm going to have to change this to 90
so let's go put those in there and save
it and run it alright and after these
changes you can now see miss pac-man is
moving left and right and also she will
move upwards and downwards and in the
next part of the tutorial what I'm going
to do
is set it up so that she works inside of
the grid system and everything is
perfect so like always please leave your
questions and comments below otherwise
till next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>