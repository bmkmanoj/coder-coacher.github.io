<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Sabermetrics 3 | Coder Coacher - Coaching Coders</title><meta content="Sabermetrics 3 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Derek-Banas/">Derek Banas</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Sabermetrics 3</b></h2><h5 class="post__date">2012-04-20</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/mIMxKY_t7J4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">well hello internet and welcome to part
3 of my sabermetrics video tutorial this
is actually going to be the last part at
least with me playing around with a
database here directly however I am
going to continue using this in my java
video tutorial part 36 if you have one
seen part 1 and 2 of this tutorial
definitely watch that first otherwise
you will be very very confused and
everything that's I type in this
tutorial is available underneath of this
video now in the previous parts we
really focused in on hitting which we're
going to continue to do however I'm
going to get a little bit into pitching
here first off but then we're gonna
cover theoretical team runs created
batting average on balls and play total
bases I'm going to show you a neat thing
we can do with SQL in regards to views
to save searches that we perform and
then final minute cover waited on base
average now here is our last calculation
this was first slugging percentage and
because we're going to be playing around
with pitching this time I thought it
would be interesting to go and figure
out which pitchers had the lowest dra
in history and cut out the dead ball era
which is going to really give us more
accurate results let's come in here and
let's just get rid of those two things I
changed this to pitcher of course and
that means I'm going to be pulling
everything from the pitching table and
of course change this to P so that makes
a little bit more sense and then we're
also going to change this to pay and
leave everything else as it is right now
now we're going to go in here and
calculate earned run average so we're
going to do is we're going to sum all
the pitchers earned runs that they gave
up throughout their career divided by
and then we're going to sum IP outs
which is an abbreviation for total outs
for the pitcher now of course every
pitcher doesn't pitch a complete game so
we're going to have to vide this by 3
and then multiply it times 9 and we're
going to save this result as er a leave
any questions or comments below I'll be
more than happy to answer any questions
so then I also would like to calculate
total innings pitched so IP outs again
divided by 3 as innings pitched and then
because I want to get rid of the dead
ball era I'm going to have to go and get
birth year and I'm going to save this as
just birth year like that and we can
leave everything else here the same of
course I want the pitching tables as
well as the master table to all match up
I want to continue to group everything
by player ID that's great now at-bats
here this doesn't make any sense so I'm
going to need to change that I'm going
to come in here and go innings pitched
is greater than or
to 1,000 and I want to make sure that my
birth year is greater than 1900 again
I'm just playing and that's really all
this stuff is is just playing with stuff
I'm going to go order by I'm going to do
er a but I'm gonna do ascending because
I want the lowest D or a that's what's
important not the highest one and I
think I typed everything in here right
so let's just copy that I bow into my
school which I've open already and let's
run this guy it's actually gonna take a
long time because we have to figure out
we're going to be summing on runs and
innings pitched and a whole bunch of
different things for every single
pitcher in Major League Baseball history
who was born after the year 1900 and
there you can see results actually only
took about three minutes to perform that
calculation and in history for every
single picture born since 1900 Mariano
Rivera is the greatest pitcher in
regards to ER a there you can see all
the rest of the different pitchers
throughout history that's kind of neat
so now I'm going to show you something
really interesting here we're going to
calculate theoretical team runs created
throughout a career what this does is it
estimates the total number of runs a
player is responsible for but before we
are able to create this calculation we
need to calculate total bases in a
career and how we're going to calculate
that as a single is going to be
considered one base a double to base is
a triple three bases and a home or is
going to be four of course alright so
what we want to do here is we want to
actually perform a calculation and we
want to save it and if you want to do
that you could create a new table or you
could create what's called a view and
we're going to call this total bases
then we're going to go as and then
follow that up with our actual query
which is going to be player ID and then
we're going to perform our calculations
so we're going to sum all their hits
plus we're going to sum all of the
doubles and then multiply that times two
plus sum all of the triples times three
plus sum all of the homeruns and then
multiply that times four and we're going
to save that inside of this STB for
total bases we're going to be pulling
all of this information from our batting
table and then we're going to decide we
want to group by player ID this is going
to sort of uncomplicate our calculation
for us and there you go now we'll have
that available for us and just to make
sure that it's there we can go show pull
tables in then we type in laymen
9:1 which is the name of our database
we're table type is like view when we do
that you can see that the total basis
view is available to us inside of there
that's cool now that we have total basis
stored inside of our database as a view
we can perform this theoretical team
runs created in a career and how we're
going to do this is actually over in the
text editor keep everything a little bit
clearer we're going to be playing around
with batting so we've changed this to be
all this can stay the same just like
before and come in here get rid of this
and then this is going to be switched
back to batting with a big still use
master just like before now if we want
to use this new view that we created
we're going to go tot basis and we're
going to give that the abbreviation of T
and we jump up here and calculate this
guy first we're going to go and get the
total hits and this is just a formula
that is used in different people to
agree or disagree on which formula is
best but like I said I'm just playing
around here just thought this will be
fun so I'm going to go total at-bats we
get balls times I'm gonna get a t dot
total basis plus three times P dot
at-bats walks I'm gonna put nine and son
here at-bats walks - and then we're
going to save this as t T or C we're
just going to stand for theoretical team
runs created in a career that's what I'm
doing here with this calculation and of
course we're gonna have to come down
here and change some of this stuff and
make sure that our players match up and
I'm going to copy this and come in here
and go and paste that in there and let's
change this to T and then leave this as
the master we're going to continue to
group by player ID we are not going to
need this having block here right now
we're going to order by T TRC and we're
going to put this in descending order so
just copy this guy paste it over here
and form our calculation and there you
go after another very long calculation
you can see here that Hank Aaron in the
history of baseball is responsible for
generating more runs than anyone else in
history and there is everybody else or
at least the top 50 guys in regards to
generating runs and as you can see that
took 15 minutes to go through tag
calculation so that was a really long
one so now while it is interesting on a
historical basis to look at who
generated the most runs it would also be
probably more interests
and who would actually generate the most
runs per year so to do that again we're
going to have to create ourselves
another view for total bases in a year
and we're just going to go create view
and I'm going to call this tot b yr as
now I'm going to come in here and go
select player ID year ID and then we're
going to go hits plus two B times two
we're not going to have to sum these of
course because we're not taking the
whole lifetime of the player we're just
taking each individual year times three
plus home runs times four as total basis
and we're going to be pulling all this
information from the batting table there
we go created ourselves another view to
save ourselves some time and keep
everything kind of neat let's perform
another calculation this time I'm going
to return the top 50 total bases for
2010 I'm just pulling 2010 out here just
for that I'm going to go TB I'm going to
pull this from the view that we just
created above then I'm just going to say
where year ID is equal to 2010 order by
TB in descending order and let's just
limit our results to 50 thankfully that
was a lot shorter and there are all our
different results also kind of neat it's
a nice way to just check to make sure
that your views actually work so now
let's go in and get theoretical team
runs created in a year trying to blow up
my computer here I think so let's go
your ID actually let's go and do this in
the text editor
we're gonna go player ID and I'm also
going to go B dot year ID large this
pulling the full names here if quarter
side would help me out and in this
situation I can pretty much leave this
formula exactly as it is which is neat
one thing that I'm going to do here
though is change this to you I are also
I think you kind of get the gist of how
to to complete calculations ever in here
so I'm actually going to change this
formula a little bit I want to make sure
that my batting year also matches up
with my total bases year and I'm gonna
go T dot your ID let's just say that I
go 2011 with this if I took this out of
here you would be able to calculate best
T TRC for every single year but I'm just
gonna make it 2011 just give my computer
a break here and in this situation I'm
not going to need the group by and
everything else here looks like it's
gonna be about the same let's just copy
it over here paste it in calculate it
and there you can see that didn't take
anywhere near as long and Miguel Cabrera
Adrian Gonzales Matt Kemp Jacoby
Ellsbury all top form in regards to T
TRC in 2011 and you look at all these
different guys and we could also compare
salaries I mean you can do this for
forever I mean it's just like some kind
of like a game more than anything else
one thing that I forgot to tell is if
you wanted to drop one of your views or
eliminate it all you have to do is type
in drop view and then the name of
whatever you would like to delete so if
you would want to get rid of total bases
in here that's exactly how you do it of
course put a semicolon so that's another
thing I skipped over there for a second
and then let's just go and do two more
of these guys let's say we also wanted
to do another calculation called batting
average on balls and play what this does
is it just gives you an idea of a
player's skill at getting a hit whenever
a ball is in play so I don't know if you
want to consider this to be Locke or if
you want to consider it to be whatever
you want it to be considered it's just
another neat little thing that people
look at so let's come in here get rid of
that I'm also going to come down here
and go year ID and team ID and we're
going to perform our little calculation
here this is actually a pretty simple
calculation so we're just going to go B
dot hits minus B dot homeruns divided by
at-bats strikeouts homeruns plus
sacrifice flies and this is known as
batting average on balls and play so I'm
just gonna save that as bad IP I'm going
to be pulling all this from that we're
not going to use the total bases
calculation this time don't need that if
we don't need all this convoluted
craziness really we just make sure that
our player ID in both master and the
batting tables are the same we're going
to make sure that our year ID in this
situation is going to be equal to 2011
and of course we're also going to make
sure that our bats is greater than 300
and in this situation we're going to
order it by our new statistic and we're
going to limit it at 50 and just copy it
paste it over a neat will statistic and
you can see just how good a player is
getting on based in sort of like bad
situations I like I said this is either
a measure of luck or it's a measure of
just pure effort there's another
statistic you can play around with then
the final thing I'm going to do is I'm
going to do a performance based off of
what's called weighted on-base average
and reason why people use weighted
on-base average is on-base percentage
doesn't wait for how far they reach
Donbass so they show no difference
between a single a double a triple or a
homerun and the problem with slugging
percentage is that walks are not
considered at all
so let's come in here and try to perfect
this little statistic again we're just
going to go in here and get the players
we got our name and we're just going to
leave your ID and team ID on here and we
have to come in here and perform this
really long calculation 0.72 all this
stuff's subjective and I'm actually
going to have to change it from the norm
because I do not have reached base on
error inside of my database but because
that is such an uncommon statistic I
don't think it's going to cause any
major problems we're going to do hit by
pitch and then you get hits and then
this is the part that is normally set
aside for reach base on air I'm gonna
put point eight four but I'm just using
that as an average like I said I'm just
playing around here there you got our
doubles triples home runs and you divide
all this by the total at-bats and we're
gonna save this is w OB a we just need
this matchup which does wanna make sure
that those match up which does we're
also just going to get statistics for
2011 and we're also going to make sure
at-bats are greater than 300 this guy
down here low change that to wo BA
sending order copy bouncing in here and
this is supposed to be a really clear
prediction of just how good a player is
in regards to batting and you can see
Miguel Cabrera up here top of the list
once again so there is a whole bunch of
different statistics you can use to
analyze baseball players and their
overall performance hope you like this
tutorial if you did check out part 36 of
my Java vide toriel remedy be using a
lot of these statistics and playing
around with databases using the
programming language Java leave any
questions or comments below otherwise
till next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>