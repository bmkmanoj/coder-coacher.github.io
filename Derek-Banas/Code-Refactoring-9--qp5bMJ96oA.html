<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Code Refactoring 9 | Coder Coacher - Coaching Coders</title><meta content="Code Refactoring 9 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Derek-Banas/">Derek Banas</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Code Refactoring 9</b></h2><h5 class="post__date">2013-01-24</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/-qp5bMJ96oA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">whoa Internet and welcome to part 9 of
my code refactoring tutorial today I'm
going to show you how to replace implied
primitive trees with the composite
pattern so by a tree structure what I'm
referring to is like you see here on the
screen where let's say we're setting up
a grocery store and we want to set up
different product groups be it produce
cereal meat and so forth and so on and
then we want to create all of the
products and attach them to those
product groups such as apple orange and
pear are attached to produce now very
often when you are creating a tree
structure like this you may ask yourself
how do i model a tree like this well you
can either list the information as
primitives and then search through these
gigantic classes that have things like
product group and then product inside of
them or you can create objects that
represent each level of the tree and the
perfect pattern for doing that is the
composite pattern so let's just get into
the code okay so what we're gonna do
first is we're gonna create an interface
that's gonna be an abstract class and
I'm using an abstract class of course
because I don't want to force subclasses
to create all the methods that I have
inside of it then this interface is
going to be used for every product and
product group that is created thereafter
and of course I could extend this to
make even larger trees if I would want
to so and normally whenever you're using
the composite pattern you're going to
have components somewhere inside of here
so that's the reason why I have product
component as the name and I'm first
going to add a way to add these product
components too much free so I'm gonna go
product components and then new product
component and I'm not going to implement
any of these guys right now and then I'm
gonna go remove and again it's going to
be product component course this is
gonna be new that way and there we're
gonna remove the product component and
I'm just gonna close it off right there
just to make this a little bit neater to
look at and all the code is available in
a link underneath the video and of
course it is free and you should take a
look at it to help you learn this stuff
better and then we're going to put
product component get product come
and here we're going to allow them to
get it using an index and here I'm gonna
have to put return null in that
situation and then string get product
group name because that is something
that I'm going to me modeling this tree
after and here I'm gonna put return all
on that and one thing that I do want
them to have to do is implement this
method which is going to be display
product info so that is the reason why
I'm setting it up that way and there we
go there is product component that will
be used by all of the other objects that
we have so now let's take a look at
product group Java so here public class
product group and this is going to be
like produce and all those other things
that we saw previously when I showed you
that tree and of course it's going to
say that I have to create all of the
methods that aren't implemented and
there we are remember we just had one
abstract class inside of there and then
inside of this I'm going to store all
the products as well as the different
product groups inside of an ArrayList
and I'm just gonna call it product
components sequel to new and then just
put this over a list inside of there and
of course it's giving me an error saying
I need the ArrayList library so import
that so that's good
then I'm also going to put a string
inside of here and this is going to be
the product group name and then I'm
going to create the constructor for this
and it's going to be set up as product
group it's gonna receive a string and
that string is going to be a product
group name and here I'm just going to
put in this or a group name is equal to
brought a group name and then I'm gonna
set up all of the other different
functions that I had inside of here no I
want to use things like add in this
situation as well as remove and all
these other different things but I do
not want to use them whenever I create
the product so that's the reason why I'm
setting it up this way and no matter
what anybody tells you there are
numerous ways to create all of the
different design patterns there's notes
that way it's just a general principle
idea that people follow whenever they're
using them in here so I don't have to
keep typing out component I'm just going
to go product components
and then here I'm gonna put a new
product component and that's gonna throw
that into my Rea list and then I'm gonna
do a similar thing with remove so I'm
just gonna copy this paste that in there
and then just rename this to remove
everything else is gonna say the same
except this is going to be changed to
remove instead of add then I'm gonna
provide a way to get the product
component by asking for an index so
product component get product component
and then int component index is what's
gonna be passed over to that and then
I'm going to return product component
and go product components get and then
I'm going to throw inside of there the
index that they asked for it's a much
better way of structuring all this
information and I'm gonna change this to
product components instead of products
components because that makes more sense
to me sorry about that
which means I also have to change that
and also need to change that a big deal
that's the stuff that happens when I
program out of my head sometimes I
forget what I named my different fields
inside of here and then something else I
need is get product group name and in
this situation I'm just gonna return
product group name and like I said
before this is going to represent
produce and cereal and things like that
and then we come down to the guy that
everybody has to implement which is
display product information what this is
gonna do is it's gonna print out the
product group name as well as all the
products that are stored in that very
specific name so let's say that I'm
gonna go system.out.print line and get
product group name there we are
got that and then I need to cycle
through and print every product in this
very specific product group so in this
situation I'm going to use an iterator
and it's going to cycle through product
component product components anyway and
I'm just gonna name it product iterator
and then to create that iterator product
component and then iterator right like
that and that's gonna allow me to cycle
through that and this is gonna give me
an error that I need to go get the
iterator library import iterator
and this is going to be the java.util of
one and you can see there it is right
now so we got that no more errors and
now I'm just gonna create a simple while
loop that's going to cycle through all
the different products that are stored
in this
product group as long as we have another
one to show we're gonna continue this
and then we're gonna go product
component product info converted into a
product component and we're gonna go
product iterator and to get the next one
we're gonna go and call the next method
on it and then of course to print out
all the different products we're gonna
have to go product info and call display
product info on the screen menu are
already saying this has a product info
and all the products are gonna have a
product info so that's gonna show up on
the screen and then at the end of it
let's say we want to put a little space
inside of here just to separate all the
product groups and we'll see how that
looks like after we got it done
okay so this is gonna handle all of the
product groups for us and now we need to
create the product class so here we're
gonna have each product and that is
gonna represent a leaf in the product
group inside of our tree so no class and
I'm just gonna call this product and
this is gonna extend product component
and this is the reason why I didn't set
this up as an interface but I could
monkey around and set it up as an
interface if I wanted to but what the
heck product add unimplemented methods
and then inside of this guy I'm gonna
have private string product name and I
could put a ton of things in here but
I'm also gonna put double product price
I could keep inventory in here I could
do a whole bunch of different things and
let's say that I want this guy just to
create my constructor for me I'm just
gonna go into source cuz I'm feeling
lazy and I'm gonna go generate
constructor with fields and inside here
product name product price looks good
and let's put this after product price
and hit OK and there's our constructor
say we didn't have to waste time typing
that out always a good thing then we
have to provide a way to get our product
name get product name and just return
product name he's gay and then if we
want to be lazy again what the heck
let's be lazy I'm gonna come in here to
source again and I'm gonna generate my
getters and my setters product name
product price and let's put them after
get product name
like that inside of Eclipse and hit okay
and now we have all of those so I'm
gonna go and get this satyr right here
there's all kinds of shortcut things I
could do with Eclipse but I don't do
them only because I think it might make
things more confusing if you're
wondering if you're an eclipse Pro and
you're like why doesn't he do this
Jameses or I want to type the stuff out
and I just figure you know what the
getters and setters work like so why I
type it out now down inside of display
of product information what are we gonna
do let's give ourselves some space here
and inside of this guy it's gonna be
very simple we're gonna system.out.print
line and we're gonna get get product
name and remember this guy is gonna be
called by the product group a version of
display product information and then
inside of here let's say we wanna put a
space and a dollar sign and then get
product price and we'll just list out
all the products as well as the prices
so that makes a lot more sense
structuring everything like it is a
table so now let's test it all out
inside of product system Java okay so
here we are in products system and
already got it set up because I knew
what I was gonna do here so if I want to
create a new product group all I need to
do is go product component and then give
it a name is equal to new product group
and then I gotta give it a name so let's
just make it produce and if I want to
create another one let's say that I want
to do another one in our grocery store
for cereal see everything's being
structured like it is a tree and not
just like something that is which is
always a good thing we want to model the
real world here then I'm gonna create a
top level component that's gonna contain
all my products as well as all my
product groups and yes why it's also
going to be of type product component
and I'm gonna call this every product I
could have put grocery product like I
did before but I type that out so what
the heck I'm gonna stick with it and I'm
gonna go products group and I'm gonna
give it a name all products and then
let's say I want to put a new line
inside of there and see how that looks
then if I want to add produce and cereal
to my every product list that's very
easy to do I just go every product if
you're not getting this take a look at
the code
it'll make so much more sense once you
take a look at the code and there we go
I just
added the produce group to this and now
I'm gonna add the cereal group to this
got them all in they're grouped real
nice and then I can add my individual
products to the group and to do that I
just go produce add new product and then
I'm gonna pass over tomato and I have no
idea what if tomato cost I just seem to
be very expensive I'm gonna say it
tomato cost taller ninety nine and I'm
gonna save myself a little bit space
here and let's say that I also want to
put in an orange no problem and it would
say an orange cost 99 cents and then
let's also say that I want to throw in a
potato and let's say a potato cost 35
cents I don't know I'm just making that
up and then if I want to also add cereal
inside of here no problem all of this is
gonna be exactly the same except for
this part right here this is gonna be
cereal because that's the group that I'm
gonna be adding it to and their cereal
and their cereal and then of course this
has to be changed and let's just say
Special K and let's just say 368 cuz I
have no idea and let's just say I'm
thinking of different cereals that I
know about Cheerios and raisin bran and
then we are and let's also say they all
cost the same 368 368 okay see
everything's structured its structured
and when it's going in it feels like
this is the way it should go in that's
what you want to model then to display
all the products that I put inside of
this guy I'm gonna go display product
information see one command and it's all
set and then I execute it to see if I
did it right and there we go see all
products which is a group that's going
to contain both the produce as well as
the cereal group and then you can see
the individual product items that are
stored inside of those individual groups
and that ladies and gentlemen is how you
create the composite pattern if you want
to see another example of the composite
pattern I might provide a link to that
above please leave any questions or
comments below otherwise till next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>