<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>How to Make Video Games 23 : Finish Ms. Pac-Man | Coder Coacher - Coaching Coders</title><meta content="How to Make Video Games 23 : Finish Ms. Pac-Man - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Derek-Banas/">Derek Banas</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>How to Make Video Games 23 : Finish Ms. Pac-Man</b></h2><h5 class="post__date">2017-08-30</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/lTvVJDo6jvM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">well hello internet and welcome to part
23 of my how to make video games
tutorial series in this part of the
tutorial we are going to finish pac-man
so that means in this tutorial I'm going
to create all of the ghosts and give
them all of the different behaviors that
are going to be needed I'm also going to
show you how to have the ghosts as well
as pac-man react to death we're gonna
add a bunch of sound effects I'm gonna
teach the ghost to chase pac-man and a
whole bunch of other different things
we're gonna need to wrap this up like
always the completed pac-man project
unity project a link to it is available
in the description underneath the video
and of course everything there is
completely free and I have a lot to do
so let's get into it okay so we are
inside of unity and like I say always
everything here is the exactly the same
on Windows as well as Mac OS very first
thing I'm gonna do is I'm gonna create
my my prefabs for my pink blue as well
as my orange ghost I only have it for
the red at this point in time so we have
our ghost right here and I'm gonna go
into the sprite section and let's get
this guy this is the pink ghost so let's
drop it inside of there and let's change
the name to pink ghost and then drag it
in to the prefabs section and delete
this guy and then we're going to get the
next one so that's gonna be this one I
believe yes this is gonna be the blue
ghost drop it in there and change this
to blue ghosts and prefab and delete
that out of there and then let's go and
get to the final ghost which I believe
is orange and it should be right here
and it is and there it is and drop it in
there again and name it orange ghost and
orange ghost good stuff prefabs and
deletes now I'm gonna do is go and get
all those different guys let's get the
pink ghosts and the blue ghosts and the
orange ghosts and drop those in there
and as you can see here we have rigid
body and box colliders and our scripts
grab all of these guys and a very first
thing I'm going to do is add a rigidbody
to all
them so get this and physics 2d and
rigidbody changed the mass to a small
number and my gravity is zero and my
collision detection is continuous and my
freeze rotation on Z is going to be sets
and I think that is all that I need to
do with that then I want to add a box
Collider to all of them so physics 2d
and box Collider set is trigger and I'm
going to set these to the same as the
red ghost that I had previously which
was like point eight five and point
eight eight and I don't think I have
anything else to do there let's go and
check that out so point eight eight oh I
have them both point eight eight all
right why did I think it was different I
don't know let's go and check that and
let's go 0.88 for all of these and there
that is that set I'm then also going to
add a script to all of these so there's
the ghost let's move this up here grab
the ghost script and drag it down here
and drop it and there is our ghost
script I'm going to set my speed let's
leave it I want it to be four
what do I have I have that for mono
let's leave it for or maybe let's just
for now let's change the speed to three
for all of these so just three like that
and that's set right I think so
yeah it is alright so then I got to get
all of the other sprites that I once
switched to whenever we're looking left
so that's gonna be four is looking left
and then five is looking right and six
is looking down and I remember this from
last time so that's where as it's coming
from and no no it's seven five no let me
see here zero hit one two three four
five and then six goes down here yeah
and then seven goes right here and then
my sprite sheet the blue ghost is going
to be I think it's 22 so what it is 23
so let's go and get that and drag that
put the blue ghost right there and the
sprite renderer I'm not even gonna set
and my destination index I am going to
change at some point but I'm not quite
sure what I want that to do at this very
moment
oh another thing well let's go and do
this with all the other ones for
so blue ghost so the four five six seven
so that's gonna be eight and nine and
ten and eleven if you can't see this
beautiful screen and there's at all sets
and then twenty three for our blue
ghosts and then go and set for the
orange ghosts which is gonna start at
twelve
there's 12 right there so twelve whoops
now you have to move this up first
twelve drag that they're 13 and 14 and
15 and 23 for the blue version of our
ghost another thing I want to do is I
want to create a tag for ghost make sure
I have that set for all of these yes
there those are and let's change this
all to ghost so those are all set and
that looks pretty good right now I'm
gonna jump over into the ghost script
and I'm gonna add a couple more features
so here we are in our ghost scripts and
where should I start putting some
additional features maybe after let's
see here what do I got there is there's
the blue go so I'm gonna put it in right
after this I'm gonna come in and I'm
gonna go public and float and what this
is gonna be is this is going to be the
wait time after my my start wait time so
the amount of time that's gonna go by
until I start the ghost start to appear
and move around the screen so I'm gonna
have I'm gonna call this start wait time
and just give it a value of zero and I'm
gonna set that here in a second what
else am I going to need I'm also going
to need a wait time after the ghost has
been eaten before it comes back on to
these screens so this is gonna be a
float I'm gonna call this wait time
after eaten and let's give them all the
same one so four seconds is what that's
gonna be I think that makes sense and we
can play with all this change it do
whatever we need of course save that
jump into unity then now these should
all be updated with that new information
so
isn't what is going on let's jump back
over look there it is start wait time so
the red ghost is going to come out first
and I'm gonna say that it's gonna take
two seconds for that to take effect
then we got our pink ghost and that is
going to start five seconds after the
game has started blue ghost is going to
be let's say ten seconds and then orange
ghost is going to be about how about
fifteen all right got that set so let's
jump back over into the code here we are
what else we're gonna need to do I'm
gonna have to change the way start works
if I want a whole bunch of these to show
up so what I'm gonna do is I'm gonna
copy what is here and I'm gonna move it
somewhere else so I'm gonna cut it out
of there and then what I'm gonna do is
I'm gonna issue an invoke and that is
going to call a function called start
moving after the defined amount of time
that is defined in start wait time so
pretty cool stuff so then I have to
create start moving so void and start
moving doesn't get past anything of
course and then I'm going to paste
inside of here all of this but all of
the ghosts are going to be inside of the
cell area so I want to define where I
want to move the ghost to and where I
want to move them to is to that starting
position that I previously used to test
everything so that is going to be a
transform position for this ghost is
gonna be new vector2 and that's 13.5 F
and that's the 1419 space but this is
the way it is if you want the ghost to
show up in the middle of the screen over
the middle of the cell area eighteen
point five F and then there that ghost
will show up where they're supposed to
show up and let me just look through
here I do not believe I need to change
anything else for any of this stuff no
as far as I know everything here should
be perfectly cool one thing I will have
to do however is to define the starting
position for all the ghosts let's come
back up inside here forgot about this
the first time so what I'm going to do
is go right after this
and this is all the ghosts are going to
be in a different place in the cell so
I'm gonna define public and float cell X
positions gonna be equal to zero and
then I'm also gonna have this for the Y
position so so and this is going to be Y
position so we'll save that jump back
into unity I'm then going to grab all of
these different guys so the red ghost is
going to start off well let I'm gonna
change it up here is going to be changed
that to 1216 which is gonna be this
position right here so 1216 then I'm
gonna get my pink ghost I'm gonna put it
right next to it so that's gonna be 13
16 like that and then I'm going to get
the blue ghost and that's going to be 14
16 and the orange ghost is going to be
15 16 so there they are all the ghosts
are inside of our cell area looking
really awesome alright and what else I'm
gonna have to define well for I'm gonna
have to have the starting cell position
remember is gonna have that half in it
so I'm going to have the x position in
this situation be 11 points five and
then all the Y's are going to be fifteen
point five so after the ghosts are
eating they're gonna go back into this
cell area and in exactly the same
position so whoops that's not going to
be right for the orange ghost this is
going to be fourteen point five let's do
these in order so that I make sure I get
them right all right so this is going to
be eleven point five and fifteen point
five and the next one is going to be
twelve point five and fifteen point five
and the blue is going to be thirteen
point five and fifteen point five and
then this should be 14 right great have
all of that set and let's run it see
what how it works out here there goes
pac-man the ghost should start coming
out there's the red ghost and the pink
there's the pink ghost and the
come on blue where you at blue come on
come on there's the blue ghost and it's
going and the orange ghost should be
coming out here very very soon and there
it goes alright awesome now I'm gonna
have their destinations change so the
red ghost destination index is going to
be 0 that seems good the pink ghost I
want to change its to go in the lower
left-hand corner which is sort of going
to be the opposite of the red ghost so
let's change that to 2 which is the
destination index that I have said I'll
show you what that is just to remind you
then we'll have the blue one let's have
its destination be 0 again and then the
destination index for the orange have FB
2 also and here I'll show you where it
is so it is these guys right here see
the first and third are going to go to
this destination and then that's 0 1 2
and then the second and fourth are going
to go in this destination on our grid so
let's run it so now they're going to
appear and they're gonna go in different
directions which is much better so there
goes red there goes pink in a completely
different direction and the blue is
gonna head in the same direction as the
red and then the orange is going to head
in the same direction as pink winds and
you can see there goes alright so they
are moving and looking sort of random
that's cool
all rights back in the ghost script what
else am I gonna need inside of here well
I am going to well I'm gonna need access
where is my is blue because I'm gonna
need the pac-man I need to tell pac-man
if the ghost is blue or not so we can
define if the ghost is going to eat
pac-man or if the pac-man is going to
eat ghost so I'm gonna make this public
so I can get access to that what else we
gonna need well we're going to need to
reset our ghost after it's been eaten of
course and we're also going to need to
have the ghost start moving again after
it's been eaten and I think what I want
to do with my ghost is this is just what
I'm doing with it I'm gonna say that the
ghosts are gonna go in their normal path
until pac-man eats them they're never
gonna get angry and then they're
specifically going to hunt down miss
pac-man so where am I going to put these
different guys where does it make sense
to put that I think it makes sense to
put it right here before get new
direction so what am I going to need
well one thing when I need
is I'm going to need game object which
is gonna be the pac-man game object and
I'm just gonna set that for an all right
now and then I'm gonna use that inside
of these next two functions so I'm gonna
go public void and reset
ghost after eaten and this is going to
receive the pac-man game object so game
object and that's gonna be pac-man and
what I'm gonna do with this is I'm gonna
go and move the ghost to the sell
position that I defined previously so
that's gonna be transform and position
that's gonna be you know inside of the
cell whenever they first come back and
new vector2
and that's gonna be cell x position and
so y position and each of those ghosts
have a predefined position and then I
can just come in here and go rigidbody
velocity and set that to zero because
it's whenever the ghosts go in the cell
I do not want them to move so until I
tell them to move I'm also I don't want
to forget to get the pac-man game object
and assign it to the pac-man that was
passed inside of here from pac-man and
then I'm gonna call invoke again and
this is gonna call the start moving
after eaten function and that's going to
start in the time define so wait time
after eaten and I gave all of those four
seconds every ghost has four seconds
until that's gonna start happening and
that is all I need to do I mean it's
just pretty good all right so now this
one's gonna be called of course to move
our ghosts so paste that in there and
it's not gonna need any information to
move more ghosts basically I am going to
call transform position and all of them
are gonna go to the very first location
whenever they leave our cell so vector 2
and that's thirteen point five F and
18.5 F and then I am going to do the
same things that I did previously so
let's go and just copy that and this is
code isn't
optimize I apologize but you know it
would take me probably 20 videos to do
everything I'm doing here if I optimize
everything on top of it so so I'm gonna
get this guy right here and select all
of that everything in this function and
copy that and then come down here to
start moving after eating where is it
there it is start moving after eatin and
we will paste that inside of there and I
also said that I want to move the ghosts
after they're eaten that I want the
ghosts to start chasing pac-man so what
I'm going to do is I'm gonna say if
pac-man has a value then we're gonna
start chasing it all right so it's like
we are now aware of pac-man so now we
will chase him and we'll do that in get
new direction and I'm gonna put that
right inside of this area right here
it's going to be a different direction
so I'm gonna say if I'm gonna like
override this if pac-man game object is
not equal to null well in that situation
we are aware of pac-man's existence and
we are going to now hunt down pac-man so
we'll go pac-man game objects game
object and transform position and so
there we go and each time we come
through here we're gonna go and find
pac-man and let's go and override the
other one as well right here after this
destination we will paste in the same
thing again alright and I think that is
all we need to do to set up the ghost
and now we need to jump over into miss
pac-man and have the ghosts and miss
pac-man communicate so that they can
hunt down each other and kill each other
which is awesome alright so we're in
miss pac-man one thing I just remembered
is I am going to want to add points to
the score or whenever the dots are eaten
versus when the pills are eaten versus
the ghost being eaten and I didn't set
it up that way so I want to fix that so
I'm gonna scroll way down to the bottom
here oh I'm already here all right and
I'm going to go to increase text UI
score and I'm gonna have it receive
values the number of points that we are
going to assign and then I'm going to
get that value and put it right here so
there's points and
increased text UI score up this one
right here so a dot was eaten and a dot
is going to be worth ten points so we'll
change that and then we're gonna change
it for the other ones as well let's see
did I do that for the pill let's go look
here
okay there's pill and no I didn't I
never even called the increased text you
are score so let's go and copy this and
we'll paste that inside of her or where
is it there's the pill right there and
we'll put this right there and the pills
are worth 40 I think you're 50 let's
make it 50 and also I need to destroy
the pill I forgot to do that whenever
the pill is eaten I'll say destroy and
that's gonna be the collide at a poun
object which is a pill alright good so
that's dead also now I'm also going to
have to now that I saw those scripts
there I'm gonna have a script for all of
my different ghosts so I'm gonna come in
here and make one for each of course so
let's go like this and like that and
we'll change this to pink and we'll
change this one to blue out of there
blue and we'll change the last one to
orange
okay got all those set I'm then going to
need to get all the game objects for all
of those which are going to be down
inside of here so I'm just gonna be
copying and pasting again I'm just gonna
change the name of it so they are and
this is going to be pink and this is
going to be pink ghosts and then I have
blue and it's just really cool too this
is like the best never you're like right
there on the cusp of games just about
ready basically the only thing I'm not
doing is having multiple versions of
pac-man
and um the pac-man dying animation I'm
not gonna bother with that the two
things I've already taught you so I'm
just gonna get it done here in this one
video all right when and I need to do
the same thing for scripts so let's go
after this and there they all are and I
know this changes to pink again and blue
and orange and it uh pink blue orange
all right and I have all those sets so
that's good and I think that's all I
need to do with that what else we're
going to need oh there's the point where
I change the ghosts to blue whenever the
pill is eaten where is that guy that's
way down here so let's go scroll and
find it and that's on this one
and where is pill it's there is pill
right there and read go script turn goes
blue so I'm going to do that with all of
the other different colors and so this
is pink blue and orange pink and blue
and orange awesome and now I need to set
it up so that we handle whenever we
actually hit something with the tag of
ghost I haven't done any of that so I'm
gonna do that right here paste that
inside of there and change this to ghost
okay so what am I gonna need here well
very first thing I need to do whenever I
collide with the ghost is I want to get
the name of the ghost I collided with so
I'm gonna go string and ghost name is
gonna be equal to and how we get the
ghosts name for the collided upon object
is we just go co L because that's what
the collider is called and then get
components and what we collided with is
a Collider 2d so get that and put the
parentheses after it and then go game
object and name so there is the name of
the ghost that we collide it with and I
must have covered up another one of
these curly brackets okay so I got that
fixed what else I'm gonna need well I
want to get the audio source because
after
Hackman dies I want to shut off the
audio source altogether for my game so
I'm gonna go audio source and Sound
Manager and gets components and of
course I want t hottia source in order
to figure out got that whoops don't do
that
that was silly to get component audio
source get that out of there get this
out of here I wasn't paying attention
there we go
I'm fucked about and there it is got
that and then I'm sure if i sat here for
a while and thought about this I think
of a more intricate way of doing it that
I'm doing it this way I'm gonna say if
the ghost name is equal to red ghost
well in that situation I'm going to then
check if my I'm gonna call my red ghost
script and I'm gonna check if it is blue
or not is ghost blue which means can I
eat it without it killing me
and if that comes back as true I want to
call for the ghost to be reset inside of
the cell so to do that I'm gonna go red
go script and resets ghost after eaten
and then remember I'm gonna pass in the
pac-man game object in that situation so
that I can work with that
meaning that now the ghost knows where
pac-man is and it's gonna try to hunt
down pac-man what else I'm also going to
want to play the ghost being eaten
sounds so I'm gonna go soundmanager
and instance and play one shot and
specifically what I want to play is
Michael soundmanager once again and
instance once again and eating ghosts
cuz I just ate the ghost so I wanna play
that sound effect anything else yeah I
ate a ghost so I want to increase my
score so I'm gonna call my increased X
score and I think it's 400 points for a
ghost to be eaten in the pac-man game so
we got that then I need to handle if the
ghost is not blue well in that situation
pac-man dies so I'm gonna say else
I'm gonna do this whole thing right here
again except I'm gonna play the pac-man
dying sound effect or miss pac-man you
can know what I'm talking about
and that is pac-man dies all right so I
got that set I'm also gonna want to shut
off my audio sounds all together because
remember I have the pac-man eating sound
on a loop so I'm just gonna go audio
source and call stop on that so that's
how you stop all audio source sounds and
then destroy packing so destroy and send
some in the miss pac-man class that's
going to kill the miss pac-man all right
else well I'm pretty much gonna do
exactly the same thing in my not oh yeah
so I'm gonna say else if I'm gonna just
copy this so I'm gonna say else and then
paste that in there if and this time
it's gonna be the pink ghost somebody go
paint ghost and then I'll just change
this to paint ghost so pink ghost and
everywhere we have a pink ghost I'm
going to change it well I guess it's
only there
really oh now right there also so pink
ghost
and everything else is exactly the same
so then I'll go else/if and now I will
do the blue ghost so if it's blue ghost
got that there is ghost blue blue ghost
and blue ghost and everything else is
the same I believe and then we will come
in here and go else if and then the only
other option is orange goes so orange
ghost change this the orange go script
and orange go scripts and all of those
should all be set well and I think
that's done I think it's that I don't
think there's anything else we're at
least we're gonna go test it just come
back into unity and run it don't see any
errors and there's pac-man and ghosts
are gonna start coming out here and
let's go see if we can eat a ghost all
right so there's the ghost up there and
let's go eat a ghost they turn blue I
ate it let's go see if I can eat in all
100 it's gonna be up see it turn back in
and there's the red is the red gonna now
follow pac-man yes it is so there you go
guys everything is looking pretty
doggone awesome um let's go get this OOP
pretty sweet ah turned red again and
pac-man it's working and it's working
and I died alright so pretty cool
hopefully you guys enjoyed that video I
really enjoyed making these series of
tutorials what's fun to make a real game
and I don't know what I'm making next I
think Zelda which probably means that
I'm not gonna make videos here for at
least a week so that I can catch up but
either way like always please leave your
questions and comments below otherwise
until next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>