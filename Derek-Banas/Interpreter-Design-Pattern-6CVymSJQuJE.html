<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Interpreter Design Pattern | Coder Coacher - Coaching Coders</title><meta content="Interpreter Design Pattern - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Derek-Banas/">Derek Banas</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Interpreter Design Pattern</b></h2><h5 class="post__date">2012-10-25</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/6CVymSJQuJE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello internet and welcome to port 23 of
my designs patterns video tutorial today
we're going to talk about the
interpreter design pattern so what is
the interpreter design pattern well as I
was first taught about this pattern the
professor said this exact line I wrote
it down in a notebook
the interpreter pattern is normally
ignored and I've seen many places online
this pattern is almost never used well
I'm going to show you in this tutorial
how to do some really cool things with
the interpreter design pattern however
there's one caveat if you do not like
Java reflection you might as well stop
this video right now and stop watching
it also if you are here for just a
complete copy of the Gang of Four book
and their interpretation in the
interpreter design pattern wow I will
for the most part stick to that I am
going to make changes so if you don't
like that fact also go watch somebody
else's video if you do however want to
see how to do some really cool things
with the interpreter design pattern
you're in the right place and let me
just show you what we're going to do so
let's say you would want to make a
conversion little tool here so that you
can convert different types of
measurements to other types of
measurements well the interpreter design
pattern is going to help you do that
really easily let's say you wanted to
take one gallon and you wanted to
convert it to tablespoons that's all you
need to do and hit OK and there's your
answer one gallon equals 256 tablespoons
and I could go in and type in all types
of other different types of measurements
like I mentioned before the previous
professor who had talked about the
interpreter design pattern pretty much
said it was worthless that night
whenever I used it in combination with
Java reflection I was able to create
just with those two ideas I was able to
put together the Zork text-based video
game so if you want to see some really
cool stuff and learn a whole bunch about
Java reflection and a whole bunch of
other things that I've received in
regards to questions you guys have asked
let's get into the interpreter design
pattern so like I said before I find it
extremely useful if used in connection
with Java reflection techniques and
pretty useful in general it is basically
just used to convert one representation
of data into another representation of
data what you're going to have is mainly
three pieces and this all comes from the
Gang of Four book to a certain extent
you have the context which contains all
the information that is going to be
interpreted you have the Express
which is going to be an abstract class
that's going to define all the methods
needed to perform the different types of
conversions and then you're going to
have the terminal or concrete
expressions which are going to provide
very specific conversions on different
types of data let's look at this in sort
of a UML class diagram okay on the Left
you're going to have your client that's
going to ask for certain information
that information is going to be stored
in what is called the context and you
can see that right here conversion
question then you're going to have all
sorts of responses and different
informations going to be relayed from
the context over to concrete expressions
that are all going to extend this
abstract class and you can see a very
specific example what I'm going to do
here is say okay you're going to give me
gallons in exchange I'm going to give
you either gallons courts or pints or if
you give me quarts I'm going to give you
gallons courts or pints as a response so
that's the basic idea of how the
interpreter design pattern works so
let's jump into the code okay so here I
am in the conversion or the context I
call this conversion context Java and
I'm going to define a whole bunch of
different things inside of here so
string conversion question is going to
be the question they're going to send
like I showed you in the example which
is you know one gallon two whatever you
want to convert it to and all the code
is available underneath this video it is
heavily commented if you have any
questions of course you can always leave
questions down below then I'm going to
have conversion response and then I've
also found the need to store from
conversion which would be something like
gallons which is what I'm going to be
converting from and then I'm also going
to just store inside of here a string
which is going to be to conversion which
is going to be what I want to convert to
so let's say tablespoons or pints or
whatever you want and then I'm going to
create a string here string array and
it's going to be parts of question it's
going to store everything in individual
pieces so then I need to create my
constructor here and it's going to be
passed a string which is just going to
be the input that is received from the
user then I'm just going to go this
actually don't have to do that I can
just
do conversion question is equal to
whatever the input is that's easy then
I'm going to go parts of question I'm
covering a lot of things I've received
questions on in this tutorial also and
I'm going to split that string into
pieces based off of spaces and then get
input let's just copy that right there
I'm just going to create this so it's
going to be public string get input and
it's just going to return conversion
question like that so there we got that
all set up and then I need to get my
from conversion and you can make this
very very sophisticated like I said I
created a dork game from that which I
was going to actually go over but I just
figured it would be way too long so I'm
going to try and simplify it and then
what I'm also going to do is capitalize
this string so that it is easier to work
with no matter what sort of questions
they ask so that means I'm going to have
to create get capitalized so let's
bounce down here and go public string
response get actually just paste that in
there and it's going to get a string and
I'm going to call it word to capitalize
and the first thing I'm going to do is
actually put everything here that is
sent to me in lowercase letters and to
do that just go word to capitalize and
to lower case like that and then I'm
going to make the first letter uppercase
and how you do that is go character to
upper case and we go word to capitalize
character at the zero index position
which is you know the first character in
the string put a plus there and then go
word to capitalized and type in
substring one like that and that's going
to capitalize just my first letter and
then on top of that I'm going to throw a
couple other things I'm going to put an
s on the end of this so if they say one
gallon two pints it's going to work and
if they say one gallons or two gallons
two pints it's also going to work so to
do that I'm going to go int link of word
is equal to word to capitalize I'm going
to get the length of this so that's I'm
going to get the length then I'm going
to say if word capitalized dot character
at and I'm going to type in length of
word
- one which is going to get me the last
character inside of this guy and then
after this I'm going to say is not equal
to s well then I want to put an S at the
end of it so that we'll be able to once
again to work with gallons or gallon so
we're going to go word capitalized is
equal to new and to insert a character
into the end of the string I'm going to
use a string buffer and go word to
capitalize and then after that go insert
then we're going to say length of word
calm in there and then I'm going to say
that I want the index the very last
index in this string to be changed to s
and then I have to call to string and
input that there so that's going to
insert the letter S at the end of the
string if it doesn't exist which we
checked right there that's kind of neat
and then after we've done all of that
we're going to go return word cap glass
and there it has it's all set up there's
a whole bunch of different things we
just learned so that's kind of cool
let's give myself some space so there's
get capitalized then I'm going to do two
conversion which is going to be what do
we want to convert from two so we want
to go from gallons to pints okay well
that's what two conversions going to
have inside of it so we're going to go
get lower case and we're going to pass
it parts of because I know what type
string they're going to be sending me we
could change this to three like that
because I know what they're going to be
sending me is going to be something to
the extent of one gallons two pints okay
so one is going to be this guy say
gallons right there and then three of
course it's going to be zero one two
three right there so that's going to be
what I need to convert it to okay well
I'm using something else here get
lowercase so I need to create that let's
just get that out of the way there and
I'm just going to bounce right here and
go public coffee get lowercase it's
going to return a string get lowercase
it's going to receive a string and it's
going to be word to lowercase so we're
just going to change this to lower case
like that and then let's create our
little method here and it's going to be
real simple I'm just going to go return
word to lowercase and go to lower case
so pretty simple and let's save that so
that we got that all set up so then
we're going to bounce up here again gets
more information we want to also get the
quantity and we want to convert this
into a double because it's a string
right now so we're going to go value of
and then this is going to be parts of
question and the quantity is going to be
the very first value passed remember one
gallons two pints so the first index is
going to be zero and then I'm going to
zoom up here and go double quantity and
then let's make this private as well and
then we're going to go conversion
response is equal to parts of question
and then basically going to kick out the
same thing it's going to say whatever
like if we say 1 gallons 2 pints it's
going to say 1 throw space inside of
there and then we can spit out either
this or we could do that whatever let's
just throw that in there so that's going
to be 1 gallons and then after this
we're going to go equals and then later
on we're going to put the rest of our
conversion information in there so then
we need to output and return some
different information in regards to
let's say we want to give them the from
conversion well get and I'm just going
to change this to from conversion and
it's just going to return from
conversion which is going to be right
here
copy that bounce down paste that in
there and then we're also going to
return to conversion so there's two
conversion and then we're just going to
return tÃ­o conversion and then we could
also return get response maybe and then
this is going to return conversion
response which is right there if you
haven't been what I figured out yet
there's a whole bunch of things being
covered in this tutorial side from just
the basic pattern I could definitely see
why we're going to need to get the
quantity so let's just return the
quantity and that's all we're going to
need so there we are we're going to file
save that and that is conversion context
dot Java that we got set up there so the
next thing we want to do is go into
expression dot Java and define all the
different methods or things that we're
going to be converting into so here's
expression job and like I said it's an
abstract class and you could make this
list a mile long and be able to convert
into just about anything so we're going
to go string now let's say I want to be
able to convert to gallons so we're just
going to go double and it's going to
receive a
quantity so we got that all set up then
we have to think about all the other
different things that we might want to
convert to so we might also want to
convert to quarts
so there's quarts we also might want to
convert to pints there's pints we might
also want to convert to cups and then
finally let's convert to tablespoons and
then we aren't we're done with that so
that is the expression you're basically
going to define all of the things that
the concrete expressions are going to be
able to convert into which would be
gallons quarts pints cups and
tablespoons like I said this could be a
mile long and being able to do really
insanely awesome things so now we're
going to implement that inside of gallon
Java you can see here public class
gallons extends expression we're gonna
go here zoom in on this and it's going
to say hey you need to implement some
methods okay fine do that for me because
I'm lazy and there we are now we got all
our methods we need so basically if
we're going to be converting into
gallons what do we need to return well
gallons into gowns is equal to gallon so
we're just going to return whatever
quantity they send to us so that's real
easy however we're gonna want to convert
this into a string so we're going to go
double to string like that and then
close that off so that's going to
convert that double that's sent over and
with string and then we're going to
basically have to do that for everything
else that we have here let's just get
rid of all those pasted that in there
and then it's just a matter of doing the
conversion which is about math and it's
not really about programming but you
let's do it right so how many gallons
goes into quarts well basically you're
just going to come in here and multiply
quantity times 4 here 4 pints we're
going to multiply this times 8 and then
for cups we're going to multiply that
times 16 and then tablespoons we're
going to multiply that times 256 and
there you go we've just defined our
conversions so we're done
I'll save okay so now that that's all
out of the way let's go into measurement
conversion dot java and let's start
playing around with reflection as you
can see here this is the library and
we're going to use couple little
swinging tools just to help us along so
that we have our little pop-up that
shows on the screen so the first thing
we're going to do is we're going to go J
frame frame is equal to new jframe so
that we can open our little pop up on
our screen and then we're going to go
string quite
ass is equal to J option pain which is
our little pop up whenever we put in
show input I log then we just need to
pass it the frame that we want to use
and the question we want to ask which is
what is your question and there we go
now we're going to get our string which
is going to contain the question that
it's going to be up to us to be able to
translate this into an answer so then
we're going to go conversion context
which is the very first class that we
created and we're going to go question
is equal to new conversion context which
is going to store remember the initial
response or information that is sent to
us and we're going to pass that question
asked and it's going to be its job to
parse it and put it into different forms
that we're going to be able to use well
then we're going to go string from
conversion which is going to find the
object class that we're going to be
converting from say in this situation
we're going to be converting from
gallons to either gallons quarts pints
cups or tablespoons so from conversion
means that we're referring to this class
right here so let's go into that and to
get that we're just going to go question
get from conversion we're going to call
that method we created earlier and open
that up well then we're going to need
some other information like what are we
going to be converting to or the to
conversion now to conversion is going to
be a reference to the method we're going
to be calling we're going to be using
reflection again and I'll put a link to
a reflection tutorial below if you don't
know what that is and there that is so
that's going to be this is going to be
the class object we're going to be
calling and this is going to be the
method we're going to be calling within
that class object so get to conversion
and for the most part like I said that
we're sticking to the basic Gang of Four
interpretation of the interpreter
pattern but I'm adding a whole bunch of
other functionality to make this really
cool well then we're going to go double
quantity we need to get our quantity
that we are going to start with so get
quantity is going to do just that give
me that and then we need to get the
class based on the from conversion
string or the class object so how do we
do that well we're going to go class
temp class and then we're going to use
our conversion cool stuff
or name and if we want to call the class
well we just want to pass it from
conversion which is going to be a
reference to the class object that we
are converting from which is in this
situation gallons like I said before so
that's the class object we want to
convert from and it's going to give us
an error message saying this needs to be
surrounded with a try-catch block so
let's just surround with the try-catch
block let them do all the work for us
and then we're going to get the
constructor dynamically for the
conversion string and using reflection
we're just going to go and create a
constructor object and to call the
constructor on our class we just go temp
class get constructor and it doesn't
have any parameter types so we can just
leave it like that and it's going to
give us another message it says hey we
need to add some things to our try-catch
block so let's just let it do that and
just say add catch clause just
surrounding try keep everything nice and
tidy and it did that for us so that's
cool now we need to create a new
instance of the object that you want to
convert from and to do that you're going
to go object convert from and we know
this is going to be an expression
because all of these extend the abstract
class named expression so we want to
tell it that because that always is
going to apply then we're going to go
kaun which is the reference to the
constructor and go new instance and
there are no arguments for the
constructor so we can just leave it that
way and what's it going to do it's going
to say hey we need to add some more
caches to our try-catch block add catch
Clause to surrounding try click on that
we're going to do that again
so come back up here so we know what
class we're going to be using we know
what constructor only also created an
object of that class type so now what do
we have to do is to find the method
parameters that are going to be expected
by the method that was going to convert
from the original chosen unit of measure
to the new one so let's just go over
here what is going to be sent to this a
double that's all that's going to be
sent to all of the methods that we're
going to be calling on so we need to
come in here and define that fact to do
that we're going to go class create a
class or a method parameters when you
get a new class like this and then we're
going to pass it a double so we need to
go double type and I talked about the
other types but it's integer and all
these other things it's just basic
common sense to figure out what type of
class we're going to be passing there's
a double and that's what we're going to
be passing then we need to get the
method
a mcclee that will be needed to convert
into our chosen unit of editor so we're
going to go and create a method object
conversion method is going to be its
name and to get that we're going to go
temp class get method which is another
reflection tool and if we want to figure
out what method we want to get well we
want to figure out what do they want to
convert into and to conversion is a
string that contains that name and that
is what we're going to put inside of
there so there's two conversion and
what's going to be passed to the method
well this guy right here so we're going
to go method parameters and copy that
guy and paste in method parameters so
this is going to be the parameter type
which is going to be a double which we
defined above if you want like I said
the codes underneath this video well
then we need to define the method
parameters that will be passed to this
above method that we just got ahold of
and to do that we're going to go object
and I'm just going to call this params
is equal to new object and then we're
going to pass it an actual double value
and what's that double value we're
passing the quantity that is stored
inside of here so there we're actually
passing a real or there we're defining
that we're going to pass a real double
quantity or value over to our new method
that we just created and then we just
have to get the quantity after the
conversion which is real simple we're
going to string to quantity and then
we're going to have to convert this into
a string so there's the cast conversion
method we're going to call that method
and how do we call a method using
reflection we use invoke and then we're
going to say okay well what object
well the objects name member gallons so
how do we get this object it's actually
stored right here say convert from so we
have to get the object that we're going
to be calling the method for and then
inside of that we have to pass the
actual values or the double that we want
to pass to that very specific method so
this is powerful stuff might be a little
bit harder to wrap your head around
sometimes but it's really cool whenever
you do and then we're gonna go string
and we're going to go answer to question
we're done all the hard stuffs done so
if you have any trouble with any of this
chances are it's this stuff right here
any other reason you're having trouble
with it is you don't understand how
reflection works if you study this you
will you
everything you want to know about
reflection so then we need to craft our
answer to the question which is going to
be pretty simple we're just going to go
question and get response which we
created earlier which is going to be the
beginnings of this so let's just go over
here see get response is right there so
conversion response and where does
conversion response come from up here
see conversion response which is going
to spit out this guy right here so if
it's 1 gallons 2 pints what's this going
to spit out well it's going to spit out
1 and then what's it going to spit out
parts of question gallons and it's going
to say equals and I need spoils right
I'll be honor so that's what's going to
come out and there it is that's are
going to be the beginning of our
response to our answer let's save that
jump back over into measurement so
that's what this guy's going to do so
let's store that in our string here or
actually is just go in here and go plus
and then I'm going to go to quantity is
this guy right here it is the new
converted whatever you're converting
into this is going to be a number and
then we'll put a space in there and then
another place and then we're going to
define what are we converting to well to
conversion is what we're converting to
close that off close that off
and there we go so that's our answer
that we're going to be shooting out and
all we need to do is shoot our answer
out so we'll go J option pain show
message dialog and we're just going to
get a null in this situation and then
the message we're going to provide is
answer two questions so let's base that
in there and then after they click OK if
we want everything to shut down meaning
the program altogether we're just going
to get this done the quick way we're
just going to go frame dispose and then
we are so when they hit OK it's going to
give them the answer it's going to do
all the things we wanted to do and it's
also going to curlews the program
whenever we are done now of course I
also went in and created quartz Java
which is almost identical it into
gallons da Java and pints and cups and
tablespoons so there's all that
information let's so let's run it
executes and then as you can see this
little box pops up here and if we go 1
pints let's just say pint two table
spoons hit OK one pint equals 32
tablespoons and if we zoom out and hit
OK you can see this goes away
goes so here's how to do some really
cool things with an interpreter design
pattern leave any questions or comments
below are the last two next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>