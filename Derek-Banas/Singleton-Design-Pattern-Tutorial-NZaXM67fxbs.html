<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Singleton Design Pattern Tutorial | Coder Coacher - Coaching Coders</title><meta content="Singleton Design Pattern Tutorial - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Derek-Banas/">Derek Banas</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Singleton Design Pattern Tutorial</b></h2><h5 class="post__date">2012-09-12</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/NZaXM67fxbs" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">whoa Internet and welcome to part 7 of
my design patterns video tutorial today
we're going to talk about the singleton
pattern and like most of the other
tutorials inside of this big design
patterns tutorial this is going to be
self-contained so if you're just here to
learn about the singleton pattern you're
in the right place however if you need
to brush up on basic Opie concepts or
look at the other design patterns in
this tutorial I provide a link to the
first part of this above so when it's a
singleton pattern it is used when you
want to eliminate the option of
instantiating more than one object
you're going to create a class and it is
only ever going to be able to create one
object from that class now you might ask
yourself well when would I actually want
to use something like that actually a
lot of times in this part of the
tutorial
I'm going to demonstrate using a class
that's going to hold all of the
potential Scrabble letters and Scrabble
is a pretty common board game so I
thought you would make a lot of sense
here using this and what it's going to
do is it's going to hold all these
potential Scrabble letters so that all
the users that want to use this object
can access those letters however it's
also going to spit out new ones upon
request to all the different users now
why the singleton pattern makes this
great is each player will share the same
potential letter list however each
player is going to have their own set of
letters to create words from so the
singleton pattern makes a lot of sense
in this situation so onto the code so
I'm just going to come in here and
create my class and I'm going to call it
singleton now you absolutely don't have
to do that but in this situation it
makes sense like I said for a singleton
pattern is just going to force you to
only have one instance of a class
created and then this guy private static
singleton first instance is going to
hold the one and only instance for the
class
singleton so this guy is going to be the
access point for any object or the one
object that's going to be created from
this class and it is static in this
situation because objects like this
almost always need to be available on a
global basis so that's the reason why
that is set as static and then we're
going to come in here and go private
singleton and make the constructor class
private and the reason why we're doing
that
once again is to make sure that there is
only one instance for the class
singleton and then is the reason why
we're going to have that be private
because if they try to create a new one
it's just going to create an air
then what we're going to do is go public
static singleton get instance and get
instances almost universally used as a
method for the singleton pattern and
basically what we're going to do inside
of this guy is check if first instance
is equal to null or whether it exists or
not which means it wouldn't be now if an
object was created for it so we're
checking in that situation and if so
we're going to go first instance is
equal to new singleton right like that
so the only way they're going to be able
to come in here and create a new
singleton object is if one doesn't exist
already and that one would be stored in
this field up here and this right here
is known as lazy instantiation and what
that basically means is if the instance
isn't needed it is never going to be
created so the other way it's getting
created is if get instance is called and
then after we're done with this we're
going to go return first instance so you
can see right there that something is
going to be returned every time if first
instance already exists and they try to
create a new singleton object it's going
to return the one that is already
created otherwise it is going to create
a new one so there it is there's a
singleton pattern however we're not done
because there is one thing that is
always covered with the singleton
pattern and that is basically what are
we going to do in the situation where we
are dealing with threads which could
potentially create more than one object
whether we try to block that or not so
this guy I have to implement my little
Scrabble thing that I talked about
before I go import java.util 'ti and I'm
going to need the arrays library and the
collections which I'm going to use to
jumble up all the letters that are going
to be stored inside of a length list so
that means I'm going to need linked
lists I'm actually doing this also
because I've received a bunch of
questions in regards to arrays
collections and linked lists so as try
to cram multiple tutorials into one so
what I'm going to need to do here well
after this guy right here I'm going to
need to come in here and actually get
all of my potential Scrabble letters why
have that saved elsewhere so I'm going
to grab that and here they are and I
pasted them in there and that is all
they are those are all the potential
letters you can have inside of the game
of Scrabble I don't see any reason I
those out but I'm going to clean them up
a little bit so there you are
that's what we got right there just a
whole bunch of letters then after that
I'm going to go private linked list and
I'm going to store all these letters as
strings and I'm going to call them
letter lists this is going to be equal
to new linked list again string and then
I'm going to take all of the letters in
this array that we have right here and
I'm going to throw them into the linked
list so we're going to go arrays if you
wondered how to do that you just go as
list and inside of that you're going to
type in Scrabble letters so that is a
question that I recently received how to
get a array of things inside of a linked
list and now you know and all the code
is available underneath this video if
you want to go get it then what I'm
doing because I'm going to be working
with threads is I'm going to create a
static boolean and the first thread that
is going to be created is going to be
slowed down so that there's the
potential for a second thread to come in
and cause masses of a disaster and that
is exactly what that line is going to do
there for me then we need to come down
inside of this guy and start creating
some disaster I'm gonna say if first
thread which is going to be true then I
want to perform some things that are
going to slow down my thread so I'm
going to say first thread is equal to
false I'm going to change it back to
false and then I'm going to go thread
current thread and I'm going to cause it
to sleep and what this is basically
going to do for me is going to give the
other thread that I'm going to be
grading the opportunity to cause mass
disaster and if you scroll in here you
can see it needs a try-catch blocks on
the sage surround with try-catch blocks
even so some time and everything else
here can be exactly the same
whoever i'm going to come in and create
a whole bunch of other different methods
inside of here that are going to work
with these threads to create our little
Scrabble game that we are going to be
creating here so I'm gonna go probably
what this method is going to do is
return a list of all the available
letters so I have all those letters in a
linked list and they're all strings so
I'm gonna call this guy get letter list
and what's it going to do it this is how
you would return fields inside of a
singleton you're just going to reference
the letter list in that situation nice
and simple so let's create a couple more
methods here I'm going to create this
guy and it's going to get tiles for my
player so it's going
return a string length list and it's
going to be called get tiles and it's
going to receive an integer it's going
to say how many tiles do you want then
I'm going to create another length list
tiles to send and be equal to new length
list if you want to really really
understand this you definitely should
get the code almost every single time I
get an error from one of you guys or not
understanding why something has done a
certain way it is because the answer is
in the code but you didn't see it and
then we're going to cycle through the
linked list while adding the starting
strings to the list that's going to be
returned to the user and then at the
same time we're going to delete them
from the beginning of the list so to do
that anteye is equal to zero we're going
to start at the zero index there you
know while I is less than or equal to
how many tiles they requested and then
we're going to increment so no big deal
go tiles to send so tiles to send is
going to be going back to the user so if
they say hey I want seven tiles the
storm is gravel game it's going to kick
back seven letters and then chop those
seven letters off of the linked list so
that nobody else gets them how do we get
those guys we're going to go first
instance letter list and we're going to
remove and you would have thought I'd
put an eye in there but I know I'm going
to put a zero and the reason why is
whatever you call remove it is going to
chop off the zero index and then move
everything from the right o to the left
so next time through what is in the one
index will now be in the zero again and
everything's just going to work out
perfect and then after it goes through
all this is going to go return tiles to
sent and that new array is going to be
sent back to the function that called it
all right so everything's set up there
so now we're gonna go into scrabble test
Java right like that and we're gonna
start playing around with this guy so
what are we gonna need we're gonna need
import java.util 'ti we're gonna need
linked list because we're going to be
playing with length lists again inside
of this guy I want to go public class
scrabble test public static void main
string because we're going to be
executing everything from inside of here
anytime you see main from now on in my
tutorials that would that's exactly what
it means
so we're gonna go to singleton new
instance is going to be equal to
singleton and we're gonna go get
instance this is part of the singleton
pattern and that is how you're going to
create
two instances of the singleton class
right like that let's say we want to
print out a unique ID for all of our
instances that are going to be created
I'm just going to go instance ID and if
you want a unique ID just going to go
system identity hash code and what are
we going to put inside of here new
instance which is the name of this guy's
going to be created for us and that way
we'll be able to track whether we are
dealing with the same objects or whether
we are dealing with different objects
which is important and this also helps
you with debugging and a whole bunch of
other different things so then what are
we ended at we're going to get all the
letters that are stored in the list and
we're going to print those out on the
screen so how do you do that
new instance get letter list which is a
method that I just created here a couple
seconds ago
flip back if you don't remember it of
course this is new instance and then I'm
going to go linked list and this is
going to be a string just like before
our group of strings I'm going to say
player 1 tiles is equal to new instance
get tiles and I'm gonna say i-17 we're
going to act like this is the beginning
of our game and then let's say we want
to print out to screen all the new tiles
that player one just receive that's
useful so we're gonna go player 1 and
then player 1 tiles and that's gonna
print out all the tiles for player 1 in
our Scrabble game and maybe we also want
to print out our letter list just to see
how it's changed since player 1 went in
there and created that guy and then what
we're going to do is go singleton again
and we're gonna try to create a new
instance this is going to be our second
player and I'm going to call it instance
2 in this situation we're going to call
get instance just to see exactly what
happens and then let's say that we want
to also come in here print out unique ID
for this new guy let's call this
instance 2 ID let's call this instance 1
ID so we're gonna see if those values
changed just because we created a new
object even though they're not supposed
to of course I think you probably know
the answer what we're also going to show
you how to break it and then let's go
and let's print out our letter list
again just to see how things have
changed then I'm also going to copy this
and print this out there's that call
this player 2 tiles so player 2 is going
to get a new set of tiles which is going
to work by the way
then there are player 2 styles and if we
file save this we're actually going to
be able to actually
you're gonna be able to see some things
here and there order all the letters
print it out but that's kind of messy
what I want to show you here is instead
of that I'm going to go over into
singleton I'm going to scramble these
letters out so that they're not printed
out all in order because I think that's
a little bit more impressive so I'm
going to jump back into singleton Java
and right here where we get to first
instance where we created our first
object I'm going to call collections and
I'm going to shuffle first instance
which is this guy right here
so that all the letters are not in order
does that doesn't make much sense and
then this is just gonna be letter list
there you go all I did right there is
shuffle all these letters see how this
is Ã¡Ã¡Ã¡Ã¡ Ã¡Ã¡Ã¡Ã¡ like that well I'm
gonna save that I'm gonna reax acute
this and you're gonna see now that
they're going to be all randomized Saqr
and then you can also see the user
getting the right letter so if they want
seven that's one two three four five six
seven right like that and you can see
that they got those same seven letters
right here and then everything is moved
over there after and then you get all
this other stuff going right there and
you can also say that the instances for
these two objects even though two
separate objects were trying to be
created you can see that the same object
that represents the letter list is
identical so there's that so now what
happens if we come in here and we start
implementing these different players as
threads are you gonna see I'm going to
create a new class called Scrabble test
threads right here and I'm gonna
implement that so I'm gonna go public
class Scrabble test threads and we're
getting in another review of threads
because I get asked about them all the
time and public static what is this
telling you this is telling you that
this is going to be a main execution
area why because I'm using public static
void main so the first thing I'm gonna
do is go in here and go runnable create
a new thread using the run a wool
interface and this is going to execute
my code for me meaning the code for
creating new instances of the singleton
class new and get the tiles is going to
be the name of the class that's going to
have the run method inside of it to use
with this thread get tiles again is
going to be another thread and get the
taos it's going to be used again which
I'm going to create here in half a
second and then I just need to call for
the code and so
get the tiles to execute and it's pretty
simple I'm just going to go get at times
and call start on it and there's that
and then just going to be good tiles
again and start and that is it
so if I'll save that and that is going
to execute all of my threads so now we
need to go in to get the tiles Java and
start playing around with threads and
see how threads can very easily and
quickly start destroying things in
regards to using the singleton pattern
and I'm also going to show you exactly
how to block them from doing so so when
we create a new linked list or grab
information from the linked list library
and I'm going to go public class get the
tiles implements runnable because we're
using those threads and then we need to
go public void run and then we're going
to go singleton and these this run
method is going to execute all the code
in here for both of my threads if you
forgot previously so I'm going to go
create a singleton object called new
instance and it's just going to be
singleton get instance again that's how
we're going to create all our single ten
objects and then we're going to go to a
linked list string and this is going to
be player I'm going to soon have this be
player 1 tiles even though there's going
to be 2 players is equal to new instance
get tiles and we're going to get 7 tiles
just like we did previously and actually
I'm going to steal from Scrabble test
some code so I don't have to type it out
we come in here and get this unique ID
and I'm also going to get the letter
list so it's copied on fonts inside of
there paste that in there and then
bounce over and Scrabble test again and
also copy this guy right here and paste
that in there and I'm just going to go
instance ID and take player and put that
outside of there and then let's put
another message inside of here got tiles
there we are and we can file save that
and now we can test this guy using
threads so let's file save it and it's
executed in there you can see using
threads what we got here is our first
instance of the object look at the ID is
completely different than the second
thread instance object that was created
and you can also see that the list of
letters are also completely different so
even though we try to prevent it from
being able to go in there and create
multiple different threads and multiple
instances of different letters which
would obviously completely destroy our
Scrabble game it did go in there and
mess that up by either way that's
actually pretty easy though to come into
singleton Java and fix all of that which
is exactly what we're gonna do so let's
think about a couple different ways that
we could fix this issue let's scroll
down inside of here and let's come to
get instance now we very well could come
in here and change this su synchronized
now what this is basically going to do
is this gonna force every thread to wait
it's turn in essence that way only one
thread is going to be able to access
this method at a time and until that
thread releases this method being the
get instance method which is going to
create a new singleton object no one
else is going to be able to create a new
singleton object
see what happened here was the first
thread came in and it was told to go to
sleep meanwhile since it's in here say
this guy right here is checking to see
if it's null it went in here and then it
fell asleep now since it's set as null
that means there is no object that has
been created from this singleton class
so we need to create a new one Oh
meanwhile our first thread is right here
first thread sleeping so what happens
whenever the second thread comes in and
tries to create a new singleton object
it comes through right through the front
door because guess what the first
threads asleep down here and it goes in
and creates another object which is not
what we wanted to do however if we slap
syncronized onto here that is not going
to allow this second thread to ever get
in here until the first thread wakes up
and then continues on to create the new
object however we don't really want to
use synchronized because synchronized
very often slows everything down
dramatically so in this situation I'm
going to show you another way to get the
same results without slowing your
program down terribly it's actually
going to be pretty simple we're going to
wrap everything inside of synchronized
singleton class and in essence what this
is going to do is this is going to force
it to be a synchronized method until the
first object is created and then
thereafter it is no longer going to be
considered as synchronized class and
then after this we're going to run our
same if statement we're going to cut
that out of there
paste it in there and then we're going
to check it
null again like I said this is only ever
going to happen up until the very first
object is created and now we're gonna go
first instance and we're also going to
shuffle a lot of the letters and then
we're going to close off everything so
now that we have that all set up let's
see if we fixed our problems let's
execute it again and you can see there
was a pause and there you go so now both
of our objects are of exactly the same
type they both point to the same unique
ID and as well our letter is going to be
the same they might look different the
only reason why is all these letters the
first seven of them have been replaced
down there and then those letters have
been replaced down there so there's a
whole bunch of things about the
singleton method as well as a review of
threads and linked lists and a whole
bunch of other things based off of
questions you guys have sent me please
leave any questions or comments below
and all of the code is available in a
link underneath this video get it it
will make this stuff 100% understandable
till next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>