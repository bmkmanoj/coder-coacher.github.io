<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>PHP MySQL Tutorial | Coder Coacher - Coaching Coders</title><meta content="PHP MySQL Tutorial - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Derek-Banas/">Derek Banas</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>PHP MySQL Tutorial</b></h2><h5 class="post__date">2014-09-05</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/mpQts3ezPVg" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">well hello Internet previously I made a
big giant tutorial on both MySQL and PHP
and I received a lot of requests asking
how to connect those two so I'm going to
do in this tutorial is I'm going to take
the student database that we created in
the MySQL tutorial and I'm going to make
it work on the web using PHP and of
course in the description underneath the
video I have links to the MySQL and PHP
tutorials that I previously made what
we're going to focus in on here is
setting privileges for database users
setting up outside files to get access
to the database connections that we're
going to need prepared statements and a
whole bunch of other different things so
I have a lot to do so let's get into it
okay so this is basically what we're
going to create I kept everything
extremely simple we're going to have one
page that's going to allow us to enter
in student information and it's going to
be the same student information that we
had set up in the MySQL database
tutorial and then whenever you click on
send that information is going to be
sent to our database and we're also
going to create another page that's
going to print out this table with a
listing of all of our student
information and I'm hoping that by
showing you this you'll be able to
basically do anything with MySQL and PHP
and I kept everything really condensed
into just a couple videos now I'm over
in the terminal inside of MySQL one
thing we're going to want to do also to
keep everything really nice and secure
is the user that is going to be
accessing the database for us we want to
really limit the power they have so what
you're going to want to do is log into
MySQL as root or as a user that has
enough power to grant the capabilities
of your different users and what I'm
going to do is I'm going to give the
user that is going to be able to access
my database from the web very limited
privileges so I'm going to allow them to
insert new information select new
information delete information from the
database and update now you might decide
that you want to remove the privilege
for them to be able to delete existing
rows and that would be very secure and
in that case you would just use select
insert and update but I'm just going to
leave everything the way that it is here
then what we would do is we would define
the specific database we're going to use
which is test3 and dot star and then
after that you're going to say - and
this is going to be the user that you're
going to want to use for your website
and I'm going to call it student web and
in this situation I am using localhost
so I'm going to type in localhost like
that and then you're going to type in
identified by and there's where you're
going to type in their password so I
just put Turtledove inside of there and
there it is so when you execute this
this is going to give the user that
you're going to use in your website only
the ability when start select delete and
update the database now what we're going
to do is we are going to define MySQL I
connect dot PHP get student information
add students and student added this is
all the files right here and of course I
have a link to them in the description
as well however it's very important to
put the file that's going to access your
database outside of the main part of
your website so that nobody can access
it so in this situation on my localhost
I have all of my website files and
everything here that can be accessed on
my machine in My Documents folder so I
want to put my SQL i underscore connect
or you can name this anything you want I
just named it that you're going to want
to put this outside of that main web
Documents folder and that's going to
keep everything out of the way and also
make it very hard for people to access
this information now let's jump in and
write the code for this it's actually
going to be pretty simple we're going to
define some constants so we're just
going to say define and we're going to
get database user and you know who that
is because we just went and created him
and that's going to be student web and
I'm keeping this as simple as I can
possibly make it then you're going to
want to type in the password for that
user and you just saw that it's
Turtledove you're also going to come in
and define the host in this situation
it's going to be localhost and then
finally the database name which is going
to be test three now we want to do is
actually get a database connection with
this guy and we're going to put an @
symbol here which is going to keep any
errors from showing in the browser I'm
going to type in my SQL I connect
they're going to put in all of the
constants that you defined so database
host database user database password and
then finally database name and I'm also
going to come in here and called I which
is going to be called if we can't get
this connection and I'm just going to
say something like
could not connect to MySQL and then you
could do something like print out the
error that occurred MySQL I connect
error and there you go and that is
literally all you're going to have to do
to get a connection with your database
so now what I'm going to do is jump over
into get student info dot PHP and create
everything here now to get that
connection that we defined outside of
our main root area for our website
you're going to go require once and to
jump backwards you're going to go dot
dot forward slash to get into the
different directory and then you're
going to type in minus Q all I connect
dot PHP and that's going to get you that
now we need to create our query and what
this guy's going to do is show this
table right here so I just have to
create a query that's going to get me
the names and email addresses and all
the information you see right here so to
find the query and you're going to just
type in your MySQL command so I want my
first name want my last name my email my
street my city jump down in the next
line my state my zip my phone number my
birth date I'm getting a whole bunch of
things here just so you can see what a
big crazy query looks like and I want it
from the students table now I need to
get a response which is going to be all
the information that I'm going to want
to show in my table and again I'm going
to put the @ sign here so that nothing
shows up inside of the browser I'm going
to pass DBC which is my database
connection this guy right here
there we are and then I need to also
pass in the quarry I want to make on the
database now before I continue I want to
make sure that the query executed
properly so I'm just going to have to go
if response like that and then I need to
create a table to put all this
information into so table a line let's
say I wanted to align left' this is just
basic HTML and let's say I want cell
spacing equal to 5 and cell padding
equal to 8 I know this should be done
CSS and all this stuff I'm not doing
that I'm just basically just getting
this to work as hot as simple as
possible and then I'm going to have to
go in here and define each of the rows
for my tables let's say I want them all
to be bold first-name
and then close that off I'm going to do
that for every single one of these guys
and then put a closing quote for the
echo command right there so this is just
going to represent the top of the table
these guys right here so that's what I'm
making right there now I need to do the
rest
now to do the rest what I'm going to
have to do is cycle through all the
different rows and then display them
properly in the table so I'm going to
use a while loop here myself some more
room and I'm going to get each of these
rows and I'm going to be able to get
them by calling my sqli fetch array and
this is going to return one row of data
over and over and over again until there
is no more data left to return I'm going
to get that from the response and then
to define each one of these rows to find
the row TR and then TD and let's just
say a line left again close that off and
then to get the role of data I just go
row and then I give it the name of that
row in my SQL which is first name and
then I close that off close that row and
then let's make this align left as well
and then close that off and make sure we
put our quotes in here and we only need
one period then of course we're going to
do that for every single piece of
information that is in that row that has
been returned because of the SQL command
that I issued right here come back down
here again then after I'm all done we
can just come in here and close off
everything all together another echo
statement and then jump outside of this
and we'll go echo and close the whole
entire table as well and then I just
need to basically define what's going to
happen if my conditional up here there
was no response or there was some type
of an error and that's the Troy H and
I'll go echo and say something like
couldn't issue database query or
something like that and then I could
also come in here and go echo MySQL I
error passing the database connection to
get that error close that off and then
finally close the connection to the
database all together so MySQL I close
and then pass in the database connection
and then get rid of that last curly
brace and there we are that is all we're
going to need to do to print out that
table with all of that user information
just pass in this query now let's jump
over into add student on PHP and this is
just going to require or allow them to
enter the
formation and to pass the information
from HTML over into MySQL I'm going to
show you how to do this a couple
different ways I'm just going to put the
location for the PHP script that is
going to re receiving all this
information and I'm just going to a
student added dot PHP and then method in
this situation I'm going to use post and
then inside of here we could do
something like putting in bold add a new
student and then we just have to ask for
all of the different information that we
want so if we want the first name and
then we're going to type in the input
that's going to allow them put that
information in and it's going to be text
and let's give it a name because that's
important because if it doesn't have a
name we're not going to be able to
figure it out inside of our PHP script
and just keep everything simple let's
just make everything xxx and if we want
to give it a value of nothing and then
close that off and there we go now all
we need to do is do this for every
single other possible input type and
make sure we close this off okay so I
put that information in there for all of
the other different inputs so we got
first name last name and all these
different things the only thing I did
here is for the state I only want two
characters so I made the max length -
zip code I only want 5 characters so I
made the max length 5 right there I'm
just doing this to speed up everything
so you can see there all of the
information that I want the user to
enter in and now what I need to do is
define the submit button so let's put
this inside of paragraph tags just keep
it simple again and then inside of here
we can do input type is equal to and
this is going to be submit make sure you
give it a name because we need to check
that this has been submitted so when we
give it the name submit you're going to
see in a second why and then if I just
want to put send in there as the value
that's fine and everything else is
finished ok so there you go that is all
we're going to need to do HTML wise to
be able to get the information and send
it to the PHP script student added which
we're going to create right now ok so
here we are again very first thing we're
going to do is check that this page was
actually reached whenever this form was
submitted so remember I said make sure
you give submit a name well right here
we're going to go and check to make sure
that
it actually sent us here so post and
submit you're going to type in the name
that you gave your submit button okay so
if we did come from that form what we
want to do is we want to verify that all
of the information that we asked them to
pass to us was actually created or was
passed so what we're going to do is
we're going to create an array and this
array is going to store any missing data
and you're going to see here in a second
what that's going to look like so we're
going to check and of course for to make
this really secure you need to use
regular expressions to go in and verify
all the information before you allow it
to go into the database but just to keep
things a little bit more simple I'm
going to avoid going into regular
expressions right now so I just go first
name and if we jump over here this is
what I'm doing I'm looking for this
right here and I'm getting the value
that was entered inside of this so make
a first name check if it's empty or if
they gave me the information I need if
it's empty I'm going to store inside of
data missing the array and this is
really weird
inside of PHP if you want to add an
additional thing to an array you just
keep adding it okay right like that and
of course make sure to put an equal sign
inside of there else if it was not empty
and they did pass in a first name we're
going to store that maybe give it a
little bit shorter name here and we're
going to trim off any white space that
exists and to get access to that again
underscore post and that's going to give
us access to that data that was passed
from the form there we go now all we
need to do is do that for all the other
possible inputs from the previous page
and there you can see I did first name
last name email Street everything
everything is exactly the same and I
went and pulled it in trimmed off the
whitespace if there was no information I
stuck that in a row da-da-da-da-da okay
so after we have all of our information
we're going to need submitted we come
down here and we're going to check that
all of our information was actually
passed and if you want to check to see
if an array is empty or not you just
call empty and then you pass in the
array data missing and if it is empty
that means no errors and all the
information was actually passed in so
then we're going to go
require once again and then we have to
locate the file that's going to have our
database connection in it - qli Connect
is what I called mine and then here I'm
going to use what's called a prepared
statement so for this query
I'm going to go query and since I'm
going to be inserting information and I
want this to be a little bit more secure
like I said this isn't as secure as it
could be but don't want to get into all
that what I'm going to do is just list
out all of the different pieces of
information I want to enter into my
database email Street city state zip
code phone number birthday sex and date
entered lunch cost and student ID and
then after that you're going to say
values and you need to put a question
mark or the actual information you want
passed in there after so we're going to
have MySQL actually put all this
information together for us or PHP so a
question mark for every single one of
these and then in the situation where I
have date entered I'm actually going to
want now inside of there so that it gets
the updated date so there that is and
then for lunch cost I'm going to put
another question mark inside of there
and then finally I'm going to put null
in there for the student ID so that it
Auto creates that for me there we go
there's my insert statement now I'm
going to have the statement prepared for
me and to do that - qli prepare and you
pass in the database connection and the
query and then what we're going to do is
we're going to pass in the actual
information that is going to represent
or replace these question marks and to
do that we need to bind the variables to
those question marks and to do that we'd
have to go my sqli statement bind
parameters then we're going to put in
our statement and write like that and
then what we need to do is something a
little weird let me just come in here
you're going to have to represent the
datatype for every one of these guys
that you're going to be passing into
your database and you're going to use an
eye for integers you're going to use ad
for doubles you're going to use a B for
blobs and your use an S for everything
else well you're going to use the
lowercase s and your
I'm using a lowercase B okay so this is
everything else and you're going to be
doing that right here so what I need to
do might actually be easier to go into
my SQL and if we do describe students
like this now you're going to say shrink
this down all of the data types for each
one of these different things in our
database so this is a string string
string string string characters a string
int another string everything else date
this is a string enum string timestamp
string this is going to be a float and
this is another int so knowing that
information we're going to come over
here and we're going to go string string
string string string string there's six
of them then there was an integer and
there's three more strings and a day
okay now what we need to do is put in
all of our data so the very first thing
or the variables that we want bound to
these question marks for our prepared
statement so first name is going to be
the very first one that's the question
mark and there that is and we need to
put the variable we want to send in
there next one is going to be last name
email Street city state zip phone birth
date make sure it's the right variable
name sex of our students and lunch and
that's going to bind all of that data in
those variables to the question marks up
here for a prepared statement now to
execute our query my sqli statement
executes and then pass in statement we
want to execute and then I'm going to
get the number of affected rows since
we're only going to be updating one at a
time this number should always come back
one if it actually executed properly
there's some security things you could
do here as well statement affected rows
and pass in the statement there then
we're going to check to make sure that
the affected rows actually were one
affected rows equal to one if they were
that means the query went through
properly maybe we want to say something
like echo student entered then we want
to close our statement
Highschool a line statement close and
pass in statement and then we can go
mysqli
close our database connection that we
have and then else if the affected rows
were not one something went wrong say
something like or occur
and if we want to put in the actual
error that did occur just go echo mysqli
error put that on the screen if you'd
like and then we're going to have to
close our statement as well as close our
database connection again it's like that
then we have our next else which is what
happens if the data was missing they
didn't pass in the data that we wanted
all we go else echo you need to enter
the following data if we want to cycle
through all the different pieces of data
that they did not enter we're going to
go data missing which is the name for
our array that we created that we added
all this information to so come up here
say data missing there is the array and
this is all the information that would
have been missed if it was not entered
for each data missing we're going to
tape each little piece of the array or
each thing stored in the array
temporarily store it in missing that's
what for each does for us and then we'll
echo those out on the screen and we'll
just go missing and then say we want to
put a break or something in there and
then let's say since they didn't enter
that information they're probably going
to want to enter the student information
again how do you do that inside of a PHP
script we can actually have a PHP script
call itself and there's no reason to
type all that out I'm just going to jump
over here jump over into the form area
select this even though this is student
added we can take this information right
here from the top of the form to the
bottom of the form that's what we copied
right there this is from add student
type PHP jump back over here and then
outside the PHP script which ends right
here jump down there and paste all that
in file save it good student info dot
PHP works perfectly then we can go to
student added dot PHP type in some
information about a student hit Send you
can see student entered popped up right
here so we could come in here and go get
student info and now you can see John
Smith shows up down there so pretty cool
being able to go in there get
information out of our database as well
as add new information and I think I've
provided enough information to also
allow you to go in there and basically
add anything else you need please leave
your questions and comments below
otherwise till next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>