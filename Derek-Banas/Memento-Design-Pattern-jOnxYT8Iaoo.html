<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Memento Design Pattern | Coder Coacher - Coaching Coders</title><meta content="Memento Design Pattern - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Derek-Banas/">Derek Banas</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Memento Design Pattern</b></h2><h5 class="post__date">2012-10-30</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/jOnxYT8Iaoo" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello internet and welcome to part 25 of
my design patterns video tutorial today
we're going to talk about the momento
design pattern so what is the momento
design pattern it's a way to store
previous states of an object quite
easily first you have the momento which
is going to be the object that is going
to be stored in multiple different
States and by different states I just
mean the fields are going to have
different values and so forth and so on
then you're going to have the originator
it is going to set and get values from
the currently targeted memento object
and it's also going to create new
mementos and assign current values to
them and then finally you have the
caretaker it holds an ArrayList in my
situation anyway that's going to contain
all previous versions of the memento
objects and it's going to be able to
both store as well as retrieve stored
mementos that are stored in the
ArrayList let's look at a picture and
clear this up a little bit first I'm
going to start here in the middle we
have the memento and here you can see
the article which is just going to be a
string memento of course is going to be
the constructor which is going to create
a new memento object with a new article
stored in a field and then you're going
to have get saved article which is going
to return the value currently set for
the article which is right here then
let's jump over to the caretaker first
you're going to have an ArrayList of
memento objects then you're going to
have the ability to add memento objects
to the ArrayList as well as get objects
from that wrist same exact ArrayList and
then finally you have the originator
we're going to store a value for article
inside of it set is going to create a
new article field create memento is
going to create a new momentum object
which it's going to do by sending a new
article feel to it say that's what this
string is the article field and then
finally you have restore from memento
which gets values of article for the
current memento object that is set so
there is a brief overview as well as a
kind of UML class diagram so now let's
jump into the code and explain it
further alright so here's everything the
first thing we're going to do is create
momento Java which is going to be the
objects that we're going to be storing
and there everything is on the screen
the first thing we got to do is create
the article
it's going to be stored the momentum
object I'm going to make this a private
string and I'm going to call it article
and then I'm going to create a
constructor memento that's going to be
passed an article that's going to be
attached to it article save which is
going to be passed over there and there
you go
and of course make this capitalized and
then finally we need the capability to
return the value stored in the article
so we're going to go public string get
saved article and quite simply it's just
going to return the article field value
for said momenta and that is it so there
is the momentum and as you can see it's
really simple I just have the article
saving here but you can have numerous
different fields saved and of course you
could use composition to have multiple
different objects stored inside of it so
now let's go into the originator and see
how this guy's all created we're going
to have private string which is going to
be a temporary holding cell or whatever
is going to be stored in article and
then we're going to go public void set
which is going to set the value for our
article so a string is going to be
passed over to it and then so we can
track everything I'm going to print
different messages out on the screen and
all this code is available underneath
the video and you should definitely
download it and play around with it if
you really want to understand how this
is going to work I'm just going to go
current version of article throw a new
line inside of there and then I'm just
going to go new article so that we'll be
able to figure out exactly wind changes
are being made to it okay so we got that
all set up and then I'm just going to go
this article is equal to actually I
don't even need this part here I can
just go article new article alright so
we got that saved then we need to create
a new memento with a new article we're
just going to go it's going to return a
memento object store in memento it's
going to be the name of this method and
then we're also going to print on
another message on the screen so we'll
be able to track what's going on with
this and I'm just going to say from
originator so that you'll be able to see
where that's going saving to momentum
blows that off and then we're going to
return new memento which is also going
to be a call to the memento constructor
of course which is going to be passed
the value that we have set for article
then we need to get the art
goal that's currently stored in the
momento object and we just need to
create a new method I'm going to call
this restore from momentum and part of
this tutorial is going to be improved
and part of it is not the reason why I
wasn't certain if I was going to use any
type of swing tools whenever I first
started this and now as I'm doing it I'm
thinking yeah I'm gonna do it that way
basically I'm going to allow you to type
out an article and then bounce back
through previous versions of it and then
into future versions of it I think
that's what I'm going to do anyway see
how it turns out system.out.print line
and we're also going to go from
originator and we're going to put out a
message previous article saved in
memento and and throw another new line
inside of there and then print out the
article on the screen and then throw
another new line inside of that and then
finally of course we're going to return
article and there we go so that's all
setup and now we need to go in and
create the caretaker Java file and I
already created an ArrayList because I
knew that's what's going to be stored
inside of here so we need to of course
create an array list it's going to store
memento objects inside of it saved
articles sounds like a good name
ArrayList amento objects are stored
inside of it and there we go and now
we're just going to manipulate those
like we're going to add an article to
our ArrayList so let's go public void or
we're going to add a new memento object
I mean to our ArrayList
add memento and there's the memento
we're going to be fasting over and I'm
just going to call this m and then saved
articles which is actually saved
mementos but whatever you get the point
there we go that's going to save a new
memento object to our ArrayList and we
just need to get those mementos from the
ArrayList to do that we're just going to
go public memento yet
memento and we're just going to pass
index over and that's how it's going to
get that requested memento that we want
and then we just have to go saved
articles and get and index which is what
we're going to pass over there that's
going to get our memento objects from
our ArrayList and then we are that's
pretty much it now that's why I'm doing
this a little bit more complicated now
I'm going to create test momento Java
and this guy
is going to use some J frames and n
different Swing components to make this
a little bit more interesting so I'm
going to need to import some libraries
so ought to do some event handling so
that'll handle that and then I'm also
going to import javax.swing so that I
could use different swing components
inside of this and then if I want to use
this as a jframe I just need to go
extends jframe pretty simple and then
I'm going to go test momento paste out
there and then go new this is going to
create our new jframe that will then be
playing around with then I have to
decide exactly what I want to have
inside of this guy so let's say I want
to have private J button I want to have
some J buttons I want to be able to save
my current memento with the current
article that is stored inside of it and
I want to be able to undo and then I
want to also be able to redo so it's
going to be able to bounce through
different versions of our objects and
then I'm going to go J text area and
this is just going to be a text area I'm
going to call it the article new J text
area and it's going to be 40 rows by 60
columns like that looks about right
and then caretaker I'm just going to
call it caretaker is that simple enough
new caretaker and like step 4 we're
going to create the caretaker it's going
to contain the array list with all the
different mementos that have all of the
different articles inside of it it's
going to allow us to add and retrieve
articles and mementos from that array
last pretty simple and then we're going
to have originator which I'm just going
to call regginator is equal to new
originator like that and the region or
is just going to set the values for the
article create new mementos with new
articles and also get the article stored
in whatever the current momento is and
then I'm going to say save files which
is going to be the number of files that
are currently I've saved or the number
of mementos I currently have saved
that's going to start out at 0 and then
I'm going to say current article is
going to tell me which current memento
I'm working with so that I pull up the
right memento object whenever I need it
and public tests memento which is going
to be this J frame that's going to
create everything for us here just need
to set some basic information for the
panel it's going to hold all
my GUI elements for me so I'm going to
go set size 750 by 780 it's going to be
the size of the jframe this title and
I'm just going to call this momento
design pattern because that seems to
make sense done it and then this also
set default close operation jframe die
exit on clothes sounds like that's going
to work good for me that's just going to
close everything whenever the X button
is hit on the jframe I need to create a
J panel which is going to hold all my
googly elements new J panel then I'm
going to add a label to my panel just
for the heck of it some we go to panel
one add new J label and this is just
going to be an article which is going to
be the article that's going to be
changing and stored and all that other
stuff and a one I'm also going to be
adding my J panel or my J text area
which is going to be called the article
so paste that inside of there and then
I'm gonna handle all my buttons so that
I can do different things whenever
different buttons are hit and add little
action listeners to this new button
listener you have any questions just
leave them down below sort of speeding
through some of this stuff because I've
covered it so many times in the past and
then we're gonna need an undo listener
and a redo listener these are just gonna
be buttons that are gonna undo and redo
save button is going to be equal to nu J
button and I want to put save on that
button and then I just need to come in
here and go save button add action
listener which is gonna allow me to do
certain things whenever the button is
clicked on and I'm just going to copy
this do the same thing or redo and the
undo button so let's do undo here and
make sure we save this is undo and this
is going to be redo just going to make
the different articles pop up here on
the screen that's all it's going to do
bounce back and forth through the
different versions of the article
whenever those certain things are popped
through here there's redo and here we're
just going to say on do listener and
redo listener and that's going to allow
me to perform different events whenever
those different buttons are clicked on
and then paying a1 of course we need to
add our buttons so save bot copy and
undo button and redo button and there's
and then finally we need to add our
panel so say hey jframe add my J panel
cold panel 1 and then after you get all
that set make my jframe show up which is
exactly what that does that's kind of a
review using swine always useful and I'm
just gonna throw this class inside here
so that it'll be able to access
everything I'm going to need access to
implements actionlistener then I'm going
to go public
Boyd actionperformed and it's going to
get an action event sent to it and I'm
just going to call it e just to be
boring then I'm going to say if II get
source of the action that was triggered
well this is going to say did the Save
button trigger this action if it did
while I need to change the value of my
little text area on my screen so I'm
just going to create a string here text
in text areas what it's going to be
called and if I want to get the text in
the text area I just go the article
which is the name for my jtextfield
so give me the current text stored
inside of there I'm going to go
regginator so remember I'm saving
whatever is in the current text area on
the screen to a memento to a field
inside of a window so then to do that I
need to call regginator set and then go
text in text area and this is going to
save that to article inside of the
memento object so that we'll be able to
use it later on if we ever leave this
area and then we got our caretaker I
need to add my new article to my
ArrayList or my new memento object with
a new article and just go originator
store in memento like that and then
since I saved a new object inside of
here I want to increment my number of
saved files so I'm gonna go save files
remember that's up here somewhere there
it is say this is going to tell me how
many files I currently have saved so
that's important so just save files
increment that and my current article is
also going to have to increment because
I just saved a new one inside of there
and then let's put out a little message
this is how ID bug things all the time
by the way so save files
I just put a little note in here to
print out the screen what was just done
and this is just going to print out how
many save files I currently have for
current mementos that I currently have
and then later on whenever the undo
buttons hit to the point that there are
no more files to be brought up I want to
actually disable that so that they won't
be able to continue looking for memento
objects that don't exist so I'm going to
go set enabled to true because I just
added a new ones that's going to mean
that I'm going to be able to undo and go
back to my previous one think about that
for a second or leave a questionable up
and you'll get it and then I'm basically
going to do the same sort of thing here
I'm going to check if the source of the
click was done by some other button in
this situation I'm going to check to see
if it was the undo button it was clicked
so undo button and if it is I want to
perform a couple little checks here I'm
going to say if current article is
greater than or equal to one
I want to make sure that I am not going
to try to go to a memento object in the
ArrayList that doesn't exist so when I
make sure that it is going to have a
value of one so that the maximum value
for current article is going to be zero
because the index or the minimum index
for the ArrayList is going to be zero so
I'm checking if it's greater or less
than one because I'm going to decrement
it so that's just a check to make sure I
stay inside my ArrayList and then I'm
going to go string text box string and
I'm going to get the current value for
the article that's going to go inside of
the text box so I'm gonna go originator
restore from memento we can look at this
here's originator restore from memento
I'm gonna pass it I'm a mental object
and it's going to kick back the article
that is saved in the memento see that's
what it does so it's bounced back here
restore from memento
well I'm gonna need to go hey caretaker
I want to get the current memento and
because I decremented current article
that's going to get me the index inside
of the ArrayList for the last one of
those guys and then men say get rid of
that I'll save that jump back over here
mementos see that one away that little
error message sorry when I improv a
little bit I occasionally make couple
typos and then I'm gonna say
article which is the jtextfield I'm
going to set text to whatever the
article is stored in that memento object
like that and then also remember we're
doing this thing where we're enabling
and disabling the buttons so that we
don't accidentally call for an index
that doesn't exist in the array list
since we start at zero and go up to the
maximum number of files that are saved
well since we did an undo button here I
want to make sure if redo button was
grayed out I want to set enabled to true
because since undo was pressed that
means we're going to be able to redo to
go back to the previous one so that's
what I'm doing there that's neat else
I'm going to say undo button set enabled
that means we tried to go to see if we
go out to here but current article was
not greater than or equal to one that
means we were about ready to fall out of
our ArrayList and call up an ArrayList
item that didn't exist which would
trigger errors and caused all kinds of
havoc so what we're going to do is set
enabled for the undo button to false so
that we don't have to worry about trying
to access an ArrayList item that doesn't
exist and then down here we're going to
go else and then we're going to do
another if statement so we might as well
just copy that right there paste that in
there and here we're going to check if
it's the redo button that was clicked on
and then in this situation we're going
to check save files because that's going
to tell us the total number of files
that we have in existence that we've
created and I'm going to subtract one
from that and make sure that current
article is greater than one minus the
total number of files that we have saved
because we don't want to try to bring in
a new save file that doesn't exist and
the reason why the negative one is there
is because the index of course starts at
zero so now that we are able to do that
we're going to increment the current
article so that we are using a new
article and then get the newer article
saved and display it inside of our J
text area and we're going to do that
pretty much in exactly the same way that
we did before so let's just copy this
paste that there text box string and
then we're going to call Ridge nater
just like before restore for memento and
get memento and then this guy is going
to be
exactly the same because we incremented
the current article so we're just
bouncing through that ArrayList that's
all that's going on here and then we're
going to set the article which is the
jtextfield it's going to show up on the
screen using set text by putting that
information inside of there and because
we did hit redo button what does that
mean that means our undo button is now
going to be usable so we're going to
make sure that our undo button shows up
as true and then else and when will it
get to this else it'll get to else
whenever we hit the redo button which
means we're going to advance upwards
into the future in regards to changes
that we've made the article and what
does that mean that means redo button
set enabled should be set to false so
that it's grayed out and can't be
clicked on anymore which would cause all
kinds of havoc and file save that and
now let's check it and see if it works
so let's run it and I'm also going to
have my console over here on the right
side of the screen so you'll be able to
see what's going on over there so let's
say I walked was just quite simply what
I typed in right there I walked and I'm
going to hit save you can see from
originator current version of article is
I walked and from originator saving to
memento which is going to save this new
field data over to a new memento object
and it saved files means I have one new
memento object inside of an ArrayList
okay then I could say I walked down the
street like that real real simple and
then hit save and I can see current
version is I walk down the street from
originator and now we have to save files
and then I could say and I saw something
like that and save that you can see
everything is updating over here on the
right side of the screen and then
finally I could say I saw something
scary and real simple and hit save again
and there you are you can see I walked
down the street I saw something see area
now let's show how all of the undo and
redo buttons work which are down here I
just been hit and save over and over
again so if I hit undo you're going to
see I walked down the street and saw
something see the scary part jumped off
of there and then if I hit undo again
you can see it changes to I walk down
the street which is another previous
version undo again is just going to show
I walked unto again is going to gray out
the undo button just like we did before
and then I can click on redo which is
going to jump into all the other
versions that I created thereafter until
the rebut ngoba gray so there your honor
those kind of a fun walk through with a
momento design pattern definitely get
the code play around with this and it'll
make a hundred percent of sense
otherwise of course leave any questions
below and of course I'm always welcome
for new requests otherwise until next
time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>