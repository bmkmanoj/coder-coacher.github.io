<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Web Design and Programming Pt 23 | Coder Coacher - Coaching Coders</title><meta content="Web Design and Programming Pt 23 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Derek-Banas/">Derek Banas</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Web Design and Programming Pt 23</b></h2><h5 class="post__date">2011-01-24</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/NVtU4JI5QQU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">well hello internet and welcome to court
23 of my web design and programming
tutorial today I'm gonna show you how to
create a proper forgotten password
script so I got some of the information
in here already you've already seen how
to start sessions and how to include
information from other files in this
case this loads the database and a bunch
of other security function there's basic
HTML and down here at the bottom you can
see our form where the person's gonna
enter their user ID and their mother or
their grandmother's maiden name and I
have my max lengths set here and here's
the information in regards to the
CAPTCHA system okay and that's what you
can see over here on the right side of
the screen well now all we got to do is
create the PHP code that is gonna make
this guy work and this is pretty much
the last time I'm going to do a tutorial
like this so you might cheer but people
ask for this stuff and it is extremely
important and that's why I'm covering it
so here we're checking if the variable
called submitted as a value and we're
gonna check for a valid user ID sorry I
don't comment in these things it's just
too much to type in I normally comment a
lot more than it seems like I comment
and we know this user ID is gonna
contain upper and lowercase letters as
well as numbers and it's gonna be
between 8 to 20 characters in length you
should be really good at regular
expressions by now dollar sign strips
slashes oh I got a request somebody
asked me what exactly does strip slashes
do it's here for security reasons and
basically what it does is if anybody
puts a backslash in with a quote for
example it'll simply turn that into a
simple quote and if they have two
backslashes
it will turn it into one so that's
basically what strip slashes does purely
there for security reasons okay and then
we're gonna trim off any white space
that they might have entered all right
and if it does work we're going to
assign this user ID that they pass to us
after we send it through our other
function that is actually in this guy up
here and you can get that at new thing
tank comms
free I don't want to do whatever you
want with it and I showed you in a
previous tutorial exactly what was in
there else if it doesn't pass my regular
expression test I'm gonna set you equal
to false and I'm gonna
to screen information enter was wrong
just to keep it nice and simple and then
exit out of there and then what I want
to do is check for a mother's maiden
name and this is going to be exactly the
same except for one thing obviously
we're not gonna use user ID here we're
going to use mother name what you can
see right here and also I'm gonna change
this to six actually I should probably
change it to three I guess technically
somebody could have a last name two
characters but I'm leaving it that way
mother name right there and mother name
that's all I need to enter there except
I'm not gonna need this Chuck right here
alright so that makes sure using regular
expressions that are entering valid
information in both the user ID as well
as the mother's maiden name and then I
have my CAPTCHA code again I'm just
gonna copy and paste this from previous
and here is all that information that I
copied and pasted it it's an identical
to what we used in the past so if it
doesn't make any sense take a look at
the previous tutorials to this
specifically the one that talks about
CAPTCHA alright so now we got the
CAPTCHA system in there now we have to
check if all those values passed all the
tests that I gave to them if and sq-- is
the value for secret question and I
should also go up here and change that
sq and capture check and now I'm just
going to create a query select secret
question and always define the secret
question and make sure it's a good one
don't allow them to create their own
secret question I found in most cases
what people do is type in their last
name or their user ID or something like
that make sure you give them something
that they can remember that is also
difficult for other people to know
always make sure you put those single
quotes around the value there
whenever you're issuing this to a query
trigger and then we want to check that
only one row was affected and then we're
gonna get the values that were returned
from the query and assign them to an
array called row right like that then
we're going to check that the secret
question that they entered is equal to
whatever the value is in the zero index
or row because that's what this guy is
right here and then we have to get all
the other information we need out of
there because we're gonna be sending
them an email so we need to get the
email address from the database that's
stored there we're gonna create a new
password for them and we're using a
multi-layered random number generator
here actually three random number
generators and then we are going to
issue another query so we'll call this
query two and update users' set the
value of password again encrypt the
password where user ID is equal to the
user ID that was provided and then get
the result of that query or trigger an
error and then we just have to come in
here and make sure that the affected
Rose is equal to one like we did before
and if it is we're gonna create the body
message for our email that we're gonna
send to them and remember to put the
single quotes inside of this and then if
I want to mail this to the guy of course
I have to have my mail system set up but
I'm just gonna mail it to the email
address they gave us and there's your
subject and in here I'm gonna put the
body message and then here I'm gonna put
from whatever the name of the site is
and just so we can see I'm actually
gonna comment this out because I want
you to be able to see it over here but
this is the way you would do it almost
always remember this is the tutorial so
it's gonna be slightly different and
instead what I'm gonna do is print this
off to the screen so that you can see
exactly what we got here and I'm gonna
put a break statement in here cuz I love
break statements and this is the message
that's normally going to be displayed on
a screen your password has been changed
but we're gonna take the password off of
that so that the only way they're gonna
be able to see the password is it's
going to be emailed to them and then
we'll just leave everything else the way
that we have it right there and then
since everything worked out fine MySQL
closed the database exit out of the
script and people do not do this all the
time ago security answer is wrong and if
the security answer was wrong we are
going to close the database and
the script this keeps them from being
able to continually keep trying things
it's one of the reasons why I'm doing
that and then I'm actually gonna copy
this and paste it two more times and
that means I need to close off this
submit cam additional yeah I'm just
gonna do it just like that and that's
the end of your code and if you can see
here if we would save this file we got
the guy over here and person's gonna of
course have to know their user ID and I
think I remember what I typed in here
even though I do not know anybody named
Goodwin and then on top of that they're
gonna be able to read this caption it
worked your password has been
temporarily changed too and you can see
right here this new password which is
just jumbled up mess please log in this
is what would be emailed to them and
this is what would be displayed on the
screen and that is it if you have any
questions or comments leave them below
up next I'm going to reintroduce and go
through JavaScript and then bounce
around and answer some of your PHP
questions along the way and whenever I
think you are ready then you will be
prepared for cross-site scripting which
is extremely advanced security and then
we're gonna go into the inner workings
of WordPress and you'll be able to do
anything you could ever imagine with
WordPress next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>