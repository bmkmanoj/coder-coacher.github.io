<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Building Beautiful, Interactive AMP Pages for E-Commerce &amp; Beyond (Google I/O '17) | Coder Coacher - Coaching Coders</title><meta content="Building Beautiful, Interactive AMP Pages for E-Commerce &amp; Beyond (Google I/O '17) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/The-AMP-Channel/">The AMP Channel</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>Building Beautiful, Interactive AMP Pages for E-Commerce &amp; Beyond (Google I/O '17)</b></h2><h5 class="post__date">2017-05-19</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/bGry_GtKtQw" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">all right iOS my name is Kara and I am a
developer advocate at Google I have been
working on the UM project for the last
year and a half and today I would like
to show you how is possible to build
beautiful and interactive pages in amp
for e-commerce websites and even beyond
and today I'm gonna share this
presentation with others two speakers
please meet embarrass and William thanks
guys and by the end of this talk you
will get a clear idea of what it's
available for you in order to build
beautiful pages in amp the first of all
am stands for accelerated mobile pages
it's an open source project who aims to
deliver fast content on the web and it
builds on three core components and only
the combination of these three will give
you the superfast experience first of
all and is a set of HTML charts that you
have used in your page it comes from
some limitations like the amount of CSS
is is restricted and third-party
javascript is only allowed in - then
this the ants JavaScript libraries which
implement all the best performance
practices and manages resource loading
of the page aloft Lee does the arm cache
with Cassius and pages making them
faster and also buried a pages
so then you always get Valley Tom pagès
so when I was started he was limited in
what he could support them in fact he
was supporting primarily blogs and news
publishers but during the last years and
as introduced I suppose introduced new
components that make now is each other
ecommerce websites and we already had
some samples like 1-800 flowers from
Jalandhar and Aliexpress and actually we
we've seen a lot of adoption of amp from
retailers as the amp format matures so
today I'm going to show to you which as
the arm components available in order to
build those kind of pages and I'm going
to use two samples from the UM by
example website so if you have never
seen this website it contains the most
exhaustive set of some samples so all
the code the penguin app design today
can be fine can be found on this website
so let's jump to those sample sets and
in promising you just one note that
while I'm going to go through the
samples I'm just going to be focusing on
components that are relevant for the
e-commerce work let's start with a
product web page you may be more
familiar with the term product category
page but it's basically a page in which
is a user can learn when searching
something on the internet like fruits so
as you can see from the gifs we have
some promotions on top a list of items
and some recommendations and the user
can slide throughout them let us see the
promotions as you can see the images are
playing by themselves
and we implemented this by using the amp
carousel component so let's look at the
code so we have the arms carousels
components we are using type flight
which means you're gonna only gonna see
one image at a time and we are using the
auto play parameter which means that is
gonna this the images are gonna place by
themselves and then what about searching
thousand Ernestine an e-commerce website
without a proper search so we we managed
to implement except in in the product
web page by using the amp form extension
so if you look at the gist the user can
type up one click search and then a new
page with the results appear but the
unform extension allows you to use the
form and input tags so then you can
build such a search form the second
sample I want to show you is the product
page so as you can see from the jiff we
have some images on top we have
selections like color quantity size and
some more information at the bottom
let's start with the image gallery so
again here we use an arm carousel and
this time we wanted the users to be able
to block the swipe from left to right or
right to left so this is because that is
similar to the one that we just in
design without the autoplay parent
either and again using the type slide
just below the image we are these a
refinement section in which the user can
select the color the quantity and the
size you can implement a
select Suriname by using the arm
selector component which allows the
users to choose from a list of options
and this option are not only limited to
text they can also be images and what it
happens is basically once the users
choose an option the selected attributes
is going to be added and actually with
the unselected components you can even
realize a tabbed panel as you can see
from the gifs we realize a sub panel in
which the user can click on about pair
and size and the content changes so we
implemented this by using gum selector
together with a CSS trick so when I say
trick I mean that we have yum selector
we have three groups of dibs
each group contains two this one for the
button and one for the content we eyes
all the content are default and when the
user clicks on a button the content
which is immediately below the button is
going to be shown and you can also
implement a shopping cart in arms and
other this work really possible when I'm
first launched
so let's look what we achieved the Indus
sump'n so the user choose the color
quantity click Add to Cart and then a
new page showing the shopping cart
appears so again we use the arms form
component in here and as I said the UM
form extension allows you to use the
form and input task but I would like to
touch your attention on the client ID
variable so this variable allows to
create a unique identifier for the user
then you can use to identify the user
when you send the request to the server
and an alternative to
shopping carts you could on Chrome
you could also implement a Buy Now
button by using the payment request API
so I may have you may observe about
payment request API from other tools
here at i/o so basically they allow
requesting payment information that
actually from the browser
in this case you need to use an arm
iframe use the allow payment request
attribute and then all the logic for the
payment is going to be inside the iframe
and that's what's at the bottom of the
page you can add some recommendation for
the users and the best way to achieve
this is by using the arm please
components so unpleased
fetches fetches results from a course
jessalyn point and then shows them by
using a time place them so um supports a
set of templates and for these samples
we use sample massage and other I would
like to say that the unpleased always
they love you too to get the latest and
the freshest content to your page so in
distance in the samples that I just
showed them we also created some
advanced interactions these kind of
interactions were not really possible
when amp was launched so now we like to
show you some of them and at the end I'm
going to tell you how we implemented
those turn that so we have these a
thumbnail gallery together with the
image gallery so when you click on an
image from the thumbnail gallery they
image on the carousel updates and at the
same time when you click on an image
from the corrosion damage the
images get focused and notice that the
page is not reloading at all
we also been able to update dynamically
the carousel image by clicking on
different colors at the same time the
price just below the image is changing
when clicking on different colors and if
you remember the related product section
we also been able to add a show more
button which is gonna load more items
from the server fish and add them to the
page again without any doing any page
reloading at this point you may be
wondering are we achieved this kind of
interaction and we use the amp bind
components which at this point you may
have heard from other tools like the
empty notes but it's basically a new
component available under experiments in
the amp library which allows you to
create interactive pages and to tell you
more about this I would like to invite
William to the stage
thanks Guerra hi everyone my name is
will I'm a software engineer at Google
and I'll be going a bit more into detail
about this and bind thing that we've
been working on so first let's quickly
review the motivation behind the future
as Kyodai mentioned amp components like
amp carousel can offer rich
interactivity within the scope of a
single component but what if you wanted
to add custom stateful behaviors or
interactivity between amp components and
regular HTML elements in the non amp
world web developers would typically do
this with JavaScript
however part of amps consistently fast
speed is the restriction on just that so
what are our options one option is to
embed regular web pages containing
custom guests into an amp page via an
iframe but you'd lose the speed and
other benefits of amp when you do this
so that's not ideal or you could work
with our open source developer community
to build a brand new amp component on
github and for certain use cases this is
actually the right thing to do for
example building a tweet button for
sharing something on Twitter however
building a brand new M component takes a
non-trivial amount of work so it doesn't
scale particularly well if you have
multiple custom use cases or you can use
this cool new thing we built
specifically for this called am fine all
right well what is m5m bind is a new amp
component that supports custom
interactivity through data binding and
expressions don't worry if that sounds
complex it's actually fairly
straightforward and I'll explain exactly
what that means so you can think of
Empire as being composed of three main
parts JSON state data binding
and mutation of HTML elements if you've
dabbled in popular web app frameworks
like angular or react this may feel
familiar to you so the first part is
state which is just JSON data in your
document and vine includes a new sub
component called amp state which either
wraps local JSON in the Dom or fetches
it from a remote endpoint in this
example we have an amp State element
with the ID who wrapping an inline JSON
object containing a single key value
pair now data in am state elements can
be referenced by expressions for example
the expression food bar here would
evaluate to the string hello the second
part is binding or data binding a
binding is just a link between an HTML
element and an expression where the
expressions result sets the value of a
property on that element in this example
the paragraph elements text content is
found to of the expression food bar plus
spazz this means that whenever the
result of food up bar plus pads changes
the paragraph elements of text is set to
that result so again expressions in amp
bind can't refer to the state and
remember that the expression fragment
buddhabar evaluates this string hello
baz here is another variable that will
define soon the third and final part is
mutation here you can see a button with
a special on attribute it's part of the
amp action system which allows users to
add simple event-driven behaviors such
as do something on a button tab so
antlion
adds a new action called amp dot set
state which updates the state with an
object literal here we're updating the
state with the key or variable Baz
so put together here's our hello world
example for Anne pine quickly starting
from the top we have our state
initialized with the amp state component
a paragraph element with a text binding
and when we update the state via amp set
state the expressions result changes
which mutates the paragraph elements
found text property the expression is
futa Bar which is hello concatenated
with baz which is world so tapping the
button makes the paragraph element say
hello world so returns our apple example
it uses an bind to achieve the page
reactivity shown here again each color
of Apple has a different price and size
availability which is updated on the
page upon user selection so I'll just
very quickly go over how this example
works in the context of state binding
and mutation in M bind and don't worry
if you don't catch every piece of code
here it's all available online with
documentation at anti example comm first
is state we initialize the state with
data about our apples including price
and size for each color of Apple next is
binding we bind the text of the price
label to an expression that looks up the
price of the selected color apple in our
product data note the selected color
variable in particular and finally
mutation we change the selected color
variable via am set state now the color
picker uses the amp selected component
we saw a key at a demo earlier where
each selectable element has an option
attribute we can reference those option
values in the select event of am
selector to set the selected color
variable
so the code snippets shown on these
slides were simplified a bit to fit the
full code for this example again is on
my example comm there's a short length
there for this specific example and by
example also has many other samples of
cool practical usages of ant so one part
we haven't talked much about yet our
expressions what are they how do they
work well you can think of it basically
as JavaScript syntax with a few caveats
to keep things fast and safe kind of
like how amp is HTML with some caveats
for speed and reliability in amp spirit
of ensuring class performance we've made
sure that using an bind on your pages
won't cause jank one way we achieve that
is by adding concurrency through web
workers so heavyweight tasks like
expression parsing and validation are
performed on a dedicated worker this
avoids blocking the main thread ensuring
a smooth user experience on pages that
use and bind another cool thing is that
it's turing-complete so turing
completeness is an academic measurement
of expressiveness of a programming
language
here's a Turing machine that counts in
binary using an find the line of great
bubbles is the tape of the Turing
machine the color bubble is the current
position of the tape head and the step
button is the crank that runs it we
built this demo in part for fun and in
part as an exercise to see how powerful
and fine actually is that being said I
don't recommend actually building Turing
machine simulators on your amp pages but
for interest sake it works by encoding
the state of a turing machine in an amp
state element along with instructions
for advancing the tape head and writing
to the tape at any given state of the
machine and actually running the machine
again is done by amp dot set state
and the step button so hopefully this
shows you that an bind is quite robust
in practice and theory so here are some
more technical details I won't run
through every single one of these one
important thing to note is that we don't
evaluate expressions at page load in
fact and bine only executes in response
to direct user action this makes sure
that we won't affect load latency of
pages and it avoids unexpected content
jumping the gist of this slide is to say
that we field and bind with the
principles of amp in mind that is it
should be fast safe and easy to use n
pine is available today as an amp
experiment and slated to launch soon
we're working on making it more useful
and adding more documentation and
samples and it's pretty close to being
production ready but we'd appreciate any
feedback you guys might have just want
to make sure that it fits your use cases
whether or not you find it intuitive
just really want to ensure that am bind
is practical and useful for you guys
we've also written a new close-up or i/o
called advanced interactivity in amp it
goes over some more of the advanced use
uses of amp pine focusing on the
e-commerce use case in particular please
check it out so many merchants that are
already started experimenting with amp
blind in their pages here a couple
implementations from aliexpress and we
go all the express in particular uses
and bind in their product detail page in
a similar pattern to the Apple example
we saw earlier with dynamic prices and
available quantities depending on the
user selected SKU next we'll hear from
make a from Mincha calm on their
experience with amp and and fine
Thanks well I think first of all
congratulations I think you guys have
survived I owe or almost I've just
arrived I owe you can survive the next
ten minutes of my talk but I think it
will be well worth it because I'll talk
to you about how we did an bind
implementation in less than a week
actually we did it in six days and had
the seventh day for risk as well so
let's talk about it so before I go into
it I do want to sort of talk about the
fact you know just a little bit about
Mincy so that you know this is actually
in production in a really large scale
company in India so who are we
Myntra is a is the largest online
fashion player in India it's actually
bigger than the largest offline player
in India it's you know these numbers
actually are slightly old I'm showing
some fresh safe numbers here but we are
larger than this at this point 18
million monthly active users 50 million
page views a day five million sessions a
day more than a billion dollars revenue
run rate so this is done for a at scale
company in production what you're going
to see next so let's talk about our
journey through am buying so the real
problem that we had why we sort of went
looking for it was that a lot of traffic
for us comes on these lifts pages you
know I'm sure you have the same thing
where folks click on something I'm
looking for Nike shoes or something else
and I land up on this list page which
has a list of products now these pages
were loading for us in seven seconds and
that this was a long time and we had a
bounce rate of 30% which as you can see
is killing a lot of our business so and
as you know you know if if you reduce
the time if you reduce page load you
know our estimators and we've looked at
some of the studies here if you reduce
the page load by a second you know
you'll get perhaps 11 percent more page
views on an average if you say people
are happy or unhappy you see 16 percent
better satisfaction and probably 7 to 8
percent more you know fewer conversion
if you have you know one second of page
load delay and India as you know in a 95
percent of the Internet is mobile you
know really even though
we have desktop 90% of our actually
revenues are from mobile and the data
speeds even though they're increasing
very very fast a lot of users are still
on less than 3G speed which means that
we have to overcome the bandwidth hurdle
also through an bind kind of
technologies so let's talk about how we
did it
so de 0 you know this is our product
manager on it and the engineer widget
you're just thinking you know Can Am be
dynamic enough because amp really was as
you guys know supposed to be for static
pages for content pages that were
loading and the second question was you
know the product manager why he has his
hand on the head there is that he's got
like 20 thousand other priorities and
he's trying to figure out how much time
this is going to take but I think a man
came to the rescue and here's a sort of
Bay by day journey on how it is and this
is actually how it played out in fact on
day one we were talking to honoureth and
Eric and folks you know at Google and
saying you know can we even do it they
said no read the documentation this will
be actually in less than a week so day
one we read the documentation built a
very simple proof of concept actually
everything starts with the hello world
kind of things that we build a quick
proof of concept that worked out and we
said okay we can actually do this thing
day two we did you know amplest call to
load results but as with any project we
just hit this hurdle that these pages
were slow to load because Ajax on the
client side was not as as quick so we
did server side rendering the page was
less than 14 kilobytes and it sort of
downloaded pretty fast so we crossed
that hurdle day three this is where the
real sort of interactivity came in where
we had search and sort and some dynamic
elements on the page and we had those
working and we'll show some of that very
soon now am bind at that point and even
it was experimental but as we tried this
out it actually worked
fairly seamlessly for us so that again
boosted our confidence therefore now
this is where sort of we start polishing
it we've got sort of a good good thing
running and we started polishing
polishing the UX and as we'll show sort
of in a side-by-side video you couldn't
actually distinguish the amp version
from the non amp version once you
started looking at
they five you know this is unfortunate
to the reality the as you guys all know
analytics comes late we think about it
early but it starts coming late for us
all so that's what happened we started
looking at analytics added that in and
then the other interesting thing is you
know I don't know if you've heard of amp
accordions but you know we've got this
side navigation bar on our mmm web and
we use the amp accordion to create those
and I will show you a little bit of code
on that and the last thing you know we
added some transitions for filters and
we are done and like I said the seventh
day we had the product manager and the
and the engineer there so let me show
you a quick demo you know off you know
it would stuff to set up a demo here
where we shot a video back there a few
days back of how ambient works with our
also what you see I think you'll see on
your left hand side you will see the old
page loading on the right hand side
you'll see amp loading you'll have to
pay attention because am just going to
load before you blink your eye ready as
well once the video loads so that right
side is where you know we've got amp
reserves loading done still waiting for
my old stuff to load and this is
optimized and yet sort of I think it
took a long time it is actually that
fast you know when we showed people they
were just surprised how quick it was to
load side recommend you guys try it out
it's actually pretty cool thank you
thank you to you guys
so this is like I'll go through quickly
with the code I think you guys could
sort of go in and look at the code but I
think we'll talked about the amps that
state so this is exactly you know we'll
talk about the PUC on the hello world
and now this is how sort of it really
worked in the real world where we set
the state for saying okay you know but
when somebody hits the search button you
go to the show search div and and it
goes there and we can show the search
element there similarly for the sort
down there we hit the sort and it shows
the sort div and then we have the amp
accordion we talked about so we have
this side navigation bar which in this
part of the code for the amp accordion
so you could sort of create a side
navigation bar in amp so that's how you
sort of do dynamic pages in amp so it's
pretty cool that you know amp was great
because it was sort of loading of static
pages very fast but now you can do
dynamic pages in a cool way so so that
worked out very well for us now what's
next I think every time you do something
you're looking at what what you're going
to do next how you're going to improve
now we keep pushing the Google folks and
I think they keep pushing us and we'll
sort of build most stuff around this but
but a few things that we are thinking
next is you know how do we modify the
amp list so that we can avoid
you know page loads on sort as well as
pagination so that we have the next set
of items sitting there and we can point
the amplicor s' to those items am
serviceworkers that's interesting and it
starts working like a PWA where we can
launch the next non amp page content
using amp service workers and I think
this last point I want to expand on a
little bit I think a lot of times we
think about whether you want to do P W
or a and P and when we started off we
thought we were going to do PW a because
there was a lot of sort of noise around
saying you know you should do PW
everybody should do PW a and we talked
to uh Nebraska Direct bunch of other
folks and they said what is your real
problem and our real problem was the
list pages weren't loading and there was
a big bounce rate on those and I
remember that call where we were told
hey you know what guys think about it
you want to load this page fast and
amperes great for that once people have
loaded that page now you want to bring
in PW a so that you can create an
experience that is more apt like and the
next set of pages loads well
I think it's not amp or PW especially
with amp bind and this becoming dynamic
you could do both amp and PW it together
and that actually brings in a great set
of technologies to build amazing
webpages so that's sort of our story on
how we did this like to invite villain
Chiara back onstage to close the stock
thank you thanks ok so beyond the
e-commerce use cases we've highlighted
today what else can you do with Empire
well abstractly M bind is adds a layer
of dynamic ability on top of your
existing M components and as we've seen
you can use am going to add
interactivity to regular HTML elements
so I think the possibilities really are
only found by your imagination sorry but
we're excited for all of you to try it
out and see what you can come up with
and really before you go we would like
to leave you with some useful links
about things we talked about today so
that's the UM project that's all which
you can find all the documentation from
amp all the samples that we've been
using our own amp by example.com
and you can also find the documentation
for unbind and then since is the last
talk of the day I can't really tell you
come and talk with us in the sandbox
sandbox area so if you do have any
questions you can use the developer
support and lastly there are some very
awesome arms videos on the amp YouTube
channel so
thank you very much for your attention</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>