<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Progressive Web AMPs: the Story so Far (AMP Conf 2018) | Coder Coacher - Coaching Coders</title><meta content="Progressive Web AMPs: the Story so Far (AMP Conf 2018) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/The-AMP-Channel/">The AMP Channel</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Progressive Web AMPs: the Story so Far (AMP Conf 2018)</b></h2><h5 class="post__date">2018-02-13</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/0BxYYMNit7M" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so my name is Eric as we mentioned and
I'm gonna be joined by some other folks
here to talk about progressive web amps
exciting pattern that we're seeing more
and more of and I'm excited to tell you
about so here is a modern website that
you see up here it is fast its
well-designed its interactive and
engaging all the things that a modern
website should be and in fact it's very
engaging users spend 40 percent more
time on this premium site than compared
to the sort of free equivalent on the
same domain and it's also made with amp
and PWA which means that users are
spending 40 percent more time aand on
the PWA a name combination than the sort
of standard HTML combination it's hard
to ascribe exactly what percentage
you're getting from the different
content or whether it's the
implementation or the type of content on
there but this sort of PWA and amp
combination this type of engagement
boost is it's exactly what you'd expect
from progressive web apps and amp
combined this kind of boost so so you're
going back a little we introduced a lot
of folks to the idea of combining PWA
and amp last year at amp comp and since
then the idea has matured quite a bit
there have been challenges for this
combination these are some of the bugs
we've worked through some of the ones we
still have to work through but it's been
worth it for a handful of developers who
have actually implemented these patterns
in the wild so let's review a little bit
for folks who aren't actually all that
familiar with what these these things
are hopefully you have an idea of what
amp is but I can give you a little bit
more background on what the combo is and
what PWA is as well so to summarize the
basics of what amp gets you
it's basically a turnkey format
for fast loading pages with some really
great UI out of the box or UX out of box
that's kind of the core value of amp
so it's PWA well there are a few more
moving parts to PWA progressive web apps
if you imagine two axes for the X that
would define the experience on mobile
devices on one hand you might have reach
how many surfaces can your content show
up on and on the other hand you might
have capabilities what's the experience
that the users get when they land there
well the mobile web has always done
really well with reach I can work across
platforms on mobile desktop tablet it
can be embedded and easily shared and
also found via distribution platforms
but they haven't historically had the
capabilities of native apps which are
very strong than the capability side but
often are sort of locked in and these
experiences that don't have as far reach
you have to go you have to download
these things
well PWA sits in a position where it
combines the best of both worlds the
capabilities of native apps with the
reach of the mobile web where those
capabilities boil down to a number of
advanced platform features like Add to
Home screen push notifications caching
abilities that make it possible for
repeat visits to load quickly and then
also better reliability and offline
experiences better reliability and
limited connectivity situations and the
ability to have a completely offline
experience and ultimately it's important
to remember when explaining these two
technologies that in the end we're
really just talking about web pages that
there's not there's some special things
that come from it but in the end it's
the the web pages that you know and love
just with some extra kind of special
sauce on it and that these two
technologies are just complementary ways
of achieving different goals they each
have their own strengths
and some weaknesses as well but it
should be no surprise from the title of
this talk when they're combined you get
to enjoy the benefits of each and they
do combine well and in the end you get a
feature-rich experience that starts fast
and stays fast kind of the best of both
worlds all right
so it hasn't always been in as great a
stated as it is as it is today
this combination of bringing amp
together with PWA and there are a few
reasons for that historically there have
been kind of these three main issues
first the ecosystem we don't yet have an
ecosystem of tools and templates and
services the kind of things that would
help folks the web of course has been
around for a minute but the combo amp
and PWA are relatively new to the web
the combo is very very new and so we
don't have everything that you might
need quite yet however in the same way
that amps start which you might have
seen in slides earlier today provides a
good starting place for folks getting
started with amp with tools and
templates we also envision having
similar tools and templates for amp and
PWA and that's something that we're
starting to work on as well
second templates are well and good if
you have complete control of your own
site the ability to just take these
templates wholesale or implement things
directly and just sort of throw them up
on your site but not everyone has the
flexibility to do this folks are
anchored in specific technologies that
they're built on CMS's and that kind of
thing so it's not the reality for a lot
of folks which is why we're also working
with CMS's and other platforms to bring
a lot of these capabilities directly to
them so if you saw the presentation
earlier today the WordPress presentation
that's great if you haven't I encourage
you to go check out the video of that
too
a bit more of what we're doing there but
again basically just want to make these
technologies available to a lot more
folks so another key piece of the
problems that we've experienced with amp
and PW a combination is that when you
combine two technologies you're bound to
have to iron out some of the kinks of an
integration so a number of things didn't
work quite right in shadow Dom here are
some closed bugs that we eventually kind
of fixed a lot of these didn't work at
first but it sort of went through them
and there's still more to do
there there edge cases that you run into
when you combine these things and it's
important that we're sort of upfront
that there are challenges but even if
most folks are in a pretty good state
right now as it is so finally one thing
that was really lacking in the ecosystem
was guidance if you've looked at our
Docs and been a little bit confused as
all mentioned he was you're not alone
it's great to have options to choose
from but one piece of feedback we've
gotten repeatedly is not what can we do
what are a bunch of options that we
could potentially do to combine amp and
PWA but what should we do what do you
recommend have been more familiar with
these technologies so we've done a
little bit of thinking about what a
well-lit path for amp and PWA would look
like and I'm gonna proceed through a
little bit of high-level general
guidance that we think offers the
highest ROI per step as you go through
some of the options for for how to
combine these technologies and before I
get into the detailed recommendation I
do want to add one thing if you have amp
pages if you're publishing amp pages and
if you also have a PWA it doesn't matter
what it what it's built on I it could be
you know an amp based PWA it could be
completely independent one thing that
you should be doing if you're using a
service worker in your PWA is using an
amp install service worker on your amp
page
to install to warm up the service worker
in the background so when folks land on
your PW a from your n page they're
getting this experience that's already
warmed up
so yeah basically do that thank us later
it's pretty trivial to do so yeah highly
recommended another kind of side note
before I jump into the main
recommendation is that you know your
business what I'm going to present is a
sort of general recommendation for folks
that we think will work in most
situations but there may be different
pieces different functionalities
different ways of doing things that as
the person who knows the most about your
business you might identify and say like
I think we would do this a little bit
out of order I think you know push
notifications aren't super valuable for
us but like an offline experience is
because most of our users are accessing
content offline and you should remember
that as we sort of walk through this but
without further ado the high level
recommendation is to build your site
with amp and yeah that's sort of big
step one and then step two is to
progressively enhance with PWA and this
is a sort of sequence do one and then do
two and step one breaks down into a
couple things when you're building your
site with amp the biggest benefit that
you're gonna get from amp is on your
sort of entry points entry points being
where you get the biggest speed benefit
where distribution platforms can do
clever things to get additional speed
benefit and these pages are essentially
articles product pages learn more these
sort of entry points that people land on
from search social sharing those types
of distribution platforms and so once
you've done that basically build the
rest of your site with a framework of
your choice this could be an existing
framework out there it could even be
with amp if your site is supported with
the features that you really need in an
that's fantastic and we obviously think
that
speed benefit you get from that is
really really worth doing but it could
also be vanilla Jas there are a whole
lot of options for how to how to do the
rest of your site like these more
advanced checkout pages that type of
thing so then once you build your site
with am progressively enhancing with PWA
is is the sort of next step and this
breaks down into a few different things
again this is a kind of general sequence
and again you may want to do some out of
order based on what your needs are what
your business's needs are but here we go
so step one would be basic caching to
load up to speed up the load time for
pages and it could include for instance
caching third-party resources and that
type of thing with the serviceworker and
i brought up the serviceworker a couple
times with no context i don't want to
get too deep into this because folks
we've presented about this before and I
don't want to reiterate for folks too
much there's some documentation online
but basically it's a client-side proxy
that can intercept calls from the client
and served for instance cash content
instead of going all the way to a web
server and and doing that run trip and
it also incidentally is what supports
push notifications which is essentially
the next step in the sequence for most
votes though it's worth pausing on a key
aspect of push notifications that this
is often not done like really tactfully
in the wild for instance if I were
meeting you and shaking your hand for
the first time and I said like by the
way can you help me move this weekend
that'd be like you you might want to
know me better before like making such a
commitment similarly a lot of people's
first time on a site they get a sort of
notification that's like hey do you want
push notifications do you want us to
like tell you anytime there's something
new and it's like oh I don't really know
you yet like maybe I'll check out the
website more and then then make a
decision
better ways to do this include asking
when users have more context for what
push notifications might mean for a
given site and maybe even after they've
they've indicated a specific user intent
or even checked a box while going
through a checkout flow or something
like that but yeah Wednes respectfully
done this can be like a really valuable
thing for publishers and users and
merchants so for some developers you're
actually done at this point the rest of
the features in this sort of box here
are really to optimize for users who are
returning to the site again and again
kind of frequently let's say daily users
due to the amount of effort that it
takes to do the following things as well
so but if you do want to take that steps
if your users are engaging on a more
daily basis you can add an app shell
which manages navigation and and page
transitions implemented via
serviceworker or cookies and you can use
what we call an aunt in PWA pattern
where an is the content and sort of a
PWA shell where potentially just a
standalone PWA the next step that we'd
recommend is adding offline support
either full or selective offline
functionality and access to content and
then and only then after doing these
things
adding the app manifest to trigger that
add to homescreen prompt so here's the
manifest just a brief aside to sort of
talk about this the manifest among other
things describes how your page should
look when installed from a devices home
screen and when you have the
serviceworker and the manifest that
makes your page eligible to get this
nice add to home screen button and
really have that more of that app like
functionality that folks can tap on and
open the app the thing is when folks can
just tap on this thing in any situation
they they might be offline they might
have limited connectivity and it'd be
nice if
weren't just greeted by a blank screen
or something like that and so that's why
this sort of manifest step comes at the
end of these things that you'd really
want your users to have a good
experience when they open this even if
they're in context where you wouldn't
really they wouldn't really expect that
they need web connectivity potentially
so that's it these sort of stats are our
current idea general recommendation for
how to get the best out of combining amp
and PWA a little more on the rails
general guidance the I really hope is
helpful to folks but you may ask how do
we actually know that this works this is
good that even the combination of amp
and PWA itself is worthwhile and worth
doing well I'm excited to invite some
folks who are creating amp and PWA
combinations in the wild
so please welcome Madison miner from
womp Mobile thank you for the
introduction Eric my name is Madison I'm
with womp mobile first a little bit
about our company's history we started
in 2010 with the goal of helping other
businesses optimize their websites for
mobile and we've been through a few
different iterations at first we were
building MDOT sites which had some
problems being served from a different
domain later we switched to making
JavaScript adaptive sites which was a
big step forward in 2015 we Dovan
headfirst into amp when we first heard
about am a google led initiative to
speed up the mobile web and solve mobile
performance we got really excited mobile
speed and performance has always been
one of our core goals and an opportunity
to guarantee it and validate it with a
Google product was a right up our alley
so we'd OVA in headfirst in the amp and
it's been a success today our platform
serves five million ecommerce amps every
day for some of the largest companies in
the world our our amps thanks to
aunt Biden amp lists and other amp
components have feature parity with
their canonical counterparts they're
fully featured amps that look and feel
just like the canonical site the only
difference is they're faster which
everyone loves our clients love their
customers love and they see the benefits
we've started experimenting with some of
the technologies under the PWA umbrella
including service workers and manifest
and push notifications payment requests
but we hadn't really discovered how to
work the app shell into our platform
until I saw Paul's presentation last
year at i/o where he showed off the new
PWA plus amp pattern or plant
progressive web amps and when we saw
this we got really excited we actually
started engineering later this day after
the talk
building PWA and app shell and using
this pattern in our platform as Eric
kind of showed this is this is how it
works
the PWA app shell is comprised of the
header and menu user interface elements
the app shell can also have complex
JavaScript that you might need that's
not amp compatible maybe you have some
complex analytics or website monitoring
or chat or payment requests that can be
loaded in the app shell and only loaded
once per user visit and as Malte said
earlier amps are portable content units
they can be cached they can be served
via the serviceworker they're
lightweight there are standalone units
that we can load into the app shell as
usually navigates the site keeping a
persistent header and menu and having
nice smooth transitions to make it feel
very app like the user journey plays out
a bit like this they do a search for
something that you'll show up for the
amp are the listing in the search
results page has the amp lightning bolt
badge before the user even clicks on the
result Google is pre loading the amp
page in the background which is the
benefit you can only get
amp pages when the user taps on the amp
listing it loads instantly while the
users viewing the amp page we're using
the install service worker component to
install the PWA the app shell and the
associated components in the background
so when they click on the next link in
the user journey the PWA loads instantly
and shows the next amp page that's
associated with the clip the user can
continue to navigate the site and we
load in amp pages as they do when we go
to checkout we can have the rich
functionality have a payment request
after they've done their finished
checking out we can prompt them to add
the app to the home screen this video is
showing showing how that plays out in
real time is for our client carp that
I'll be showcasing throughout this
presentation they make these really cool
wooden phone cases wooden folk case is
their top search term when you do a
search you'll see the amp listing it'll
load instantly lightning bolt badge
we've measured increases click-through
rate about 25 to 30 percent during the
amp page now the PWA is being loaded in
the background now they're in the PWA
loaded instantly the header menu is
persistent as they navigate the site
another amp page loads in allow them to
check out with just a few clicks
and then they're prompted to add the app
to the home screen that whole video is
20 seconds long starts with search goes
through checkout that's real time that's
how long it takes however it always been
hasn't always been easy during this
process we've encountered a few
challenges and learned a few things I'm
going to share some of those with you
today first is how do we display non amp
pages in the app shell how can we
prefetch amp pages and how can we reduce
duplicate wean our mobile website or app
shell and our amp pages
so first is loading non amp pages this
example here you can see it's it's a
complex app I've uploaded or selected a
map of Amsterdam you can resize the map
you can position it you can choose the
type of wood you'd like it laser
engraved into it's a complex JavaScript
rich custom made app that uses canvas to
allow the user to customize their phone
case probably not the best application
for amp might be possible you can do
some pretty cool things in amp but it's
pretty complex and uses canvas most of
our clients have a few pages like this
that use allow for rich customization or
have interactive charts or have other
components that are going to be
difficult to convert to amp we wanted
these pages to load into the app shell
smoothly feel like as part of the
experience we didn't want it to be
separate so our challenge was how do we
load non-m pages in the app she'll
discover three options using the shadow
Dom good old trusty iframe and HTML
imports shadow Dom was the obvious first
choice
that's how amp pages are loaded into the
app shell and this works this is
actually we have this working in
production but there's a few things to
be aware of the first is the window dot
onload event only fires once when you
load the app shell it does not fire
again
when you load child pages into your
shadow Dom so if you have scripts in
your child page there
depending on the onload function to fire
to execute some code you have to find
another way to fire that code Mex is
document outright if any of the scripts
that you're in your child document use
document dot write that's gonna
overwrite your app shell which is
obviously very bad we worked around this
by overriding the document dot write
function which is the fairly common hack
that a fair amount of libraries do it
works pretty well
next is any references to document dot
body or head in your child document are
going to reference the head and body of
your app shell which is not the end of
the world the most common artifact of
this is that scripts add other scripts
to the document and so your app shell
ends up with extra scripts in it that
are meant to execute against the child
document these scripts can do what they
need to do they can still find what they
need to find it works ok what we've done
to work around this is we've marked
everything we want to keep in our app
shell with a specific class then when we
navigate away from a non amp page we
delete everything in the app shell that
doesn't have our class to keep our app
shell for being littered with scripts
and other components that might have
been added by the child document so
again there's a few things to keep in
mind but this does work we have this
working live in production
next is the iframe iframe is a handy
tool that should be in every amp
developers toolbox this also works we
have this working in production a couple
things to keep in mind the document that
you're loading into your app show might
already have a header and a menu present
you don't want to display this twice
since it's part of your app shell it can
be difficult to hide this with CSS and
typically when you load a document into
an iframe you just set the source
attribute and then the document streams
in so you don't really have an
opportunity to remove the duplicate
header what we've done to solve this
problem we simply mask the iframe we
wait for the document to finish
streaming in we remove the header in the
menu and then we show the iframe we lose
a few milliseconds on our first paint
with this but these are non amp pages
that aren't the fastest pages anyway we
only do this for complex heavy pages so
in actuality the difference in page load
time is trivial you can solve that by
removing the head and met our header and
menu and then loading it in line using
the source dock attribute the challenge
with that is that any scripts that run
inside the child document inside the
iframe will see its origin is about
blank which can be very problematic for
analytics and other scripts that make
use of the origin another challenge with
this that we have yet to overcome is if
there's a script that sets the document
location to another origin it will load
inside the iframe for example if there's
a script that's loaded inside of your
iframe that directs to google.com buggle
will load inside of your iframe in your
app shell which is obviously undesirable
if it's a click that instigates the
navigation you can intercept that or if
it's a JavaScript navigation to the same
origin you can intercept that but if it
is a redirect to another origin we have
not yet found a way to make sure that
page loads fullscreen not in the iframe
so that's something we're still working
on the third is HTML imports it's a less
known element it is designed to load one
document into another document so at
first this seemed perfect however it
does have some of the same challenges as
the shadow root namely windowed on load
doesn't fire and head and body will
reference the parent document also it
doesn't work in iOS so this was sort of
a deal breaker on that one out of the
three potential solutions this is the
only one we're not using in production
so what are some of the challenges what
are some of the fun things you can do we
found a way to make our app shell see
the future and download the amp page
that you're likely to click on before
you click on it
what we're doing here I'll show in a
second is when we scroll a link into the
viewport we are adding prefetch link tag
to the app shell which will tell the
browser to download the amp page before
the user clicks on it the cool thing
about using a prefetch link tag is the
browser will look at how much resources
are available
is there enough battery is there enough
network is it a good time to prefetch an
asset if it is the browser will download
it if not it won't though the reason we
thought this was kind of cool is
normally when we've used prefetch tags
we put them at the top of the document
and we prefetch whatever we want to do
we weren't sure if adding them at
runtime due to a user action would have
the desired effect turns out it works
great so we thought that was pretty cool
and we're sharing so hit play will
scroll some links into the viewport in
the bottom right we can see console that
pre fetch links are being added to the
document and then the upper right will
see the amp pages are being downloaded
an additional benefit of this technique
is that if you're using a serviceworker
and then you lose Internet access the
user can continue to click on any links
that they'd scroll past and they'll
still load even without internet access
and they haven't viewed the page before
the code to make this happen is pretty
simple we're using an intersection
observer to monitor all the links on the
page as soon as the link is more than
50% into the viewport we'll check to see
if we have an amp version of this page
we do not pre fetch non amp pages
because they are not as friendly
portable content units and then we add
the prefetch link tag
so now we have a progressive web amp
that can load non amp documents into the
app shell when I'm required and I can
see the future and prefetch amp pages
how do we make it easy to update
challenge we ran into is that with amp
pages you can use amp components for
rich functionality like showing the menu
and showing accordions with the PWA app
shell you can't use M components you
have to use JavaScript we tried to use
the amp runtime and the amp shadow
runtime which is used to load and
documents into the shadow Dom both in
the same document those two libraries
collided and we had a bunch of trouble
with that so we can't use have
components in the app shell and we can't
use javascript and amp pages so it's a
bit of a problem because we need to make
changes we have to update it two places
which is cumbersome which might be
what's required if you have rich one one
case we've ran into is if you have a
search bar that does autocomplete or
something like that it can be pretty
tough to do that without JavaScript but
if you can get away from that what we've
done is start building our App shells
header menu with no JavaScript at all
we're using the check box hack which you
guys might be familiar with the idea is
that you have a label that's associated
with the check box you click the label
stay at the check box Changes and then
you have some CSS that will hide or show
some components on the page based on the
state of the check box so it works
really well to hide or show a menu or
for accordions and if you can reduce the
functionality for a header and menu
enough to where that's all that's
required you can get away from having
two separate versions so you can have
one version of your header menu that's
used boasted in your amp pages when
they're shown in Google search and also
in your PWA
that loads your amp pages
that's header and menu a nice thing
about this technique is we also no
longer have to maintain the mobile
website there might be a couple pages on
the mobile website we need to maintain
if they're not amp compatible but this
is an easy way to move to canonical amp
this allows you to check to see if
there's an amp version available and
load it which reduces the maintenance on
your standard website since it's now
just amp previously before we start a
building progressive web apps we'd have
the standard mobile website and then the
amps that we're showing in Google search
we had a design change we need to make
it two places now that we're using the
amp pages everywhere it's reduced our
maintenance so the last couple years
we've had the same recurring question
come from our clients or complaint come
from our clients and that is they see
the majority of their traffic's on
mobile Mobile is the biggest growth
opportunity but the majority of their
sales are coming from desktop and
there's a conversion rate Delta between
the two platforms and it's been our goal
to close that Delta and for the first
time ever with progressive Web Apps
we're seeing conversion rates that
finally rival the desktop and it's no
surprise it's a it's a great solution
has everything you'd want has all the
benefits of a native app has all been
with the discoverability and all the
benefits of a mobile website the
payments are easy you can now tap the
home screen it can open full screen it
can run offline it's super fast
awesome transitions it really has
everything you could want in a mobile
experience when we launched this
progressive web amp for our client car
which I encourage you guys to check out
carve calm it's probably the fastest
ecommerce mobile website you've ever
seen we did a two-month AP test where we
directed half of the mobile traffic to
the new progressive web app and the
other half the mobile traffic to they're
really nice already responsive Magento
mobile site and the results were pretty
impressive
we saw improvements across the board
an engagement pages per visit time per
visit and the most important metric
conversion rate went up 75% which is
bringing it close to where the desktop
conversion rate is so it's been a fun
ride thank you guys very much
no I'll head over to JVM
yeah Thank You Paula Malta for having us
here cm conference in Amsterdam so we
are from young format we are we are the
second largest independent agency in
Germany and we are proud to be over 25
years old but even prouder of all the
projects with it already so check out
our short for real
yes that's me I'm Thomas I'm one of the
managing director at young vomit in
Hamburg and I like single speed bikes
and road bikes and also the album web
but today I want to talk about how we
have built a new BMW com
so what a nice challenge that was my
thought after the client quarters so
here at the m conference we want to show
how we have built the new BMW comm the
job was to relaunch the BMW comm website
completely from the bottom as a new new
digital home for the brand so there's a
long project history but finally we made
some bold decisions
focusing on a new platform with three
goals make it content driven
high-performance and highly innovative
so our first goal was conceptional so we
wanted to create a website that is user
and content focused content that pulls
you in from search social and the open
web saw the right content for every for
every user
so both Jesus guides the user deep into
the into the website and content and
spoiler we invented the first M story
module without the story component so
but the number one goal was really to
make the website really really fast and
I'm really proud of this goal because
after 20 years of fighting for it on
every project it was the first time that
it was the number one goal so following
BMW latest claim sheer driving pleasure
we would like to say speed matters more
for sheer surfing pleasure so nothing is
more annoying that a slow and web ads
and a slow web
mobile experience and speed also matters
in the sales funnel so you definitely
want raise awareness with a slow website
the next main issue was innovation so
but innovation that not does not always
mean to do big things for us the goal
was to bring the app user experience to
the mobile web
so everything was the Sun and the next
article only his wive away so as we
started to think about the project we
thought we need three code bases because
the mobile and the responsive behavior
was so different and we definitely want
em for the first search access so we did
some deep dives into frameworks check
out other for sites like The Guardian
and the deep dives into the M component
world and found a great set of
components but with strict rules
regarding third party our script and the
50k CSS limit so at this stage of the
project we did not think about using em
as our own search framework and in that
time period
I saw miter talking about a mix of amp
and progressive web app in Hamburg and
we figured out to met Paul in Berlin and
he is talking about pushing these
boundaries easily or the P is already
missing but its meaning its amp and PD
Abu a so we've talked to Paul about this
combination and how we built the
canonical amp set the connection with
the progressive web app is what pair
will show you next
hi everyone oh it's my Khan yeah okay
perfect
I'm Pia senior developer on the team
that built the all-new BMW comm content
marketing platform and I'm really into
electric mobility as you can see here so
our first goal was to create a fast
entry point so we decided to use amp as
our canonical URL every first-time
visitor regardless if a if he is a
search visitor or has had a link share
to him
will always see the impression and we
use apps installed serviceworker the amp
install serviceworker element to
bootstrap our pwho as the user is
initially visiting our site after that
we can deliver with the next click or a
reload or for returning visitor our
tailor-made experience for desktop and
mobile where we provide a custom scroll
or swipe navigation and dynamic loading
behavior so this is what you see when
you load our pwho it's a reduced set of
markup that use very similar techniques
to what one mobile did to provide a
JavaScript free entry into for our
header we also deliver our JavaScript to
bootstrap the application loader which
means that the amp shell you're seeing
is not actually valid amp whereas our
stage here the bolt media component
that's supposed to draw the user into
the article actually is developed and
document it's a partial from our
canonical M document which uses the amp
shadow dock API in combination with the
article with the article body to form
our ballot amp document which is
delivered to the first-time visitor
what we are trying to do is we only want
to load the part of the page that I
actually needed to save bandwidth and
resources for the user as he continues
through the content and the next stage
becomes visible we're using the amp
shadow dock API set visibility state
visible to trigger content initiate
initialization for our next stage so
that we can draw the user seamlessly
into more articles and remove the
friction during transitions from content
to content and improve our content
discovery so you might ask is that F
everything our PW HL is good for and
spoiler alert yes it is so let me show
you why we took this approach you might
remember the sales funnel that Thomas
already showed you and in in the
beginning we thought amp was only good
for the the entry for the content
discovery research and social media but
as it turned out we were we thought we
had to fire up our pwho to provide all
the engaging features like social
sharing parallax scrolling sliders all
the enjoyable stuff but as it turned out
perfect we were able to push the limits
of amp in the amp shadowdog API and
include more and more features and at
the same time we pushed the empty in by
providing a lot of back reports so that
they they could make everything work so
for us during the process of development
the amp frame framework really evolved
we were able to integrate almost all the
features we initially thought had to be
developed into the PWA shell into our
core amp document which is loaded which
is loaded as split up stage and
your body so this means we could use one
single codebase we don't have to develop
the two different versions that we
actually did for the pitch we were able
to develop one article save a lot of
resources because we don't have that
much duplicate code to maintain and we
don't have to to implement the basic amp
features like the loading behavior we
were able to just add the custom code we
need it for our loading and sprawling
behavior and slide content discovery
with the PWA so the speed of the amp
project moving forward was really one of
the benefits of the project but the of
course a lot more actually the amp
components basically gave us the rocket
fuel we needed to concentrate on user
experience instead of rebuilding all the
coal loading mechanics for multiple
versions of the site another benefit was
that we were able to combine multiple
pre-existing amp components like an
image and video and animation and amp
position observer to create our bold
immersive stage which then was the help
of our pwho became our custom-built amp
story module so now we were able to
enable swiping through the content for
mobile users and yeah push them further
so another benefit you get of course
with em and that's awesome or often the
main decision for for people to actually
apply em to their project is the of
course the benefit in the search results
where you get the shiny amp icon which
really sets you apart from from other
search results but we sort also saw
other improvements with
search results where em forced us to
create a very strict content module for
the article without any bloat of
different articles that would bleed into
our index content since we're using em
as our canonical pages but with every
project you're doing there or with every
framework you're using there also
pitfalls and one of the pitfalls we
encountered were the limitations you all
know that you can't use any custom
JavaScript in em and you know that if
you want to develop a rich responsive
website working in the limitations of a
50 kilobyte CSS boundary can be
challenging but for me personally as a
developer it rather felt like a tool to
argue with designers that it's not just
important to improve the look and feel
of the site but build a beautiful page
and at the same time remain fast
the second pitfall is that you really
have to check your limitations so amp as
if we use temp as a framework and with
every framework you apply you have to
use the right tool for the right job so
if your goal is to build a single page
application then it might not be the
right choice for you but for us with our
content segment and for content
marketing platform it definitely was the
right choice the last part is that you
that you're working on a living project
amp during our time when we used amp it
evolved quite a bit we ran into issues
and since the verse the components are
updated and you have a single version
for that you're embedding into your site
the code can change and that can render
your amp page invalid at times but as
long as you check the release notes and
maybe include validation check in to you
into your tool chain then you can prove
and your page from becoming invalid and
at the same time you still profit from
from all the advancements the empty
actually does to the components so your
page is getting better and better and
faster without you doing any changes to
it so to wrap everything up I'll hand
back to Thomas yes thank you yeah yeah
so we are almost almost finished but to
bring the project on point we have a
small case with you for you to have
everything in it how do you excite
people for a car brand but not
interested in cars at all by listening
to their needs and telling them stories
they actually want to hear data driven
entertaining and helpful for this
purpose we've developed a central stage
a new home for the BMW brand the all-new
BMW comm for a web experience just as
dynamic as our cars we used Google's
high-speed amp framework and
dramatically increased performance and
thanks to another web technology called
PWA ultra smooth full screen videos
enrich the experience and the next great
story is only a swipe away
the result a 30% higher click-through
rate from google search and up to three
times faster website loading compared to
competitors and a high performance
experience that you would only expect
from a native app and of course the
configurator or a local test-drive are
always just one click away the all-new
BMW comm the world's fastest automotive
content marketing website yeah so today
I want to thank our client BMW so
specially Christian who was the best
agile product owner ever and Urich who
made the project possible and for sure
so much laughs for all the passion from
the best team at JVM so these people are
happy to invite you to have a look to
the new new BMW comm thank you very much</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>