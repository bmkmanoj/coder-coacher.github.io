<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Leveraging AMP for e-commerce: Eventbrite’s journey to optimized mobile pages (AMP Conf '17) | Coder Coacher - Coaching Coders</title><meta content="Leveraging AMP for e-commerce: Eventbrite’s journey to optimized mobile pages (AMP Conf '17) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/The-AMP-Channel/">The AMP Channel</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>Leveraging AMP for e-commerce: Eventbrite’s journey to optimized mobile pages (AMP Conf '17)</b></h2><h5 class="post__date">2017-03-28</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/FPs6qENcDgA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so today I'm going to be talking about
leveraging ants for e-commerce
specifically Eventbrite journey
to optimize our mobile pages very much a
learning experiment for us to start off
with and we've actually been able to
implement a lot of what we've learned
through changing our our page - ants
into our non ant page as well so you
know I'm background in Dixon same shirt
different here I'm a software engineer
at Eventbrite specializing in search
engine optimization and I was the lead
developer for our ant project feel free
to come up during the conference to chat
I always love a chat but I'm also
available by email Twitter and on the
ants life channel as I hope most of you
are so first I'm going to describe a bit
of file about what Eventbrite does we're
a self-service platform for organizers
to create many and promote their events
we have a whole selection of tools
allows them to create their best event
yet and most specifically for this talk
where the lives are where the
marketplace for live events so my job is
to place organizes events where their
attendees can see them was that in us
through internal search or through
Google or any other search engines so
this leads me to the page we actually
implemented and this is our listings
page it's the most important page for
organizer therefore it's the most
important page for us this is a this
page has this page this all the details
needed for an attendee to make that to
make the decision about where they can
purchase a ticket or not they can also
most importantly purchase a ticket
through this page the reason we chose
this page rather than say something
easier like a landing page was this this
page is very high traffic as I said
before it's most important to our
organizer and we've also been working
our also large we're always trying to
optimize their pages and make them
faster currently our this page loads in
you know between two to three seconds
but we're always trying to optimize it
and in our amp
it loads at around one second and
they're in quicker with the Google cache
so we've actually learned a lot from
this
so this is our aunt listing page and
doesn't seem like my videos working but
anyway as you can see the designs are
very similar we decided to do this
because our rollout plan was to
incrementally roll out so 10 20 30 %
we're at 50% at the moment and we wanted
to keep the we didn't want to confuse
attendees with different designs because
oftentimes people will find the page
through Google but else they'll link to
it and then they'll come back to buy
tickets on desktop so we didn't want
them we wanted them to be able to find
that ticket the ticket button very
easily so before we were allowed to
undertake this endeavor we had to meet
some requirements product lasers out for
us first of all we had to make sure that
we met Eventbrite unique brand
expectations when you when you land on
out on our any of our pages we you know
we take pride in you knowing that you're
on at Eventbrite page we have similar
styles across pages we're very strict
with design to that and also we have a
beautiful style guide of sort of make
sure that we have those restrictions in
place next off we have a was to impress
had to improve user experience so not
only meet in you know the scenic
stations for user experience as the non
aunt page but we actually had to prove
that we could make this a better
experience overall for the depending and
not just through speed as well so we
wanted to take us so this was an
experiment for us and we wanted to take
also some learnings from this page and
move it to our non out page as well
another requirement we had to meet was
ticket Pro the ticketing process should
be consistent so we have a whole team
that works around my purchase flow and
then the ticketing page and we had to
make sure that that our they've you know
first of all that attendees could still
push ticket you know whether it's a big
on sale or not you know that that's very
important but also that they saw the
same ticketing process in an aunt page
in the aunt page there had to be
no confusion there we have it we also
had to make sure that some of our like a
real-time data was coming down
so that's includes you know like weight
lift also we say a ticket is unavailable
if somebody's in the checkout at the
moment but if they leave and that ticket
becomes available straightaway when you
have thousands of people trying to buy
tickets but very you know limited amount
of tickets going to make sure you have
that real time data coming down
constantly another requirement to meet
was maintainability we had to make sure
that that if we built this page that we
could be able to scale if we decide to
use ant for other pages we wanted to be
able to use those components you know
the global components that the footer
the header but also we wanted to make
sure that we could use the same design
that we have throughout our site so were
we able to if we found something work
for the not at the amp page because we
put that over to the non ant page pretty
easily we also and most importantly we
had to make sure it was effective just
kind of you know goes back to all the
points but we had to make sure that that
we were doing this for a reason that the
user got something out of it that we
couldn't no not just increase fees
that's very important you know it's very
much a big reason why we looked at this
but we also had to make sure that users
were converting we had you know we add
more click-through rates so first I'm
going to talk about the challenges that
we face how we overcame them and some of
the lessons that we learned through this
so first up was maintainability we are
as I said before we had to make sure
that this was scale so how did we
accomplish that we actually because it's
an experiment we didn't want to just go
and use like we're currently using
backbone and and handlebars and what
we're porting over to react so we didn't
want to be in that like we didn't want
to make it in backbone and handlebars
just to have supported over so actually
what we're using as well is make oh
templates which is a Python phonetic
templating system allows us to use a lot
of conditionals so we're using that and
because that's you know pure HTML as
well in there it'll be easy easy and
support that over to react when the list
your page decides to go that way
and we can enter also means of some of
those small smaller like HTML templates
we can just push push over to you know
like because to the non ant page because
they are using Mako and backbone with us
with the templating so that's that's how
we do our templates it's them and it
allows us to use a lot of conditionals
in there and personalize the page what
we're doing for to keep our design in
line is we're using stacks with a grunt
task the reason why we are using sass so
that was great but what and what we
added to the grunt tasks is we actually
we we render the sass we we are and then
we minimize it but what we also do is we
strip out any blacklisted tags from amps
that might be ported over from our style
guys so we're not using everything in
our style guides you know the first
thing I did when we decided to do ant
pages was like alright well let me see
what happens when I load our whole style
got in line yes we went way over that
was never a possibility and we didn't
want it to be that's not what ants about
right this is an opportunity to show
that you can limit your CSS you can you
know you can limit you know you can
optimize your HTML and you don't have to
use JavaScript for everything so what we
did was we're using a lot of inputs
which I'll show in a minute so we could
keep in line with our design but we also
had some blacklist you know some
blacklisted code in there so import the
important tag came up quite a few times
which I mean we shouldn't have anyway
but it was in there we also had charset
utf-8 at the top of a lot of our files
these sort of this sort of code is not
like you know it won't break the page we
strip that out so I actually have you
know I'm skipping that out of any import
files that we're doing for CSS and then
we you know we we just printed out to
the page so next I want to talk about a
bit about dynamic sampling we're using a
like the Mayfair tent was great for us
because we have conditionals and you can
use this you know if you're you know
rendering your your Java
server-side you can you know you can use
this as well reactor or backbone or
angular but for us we we have a lot of
our different event statuses you know or
tickets persons so whether it's a live
or end event or whether our tickets are
sold out they need to show you know that
it will show sort of a template
different template or a different design
so the example here of what you think is
the live event versus the ended event
and you can tell they're very different
templates on the end of the event we
focus more on the related events so
people can quickly go into our site that
way if you click on the view details you
actually get the exact same the exact
same information you see and same as the
same template loaded in there through an
amp accordion so you know with we're
using you know just conditionals like
this event container is ended but that
makes it really easy for us and also we
we use a lot of you know smaller file so
you know I was saying before that we
need some scalability we needed to be
able to to share those components using
ant header and footer now this is pretty
you know logical you thought I just want
to know does this mix out that there's
this myth out there that's just for pay
you know like answers just for pages
that just you know sort of kind of kind
of have a title and the content print
out and it's always the same so them has
to be you can you can build it for these
like sort of these pages that are
continually changing another thing that
we need is personalization so for any
time we're pointing an aunt page you
know like I'm pointing to an aunt page
on our site we can do personalization so
that's you know like if you use if the
user is logged in or they logged out we
can change it through also through those
conditionals so obviously doesn't work
when it's coming from the Google cache
not too much of a priority for us but
sometimes you know we just like that
those little tweaks for times that when
we are pointing to we are using your
aunt page through our site so next up I
want to debunk them it I wanted the
bunker myths about the CSS limit that it
limits you in design wise I actually we
I feel like we created a beautiful page
we had recently gone through a redesigns
around non-answer
and as you saw that our our an surgeon
is pretty you know it's pretty similar
to our non amp version with a few small
little tweaks so when we start to build
this we will very wrote about the CSS
limit we total lot of stories about
people saying we can't create a nice
page we can't design to the other amp
you know if you're really truly
passionate about create like optimizing
pages but keeping user experience to
design then amp you know and can do that
as well
so one thing that allows us to do that
is using sass or using a CSS
preprocessor and also helps for when
your are when you want to go quickly
when you so we are we're able to use is
complex logic within our our staff so
the first one is actually asked creative
creating space in classes so we have a
grid unit that are that you know like
increments by five pixels and so those I
decide to write like you know what for
like five lines of code there instead of
having like you know 20 and even like
you know I'm not using a lot of those
but I will be in other and pages but
even doing some things like that we
still didn't go to see at CSS when it's
nowhere close to it so yes such as great
to use for you know like if you're
running at us for using complex logic
within your CSS it's also great if you
want to like us you want to include
styles from our existing style guide our
designers worked really hard to create a
cohesive brand image and a lot of ways
we do those we we limit developers
putting in their own their own hex codes
or their own you know like bridge units
those sort of things so what we do what
we're able to do is we store them as
variables and and I was able to support
that whole the all of our variables
which is quite a lot into our amp page
from our existing style guide and none
of that gets rendered as the page that's
just use when rendered went when
rendering from SAS to CSS and we're also
I was also able to use import statements
to to import existing styles so an
example of that is the the loading
spinner for our what we're using for our
land
through our amps lightboxes I didn't
really want to like play with that
animation again I did I just wanted the
exact same thing so instead of having to
duplicate that I could just import it
same with our settings so next we move
on to ticketing so part of our ticketing
process is that like you have a video
here but what it is is you click on that
that green ticket and we're actually
doing a new page load so this is one
place where we do we had a bit of it we
had to make a bit of a bit of a leeway
or compromise as you will so we need
JavaScript this is a place where we
absolutely need JavaScript on the page
so this is the user experience you click
on the tickets button and we actually
load a new page which is our tickets
widget and as you can see they are up
the top you have a back two listings
button that that will take you back to
the and page so we put our the reason
why we absolutely need JavaScript on
this page is because of our is because
we have to deal with weightlifting we
have to deal with real-time data there's
no way around that
and I don't know if you know like in for
you know like this is a very niche case
for us and I don't know it's answers
once you know like ants shouldn't be for
every single use case either like
they're trying to put limits and they're
not trying to force every page on the
web to be an ant page sometimes you just
need do something like this or use an
iframe we went with this approach rather
than iframe because we don't know how
long those tickets are going to be like
you know it's a different place so this
only has four tickets some places have
like a hundred tickets you know we've
seen forms or it's 100 tickets long and
a lot of description so we do you want
to stick that on the page so we decided
with the new page load we also didn't
want to depend on like a component up
you know like an amp lightbox
that's loading an ant iframes and then
loading our ticket widgets so we were
quite lucky that we had a team that
actually had done had made this endpoint
for us beforehand so our organizers
could show that their own tickets on
their website and you wouldn't have to
leave that so the great thing about this
too is we have that factor listings
button which still connects the page to
our would be our tickets widget to the
page
user still feels like this they're in a
modal there in that that scene flow and
as we'll see later on to that we for
other places we need iframes or to show
any of that sort of content we we
include that back to the students button
there so it's completely stood slow so
another problem that we had was a
user-generated content so on our for our
listings page the organizer is in charge
of that that's how we want it we want
them to show any information that they
want it you know in a certain limited
range so we were quite lucky that or we
already tripped out on create the like a
loose without CSS any CSS or any script
tags so we didn't really have to worry
about that what we did have to worry
about was images and I know what you're
saying why couldn't you just done ant -
you know for the ant - in front of the
image tag well the problem was the
aspect ratio so we never know how our we
don't tell our organizers how to
position images within their
descriptions so they can put them next
to each other they can notice that have
them a full page anything like that so
there was a couple of things we could
have done with this what we thought
about is we could have like we could
have just showed the non ant versions
for any any page that had an image in it
but I didn't want to exclude anybody
from this experience so so what we ended
up doing was if the organizer didn't
have an image we just printed out to the
page as normal but if they did we create
an abstract so we stripped out the image
tag this is on the server side check out
the image tag we do a character count a
limit of 500 and then we print out the
page as you can see up there and add a
read more button when you click the read
more button it loads an amp light box
with an iframe inside that prints out
the whole image and then as you can see
from before we have that back back to
listings button so it all looks cohesive
this is a short term solution for us a
long long a long term solution is on the
create side we take that aspect ratio
and save it as data attributes now we
put what we could do on the server side
is you know like make a request
to ask me to see that yeah what how that
image size is we didn't want to do that
either we want this page quick but what
we've also found out what we're thinking
about putting on our non and page is
that people actually like that abstract
sometimes our description organizers
descriptions you know takes up you know
they have to scroll 50 times just to get
to the venue for other venue information
or anything else or you know or to see
the match for the venue so we're
actually thinking about likeliness from
the nominate page as well because it is
a nice experience and and users are used
to hurt you know clicking the read mine
it's opening a modal yes that was minted
anyway um another problem we had with
our light boxes and ice cream so like
like the description is you saw we were
actually using in quite a few places
this are like you know like opening a
light box that then loads an ice cream
for any of our content that we just
can't get around you know using
specifically amp for so this was working
well you know I have an Android device
and I was using chrome tools and you
know for our first iteration I was like
alright this works well and then we had
a testing party you know test early test
often and we realized that the aunt
lightbox didn't scroll on iOS and that
wasn't a bug that was actually you know
a decision by the amp team because the
amp lightbox was made mainly for images
and short content but I had like
promised my my I promise product that
yeah I could do you know like that this
is a great design then I came back home
and said hey can we just blowed the
iframe on page no no we're in we like
this idea of them you know of a fake
motor coming up alright so I went and I
had a look you know what could I do
and we found I found where to go first
girl and touch but I could put on my
iframe so I get you know I gave up you
know that scrolling on the lightbox that
was a decision but what about the ice
cream I came up with it and it works
quite well except we know we had another
testing party and I realized that when
you click back into it like you click
you click back to listings and you
clicked back into the arm the lightbox
nothing trended so I was back to square
one
I needed help so I actually went to the
slack and Channel and asked if anyone
else was having that from I got sold put
up a github issues that seems like a bug
and so I did I put one up and I got you
know straight away I got feedback I got
you know I got told actually this is a
difficult issue somebody's already had
this I I had started trying to imply I
had put my github issue in November and
this was dated back to July so it was
five months beforehand so I was like
okay so what I did was I you know I sent
a whole bunch of you know of comments
and questions and asking and asking but
I was nice about it you know but I put
that pressure on and what I realized was
I loved it when I started doing that to
that to that old github issues more
people started popping up they've sort
of been like I want this to we're
actually thinking about doing in but you
know we would like the icebox the scroll
and so with all of us together we
actually got you know like oh and
prioritize this they actually changed
you know their mind about like what does
what the lightbox should be what the
functionality for this should be and so
we actually got an attribute scrollable
which was fantastic
the only fun for me was that this is
dope it came out during the codes like
just ask before the code freeze so
actually had to wait a couple of weeks
which anyway so now in the documentation
you'll be able to see under attributes
rollable so with the hell that you know
like a so this is the case with the air
the amp team you know are looking for
feedback they're looking for ways to you
know like what what's the priority what
are people looking for in the community
and that would scroll if it works right
now but I want to so now I go back to
those key points that I'm trying to make
and what we know and kind of like talk
about what like assertive m48 learned as
a whole the first is that I you know
like the love of the customer you know
we we went down this endeavour event not
because it was just cool nursing but
because we had we had a problem to solve
we needed to find a way for our pages
were pre-performance but we're always
looking for more to do and I want
actually wanted to I went on this now I
wanted to prove that we didn't need so
much JavaScript we didn't you know we
could we should be like optimizing our
CSS per page and so you know aunt seemed
to fit that toolbox you know that was
the tool that the tools that I needed so
you know always follow what your you
know your what your customers want
always look for the you know like to
enhance the user experience and then I
want to I want to I want to talk a bit
about the aunt community that us as
developers and product managers and
designers and whatever you know whatever
else we you know like am can't do this
alone we have a responsibility to tell
the amp team what do we need what do we
even if you can't contribute you know
like that doesn't mean you don't have a
voice you should get on that aunt slack
channel and you should you should get
open up a github issues I mean I've ever
have a bunch of them and most of the vim
closes like duplicates but least my
voice is heard they're at least they
know that somebody else wants something
you know I can't stress enough how our
participation you know the community
participation will make amp work right
you may sit here and think okay ants not
what I want to be but the only way it is
the only way that the team's going to
know to push it in one direction is if
we all tell them we all talked about it
you know the panel we just had up here
was fantastic I bet you ants at the
antenna are going to go back with a
whole lot of you know things to discuss
and you know features they should
implement so next time talk about like
iframe I know that people like oh ice
cream cheese but sometimes you need it
you know in 2000 said it's the duct tape
you know for amp but that's not a bad
thing like for us we wanted to iterate
quickly we didn't want to sit around for
a lot of things and wait so we used
iframe until that like a component
became available for us or until we had
another way around it a good example of
this is our organizer contacts friend I
was like great there's a forum you know
I can use that but then I realized that
there's no recapture and that was very
important to us to stop you know BOTS so
and I put up a good hub issue and it's
coming which is fantastic but for the
meantime we're doing that whole loading
a lights are you press the contact
organizer loads of the light bulb loads
the iframes
and we have you know I have an endpoint
for that that contact form not the best
solution but it works you know the other
alternative was like to hold off the
project until we got there attached
triple or not include that which was not
you know which product we would not let
me do and last of all I just want I want
to I want to see this more I want to see
accelerate mobile pages enhance design
and user experience everyone talks about
the speed and everybody knows that
fantastic but I really feel like the the
the CSS limit doesn't limit us it
actually forces us to take on best
practices for CSS as well a force
indistinct what's important what's most
important on this page you know and it
helps us enhance the user experience I
think I honestly feel that like that
it's not a speed or designer news
experience it's an end right there we
can you know like these don't has to be
sacrificed you can create beautiful
pages with amp now I think we've seen
that today I want to get people away
from from you know like thinking that
answers just estate sites and for just
using the the styling that comes with a
component you can really tweak those
components you know you can take a hold
of them and really do a lot so yeah I
just you know I really feel that answer
has a lot of potential it's got a little
way to come but it's going to be the
community that helps it along too so get
out there get in a flight channel put up
those github issues be part of it thank
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>