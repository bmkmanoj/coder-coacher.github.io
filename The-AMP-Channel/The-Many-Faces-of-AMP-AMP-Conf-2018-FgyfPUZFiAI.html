<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>The Many Faces of AMP (AMP Conf 2018) | Coder Coacher - Coaching Coders</title><meta content="The Many Faces of AMP (AMP Conf 2018) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/The-AMP-Channel/">The AMP Channel</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>The Many Faces of AMP (AMP Conf 2018)</b></h2><h5 class="post__date">2018-02-13</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/FgyfPUZFiAI" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">tomorrow is Valentine's Day so I just
want to say happy Valentine's Day to us
nerds I hope nobody is getting in
trouble with their partner by being here
tomorrow
you know I for me this is this
expression my husband made when he
realized that he doesn't have to plan
anything special anyway I am Kasane your
culture and I'm here from the Washington
Post talking about all the different
ways that we implement amp on our
platform so I said I work for the
Washington Post but more specifically I
work on art publishing while Washington
Post is a recognizable name not
everybody knows yet about our software
as a service part of the business art
platform is a suite of products that
addresses various needs of publishers
all around the world from content
creation to image and video management
to workflow management and much more so
this diagram kind of gives you an idea
of the context of all the products we're
balancing and what it may mean when we
say yes we support amp on our platform
so don't get too intimidated we'll go
into details this is just an overview
some of the clients that are on the amp
or I'm sorry on arc right now or will be
in the future
info buys one of the largest
spanish-speaking media based out of
Argentina we just sign la Parisienne go
great for the team that gets to go and
they visit Paris for work you know trunk
you may recognize as the umbrella for LA
Times New York Daily News and Chicago
Tribune so let's talk a little bit about
just info by for a second this is what
I've been working on I suppose our
oldest partner that been very excited
about adopting all the new technology
including amp and PWA so they have 45
million unique visitors per month and
78% of those
from mobile and only 22 from desktop and
in Latinamerica it's really important to
have fast mobile experience not only
because people are accessing it through
mobile but also because there are more
connectivity issues there and 50% of
traffic comes from direct traffic but
that also means that 50% of their
traffic comes from organic search and
20% of that is amp traffic and amp is
really important for a company like info
buy because it's brings in new unique
users in each new unique user is a
opportunity to develop an engaged
audience so let's talk a little bit
about how amp works on the art platform
so our API called arc native
specification and as for short is an API
that takes in content from any CMS like
WordPress or our own CMS solution
ellipses and turns it into more general
content elements you know images are
their own content elements that come
with height and width and all the
information that you need for them such
separate for such elements as paragraphs
or videos or embeds so historically our
rendering engine page builder has been
using Java server pages to render HTML
it's a little bit of an older technology
but what that means is that we don't
have to do anything special to
server-side render HTML which works
really well with amp we are working on
making it on towards being able to use
any template in language or framework
for HTML but so far jsps actually work
really well with amp so each individual
feature has a type and some features can
have a type of amp type most of them are
default another example would be mobile
or RSS so
when a user lands on an AM page only the
features that specify an amp output type
will display so that eliminates any need
for curating um templates separate from
just your regular pages you can still do
that but you don't have to so we use
features a little bit differently I
think then other people so I just wanted
to quickly explain what a feature is so
this would be the headline feature that
comes with a media in this case it's a
video this is a feature of trending
topics and this is a feature that pulls
latest from a particular category so you
can see how a webpage consists of these
little bits and pieces and each one can
be made AM compatible or not so if you
imagine that latest from business has to
make an API call or something like that
and maybe there's other things involved
in making AM compatible if this feature
doesn't yet support amp it just won't
appear okay so some of the challenges of
implementing amp are of course CSS size
keeping your CSS under if those 50
kilobytes can be pretty hard
sanitization because we work with so
many different CMS from publishers all
over the world
New Zealand Latin America Europe us some
of our partners even had print first CMS
that's not even online first it comes
with its own challenges and we have
adaptors that are doing a lot of work
but sometimes things slip by so
standardization is really important
third-party integrations we often don't
have a lot of control over that and
again because we work with people from
where all over the world maybe they want
a specific like sports core provider
that we have never worked with before
and maybe doesn't really support em adds
all of that
platform support so as you've seen we
have a lot of products that we support
so when we say we support amp it means
that eventually all of our products have
to be playing nicely with the M so let's
talk a little bit about CSS I know we
probably have all seen this in touch of
a lot of developers already hate having
to work too much with CSS so here's kind
of all the different ways you can think
about implementing CSS on M pages the
first one is you can have completely
separate CSS files and maybe that
approach works better when you've
already built an entire site and then
the client wants amp support you didn't
think about it okay let's just put in a
different CSS file it's really easy to
implement but it's really hard to
maintain and kind of goes against the
principle of editing one thing in one
place only and not having to do the same
change in multiple places one amp
compliant file wouldn't that be nice
that is a great solution if you can
actually get all the CSS that you need
for your entire site under those 50
kilobytes so it's pretty hard to
implement but it is easy to maintain and
this hybrid version that we kind of
settled on for one of our newer clients
they knew from the beginning that they
wanted to support amp so our team built
bootstrap like type of Friant framework
for our internal use and all of the
elements and that framework our amp
compliant and then when the limit was
approached you know we got closer and
closer to 50 kilobytes
we decided that certain features that do
not need to appear on amp can have their
own special CSS in that way its amp
first and then maybe a couple features
that will not appear on amp will have
their own CSS and that's that's been
really good for thinking about am
first implementation you know medium and
maintenance is pretty easy so
sanitization our platform is CMS
agnostic so as I've mentioned before we
work with all sorts of CMS that we have
to convert to our own API format and
sometimes you know each client content
is unique little snowflake and here's
the things you know we sometimes have to
take out style and on clique we all know
that but I've also encountered things
like shape equals rectangle you had to
dig around and it's basically an ancient
HTML attribute that we don't usually see
anymore
target new extension instead of target
blank this runtime topic tag has been
inserted by an analytics engine into
this yes HTML for one of our clients so
some of these things you can kind of
anticipate but things like that you
really can't so sanitization ends up
being a lot of work because each client
is gonna bring something new to the
table and you're going to learn
something that makes amp angry so this
is a piece of the file that does
standardization where you're looking for
non-compliance and stripping them out
and actually here this is embedded Java
because jst doesn't handle a lot of
regular expressions well so you end up
having Furman developers Ryan writing
Java code which is not great sometimes I
feel like that robot third party
integrations can be pretty hard for
example this we had to incorporate this
new sports core module that's an embed
and on the provider site it has the
section said implementation and all it
does is provide a link to amp iframe
documentation that's it just one line
read about Amp iframe
so things like that can be out of our
control and it's you know sometimes the
decision is to strip it out well that
leads to degraded experience for the
reader so it's a hard thing to balance
saying all that tools do make our lives
easier for one of our projects we have a
circle CI and wetback setup that fails
any build that approaches that 50 club i
limit i think it's forty eight point
five if i remember correctly but this is
really great because it's automatic
nobody you know fails you only or PR you
don't have to be mad at a co-worker
instead if a machine tells you no go
refactor so it actually works really
well because the developer can either go
and refactor their CSS or utilize the
classes and SAS mix-ins that are already
there it kind of encourages best
practices in CSS writing em fala dara is
a really useful tool it gives mostly
very helpful messages without very
helpful links and of course the google
search console that kind of gives you a
more broad overview of what's going
wrong and that really helps prioritize
which validation failing errors you're
gonna fix first because if one affects
30,000 stories then you know you're
probably gonna tackle that first so
let's zoom out a little bit our
publishing is more than just its
rendering engine and when we talk about
support for amp on our platform we have
to consider are the products we have for
example our chi yeol provides different
types of feeds for native apps RSS
Facebook instant articles
it also supports amp that is actually
how the washingtonpost.com
does it the instead of on the front end
doing the rendering of amp compliant
elements there's a Python script that
does the same thing on the back end and
creates this HTML blob that the
washingtonpost.com uses but that is more
of a custom solution
or The Washington Post with our clients
you know having it be through these
front end little modular features really
helps because then any client can have a
very custom amp experience so platform
approach means that we also have to
support Clavis Rai driven
personalization engine that needs to
figure out how to run em compliant
script and produce in compliant HTML for
recommended stories so Clavis is our
topic classifier so here's an example it
uses natural process natural language
processing to categorize the story here
we see a story about NASA and it's going
to categorize it as airspace and
aviation
it is also a targeting tool it builds a
user profile based on what stories user
clicks on and gives you all that
information and there's also a hybrid
functionality where it recommends
stories based on popularity of content
user interests or group behavior so with
M you can imagine that it's pretty hard
to do the tracking because right now
everything is happening on the Google
domain and we just can't do that and
since it is a data driven model there's
a lot of information that is being
missed there you know what if amp users
use the website completely differently
what if they have different interests we
don't have that information right now so
the announcement that we can host amp
pages on our own domain is really
welcome to us and it could definitely
help us with tracking so Clavis on the
Washington Post just calls inside an
iframe to to an iframe hosted by this
recommendation in engine and it's really
just AM complying HTML blob and this is
kind of what it looks like if you go on
Washington Post com this is this is
produced by Clavis so the amp support
for
all clients is in progress right now
because this type of approach you know
it's not very customizable right now
another part that I wanted to talk to
you about is ellipses our render
agnostic CMS as you've seen today am
stories have been launched and actually
because ellipses is used to create
stories for Washington Post and our
clients you know we wanted to create a
nice way for them to be able to create
amp stories inside of our CMS so the
team that worked on this because there
was a time constraint decided that
instead of trying to fit in into the
ellipses roadmap that they're gonna use
a google chrome plugin so the google
chrome plugin spruces up the editor and
makes it more clear where like each amp
stamp amp story is separated from
another so here's a video let's play it
real quick so this is our editor you can
see that right now maybe it's not super
clear what's it's gonna be a part of
which stamp now that you reload with the
chrome plug-in you see these dotted
lines that clearly designate where the
content is gonna go on the right you can
see you can drag in image or heading it
adds this add another stamp add
background to the stamp this is our
image management system yep so adding
another heading and then when you save
you get a little preview and this is
what it looks like
YUM
waiting for lunch right okay so I really
like to thank everyone who worked
this Matt Callahan Linda Williams Joe
price Christopher kinkle Devdas and
Simon Glen Greg let's have a round of
applause for them a lot of them are here
today so make sure to find them if you
have any questions about this so looking
a little bit into the future
newsroom tools for amp validation so
some of our clients want to be able to
tell if a certain embed that they're
putting in a story is gonna be invalid
and M and then to be able to make that
decision whether they want that story to
not appear in that amp carousel at all
or can they sacrifice this embed or can
they find a better way to convey this
information that is not going to break
validation wholistic platform support so
all of our products amp will be part of
the roadmap getting it there and
supporting it from every side tracking
analytics feeds everything and then AM
stories for everyone as you've seen with
the Google plugin would really like to
have that as part of the native
functionality in the ellipsis so all of
our clients can create their am stories
so I would like to thank James Ives
well one raiser Molly Gannon and Simon
Glen Greg for working with me on this
and giving me their part of the puzzle
of how amp is being implemented on the
Washington Post and my name is Kenya
Coulter you can find me on twitter at
chaos Cole please I will be off to the
side come and ask me any questions if
you're interested and that's it for me</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>