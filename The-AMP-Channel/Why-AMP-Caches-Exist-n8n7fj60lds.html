<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Why AMP Caches Exist | Coder Coacher - Coaching Coders</title><meta content="Why AMP Caches Exist - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/The-AMP-Channel/">The AMP Channel</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Why AMP Caches Exist</b></h2><h5 class="post__date">2017-04-06</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/n8n7fj60lds" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so what's the deal with em Cassius why
do they exist em caches are fundamental
part of PAMP yet misunderstood everyday
evolved us ask me why they can't just
get their m pages onto some platform
serving m pages like google search
without linking for the cash while amp
cashes in to do some traders they do
work in the users favor
to ensure a consistently fast and
user-friendly experience the caches are
designed to a ensure that all and pages
are actually valid amp be to allow m
pages to be preloaded efficiently and
safely and see the myriad of additional
user beneficial performance
optimizations to content but before we
spend a little more time talking about
these let's talk about the three
elephant in the room why the caches
require new URLs and what it means to
attributional link sharing so amp caches
require new URLs which technically
breaks the origin model of the web and
there are some downsides to this but I
promise we're not just doing it to mess
with you but we're doing it for a
hopefully noble reason to make adoption
easy for everyone
you could theoretically get many of the
cache advantages through other means but
a small site often doesn't have the
resources to manage its own DNS entries
or name servers or to push content
through complicated API so pay for
content delivery networks but it's
reason the amp caches work with a simple
Earl transformation our webmaster makes
their content available at some Earl and
the amp caches can then cache and serve
the content using their own worldwide
infrastructure to a new Earl that Murs
and transforms the original it's a
simpler set and now you might think does
that mean for my analytics and do I
still get the money for the observed on
my pages and I have good news for you
and attribute all traffic to you the
publisher through the amp Analytics tag
am suppose a fairly large number of
analytics providers to make sure you can
measure your success and your traffic is
correctly attributed and amp ad that's
the same for ads one potential downside
is link sharing and GIP let's be honest
it's annoying to copy a different Earl
than the canonical Earl to share with
someone however the issue isn't as large
of a problem as you'd think Google for
instance amends its viewer with a great
canonical meta tag so posting the link
to any platform that honesty's should
result in the canonical Earl being
shared other ways to mitigate that is to
add a share button which is exactly what
Google search has done in the ampulla
but these cleared up let's take a little
bit deeper let's talk about validation
or how I usually say it when the label
says M
you get it's critically important for
platforms and search engines to know
that if they're sending traffic to an EM
page after showing users a little
lightning bolt icon the user actually
gets what was advertised a fast and
user-friendly experience unless of
course find a way to make a slow but by
damn page which is hard but not
impossible I'm looking at you big web
fonts and consists of an ecosystem that
depends on strict validation and showing
that very high performance and quality
bars are met one version of a valid data
can be used during development but the M
cache ensures the validity at the last
state when presenting the content to the
user now let's take a look at M s custom
pre-rendering which only works in
combination with an app cache and look
if you take anything away from this
video it's at pre-rendering especially
the variant in amp greatly outweigh any
speed gains you could theoretically get
by hosting directly from an origin
server pre-rendering can often save you
seconds not just milliseconds if you
ever ask yourself the question why amp
doesn't just feel fast but instant it's
because of pre-rendering so why can't we
just pre-render m pages from the origin
service if we did we couldn't guarantee
you that a page is valid amp on the
origin and valid amp is critically
important for the custom pre-rendering
the amp jf library provides instead of
simply pre rendering the entire page
valid amp documents allow you to preload
only the things that matter most only
the assets in the first viewport get
pre-loaded and no third party scripts
get executed this results in a much
cheaper less bandwidth and CPU in terms
of preload allowing platforms to
pre-render not just the first but a few
of the first M pages a user will likely
click on because M pages can't rely on
browser pre-rendering like I just
mentioned normal navigation from page to
page doesn't work so in the amp caching
model a patient needs to be opened in
line on a platform page say in an iframe
and caches ensure the platform page can
do that safely preventing a large number
of cross-site scripting scenarios DM
caches started out with what I just
talked about but they have since added a
number of transformative transformations
they optimize HTML through measures such
as bringing script into the ideal order
or removing duplicate script tags and
removing unnecessary quotes and white
spaces or they rewrite JavaScript URLs
to have infinite cache time and finally
they optimize images
which is more than 40 percent average
bandwidth improvement Google foods amp
cache is doing last less meaning without
any visual change and lossy so without
noticeable visual change compression in
addition it converts images to WebP II
for browsers that support it and
automatically generates or set as your
attributes so called responsive images
if they're not already available and
generating and showing correctly sized
images to each device so you might be
asking isn't a better way to do this and
look I hear you the provider of an amp
cache is mirroring your content it's an
important role and comes with great
responsibility if the cache provider way
to do something truly stupid like
inserting obnoxious ads into every amp
page and with stop being a viable
solution for publishers and thus wither
away amp has been created together with
publishers as a means to make the mobile
web better for publishers users and
platforms it's why the MT mez really
strict guidelines for amp caches to give
you two interesting excerpts the
guidelines state that your content needs
to provide a faithful visual your extra
production of source documents and cache
providers must pledge that they will
keep URLs working indefinitely even
after the cache itself may be
decommissioned these and many more rules
and so that a cache doesn't mess with
your content I just walk you through
many of the wins and trade-offs of M
caches to provide an instant feeling and
user-friendly mobile web experience but
what if we could get to many of the same
awesome optimizations without er
trade-offs and without involving a cache
at all personally I dream of a future
still to be invented web standard that
would allow us to get there to move
beyond cache models these kinds of
fairly advanced features like static
layering and save pre-rendering require
fast fetching changes to the web
platform but hey just like for a time
travel it's not impossible just very
very difficult so join me in saying this
out by getting in touch in the comments
below or on Twitter or slack and know
that I always have an opening for your
questions ideas and concerns onwards</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>