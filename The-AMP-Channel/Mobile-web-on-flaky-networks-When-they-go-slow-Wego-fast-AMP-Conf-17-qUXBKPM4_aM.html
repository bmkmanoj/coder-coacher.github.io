<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Mobile web on flaky networks: When they go slow, Wego fast! (AMP Conf '17) | Coder Coacher - Coaching Coders</title><meta content="Mobile web on flaky networks: When they go slow, Wego fast! (AMP Conf '17) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/The-AMP-Channel/">The AMP Channel</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Mobile web on flaky networks: When they go slow, Wego fast! (AMP Conf '17)</b></h2><h5 class="post__date">2017-03-28</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/qUXBKPM4_aM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">good afternoon everyone my name is honey
Mittal I lead the product team at Viacom
and I will be talking today about mobile
web on flaky networks I know it's not a
problem in this part of the world but in
the markets where we operate in flaky
networks is a big problem for mobile web
users and I will be talking specifically
about how at we go we recently revamped
our entire mobile web journey and to end
to tackle this issue so a quick overview
of the agenda I will talk about a little
bit about we go the markets we operate
in and the the challenges we we face in
these markets I'll be walking it through
the old mobile web journey the changes
that we made walk it through the new
mobile app journey as well with these
changes and I'll walk you through some
some interesting results both from
organic users and and and some paid
users as well there's a specific part of
technical intimidate implementation
specifically around data tracking that
that we had to work around luck to show
you that as well and then I'll end it
with the the next steps for we go so for
those of you who do not know we go we're
we are travel metasearch engine
operating out of Middle East North
Africa Southeast Asia and India we
basically compare travel prices flights
and hotels from thousands of different
travel sites around the world including
online travel agents Airlines hotel
chains and really small you know the
local travel agents as well in one
simple place and we try to make travel
shopping easier by by saving time and
money for for our travel users so I
mentioned earlier that our biggest
markets Middle East
followed by Southeast Asia and then
India and recently North Asia as well
now about 70% of our users actually use
vigo services on mobile that's a
combination of apps and web in some of
our merging markets like India and
Indonesia that's actually as high as 90%
we do operate in 52 countries support 38
languages in the same app itself and
because we operate in these markets we
actually get to see the best in worst of
the mobile world so we are in markets
like Singapore Malaysia UAE Hong Kong
and Taiwan where users are using us on a
very high-end device and these countries
are known for having some of the best
mobile networks in the world Singapore I
think ranks number 2 but at the same
time we also have users in like in high
volumes touching us on basically really
cheap devices you know the 50 dollars
two hundred and fifty dollars sort of
low-end devices and and these countries
are known for having some of the worst
mobile networks in the world and for us
as product and engineering engineering
guys it's it's basically a bit of a
challenge because you know our mobile
apps are really popular they do really
well on the App Store's we try to
optimize the size down to into the 10 to
20 MB even while supporting these 38
languages but you know in emerging
markets is a bit of a problem because we
have a specific use case where you know
user on a really low end device on a 2g
network in India let's say traveling on
a bus tries to download our app and as
much as we optimize the size we have
support multiple apks these these users
may not be able to download the app so
they abandon abandon it Midway or they
download the app and because they're
cheap devices only support let's say 500
MB storage when it comes to taking you
know lots of images and videos and
downloading more apps they all often run
into a situation where they don't have
enough space and they want to then
delete other apps they're not going to
believe the the daily user apps the chat
apps and the social network apps so we
go as a travel app which is a seasonal
app ends up being an app that user
deletes and we then have to then
reacquire this user which is an
additional cost for us so some mobile
web obviously plays a very very
important role in these markets in terms
of the organic users
in terms of paid users a you know paid
marketing as well and we also prayed in
certain markets where the Google Play
and the App Store's are not popular or
are either blocked and that's where
mobile web actually ends up being an
important go to market product as well
for us so I'll walk you through quickly
the the we go mobile users journey we
can have users coming directly to our
site we call that the core web app where
people come to a home pages they do a
search on flights or hotel side where we
compare prices from thousands of
different site one place where the user
then can can perform some advanced
filtering and sorting and basically find
the price of their choice from the
partner of the choice and at that point
of time we hand the user off to the
partner side for the actual booking so
that that's part of our core web app
experience itself we do acquire users
both on the paid and on the Google
search organic results side onto this
core app but a larger volume of our paid
acquisition and even organic acquisition
actually happens on something what we
call the you know the static landing
pages which is not that uncommon
actually in travel ecommerce a lot of
people think these static pages are do
not have a place and in travel ecommerce
but they really do so we have some page
types like you know the airline pages or
the airfare pages as we call them
there's different combinations like city
to city city to country took either to
you know search queries like cheap
flights from Singapore to Hong Kong
which is very popular in our markets we
have hotel pages we have a few of them
the end goal of these pages is basically
to provide the user with some let's say
some historic air fares for those routes
or for those hotels provide them more
information about the the destination
itself and get them to do a live search
which then brings them on to the core
web app and then to a partner site for
conversion now with this flow we had
quite a lot of issues on the static
landing pages side we did have the
biggest problem was basically the load
times
we ended up paying all our marketing
networks on a click basis so we were
ending and we ended up basically paying
a lot of money to acquire these users
who would click on these on these lists
whether it's on Google Facebook and
multitude of marketing networks but a
huge majority of them would never end up
actually getting to the total page
itself because it would take anything
from 10 to 15 seconds for the page to
load and for the users who did end up
getting to these pages the the issues
did not end because the actual
conversion was supposed to happen on the
on the core web app which has its own
had its own issues so as I mentioned
earlier the you know we had a web app
but the experience was quite inferior
when compared to our native apps it was
a responsive site but it was not fully
optimized from a while what I mean by
that is that it was using the same code
base as the desktop site the same set of
API is that we designed for desktop we
used for mobile as well and while it was
responsive the designs were not
tailor-made for for the mobile user
which basically meant that we really
need to do to improve the whole
experience and as a lot of ecommerce
sites would have the same problem we had
too many trackers for attribution for
you know own analytics we had
third-party systems we had ad tracking
so that slows down or slow down a mobile
website quite a bit so roughly last year
in the second half we decided we
definitely need a revamp and we decided
to do that not just by launching amp
pages but you know by kind of revisiting
the entire flow so the first decision we
made was to build a progressive web app
and not just build you know a PWA with
which service workers it allows caching
and push notifications and and and all
those you know important things that
make it work more like an app but we
also decided to build a new set of
completely new set of API is that were
highly optimized for this mobile user
and remove all the trackers and get one
tracker to be like our single source of
truth which would then enable all the
other tracking on the server side so
that was the first decision for us
the second one which happened very late
last year was to actually even try
building amp pages for some of our most
popular static landing pages have given
you the examples before but what we
decided to do as much as we wanted you
to basically make these amp pages the
single canonical versions but we
basically decided that since these pages
were also catering to our desktop users
we were not sure of what to do with amp
for our desktop users so we decided you
know what let's just try it out let's
create these EM pages for the most
popular landing pages and still keep the
older pages as the canonical versions an
important thing over here at load was to
basically make a smooth from transition
from these amp pages to the PWA we use
the install serviceworker which
basically kick-starts your your PWA in
the background while you're still on the
amp page basically loads all the assets
required to kick-start this the speed of
the way when you get transferred is a
smooth transition now I'm now going to
talk about the details of the amp
install serviceworker but i do recommend
you guys go for alex russell stock
tomorrow at 10 a.m. his talk is called
progressive herb amps from m2 PWA he
will be covering a lot of the details
that I have left out for the sake of
this presentation right so I have some
before-and-after gifs to show you
exactly the kind of you know user
experience impact we made and I'm not
going to cover the details of PWA for
now it's mostly on amp side for the next
few slides this is one of four typical
Airlines landing page this is Emirates
Airlines page specifically sorry right
so as you can see you know users coming
onto Google directly searching for cheap
Emirates tickets or their popular
destination on Emirates we serve these
pages where once you get to the page we
basically have a form for you for you to
you know look Phillip your departure and
destinations your dates we provide you
with recently found Affairs and main
goal is to for you to do a search and
take you to the to the live results the
problem with that is that white screen
you see right over there most of these
tests were down on Nexus 6 device
of course on the much cheaper devices it
was even worse than what you see
well after we decided to revamp them
using em that's what the experience
ended up looking like it was much more
it was clearly much more faster I mean I
don't need to repeat that again and
again and it's fast we've seen that you
know different networks that we've tried
on different devices we've tried when
served directly from the Google am cache
it's less than one second load times for
the first meaningful interaction another
example is flights to city we call them
the FA pages this is specifically for
flights from Dubai to London or
Singapore to London very similar to the
Emirates example that I showed you we
have a fair bit of information about
this route for the user the end goal is
obviously for the user to do a life
search but that white screen over there
was the reason why we were losing out a
lot of marketing dollars and we were
losing out a lot of users interested in
looking for this route but never
actually making it tour to our website
after we decided to revamp it similar to
the example I showed you before we had
to change the design a fair bit we
wanted to make it a bit more visual
there were some limitations as well
which I will talk about next but in
terms of the page load speed time we
definitely have some really important
gains right so so far I think it's clear
and it's fast speed is very very
important
we did have some limitations as well the
first limitation as I mentioned earlier
most of these static pages that we have
we require the user to do a search and
for travel search you need the departure
city the destination at least the
destination in terms of hotels and your
dates for you to be able to do a live
search and for that we we provide the
users not with just a Xbox search but
also an autocomplete in cases of flights
is basically cities and airports so as
soon as you start typing si n you should
be able to see Singapore Singapore
Changi Airport and more cities and
airports matching that query and did not
support that the second one was on the
calendars but because we are played in
the Middle East we don't just support
the Gregorian
calendar we also have the Shamsi
calendar for the people who speak
Persian for people who speak Arabic the
history calendar is a an important
calendar and it was not just about the
calendars because we're a travel app we
basically like to show people the
weekends and public holidays in school
holidays that people like to see while
planning a holiday while planning a trip
and the weekends are different in
different parts of the world in the Arab
world it's Friday and Saturday and Iran
astir than Friday rest of the world is
mostly Saturday and Sunday obviously so
it was it was a bit of a tough decision
for us to make we knew that it will gain
from the speed and we knew there will be
some losses on in terms of user
experience based on this form-filling
limitations so we decided to do some
tests we decided to do the form filling
on the PWA itself and see if the you
know the gains can outweigh the losses
so in the end in the end to end user
journey and it being something like this
we will acquire the user foster with the
amp landing pages the amp install
serviceworker would kickstart the PWA in
the background the call to action on
these static pages was basically to get
the user directly to the PWA for a
superior form-filling experience that
was the big thing that we wanted to
prove whether it can be done a lot then
we you know the on the PWA itself we
were able to provide much more of an app
like experience so the search to you
know the the screw browsing through the
results advanced filtering and sorting
using the serviceworker for caching the
results you know to improve the returned
user experience we basically were able
to provide this this really superior
end-to-end user experience that looked
like this that's an example of people
searching for hotels in Dubai we acquire
them from Google very quickly onto the
amp pages where there's a simple call to
action saying enter dates which then
brings the user onto the PWA where they
fill in the dates and then leads to a
life search where you see that live
results I'll repeat that in case you
missed it earlier there's another
example for flights from Singapore to
London
that's the call to action we're clicking
on enter dates would basically just lead
you to the PWA form itself and then what
followed essentially was basically all
the gains from from building the PWA
right I'll talk to you I'll talk a
little bit about a launch experience and
I think it's very important for people
looking to build this entire end-to-end
user journey this is one of my favorite
infographs from from the web it's called
the emotional journey of launching
anything great and I think it's
important for a lot of developers who
might be you know looking to build I
mean the part that catches my eye
specially is the is a dark swamp of what
is it calling in yeah basically in
simple words it just means we were in
deep for a long long time so you
know it started off being what do we do
we don't know how to start should we use
react should we use polymer if we build
a PWA from above what do we do would for
desktop if we put it amp pages what
happens to to desktop again what happens
to our app build a whole team together
we actually made a few changes in the
theme too and you know because we were
startup we had a I'm talking about a
team of one engineer to build the PWA
and two engineers to build or M pages
and we wanted to build things quickly we
want to learn as much as possible and
improve the experience so we ended up
spending a lot of time in that in that
puddle down there managing to come out
of it a couple of times slipping back in
I mean that's part of this experience
there's so many new things that you
launch things you'll you'll basically
need real users onto your you know your
soft launch product learn from it keep
iterating and improve as much as you go
I mean I'm happy to say that you know
towards the end we were actually out of
the all the problems we were very proud
of what we've built recently given the
team size that we have as well so back
in September we had no idea what to do
we decided with the help of Google with
the help of you know all the talks at
Google i/o as well some examples of
great PD blue is built out of India like
flip card and housing dot-com to be
specific we decided let's go with it
in about three months we actually
launched our first version of the PWA
this is two days after Christmas so we
basically want to make sure that even
though it's mostly you know shut down
time for most of the companies for for a
travel app like ours it's it's also the
time where there's a lot of last-minute
travel happening and a lot of people are
booking those flights and hotels
last-minute and Chinese New Year was
right around the corner so we were
expecting a lot of traffic and we
thought might as well bring them on a
better product less than two weeks later
we launched our first set of em pages
there were a few million of them for the
most popular page types and what
followed was basically again hell pretty
much mostly on tracking making sure that
you know the the new API is in the new
tracking mechanism that we've put in
place can replace what we had earlier
and still make sense out of it we did a
lot of user acquisition tests as well
which is fairly interesting and as of
last week I'm happy to say that you know
100% from about web users are coming
organically or through paid channels
onto our static pages are all on the new
mobile web journey that we've built out
so if you guys follow think with Google
just last week this this comes straight
out of the oven fresh basically is the
new industry benchmarks when it comes to
mobile rate speeds it's it's fairly
clear speed is everything and you know
as your page load times increase from
you know the five seconds to ten seconds
range your bounce rates increase
tremendously and when we started to
build out this product we wanted to be
in the one to three seconds benchmark so
let's see where we ended up being so
these tests were done on the Nexus 5
device on a--throw a slow 3G network so
before we build the new product we were
looking at you know anything between 10
to 15 seconds for the first meaningful
interaction onto our static pages and
for the core app itself which is a live
search app that we say for the new user
it would take about 9 to 10 seconds
maybe even more and in some of our
emerging markets and for repeat users it
was still around 5 seconds so after we
decided to build amp
and pages and the PWA this is what we
ended up so as you can see if when the
page is served directly from the Google
amp cache it's consistently loads in
less than a second which is I would say
a tremendous improvement on what we had
but even when the page is being loaded
directly from you know the VGO servers
we thanks to the new API as in the
optimization we did we were able to
reach you know the two to four seconds
benchmark these are all way very recent
results we still think we can improve
these further we we haven't at the time
just before this talk and on the PWA
itself we were able to reduce a new user
you know first meaningful interaction
time to less than two seconds and for
the repeat user thanks to service
workers you know caching the you know
the stuff that you need for the user of
any group comes back to your your app we
were able to reduce it to less than a
second I think we're very proud of this
but we think we can even do do better in
the next few months so I'll show you
what the results are I mean this is this
is fairly important very exciting stuff
that has happen in the last two months
for us for organic users that we acquire
I mean we will be looking at the entire
funnel from acquiring the user to
getting them to search details and then
the conversion that happens on the
partner side we were able to improve our
organic visits I don't think the key you
know the the rankings on google play
into it just yet because it's it's only
been a couple of months but on the
visits to search this is a part where we
were you know getting the user to do the
actual search on the PWA by filling the
form we saw that improved by 26% and the
search is to conversion which is
completely on the PWA side we saw the so
that improved by 39% and as a result we
saw conversions to our partner sites
which we care about in a partner's care
about and for the users as well it makes
sense to you know they came in looking
for something we were able to provide
them that so conversions went up to
almost double in within a month of
launch of this entire new flow so for
paid marketing we we have when we build
these em pages we didn't just think of
them as
you know an organic user play we also
want to do send paid traffic on to these
pages so we've done that in the past
just one or one and a half months and
we've seen a few interesting things
we've been able to reduce the CPC you
know the cost per acquisition of a user
by 10 to 20 percent very interesting
very very positive science for our
marketing teams our ROI has gone up 14%
an important thing to actually know
where is that by the time we did these
tests we had completely replaced our old
course site with the PWA so this when we
comparing these results this is purely
just using amp versus non amp you know
for acquiring onto the static pages but
the conversion was actually happening on
the PWA if you just look take a look at
the old journey versus the new journey
this ROI would definitely be in the 50
to 60% range interesting thing we did we
tried to send paid traffic onto the
Google hamp cache version for pages that
had been already been cached we thought
these pages will load quicker might as
well try that for at least four google
search engine marketing results we were
surprised to see there are wise were
actually not as high as we it was
actually lower than then not using the
Google amp cache version we're not 100%
sure of what led to it but we did notice
that if you see the link on the left and
the right the left link is basically the
amp cache version and it doesn't have V
go anywhere so we think maybe the users
you know it did not make sense to the
users to actually click onto these onto
these links right tracking is a very
important piece I think central from
eBay I was listening to him backstage
and I was pretty much nodding with him
the entire time it's a fairly important
thing for us to make sure you know that
on a per user level we are tracking your
users and all the metrics and all the
decisions are basically based on our
user metrics so that's one of the
limitations at least for us we've seen
that you know when the user coming from
the Google amp cache version comes to
the VGO site could potentially see that
user has two different users so you'd
see visits going up with actually not
you would see bounce rates going up
where they're actually not and the per
user metrics would all go down where
actually not so what we did to kind of
work around this was we used the amp and
Linux component and you know well
specifying the config dot JSON from we
go servers we use our data credentials
we included that just to make sure that
you know our server can can read and
write these cookies and then we would
pass this information on to a
third-party tracker important thing to
note away here again as mentioned by
senthil before this doesn't work on all
browsers specifically on iOS this is a
bit of a problem now and this is
something we also hope to work with the
amp team to you know improve over the
next year simple diagram explain exactly
what I said an important thing to note
is this stuff in you know that's
highlighted there if you want to
basically try this method out so as next
steps we basically we're not done yet we
it's so fairly early for us but we want
to do a lot of paid marketing tests you
know optimize our campaigns and even
change the design of the amp pages to
see maybe we can actually improve the
results even further we haven't been
able to do that yet but that's happening
immediately right now we based on the
results we've seen so far we're planning
to create more amp pages that would not
static pages before we've started to
think about pages like destination pages
for example the schedules pages we want
to try out having just one canonical amp
enabled version but we have to figure
out what to do with desktop users still
in the middle of that you know on the
PWA side we want to try a few things
like you know smart clock and web
payments API for a seamless login
experience then you know seamless
payment experience as well which is
fairly important to us we've tried it on
the apps we've seen some really good
results and we'd love to see them happen
on our PWA as well and then something
we're doing right now as we speak in the
next one one or two one and half months
we'll be launching our new desktop site
as well based on the same you know the
learnings that we've had from PWA we're
trying to reuse as much code as possible
but then separate sets of designs
separate sets of codebase but using the
PWA principles as well we're very
excited to see what we can do
that and last thing is a wish list like
we would love to work with the the amp
teams to support these custom form
elements that are very important for
ecommerce sites certainly important for
for travel sites like ours we've
launched ads on amps recently and you
know while the page looks fast the the
ads might take a couple of seconds to
load so even if you put the ads above
the fold there's a possibility that the
user has already scrolled down before
they had actually loaded so that's
something we would love to have work for
the amp team and see how we can improve
that further and the most important
piece that I've mentioned a few times is
tracking for us to take amp pages as you
know the the main destination for our
paid traffic especially if we would love
to basically make sure that you know we
know exactly what's going on especially
when the users coming from the amp cache
whether we can use the amp cache for
paid marketing at all yeah these are
some of the things that we plan on
improving in the next few quarters with
that I will end my presentation you can
reach me on my email if you have any
questions and I hope you found that
useful thank you so much
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>