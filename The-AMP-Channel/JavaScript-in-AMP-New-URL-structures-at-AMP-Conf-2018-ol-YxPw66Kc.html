<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>JavaScript in AMP &amp; New URL structures at AMP Conf 2018 | Coder Coacher - Coaching Coders</title><meta content="JavaScript in AMP &amp; New URL structures at AMP Conf 2018 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/The-AMP-Channel/">The AMP Channel</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>JavaScript in AMP &amp; New URL structures at AMP Conf 2018</b></h2><h5 class="post__date">2018-03-05</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/ol-YxPw66Kc" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so we have yet another one more thing
and I cannot promise you that it's going
to work but we want to allow all of you
to write JavaScript in your hand
documents or your damn Cup 2018 there
have been two exciting announcements
here for developers the use of
JavaScript in amp and also something
called web packaging we're here with
multiple engineering lead for am to talk
about some of these things how about the
whole idea of JavaScript and amp so I
know that you can use it a little bit
right now in love the context but the
whole idea was amp no JavaScript but now
possibly JavaScript
yeah so the idea was not M no JavaScript
the idea was good user experience
JavaScript being like a cheering company
programming language it's really hard to
reason about what it might do once you
have it and so me being like very
pragmatic first it's a critic will just
not have it yeah so you're always
thinking like you know we we might bring
it back in the future and so know that
future is closer right I mean I if
you've seen that my my talk about
yesterday I was very tough you know
careful about whether it's gonna work
because that's certainly not guaranteed
what we're gonna we're gonna try so this
is the work in progress still it's it's
a very much and security I imagine is a
prime concern here you want to have web
workers really be separate from the main
thread and not be able to do something
nefarious yeah maybe I should talk a
little bit about that work worker thing
in general so they are a way to
essentially have separate shared nothing
threads running your JavaScript and the
main thing or the workers is they don't
actually have access to the page Dom by
default so think you know Kent you can't
touch the dog and touched it up by de
ferran right bike or like using the the
native mechanisms everything you do
there cannot block the main thread so if
you decide for example is good right
while true you know your program won't
do any interesting things but you can
still you know interact with the
carousel on the main page if you have
more than one core
there has been no successful use of web
workers for the type of stuff we want to
do at scale a lot of people have
experimented with it but there's like
some sample apps and some maybe one or
two sites out there that use the
technology but it hasn't been applied at
scale so if I have JavaScript that in a
worker can I use things like reactive
angular now all of a sudden with them
it's basically the goal um especially
for you know we talked about the workers
and and and and how they have no access
to the Dom but so react uses virtual Dom
and so there is this like pretty clear
separation of where you might have a
virtual Dom on the worker and then the
code that actually applies it to the
real Dom runs on the main thread and
that's kind of actually how we envision
people to write code with this and so a
reactor is actually a really natural fit
we write our prototype with react that's
a rare compatible alternative that's
really small which obviously because we
care about performance is you know
something we also care about like
JavaScript file size so you can make
changes to your major or Dom over here
in the worker and then send a message to
the actual main thread saying make those
changes to the actual Dom I think I kind
of get it
that's exactly that's flight interesting
and then you were all structure is also
being different so people complain
sometimes my site on the cash lamp catch
says Google calm all that stuff so that
might go away yes and I'm super excited
about that because I guess contrary to
popular opinion this wasn't by design
right and this wasn't something the amp
team was super happy with in the first
place it was again just a technical
limitation so if I'm working behind the
scenes with the chrome team quite a bit
on figuring out how can we create new
web standards to enable showing the
actual publisher URLs even though we
would keep all of the benefits that
privacy sensitive pre-rendering etcetera
from the cache and web packaging as it
turns out seems to be a really promising
solution to this problem so what is web
packaging then what does that mean so
the idea is that a web publisher creates
a package of its content that includes
text and images and whatever else you
need to display a page and then you take
that package you sign it
cryptographically and and then you send
it to whatever caching infrastructure
you want an ende cache can serve that
package and the browser can figure out
okay the identity of that package comes
from another domain so it's been signed
by an project of orc for instance but
it's it's running from a cache and and
so that means we can show the actual
Earl of the publisher instead of the
cache because the integrity of the
package is still intact I think I
understand so map you serve from
somewhere else but we know because of
cryptographic signing that this actually
comes from a different domain the
browser feels safe and saying this is
from the other domain that's right even
though it's served by someone else it
really belongs to the original domain
and the chrome team actually has been
able to to develop a prototype really
really quickly and we saw on stage
yesterday this is working in a build of
Chrome and so I think it's quite
promising I think we'll see it in chrome
fairly soonish but of course the problem
is that we want every browser to support
it if that works out of basra support
this the web packaging can be used and
not just an amp but in other contexts as
well
yes exactly so I think it has a huge
number of use cases it really makes web
content portable and it makes it
portable in a way that preserves
security preserves identity and that's
just good for the entire web
thanks for being here Paul this has been
live at M comes 2018 to see the talks
themselves and to see more of this tune
in or subscribe to the amp Channel</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>