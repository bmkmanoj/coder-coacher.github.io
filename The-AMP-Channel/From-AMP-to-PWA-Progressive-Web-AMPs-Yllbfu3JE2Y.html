<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>From AMP to PWA: Progressive Web AMPs | Coder Coacher - Coaching Coders</title><meta content="From AMP to PWA: Progressive Web AMPs - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/The-AMP-Channel/">The AMP Channel</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>From AMP to PWA: Progressive Web AMPs</b></h2><h5 class="post__date">2017-05-04</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Yllbfu3JE2Y" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">if you've learned about progressive web
apps you might know that the core of it
is a technology called serviceworker a
client-side proxy that sits between your
server and web apps to provide things
like stars the loads and offline
functionality but what have you built
the most amazing progressive web app and
nobody discovers it
the problem with service workers is that
they won't make your first page load
fast on a cold start your serviceworker
will only activate on the second page
load even though the serviceworker api
allows you to cache away all of your
site's assets for an almost instant
subsequent load like what meeting
someone new it's the first impression
that counts if the first low it takes
more than three seconds our latest
double-click study shows that more than
53% of all users will drop off
don't feel too bad though the overall
landscape of today's web looks a lot
grimmer the average mobile page loads in
about 19 seconds which 77% of it taking
longer than 10 during to 114 survey
requests 50% of which are act related
yeah take a moment to wipe away your
tears
turns out we found a solution for the
first page load and surprise surprise
we call it amp amp short for accelerated
mobile pages is an eco system consisting
of web components library that allows
you to declaratively write HTML we call
em HTML because it's both a superset and
a subset and M caches basically CD ends
are more technically correct reverse
proxies that accelerate the delivery now
if you've already read about it
individual advantages and disadvantages
of progressive web apps versus amp you
have surely struggled with this question
before amp or progressive web app
instant delivery and optimized delivery
or the latest advanced platform features
and super flexible application code in
the end what matters is the user journey
let's first hop to your site if you're
almost instant and the browsing
experience should get more and more
engaging afterwards and an progressive
web app are both critical components to
make this happen and pages for the first
navigation and your progressive web app
for the onward journey there are two
ways of combining the two steps either
ccall amp up and amp down now amp up is
the background bootstrapping off your
progressive web app shell
while the users enjoying your em page
and then number two em down describes
reusing em pages as a data source for
your progressive web app so the basics
with em up out of the first click will
be an amp page usually served from the
amp cache but any links on that page
will navigate to your progressive web
app now normally that second click would
still be considerably slower than the
instant feeling pre-loaded first click
to your amp page but it's a powerful
component bacon-wrapped the amp
installed service work attack it allows
you to install your serviceworker for
your origin yes even when your amp page
is served from the amp cache that means
while the user is reading the article
the serviceworker can warm up and
precache the entire progressive web app
app shell and some initial data when the
user now clicks on any link on the page
or call to action at one your
progressive web app shows up instantly
start fast stays fast this is what I
call amp up but now you clean the
progressive web app and chances are most
of you are using some Ajax driven
navigation that fetches content by a
JSON now you can certainly do that but
now you have this crazy infrastructure
needs for two completely different
cutting backends one generating amp
pages and one offering a JSON based API
for your progressive web app gam team
has asked themselves the logical next
question what if we could dramatically
simplify back in complexity by ditching
the additional JSON API and instead
reusing amp as a data format for our
progressive web app we started with a
proof-of-concept many months ago and
iterated on it for a while rewriting
many parts of amp to make it a reality
so how do we do it the process looks
like this the progressive web app
hijacks navigation clicks then doesn't
Ajax requests fetch to request a 10 page
search
puts the content into a new shadow root
and forth tells main amp library hey I
have a new document for you check it out
which in other terms means calls
attached arrow docks on the runtime and
then you have things like shadow slots
and advanced CSS classes to insert
advanced widgets and functionality into
your amp pages from the progressive web
app now of course you can do that last
step manually by rekhs in the source of
the amp page the key is that the above
is easy for
okay finally time for even more advanced
pattern I call an economic code because
it's up-down left-right all the things
so we have a pretty good experience now
but if you're in the progressive web app
copy link and share on Twitter that link
will open the progressive web app
directly and for a new user who doesn't
have a warm up serviceworker cache it
won't feel instant that too is a problem
we can solve in the final step of our
development journey instead of creating
a separate earth space for the
progressive web app for instance PWA
domain.com slash article like we did
before we reuse existing ampoules to
load the progressive web app on the
site's origin all we need to do for this
is to listen for navigation requests in
the serviceworker then instead of
serving a cached amp page we serve the
cached PWA shell which then doesn't
exceed our to fetch requested amp dock
it means that in just one request your
progressive web app will show up along
with the requested content best of all
we now progressively enhance our amp
pages with our progressive web app and
showing that no matter what your users
will get a super-fast experience for
browsers that do not support
serviceworker
they'll simply see amp pages so now one
additional thing we built is called
fallback or rewriting and this means
that even for browsers that do not
support amp caches we give you the
ability to rewrite links to another
space that is fallback oil for your
progressive record and there you got it
we successfully combined amp with a
progressive web app now the user always
gets a fast experience no matter what
your site is progressively enhanced you
have less back and complexity because
you have just one data source and profit
from the building performance of amp
everywhere even in your progressive web
app before I leave you keep in mind this
is just one pattern to build sites and
what works for everyone
you probably shouldn't build the next
airhorn or Gmail with it but focus on
size I have lots of leaf nodes
individual size with static content but
all means find out if the pattern is the
right one for you and feel free to get
in touch to discuss
check out our react based demo and learn
more about amp and progressive web apps
individually on imported org and
developers at Google Chrome slash web I
can't wait to see what you will build
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>