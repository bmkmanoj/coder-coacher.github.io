<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Angular Authentication Tutorial - 22 - Generating JWT in the back-end | Coder Coacher - Coaching Coders</title><meta content="Angular Authentication Tutorial - 22 - Generating JWT in the back-end - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codevolution/">Codevolution</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Angular Authentication Tutorial - 22 - Generating JWT in the back-end</b></h2><h5 class="post__date">2018-04-09</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/viX4IqaO3iU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">in this video we will see how to
generate tokens in the backend when
users either register or login as I
mentioned in the previous video we will
be using the JSON web token package so
in the terminal
navigate to the server folder and then
run the command NPM install JSON web
token - - save once the package is
installed open the file API Gia's
which is present in the server folder in
API DOJ's first required the package so
Const dot is equal to require jawed next
let's generate a token in the register
API so in the register API after saving
the user successfully first what we have
to do is create the payload the payload
is an object and will contain the
registered user ID so let payload is
equal to an object and by convention the
key is called subject and then the value
will be the registered user object ID
registered user dot underscore ID now
that we have the payload let's sign a
token and generated let token is equal
to dot dot sign then the first argument
is the payload and then the second
argument is a secret key
now the secret key can be anything I'm
just going to have the secret key as a
string secret key so now we have the
JSON web token stored in this token
variable the last step is to send this
token as an object instead of the
registered user we've been sending so
far so object and then token using es6
syntax rest dot status dot send token as
an object all right
the register API now responds with the
token instead of the registered user
details let's add similar code in the
login API
so when valid credentials are entered
first let's create the payload that
payload is equal to an object the key is
subject the value is going to be user
dot underscore ID and then let token is
equal to dot dot sign the first argument
is the payload and then the second
argument is the secret key and finally
instead of sending the response of user
details let's send an object containing
the token and that's pretty much all the
code required to generate a JSON web
token and you know what this has to be
JSON web token and not jawed JSON web
token is the name of the package all
right now let's restart the server and
test the two api's so open the terminal
run the command node server go back to
the browser in the registered component
enter the details I'm gonna go with Y at
Y calm and then the password is y and
I'm gonna click on register and you can
see that in the console we have an
object that contains the token the key
is the string token and then the value
is the JSON web token and if you can
observe closely we have a dot over here
and then again a dot over here so we
have three parts separated by dots so
it's a valid JSON web token similarly we
can also test login so navigate to the
login component into the details I'm
gonna go with Y at Y calm and then the
password is why again click on login and
you can see that the exact same token is
generated from the server so token with
three parts separated by two dots
alright now that we are able to generate
a token in the backend and send it
across to the front-end in the next
video let's see
how to store these tokens in the
browsers local storage</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>