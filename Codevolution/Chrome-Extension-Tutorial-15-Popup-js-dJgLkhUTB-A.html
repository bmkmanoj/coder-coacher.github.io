<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Chrome Extension Tutorial - 15 - Popup js | Coder Coacher - Coaching Coders</title><meta content="Chrome Extension Tutorial - 15 - Popup js - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codevolution/">Codevolution</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Chrome Extension Tutorial - 15 - Popup js</b></h2><h5 class="post__date">2016-09-18</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/dJgLkhUTB-A" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so when we are writing the functionality
we need to keep in mind two scenarios
the first one is that the user is for
the very first time using our extension
in which case the total is going to be
zero so when the user enters an amount
we're going to add it up with zero and
produce the new total the second
scenario is when the user is using our
extension for the second or third or
subsequent times in such a case there
might be an existing total for example
100 and when the user enters an amount
we need to add that with the existing
total to produce the new total so let's
write our JavaScript keeping in mind
both these scenarios now I'm going to
visual studio code and create a new file
pop-up pop-up da GS and we are going to
be making use of jQuery to listen to the
click event on the spend button so we're
going to start off a dollar and we're
going to have function and we're going
to listen to the click event on the
spend button so first we select the
button
so hash spend amount dot click so when
we click we need to do something what is
that we're going to have a function and
excuse me so we need to get the existing
total if it is there from the chrome
storage and for that we make use of a
chrome API so chrome dot storage dot
sync dot get this is the method and the
first parameter it takes is the variable
value and this chrome storage for which
we need to retrieve the value so total
is going to be a property and it expects
a callback function as the second
parameter so all chrome api's are
asynchronous in nature so we are going
to have callback functions
now this function is going to have a
budget object this budget you can name
it whatever you want but I'm just naming
this object as budget because it is
relevant to our extension so over here
we are going to first initialize our new
total to zero and then have this budget
object so budget dot total so this total
is existing then we need to add that to
the new total so new total plus equals
plus equals budget dot total and we also
need to make this as an integer so parse
end budget auto rule right now we have
handled both the scenarios if there was
a total we have added it to new total
otherwise a neutral is going to remain
zero so now for the user entered amount
first we're going to store it in a
variable so dollar we're going to select
the input box amount dot Val so whatever
the user has entered we are storing it
an amount and if the user entered
something after all
so if ammount then we need to update a
new total so neutral plus equals parse
end to have an integer amount so now we
have our new total in place so we can
set or send this new total back to the
chrome storage so another chrome API
crow dot storage dot sync but this time
we are setting it so dot set and this
expects an object the first one is a key
or the variable name in the chrome
storage so we need to set a variable
called total because that is what we are
getting over here and we are going to
set it with the value new total so once
we have set the value we need to update
our UI so dollar hash total and then we
are going
you say dot text with new total so this
is going to update the new total on our
pop-up HTML and finally we are going to
clear out the input box
so hash ammount dot Val empty alright we
have our pop up GS in place let's
quickly understand from top to bottom
what we are doing
so we have our submit button on the
pop-up HTML and the idea is spend amount
so when the user clicks on this we first
create this chrome storage to check if
total already exists if it does exist
then we are adding it with new total
otherwise it is going to remain zero
once we are done with that
we are going to add what the user has
entered in the pop-up so new total is
going to be updated with this amount and
finally we are going to set this total
back in chrome storage and update our UI
so now let's save this and we need to
reload the extension because we did set
the permissions for chrome storage so
we're here I'm going to enter amount 100
it's going to update 400 I was using
this for another extension and I might
have said it but anyway let's do it
again hundred and it's going 200 it's
going to be 500 let's add 500 and it's
going to say thousand but here's a catch
I'm going to close the pop-up and open
it again and it's going to say 0 so what
we need to do now is anytime we open the
pop-up we need to get this total value
so for that we do the exact same thing
we're just going to say chrome dot
storage dot sync dot get the first
parameter again is going to be total the
second parameter is going to be the
callback function so function is going
to take an object called budget and we
are just going to update dollar the
total dot tag
but budget dot total so all we are doing
is any time the user enter opens the pop
up we're just making sure this turtle is
already displayed I'm going to save this
and now when I open this there you go
the total spent as thousand I'm going to
enter 100 it's going to add I'm going to
close this open this again and there you
go
thousand hundred so working pretty
pretty good I'll see you guys in the
next video</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>