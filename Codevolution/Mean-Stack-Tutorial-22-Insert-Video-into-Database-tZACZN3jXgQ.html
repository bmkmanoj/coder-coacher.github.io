<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Mean Stack Tutorial - 22 - Insert Video into Database | Coder Coacher - Coaching Coders</title><meta content="Mean Stack Tutorial - 22 - Insert Video into Database - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codevolution/">Codevolution</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Mean Stack Tutorial - 22 - Insert Video into Database</b></h2><h5 class="post__date">2017-04-30</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/tZACZN3jXgQ" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">okay guys now that we know how to fetch
videos from the database let's learn how
to insert a new video into the database
using angular service now first we need
to add all the UI elements for creating
a video so let's go back to visual
studio code and over here in with your
Center HTML just above this list video
list tag I'm going to add a button to
create a new video so this is going to
be a button they're going to add some
styling and then this is the type this
button again bootstrap styling and then
it says plus new videos so that when we
click on it we can insert a new video
all right and then just above the video
detail HTML I'm going to add a form to
submit a new video so within the class
column sm9 I'm going to add a div tag
this div tags is going to have a heading
v new video and then a form which is
going to get submitted to insert a new
video into the database now what does
this form have you're going to get a
reference to this form so hash form and
is equal to ng form and then a class is
equal to well for bootstrap styling now
we have three input elements the first
div tag is going to be for the title the
second one is for the URL the third one
is for the description each of them have
an input element of type text now each
of them also have a class form control
that is butchart styling and then only
the title and the URL are required we
also assign a name title URL and
description with also add the attribute
ng model so that the values within the
input fields are accessible using this
form reference and finally at the bottom
we have a button which is of type
submit' which says safe all right
so now that the UI is done let's create
the method in video dot service that
will insert a new video into the data
now to make a post request we need
header and request options from HTTP so
over here we are also going to make use
of headers and request options so let's
import that now the URL to make a post
request so over here you're going to
copy paste this URL again so private
post URL slash API slash video so again
if you recollect this was configured in
the Express server and finally we are
going to define the method that is going
to insert video so let's paste it let's
see how this works that we also import
videos to get rid of this red squiggly
alright just like get videos to get the
videos from database we have a video
method to add a video into the database
so this parameter is nothing but the
videos that they will be inserting
please specify the headers you are going
to say that the header is content type
application slash JSON and then we make
it available in the request options so
inside the request options we have an
object headers signed to these headers
and then we invoke the first method on
the HTTP service we pass in the post URL
we pass in JSON doc string fight of this
video so the video that we need to
insert they're going to pass that then
the options now if you remember again
when we insert a video into the database
we are going to get back a response and
that response is nothing but the video
that was inserted so we are going to map
that response to JSON right now that the
add method is add video method is ready
let's see how we can call this from the
video Center component so go to video
Center component dot type script file
and over here when we submit this form
sorry let's go back to video Center
component and when we submit this form
we
can get hold of the ng submit event so
over here
ng submit event and then we assign it a
handler so let's call this on submit add
video then we can pass in the form
values so for dot value so anytime you
click the submit button
so the Save button this particular
engine submit event is raised so what do
we want to do what do we want to do then
you want to create call this on submit
add video method passing in the form
values these form values are going to
contain the values of the three input
fields all right so let's define this
handler on submit add video in the type
script file so over here I'm going to
scroll down to the bottom and over here
I'm going to paste the code and let me
explain how it works so on submit add
video we get the particular video that
was submitted we call the video service
add video method passing in that
particular video now of course in order
to get back the data we need to
subscribe to that service and when we
subscribe to the service we get the
response of the new video that was
inserted now it is not enough when we
just insert into the database we also
need to reflect that in the UI so in the
videos array we are going to push this
new video so that the UI also gets
updated and then we are going to set the
new video is equal to the selected video
so that a detailed view of the newly
inserted video is going to appear
alright now let's go and test this in
the browser so first open command prompt
and run ng build now let's open the
browser refresh this and there we go we
have the new we have the new video so if
we have the new video button and also
the form to submit a new video but if
you notice the form is being displayed
by default so this new video button has
no
purpose whatsoever and if we click on an
existing video the detail appears below
the form so let's try to improve this
let's go back to videos to your code and
let's add a property that gets toggles
based on this new video button so when
you click on this the value gets tumbled
now this property is going to ensure
that either the form or the details is
shown and not both at the same time so
in media center component type step I'll
add a new property so over here I'm
going to say private hide new video of
boolean type true so by default we want
to hide the form that is responsible for
creating a new video and then over here
that defines a method new video and this
is going to set hide new video to false
and let's also add this property to the
HTML so in video centre HTML or here in
the div tag they're going to say star
and Jesus is equal to not a hide new
video and similarly for the video detail
component in the NGS directed you are
going to show this video only if we are
going to show the details only if there
is a selected video and not off hide new
video sorry and HI new video and over
here for the new video button they're
going to listen to a click event and we
are going to toggle or we are going to
fire the new video method that we just
defined and finally in video Center
component es when we select a video we
want to hide the new video so hide new
video is equal to true all right so now
we can build this and let's see ng build
so now let's go back to the browser so
now that you see the create new option
is not available by default when I click
on plus new video button we get the new
video form when I click on a particular
detailed view the new video form
disappears then the detailed view
of the particular corresponding video is
seen so let us actually insert a new
video so I'm going to give this demo
title demo URL and then a demo
description and then I'm going to click
on save and if you check there you go
so this demo video that we just inserted
was set from the database but there was
no indication as such that the video got
inserted so what we are going to do is
as soon as you click on the Save button
let's close this form so let's go back
to visual studio code and in media
center component they're going to same
copy paste this line to hide mere video
to true so now let's build this one
final time so NJ bills let's go back to
the browser refresh this and now let's
add a new video
so a C is C is V when I click on sale
the video disappears and then the
detailed view appears so the title the
URL and the description of the newly
inserted video the iframe of course
doesn't display a video because this is
not a valid URL
alright so that is how you insert a new
video into the database let me go over
the flow one more time because this was
pretty complicated now in the video
center component we have a button to
click that says new video when you click
on this new video button this particular
form appears now you fill out the form
and you click on the Save button
what happens when you see click on save
this is of type submit' so in this
submit even gets fired and what happens
on when you capture this you're going to
call on submit add video method tapping
in the form values so what does on
submit add video method do it's called
the video service add video method and
what does that do it is going to make a
post request to the server and then it
is going to insert the particular video
that was passed then we get back a
response of that inserted video
so back here we subscribe to that
response and then we push it to the
array so that the UI gets updated then
we make sure that the hide new video
property is set to true so that the form
disappears and then the selected video
is set to the current video so that so
that the detailed view of that video
appears now if this was a bit too much I
suggest you watch it twice or Trice
and I'm confident that you're going to
get the hang of it alright so that is
how you insert a new video into the
database in the next video
in the next lecture let's see how to
update a video in the database so thank
you guys for watching and don't forget
to subscribe</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>