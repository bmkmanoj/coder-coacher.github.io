<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>MongoDB PHP Tutorial - 6 - Update Document | Coder Coacher - Coaching Coders</title><meta content="MongoDB PHP Tutorial - 6 - Update Document - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codevolution/">Codevolution</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>MongoDB PHP Tutorial - 6 - Update Document</b></h2><h5 class="post__date">2016-06-28</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/yf8qr0i34Xc" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">okay guys in this video let us see how
to update documents in a collection now
what I've done as I have edited the fine
dot PHP by removing the search criteria
so as to find all the documents within
this collection so when I run fine dot
PHP I have all the five documents eaten
Andrew Brad Chris and Debbie so let's
say now we want to update a particular
document so let's say we want to update
the age from 27 to 28 so I created a new
file called update dot PHP and I'll just
included these four lines of code it's
going to go all the way all the way from
instantiating the client class to
selecting the company database and then
the employee collection nothing new so
far so now we need to update the
documents which have age 27
- H 28 so let's go with you taller
client sorry dollar update result so
this is going to be a variable that we
are going to store the result of the
operation so dollar result is equal to
now we are going to be performing the
update operation on the employee
collection documents dollar employee
collection and then update one is the
method to update a single document now
this update one method is going to take
parameters the first one as the
condition for selecting the documents
that need to be updated so pretty all
the documents that have an age 27
now after retrieving the documents we
need to set so dollar set now it's going
to be another array where we specify
what needs to be said so set the age to
be 28
okay so they'll retrieve all the
documents which have age 27 and set them
to 828 now we can go ahead and use
printer and then okay what so matched
MATC HDD and percentage the document
slash and we can use the update result
over here so dollar update result and a
method it provides is the get matched
count so the number of documents that
were matched and we can also use print F
modified modified percentage the
documents now can't we can use the
update result but the method is going to
be get modified
count nonce about that right modified
count now when we save this okay so make
a note of this we have Andrew age 27
Brad 27 both of them 27 so let's go
ahead and execute update dot PHP so we
have matched one document modified one
documents and why is that so when i
refresh it so what this update one does
as it is only going to stop with a
single document so over here we have
Andrew which had age 27 now updated to
28 but Brad whose age was 27 remains 27
so it is going to search by this ID
field or it is sorted by the ID field so
the first document that was match was
Andrew and age was updated it is going
to leave Brad alone because we are
specified update 1 now we can also
specify we can also do an update many
method to update multiple documents at
the same time so now let's say we have
okay so we have MongoDB for Andrew and
MongoDB for Brad so let's try to update
these two documents simultaneously I'm
gonna comment this okay
however I am going to come up your pace
that with some minor changes now update
one becomes update many and let's say we
want to update based on the scale so a
skill MongoDB so retrieve all the
documents that have a skill MongoDB and
now in the previous update we saw that
we could update an existing field but
here's the thing when updating we can
also create a new field for the document
so let's say Andrew and Brad who work on
MongoDB they've got a new manager and
his name is Tim so we just say set
manager to Tim now let's save this
update result get matched count and get
modified count so if you check here we
right now don't have any other field
after MongoDB so let's execute this
there we go Matt's two documents
modified two documents so when i refresh
this we have a new manager for Andrew
Tim and a new field manager for Brad Tim
so that's how you modify multiple
documents also when I really run this it
says Matt two documents modified zero
documents so it's always possible to
match a certain number of documents
however the modified number of documents
might vary for example right now where
we saw we match two documents because we
are saying Massey documents which have a
can MongoDB and we have two documents
over here we are saying set manager to
Tim now this is something that's already
existing so it is not going to update it
so the modified count remains zero so
that we match two documents but modified
zero documents so that's how update many
works now one last thing is there's also
a method called replace one where you
can replace an entire document based on
a certain matching criteria so we can
have dollar replace result and this is
going to be equal to dollar employee
collection the method is going to be
replaced one and this again is going to
take the search criteria okay so what
shall we change right now okay let's say
we want to replace the document that has
ID for so underscore ID for and what do
we want to replace a document by so we
want to still have ID
so ID for now instead of having all the
remaining fields such as name and then a
skill and then age what I'm going to do
is just say favorite color and this is
going to be blue now let's save this
okay and we can also again have print
okay let me just copy this copy it
paste it change this $2 to replace
result and then dollar replace result so
save this let's go ahead and okay do we
have everything okay okay okay so
refresh it so we must one document
modified one document so observed Debbie
over here we had ID name age skill
refresh we have ID for a red color blue
so we replace the entire document with a
new document that we have specified over
here so that's pretty much it about this
video we have three methods we learned
update one to update a single document
update many to update multiple documents
and replace one to replace a single
document so thank you guys for watching
and I'll see you in the next video</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>