<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Angular Authentication Tutorial - 9 - Login API | Coder Coacher - Coaching Coders</title><meta content="Angular Authentication Tutorial - 9 - Login API - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codevolution/">Codevolution</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Angular Authentication Tutorial - 9 - Login API</b></h2><h5 class="post__date">2018-03-19</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/PganxPVihJw" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">in this video let's create the login API
we begin by creating a new method to
handle the request that this will be a
post request to the endpoint login and
as a callback again we get access to the
request and the response within the
function the first step again is to
extract the user information from the
request body so let user data is equal
to request dot body so we have the email
and the password stored in user data
variable next we need to check if the
email address exists in the database or
not only then can we proceed with the
remaining steps and the way we do that
is using the find one method that Mongo
is provides on the model the find one
method accepts a condition and returns
exactly one document from the database
that matches that condition for our
scenario we need to find exactly one
user who has the same email ID as the
request email ID so we are going to have
user which is the user model dot find
one and the condition we specify is that
the email in the database so email
should be the same as the email
submitted from the front end user data
dot email and then the second argument
is a callback function that either gives
an error or the user that matched the
condition if at all there is an error
let's just log that to the console so if
error console dot log error else if
there is no error we first need to check
if we did or did not find a user
matching the email ID so if not user
that is if there was no user found we
sent a status of 401 so rest dot status
of 401 with the message invalid email
however if we did find the user we need
to check if the passwords match or not
so else if user dot password is not
equal to user data dot password so if
the password in the database is not
equal to the password submitted from the
front-end we again send a status of 401
with the message invalid password if
both email and the password match we
respond with the status of 200 and send
the logged in user details rest dot
status of 200 dot send the user details
and that is a login API first extract
the user data and then create the
database with the email ID check if the
user exists with that email id then
proceed to verify the password and then
proceed with returning the user details
so let's restart a server and test it in
postman I'm going to open the terminal
again control C and then node server</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>