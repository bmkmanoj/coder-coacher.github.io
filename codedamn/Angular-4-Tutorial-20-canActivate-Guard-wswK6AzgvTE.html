<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Angular 4 Tutorial 20: canActivate Guard | Coder Coacher - Coaching Coders</title><meta content="Angular 4 Tutorial 20: canActivate Guard - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/codedamn/">codedamn</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Angular 4 Tutorial 20: canActivate Guard</b></h2><h5 class="post__date">2017-06-15</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/wswK6AzgvTE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so what is going on YouTube welcome to
your xx angular tutorial my name is may
hole and in this tutorial we are going
to take a look at what gods are in
angular and how actually we made use of
on God in our angular login app so as
you can see that we have created a god
earlier which is called earth God God
well that's weird but anyways so what
God essentially is in angular is that
pretty much you can think of like user
as a person and route as a door right so
God now make sense a God is standing in
front of a door so if the user wants to
go to that route the God has to allow it
first right so if the god just disallows
it then the user cannot go into the door
if the god directs the user to another
door then user has to go to that door at
least for that moment right so there are
right now five six types of gods in
angular but we're going to stick to can
activate for now because that's pretty
much what we need for authentication
purposes so first of all to create a god
what you have to do is go to your
command line and write ng generate God
and then your God name which would be
free from the word card just don't do
auto guard because it would then create
something like all the god god right so
angular considers that include ur to
leave that earth the guard would write
so once you have done that angular would
automatically generate a guard file for
you which is the spark RTS and a spec
file which is for unit testing but this
got a concentrate on this one so what we
have in here if we take a look is that
we have a can activate method
which is which record by implementing
this interface and this interface video
just provides just writes the definition
that you have to do with human this
thing right and now what we are doing
right here is that we are passing the
two arguments the next which is the
activities routes snapshot and the state
which is router state which are
something we do not need to worry about
right now we'll come back to that later
but what we have is that angular expects
us to return either an observable
boolean or a promise or just a boolean
right so it's up to you right now since
we know that our code would return a
boolean and it would be synchronous and
not a promise then we can just get rid
of these two and just leave it with the
boolean right so now what happens is
that we are just returning this dot user
dot get user logged in which is again
our state right here our service rather
and it just sets the user log is user
logged in to true when the user logs in
and pretty much lets the guard know that
yes the user is allowed to walk into
dashboard in our case right so we are
returning true here for the logged in
user now once this returns true we go
back to app module and inside the routes
where we have configured our routes we
take a look at this can activate or god
god right so this can activate tells
angular that this route this part of the
route is predicted by this gun right now
so it would not let user pass through or
pass on to dashboard if we can activate
does not allow to do so right and again
one more thing that you need to include
your route into providers just like we
did for the service so once you have set
this up and you are returning boolean
values from here we can actually set up
conditional routing right
instead of just you know bluntly
rejecting the user what we can do is
very much navigate the user way as well
now for that what you need to do is
include the router and as a dependency
and we just do router here ass router
and there we will need the router again
from the angular router right and once
you have done that or you can do this
pretty much just say this dot route dot
navigate router how we can just say home
in here right and we can just make it
private as well so when we save this now
if we take a look in the browser and try
to reload the app and access dashboard
you can see that we get redirected to
home and again you can just throw a very
simple console log here and say you are
not authenticated so that we can just
look and that message right so we just
take a look at dashboard and we get this
you are not authenticated minute and we
are redirected to the home page right so
again this god runs before your mod your
cons component actually loads right so
it doesn't require your component to
load all of that HTML and all of that
probably CSS as well and God runs first
and you can pretty much see that by
going to your dashboard component and
seeing that this code never executes we
never get another is user logged in
false in our console because this code
never fires we just redirect the route
to redirect or user this
or loading the component so that was a
quick demonstration on how the guard is
working for our angular application and
that is just one guard can activate
there are other guards as well in
angular which we'll take a look
accordingly as we will require them in
our application so that is all pretty
much for this tutorial and if you liked
it then please don't forget to subscribe
and thank you for watching I'll see you
then in the next one</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>