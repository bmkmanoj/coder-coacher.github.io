<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Google Chrome App Tutoriual 30: desktopCapture API - Part 4 | Coder Coacher - Coaching Coders</title><meta content="Google Chrome App Tutoriual 30: desktopCapture API - Part 4 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/codedamn/">codedamn</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Google Chrome App Tutoriual 30: desktopCapture API - Part 4</b></h2><h5 class="post__date">2015-06-20</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/7LIwinh1AIQ" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">okay now we have a valid ID from the
user that is from the chrome itself to
the application therefore we can start
with the manipulation of the screen
recording and do some encrusting stuff
so let's see what we can do next go
ahead and type navigator dot WebKit get
user media and it'll accept an object
now right here you need to specify
whatever you would like to have I mean
the access you would like to have by the
users for example you just simply cannot
use the microphone without their
permission so here audio if I set it to
true then google chrome was first of all
ask the user to grant access to the
microphone to this application and
obviously we need something else video
as well now here's the tricky part now
the video would be an abject and right
here you have to write the keyword man
de tree because this is mandatory the
video access should be mandatory answers
we already have the permissions for the
video we don't need to pretty much do
anything here except for specifying what
we need to do with the video we are
getting
now right here you need to specify what
is the source of your video which you
are getting from the user and since we
are just using the text all right now I
am just using the text job right now so
my chrome media source would be simply
dekstop and
chrome media source ID now this ID would
technically let the browser know what we
are talking about what we were talking
about so I can just get rid of this hole
and just pass the argument itself right
here now we are pretty much done with
this first object right here and what we
can do is we can pass another argument
right here which would be our callback
function again so let's say I'll just
name it start stream start stream would
be the callback function whenever this
thing is ready this function would be
called off so now let's just work on
stats tree
and right here we need to do real job we
were supposed to do in this extension
ok so now first of all we need some
information from this function passed
into this function as an argument so
this would be the stream now actually
you need to know that when this function
is being called when this function this
function is being called then actually
the user screen is being recorded so
inside the stream is a blob data of this
screen capture which is going on in the
background so what we can do is we can
just simply pick up this video right
here let's give it an ID of screen mean
oh this should be mean screen but
anyways get element by ID screen main
and this is our video container and i'll
just give video dot SRC equals and we
need to pass in the blob data to this
SRC so this video will actually fetch
the screen life from our blog URL and if
you don't know what is blob this blog
would right here it's just binary binary
large of chick and this is just used to
you know transfer
large data like videos and audios and
you can say pictures may be inside the
HTTP headers and protocols so whenever
you see the word blob this should click
you that the data type associated is not
kind of characters or integers or
numbers or whatever the data transfer is
happening over like images or videos are
being transferred so let's just get rid
of this word right now and fill it with
some meaningful data now here's what we
need to do type URL dot create or check
URL and fasten stream now what we are
doing here is I'll just show you so
inside your console
type URL now this URL is an inbuilt
function of JavaScript now this function
would allow you to basically ok let me
explain it this way so let's stay let's
say that this function right here the
user grants access to the extension to
record their screen and user selects the
entire screen now we have got something
in this ID as chrome media source ID now
this function is called as a callback
and the stream that what the stream
contains it actually contains a video
file it actually is a video file as a
you can see inside a binary as a binary
data because all of the happenings all
things are transferred in ones and zeros
and all induce so this is a video file
or real video file and with the help of
this line right here what we are doing
is we are simply converting that video
file into a valid valid URL so that like
Chrome extension my video or whatever
valid URL so that we could actually use
that on our web page to see what's
actually being recorded so this creates
a valid URL for this video which would
eventually assign this to
this video HTML tag and the reason i
have added autoplay attribute to this
because you know you guys should
probably kiss by now that autoplay would
play the video automatically so that it
doesn't get stuck on the first frame
itself ok enough soft dark so let's get
back to the work now we could actually
do something like stream dot on ended
now stream that on and it would be like
a callback function whenever the video
or the user decides to close the videos
so I'll just console.log this as video
recording session ended and right here
we just start console.log receiving
our ECE IVIG data from user
that's pretty much it let's see that in
action so I'll just reload this window
let's get going to launch inspect
element or sheer console let's click on
start recording I'll just select and a
screen let's click on share okay so we
have got an error here enter in the
response to desktop capture fail to
execute three arguments required but
only two prisons okay so which one are
we missing right here now let's see okay
though I guess it needs one more
argument and this should be pretty much
failed stream now this would happen
whenever there's some kind of technical
glitch or any problem that the user has
selected a screen which is no longer
available now so then this function
would be called so let's just quickly
create this function as well so I'll
just console.log some sort of error
who cares and it's pretty much it
let's reload this again
here we go
inspect element in place console ready
let's click on the button select entire
screen share
ok so we are actually calling this
function some sort of error alright so
let's see what's happening
okay so
um
this is a kind of error so maybe there's
a typo because I don't think that
there's any syntax error anywhere so
this is the functions actually coming
here because otherwise it won't call
this function this failed stream so
there's no syntax error here otherwise
the JavaScript would break audio true
mandatory
oh oh yeah you see that I just
misspelled the source inside the cruel
media source ID and that bug probably
costed us around three to four minutes
so okay said let's reload this again and
I'll just click on launch inspect
element set it up start recording entire
screen share
okay well bad luck
failed streams chrome media source
desktop
okay that's that's that's embarrassing
I don't know where's the error now
okay but who's calling this function
okay so maybe let's just try to change
this to false
and
just close this window let's reload this
let's launch this
and I just change that to false because
we were not prompted for microphone
access so let's just click on start
recording entire screen okay so here you
go so there's a mini version of screen
which is being recorded and you see that
here's a little notice which appears to
us that your mind extra capture is
sharing your screen and if I just zoom
this video a little bit up with 800
pixels by 450 pixels in height you see
that we are creating a kind of a
infinite loop inside a window inside a
window which is probably would be
happening but once I minimize this then
actually we are recording everything
nicely in a video and this is the blob
URL which is being generated by here you
go this thing right here so this helps
you to feed feed your fetch your latest
video within your
application so I'll just take a look at
why isn't the audio working and what do
we need to do to make that work and then
I'll see it see that and will inform you
guys in my upcoming tutorials so that's
it for this tutorial and stay tuned and
don't forget to subscribe and that's it
for this tutorial pretty much so I'll
see you there next time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>