<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Chrome Extension Tutorial 3: Script Environments | Coder Coacher - Coaching Coders</title><meta content="Chrome Extension Tutorial 3: Script Environments - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/codedamn/">codedamn</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Chrome Extension Tutorial 3: Script Environments</b></h2><h5 class="post__date">2015-04-25</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/y3y4W3g12cU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello youtube and welcome to your third
JavaScript tutorial as promised in the
last tutorial we'll be discussing about
the environment or kind of the context
of scripts in the Google Chrome
extension now in Google Chrome extension
there are kind of three environments the
first one is an isolated environment
which runs its scripts in an isolated
environment and it is called background
scripts now what background scripts does
is they do not run on the page they do
not run inside this box right here if
you open this they do not run in the
context of this page they run in a
complete isolated environment and are
not able to access any of the Dom their
properties the second environment is the
extension environment scripts run here
in this pop-up box are called extension
environment pretty much clear this is
itself in separate HTML document as you
can see in the pop-up dot HTML so this
is another environment and the third
environment is the user page environment
now user page environment is like like
I'm browsing this page and the scripts
are executed within the context of this
page to make things clear let's see what
each of them are and how they are useful
let's start with the user page
environment because it is one of the
most interesting things like that so
first of all let's copy this from the
developers not chrome page let's spit it
paste it out here somewhere
ok so let's move the permissions we
don't need any permission for now I'll
just supply a wild card right here not
what this wild card means is this wild
card the star here means is this script
should run on every page no star here
means this this script should run on
every page having the protocol HTTP and
I don't care what the path is or the
domain is so this would literally run on
every single page having the protocol
HTTP if you want to specify HD HTTP as
well we'll do something like this okay
CSS we don't need it right now I'll
explain in a while what it is GS GS is
something important or interesting let's
remove the jQuery one right now as I
don't need jQuery we have got advice
tree branches now let's create a file my
script or days as mentioned in the
manifest and let's do something like
hello it document dot domain
okay let's try to reload our extension
let's reload our extension and as you
can see the LR does not pop up here why
because the host is right now the
protocol is right now Chrome and not
HTTP if we refresh this page
you see a alert box saying
developer.chrome.com/apps as you can see
in manifesto JSON we have the regular
expression of matches and a wild-card
which says match every HTTP domain and
HTTP domain now for instance if I want
to do something evil then what I can do
is document dot write or basically
document dot location which is more evil
err and kind of more evil and I can
redirect this do any of the page but I
won't do this for now so basically using
this content script you you are actually
inserting whatever you write here inside
somewhere in your source code of this
page isn't it cool
you are basically with the help of
extension adding a script to any of the
page user visits and you can do the
stuff you want to do the next
environment let's see the pop-up dot
HTML now let's link a file to it script
GS and I guess
okay we have proper punches right here
and the reason I am NOT giving like
script alerts quit because in Google
Chrome the inline JavaScript is not
allowed the execution of inline
javascript is not allowed due to
security reasons let's clear this pop-up
dot J's we don't want anything of this
let's simply a document on the domain
and let's reload the extension and now
when I click on this pop-up you see an
alert box and it says this or random
text which is the extension ID of this
my extension as you can see let's do a
document dot write a
extension and let's reload this and
let's click on the pop-up box and as you
can see the document dot writes a
extension with the hello world from our
HTML code so this script here are linked
with Papa but hTML is running in the
context of the pop-up box right here the
third thing we have is the background
scripts now background scripts actually
run in a very isolated environment and
this is because they have access to all
the chrome APs
chrome abs which are used for like
message passing storing storing into
Chrome extension storage and all those
ApS like that the content the content
scripts have a very few chrome api's
like the message passing to background
scripts and like for that so content
scripts cannot use much of the chrome
ApS of Chrome extension ApS and the
pop-up tortillas as you can see runs in
the context of pop-up load HTML and has
no access to any API of chrome API
okay so now let's create background
scripts as you can see in the background
pages right here if we see let's copy
this let's paste it right here now we
have background scripts back in
tortillas and remember whenever you
supply any script they load in the
supplied way only for example if I want
to use jQuery in my content scripts then
I'll supplies jQuery nodejs
like that if I do jQuery after my script
then obviously I'll get the error that
jQuery is not defined so let's create a
background or GS script and down here
let's do a simple document or maybe an
alert basically though this run the
background script run in the context of
an isolated environment but still you
can view background scripts from here
the inspect views as you can see I get
an alert box with background on chairs
because it runs in an isolated
environment but with the help of
background page I can actually view what
is created by this background as you can
see the background page is something
like this body script SRC background or
cheers now what if I want to like what
you say I just want to do a a lot of
document or location
what will happen now
just wait for some time
and as you can see we get the document
of location as Chrome extension this
thing and generated background page now
this generated background page is
completely isolated from this pop-up
page and the context user page
hence this background page basically
runs in a complete isolated environment
where you cannot access the Dom directly
and you cannot modify the user page or
interaction however with the help of
combined background or cheers and the
content scripts you can do something
called message passing that means you
can pass messages in between content
scripts and background or chairs which
you can use eventually to like doing
certain actions which are which can be
only done by a background like storing
the values sent by a user and can modify
the user and with the help of content
scripts I like that so I guess this
tutorial was clear about the three
environments summarizing up we have
three environments in Google Chrome
extension the background RAM and the
pop-up environment and the user
environment in the user environment you
use content scripts which which are
followed by a matches command which
requires you to add certain file cards
or any other domain to match your script
on
the next thing we have is the background
environment which is completely isolated
page and runs in a completely isolated
environment and have access to all the
Chrome APs and the third thing we have
is the pop-up environment which is the
environment which runs right here and
has no access to any API so I guess I
must cleared with this tutorial and
don't forget to subscribe the channel
and thank you for watching my video</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>