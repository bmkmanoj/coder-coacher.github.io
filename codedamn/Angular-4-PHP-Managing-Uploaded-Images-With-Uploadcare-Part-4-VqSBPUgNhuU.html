<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Angular 4 + PHP: Managing Uploaded Images With Uploadcare - Part 4 | Coder Coacher - Coaching Coders</title><meta content="Angular 4 + PHP: Managing Uploaded Images With Uploadcare - Part 4 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/codedamn/">codedamn</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Angular 4 + PHP: Managing Uploaded Images With Uploadcare - Part 4</b></h2><h5 class="post__date">2017-06-28</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/VqSBPUgNhuU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so what is going on YouTube my name is
Mei hole and welcome to your fourth
tutorial for this mini web series which
is creating an application with angular
4 and PHP and in the story we're going
to start off with the backend coding but
before doing that I want you to
introduce to the service upload care
which I would be using in this
application as a means to actually
upload and get the images back as we
discussed in the very first tutorial so
this service is kind of easy to use and
kind of gets you away from the tension
of hosting the files and managing all
the storage and all that API and all
that stuff which is kind of boring for
me as a developer to manage because we
would just like to code the actual thing
instead of managing the file structure
so it does that all for you on a CDN and
even some upload widgets if you like to
have and edit got support for the REST
API which should be enough for us to get
started so what I'm going to do is first
of all login into here to Google and I'm
gonna make use of my second free account
and I'm not really sure what this was
yep ok so you can see that I already
have these two demos ready and I have
been using it for a while so I'm just
going to go with the first project and
I'm gonna integrate it later on with our
API so what I'm going to do first of all
is actually get started with PHP and for
that I'm going to fire off them straight
away okay so it's screened that means
it's running on port 80 now the problem
is that we would be running our angular
application on localhost both four to
zero zero and the script on just bought
80 well that's not really a problem but
there would be a cross-site request
across origin
or whatever it did something like that
so that would create a little bit of
problem for us for posting data from an
angular app to the backend but we'll
just see how we can manage that so now
you can see that actually on myself in
htdocs' folder so I do not need to
actually go a lot out of my file
structure I can just create a script or
PHP right here and we can just say echo
hello from angular and not really
because this is still PHP so we can go
to a browser and say localhost this is
angular PHP script on PHP right so we
get the cellar from angular that means
our PHP is running and what I'm going to
do is change the data strong angular PHP
right there okay so now what I'm going
to do is simply say well dump of files
which would contain the information
about the file which we have sent and we
are getting the data back so that should
not be a problem let's just go back to
our application and inside right here
this just in some file we get this
access control allow problem which I
stated so we can fix that by adding a
header of this but you should probably
not add lift on your main website or
your main service just hack to get
around and this is obviously not a good
solution for security reasons and now
you can upload it you can see that we
got response and some big ugly data and
you can actually take a look at the
response right here as well
so we see inside response we get the
details about this file and this is the
temporary folder in which PHP always
copies the uploaded file okay now what I
want to actually do is the uploaded
image which we have uploaded I want to
send it to upload care and what this
would do is that it would store my
images right here securely into their
own CDN and actually the Sirians would
be used to serve the images and upload
care would send me back a UUID of that
particular image and we can later on
retrieve that image with that UUID with
all kinds of effects and the cropping
and scaling and sizing and all that
stuff involved from within our code
right so yeah first thing we would need
is actually getting our API key and once
you have this API key it shows me public
one is this one and I would probably get
rid of that so that you don't actually
add up to my storage right so I'm going
to set up my API here and I'm going to
say that this is something like public
key is this and we do not really need
the secret key right now because that is
for signed uploads and we are not gonna
go a lot into that for now so actually
we can just make it a constant why not
something like that so and obviously
just in closing that as well okay so now
we have the file with us which we are
sending with angular and what I'm going
to do is actually go back right here and
see in this array of files we have only
one file and we will be having only one
file because we are sending only one
file so what I'm going to say is the
temp name
I'm part actually is files and we have
the name as the file in here so this
would be filed and then temp name and
then we have the actual name files file
and then link right which is the
actually the name of the file which the
user has uploaded now before actually
sending this to upload here you might
want to restore a temporary copy of it
on your servers for actually processing
or rather seeing that if it act if it is
actually a file or not will actually
upload here with excels tell you that
but you can do that on your own and as
well if you like I would just do the
same thing so what I'm going to do is
actually move this to another part which
I would say that this is just an actual
part and let's just say first of all
we'll just get the directory name of
this directory so that we are actually
working within the same directory and
then we can finally stay I move this to
temp and then and actually let me just
escape this we're going to say that this
is actual name so it would be something
like doing something like see and lamps
7.1 and by the way I'm just seeing that
from the top htdocs
angular PHP PHP right there and I just
realize that windows make use of back
slashes so we can change that to back
slashes actually but that should not
cause any problem with the normal
slashes as well so anyways we can now
just move the uploaded file from temp
pad to actual pad
well actual fat and temp part right
there
okay cool now we need to upload the file
which we are getting from the user to
upload here and how do we do that well
you can take a look in there where is it
the API section is it's strongly in the
log API information the Doc's right
there you can go to this API and go
ahead in the rest well they do have
separate API for different languages as
well right here we can just go with PHP
but it might be just an overkill for an
application as simple as this one to
actually make use of the full PHP API so
we can just go with the REST API which
is pretty much extremely easy to use
right here if we take a look inside
there upload REST API right here
you would see that this is basically the
syntax or rather the request and tags
for uploading an image to their servers
so we got it pretty much implement this
easily inside PHP as well so let's just
do that real quick I'm going to open a
goal request not close baby go in it and
I'm going to say something like call set
options in the CH we are going to go
with this option cool option well should
be a URL and then finally what what's up
with my tab key this would be the URL
where we'll be posting our request and
right here you see that the uploading
API rule is this one and we want to post
it to the base which is the upload file
uploading API okay so now I want this to
be curl off
most and this would be true or one
whatever you like goes that option and
then this would be an actually school or
see URL anyhow if it's fine so we're
gonna set option to clicked on transfer
and what this actually is is that it
will just return it would kind of return
the boolean value about your request
whether it was successful or not and
then finally what I'm going to do is set
option the edge option would be go off
enclosed field which is exactly we would
need to send to this guy right there and
we're going to create an array and what
this would be is going to sociated one
and right here if we take a look at the
rest api it faces upload clear public
key store and file as well so we can
actually go ahead and use okay but we do
not want to copy so we're going to write
anyway close here and what this is
public key and right there this would be
actually our own key so I'm going to say
that this this public key right there
and the next thing we have is the upload
here store and this would be lets say
one and what the store actually means is
that they would store your files right
here inside your upload here interface
so that you can actually see that if you
set this to 0 it would not store your
files for more than 24 hours so if you
want to actually store the file you can
actually even ask this from the users
they want to store the file or if they
just want to upload it get some effects
on the image and just delete that later
on so that it's not expensive on your
storage and then finally what we need is
we need to send the file and extend the
file it
dating us add the redundant mesh pad but
with goal request or see URL request or
whatever the heck you want to call it
you do go fight create and this would
create a file out of it and you supply
actually the part right here which is
the actual but where this image would be
because we moved it right and one last
thing actually we would need to do is
actually create this temp folder so that
PHP just finds that so on this front
will this temp all right looks good
looks good we just need to get the
response so I'm going to get it
responses will execute down just see it
and then finally we're just gonna run
dump the response to see what the heck
we are actually getting so yep and if
you take a look now if you upload an
image something like this
I'll take script you see that we get a
pretty decent response of the file with
its UUID
and if we take a look at the
documentation that's exactly what it
says now we can actually access this
image right here what we have this tree
of god and to do that what we need to do
is go to upload here CDN that was pretty
much what was I remember you can just
preview it something like that yeah so
you can see that we get our image right
here and you can just use the HTTP
version as well if you want if your site
is secure that's fine with them and yeah
so that is how pretty much you would
upload a very basic image I would rather
stay on upload here with their REST API
and this is the PHP code so in the next
tutorial what we're going to do is take
a look at how we can actually give some
awesome effects to the files in here and
show it back to the user as
using angular for and we'll bring back
angular for work in the next tutorial so
that is all for this one and if you
liked it then please don't forget to
subscribe and thank you for watching
I'll see you then in the next one</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>