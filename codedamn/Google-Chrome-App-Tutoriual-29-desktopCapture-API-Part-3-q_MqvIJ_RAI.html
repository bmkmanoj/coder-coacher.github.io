<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Google Chrome App Tutoriual 29: desktopCapture API - Part 3 | Coder Coacher - Coaching Coders</title><meta content="Google Chrome App Tutoriual 29: desktopCapture API - Part 3 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/codedamn/">codedamn</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Google Chrome App Tutoriual 29: desktopCapture API - Part 3</b></h2><h5 class="post__date">2015-06-20</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/q_MqvIJ_RAI" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">all right everybody and welcome back to
a 29th Google Chrome application
development tutorial in which will be
continuing with our desktop app which we
were doing in the last tutorials so
let's start it and let's populate all
the files we have left blank in the last
tutorial so I'll just say this button as
start recording and I'll just move the
script file down here inside the body
section so that we don't need to add
unnecessary even floaters for the body
for the dorm to be ready okay so now in
the app section this in the app
JavaScript we need to do something to
let the user select what they want to
record so first of all obviously we need
to set even listener to the start
recording so let's just grab it quickly
using traditional JavaScript API
and we just start recording dot add
event listener lis de at ER and most of
the time get that wrong and the cliq
should be like God click bubbling false
let's create this function quickly
we don't need this
parameter right here it's not required
so right here okay so now the fun part
comes now we need to use the main chrome
API for the user to grant permission to
record their screen now it's not only
screen it could be anything like their
camera attached or not their whole
screen but some kind of window remember
we are working on an app so we have
control outside the chrome as well so
you could actually record your different
windows as well for example if you are
running this desktop capture and you
want to record your file explorer for
example or your sublime text for example
then you can do that within with this
extension so let's see so first of all
we need to use make use of the API so
type chrome dot
dekstop capture dot choose dekstop media
now this is pretty much straightforward
selling that chrome should capture the
desktop and choose text of media I'll
just explain in a minute what this does
is it would accept two parameters one is
array and the second one is a callback
function so we mainly need these two
parameters so in the array we give will
offer the user what they can record with
our extension so for now I'll just put
screen and window inside an array and
I'll just show you in a minute what
these two mean and how they differ and
they're right here is a callback
function I'll just name it something
different so I say access to regard
alright so now let's create a function
access to regard and I'll just populate
it later so I can just show you guys
what's happening right now let's go back
to our browser and I'll just reload this
extension and would launch it and I'll
just open the console as well just for
any debugging messages and let's click
on start recording okay so now you see
that this little pop-up came out of
nowhere and we don't have this good
adapt in our code anywhere so this is
completely dynamic and I guess the
screen size is a little bit small for
this to work so I'll just hook this up a
little bit 800 x 500 should be good
let's launch that again and you'll be
able to see that clearly this time you
can start recording so see this nice
little dialog box share your screen my
desktop capture which is the name of our
extension and it gives you a lot of
option so this is my current screen
recorder with I am shooting the
tutorials and this gives me entire
screen as an option screen recorder
developer tools extensions pretty much
everything which could be separately
screened off so you see and I screen
would shoot this entire window screen
recorder would just shoot this recorder
itself and developer stool would shoot
this window only
the extensions would just shoot this tab
this would shoot the sublime text this
would shoot my folder which I am
currently inside and that's pretty much
sums it up so looks cool so what do we
do next now the next thing we need to do
is we need to pass we need to make sure
we are recording the right screen the
screen which user selected so for
example if users selected let's say
entire screen we need to know that we
have to work on the entire screen
instead of just sublime text only so to
do that chrome has make made in the
callback function an argument passed
right here as ID and I'll just
console.log that for you guys right now
and this ID is a base64 encoded ID
because it does not contain safe
characters so let's see what happens now
here's my console and I guess I just
forgot to reload so let's launch it
again so I'll just open the console
again and
here's the option and here's my console
let's select entire screen and I'll just
click on share now if you see that
nothing happens right now because we are
pretty much doing nothing in the
callback function except our console
logging just the single argument ID past
so let's see what this argument contains
you'll see this is a kind of base64 good
clearly looks like a base64 so if we
convert this to a sky you see that it is
pretty much meaningless and we don't
need that actually but we would need the
base64 form very much so let's just
store this right here inside screen ID
as ID and let's just move on to other
stuff
okay so now what we would be doing is we
would be making use of HTML Phibes very
very latest API at least for now which
helps you to get rid of all that flash
plugins and extensions which were used
previously for the user to record their
screen directly from the web browser and
html5 just brings it right baked in the
browsers itself so you can just record
your microphone your screen or your web
camera from the browser itself now this
API is highly inside development stages
but we have access to them inside the
Google Chrome application programming
interface when you are doing apps in
Google Chrome so what we can do is we
can make use of the WebKit prefix and we
could just simply use the API provided
by Google and record the screen so let's
see how we can do that</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>