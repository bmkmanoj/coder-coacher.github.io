<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Messenger Chatbot Tutorial 5: Jokebot - Part 1 | Coder Coacher - Coaching Coders</title><meta content="Messenger Chatbot Tutorial 5: Jokebot - Part 1 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/codedamn/">codedamn</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Messenger Chatbot Tutorial 5: Jokebot - Part 1</b></h2><h5 class="post__date">2016-08-17</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/TmjiDAt-6G8" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so what is going on everybody my name is
May ho and welcome to your fifth
chatbot tutorial I guess in which we're
gonna do something which is actually
useful for our board and actually which
we can actually implement as well so
what I found on internet I just stumble
upon this website which is it is I guess
API a dot yep this one so this is a kind
of API for jokes right so if I jokes and
run into it you know it's kind of lame
jokes but it would just do our work
right so every time it just gives us a
new joke I reload and it's kind of chuck
norris type joke so chuck norris and
just on strongly typed programming
languages right so it's kind of an
artichoke which only programmers can
understand but anyways you get the idea
right so we can just implement this API
and then send in the jokes whenever the
user kind of requests because you know
the user is saying shut up to your board
you don't want to send a joke in right
so in our text editor we have very much
everything set up and yeah one more
thing
that when you start and grogg again it
would give you another URL right not the
previous one now but that then you have
to change the web hook URL then for that
don't just delete your whole app and
then create again it's kind of boring so
just go to your app and then behind
under the messenger you it's you web
hooks and if you don't then just go to
dashboard and just kind of add it and
when you open it you will see this
callback URL just hit edit and this
edited here verification token is the
same as this one which you are using
right here this abc123
right let's do that I am already on that
particular URL so right and and
if I just copy this actually we don't
need to go at this URL at all right so I
had this configured and if I now message
it something like something well
actually it wouldn't work right now
because we do not have anything and just
when data's message right so ads let's
add some text so now what I want to do
is that I want to detect if the user is
kind of saying like something like send
me a joke or maybe tell me a joke
or like text me a good joke or anything
you know so what we see here is that we
can just break this down and something
like this that the user would make use
of send tell or text words and then a
joke word and that would probably mean
that the user is requesting a joke right
it obviously doesn't mean that but we'll
just assume that for the sake of
simplicity of this program so I'm gonna
say if Craig match one would be good and
then what I want to say is sand tell
text any one of them then anything right
here and then finally if you have a joke
then what I want to do and actually it
masters the messages the message only if
this happens then the reply lie is this
API right there we have API right so
again we need to just get it we'll just
make use of file get contents because
it's a one-liner and then since you can
see that the gs1 you need to JSON decode
this so
do that right here just decode is true
and again we need to make use of value
and then the joke right so you can do
that here as well but if you just kind
of want to just make the code readable
exchange this to rest and sale
reply is equal to response then what it
is value and then joke right so value
then you choke now the reply consists of
your value and joke and right here what
I'm gonna say is message is a text again
we'll just take a look how to send the
messages and for more like cards or
images later on so one more thing which
you might miss here is that just enclose
your text in quotes right about user ID
it doesn't matter very much because it's
just a number this would work as well
but with text it won't work if you don't
close and close this in quotes because
it kind of gives you silly error that
some sort of parameter is missing but
essentially your quotes are missing here
right so yeah looks like you're done
right so if we take a look and save this
file say this is my password and n Crocs
running and up and go and say something
and actually I guess we do not have that
reply variable defined do we know yeah
so let's just create a reply first does
a say I don't understand asked me to
tell a joke
right so just engage that this doesn't
match then I just want to send this one
okay so now if I do like something and
it doesn't work so it saves me invalid
data oh yeah sure
you might want to what you want to do is
that you want to escape the this choke
sort of thing because that's coming from
an API so you don't know what sort of
input it is sending you in so for this
video only I'm just gonna add slashes to
this but obviously in real life
implementation you wanna do a lot more
than that if it's not your API because
you know this API could be modified to
send any sort of text or response to
your users right so what we can do is
say add slashes and then this bar right
there right and you'll be good to go
so yeah let's just check this out again
and say something more hit enter and
still doesn't give us a very nice look
and while a data again
oh it's actually reply no joke
there's no joke at all well actually
there's this but the name of the
variable is reply okay so now I can see
that our bot tells us that I don't
understand asked me to tell a joke so
send me a joke boy and it sends me Chuck
Norris in its own line at the DMV and I
don't understand what this is well
anyways so you know you get the idea
tell me a joke it would kind of work
nicely even if you add a couple of words
so here you are sad bored tell me a nice
quick joke right so it kind of works
because we are just matching the tell
send or text words and then the joke
watch so it doesn't matter whatever else
you send so actually this would also
work do not tell me a joke
well it's technically incorrect because
it should not send a joke but it's kind
of a simple application right so it
would have lost right so so that is how
pretty much you create a board which you
can actually use in your life I don't
know why would you use a board for jokes
but anyways so that is all for this one
and in the next one what you're gonna do
is you're gonna see different form of
replies you can send like because text
replies are boring kind of you can have
replies as images or videos even cards
something that's new with Facebook and
it's kind of beautiful so we'll just
take a look at that later on so that is
all for this one and if you liked it
then don't forget to subscribe and thank
you for watching I'll see you then in
the next one</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>