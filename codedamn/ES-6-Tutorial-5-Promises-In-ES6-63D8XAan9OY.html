<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>ES 6 Tutorial 5: Promises In ES6 | Coder Coacher - Coaching Coders</title><meta content="ES 6 Tutorial 5: Promises In ES6 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/codedamn/">codedamn</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>ES 6 Tutorial 5: Promises In ES6</b></h2><h5 class="post__date">2017-06-30</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/63D8XAan9OY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so what is going on YouTube my name is
Mei hole and welcome to your fifth
tutorial for es6 and in this toriel
we're going to finally discuss about
promises in es6 which is finally brought
natively into javascript so if you have
never heard about promises before you
might be like what's the big deal with
that well actually promises made your
life a lot easier if you're doing a lot
of asynchronous tasks or if you are
doing a lot of kind of you know you are
just messing your code with all the
callbacks and it's not kind of flat good
you can see so promises are a big relief
for people who have been cooling badly
with the call backs and kind of like you
can imagine if you have five to six
elements animating on the screen at the
same time box is going around here and
there and you want to fire some sort of
function every third block when every
third block is animated or some sort of
blocks are animated a number of blocks
it kind of would be a callback he'll you
would kind of get a lot confused and
jumbled around in code and probably you
will end up with a hacked version of
code which just works but with promises
you would actually be not only in full
control but the code would be quite
readable plus the code would be your
code would not be a lot nested it would
be kind of flat so let's take a look
real quick how we can begin with
promises and I'm just assuming that you
have very little or no experience with
promises before so let's just create a
real first promise so if they let my
first problem now a promise would be
either a result state in a result state
or in a reject
State or in a pending slavery you know
kind of if we categorize it then it
could be in a pending state or it could
be in a done state we're done could be
the result or rejected or whatever right
so we can write a new promise and then
this would accept function which would
consist of the result and which yet
now what this is first of all we can
just get rid of this function because
again we are working with es6 and we can
make use of this pattern renovation so
what this function is or what these
arguments are actually you can actually
see resolve a promise with the help of
this result or you can reject a promise
with the help of this reject now by that
what I mean is that you would perform
your asynchronous task here is team
Chronos tasks here and whenever that
asynchronous task is complete you would
know and you would resolve that promise
and when you resolve this promise this
my first promise which is a promise
object would set its promise value to
the value which is returned by this
result function and don't worry this is
kind of looks like overwhelming you're
going to take a look at detail look into
this with the loads of examples so yeah
let's just get back to it so when you
resolve a promise with the value then
this would this my first promise would
consist of a promise value with that
particular value which is sent and
similarly with the research one so let's
just take a very basic look at this we
can say in resolve this is my value and
it's safe if you take a look in the
browser then reload and in the console
if I write my first promise my first
promise promise hit enter you can see
that the status of result which is
apparently what we did right here by
calling this resolve and promise value
of this is my one you now if we do this
exact thing but we do not call this
reserve
and reload you would see that my first
promise is now pending and the promised
values undefined so the promise status
would wait for either a call from
resolved or a call from reject and once
it's done whatever you passed in here
would become the value of that
particular promise now a use case for
this progress would be something like
you would do an AJAX request let's say
you perform I don't know get request to
something and then inside when you are
ready with your data what you would do
is you would simply resolve it with the
data now what happened with this is that
first of all you're my first promise
would be that its status from this data
or will be having from this data yeah
but promise status would be stick to
result and the value would be said to
this data now later on in your code we
can make use of this my first promise
well right now if we can do is we can
mimic this HTTP request with a set
timeout which would create a little bit
of latency for us we can just a result
HTTP request complete completed and we
can just run it out for a second so if
we take a look now save reload and
obviously we are not console logging
this so we can just say and by the way
the function inside this function which
you pass in right here all this function
body would be immediately executed the
moment you create this promise so we can
say attempting to connect something like
that whatever you like reload we get
attempting to connect and then finally
if we take a look at my first promise
because a second is over we get a status
of result and a promise value of HTTP
request complete now the question is how
the heck do we make use of this
turn in my code so let's just say if I
am doing some other tasks there and I do
not want to interrupt them well
obviously we are running an asynchronous
thing right here so they won't be
affected now what I want to do is taste
my first promise dot then now what this
means is that this promise has this den
function which would be fired whenever
your promise is either result or we
would see in a little bit of time when
it is rejected but there are a couple of
ways to do handle the rejections but
we're going to just stick with the den
for now so what this then would be
consisting of is it would consist of
another function which is my value and
then we're going to see what this value
is this value would be the same value
which would be sent by our resolve right
here so we would just pretty much cross
the log and I'm going to say I just got
and the value from my promise so if we
reload this now we see attempting to
connect and I get I get just got HTTP
request completed from my promise so
what happened with this then is that it
waited for our promise to either get
resolved or we are just talking about
results for now we're going to take a
look at reject later on so we're going
to say that this my first problem is
that then waited for my promise to get
resolved first and then whatever the
value is being passed by this result we
get it right here
now the key feature of promises is that
you can stop you can stop this chain
right here only or you can actually
extend this chain as well so wouldn't
then what you can do is you can actually
return a promise itself so what you can
do is they return and the less to stay
I say my first promise again let's say I
want to perform the same request but a
promise could only be resolved or you
know rejected once once it is resolved
or rejected you cannot do anything else
with that promise so instead of doing
this what I'm going to do is write the
same code again right here so that we
can perform the same thing but with a
different connection this time so I'm
going to say it I'm going to connect for
the second time HTTP request completed -
now what happens is that instead of
actually making use of another variable
and then writing that same thing here
and then make use of then what I can do
is I can make use of then right here
which flattens my code a little bit and
again we can just get rid of this
function right here and do something
like that because it's es6 and again I'm
going to say value and I'm going to say
console dot log this time I got and
value and if I real know we can see
attempting to connect
I just got HTTP request attempting to
connect to and this time I got HTTP
request completed ooh well that's fair
enough
but how do we actually implement this in
a kind of the real application okay so
let's just build a pizza shop why not
so what I'm going to do is write a very
stupid application for a basic visa shop
and what it might look like so let's say
we start with preparing the base and
this will be a function which would
actually return us a new promise now
again this promise would consist of
something known as request not request
the salt and recheck again we can either
resolve this promise or reject this
promise but for now
what I'm going to do is just resolve
this from this and how we're going to
resolve this is by staying consular
large pizza paste is ready and I'm going
to stay result like that only you can
just do something like this and it
doesn't always you do not always need to
pass a value to this so our base is
prepared next what I'm going to do is
let's just a let's add cheese and we can
add cheese to our pizza and again this
would be another promise because all of
these are asynchronous tasks and we do
not know how much time they would take
so we can take chances resolve reject
just like that and again this would be
the same thing but this time we're going
to console.log cheese added and we're
going to resolve it as well then finally
let's just add some toppings and we're
gonna return the same thing so why not
just copy this thing right there we're
gonna say toppings
add it as well and then finally what I'm
going to do is let bake visa is another
promise and let's just create the same
thing is a bake and finally we need to
deliver the pizza so let deliver visa is
another promise are what we haven't here
right that okay so we have around 1 2 3
1 2 3 4 5 promises and we're going to
work with them so how do we work with
these promises
well it might look a little bit
overwhelming right now but it's super
easy first of all we were going to call
prepare base now what this does is that
it returns us a new
promised on this promise when what's
created it would immediately find a set
time more than we are missing a time
here so let's the state takes us 1.5
seconds and it would immediately same
Ibiza basis ready after 1.5 seconds and
if it's going to result now this is a
promise object if you take a look in the
browser if you write promise
or maybe something like X is equal to
new promise
obviously we need to passing the request
or result and we checked right there and
something like this you can see that
type of X is an object so it's an object
a promise object and it's not really a
lot interesting it just consists of two
values which you cannot write yourself
so this right here is an object and then
we can set up then on this so when
prepare base is done what I want to do
is actually get a value will be caught
from this prepare base in our case it is
none because we are not passing any
value but you can always pass a value
and once we get this value what I want
to do is I want to return and what I'm
doing right here is returning another
promise from within the same statement
and what I'm going to do is add cheese
right and this would return me another
promise song run against a then value
and I'm going to return again what I'm
going to return is add topics this is
going to return me another promise and
I'm going to get some other value as
well and I'm going to again return the
big piece of promise
and then finally we're going to get the
same value and I'm going to finally
return the deliver pizza and finally
when the pizza is delivered we're going
to get some value and I'm going to again
say return let's just say we do not have
anything right so we can just pretty
much console.log what we have the value
so we are listing all the values now so
let's just write some values so we can
pretty much just console copy these
things actually we can just get rid of
these console statements because we can
add these console statements inside that
promise so we can actually just come and
ease out and this one as well and this
should be actually visit a little right
okay so yes but we can say is right here
when step once the pizza base is
prepared I'm going to console.log what
I've got other value and we can do a
similar thing like that so if we reload
this I'll get some syntax missing all we
have is a stupid error which should not
be there so there we are and if I reload
this now we can see oh okay so we are
again missing the time house right there
so let's say it takes me two seconds to
achieve it takes me one second to add
the toppings and maybe three seconds to
bake and fast and just five seconds to
deliver to the house if I reload we take
a look these are bases ready she's added
toppings added
and the Pisa is baked and then finally
we see Pisa is delivered
so again if you take a look how this is
working is that first of all we prepare
the base we call this function this
returns us a new promise and what this
promise would consist of is a resolve
and a reject function we're going to
resolve the strongest after 1.5 seconds
so once it's resolved the Sten function
would fire on this promise and the value
which is what's passed by resolve would
be copied into this value variable and
we are just console logging this word
value variable and we are returning
another promise from this then chain now
you could have done something like add
cheese dot then value and your regular
stuff and this would work as well
completely fine but again this kind of
kills the flatness of the code because
then you would might you might want to
do something like a stopping start then
value something like that so you know
you see you can see where the score is
going it's not flat now it's kind of
hard to read so always try to return new
promises from your Denton call unless
you are on the last one so we use this
return add cheese and this is again a
new promise and the chain again begins
and you can actually trim down the score
a lot more if you are a little bit
smarter to actually not make use of all
these redundant things right here
because es6 can provides us the
syntactic sugar version of this so we
can just get rid of this console dot log
value as well and we can just say
something like this I choose right and
you can bring this down then
I'm not really interested in to this
value so I'm just gonna say add toppings
and then we have this thing as the baked
diva
and again if you do not specify the
parentheses es6 would always return the
very next thing you have written so and
by the way I'm just making you love this
underscore so that we do get our little
bit of shortcode it's not anything
personal so finally we have this value
so we can just cancel out this value and
just right here we can say these are
deliver when we can just get rid of
these finally console.log right there we
can just get our fill of this as well
and this one as well and save and that
is it
so now if you take a look you reload we
get these abases ready cheese is added
toppings added and the pizza is baked
and then finally after 5 seconds our
pizza is delivered that is it
so our promise chain ends here ok so far
so good but what if something like in
the mid we have first of all we have
prepared the paste but let's just say I
do not care whether add cheese the
cheese is added first or the toppings is
done or you know some any sort of
intermediate process system what if I do
not care about that because right now
what's happening is that we are first of
all waiting for add cheese to complete
and then we are adding the toppings so
although this code is asynchronous for
the outside JavaScript within this den
statements this code is synchronous
right because first of all it's waiting
for this is synchronous operation then
crunch for this asynchronous operation
it's not firing all the asynchronous
operations in one go so for the outside
world
this is asynchronous but for
the goat itself this is kind of
synchronous within itself so what if I
want to do a lot of things together and
do not care about that well surely you
can despite all of them together but
there's a good and a better way to track
the promises as well and that is
actually making use of by making use of
from sister dolls so I'm going to bring
back that curly brace and what I'm going
to say is return promise dot office now
what this is is that it would accept an
array of promises that it would wait for
all the promises to complete and once
they all are completed it would return
another or actually it would return all
the values returned by that by all those
particular promises so let's just take a
look real quick let's just say I add
toppings and I add cheese and I can just
get rid of this so we see we say
something like that and let's just add
another thing right here so that we can
actually make it effective add this
spices I don't know something like that
I still added we can make it point to
right there and yet so we can say add
spices just like that and no promised at
all we are returning this promise so
then and actually we do not need to
shorten our or actually expand our code
right now we have to expand it right
here so once all these promises are done
I'm going to see what value do we get so
I'm going to say if console dot log just
got something
from promises promised that all and that
would be this value right there okay
so again we have to actually return the
a visa so that we do not break the
promise chain and if you reload this now
you would see visa bases ready
toppings added spices added cheese added
these things these three things are what
we got and response to this this promise
at all and actually this one array so it
has just or not really because we have
this thing right then we get three
undefined and the reason for that is
where do we have that because we are not
actually resolving it like that so we
can actually get rid of these and
instead what we can do is say something
like where we have baked visa have
spices we can leave that for the baked
visa
add spices could be spicy ladder right
there so now if you reload we should so
probably see an array with the three
elements she's added are we go just God
or from the topping that I we guess
they're still missing the cheese on it
right yeah there we go
so yeah this would work this time but
one thing you should probably learn from
this thing is that this value the array
of this value this value does not
consist of the or actually it does not
preserve the order in which your task is
completed or more appropriate would be
to say that it would actually preserve
the order in which you pass the task and
not the order in which the tasks are
actually completed so let's just say our
topic is taking one minute and I
cheese's taking one second then inside
there is
don't value variable toppings would
still be the first element and a cheese
would be the second element with the
value wish of the promise which is
returned by the achieve and add toppings
so you can see that toppings added is
the fourth element and even if I make it
like four seconds still also static
toppings added would still remain the
first element so we have to wait four
seconds and you can see that toppings
added is still the first element even
though it would be the one which would
be the last one to actually send a
result to this promise dog so once we
have got all the promises it would just
wait for all the promises to resolve and
it would actually just you know break
out of this chain if any one of them
actually reach X so what happens is this
promise that all would fire all of the
promises together it would wait for all
of them to complete and if any one of
them actually rejects the promise it
would not care about the other promises
it just says that somebody has rejected
and it will not enter the normal
sequence where which we are doing right
now it will just go through the
rejection space which you're going to
take a look later on so yeah that was
quite interesting because you could not
actually you could obviously because
promises is nothing but a easy way to do
a synchronous things but it's kind of
difficult or actually rather hackish to
achieve in callbacks because you know
you would just need to create a kind of
a counter to increment stuff and other
stuff if you have done that before and
it's kind of messy to do with the
callbacks one so yes that is all for
this one and if you like the then please
don't forget subscribe and thank you for
watching again I'll see you then in the
next one with all that rejection stuff
already for you so see you then</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>