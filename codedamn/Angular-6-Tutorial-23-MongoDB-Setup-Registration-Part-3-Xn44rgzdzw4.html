<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Angular 6 Tutorial 23: MongoDB Setup (Registration Part 3) | Coder Coacher - Coaching Coders</title><meta content="Angular 6 Tutorial 23: MongoDB Setup (Registration Part 3) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/codedamn/">codedamn</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Angular 6 Tutorial 23: MongoDB Setup (Registration Part 3)</b></h2><h5 class="post__date">2018-03-10</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Xn44rgzdzw4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so what's going on Dammers my name is
Miho and welcome to your 23rd angular
sixth tutorial in which we're gonna take
a look at how to set up MongoDB for
registration purpose for our angular 6
app so let's get started okay so in this
video we're gonna take a look at how to
install MongoDB first if you don't have
it then installing something known as
Mongoose which just provides a semantic
way of doing stuff with MongoDB because
MongoDB as a whole is you know you can
just store pretty much anything without
any schema or anything like that defined
then we can also set up schema for this
MongoDB thing so if you do not have more
DV what you need to do first is you need
to install it and if you're on Mac it's
pretty easy you just have to go to
Google or you just have to go to your
command line and write Bree you install
MongoDB and it'll get it for you for
Ubuntu and Windows you can just pretty
much do a quick google search like
MongoDB on Ubuntu something like this
and MongoDB on Windows and I can follow
any one of these links and the guides
would be very much simple for you to
follow along and you would have MongoDB
set up with that being done what you can
do is you can actually go to your
terminal your term you know versat there
you have and when you write Mongo you
should actually Mongo is not running
right now so if you just run it and then
if you write Mongo here you should see
your Mongo client open so you can do
stuff like show DBS and all that stuff
so it just shows you all of the
available databases you have created in
Mongo
now once that is set up what we want to
do is actually
install Mongoose in our server folder so
here's our solar folder and if you just
actually let me just started Nord more
instead of node so that it just restarts
every time we make some changes so if I
do like NPM install Mongoose and save it
so it will install Mongoose as a
dependency in our server
and do one last thing which is optional
you can just work with the Mongo client
here as well but what I use is a client
called Robo 3d this thing so this client
would be used to actually see the Mongo
as a GUI right instead of command line
you can see data in GUI so that is
helpful if you just want you can install
it I guess it's available cross-platform
so that should not be a problem so
anyways with our mangu setup what we're
gonna do is we're gonna set up our
MongoDB connection here so I'm gonna say
constant Mongoose is required Mongoose
right and then I'm gonna say that
Mongoose should use a promise library
which is in built inside node so by this
we're just switching Mongoose from
callbacks to promises right and who
doesn't like promises so I'm just gonna
say Mongoose touch connect
MongoDB localhost our port number is for
Mongo where is it and what the heck is
this oh actually I guess we install a
package that's why I just restarted
everything anyways so
our Mongoose food is running on things
running on two seven zero one seven
there we go and once we do that we can
actually wait for this as well
oh wait or rather we can just you know
create a den call here then error
Mongoose up something like this because
I'm sure pretty much that there's no
error so if we take a look now inside
our index you can see that service
listing ID one two three four and
mongooses up as well so what we actually
want to do is normally just connect to
Mongo but to a specific database so
let's just say I'm gonna name this
angular DB something like that so now we
are connecting to this angular DB and
you're saying when you are connected
that Mongoose is up alright the next
thing is that we need to create some
schemas so I'm just gonna create a new
folder
Chema's and we can just organize this
later on do the standard file structure
we have but right now let's just keep it
that way
users she is so I'm just gonna say
constant schema is require Mongoose and
we can just impose it something like
this
and I'm just gonna say constant user is
new schema and this will consist of a
schema which the user follows I wish the
user object our user collection will
follow so I'm just gonna say for now is
email as strength and password as a
string and let's say user can add a code
of something so that's the straight
right alright so once we have created
this model what we want is we want to
export it right so I'm just gonna say
module dot exports and actually lets us
create variable here first so we're
gonna say a Const user we already have
that so I'm just gonna change this to
user schema and user is Mongoose dot
model model and I guess we need Mongoose
anyway so let's just create something
like this so we have Mongoose dot model
and here goes the name of our collection
so that should be user and what I want
here is the user schema object which we
just created all right so what it just
what it does is that when we are
creating the schema its mapping the data
you're storing in the database and it's
mapping that to JavaScript so what
happens is that long-ago would send the
data to mongoose mongoose would match it
against its schema and would directly
populate into a javascript object so
that's how it works so what i'm
exporting is the schema now i can import
it anywhere in the file and directly
make some calls retrieving data adding
to data using this schema so mongoose
does all of that stuff under the hood we
can do another thing is that instead of
code being just string we can say it's
type of string and a default value for
this good thing is that you have no code
right so you can specify a default
values and all that stuff so as long as
you're using this model to make changes
retrieve changes to your database you
are in sync with what mongoose thinks
you are doing all right and you should
probably make use of Mongoose every time
it really makes life a lot easier
so what we have is that we have the
schema ready and now inside indict yes
or actually it will just create a lot of
mess here I just want to separate files
but I'm not really sure how to keep it
simple right now you can actually just
name it from schemas to models you can
actually create a controllers folder
here as well but I just don't want to do
that in this video we're gonna probably
use that in some other videos so what
I'm actually going to do let's just
include it here only so I'm gonna say
user is require models and we have users
here right so what we have is module dot
expose as user so this user is a model
and what I can do
let's just say right here instead of API
slash gesture what we can say is API
slash login and request response and
again contain username username and
password inside the body so now I can
say user dot fine one less to say with
username as username and password as
password and if we are able to find we
can just make it a sync function I'm
making this async allow us to make use
of the await keyword which simplifies
the code so I can see my result is a
weight user dot find one and I'm just
gonna say if result is a false value
that means user login is incorrect
otherwise we have a user and we can
create a session as well now we were
doing sessions with PHP but here we
would need to make use of expressed
sessions and so pretty much I can just
say make a session and said user to
doctor just like that so what we can do
is right now just say console dot log
incorrect details otherwise we can't
just say console dot Lord logging UN
right okay so now if we take a look
inside the Robo long go client so what
we can do here is I can just create a
database with the name angular 6 angular
DB just said and we don't have any
collection so what we can do is just
manually create a collection right now
otherwise manga would automatically
create itself itself Mongoose will
automatically create anyway when you
insert data right so it will just create
data as well as collection so what we
want to do is create a user collection
created user or users we have to take a
look it's user so let's just get rid of
this and create another collection named
user let's just name it user hit create
now we have this as an empty collection
right now so what I can do is just
manually insert the record here I can
say what we had in schema email write as
may hold add to it 1.com something like
that password we can just keep it 1 2 3
4 5 and good since it is defined by
schema we have to put it here some
random garbage right and hit save so you
can see that we have record here which
follows our mongoose schema so what i
want to do is actually if we take a look
inside our code here we are actually
caring for this thing so what we can do
is actually we can make use of its a
tool called for PA w in mac and windows
equivalent is postman
and what this tool does is that it
allows you to perform HTTP requests and
test your api's within this interface so
you do not need to create open the
browser and do all sort of JavaScript
stuff to send JSON and all that stuff so
what do you want to do is actually test
our API so we're gonna test API slash
login here and inside my JSON I'm gonna
add something like let's just remove
this my username as or what we had
username or email I believe we had we
are querying for a username password I
guess we should switch that to email
or should be yeah email and password
right and here as well so we're gonna
send an email as me who'll add the red
one comm what we had and the password as
what we had one two three four five
right so once we do that we are posting
to this we get this you can just console
not log email and password has well here
just in case we want to see we are
getting the result we also want to
console log the result and that is it so
now if we hit enter a connection refused
fair enough connection refused because
wrist has already being declared oh okay
this is response response and response
dot send nothing just in case yup so now
if you hit it we get a que but inside
terminal we get incorrect details okay
so we are curving for email and password
inside our user model so if we take a
look inside
robot 3d we can see our email is in fact
me who had the red one.com and our
password is in fact one two three four
five so let's just try to
actually let's just tried to change the
code here just the email and if we hit
it now actually it's not running the
server we hit it now we get me a ladder
it 1.com but our record is still null if
I just this is correct
okay so after debugging what I see is
that there we are we have created this
redundant collection here user it should
be actually users that's right so I can
just drop this collection here and
inside this collection users you can
just delete this object as well and
inside this object we can edit this
document to say may hole at the rate 1
calm and 1 2 3 4 5 save it right and now
what we have is that if we just get rid
of this find one email and password get
rid of this get rid of this and now if
you take a look what we have is that our
Mongoose is up now if I hit this inside
our console we get logging you in for
the correct values but for incorrect
values if we hit this you can see the
that we can't in correct details
so our Mongo is link or login for just
raishin we're gonna do that really quick
with the phone we are getting you just
need to populate this stuff and actually
we can just do it straight away if you
wait a little so you can say oh wait
user dot and sort or we can just say
user is new user I can just say email
password just like that and finally we
can say result is the result is
I feel it should be resolved resolved oh
wait
user dot safe underscores a lot log
result which is results it answers the
original object so if we go to API slash
register and we have email and password
fields here and we just say something
like one two three and same password hit
enter connection is refused because we
are not making this async I'm gonna just
return send the JSON the result as well
so now if we send this you can see that
we get a JSON response and the weak
inside JSON response we get exactly how
the data would be stored and we can see
the same thing inside our Mongoose and
said our database as well you can see
that we have another record here so
registration and log and stuff are good
to go on the backend and the database
pad with minimal or no validation we're
gonna add that later on the only thing
left now is to link this stuff with
front-end so we're gonna do that in the
next video so that is all for this one
I'll see you then in the next video and
one more thing if you like this video
then don't forget to subscribe and press
the bell icon to receive instant
notifications</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>