<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Angular 6 Tutorial 18: Setting up backend (Login App Part 4) | Coder Coacher - Coaching Coders</title><meta content="Angular 6 Tutorial 18: Setting up backend (Login App Part 4) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/codedamn/">codedamn</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Angular 6 Tutorial 18: Setting up backend (Login App Part 4)</b></h2><h5 class="post__date">2018-03-03</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/X5n353jld6o" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so what is going on Dammers my name is
Mei hole and welcome to your 18th
angular 6 tutorial in which this is a
platform of the login app which we have
been creating and in this tutorial we're
gonna add some real working stuff into
the applications so that you can
actually use angular with your back-end
and authentication so let's get started
okay so in this tutorial what we're
gonna essentially do is get the data
from back-end now what we're doing right
now is that we just hard-coding the data
which would be visible to the user once
the user authenticates that is not of
much use because once you export your
application to production whatever data
you have by your router's protected or
whatever you have implemented in angular
itself only that is useless because
angular runs on front-end so anyone can
reverse engineer and see what data you
are hiding so what you essentially need
anyway is sessions and cookies and all
that stuff all the traditional stuff
with your angular front-end so let's
just see how we can quickly implement
that in a very simple application let me
just zoom in a little here and you can
see that this code is from our previous
tutorial now what I want to do is once
the user name and password matches the
admin what I want to is I just wanna set
a session variable here and I'm going to
say session user is Adler so what did
you do is that it would start a session
for that particular person all right now
we have set the user to admin what I
want in next is create another file in
here which would be database but dot PHP
and right here now obviously you're
backing would vary from language to
language but this is a very simple
example with PHP I'm just gonna start my
session again I'm going to say user is
session
and usual right
typically your code would look like
something like now it would query this
user from the database after sanitizing
this and checking for if it is blank or
not and all that stuff so it would look
like something like select records from
user table
where user is equal username is equal to
your sanitized username something like
this and you will just get this data and
throw it back to the client but here
what we're gonna do is pretty much just
hard code the data which would be coming
from the server I'm just gonna see if
user is admin then I'm gonna say just
like echo I can just say something like
message this is a secret message only
four are gonna straighter and we will
just also say success is true just like
that right here there we go
so what we have here is yep okay so now
we're just we'll just echo out otherwise
message who the F are you and the second
object could be success as false all
right so now with a database database
being ready what we just want to do is
go to client and start inspecting
inside network tab if we can just make
it a little bigger in fact it on login
I go admin admin its summit you can see
that you get top secret and so just
could read all you can see that we get
this is the secret no one knows but the
admin this is from Austral PHP but what
we want is we want to query this
database dot PHP file but if you see
that inside headers we get the setcookie
header which means that the PHP now will
now recognize this guy whenever I send
Erick to send a request to this PHP
thing so what I want to do now is go to
my admin component here and admin
compile right there I'm just gonna say
the message right so I'm just gonna say
inside here message is equal loading
right and in same ing on it I'm gonna
create another service so let's just
create another service ng generate
service and user service right so this
would contain all the methods associated
with once the user is logged in so how
do you want to communicate with the back
and then all that stuff so here we have
our user service in place and what I
want to do is again inject my HTTP
client right here now we can access this
so I'm just gonna say get some data here
and I'm just gonna return this dot HTTP
dot yet and this will be API database
dot PHP right and that is pretty much it
I just want to specify the data my data
type interface here so we can do so just
create an interface my data here which
would contain the stuff like
oh we have message unsuccessfully so
there we have message as string and
success as boolean alright so now we are
just returning this rxjs object
observable to which we can subscribe so
what I want to do is inject this service
first of all let's inject the service in
our add module so what we want to do is
say add service the user service from
user dot service there we are
we have user service here and now what I
want to do is inside my admin component
I just follow a check this user service
and we're all good to walk and roll so
I'm gonna say this dot user dot get some
data but subscribe data I'm gonna update
this dot message is data dot message
alright so there we are and do
if I just see everything makes sense yep
so we can see that cannot resolve
angular commonly okay so it is just up
to this and what we have here is that if
I just go to localhost
okay yes oh we need we need two messages
here two curly braces message there we
are and now if I just go to login admin
admin its summit this is a secret
message only for admins traitor right
and you can see that we queried database
dot PHP and it returned this is a secret
message only for admins traitor now
Alissa's for time being enable login for
everybody so what I'm gonna do is just
inside my I want start PHP I'm just
gonna say something like this otherwise
a small session or yeah anyways the
session is already started so we do not
need to make changes here what we can do
instead is pretty much just say
something like if I just kind of clear
my cookies here
and reload the admin you can see that we
get nothing
now the reason for that is that angular
also cleared its state here but - let's
just say somehow the user actually got
to slash admin without angular getting
being node so you write recruit bypass
the odd card so what we can do in here
first of all is that we can just return
always true this is what a nasty user
would try to do it will try to change
the guard information to true so what
you can user can do now is just login
with any details its summit it says
invalid credentials okay because we are
having some validation somewhere else as
well and overs it are odd thought
service okay where are we actually
alerting this thing
I believe it was in my login component
yup
so let's just say it is something like
this right and now the user can log in
with any credentials okay and you can
see that the user was able to get to
admin but it was not able to get our
admin secret data because the data based
on Chaisson at the back end cannot very
fat that this is the admin this is
because we have created a session this
auth dot PHP call created a session call
right here you can see response headers
as nothing because no cookie because
requests already had one so you can see
that they're pretty much this is the way
to implement sessions with your angular
application and what we can do one more
thing we can actually redirect the user
to the home page if we turn this dot
auth dot log is locked right so what we
can do is say if this dot or dot is
locked in is false that means the user
is not logged in I just want to say this
dot router dot navigate to home page
auto log-in rather
and we can just import the router router
and we just need it till here and there
we go so now you can see that slash
admin redirects us to slash login if we
are not logged in right and if I hit
enter admin admin and admin hit summit
it shows me this is a secret message
only for admin stator and
our this slash admin redirects to slash
login because one when I reload angular
loses its state of is logged in
otherwise we are actually technically
still logged in because the cookies here
still exist you can see so that's all
for this one and in the next tutorial
we're gonna see how to persist this
thing on angular as well so that's all
for this one and thank you for watching
I'll see you then in the next video and
one more thing if you liked this video
then don't forget to subscribe and press
the bell icon to receive instant
notifications</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>