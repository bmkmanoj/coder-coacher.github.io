<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Chrome Extension Tutorial 10: Creating Twitter Feed API - Part 5 | Coder Coacher - Coaching Coders</title><meta content="Chrome Extension Tutorial 10: Creating Twitter Feed API - Part 5 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/codedamn/">codedamn</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Chrome Extension Tutorial 10: Creating Twitter Feed API - Part 5</b></h2><h5 class="post__date">2017-07-16</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/jt6ITX0eLow" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">all right everybody welcome to your
dance tutorial and this time I'm sure
because in the last tutorial I said that
it was the eighth one but apparently it
was the ninth one so anyways this is
your tenth to toriel and this tutorial
let's finally create this jacket exist
function and add the link to the memory
as well so that our extension remembers
that we have shown the notification to
the user
and it does not pop it pop it up every
time right for the same tweet so what we
can do is first of all let's just create
this function check if exist and get to
that info so I'm going to make use of
again chrome storage so you could go
ahead with the local storage as well but
I'm just going to make you the foam
storage because you can actually
synchronize it across various devices as
well
at least a small amount because a cost
who will infrastructure to do that
anyways so what we're going to do is
create the check if exist function and
to begin with we are gonna return a new
promise because it is a part of the
chain so it can either resolve or it can
be checked I'm going to say in chrome
the storage now the storage API is
available once you add this permission
storage to Chrome manifest and this is
actually a synchronous storage so we can
make use of either either local or
either think I think it was think from
the storage sub sink here so what this
thing would do is that actually it will
synchronize your little storage across
all the devices user has logged in we
are their email address the same email
address right so if you set some sort of
value here and the same person using the
same Google Account signs into some
other device and uses your same
extensions then you can get that
particular value back right there
with this chrome the storage just think
now again Google provides some sort of
data limit on this it's not like you can
store images or videos across
synchronized storage because again it
costs
we'll some infrastructure to store that
across the various devices on the cloud
but anyways we're going to make use of
just local here so it's just a local
copy so we're going to say local that
get and we're going to get links
function data right so if we're going to
see that who are links is Theta dot link
right
so if data that links exists then it's
well and good otherwise I want to
initialize it with an empty array so
this would probably the case for the
first time this function fires but
anyways we can just do it like that so
we can say that if links dot index off
info dot link I presume we have yep in
for that link is minus one
that being said that means that this
link right now does not exist inside
this array inside our storage that means
it's fine to show the notification so we
can simply resolve it with the same info
object which is passed down or rather
what we have in here which is passed
down by this get data right so we can
resolve it otherwise if the link exists
we're going to reject the promise with
something like link already our tweet
already shown sure right I can finally
catch all of these rejections right here
and we can just all rather just so right
here console logs there right so we can
do that and next is that we want to
actually save the link itself so we can
we could have done that here only but
you can just separate the logic so we
can say something like Save Link we can
pass and only the link down there right
that is the last step in we do not want
any information further so we can say
function save link is the function name
link right there and again we can just
return a new promise but it doesn't
matter we do not have any promise chain
later on but again if there's some sort
of error here we can catch it in the
catch block so it's always nice to have
that in place so we are returning a new
promise I'm going to say chrome that
storage dot local dot get first of all
let us get link function beta and again
I'm going to say same things as data dot
length or an empty array if it does not
exist so I'm going to say links dot push
think and then finally we're going to
against a chrome that storage charge
local lock set but this time we're going
to set links and/or once it's done we
can Barrowman to stay resolved done ok
so what's happening here is if it was
too quick for you first of all we
created a new promise for Save Link then
we asynchronously get the storage links
we get all the data which was available
already inside this data variable we get
the actual links from data links or if
it is undefined in that case we just
initialize it with an empty array and
this would be only undefined only on the
first hit right otherwise it would only
always be populated then we push the
link which is sent right here down in
the chain by this info and we push it
into the links block and then again we
asynchronously set it to links and this
is essentially just the same thing like
links as links because the key value
pair the names at least are same so we
can make use of this es6 notation and
again this is just a callback which is
files of result of done on this resource
is redundant right now so it doesn't
matter anyways so yes that's pretty much
it and let's just take a look out in the
browser reload the extension go to
background page
and let's just wait for it you can see
that we get this world emoji day tweet
and we are not really console logging
anything so what we're going to do is
actually finally set up our intervals so
we can set intervals or you can either
even set a set timeout if you want and
then manually call it after your chain
is done well that would be kind of cool
to do actually so let's just do that
only so I'm going to create a timeout
or rather of function let's just say
create a function is something like this
or we can schedule of this right and
down here we can say set timeout tweet
functions with a delay of five seconds
and we can even grab this so we can say
let call crete is another function or we
can just wrap it write that as well and
we can just give it even make it a
little smaller by doing something like
that so now we can do a call treat right
here and we can do a call treat in our
final method which was the info now we
can do something like this
right and actually let's just do that
and take the save link itself because we
are returning a promise and we want to
wait for that result done and then
finally we call the tweet again all
right so let's just drop it down the two
seconds for that it's a little bit
faster but let's just reload this now
and check out the background page and we
have some problem with the line number
sixty and looks like there are we are
nothing Kali brace right there
reload okay so we got our tweet and we
can actually just set state home dot
storage dot local yet I can passing
notes right so we can see that we are
our storage has right not to tweet and
somehow our timeout don't work or did it
oh okay I get it because we are
rejecting the promise and breaking the
chain so a tweet are called to it will
not be fired if the tweet already shown
aspired so what I want to do is the if
even if there's an error I want to call
the tweet again and this is kind of a
bit hockey I know there would be better
ways around this but for now it would
just work so let's just reload and order
background page let's just wait for it
we can see that we got a tweet already
shown there's no tweet no new tweet
right now
come on people's tweet something so my
timeline is not having is not having any
updated tweets right now so once it do
we will see some new twist so we can
right now just clear the storage from
that storage dot local dot here and this
should give us some tweets you can see
that we got our tweet world emoji day
and yes that's pretty much it for now
for other feed so we get any new tweet
I'm going to update get an update
straight right here I wish I could have
shown you that but I think people are
extremely lazy these days and they are
not tweeting why the hell are people not
tweeting alright anyways so yes that's
pretty much it for this tutorial and the
the basic application and that is how it
works and all the code I would place a
link in the description to the github
repository so you can mess around it
must run with it right so again that's
all for this tutorial and if you liked
it then please don't forget to subscribe
and thank you for watching and if you
want to support content like this then
please check out the patreon link in the
description that would really help again
that's all for this one and I'll see you
then in the next tutorial</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>