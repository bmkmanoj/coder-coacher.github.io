<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Introduction to SharedArrayBuffer in JavaScript | Coder Coacher - Coaching Coders</title><meta content="Introduction to SharedArrayBuffer in JavaScript - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/codedamn/">codedamn</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Introduction to SharedArrayBuffer in JavaScript</b></h2><h5 class="post__date">2018-01-20</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/AVVdon6X9AA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">all right everybody welcome to your
tutorial number two for web workers and
essentially in this tutorial I'm gonna
take a look at what shared array buffers
are in JavaScript which is introduced in
ES 2017 and where workers came with
html5 so that's kind of cool
so what shared array buffers actually do
is that they allow you to access the
memory write a common memory from
multiple threads multiple threaded like
environment which web workers give you
so I can have a variable which is
simultaneously being accessed by a word
for garage swell and the web worker as
well
the main script as well and whatever
reference whatever file has reference to
that shared array buffer so what
advantage it does is that obviously if
you don't have shared memory access then
you need to make use of postmessage
every time you want one worker to
communicate with the another worker and
this is slow I really really slow on
performance critical applications and
real time applications so shared array
buffers is the way out
now the problem is that if you're
watching this video in recent time like
I don't know a month or so how much long
would they take the problem is that
shared array buffers are disabled on the
browser another reason for this is
because of the specter attack which was
recently found inside modern CPU
architecture and it was a fundamental
problem with the hardware so it might
date a little bit time for all the
vendors to actually come up with good
patches so until and unless that share
array buffers is disabled because it can
be used to actually create high
resolution drivers and all that stuff
and exploit actually exploits vector so
you can enable it by going to your
increments chrome flags are in Firefox
it's about config and searching for
shared array buffer and enabling it I
want you to do that you should be able
to access share data buffer here all
right so right now as I into toriel
let's just quickly write a simple
program which would actually let us you
know understand how shared every buffer
is working so first of all let's just
define our worker which is a new worker
this is worker ojs and then finally what
I can say is a work out post message
right here I can just give the reference
to my share data buffer why not and
right here what I can do is create a new
shared array buffer of length let's say
1 and yep
that does it pretty much and inside work
or what I'm gonna do is add an event
listener of message not a function of
data now I know that this data is
actually shared array buffer Olli so I
can just pretty much store it directly
let's share data buffer there's nothing
so I can say is my data dot
above now it's just passed as a property
right so that is it alright so now what
I can see is pretty much just
console.log at first so that it makes
sense for all of us now if I reload this
page you can see that I get shared
buffer God's all logged from work on
Archie's right now to operate upon share
data buffers you need to actually
convert them into a typed array first so
we're gonna say this is my array which
is a new un8 array of this shader buffer
right and life
console.log disarray you should be able
to see something like this which is
which looks like kind of familiar right
so now this is the only way to actually
access a shared area buffer by
converting into a dived array and buy it
right now it's just supports storing
integers right and numbers basically so
yeah that's support is quite limited but
you know you can't actually work every
with everything with the help of
integers so I'm gonna say array of 0 is
equal to let's say 100 and I'm gonna
console.log update it here right so
right here inside my script what I'm
gonna do to show you that this memory is
actually being shared I'm gonna say that
actually we can just pass in here
message here post message done right
here we can say I can say worker dot add
event listener message data whatever the
data is we're not interested and I'm
gonna say that memory a accessed in
script or Chia's is I'm going to say new
you int eight array or share data buffer
right and if we run this in the browser
you can see that memory accessed in
script or cheers is U and eight array
the value inside that is 100 which is
exactly the value we put in here I'll
put it 99 we should be able to see 99 so
you can see that we are actually sharing
this memory I did not got this from this
data variable I did not get this from
anything from the worker or anything
it's just shared it's shared between
your script and you
so you first need to just give a
reference to the worker what the memory
is what the data is and once you store
that you can convert it into a UN to
eight array modify it odd you still have
access to this now this creates a hell
lot of problems which is common in
multi-threaded environment like race
conditions so we're gonna take a look at
that as well later on in the series as
we proceed and actually I have covered
this deeply as a chapter as well in one
of my books yeah I'm writing I'm
actually doing a book on hikmah script
it essentially atma script 2017 and
basically says JavaScript fundamentals
as well which would be released really
soon and yeah that's all for this
tutorial
and if you liked it then please don't
forget to subscribe and thank you for
watching and I'll see you there
in the next one</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>