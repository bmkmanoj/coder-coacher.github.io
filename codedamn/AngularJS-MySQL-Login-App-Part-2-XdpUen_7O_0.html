<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>AngularJS + MySQL Login App Part 2 | Coder Coacher - Coaching Coders</title><meta content="AngularJS + MySQL Login App Part 2 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/codedamn/">codedamn</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>AngularJS + MySQL Login App Part 2</b></h2><h5 class="post__date">2017-06-11</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/XdpUen_7O_0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so what is going on everybody my name is
May ho and welcome to your second part
for angularjs plus MySQL connection and
before starting I would just like to
overview my project structure what I
have changed so I have moved the app
from the folder which was angularjs with
MySQL into HD dogs and what this has
given us is this angular angularjs my
sequel folder which just contains so
what dot PHP just like before and the
components which we had earlier the node
modules is the folder we require and
just ignore these other and other stuff
these are other files which were present
already in this folder and myself some
of my stuff so and the finally we are
left in angular route angularjs indexed
or HTML which was there and packaged the
JSON file and script or chase file okay
so first things first let's just cyrus
lamp we already have right and if we
take a look in the browser we can just
go to localhost and we will see this
application so right now you see that if
I click on login I get this ugly kind of
URL which includes the cache and an
exclamation so let's just get rid of
this and do that what we can do is
inside our configuration we can insert
another provider which is location
provider and down at the bottom we can
say location provider so html5 mode is
true
now what this would do is that it would
convert these hash banks and these hash
URLs into normal URLs so if I load the
app again and it click on login you can
see that we get the slash login but the
problem is that if I hard will be
reloaded from my browser we set up we
see of check not some now this is
because the browser right here does not
know that the only index dot HTML file
contains this web Dodgers file which
knows how to handle this login page
right so the browser kind of request
server for a login and the server does
not know that we are making use of
angular
it doesn't care right it just shows a
404 not found so what we can do in order
to fix this at least in a Bosch module
we can in a Bosch package or rather
whatever you want to say we can create a
new file here known as HD access which
is the server file list that will see
the list which would be called every
time before every page right so we're
gonna say something like rewrite engine
engine on and we're going to add some
routes in here I'm not going to cover
how they work because that's another
separate topic so I'm just going to
write some rules real quick and there we
are so essentially what this is doing is
that is starting the rewrite engine and
just saying that if we get more or less
no files as the filename for example
like if you are not accessing script
Egeus actually from the browser what
this would do or any directory or
anything like that it would map all the
other requests to index dot HTML so
essentially even if you're visiting like
localhost ABC slash dot or maybe
anything like EF 3 and all the stuff so
essentially it's going to throw you back
in the back end this would actually just
load index dot HTML and index dot HTML
then finally would make use of angular
routing and angular would take care of
all all of our stuff right so if you now
reload this you can see that we get
correct login app and every time we
reload this this would work just fine
now okay so our angular app is now up
and running so what we can do first is
customize this app a little bit and I'm
gonna not going to go a lot into details
with CSS so I'm just gonna make a very
basic design in a second and just get
back to you okay so I just wrote down
some Styles and included them with the
style of CSS how to style a CSS file and
created this file simple enough
nothing new in JavaScript
we're up now looks something like this
and what we can do is again login with
admin and admin - one two three hit
login it saves me invalid login will oh
the bus that I change the password to
Triple A so let's just make it admin one
two three again and we say admin admin
one two three hit login you can see that
we get welcome admin but the problem is
that this session is temporary right if
I reload this we do not have access or
we do not we cannot save this session
right now so let's just fix that by
actually saving the session so let's
just go ahead and take a look what we
have in here some sort of myth so what
we can do is pretty much to stay user
dot save data and right here we can stay
response dot data right and for this one
what we can do is very much save this
that save data is a function data which
is the data and it saves us that the
username is the data daughter what we
get from the server user right and the
ID is Theta dot ID right and I guess I
have changed this here as well if I
remember right so we now have the
username and the ID with us for the user
and that would be pretty much it for us
to verify the user for now and we would
actually also want to say the user
user's name cause the user name on the
server itself so I have added these two
lines I guess and yeah
rest of the code looks same so okay so
now we can see that we are saving the
data right here and we are changing the
path
to dashboard right so what we actually
want is to save this data somehow right
so we can pretty much say local storage
dot that item and let's just say this is
login and we can say chess 1.35 and
right here we can give it an object of
username is username or you can just do
with es6 stuff ib is ID like that and we
can actually just stay logged in through
here as well we can just get rid of this
function then right so yeah we can just
get rid of the set name as well okay so
now we are saving the data so it might
be a good time to create a logout page
as well which would just very much when
you log out we could say that it does
nothing but pretty much just resolve
something and by the way this resolve
all of these dependencies would be would
have to be resolved first in order for
your redirect to take place from one
component to another so we can say get
results because this is never going to
be resolved completely so we're going to
say this location and user and I can say
that just user dot clear data and then I
can say location dot fat is oh right so
we can define this clear data and we can
say this that clear data is a function
which the stay is local storage dot that
item our remove item rather login and we
can say
logged-in is false and pretty much
username is blank and ID is blank as
well all right so far looks good and yes
so we can just take a look and reload
and enter admin admin one two three hit
login we get welcome admin if I reload
we do not get that now the reason is
that when we are making use of dashboard
we are checking if the user is logged in
or not and if it is not then we just
redirecting them to log in but inside a
user logged in what we can do is we can
attempt to login the user if a local
storage key exists so we speak and see
if local storage don't get item login
access right what we can do is we can
make an attempt to login the user we can
say logged in is true we can say
username is the we can first of all get
the data is local storage to not get
item item login and remember that we
need to judgment dot parse it and we can
finally say user name dot data and ID is
a charge ID and yeah that should be it
so if we reload it now right like admin
and admin one two three let's login we
get welcome admin we reload the session
stays right there right so you can see
that it does not just watch the way ok
so the next thing we need to do is
somehow make some operation with this
particular account right so what we can
do is inside our components and
dashboard instead of this we can say
divide II I don't know let's just say
this the user content
and we can say this h1 we can say this
div class input only why not let's just
keep it that way we're going to say
input type password placeholder new
password so we can just provide the user
to reset the password for this dummy
application and I can say this class
input button ng click new pass and that
we can say set new password
right click I reload this we can see
that we get the option to set a new
password and then inside a script we can
go to login controller or rather
dashboard controller and we can say
scope dot set new path which is I guess
what it was new path right is the
function which would again pretty much
be a similar HTTP request but this time
we're going to make it to let's just a
update our dot PHP and we are not going
to need username this time and not the
password as well instead a new path
which is our password is equal to we're
going to find this entry find new
password and then we're going to get it
back with scoped on new password and
we're going to send it like new pass and
we're going to tend the ID as the user
dot get ID right now we can just include
that we do have that so we are sending
this ID as a means of you can see this
is a cross-site request forgery token
just in case the or rather little space
somebody creates the exact same request
when your user is logged in right so
let's say I created a page eggs which
sends a post request to this URL and it
does that in an iframe or not in an
iframe but on the page itself but in the
background right so the user doesn't
know it so without user knowing his
password would be updated to whatever
the attacker want but when we are making
use of this as an ID what we can do is
pretty much check it on the server and
see whether the request came from the
user only or it was just generated by
attacker or maybe you can we can just
make use of this as a means to expire
sessions if they are no longer valid so
we can just go to our server and create
a new file update fast PHP create a PHP
tag in here and we're gonna start the
session start I don't wanna say or
before that we can just say if it's a
post or this set post ID then just
gracefully died and even before that I
want the header to have a content type
of applications restaurant right and
then we can do state if session ID is
not equal to post ID that means either
the session has expired or somebody's
trying to hack in to user account right
so this is a CSRF stack cross-site
request forgery attacks so you might
want to log it right here but I'm just
going to die out of it so again we're
just gonna get this thing rather all
these three there we got the connection
we just need the new password right
so we can say Moo fast is the new class
word what do we have in here new
password there we go so our query would
be something like update users set
password is equal to new path how we're
use the name is equal to what we had
from your session you name our user
right so I guess this is what we had
pretty much and yep
you can just take it out if that kind of
makes more sense because you're going to
make use of these codes here and here as
well so that might create a confusion so
I'm going to get the result in my slide
query 1 and the query right there and if
our result is successful I want the
response to have a status of done right
otherwise and say result or response its
status is error we should not occur
because we are since we are just running
a very simple query on our own system
right finally you can say echo JSON
encode response there we go
and now if I reload this enter new
password let's just say a a a it on set
new password HTTP is not defined we'll
just leave that
a set new password we get n valid login
well that is strange or what did we just
do right here okay so I guess we didn't
change the callback function so what we
need to do is actually instead of
sponsored data the status is done I want
to stay alert password updated otherwise
just alert CS RS maybe right and yeah so
let's just reload a a that new password
it saves me password updated right here
and if you take a look in the database
we get the password as cognitive find
okay so looks like ngmodel it is well
well not ng bind it is that new password
password updated take a look in the
database we get a perfect right and
similarly you can create a couple of
more accounts in here let's just say
this is a user one password you can
create a female MP t and mabeline PD has
the password as well and yep we can just
go with that and it just did that for me
we have these two accounts so we can
just go and we can log out we can log in
again we can say the username is Kringle
MPT and password is name LM Katti hit
login
says we welcome a whole MPD and I can
change my password to me hosting 50 is
not the password hit set new password
using password updated I get the
password as mini Lapidus on the password
and I can cook back to logout I can log
in again I can go with user one as well
as password hit login
it is me welcome user 1 user 1 has got a
Cruz password which nobody can guess set
password password updated and user 1 has
got a cool password we get all that good
stuff so that is not very much you would
implement a very basic authentication
app with angularjs and my sequel with
the beautiful URLs right I think you can
see that it just works perfectly fine
with the PHP and my sequel and angular
shape so that's all for this one and if
you like this then please don't forget
to subscribe like the video and thank
you for watching I'll see you then in
some other video</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>