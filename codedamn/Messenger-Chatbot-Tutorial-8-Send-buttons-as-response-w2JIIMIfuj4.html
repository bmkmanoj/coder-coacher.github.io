<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Messenger Chatbot Tutorial 8: Send buttons as response | Coder Coacher - Coaching Coders</title><meta content="Messenger Chatbot Tutorial 8: Send buttons as response - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/codedamn/">codedamn</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Messenger Chatbot Tutorial 8: Send buttons as response</b></h2><h5 class="post__date">2017-03-01</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/w2JIIMIfuj4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so what is going on everybody my name is
May ho and welcome to your ninth chat
bar tutorial in which I'm gonna show you
how you can add a button template to
your facebook chat board and it's quite
simple to do if you have the
documentation with you right so again
the documentation shows you a call
request but you don't have to actually
do that because you're using a script
right so we would just send this
response as it is in our PHP script now
you can go ahead and create a full you
know re sort of thing but what
essentially Facebook warns is just this
response from your script so it would be
kind of DBS to do that so what I'm gonna
do is I'm just gonna copy this and I'm
gonna send this response as it is back
to Facebook with the edits I want to do
right so this is not the absolute right
way but this kind of works right so
first things first let's just make get
rid of these because obviously we are
working with Global's there don't need
that right and yeah just get rid of this
as well okay so yeah one more thing is
that Facebook sometimes sends our data
back to us and when it does it says us
that this is an echo right so what we
can do is that right here we can say
that if is set message are a messaging
array and then what we have is message
right so this would be our right hand we
can say that if it said messaging our a
message and is echo and this would if
this is said then probably
Facebook has you know send you an echo
because I haven't seen it is echo false
right either it's not said at all or if
it's if it is said then it is true right
you can see in the previous requests
right so if it is said then we are
assuming that this is true if it is said
then we are assuming that is echo is set
to true and then we are just exiting
from the script right with the die and
otherwise we would want to check what
the user said so for now I can say
else--if else--if
is or we can just set send message to
message text and this is actually wrong
as well in case the user sends some you
know a like symbol or a sticker but
we'll just not care about that for now
the sent message is equal to test and
this is not actually how you would code
a chatbot but it's okay for us to do
that for now right so if the sent
message is test then what I want to do
is I want to send this response to the
user so my response would be this thing
and let's just indent that for a bit
right and this is create another
function here which would probably just
take a raw response and you'll need that
now because we are directly sending
their response
actually you can just do that and create
a boolean here and then check it here in
a statement it's just redundant code to
copy it again but I'm just gonna keep it
do separate functions for now for the
clarity right so let's just say this is
sent raw response and right here I'm
gonna say send raw response as response
and again this is your user-defined
payload for the button plate right again
this is the same thing so for example if
the user sets clicks this sugar trade
button then in the next response
Facebook sends you it would send this
payload button right I'll just start
chatting okay so let's just get rid of
one of these because we don't need that
for now let's just change that to Google
for now right and hilar I am a mini
fight version of a low right so we're
just creating a low and for the user ID
we have this so and what else forgot
yeah the rest looks good
so in the send more response we are all
good yep okay so yeah let's just try it
out on the main page and let's just say
we send test and in the end rock or peer
got access token on line 106
Oh or maybe it's not global because
obviously we are missing global access
token here right and global no user ID
well we have now obviously there's
actually no need for creating even these
last Global's I can just pass pass them
along but since these are fixed they
won't be changed for a script execution
time so that's fine right and for all
response we do not need that because we
are not actually using user ID here
right so again let's just try it out
test and you can see that it says me hi
there I'm minified version of aloe and I
click on show website
it opens google.com right so that is how
pretty much you add a button and you can
add I guess it's a limit of three
buttons for now right you can add up to
three buttons so let's just try that out
as well let's try with four to see oh
damn Facebook and ping sample show
website one two three four right let's
just test again and we can see that we
get too many elements so I guess it's up
to three for now you can see that it
works right so for now you can just add
three buttons to it so that is how
pretty much you send buttons as a
response and obviously you need a
smarter filter here instead of just hard
coding
what the user has sent and just checking
it in a strictly you want to use a red X
here or something like that so that is
all for this tutorial and if you liked
it then don't forget to subscribe and
thank you for watching I'll see you then
in the next one
real quick</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>