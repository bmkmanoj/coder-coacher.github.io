<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Using MongoDB Atlas at Autofi - Chris Trailer, Principal Engineer and Architect at AutoFi | Coder Coacher - Coaching Coders</title><meta content="Using MongoDB Atlas at Autofi - Chris Trailer, Principal Engineer and Architect at AutoFi - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/MongoDB/">MongoDB</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Using MongoDB Atlas at Autofi - Chris Trailer, Principal Engineer and Architect at AutoFi</b></h2><h5 class="post__date">2017-11-21</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/nnysjgkBowQ" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">I'm with Auto Phi name's Kris trailer VP
of engineering chief architect a little
about myself been doing web stuff for
for a while
anyone remember mosaic browser beat two
people three people four people all
right five people all right yeah so back
then then using javascript since early
Netscape fell in love with it for not
immediately but after a while it grow on
me and finally I really liked it
lots of reasons we'll go into those but
really I'm excited about the the kind of
day and age that we live in now because
now we can actually go the entire
platform could be all in JavaScript it's
amazing from the client and SBA's at the
middle with node in the back with with
Mongo even it already and sprinkled in
there it's all familiar all a single
language their format and really low
audio all right so I thought I'd do this
a little differently I wanted to talk a
little less about how and a little more
about why so I really want to answer the
why why do we pick the stack why are we
using the tech that we're using you know
there's plenty of demos plenty of slides
plenty of websites that can go out to
and learn super cool stuff way better
than I could ever explain it so I
figured I'd give you why you know why go
through our kind of a little bit of our
decisioning and the key points that we
that we use to kind of evaluate those
kind of I like to find the best tools
for a project app business that's a
developer we get lots of toys flashed in
front of us all the time and you
framework and you module and whatever
you service it gets really exciting and
we want to use those things but just
because there's something new and flashy
and cold doesn't always mean it's a it's
a great fit for whatever we want to use
it for so that's kind of what I'm trying
to structure this adds a little more of
when to use it or why we use too
a quick overview talk about the problem
we're solving the issues that we're
trying to address obviously a little bit
about us and Auto Phi and what we're
doing we go through a tech stack and
then get to the good answering answering
the why question all right the problem
auto industry so little backtrack first
we Auto Phi are doing financing for cars
online so everything's fully automated
signing with your finger you don't
technically have to talk to a dealer
until you pick up your car kind of thing
find a car you like click the Buy Now
fill your credit lap get instant
decisioning get to pick your own deal
see all the numbers that makes sense for
you and then pick your product sign with
your finger boom you just bought a car
pretty cool so the problem on auto
industry is it's pretty bad it's it's in
a little bit of turmoil right now yeah
very antique consumer right that it's
really not about the end consumer when
you walk into the dealership it's more
about you know the dealer and the
manufacturer so what this kind of means
is for instance financing you know how
many people have bought a car almost
everybody right so raise your hands if
you thought it was a great experience
what awesome
good for you so one out of however many
up to alright fantastic
so yeah you you you you've been there
your vet so yeah so mostly not a great
experience and that's a big problem in
the industry is they don't like it
consumers don't like it it's not it's
not something I look forward to and it's
your second biggest purchase you make
besides a house you should be excited at
least I do when I buy a car I'm I'm
excited to get the car and can't wait to
drive it can't wait but man there is one
thing I can wait to do and that's to
talk to a dealer go in
wait four hours all that stuff so it
doesn't feel like that's very consumer
centric
especially in the day and age we live in
now you know instant everything consumer
focused you know so it's it's not really
it's not a good industry right now for
for a consumer I mean it's still living
in the past or the tech that they use
most integrations that we do or our XML
and soap and stuff that I'd rather not
do I love the JSON loelai but the but
the whole thing is kind of in the past
right so even given their business
models and how they do things is still
decades-old kind of stuff it's not it
hasn't really caught up and there's been
a lot of companies that have gone out
and tried to solve this you know from
online car buying experience to you know
better websites and using technology but
it just it still doesn't feel right it's
not not really still geared towards that
consumer another thing that I think is
if you if you bought a car and had some
financing you probably sat in an office
the finance manager's office for a
couple hours the average they think is
about three hours that's a that's a long
time and I'll tell you a little secret
you didn't need to wait three hours
maybe five minutes ten minutes something
like that but really what happens is you
walk in the office they fill at the
credit lab which takes forever then they
they send it out to a bunch of banks or
maybe even one bank
depending on their relationships with
these lenders they'll get a bunch of
offers back but they get one offer so
here's you know Chris trailer and here's
an offer for Chris trailer so the
finance guy will sit there and say okay
this one I'll make the most money on
this one seems like a consumer abroad
buy it okay that's a that's your offer
they come back out hey Chris great great
news I've I've got a great deal for you
here it is that's not a lot of option
you kind of take it or leave it maybe
you're in negotiator so you try to
negotiate go through the the rigor
but there's no there's no there's no
choice I didn't get a choice of you
might have gotten 20 offers back like
yeah I would like to see those offers
I'd like to maybe everything's about
risk-based pricing so the bank
calculated a risk on me but they didn't
calculate it to my exact specification
so what if I wanted to put 10 $10,000
down versus $2,000 the dealer was
suggesting what if what if I wanted a
longer term or a shorter term so that's
a that's another thing there's just no
options in this day and age name
something you can't buy I think the only
thing I can't sorry can't buy online I
think the only thing I came up with a
house and an airplane but anyone else
got any ideas what's something you can't
buy online today yeah so nothing right
also with our digital world we should be
if those who bought a car you probably
remember filling out all that paperwork
out ton of paperwork
not only the paperwork but also all the
signing you had to do right so there's a
some dealers we've seen that there are
actually 45 minutes of your weight is
simply them just printing out all the
contracts and documents that's like
literally 45 minutes so they're you know
talking to you selling you other stuff
or getting you coffee or whatever that's
that's a a lot of paper and yeah that's
a lot of time to just sit around and
print stuff not to mention what you're
about to have to read and expect to read
and then sign it anyway so that's that's
the that's the problem
so in summary there's a lot of a lot of
talking too much time for the consumer
and the dealer right the dealers got to
spend a lot of time on this to customer
has to wait a long time high-pressure
sales not a lot of us are expert
negotiators nor do we want to be great
to just see the sticker price and say
okay I'm cool with that
so let me let me buy it not enough
choice even though there is choice in
the back office
you still don't see it and not only is
there not choice that way but there's
also not a lot of choice within the
offer so if I want to put a little extra
down you know if I put more money down I
should see or expect maybe a lower APR
it reduces the risk to the lender etc
transparency another big one I didn't
really talk about this much but it's you
don't really know what the financial
terms are you know you got your your one
little box but a lot of people maybe
read it doesn't you know dealers can can
use that kind of against you and you
know slip things in all right so
auto-fire we connect dealers to lenders
so customers can finance and purchase
vehicles online so technically it
doesn't have to be online it could be in
store but you are actually online doing
the transaction so what we want to do
and are doing making financing and
Leasing more transparent so all the
numbers in there we give them to you we
show you all the calculations we show
you all the little breakdowns of
everything from from taxes and all the
fees and you know the amount of interest
you're gonna pay on this loan you know a
lot of people don't realize hey you're
about to pay $4,000 in interest you know
you want to take a couple extra points
off that APR we also try to put it into
language that's that's more digestible
it's not just lawyer speak it's not just
some big box hidden at the bottom of the
page it's it's out there in your face
ready for you to to consume another
thing probably my favorite thing is give
the consumer options so we actually have
sliders few little sliders and change
your life ones for terms so if you want
a three year financing term or maybe you
want seventy two months that you can
slide across
now as you slide across
you should see your monthly payment
adjust potentially even your APR if the
lender supports the risk-based pricing
second slider is the down payment so now
and see how what it looks like it's zero
down yeah well maybe I got five grand to
put towards this what's that look like
so it really allows customers or third
thing which is constructing their own
deal you don't get to do that anywhere
you don't get to just play around with
you know how is this going to affect me
what's a cost and you just slide around
and see all the monomers adjust no
pressure so this is usually try to be
less of a salesperson this could be not
a replacement but a augment the finance
manager or sales guy the sales guy can
actually be more about making sure that
you love the car make sure it's a great
match for you and then hand them off to
with an iPad and it's a cool buy the car
now now I can move on next customer and
help them well I get your keys while
you're buying it it's super cool because
you can do it from anywhere it's a it's
online so sales guy can send you a link
to a new credit app with the with the
car auto fine link and they could fill
it out at home at 2:00 in the morning
and buy a car just got to go pick it up
so this is part of the giving dealers
the tools so that we're not trying to
dealers aren't our enemies they're
they're our customers we want to help
them make this more consumer friendly
and consumer centric and and have this
process do that by capturing converting
consumers online so that's that's one
way so on their websites that they
already have and had of the time to
traffic how can they engage the customer
when they're ready to to take them
through the flow it's simplify the
process in store so once they're in
store there are they're they've
negotiated a price anything just click
and instead of waiting around for three
hours at the finance manager's office
they can quickly construct their own
deal
they feel good about it me I'd feel good
about it
which ultimately should allow a
salesperson to sell more cars if I don't
have to spend so much time with a
customer throughout the entire process
and technically sell more cars all right
I'll do a do a quick demo
all right
Lord of Escondido so we're gonna buy
this nice 2014 Ford Focus I've injected
they don't actually use our product but
I've injected a our button to mimic it
all right so I'm gonna just kind of run
through this and fill it out as I go
talk about a little bit so I gave the
email but I like financing you bet I
won't do a trade in I don't have one of
those right now alright so I get to some
basic credit application field they
don't have a joint although we can do
joint or Co applicants phone number I'm
just gonna get some fake stuff off this
address super easy filled it out for me
Thank You Google of a mortgage if I not
for business gonna use it pleasure
alright the birth date bill
though those of you that have credit
filled out a credit up was that the
number of fields that you remember and
could you have filled it out that fast
probably not usually they're about 40 to
60 different questions and data points
that you got to give for us we've really
pushed on the lenders to really only
require the bare minimum that you really
need for credit decisions and your
decisioning process that's pretty cool
all right now the legal legal stuff we
got to do all right so I'm cool I agree
all right so now it's going out talking
to lenders checking the credit for
sometimes funny rebates if they're out
there from the manufacturer and voila
I'm approved fantastic see what I got
all right so initially I see a 60 month
term no cash down two hundred eight
bucks a month all right it seems like
each of these banks is offering me
something decent looks like they're all
the same Apr
witty bacon chess got a cool what's
happens if I put a little money down all
right so now we see chess ends up being
a little better deal so they give me a
two point eight two percent versus the
three point five four all right that
looks kind of cool so same cash down
forty two months cool let's so let's
check out this so I'm looking at the
offer now this is where the transparency
stuff starts kicking in right so I can I
can look at the another breakdown of
everything so we actually go out to
taxes and calculate all the taxes for
the dealer taxes and fees so we can
check out all those so there's there's
no hidden there's not going to be
something that's kind of thrown in
last-minute it's all gonna be there show
the amount financed the APR the financed
term or charge sorry that will
that's how much interest I'm expected to
pay over the 42 months right there in
your face there's no nothing hidden all
right so this looks pretty good I'll
continue on oh cool so I can pick to the
day of the month that I actually want to
pay I'll keep it to 22nd a month seems
like a good day now the another thing
that dealers really need is the they
comb F&amp;amp;I products finance products
they're actually where the dealer will
make a lot of money and most their money
nowadays
the dealers aren't making that much
money on the cars anymore especially if
they're doing stuff online they gonna
they have to give kind of a bottom price
or they're non-negotiable non haggle
kind of pricing so they they need to
make it somewhere fair enough everybody
needs to make money so they offer things
like vehicle service contracts there's a
lot of different products that these
these dealers can offer something we
also do is try to just pick the ones
that that do make sense for a user not
the crazy ones like you know protect my
tire valve cover or something like that
all right so I'm gonna I'll pick a
couple I'll pick a service plan might as
well gap insurance basically if I total
the car usually used for for new cars
but it'll cover the the cost in between
what you owe and what the insurance
company will actually pay you yeah I
didn't know until I bought it was a
couple cars I didn't know about yeah all
right so I've picked my products that's
it now as I go through my review screen
everything's fully laid out the dealer
address contact numbers total cost of
the vehicle all the breakdowns taxes
fees add-ons get down into the total the
total cost of the of the loan and the
car down payment then I get into the
Atilla stuff just making sure I clearly
disclose finance charge
and expectations and then everything
about payment do all right so this all
looks good to me
now it's actually generating contracts
now we have all the contracts so I've
got a probably a couple product product
contracts like the gap waiver then the
main contract as well now it's really
cool I'm gonna go sign them obviously
I'd be very diligent and read through
every single word of this demonstration
purposes it'll just kind of breeze
through so initial I've read all this
looks really good pull one over on me
all right finished now what am I gonna
say just about a car that's uh we should
definitely throw confetti if I had some
I actually wanted to bring some throws
that would be funny and I would had to
pick it up so all right so kind of cool
so now we see here's where I can go pick
it up the here's all the documents I
just signed go download them it about a
car pretty cool
just a quick showing of something else
that we're doing it's a we call it
Express Checkout so you know when we
first started the whole thing this was
actually our button so we tried to put a
Buy Now button on the website thinking
everybody would know it by now mint but
we found out we should probably do a
little more so now now we've offered
releasing we actually allow someone to
start playing before they actually
submit all their PII and personally
identifying information
now we allow them to play around with
stuff some cases it's actually using
potentially real real rates so real
decisioning so you can actually kind of
play around and expect what you see and
hear is pretty close to what you're
gonna get when you actually submit a
credit app and that
they do decide to buy it obviously you
got to be honest with your your credit
worthiness oh yeah so you can actually
play around you can see the the spinner
kind of going as I move through credit
bins we'd expect it to go down a little
no way so that's pretty cool right about
any any thoughts or questions on is
talked a whole whole lot yeah
well that's up to the lender right so
technically when we very first started
we were or in the online marketplace so
we are actually going to make credit
decisions and we actually did and
originate loans and then sell them off
to whatever you know institutional money
or net worth individuals kind of thing
then Lending Club kind of had a little
hiccup and and there's really we
realized that investors weren't wanting
5% loans and 6% loans it just wasn't
going to be it's not making enough money
for anybody so I actually got out of
that pivoted about a year ago and now
more working as kind of the piping in
between the lenders and dealers and the
consumer so we're trying to connect
everybody together and this kind of
newer way where lenders not bringing
back one one kind of deal we actually
want we want more we want a matrix way
one we want those sliders and that's how
we talk about is you know we need to
fill the slider so for identity theft we
can't you know we're we're not it's up
to the lenders and their credit risk
analysis people to to come up with
a PCI no I think that's I think that's
just for credit card so originally we're
really worried about that we still are
we're sooo still hyper conscious about
security we store all of it some of it
will we will purge in a race right after
the loan app actually expires or is sold
some other stuff s PII so like so SH no
we don't need that any longer we need
but we do need the data that we can run
our business on so if we need to invoice
dealers for you know here's the 20 loans
we sold it or something
or for general reporting or you know in
three years someone says no you you
didn't sell that for me and we have to
show well yes we did here's the car
here's the person but we're definitely
security conscious and we don't want to
keep anything longer than we have to I
don't I don't want that data
I really don't but I'll get into why
it's some of the features of Atlas we're
actually at our needs which was actually
kind of tough to find but I think your
original question was maybe standards we
have to follow PCI no but where every
employee of our company has to go
through bank training just like we're a
bank very fun but but you learn a lot
because it's actually kind of cool
there's there's a lot of things and
regulations and policies and things you
got to learn to do or not do and how to
protect how to protect the consumer and
definitely care about that well thanks
all right yeah so we just kind of got
through our pilot we actually partnered
with Ford so they actually invested some
money so we rolled out this new way to a
a few different Ford dealerships they
liked it so much that now we're blowing
it up so now it's how many dealers can
we can we do and how fast can we do it
so they've kind of turned this Sprague
on for us and super amazing
I ring too
now we actually encrypt some of it like
real encryption obviously we do at risk
anything transport with anything is over
encrypted but yeah at rest
oh yeah yeah okay yeah cool
that demo okay now about the tack so I
have a new acronym for us either femme
or venom kind of going with venom
because I think that sounds cool
we know use any frameworks currently
client sided frameworks may leave
vanilla I'll use a little jQuery when we
can but the example I showed you the
second demo of the cool little bars with
the estimator tool that actually goes
onto the dealer's website where they
have a ton of stuff on it I mean those
pages take forever to load so even a
just adding more payload to it or be
potentially injecting something that's
going to mess up their site or our stuff
like even jQuery or anything that's just
it's just too big of a risk too much
issues that we don't want to have so we
had to go vanilla on it meaning just
plain old JavaScript so I'm leaning more
towards that venom so the vanilla J's
express note and of course Mongo
JavaScript everywhere I think it kind of
touched on that already but I love
JavaScript it's awesome and now this was
a cool time in a years case that
actually made sense to go all the way so
everywhere javascript we use i'm a big
proponent of as a service so anything I
can get as a service I basically wanted
long as it makes sense obviously but so
we're doing a our past we got we have
Heroku obviously MongoDB Atlas then some
github code ship and Heroku for CI a CD
which really makes me happy because the
whole CI CD you means we can iterate
quickly get code out quickly get it into
the users hands get it into building or
measuring it
so now I'll get to kind of the whys
vamsi had a way better architecture
diagram I did this in about two minutes
and even forgot one of the key players
and the whole thing but basic
architecture we have dealers lenders
over ton of we have I think twelve or
fourteen different third-party services
that we have to hit during the course of
a loan application and process we're all
completely in AWS Heroku is hosted on
AWS
they have our API web and task servers
various apps and then of course Mongo
Atlas on AWS as well and we use a few
other AWS services and the point I
wanted to make out of this was I don't
have to really touch AWS anymore which
is wonderful if we'll get to the kind of
my love affection for Atlas it's their
UI and doing these things that if you
went into AWS and try to do it yourself
you know props to you some of its kind
of straightforward other stuff would
just it just takes too long at least for
from my skill level AWS I'm definitely
not no expert at it but the rate of air
that I might do by messing something up
goes way up and if you can just click
click and something's done much rather
have that it's awesome alright Java
score JavaScript everywhere why why is
that my doesn't matter why is that cool
to me
first of all all of our Deb's can touch
any aspect of our system or if they're
considered front end or back in or just
the server stuff everyone could
technically hop on an issue and
understand the code that's there it
might not be that might be not be their
proficiency but they'll at least be able
to get it and understand it quickly so
yeah so the client-side API tasarov's
all the way the data is awesome for me
in my
it kind of avoids the dev silos kind of
Courage's full-stack
I think devs become better when they
understand parts of the system that
they're not good at or they're that are
not their proficiencies understanding
the pay points and how things work on
the backend can only help a front-end
developer same thing for front to back
also allows us to easily transfer people
between teams if they want to get any
bored of the feature just want to do
something new from API integrations the
client-side front work to data queries
etc increases knowledge plus I feel like
it gives them more ownership so it gives
a dev more ownership of the system if
they're touching more of it
understanding more of it they feel more
like it's it's ours it's alright so so
why MongoDB I'm kind of going to go
backwards a little mmmm start on the
right side
those sequel documents I thought it the
use case I thought this was a great use
case and here's why first from the data
standpoint you think about all the data
that we're going to capture and use it's
going to be the applicants data it's
gonna be the vehicle data maybe there's
some of the products some third-party
data that we pull into use as part of
the whole thing
any of the credit decisions and offers
that come back from our lenders then
references to the to the contract so all
that's really not going to change over
time so they're they don't need some big
relational thing where you know if you
update it once and it updates over here
it really it really wants to be static
once you get it in there the applicant
data is not going to change it shouldn't
it can't technically compliance I mean
you don't you don't want someone to
accidentally update something because
they're applying for a new loan or
something
so it's largely des normalized at this
point we thought of it I thought it is
kind of the deal jacket of how of how
dealers do send these things to the
lender so they they create these massive
literally an envelope that has all the
data that never changes and they send it
off to the letter says here's your
here's your packet here's the whole deal
the other side obviously in in the
relational world just selecting you know
all the data for one one loan
application would be probably like
twenty joins just number but it's got to
be fifteen to twenty five joins just on
to select also the twenty eight and
whatever fifteen to twenty five
different inserts when you're trying to
insert data it's a lot of I got sick of
joins back in the day takes me back to I
originally came from our DBMS world
spend a lot of time in my sequel and
sequel server building you know big apps
that did a lot of data so I understand
that world very much so coming over to
MongoDB was one of the things that was a
little it was tough for me it was a
totally different mindset I wanted to
stick relations and everything I wanted
I wanted foreign keys everywhere star
schemas and all sorts of stuff back to
the first point another thing I kind of
I was thinking though that from the
client side were nowadays we're building
a ton of JSON and all these data
structures there so kind of makes sense
if you're already building these
structures why why are these structures
not good for the backend to it might not
be the same and want to make them
different and stay kind of expose your
schema but all right so next thing about
MongoDB flexible document model so I
kind of the fact that you have no schema
was like mind-blowing for me when I
first thought about it how can you not
how can you not define this how can you
not say this field is an integer you
know eight or six into sixteen or a n
varchar' 32 how can you how can you not
say that you define this stuff it's just
gonna be gobbly gook and trying to
convert it later on your ORM or back in
the days when you had new or
Oh our M's just sounds like a like a
nightmare
but that's where Mongoose comes in I
think someday apparently I didn't know
Atlas didn't officially support Mongoose
maybe we'll talk a little bit later but
Mongoose super awesome I'll get to that
too just as a quick that's the only code
I actually have in my presentation but
what-what did help me get over to Mungo
was was the two things was references
and embedded documents so references
saved my thinking because yes there it
is there's a relational key there's an
ID that I can I know will link to some
other document somewhere else so I know
they don't calm tables and columns and
rows it's collections and documents and
the older properties it's so cool
so I finally had something that I kind
of let me over got me over the wall and
got me over the hub so I felt safe I
felt like okay if I need to build all
these relations hey there it is that's
how I do it
embedded document this kind of goes back
to is basically just a complex structure
that you can either define or not but we
already do it on the client we define
these really complex objects that store
our data you know yeah we just store
that in the backend awesome
another thing is productivity I just
think it's it's great that each one of
our developers can touch everything that
I talked about that great tools like
Mongoose I'll talk about that briefly
bongos
aggregation anyone played with the
aggregation framework yeah pretty pretty
slick I think that was also a big change
for me coming from already BMS world of
how to how to accurate
it was it took me it took me well the
shy that there was not an easy concept
at the beginning once you pick up those
the subtle differences though it gets
gets a lot easier all right so that's
Mongo
go for me so a little more on might have
already done this but the flexible
document it's not your typical table you
know it's not structured very structured
data it's whatever you want it to be
references and a Bedouin over that super
flexible so for us it is super flexible
but we're dealing with PII spi and very
specific things that we know we don't
want to ever change we definitely want a
schema so how do how do we get a schema
in a schema via via Mongoose which is a
great tool for this Mongoose everyone
used Mongoose anyone use Mongo and not
use Mongoose oh nice work so obviously
it's structured unstructured data in the
same document they have cool things like
validation so Bongo has its own
validation that you can write at the
server level but this allows you to do
it at the client level not the front-end
client but the at the before you
actually commit it to the database or
try to execute they have a bunch of
built-in validator so they have like
requires a field required there are a
min max on a string or a min max on a
number you news so like if you wanted
for specific values it's the only four
values you should have in it you just
rock it with you know them and no it's
no it's there
you knew custom validators which my
favorite thing and just put in whatever
regex you want call it the day all
happens pre save so before hitting the
database you don't have to do a network
hit get penalized with that or even
potentially corrupt for updated sorry
there other cool stuff like typecasting
you specify it number you're going to
get back a number it's gonna try to
force it into a number population goes
back to goes back to the references so
first kind of came over it was this was
a really important thing because I got
my relational sense I could just do my
little joint
and so if I had a user reference on a on
a field I can just say populate user and
now within the model that I get back
from sorry within the document I get
back from from mago now it's got my
original document from the question plus
the entire thing from the user
collection as well
all right user document virtuals
super-cold you can kind of like computed
columns or something like that in Secor
my sequel only gotcha with with virtuals
for me was you got to remember that
they're not actually stored on the
server side they're all client-side so
if you go and execute a query and trying
to do some aggregation remember it's a
little you know one plus one isn't there
statics I thought was pretty cool you
can define these custom functions that
kind of attached to to your models so if
you wanted a very specific thing like
find dealers that are active you know
you could technically think of it like
kind of like a stored procedure in a
sense but there's a those helped a lot
all right
the only bit of code I have in here
little coop mongoose love so yeah
alright so everyone's used Mongoose so
this is probably super too basic for you
but all right so we're gonna specify
some of the you know this is a type
string for name required definitely true
little complex object with street and
city all strings all true but get down
to States and I'm gonna say it's an enum
that I'm only going to accept these
three values pretty cool then I did a
custom validator so zip we do a little
regex for only five digits that's it and
that works so my but my after this my
next favorite part was just being able
to write in the same document have a
what the mongooses mixed mixed type but
that allows it is I can put whatever
I want in there now so for us if we get
back a credit report or just different
decision structures from various lenders
I can pop them all in there and I don't
have to have to worry about breaking
schema all right so why why MongoDB
Atlas bomb C's actually showed some
screenshots so thank you for that I
really wanted to do that I think my
favorite feature right now is the the
effortless scaling the whole place I
think he showed you the page where you
can you know you click something and
slide it what you might not have seen is
what I like to call click-click-boom
because to actually change your instance
types so if you want to add more memory
and change your iOS it's really click
click boom you're done you just did it
and it really works
and it really works superfast try doing
that and manually via AWS it's it's not
click click boom it's like five hundred
clicks and wedding so really love that
you can scale up you can scale back or
down you can scale out sharding it's
it's just nice you want to add shards
it's a you know click click and security
features big for us huge for us
encryption at rest absolute must be PC
definite must I'm glad I'm say it took
you through peering we don't need it yet
or can't use it yet because we're on
Heroku I think there's a way yet to
appear with Heroku unless we go
enterprise and that's like a billion
dollar so TLS and as a cell is great
two-factor authentication white IP white
listing all good stuff backup restore
you got a glimpse of that cost-effective
it compared to the other vendors we we
checked out it was just cheaper for us
I feel like there's a big increase in
productivity mainly headcount fryi half
to a person worth of half to one person
worth of time to do all this stuff
whether it's you know if this was a
manual deploy in AWS or wherever else
definitely takes some time and
dedication definitely stuff as a little
startup I don't want to do I want it
unlike coders coding and I think most of
them want to code some like DevOps and
stuff like that but I don't want to have
to hire someone that's really good dev
but really good ops engineers or
infrastructure engineer as well unless
you get lucky have great deaths but no
one really likes infrastructure so it's
left x nops more time in code no need
for login dashboards I mean they got a
built-in right there so you can
definitely leverage more like New Relic
it's great for transaction tracing and
stuff like that
but if you don't you know don't have
time to do that quite yet then they've
got some cool dashboards for you too I
love design so they're UX is actually
pretty good go back to the
click-click-boom thing they figured out
you can just click something slide
something and boom you just increase
your storage size by hundred gigs I mean
super simple with no downtime probably
the most important one business-wise is
processing controls so at the time when
we are evaluating vendors you had a big
company doing a survey on us and doing
their due diligence and security
obviously for that was a big important
and you need to prove that if we're
going to be on AWS some something we
don't control that this company has good
processing controls
how they access the secure data one
thing is like keys key management so
with encryption at rest there's a key
somewhere and someone can access that
key who can access IQ do they have
procedures in place
do they have processes in place to to
control and make sure that not just
anyone can see this key or use this key
making sure that it's checks balances
and audited and all this stuff so super
important for us our own company but
also important to our customers
primarily our big lenders so that's
that's super important in MongoDB
actually worked with us so they actually
talked with us they talked with our
clients the customers they helped us
through the process we're very open and
good about that so we did talk to other
vendors that surprisingly weren't which
was and but so that's that's something
when you're evaluating these any as a
service just you know if you're doing
something secure that's really secure
then make sure that they have the
process and controls that that you'd
want all right a little bit about our
Atlas environment super small still we
have two clusters only because we had
two but now we're finally convinced the
people that we are safe and we are
secure so though we're gonna we get to
finally merge merge instances only on
them I'm 20s instance was only four gigs
of RAM each instance has 20 gigs of data
but we need to increase it
I was almost hoping to do a live
increase but encrypted storage use that
that was a check box boom check I now
have encryption at rest super awesome
auto backup you guys got taken through
that super super nice obviously TSL SSO
sorry tls/ssl and we're just low load
there's not
we haven't really been able to hardcore
performance test it yet when we were
first evaluating it I played with all
the dials that play with all the buttons
put some load on it and it it did well
but in a real world I haven't haven't
seen it yet so worried on that one
that's it thank you
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>