<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>MongoDB Drops ACID | Coder Coacher - Coaching Coders</title><meta content="MongoDB Drops ACID - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/MongoDB/">MongoDB</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>MongoDB Drops ACID</b></h2><h5 class="post__date">2018-02-15</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/gkanAmH6cfE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">okay sorry like please have your chief
concern
ladies and gentlemen please take your
seats we'll be getting started in one
minute
ladies and gentlemen please join me in
welcoming MongoDB regional vice
president Susan Palmer
thank you so much for joining me today
we're joining us today at MongoDB local
Seattle today we have the entire
Northwest sales team and have a slew of
technical experts to help you answer
questions and learn a little bit more
about MongoDB today we have a tremendous
program ahead in a lot of exciting news
but first I want to thank you for taking
time out of your week to come spend the
day with us
we're looking forward to getting to know
you a little bit better and sharing a
little bit about MongoDB we have a
couple things I want to remind you
please feel free to tweet hashtag MD be
local and download the MD be local app
we have a contest every time you're
getting going through a session and
leave a rating you'll be entered for
$100 giftcard
not bad so as I mentioned we have a
quite a lineup today customer speakers
please use the time to network learn a
little bit more visit the ask the expert
booth which is open all day long it's a
first-come first-served but we'll
certainly take time to answer any
questions that you have so as I
mentioned we have some exciting news
today but don't take my word for it it
is my pleasure to introduce to you
MongoDB s CTO and co-founder Eliot
Horowitz
thanks to you then morning everyone
it's good to be in Seattle so we've got
a really exciting morning and a whole
day prepared for you so I hope you all
stay with us all day have a really great
day I hope you've learned a whole bunch
of stuff about what's in longwood EB how
long the DB can help developers be more
productive your nots one of our core
tenants is how do we make developers are
not productive and about a bunch of new
cool and interesting stuff that we're
working on so the first thing we're
going to talk about today is MongoDB 3 6
so Mongo do b-36 actually came out in
December and there's a chock-full of
great features again focused on making
developers really productive making sure
that that data you're working with is
the best way maybe the mom give me is
the best way for you to work with data
and making sure we've got all the pieces
to build a really great system and a lot
of what were going to talk about is
based on the document model right we
fundamentally believe that the document
model is the best way to work with data
because it's the most natural way for
developers think about data the most the
most natural way for programmers to
think about data because it's the way
that people think about data it's the
way that other applications think about
data with classes and structures of
hierarchy and so a lot of things we're
going to talk about how we can make the
document more effective so the first
feature we'll talk about is dollar
lookup so in am I'm going to be three
two we had a support for dollar lookup
listen I'm going to be three two we
added support for Donald lookup
originally and dollar lookup is the way
you can do joins in MongoDB so in three
six we made a lot of enhancements so in
three six we can do a lot more
expressive dollar lookups so here's the
examples schema here the document it's
an order from an e-commerce store so in
this order we've got line items so we've
got you know for each thing you
purchased in your order you've got a
line item so you've got an ID 123 you're
buying a battery and you've got a price
so let's imagine that you want to
display ratings you want to display one
order on a page and one displayed
ratings for each one of these things so
effectively what you want to do is a
join between the orders collection and
the reviews collection so in three six
you can do that very simply you'll do
the order you'll join it with the
reviews collection you can act
do a full sub-query in that dollar look
up so for each item in the line item you
can actually go through and do a group
and do an average right so you can
actually compute very easily in one
aggregation query the average rating for
every product in that order right just
making it really easy to sort of
leverage the database to do all those
kind of work attitude weather and
analytics oh so the next thing we'll
talk about is arrays right if you think
about what makes a document database so
powerful it really comes down to arrays
right so Rays give you the choice of
embedding sort of one-to-many
relationships directly in the document
it's a really powerful concept and what
we've made a bunch of enhancements
around how you can update arrays right
so you've always been able to update
individual elements in our array or sub
elements in an array but we've made that
even better so the first thing we're
going to do is we're going to look back
at our same order and what we want to do
is give this person a 20% discount so we
want to multiply the price of every line
item by 20% so now you can do that with
one query and Mongo you're going to go
through you're gonna say update line
items dot price with this little
modifier in there that says update every
single line item what if you only want
to update some of them what if you only
want to update items that you haven't
yet shipped maybe like half the order up
half the order didn't get shipped so for
every you know level of hierarchy in
that array or in that document you can
actually put a predicate so you can
actually have a predicate in here that
says update every price of a line item
but only the ones where it has not yet
shipped so now no matter how and then of
course what if you're even more nested
right what if you've got multiple levels
of hierarchy so in a document like this
where I want to update my phone number
you can do that as well but so as many
levels of hierarchy as you have in your
document you can update some or all
elements and you can have predicates at
any level you want right making it
really easy in a single operation to
update the document right and this is
really powerful because inside of that
document inside of that one update
statement everything is atomic which
just makes it that much easier to work
with so we're calling this feature the
fairly expressive array updates it's
quite powerful it's been around for two
months now so check it out so next I
want to talk about is schema so when we
started talking about MongoDB but nine
years ago we often called Mongo a schema
list database which of course actually
doesn't make any sense
there's always schema associated with
data there are indexes in Mongo there
are types in Mongo so of course there
are things you can do and so we tried
calling it a flexible schema more
dynamic schema but somehow the schema
list moniker has stuck I mean that's not
quite accurate but for a lot of people
they want to have somewhat level of an
enforcement of the database right so
what you really like to be able to do is
have flexibility as you're developing as
we're adding new features to modify the
schema very quickly but you want some
level and force method database right
maybe you've got different applications
right into the same database maybe
you're ingesting data streams from lots
of different vendors and you want to
make sure that you know a bug and some
downstream vendor doesn't you know cause
data corruption in your application so a
MongoDB 3:6 we added support for JSON
schema and a JSON schema does let you
define a schema for it document - Mongo
in JSON using the industry standard JSON
schema right we've extended it a little
bit to support the warp types in Mongo
right mongos more types in JSON does but
it's the same syntax same format so
here's an example of what it would look
like basically you say what the
properties are if they're required if
you're allowed to have more properties
or it has to be very explicit and you
can put types on them saying it has to
have a in this case that's of a price or
every line item in your order house type
of price it has to be a number and it
has to be greater than or equal to zero
right you're not gonna sell things for
negative amounts and then you put this
schema on the collection and every time
you do an insert or update and make sure
that whatever document you put in there
is valid and the great thing is you can
just obviously completely optional and
you can make it as flexible as you want
so if you want to learn more about how
to do it sort of schema modeling with
Mongo I encourage you to check out the
advanced schema modeling talk a little
later this afternoon so the next I want
to talk about is retrial rights so one
of the great features of Mongo for a
very long time has been high
availability right you have a replica
set in MongoDB when there's a failover I
will say when there's a hardware failure
or a network failure there's an election
a new primary takes over right we've got
we can now guarantee that those things
in less than 1.7 seconds so it's very
high availability for what happens to
rights during that window let's say you
do a write in your driver let's say
you're updating a document and there's a
failure you don't know what happened you
don't know if the hardware failed you
don't know if the network failed and you
don't know if that up if that operation
failed before if the network connection
failed before or after it got to the
server before was before was committed
and so with your tribal rights you can
say the database and the driver now have
a contract that says if there is a
network error for whatever reason a
hardware failure an election just a
transient network error retry the
operation and well the database will
guarantee that will happen once and only
once
so how do you do it well it's quite
simple so all you have to do in the
three six drivers is turn retry writes
equals true on the connections in the
connection string and everything else is
done for you so if you turn that if you
turn that on and you get a write error
when you're doing an insert or update or
delete the the driver will automatically
retry the exact same operation there's a
unique ID in the database if it had seen
it before will not apply it again if it
hadn't seen it before we'll apply it
right making it super easy to write
applications with even higher
availability and sort of less user pain
and less sort of work for the developer
if you want if you want learn about how
we implement it filner how we
implemented this in three six just
listen to talk it's quite a good talk to
the Machine a little bit later today as
well so the last thing we're going to
talk about in Monga to b-36 is change
streams right almost every application
today wants to be real time and with
change streams in three six you can do
that with Mongo very easily so what
change does is give you a feed of all
the changes happening inside the
database with a really nice API so if
you want to be able to update some downs
downstream data or update an update some
user code somewhere or update you know
data it's sitting on a mobile phone with
change dreams that's that's very easy
again so what does it look like it's
just like this so basically if you open
a change to you on a collection you can
either get all the changes you can say I
only want inserts I only want update
it's whatever you want you could put
other filters on it so maybe I only want
to get notified of new orders that are
happen to be placed in a certain zip
code right so super easy to sort of say
what you want to watch and then you can
just start looping over that this is the
Python code and whatever language you're
using it's gonna be a very idiomatic way
these are restorable and you know
restartable so you'll get a token that
you can save and restart from the exact
place where you left also you can have
some really good guarantees about making
sure you're doing everything exactly
once and again if you learn how to use
it and how it works check out the talk
using change dreams by hacia again i
think right after this so those are some
of the really interesting features
coming in 3-6 so so as I said 3-6 came
out in December it's obviously in
MongoDB Atlas already so please check it
out upgrade give us feedback we'd love
to sort of see where you are so next
we're going to keep working on our
e-commerce app so we're going to you
know use the document model to make our
e-commerce apples or powerful and add
more features there so let's imagine
that you know we have our order this
collection which we've been working with
and now let's imagine that we want to
also have an inventory collection so now
what we want to do is after we insert an
order for every line item that we
purchase we want to decrement the
inventory count right so we know how
many things we have in real time so we
don't oversell things so forth right so
it's a longer this is quite simple but
you're an insert the order into the
collection you're going to iterate the
list of wine items and do an update for
each one very simple very easy well what
happens if there's an error or what
happens if before you start iterating
that array or while you're eating about
iterating that array something goes
wrong maybe your app server crashes
right that's bad so how do you handle
this well you can do today is you can
have some background process that goes
and up you know updates the inventory or
something that goes along and sort of
make sure that the things are clear some
sort of changelog sounds kind of painful
so what you really want to do is this
start the transaction insert your
document into the orders
I'll pick your line items update your
inventory and then commit the
transaction and that would be really
nice so this morning we are announcing
that MongoDB is officially dropping acid
so Milty document fully asset
transactions coming to MongoDB in
MongoDB for ou this summer so whatever
funds actions in long going to be going
to be like well they're going to be
completely familiar as you just saw
there completely familiar to anyone
who's ever used transactions before
right you begin to transaction you
commit a transaction you aboard a
transaction just as you'd expect they're
fully conversational right put your
reads in there puts your rights in there
everything that you want to do just if
you want if it needs to be in a
transaction just put it in that
transaction multi documents multi
collection whatever you need to do there
within that transaction you're a full
snapshot isolation right so you can do a
read and then do some writes and when
you do the write to you make sure that
you get your guarantee there's no
conflicts there it meets all the
standard acid guarantees that every one
company can expect so we have this
little acid seal of approval and if
you're not using transactions if a write
doesn't have a transaction there's
absolutely no performance penalty
whatsoever if you want to use a
transaction for one tiny little
operation and nothing else you will see
like no performance impact if you know
if you want use it for just one thing
all you have to do is use it for that
one operation nothing else that's it
super easy to use so when would you use
transactions in Mongo obviously there
are applications in Mongo and
mission-critical applications across
almost every vertical not using
transactions so we expect that many
users of longa DB are going to use
transactions in very small ways but so
you may be doing a hundred different
operations on the database and maybe one
of those transactions is going to make
really much easier so a for example the
e-commerce example I gave before I think
that's a really good example the other
example that comes up a lot and meetings
that I have is let's imagine you've got
a very large data set
like a hundred terabyte hundred terabyte
data set and you're inserting to that
data set all the time and you want to
have a view of that data some aggregate
view of that data that's updated as well
in real time so you can do analysis on
it very quickly well with transactions
you can have one transaction that
inserts a document into that very big
you know 100 terabyte collection and
updates this roll-up view at the same
time I'm making it super easy to do that
so obviously we didn't wake up yesterday
morning and decide would be really cool
if we announced transactions in the
Seattle tomorrow so we've been working
on transactions for a long time right so
it all started when we acquired the wire
tiger about three and a half years ago
and then we've been working on it ever
since
and so in MongoDB for oh right is this
summer I will have replica set
transactions and among that before -
which is our next release will have
fully distributed charter transactions
across you know as you know as why did
the foot as widely distributed to
cluster as you can have in Mongo you
might say well this a lot of you know
going from replica set transactions to
Charlotte transactions is not a lot of
work well there is a lot of is a big
difference but most of that works
already been done so for example I
mentioned two features in three six
chain streams and retrial rights great
features that are gonna make developers
more productive but at the heart of both
of those features really is the the
building blocks for sharded transactions
but if you look at the list of things in
three six you'll see causal consistency
in there you'll see you'll see sessions
in there core building blocks and
retrial the rights and change streams so
there's more work to do but it's it's
really the last little bit that we've
got to finish this is the first major
announcement since we've that we've made
since going public in the fall so our
lawyers have said we have to put this on
the slip on the screen for a few seconds
you'll also find the same statement on
every blog post we're gonna move these
today and many other blog posts that
we'll have so get used to it
so what do we want today so as we're
finishing up transactions for for oh we
really want to get as many use cases as
possible to make sure we're covering all
of our bases to make sure we can deliver
the best possible transaction experience
in forw
so we have launched the beta program
MongoDB comms last ran
actions if you've got a use case for
transactions please join the beta
program let us know we're gonna be
trying to get sort of a really great set
of transactions we've got a bunch of
good use cases in mind already but we
really want to find as many of them as
many of them that are out there as
possible so please let us know if there
are if there's anything else out there
obviously we're quite excited about
transactions it's been a people have
been asking me about transactions for as
long as MongoDB has been around and this
is sort of a culmination of many years
of work so we're super excited about
them I hope everyone is excited about
them as I am so we're gonna move on and
continue talking about the next sort of
new things in long ago so the next thing
I want to talk about is business
intelligence so business intelligence is
sort of you know on our way is how you
can get data out of MongoDB and analyze
it as fast as possible so the first
thing we announced release a couple
years ago was the BI connector but in
the bi connector lets you query data
that's sitting in MongoDB from tools
that speak sequel so we're using a tool
like tableau or MicroStrategy that
speaks standard sequel you can do
queries live out of data setting and I'm
going to be using sequel and the be a
connector will translate that sequel
into longer aggregation queries and run
them so these are a bunch of charts for
example that are built out of that we
use internally that are built out of
data sitting among the DB using the B
ACK connector so a bi connector version
2 came out in December lots of
improvements you know if you think about
the main purpose of the BI connector is
to push as many things down into Mali to
be queries as possible but if MongoDB
doesn't support something it has to do
it itself but its job is to take sequel
and spit out the best possible manga to
be an aggregation query it can and when
it's showing you documents as a
relational view figure out the right way
to do that so lots of improvements and
the new version will be a connector
around performance and ease of use and
management and one of the questions is
sort of why is this hard what's
interesting about this well the first
thing is they documents in Mongo aren't
flat right there you know sequel isn't
meant to do this and so one reason why
it's hard is that most documents in
Mongo are polymorphic in some way so
again looking at our re
our stores our product catalog so we've
got two different documents one is a
t-shirt one is a battery and they vet
different attributes right and you need
a tool that can understand this the next
thing is a raise and so in our ways
there are two different ways you might
want to look at it there we go and so
this is again our order document so two
ways you want to look at it the first
way you might want to look at it is find
the most popular items so looking at
each line item independently the next
way you want to look at a document is
looking at a histogram of order price so
first now you want to do some analysis
on each document first to compute the
total order price and then analyze the
whole thing that's a two ways sort of
fundamentally looking at a race
differently in Mongo so I said before
that these charts were built with data
sitting in MongoDB that's true I implied
their ability I connector that's not
quite true they're actually built within
new products called MongoDB charts and
I'm going to be charts is a tool that
lets you build native dashboards and
charts right on data sitting in MongoDB
that understands polymorphism
understands arrays and automatically
spits out MongoDB aggregation queries
that's how you can build a chart this is
how you can build a dashboard and
because it is such a great visual tool
I'd like to invite Grigory Melnick our
head of product for server and tools to
the stage that to give you a demo
Thank You Elliot hello Seattle I am
super excited to be demoing transaction
I mean the baby charts see you you can
see I'm excited about transactions too
next time so MongoDB charts whether you
are a business analyst who wants to get
some insights from your data or you're a
developer who just wants to put some
quick visualizations on top of the data
and share them
MongoDB charts is for you so let's jump
right into the demo the first part is
going to use the data set called stack
overkill
some of you may be familiar with it it's
basically ranking the popularity of
different libraries frameworks databases
on stack overkill you can see that I've
got the MongoDB charts here loaded and
I'm already connected to this database
and have the collection open MongoDB
charts automatically recognizes this
schema and gives me the fields and all I
need to do is really just drop the
fields into my axis to get a chart going
just that easy
ci I was able to build the chart before
even finishing the sentence can make it
a little bit more interesting sure let's
do this by color and there you have it
so a very nice very easy to build very
intuitive charts in a matter of just a
couple of clicks now the important thing
here to highlight is that as I was
building this it didn't involve any kind
of data transfer funnel in a lead
anywhere data wrangling ETL in - I don't
know elastic using Cubana knowing
anything about these three or other type
of visualization libraries all you have
is just a tool that lets you do this
extremely quickly and then share it in
the form of reports or dashboards or
what have you
wasn't it cool easy enough shall we do
it again let's do it again of course I
can reset this chart but I'm actually
gonna use it at different data sets
something that's a little bit more
interesting so this time I'm gonna look
at the anonymous telemetry data coming
from compass compass is the
to an intuitive tool that many of you
are using today a GUI tool on top of
MongoDB basically it again allows you to
do data exploration some basic
operations just a great tool and if you
choose to send us the telemetry data so
we can improve the product this is the
data that we actually get so now just
like any clickstream data this data is
polymorphic in nature so I'm actually
going to look for the event type schema
sample because I want to analyze the
types of schemas the types of documents
that you guys are working on so I'm
gonna look at the schema depth so let me
just grab this schema depth field and
drop it here I'm also gonna grab the ID
just to get the count and just that easy
sure let's change this to an ordinal
type I can see immediately that most of
the schemas that people deal with are
flat right
they're just depth 1 there's some that
are a little deeper and then there's
some that in my data set show the depths
of 5 and that's actually you know pretty
sophisticated pretty complicated think
of the nested miss of like a dot b dot c
the d dot e now what about schema schema
width width is the maximum number of
fields that any of your documents in a
given collections have also something
interesting to look at so let's just
drop that one in I'm just gonna replace
it like that and you can see that the
histogram has been built immediately I
can get the inside that most of the
documents are between 10 and 20 fields
wide and there's some data kind of
outliers here getting closer to 200
again I'm not totally surprised I've
seen some with thousands though I'm not
sure I would recommend that but anyhow
now what about actually doing the
multi-dimensional visualization can I
actually compare wits against depths
well I think I can so why don't you
actually use the scatterplot for that
and and again you can see that there is
just a few here that are shipping in the
box of course by the time we launch it
as a ga you're gonna see a much much
much richer set of the built in
visualizations and will enable
extensibility layer for you to plug in
your own types if you want to but I'm
gonna use a scatter plot for now so
where's my schema depths I'm actually
going to drop the count over here
where's my schema weights right no that
was Wits already so let me just get the
depth and there we go actually I'm gonna
swap these two axes because I think this
looks better this way just zoom it a
little bit so now you can see that I've
got a scatter plot with the very clear
cluster where you know most of the
schemas tend to tend to be great
now what about users and the type of
user machines that you guys are using
when when again run encompass at least
so I'm going to get another data set
here and I'm going to filter it by the
city of New York where the headquarters
of MongoDB are so the first thing I'm
going to look at is the how about the
course the CPU cores now why is this
important to me well as a product
manager I want to know the type of
machines that you're running my tools on
right because then I can now can I take
advantage of multi-core architectures
right can i how much of buffering can I
do
so coals and CPUs and a whole bunch of
other information is truly useful so
again let's just do it this way I think
the bar chart would be best I'm just
gonna get the count and all right and
let's actually why don't we reset this I
might have screwed up so
bar chart and the host course ok let's
get the count and for some reason I see
well actually never mind this is a that
I can ignore this piece that's ok we
have another cool part of this demo
actually the final part I think is the
most exciting so it's actually going to
highlight the power of MongoDB when it
comes to manipulating arrays so as we're
sending some data we're actually
collecting the segmentation data so I
have a segment field here now watch
carefully what's gonna happen once I
drop it in here did you see that MongoDB
automatically let me just zoom on it a
little bit
MongoDB chars automatically recognize
that that field is of a type array and
now it offers me a number of different
ways of how I can handle it right so I
can go and unwind it I can grab the
length I can go and apply some of the
statistical aggregate functions which is
again awesome I'm actually gonna do that
so I'm gonna unwind this and great grab
my ID one more time count and I'm gonna
do the bar plot right here and what you
can see is that the the information
about some segments so let me just clean
this filter oh there we go
I can see all all the segments
information here this is actually better
as a histogram right now the piece of
information I'm specifically looking for
is actually how many people are used in
windows versus OSX and you can see it's
right here
and here but there's also some other
part because remember I just flattened
the array right so um this feels like a
little bit of noise that I don't need on
my visualizations because all I want to
see is the clear representation of the
operating system distribution so I'm
just wondering is there a way for me to
filter it out further and you've
probably seen it because I already
applied that filter I'm actually gonna
use the power of the aggregation
framework that allows me to actually
filter it and do a projection further on
the data set and the presence of the
specific field specific values as you
can see here so once I actually apply
this you can see that now my chart is
clean and and exactly what I want it to
be now just to prove it that I'm not
using some kind of a canned static
demo I'm gonna actually change this to
another city how about the City of
Redmond just over the lake right any
Microsoft people here are you worried
all right well don't worry it seems to
be good sorry I could make that joke I'm
a former Microsoft you so it's all fair
game so anyhow
Windows seems to be you know winning
there now what about the City of Seattle
let's take a look at it at this one it
looks like in Seattle at least the
Battle of all operating systems is over
and the same popularity so that's great
now again just to highlight I was able
to build all these charts in just a few
minutes with you know different types
scatter plot heat maps
bar charts what-have-you directly
against the MongoDB data without any
need for data wrangling Oregon ETL in it
anywhere else
so on that note I'm happy to give you a
MongoDB charts with Mongo with more
peace love and rock and roll and invite
Elliot back to the stage thank you very
much
so that's thanks for going so that's
charts so the beta for charts is gonna
be launching very shortly so if you're
interested please let us know we got a
lot of eyes on it make sure it's looking
pretty good so the next I'm going to
talk about this morning is MongoDB Atlas
right and so Molly the Atlas is our
database as a service for MongoDB right
so why do we have Alice what is that
las' well Alice we believe is the most
reliable way to run long going to be in
the cloud the most secure layer in
MongoDB the easiest way if you are
MongoDB and the most elastic and most
flexible way to run MongoDB so we've
launched Alice about 18 months ago as a
database of the server so we've got a
lot of features since then so about a
year ago we added a free tier so
everyone who wants just a free MongoDB
cluster in the cloud you can just go and
get a free tier a live migration service
so you can actually live migrate
existing replica sets and it's very soon
a chart of the clusters right into Atlas
very easily with a very little downtime
I'm a data browser so you can actually
see the data in your cluster right in
the analyst UI real-time performance
viewer so you can see what's happening
in real time what collections are hot
what kind of crazed you're doing things
like that a performance advisor will
actually go and tell you what indexes
you might need to add to make sure your
database is running smoothly a cheaper
tier so now we've got the free tier
which is obviously free we've got an M 2
tier which is $10 a month and m5 tier
which is 25 dollars a month I don't have
ten tier which is six dollars a month so
ever you sort of fall into the spectrum
you've got the right thing that you
might want and the BI connector is now
built into Alice so if you want to turn
the BI connector on an atlas you click
one button and then you can start
running a sequel queries against MongoDB
in the club and one of my favorite
features is query low back ups right
it's very simple to have backups both
say you've got a big data set you've got
a terabyte data set most often if you
want to look at a backup you don't want
the whole thing right you want like one
document right now if you have to
restore one terabyte data set to view
one document it's kind of a pain in the
neck
so with Quayle backups you can actually
query the data live waltz sitting in the
backup format so you can actually do a
query sitting on the on the back
in a matter of like two minutes right so
you turn on it you say I want to accrue
a backup on a certain snapshot and then
with an probably even faster actually do
a query against that snapshot later
document shut it down you're done no
restoring one terabyte of data to look
at one document and the ability to pause
clusters so if you have a cluster that
you're only using for development every
night when you go home you can no pause
it so you look at charts for you know
why you're sleeping so Atlas is also
available on across all three major
public clouds which is pretty exciting
so them in a where no matter what public
cloud you're on you can you can do this
we have cross region replication so if
you want to have like a couple of
primary regions then backup regions or
you want to have secondary reads and
lots of locations so you can have your
main data set your main sort of
locations on the west coast but you want
to have a secondary for your data
sitting in every single Amazon region so
using us what US West won us was - as
your primary Atlas regions and then us
East one Europe Australia
you know Brazil as your secondary read
regions so you can do local reads no
matter where you are all that stuff's
available today and it show you just how
easy it is to do I'd like to invite you
to Qin Asami a solution architect in
Seattle to give you a demo
all right Thank You Elliot good morning
glad to be here and show you what we
have been working at MongoDB Atlas so
MongoDB Atlas lease a fully managed
database as a service for MongoDB it has
all the security and operational best
practices fully built-in we keep these
systems secure healthy and patched what
you are responsible for is provisionally
clustered on Atlas and build an
application on top of it so to get
started with so let's get started with
the build a new cluster the first thing
you do here so all the deployment
capabilities that Atlas makes possible
are available in this form so you can
also implement these activities through
a declarative restful api calls so you
choose the version of MongoDB so the
beauty with MongoDB Atlas is there any
new release of MongoDB this the same day
we make it GA it's also available on
Atlas for you to experiment right away
then you choose that cloud provider you
are going with and then the region where
you at the point so we have more than 43
regions around the world and that number
is going up then you see lastly you
select the instance type you are going
with ranging from m0 all the way to a
very powerful M 200 so here Elliot
mention about m0 that treat here it's
what you that's what's available here we
see it as a the open sandbox and
alternate due to a laptop on the cloud
for your side projects and new ideas so
you should come and give it a shot so
then you just confirm and deploy and
your cluster ability in the region you
selected see Elliot also mentioned about
cross regional clusters what are they
and why would you need them so to
illustrate that let's go on enable cross
regional replication and then deploy
across multiple regions so there is this
a preferred region so I'm going to
choose Oregon so meaning whenever this
region is happened to me that's where
the primary
we'll be and that's where you're right
slow down and let me add a few regions
in a Virginia let me add two notes let
me choose one more region
let's choose California and I'm gonna
add two more notes so in this setup if
for whatever reason reasons the origin
region is unavailable I still maintain
quorum with Virginian California
providing me to pose to four out of
seven majority quorum I hope my rates
and rights throughout so with this high
availability taken care with a cross
regional cluster let me add a cool
feature atlas click on the read only
replicas had read only regions faraway
places like Sydney Australia and also a
few more you can add any remote region
so very quickly we added two regions in
faraway places where the users over
there can do proximity querying low
latency right in their region close by
so scrolling low down below you also
have your scaling questions if you want
to scale MongoDB cluster you can choose
Charlotte clusters and go up to 12 shots
backups are enabled by default unless
you don't want and then this is the
feature that Elliott talked about VI
connector your sequel tools can be
hooked up to monetary atlas right here
and you can fire sequel queries and get
your results directly from 100 DB and
lastly you hover your mouse over the
only cost until that tells you precisely
what your monthly costs are and then you
are ready to click confirm and apply
it's moving a few monies to the future
this is how your global cluster will
look like so at this point you are ready
to set up your security role based
access control IP whitelisting and
battery yet if you have your application
servers on ec2 instances you can
establish V PC to V PC for private and
secure connection so with that
one of the things that we advocate as a
DevOps practice is you know expect
things to fail
chaos engineering right so we have a
feature for that we call it the chaos
button it's a test failover so when you
do that
Atlas steps down or takes down your
primary and let's an election process to
happen so this way you are able to test
failover scenarios regional failures
during your development process and get
ready to go to production with
confidence no guesswork involved there
so we would deploy in a cluster tester
resiliency you are comfortable you have
pre-existing clusters out there and you
are wondering how do I bring that to
MongoDB so we have a migrate data to
this cluster feature so when you are
ready you just provide your host port
and credentials SSL yes or no and then
when you pass Atlas will do an initial
sync by pulling data from your source
cluster and will keep up with the
changes that occurred throughout and you
hold your mouse to this clock it will
tell you how many how much time
remaining to complete the sync sync
period when you are ready you see that
clock showing close to zero that's when
you are ready to cut over so any hit on
the start cut over you are ready to stop
your application servos update the
connection string point them to the
cluster that we just built on Atlas and
then restart your application server and
voila that they just bounce off your
application server you have sieved
transferred to Atlas very powerful
features so your data is in there and we
also have a powerful features in here to
explore your data by going to the data
and you can see you can explore your
JSON namespaces you can also write your
queries right in here we have powerful
alerting capabilities that are enabled
by default with a good choice of built
in so you don't have to worry about them
but you can extend them by building
additional alerts by sending alerts to
your slack or paged duty or email on
variety of metrics based on thresholds
and then you also have hundreds of
metrics on MongoDB metrics
replicas metrics and also operating
system matrix these are available on
various granularities various zoom
windows for you to experiment and see in
action how your cluster is doing versus
your workload and also new trend
analysis for capacity planning but if
you are asked what's happening in my
cluster right now this second the real
team performance panel is the one that
Elliott talked about so when you go here
we have some select metrics available
like memory the network transfer rates
the crud matrix and then you see on the
right side hard collections in my in my
cluster and at the bottom you see sloka
queries that are going on my cluster
also so you can explore and see what's
happening in low lower operations but if
it's impacting your production right now
you can kill up by choosing that button
right right there but this is taking
care of the issue right now but you want
to solve the root cause what's causing
that slowdown so real time the from
there we move on to the performance
advice so this is a feature that we
built that analyzes your workload in
real time sees an opportunity to add an
index to improve that query and makes it
available for you so you can come here
and consume it go to the more info it
precisely tells you what needs to be
copied and pasted into a Mongo shell to
create that index so the performance
advisor is an opportunity that we enable
for you to get the best bang for your
clusters buck here so let's say you
implemented all those improvements but
still you are not getting the SLA matrix
it's time to scale your cluster so we go
to the same place where we started get
the same experience so here you see I am
running on a m10 cluster I can go to am
20 in the development cluster section or
I can go to am 30 and the production
cluster section and you see with a
simple click I am able to scale and just
go confirm and deploy this will be
implemented with a rolling best
practices manner one secondary at a time
and finally we do the the primary so let
us talk about never DevOps practice so
you are constantly working on next
week's
push code versus last week's production
data and this a repeated cycle you want
it regularly for your new code new new
new codes so with Atlas we take
continuous backups and the ability to do
point in time restores so the same
feature you could leverage and what we
built is basically you pick a snapshot
and then choose a cluster previous tour
too so this way I can restore it to a
completely different project that could
be non prod and for my testing purposes
it's a very powerful and you also have
this queryable backup feature here it's
a lot of times you don't restore your
terabyte size cluster but most often
someone thought they were in nan fraud
but actually they were in fraud they
messed up with some data they are asking
for your help or application corrupted
some data so whatever reason you want
just hundred or thousand or two thousand
small set of JSON documents you query
against your backup directly and get
that data real quickly into your cluster
and then you may also be wondering my
cluster is not 24 by 7 in my non-throw
and lower environments is there a way to
optimize so we have that available also
this is the past claustro that Elliot
mentioned you can see the active cost is
9 cents an hour in the past state the
cluster is only 2 cents an hour so
whenever you're ready you can come back
and resume your cluster so with all
these switch functionality available in
Atlas and more coming our pipelines ever
strong what are you waiting for build a
cluster come and talk to us with that I
pass it back to Elliot
thanks my food so obviously we're very
excited but we're Alice's today but of
course we're not done there's a lot more
things we're working on some of my
favorites are full crowd support in the
data browser so the same data browser
that muth you just showed you we will
add support for doing updates and
inserts and deletes and adding indexes
so what sort of a full crowd Expo is a
full crud experience right in the
outlets UI support form I'm going to be
charts a no-brainer or you get this
great charts product if you're going to
be able to put that right in the Atlas
you right in the outlets UI so you can
start building charts very easily the
ability through full database auditing
for databases hosted in Atlas so if you
need to audit certain types of
operations or every every database
insert for example you can do that
integration with LDAP so if you've got
some other LDAP service that you want
users with a log in to the databases
with people to work with you whatever
LDAP service you have came in or
actually probably more like AMS
integration so you can use your own
encryption keys for data that's an
analysis you don't want to sell access
the data anymore you just delete our
access to the keys and we're done and
one of my favorite features cross cloud
clusters right so the same way you can
have cross region clusters today
the ability to have cross cloud clusters
so if you want to have some data that's
in Amman some data it says an Amazon or
some data that stays in Google or a copy
of the data in Google because you like
their AI algorithms better than Amazons
and you want to be able to do machine
learning of that data that's sitting
inside of Google you can all do that
very easily or maybe just to be able to
switch clouds all super easy to do so
that's the moment to be Alice if you
haven't tried it please do give us the
back take a look so we have one one
thing to talk about this morning and
that's long going to be stitch some are
going to be stitch is a you know
back-end as a service for MongoDB so
actually we started off building MongoDB
as part of a platform as-a-service
almost 11 years ago but a lot has
changes in the last 10 11 years in terms
of development practices so a for
example the web is now a first-class you
are so the last time I really tried to
build a web UI I was about 2006
and we were playing with JavaScript and
doing a little bit of that kind of stuff
but it was super early and now most web
applications that are being built are
you know web applications not sort of
HTML applications mobile but 2007 the
year that we started working along gdb
was the iPhone launch all right so now
you know if an application isn't mobile
first it's got at least the web a mobile
application as well and that's really
important I mean others I owe t has sort
of exploited in the last decade for lots
of reasons and services is the other big
one but so ten years ago if you wanted
to do lot of things yourself you would
tend to install some package write some
scripts and put this together again in
2006 I had to build an image scaling
service so we were handling millions of
images a day for each image we need to
create a bunch of different thumbnails
so what do we do we download an image
magic we're actually sorry take a step
back first we actually purchased two
servers to Linux servers put them in a
rack powered them inside the image magic
on them what a bunch of Python scripts
have put this whole thing together now
you would never do that right now you
would go ahead and use one of the
numerous services out there for doing
image scaling or image storage although
now there are services for basically
everything you want to do whether it's
sending text messages sending emails
talking to slack of billing credit cards
there's basically a service for
everything and so what does a modern app
really mean well a modern app really
needs a way to do croix right a way to
interact with your data that's really
important and needs to do that very
securely have very good access control
logic validation to make sure that you
can only see your data at the make sure
there's no injection League to make sure
you can't you know leak someone else's
data that they need about through some
sort of weird API call that someone
forgot about and it needs to wear to
stitch services together so what's a
typical way people do that today well
one is they're under ice a bunch of
custom code that you know for every time
they need to access data in an
application go and you know make an API
call for that
lots of boilerplate around security and
privacy and you know validation and a
lot of do-it-yourself security right I
mean who can see what who can access
what making sure that I don't let
someone see something they can't
so a lot of people are working on sort
of yeah there's a whole myriad of space
mogul back in the service plumb from the
service service and they all have
interesting things about them but they
all sort of suffer from similar kinds of
problems one is a lot of them lock up
your data all right and one of things we
care about a lot is if your data you
should go to access it in any way you
want you should be you know you should
be able to use a tool like upload a view
to access our data or a shell or maybe
you don't like the service anymore maybe
you're using some back end as a service
another you know I don't wanna use the
back on this service anywhere I wanna
write a regular note app you want to go
to you know mix and match and change
things maybe you want to integrate with
services that this thing doesn't support
right maybe you want to just work with
your own micro services how do you make
that work in this sort of a platform and
you just tend to be very locked into
where you can deploy it who's running it
what kind of clouds you're running on
it's a stitch is different so when it's
hard stitch is a REST API from long ago
DB right it lets you run regular Mongo
queries from a browser or from your
phone and the reason why that works is
because it's got a configuration based
authentication privacy and security
system so what you can do is you can set
a bunch of rules it says hey if
someone's logging in and they're you
know what for this document and it's
document level document field bubble
security if for this document their role
is patient they can do certain things
they can read these fields they can edit
these fields they can view these
documents and then you can figure this
once for your collection for your roles
for your fields and then any query you
want to do any aggregation any roll-up
any update can just run regular Mongo
queries and Stitch will make sure that
it doesn't violate any of these rules
you have so they become very easy to
audit very easy to understand and you
can't bypass them um and you can compose
other services so if you want to have a
single API called a stitch that goes and
insert something into MongoDB then goes
and puts it on Amazon sqs then goes and
sends a text message through toriel you
can all do that with a single API call
to stitch from a web application from a
mobile application
IOT application I'm ed as anywhere you
want so any cloud you want you can run
or not you'll go to run an on-prem so no
on your on your laptops and their where
you want to be able to run sits you'll
be able to run up there so the way a
typical application might look is like
this right so you've got your regular
among the Divi Alice cluster you can
talk to it via API tool directly so if
you want to use tableau or MongoDB
charts you can just talk just to it
directly just like you would today you
can access the data to view the shell or
any other driver that you want just like
you would today you have the stitch
layer in front of it and your sort of
web clients your mobile clients talk to
the database through stitch and Stitch
on behalf of your web clients can go and
reach out to things like Torrio or s3 so
to show you just how easy it is to build
an application using stitching to start
using it I will do a demo and because
I'm so excited about stitch I'm gonna do
this on myself and because I am not as
tall as grigory I am going to take this
box away great so let's go set it so
here we have a blog post you can see my
very fancy blog and what I would like to
do is write add commenting to my blog
post so what am I gonna do so first I'm
going to good among going to be Alice
and you can see I've got a stitch
application over here if I want to
create a new one I'll just create one
but I've already got it
and so here we are here is our stitch
application so great so let's go and
build a little application so first
we're going to write the HTML that we
need so we're just going to put a block
in here to add where our comments are
going to live and then we'll put a box
where we can actually insert our new
comment
all right so now we need to go and write
the actual code for this so what we're
gonna do is copy this boilerplate from
stitched right over here put this in
here so you can see we're loading the
stuffs library we're going to connect to
this stitch application we're going to
use the blog database we're gonna make
DB a global because it's just easy so
we're going to log in anonymously right
now so I've turned on anonymous
authentication and stitch you can
actually authenticate with stitch
whether it's Google or Facebook I'll
support sort of any sort of ooofff like
system I'm after we login we are going
to do two things the first thing we're
going to do is display comments which
doesn't exist yet but we'll write that
function next and then we're gonna save
our user ID which you'll understand why
in a few moments and we'll just get this
from the stitch client actually close
everything great okay so now let's go
and write the display comments function
this is where it gets interesting so
we're going to take our database we're
going to get the collection comments and
we're gonna find this now the cool part
is here is this is a regular Mongo query
so I commit anything I want here and
stitch will make sure that I can access
that data if I can't even query on that
field maybe I'm not allowed to know what
the predicate is it will just we'll
remove that from my query so I can't do
it
some but for now I'm just going to look
at everything in the database I'm going
to execute that after I do that I'm
going to display my comments so we're
going to do this
we're gonna write some very fancy
JavaScript I have been trying to learn
react it's not going well tell people
tell me okay now we're gonna take this
take our comments section from below and
just shove this in there great okay last
thing we need to write is the add
comment function so we'll take the thing
we have below comment and we're gonna
insert it again just like we would in a
regular manga tea using a regular
monetary driver you know everything you
insert into this collection has to have
an owner ID to get through the security
rules and so that'll be our user ID both
and after that's done we're gonna
redisplay our comments so that's in real
time and I'll set this blank to zero or
the blank so that works now hopefully if
I did this right it will work
hello yes it's working great so now
we've got our commenting app so India
can of course come back here we can come
back here and we can go and look at the
data and the data browser and see what
it looks like and here it is seconds
over there it is so that's pretty cool
now I said before that you know one of
the other things I love about stitch is
the service integration so before this I
set up integration with Twilio so you'll
see my truly Oh integration over here
it's a little bigger so you can see it
so I've got a web hook over here so what
this whip hook does is it connects you
know it gets the Mongo service it gets
the arguments from Trulia and inserts it
into the database so what does this mean
we can do well this means that you can
send a text message right now if you
want
to this so number it will then turn that
into a Twilio that looks really else
really well said I put to stitch and
then will show up on our little block
look at everyone a few more seconds and
see a few people type and there we go
it's like SEO spam that's pretty
entertaining
so that's dish
in about five minutes we will to add a
counter to the blog obviously you can
continue to add features to it and
continue on your way clever
anyway
Wow if you wanna learn more about
stitching how to build applications drew
one of the product menders on stitch is
going to be giving two different talks
on tips today please check them out the
first one is white after this talk in
this room today Molly V stitch is
available in beta today on Atlas
we've actually got people using the
production already so if you're
interested go check it out play with it
give us feedback GLB coming soon as well
as multiple multiple plows and
on-premises versions so that's what
we've got this morning we're super
excited everything super excited it came
out in three six super excited about
transactions coming this summer if you
haven't tried atlas please check it out
shark stitch having a great morning I'll
be around all day please come find me
tell us what you think and thanks for
coming to I'm gonna be Seattle thank you
so much Elliot that's really impressive
how many times do you see a CTO come up
live coding on stage right well then so
as Elliott said thank you all for
joining us today and thank you to our
speakers Mootoo and Gregori they will
also be available today to answer
questions as will the ask the experts
that I mentioned earlier out in the
foyer a it is first-come first-served
but if we don't get to your question
we'll make sure to follow up with you
directly thank you all so again for
spending your day with us I know you're
taking time out from the office from
your day jobs hopefully now you can go
back and tell your boss thanks for
letting me go I got to go watch Elliott
at MongoDB drop acid transactions but
that's really big do so we're excited to
be able to bring that to you this is the
first time we're making that
announcement and Seattle is where we
chose to deliver that message to more
things remember to download the mobile
app every time you rate a session you
will be entered for $100 giftcard
drawing this next sessions begin at 10
after 10:00 they'll be in this room as
well as the sound
Harbor room on this floor and then we
begin lunch at 11:40 downstairs in the
international room so thank you again
for coming we really appreciate it</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>