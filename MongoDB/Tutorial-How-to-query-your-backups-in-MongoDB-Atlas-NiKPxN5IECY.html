<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>[Tutorial] How to query your backups in MongoDB Atlas | Coder Coacher - Coaching Coders</title><meta content="[Tutorial] How to query your backups in MongoDB Atlas - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/MongoDB/">MongoDB</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>[Tutorial] How to query your backups in MongoDB Atlas</b></h2><h5 class="post__date">2017-05-08</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/NiKPxN5IECY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello and welcome to the MongoDB Atlas
tutorial series my name is Jay and I'm a
developer advocate here at MongoDB and
I'm here to teach you on the ins and
outs of using our database as a service
MongoDB Atlas available in MongoDB Atlas
our cloud backup service allows you to
perform queries against snapshots and
point-in-time restores today we'll
discuss how to query a backup snapshot
using MongoDB Atlas and some of the
benefits of using this feature
MongoDB Atlas allows you to connect to a
MongoDB server that is running with the
data from a backup snapshot and query
that like you would any other MongoDB
server this will save you time and
reduce the overhead associated with
finding documents in your backups you
want a reference or just restore there's
no need to perform an entire data set
restore you can get fine-grained access
to your data and backups just using the
standard MongoDB shell you'll need to
ensure that you at least have a paid
MongoDB Atlas cluster with backups
running cloud backup services are not
available for our free m0 clusters to
get started login to Atlas and then go
ahead and click backup now click the
ellipsis menu to the right of the
cluster you would like to access in this
case we'll work with record shards 0
here you'll see a query option go ahead
and click this option and now you'll get
the ability to select a specific
snapshot that we're going to work with
I'll go ahead and click this one click
Next and then we'll go ahead and follow
query a snapshot as you can see Atlas
backup allows you to connect with
MongoDB server that is running with the
data from a snapshot and query that
server like you would any other MongoDB
server so we'll click start will be
prompted again after we click start to
go ahead and enter our password again
this is just a validate that we are
permitted to access this data so go
ahead and click verify and then click
start now in order to actually establish
the connection to our backup snapshot we
need to go ahead and establish a backup
tunnel the backup tunnel is an
executable that will create a tunnel on
a local port to 701 7 by default and
connect directly to the snapshot so
you're going to get a virtualized look
at your data through the MongoDB shell
that you would connect into any other
normal database but in this case what
we're going to do is not have to
decompress the entire set of data we can
work with our data right here within our
shell so I'm on old Mac so I'm going to
go ahead and select OSX then I'll go
ahead and click download backup tunnel
as you can see starts to download so
once my downloaded tunnel is finished I
can go ahead and click the file it'll go
ahead and open it up and what I've found
the easiest to do is double click on
tunnel
open up the directory take your terminal
and just drag this right here and hit it
return as you can see now we've
established a localhost connection to
port 2 701 7 all we need to do now is
access the localhost tunnel to the Atlas
backup snapshot by using the Mongo shell
so we can open up a new terminal and
just type Mongo so we'll start using
this just like we would any other
MongoDB server so we'll show databases
will use the GG records 2017 we can also
run show collections and here I've
started using the collections
Oh for 217 and what we'll do is DB the
collection name find like we would any
other and we'll get all the information
from our queryable backup and when we're
done we can just type exit and then
we'll go back to our tunnel and we can
just control see our tunnel and delete
the file when we're done with it now
your tunnel will stay established for 48
hours which means you can go ahead and
log back into it at any other time
information on this tunnel will always
be found in the text file that's also in
the gzip so what you can do is just
double click it and you'll see here the
name the replica set the cluster ID the
time step and how long it'll be
available to now in the case that you
can't necessarily use the binary to
connect to the secure tunnel there are
options for you one specifically is
using the connect manually option so
we'll select this and once you've
reached this area you're given options
to download these certificates locally
and install them and then connect to the
server manually on your own
we don't really find this to be easy so
that's why we provide you with the
binary
if you're running into any other Atlas
issues contact our support team at any
time click the support button in the
lower left of your Atlas screen or go to
MongoDB comm slash contact thanks for
watching</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>