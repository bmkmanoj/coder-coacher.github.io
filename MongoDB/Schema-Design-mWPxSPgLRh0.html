<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Schema Design | Coder Coacher - Coaching Coders</title><meta content="Schema Design - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/MongoDB/">MongoDB</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Schema Design</b></h2><h5 class="post__date">2015-04-08</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/mWPxSPgLRh0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">let's get now into a little bit of the
terminology the good news is that both
existing or DBMS among the DB have a
concept of a database we tables and
collections very similar and in fact
you'll probably catch me accidentally
saying table when I mean collection
somewhere in the presentation today do
they behave largely the same way both
have indexes now where we start to get a
little different is the kind of data
that's held as sort of a unit and in our
DBMS it's clearly the row among go it is
the document and our DBMS is employed
joins to stitch together fundamentally
simple things into larger more complex
data in MongoDB we use embedding the
term embedding of data within other
pieces of data and linking to produce
the same kind of result so most of what
we're going to talk about today is how
embedding and linking brings together
data in a way that you're used that you
need to use in order to produce this
complex data so what is a document it is
not a PDF or an MS Word artifact
it is a term document is our term for a
rich shape as we see here it's
structures of structures with lists in
it of even more structures at the leaves
of this structure you find the familiar
scalars like int doubles date times and
strings in this particular example
you'll see that we're also carrying a
thumbnail photo in a binary byte array
type on a binary types are also natively
supported among ABB as well now this
overall way of describing a piece of
data is very different than the
traditional row column approach used in
our DBMS another important difference is
that this document is itself the schema
the data and the types and the shape
themselves form the schema it is
expected that the code layer above
MongoDB is responsible for the
validation of the content and the types
and the overall shape now the truth is
in most non-trivial systems even with
our DBMS and including well with their
use of stored procs there is plenty
a validation and the logic that's being
handled outside of the database in
MongoDB the paradigm is that we put it
all outside of the database and keep it
consistent in one spot now as we go
forward here's something very important
for the purposes of this webinar you're
going to be seeing this two string
representation of a document as it is
emitted from our command-line interface
it's easy to read and if you think about
it it gets the the design points right
the structural design across very nicely
but make no mistake you actually don't
want your software dealing with strings
whether it's MongoDB or frankly any of
their database you want to interact with
your persister using high fidelity types
not big strings with whitespace and
character turns and quotes so to that
end and does four very briefly on this
in Mongo the drivers for each language
that can connect to it will represent
those documents in a language native
form most appropriate for the language
so in Java when you ask for a document
you get back a map and Python when you
ask for it you get back a dictionary and
inside of those very high fidelity types
you find actual objects like dates you
do not find strings with whitespace and
things that need to have the double
quotes escaped and all of that another
important note is that as we go forward
were going to be using the query
functionality I've really to kill two
birds with one stone we're going to use
queries to reveal the shapes of the
documents that we find and also just to
look at a bit of the Mongo DB query
language itself important to note that
in Mongo documents go in the same way
they come out this is another different
design paradigm from our DBMS where the
read side of an operation for example
like an eight-way join right is very
different than the set of insert
statements maybe some of them in a loop
required for the right side of that kind
of operation so in summary traditional
schema design what are some of the
things that we find uh we found a lot of
rectangles
and they're pretty much all shaped the
same way within the tables and it's
largely because the design goals and
constraints of the legacy engines are
heavily influenced by the data being put
into them over all those platforms are
necessarily focused on physical
representation and for example and do
the truth is a lot of the following
types have been conflated in these
engines over the years the legacy
existence of things like car VAR car
text
club all these things to represent
strings suggests a very strong coupling
to byte wise storage concerns in the
document schema design we think about
things differently you want to think
more about business entities you'll want
to think about your data moving in and
out as objects now that analogy is not
and should not be 100% tight and correct
because remember we're only dealing with
data we're not this is not an object
database with state and behaviors and
bindings and mappings and all that it's
just structures of structures of lists
of structures and also no compile time
binding here very very important to be
able to get the data in and out of the
system in a rich way without being
forced to compile the code around it</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>