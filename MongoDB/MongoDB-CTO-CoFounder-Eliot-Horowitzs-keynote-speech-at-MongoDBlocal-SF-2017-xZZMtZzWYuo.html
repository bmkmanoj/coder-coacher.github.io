<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>MongoDB CTO &amp; Co-Founder Eliot Horowitz's keynote speech at MongoDB.local SF 2017 | Coder Coacher - Coaching Coders</title><meta content="MongoDB CTO &amp; Co-Founder Eliot Horowitz's keynote speech at MongoDB.local SF 2017 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/MongoDB/">MongoDB</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>MongoDB CTO &amp; Co-Founder Eliot Horowitz's keynote speech at MongoDB.local SF 2017</b></h2><h5 class="post__date">2017-10-13</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/xZZMtZzWYuo" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">good morning how's the San Francisco
doing this morning good so we're gonna
dive right in
we've got a lot of content to cover
today and this keynote is one of the
easiest cue notes I've ever put together
largely because there's this so much
cool stuff to talk about there's
actually very little actual work for me
to do so this is pretty exciting so
we're gonna start off with what is not a
joke
business intelligence so business
intelligence to me it's all about
getting value from data right most
organizations are accumulating data and
sort of record rates today and in way
too many situations data is a hindrance
to companies or organizations or people
and it gets in the way and it's hard to
manage and data really should be your
biggest asset or the data you have is
incredibly valuable and one interesting
anecdote is you think about the big
machine learning algorithms out there
and frameworks they are given away for
free by companies who focus a lot of
machine learning because they know that
the data is actually the important part
not the algorithms so the data is really
important and one of the ways I like
talking about data and sort of visual
isn't misses of the pictures now
pictures obviously often tell a much
better story than statistics so there's
the data set out there called ants combs
torque quartet and an ends combs quartet
there's actually four data sets and each
one of those data sets has X and y
variables and each one has the exact
same mean the exact same variance the
exact same correlation between x and y
the same linear regression and the same
coefficient of determination those do
you know what that is you get a bonus
point at the end of the day and so you
would think if you look at these four
data sets they're gonna look kind of
similar when in reality they look
incredibly different right four data
sets same statistics completely when you
look at pictures you can tell
immediately that they are completely
different right and that's why pictures
are so incredibly valuable so a couple
of years ago a MongoDB introduced a bi
connector and what the BI connector does
is it expresses data exposes data from
MongoDB in a tabular format for tools
that speak sequel so you can connect
MongoDB to tableau or MicroStrategy or
click
anything that speaks the mice to coal
wire protocol even though my sequel
shell to the VI you know to MongoDB and
start getting you know doing analysis
and looking at data and building reports
so for example these are charts that we
use internally you know all built on top
of data sitting with MongoDB just simple
visualizations of data in Mongo alright
that everyone else can do
so the be a connector came out of
originally two years ago a new version
is coming out in a few weeks when what
small going to be three six
mommy-to-be 3 6 is coming out later this
year and be a connector 2.0 is going to
be a lot easier to manage we've removed
a lot of the sort of complexity around
some of the configuration files and sort
of how you have to do it so it's much
simpler too much simpler to deploy it's
built into ops manager now so if you
wanted to play an ops manager or an
atlas or a cloud manager it's one click
to get started so it's a much simpler
deployment much faster you think about
the BI connectors main job is is to take
sequel and map that to the aggregation
framework so it's gotten a lot better
about that so lots of things there to
make it a lot faster so if you haven't
check it out please go take a look so
there is you know one elephant in the
room though not that elephant not that
elephant either but this one the
document elephant so in MongoDB
documents are stored as documents or
data is sort of documents not in a
tabular form and when you take that data
in this document form and express it in
a tabular form you lose a lot of
valuable information right and we
believe that documents are sort of the
you know one of the core features of
MongoDB then make it so valuable to
developers and why should you go and
lose all that information so what are
some examples so one great thing about
documents is at their polymorphic so
here we've got two documents in a
catalog for a store the left we've got a
t-shirt on the right we've got a battery
and they have some of the same fields
right they both have name and price and
description but the t-shirt has a size
right medium the battery has milliamp
hours two different documents in the
same collection with different fields
this is a pretty common use case for
MongoDB when you're dealing with you
know with a tabular form you've got to
sort of express all these fields as
opposed to sort of just having it nicely
like this
so another one is arrays so we're gonna
working on our store we've got an order
it's collection which keep track of
everything that you know every order
someone's has placed and each one of
those orders has line items so then this
for this order
someone's bought two things right
they've got a battery and a t-shirt each
one has a price so there are two very
different ways we want to look at
elements in an array so in the first
case we want to look at each item
independently so for example let's say
if we want to find the most popular
items sold last month right so we're
gonna we don't care what order they're
in
we're going to sort of unwind the line
items array look at each line item
across the entire data set independently
and group them so you can sort of see
what the most popular items are and the
other case you want to actually look at
the order in entirety right you want to
actually first sum up the price of
everything in the line items and look at
a histogram of order prices so same data
same array but looking at the data in
the array in two sort of very
fundamentally different ways and it'd be
much simpler if you were doing that not
to have to sort of go through a tabular
format which is gonna unwind everything
and then rewind things and regroup
because it's very nicely expressed in
MongoDB where you've got the arrayed you
can sort of just say what you want to do
so that's sort of the direction we would
like to head in so before I showed you
these charts and I said that they were
built with data in MongoDB that was true
I sort of implied they're built to be a
connector that's not true so they are
built with a new tool called MongoDB
charts and MongoDB charts does it let
you take data sitting in MongoDB and
very simply build charts build reports
build visuals build visualizations on
top of that data and it fully
understands MongoDB documents it
natively builds aggregation pipelines so
you can just sort of run these
aggregations very quickly you can take
these charts and put them into
dashboards so you can have dashboards
that you can share with
people and because this is a visual tool
and the best way to show of visual tools
by doing a demonstration I'd like to
invite Grigory Melnick our head of
product for server and tools to the
stage Thank You edit greevey in San
Francisco how you doing so I'm super
excited to demo MongoDB charts to you
and whether you are BA looking for some
ways to do self-service analytics on
your data or a developer who is just
looking for some ways to generate
visualizations natively on your MongoDB
database and share with users this tool
is for you just like Elliott said so
we're gonna we're gonna start with
building some charts here and the first
one is based on the stack overkill data
some of you may be familiar with it and
basically that's they said that shows
the popularity of the rankings of
different languages different frameworks
different data bases on on Stack
Overflow so I'm I'm just gonna get the
chart built just by dragging and drop in
my fields into the canvas and before I
finish the sentence here you go you've
got a native chart built with no
pre-processing no ETL of any kind no d3
wrangling you just got a chart generated
that easy now you can look at the data
in a number of different ways we put the
bar chart or a an area chart in the box
and look at the line chart I think that
actually works probably the best for
this visualizations and of course again
when we g8 the tool you'll see more of
the visualizations in the box but don't
you love how easy and how natural this
this chart lights up yes now oh you're a
tough audience oh come on guys okay all
right so I do it again well I'll do it
again
you okay I'll do it on the different
data set something that's a little more
interesting a little more
comprehensive and has a richer schema so
many of you know the tool called compass
that's the GUI the intuitive GUI on top
of MongoDB so when you choose to send us
the anonymous telemetry data this is the
center of the data that I'm going to be
using for the next for the next piece of
my demo so the telemetry data just like
any clickstream data is polymorphic in
nature and I'm gonna look at the event
type that basically aggregates the
information about the schema metadata so
what I'm gonna build now is a quick
reservation that will help me get some
insights as a product manager into the
depths of schemas that people are
analyzing in compass so for those who
are not familiar with a schema deps term
that's the nested Ness effectively how
many levels deep does your schema go so
just gonna drag my schema here I'm gonna
get my counter and just like that like
I've got my chart build bar chart built
what I can tell from this chart is that
most schemas tend to be pretty flat the
depths of one some of them are more
complex with the depths of five and
again think of it as a a dot B dot C the
d dot e now what about schema what
schema width represents the maximum
number of fields in any document in any
of the documents within my given
collection so I want to analyze that as
well can I just grab the width drag it
over here and if I go I've got a
beautiful histogram generated for me in
fact let's just swap these axes and I
can see where most of the schemas fall
even though again there are some that
are about what 200 fields wide which is
you know pretty complex schema I'm not
surprised to see that I've seen some
that are thousands field wide though
again I'm not sure I would recommend
that because I actually think it's more
of an anti-pattern now what about if I
wanted to actually do
a three dimensional analysis and look at
schema versus depth on an account I can
do that as well so let me just grab my
depths field over here and reset this
actually the scatterplot would be better
for that I'm gonna just swap this out
again to make it a little bit prettier
and I'm gonna take my count for sizing
and if you go now you can see where my
cluster tends to be mostly flat but
there's still some outliers with the
level 5 depth and hundreds of fields
cool now what if I wanted to analyze my
users again as a product manager I want
to know what kind of machines you guys
are using in the beautiful city of San
Francisco so I'm just gonna filter my
data by city name San Francisco and I'm
gonna go and grab the number of CPU
cores on my chart here you've seen this
dance before look how natural how
beautiful this feels don't you want to
try it yourself almost yeah so there we
go
I'll do the bar chart off you go eight
cores seems to be the the common set up
I can do the same thing for the memory
in fact I want to build a heat map to
see where memory and course what's the
most popular combination there so I'm
just gonna go and do this I'm gonna
reset this and should let me just reset
the chart so that I don't mess up
CPUs total memory wonderful I'll do the
bar chart here if I go and I'll use this
one to get my intensity so now you can
see just that easy
in a number of clicks I've got a
beautiful heat map generated and again I
can package the top I can share it with
other users I can include it in the
report now the last bit of my demo will
include something that we actually think
underscores the the power of MongoDB
charts because it will allow me to very
easily deal
was was the structures like arrays in
your documents what what Elliott had
alluded to earlier so I'm going to reset
this chart and I can just tell you that
when you send the data we categorize
that telemetry data in a number of ways
and we basically attach some tags so I
have a segment field here the moment I
drop it in you can see that the charts
automatically recognizes that this is of
a type array and it offers me some ways
of handling it so I can go and unwind
the array I can go and get its size or
look at the apply some of the statistics
but in this case frankly what I want to
do I just want to flatten it and unwind
it so I'm just gonna do that I'm gonna
get my counter back in here and and I
think I want to use the bar chart for
this for this visualization as well and
what am i showing you here is just the
distribution of various tags but in
particular my analysis what I wanted to
know is well how how are people you know
what kind of operating systems are you
using and I can see that there are fewer
Windows machines than OSX in the area of
San Francisco well just again to prove
that I am going against the real
database here let's replace it with
another city in fact the City of Redmond
where I live where Microsoft is based
and let's just do this and you can see
that there are actually more Windows
machines than our sax which probably
will make some people happy at least in
the City of Redmond now one thing that I
forgot to do though is like well wait a
second I've got all this extra stuff all
this extra noise and for the analysis
that I'm talking about it's actually
interfering so do you think there's a
way for me to filter it out
oh absolutely very easily I can actually
now resort to the power of MongoDB query
language MongoDB aggregation framework
and I'm going to use the function called
dollar filter on the output here and I
will project that with the dollar filter
that will allow me to get a subset of an
element based on a certain condition and
that condition is that the values have
to belong into this small set so
if I were to apply this now you can see
that the chart actually looks but just
the way I intended okay and well just to
finish off let's pick another city maybe
I'll use the city of Seattle let's see
if it differs anyway from Redmond Ebola
apparently there's no more Mac versus PC
Wars in the City of Seattle so on that
positive note let me give you MongoDB
charts with more peace more love and
rock and roll and Thank You Elliott
thank you everyone Thank You Corey so
that is a preview of MongoDB charts with
charts which is pretty coming pretty
soon if you're interested in playing
around with it joining in early beta
please check out this URL that will also
send out a little bit later today so
let's move on to sort of the core mom
gonna be server three six so as I said
earlier three six it's coming out later
this year
the first RCE should be coming out
tomorrow morning so we're getting pretty
close and a lot of the features were
going to talk about in three six really
come back to sort of the core belief
that we have that developer time is one
of the most important things and how can
we make MongoDB more productive for
developers so the first three features
we're going to talk about are all
related to documents right we believe
that documents are the heart of sort of
why people like MongoDB and we like
documents for three main reasons right
we think documents are the most natural
way to express data for people people
think more structured than flat we think
that documents are the best way for
programming languages to interact with
data because programming languages also
have structures like this and we believe
that documents are best for systems
because it keeps data that needs to be
together together as well so let's look
at sort of one of the first well the
first of the three document features
were going to talk about first one is
dollar lookup so we first introduced our
lookup two years ago and dollar lookup
is a way of doing joins in MongoDB right
and when we first introduced I'll look
up all I could do was do a very simple
like equi-join between two collections
so in mom gonna be three six we're going
quite a bit further so let's just look
at some examples
so here we have dollar look up here we
have our orders collection again oh it's
the same one we saw before with our line
items and what we want to do is be able
to display on a webpage this order and
for each line item we'd like to display
the average rating so we need to do is
we need to join the line items
collection or it's at the orders
collection with the ratings collection
and for each one of those products
compute the average that's how do we do
that so it's very simple so now we're
going to do a dollar lookup we're going
to do a lookup from the reviews
collection we're gonna filter out
naturally only the right product ideas
and then we're going to do a dollar
group so what you can see here is that
you're actually not doing a pretty
complex join with a sub query and the
sub query is expressed as an aggregation
pipeline itself so you can do anything
you want in that sub aggregation
pipeline that you could do in a regular
a creation pipeline you can join it to a
different collection you can join it to
as many other collections as you want
and do incredibly complex queries for
either real-time you know website views
or real-time analytics or sort of batch
analytics as well so a pretty powerful
way of doing very expressive joins with
all our lookup in 3:6 so the next thing
we're gonna talk about is continuing a
long line of arrays a little bit so
again we think arrays are one of the
most important features in documents
right because they let you express these
relationships in very interesting ways
and one of things that you often want to
do is update arrays so let's imagine
we've got this you know order again and
let's imagine that we've you know
screwed up a little bit and we've forgot
to ship some users order and so what
we'd like to do is give this order a 20%
discount and the way we wants to do that
is we want to give a 20% discount to
every line item in that shopping cart so
previously in MongoDB there's two ways
to do this the first way is by taking
the document out modifying the fields
and updating the entire document that
works but it you need to all the locking
all the consistency is not managed by
you and the application layer rather
than the database so that's maybe not
great the other option is by doing an
update operation
a TV that touches every single
individual line item also not ideal
because it's kind of a pain in the neck
you've got to like figure out how many
there are do you like five updated
statements that's kind of annoying and
what you really want to be able to do is
do a single update operation to MongoDB
that updates every element in that array
and so now in three six you can do that
until right here what we're gonna do is
we're going to update every price in the
line items array we're going to multiply
it by 0.8 right there by giving a 20%
discount and that's gonna be one
operation and you're handing off all the
sort of logic to the database itself but
what if we sort of haven't quite screwed
up so badly maybe we've shipped some
items and we haven't shipped other items
so now what we want to do is we want to
update that array but we only want to
update the elements that have not yet
shipped well you can do this as well so
now you're doing the same thing except
that you've got a filter on it and that
filter says you know only update the
line items were shipped is false so now
you can sort of update all elements in
the array or some elements in the array
based on whatever criteria you need so
this is an array depth of one but what
if you've got nested arrays so let's
imagine that you're building a quiz
system for a mall gonna be University
those of you paying very careful
attention you'll notice the error on
this page and let's say that you want to
fix it
right so you've got two two levels of
arrays and so now you do the exact same
thing right you've got an update you
have it two different filters at
different levels of nesting and you can
update all or some of the elements and
as you know deeply nested array
structure as you have so this is a very
important way so the very important
feature so that you can actually take
the document structures use it as best
as you want use it to your advantage and
still be able to do updates and let
MongoDB handle the consistency than the
locking and all those things around it
so it's just easier to use the document
structures so that's - the last feature
related to documents I wanna talk about
is around schema so when we very first
launched MongoDB the very first website
we had it said that MongoDB was a schema
list database and that was obviously
pretty nonsensical I think
three months to realize that and three
months later we check it off since then
we've called it a lot of different
things you've called it a flexible
schema a dynamic schema all sorts of
things and why is it crazy
well one everything every collection has
indexes right indexes are a form of
schema I'm gonna be is typed right there
are types of there are lots of types
types are a part of schema the
applications have schema themselves so
basically I'm gonna beat it wasn't
enforcing a SEMA at the database layer
all right said you know on the database
side so two years ago we introduced
document validation or so document
validation was a very simple way of
doing some validation at the database
layer I mean it's pretty powerful but
not not everything that people wanted
and so in monitor b-36 we're adding
support for JSON schema so JSON schema
is a way of representing schema for JSON
documents of course in JSON itself so we
have a JSON schema representing the JSON
that you want and it is a standard so
you can use it both in MongoDB and at
other places in the stack and it's a
very simple way of sort of expressing
expressing this let's see what it looks
like so here's a JSON schema for our
orders collection so what you see here
is that you have to have we're defining
line items type that line item has to be
a type array it has to have items in it
and those items have to have two
properties a title that is a string and
a price that is a number that number has
to be greater than or equal to zero you
can also see that you cannot have
additional properties in that array or
in those sub documents so one of the
nice things that is that you can say
that for this document I can have
additional fields that are sort of
unchecked by the schema some fields that
are checked you can sort of however you
want so it's a very flexible way of
defining schemas so you could have some
you know as much rigidity as you want
and as much flexibility as you want and
force at the database layer so we really
think this is a pretty nice way of
having that as much flexibility in the
document model as you want when you need
it but also being having as much
database validation when you want that
as well so we're gonna keep moving on to
focus on developer productivity so one
of the great features of MongoDB for the
last seven years is high availability
right if a node in a cluster crashes
there's an election another noticed it
takes over and you move on with your day
but what happens to a right that is in
flight at that time well let's say
you're doing a insert well if an insert
fails you can probably just if you get a
network ever on an insert you can just
retry that but what if you're doing
something a little more interesting
let's say you're doing a counter
increment and you get a network error
it's very hard to know what to do in
that case and so mom going to be three
six has a new feature called three
triable rights and we're tribal rights
does so it lets the drivers
automatically retry rights that failed
on the network and the database will
guarantee that those rights happen once
and only once so a session is created
between the drive room the database
every right has a unique ID and if it
retries an operation the database will
know hey if this ID happened already and
it was successful don't do it if it
hasn't happened yet do it from the
driver's side from the application set
it's very easy and to turn this on is
also incredibly simple you turn it on at
the session level and then you just do
your update as you normally would and
the driver will handle all the actual
retry logic so it'll back off a little
bit to make sure it happens and
everything there is controlled under the
covers and you don't have to do anything
else just sort of get retried
automatically right again making it much
easier to just write applications
correctly without having to focus on
this stuff if you want to learn about
how we travel rights work I should
listen to Jeremy's talk in this room a
little bit later today about how sort of
all the communication actually happens
out of the covers so next we're going to
talk about your friends and that's a
little early to talk about friends but
we're gonna do it anyway and so no one
here has ever done this but some of your
friends have actually gone and exposed
MongoDB on the public internet without a
firewall without user names and
passwords and have gotten their data
exposed or other sorts of things and so
in I'm going to be three six we're
actually making it listen to localhost
only by default so if you sort of just
someone's very happy so if you go and
aren't paying attention to start MongoDB
up on a machinist on the public internet
by default it'll be a completely
lockdown now for everyone who hasn't
made a mistake and is not on the public
internet it does mean there's gonna be a
tiny bit of pain upgrading because
you've got to go and add a configuration
option to every MongoDB configuration
out there if you're using Atlas or one
of our other tools that will take care
of it for you but you will have to do
that but I think that paint a slight
annoyance is worth it you know cuz
friends don't let their friends expose
data on the internet so if you want to
learn about this and sort of all the
other security features in MongoDB
please come to Stefan's talk a little
later today as well and room D all about
making sure your MongoDB is as secure as
you possibly want it so next we're
talking about real time so real time is
a sort of a trend I would say not just
in database world but everywhere right
everyone wants things in real time no
one wants to wait for anything
if data gets updated at one place they
want to update it somewhere else if data
is updated
somewhere you want to maybe push to your
phone immediately and so what a lot of
people want is if something happens in a
database to get notified in real time
somewhere else as well so in Monga b-36
we're introducing a new feature called
change streams and what change teams
does is let you listen to changes on a
collection and get notified in real time
so you can do whatever you want with
those changes you can push them to
secondary systems you can update
applications whatever you need to do you
can sort of take care of that and so
it's also incredibly simple to use so in
the driver you're going to listen to
certain kinds of changes so in this case
I'm going to listen to changes on the
orders collection and I'm going to look
for any insert or replace to the orders
collection that is happening in a zip
code starting with one zero
so that's New York so basically I want
to get notified of any new order that's
going to ship to New York the way that's
going to work in the driver is you're
just going to loop over this cursor it
is retry belit is restartable you've got
a token that you can reuse so no matter
where you left off if your application
goes down and comes back online you have
a token you just take that token you
start it up again
keep going right where you left off so
it's very easy to sort of use MongoDB to
source any real time of data or events
streaming data and just get notified of
those things and this is just one
example but you can listen to any change
for any updates any sort of pretty
complex example if you want to see some
examples of how this can work and what
you can do with it please do listen to
Ally's talk in this room again a little
later today so those are some of the
really cool features coming in
mommy-to-be three six there are hundreds
of things happening so please you know
take a look at some of the other talks
today some of the release notes as I
said the first RC is coming up tomorrow
almost positive and then the act and GA
will be later this year so next we're
gonna move on to am I'm gonna be Atlas
alright hopefully everyone here knows
what MongoDB Atlas is it is our fully
managed hosted database as a service for
MongoDB right we believe that mom going
to be alice is the best way to run
MongoDB if you're in the cloud and we
think it is the the most reliable way of
running MongoDB we are monitoring it
24/7 if something goes wrong in the
middle of the night we have people
looking up looking out for it we have
every best practice sort of turned on by
default so it is incredibly reliable it
is the safest way to run MongoDB in the
cloud again mostly because we have every
single Bell and whistle turned on we
have SSL on by default that you cannot
turn off we have authentication turned
on by default that you cannot turn off
every security best practice is in there
as well we have you know it's talked to
certified and we'll be working on more
certifications over the next year so we
can sort of handle sort of any sorts of
workloads that you want it is by far the
easiest way to run MongoDB in a matter
of clicks you can have a cluster up and
running and it is incredibly elastic so
you can scale up or down you can go to
bigger DM sizes you can turn on charting
all in the UI without having to do sort
of any administrative work whatsoever so
we've launched my own gonna be Atlas
about a year about 16 months ago and
since then adoption has been really
incredible we've had over 4,500
production cluster has created we
introduced a free tier and in February
give it over 54,000 free tier cluster is
created we've had production clusters to
put in 190 countries
196 so that's pretty good and we haven't
stopped working on it obviously in the
last year actually this calendar year
we've introduced quite a number of new
features so the free tier that I
mentioned before it's a 512 megabyte
free tier that you can just go take and
spin up and use forever
it'll just be there whenever you want it
a live migration service so if you've
got a replica set outside of Atlas and
you want to bring it in to Atlas with no
downtime we can make we have a tool that
makes that happen with the only seconds
of downtime a data browser so you can
just go see the data in your database in
the U in the Atlas UI in real time
performance viewer so you can sort of
see in real time what's happening in
your database again right in the Atlas
UI in queryable backups and cripple a
backup since I think is a really cool
feature because you know backups are
integrated into Atlas but very often
when you have backups you don't
necessarily want to do a full restore
from a snapshot from a month ago you
want to go look at a single document or
maybe a single collection and rather
than having to do a full restore and
sort of build up a new cluster with that
data you can actually query a snapshot
directly so in a matter of seconds you
can go look at that document as opposed
to having to do a restore which may take
a few hours and then go query the
database so when we launched Atlas it
was available on Amazon in June we also
announced that it was also available on
Microsoft Azure and Google Cloud so no
matter what public cloud you want to
deploy on you can you can do that with
Atlas so as of last week so actually the
two features that we deployed last week
one the one is the two new instance
sizes so I said we had a free tier
earlier this year and we added two new
tiers in there the m2 and the m5 which
are sort of two gig here and a five gig
tier like a $9 and $25 a month so we've
got a very nice continuum of prices
right now so no matter what size you
want to work with it makes sense and one
of the coolest features we have done
it'll ever frankly is cross region
clusters so now let's say you're an
Amazon and you want to have a Mongo
cluster that spans multiple regions
right maybe you want to have your
primary region be US west but you want
to put read-only secondaries all around
the world
you can not do that in the UI with like
three clicks let's say that you want to
have
three regions as your primary regions so
the fan tire and one region goes down
you don't care your replica set is still
up you can do that with a few clicks as
well and show you just how easy that is
to do and shows some of the other cool
features I'd like to invite Andrew
Davidson are a senior product manager
for Atlas to the stage
thanks so much Elliot great to be back
home in the Bay Area grew up around here
really excited to show off just how far
atlas has come over the last 18 months
and some of the cool stuff that we just
released that Elliott mentioned just to
reiterate you know mom gonna be Atlas is
a fully managed database as a service
for MongoDB that means that we take care
of all of the patching and maintenance
we own that availability and uptime SLA
what that means is you are responsible
for building clusters and building great
applications on top of them so let me
show you what this build cluster
experience in MongoDB Atlas feels like
we're really proud of it because in this
declarative form essentially enormous
capability for globally deployed
clusters can be described all of the
stuff we're doing here can also be
described in a very clean single REST
API call the first thing we want to do
is choose our cloud platform whether
it's Amazon Web Services Google cloud
platform or Microsoft Azure and the
second thing we do is choose our region
we're in 41 regions around the world
today size is a key determination as
well starting from a free tier
development sandbox something that is
always free something that we see is
essentially an alternative to the laptop
in the cloud something that everyone in
this room should have you can use it
anytime to try new ideas experiment
whatever you want to do we've got shared
clusters starting at $9 a month
and dedicated clusters starting at $60 a
month
we've got replica sets that go up to 64
160 gigs of ram and sharted clusters
with as many shards as you want to
handle global clusters for workloads
involving millions of concurrent users
let's check out those cross region
capabilities Elliott just mentioned so
we have sort of two models here we can
add regions that we're going to spread
across from a manga to be
high-availability perspective that is
regions that will participate in
elections and separately we have sort of
reads secondary regions regions that
won't slow down our elections but where
we can have I'm gonna be replicas in
disparate parts of the world and serve
low-latency in Regent Reed's to declines
in those regions so let's set up a
cluster with our preferred region here
in Northern California and our sort of
second region in Oregon and let's do a
third region in the US East this model
allows us to withstand the full loss of
a region and still have that majority
quorum for among Adobe's high
availability big ten we can add
read-only regions in Frankfurt and the
EU Singapore and Southeast Asia Mumbai
and South Paulo and all of a sudden this
cluster is one that will be able to -
with low latency service reads for folks
all over the world the majority of the
world's population so that's really
exciting if I click the green thank you
if I click the green button this cluster
is going to be built it's going to take
a couple minutes to build jumping into
the future this is what it's going to
look like so here's what our cluster
looks like right when we've deployed it
you know we might click the connect
button and learn about our connections
string and all that there's some cool
things that we've built in here to make
it easier to integrate this into a
production application we've got this
test failover capability or what I like
to call the chaos button which basically
forces one of those elections and
ensures that that connection string in
your application is ready for game time
because you never know when there's
gonna be an election and you don't want
have to worry about it that's the beauty
of MongoDB is that when that connection
string is done right the elections don't
matter
you always have availability let's talk
as well about you know you might have a
pre-existing replica set somewhere a lot
of you certainly do if you want to
migrate that into manga to be Atlas we
have the live migration capability we
can open that up and basically what
we'll do is provide connection details
to our pre-existing replica set replicas
set we're gonna go in and connect to
that replica set
essentially perform an initial sync or
we pull over of all the data from that
set and then we're going to apply
changes that have occurred since the
beginning of that migration into our new
Atlas cluster that means that we're
gonna catch up Atlas to our pre-existing
rubber cassette this is what that looks
like once we've got caught up obviously
its data size dependent for how long it
takes basically we get to the point
where we get a big green button that
says start cut over what this means is
the OP times are caught up all we need
to do is stop writes to our original
replicas set change our application
connection string to the new mom going
to be Atlas environment and start writes
there so essentially just requiring a
momentary application bounce minimal
downtime to move into a bliss so let's
talk a little bit about what we might
want to do you know maybe we're in
production and we just want to
understand all the capabilities of
appleÃ­s the first thing we might want
to do is check out the data Explorer
this is going to show us the contents of
our database we can see our collections
we can look at our documents what they
look like in a rich manner this allows
us to continue iterating and developing
more easily and understand exactly
what's going on but of course there's a
lot more to worry about when you're in
production you want to know can you
configure your alerts so that you know
whether you're single pane of glass or
something like slack or pager duty or
anything else you can configure all of
that in Atlas you know it's funny I said
there's a lot to worry about in some
ways there isn't an atlas because all
the operational heavy lifting is taken
care of by us the stuff that you would
want to think about is you know are your
queries running efficiently and that
kind of thing so let's shift gears and
talk about monitoring and all the
metrics that we have available we've got
tons of historic monitoring and metrics
for dozens of metrics for everything
going back you know with different
granularities we've got up-to-the-minute
monitoring as well but really a lot of
the time what you want is what's going
on right now and that's where our
real-time performance panel comes in we
show hot collections we show slow
operations
so for example if in this case we've got
this one operation that's going and it's
taking hundreds of seconds to run it's
almost certainly this you know table
scan that's a big problem for us I could
go in and kill it right here which is
convenient
not exactly the most elegant solution
that brings me to something that we're
actually very excited we've never shown
this before it's in private beta right
now and it's called the performance
advisor and what this performance
advisor does is simply analyze all of
our slow queries or queries actually
that are inefficient that are scanning
lots of documents to return a document
and it's going to provide a very
descriptive targeted index suggestion
that we can add into our cluster to
improve the query performance in this
case it's simply asking me to add a an
index on the call letters field and you
know it's this is on average taking
almost 500 seconds to run today all I
have to do is copy and paste this
command to create this index in the
shell really powerful stuff so the
performance advisor if you think about
it it's really all about ensuring that
we're using the clusters that we've
deployed optimally that we're getting
the bang for our buck for our cluster
money if you will if you don't have any
indexes being suggested you know you're
already optimized from a query
perspective and you're still not able to
meet those performance s delays well
that's that's when it's time to scale of
course so let's look at how easy that is
I'm gonna be Atlas I've got my cluster
here I can go in and simply enter the
Edit experience and this looks the exact
same as the deployment experience what's
so powerful about that is in again in
this one form we can describe everything
we need to worry about with the cluster
and what's really amazing is if I make a
change now whether it's scaling or even
moving the region's and I can do all
this through the REST API any change I
make now Atlas will perform in a rolling
manner while preserving availability so
if I do this scaling event simply you
know doubling the amount of memory in
this cluster deploy it in a couple of
minutes each server is going to be
replaced in a rolling manner and I don't
have to worry about it at the
application level because high
availability is preserved now let's
shift gears and take a step back you
know it's not just about having a
cluster up it's also about everyone in
this room is or many people miss remar
part of teams and organizations that are
working with multiple environments and
you know you have to set up DevOps
workflows that make you more efficient
one of the key workflows that we see
people doing a lot I'd like to talk
about is simply the common pattern of
Bristow
boring or refreshing from production a
backup into a staging environment that
model allows you to test next week's
code before you push it and it's a great
way to use our backup service not just
for the point and time capability and
the queryable backups that Elliott
mentioned but we can simply go in and in
a couple of clicks do a restore to
another cluster in a different
environment potentially with different
team members or different permissions
set up all of those kinds of
capabilities are built into a bus so how
this is all about making your time more
efficient so that you can build those
applications on top of it with that I'll
pass it back to Elliott thanks so much
thanks Andrew it's obviously we're not
done with Atlas there's a lot of cool
stuff coming it's the performance
advisor which Andrew just showed you
that's coming pretty soon so the data
browser that he also showed you is
getting full crowd support so you not
only not only will you be able to see
the data you'll be able to insert delete
update the actual data create indexes
remove indexes so instead of having to
copy and paste those that index creation
from the performance advisor there'll be
a single click to create the index
that's all coming soon
I mentioned the VI connector earlier
that will be fully integrated into Atlas
pretty shortly so if you want the be a
connector it'll be a single click in the
configuration panel you know how to be a
connector and you're off to the races
charts will obviously be integrated with
Atlas next year across cloud is another
really interesting one so just as we did
with cross region last week we want to
building cross cloud functionality so
that as you are building and deploying
clusters you can actually have clusters
that are half an Amazon half and Google
or half an Microsoft so let's say that
you want you don't want to commit to one
cloud but you wanna be in multiple
clouds you can have a single cluster
live in both clouds let's say that
there's a region that Amazon has that or
that Amazon does not have that Google
has and you really need to be in that
region well you can do that right you
can intermix and match things let's see
when I'm migrated from one cloud to the
other right
you can also dealt with cross region if
you want to migrate from one reason to
the other you can do that with no
downtime if you wanna be able to migrate
from one cloud to another with no
downtime you'll be able to do that with
the cross cloud if you're running in
more of a globally distributed sense
we're also going to be building in a lot
of fun
four-zone sharding so zone charting in
Alice well you've built clusters that
are deployed globally that keep data in
certain places so if you're using zone
charting and you want to keep certain
data in Europe certain data on the east
coast of the US certain data on the west
coast of the US you'll be able to
configure that cluster and build it all
with MongoDB Atlas if you're in an
enterprise environment pretty soon we're
gonna let you actually connect your
MongoDB Atlas cluster to an on-prem LDAP
server we're doing them all going to be
authentication and same for encryption
keys so be able to use your on-prem
k-map server to do encryption at rest in
MongoDB last but certainly not least is
sort of the first feature we're working
on in Atlas that sort of makes Atlas
self intelligent or a sort of
self-healing not self scaling which is
dis auto scaling so a disk auto scaling
will be an option in the configuration
panel where you can say you know what
whatever this disks whatever the if I if
I hit a certain capacity limit if I hit
more than 90% of my disk full I'd like
you to automatically increase the disk
size so I don't have to worry about it
anymore
right so a whole lot of cool features
coming all around making it easier and
easier to run MongoDB so you can focus
on building applications and rather than
sort of worrying about MongoDB
infrastructure or database
infrastructure
so that's MongoDB outlets if you haven't
checked it out please do and let us know
how it goes so one common theme to
everything I've talked about today is
developer productivity and developer
productivity means a lot of different
things to all those different people but
in a lot of cases people want to be able
to build applications easier and a lot
of those applications are sort of mobile
or web and one trend that's starting to
happen today is sort of things like
back-end as a service so in June we
announced small going to be stitch which
is our back-end as a service for MongoDB
and this in some ways seems like a
pretty big leap from what a and from a
database company but if you actually go
back in time it's it's not as not that
big of a leap so when we started MongoDB
in 2007 almost exactly ten years ago
today we obviously first started to
focus on the document model all right
focus on what does it mean to be a
document database how to have
we make a document database that's
really useful for you useful for
developers then we focus on distributed
systems right in 2010 we really starting
we release replica sets a couple years
later the aggregation framework came out
then we did a whole bunch of work in
sort of management and security we
acquired Wired tiger or 2014 to improve
performance 2015 a lot of great features
document validation joins compass and bi
connector and last year we release money
to be Atlas but a lot of people don't
know or don't remember is that when we
first started we weren't called MongoDB
we were called engine and we weren't
building just a database we were
building a full application platform as
a service and back then what our idea
was we were gonna you were gonna write
JavaScript applications you take that
javascript you send that javascript to
us and we'd run it I was a pretty novel
idea back then this was before node
before anything so Dawber actually wrote
our own javascript language or
JavaScript engine but we've quickly
realized that was a little bit too much
for a small and a four person startup to
do so we ended up focusing just on the
database we never really sort of lost
sight at that original vision I've
always sort of been incredibly interest
in that as well and so sort of wanted to
go back to that with maunga to be stitch
but a lot has changed in the last ten
years right the world we would not build
the same thing today that we build ten
years ago so one web is really a
first-class UI citizen right in 2006 I
remember trying to build a full
JavaScript application and we had to
give up his JavaScript was frankly just
not ready yet to actually build
JavaScript applications so in 2007 the
iPhone came out right so no one in 2007
was thinking about building mobile first
or iPad apps or iPhone applications they
just didn't exist an IOT has sort of
completely changed the way people think
about the environments they want to
deploy applications in so another big
change is services so again in 2006 I
had to go and build a system for getting
image if are taking images that were
uploaded and creating different sized
thumbnails and so what did we do
we bought two Linux servers this
actually bought them we install them in
two racks with our hands
we installed imagemagick on them we
wrote a bunch of scripts and we made an
image scaling service no one would ever
do that today on any of those fronts
right and now there's also a service for
her basically anything you want to do
service for sending text messages for
doing image scaling for processing
videos for sending emails there's a
service out there for almost anything so
what does the modern app actually need
well one is an API to do crud all right
you need to interact with their data you
need incredibly good security access
control and validation right security is
incredibly important everything needs to
be safe you know no one wants any data
breaches or data leakages so that's got
to be very well done and you need a way
to stitch services together right a lot
of applications take their own logic and
combine that with a number of other
services to turn that into a really big
application so how does that happen
today so one is often take you know
custom node Python rails app lots of
boilerplate code probably isn't the most
interesting a lot of do-it-yourself
security you know a lot of validation
around like okay what can this user do
figuring out how to do the access
control what fields or documents have to
get redacted from different users based
on their roles and responsibilities and
there's a lot of things coming out in
this space to sort of try to make it
easier there's mobile back into the
service platform the service server
lists that all sort of the name the
words are changing pretty rapidly in
terms of what they actually mean but a
lot of these things have sort of
fundamental issues right cuz you can't
get at the data what if you're using one
of these services and you decide you
want to be able to connect it to tableau
like can you do that what if you wanted
to use a service that isn't supported by
that platform is that easy to do and
what does you don't want to be on that
cloud platform anymore what if you want
to move to on-prem remove to a different
cloud you're often incredibly locked in
so we built mam going to be stitched to
address these issues and it is a
back-end as a service but as I said
that's a term that it's hard to know
what it means so for us that means it is
a REST API from longa DB first and
foremost I'll show you if that means in
a few minutes you can do authentication
authorization ACLs validation privacy
security all via configuration so you
can configure what
people can see what they can do in a
very simple way and you can compose
services so that you can actually just
build an application using any service
that you want also in a very simple
manner and you can run it anywhere you
want any on any public cloud or on a
Prem if you want to run how to run as
well so what does this actually look
like a little bit so here's what a
typical architecture might be so you've
got your MongoDB database you can
connect to it from the shell from tools
from you know from charts from a regular
driver so if you want to actually move
off of stitch at some point and just
connect to it via like into node a node
driver you can do that if you want to
connect to it from tableau through the
BI connector you can do that as well
stitch starts to the database you've got
a plication running on your phone or the
browser or IOT that talk to stitch and
Stitch will talk to the services like
Twilio or s3 on your behalf so the best
way to show how this actually works
together is to do a demo and since it's
my show I decide to do this demo myself
so here we've got an Alice cluster and
what we're gonna do is if you want to
create a stitch-up
you can actually go do that very simply
and create a new application I'm going
to not do that I've got one already
created for us so here again is another
atlas cluster and I've got an
application and we're gonna go look
let's go take a look at it so what I'm
gonna do today is take a very simple
blog post every simple blog and add
commenting to it so here's my blog you
can see it's a it's a great blog very
well-thought-out and I want to add
comments so here I am so the first thing
I want to do is I turn on anonymous
authentication so stitch supports a
number of different authentication
methods out-of-the-box anonymous and
custom email and passwords Google
Facebook API keys or sort of custom auth
will support anything that is oh oh or
other sorts of things as well and now
we're going to do is we're going to go
to the gettin starting page and we're
just gonna copy and paste this sort of
header over here none let's just go put
this in
all right so what we have up here so far
is we're going to load the stitch
library we're gonna connect a stitch
using this application ID and say that
we want to get a database off this
cluster alright so first let's go put in
some HTML so that we can make these
comments work so we're gonna put on a
block where we can put our comments in
later already now we need to actually
put in a text box so we can um put
something in and we get a button to
press so we can do something
all right
so what we're gonna do is when the page
loads we want to go and display the
comments so first let's write this
display this function so we're using
anonymous auth so it's a login first
it's a login and it's as simple as
calling login right now because it's
just anonymous but if you want to use
Google or something you would just type
in Google or something to equally as
simple after we log in we're going to
actually display comments so let's go
write this function so the really nice
thing about having a REST API in your
browser is it it looks just like you're
writing code for a driver so we're just
gonna go to the comments collection
we're gonna do a fine I can put any
Mongo query I want in here right now I'm
just gonna go and find everything after
I do that I'm gonna display it so I've
got my Doc's so I'm gonna write some
very old-school javascript in HTML
showing you know how little I write
JavaScript these days and we're just
going to write some hand coded HTML
and some very unsafe
great so now we need to do is actually
let you insert comments so another
function equally simple so we're gonna
get the textbox
no one corrected me and we're gonna go
insert it so there's an owner ID so
there's an ID every time you log in to
stitch there's an owner ID associated
with with your user and so we just get
that from the client we're gonna go
insert the comment from our text box
after that's inserted we're going to
redisplay the comments and we might as
well clear this value so you can put in
multiple as well so let's go see if this
works
oh so there's an error so no rule exists
for namespace blog comments okay so
let's make sense so by default when you
put stitch in front of a database
everything is completely locked down by
default all right so let's go fix that
so we're gonna go over to the atlas
cluster and we're gonna add a new rule
so we're gonna add a rule for the blog
database in the comments collection now
what are the rules that we want for the
comments collection so we want anyone to
be able to read anything right so you
can have somebody fault when you create
a new rule for a namespace you can read
or edit any document that is owned by
your user ID but in this case we
actually want to let you see everything
but we still have this write rule which
means that only the owner can delete or
update a comment they added we also have
a filter so you can get rid of documents
that users aren't allowed to see but in
this case we just want to see everything
great now it's come back over here now
we have no errors hi from SF and we have
a comment so now we have a commenting
for our blogs so this is kind of fun so
it took us about four minutes to add
commenting it's not fully featured but
it's pretty good so this is that's it so
it's kind of cool but I said before we
can also integrate services so to come
back over here so before I set up a
Twilio service and I set up a web hook
so that you can actually send a text
message to Tullio which we get forwarded
to stitch and insert that comment
directly into this same collection so
go ahead try to keep it clean see if you
love pulling out phones you can send
anything you want I'll see if anyone you
know know HTML please as you saw the
it's just some very raw HTML in there so
let's be friendly give you another few
seconds like watching like three people
in the front row so when they hit Send
is when I can't quite see who's doing
one all right already
see how we got there we go so so that's
mom gonna be stitch incredibly simple to
build very simple features and get going
so it's the back end of the service but
it is not limited to sort of hey I want
to build a brand new application from
scratch there's a lot of ways you can
get started with stitch in existing
applications so for example you can add
a feature to an existing application
whether it's commenting or ratings
they'll say he's gonna have like a star
rating system you can try doing that
with stitch you can also use it if
you've got an existing application but
you want to expose data you want to
build an API for data access you can do
that with stitch right you just enable
read-only access to certain collections
with sort of pretty complex rules so
people can sort of see things you don't
to go build a custom rusty if you have
four people to interact with their with
their data you can integrate with
services so maybe you want to integrate
text messages so people can text message
things to your application or integrate
with slack or github or something laughs
like that you can do that very easily
and of course you can go ahead and sort
of build a complete back-end using a
stitch we've got a couple of thoughts
talks on stitch later today
first one is sort of building our first
MongoDB stitch app by Drew in this room
right after this talk and a little bit
later this afternoon
also from Drew implementing your first
full sack app with MongoDB in room D a
little bit later today so lots of great
stuff we've talked about today I'm super
excited about everything you know I'm
super excited about charts and the
newbie a connector I think manga to be
thread 3 6
a ton of new features that are really
helpful I think Atlas is really the best
way to run MongoDB and I hope everyone
gonna try it tries it and I'm super
excited about stitch just so you know
stitches in public beta today if you
want to go play the stitch it's
available today it is only available on
Atlas so you have to use with Atlas but
it will be available on prime pretty
soon I hope you all have a really great
day with us in San Francisco please
don't find me late let me know what you
think I'm happy to talk to everyone and
I'll just be wandering around all day
looking a little you know
come find me I'll be more fun for me
anyway I hope it was a really great day
I will see you around thanks everyone</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>