<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>MongoDB + Java - Writing | Coder Coacher - Coaching Coders</title><meta content="MongoDB + Java - Writing - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/MongoDB/">MongoDB</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>MongoDB + Java - Writing</b></h2><h5 class="post__date">2015-04-06</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/mg6J5vDEeFk" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so how can we write writing is as simple
as calling a collection and insert now
in MongoDB since we have this complex
documents most of them have flexibility
of schema so there's no restrictive
order on all these set of things we're
going to be we provide a DB object
document so you can use it to parse in
any of your poachers into MongoDB
now this DV objects you can might
consider it as an extension of map and
you can think about it as a map of
strings to objects and it's pretty
simple to use basically what you need to
do is just instantiate the object set
the keys that you want to use go and
fetch from your poacher these values
that can be assessed by a getters object
and just throw that information into a
document once you have that document
fully filled you just need to call the
insert function it's pretty simple it's
not a lot of boilerplate around it
instantiate your collection call the be
some wrapper and just fill it in with
all the keys and the values that
correspond to those keys you might also
want to collect back to the right
results because MongoDB will always tell
you what happened to that right it is
important to understand if the
instruction that you just sent actually
changed anything in your collection
let's say for example that I'm trying to
insert a document which has a unique key
index on it or there's a collection that
enforces in you key if you try to insert
something that we evaluate or the
conflicts with at any key or the
underscore ID for the primary key for
example you might want to know what
happened to that well the right result
object will give you exactly that
information we'd also like to update
things because applications work with
live documents and things will change
according with the course of the
workflow or the stream of information
that you are using movie actually
provides a couple of different methods
to do that the first one is the save
method and the save method just does one
thing which is replacing the document
that you have in your database by the
one that you are throwing in the new one
now
all about this one because if you are
operating in multi-threaded environments
and if you are collecting this
information from the database
manipulating in calling save on multiple
concurrent streams you probably going to
have some data they will be overwritten
by an posture instruction so if you have
two parallel waves in one changes the
value to a another changes the value to
be this information will be overwritten
by the last one so be very careful about
it the good thing about this method is
that he actually uses observe by default
which basically means that if the
document does not exist you will create
one so be very very careful about to
save if you just want to do absurd it's
very simple to use very straightforward
but if you have multi-threaded or
comparing parallelization over a
document make sure you are we have
that's controlled obviously we can just
basically do normal updates where we can
express something that we want to update
like a criteria and then tell it what we
want to update this is the way that the
update method behaves so in this example
here we are building a query that we
call in query builder for doing that and
we tell it well let's query on the name
and I'm providing the name from P I will
update that the result of that query
with the new address for example that
I'm building up which is a more complex
object not just a string as before and
what I'm doing that is parsing that into
a DB object address that DB object
address will be inserted into my normal
poacher and in this instruction I'm just
replacing the objects with a full update
now this will probably be consuming a
lot of bandwidth because we are not
doing anything particularly intelligent
here in the sense that we just fetching
information from the database with the
query and then replacing whatever it
matches with it when probably we don't
want to do all of that
we just want to set a couple of fields
and for that we should use the set
operator this method here for example
really tells us that the
only thing that we want to do is set an
address so what we do is we use exactly
the same query where we say the name is
something that's something we will just
call the update but not the full object
that we need to rebuild again we just
need to create the update instruction
using the set operator now there are
several different operators for the
updates and I definitely recommend you
guys to have a look to this link over
here the reference operated update
because there's several optimizations
that we can do for consuming less
bandwidth and consuming a lot less
processing power when we do specific
sets instead of replace updates we
update data and we also remove data and
for removing data well this is nothing
as simple as expressing the query of
what we want to remove setting up the
criteria and then just call remove if
you want to understand how many of these
documents have be changed we just use
the right result get n that are affected
by this remove operation and we'll get
exactly that the number of removed
objects that we just completed matching
query we do the get from the basic DVD
object builder and then we just call the
remove now if you want to just remove
all the simplest thing that we can do is
basically just remove everything with an
empty TB object that can be achieved by
this instruction where we call the
collection called the remove operator or
remove function and we just send it a
simple remove object which is completely
empty</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>