<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Demo: MongoDB Enterprise Server and Ops Manager Integration with Pivotal Cloud Foundry (PCF) | Coder Coacher - Coaching Coders</title><meta content="Demo: MongoDB Enterprise Server and Ops Manager Integration with Pivotal Cloud Foundry (PCF) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/MongoDB/">MongoDB</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Demo: MongoDB Enterprise Server and Ops Manager Integration with Pivotal Cloud Foundry (PCF)</b></h2><h5 class="post__date">2017-09-14</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/c_QKKy6kQoY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello my name is Jorden summer 'less and
I'm a senior product manager with
MongoDB responsible for MongoDB ops
manager and MongoDB is a service on
private and hybrid clouds in this video
I'll be talking about running MongoDB as
a service on pivotal Cloud Foundry I'm
going to do a quick demonstration of the
MongoDB Enterprise tile for pivotal
Cloud Foundry the tile allows pivotal
Cloud Foundry to integrate with MongoDB
ops manager
and gives users a way to spin up MongoDB
clusters into the pivotal network using
the pivotal CLI you can find the tile on
the pivotal Network simply search for
MongoDB and you'll see the MongoDB
enterprise service for PCF and now here
you can find the actual tile so if you
click here and download the file you'll
have to actually create an account and
sign in in order to get that tile and
then to install it you simply go into
your pivotal Cloud Foundry deployment
and click import a product and select
the tile that you've just downloaded now
I'm not going to do that because as you
can see I've already done it and once
you install it the tile will appear here
on the main panel next thing you need to
do is configure the tile to connect to
your MongoDB ops manager deployment so
I'll click on the tile now you can see
there's a number of different panels to
set up your configuration the only ones
you really have to worry about are the
first two so the first one allows you to
select to the network's where things
will be deployed and the main network is
the pivotal Cloud Foundry network and
the service network is actually where
your MongoDB deployment will be deployed
next to click on MongoDB on-demand now
here is where we need to actually link
it to our office manager deployment so I
have an ops manager deployed I have
among going to be ops manager 3/4
deployed you can also use MongoDB ops
manager - oh so you copy the URL and
paste it in here to the ops manager URL
you give it your username now you also
have to give it an API key so let's go
and generate an API key and you just
simply generate your key public key
enter your password okay and we get our
API key so we'll copy that and we'll put
it into the pivotal configuration now
the other things you can configure are
the VM type that the MongoDB nodes get
deployed on and you can also add some
discs on there if you'd like so it's as
simple as that I've got all those
settings configured I'll click Save and
then the last thing I need to do is go
into pivotal and apply changes
so I'll click apply changes now this
actually will take some time it should
take about 20 minutes or so so just so
you're aware once you actually apply the
changes you have to wait a little bit we
can ignore these errors this just has to
do with the way we've installed pivotal
Cloud Foundry so ignore errors and start
now while that's installing another
thing you'll have to do in a MongoDB ops
manager is add the Cloud Foundry broker
IP address to the API whitelist so it
can actually use the API so in my case
I'll just add that you can get that IP
address from your Cloud Foundry
deployment and that's done so now we'll
just wait until this is finished and
then we'll move on with our
demonstration alright now that that's
done we can go in and actually spin up a
Mongo cluster so I'm going to go over to
the command line so we can see the plans
that are available by looking at the CF
marketplace and we can see our MongoDB
ODB service broker with the standalone
replica set and sharted cluster plans
the standalone deploys a one node
stand-alone the replica set deploys a
three node replica set and the sharded
cluster plan deploys a shard of cluster
with two shards each as a three node
replica set and it also deploys three
config servers and tune Mongo s servers
now each plan will also deploy one
monitoring agent and one backup agent on
one of the data bank nodes so to deploy
a replica set we just need to use the
create service command and we give it
the service broker then the plan and
then
we need to give it a name so let's call
it test replica set and then by default
each of these will deploy the MongoDB
three four five community version so if
we want to give it another version or
you deploy the enterprise version we
simply give it some parameters so in
this case I'll give it the three four
five Enterprise version and then hit
enter it will start to deploy our
replica set so if we want to see the
status we just use this command and we
can see that it's deploying our replica
set called test replica set and it's
already created the group in ops manager
that it's going to deploy this in and it
actually gives us a link so we can flip
over so let's go over to ops manager to
that group
nothing is deployed quite yet if you
wait just a little bit of time and check
the status again we'll see that the
create has succeeded and so we can copy
our group go over to ops manager and
take a look at that deployment and so
it's still deploying the MongoDB servers
but you can see that it's spun up three
VMs and it's deployed a three node
replicas set the automation agent on
each and monitoring agent and backup
agent on one of those nodes it's pretty
much that straightforward now one other
thing we should take a look at is the
documentation there's pretty thorough
documentation on how to use this tile
what versions of he CF it supports what
versions of a MongoDB ops manager and
MongoDB are supported one other thing to
note is for the Charlotte cluster there
are some additional parameters so in the
same way that I added versions when I
did the replica set I can actually
determine the number of shards the
number of replicas per shard the number
of config servers and the number of
Mongo s processes that I'd like to have
deployed and you just add them in the
same way passing them into your command
when you create a service we go back we
should have our replica set deployed and
it is and we have a primary and that's
basically it
I hope you've enjoyed the demo you can
learn more
by visiting these links thank you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>