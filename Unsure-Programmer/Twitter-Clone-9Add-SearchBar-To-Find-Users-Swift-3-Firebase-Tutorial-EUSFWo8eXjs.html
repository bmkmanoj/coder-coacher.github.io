<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Twitter Clone 9-Add SearchBar To Find Users - Swift 3 + Firebase Tutorial | Coder Coacher - Coaching Coders</title><meta content="Twitter Clone 9-Add SearchBar To Find Users - Swift 3 + Firebase Tutorial - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Unsure-Programmer/">Unsure Programmer</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Twitter Clone 9-Add SearchBar To Find Users - Swift 3 + Firebase Tutorial</b></h2><h5 class="post__date">2016-10-02</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/EUSFWo8eXjs" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so in the last video we had migrated our
application from Swift 2 to Swift 3 now
continuing the application using swift 3
we're going to implement the search
feature where we will allow the user to
follow other users so in this particular
part what we'll do is when you click on
the follow user button over here you'll
show up all the users from the database
we can filter the users per typing the
name of the user once you have the user
that you want you can click on the
user's name and you can go to the user's
profile page and you'll be able to see
the users tweets media's likes follow
the user etc which we'll build on in the
next video for this particular video
we'll concentrate only on implementing
the search feature so let's begin so
let's start by adding a table view
controller to our storyboard control
drag it to a storyboard over here and
let's link this add button to a new
table your controller and say present
modeling also let's embed this table
view controller into a navigation
controller coming here is a table view
controller let's write find users also
the prototype cell let's give it a type
of identifier of cell and style should
be subcribe now press command end to
create a new file let's create a cocoa
touch class of type UI tableview
controller and call it follow users
table view controller and save that back
on the main storyboard let's set this
class to the table view controller that
we just created select the table view
controller go to the attributes and say
follow users table view controller also
let us add a button to the right which
cancels this controller out and sends us
back to a home view controller so let's
select this let's come here at the
bottom bar button item now go to the top
let's select system item stop open up
the split editor control drag from the
cross button and create an action and
call it dismiss follow users view table
view connect that and here as always we
will say dismiss animated bull which is
true and completion will be nil let's
run this out and see if it's working
till now let's click on the add user
button it opens up the find user if we
click the cross it closes it now let's
add the search controller to the follow
users table you come here come to the
follow users table view some of you
might be tempted to try and use the
search controller that we have over here
at the bottom which is search bar and
search display controller and the search
bar but as of now this has been
deprecated in the only way that we can
add the search bar is via code so coming
here will create a variable called a
constant called let search controller
equal to UI search controller and in
brackets will give the search results
controller as nil so you've created a
search controller without specifying a
search results controller what we're
telling the application is that we want
to use the parent controller which is
the follow users table view controller
to display the search results and not
display it in a separate controller in
case you wish to display it in a
separate controller you can specify the
controller here in place of the nil now
coming to the viewdidload we'll add a
few properties here with a search
controller dot search results up data is
equal to self and it's a search
controller dot dims background
presentation equal to false and we say
defines presentation context if
to true and we'll add it to the table
view it's a table view dot table view
header table header view is equal to
search controller dot search bar so I'll
just walk you through this code the
search controller dot search results of
data is basically something that allows
the class to know when the text inside
the search bar is changed for this we'll
also have to implement a protocol called
the UI search results updating which
would just do shortly the second line
dims background during presentation
basically by default the search
controller dims the view any time the
user starts typing the search path it
assumes that the search results are
displayed on a separate view but here
were displaying the results in the same
view controller that's why we don't want
the background to be dimmed and we set
it to false the third line which says
defines presentation context basically
ensures that the search bar is only
shown on this particular table view
controller and when we go to some other
view the search bar is removed and
lastly we add the table view to the
table header view using this line of
code as you can see we're getting an
arrow over here that's because we have
to implement the UI search results
updating protocol so UI search results
updating now the error will move up as a
u.s. search results updating requires a
method to be implemented the method it
requires is update search results for
search controller UI search controller
inside this basically will update the
search results so let's quickly try this
out which should be able to see the
search path there we have it the search
bar is there if we click on it it nicely
moves up this is there by default we
cancel it it comes back to the normal
thing and we can come back
so now let's implement the functionality
of the search bar let's open up the main
storyboard first let's create an outlet
for the table you let's call it follow
users table view
let's also import firebase database
because that's where we get all I users
from now we'll create two variables here
one will be called users array will be
an area of type NS dictionary and the
other will be filtered users which would
also be an area of type and its
dictionary the first one users area will
store all the users from our database
and the filtered users will be only the
users that are filter once we type in
the search bar
we'll also create a reference to our
database we call it database ref is
equal to fi our database dot database
dot reference now let's get all our
users from the our database so it's a
database ref dot child go on to the user
profiles node under that will say query
ordered by child and we'll order the
results by the child node name you will
say observe event type dot child added
will say snapshot is the data that's
returned coming here we'll say error and
print just print the error saying print
error dot localized description here
what we'll do is we'll store the
snapshot that we've got into our users
array variable that we created so we say
self dot users array dot append will say
snapshot dot value as NS dictionary we
can't directly append the snapshot any
longer because we need to tell Swift
exactly what type of variable it is and
now we'll just insert the rows so they
self-taught follow users table view dot
insert rows act inside the index path
we'll say
row and we say self dot users array dot
count minus one and section will say is
zero and the animation will say is
automatic so the self-taught users added
odd count minus one will basically
insert the row at the bottom of our
table so now that we've got our user
stored in our users array we need to set
up the other methods of our table view
controller we need to set up the number
of sections the number of rows in
section and the self forward index part
method which will display our table but
before we do that let's create a method
that will help us filter through the
users depending on the text the user
adds in the search bar so let's call
that method filter content it requires a
parameter of search text of type string
will say self-taught filtered users is
equal to self dot users array dot filter
user in basically go over each user in
the self produces array and inside that
will check if the name is equal to the
search text as the user is typed so
let's first off the user's name into a
variable called into a constant called
username we'll go into the NS dictionary
user and we'll force down casted as a
string and we'll return
so first we have to use a name from the
dictionary user by going into the name
property we downcast at as a string and
then if that name is contained in the
search text then we return that users to
the filtered users array and every time
the content is filtered we need to just
say table view dot reload data to reload
the data of the table view now let's
come to our other methods number of
sections we will say one and a number of
rows let's get rid of this line and
we'll say if search controller dot is
active and then search controller the
search bar dot text is not equal equal
to is not equal to an empty string then
returned filtered users dot count else
return self dot users array dot count so
if the user is typing something only
show the filtered users if the user is
not typing anything returned all the
users next come to the self forward
index path let's uncomment this and then
use identify that we had created was
self here again what we'll do is we'll
create a constant called user of type NS
dictionary and we'll copy this line of
code which checks if the user is typing
or not so if the user is typing we'll
say let the particular user equal to
filtered users index path dot row and if
the user is not typing then we'd say
user is equal to self dot users array
index part or row and it basically setup
the properties which is self dot text
label dot text is equal to user go under
the name property
now in cosplay the strain and self dot
detail text label dot text is equal to a
user go into the handle property as a
string and then return the self text
label and detail text label come by
default from these we don't need to
create outlets for those now all our
methods are set up just one thing coming
to the filter content method that we had
created firstly this should be filter
secondly this should be called every
time the user types so the code that for
that is filter content search tags in
the parameter and we pass itself towards
search controller towards search bar dot
text this will call this filter content
method every time the user starts typing
and give us the filtered users now let's
run this and try this out it should work
so coming here we see all our users in
our database and let's search now as you
can see it's getting filtered by the
name of the user as of now we can't
click on these and go into a detail view
we'll cover that in the next video I
just want to show you a firebase console
once just in case there's some confusion
about how the database looks as you can
see we have the user profiles node
inside that we sorted the users by their
name node and all our users are there we
have three users and we can see the
three users over here so I hope you guys
like this video and try this out and you
can always leave comments in the comment
section from what kind of videos you'd
like me to upload we'll try and continue
with this series in the future thanks
please like and subscribe</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>