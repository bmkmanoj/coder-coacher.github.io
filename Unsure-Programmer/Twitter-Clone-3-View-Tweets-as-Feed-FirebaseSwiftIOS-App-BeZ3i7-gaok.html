<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Twitter Clone - 3 - View Tweets as Feed - Firebase+Swift(IOS) App | Coder Coacher - Coaching Coders</title><meta content="Twitter Clone - 3 - View Tweets as Feed - Firebase+Swift(IOS) App - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Unsure-Programmer/">Unsure Programmer</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Twitter Clone - 3 - View Tweets as Feed - Firebase+Swift(IOS) App</b></h2><h5 class="post__date">2016-08-25</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/BeZ3i7-gaok" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">the last part of the series we learned
how to send tweets and store the tweets
in our database in part three of the
series we will learn how to display
those tweets on our home page also we
will keep the user logged in once he or
she logs in so that the user does not
need to enter the username and password
every time he opens the app so right now
if you see if you click this new tweet
button and you type a tweet and you
press tweet the tweet does get stored in
our database but it is not displayed
over here so that's what we'll set up in
this tutorial so let's begin come to the
main storyboard and open up the
assistant editor in the home view
controller we first start by creating a
few variables first will be a reference
to our database
next we'll create a variable to store
the logged in user and then we'll create
a variable to store the details of the
user let's also add activity indicator
view this is a nice addition that shows
when the page is loading this is going
to move this out of the table so that it
comes in the center it's making large
white and set the color to a nice blue
let's create an outlet for the activity
indicator view call it a IV loading and
also create a link to the table view and
call it home
table view one last variable that will
create is the tweets variable which will
stall our tweets when we get them from
the database now coming to the
viewdidload method first thing is to get
the logged in user
has always been used a fire hot Dorit
dot current user to get that and then
we'll get the logged in users details
from the user profiles node in our
database under that will search for the
logged in users UID and we will just
observe a single event of type two just
read it once the return data can be
called snapshot and be of type fi our
data
snapshot here will store the logged in
users details into the variable that we
created so it's a self-taught logged in
user data equal to snapshot next we get
all the tweets that are made by the user
so again we will refer to a database go
onto the tweets node this time under
that we go for the users user ID
and here we'll observe event of type
because we don't we want to keep reading
it if any child is added into this
database so we'll say child added and
the with block will put in again
snapshot and FIA data snapshot as they
returned data so what will basically get
from this node are all the tweets of the
user so what we do is we we created a
variable called tweets here it's an
array of any object so in this will
append all the tweets
next we just need to use these tweets
and add them into individual rows into
our tables so for that we do insert rows
add index path inside that NS index path
for row 0 in section 0 as we have only
one section this would be the normal
brackets instead of the square brackets
and with animation we'll call it UI
tableview animation automatic
so it's not nice animation when the row
is added also will stop animating the
activity indicator once everything is
loaded we also just need to make one
change to this to the activity indicator
view you need to check this behavior
called animating and also hides when
stopped
so whenever the animation is stopped
it'll automatically hide you can also
catch any errors over here so we can say
error in roses brag it out and we just
print the error into a log next we need
to just configure the table view cell so
for that let's first go into our home
view table view cell and let's create
outlets for our prototype cell so let's
drag this out here let's call this
profile pic of type uiimageview
next let's call this name handle and the
textview we can just call it tweet so
now that we have all the outlets setup
let's write some code we can get rid of
the set selected method and here we can
write a custom method called configure
which will take the first value as a
string for the profile pic it's optional
because right now we can allow the user
not to have a profile pic as we haven't
set that up in the profile tab in the
profile tab will allow the user to
upload a profile pic which will store
into our database and we'll store a link
of that as well which will refer when we
display the profile
so that will do in the future when we
set up them me damn so for now we let
let this be optional and we show default
profile picture next we have name that
will be of type string that is mandatory
for user to put it handled also of type
string and tweet also of type string to
have this method as public we would have
to change this to public as well then we
change this to public as well because we
want to access it from outside the class
here what we'll do is just set settle
this up so we set the text of the tweet
equal to the tweet the handle the handle
also in front of the handle we'll add an
add sign and for the name and put in the
name now for the profile pic we can add
the code so that when the user uploads
the profile pic it will actually show
the profile picture and not this default
Twitter picture so as we just put the
code in for now so if profile pic not
equal to nil then we will show the
user's profile picture which will be
from coming from a URL so it's a
contents of URL and we'll put the URL in
here because it will be of type string
because it's coming from the database
force unwrap that so we forced unwrap
the profile picture and we forced unwrap
the nsurl to get the NS data we just get
rid of this here next we'll just set the
profile picture
UI image data image data else not so
good at this this should be handled
force on that image data as well and
just set a default profile picture and
for now we'll just set the Twitter icon
as the profile picture so now that a
tableview cell is set up let's come back
to the home view controller and display
this inside the cell for row at index
path let's create a variable called
tweet and for each row we'll put in the
tweet inside this tweet variable but
what we need to know understand here is
that when we get the data from the
database it comes in the order that the
oldest tweet will come first so we need
to reverse the order as we want to show
it in the reverse order we want to show
the latest tweet on top then the one
after that then the one after that and
the oldest tweet at the bottom so for
that what we do is we'll simply just
reverse the order by doing going through
the tweets array that we created inside
that it's a self-taught tweets not count
which will give us the length of the
pitch sorry get the last one in this and
from that subtract the current index
path
so like for the first row so like for
the first row which this will be 0 and
if we have 5 tweets this will be 5 so it
will say 5 minus 0 which will mean 5 so
to show the fifth tweet from the tweets
array right on top say dot value text as
string falls down grasp it as a string
next we just configure the cell so let's
call cell door configure this is the
function that we created in a home view
table yourself in set the profile
picture is nil for now get the logged in
users data which is the name false down
castrate is a string in the handle
also falls down because this as a string
as we need this to be a string in a
function and the tweet can be just the
tweet as you've already configured the
tweet over here there's one small error
that we need to correct before we run
this that is coming up here there should
be user profiles and not user profile
now we're good to go let's run this and
check this out let's log in as you can
see we have to log in every time after
this we'll fix this as well so the
logged in user remains logged in there
you can see we can see both our tweets
are coming up nicely with a nice
animation let's try and tweet again
there you see the third tweet is coming
it's coming right on top so now let's go
and correct the problem of the user
being logged out every time we open the
application let's stop this go to the
view controller in the view controller
under the viewdidload delete this code
and here let's put in this line of code
and before we do that let's import
firebase auth and here let's add a earth
state the change listener call this auth
of this user in code let's say a flat
current user equal to user it also just
print a line sync use a signed in ground
reference and we'll send the user to the
home view controller so for that let's
you let male storyboard of type UI
storyboard equal to UI storyboard name
main
and bundle of nil this gets a reference
to the main storyboard let's create a
home view controller variable of type
uiviewcontroller so main storyboard dot
instantiate view controller with
identifier let's call this tab bar
controller view we have to set this up
right now and once we have interests
that instantiated we can send the user
to the home screen it is self dot
present view controller passing the home
view controller animated should be true
and in completion we don't want anything
that is set up let's go to the main
storyboard select the tab bar and give
it a storyboard idea of tab bar
controller view now we're good to go
let's run this and see when it loads the
user should be automatically taken to
the home screen there you can see it
didn't ask for the login it's taken the
user to the home screen and it's caught
all the tweets of the user and the next
part we'll build on this application we
have three more tabs to finish will go
to the me tab and finish up the user's
profile I hope you guys like this and
thank you for watching</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>