<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Part 4 - New Firebase REALTIME DATABASE + IOS(swift) +  Users Profile Page + FB Login Tutorial | Coder Coacher - Coaching Coders</title><meta content="Part 4 - New Firebase REALTIME DATABASE + IOS(swift) +  Users Profile Page + FB Login Tutorial - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Unsure-Programmer/">Unsure Programmer</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Part 4 - New Firebase REALTIME DATABASE + IOS(swift) +  Users Profile Page + FB Login Tutorial</b></h2><h5 class="post__date">2016-06-11</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/3kKzv8VVgMU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">in this tutorial we're going to build on
the application that we created in the
last three parts and we're also going to
introduce ourselves to a new feature of
firebase which is real-time databases so
to start with let's create another view
in our application to do that
let's first embed our home view into a
tab bar controller that will help us get
tabs at the bottom to access the other
pages start by setting the tab bar
controller size to four decimal seven
inches as always just to make things
easier now as you can see this icon here
is empty what I've done what we do is
we'll give it a custom name and a custom
image I have put in a custom set of
icons which I've put into my assets
folder I'll put in the link in the
description so that all of you can also
have a look at it and get these icons
coming back to me in storyboard so now
we want the user to log in and go
directly to the home view and have this
tab bar at the bottom as of now the user
is going directly from the login view to
the home view so we need to change that
we come to a view controller we see that
after the users logged in it is sent
directly to the home view so let's call
this the tab bar controller view and we
have to rename this give this a
storyboard ID of tab bar controller view
okay and now we need to add another view
so what we'll do is let's let's add a
table view controller also set its size
to four decimal seven and two enough to
add another tab to this we just need to
ctrl click and drag from there into the
view and say relationship segue view
controllers there we have another term
let's rename that tab also as settings
and call this settings oh not setting
let's call this profile now let's run
this and you see if we have this working
there we have it we have the profile and
the home view okay so now let's add a
new controller for our table view and
we'll call it profile table view
controller we keep only one section the
table view and let's just assume that we
have a few rows in our table let's call
them where about and let's just give a
gender age phone email website and bio
okay next we need to return the number
of rows that will be displayed in the
table view so for that we'll set it as a
length of the array now we need to
configure how each row will look under
the cell for row at index path for this
what we do is we'll go to the main story
board first and add a text field in the
prototype cell
and let's quickly set the constraints
for this there we have the cell set now
what we do is we'll create a new Swift
file and call it a text input table view
and what we do is we'll just import a
uikit and we create a class called
public class text input table view
uitableviewcell
and what we will do is we can go to the
main storyboard select the table view
cell and set the class as text input
table view coming back here it's called
text input table view
I'm going to the main story board again
come on to this split editor and open
that file here and control dry premiere
to create an outlet and call it my text
field what we will also do is we'll
create another function called configure
it will take two texts at two fields
undo us a text field and one will be a
placeholder both will be strings and
basically what it will do is it will set
the value of the text and the value of
the placeholder
okay coming back to our profile table
view controller dot Swift we'd have to
change this and we'd have to give it the
identifiers first we'd have to create
the cell of type text input table view
and we'd have to force downcast as a
text input table view and give it a
viewers identifier from and just give it
a user identifier of text input and we
need to go into the main story born and
set the stories reuse identifier here we
select the text input table view and
under the attributes inspector we set
that leaves identifier which will be
text input okay now come back to the
profile tip view what we'll do is a new
the configure function that we created
we will call that cell dot configure and
in this what we'll do is we'll set we
set the string to blank and we'll give
the placeholder the name of the field
that we create in an array which will
basically be about and we call the index
path dot rope on it and we'll just run
the cell so they should give us the cell
let's run it and see they go into
profile and there we have it we have the
text fields but as you can see that it's
going out of the screen right now so
what we will do is we will give it an
insert it'll come to the top in the
viewdidload write self dot table view
dot content in set equal to
in sets make and here we can give it
about 20 let's see that again okay and
with all what one more thing we'll do is
really go to the main story board just
so that we had can we have space to put
another button will click on this and
your editor embedding and navigation bar
controller so that and we can name this
edit profile and we can add a button
here called update so that when the user
is updated all the text fields you can
press update who's running that again
quickly and this is what we have here
now we'll start with the fun part which
is the fire based data a real-time
database so let's start by going into
the documentation of firebase and if
you're going to get started we should
see that the first thing we need to do
is that we need to install firebase
database like we've installed the other
forms so let's go into our app and there
we are and we'll do nano font file and
we'll add firebase database here
save this and as always for install so
we've installed 5s database and we need
to import it into our file by using
import file this draw projects will go
here and go in to a profile table view
controller and import firebase database
and we create a reference to the
firebase database
we'll just call it ref and we will make
your reference to that and we'd also get
the current user which will be F path
for that we need to import firebase path
so and get the current user so then we
have the current user now what we want
to do is basically when the user clicks
enters his data and the text fields and
clicks update we wanted to update on the
server so let's go and first open up
this file which is profile table view
controller and let's create an outlet
for update troll drag and we did tap
update and we'd make it action connect
okay
so what we're going to do is basically
if we go into a firebase console my app
and we going to database we can see that
we have a database over here
which has no values it's null so we can
start by going here and we'll run a
while loop when the user clicks update
to loop over all the text fields and
take out all the data and send it to a
firebase database so let's see how we're
going to do that we just create an index
start with called index and give it a
value of zero then we're gonna wire loop
by the index less than about or count
get the index path of the particular
cell for row and we'll give the row
index and section since we have only one
section
zero then will you get the cell to this
text input table view which is a
self-taught table view the cell for row
index path and X and give it index path
and we're after force down bastard has
text input table view now what we do is
this is an index part three so now what
we do is we check if cell
dot my text field basically the cell is
empty or not so if it's not empty it's
not empty basically left you get the
value of it and store it in a string
call item so we're going to do cell got
my text field dot text and it's going to
ask us to force unwrap it so there we
have item and what we're going to do
next is basically you would have to run
a switch statement to check with sure it
is
okay so basically we've created our
switch statement but what we need to do
is every time the row is best when it
says my few checks and sees that okay
the gender row is not empty we need to
send data to a firebase database so
let's go see how we're gonna do that we
can go the same data and what it wants
us to do is if you see you have to
create a node and you're perceptive
value so let's follow this and come here
what we're going to do is we're going to
do self dot R f dot child okay so we
wanted to be of type the user profile
the first node the child of that node
should be the user ID which is user dot
UID and it should be under gender then
we set value item I'll show you what
this exactly does and when we executed
okay so we've set that up now one more
thing we need to do in this is that this
is gonna be end switch and if and we're
gonna update the index at the end that's
the value so basically if I see the
genders non empty its gonna send this
data and store it under gender this is
going to stay stored inside age phone
email etc so let's see what it does not
running the application so you go here
we put in May then we just four nails
twenty three and we just put in four
hundred and we just leave it at that and
just click update see it doesn't show
that anything's happened but if you go
back to our database see we have age
gender and phone which is already
updated so like we said now become more
clearer to you and there our database we
put in a node called user profile you
can think of it as a table under that we
have a user ID and under that we have
the values for that user ID so now
suppose we go here and we change we add
on a website as well so you go WIBW da
youtube.com and update it you will see
that it's updated live there the website
is come you can also change anything and
it will overwrite it so you say you can
make this female just to see and you
update and then you go back that is
genders been updated the only problem
right now that we have is is that if we
in the simulator if you go to the home
page and go back it's still there but if
we go to the home page we log out and we
log back in we don't have any of these
details over here so we managed to send
the data up to the server but we need to
be able to retrieve this data from the
server as well for the user to see what
he's entered before it'll be pointless
otherwise so let's see how we're going
to do that now so we'll go into the
viewdidload method so in the view first
loads
and we need to add something or as an
observer which we'd see over here in the
retrieve data section of the
documentation you'll see that there's
this top scored snippet given here we
paste that now basically this is an
observer for the database anytime the
database changes it will receive a
snapshot from it so what we do is we
call this our ref handle and instead of
post ref we'll say we'd refer to the
reference that we created earlier on the
top over here which is VAR ref firebase
database and the node that we're
accessing is user profile
so we'll say child dot child will be
user profile and then we'll add an
observer type observe the event type to
it and what we do is we'll say that let
users dictionary equal to snapshot or
edit as NS dictionary then what we can
do is we get the user details from user
dictionary dot object for key and we can
say self dot user dot UID
and the reason after you are doing this
is basically what we can see over here
first I'll show you something that is
print this user dictionary first
so if you go here you will see this is
the data that we get it's it's
identified by the UID the same structure
that's here in our database like this is
available to us over here see using this
particular UID we can access the data
that we want to display which is the
agenda phone website bio etc so let's
see what we'll have to do now is we'll
have to again create a fall while loop
to loop over all the data and display it
into the text fields to save time I'm
just gonna copy this code and then I'll
discuss it with you okay so I pasted it
in the code that we need for this let's
discuss it maybe we've got we're running
a while loop while the index which
starts from zero is less than the length
of the array that's the same way we got
the index path earlier we get the index
path will you get the cell and from the
salvage store the placeholder this time
instead of the text in the cell so we'll
store the placeholder into a variable
known as field
we'll run a switch loop over the field
put in all the cases and then we'll use
the cell door configure function that we
had created to extract the data from the
dictionary that we received and updated
into the text field so we see that
configure for adding the object for key
gender which will be female in this case
convert it as a string and in the
placeholder will just add should be
gender that's all we need to do to get
the data into our text fields from the
database so now let's run this and see
if it works
okay there you see we've got our data
from our database what we had entered
let's also try and update this and see
if it updates let's give it the email
and update it there you see it's got a
live update so that's just to start with
the real-time databases in five is I
hope you guys like this and you try this
out and we dig into some other stuff in
the future videos Thanks</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>