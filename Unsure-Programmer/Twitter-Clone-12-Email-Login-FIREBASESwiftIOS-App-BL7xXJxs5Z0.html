<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Twitter Clone 1.2 - Email Login - FIREBASE+Swift(IOS) App | Coder Coacher - Coaching Coders</title><meta content="Twitter Clone 1.2 - Email Login - FIREBASE+Swift(IOS) App - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Unsure-Programmer/">Unsure Programmer</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Twitter Clone 1.2 - Email Login - FIREBASE+Swift(IOS) App</b></h2><h5 class="post__date">2016-08-06</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/BL7xXJxs5Z0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">let's go ahead and clear the handle
viewcontroller come into the main
storyboard let's drag in view controller
and set up a new file called hand view
controller come back to the main
storyboard set the controller to handle
view controller for this view also let's
set up a navigation bar
you
and we lied to fields here one is the
name of for the name of the user and the
other will be for the unique username so
let's first say put this label in here
text field track that into the center
centered vertically and horizontally and
SATA hide just fix the miss placement as
well like the stacks field above this
and let's say select unique Twitter
handle control drag it to this vertical
spacing and leading similarly we draw
drag another text field in
say tell us about yourself
and again vertical spacing and reading
let's give this a placeholder of name
and play sort of example again here we
don't want any corrections to be made in
this and no spell checking here we can
have the corrections but no spell
checking it also add a toolbar to the
bottom
and rename this item to start tweeting
once we have that setup control drag
from the sign up view controller to the
handle view controller and present model
II and rename this segue to handle view
segue remember we had named that segue
in the sign of view controller here
handle view segue now before we try this
out we need to do one more thing we need
to go into a firebase console go into
our earth and set up signer sign in
method email password and you do enable
this click Save now let's try and run
this before we try this out they have to
just make slight change if you notice
that self-taught error message is equal
to invalid email address that has to be
changed to self dot error message dot
text is equal to invalid email address
and similarly below that self dot error
message dot X is equal to error dot
localized description I forgot to add
the dot text there we have our welcome
screen click on sign up put in the email
as you can see the sign up button is not
enabled right now and click on sign up
then you start successfully and it takes
us to a handle view controller taking
back does not work right now we'll set
that up so coming back here to the
handle view controller let's first set
up the outlets for the text fields
call his full name let's call this
handle and let's control drag from the
start wheezing button and call this
start tweaking again here we'll create a
UI label which will display any error
messages that we get
firstly the viewdidload method will
install a user into a variable let's
create a variable called user of type
any object install the user here
and import fire basalt for it to work
before we go any further with the handle
viewcontroller let me just show you that
the user that we are just signed in has
been saved into our database so going
into a firebase console into our
database now we see a user profile with
the users ID and the users email stored
there
and if you go into auth we see the user
has been logged in they're coming back
let's control drag from the start
weeding button and create an action
let's call it Ted tap start meeting
change this to an action and connect it
first thing we need to do is to ensure
that the Twitter handle selected by the
user is not already in use so let's do
that
for that let's first import firebase
database let's create a reference to our
database let's call it the root ref is
equal to fi our database dot database
dot reference and what we'll do is if
you if you look at our database right
now we have a user's profile the user
will have a particular handle stored
under its UID but we'll store all the
handles under a different node called
handles so we'll check in that handles
node if that particular Twitter handle
is in use or not so that's how we're
going to do that we create a reference
to our handles node in which wheel check
is a particular Twitter handle exists or
not so let's say let handle equal to
shaft or root R f dot child handles dot
child self door
handle dot txt and will observe single
event of type value and in the with
block will put in the return snapshot of
type F IR data snapshot in now if check
if the snapshot it does not exist that
is the handle does not exist update the
handle in the user profiles and in the
handles node so self-taught route ref
dot child use on dogs for profiles for
child self dot user dot UID under that
will put it under a node called handle
and will set the value self not handle
dot text and we make sure that it's a
lowercase string let's update the name
of the user or child under user profile
again your child self node user dot UID
dot set value correction dot child name
dot set value
full name dot text and self
we'll also update the handle in the
handle node which is self dot root ref
dot child handles dot child self dot
handle dot text make sure it's a
lowercase string and for that handle
will set the user's UID so that we can
reference the news ID from the handle
I'll show you how it looks in the
database and let's just correct this
error
and once this is done we'll send the
user to the home screen which we have to
set up so we'll do that and if the
snapshot already exists which will come
in the else block will print a message
dot text equal to handle already in use
now let's run this and see click on sign
up at sign up a new user
registered successfully let's put in the
name and let's put in the handle there
you see we didn't get any error let's
check in our database there you see we
have a handles node that's come up and
under user profiles we have email the
handle of the user and the name under
handles we have the handle followed by
the UID so we can search for the
particular handle under the handles node
and then find the UID which is linked to
it now we've created the signup
controller let's go ahead and create the
login view controller if you remember we
had created the storyboard but we
haven't set everything up so let's go to
this one what if the user has signed up
once and now wants to login we'll come
into the login view controller we're
going to start by importing firebase
odds and import firebase database create
the outlets for the email and password
text fields
as create a reference to our database
this is going to be quite similar to a
sign up view controller but I'll still
help you set this up let's create an
action with a cancel button
let's get rid of this and let's also
create action with our login button
so first in the did tap cancel button we
have to just do one thing which is
dismiss view controller animated equal
to true and completion callback nil
coming to the dip tap login let's start
by signing the user in sign in with
email self dot email dot txt and
password will be self dot password dot
text and completion will be user and
error inside this in check if error
equal equal to nil now if you remember
that the user had the first user we
created we had only signed up the user
but we not set up the handle for the
user so this can be done by other users
as well they can sign up and not set up
the handle and next time they try and
log in they should be sent to that
handle screen first and then to their
home screen so that's what we're gonna
do here so that's what we're gonna do
now will you self toward root ref not
child user underscore profiles dot child
user dot u ID dot child go to the handle
node and observe single event of type
value its snapshot FR data snapshot
then I have to fix this so he force
unwrap that now in a check if snapshot
does not exist user does not have a
handle send the user to the handle you
so we do scepter perform segue with
identifier and handle view segue and
send there will be nil you remember we
haven't connected the login view
controller to the hand view segue to the
hand view controller yet so let's
control drag resent model II select the
segue and let's name that handle view
segue else the handle exists send the
user to the home view form view segue
and this would be nil we select create
the home view we just create a blank
template like for now to show that and
if error is not near then as always self
taught error message is equal to error
dot localized description and let's just
create a UI label here
other error messages also you can just
stretch this out to the full length I
haven't done that I will make sure that
it's contained in this and does not
overflow create an outlet called error
message and that error should go and
there should be error message dot txt so
let us create the home view now view
controller control drag from this
present' modely control drag from that
present modely let's call this home view
segue and from the signup view
controller as well home views segue also
i think ID named the segue incorrectly
here let us correct that come with the
login view controller and this should be
with the capital h now we're almost done
for this first video just a few things
come to the hand view controller we
haven't set up the functionality of this
back button over here so let's create
that dip tab back action connected
dismiss view controller true and
completion will be nil also send the
user to the home screen after the user
successfully set up his handle self dot
perform segue with identifier send it to
the home view segue sender nil these two
things are done let's come to the home
view controller that is setup this
roll over this and just add a back
button so that we can test it out call
this home view controller create let's
just go to a button go back to main
storyboard drag a button here to the
center select the home view let's set up
the controller and they sent me a line
this button there's his name it back for
now
control drive from here and add dick tap
back make it an action and connect it
and let's just dismiss view controller
true and completion nil and I think
we're good to go
let's test this out let's start by
looking at a firebase database we have
two users one already has a handle set
up the other does not so let's see let's
go to login and try and log in the user
that does not have a Twitter handle it
should take us to the handle view there
you see we've come to the handle view
let's put in the user's name and let's
put in the handle it should take us to
the home view there it is you can come
back it should be logout and not back
let's go to the signup view let's create
a new user tests and Unicom pass let's
let's put in a shorter password it
should give us an error the password
must be 6 characters long or more let's
put an invalid email address invalid
email address if you remember this is we
caught this from our code 1 7 9 and 9 so
let's put in yes
than gmail.com or let's try and put in a
email address that we already exists
email address is already in use by
another account so now let's create a
new user it should take us to the handle
view yes it did test and test then there
it is it's working perfectly and let's
go here and see if these handles have
been updated there you have it you have
not boughten you have test and also
there comes other so in the next part
we'll continue from here and build our
application this first part when you're
building the base it's taken some time
but I wanted to make it exactly like you
wanted in the real application I hope
you guys liked it thanks for watching</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>