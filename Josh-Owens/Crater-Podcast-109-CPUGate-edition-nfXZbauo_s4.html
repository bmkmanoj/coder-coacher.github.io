<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Crater Podcast #109 - CPUGate edition | Coder Coacher - Coaching Coders</title><meta content="Crater Podcast #109 - CPUGate edition - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Josh-Owens/">Josh Owens</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Crater Podcast #109 - CPUGate edition</b></h2><h5 class="post__date">2016-08-10</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/nfXZbauo_s4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">this episode is for friday july 29 2016
welcome crater fans i'm your host Josh
along with my co-host ibi her hey hobby
how's it going pretty good man some
crazy stuff happened to me over the
weekend came back out to the desert so I
have my new change of scenery I point
out my girlfriend got a call on friday
that she got into Medical School so we
had to step up and she left today for
school on Wednesday so is that short of
a time period that everything had to get
ready and stuff so so it's a little mini
vacation but it's not a fun day okay so
that's it thanks yeah hi I spent some
time playing with yes lint do you guys
use I guess lint yeah very very heavily
yeah I feel I feel a blog post coming or
actually probably it'll be a code khana
I think yeah I think I think if you're
not using his limp right now you should
it's just such a good way to keep
everything in style yeah agreed and like
the impetus for me to start playing
around with it was like I'm on a project
that is using yes lint but it wasn't
specified everywhere in the package.json
and so like it turns out that you can
have a globally installed es lint or
locally in Saudi eslint and like that
wasn't super awesome and so I was trying
to rectify all that and then it turns
out like it's just kind of slow so when
I was saving a file in vim yeah it would
take a minute to pop and so I ended up
finding this package called es lint
underscore d and it basically runs and
yes later today and it will determine
whether you have a local version
installed or not and then use the global
if it needs to so that's kind of nice
because then I can like / / project you
can have that you know in your
package.json dev dependencies and it'll
pick it up and everything will be the
start and run correctly and then after
the first time you save it
on the yes land after that it's like
super fast yeah I didn't even know about
that we we ran into those problems you
ran into those problems a lot when we
upgraded he has lent versions and some
people are running Isla and locally by
biting themselves you know typing Uslan
God or whatever they were they were
getting a different you know different
error messages based on the version
because you know syntax changes quite a
bit yeah so yeah it would be nice to
have a son like yeah yeah totally and
it's it's easy to use like so if use
Adam yes lindys not a big deal for most
people I think they've already got a
speedy set up for them this is
definitely helpful and then on top of
that like you know when you want to use
the Airbnb standard or something like
that but elite it's just it's like you
gotta install like like4like I think
there's like eight dependencies or
something that you have to get to go
along with it and like to use that as a
globally done thing you have to like
install all those globally as well which
is just it's just terrible like I'd
rather just specify that stuff in the
package.json and not worry about mucking
up all this global stuff yeah it gets
and yeah it's a little hairier when
you're trying to do like complicated es
learn stuff like we just implemented es
lint of import styling so making sure
that our imports at the top of the file
and there's space between them and they
resolve the correct place isn't stuff
like that alright we also do es lint for
flow type so float float type checker to
make sure all the syntax is right before
your annotations and stuff overall it's
great I remember before Maria slim I
would have to like go but some people
during pull request to add commas and do
all that stuff and now that the tooling
just does it for you so that's good
because each command people will be a
cooling in a talkative yeah
awesome right so let's get on with the
show sorry I'm being one of a slack chat
messages so this week we are talking
about react 15.3 gonna talk about cpu
gate okay media one point board coming
up just 14 got launched and someone
drops the CSS and the javascript and
that's a problem it's good yeah alright
so yeah first up like we were just
talking about this before the show to
like I actually don't I haven't used
pure component yet but that's the big
thing for react 15.3 came out um
actually on the twenty-ninth and they've
replaced they've added a new class react
out pure component that replaces the the
react at on pure render mixin Lucas I
because I came in a time where you know
mix-ins were kind of dying off um I
never really liked I've I haven't gotten
to the point where I've had to create a
pure component you're saying like you
guys don't even use pure components
right no yeah but it's it's the idea
that um it should like using a pure
component means that the it'll only
rerender when the props change yeah and
state I think for the most part like I
tend I trend towards maybe a stateless
functional component for that kind of
stuff myself um but I think the pure
component can take you a little bit
further than that yes yeah yeah sir
there's like so many i guess like with
what pure render mixin did and what
pyramid does it put me the implements
like should component update under the
hood and it makes sure justice before
you instead of you haven't do it all the
time um the only thing though is that's
all let's make you Jordan on your
application if you have a huge component
tree and you're doing component
update at the top level of the tree you
couldn't get yourself into a lot of
weird issues where they don't read like
the components in that tree don't update
because the top level component has not
it's like you know has not allowed for
updating so my recommendation is one you
only need it when we need it you don't
need to do it every single time um if
you think of your app and stateless
functional components you can make
smaller component trees and they can
maybe do like a pure render like
higher-order component or something if
you want you know but you use it when
you need it that's what we do we haven't
run into any problems I remember the
first time I actually use should
component update in pure render mix in
was I had a I had to do an auto stage
component where the top level component
is constantly auto saving calling some
method and after a call to the method it
changes the state to say like I'm not
going to call this method until the user
interacts with the screen again but that
was doing was it was causing a huge
amount of updates down downstream
because it's like the top level
container and I have a whole page inside
of it so we had to do some
component update trickery there to make
sure that it only changed on the prop
change balance teaching so that was so
you only need it when you need it yeah
yeah there's some other interesting
stuff in here too they've added some new
warnings and improve some warning so it
looks like they're kind of gearing up
for version 16 to come out at some point
and likely those warnings are in there
that kind of hopefully get you to fix
things before it and you know I didn't
realize like I was looking through this
change log um they have the reactor fat
on they fixed an issue with warnings but
I never actually used the reactor add-on
and never looked at it and this is
actually pretty awesome looking so yeah
like I would recommend reading change
laws you can learn things for sure um
but this thing's awesome because you can
install it and call perf start and proof
stop and then like look at the
measurements in there and then we're not
talking like like flame graph sir
singing useful for certain things but
this is like this is showing you how
many instances of things and like how
long it took to render an icon thing so
yes if you want to get into the
nitty-gritty of your vendor performance
and like that's the last the best place
to do it yeah yeah I would you know I
wish something like this was around when
we're dealing with the problems with
crater lake it's there's still like
major rendering problems which is
something like Sasha and I are going to
be working on this week is getting the
react version of a theme up for crater
so hopefully but it oh yeah the one yeah
the one thing I'll say about react in
general is they're really good about the
warnings like everybody released there's
always some new warning because they are
themselves in the process of switching
their code base over into es6 and the
agent code mods to actually do sweeping
changes and they make mistakes too and
it's you know it's funny that like
they're making drastic changes yet
they're keeping things somewhat
backwards compatible in a sense you know
and there's everything just a warning
you know like you're doing something
wrong warning you do something
deprecated warning yeah yeah well then I
mean that's the way it should be right
like coming from well glee this was this
was a thing that just happened right
like you would install a new version and
like it warned you and you the warning
would let you know like in the next
major release this feature is going to
be gone it's deprecated right like don't
use it change it use the new syntax that
kind of thing and like that that's the
one thing I feel like for me a meteor
land has been missing and I would agree
with you like react has done an amazing
job at that kind of thing so yeah them
yep oh yeah okay you know it this is you
know now we're getting in a meteor um
like they they do they strive really
really hard to make sure they have
backwards compatibility and they don't
really like deprecated a whole lot of
have you noticed that yeah yeah his own
so tell us about 1.4 hobby okay so last
week meteor 1.4 was released um and we
call it CBP you gay we'll get into that
in a second but 1.4 is actually pretty
interesting release for people who have
been using a meteor for a while for the
longest time meteor was on using like
note version 0 point n dot whatever and
that is really old really old so some
NPM packages don't even support that
version anymore if you're doing some
higher computational stuff with those
mpm modules they won't even support 0 10
and I'm probably the minimum is like
maybe note 4 or even notes 64 some
packages so media upgraded the node
version 2 node 4.47 which is a
long-running stable version I was kind
of hoping for node 6 just so you don't
keep it on the edge but it's all cool
node 4 is great and then they also
updated of the manga driver for three
point two point six and that's also good
because are actually our manga driver in
meteor today is actually super outdated
oh really it's really own and Link
shipped the shift version of mongo that
comes when you install meteor like the
binary version because they use their
own yet install when you run it on your
dev machine was 2.6 and now they ship
with 3.2 and by default there creating
on your local machine yr tiger databases
now yeah rather than the old one so and
if you want to take advantage of that
you can do a meteor reset it'll clear
out your DB and Senate per yr tiger yeah
um and then with wire tiger like most of
the database providers provide that wire
tigard support for 3.2 I believe you
composed us for 3.2 but not the point Oh
made Mongo labs the sub do so i am sure
anyone hosting their database right now
will be fine you should expect a
performance
boost with you know Mongo 32 there's a
lot of cool things in manga 32 like
document validation and that's like you
know it gets her a simple schema
essentially for using my on go so that's
cool and the cool thing about the the
mondo upgraded which is a huge effort
from the open source contributor it was
like you just between jobs and you just
decided to work on this so I think his
name is ABS fab does his name on the
rico de souza nascimento he's from
Brazil actually and it's cool so he did
this whole whole effort and that's great
um another another another really core
part of this release was unpinning the
package version so i can meteor 1.3 in
before flight blaze for instance would
be actio a pin version of like 2.1 or
something and now that they unpinned
these versions they can start releasing
new versions of blaze or you know
accounts or whatever without having to
push a meteor 1.41 a woman or whatever
like that like at one point three um
there's a lot of problems with like
compiling compiling node modules that
really actual C++ modules and for us
they pushed a fixed felt like one point
three point two point five dash work pop
they did that and then they got into
like the one point three point two five
main released and then what what all
those those bash releases had to be done
just so you know just so they could a
fixie small small issues and maybe to
the X in the script package or you know
the the promised package see a meteor
promise of it whatever it's great to
know that now they can start moving like
incremental departs independently
without having to affect you pull the
lease you know so that's that's cool
well let's get into why it's called CPU
gate unfortunately
complain about this many times and
they're not doing I can fix it I think
that your spy ting me I get with the cpu
when you're running a meteor 1.4 your
cpu's five to one hundred percent on
your computer like literally like it is
it is the reload times are even slow or
four big apps on your computer is
pushing like your computer is about to
take off essentially the fan is running
like a beast and it's about to take off
the outer space that's how much force
it's trying to use um it's actually like
it's causing a bunch of CPU spikes on
actual production servers I'm not sure
the story about that that's what I was
hearing from other people's four stories
that you know one like they can't even
get their their app running via you know
something's changed about like how they
load in the lib folder which I need to
verify if that's true or not there's a
gentleman who you know before a meteor
one pointing to you could just dump in
like JavaScript files since the lid I
did like been near a Jake something if
you wanted to put something in there and
that wasn't working for someone so what
did you hear about cpu gate yeah so i
guess the the thing i saw was that
meteor 1.4 like the tool downloaded into
the background and it would update an
auto symlink and so you would run the
mediator 1.4 tooling even though you're
using meteor 1.3 and apparently had
something to do with the way like it
would run in node for land but then try
to springboard into its own like 0 10
version if you're running an older
version and so something would happen
before that springboard would finish and
it would cause the cpu to spike up and
just stay there so they have fixed it um
yeah one mo 1 point 0 point 1
which I mean it's to be expected this
this crap always happens when a new
release comes out this is not specific
to meteor this is not specific an open
source thing yeah release like honestly
I'm surprised we haven't seen 15-point
3.1 like maybe their release process has
just been that good with reality I don't
know um but it's just to be expected in
my opinion and it looks like there were
some people hard at work on it and
trying to figure it out and the
community rallied around pretty well and
they were able to kind of figure that
out but you know and maybe this is a
slight annoyance that people didn't
realize was happening is like it's part
of updating in the background um like
I'm fine if the tool tells me hey
there's a new version available but I
don't necessarily like that it's auto
downloading and updating the tool
without my knowledge so yeah on our end
when we have these build tool problems
um we were just looking forward to the
build tool upgrading without us having
to upgrade our media version is for us
that those are huge cycle of review and
work that goes into upgrading meteor
because we have to pretty much test a
bunch of stuff so like when we got the
new build school that means our because
we were compiling like Google Cloud the
package were compiling on every change
just because there's a bug in the
compilation so it was even slower which
is probably why I was cranky i put a
couple weeks ago so every time i was
compiling google app so when one point
three point five tool came out we have
to do that anymore it was great the
lyrics at one point three point two
point one I get it's getting annoying
saying these numbers but uh and then now
with 1.4 where we were hitting those CPU
cheap Ewing increases and need to
diagnose that but I think I other day
this this release is good for the core
of meteor but nothing has changed about
product development experience and
that's mainly like the bills will you
know just the bitch'll everything else
is
I almost worried at this point like I
think I'm pretty sure I've seen problems
with deploying with meteor up with 1.4
yeah it started in reading and it looks
like this is bringing the question like
you know meteor up hasn't been doesn't
look like it's being actively developed
at this point and we're in this state
where you've got you've got them up
you've got my back's and you've got like
muck to which looks interesting but it's
not fully baked yet either so like begs
the question of like is Khedira gonna
keep doing this or are they not like
we're hearing now that maybe they're
using galaxy so why would they support
this so you know it may may take
community effort to get some of this
stuff fixed and working yeah which is
interesting but you know I'll say like
as far as like I I anticipated this
being a terrible upgrade um ein started
on my client project and it just worked
like I didn't you know there was there
was nothing there that I had to do which
was maybe a little surprising to me
right because the the 1.3 upgrade while
you install and it just worked switching
to the import syntax and that kind of
stuff was a little painful um but now
Lake 1.4 required no effort on my part
for this this client app so far and I'm
almost done with space dojo com like
migrating to react and mediator I was
working on it this weekend and once I
get it done and deployed I'm gonna play
with 1.4 as well and see how that goes
yeah my hope is that's simple easy too
so I don't know I'm you know the biggest
thing for me is I'm excited for the
query planer um you know with with Mongo
2.6 on your local dev machine you didn't
get the query planner but now that we we
ship with 3.2 as of manga 3 they added
the query planner and so when you do
like and explain on one of your queries
you give that the query planar output
which is pretty awesome like it's big
and complex but it gives you
kind of information about how your
queries being put together and executed
in what index is its using and that kind
of stuff so I'm super excited about that
yeah yeah Oh wanting to note though so
with 1.5 on the on the horizon that's
going to be dedicated to Apollo and make
that integration as smooth as possible
so yeah that's what's next for we gave
you 15 yeah I'm I'm excited to see what
happens and I hope we don't get like the
biggest question to me is what does
authentication look like in one point
you know and with with Apollo and I hope
it's not some lame answer like just run
Mongo separately outside of Apollo and
everything will be fine yeah cuz that
fan would be terrible so I hope they do
something a little better than that and
I know they've got been on it and he's a
smart guy yeah he'll get it done
hopefully he does something good there
um yeah so just 14 I found this
interesting um they added react tree
snapshot testing and so I hadn't
actually like I've heard of snapshot
testing would not quite in this way like
I've heard of taking actual screenshot
and comparing and dipping the two but
this this actually will take a react
component and you can take a snapshot of
it using this react test renderer and
then you can use just to kind of compare
them and it will basically spit out a
snapshot of file this looks really
really interesting yeah you know their
example is like just creating a link
that links to facebook and it's just got
this snapshot file that shows an actual
link with a class named href on map
control on mouse leave and some text and
like they can then do a comparison of
that way
you know the next time they run the test
and they change the link to point to
messenger and change the word to
messenger and like it fails the test and
shows you the diff and that's kind of
interesting because I think you can you
can basically run your tests and say
this is what I expect things to look
like right I'm at a known good point and
then next time you run the test if
someone borked that and you feel that
that's an error like it'll throw an
error in the test and someone will take
a look at it and hopefully trying to
figure out like why there's a difference
here I'm we're investing more in Jets ha
well they're investing more in jest for
a while people who didn't like just
because it was super slow that's because
i use jasmine I'm like it's just really
slow for their test run I wonder how
fast this snapshot cats run is if it's
super slow that's a buzz kill yeah
everyone likes enzyme but I like Jess
just because it's like a homegrown tool
that will always be supported um and has
the probably the most product know how
because of the bed Alfred is working on
Jeff's so well yeah and that's the
interesting thing right like we couldn't
have had this prior to react 15.3 if you
look at change log notes there they
added a new react test render which is
what this is this is all completely
based on is well and it's rendering out
this output now so yeah bet you they did
this because enzyme was getting a lot of
like heat you know like picking up pace
that jess was just needed some
competitive advantage like jess is
pretty cool i really liked it when i
first used it i like enzyme to there but
was accomplishing the same thing in
different ways but snapshot testing is
amazing because people have an
assumption of what they're there Dom
looks like even like outside of the
components right and you can make simple
mistakes really easily that that can now
be actual tested not just code is like
actual elements and you know what they
are the dip or the actual so that's cool
that's really good yeah multi-ball I
could see this being really interesting
for lake especially with greater lay
pulling in versions of telescope and
like wanting to make sure that certain
elements down the page for my crater
theme or something like that you know
like that could be here today thank you
fast iteration speed I'm kind of curious
we should play around that and see if
it's slow like you think tell us about
CSS and JavaScript and wines terrible so
like CSS and JavaScript has blown up to
be like the new tabs were spaces debate
got people on one side that are all
about CSS and they are again CSS and
JavaScript completely and you have the
other side and move hardcore CSS and
JavaScript and says that you can do
everything in it then I'm in like this
middle camp where you can you try to use
CSS and J's much can and the things that
you can't do in that you rely on CSS but
there are really two camps just going at
each other if you look on Twitter you
look look on anything that can't see
dodge post or Maxie reposts about this
or even shaked Watson these are all
react people but you'll see that there's
huge tweet threads of flame wars on why
you should not use CSS JavaScript or why
you should or why CSS sucks and so this
post is just flowing through the
frustration this guy named Jimmy had
about you know this is see a session jst
problem and he was trying to be decently
very simple like um you know making up a
button and making button boots and full
bars and all that stuff just like a
bootstrap and in CS njs there's no such
thing as descendant selectors so you
it's really hard to make you know like
tree like CSS structure and that's
because CSS and javascript is actually
component-based it's similar to BEM but
you should be making components / style
and his argument is there are times
where you need to have some type of
parent selector to make styles
happened on components and stuff like
that I totally get that and you should
just use CSS for that you know like I'll
get it but doesn't mean you have to just
cuz you're using CSS and JavaScript as
mean you have to use it all um there are
camps that say that you can so my
recommendation is around kahan from like
CSS and javascript is going to be the
future of web development because CSS is
not maintainable right the only person
who can maintain a CSS code base is one
person the minute you add another the
person that are another person then any
convention you have goes out the door
you can try to have linters you can try
to have CSS lanta and then the minute
you had a precompiler in there sort of
like lesser sass and the style goes out
the door again you know like so and then
everyone has different opinions on less
and sass like literally they it's
different different like document
structure on how you do this class their
name their people who say you can only
use IDs which they're crazy you only use
class names no no actual selectors on
elements such a huge appendix are very
opinionated a very opinionated landscape
so with CSS and JavaScript it doesn't
really matter it's just based on the
component itself it's contained it's
self-contained it's maintainable because
it's JavaScript you can extend an import
and play around with it you can actually
run functions on that you know imagine
taking a style and based on the status
of some record you change the style into
something else right how do you do that
how do you do that in CSS today where
you can't it's a dynamic of there's a
diamond that doesn't dynamic computation
based on the server in CSS by itself
right on the flip side how do you do
sudo selectors well some libraries have
implemented that you know how do you do
hovers how do you do media queries
easily so there's trade-offs on both
sides and this guy was just experiencing
his problem I think my recommendations
use the library called aphrodite it
doesn't make any style that it
doesn't make like inline style that's
not inline styles or anything it just it
just has a function that takes your
style object and appends it to the style
tag head which is really cool and it's
really flexible and you can actually
extend it very well so Aphrodite it's
made by the people at Khan Academy and
they just a great product I would use it
in a project that i have little yeah
nice you don't do a lot of styling so i
don't know if i have a lot i try to
avoid that when i can yeah i mean we're
good reasons you know like I hate CSS I
going it it I just have always had to do
it you know and honestly like this is
the biggest Pro mobile app argument I
usually see is like CSS is terrible and
like testing design across all the
different supported browsers it's tough
to get right and like even when you do
think you have it all right it turns out
there's a bug you fix it for one it
breaks another like that's usually the
argument you see in regards to like why
mobile is better yeah and so you know I
think I don't know I CSS modules are
interesting to me this this this smells
like we need a space dojo show I think
we should definitely get Ramsey on and
maybe maybe we can invite Jimmy on
someone yeah someone anti CSS Marshall
going Twitter right up huh come on
Twitter yeah you'll find the lid yeah
all right cool well I want to say thank
you for listening everyone that's the
end of today's show we won't have a show
I guess this this week technically here
is all be out of town on friday i'm
going to be in dallas so if your
listener and you hear this and you're in
dallas let me know we'll hang out
um and uh I don't know like I just I
appreciate everyone listening and like
we only grow like we don't do any
advertising really grow through people
sharing the show so if you watch it on
YouTube give it a thumbs up if you you
know see it on Twitter give us a retweet
give us a tweet if not you know like we
appreciate that kind of stuff and like
appreciate growing audience and having
new listeners so definitely super
awesome and helpful and big thanks to
digital ocean is the last show they're
sponsoring and um to modulus as well for
being sponsored super helpful check
those guys out digital ocean calm if you
use the code crater 10 they use that to
determine if our ads effective so if
you're going to sign up using coke
crater 10 I think you get a discount to
use it um and we don't have a discount
code for modulus but modulus Don I oh so
yep all right I guess I'll see you in
two weeks ahhh be me man have a great
time and I'll see everyone else later
yeah this video has been in space dojo
production you can click the learn more
button to find out more about us at
space dojo com or in click the subscribe
button to get notified about new videos
who put out each week thanks for
watching</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>