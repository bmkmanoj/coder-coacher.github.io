<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Meteor Club Q&amp;A - Mixmax | Coder Coacher - Coaching Coders</title><meta content="Meteor Club Q&amp;A - Mixmax - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Josh-Owens/">Josh Owens</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Meteor Club Q&amp;A - Mixmax</b></h2><h5 class="post__date">2015-05-07</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/xZY6C2Fzy0E" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">welcome meteor fans to the May edition
of the meteor club question and answer
this is a show where I invite guests on
and we take all kinds of live questions
about meteor and try to answer them as
best we can and my guest today is Brad
vocal from mixmax welcome to the show
bread hey so once you tell us a little
bit about mixmax and about shell too
sure yeah I'll give you a little
background here um so my name is Brad
goggle and I'm MCOCA founder and CTO of
mixmax so mixmax is a Chrome extension
that adds a ton of features to your
gmail features such as polls email
tracking way to set up meetings bunch of
things um what's interesting about
mixmax though is that it's way more than
a Chrome extension its architectural
actually an email client because it can
be used standalone and completely in the
program hey hi so uh once you tell us
about mixmax and I have the commercial
tooth sure okay so my name is Brad
Rowland on coke a founder and CTO mixmax
the chromatin hey Josh I think I you had
a connection problem can you hear me now
yeah okay I'm sorry about that um let me
pick up where I left off there yeah go
ahead so mixmax is a are contextually an
email client they can actually be used
as a standalone email app really we say
one half of an email client because we
do the composing half that's how we
implement all the interactive features
with an email and then the chrome
extension piece is just really our way
to shoehorn that client into your gmail
experience by placing an iframe inside a
gmail that is used in place for your
typical gmail compose window and we also
have an SDK so developers like you all
can build apps on top of email and the
nap is basically a widget inside of your
email that
can represent a workflow such as
scheduling a meeting pull something like
that nice um usage wise were a pretty
big app we have about eight thousand
downloads on the chrome store handle
battle 1,500 concurrent users people
that are using inside a gmail at the
same time a little bit about my
background before mixmax so I've been
doing web development for about seven
years now and my background before
that's actually an operating systems
when I graduated school I went to work
for apple on the OS 10 team that were
too early OS 10 releases and then
switched over on webos that Tom Palma
smart and web less was just fascinating
it was an entire operating system built
out of HTML CSS and JavaScript and
that's where I really learned web belt
man inside now then after that I joined
a company called inkling working on
ebook software where I met my two
co-founders sean barie breath and
ultimate a and we started mixmax about a
year ago awesome that's uh that's a
pretty awesome story there I don't think
I've ever met anyone that's worked on OS
10 so yeah all right uh so yeah I think
you you actually covered like I was
going to ask you about the like what
your user base looks like and you
covered that so that that's awesome so I
think you you guys actually like God you
talked to em DG and like the maybe in
like 10 for that release the the backlog
or the OP log backlog pressure switch
came out right yeah yeah go you want to
talk about that a little bit like what
what what happened there and like why
why they came out with that sure yes so
um sorta a blog post on which he should
check out a nice banks calm / blog um so
so I mentioned that mix Max's
architectural an email client so we have
to take over the to field an email which
means that we have
single your contacts so autocomplete
type down search works when sending an
email so in order to do that of course
we have a manga collection or withdraw
the contacts and our first approach our
first implementation was to just use a
meteor subscription and to sync all the
contacts as you typed and to create a
new publication with the search term so
we just sink in all the contacts um
biggest problem with that was that it
was a very noisy collection in Mongo
that was watched by meteor so what would
happen and it would be if someone new
signed up let's say they had 10,000
contacts and their Google contacts they
we would write ten thousand documents to
the manga collection which means that
meteor would sit there and spend for a
bow was about 30 seconds and it would
spin on all the servers that we deployed
on so it did not scale horizontally by
design right because every server has to
consume the same alcohol yeah so the the
quick fix we thought would be to just
stop using a publication just publish
once so we're not actually watching that
collection what happened there though
was that meteor was still consuming the
OP log just of course to find out that
it didn't care about any of the records
that were being added to the OP log and
that caused the CPU to spend 100 percent
for about like seven seconds or so but
just long enough to install the complete
system and while Gators out so the
eventual solution was to just move
contacts into their own database that
was not watched by meteor at all and to
just use Ajax on the front end to a
quarry contacts okay that's interesting
so yeah that was that was maybe the the
first watch her question here was you
know you you moved the contacts to
another Mongo database but then how did
you get them back into the client that
piece seem to be missing from the
article so um you said the Ajax so I
think I mean you wrote this article you
guys just published another article
about moving the backbone right we did
yeah yeah so that was to solve a
different set of problems yeah but is
that also liked was that part of you
know you mentioned using Ajax to get the
data over there are you using back
button then to pull that over uh in our
first implementation we were not we're
just jquery ajax call directly from
meteor the hardest part about that
implementation was login so we had to
pass the login took him over to this new
service that was fun up on a completely
different subdomains with a completely
different database and that was the
first step of us breaking down are
monolithic meteor app into microservices
architecture with contacts being the
first micro service yeah nice and so I
mean like how long did that take you do
you think well it's just a couple days
of work I think to figure it out to
diagnose the problem and spin up the
micro service I see okay and like your
your background before this like what
what kind of language or framework were
using before so before was Django
actually okay in it and do you feel like
maybe it was easier to break apart the
pieces the app like this with meteor or
do you think it was it was about the
same as it would have been a Django oh
it was um let's play the same male mat
for it I'd say because most of logic is
actually in the application way or not
aided by framework at all so I had to do
a lot of it as close to the metal as
possible just using a dollar sign Ajax
directly as I would and using any
middleware framework I would have to
write that soon front-end code and then
middleware wise I spun up a node service
just because that was quickest and I
could get the benefit of using Express
as opposed to trying to use iron-router
for restful endpoints which can be a
little bit difficult with authentication
all that yeah yeah all right that was
from David Sakura hope I said that right
and I should mention that in one dot 0
dot for meteor that issue was fixed so
here and we could tested
cpu spin was under a second yeah yeah
and so I mean it was a weird way to
solve it you know because they're there
just watching for your op log to get too
big and then once it gets too big that
just like flush it stopped caring about
it do a quick pull in diff and then get
back to like caring about the hot dog
yeah yeah I guess it was kind of ironic
because they went back to their original
solution the pre-op log yeah yeah which
I mean that's you know if you don't
enable a blog that's how everything
works anyway which in and of itself can
be kind of a cpu drain because you've
tried to your you're basically running
queries every 10 seconds to see if
anything's changed so all right ah the
next question is from Patrick aa-men
mencius Louis I don't know I probably
said that wrong he wants to know how to
make a site stable that has millions of
users but you don't have millions of
users right no I wish plague and answer
that question here from wow yeah yeah I
don't even think I could answer this
question um I don't know like I worked
on words with friends for two months but
I'm still not even sure at the point I
was there they were at a million users
or millions right he said plural so i
don't know i would i would invite this
guy to maybe talk to facebook about that
yeah yeah and yeah i think the key to
large scale is just being able to scale
horizontally right because even facebook
does that they can they made a lot of
early decisions to be able to silo all
their users like i set the time they're
doing it by school so they could just
scale horizontally outwards and take on
millions of users and keep data siloed
and and that's effectively what we would
do also i think as we start to scale up
we would just showered on the user
because our users are very independent
they carry their and data their own
contacts there an email drafts all that
so is that all do you keep all that in
the user collection then like its sub
documents or we do so we have three
databases right now all Mongo we have
our meteor
app database that stores all our users
and our email drafts because we have to
store those we don't store us once their
son though we have our contacts database
which only has one collection contacts
and then our third one is for email
tracking and it's an append only manga
collection so super performance and we
have a layer on top of that built in red
so we use Redis pub sub for Templeman
email tracking the real time component
of it when you send attract email you
see a clever notification nice alright
so we're getting a lot more questions
here oh this one's a good segue it's
from pablito do you think MongoDB is
ready to work in large-scale
applications how would you handle this
schema list approach when your whole
site structure changes and nested
documents don't make sense anymore ok so
it's kind of two questions in one I
think scaling wise I probably can't
answer that because in the world of
mongo we are a tiny tiny application I
mean there's companies out there that
easily have 20 billion documents in
manga so we'd probably have to ask them
about that um as far as a schema lists
or rather the lack of the relational
operations in database we are starting
to run up against that a bit and just
have to work around it with more
application code to perform sudo joins
um one area that we're running into that
is templates inside mixmax so you've
probably frequently send us an email out
several times um if you work on a team
sometimes you'll share the same email
that you send out especially if you're
on a sales like role um so we want to
make share templates and that runs up
against the limits of a schema list
database like Mongo because we want to
treat all that data in a relational
manner and quarried out in one shot yeah
yeah I would definitely agree with that
that's it's kind of odd right I think
meteor could make it better
you know if they did some some kind of
reactive joint or something put that out
there but I mean there's a number of
good packages do that as well yeah so um
yeah we'll just keep rolling with I'm
going to keep pulling out to mongodb
ones for now well since we're on the
topic uh this one's from David Sakura
again when you ran into the issue with
high rights on MongoDB did you try to
remove the pub sub that was looking at
the collection and use a non-live query
to grab the documents instead before
moving to separate database I think you
said you did try that right we did yes
though those are for solution and we
found that while it certainly did reduce
the CPU burn it took it down from like
eight seconds down to think just a few
on it was a meteor was still having to
eat up the oblong only of course to find
out that it wasn't interested in those
those are quarries and yeah help a
little bit but wasn't the solution yeah
yeah I mean I you know I think I think
the solution here is being able to tell
the upload the data you care about but
that's really not what the hot dogs
built for and Mongo quite well for that
yeah so that that would take a yeah a
deeper integration in a database yeah
probably not using manga um yeah so then
he had followings like how much of a
difference to making CPU which you kind
of mentioned there and then I'm curious
how well meteor handles high load on the
up log when it is discarding the changes
for collection versus when it is trying
to keep the merge box clients up to date
on that collection we got some answer
for that yeah all right um yeah so I'm
going to generalize this one someone
asked is rethink DB the next DB on
meteor first I'll just say I actually
think it might be just because like
Slava took a hack week and got it
halfway there so I think we might see
something come out there from them maybe
not official but definitely from
developer there but have you guys looked
at any other databases or maybe thought
about moving to some other kind of
architecture besides meteor or not
meteor but Mongo oh we have not yet
that's probably our next area of
exploration especially since we might
have to introduce a relational database
for just a model or data a bit better um
but yeah I mean where my first take on
is to just use postgres but I think we
can do a little bit more investigation
with all the new options out there yeah
yeah yeah I think rethink DB certainly
looks interesting it looks like I mean
what you would have wanted III think had
it been out like it probably would have
just been plugged in as the first
database that meteor supported and I you
know I like Monaco's got a really bad
rap for some reason um I had you know I
guess it just had early problems and
maybe rethink DB doesn't have that
baggage because it hasn't gotten there
yet yeah yeah I think kind of the holy
grail for databases and meteor is being
able to have a better off load so you
can have like home as an internal
subscription so you can scale
horizontally that way right yeah meteor
instance can subscribe within the
database to data by the cares about
right which is I mean that's the idea
behind rethink is that you can actually
like it does pups up itself so okay you
know pretty sure um oh this guy oh we
get a number of questions from this guy
now uh Steven hocus no I'm just kidding
it's sniffing whole house uh so let's
see what does your stack look like do
you use meteor cluster and wow this is
like a multi-part do you have engine X
or H a proxy in front of the app servers
to use cloudflare or he said other
services but i'll say CBN's or something
like that I'm sure yes so we were
actually uh pretty plain stack so we
have we're hosted on modulus which I
recommend
a great platform as a service um and so
we we use what they used I guess they
have a custom load balancer so for all
that and then we're we just use their
regular modulus employee command for a
meteor app and then we all were also
hosting our bare bones node and Express
services on them but it's all pretty
straightforward all the balance to them
and then as far as CDN we use it for our
static assets like our JavaScript and
CSS so I just have a build script that
that handles that and where where are
you putting those at just on like cloud
front or Claire cloud front yeah yeah I
really love to see like I don't I don't
know if I have the time to do it but I'd
love to see a package that just
automatically inserts the cloud front
URL and that would trigger it to like go
grab the origin like Jas and CSS and
then you don't have to worry about a
build script right like it would just be
on so yeah yeah I had to do a lot of
hacker to get get that to work yeah I
think it's possible now though with the
the state of the client-side kind of
command tooling that you can integrate
with meteor all right oh this is this is
a good one so how are you monitoring
your server health and application
performance on a daily basis and I'll
say like I was pretty impressed with
your second article where you talked
about switching the backbone and like
the amount of instrumentation you were
plugging in and putting on keen like I I
think you should definitely talk about
that too yeah yeah absolutely so um as
far as real-time monitoring we have
wheeze wed-mon for just pinging the
server to make sure the server is
healthy and responding within three
seconds we all our services expose a
health route so you can go to any of our
services / health and they'll return
string if everything's good so
internally though each service will
check to make sure that emails aren't
being delayed that tracking is working
proper
Lee so it'll wonder database Corey's not
that um we just use modulus
out-of-the-box metrics to watch seeking
performance we use Khedira course on our
meteor app and then we also have keen so
keen logging has been great for us
because I can do 90th percentile
performance timing for a bunch of
different flows in our app sending an
email clicking around all that I think
the most important and informative flow
that I've been instrumenting is just
page load time and it was just really
great html5 attribute that was
introduced few years ago window duh
performance not timing or rather a
JavaScript API on and with that you can
get a really great breakdown of your
site loading by loading segments so the
segment could be time first bite how
much time is spent server-side DNS
connection we're turning the base
station all page time before Don content
loaded on content load runtime and then
ultimately up until your window load
event and that's been valuable for us to
fix our performance issues on our front
yeah so i think i'm pretty sure New
Relic implements that and you can get
like all these kinds of stats from them
I would love to see khedira maybe
automate this this type of thing but i I
just I really loved the article because
you just you talked about using keen to
get all this information and and so do
you I mean you just make a call
somewhere in the back end that sends the
data to keene or how exactly are you
doing that oh it's all from and the code
is actually an article but what I've
done in the article is put a little
snippet in of how to just get your time
to first byte when loading your website
and all that's done me synchronous it
doesn't slow downloading and it can all
that timing can be gathered after the
beige is fully loaded because the
browser stores that and that JavaScript
variable yeah that makes sense I guess
uh you know I looked at this and I
missed the part
I saw you like using the timing object
but i guess the Keen you just set that
up in the client and just give it like a
key or something yeah yup so the key is
the first parameter and then keen has a
bunch of JavaScript libraries to make
creating dashboards real easy so we have
a full dashboard of all our timings
alright awesome stuff so like that one
is done so Jeff where said you mentioned
that users might get log down under
conditions of high load on the web
servers so he is the first oops okay why
is that so why users will get logged out
yeah when the load get I was that
happening so meteor for login keeps the
WebSocket connection right that's all
done over the website connection and
will sink the user state so you can
block someone on the server and log out
all the clients so we found that when
the cpu gets depend at a hundred percent
it would actually drop the WebSocket
connection altogether just wouldn't
respond and the client would just assume
that was logged out i'm sure so this is
similar to like why you need sticky
session support or something when you're
using modulus or Heroku or something
like that you want to make sure that
they're always connecting back to that
same web socket connection yeah because
neither won't think it's logging out if
it loses the connection yeah yeah that's
interesting i didn't realize i mean i
guess it makes sense when you hit a
hundred percent you really can't
maintain those connections anymore so
which one of those things you don't
think about i guess um well i'll ask
this one but i'm guessing the answer's
no william wang asked are you working
with any kind of financial transactions
in media if yes could you describe the
solution in MongoDB a meteor we aren't
we're just using stripe and their front
and library so yeah and that's I mean
that's just in your in your app right
like that when they come to mix maxx
they'll like choose a package or
something like that yeah yeah she got a
mixed nice calm / pricing it so it's all
done from them strike takes care of that
yeah yeah so I mean I would I would
definitely anyone that's looking to do
anything like that I would say look at
look at striped because they they'll
handle a lot of the PCI compliance for
you you just ship them a credit card
they give you a token back and then you
can like they'll handle charging every
month and that kind of thing it's great
all right um so Brad tape asked how much
memory will you assigning to your
compose io MongoDB instances at the time
he experienced the scaling issue did you
say you were using compose oh we were
yeah we probably didn't mention them but
we are using composed yeah okay so as
far as a memory for those um well it is
a question about the manga layer or
modulus I think it's about the Mongo
layer how much memory will you Santana I
don't can you adjust that I suppose
actually I I know you cannot modulus
they offer like 300 512 and a gig and
we're using 512 one on modulus but
compose haven't seen an option for that
yeah so I mean maybe a better question
is like how much data are you guys
storing with compose right now because I
know they charge like eighteen dollars
per gigabyte for the elastic solution
which gives you the kind of curious with
eight thousand users what that would
look like maybe we store a lot um we uh
yeah contacts are our biggest collection
you know tens of millions of Records
messages we actually don't store a lot
of user data by design so once you send
an email through next max we don't store
any trace of it no the body of the
message so we keep our data down but I
can say we're romas in the four figure
pricing tier let's compose goodness okay
yeah we might need to move that in the
house
yeah yeah definitely yeah so I I gotta
say like crater I think it's at like
well here I can just see we're like
2,300 users and we're at 256 megs on
disks so um you know our biggest
collection is still under a hundred
thousand though it's notifications
there's like thirty two thousand my
guess is like that could be flushed I
don't I don't need to know that I
notified you two years ago about a post
yeah but yeah i don't i don't know i
don't think data size is a huge problem
except for cost perhaps you know alright
so the next question is from chris
kuliah i don't know i probably I butcher
all these names I'm horrible what has
your experience with appcache bin do you
guys use app cache uh we don't actually
um haven't explored that much and I
assume by app cache that's html5 offline
storage no I think there's actually a
meteor package called app cache and that
I have not explored I was thinking it
was a application cache I'm pretty sure
it keeps it basically keeps uh maybe it
is the same yeah it keeps your meteor
application in the browser's application
cache so it tries to keep all the static
parts of your app in someone's cash
basically but I've I don't know like I I
feel like maybe this isn't a huge deal
like this is default browser behavior in
my opinion as long as you're setting
expires headers on things the browser
should hold onto those files for a while
anyway yeah and you still to download
and execute all the JavaScript so be
able to fetch things out of the back
cash and that alone is a lot of time
yeah all right so consider that one done
alright so David asked again
and you guys are in the envious position
of a growing in popularity very rapidly
I'd love to hear about any application
architecture lessons you've learned
meteor specific or otherwise as your
application grew in size popularity uh
you know um I wouldn't change much about
what we did and here's what we did we
chose the right framework at the time
which was meteor we grew our user base
up into the thousands on meteor which
was you know absolutely fine and all in
pursuit of finding product market fit
and that's what everyone should do for
the first couple thousand users and
meteors been I don't know where we'd be
without it really I just allowed us to
work credibly fast and work with our
designer quickly get features and
quickly learn quickly right because an
early stage startup about 75% of all the
code that you write and all the features
that you put in ultimately get thrown
out but you know it's a good thing
you're learning quickly and meteor is
just excellent for that um and a lot of
the the recent learnings that we've had
were all expected all just expected
growing pains of a startup that has to
focus on a different set of problems are
problems now are shifting from finding
product market fit and making a fusers
happy to scaling to getting that last
hundred milliseconds of load time in all
startups go through that so so I think
all the learnings were were not
necessarily unexpected and I certainly
have no regrets about our our
architecture choices nice good answer
here we go this is a good one from
William again uh do you try to have
separate collections all the time as
much as possible or do you lean towards
embedding data into the documents we
touch down a little bit a good question
um it's just so particular to how its
displayed in the UI and how it scored
out where possible we try to lazily
quarry information into the UI of course
and for that it's often easier just have
a separate collection
um but it all depends on I mean the
question you should ask yourself when
designing your data model is what will
the user look at first when loading your
site is it if they see for instance
comments for your blog article when they
load it immediately maybe those comments
should be part of the document for the
blog post so they can be queried out in
one shot yeah well and I mean there's
interesting things you can do now to
with template level subscriptions and
I've wrote an article where you know if
you just use the post ideas your key for
your comments you could put those down
in the bottom as a template level
subscription it doesn't have to be there
for the page to render you can just have
like loading comments and it'll happen
in the background you know in good time
no big deal there and so you know maybe
the other stuff like the you know you
can put a weight on on the post itself
because you you want that to be there
before the page renders maybe good stuff
all right uh so I think we talked a
little bit about this but um not so much
scaling so Lucas Seinfeld ask this what
are your thoughts on what meteor or the
meteor development group could or should
do to raise its popularity as an
enterprise solution I know that's there
one of their long-term goals and then on
build time scaling do you use all of
meteors built-in build processes or did
you have to switch to your own tools
which I think I'm not sure I mean like
just doing a meteor deploy is that maybe
what he's talking about I think so yeah
on the hero Lynch ilysm reverso on the
deploy side we just use modules as the
meteor eyes or command that which is its
automatic right you just push in and
there you go they just wraps it up in a
in a note app and will deploy on their
service and then I have a little bit of
extra code that will actually sit there
and watch the build to try to pick up
all the static assets as they're put on
this temporarily on and upload those to
see and um and then as far as enterprise
goes
it's it's hard to say because it with in
the world of enterprise right there's
just so many different requirements
depending on who the users are and how
these applications are built and how
many concurrent users are scaling all
that i might say for else in particular
i think more of an emphasis or maybe
flexibility on modularizing the front
end such that we can do server-side
rendering for some parts of our app
maybe not others um I'd say yeah it's
probably the most important for us but
it's a hard question to answer just
because of all the different needs out
there I think I would agree with you
though I mean um looking at like sashko
did an ama on crater the other day and
this was this was a big topic you know
like some people thought well mdg really
needs to get involved and have their own
router but I I think a lot of people are
really really interested in using
angular or react or something else on
the front end or even backbone right
like that that's where media actually
came from if you look back to like 04
they didn't even have I think spark and
you know blaze is there now and it's
okay but at the same time you know
they've got a couple guys working on the
front end stuff whereas I think you know
other teams like angular or react they
have a much bigger team that's carrying
specifically about that one component
and maybe maybe that's true of the whole
framework right like the the more you
can modularize and break off pieces and
change them out with other pieces you
need the better off I think you're going
to be four and in the long run I guess
yeah yeah and different adapters for
different databases because any large
enterprise will already have a database
with a ton of user data they will want
to put meeting on top of and they're not
going to migrate it all the Mongo so
yeah definitely good question all right
so off the top of your head what are
your favorite packages oh well faster
and has been great for us Khedira
obviously
uh there's little things like the the
time picker is that might be one years
Josh oh really oh yeah that's right we
did talk about that because I uh meeting
hero and then they like they've left
meteor so oh did they oh yeah yeah it's
funny um and then what else do we use um
gosh uh yeah HTTP methods is kind of a
nice one for building a few restful
routes we use that yeah yeah I'll jump
in here and say if you two like I think
Mongol someone said reactive Oracle in
the comments no that's terrible stop um
Mongol I think it's been pretty fun I
I've been enjoying that one it makes
that the development experience a little
better you know I don't have to like
always be opening my my console or
whatever published composites been i
guess my my go-to for doing those joins
i like the reactive joins and easily
publishing data to the client I still
have worries about the scalability of
that like you know cuz you're I think
you're doing a fine call and you're
crabbing I need to dig into the code but
I think they're like finding each object
and then finding each child object off
that object and I guess as those queries
are terribly inefficient but I could be
wrong but it's still a good package and
yeah what else I guess iron-router I
mean everyone used iron oh yeah of
course I rather I just think I was a
core package but yeah so maybe this is a
good segue because you you and I talked
a little bit about fast renderer over
email and you were having trouble with
faster under like there were some
problems because you were trying to do
server-side rendering to fix this this
problem that you eventually moved to
backbone for what was that problem do
you remember so there's an open bogging
fast runner right now that on the client
side i believe i chose the exception
server
existing document for ID or something
like that and that's been plaguing us
because it happens randomly and the
client freezes when that happens so
there's been a little bit activity on it
but no real solution but it was
definitely blocker for us yeah and so do
you feel like if maybe that problem
wasn't there you would have been able to
keep going with the mongo or with the
meteor front end or do you still feel
like after all your learnings like
backbone was probably the better choice
um I think Beck was a better choice
because the way we're using background
it wasn't back when per se was the fact
that we were implementing server-side
rendering first so we were rendering out
the entire document before even the
script tag in the Dom on and then
backbone was the right framework choice
for that because back when makes it
super easy to attach back wendys on
existing Dom structure which you can't
really do a meteorite because meteor
brings all its templates with it
client-side and puts them in JavaScript
yeah so yeah it's certainly even with a
fast runner fix it would have been too
slow for for our needs yeah and I should
point out that our genes are definitely
unique because mixmax is built inside a
gmail so so be people often forget which
parts are mixmax in which parts are
gmail so there's the expectation of
absolutely fast performance and instant
rendering so if we were building out a
real-time analytics dashboard or a
completely different website we wouldn't
have any of these very strict
performance requirements and we'd
definitely still be using fast render in
here yeah yeah that makes sense um so
wasn't a question per se but someone in
the comments said tests ? are you guys
writing any tests right now on any year
code oh yeah yeah we have a pretty good
you know test coverage both back in
employment I'm just using a Jasmine for
that okay so are you guys using like
velocity with jasmine for the the meteor
stuff we actually it's been on my to-do
list to get that running moves for tests
are actually
written in our non meteor code our
services that that need the test a
little bit more so we're just using no
Jasmine over there and then from it yeah
just jasmine nice all right um so
William asked another question when you
start a subscription do you start
publishing more data than you need or do
you try to load as little as possible
but at the cost of having to have more
code to lazy load more data later we
always err on the side of his little
data as possible and and lazy load as
much as we can yeah it's a performance
yeah there was a there was an
interesting discussion last night in the
media club slack chat room we were
talking about like pagination and you
know like is it a needed thing with
meteor like is this this may be an old
like sasha is getting ready to come out
with an article about the whole thing on
the discover meteor blog but you know is
this is this like an outdated idea that
we're trying to perpetuate forward just
because people are used to it so I don't
know like what are your takes do you
guys have to do any pagination for
anything or do you handle maybe loading
more data in a different way well we do
so we load email tracking information we
do use pagination though not in the UI
purely just as a API in the UI the way
it's implement is a little bit weird but
if you go into your gmail senvy can
actually see the tracking information
data from our meteor app that we
actually place on top of gmail so we
designed that API in a way that it
limits the amount of data that we quarry
to only the data that we know we can
display and that's just been kind of our
philosophy on on performance first yeah
all right um so what you've mentioned
that it's a Chrome extension that people
install and then you know can be used in
gmail like what what do people do when
they're on their phone or
or you know they want to they want to
have mixed max capabilities in a mobile
way do you guys have options for that we
don't today but it's certainly on our
road map one of the nice things about
mixmax though is that you as the senator
can send a mixed message from the
desktop that actually works in all email
clients so if you want to use mixed max
and scheduled meeting with someone you
can send to their email address they
don't need mechanisms time they can read
that email on their phone and schedule
the meeting so there's this component of
it that that just works from the web
itself that doesn't require any
insulation or Chrome extension nice yeah
so yeah I'm more a fan of mailbox myself
that's what I tend to use so neat uh
well in that case I don't I don't know
if this is necessarily relevant someone
asked about crosswalk on Android but if
you guys aren't building anything like
is saying you did build a mobile client
would you guys look at cordova or would
you try to go native or have you put any
thought into that we might yeah um we're
still thinking about UX for that and
particularly building for our user and
our user today mostly works from the
desktop think about like a salesperson
sending a email you know visually rich
email but much less done on the desktop
today so we have to give a lot of
thought into the u.s. first all right
another good question do you guys
usually upgrade like right away when
meteor comes out um or do you wait a
while and see how it settles out and or
like if there's a feature you need you
might move right away how do you guys do
you have a policy around that I guess we
have great immediately we trust meteor
ah nice as a bargaining see that so yeah
yeah I would agree i tend to upgrade
pretty fast i think the the one time
that i wasn't able to upgrade fast was
when 08 came out and they switched from
spark to blaze like
incredibly painful upgrade as a least as
a package writer oh yeah not awesome I
went through that with a nine I think
was the big change to devolve atmosphere
and yeah oh yeah that one was not
awesome either yeah yes I still miss
like the ability to to add the git repo
URL to meteorite and just pull in a
package that way and like you could pick
branches and stuff that was a great way
to to do testing on packages I guess you
were developing them but c'est la vie I
don't think we'll ever get the back all
right ah wow this might be at first
we're like we've gone through 18
questions and we're out of them so huh
that was a lot um what what do you think
has been your biggest challenge with
like creating mixmax and building and
that kind of thing do you think it's
it's like technical stuff or do you
think it's more like business stuff like
like you mentioned earlier product
market fit that kind of thing well it's
been business I think mostly um yeah I
mean with mixmax we use it's been a
journey even though it's been less than
a year you know since we started the
company it just feels like a lot longer
than that we move quickly as a team and
we started out with this vision of rich
interactive content in a communication
and actually started building a chat
client almost a lot like slack but
integrated elements of Google Docs and
you could send these visually rich
messages back and forth and and that
slowly kind of evolved into a Chrome
extension on top of Gmail as we found
out that we can do some really cool
things inside an email and and there's
no other tool like that there's just a
huge demand for you know eliminating
back and forth emails essentially what
our goal is and implementing workflow
in the form of interactive widgets
inside an email and just figuring out
that product market fit in that
investigation took most of our time and
the most of the technical decisions will
just fall out from gaining more users or
implementing more features but as I
mentioned before I certainly don't
regret our early choice to build on top
of meteor I think it's it got our
company bootstrapped extremely quickly
and everything that we're moving off
meteor today is really just out of pure
necessity of scaling some particular
part of our app or getting that last 100
milliseconds of performance out of the
front end that are at uniquely requires
yeah yeah I have to get like emails from
people and they're like well I'm
thinking about meteor but I'm worried
it's not gonna scale and my answer
always is like trust me if you if you're
building an app and users are gonna pay
you money chances are like scaling isn't
your problem marketing and product
market fit are gonna be your biggest
problems out of the gate and you know
you're gonna be able to eat like if
you're doing a good job someone's
probably gonna give you some money to
grow your business and then you can
solve the scaling problems at that point
so you know premature optimization is
late yes it's very true right nuts start
of advice you know build for your
customer don't prematurely optimize and
build things that don't scale right
Facebook was PHP and my sequel for
almost five years i think you know they
definitely built something that didn't
scale until they had to scale it when I
scale it so yeah focus on the business
problems first oh yeah i was gonna ask
this and and william just brought it up
again so um said you guys have some
tests in place are you guys doing
continuous integration and then maybe a
follow-on are you doing any kind of
continuous deployment at least a staging
or something oh we are yeah so we have a
staging environment right now that's
hooked up directly to our master branch
so whenever we merge with immediately
test and reason code ship for CI right
now continuous integration and that
that's been good and we have our unit
test sucked up so we we get a
email and thank you very definitely
recommend getting all that
infrastructure in place you know early
on so you can so people have an
incentive to write a lot of unit tests
hmm yeah right and without worrying
about breaking others totally agree um
so we kind of got a combo question here
I'm gonna get rid of the one because we
talked a little bit about testing in
general um so are you doing any kind of
like behavior driven testing or BDD type
stuff have you guys thought about that
especially like since there's Chrome
extensions involved like firing up a
browser and logging the gmail making
sure it shows up and that kind of thing
we are starting to explore that right
now my first take on it is to use
something like maybe like sauce labs
that abstracts a lot a lot of that away
so you can just write swinging scripts
and run on all their virtualized
environments and those a call that we
don't have that in place today but will
very soon nice yeah and I would say like
if anyone's thinking about that kind of
stuff too um there's a there's a new
product out there i don't i don't think
it's fully baked yet but i think it's
available to play with called Simeon I
think it's at Simeon io written by Sam
and the idea is that you know him and I
were actually talking a while ago about
testing and you know he was talking
about doing some kind of like you know
in browser version of cucumber that
people could write and I said you know
actually makes a lot of sense because I
think a lot of people have staging
servers and stuff what if you could just
point to the staging server and have
your test run there and so like he just
I don't like it just started spinning
wheels for him and he started writing
something so um you know that's that's
another option as well and I think the
goal for him is to be able to plug in
things like sauce labs and you know he's
going to have adapter so you can plug in
different kinds of browsers and get
responses and that kind of thing good
stuff
um yeah so max 7 jumped in the chat here
and he said he'd like to add in that
facebook had a few crisis moments with
scaling as did Twitter it's a good issue
to have but really challenging in the
face of the problems I would totally
agree I mean like you mentioned PHP and
my sequel or the old trusty standards
but there comes a point at which i think
you you you hit problems or those tools
just don't work anymore and I mean you
look at at Google a long time ago and
you look at Google now like they're
using completely different tools to get
to the the amount of scale that they're
at so yeah yeah and now Google's
interesting because if you look at kind
of the broad web development you know
spectrum of frameworks and trade-offs
between really high level frameworks to
allow you to develop quickly but might
be slow performance I'd and what Google
is doing Google's writing pretty much
straight C++ code not for their web
frame their middleware stuff yeah well
and they've got like all these like
pieces that are helping distribute it
across all kinds of servers so that they
can scale horizontally easily so yeah um
so William wanted to know are you guys
using any kind of UI framework right now
like bootstrap for CSS or something else
uh we aren't yeah I believe we all were
all custom CSS my co-founder is a
phenomenal designer and a front encoder
so he does a lot of that by hand we are
using SAS though for compiling CSS uh so
then max wanted to see if maybe you
could expand a little bit on how many
operations you were seeing when the hot
blog problem became unmanageable for you
guys um so off the top of my head I can
tell you that when we sync contacts
forum user signing up they have on
average I think 8,000
so it was about 8,000 rights generally
in a second those happen quickly beyond
that I apply have to follow up with you
on that and go back through and look at
some of the logs that we got it done
nice no that's that's still a good
answer though um on that note you know
how many how many servers are you guys
running can you talk about that sure
yeah so in modulus we have eat servos
that they called servos dedicated to our
meteor app and then all the other nude
services are just one or two service
nice okay and um do you find like are
you trying to keep them around a certain
like CPU usage level or memory usage
level is that why you're running eight
or we are yeah we're trying to optimize
for cpu we still have upload tailing on
of course on the masters collection
which will probably reach the limits of
so it won't really scale horizontally so
adding you know another 10 servers I
don't think we'll actually helps keep
you in this case but we generally we add
servers until we find the CPU goes down
and then we kind of found our point yeah
nice so what if that math holds true
I've been in khedira forever for crater
but I was doing something around 150
users peak that yeah that's still true
yeah looks like I'm doing about 163 on
one digitalocean server which is running
about 460 Meg's and the CPU seems to
stay steady around ten percent okay
reported by courier uh yeah by Kiera I
should yeah I should probably totally
look at digital ocean as well yeah
that's aw yeah we're probably round that
timber Sun or so yeah nice nice yeah so
I guess that makes sense I mean you
maybe maybe a little head of the curve
then with eight servos I think gun I'd
have to be somewhere around
10 to equal that but yeah that seems
about standard i think the the class
craft guys i want to say they said they
were on like five boxes but i think
they're using AWS so they they probably
have slightly bigger boxes yeah probably
much bigger I think of servers generally
pretty small think yeah modules alright
alright I think that's all the questions
we had maybe the the last question would
be you know have you guys landed funding
and are you guys hiring it all yes
absolutely so we did land funding I was
posted in that TechCrunch couple weeks
ago and we are absolutely hiring you can
go to mix banks calm / careers or mix
max calm / engineering just given my
engineering all our engineering posts so
I'm the mix max engineering team um but
please yeah send us an email there's an
email address on that page and just out
of curiosity is that uh oops on the
careers are you guys looking to hire
people like in San Francisco or our
remote people okay or like yes well
we're willing to do remote absolutely
nice okay yeah yeah I think you'll
probably get a lot of emails now
wonderful yeah awesome well let's do one
last check here looks like we don't have
any more questions so we'll call this
one done I want to say thanks for coming
on Brad just been a pleasure um thanks
for answering all these questions yeah
and thank you thanks for having me on
yeah definitely all right thanks for
tuning in guys we'll be back next month
i have no idea the guests will be or
when it'll be but we'll find something
interesting to talk about great all
right</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>