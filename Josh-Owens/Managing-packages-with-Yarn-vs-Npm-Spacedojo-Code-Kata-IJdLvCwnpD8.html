<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Managing packages with Yarn vs Npm - Spacedojo Code Kata | Coder Coacher - Coaching Coders</title><meta content="Managing packages with Yarn vs Npm - Spacedojo Code Kata - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Josh-Owens/">Josh Owens</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Managing packages with Yarn vs Npm - Spacedojo Code Kata</b></h2><h5 class="post__date">2017-01-29</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/IJdLvCwnpD8" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">welcome javascript fans to the space
dojo Kolkata
I'm Josh Owens and today we're gonna
talk about yarn let's get into it
yarn is a package manager for a note you
can install it simply just using brew
let's give that a try brew install and
so it will require a node to be
installed if you don't have that yet it
will install that for you if you do have
installed I'll just go ahead and store
on for you you can also install yarn in
other ways the installation will walk
you through that the installation
instructions but the reason you would
want to use yarn and where it differs a
little bit from NPM is that it's super
fast has a little more security to it
and it's a reliable package manager
right and so what do we mean let's talk
about the reliability first what do I
mean by its reliable it uses a lock file
and so you can do other options in the
NPM world you can use shrink wrap and
it's highly recommended to use shrink
wrap if you're gonna deploy with NPM to
production but by default that doesn't
really help you unless everyone's using
shrink wrap if you're sharing in a team
right and so I'm developer a someone
else is developer B I push code up and
they pull code down and let's say
somewhere in there a new version of left
pad comes out and I'm running on version
one they're running on version two
because there's no great way to kind of
determine what versions we should be
using and so the lock file is a super
simple way to kind of ensure that you
just you get a yarn dot lock file check
that in with your code when other people
get it if they're using yarn they'll
pull in same exact versions that's super
great for working across the team the
security aspects apparently NPM can run
code
it's installing the package and that's
kind of a security no no you really want
to make sure that the package is exactly
what you were expecting it to be from
NPM and then you can execute the code
later once you're ready to not during
installation the other thing that it
does is that it has caching setup very
similar to how this is one of the things
I loved about meteor was this package
system yarns the same way you have this
like folder set up under your user
account that's hidden and it basically
downloads the packages there and then it
copies them into your your node modules
folder so it's like this is a drop-in
replacement for NPM it caches everything
it does parallelizing the Downloads so
that if you have to download like 50
things it's gonna spin up a couple
threads to start downloading those
packages and you're gonna get everything
a lot faster so let's get into it
so I can make a folder here for the
space dojo show podcast site I want to
rebuild that in next j/s over a series
of code Coty's
this will just be step one we'll use
yarn so we go into space dojo show here
and then we can just say yarn in it just
like you would with NPM works the same
way we'll say it's version 1 the website
for space dojo show podcast using index
j j s files our entry my name in here
put a license on it and then it's gonna
save your package JSON file this is just
like how M p.m. works everything is the
same right and so now I know I want to
use next J s so we can do yarn add next
at and we can give it a version it's two
point zero point zero - beta 20 I think
is the current version that there
they've got out there for testing oops
not quite right there's a dot
oh look at this we get a nice menu here
so I can even select the one that I want
I love it because like if you issue a
command that's not quite right they give
you like this this menu system so now I
have a no modules folder and a yarn lock
file
actually let's just open that in the
editor here yarn dot lock look for next
and there you can see next is in there
and it's pegged specifically to the
version that we've installed it lists
out all the dependencies that we have
super handy so that's definitely
something you want to check into your
git repository and it's not required
right just because the yarn dye lock
file there is there doesn't mean someone
else has to use your they're still
welcome to use NPM but you will run into
that instance where their dependencies
could get a little bit out of whack
because they're not looking at the lock
file and then we have a node modules
folder this works exactly the same as
NPM everything's just dropped in here as
a dependency and the node can work with
it just like it needs to and then what
we can do we can go into the
package.json here and there's a bit I
can take from the next website or the
next readme page here don't forget your
comma for JSON and these are the scripts
right and so it respects the scripts
just like it does with NPM and so now I
can say yarn run dev oh it couldn't find
the pages directory so we'll make that
when we'll talk about next in one of the
later videos
so now I can say you're on run dev and
it starts it up right and so when I say
yarn run what's happening is under the
covers it knows the binary folder that
it needs to use right the local
dependencies binary folder and we can
look at yarn bin and that will tell us
the folder and it's looking for next
inside of there and it's using that to
run the command super handy and so we
can do things like installing just if we
need to and you can add a script for
Jess and it'll use the local version
rather the global version yes lint right
we talked about that in the last video
so if we install yes lint it would use
the local stuff the local dependencies
because we don't want to get caught up
in that you know installing everything
to global mode but you still do have
global - you can say you're on global
add and you can install something you're
on global add a hotel right and now it's
gonna install we've got that other video
that shows you how to do hotel so it's
installing that for us using yarn
downloading everything you can see it's
split out into four threads there and
downloaded it eight seconds and so
whenever you kind of get something new
coming in you can just say yarn install
and you can even make this part of your
posts pull hook and so after you pull to
your local machine you can have it
automatically run yarn install for you
that's pretty handy as well and the
great thing is it looks at that lock
file and it tries to see if anything's
changed and if not it like it's done
it's super fast which is amazing as well
and this is similar to the gems in the
Ruby system like you have a gem filed
out lock there and it's no coincidence
either because you who dekat worked on
the gems and the gem file and the
bundler and how all that works and he
also worked on yarn so he works at tilde
puts out ember and he's part of the team
that created yarn super thankful like he
had a helping hand at this and all the
people from Facebook and Google and all
the contributors like they've done an
amazing job and this is a super super
great thing that you can install so if
we look here
in the documentation I would highly
recommend taking a look at the
documentation again we already did the
brew install yarn let's go back to the
docs here
you can see we get all these commands
your and add yarn in it your uninstall
publish remove so it has a lot of the
same commands that NPM has there's a
version in yarn that you can use as well
the other thing is yarn add you know we
can you can see all the different ways
you can do it here the other thing you
get is those dev dependencies those peer
dependencies all you have to do is give
it a yarn add package name and then a -
capital D and that will install a dev
dependency for you so that's also handy
we can do check
and that's gonna verify the versions of
the package dependencies that we
currently have and see that they're
matching the yarn lock file I don't know
why it looks off this is probably some
kind of weird thing but it looks like we
do have something that could be d duped
and what does that mean like we could do
a flat I think we can do yarn install -
- flat and then that will give us a flat
tree and then sure we only have like one
package being installed you can do a
force uninstall and it'll refetch all
the packages even the ones you
previously installed so there's all
kinds of interesting things you can do
here another fun one is yarn why react
so we've been still next which brings in
react for us and it tells us that right
info this module exists because next
depends on it and then it gives us some
disk sizes without dependencies with the
unique dependencies transitive
dependencies all kinds of information in
here just based on the dependency graph
that it was able to build really quick
let's dig deeper so we can also set
where we're caching - so we can say yarn
config set yarn offline mirror and we
can give it a folder this is just a
local folder
you
and then we also get a yarn or C file in
the root there and you can see it's
using the yarn offline mirror bit and we
can move that here so it's only specific
to this this particular project yarn RC
to this folder and now when we do a yarn
install
you can see we have this NPM packages
offline cache and there's all those
packages that we've downloaded and so
now we have that cache version and so if
I went and deleted my node modules
folder turn off my internet I'm flying
on an airplane whatever it is do a yarn
and saw it works great and there's a lot
of other things besides that so you have
a lot of the NPM management stuff as
well for tagging and publishing and all
those kinds of things and if you're
doing local development - you even have
yarn link so you can work on a project
and link it in so you can see here in
the example they're going into a locally
downloaded version of react and then
doing a yarn link with a version number
and they're registering that version of
react and then you can go into another
project do your on link react and it'll
bring in that version that you put out
there so you can work on a local let's
say you're working on a stripe package
because you're consuming credit cards
from stripe and like they're missing
this latest and greatest feature on the
publish one you can work on it get it
fixed get that new feature added
whatever it is and then link it and then
bring it in to your other project over
here and consume it locally so you can
kind of keep working on it back and
forth and it's just gonna put a soft
link in between the two four node
modules and that way you can just go
back to the react folder and work or the
stripe folder and work on that package
right there with all the code right
there and have it's got its own testing
setup so you could be using just over
there or something like that and like
everything is working together but
through independent folders that are
linked together so super handy give-give
yarn a shot I would highly recommend it
it's only been out for a couple months
you know they have ton of stars very
active community yarn pkg comm and tweet
at me lamp let me know what you think if
you give it a try and as well if you
like this give me a thumbs up and if we
hit 50 again we hit 50 on the last
cocada about yes lint link here if you
want to watch that one
and so I'm doing another one and if we
have 50 on this I'll do another one
after that so give me a like and we'll
keep moving on up with new code caught
us and the next one will probably be
about next or it'll be about react or
something along those lines tweet about
these things let people know I don't
advertise this stuff so it's super
helpful if you tell other people about
it thanks for watching and I'll see you
next time this video has been in space
dojo production you can click the learn
more button to find out more about us at
space dojo comm or you click the
subscribe button to get notified about
new videos we've put out each week
thanks for watching</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>