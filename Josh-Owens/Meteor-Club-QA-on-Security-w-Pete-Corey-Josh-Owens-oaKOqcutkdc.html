<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Meteor Club Q&amp;A on Security w/ Pete Corey &amp; Josh Owens | Coder Coacher - Coaching Coders</title><meta content="Meteor Club Q&amp;A on Security w/ Pete Corey &amp; Josh Owens - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Josh-Owens/">Josh Owens</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Meteor Club Q&amp;A on Security w/ Pete Corey &amp; Josh Owens</b></h2><h5 class="post__date">2015-11-30</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/oaKOqcutkdc" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">welcome meteor fans to the what is it
November almost December November meteor
club Q&amp;amp;A I have a special guest with me
today welcome to the show Pete hey Josh
hey so if you're not familiar that's
Pete Corey he is a meteor security
specialist extraordinary right yeah I
guess so um yeah so yes you know I found
it interesting we were at Space Camp
together and I had no idea but you you
have a background in kind of doing
security stuff is that true yeah a
little bit my first job actually wasn't
like an intern penetration tester or
they called me out white hat hacker and
so basically i would like run automated
security scans and all these web
applications and like verify the results
you know do actual proof of concept
exploits things like that and then
explain how how the exploits work and
how you would fix them and avoid them in
the future nice yeah that that's kind of
awesome because I you know most people
don't realize either that I think maybe
you're the most famous meteor hacker I
don't know you did hack galaxy you
figured out that we were able to find
that that list of allowed it'll list
hacking is like a generous term for that
i just opened a one-off sola yeah got
some info yeah kind of funny all right
so it looks like we've got some
questions lined up but if you are
watching live feel free to submit or
vote on questions we're going to try to
go through the list as they're voted on
I'm also keeping an eye on chat too but
if you go to the questions and topics
tab in crowdcast you'll see the the
questions there and you can ask a
question and you know we'll try to I
think nine we could probably get through
for sure um but if you have some more
feel free to to toss those in as well
just keep in mind i think you know this
time
we're having an eye on security as the
topics so if you have questions around
meteor and security now's the time all
right so first up we have a mat on sun
Durham I probably butchered that
terribly but he had a question so let me
there we go you can see his name there
on the screen so since we're talking
about security can you talk about data
in motion and data at rest I guess you
know HTTP s vs. encryption
considerations for server de DB
transportation security over different
paths and SAS services powder and saws
yeah so I mean as far as data in motion
because you should always use SSL https
if your app has any kind of secret at
all and that includes you know user
passwords any kind of sensitive anything
you should be using HTTP HTTPS and the
main reason for that is because GDP the
main protocol that meteor uses it's just
a clear text protocol there's no inherit
encryption or anything in that so if
anyone is between your browser and your
server they're going to be able to see
whatever you you pass back and forth
unless it's encrypted with HTTPS right
and I think you know that that's
important too because like you can
install the force ssl package and that
will force all the DDP to go over a
secure web socket instead which is have
HTTP setup or HTTPS setup on your server
yeah exactly and it's I mean it's
relatively easy to do if you're on like
modulus or something like that you just
have to upload your your security cert
and you should be able to get it going
on quite a few platforms as a service
same thing with with Heroku I i have no
idea on galaxy I'm assuming that's
probably pretty easy too I guess we'll
find out soon yeah and maybe
but yeah I mean it's probably gonna get
even easier with the new let's encrypt
thing that just came out yeah like free
automated certs available to everyone
supposedly yeah in the future there
should be no reason to not encrypt your
apps right no one wants to be a fire
sheep yeah so what about encryption have
you done any like actual like data
encryption with your meteor apps at all
so meteor apps I haven't really had a
reason to do data at rest encryption yet
in the past I worked on a like a medical
appt so they had to be HIPAA compliant
mmm which meant that we had to do some
like in database encryption you know
there are reasons to do that being
required by law is definitely one but
there are also a lot of huge drawbacks
you know once your data is encrypted in
your database you can't really search on
it you can't query on it very easily it
really is just truly like a black box
chunk of data yeah I know there are
meteor packages out there that make that
kind of like in database encryption
really easy and kind of seamless um it's
like just a hook around your collection
but unless you have a serious security
need to do that i would i would heavily
way the cons of that as well yeah and
there's a there's a package called my
lure that's the one I know of and I
think it's gonna like forked and updated
but it came out of MIT and that that
should help encrypt that you know the
Mongo data and you know there's there's
other options as well like if you're
just worried about so I talked to gosh I
wish I had that email up now but I
talked to Lauren Shaw forget azita the
parlor guy yeah yeah the part of the guy
and he talked about the fact that it
shouldn't be very easy to sniff traffic
over the wire like Mongo traffic over
the wire because one thing people forget
about is the fact that a lot of the
Mongo services that you can purchase or
set up don't have SSL enabled yeah and
so that's also going
over in clear text you can enable ssl
between your server and your database
ready you can but most of them most of
the commercial hosting solutions don't
do it or at least not at a cheap level
like I know you can do compose you can
turn alas the cell but you have to have
one of their dedicated servers to do it
yeah so that's like 200 bucks a month
there's also the option of like if
you're on AWS you can have two separate
ec2 instances one with your mom go one
with your app and you can do like an
internal intranet connection between
them exactly oh it wouldn't actually
expose any of that traffic to the
Internet at large just those private
boxes yeah yeah and you know I think
most hosting providers have options like
that it's also kind of like data in
motion just always use SSL everywhere I
know but yeah yeah definitely all right
um ya say we got that one answered so
add another one jump to the top also
from mahaan is a good practice to write
meteor methods which are common to both
the server and client it seems like you
could easily find out all the server
methods and securely written method
calls can be used to compromise the
server um I don't I I guess to me it
would depend on your need I tend to like
to write my methods in a place that
would go to both the server and the
client so that I'll get this tub kind of
for free but if you are worried about
security it would be very easy to you
know write a client stub and have a
separate server method and the code
doesn't live together and I think that
would be an easy way to kind of handle
that I don't think there are a few a few
things to consider there I mean first of
all like I usually wrap my methods in in
a shared location just to get that you
know optimistic UI goodness going but
the one thing you should be doing
obviously is not storing application
secrets in in methods so like if you
have an API key or something don't
hardcode that into your application that
should go into your your me
your settings and then your should
reference that settings key or that
settings object yeah so in that case if
someone looks at the method source which
is easily visible on any client they
won't see your keys or your secrets
though to see like a reference to it
which they can't do anything with ya in
my mind the only real reason to hide
method bodies is if there's some kind of
like business secret in it mom's if
you're doing some like some specific
logic to your business that you have
some value or you see some value in that
you don't want other people in your same
you know industry to see for some reason
you could always separate out your
client and your your server methods yeah
and I you know I think the important
distinction here you know he says in
securely written methods can be used to
compromise a server never have in
securely written methods right right I
think maybe the the key point here is
that you should rarely trust your user
input basically your default mode should
be like people are trying to hack the
crap out of you and yeah duh you should
not trust anything there in putting and
double check it and make sure it's what
you're expecting it to be you know by
running checks and looking at all their
different kind of inputs I know you've
written a lot on Mongo modifiers and
that kind of stuff is well on your blog
definitely yeah and I mean it's also
important to realize that even if you
intend a method to only be called by
your server code it can be called by
anyone yeah even if it's in like a
server only location and so the client
can't see the definition I can see a
call to it they'll know it exists and
they can call it themselves with with
whatever arguments they were right so
just always be aware that every method e
right is going to be callable by any
user yeah so always validate your input
always check everything always make sure
that your you're doing the right thing
there never trust user never never trust
user never trust we should make t-shirts
that just say never trust ah alright um
so niall o'brien I hope I said that
right I know I've screwed up before I
asked I personally think meteor should
dispose of allow deny roles for security
purposes instead rely on methods meteor
methods out of the box what's your
opinion on this there's a lot of drama
about collection validators isn't there
drama llama yeah rama lama i mean i see
i see the uses of them like the whole
meteor philosophy is data based
everywhere you want to be able to let
people do direct updates to the database
from the client and to do that you need
some form of lodging I rules they are
definitely hard to reason about mostly
almost entirely because my uncle
modifiers are hard to reason about right
I tend to use collection validators from
a like a high-level permission
standpoint so when I have a collection
validator it usually only checks the
current users roles just if they have
like a course you know of course
permission to do this update on this
collection and then if I need to do any
more like fine-tuned permission checks I
usually throw that into a method mm-hmm
but did you see the new mdg method
package okay it's it's called mdg colon
method oh no so they just released a new
package I think it's just kind of like a
an experiment that they're playing
around with but it's got it's basically
it changes how you write methods a
little bit but it's got validators that
you can well you can put in and they'll
throw meteor errors that could pass
along to the front and correctly so in
particular they were they they wrote it
with an eye on like form validation and
that kind of stuff nice yeah so I
thought that was really interesting but
uh i mean yeah i think i think
collection validators have their place
for sure it can be easier to
so sometimes they're also difficult
because the differentiation between an
allow method and adenine method is
sometimes hard to hard to remember easy
for you if you use only denies it can be
a little easier there are some some
packages like on the works security that
makes it a little bit easier to like
reason about what your your collection
validators are doing you can just like
string together almost BDD style lines
of code that basically let you define
permissions on collections yeah and I
you know I think the key thing here is
that to understand that you know the the
allowed and I stuff is actually just
you're still using meteor methods
they've just written some predefined
methods for insert and destroying that
kind of stuff and then they they pull in
the allow deny and kind of apply those
measure as you're doing the method so in
reality you're still using a meteor
method it's just a little nicety that
they created but I agree like you know
for me I kind of side with with Sasha
after he did his whole security
challenge and it's like I think 50 like
50 people try to do it in like 2 that's
right yeah so I don't know it's actually
kind of interesting if you open up a
meteor app and you like go to a browser
console you can do you can type in
meteor connection underscore method
handlers and you'll see all of the
methods available on that client and
we'll actually see all of your
collection insert updates and removes in
there so they are methods you can call
them as methods you're right though the
the loudoun I stuff is just like
syntactic sugar for you yeah yeah
definitely it's interesting i did not
know about that but i would expect Pete
the hacker to know all right so let's
take the next one like to hear some this
is from David Norman I'd like to hear
some discussion around launching an app
that is multi-tenant with data firewall
between customers can it be done in a
single web install and database cluster
does each customer really need their own
meteor instance but can share a mongo
cluster and so on is a blog the only
thing to worry about leaking
data what are some checklist items to
examine in QA and set up in
configuration management so that's I
mean it depends I guess what you mean by
multi-tenant and how multi-tenant you
want to get rights mean like a few
different users you're gonna be fine
with one instance one database and just
you know separating things by IDs all
right if you have business uses that go
beyond that like you know multiple
different businesses using a single web
app and all their data has to be
completely private things get a lot more
complicated yeah I would I mean I would
probably suggest I mean if it's the
latter I'd say look at kind of doing
self shorted Mongo data right similar to
what Aaron Otis talked about in regards
to Khedira for scaling and performance
reasons you could easily use for
security purposes as well exactly but I
mean you could still do that as a single
single database instance in a single app
your op log shouldn't leak any data
since the server has access to your blog
yeah I mean technically if a server can
hit your off locally you're probably
screwed anyway right exactly I mean all
that data is flowing out but they've
somehow figured out how to get admin
access to your Mongo database yeah I
wouldn't count on that really being a
leak point i would say these kind of
considerations honestly are more of a
like a performance consideration you
know if you're going to have like some
good sized separate users or separate
clients using this thing you may want to
char those out for performance reasons
yeah I don't even you wouldn't even need
to do this for HIPAA compliance would
you like I mean this would even be
further than probably what hippo would
care about even yeah I'm not sure about
that I don't know um I think it really
depends like what your use cases cuz
multi-tenant can mean a lot of different
things yeah a lot of different areas of
web development yeah it's definitely uh
kind of a greater Oh
yeah we had to wait a question there so
David I think he's watching so he did
this part feel free to leave a comment
and we can kind of come back to it but
he's curious what our response is to
people that say we don't need encrypt
between the web in the database
instances because they're on the same
data center AWS region so I really
actually we're not to take this and I
will try to find that email from Lauren
because he used to work this CIA or
something oh really yeah so I mean this
is kind of a throwback to what we
mentioned earlier you can set up like
AWS ec2 instances that are the
communicate through like an intranet
rather than the internet cell any
communication between them would in
theory be private I think whether or not
you need to encrypt that kind of
communication depends on your level of
trust of Amazon your kind of trusting
your data to whether or not that
actually is internal communication and
whether or not you actually trust the
people working at Amazon to not sniff
your data in theory it should never be
accessible outside of that intranet but
theory breaks down sometimes in real
life and sometimes people within that
internet may not be the most trustworthy
so at the end of the day if you're
really paranoid and you really want to
keep your data secure throw some ssl on
there it's not that difficult it solves
all your problems but for the most part
I think you know the Internet
communication between like ec2 instances
or some other type of infrastructure
like that is going to be securing it's
going to be fine to not encrypt in most
cases it really comes down to you know
what your level of trust is yeah yeah I
can't find it now but um gosh really
wish I could great explanation in it but
yeah I basically just comes down to like
I think he's going to be hard for most
people to sniff your traffic so I mean
is I mean every night issue everything
kind of comes down to where you're
willing to draw the line because
everything is just a chain
trust all the way up you know
ssl-certificates you're trusting people
that they're actually secure and signed
correctly yeah all the way up the stack
yeah I feel like I feel like recently oh
I remember i was i was on the forums and
i posted about today what we were gonna
be talking about and stuff and to me
security is more like risk mitigation to
some degree you know it's like it's like
hiring a good lawyer you hire the lawyer
because you don't wanna like you want to
make sure if you do get to like you
limit your exposure or how much you
might be liable for that kind of thing
and I think time spent on security is a
similar thing right like you're never
going to be good enough to thwart every
attack like if someone really really
wants to hack you and they're smart
enough they'll figure out a way to do it
yeah and there are some crazy smart
people out there yeah absolutely it's
like to me drm on blu rays and that kind
of crap like this is hacked within weeks
and like it's built in the hardware and
like what's the point like yeah just
stop I don't know you're not going to
stop pirates with that crap it's like
testing to that like you can't prove
that there are no bugs you can only
prove that the things you've tested or
bug free right who knows what else is
out there yeah totally all right uh-oh
gets more comments so see if any of
those relate ah oh ok so when he was
asking about multi-tenant he was
interested in the the latter part of the
question more complex issues of big
customers having their data separated
gotcha I mean it really
it depends i mean if your application is
correct in theory they could share a
single app instance and a single
database instance and there would be no
leakage ever right the contingency there
is is your appt correct like are there
no flaws or security issues there yeah I
feel like this is maybe slightly more of
an enterprise concern and I would tweak
my sales cycle towards that and just say
you know like we have to do there's a
couple hours of work we have to do when
you sign up to get you going and you
could probably even automate it with
something like doctor and other kind of
scripts but i would just launched
separate Mongo instances you at the
point and you can still have one master
kind of database and then 11 app
instance or as many happinesses as you
want but they just look up kind of like
a key to get into the other Mongo
database for their user data is stored
and that would I think that would solve
a lot of things yeah I do too depending
on how you onboard clients you can
easily just spin up a new instance for
them yeah exactly and you know you get
the sharding and performance kind of
gains there yeah as well I guess not
true Mongo shorting but um yeah it looks
like Russia chimed in as well and kind
of said the same thing and I mean you
can even well no nevermind yeah that's
what I would do yeah all right ah so
we'll get another question from mahaan
is there a way to expose only certain
methods to the client keep other methods
for interacting with a trusted service
for example microservice via DDP I'm
going to go out on a limb here and say
not not really not in the truest sense
of your question you can't really expose
only certain methods to the client I
think one thing you can do you can check
I think it's this dot connection or
something like to have this connection
not something if that's null it's a
server original
call mmhmm yeah or you could add
something like a key that's only like
only the like an environment variable
key that you said that the server passes
along when it runs a method I mean
there's a there's a couple different
things you could do but I there's
nothing like natively in a meteor method
that kind of would allow that I think
the issue is that like I was saying
earlier even methods defined in a server
only location are callable by anyone
yeah yeah so I you know maybe your best
bet is to move it into a separate repo
and a separate DDP connection and maybe
I mean it wouldn't be as obvious like
you couldn't just call meteor dot what
was it you were saying before a dr dot
underscore connection or something yeah
yeah doc connection got underscore
method handlers yeah so like that
wouldn't be readily available in there
if it were like in a different repo on a
different DDP kind of set up your method
wouldn't show up in there but you would
still do like a DDP connect and put in
some info and then like if you make that
available as a global or something then
they could look it up there I don't know
I mean to me I that's like security
through obscurity like it's really
enough security at that point i would i
would spend more time focusing on making
sure your methods are as secure as you
can make them you could also you should
look into the disconnection if this not
if this dot connection is null and your
method that means that it came from the
server there is no active client yeah
that might be good enough for your use
cases it's kind of a really niche case
like if you have like a set time out on
your server that calls a method this doc
connection will be null or if you have
like a rest endpoint that gets hit but
you could just as easily set up like an
event listener and just fire an event
and then it's all handled server-side
you don't have to expose a method right
yeah yeah I mean it really depends what
you want to do there's probably not a
reason for I method if you want just to
pry
it's server only method yeah make it a
function call it however what you want
yeah definitely all right easier one
okay I love this so Wade asks if I'm
confident that I've secured my
publications my methods in my low and
deny rules is there anything i'm missing
to make sure my app is secure so i would
just say like you should just like throw
all your confidence out the window and
you should go back over it again with a
fine-tooth comb and then again and then
again I don't like I would never ever
feel confident and I got all that right
um but what other things should you be
concerned about I think is what he's
really getting at besides those things
so I mean you've got your methods if you
got your pub subs you've got your
collection validators those are all
secure or as secure as you think they
can be you've also got the entire notion
of isomorphisms like we were talking
about chemical I&amp;amp;C things they shouldn't
be seeing from a business perspective
you also have the threat of cross-site
scripting are you using browser policy
to prevent that mmm are you sanitizing
user input properly are you rendering
user input properly are you sure your
methods are secure are you sure your pub
subs are secure honestly the the attack
vectors for meteor app are fairly small
you've got your methods pub subs and
collection validators for the back end
and that any potential you know XSS
things that can go wrong on front end
yeah and I just for those that that
aren't in the live chat I just posted a
link to the meteor Club security
checklist and is basically just a bunch
of stuff that mostly Pete and I wrote i
think i should have date these links ah
David Weldon wrote one of the other
articles too so kind of three
contributed is there but it's just a
checklist of things you should worry
about and I ran this by Emily who used
to
bien chaud security at MDG and she said
it was pretty thorough and complete list
the only thing she would suggest is we
should have put something on here about
ssl but there was no good blog post
about it at the time yeah but I I popped
one out there after this was launched um
can I let's see and it may also be
careful like as you're adding
functionality to your app or refactoring
things I find that a lot of times you
kind of get lakhs on the security as you
do that kind of like you know
evolutionary cycle and things will slip
through you know you'll open up a little
crack and let's just enough for someone
to get in so always be on the lookout
for potential holes yeah definitely
definitely trying to oh here we go there
we go so there's a URL for you guys I'll
leave it up there for a second but if
you want to see the security check list
just type that in and maybe I'm put it
on the youtube comment area too after
this goes up but yeah I mean that's its
there's like there's a few simple things
you should do like turning off user dot
profile updates I don't want that stuff
like that alright so how do i get back
to grab Cass there we go too many things
to manage alright so another one from
Wade if I'm storing an API key in the
Mongo database boo don't do that how can
I make sure it doesn't get sent in plain
text over the wire for security purposes
so I think we covered this a little bit
you can turn on SSL between the server
and the database we would help some here
but in reality all your API keys should
really be environment variable settings
and there's a couple reasons for that in
my opinion one of them being obviously
like if your environment is compromised
that means like they've hacked your
server and what you're screwed anyway
like they're going to get in your
database but and then number two is you
know in reality you probably want to
develop against a different key in
development or staging or production so
if you think in terms of like stripe
when I man in development mode I want to
use like a test key that's not going to
actually charge my cards same thing in
staging I want to use a test key but
then a developer in production you want
to use an actual like live production
key that's actually going to collect the
money for you and so I think that's
another strong reason to really move
that to the environment because then you
know you can kind of change it based on
where you're running the code I wonder
if he has some weird use case where he's
like storing other users keys for some
other application for some reason I
don't know that's the only reason I can
take up to every store key in a database
right so I've written a number of
Twitter apps and that was kind of a
concern but I never really addressed it
personally if it's for your app I would
store all the keys in here your meteor
settings yeah yeah and that's when I
mean so that that's when the the data at
rest comes into play right like you can
encrypt it in the database if you're
really concerned about that and then
decrypt it on the client and then that's
much less of a concern for you yeah so
you can look at something like mylar uh
if it's truly concerned but i mean i
don't i don't know i feels like
diminishing returns to me and I mean
you're probably if you're restoring user
keys for something I'm probably going to
be their public key if it's like a
public-private scheme yeah it's not that
big of a deal it really depends
yeah we need more info Wade others to
comments okay ask him to clarify all
right yeah Jeff asked a question in the
comments hey Jeff if you could just put
that in the in the questions and the
actual Q&amp;amp;A portion and we'll get to it
okay so Anthony as a question and went
through the getting started guide but
the very end it says do not do this in
production no no knows they went no I
would like to know exactly how a
production app should be set up so yeah
I'm assuming he's talking about the
tutorial guide maybe meteor yes tutorial
my guess is the tutorial maybe doesn't
cover uh security now the color security
with methods publish and subscribe today
maybe don't cover check for sure just
terrible check is the heart and soul of
meteor security it is it really is stop
trusting your user input same thing like
pub pub sub stuff is all like don't
don't trust your user input either yeah
definitely um if you're here I would
love to know what God that is yes
definitely if if you can add that here
to do's yeah i'm not i'm not seeing it
anywhere that's super spelled out but i
mean as for setting up a production app
from a security perspective yeah you
should definitely check out josh's
checklist it goes over a lot of things
you should be concerned about when
you're writing methods and publications
always
your user input using the the check
function little check API yeah it comes
with meteor i would say probably the
single biggest offense that i always see
is people leave insecure and or auto
publish in place and yeah like talking
about actually yeah i'm wondering i mean
but they go into publish and subscribe
that's what just like with insecure and
last step on new meteor app should start
with auto published package let's remove
it and see what happens and then he
walked like it walks through setting up
your own pub sub i don't know maybe it
was a different tutorial but yeah i
definitely think those are probably the
two biggest defenses and i've honestly
I've lobbied several times to have those
either be marked as debug only or
removed from the default application I
just don't like I feel like it's it's
okay for maybe your your first couple
hours with meteor to have Auto publish
their and insecure and that kind of
stuff but in reality um I think you if
you think about how people code write
code at the time they're writing that
particular code they have the pretty
much the highest amount of knowledge
that they're going to have about that
that chunk of code and so I want to
think about security when I have that
highest amount of knowledge right then
and I think if you leave auto publish
and insecure in there then when you take
it out you're going to be coming back
when you have less readily available
knowledge in your head about that code
that you wrote and you know if you my
guess is if you left auto publish an
insecure in there you're probably not
writing tests either which would be the
other thing that I think could help you
maybe have a little bit higher knowledge
about your code when you come back to it
but that's you know likely not the case
in that scenario either yeah i mean i
don't know about you but like my first
step for the new meteor app is to remove
auto publish min secure immediately yeah
or go fine go find a boilerplate and all
of them are going to
removed as well so yeah yeah but yeah
remove auto publishing we've been secure
check all your user inputs go ahead and
add browser policy right away yeah yeah
I you know I i still haven't turned on
browser policy for crater why I turned
it on for like 20 minutes and like
everyone's like oh my god I'm getting
all these console ears and it won't pull
up and all this other stuff and it
turned out like yeah it's probably
better to start before you deploy and
have users on your system definitely
there's some tweaking for sure required
with browser policy yeah yeah it's
defaults or not probably set quite right
for most apps yeah yeah so all right ah
do you do so this will be a quick one
because I don't we're not really going
to cover it but Anthony asked again I
would like to see an example of
isomorphic JavaScript with meteor I want
to build an app where the web version is
isomorphic so get indexed by search
engines so I think maybe this is not an
understanding of what isomorphic means
with meteor to me you're really talking
about server-side rendering which is not
something that you can easily do with
mediator right now they definitely don't
have any support for that but you can
install packages like spider ball and
get that or you could switch to
something like flow router with their
SSR branch and usually act and kind of
get all that kind of SSR goodness in
there but to me the isomorphic stuff
really relates to like writing
collections or writing methods like you
can write it once in one spot and it'll
be delivered to both environments server
and client and then you get to like
reuse that coat yeah and that's that's
what isomorphic means in regards to
meteor yeah I think that's actually have
a really good article about how he
writes his methods like he does
peared methods or something like that
like he has a client method and like a
server only method maybe i'm not i think
you're right discovered me here it's got
like a whole series on it i think that'd
be good maybe introduction to the ideas
of like isomorphic javascript two-tiered
methods yeah totally so try to use that
lower thirds thing again see if that
work yeah turn on there you go so
discover meteor calm / blog / meteor
dash pattern dash 2 dash t r dash
methods was long but yeah that's that's
kind of a good walk through and he's got
it's a to porter so definitely check
that out there's also didn't google
announced really recently that they're
going to be supporting j s only websites
in their crawler they did yes uh a
spider bowls i think have passed
hopefully mmm it's it's still not
unfortunately you still have like the
social crawlers that you have to care
about and yeah they want their metadata
up top but I mean it's definitely so
i'll say this should really write this
article but I've got a screenshot that
shows google still coming along this was
as of like a month ago um days after
that announcement you know they they
still hit my site and sent like 40 BOTS
to consume crater and took down the site
so I mean you know I've moved to doing
rendering with pre-render and using
engine X to kind of cash those responses
for a couple hours so I mean that's not
not a huge concern anymore uh you know
but that's that's interesting so i'll
mention this because we're talking about
security that you could potentially have
problems when you do caching and you use
something like fast render which is
another way to kind of achieve a little
bit of
I I guess SS are right because your your
shipping the data the pub sub data in
the header of the site and it'll be
instantiated right away and then your
pub sub will still connect in and pull
over any new data but if you cash that
somehow and serve that up to another
user and the fast render data should be
different than you've created a
potential security hole there oh yeah
I've seen that happen before Wow yeah
that's not a good one no that would be
bad alright so Jeff added his question
here do you recommend Matt odium yo
tiahm how you say that easy security for
helping with rate limiting um yeah I
don't know we haven't covered this yet
yeah so there it is I haven't used this
package in particular but there is an
officially supported core rate limit or
now let me I've never even heard of this
package actually yeah neither of I so
and then there's another one called
sicka which is written by aaron oda as
well sick is awesome because so the
official package is kind of a
minimalistic approach like it will just
throw exceptions I think once you exceed
your rate yeah sikka will actually
redirect you to a little page that
prompts if you're a human or not and
right or it will let you continue
abusing my site yeah does sick I have
like a hard limit though can you set a
hard limit or like once they whitelist
can then just keep abusing you I don't
know like once you confirm your human I
don't know if you can it's basically
it's just a CAPTCHA page yeah that they
throw up but yeah it looks like I guess
you could use the two in tandem huh you
could probably like put up much higher
hard limit in the in the right limiter
yeah for sure it looks like this meteor
easy security package is depreciated
check out the
hub right here yeah all right so the the
main package i think it's just called
rate limiter yeah p rate limiter yeah
it's pretty pretty easy to use yeah it's
similar to allow denies like you just
write rules and i think you don't even
have to like attach it directly to the
method you can just say like rate limit
this method using like this code here
yeah and they give you an example of
rate limiting a method but you can also
use it for publications and
subscriptions or I guess publications
I'm pretty nice yeah that's very needed
because I mean you can do s meet your
apps pretty easily no you can't you
can't do that no not at all not greater
we're not gonna talk about that mmm damn
it now I gotta go do something about
that alright uh so uh guess who's back
mahana is back uh-oh it didn't pop on my
screen in relation to the question I
asked earlier oh there went was way
delayed on having meteor methods only
available to trusted servers can
server-side routing help here like you
would do for rust api's well so i mean
again if it's the server side route like
an iron router server route you're not
going to have a connected users so you
can depend on that that's not connection
being dull yeah again there's no real
benefit of using a meteor method there
you could just write a function and have
that function called from your rest
endpoint well yeah i mean if you're
exposing arrest a server-side router
rest endpoint basically um I mean trying
to expose like a DDP service and he
wants like methods available through
that GDP service only I don't know yeah
I still don't I'm not sure I see a
precise use case here or it's like
really precise and just not something
I'm thinking of but I you know
I mean exposing a method through DDP or
exposing it through a server-side route
they're kind of the same thing and I
think you're right like you lose the
nicety of having this connection there
so you can tell like who the user is and
all that kind stuff so yeah it depends
if you uh that's what you want to do oh
did she i just opened the chat window
and rishi had said check out DDP rate
limiter package and and it only shows 82
installs oh my god yeah all right so the
thing I'll say is like it came out with
1.2 I don't even think it got mentioned
in the change logs in 1.2 did not know
um I'm pretty sure like I went back
through there it took me what I find it
again because I'm like wait a minute
didn't the rate limiter come out and
like I think it was in the early part of
1.2 development and I'm like that branch
hung around for so long it didn't really
I was playing with the new build package
API or they build plug-in API like the
linters and minna fires and stuff I
rewrote check checker as a linter and
the docks were impossible to find like
it was mentioned once in the change logs
I found an example linter in the code
and like in the source the meteor source
and then that was all I found when I was
doing the rewrite and then later on I
was writing a blog post about it and I
found a wiki page buried deep in the
meteor wiki about it but it seems like a
lot of those 1.2 new features aren't
aren't very well documented which is the
best thing yeah I I think i'm pretty
sure this was only um this was only
documented in the blog perhaps i think
they released a blog post about
rate-limiting and that it was coming 1.2
but then it was never really mentioned
anywhere else not only think it gets
mentioned in the docs either which seems
like an oversight but again like I don't
know I'm hesitant to submit anything to
em DG coz
they don't really accept it very often
through pull request and then also like
I don't really understand what they're
looking for in the docks and sashko has
said stuff about how he wants to redo it
all so it's like at is it is it worth my
time to write that I don't know so so
yeah i would if i remember right there
was like a potential issue in sicca of
being able to like spoof a header and
get around it but i don't know if that's
been fixed or not yeah I would use the
core rate limiter if I were you just
because it's a core package and probably
hopefully that's amore yeah a little
more maintenance yeah went towards it or
Notre does a good job but I mean MBG is
paid to maintain their packages yes this
is true sort of paid paid by investors I
don't know definitely yeah so definitely
look into that ah yeah so we entered
that one ah so Anthony's got a more
general meteor question but I'll be
curious to hear your take to pee so are
there any patterns for building
microservice architecture with meteor it
still seems like a monolithic framework
solution I want to hear you take this
one you wrote that sweet little apple TV
streamer thing right I did I did and
then he so he know it you know it
happened with that when we had Space
Camp apparently like Yaffe and uh the
popcorn time people like that it all got
taken down and so it's like slowly
coming back up but I honestly haven't
used it since then but so what I did is
you can break apart an application
almost however you want really so I
there were different components to it
one one component would go out and find
information about available legal TV
shows that you could string right and it
would that was one
micro service and you can make a meteor
call to it like every 10 minutes if you
wanted a method call and it would go out
and fetch that data and like you know
update the database and add any new
stuff up dating any old stuff etc etc um
and so then you know I kind of have like
one main application and all the TV show
data lived in one spot any kind of like
movie data lived in another spot and
that micro service would handle you know
dealing with that information and then I
had another one that would go out and
and scan the network for Apple TVs and
it would handle you know scanning the
network finding them and then you know
the the main app could query against
that data and you could pick an apple TV
you wanted to stream to and then I had
another one that was there to handle
actually downloading and making a video
stream available again you know all
legal ah and I would just like I would
make the different method calls just
depending on what I needed to do and you
can make different subscription calls
depending on the data you need it as
well so like you get to subscribe and
get the TV data from the one service so
in reality I had one meteor app well I
guess I had five meteor apps and you
could you could basically like the main
app with then make all these connections
through DDP and then you could subscribe
to data you can make the calls that you
need to make etc etc and control it all
that way the only downside I think there
is to that is just understanding and
like remembering how those are all like
what lives where and how those are
connected so right now it's all kind of
hard coded in you know on different
ports in reality like I think if you
were going to launch an app or a service
on the web around this you could have
those hard-coded 2.2 like domain names
fine sir des like DDP methods and pub
subs as your main form of communication
between those micro services yeah
exactly and so I don't really care like
so I think the upside for me was that I
could work on a piece of the application
and you know you don't have to worry
about extreme necessarily going down
unless you were messing with either the
appletv microservice or the the torrent
microservice and as long as those two
were up and stable like everything else
could continue to function like i could
rewrite a you know a TV show finder part
of it or whatever like I think that's
nice interesting there's also the option
of like having one micro service i'm
doing this on a current app i've been
working on that just update updates some
mom go collection and then your meteor
app will pick up on that change through
a blog or through you know polling or
whatever yeah process it accordingly
sundays and down the new subscriptions
to the client yeah i've i've done
something similar to that using Mongo
aggregations and so I just have like
server set timeout calls or set interval
calls that run like every 10 minutes and
they'll just run the aggregation on the
server and push that data into a manga
collection that's being exposed to the
client and so then they're like it's
semi real-time data at that point but we
were having performance issues until we
went that route but it's it's very
similar did you see there's a new
graphic on the meteor homepage that
basically breaks the server into a live
query piece which is meteor and then
like a nap microservices there yeah yeah
yeah we were talking about that
yesterday no yeah me too close seems
like seems like they may be pushing the
micro service idea yeah so I think the
thing that's not entirely clear to me is
like I think you'd have to authenticate
with it each separate DDP connection
they're so I mean that's not probably
quite ideal yeah it also is interesting
to me that there is no like dedicated
meteor server layer there's live query
and DDP which I mean what's controlling
those things yeah I mean I guess the the
meteor node server is technically
controlling that yeah I don't know
what's interesting yeah definitely it's
definitely like an evolving pattern so
it's probably not the best practice
right now but we'll see what it is yeah
you know I I also question like I think
DDP is very very powerful but I also
question like how committed meteor is to
it in a long term because when you look
at the package server stuff I mean I
realize it was probably hastily written
when 09 was coming out but in order to
get atmosphere working they actually
have part of it done through DDP but
another parts done through rest yeah and
it seems weird that like that that
should be like a really good kind of
showcase point for them to show off dtp
but it's it's not so I don't know I mean
maybe maybe uh i'ma galaxies definitely
their their their money things so maybe
it's pretty awesome but that's not
something we can easily see ya yet all
right so we got through 12 nice ready
for more Freddie from what we yeah we
have time for one more you guys are
slacking on us so maybe one will show up
here in the next four minutes but in the
meantime where can people find out more
information about you Pete yeah so I do
some freelance web development under the
name East Fifth you can find my website
at WWE CEO my blog is blog East Fifth co
I try and push something out once a week
you can find me on Twitter
uh at Pete quarry yeah yeah awesome I'm
uh got a couple meteor security packages
you can check out too nice yeah I'm
starting a new consultancy called west
fourth just kidding oh man competition
yeah no I also do consulting but I'm on
how I have a fancy website for it
anymore should fix that I'm working on
it but yeah so if you're interested you
can hit me up on Twitter Email also do
the meteor club which obviously you may
be here it upsets you found your way
here and you're watching this meteor jas
club join the mailing list there and get
exciting updates and news and info blog
post tips tricks all that kind of jazz
and then we've got a chat room as well
patreon patr Aon calm / media club 10
bucks a month Pete's in there I'm in
there bunch of other really smart people
are in there so if you have media to
questions like this place to go if you
have one react questions apparently like
we're getting big into the elixir and
Erlang and Phoenix perhaps so if you got
questions about that you could probably
get those answered there so it's all
kinds of awesome knowledge in there all
right we did get one more not
security-related but Anthony wants to
know any news on rethink DB official
support um no news is no news I I
haven't heard anything I hear 2.2 is
coming out soon and that was the thing
that Slava said he was waiting on I
don't know like it's definitely gray
area i don't know how official it would
be anyway slava was running the package
as part of his hack week time and he's
since left and so i don't know if anyone
there would pick that up maybe there's a
there's a lot that they would have to do
to add an another database officially
there's a lot of stuff that just assumes
mom go syntax and Mongo semantics that
would need to be totally abstract out
and wreaths unk yeah
yeah and I'd it's a it's a worthy effort
and they've started it in regards to
postgres so sashko and Slava started on
postgres support and it's out there
there's a package you can play with if
you really want to try it and I think
that maybe in 13 14 20 we'll see some
changes come along that will make it
easier to support other databases but
right now it's there's a little too much
hard coded in the user accounts and that
kind of stuff i've been i've been
playing with rethink though and it's
very cool i'm definitely excited for any
possibility of it being use of meteor
right and so i think the big claim to
fame there is the fact that you can kind
of subscribe to updates that are related
to the query you want right yeah and so
the the big performance gain there is
that we don't like right now with Mongo
if you turn on up log you have to listen
to any and all changes that happen on
the Mongo server that you have a blog
access to and you know if you're pushing
5,000 writes a second you know the
reason you turn on a block support in
the first place is to allow you to
easily scale out to 10 servers but if
you're pushing 5,000 writes a second and
all 10 servers have to consume those
5,000 writes a second like you get to
see your cpu's usage spike way high but
in if instead we just we just got the
updates for the query we cared about
like that would actually be way more
performant and supposedly mongos working
on it but rethink lake already has all
that stuff there you can also join data
how crazy is that oh really yeah like
it's joined in the on the server side
yeah yeah in the I guess in the on the
database I'd really I yeah that's that's
why I pick a scribe with mom go ya can't
stand it uh yeah yeah and he's saying
that in the comments pub sub and joins
seem to be the big selling points and I
think you know those are the the pain
points with Mongo right now so
yeah I could see rethink being a great
fit it just came along a lot later than
Mongo and that's what everything's kind
of built on now and if anyone's
interested Anthony said he is you can
hit me up on Twitter and we'll find a
way to contact him but if anyone wants
to present at the santa cruz javascript
meetup about any of this stuff like
you'd be happy to have someone not cool
yeah awesome all right I think that's it
we got through all the questions I want
to thank you pete for coming on the show
really appreciate it thanks for having
me was fun yeah awesome and if anyone
does have any more questions feel free
to hit up either of us twitter.com slash
josh owens or twitter.com / Pete Corey
and we'll be happy to answer those and
like I said if you get in a meteor club
stock chat room you know we're both in
there and we answer questions all the
time so it's better than stack overflow
it's true alright well thanks for tuning
in guys and next month I have no idea
who we're going to have on but I promise
we'll have someone equally as awesome as
Pete so stay tuned and there's a mailing
list i'll put a link in the YouTube to
it but you can sign up and get notified
about these things too so thanks again
for tuning in cool thanks guys</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>