<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Crater Podcast #101 - The unofficial apollo edition | Coder Coacher - Coaching Coders</title><meta content="Crater Podcast #101 - The unofficial apollo edition - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Josh-Owens/">Josh Owens</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Crater Podcast #101 - The unofficial apollo edition</b></h2><h5 class="post__date">2016-05-08</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/I_vwAeDcxfE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">this episode is for Friday ma 6 2016
welcome crater fans i'm your host Josh
up with my co-host Bobbi higher it's
funny I'm close yeah yeah definitely
that is the co-host not guest co-host
for actual course looks like he got a
haircut to me yeah look at a French man
yeah yeah I had to get a cut for this
momentous day in my life is good nice oh
goodness yeah so gosh it was weird cuz
like we didn't we didn't do an episode
last week really like we did it on
yesterday which was really the week
before so it's been like in one episode
over two weeks really yeah kind of threw
me off my game that was a good episode
though it was how was the community
feedback any hug yeah good i think a lot
of people copied you on it to on twitter
so um as far as what I've seen local
people seem to have enjoyed it um
definitely I think there's some people
that are maybe frustrated with choices
meteors maybe like today there was a lot
of tweeting about the all the demo sites
being gone yeah lights being gone so it
happened it happens definitely and we
had we had a we had a blast earlier this
week too man i really loved you and I
mean Ramsey got to talk to Dan Abramoff
which was pretty awesome yeah man this
been a long week cuz that feels like
forever ago right yeah and I had to wake
up at six the morning for that day oh
it's terrible yeah so I always let the
guests choose the time and dance over in
like Paris or London or somewhere and
like he chose to PM his time which was 9
a.m. my time which was fine but then it
was like 6am for you so yeah oh well
anything anything for the guests you
know yes but it was a great show that
one's gonna be super fun for people to
listen to yeah exactly got deep in
with yeah we did not just redox but
reactive like yeah mana great spear yeah
if you're interested in that you got to
it into that show we're sure yes
definitely so we just pull one out this
week I hold on to them for I do them
every two weeks if I can so it'll be out
I guess in two weeks all right yeah cool
what are we talking about today today
we're going to talk about meteor it's
all meteor today crazy no not a ton of
react stuff except for this one meteors
the perfect back in for react native
astronomy two point oh cool tuning Mongo
for scalability with meteor we got a mdg
post nice yeah I was excited to see that
one turn up was a good one and a bridge
for meteor and redox I guess that's it's
Canada and I thought yeah i mean we
could sneak in some stuff I I it's been
making all these Apollo examples in a
spare time so I thought maybe about that
too lies yeah we should probably talk
about all that yes definitely we had
some interesting conversations behind
the scenes about all that oh yeah
alright yeah so the first one is from
Spencer I love Spencer and do a
shameless plug it looks like he's going
to be speaking at the next crater remote
comp but also yeah he's gonna be talking
about react native a meteor shocking
right oh that's mostly what we hear out
of him he's working on book seems like a
good fit to me and then the next conf is
all about mobile does it um you know
I've got some exciting talks lined up
for that but uh this is this is a good
one so it makes a strong case for why
you should use meteor as you're back in
for react native and uh I don't know I
like the article um some of its just you
know kind of a paragraph summary and
it's got a link to some of his other
articles yeah i think it's it's kind of
like he's been building towards this
post and
you can go read some of his other stuff
um but for instance like he talks about
react natives fast to get started with
and so is meteor yeah um and so they
seem like a smart fit in that regard um
in particular like the real time piece
of it the pub sub like I know you you
mentioned something about one of his
articles and he's you know you were
talking about methods and then like he
was like an article on medium saying
like I advocate for using methods but
then he said you know when you do need
something like a reactive feature which
I think some apps don't don't need fully
reactive features right um then you know
just make that feature built on pop sub
and then use methods for the rest so
yeah those are so those are good but
Spencer I'm gonna have to I might I
might have to like give you a wizard a
counter argument because when one thing
that we didn't talk about here with
react native at meteor is the tooling
and if you if you're going to use meteor
as your back-end you're buying into a
lot more than just a server you're
buying into the build tool your butt
lying in to all little quirks that any
meteor developer has to like deal with
is that true though I mean you could
just use a DDP library and kind of punt
on some of that right okay you could and
just use the react native tooling you
could do that we could do that and
that's we'll see that's something that
we need we need to educate people on
doing because right now there is no best
practice on what to do here right I
personally would I would I would not
know that I I could rely on something
like some gdp library effectively right
there's also you know there's also
problem these DDP libraries right like
the best one for native I felt was a
meteor iOS from our teams
as he built the abstractions similar to
mini Mongo and the whole meteor data
interactions that client developer would
would usually have but for example the
Android DDP like Android eep for example
does not have those types of those types
of goodies so you end up writing more
code to kind of invent the wheel
yourself um you know this is interesting
because in reality were theoretically
with 1.4 we're gonna get DDP and tracker
and all that kind of stuff mini Mongo
like okay in the NPM right and then you
could really just pull that stuff in
yeah yeah I think with 1.4 in the whole
move the meteor quarter moving into NPM
is is it going to be is going to make
this case a lot more convincing reacting
meteor combo holly is more strong when
you get to pick and choose what tools
you want you're the best tools from this
part of media and what the best tools
from the reactivated parts right now I
feel like you get you you don't get just
the banana you get the gorilla too yeah
I don't think that's how you say that
phrase but I just said that's my body I
like it I like it definitely but all of
his points they're all like positive
points I just wanted a question and
maybe he'll maybe he'll tweet me and
write another blog post I encourage him
to do so well you know it's what's
getting interesting here is at this
point you know I said we'd talk a little
bit about Apollo but I think it makes
sense to bring it up here too because uh
you know the the benz last transmission
episode which I was hogging him a little
bit they should have said it was Ben's
last show on that show but you know yeah
I was a bummer uh what we love Ben so
you guys should know Paul I think Paul's
taken over so it's not gonna go away but
it won't be men anymore uh but you know
they talked a lot about react native and
Apollo which is interesting um
you know and James baxley in the new
spring guys are working a lot on that
and good shout out for them they're
going to talk about going from Cordova
to react native at the crater mobile
conf so that'll be that thing is who
those both that thing is good we're
doing they're doing a lot of awesome
work but you know my question becomes
like what's gonna be faster you think
waiting on 1.4 and all those libraries
to get an NPM or just get started with
Apollo now and build your react native
app that way with you know the Redux
integration well you're missing now
would be real time and maybe slightly
better user accounts integration but I
think you can limb by with the user
account stuff they have now do you think
um well it depends on how like what kind
of risk you want to take because the
project right now is like 3 1 point 0
and we're actually we're bumpin versions
every day I just made breaking changes
like last week which we had to go update
a lot of a lot of people had to update
their code because we've changed made a
huge break and change and then sashko
made a breaking change on Tuesday on how
like queries guitars like so all this
stuff is happening really rapidly and if
you're feeling comfortable with that and
want to get get your app going I will
say Apollo is super nice for the toy app
right now you're making a toy something
you want to play with on the weekend and
have fun it's that kind of project to
try out these concepts of maybe a better
client experience for your react native
app but if you try to go to production
with this thing right now I don't know
the new spring guys are like testing it
out in the waters and like they're
they're like pretty much the huge
production candidate right now that's
running into the the use cases they need
and and granted they're contributing all
that stuff back and it's over time it's
going to get a lot better I would not
invest the time in a production
application right now today but that my
next month or two months for now yeah
you got to think yeah like development
time even part time on the side at best
you're gonna it's going to take you two
months to really get something decent
together
Oh like what I mean do you think
Apollo's there in two months or do you
like so my gut says we'll probably see
1.4 by July maybe man I think Apollo
will hit maturity in like six more
months yeah and especially like like
word pops not using it yet but once it
gets a little bit more mature then I'm
gonna put it to the test and then I
would totally feel more comfortable like
you know promoting it to people yeah
right now I'd like I've only used it to
build really really trivial example apps
yes now I need to go and build even more
complex examples once I even once i get
deeper into that and i have more complex
two examples for the community hell yeah
use it yeah I that that's what prompted
our conversation as I was looking
looking at the work you did over the
weekend and I'm like looking at the lake
a shopping cart example and like you're
wiping out the shopping cart and making
a fake one and I'm like where's the
security here and you're like well I
didn't do any instead I'm like where's
the docs on this and sashko pointed us
in the right place and I was like oh
yeah this this actually like this is
further along than I thought it was yeah
yeah I think I think we're in a were in
this instance we're an active
development in Apollo right now I think
the I think these trivial examples were
good in the beginning because I just
wanted people to get comfortable with
doing the motions and that's good i
think i've accomplished that people know
the motions of like what the different
pieces are maybe and how they relate to
the docks as they are today but the
company i exactly they're securing to
figure out authentication is bigger oh
also there's a CL to worry about how are
we going to do access control on these
queries however we let you have
efficient queries I would have tooling
and monitoring on all these things that
are now a proxy of your meteor
application or any application there's a
lot there's a lot to think about so like
it is a shiny new toy and I encourage
people to use it but like first Spencer
who's building production level stuff
maybe I wouldn't tell him to do it
neither yeah yeah I mean that's
that's what I was ultimately driving out
like yeah where's it at and I think
you're right like to me I don't I don't
feel it's like I haven't written any
graph qol code yet but it feels like
it's not quite there yet I want to see a
better like user accounts story for
Apollo before I would probably jump in
with a production level kind of
application that I care about is you
know it's it's super interesting to
think about like you know people are now
querying like you the the one I was
referencing you use postgres for it and
sequel lies then yeah yeah using forums
are they're great even with any database
so yeah Mongo syntax you're not really
losing out on much yeah yeah which is
nice you know I think that that's that's
the strength here um and James gave a
great talk at meteor night that kind of
her Devin I and her whatever it's called
now he gave a great talk there that that
showed off the fact that they were like
pulling data and from three different
databases like sequel server I think he
said and my sequel and Mongo and kind of
like joining it all together using Paulo
and crafts ql yeah it was just seamless
to the client they just said I need some
data and they got it yeah so I got
really nerdy and I read the whole graph
ql spec and like because you know it's
easier to work in apollo if you know got
you all right um but it's you know if
you're a mobile developer out there or
even a front-end developer your life
it's a lot easier with craft well yes
you dictate you dictate the terms
essentially with the server you want
certain fields to look a certain way you
don't need to have a meeting about it
she's not away sometime about it just do
it and as like as long as you're you
have a you have confidence and that
you're a graph fuel server does exactly
what you tell it to do then that's all
you need to worry about as a client
developer yeah yeah I would be I would
say that that's actually a really great
point because I remember one of the more
painful projects I did
in my development career was when i was
at godaddy working on the outer I
project which I now is called godaddy
bookkeeping but they had backbone which
was making you know JSON kind of queries
against the backend Ruby wave server
then they had like a titanium app which
titanium was terrible and we were
switching to just be straight up iOS
native app and I was kind of running the
team I was in charge of the mobile team
but we did a project where we were
trying to like consolidate all the
different methods that they had for
quitting this data an actual API people
could could work with and like it was
just was really terrible because we had
to work really closely with the
front-end team and with the the mobile
team to make sure that we were building
the API in a way that they needed yeah
and I think you're absolutely right like
graph qol just says like we'll just put
some date out and you tell us how you
want it yeah it reduces friction yeah
and I think more people who adopt grab
20 on mobile devices are going to have
way better user experiences because
right now it frustrates my mobile
developers here are the lack of one
meteors data system and they don't
really we don't really need reactivity
as much so there's struggle with like
why do I need to use DDP I'm has been so
more efficient now you know doing rest
or whatever yes but even here like it
with the graph 2l it's like who cares if
i gave you rest if i gave you a meteor
method i give you whatever like who
cares you don't you personally don't
care right you're making the coolest app
ever you're making tinder and you want
to swipe left and right like who cares
like what happens you know so I think
that's enables people think like that
yes yeah I agree angry all right okay
totally hijacked uh Spencer's thread
here but it was it was definitely like
it's been on my mind I've been thinking
a lot about craft ql had a lot of
conversations about it this week yeah I
mean Spencer Spencer did his job he made
a stink yeah that's good I like this
article a lot yeah
yeah good article and I still think
you're right like there's valid there's
valid room here to be able to build a
meteor back end that that riac natives
happened mm-hmm cool so on to the next
thing we're going to talk about
astronomy two point oh now if anyone
doesn't know what astronomy is strana me
is you like if anyone knows what object
relational mapping is ORM I it's pretty
much like a way to kind of do like
introduce this like I don't know in
functional probably you make a utility
methods right essentially you're you're
actually putting like a schema on your
data right your collections and you're
also also putting like like different
utilities on how to to enforce the
schema and get values and save values
like sequel eyes is an MPN module that
wraps sequel my sequel and stuff is an
ORM what it allows you to do is define
models and create methods and find and
that's how you can take an ugly sequel
syntax and turn it into something like a
Mongo that find it's a it's mapping
certain functions to certain properties
so astronomy sorry that's long-winded
response but if anyone didn't know
that's what it is astronomy is the same
thing with for media applications and
I'm actually it's funny I really wanted
to use astronomy but like it's really
sucks that the simple schema Eric came
out with this or sucks for you what's
his name jaagi that a simplest schemas
Eric came out with simple schema first
you know because it just took so much
you know in these like package Wars like
it's all about like you know it's all
about first first movers and all that
like I a simple scheme of God just blew
up right and astronomy is like simple
scheme arts it's probably better than
civil schema it has a little bit more
you know you know there's like a lot
more stuff to symbol schema is very
simple and basic that's kinda why I like
it but yeah so I me to point o came out
and pretty much let's see like i was
reading i was reading
mute the new stuff right here there it
is so pretty much in 2 point 0 is if
they've added um not much actually but
it's a not much actually to be honest
it's just it's just a it's just a nice
nice little wrapper around a Mongo right
now um when I look at these types of
things I always wonder like do people do
people need all this functionality like
would you so you ever like when you're
when you're writing like server code you
want to be as like atomic as possible
you don't want to like fetched from the
server mutated in place and then send it
back because you know that might be
inconsistent you don't want to lose data
integrity but with with the astronomer
you can you can actually do that you can
actually am you take these is a you know
your data and then it has a save method
things like that and it actually makes
more sense for the client because then
you can have a little bit more direct
relation with the mini manga side of
things and like a form or an input field
oh I don't know personally we don't use
this in our app and it's because we
wanted like just a basic simple schema
approach and we thought that was we
didn't want any bloke code that we
weren't going to use um but that's
clearly opinion of a team like anyone
could use any of these like these little
packages but yeah I wish I had more to
say um i would recommend anyone checking
it out but really it's just it's just an
ORM and I think you will kill me for
just saying that but I think it's just
an aura to be honest yeah yeah I you
know I think the room is here for to
exist for sure oh I certainly like when
I first came to the meteor community but
like there was something missing here
and wrote a blog post about like where's
meteors ORM and kicked off a
conversation with a lot of people and
got him interested in projects like I
didn't have the time to get involved
with that kind of stuff and then like
yah he came out of nowhere with this um
and I I think it's interesting i was
never a huge fan
uh not so much simple scheme about auto
form yeah auto firm sets if excited like
the way you tie auto like auto form
options into your simple schema just
felt wrong like I don't really want to
put view layer concerns in my schema
yeah that's a little too I so yeah um I
don't know have you ever have you ever
felt like that you needed like thing you
needed this this type of software in
your in your apps like I did early on
right like I'm going to miss it from
rails goodnight it now like how does
your work place if we use okay here's
the thing that I'll say right I think
that Apollo is a project of the future
for meteor but I almost wonder you know
where would we be if they would have
embraced in ORM and it allowed them to
have multiple back-end options behind it
yeah which they did they did toy with
the idea you know they did the postgres
project and that kind of thing but um
nothing really came to to full fruition
as a supported long-term option yeah and
you know maybe you you look at active
record and realize that it in rails land
like that you can swap that out from my
sequel to a number of different options
um and as long as you conform to active
relations then you can use active record
and kind of back it by a number of
different data stores and you know maybe
maybe we be looking at something
different but i also think graph ql
solves interesting problems as well so
it's certainly a different way to
approach it yeah i mean definitely I
guess like I guess I'm kind of really
biased on graph kill right now looking
at RAF grill and having like under
humming understanding it having a lot of
understanding now like you know yogi is
trying to solve the the problem of a
meteorite now and he's doing a great job
but I wonder if this will change yeah
and I guarantee that people who are
using the different data tools
packages like this are going to hard be
hard to maintain but I think he's just
doing astronomy is like actually a
general project and he's using it for
multiple places right I think this is
just for meteor right so that's good i
mean that's good why would you say i
wish i could say more though well you
know I again I think if this
conversation came up two years ago I
would have been all over this well III
think now especially in the face of like
I don't we're not really i think i mean
we'll see simple schema maintained but I
mean didn't didn't air come out and say
auto form was gonna be maintained
anymore I definitely know what it clear
I mean the best way to look is commit
history and issues yeah and yeah because
you know those really speak more yeah I
just I think honestly like blaze is not
gonna be a thing forever and even with
community support it's not where it
needs to be so I mean some of this stuff
is just not gonna be around I I'm still
really curious to hear and I wish they
would have talked about in transmission
like what's the future for DDP I'm kind
of getting the impression it's gonna be
like you know whatever the community
thinks it should be at this point um
well I have a different thought about
live data and how it's gonna gonna go I
think why data actually will still be an
option for for meteor abs and I think
what they're going to do is actually
give it more fine-tuning so they can
people can use live data in outside of
meteor app fine tuning manga well I mean
like in like our next post is about
exact topic yes yes yes exactly a good
segue ok let's go into the next topic
because this is what I will carry out
you go Chris alright yeah so uh meteor
meteor who finally with the 1.3 release
added the ability to say disable up i
log true for queries on your fine calls
right so server and you're doing your
publications you can say
i log and it's going to not monitor that
through the OP log anymore so i still
think we're not a hundred percent there
and everything that we need but i think
Marco maybe has to change before the
other side of it right because you still
have to process those updates for a blog
true query right and so if you have
something that's like pushing a lot of
Rights into the database you probably
want to move that out to another
database which is when a handle and just
a disabled off luck true when your query
and you're gonna fall back to a poland
if and it looks like and so I i was
actually digging through the commit
history and i think that this was in
there and that got pulled and they got
reworked and then got added back in and
that's why there wasn't a whole lot
about it maybe in the initial launch and
now we're hearing about it 1 30 to 40
what is it here's a funny thought would
never have you ever been like I've never
been those situations where like someone
who works at a company like writes code
for a certain thing and they let us say
they leave halfway through okay and then
the next guy comes in he tries to
understand the code or girl comes in
tries to understand the code and they
like I don't understand any of this so I
pull it out and then they arise it again
but that's not what happened here I just
no no this was actually from the looks
of it this was contributed by meet are
from what I could tell so this was
actually some of this was contributed by
outside community which was at and he
always does a really good job of like
yeah but there was um there was some
some kind of back-end issue with some
other packages and it broke some other
packages so they had to like pull it re
release and then rework in put it back
out um yeah and so I think the thing to
understand here is right like you have
two different options right you can do
the poland if or you can do the applaud
and the poland if is you as the server
saying hey it's been ten seconds let me
check again is there any new data and
the server like the Mongo server will
respond and say yes or no and then
fetch at data and return it to the
client right that's the polenta whereas
with the hot blog the server is just
sitting there pretending like it's a rep
piece of the replica set for Mongo and
it's it's just it's getting data fed to
it as it's changing and so your servers
just sitting there watching this big
change log rush by it and picking out
the pieces data it cares about and then
updates the client so the big difference
is you know you're not for the most part
if you don't have a lot of Rights you're
consuming less CPU I think the memory is
probably not really any different one
way or another but the the biggest thing
is like number one like have you ever
asked someone like how real time do you
need your data to be yeah and everyone
says not that real time right which is
right because like we're for the most
part we have no way to say like we don't
care about this data being real time
like that's still the missing option
here perhaps yeah but you know I in my
conversations with clients like they're
tolerant to like 30-60 seconds something
in that range and see how you can you
can now tweak that as well on the
polling decide there's some levers you
can use to kind of decide when you're
gonna check for those updates and that
kind of thing where'd it go pontiff
tuning where were they Oh tldr so even
now you can set the polling interval in
the polling throttle um which i think is
also knew there was never a pulling
throttle before uh which is to say like
if we've seen an update within the last
I think it's 500 milliseconds by default
yeah don't bother to check for one a
little while so um that that's kind of
interesting too so now we're starting to
e to the point where they're tuning the
Poland if ya which is where they could
probably do a lot of work as well yeah I
think so so like the problem with live
query and this is a horror story
is this thing called a great day at work
we call this the grave EDP flood of 2015
man literally it was like we have this
via this notification center and what it
does is it subscribes and user
notifications and pretty much what
happens is if if you're getting a lot of
notifications you're subscribing a lot
your subscribers or just go and have
your CPU is gone up because a lot of
people this is actually a really high
throughput subscription so the server
has to manage the OP logs for you know
thousands of people that are trying to
there and every page we had a bug where
your resubscribe in every page so it's
just like the biggest real flood of DDP
message super just like our CPU is just
high I think like we almost crashed one
of our containers but anyway it's
because if you don't manage live query
that people say they don't want
reactivity well if you don't want
reactivity you have to manage that
because if you don't control reacts
activity you will screw yourself over
like really bad your users will hate you
it'll take a long time to load pages
also if you're using iron-router oh good
luck good luck even rendering and having
fun rendering pages like the DDP flood
is real it should be aware of that yes
absolutely i actually think it's more
than that right like it'sit's i've had
instances where I've had to parse out
like over a thousand records to get
aggregate data on the page and it turned
out like that was actually really bad I
think was seven thousand records and so
what happened is we were getting reports
cuz was a phone app right Oh Cordova and
it would just make the page wouldn't
load and so I was trying to figure out
why and I ended up using the simulator
and attaching the console to it and what
I ended up seeing is the WebSocket will
crash when you push too much data
through it it would crash on the browser
and this was across firefox chrome and
support that I saw this happen I
actually think it's a problem WebSocket
itself
uh where you know it just it could only
handle a couple megs of data and then it
toppled over and then what meteor does
is it thinks oh well we got a fresh
website let's go get data until age
though with the the flood that we got on
the server right is because load that
page and then they would just it would
look like it's loading it would say it's
loading and then a ball it again yeah
people gets here if you look at your
frames you're you're like you're
creating new sockets and you'll see a
whole lot list of them young lot of them
and they're all and actually the only
the first socket got the initial payload
all these other sockets are ping pong
you so they're not even doing anything
for you right right 52 they're trying to
know they were so what I saw is like
each new one that would be created would
try to go fetch the data until it
crashed again oh the ping pong would
stop right because that was a dead
WebSocket at that point um but you know
you're still like you're essentially
like distributed denial-of-service
attack on your own server well a couple
clients would just be hammering the
database at that point yeah honestly
like for me and there's my
recommendation for people use disabled
ah blog truths that should be your
default setting like for until you
really need like I would I would start
with I would start with this label op
log and enable it when you need it
that's how I would approach this no
because it's really hard to pick and
choose once you've enabled everything
it's hard to pick and choose what
dependencies you have with real-time
data and like I mean so the thing I
would say there is like that's a
significant CPU difference like with
crater I've seen like you know a 20
users we were starting to spike out the
CPU 20 30 users and what I want to
handle like 200 per server well before
we're even getting close to spiking the
CPU but again most of that's going to
depend on like what you're right pattern
looks like and all that kind of stuff
yeah yeah yeah if you have a right
intensive app meteor little little
painful to scale it maybe that would be
good you know there's a there's a UI
library
that can help you like manage all this
complexity I'm trying to say way I'm not
good at them man I'm not gonna been so
much better to say ways um but do you
want to say way what scope and you have
a lot of data out like how do you
control that for the client okay there's
a segue yeah the next and last article
I'm new guys it's all good i'll get i'll
get any of all this stuff i also been
very confidant controversial today cuz
i'm going to say some stuff about this
in the next article too so this next
article is called a bridge between redux
and meteor I Gabriel polka I hope I said
that right um and he pretty much
explains how applications stayed today
or before redux and that's what we're
talking my redux it was done through
collection sessions and reactive are not
blogged about this before and those are
like the state management tool for the
client like that session variables which
we know are evil and if you use them you
should feel ashamed of it your show
collections are always I think the most
powerful reactive dictionaries are very
powerful and reactive ours all these all
these guys wrap track the tracker
library media chapter library to give
you a little reactive you know tracker
bound variables more processors like
mini Mongo or collections now the
problem with this and the problem with
tracker is how it invalidates itself
right any any any dependency chain and a
tracker function will rerun the whole
function so once again with his live
query stuff if you don't manage your
tracker computations you will screw
yourself over again if you like let's
say you could technically get yourself
an infinite loop if you update something
is a function that you're reading it and
you get over these things can
happen right so I can I can so if you're
not careful but and so converse to say
in his thing he's saying that redux is
actually very predictable way of
managing all this state and because it
comes with you know a bunch of cooling
you actually can feel more comfortable
managing your state
a client I mean he actually what he does
different than what i would do is he
actually still uses mini not mini manga
but Mongo publications and subscriptions
and he actually autoruns cursors and
when they change 20 dispatch some Redux
action to the to the to the store so
this is interesting there's a guy named
Liu Shi who's in the meteor community
it's like a space dojo slack channel and
he actually his implementation was to go
into DDP itself and when didi ki was
pushing down objects from the server it
was going to actually put them in a
redux store for you much much like much
like Apollo and what we do at Apollo
when we take actual data and put it into
a redux tour for you he had that
implementations you thought what that
implementation is no one really felt
comfortable so when putting some stuff
into DDP like no one felt comfortable
with SAS which I think that's why I
didn't get a little bit bigger you also
lose see if I should keep working on
that bro cause you kind of dropped off
calling you off um but if you kept
working on that that could have been a
de facto solution for people trying to
use meteor data directly what Gabriel
suggesting is actually just using
tracker in tracker and you know
publications to autorun them and just
essentially like essentially connect
these connects like subscription data
into your component and that's cool and
I recommend anyone to try it it's really
elegant the way he did it now what I
disagree with is I don't like that
you're using meteor data and it's meteor
data tools and kind of like using
tracker not a way it's supposed to be
used kind of deal right if I want to do
pub/sub I automatically are going to get
a mini manga collection I essentially in
duplicating my data now if I'm using
mini Mongo for let's say I do if
messages are fine I have that data and
i'm subscribed to it all
in a mini manga collection there is no
point to then put it in also in the
store and that's what I kind of struggle
with these patterns when because there's
no one no one is disabling mini Mongo
here they're just adding the store
you're adding another piece to your app
which I don't see is valuable you're
duplicating now on the to say this again
if you use methods you're not actually
using mini Mongo you're returning some
response what you can do is you can dump
that into a read up store and it's going
to be reactive in the sense of its
reactive is it's like it is like a mini
mazel cash as well and I think if you're
using Redux and meteor you should be
using meteor methods to fetch data until
the Apollo comes and works for you
because then that information is super
clean you could do the Luo Shi way of
using DDP directly which i think is the
cleanest way if you're gonna but there's
no point duplicating data on the client
like I mean it's free i guess you can do
it if you want yeah yeah i would i would
agree with you like hearing the
comparison right so here's the thing I
man used read up yet and I'm like I i
get the advantages of it um and you know
I just I haven't fully bought into it
because there's no you're right like
there's no great integration point
between a meteor back end and a redox
front end you know there's there's
different ideas you could try wobble no
one's really figured it out and you know
maybe maybe maybe Lucy's where would be
good maybe a graph ql is is the answer
and you moved to Apollo um but I you
know again that's that's gonna be a
while right yeah um so you know from me
like what I've done so far with react is
just kind of what you were talking about
the different tracker kind of component
configurations that that are available
out there I think they're interesting
right you build a container that's going
to fetch your data for you and then it
passes it down the reactor II as props
to
the different components that you're
putting on the page in boating and I'm a
fan I think still of tracker react like
I was confronted with figuring something
out because client was on a get meteor
data mix in still yeah terrible and you
know like looking at it it just it
encourages bad patterns like you know
III have the benefit of hindsight and
seeing what good patterns look like from
people that came before me and like the
way this app was built was actually
really bad um but I I think tracker
react get you as close as you can to
being able to not tie all of it up into
one method which i think is what meteor
if you look at the guide is still
encouraging right they stave got there a
container version which similar to track
or react and you're kind of dumping it
all into one area and then you know if
anything changes in there like you're
talking about you got to rerun that
entire function again which is not
really what feels like you're you're
kind of not using react to its full
potential and so I think like tracker
component tracker react both allow you
to kind of get that slightly more
granular layer well those are the two
that are interesting to me and therefore
like i'm using pub/sub to get my server
side data in and then using one of those
like tracker react or something what
kind of handle updating when that data
shows up and then also i'm able to use
reactive VARs to do the kind of the
clients eyes that see that is that is
that is a probably recommended approach
for people who are building for life
query system yeah for example work pop
we started moving away from pub/sub
because we have now we have new data
needs there are always going to be in
Mongo we have data in some micro
services so why you know we didn't we
also from the UI standpoint we do not
want to deal with unexpected rear enders
that we would
still see using tracker not track of
react with the react meteor data thing
you know and at that point what we did
is we just we we thought about the
problem we thought about well you know
what do what do we need to to what do we
need to do in our workflow for our users
to refresh data or mutate data what do
we really need to do and what we thought
what we thought was well it's actually
we just need to get some data on first
load and there are certain actions on a
page that probably want to refresh and
once we define like okay what actions
cause refreshes really found out there's
only two things on the page that would
cause a refresh right as and so then now
you like isolated the problem so I we
ever run into the situations where if
users do these two actions then we
refresh the data but then then it's like
a static site again like we don't care
you know just chill on the page the
other data you want there's no light
query we don't really need you to update
stuff you know and this is actually
called the client requests it's like a
client requests pattern and that's what
Apollo is actually built like today if
you do mutations the data that your your
maps to your component as a refresh
property and so you can do some mutation
and in a call back and say refresh yes
and right now you it's not as magical as
tracker but it's predictable and i think
i would i would always emphasis
predictability over reactivities right
you can always you can only speak
reactivity you know you guys like fake
it well and it's true this true as a
programmer we're magicians just make a
freakin illusion and it'll still be as
if you were using live query no one's
going to know right right so that's the
kind of approach that we've done and now
that we see Apollo that is pretty much
adopting that approach but with grab ql
and we're doing the same approach
essentially with the meteor method and
DDP like work it makes more sense to to
do you know Apollo okay because there's
more options so sorry for the ramble but
Gabriel had a great article I just
wanted to give my little point on pretty
much David yeah no I mean I I think
that's great like there's
people that have heard about redox maybe
don't even know what it is and they're
not sure like you know you're looking
around and trying to decide how you
gonna do it you know yeah everybody has
a slightly different idea at this point
because there's no great one integration
point from meteor itself mdg I guess
yeah and you know you're absolutely
right like to the point of you know that
problem i was talking about before where
the websocket was crashing huh it turned
out like the client didn't even care you
know we asked the client lake would
seeing updated data every three minutes
be okay and so we moved from having
thousands of aggregated records on the
client to running an ad query every
three minutes on the server and dumping
it into a collection yeah we pulled from
that collection the clients like yeah
sure let's let's do five you know and
I'm like whew it's even better for
performance so uh yeah I would
definitely agree like it's it's always
easy to go back later and take out some
of that data yeah it's yeah that's why
that's why I'm saying like disabled blog
first and figure out when you need it
figure out your reactive because like
reactive is not necessarily real time so
that's people should understand the
difference like reactive means that by
doing you're writing code in its
declaratively so things update like
excel real-time means literally
real-time like data is updating over the
wire instantly so you should define what
your real time needs are your finals
your reactive needs are if you don't
need real-time then don't even think
about it today I almost feel like this
this problem would be solved if we had a
way to authenticate with DDP across
microservices medical that's the missing
piece right because if if you have
something that is right intensive you
can move that off to its own micro
service that's it sounds great but
there's no way for you to say like oh
hey but I am a user over here on this
micro service we're lacking that's
lacking right now you
yeah you need something like the the
JSON web tokens or something jogs a
sport yes it's a if anybody's looking
for a good like Mia middle to your auth
service that it's like not meteor you
can use this micro servers called
authentic and authentic is you know just
what I said it uses JSON web tokens and
I allow you to build like an actual
authentication service that probably can
plug into media I haven't done any yet
but good because of those get replace me
here accounts I I don't must be much
more of a fan of seeing someone like get
passport integration going with like
meteor accounts or something and using
Jason's that would be super interesting
and you know that that's one thing I did
ask sashko is like you know looking at
how everything's working right now with
Apollo lake could we could we do it with
password then like yeah we actually
already did we just need to get the
examples up in the docs and I'm like
that's well you know like that's that's
a well-supported project with lots of
authentication options and yeah totally
I i honestly think like i would see the
media community is going to become more
microservice crazy because the
opportunity is there and the ability to
do so is there and you're going to see
things like accounts break out into
micro services and you can probably
expect some some tutorials and you know
a little helper packages bootstrapping
that for you because you know what every
app need authentification right I don't
think you know like this the the resume
ID the resume token stuff up like that's
cool but you know I think you gotta go
with the industry we've been moving
towards these web tokens yeah JWT
totally agree um and you know that's
that's the pain point like I don't want
to deal with that again and I've liked
not dealing with it a whole lot since I
moved from rails to mediator you know
the account system is just there and
whenever they make an update to it they
care about my developer experience and
backwards compatible as much as they can
and
like that wasn't there in the rails
community it was like oh use restful off
oh no today we're using like this other
standard that okay gosh I remember the
name of it now um Jose blim the guy that
create elixir created a popular option
back in the day and then you know after
I laugh like they had ten different
other ones that popped up and i don't
know you know flavor of the week rails
fatigue it's real reals patine yeah
that's good that's good topics yeah
definitely and we got to interlace a lot
of Apollo talk as well so that was that
I think you guys will expect more Apollo
stuff definitely definitely all right ah
be well thank you for this inaugural
episode number 101 say sorry for being
so controversial today not at all I'll I
embrace controversy no nuts well good
and I'm all the authors like if I was
controversially it's not against work ya
know it's you know we don't want people
to get the wrong idea but yeah I
appreciate all the work that you guys
have done for the community with your
contributions but I do have my own
opinions oh well you know I'll say in a
different way like we're never gonna
know what's right unless we figure out
all the things that are wrong first you
know and and that's not some of these
things like someone else may come along
and read it and be like well I just like
to hear him yeah so raven I don't know
could be interesting and that's not to
say Abby's righty they're totally so
yeah I just saying okay yeah and oh yeah
josh is always right so no no not as
always big thanks to modulus in digital
ocean first sponsoring the show if
you're interested in hosting services
definitely check those guys out modulus
town I own two Jewish calm and patreon
patr un calm / meteor club if you want
to get into the slack room
I think I think we're hitting slack
fatigue maybe we're getting to that
point things are slowing down on the
signups so I'm going to I'm going to try
to think of some new rewards and
exciting things that can come out of
this show and other shows so yeah being
a slack chatter is actually pretty
valuable you get to talk to a lot of
media developers people who are actually
making applications and stuff so and
everyone's like really willing to help
you I'm there ok you care what I say I
can talk to you there it's you don't
tell me the joy news yeah girls we need
more girls do you say yes yes definitely
yeah which I'm gonna be putting up a
crater code of conduct soon too that'll
be interesting yeah it's about that time
and it all applied to the space diljit
slacker as well yeah part of me probably
gonna get kicked out probably oh man oh
well alright guys as always tune in next
week and we will be talking more
JavaScript news yeah this video has been
in space dojo production you can click
the learn more button to find out more
about us at space dojo com or in click
the subscribe button to get notified
about new videos we've put out each week
thanks for watching</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>