<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Meteor Mentor Josh/Asger - Session #2 | Coder Coacher - Coaching Coders</title><meta content="Meteor Mentor Josh/Asger - Session #2 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Josh-Owens/">Josh Owens</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Meteor Mentor Josh/Asger - Session #2</b></h2><h5 class="post__date">2016-02-06</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/5ErqvPbMd_g" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">welcome to the meteor mentor session
number two if you're looking for session
number one I don't think it got posted
so try to keep it pinned antic though so
far it's just myself and then bury
welcome Barry thank you glad to be here
yeah uh so we're supposed to have some
more people but I thought it'd be worth
at least uh just chatting and working
for any questions you might have Barry I
guess one on one uh yeah definitely um
the the main big thing I'm trying to get
my head wrapped around is the OL um BBD
TDD workflow um I I have it down to
where I can easily write my scenarios my
use cases I can even write my unit tests
but where I get bogged down in is
figuring out what testing software I'm
using with meteor and how to get started
implementing it like I look at my my
empty project and like where do I start
I've read for example the the meteor
testing book that you and um Matt we're
working on um well obviously needs to be
updated so just winter if you could
expand where I should start from there
sure so um I think maybe you're talking
about Sam's book yeah Sam yeah yeah I am
about out of the book that I was writing
but um sorry i haven't had any food
today but um yeah for me so it sounds
like you've written a couple english
language scenarios and you've written
maybe what you think would be a unit
test is that what i heard right that is
correct and so you have an application
that you've created already or is it
just brand new like you haven't done
anything yet I built it up and then each
I start over I'm like I want to build
this right with okay you know I
test-driven development but I get
totally stuck okay so the first thing I
would say is like you know um probably
someone similar to the along the lines
of like what i said in the butt does me
to your scale post like I think testing
is good it's a good thing to learn but a
hundred percent test coverage is not a
goal that you should have and even you
know i would i would go light with the
testing until you have an idea of you
know I I don't know why you're building
this app but if you're gonna build this
app because you want people to to pay
you money then i would say you know go
light on the testing until you have a
better idea of why they're gonna pay you
that money does that make sense yeah
absolutely and so that's when you're
getting started that's a bit of a gray
area but let's say instead you're just
doing an open source project and you
really want people to be able to
contribute I think testing is super
important because if you write a test
for code you're basically declaring the
intention for what you want that code to
do mm-hmm and once that intention is
declared in a way that's runnable then
it becomes easy for you to see you know
when someone sends you a pull request or
something did they send it with a test
if they didn't you should tell them to
write a test so that they can declare
the intentions for the code they have
and then also you want to make sure that
the CI server is running and giving you
test feedback to say oh hey there pull
request kind of broke what you were
expecting to happen and so with that in
mind I think if you have some scenarios
I would personally recommend I mean
that's that's kind of the cucumber way i
would recommend starting with chimp and
getting your scenarios up and running
and that sometimes that can be difficult
but I think that's especially for an
early product that's really the best
thing you can do for testing I think
unit tests are great for when you're
when you're diving into something hard
like let's say you're dealing with
changing time zones or something or
trying to change
the time to fit in the users time zone
like that's maybe something you'd write
a unit test for or you're doing some
kind of math or something you know you
want that to be accurate it basically if
there's multiple like logic branches
then a unit test is usually pretty good
think we lost him so if you're watching
online and you were in the the mentor or
the the meteor mentors chat room I
posted the Hangout link to your welcome
to join happy to have more people in
here even if you're not my mentor group
see what happened hey there we go hey
sorry about that i had a power blip oh
wow yeah you can see you later loungin i
live in the country so uh so where did
where did it drop out for you what was i
ah well we were just talking about i
guess the the purpose of of testing if
you are going to give back to the
community and a package um oh yeah yeah
so if it's open source i think it's
worth yeah probably writing those tests
upfront and my recommendation personally
would be to use chimp and to use mocha
and cucumber with jim i think that's
that's going to be the most
full-featured offering you can look at
right now I'm now I'm feeling the
testing books going to be updated to
kind of follow those those practices and
there's a great see if I find it there's
a great link saul v 0
Sam's done a great job cut like a repo
here we go automated testing best
practices see if I can share my screen
oh yeah I have seen that one I'm ready
yeah so I would recommend giving this a
look you know they're they're pouring a
lot of time and resources into it yeah
sorry you puppy um and they're they're
really trying to keep all their
knowledge in this area so you know
they're they're looking at how best to
run a CI server and that kind of thing
so I mean they're they're figuring out I
think you know if you look at at
velocity and what it was and kind of the
confusion with it being handed back and
kind of being dropped by meteor that
really just came down to they were
trying to mod mediacorp and meteor core
wasn't accepting their pull request back
from a and so they were trying to port
it forward for every new version but I
think it was just becoming too
time-consuming and so they decided to to
just pull away from that and instead
write chimp and build something that
that is a little easier to use and it
doesn't have to mod meteor in any way
cool awesome so i would i would say
start with those scenarios and try to
get those running you may have a little
bit of trouble getting them working at
first but i think it's a worthy goal to
work through because as soon as you get
one working you'll be able to write a
couple more and i think those are you
know when i I've taught a class a couple
times on testing and I think the key
thing is you know what I call the golden
path or the happy path test that stuff
first and if you think about like Oh
what what exactly does that mean it
means like but we actually had a
scenario at a business that I was
working in where they came in and they
said
you know we release some software and it
broke some stuff and our CEO was was
giving a demo and pitching for money and
like he couldn't show off the product
and so like the happy path or the Golden
Path would be anything that's in that
demo that the CEO is gonna give right
that that stuff should be tested and you
should know it works before you release
so okay awesome that make sense yeah
definitely ok so I'll just keep at it um
I muscle interested on your take on some
of the new stuff going on like have you
taken look at mantra and how do you have
any feedback on you know any problems
you see with mantra or um Genoa I've
looked a little bit at mantra and uh you
know we talked about a little bit
yesterday on the podcast too and my
thoughts are you know I I think mantra
is super interesting and I think that
really if you look at it some of it is
they're writing little libraries that
that makes sense that they need in order
to to build their application and then
some of it is really just their take on
best practices right so it's kind of
like it's a few libraries that are
different and then it's also like its
own meteor guide that they're building
essentially and super interesting to me
I think the reason that we're we're
seeing it happen is because a meteor
itself like the core team isn't very
accepting a pull requests and that kind
of leads the whole like is meteor really
open source that discussion which has
been quite active on the form as well um
so I I think it's totally fine you know
if you want to take a look at mantra I
think you know to me as I said on the
podcast like hey goofy dogs um they uh
you know the mantra team is is building
a real application that they're you know
staking a business on whereas up until
maybe a couple months ago meteor itself
mdg wasn't really
building any kind of software with
meteor right they were building mediator
build meteor whereas Khedira's building
mantra because they're trying to extract
their best practices out which i think
is a worthy goal and it's if nothing
else it's worth looking at to just I
think it's another way that you can kind
of understand what's going on in 1.3 I
think they have more documentation for
meteor 13 the meteor itself has right
now yes so that you really have to dig
in to a lot of forum threads and github
issues to kind of figure out what's
going on in 13 which I've been doing and
it's not terrible but could be easier if
they're there were better docs maybe
yeah okay um well just keeping on the
front edge of everything have have you
used graph ql have you scored around
with that and its potential no I really
haven't um I've kind of you know I so I
try to explore things when it makes
sense for like the teaching part of my
business all right and I don't I think
graph ql is interesting and I'm excited
for reactive graph ql but i don't see
any reason for me to necessarily dive
deep into it right now I think if if I
if you want to dive into graph ql right
now there's nothing wrong with that but
you know you're you're probably gonna be
ending ending up down the path of like
relay and redux and and then like you've
got this whole stack that isn't
necessarily meteor and for me like I for
now at least want to stay kind of
focused a meteor and you know what i
look at my business the things that are
much more interesting to me are building
mobile apps with meteor and so you know
my next focus is going to be cordova
with 1.3 and getting the class out for
that and then maybe even looking at
react native either by itself or if
there's
I you know we're hearing that may be 1.4
will have some react native integration
to it so that could be interesting as
well yeah that would be amazing so
besides working on me a meteor and
mobile is there anything else like
really exciting a meteor that you're
you're playing around with or yeah I
mean I guess just 1.3 in general like
I've I've forced myself to utilize 1.3
for my upcoming client project and like
I said it's maybe a little painful but
at the same time I want to I want to
know how to build a 1.3 app I want to
know what it's going to take and how how
I can rely on node modules and that kind
of thing so like that that type npm
integration looks super interesting to
me you know now you can just go in there
and look the project has react i think
the only thing that i've installed off
atmosphere so far has been flow router
so it's not react it's got flow router
i'm using the react mounter that I think
mantra it was written for mantra um
excuse me i'm using the haven't used
react composer yet but that looks
potentially interesting as well you know
being able to compose those higher order
containers that kind of thing so yeah I
was actually trying to figure out what
things from atmosphere we still need or
what we can move on to NPM for like I'm
still using meter hacks SSR for the UM
and besides that and what you listed I I
think everything else has been NPM
packages I've been playing with
integrating so yeah yeah totally and if
you look at like you know this is this
is a sore spot as well but um like this
there's no reason for a foundation or
bootstrap or any of that stuff to exist
in atmosphere right like they're
punishing p.m. packages and
they're really you shouldn't be any
meteor specific code in there so we
should be able to pull those in the only
problem is the sore spot is coming from
the fact that there's no way for you to
get past less or SAS files out of a node
module right now and say I'm kind of
hoping you know that there's already an
open issue about it Benjamin originally
said he didn't think it was necessary
for 1.3 I'm kind of hoping we can get
enough people kind of piling into that
issue and get that fixed because I think
it would be amazing to to not have to
have all those kinds of packages in
atmosphere I want to want to keep that
focused you know so for me like the
thing that I'm trying to figure out now
is like I want to build a higher-order
component that will handle the login
stuff for you and you can wrap it around
any other kind of component that you
want that requires a login and if
they're not logged in it'll show on the
login page you know right absolutely me
that should live probably an atmosphere
because it's a react meteor specific
react package um just to jump into a
unit user interface and components like
I actually see a lot of people doing
inline CSS with their components so um
for me for my back I'm like what I
thought we got away from that well
what's your take on on inline CSS or
components and once that to make sense
but yeah i i'm i don't know i'm probably
not the best guy to ask on that um i
generally work with a designer so i
leave those kinds of considerations up
to to someone else so i think the
downside is that if you in line the CSS
then it becomes hard to kind of cash
that and have that kind of separation of
concern and so if you use a tool like
why slow or Google PageSpeed like you
can look at that stuff and say well when
we extract out the CSS into its own file
that
like a known thing that we can then
compress down right minify get as small
as we can in gzip it and we can deliver
that to the client and it can be from
anywhere right it doesn't have to come
from the web server can be cashed in you
see the N or something like that and so
there's a lot of benefit there and I
think using the inline styles you lose a
little bit of that I also think um the
other thing that is maybe a downside is
the fact that it's hard to override
inline styles right the inheritance this
subscribe inline style will always take
precedence over whatever you have set so
there could be some funkiness there but
i think if you if you're willing to
accept those downsides then you know and
you still want to do it and you have a
compelling reason then i would i would
say it's okay in my mind okay um
something I've been thinking about to
not clear on is sort of like the whole
code splitting imports like if you put
your modules in an import folder does
that mean they don't load and tell their
cold or is everything I it at the
beginning um you know i'm i'm unsure how
that's gonna shake out with 1.3 i think
it's still kind of happening so codes
letting is maybe a little bit different
and i'm not sure we're even gonna get
that in 1.3 all right but it's the idea
like if you look at crater you have kind
of the front end right and someone comes
along and loads the the front page and
they just want to read some news but
what we're actually delivering in there
is all the JavaScript to make all the
entire website work and a lot of those
people don't care about the admin code
or any of that kind of stuff and so code
the idea of splitting is like I should
be able to say only load this code when
you load this page and only load that
code when they load that page right
right so I can separate those out and
instead of having a 2 megabyte
monolithic kind of minified gzipped our
ball
whatever of code instead we can have
like 100 k over here for loading the
news page and then maybe you know the
rest of it is kind of split up on the
pages that will be loaded as you load
them and so that's kind of the idea
behind code splitting and um I think
it'll be good when we get it but I you
know my my thoughts are we may have to
integrate with the router to do that uh
you know there's gotta be some point
where we're picking up the split and
realizing like we need to deliver this
file so yeah I mean I could see it
happening with the module system um it's
possible but I don't I haven't seen any
kind of talk about it and regarding how
they're um okay what I'm curious about
is what's your deployment set up for all
the different sites here I like is it
all the same thing or do you have you
use a bunch of different services like
what's crater i/o running on its right
now it's on digital ocean and I'll say
you know the only reason one I wanted to
try out galaxy they didn't give me my an
invite fast enough and then even when
they did they said you know we're only
gonna we're gonna limit it to five
containers and that just wasn't
compelling enough for me to move so I
really haven't tested galaxy out yet um
I think modulus is is great it's a
little little pricier than galaxy but it
can be a good option as well the biggest
thing is really the database and making
sure you have a blog enabled and so I
would look at compose or mongolab and no
matter what you do like if you're a
galaxy or you know modulus offers you a
database but they'll tell you like if
you ask them honestly what they think of
their database hovering like they'll
tell you it's pretty bad i would i would
definitely avoid using the Mongo support
that modulus offers and so for me the
key to any hosting platform is making
sure that you have routing between
multiple databases all right Dave
multiple app servers that supports
sticky session and so if you think about
it when you connect let's say you
connect to crater right yeah you're
going to pull in a bunch of information
about the posts that you want to see and
you're also going to pull in your
notifications and so that's anything
that's happened on the site since you
were away and those notifications are
specific to your user and so if you like
we're now tracking that in the server
right and let's say I have two servers a
and B when you connect to server a you
get all that information server a nose
that it's tracking all that and it's
kind of got it stored in memory so for
some reason you get dropped and you
connect to server be it's going to have
to pull that information again and so
that's what when it comes to like sticky
session support you want to make sure
that you turn on something you know with
with a che proxies a little cookie and
it'll send you back to that same server
again with engine X which is what i'm
using for crater i'm using IP hash so I
look at your IP and then run an
algorithm and then send you to server a
or server be right and so you're always
like that algorithms always going to
come at the same thing to try to send
you sir Bray and and so will make sure
that you always connect back and so you
know we already have that data we don't
want to put additional load on the
server so you know if you drop your
connection and connect back to server a
you know you'll you'll have everything
there and it's going to be a lot lighter
so that that's that's kind of the key to
hosting and most of them you know Heroku
modulus galaxy they'll support that and
you can configure hei proxy or engine X
to kind of do the same thing if you're
gonna build your own okay yeah now I've
been using in genetic so I was wondering
what are you using to route between your
different apps and engine X um I did
I've got to write the article but i did
a custom compile and put in the upstream
health
check module and basically if you look
at H a proxy it so the way it works is
like you'll connect and if the server's
down it'll market is down and stop
routing stuff there that's how engine ex
works a chip roxy differs and that i can
actually go check the server and if it's
down it'll pull it out before it even
sends people there so if it's checking
every you know second and the server
goes down chances are people aren't
going to see like a 501 or 50 to air
right yeah instead engine X will sit
there and wait until it gets that 50 to
air and then it'll pass that back to the
client and then it'll mark that bring it
out of the pool and then it'll it'll try
again and a little bit to send it and so
that's not ideal so that that upstream
health check will run an out-of-band
health check and then mark available
servers they're available or pull them
out of the pool and stop sending traffic
there so cool thank you hey welcome Tom
jump been ya are I guess he's not there
anymore yeah yeah I don't know maybe we
lost him ok ask tom there we go hello
I'm back in hey Joe us welcome all right
yeah yeah thanks I good to be here good
timing i was just running out a question
so you can jump in now or not um yeah um
because I as I said I didn't have to
have my kid today and I um he slept
early so I could you know jump in nice
um but I guess so last
a bit of eating and one of the basic
questions that I had their how wouldn't
I hmm is he cutting out for you yeah
okay uh maybe you can type type of
question tom we're losing you quite a
bit there
sir way he can turn just video off and
just do audio it's possible yeah I can't
do it he'd have to do it on his end all
right ping him on slack maybe like
waiting in anticipation for the question
yeah me too we've got this burning
question and it's at last you come on
I've got this this funny script that
checks every 10 minutes and shuts down
slack if I'm not actively using it so I
won't spend too much time and slack yeah
like it literally just started slack and
it was in the background and it closed
it okay well Tom sorry am i back they
are yes oh yeah yeah really bad
connection I'm sorry for that that's
right and don't want people to think
Germany's a has no good internet but
yeah anyway so I started asking about
NPM libraries that don't have like the
error call back as last argument and how
to properly wrap those because you can't
use meteor pacing yeah and I was just
wondering and how would you approach
that hmm honestly I don't know I really
had to do that yet so most of the
library's I've had to depend on do kind
of have that air call back so you can
properly wrap it um what I mean what
what kind of library are you talking
about like is it just for like query an
API boy I was a I think I stumbled upon
it when i try to integrate cloud inary
mmm you know that yeah I've heard of
cloud an area before I can you can sync
your picture
with the wood amazon so AWS and you can
basically query for images and in the
URL you specify how Mike like crop or
like thumbnail or stuff like that so you
don't always pull like the original
image size and they process the image on
the server and then just send the image
that you requested basically all those
are cool it's a cool service but and I
think in the end they return a promise
so you know from this upload thing they
return a promise and then you know you
can deal with that but that's well then
I mean I i would say that i'm pretty
sure that the promised library that's in
1.2 is set up to work properly with
fiber so you may be able to just I think
you can call like promise dot oh wait
and then it should do the proper thing I
haven't messed with it a whole lot
myself but what do you do usually do you
just use fibers or futures directly yeah
you can I mean that that's that's
totally valid and like early on I
definitely get a lot of that stuff and
so I've got some code somewhere that
talks about like or it basically it'll
fire off a call right and then you you
just do you just require your futures I
can find some code I can share in the
slack room later but basically you just
tell it to wait and to return something
and then it'll it'll sit there and wait
until that future returns and then
continue on with your code does that
make sense yeah it does it does like
conceptually I am I read a bit about
this I mean I looked at future is I
looked at promises and I looked at this
acma script seven async await um pattern
that i will introduce which seems to me
like the perfect thing yeah i mean
that's exactly what it's
what fibers is doing for you now or what
futures will do for you if you use them
which is built into fibers trying to see
if I'll get the code on this machine
private ah it's not on here ok on my
other machine i'll have to grab it off
but um it's really it's really not super
hard to get a future set up if that's
what you that's the direction you decide
you want to go but I'm pretty sure like
yeah so there is a meteor promise
package which is a polyfill and it gives
you that promise a weight right now and
so you could use that now let me get
this link for you yeah I stumbled upon
this promise package because it's right
one of the first one that comes up if
you search on it for the atmosphere is
really very little documentation on how
to actually use it yeah so what's the
shame yeah ah yeah that is kind of a
bummer so I would imagine as it is it do
you know if that is strictly the wait
async await pattern that will be
available later in es7 because then I
could just look up the documentation on
that part it gets a polyfill uh and it
tries to mimic what they're gonna have
in seven so I also I just pasted in
there's a talk that's listed in the
readme it kind of takes you through the
reasoning for an animal I'm sure it's
better like having his his words with it
as well but uh fiber okay he's talking
about fibers I'm trying to see if he
shows off using the library or not all
at some point there's a bit of code I
when I am when I group if i remember
correctly i went through them the slides
that's a bit of code okay yeah it talks
about a way yeah
just try that pure promises I guess I
should share my screen that's pretty
boring just looking my face all right
can you guys see my screen okay I can
see a screen okay okay yeah so here's
the promise so that really looks like
the like the a single wait pattering
that's going to be available later right
yeah see I don't think that's quite
what's implemented yet either now it
really looks like a talk why this should
be implemented it everything makes sense
like the thing to talks also called
something like that
you
you
huh I don't know yeah this this could be
an interesting experiment honestly to
just give this a try and see I've
actually got a use case I could try to
replace some code and could be some
interesting learning here if nothing
else a chance to give back with some
docs to still be valuable to the package
yeah
it's funny I read this one tonight now
that I'm like reading a little bit
deeper it's starting to make a little
more sense okay so the other thing we
can do I'm trying to look through the
tests usually yeah you can learn a bit
about how to use them when you look at
the tests I what I found yeah you can
also just look at so he sets up a meet
your promise
it looks like he's overriding then yes
six promised and you're looking at the
repo yeah you promised protocol in place
your rep call round here it is oh wait
yeah it looks like it's yeah it's
totally I think it should work just like
he's saying in there right you just say
a weight and then you give it a promise
and you called up you call the function
async async function in the you okay
yeah right oh yeah also I think it looks
like yeah he even sets it up here so
it's even available on the promise so
you can you can even just call it on the
promise da to wait and then it'll come
back and resolve the the call and give
you something back does that make sense
well if I have a promise then I can call
a weight on the function and this can
have a return value this will be only
available when the promises results yeah
exactly okay that doesn't it yeah yeah
so this will Wow yeah this will actually
make it a lot cleaner so you don't have
to mess with futures at all well let's
essentially have a future works so I
didn't try it yet so but yeah</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>