<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Writing DDP APIs to Link Realtime Apps - Ian Serlin - Crater Conf | Coder Coacher - Coaching Coders</title><meta content="Writing DDP APIs to Link Realtime Apps - Ian Serlin - Crater Conf - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Josh-Owens/">Josh Owens</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Writing DDP APIs to Link Realtime Apps - Ian Serlin - Crater Conf</b></h2><h5 class="post__date">2016-03-17</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/V9-iXPr-UHM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">this is a video of a talk from crater
remote cough given to a live audience in
February 2016 this video was made
possible by sponsors like modulus I oh
ok grow calm and space dojo calm if you
would like to find out more information
about upcoming conferences be sure to go
to conf crater on Io and put your email
in the form that pops up in the lower
left corner enjoy the video alright
welcome back crater fans so last talk of
the day is actually the first talk free
and it's like 5am where he is he's up
super early but we have ian is it serlin
is that how you say your last name that
is correct oh I got one right oh oh Ian
runs useful dot IO which is a consulting
shop and they built meteor apps and I
think you're going to be talking to us
about building a DDP API right yeah your
client totally uh sort of awesome
alright well I'll leave it to you 30 I
don't excited to be here I've spent the
last leg years are going around
different places in the world and
talking about meteor into different
communities it's fun to do one online
with such an awesome group of people so
thank you josh for having me on um so
yes I am ya done septic oh I so I well
that's crazy screen share let me skip
the I'll just go to hear so yeah here am
I my name is Ian I started useful I oh
and we are a team of five people have
been building meteor wraps for three
years now we're under the original media
partners you can check us out at useful
dot IO but basically now that we have
the caveat of it being five am where I
am in Taipei out of the way so apologies
in advance if something does
we make enough sense I'm hoping that
this talk will be both fun and sort of
interesting and my goal is to get you
excited about building more api's I
don't know if you could see my face and
the screen or not I don't know what josh
is doing behind the scenes but we will
just continue from there so uh why you
do I care about api's um basically I we
over a number of different projects had
a lot of different messaging needs
around email and all that kind of stuff
and turning that into a reusable API
that we could uh basically using all of
our applications that took some some
engineering and it should have been a
lot easier than it was but I just want
to switch over and show you a little bit
of what hail can do at this point so I'm
going to start the hail server for push
notifications
I thought it would start faster than
that okay so I'm gonna go to ya just
local losed here and Josh can you put up
my my screen too and I'm just going to
walk as best hog in sterling so this is
just like a basic application but it has
hail installed and hail is abased all
around conversations and stuff like that
so Josh can you give me a message to
type to myself hi from crater cop hide
from crater comms ok I'm going to hold
my phone up to the screen hopefully you
can see that so send a message and you
can see that ok so let's move to the
next thing I'm going to start the email
example and when this gets going should
be quick should be quick maybe your
build time supposed to get better and
better dead silence blackness and then
and then an application ok cool ok so
email example i'm just going to sign it
it's me and this is just a i'm not a CSS
person but do you like you x so it's
just a horrible-looking demo application
so give me another piece of text to to
write um
we're in the world of Sam had to him so
how to work her to get a to my okay so I
sent right and it's I am basically
another user that has logged in and and
watched the sale with the support
channel air so in a minute that should
probably come through into my email
anyway so why why do we even care
basically the reason i care is because
if i show you what it takes to actually
do like get that sent that it's like
let's take the pussification example as
most of this is just your basic lamp lit
blaze jazz and then what's happening on
the meteor server side is it's creating
conversations inhale conversation is
just a group of messages and a group of
people that care about them and i've got
push enabled for it and a template then
maybe i should have can we see that real
quick okay it's probably long enough for
it to be clear and then what's happening
is every time someone sends a message is
doing this conversation that's saying
but since we've set it up for push and
hail knows how to register devices I
when you have the hail package installed
it can send push notifications to you
know the other recipients in the
conversation without you having to do
you know anything else the same deal
with email we have the same just sending
the message in the conversation and then
in the conversations we're just setting
the initial conversations to have emails
with subject templates and then text
templates and you know all that sort of
jazz
so that maybe it doesn't sell you on
hell and here's our support message from
usefully into dr. Mario where in the
world is Santa zoom so this was put
through our template you know that's the
content okay so sending email sending
push notifications like not that amazing
I guess like we've all probably done
this at bat at some point in the past ah
let me just delete this promotional text
real quick while I'm talking so why is
that cool well like the whole point of
meteor was to have a really awesome API
for building applications quickly and
that was hopefully you thought only a
few lines of code to do something pretty
cool and like that's really the power of
API it's gosh right we all know ap eyes
are all about abstraction um so the
problem I have is that i'm always
dealing with these old-school AP is and
you know if you are looking at i if
you're just like setting the email
through manual or something like that
and you're just like you know
fire-and-forget type thing it's not that
big a deal um but you can if you use the
tools that video gives you to build
api's like themselves oh you know yes
they're over web sockets but you know
specifically api is designed for meteor
applications you can get a lot more bang
for your buck you can get a lot more
mileage because the meteor people have
already put a lot of thought into how to
get data back and forth with the whole
subscriptions and methods and all that
kind of stuff i would so there's a whole
bunch of like higher level set of
functionality you can do with minimal
amount of code that will help you to
build more interesting more complex
things quicker
so uh y-yeah so then one other question
is okay great if I'm going to build an
app from get a grilled an API for meteor
applications that means la materia
applications can use it well bull I mean
there's enough of us building here
applications that we have this online
conference now I think the last time I
heard kadir which is the performance
monitor for for meteor had like five
thousand installs like there are people
out there building meteor applications
and with the push in terms of marketing
I don't think that's going up from the
mdg side I don't think that's going to
change or go away if you're not coming
from you know a meteor background and
you're watching this talk thank you for
sticking around um what might still be
interesting to you is the fact that all
of this is happening over WebSocket so
you could easily build your own sort of
transport paradigm over but if you are
using me too you don't have to worry
about that at all so for the first time
you know I have anybody today I'm going
to zoom to the next dot we're going to
talk about what is a meteor API look
like um so there's a couple different
concerns right in normal video
applications you just have your user ID
but now we're talking about a connection
between a client that's outside like a
client that's separate from your server
so it's not the same as like just meteor
accounts and Josh can you can use back
can you skip to look like I want to use
my hands for a second so the heads up
probably up my ends if you can see okay
cool all right so if you're going to
have a meteor up api if you're going to
host a meteorite back you're going to
run a meteor api you have your meter api
server on one side and that meteor api
server might serve
can admin user interface to let people
register to use your API you know
generate their keys all that kind of
stuff and then the other two things that
you're going to have to deal with are
the customer apps that are going to be
talking to your API and you need to deal
with that in two places one on the
server side and the server side is
connecting to your API is traditionally
more trusted code so maybe that has more
more privileges to can do more things in
your API and then you have the client
side I the client side of your customer
application that's also going to be
connected to your GDP server and so how
do you do this identification between
these three pieces well but you always
have API keys and basically what this
looks like is you give one pattern is
you can give public and a private key to
each customer or client you know meteor
application it's going to be connecting
to your API public key goes to the
browser private key goes to the server
and now you have a secure way to have
privileged access to your API but also
allow all of your clients to connect to
your API all of the web browser and
Cordova clients to connect your your API
server too and that's important because
when we saw a couple bubbles ago one of
the things that your API can offer is
the ability to offload work on offload
processing especially things that have
to do with like things that are
expensive like subscriptions etc to to
your API server so that that person
doesn't have to deal with it they don't
have to worry about scaling their meteor
application to in that way to support
that use case they can just rely on you
or solving one use case for them and
they can build on top of that just like
just like anything else just like a
count space etc
so you want to have a connection from
each of them the client and the server
to your API server but you probably also
want to have the ability to identify
each an individual client that's
connecting to your API so each
individual client of like that
application your customer up customers
application that's connecting to you so
you can do things for that on behalf of
that claim like publish only the
whatever that belonged to that
particular client of that particular
application that's using your API I
hopefully that's sort of pretty clear
the way that works is basically a client
requests to register the way it can work
is the client will request to register
with its server with your API now
because the server is privileged it can
register with your API and return back a
personal key for your API for that one
particular client and yes this can all
be based off user ID and Josh jump in if
I'm not making any sense here but then
because you're securely requesting
personal key for that client of that
customer application then the
culmination of that public key in that
private key is enough to reasonably
securely identify that particular user
of that customer application to to your
API so now you can do things almost like
that person is literally logging into
your API so with that sort of said the
thing that I want to introduce our men I
put a spoiler myself down here I forgot
okay so what I want to do is show you
this with the work that we did with Hale
building meteor api's and the fact that
I've been talking to people about
building meteor api's for
a good little while now um these
patterns can be codified into packages
that you can use and that is exactly
what we've done so as of now you are the
first people to see this here you go to
github.com useful io / AP i dash base
you'll see the repo that has two
packages inside of here one is the API
server and one's the API client base
package okay so what is the server base
package do it I actually yeah so I mean
the API server based package is what you
want to install into your meteor app
that you're going to expose an API from
and it handles all the things like
identification and all that kind of
stuff in this little bubble here where I
said keeping the state so that state is
kept on the WebSocket connection and you
know I'm feeling like I'm just going to
start the example up here and talk
through this because maybe we'll become
crystallized in that so I'm doing two
things I'm running I i took the basic
meteor to do his example and turned it
into to do apt it's backed by an API
that serves to do's so what I'm doing
right now is starting it is hopefully
this this is big enough starting a to-do
server which is the API server and then
I'm starting an example client app okay
cool so let me first show you the server
to refresh this okay so here's what I'm
talking about we've got a list of apps
that have been registered with our
system and you should them as a public
and private key pair okay so what I've
done then in the client application I've
taken that public and private key pair
and put it in the config file then this
is your basic I exact same meteor to do
this example but everywhere where you
would normally see just tasks we're
doing and the to do API tasks and when
you would see meteor subscribe we're
doing the Titov API does subscribe and
when we're doing we would be doing
meteor call we're doing to do api call
to add the task or set the private etc
that to do api is coming from a package
that we've created as an example called
to do api that isn't this packages
folder under to do api it's using the
useful api client and then all it's done
is this so what the api useful api
client does is makes it easy to connect
and identify and authenticate yourself
with api server that's based on the
useful meteor or the useful api server
so what we're doing is we're setting the
URL for our api we're giving our api a
name
that's important for basically cashing
that private or that person okie we were
talking about reloading the config from
the or yeah we're loading the config
from the settings file that was here and
then we're calling configure and because
to do API is a new instance of API which
is exposed by the base package um it's
going to handle connecting to the server
identifying all that kind of stuff on
the server we're basically doing the
exact same thing and then because what
we want to do is if from what the
functionality that we want to do in
order to do expose in order to do API is
to let people manipulate tasks where you
are exposing a collection called tasks
with the connections set to the same
connection to our API server okay so if
you followed me this far this is
hopefully starting to make some sense so
we've used the useful sorry we've used
the API client package to basically give
us abstract away a bunch of mumbo-jumbo
rookie business that we needed to do in
order to in order to basically manage
the connections to our API server and
not let us just focus on what we really
want to expose your API which is this
tasks and then whatever other method
calls and stuff like that we want to
expose on our server so if we look at to
do server this is the API
that the to do server exposes and it's
basically the exact same thing that was
in the meteor to do this example except
I've just replaced meteor with API and
this to do server is using the useful
API server package as base and because
of that you can get away with doing just
API publish and knowing that it's going
to be authenticated um exposing methods
and knowing those methods are going to
be authenticated one of them may be more
interesting things is this API intercept
collection stuff but I'll get back to
that in a second so without taking
radness I guess I so I so here in here
that is back quiet trying to do plant
running that was this one here and let's
see greater call big talk at quikr comb
Sarah this really shouldn't be like that
surprising
I'm also emailed us Josh adventureland
calm right so I don't know could you see
that switch 130 different clients so
like in itself not that amazing but the
point of this entire pair of packages is
to make it so you can do more amazing
things okay so many times the
publication's the publication's the
publications are secure here and the
methods are secure here when you're
adding them via API because if I show
you what's actually happening when you
call API publish it will check if
there's a can if there's an identity
associated with this connection and if
there's not it'll throw an API not
authorized the methods are the same deal
and actually the collection intercepts
are the same deal to again I give back
to that in a second so it's basically
wrapping and saving your connection so
where do those identities come from when
the client connects it calls a method on
your API called identify client which
ends up here
it looks up the public key and if it
can't find a nap associate it with that
public key it's going to throw an
exception if the client has a personal
key then it will look up the client for
you otherwise there's no client and it
will create a new identity object for
you and store it on the connection this
connection is is the key to keeping this
state is the connection object is
available to you and all of your method
calls bodies in all of your your
publication bodies so basically anywhere
that an API client is going to touch
your API server the connection object
will be available to you and now the
identity object will be available to you
too in a similar way when a server
that's connected to your API boots up it
will call identify server underneath
load pussing in the private key will
look up the app for the private key if
there's no app throw an unauthorized
exception otherwise we store a new
identity object on the connection so
that you can use it anywhere else where
might you want to use it well in the to
do server you just close that one in the
to do server we're using the connection
identity app ID that was tacked on there
for us to make sure that we're only
returning tasks for that particular app
or and we're using the connection user
ID to look up my tasks that were only
for that user now this user ID this is
the user ID of the user the user ID of
the user of the application who is
connected to your API it's not a user ID
of like a meteor user inside of your own
I a like meteor application that is that
is the API this is the user ID from the
user that is registered in your eye in
the application that's connecting to
your API just to reiterate and what a
poor online is that the API client then
is that the API client so we've yeah you
user ID is coming from the API client
yes mean so okay yes yeah thank you I'm
tripping over some words your key uh
yeah definitely I do better with like
back and forth so clarification is good
the reason that's important is because
you're whoever is consuming these tasks
presumably cares about the user IDs of
their own users not any other user IDs
and so because it's available to you you
can effectively do things with it um
same here where were specified like I
let's see adding what's a more
interesting one uh so delete task right
normally ye well normally this is pretty
straightforward but because you have the
identity connection again there you can
make sure that your only deleting tasks
that are associated with this
connections application and you can get
the user ID again and check ownership
and all that kind of stuff if you if you
want to okay so if all that sort of like
um fundamental ago maybe and the
intercept collection thing should be
pretty straightforward to and what this
is doing is hilariously under the hood
you hear it will rewrite the meteor
method that's automatically generated
for you when you declare a collection so
normally like when you clear the clutter
direction like new manga collection
frites something like that under the
hood meteors creating methods called
Creed's insert etc in like putting into
this default function that's great that
default function basically uses a while
and deny today to do things um but allow
and denies don't really going to help
you out here so uh you way there's a
mechanism to basically substitute
whatever method you want to use for that
the method that meteor is originally
creating for you and if you do that then
it will also check the AP identity and
throw in an unauthorized exception back
to the client if it tries to connect
before I then identifies or if someone's
trying to manipulate great guy so then
the question becomes okay why why would
you want to do that well basically this
is a bad example just to illustrate the
fact that you can do it um okay so let
me just do it and show you and then
maybe we could talk about why that might
be interesting so if we try to to insert
two tasks we should get this message
this error message back just show this
one
so I'm going to do to do API tasks dot
insert muffins are delicious when they
are very because like you really get to
know people when you see what kind of
tested as they put in okay so we got it
this air back nice try but you must
provide you must use the provided add
task nothing I so that was all just to
demonstrate that like when you call
intercept and it will work you will get
what you this will run anyway the reason
you might care is because as cool as you
know abstract API names are and you know
like models or even mean even things
like graph ql there is a place for you
know directly using collections so like
collections insert and update and remove
and this just facilitates allowing
literally giving a third-party
application indirect collection
manipulation access to collections that
you're hosting inside your own API
server from you know their client code
which is sort of kind of cool I think
okay so yeah so those are the useful API
client useful API server and
boom to the next one ok so the future
you know we abstracted those two
packages out of dealing with what we
wanted the API for hell to be like and
so that we could make potentially and
other people can make more meteor
specific API ice in the future um if
people think that it's interesting like
if you start or you start to use it or
something like that I and we actually
have like these other meteor api's that
we can build awesome applications on top
of more quickly I don't see that
changing when reactive like minecraft ql
and all that kind of stuff comes I'm
it's the graph Creole is like the
gorilla in our banana tree are happy
banana tree paradise right now but we're
good Rothko comes it's just going to be
another mechanism like meteor methods or
like the direct collection access in
order to like access the data and go
back and forth so that could be part of
the future of meteor DDP api's um if you
maybe get like build an API that's
incredibly popular and you need to super
duper scale like one part of it because
it's all web sockets and now you have
Phoenix which basically does web sockets
on crack because it's based on elixir
you could offload part of that DDP API
it's a Phoenix um and that's like
basically writing the DDP client /
server for Phoenix I think would be a
lot of fun project if anybody is
interested in doing that we would be
down um and then just to wrap up
basically we got stuff for you to use so
a hail if it's
you know it all interesting to you to
have an API that you can drop into your
meteor app that does instant message
inside of your application Plus
syndicates to push notifications plus
syndicates to emails and the email stuff
is is two way by the way you can reply
and it will end up back in your
conversation we're doing another run to
closed beta is next month and the hell
is the system that we already use in our
own production applications at the same
thing but if you're at all interested
just go to hell that I have enter your
email and you'll be kept up to date on
what's going on with that um the useful
API packages that we just talked about
are right here we also have a blog so we
just fillet o is five people Joshua
Holman writes stuff about technology and
also about BDD he's actually a student
sim attune write down which is cool we
also have Lucas jagodzinski and he is
the creator of astronomy if you haven't
heard of astronomy try google meteor
astronomy it's going to be pretty
hilarious what you see but if you go to
atmosphere and search for astronomy
you'll actually find what I'm talking
about um and he occasionally writes
about stuff related to meteor and
technology there um we forgot Vlad blend
and he writes stuff that's more about
how to work remotely and Team Dynamics
and all that kind of stuff and how to
keep our eyes so I think this is like
for me this is super exciting because
basically you've added authentication
around microservices so this isn't like
some of the stuff you were showing i've
actually played with like you can just
make a DDP connection to another meteor
server and request publications or make
meteor calls and like i've used that
stuff but um you know I I asked some
people if they'd be interested in me
writing am I
services article but the thing that
comes up most frequently is like how do
you handle authentication across
multiple media servers and like you
essentially just solve that problem
right I'm gonna cross my fingers and say
I hope so I think so I'm trying we're
trying um because we need to do it for
ourselves and so it seems like a
reasonable way to approach it with the
API keys and the registrations in this I
mean if you need to regenerate an API
key you you can do that too I would be
very interested to see what other people
say and what kind of holes they poke in
it after hopefully ticket hopefully it's
interesting enough to take a look at in
review okay can you hear me ok now yeah
yeah you're good all right all right so
one of the questions we had early on in
the talk is are using rakes push for the
phone notification stuff or using
something else no we're not um yeah so
you don't the the hill server no I don't
have anything against that that package
at all the hail server will handle
sending out the push notifications for
you um so you're unlike if you're using
regs push your server is not going to be
having to directly cut talk to the like
apns or GCM or something like that ok
all right so Ian healt asked is it
possible to use the API client to
connect to API is not created with the
API server and I think this is what I
was talking about before you know you
can just do this right now with meteor I
think the thing you get with API server
is the authentication token kind of
checking and that kind of stuff right
yeah so the whole
the API client basically handles I think
this may be the audio in the video are
not synced up exactly and maybe I'm
hearing you before I see finished
talking so I'm just going to try to
answer and if I miss something just let
me know okay so yes the API client
basically does nothing for you besides
expose the methods are like the
functionality that's available to you on
GDP and then I knows how to authenticate
itself to an API that's being run by the
API the useful API server so no um it
you could tell it to connect to a
different meteor a different meteor
server um but you wouldn't get any
benefit out of doing that unless that
server was based on I'm exposing an API
using the methods provided by the useful
API server package alright so the next
question comes from a vadis ah and I'll
just I'll say I'm done when I'm done do
you use some kind of connection pools
for your API to avoid using too many
resources in question I know there's
there's no connection pooling going on
in the useful API server package it is
basically the vanilla functionality that
you you get with meteors ability to
handle web socket connections out of the
box and all the reconnect and stuff
goodness the what the what they will do
both those packages if there's a
connection dropped they will be
identify themselves on the new
connection automatically for you by that
i mean that's going towards optimizing
your whole application and i would love
to see something around that that we
could integrate into the package well in
reality you're just hosting a meteor
server setup right so you could just
scale up like you would a normal meteor
server and you know add a second process
that's hitting the same database and as
long as you have sticky sessions and the
load balancer in front of it like we saw
in a previous talk you could scale it
that way right done yeah totally and you
know if you wanted to get even fancier
you could split different parts of your
API into into different servers and then
have to API clients that are connecting
to two different API servers that just
read the same database sources like yeah
basically any any way you can slice and
dice I'm scaling up a meteor server then
then you could do it is it's just a
meteor server and if you needed to get
more fancier than that um then you
probably want to switch to something
that you're just handling the raw web
socket connections yourself I mean
there's like seven there's like seven
DDP message types or 11 or something
like that and it's it's not terribly
complicated but what you get awesomely
from from meteor is everything to do
with live subscriptions in the manga off
log and things like that point and end
answer all right good answer we won't
say whether it's a good answer or bad
answer uh so Ryan had a question is Hale
tied into blaze or can you use it with
anything your example code appeared to
have template stuff embedded in the API
call but I realize I might have misread
it and
hmm hail has nothing to do with blaze
it's just exposing some functions it's
basically you what you saw what to do um
you have pale deals with conversations
messages and people at the base level
conversations are group groups and
messages messages urban by people or
you're out your system and those
collections are exposed along with some
like sugars and syntactical sugar on to
your clients so you could be using that
within react you could be using it
within angular blaze on anything it's
just my horrible API or my horrible demo
you I was written in in blaze alright
fair enough uh alright uh Ryan you've
got the top question right now but it's
maybe not super clear to me so we'll
come back to it maybe you could edit it
the baldest wants to know are you aware
of meteor hacks cluster and how are you
scaling your API and I would say you
know before you answer for me meteor has
cluster can kind of take care of that
problem of like handling discovery and
the connection strings between your your
API servers using Mongo database so I
think that's where that kind of gets
interesting to me done um I am aware of
meteor hacks cluster and it's a really
good question i don't have a good answer
for at the moment because with our
production applications that are using
hail we're scaling them the normal way
and basically those businesses are
scaling up themselves so there's not a
whole ton of pressure on it at the
moment but
one of the things we need for something
that's like a closed it's like a closed
you know beta or there's just not a lot
of people using it is um some way to do
the load testing to know like how how is
it going to break and how how are we
going to scale it and all that kind of
stuff and like we're working on those
load testing tools too and those will
probably be released as well I know
there's some out there that are based on
Java but when you think about it really
you just need to make a bunch of web
socket connections and send a bunch of
DDP messages to your meteor server to
like tell it to do a bunch of stuff and
basically do that enough times in
parallel yeah exactly you need to do
that in Perl and so I mean it's not a
terribly complicated thing to imagine
how you would do it um but making a nice
tool to do that is something that you
know we're also working on when we're
done release it to and then I'll have a
better answer for like how are we going
how are you going to scale because I'd
be able to check like know what the
difference is we're going to be at
different scales and what would help the
most and like I don't know everything
either so none of us do I opened I'm
open to feedback yeah maybe I should
have set galaxy and had been good done
what no um it's I mean it's an option
right yeah um all right next question
from Ryan so he's curious if having to
DDP sessions open at the same time might
affect mobile resource usage does it
cause more memory more battery drain he
knows how heavy one meteor app can be on
mobile how much does it
adding a connection to a second meteor
server ad give any thoughts they're done
I just think that's a really good
question that I I again have no answer
to I would imagine I mean there's going
to be some cost because it's maintaining
or it's creating more network traffic I
I don't know I i would guess that doin
it would probably depend on how much
traffic you're you're really sending
right and i mean in that case it doesn't
really matter what you know what
connection you're using button just
terms of like what is the extra load
that the maintenance of that one web
socket or that second WebSocket
connection creates i don't know i'm
writing down this question because it's
it's a really interesting one yeah i've
got to imagine that it's it's minimal
right like we're talking about TCP
overhead we're talking about some
packets like I can't imagine like
tracking that maybe uses a little more
memory but I mean I I would think it's
it's almost incremental I've actually
got i'm gonna nap we could try this in
at least on a on a desktop so you can
use that have you seen Paul Irish is
like client-side memory tracker there
there's a bunch of new tools that came
out for like doing stuff inside of
meteor applications that i haven't used
I'm ready for a demo yeah I'll just set
up an experiment but this is actually
just a general javascript thing that you
can use and it just tells you like how
much memory is being consumed he's got a
cool little graph for it I saw it in a
react talk from recom last year and you
know the experiment I guess would just
be to just have one DDP connection and
then make a second one and see if that
increases you know the the memory load
and that would probably answer the
question a little bit
yeah what was the tool called Paul Irish
is something I think it's just like
memory stats for JavaScript okay yeah
I'm with you in terms of like that
intuition um but I don't want to shoot
myself in the foot by saying ya know
it's gonna be quiet and then like I
don't know man like the Android webview
maybe like blows up when you have more
than one WebSocket connection i'm not
sure i will say this i think that there
is a limit and i think there's a like a
hard limit within the WebSocket standard
somewhere itself or some some way the
browser's have implemented it I've seen
both chrome and mobile safari regular
chrome and mobile safari crashed when
you push too many DDP messages through
it one time so I mean there's there's
probably like all kinds of weirdness in
WebSocket itself still it could be that
I guess you could always liked and thank
you Elijah for posting that link for me
also yea though to what Ryan was saying
about like not one and two years run or
dive shop tomm wanting to use web
sockets because not a good use of mobile
resources I mean you can definitely with
meteor turn off like the actual web
socket thing and just go over like HTTP
one point and all that kind of stuff I
don't know if that's going to be better
or worse but that sort all handled for
you in sauk jas so that's that's cool /
one option that doesn't kill your
ability to to build something napi
quickly something you use if i use
meteor iOS you suck its yeah but you
don't have to yeah but if this i mean if
the socket degrades know the sock ji
center under the hood will downgrade to
doing one polling for you recently
should test this I challenge you Ryan to
write a test using that the link right
above your your comment there all right
um PDI please do have s to give the rest
of myself so Pete asked how are you
handling stripping signatures and
footers out of email responses or are
you I don't I I leave it up to you you
can definitely post process your the
emails if you want to so that the answer
there is your super flexible and that
made sense for the business it's it's
definitely not an easy question to
answer for you know what we have figured
it out well I wanted to figure it out we
one of our applications does do that and
it would make sense for us to like
release that code too so I'm making
enough to do that no I can't say it's
foolproof but it works good enough Pete
said he has a click here to reply link
within the email and that gives them an
anchor to look at so interesting alright
last question as we wrap up day to hear
ah Ralph wanted to know so does I'm
assuming it he means API server an API
client package work with 1.3 yet or not
yet tested probably yes who knows I
haven't tested it yet and actually it's
set to like one to one but honestly it
could probably it could probably work
with a meteor 10 app I just haven't
tried and if people are I had no idea
how interested people or not to be in
this but if there's people that are
interested in it and I'm like the team
is going to spend more time so to make
it more useful
what he said yes he's interested because
those build times are terrible no I'm
just kidding he didn't say but they are
better they are better with 13 i will i
will say that you're cool all right
pursue all right yeah he's gonna try it
for us so i can report back between I
like it all right all right ah so I
guess that's it I want to say thank you
to Ian for giving this talk here today I
think it's interesting really appreciate
it it was a pleasure I will and awesome
anything cues Daniel in den and another
year yeah and Elijah and Rolf and ryan
and message and Robert and Maurice thank
you guys all for coming Thank You Joshua
for having me I love what you do in this
community whether it's stirring up
trouble or spreading disseminating
knowledge it's always awesome so if
there are any more questions you can
contact me directly my email address
what's up there before um but yeah come
to know please I don't think you're in
the slack chat room but we have a slack
chat room for the conference as well
make sure I get you in there okay cool
alright and thanks you guys r IC
Jonathan yeah all right bye
you
this video has been a space dojo
production you can click the learn more
button to find out more about us at
space dojo com or you can click the
subscribe button to get notified about
new videos we put out each week thanks
for watching
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>