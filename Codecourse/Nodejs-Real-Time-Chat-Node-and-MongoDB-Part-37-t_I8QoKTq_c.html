<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Node.js Real Time Chat: Node and MongoDB (Part 3/7) | Coder Coacher - Coaching Coders</title><meta content="Node.js Real Time Chat: Node and MongoDB (Part 3/7) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Node.js Real Time Chat: Node and MongoDB (Part 3/7)</b></h2><h5 class="post__date">2014-02-07</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/t_I8QoKTq_c" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">okay so what we're now going to do is
just take a look around firstly nodejs
I'm going to take a look at MongoDB as
well just to familiarize ourselves with
how this is going to work and if you're
very new to this this hopefully will
help you understand how and why we're
connecting in this way or doing these
things
now the first things that we really need
to do is install nodejs and install
MongoDB now the instructions on the
websites are fairly straightforward so
go ahead install node.js install MongoDB
follow the instructions and we'll go
ahead and actually work with them now if
you're using Linux or you're using you
know Mac or something like that
OS X then this will be different for you
I haven't be using Windows just because
I record on a Windows machine but it's
probably not recommended use Windows if
you are using Windows it really doesn't
matter you know it's going to work in
exactly the same way well more or less
exactly the same way but generally you
would set this up on on a Linux machine
however once we have everything
installed we're now going to get to the
point where we actually have a look
inside this and run a server JSF are
using node but if you haven't installed
node.js MongoDB go ahead and do it now
pause the video come back when it's all
done or when you think it's done and
then you can follow the video and you
know look at how everything sort of fits
together then if you need to make any
adjustments you can do based on what you
see in the video so with node the only
thing that I've really had to do after
installing it on a Windows machine is
just head over to my system properties
under my environmental variables and
under the path here I've had to just
basically add the path to the node.js
installation and that's all I've had to
do that will allow me to basically use
node in my command prompt so that's
basically anything I've had to do here
with MongoDB I've got this stored just
in MongoDB here and the data file you in
the MongoDB installation instructions
you'll see that you need to create a
data directory and that's also in my C
Drive as well if we just
see do that you can see I've got a data
directory here and that just contains
all of the databases I've been testing
with so go ahead and create that you
also have this DB directory as well so
you know I've created a few databases
with silly names and but that's just
basically an idea of what you need to do
so for now I'm going to head over to
MongoDB and bin binaries so these are
all the files that we could potentially
run we're going to be focusing on Mongo
D and also Mongo so Mungo D is the
daemon that allows your Mongo
installation to run and Mongo lets you
manage it so let's go ahead and actually
start with probably looking at nodejs it
just makes more sense
so you're no js' server needs to be
consistently running for your chat to be
able to work so how do we run an OGS
server what we'll do is just head over
to our text editor and create a new file
and within our directory here I'm going
to call this server Jas this is a
JavaScript file remember
so no Jes is actually running JavaScript
and if you know anything about no Jess
so in here I'm just going to you know
basically say console.log worked or
something like that so we can go ahead
and over in our command prompt we can go
ahead and actually run this so if we
look inside of here now we've got this
server Jas file we can go ahead and use
node to run server Jas and there we go
it worked so this is what we're going to
do in order to start our nodejs
server that's going to listen for socket
IO
connections and clients connecting and
pushing up messages and things like that
however there are a few things that we
need to do a couple of things we need to
do we need to install server IO using
node package manager and we need to use
install MongoDB using node package
manager as well so MongoDB is just going
to be a node module and basically all
this is going to do is allow us to use
this MongoDB functionality connect to a
specific database and actually access
our database socket IO is basically
going to run on this on on this side of
things as well because that's the
dependency we need to listen for
connections but within our front end of
things inside of our actual page we're
going to connect to
no js' server and actually include the
server IO or the socket IO sorry file
from our node server that might be a
little bit confusing but it might make
sense a bit later on so we're going to
go ahead and use node package manager so
NPM I'm going to go ahead and install
socket IO and we'll go ahead and just
wait for that to run through and that
will go ahead and install it so now if
we do a directory listing we get this
node modules folder so let's go ahead
and just take a peek inside there and we
you can see we've got sucker iOS that's
basically the first dependency installed
and what we can now do is go back to our
chat went back in too far we're going to
now install MongoDB and it's basically
just a case for NPM install MongoDB and
that's all we need to do wait that - go
ahead install CD over two node modules
and we can see we've got MongoDB in
there as well so that's going to allow
us to use this functionality from within
our server
jas follow which at the moment is
console logs so that's what we need to
do for now we will write the rest of our
code inside of Server Jas and also on
our page as well so we don't need to
worry about anything for now we've got
our dependencies installed now in terms
of MongoDB let's just take a little
brief overview of how this all works now
I'm inside the binaries folder inside
MongoDB I'm going to go ahead and I'm
going to rot run Mongo daemon now what
others can do is it's going to start
listening for connections that's
basically the database running so that's
that's our database running now if we
grab a new console in the same bind
binary folder let's now go ahead and
just run Mongo now what this is done is
it's connected to our database and you
can see that this has changed now we've
got one connection open it's
automatically connected to tests now we
can this is quite strange if you come
from MySQL background or any other
server background but when we go ahead
and use a database in here it will
automatically create that database for
us we don't need to create a database we
don't need to define columns we don't
need to define anything like that it's
very very very
namek so this is how it this is how it
works it may take a little bit of
getting used to so I'm going to go ahead
I'm going to use a database called chat
so this is a basically our test database
so it's now switched to database chat
now this did actually exist in my DB in
my data folder my DB folder then data
folder but it doesn't need to exist so
you can just go ahead and type in these
commands and you've automatically
created that database essentially so
what we now do is within a database we
have collections which are similar to
tables in a way they're just sort of
collections of data so what we do is we
say DB dot and then the name of the
connection or the collection so the
collection in this case I'm going to say
messages so if I wanted to grab all data
from this messages collection I would
use the find method and at the moment
that's returning nothing so what we can
do is we can go ahead and actually
insert a collection or record if you
like into this collection so we say DB
messages dot insert and then in here we
enter the data so I'm just going to
create a users of JSON string here and
I'm going to say name Alex message hello
there and that's now inserted that so
now when I go ahead and go back to DB
fine you can see that's given me that
data route and we've got the an ID there
as well a name and a message so this
could change so for example if we were
to do this again and add an additional
field this would work so that's the sort
of slight difference where we're not
defining columns or anything like that
another quick tip is if we want to go
ahead and remove everything we just use
the remove method and then when we go
ahead and said DB messages find it just
returns nothing so we've now got a
database called chat with a essentially
a table that you know more appropriately
called a collection called messages and
we've looked at actually inserting data
retrieving data and removing all data so
that's all we should really sort of need
to know at this stage you can go ahead
and play around with it more if you want
but as long as we understand that then
when we connect from server j/s this
will make a lot
more sense so with that done we've now
you know done everything we need to do
and we can go ahead and actually start
to create our server which is going to
accept connections from our chat
interface</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>