<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>PHP Tutorials: Register &amp; Login (Part 4): Database Connection | Coder Coacher - Coaching Coders</title><meta content="PHP Tutorials: Register &amp; Login (Part 4): Database Connection - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>PHP Tutorials: Register &amp; Login (Part 4): Database Connection</b></h2><h5 class="post__date">2012-05-11</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/0ol6C0ETQqM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so welcome back and in this part we're
going to be creating our core folder and
actually connecting to our database and
we're essentially setting ourselves up
here to include anything we like
functionality wise so for example if we
decide that later on down the line we
want to go ahead and incorporate a forum
or a guestbook we can do all of our
function functionality or create all of
our functionality within these files and
then just include them into our overall
initialization file so let's go ahead
and and start we'll open up an open
dialog and remember we create this core
folder at the moment it contains nothing
that's fine we can go ahead and fill
this up which is what we're going to be
doing this part so the three folders
that we're going to create in here sorry
the two folders that we're going to
create in the file the two folders are
for database activity so in this case
we're just connecting we're not doing
anything else we're going to have one
for functions and then we're going to
have a file called init which is going
to initialize everything and it's going
to pull everything together include
everything we need and we're going to
apply that to the top of every page that
we create so let's create our folders
first the first one like I said is
database that's just going to house our
connection script we're going to have
functions which is going to hold all of
our functions so for example logging the
user in registering the user account
showing different statistics and like I
said if you incorporate a guestbook you
can pop everything in here and use it in
the site sorry we're not creating a
third folder we are creating a new file
so let's go ahead and create a new file
in here and I'm going to save this as
init.php
so what do we need to do with in init
dot PHP well as I said we need to
include all all around our files but we
don't have any yet so the first thing
that we don't want to do is because we
are now allowing users to log in we're
making use of sessions so we need to the
first literally the first thing we want
to do at the very top of our pages is
start sessions so I'm going to use the
session
that function and this needs to be
cooled before we use any sessions so as
long as we've got this in the init file
we're going to include this at the top
of every page that we create so we know
that we we're starting sessions on every
page so if we're checking if the user is
logged in or not okay so let's go back
to our files database the database
folder is going to contain our
connection script so let's go ahead and
create that first and then include it so
we're connecting on every page that the
user lands on that's obviously important
as well so I'm going to create a file
when I save it in database and I'm going
to save it as connect dot PHP so I'm
going to be using the two functions that
we usually used to connect which is
MySQL connect and MySQL select dB so
we're using MySQL connect to connect to
a MySQL server with a hostname a
username and a password and our select
DB is going to select our database so
the three values here for me our
localhost running on my local machine
but if you're uploading to a public
server this is almost always going to be
localized as well then my username root
and my password which at the moment is
nothing now where do I find this
information if i don't know how i'm
connecting well if you're running on a
local server you most likely haven't
been forced to set a password on on any
databases that you've created so I'm
going to jump over to PHP my admin and
I'm going to go ahead to home and I'm
going to click the privileges tab at the
top here now you can see that we've got
a list of sort of users almost now here
you can see two versions of route 1 on
127.0.0.1 which is equivalent to
localhost we've got all privileges which
means that we can insert records move
records join tables whatever else as
just you know all privileges and then if
we look under password field it says
know so we know that our hostname is
localhost our username is root and our
password does not exist so we can just
do what we can just leave this blank
like I've done here now the database
that we know we know we called LR we can
- this here so we know we've called our
database LR so we can just place that in
there and essentially that's it we can
include things to check if if we haven't
connected for example or Die MySQL error
so for example if sorry MySQL error now
this is a function within add I
statement if you like so the script will
be killed at this point nothing will run
below this and then we'll echo out the
MySQL error
now this isn't recommended for run time
on a public server where you're having
users access the page because if they
see evers like this they get to know
your directory structure and things like
that so it's not good idea to leave
leave this open so I just go ahead and
get rid of this for now if you're having
problems you can debug that way so
connect we're done we don't need to add
anything else to here so we can close
this now within in it I'm going to go
ahead and I'm going to require any files
that we need now almost always the first
thing that we're going to be doing here
is actually requiring this connect
script because anything underneath it is
going to use our connection so I'm going
to go ahead and I'm going to require and
I'm going to require database forward
slash connect dot PHP so this is
connecting and then anything else below
here can use this script err this
connection to this advantage so if we go
ahead and refresh here nothing happens
and mainly because we haven't included
in it dot PHP so what I'm going to be
doing is I'm going to be getting into
the routine of including this at the top
of every page that I make so include
let's think its core forward slash in
its dot PHP so remember we are on the
index page we're including core in it
dot PHP which is then including database
connect function and excluding any
including any functions that we create
we haven't created any yet but we will
be doing ok so we've done that let's go
ahead and refresh nothing's happened so
assume we have no errors in our
connection script let's go ahead and
just force an error quickly just so we
know if if anything's if anything well
what kind of output we get so I'm going
to remove the user name there and I'm
going
go ahead and refresh and nothing's
happening which is odd let's go ahead
and check everything is here let's go
ahead and say local HST instead oh no
we're not getting any errors
oh no it's because we're on register dot
PHP okay so we'll go index dot PHP and
we should there we go we've got an error
at the top there so that doesn't look
very nice you know it's not grave if
your database connection does fail for
some reason on your site you're probably
going to want to show your users
something a lot nicer than that now the
first thing I'm going to do is I'm going
to turn every reporting off so if I say
every reporting zero you'll notice this
will go so that's the first thing that's
gone so we're not revealing any path
names to our users or any detailed
information about what we're doing
so here I've set over reporting off I've
just passed a zero through to this and
in connect what we could do is we could
have some generic connection message so
connect error for example this could be
defined in another file it's quite messy
to do it in the same file but we could
say sorry we we're experiencing downtime
or something like that or connection
issues what we can do here is we can use
or die as we've seen before and we can
actually pass through this connect error
variable so or die we can do exactly the
same with MySQL select DB so connect
error so now what's going to happen is
when we refresh it kills the script and
we just pass what we just show the user
this this message here it's entirely up
to you I'm not going to go into this too
much more but we'll leave it as it is
for now
oops we need to go ahead and actually
connect to the right place so connect
local host and there we go we're back on
perfect so let's go ahead and close this
now the next thing we want to do is
because we're going to be logging our
users in registering our users we want
to go ahead and require oops we want to
go ahead and require in a file
from our functions folder so I haven't
created this file yet but I'm including
it already I'm including users PHP
within our functions folder so let's go
ahead and create that file so inside of
our functions we're going to create a
file called users dot PHP and this is
going to be the home of all of the
functions that allow we'll do anything
relating to users so we may have one
called ID no general which might
sanitize data or you can call it
security dot PHP which sanitizes any
data we're also going to create one
called statistics dot PHP which show for
example things like the amount of users
that have registered on your site this
could also be things like users that are
currently logged in anything like that
so we're going to leave this as it is
for now
and that's basically it we've included
connect so we're connected to our
database and in the next part of the
tutorial we're going to be looking at
actually allowing the users to log in</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>