<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>PHP Social Network: Apache Rewriting (4) | Coder Coacher - Coaching Coders</title><meta content="PHP Social Network: Apache Rewriting (4) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>PHP Social Network: Apache Rewriting (4)</b></h2><h5 class="post__date">2014-11-07</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/pjCxWqhHM10" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so now we have everything set up we have
a directory structure and composer all
ready to be used the final thing that we
need to do before we can get on with
some coding is to set up a rewrite rule
so all requests appointed to this index
file so if we were to go to user PHP
we're going to get for a file not found
that's because we don't actually have a
user dot PHP file inside that folder but
what we want to do is handle these web
requests ourselves by creating some sort
of router and obviously we can't do that
if the user is being pointed to a
different file so our goal for this
lesson is to set up Apache so all
requests get pointed to this index of
PHP file so to do that is very simple
all we have to do is go to public and
create a new file called HT access dot
HT access sorry and we're going to say
rewrite engine on we're going to set a
rewrite condition going to request
filename and that's going to be for
files we're going to duplicate that line
for directories and then we're going to
set up a redirect rule we're going to
put in a regular expression this
basically means anything at all so the
user can type anything all into this
address bar and he will still be pointed
to index 2.php and we're going to point
him to index 2.php and we're also going
to pass in whatever he is requesting so
we can access it for the router so all
we need to do is put in dollar sign 0
its basic regular regular expression and
then we're just going to repeat TL
inside of there so now what we need to
do it inside of our SSH are our VM we
need to restart apache so the service
apache2 restart and then once that's
done if we refresh in a browser we're
not quite finished which should get an
internal server error
and the way that what the reason this is
if we just check the logs so we'll just
sign into our super user account will
say cut VAR log apache2 error log and
down here you'll see invalid command
rewrite engine perhaps misspelled are
defined by a module not included in the
server configuration so there are two
ways we can fix this we can either go
into the Apache configuration file and
change a few things or we can take the
easy way and we can just simply run a
command so all we have to do is say sudo
a to n mod rewrite and you should get a
message like that and then we need to
restart apache as usual so sudo service
apache2 restart perfect so if we refresh
now we still get this hello world
message that was actually on our index
page and what we can then do is say
something like PHP echo server is it I
think it's something like that yeah and
then we can actually see whatever the
user is requesting and send that off to
our route to class which will be making
a bit further down the line to handle</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>