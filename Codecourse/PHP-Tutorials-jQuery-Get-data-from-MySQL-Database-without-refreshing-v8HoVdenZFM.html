<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>PHP Tutorials: jQuery: Get data from MySQL Database without refreshing | Coder Coacher - Coaching Coders</title><meta content="PHP Tutorials: jQuery: Get data from MySQL Database without refreshing - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>PHP Tutorials: jQuery: Get data from MySQL Database without refreshing</b></h2><h5 class="post__date">2010-07-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/v8HoVdenZFM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">in this tutorial I'm going to be using
PHP and jQuery to return a value from a
database without having to refresh the
page so basically what I'm going to do
here is we're typing in a name so I'm
going to type Alex and inside our
database you can see I'm using PHP
myadmin to where as an interface to my
database I've got a database just simply
called database and a table called
people now inside this table called
people I've got one record name being
Alex and age being 20 so what we want to
do is we inside this form we want to
match this name to this value and we
want to return this value here which is
my age so let's test this out I'm going
to click get and you can see that it's
returned
Alex's age is 20 now if I was to enter
nothing we returned with please enter a
name and if we enter a name that isn't
found name not found so you can see this
is an easy way to display error messages
easy way to display data from a database
without actually having to refresh the
page so what I'm going to do now is I'm
going to pause the video and we're going
to return to a blank file which we're
going to start writing okay so I'm into
my text editor context what we're going
to be dealing with is two files we've
got indexed or PHP which is the one that
you saw where I was typing in my name
and we've got data PHP which is going to
handle our data and we're going to
extract our data from our database so
the first thing we need to do the most
important thing we need to do is
download and run jQuery now this is
downloadable as a JavaScript file so
basically all we need to do is include
this in our script so if I just open up
my web browser and come on over to
jQuery comm you can see here there's a
quick download link to jQuery now when
this is clicked you'll get a long file
of shortened functions and whatever else
is inside the jQuery file you can see
it's a Jas file as well now what I've
done is I've actually created it
as a single file just called jQuery j/s
so if we come here
jQuery j/s you can see that I've
included this in the folder that I'm
working with so it's the same folder
than my index file and my data dot PHP
file are both in so once you've
downloaded that and put it in the same
directory call it whatever you like and
then what we can do is start including
it in inside our document and then it
will be ready to use so the first thing
we're going to do inside our index dot
PHP is set up our basic HTML tags so I'm
saying our HTML tags to enclose
everything in I'm saying up head tags
and then I'm setting up body tags now
the head tags completely significant in
what we're doing as we're going to be
including JavaScript files and we're
going to be writing some JavaScript code
as well as well as some CSS later to
format and the area that the page will
be displayed in so what we need to start
doing is sorry not style script type
equals and then we can end that off so
this is usually where you'd write your
content just in here but what we're
going to be doing is just including J
jQuery as a file so text forward slash
JavaScript as you would do and then
instead of writing code inside here
we're going to write it inside here and
we're going to write source equals
jQuery dot s okay so now what that's
done is it it's included this javascript
file and into our script and we can
start using it from that external point
of view so we're also going to open up a
another script set of script tags and
this is going to be text JavaScript as
well so writing JavaScript inside here
as well
that's going to come later when we're
actually dealing with jQuery and putting
over some post data from our form
obviously inside our body tags we're
going to have to crowd our form and to
do this I'm going to create a basic form
with a name so instead of taking instead
of action that I've just written we're
going to say full name equals form now
this is all we need to process the form
as we're going to be working with
JavaScript functions and inside that
function we're going to then send the
data from the form and have it processed
in our data PHP file here so the first
thing we want to do is create an input
type or an input field and this is going
to be type of text and the name of this
is simply going to be name because
that's what we're entering into the text
area or the text field sorry and also
we're going to create a button now we're
not creating a submit button like we
would usually do this for creating a
button and the reason for this is we're
not actually submitting the form we're
just using this form as a sort of like a
an area that we're entering our entering
data into our fields but then we're
going to submit it we're going to
transfer the data into our data PHP and
then have that processed by jQuery so
the value of this I'm just going to say
get H or get okay now the important
thing is the on click and here we're
going to enter a function name that
we're later create and this is going to
be the function get so we can enter this
net here now we haven't created the
function yet we're going to do that
later up here in inside our script
now the next thing we want to do is
create an hour div area that we're going
to display our result in so the result
will be displayed here so if I was to
come back into here and refresh this
page you can see that we've got our form
and you can see we've got our result
here and this is where we're going to
obviously type the name and then click
get see not noted notice nothing happens
and our result is going to be displayed
here so this div will always exist it
just won't be shown until we have
clicked get the data will pass and then
will be displayed with the result here
so if we come back to context I'm not
going to write anything in here just yet
I'm going to give this name and this div
and ID and the ID is going to be called
age so we can control this div with this
variable name if you like it's just a
reference to this div that allows us to
show it hide it from jQuery so I'm going
to close the form in paragraph tag this
is just to keep everything aligned
because we're going to be using CSS a
bit later to format how we've displayed
this form so it all looks mattingly and
tidy so our form is pretty much done
let's just preview again to make sure
everything's okay you can see that
there's no nothing displayed here but
the div does actually exist around this
area here and obviously this is to type
our name in later so we're going to come
back and we're going to start creating
this function and called get that we've
specified down here so this is a
JavaScript function that we're going to
be creating and so the syntax is going
to be function gap we link to brackets
there we're not feeding any information
into this function we're just using it
as a handler so when we click this
button here we can process this function
and jQuery inside will do the work for
us
now jQuery is incredibly easy to use it
looks complicated to start with but once
you get the hang of it you'll actually
realize that it's a lot
easier way of doing things it looks good
it's fast and it has many many many
useful functions pretty functions we've
got fade-in functions to do things so
this code looks a lot more complicated
than PHP but in fact what we're doing is
we're creating something that's a lot
easier and it's going to benefit us in
the long run so I'm going to change the
highlighting type to JavaScript just so
it looks better so I can see exactly
what I'm doing and I'm going to start
with a dollar sign you'd usually see
this within say PHP or something but
this is typical of jQuery and this is
just how the syntax works so we're going
to be posting data so notice we didn't
use a method here we didn't say method
equals post like we usually write but
instead we're going to specify this up
here so we're going to say dollar sign
dot post and then inside this we're
going to write data dot PHP and this is
going to transfer our post data or the
post data that we specify it won't take
post data from this form we have to
specify it individually and it's going
to process it by data PHP I'll file up
here which is at the moment blank so the
next thing we want to do is a comma
after this and inside curly braces we're
going to specify now the names that we
want to or the variable names that we
want to pass to data PHP so this is
going to be named remember we had this
here this bears no significance to this
here but this is the name that we're
going to interpret inside data PHP and
this is the value that we're going to
pass to it so what we're going to do now
is form dot name dot value now let me
explain this just a bit form is the name
of our form which we've written in here
this is very important whatever you
change this to this is going to be the
axis for it name here is the name like I
said of this here so remember this here
and this here totally different this is
what we're going to interpret inside
pay what we do is we usually write name
equals dollar underscore post name so
basically this is equivalent to this or
is this is how they're passed so name is
going to be this here and name here is
the value of what you have typed into
this form so I've for some reason called
them the same thing probably a better
idea to call them something different so
you can distinguish between them however
it will still work the same so we've
ended these this curly broke this curly
brace here and what we now need to do is
another comma and I'm going to come down
a couple of lines and I'm going to say
let's just get this aligned properly
okay
so function out there now this here is
going to be our output from our data PHP
file that we can then display inside
this div here so we're going to use a
function to display it inside the div so
this is the output and then what we're
doing is more sets of curly braces let's
just tidy this up a bit and a semicolon
on the end of the line here and then
inside this function here what we're
going to do is we're going to address
our div and give out div some things to
do so basically we need a dollar sign
and then what we're doing is we're
putting the name of the div inside here
and we address this with a hash and then
age so age is the name of our div so
here now basically what this function is
doing is it's taking the output and then
it's dealing with the output here so
upon output of our data PHP we're doing
something inside here so it's the same
as this here but this is automatic
after we've posted our data so then what
we want to say is dot HTML
out / so remember this here is the same
as this here the output here we get from
data PHP and then where hTML is
basically going to change the contents
of the div to our output so dot HTML is
changing the contents of this div which
is here to the output that we receive
and then what we're going to do is stop
the show and then two brackets and then
we use a semicolon to terminate that
line okay so this is basically our
function in JavaScript done and we've
created our post data submission inside
jQuery so let's just run the page you'll
notice that there's absolutely no
difference whatsoever
we can still type in Alex click gap and
well I would say nothing that happening
has happened but what's actually
happened is it's echoed the output of
our data PHP file now at the moment this
isn't addressed as a pic this isn't
prepared if you like for an HTML or PHP
document but if we were to say PHP tags
to open up some standard PHP tags and
we're going to echo out this is a test
now basically what I said is we're
posting data to data PHP and we're
posting this data within outputting here
into this H div here so whatever's
inside this data dot PHP file whatever
is going to be output will be shown in
the div so now if we click get you can
see it says this is a test so we've not
processed anything inside data dot PHP
but what we have done is we are now
taking the contents of the data PHP file
and we're putting it in here
okay so obviously this is all well and
good we're displaying the contents of
data PHP but we actually need to process
this first of all so we're going to just
do pretty standard method of extracting
code from our database based on a
variable that has been input so remember
we've got name here which is going to be
equal to a name so name equals post name
now what I can do just for an example is
echo out name and then if we come into
here we're going to type in a value here
when the Kliq gap it's going to pass the
form name and the value or the value of
the name input field inside the name
form we're going to process it as name
this is inside dot PHP we're then going
to pick this up here and we're going to
echo out and this here will be displayed
because we're echoing out e inside the
div hit OK so let's refresh and I'm
going to type in Alex and click get so
we're displaying that whatever we type
inside here okay so that's just showing
you without refreshing we're processing
at least something inside this data dot
PHP file now what when you really need
to do is actually make it useful so the
first thing we want to do up here is
we're going to connect to our database
so I'm running localhost username of
route and no password exists for me and
then what we're doing is we need to get
the variable name which we have already
done
okay so what we're going to do is as we
are taking data from this form and we're
putting it directly into a query we will
be in a minute we need to protect this
data so I'm going to do is I'm going to
say MySQL real escape string and this
will somewhat prevent SQL injection so
this is a quite an important function
when you're dealing with data into a
query directly from your database so now
we need to set up the query and this is
going to be H equals MySQL query so a
new query function and this is obviously
eventually going to hold the age of
myself and since we only have one record
inside here let's go okay so a silly
'islam I forgot to actually create the
database first so what we're going to do
is we're actually going to create this
database so create a new database is
database and win a click rate and
obviously this is going to change
depending on your requirements of your
database and what data that you need to
extract but I'm going to create my new
table people and this is going to have
three fields okay so the first field is
going to be ID which for every user is
going to make it unique we're going to
add an auto increment so we're going to
increment by one each for each record
that's added the name here I'm going to
choose varchar' and it's going to be 25
so 25 characters in length and that age
is just going to be an integer because
ages tend to be integers I'm going to go
down and we're going to save this okay
so we've got our field set up now we're
just going to insert some data so my
name is Alex 20 years old so that's all
the data we need click go and we're
going to click browse and you can see
that we've got data in here which is
name and age
so name is going to be the name of the
user that is present in this field here
and then we're going to extract this age
from it and then display it here so the
query is going to be select age from now
we're going to use our database name
this is going to be data base then it's
going to be dot and our table name
so database stop people so database name
here and people here you can up here use
the MySQL select DB function but I'm
just going to be using database people
for a change
so select age from database people wear
name equals name so this is the name of
the field inside the database and this
is the name of what we want to select so
is specifically selecting someone's name
which we've got grabbed here from our
form okay so there's the there's the
name variable this is our query that
we've pinned to a variable called age
now what I'm going to do is create a
another variable called age num rows and
this is going to be MySQL num rows of H
so basically all this is going to do is
it's going to return the amount of data
that has been found so what we can do is
then echo this out to test it oh no page
numbers okay
so back into here I'm going to type Alex
and click get and it says it's found one
record which is true because we have one
record where the name equals Alex and
now I'm going to type in Kyle click gap
and this is changed to zero because
there's no records in our database with
the name Kyle so as long as it equals
one we know that the name exists and
this is why I've taken you through
displaying the number of rows because
basically we need to find out whether
the name exists or not so the first
thing we're going to do is actually
create a check the checks if a name has
been entered or not
so we're going to say if name equals
equals null so if it equals nothing at
all then we're going to echo out please
enter a name else so otherwise and we're
going to open up some curly brackets
we're going to echo you entered a name
so this is back purely for this line is
pure up so this line here is purely for
testing purposes and what we're going to
do now is come back into our code into
our page sorry I'm going to type in Alex
I'm going to click get and it says you
enter the name and I'm going to type
Kyle click up and it stayed at you enter
the name if I don't enter a name it says
please enter a name so we've got this
check inside our data HP which is
echoing out this data or this data and
then obviously inside our div down here
it's displaying this simply because of
this functionality here because we're
outputting the HTML from this file so we
don't obviously don't to tell the Jews
that they have into the name then they
know they have what we need to do now is
continue our checks and like I said
before we're going to check if the name
actually exists so now what we're going
to do is say if
age none rose equals equals zero so we
use an equals equals to say if it's
equal to zero if the row count is equal
to zero then we're going to say name
does not exist and then else and more
curly brackets to continue if we
actually have found a name by the number
of rows is one okay so we can test this
out and we can say name found so this
again is purely for testing purposes
this isn't this is a check to see if the
name has been found or not if it does
equals if the row count does equal zero
the name doesn't exist otherwise the
name does exist so back into our browser
I'm going to type in Alex click gap name
found I'm going to type Kyle now
remember our name is not it's not going
to be found because it doesn't exist I'm
going to click get and it says name does
not exist so we're testing each stage of
the checks to check that they are
working properly
and that our code is working function
functioning properly okay so the next
thing to do is actually to grab the age
of the user because we've the user has
entered a name and now inside this else
block here the name does exist so now we
need to grab the age so this is going to
be in fact actually we've already we've
already grabbed the age from the
database and my placement of this was
actually initially wrong so what we're
doing is with we're coming straight into
this and we're selecting an age without
having these checks so I'm going to cut
this data here tie that up a bit
in fact no no sorry I was correct to do
that because obviously without this font
or without this query here we wouldn't
have this here and then we wouldn't have
this check here so what we can actually
do is we can take this cut this and
paste it inside this else statement here
or this else block here sorry okay so
the reason for this is we're checking
for the name if it doesn't exist we're
not doing anything we don't need to take
the data into account if the name has
been if a name has been entered or if
some data has been entered then we can
continue with our query then we can
continue with checking the amount of
rows and then we can perform this check
here to see if it exists or not and then
otherwise we're simply going to echo out
well we're going to echo out names age
is H now as this stands it's not going
to work
this query has not returned us any data
it's just perform the query now using
functions like MySQL num rows we can
extract data from our query that we've
performed now what I'm going to do is
I'm going to set the same variable age
so with setting this I'm overwriting
this initial variable but what I am
actually doing is still taking the
result from this query so age equals
mysql result through easing the mysql
result function to grab a result for us
and this is going to be age and then
we're going to use 0 there okay so let's
go and test this it should actually at
the moment echo out the name which has
been provided here and then it should
take the result here pop it in to the
age variable and then echo out there so
back to here let's just refresh the page
I'm going to talk I'll just to double
check name does not exist
Alex get Alex's age is 20 so we have at
the moment successfully grabbed the age
from the database and we've displayed it
without having to refresh the page so
now that our functionality is working
and everything works I'm going to go
ahead and I'm going to add some CSS to
my index dot PHP file to format this div
what I basically want to do is just
bring it up a bit I want to bring it up
so it's more or less underneath it so to
do this I'm going to open up a really
your style sheet should be external but
because I have a limited a limited
amount of not time but a limited amount
of fiddling around like I can do this
tutorial I'm just going to keep it
simple so style type equals and just
change this back to PHP anyway and style
type equals text /d SS and then we end
our style tag now to start a div we're
going to use the same initiation it's
going to be a hash so we called out div
age and then every we're going to create
some curly braces and then inside this
what we're going to do is going to type
display:none now the reason I'm doing
this is because anything that we have
inside our div to start with we don't
want to display what you could do is you
could say please up sorry not please
could say H will appear here and then if
we
comment this out and come into here age
will appear here and then I can type
Alex and click get and my name chain of
the value of this div changes to Alex's
ages 20 but what I actually want to do
is not display at all and this also
helps with if you're using the fade in
function or the toggle function within
jQuery and I'll show you that in just a
bit
so display:none I'm going to set the
line height to zero pixels and the font
size I'm going to change to 20 pixels so
now we can see that immediately we've
got a change type in Alex click up you
can see that it's appeared almost
underneath it and the font size is
bigger so you can fill around with these
obviously divs are interchangeable with
styles in CSS so you can change them in
any way you like and now what I can just
show to you is how we can change the
show part here to fade in so back to
refresh now bear in mind all I've
changed is show to fade in and what I'm
going to do now is set a speed so I'm
going to say a thousand milliseconds so
that's a second again refresh and click
Alex up type Alex click gap and you can
see that that nicely fades in and if we
just type say please enter a name you
can see that it didn't fade out then
fade in
so we've typed Alex click up Alex is
ages 20 now it's stopped fading in now
the reason for this is simply that we
are not hiding the div once we want to
re fade in so if I was to again type
Alex and click get you can see it fades
in Kyle
name does not exist let's just refresh
this
okay so again Alex get Alex his age is
20
Kyle name does not exist so basically
what's happening is it's not fading in
with each try again if I wasn't to type
anything please enter a name so what we
wanted to do is fade in every time and
the way we're going to do this is we're
gonna come down here and just above
before we post our data we want to re
hide the difficult to hide the div again
for then to fade back in so if we would
say hide the div here here then we would
post data again we would receive the
output and fade in again so it's
rehidden for it to then fade back in and
to do this we're just going to use
exactly the same format and inside here
we're going to say age and then we're
going to say dot hide what we could say
is dot fade out but for now I think the
best effect is to say have it hide
instantly and then reef a DIN so let's
give this try to refresh the page I'm
going to type Alex fades in and then the
type Kyle name does not exist I'm going
to type nothing please enter name so
basically what we've done is we've
created a piece of code that refreshes
well without refreshing sorry grabs data
from a database okay so thank you for
watching I hope you found this useful
and if you did please subscribe to my
channel
and I look forward to hearing your
comments about this technique so thank
you very much for watching and for now
bye bye</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>