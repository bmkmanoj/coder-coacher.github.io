<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>CodeIgniter Tutorials: Registration &amp; Login (Part 12/13) | Coder Coacher - Coaching Coders</title><meta content="CodeIgniter Tutorials: Registration &amp; Login (Part 12/13) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>CodeIgniter Tutorials: Registration &amp; Login (Part 12/13)</b></h2><h5 class="post__date">2012-08-13</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/sn5bp8YOPkY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hi guys my name is Steven and welcome to
video number 12 in the series where I'm
creating a login registration system
using code ignitor in this video I'm
going to be billing the register
register user function as well as some
functions in the model that'll help me
actually successfully register the user
and clean up all the data so what I'll
do is I'll go to my main controller I'll
just create this at the bottom the
register user function public function
register user now before I actually get
into creating and writing this function
I want to show you how you can actually
grab the third segment of the URI like
in this case we have main register
register user and then this key which
would be considered the third segment of
the URI now we can grab this by
specifying a variable name it doesn't
have to be key but in this case it is
key and I'll just show you like we can
echo out key so we can actually have
access to this to this variable to this
data up in the URL just by just by
grabbing it as a parameter to the
register user function and now I have
access to that key so I can grab that I
can compare it just to the database and
things like that which is actually what
the first thing that I want to do I want
to check to see if this key is actually
valid so the first thing we'll do is
load the model underscore users model
this load model model underscore users
and next I want to say if this model
underscore users and then we'll create a
function called is underscore key
underscore valid and that will return
true or false depending on whether or
not that key is valid and we'll pass in
the variable of the key if it is say
will echo valid key for now we'll
actually do something else else
Eko invalid key okay so now let's
actually go ahead and and create this is
valid key model so go into our model
underscore users create another function
go public function is valid I just go a
key okay now this is gonna receive the
key key then we'll just I guess I will
do it this DB where now this receives
two parameters it's just a we're
specifier you go where key is equal to Q
I'm gonna go this query is equal to this
DB get and then we just specify which
table you're looking in so in this case
it's temp underscore users now if we got
one row return then that means it is a
valid key and if there was no rows
returned or more than one which would
never happen then it's not a valid key
so we can go if query num rows just a
function is exactly equal to one then it
is valid so return true else return
false
okay
so let's try to try this out so I'll
refresh this okay call the undefined
method while users is key valid main
line 113 is valid key okay I'll call
this is key underscore valid refresh
okay cool
it says a valid key now that's because
this key right here is actually in the
database right here however I can X
order this one however if I was to like
mess up this key like this press Enter
it says it's an invalid key because it
cannot find this this key or this string
inside the database so yeah okay cool
and so this is still valid valid key the
next thing we want to do after we check
whether or not it's a valid key instead
of echoing out that it is a valid key we
want to we want to actually add the user
to the like take them from the the
temporary users and then take them from
the temporary users and then add them to
the actual users table so um we will go
this model underscore users will create
a function called add underscore user
and that will also receive the key okay
so let's go ahead and create that say
public function add underscore user
this receives the key so the first thing
we want to do is get all of that
temporary data where the key is key
so we'll do the same thing we did in the
last video this DB where or the last
function up here key is equal to KI
create a query object query it's equal
to this DB get and that's going to just
get from the temp underscore users table
next thing I want to do is check if that
query succeeded if query then I can
actually grab what I'm gonna do is I
will actually grab the values because
this actually returned a whole row as
well as the key can containing all of
the actual data stored for this row in
the temp user so in this case the
password in email which is all we really
need
so what I'll do is I will create a row
variable say Rho is equal to query now
let's actually rename this to temp
underscore users since it's a query to
grab the temp user temp user and now I
actually want to grab so I'll go Grell
is equal to temp user and then Rho now
use the row function on it
so essentially Rho is going to be equal
I can now access all of the actual
values returned in this query and so I
can go create a new array called data
which I'll be inserting to the to the
actual users array our users database
sorry and for example go email
which will be Rho email and then
password will be equal to the row
password that's all we need
next thing we'll do is we'll check
create a query and have it equal to this
DB insert insert perfect specify which
row we're inserting it to so in this
case its users and we're passing this
array called data containing the
information that we just grabbed from
the temporary users database next thing
we can do is we can check if query oh
one thing up here I realize we need to
actually check if temp user so if the
temp user has been successfully grabbed
then then execute this block of code
which reminds me we should rename this
instead of having query we can you can
call it did add user so down here I can
ask it if did add user now we can
actually delete the old temporary the
row from the temporary database right so
we're grabbing all the information from
here adding it to the users and then
we're gonna delete it delete the
temporary row in temp temp underscore
users where the key is key so let's go
ahead and do that we'll go this DB where
key is key with this DB delete from temp
underscore users cool and then we can
actually go okay and it if they and that
should actually delete from the temp
users we can now we can just check if
they did add the user and lastly return
true and if they didn't add the user
then return false cool so in the main
controller we can actually validate
whether or not this add user function
was successful we can go if add user
echo success else echo failed to add
user please try again cool
lastly um I guess instead of echoing out
success we actually want to once they've
been added and their temporary data has
been deleted we want to log them in and
send them to the members only page and
we'll do that in the next video so
thanks for watching</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>