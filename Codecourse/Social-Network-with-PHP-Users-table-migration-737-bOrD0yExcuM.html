<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Social Network with PHP: Users table migration (7/37) | Coder Coacher - Coaching Coders</title><meta content="Social Network with PHP: Users table migration (7/37) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Social Network with PHP: Users table migration (7/37)</b></h2><h5 class="post__date">2015-08-27</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/bOrD0yExcuM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">we're now going to create our first
migration and this is going to be the
users table so our migration is going to
contain all of the information for a
user because in the next step we're
going to actually be registering the
user so we're going to be inserting data
into this table so over in our app then
let's close everything off that we don't
need and let's find out where our
migrations live so under database here
you can see this migrations table we
deleted the base migrations that laravel
gives us initially so we can create our
own here so I'm going to open up my
terminal window
I'm currently SSH into my virtual
machine and I'll obviously within this
chatty directory where my laravel files
are so before we actually get started
creating a migration we actually need to
set up our environment variables for our
database host our database our username
and our password now my host can say at
localhost because I'm just working
within my virtual machine and my
database name needs changing you can see
that was chatty obviously yours might be
different and our database username is
homestead and secret by default on a
homestead box so you may need to change
this if you're not using a homestead but
otherwise you can keep these as they are
so over in our terminal then we can
actually generate this migration so I'm
gonna say PHP artisan make code on
migration and then I'm gonna give the
migration name so I'm just gonna call
this create users table I'm gonna hit
enter and that's going to create that
migration for us so that's been created
there we can see that that's all set up
ready to go so if you don't know what
migration is when we run this this will
create our database table in up and then
down is the kind of rollback state or
the reverse of the migration so in that
case it would delete our database if you
were ever adding a field or adding a
column to your database table down would
just be the opposite of what you're
doing in that case it would remove the
column so what we're going to do is you
a larval schema builder and we're gonna
create a table called users and then we
have a callback just here and inside of
here we have blueprint type hinted table
here and we're gonna say table
increments to start us off with an ID
all this will do is create an increment
field called ID and you may have seen
this before when you set up a a database
table so next we're gonna say table
string and that's going to be an email
by the way I'm not gonna be creating
relationships between the tables at the
moment but you can go ahead and do that
if you if you really want to so the
email field is just a string the
username it's also a string we also have
a password here and we're going to
create the first and last name here but
with a addition and that is going to be
that these are nullable so they'll be
nullable fields we don't require a user
to have a first name and a last name we
just require them to have a username
password email etc so this is going to
be the last name we also have remember
the location of the user so we saw that
in the first video when we update our
profile again that's going to be another
little too and we also want a remember
token that's going to handle the
remember me functionality when we sign
in and we also want the created out and
updated at fields that laravel models
work with so gonna say table timestamps
so under our down method we just want to
do very simple line schema drop users
that's it so when we bring our
migrations up we will create a table
with all these columns and if we wanted
to roll them back or reset them we would
run this down method so it's pretty
simple to run these we can keep an eye
on our database as well we'll have that
new table in there when we refresh so
let's run our migration so it's PHP
artists
and migrate simple as that and that's
going to go ahead and create our
migration for us so it's also created a
migrations table which just keeps track
of our migrations but we now have this
users table in here without email
username password and all the other
fields that we specified and you can
check out the structure in here as well
just to make sure everything is exactly
as you need it so that is our users
migration successfully created in the
next video we're going to look at how we
can register users</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>