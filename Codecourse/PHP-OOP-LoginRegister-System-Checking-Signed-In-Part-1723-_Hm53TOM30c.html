<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>PHP OOP Login/Register System: Checking Signed In (Part 17/23) | Coder Coacher - Coaching Coders</title><meta content="PHP OOP Login/Register System: Checking Signed In (Part 17/23) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>PHP OOP Login/Register System: Checking Signed In (Part 17/23)</b></h2><h5 class="post__date">2013-11-11</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/_Hm53TOM30c" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">now that we have the ability to log in
or log a user in and we've done so
proving it by outputting the value of
the session that we've stored we want to
go ahead and actually detect whether the
users logged in or not so we can perhaps
greet them or something like that so
we're going to do this within the
constructor of the user object so inside
of the user object inside the
constructor let's go ahead and start to
work out what we might need to do here
now if the user value here has not been
defined we might want to go ahead and
actually well we do want to go ahead and
actually check if the session exists and
set the fact that they've been logged in
but we need to be able to find if the
user actually exists or not which is
quite important and we've already done
that here so we don't really need to do
too much to be honest so what we're
going to do is in here we're just going
to say if not user so a little bit of an
explanation around why we're doing this
if we want to grab a specific users
details we're going to use the same user
object so if I wanted to grab the user
details of another user in the database
I might want to define the users
username or ID inside our database
object so I might want to say let's just
imagine this was the users profile user
or sorry user equals new user six and
what I want this to do is return the
user details that user six for me not
the user details of the current user
that's logged in so by doing that just
that that's what we want to achieve in
terms of just returning the current user
that's logged in so in that case we want
to check if the session exists so is it
user logged in just session exists this
session name we then want to say user
equals session
and this session name so user will now
equal four so if we just refresh here
nothing's changed we remove the last
code that we worked with in index dot
PHP but we're now being returned with
for any way or echoing for any way we
obviously don't want to do that what we
now want to do is check if this user
actually exists or not so we want to say
if this find user now what that's also
going to do is it's also going to grab
the user data so we then will have
access to the user data perfect but what
we now want to do is set a flag is
logged in equals true true okay now
otherwise we want to process logout and
we'll explain a little bit more about
that another point so now what we want
to do is if the user doesn't have a
search but if the user has been defined
we want to say this find user and what
that will do is allow us to also grab a
user's data the look of the day of the
user isn't logged in so in effect what
we could do is we could say user equals
user so this will be the current user
and this will be another user only if we
define that so we can say another user
for example so this will be another user
so we can you can use both of these in
the same way but we're going to be
picking which user we want to get but by
default we're going to be picking the
current users details so what we can do
now is nothing's going to appear here
but what we can in fact do is say things
like echo user username sorry user data
user name because we already have our
data method and that will just just have
a look oh sorry that that should
probably be a public function because we
need to we need to access that so let's
take a look inside of here at the data
so public function data
so redesign sir there we go so that's
the current user that's logged in now we
did look in our user class up here this
is logged in flag which we haven't
actually created now properties so let's
go ahead and do that we'll just say is
logged in an actual phat let's create
this as a public public property so we
can just use this off the bat so in that
case then what we can do is get rid of
that and we can check now if a user is
logged in in fact it might be better as
a table we'll leave it as a believe it's
a private the reason being is that if we
need to add any functionality into the
the logged in check at any point we can
and doing that with a typically called a
getter or a setter so a setter would set
data and a getter would get data and
this would be a this would be a Etta so
public function is logged in would
return awkward it's only purpose is to
return data but if we did need to add
anything else at any other point we
could just add it in here kind of thing
so all we're doing here is returning
this is logged in and that's it so in an
index dot PHP we create a new user
objects we need to make use of this
functionality we can now say if user is
logged in echo logged in we'll obviously
add a little bit more functionality here
so we're now saying that we are logged
in for to delete the session and refresh
we're not logged in so we've now removed
the the session and if I was to log in
again success and if we go back to index
then we're logged in again so we now
have the ability to log in and check
that a user is actually logged in or not
so if we are logged in let's go ahead
and just add a little bit more
functionality in here
in actual fact let's go ahead and add a
redirect just in here because we haven't
quite finished off this functionality
and we can keep this here but for the
success we don't really want to echo
sess we want to use the redirect class
that we created and we want to redirect
to index.php
of course you could add little message
if you like for a session flash but we
won't bother doing that for now so if
the user is logged in what do we want to
do well we're going to break out of our
PHP and we'll add a paragraph just
perhaps greeting the user so we'll say
hello a tref will create a link here for
the user's name just so we know that at
some point we can we can link to the
users profile so we'll just set that as
a hash for now but here what we're going
to do is echo scape and we'll say user
beta username lovely so now that we've
done that this will greet the user like
that the exclamation mark on the end and
we can also as well start to build up a
little list of links here of things that
they can and can't do so let's go ahead
and add a list an unordered list here
and for the first item we'll give the
user the ability to log out and we'll
set this to logout dot PHP which will
build soon and we'll go ahead and add a
list of other links as well here at some
point so we'll also add an else here and
we'll just echo out you need to login or
register and we'll go ahead and make
these links so we already have our
registration functionality we already
have our login functionality so we're
just going to present user with the
ability to log in or people or log out
or register sorry so me when we press
ENTER now it says hello Alex and we have
the ability to log out we delete the
session and refresh we get you need to
login or you need to register so it's
now starting to come together quite
nicely now that we're introducing links
here and we'll obviously need to process
a logout as well but for now that's the
login functionality and let's go ahead
and in the
part look at actually logging user out
or allowing the user to log out</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>