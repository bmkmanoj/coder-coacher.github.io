<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>PHP Data Objects (PDO): Connecting (Part 1/8) | Coder Coacher - Coaching Coders</title><meta content="PHP Data Objects (PDO): Connecting (Part 1/8) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>PHP Data Objects (PDO): Connecting (Part 1/8)</b></h2><h5 class="post__date">2014-01-13</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/QtCdk459NFg" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">okay welcome to this series on PHP data
objects or PEO in this series we're
basically going to look at the
fundamentals of using PDO to connect to
which have a database you're using so
whether it be something like MySQL SQL
Lite any database driver that's
available in your system and we'll talk
about those a bit later will allow to
for example connect retrieve results
insert results take security into
consideration as well so basically the
fundamentals of using PDO to work with
whichever database you're using now I'm
going to be using MySQL since it's
probably the most popular and but I'll
show you how to detect which drivers are
available in your system and then you
can go ahead and use it with your
database that you're using so as you've
probably already gathered PHP data
objects is basically a access a database
access layer and that allows you to
connect to and perform operations on
multiple databases so we're not just
working with MySQL system is Qri
extension in PHP it's PHP data objects
it's a generic way to work with database
data it's it's beneficial because you
can basically implement it within your
application and then switch over
databases and not have to update any
code or update very little code you
might need to update the way you connect
initially using PDO because some
database drivers work slightly
differently so SQL Lite or SQLite works
slightly differently and but with MySQL
and Microsoft server they're relatively
similar but there's not much difference
in that so what we're going to do first
of all is actually look at how to find
which drivers are available in your
system so I've already decided that I'm
using MySQL so I have a my PHP myadmin a
graphical user interface up here I've
created a database called App
created a table within this called
guestbook it's got four fields ones the
first ones ID which is an auto increment
primary so this will auto increment for
each record I create so the first one
will be 1 then 2 3 4 so on name which is
a variable character type of with a 50
limit message is just text and posted is
the time that this record was posted
which is just a date/time type so we'll
be looking at this a bit later when we
actually start to insert records but
basically for now I'm connecting to a
MySQL database so let's go ahead and
look at how we find out whether the
driver is actually available for this
now with PDO it's works as an object in
PHP so you access it using the PDO
object and basically we're going to use
the scope resolution operator here to
access a specific method and we're going
to do this out only sometimes not when
we're doing things like connecting will
create a new instance of it but in this
case this is sort of a one-off method
that's just a static method that we can
use to check whether we have the
available driver or not and this is
basically get available drivers as it
stands nothing's going to happen here or
we well if we go into our browser
refresh nothing happens but basically
what we want to do is go ahead and print
our on this because this will give us an
array of drivers that are available so
print ours just going to show us that
array here so you can see that we've got
MySQL and SQLite so we know that we have
the driver available to use so we can
use MySQL so now that we know that we
have the driver available we want to go
ahead and actually connect to our
database so let's go ahead and actually
connect to make sure that we know that
we can connect properly and then a bit
later on we'll be doing some error
handling so we'll see how we can
actually handle these errors so the
first step really is to create a
database handler you can call it
whatever you want I usually just call it
handler then we want to create a new PDO
object from the PDO class then from
MySQL the way that we passed in the data
is a string first of all then a username
then a password so obviously these are
strings as well where we pass a long
string of lots of different properties
in here and then we have a username and
a password so for the first string or
the first property of this we need to
define first of all what driver we want
to use and in this case it's MySQL and
then you do a colon and we need to tell
PDO what the host and the database name
is now the host is just the server that
you're running on which is almost always
going to be 127.0.0.1 and for the
database name that is going to be the
database name that we've already created
which is a p-- if you look back in PHP
myadmin
you'll see that we've created this
database here called app so now what we
want to do is go ahead and provide login
credentials for the MySQL server in this
case it's just root for the username and
nothing for the password
I'm just running this on my local
machine there's no security really
required here now that we've done this
let's go ahead and refresh the page just
to make sure that everything is ok with
it looks like there's no errors or no
errors have been caused here let's go
ahead and just make a slight change to
this just to see if we actually get any
errors back and you see that we do so
we've got a fatal error here because
we've provided an incorrect database
name that or the database name that
doesn't exist so you can see here that
we've got an uncaught exception which is
quite important we'll be looking at
catching exceptions in just a moment and
you see it here's the message that's
been returned so we've got unknown
database app with three P's and it gives
you the rest of the sort of stack trace
of where this occurred and things like
that so now that we've got this error we
want to know how you can actually go
ahead and catch this so the first thing
that we probably want to do is go ahead
and actually set a or the error mode
basically so we want to set the
mode two for it to fire an exception so
we want to make sure that this is the
case so what we want to do is we want to
go ahead and we want to first of all put
this in a try-catch block so let's come
down here and create a try-catch block
and in fact let's just pop this code
inside the try block for now okay so
what we want to do is in a moment what
we're going to want to do is catch an
exception and what that will do is that
uncaught exception we saw earlier will
be caught at this point nothing else
beyond this will run and it will
basically come over to this catch block
and it will do whatever we want it to so
we'll we'll handle that in just a moment
and we'll fill in this this parameter in
a minute so what we want to do is we
want to say handler
and we want to use the set attribute
method and this basically allows you to
set different attributes on out and out
of PDO instance and in this case it's
going to be PDO attribute error mode or
etre error mode and then we want to set
that to a specific error mode and we
want to set this to error mode exception
which will allow us to handle this
exception so it's every mode underscore
exception like that okay so now that
that's happened let's go ahead and just
take a look at what happens here when we
okay so we've got a syntax error no
worries now of course okay so we need to
sort of fill this in anyway so we'll go
ahead and fill this in now this is a PDR
exception we saw earlier when we got the
error that we had returned a PDO
exception this time what we're doing is
we're returning a PDO exception we're
naming e and then we can do something
here with that exception so let's go
ahead and refresh nothing happens so
what's happened now is despite the fact
that we've supplied an incorrect
database name what we're doing is we're
catching the exception and something is
being output here so I'm just going to
enter court there just so we can sort of
see
that exception is being caught we know
that that's being caught already
nevertheless we're catching the
exception here and what we can do with
this is we can then actually output
either a very specific message or
something generic we can kill the page
if we wanted to let's say that this was
at the very top of our code we might
want to kill the page and provide an
error message so sorry a database
problem something like that I mean you
could be very generic or general in the
way that you handle it but if we wanted
to say for debugging purposes to get an
error met back or log a specific message
to a file or something with then going
to want to say something like echo e and
from this we can use the get message
property and that will go ahead and get
the actual specific message returned by
PDO and in this case is we've got this
unknown database app so that's just
basically catching that specific error
if we go ahead and just go down here the
rest of our page for example and in here
we kill the page let's go ahead and take
a look at what happens here so we
obviously just kill the page and we just
output this error message which in a
production environment wouldn't be
recommended you to output a more
friendly message or something let's go
ahead and change the database name back
to App with two peas and take a look at
what happens here and we get the rest of
our page because no exception has been
caught here and because the this this
line of code has run correctly so it
doesn't matter
so everything's worked fine
then later on if we were to go ahead and
execute queries or anything like that
because we've set this specific error
mode queries later on we'll be able to
catch in exactly the same way we
probably won't be doing that because we
just want to sort of demonstrate the
functionality of being able to retrieve
data insert data
everything like that but you know useful
to know that we can set the the
exception type we can try and catch
wherever we like here and do the exactly
the same as hiss to get the the error
returned by MySQL what's gone wrong okay
so that's what PDO is how we connect to
our database and how we catch errors</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>