<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Creating a Cookie Banner (Part 2/2) | Coder Coacher - Coaching Coders</title><meta content="Creating a Cookie Banner (Part 2/2) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Creating a Cookie Banner (Part 2/2)</b></h2><h5 class="post__date">2013-05-31</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/04kpFWR0ZLw" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so in the last part of the tutorial we
created these lovely styles and we
allowed our cookie banner to essentially
slide down from the top of the page what
we haven't now done is women click ok
continue use this query string to
actually pick up the fact that the users
click this in PHP set the cookie and
then never show this again or show it
you know we can be a bit a period of say
a year so this is the sort of more
technical now PHP side of actually
actually you know dealing with the
cookies dealing with the setting this
cookie so let's go ahead over to our
index dot PHP file at the very very top
just before our doctype is going to be
where we pick up the fact that this
accept cookies query strings been
appended to the end of the URL so we're
gonna have a little if statement in here
to check that we're also thinking have
an if statement around here and what
that's going to do is it's going to
allow us to not create this markup if
the user has clicked the accept button
and the cookies been set to show that so
I've created opening and closing PHP
tags for the if statement I've started
the if statement here I've ended the if
statement here the block this is the
block that's run or output if this is
true so let's do this pot first so I'm
gonna basically say if not is set and I
want to check if the cookie and we're
gonna call this cookie except cookies
and that's it so if this cookie is not
set show this cookie banner so as it
stands at the moment when i refresh I'm
going to get an a bloody error because I
didn't do this so I'll just put if one
refresh so there we go here's a lovely
website paragraph so I actually have the
cookie set from from a previous run of
this tutorial so I'm gonna go ahead and
delete that cookie and protect pretend
that so it didn't happen so when we were
fresh now we get this drop down
nothing's happening so as I said in the
last part I'm using chrome dev tools and
I've just popped over to the resources
tab and I've got the cookies open in in
this or localhost bucket
and Kings will keep an eye on on the
cookies here so we're gonna be setting a
cookie which you've just seen me delete
and we're gonna do that using PHP so if
is set dollar underscore gets re you're
sort of utilizing the get global array
except cookies so this here represents
what we have seen in the browser here so
if this has been set then we want to go
ahead and actually do something now what
do we want to do well we want to use the
PHP setcookie function to set a cookie
so we've got a few parameters the first
is the name so that will be accepted
cookies which we have checked for down
here the value which literally can be
anything because all we're doing is
checking if it's set so I'm just gonna
set it to true and then we're also going
to give this a time or not a time an
expiration date so in this case it will
be time which is the current timestamp
from PHP add an amount of seconds so I'm
gonna choose a year so that's I think 31
million five hundred and fifty six
thousand nine to five yeah whatever
so obviously googled this but that's
roughly the amount of seconds in a year
no getting technical with like leap
years and stuff but then we're gonna
redirect the user because we want to
redirect them and then not see the
cookie banner anymore now you might want
to add a referrer or something here but
I'm literally just gonna just gonna
refresh the page essentially or go back
to the root directory rather so hit
enter we use cookies on this website
when we click this okay continue button
what's going to happen well we're going
to refresh the page essentially we're
just depending on this query string the
query string is going to be picked up
here we're gonna set this cookie and
then refresh or go back to the root
directory here and then when this line
is hit here the cookie is going to be
set so this block isn't going to be run
subsequently because we have the cookie
valid length
the kooky banner won't exist so this
code here won't be executed which is
good we don't run that if we don't need
it so let's go ahead and test this out
and I'm gonna keep an eye on this panel
down here and and so should you
so when I click okay continue Wow
we've refreshed we've set a cookie here
accept cookies value true and when we
refresh we no longer get this dropdown
if we view the page source we don't have
it in the mark-up anymore and the
JavaScript isn't running which is good
because there's no element to actually
slide down so that's it if we go ahead
and delete this value in here and
refresh it appears when we click OK
continue again we've already seen this
functionality so that's it from start to
finish how to create a drop down cookie
banner
we've styled it up we've create the
mark-up we've done some JavaScript and
we've obviously done the backend stuff
to deal with actually hiding this
message once the user has clicked okay
continue</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>