<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>PHP Tutorials: Register &amp; Login: Email activation (Part 3) | Coder Coacher - Coaching Coders</title><meta content="PHP Tutorials: Register &amp; Login: Email activation (Part 3) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>PHP Tutorials: Register &amp; Login: Email activation (Part 3)</b></h2><h5 class="post__date">2009-03-13</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/rQOw0l9a8Ck" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">right okay now what I've decided to do
is create the activation script so our
new PHP page before we send up the email
and then at least when we write in the
email we're going to know where to send
the person and that's registering so in
context i'm going to start up a new page
i'm going to save this out straightaway
as let's say activate dot PHP okay now
our headers or as usual and what we're
going to what we're actually looking for
is our session to start with and when we
login you can see that in fact know what
we do is we need we need to send out a
bit of data firstly what we're going to
do is we're going to send out the ID of
the user in the email i'm going to send
out the activation code so what we can
do is we can match up the ID to the
activation code and as long as the ID
and the activation code of the newly
registered user match then we know that
the user has clicked the email address
click the link in the email and they're
ready to activate so what we need to do
is we need to get either it's been
submitted and this is dollar underscore
get ID and we need the we'll just call
it code and that's the underscore gap
code and what they're really going to do
is the user is going to click a link
that looks a bit like this HTTP colon
for such localhost forward slash in this
case it's PHP academy' tutorials
tutorials register is it log inregister
way old and he registered again and and
then forward slash activate up to I am
really bad at typing weird okay activate
and then we've got a question mark for
and starting off our room our variables
after this we're going to say ID equals
and the user ID and I'm going to have
and code equals and we're going to have
our random code
and that was put into the database and
generated and so if this matches let's
say to hear this so we're going to say
ID equals 10 so if this is 10 and then
this code here is equal to this number
here we know that this user here who's
just registered with the idea of 10
remember this is unique has chosen this
random number in the email which has
been generated for them and we know that
to activate their account so we've got
these two variables we're going to say
if and we're going to run a block here
with our curly brackets we're going to
say if ID and code otherwise we're going
to kill the page and say data missing
okay and here we're going to echo out
well actually no we don't need to wake
up anything else what we need to do is
we need to connect to the database and
sort this out so above here we're going
to say require connect dot PHP as we've
been doing and here we need to check the
database so our query check is going to
be a MySQL query and inside we're going
to select star from users where ID
equals ID make sure you put that in
inverted commas so where ID equals the
idea that's been submitted through the
URL like I showed you and now what do we
call it inside the database randomly
called it so and random equals code
which is the code again has been
submitted through the get variable in
the header of our page in the URL okay
so as long as this condition is true
then how page page can be activated and
to do this we're going to say check none
and this is going to be the MySQL number
of row
that have been returned of our check
query so this check query here is this
here basically what this is going to do
as I'm sure you may not already it's
going to return the amount of rows
returned by this so as long as the ID
and the code already match then this
will return a value so we'll say equals
10 and if he goes 10 here and it you
caused this random number here then this
result here will be returned and this
will give this a value of one and now
what we can do is say if check num
equals equals 1 run a block of code
otherwise in valid ID or activation code
ok and you can say please contact please
contact so and so or whatever you want
to do so if the check numbers equal 1
what we need to do is we need to run a
query here to activate the account and
to do that that is just um just like
activate or apt e equals MySQL query and
it is update users set and we have
activated here so we can copy and paste
that in set activated equals and the
magic number one meaning that has been
activated and then we can say where ID
equals and our ID so only updating where
the ID equals the idea of the user that
has submitted this query or submitted
the ID and the login code and this is
basically going to update it uniquely as
the ID is unique this is the only user
that's going to be activated so now what
we can do is we can presume that this is
has worked you can stick or die on the
end of it or wherever you like so we've
them activated the account without my
SQL query and now what we can do is
kill the page and say your account is
activated you metal bad grammar you may
now log in okay so we can test this at
the moment because we don't work but
actually we can test it we can test it
we just need to say so if we say
activate whp now this is obviously going
to return all connect dot PHP file to
open stream what's going on here okay
maybe we haven't yeah we didn't include
a separate connect for I didn't realize
if we grab our and connect script here
and just copy it there let's go up and
paste that in there apologies for that
but instead of creating a separate page
I have in fact I did this in every
single page which is bad coding practice
but there we go let's run this again
okay data missing this means that we've
got an ID here missing and we've got a
code missing okay so we need ID and code
and what this is going to do is it's
going to satisfy this and this and which
means this block of code here we run and
we're going to go in ahead and check the
database for this data so if we look
inside with the database you can see
that activated is 0 ID equals 10 and our
random code equals this i'm going to
copy this here ready to put in now bear
in mind this will be done all automated
through email this is going to be in the
next part of the tutorial but for now
what I'm going to do is I'm just going
to open up this page I'm going to set
the idea is 10 like I said it was and
the code is this code now what's going
to happen is this whole coat this whole
URL you see here is going to be put into
an email or upon user registration and
then the user will click this and
obviously linking to this this is going
to be their ID the I did that they've
registered with and the code that has
been generated
for them so if i press in fact if i add
a few rubbish things in here press enter
invalid ID or activation code which
exactly what we're expecting because
this doesn't seem valid and just paste
this back in there properly and my eye
Oh paste that back in there my idea is
ten my code is that which does equal up
to our database and we press enter your
account is activated you may now login
and now what i can do is i suggest you
put a like a link to say go back I've
got my index 2.php here if I login Alex
and he didn't click log in you're in so
this must mean that in so localhost when
i refresh this page activated will have
changed to one so that's browse again
can we go down and activated as one so
this really is just creating this script
but in the next part we're going to
automate it by email so I'll catch you
guys then thanks for watching</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>