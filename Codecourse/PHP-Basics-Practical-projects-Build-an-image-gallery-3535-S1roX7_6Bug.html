<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>PHP Basics: Practical projects: Build an image gallery (35/35) | Coder Coacher - Coaching Coders</title><meta content="PHP Basics: Practical projects: Build an image gallery (35/35) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>PHP Basics: Practical projects: Build an image gallery (35/35)</b></h2><h5 class="post__date">2016-11-14</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/S1roX7_6Bug" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">okay so in this project we're going to
be building a mini image gallery which
is going to read images from a directory
and then display them on the page now as
you can see at the moment we have an
error could not load images and this is
because we're gonna be adding in some
error handling either if the directory
here that we specified doesn't exist or
if there are no images inside now
because I am on a Mac you can also see I
have this dot d s store hidden file
we're also going to be protecting
against that as well so we don't load
anything in that we don't want so what
I'm gonna do is just drag over a few
images to this folder I'm gonna come
over to the browser and give that a
refresh and you can see here that that's
loaded and displayed all of them images
from that directory so this is what
we're going to be building we're not
going to make it look pretty but we are
going to be of course covering
everything in the back end so let's go
ahead and build this out okay so just
starting out with a completely fresh PHP
file of course we're gonna go ahead and
first of all take a look at how we read
things from a directory what we're then
going to be doing is taking that
functionality and putting it into a
function which will allow us to use it
anywhere else if we need to so the
basics of reading from a folder then is
using a function called read dir which
stands for read directory now obviously
you can read more about this on the PHP
manual but what we're gonna do here is
just implement it and I'll let you go
ahead and look at the specifics if you
need to so the way that we actually do
this then and I guess before we even
start we probably need a directory to
actually work with so why don't we just
create an images directory just here and
what I'm gonna do is just pull over them
few files just so I have a few files
that I can work with there we are now
these are in the course downloads if you
want to go ahead and use these if you
don't have any images that you can play
around with okay so now that we have our
directory and now that we have files
within that directory we need to go
ahead and read all of the files from a
directory now the first thing that we
would do is go ahead and open this so
you would say something like directory
equals
and then go ahead and use open dir so
open directory and then we just give the
directory name so in this case it's
images so let's do a var dump on this
again just to see what we're working
with here and we'll come over to the
browser and give that a refresh so at
the moment we have something called a
resource now I mentioned earlier when we
were looking at different data types
that we have things like strings
integers floats arrays objects and we
also have resources so at the moment
this is a stream so basically this will
contain all of the information about
this directory but it won't be in a
traditional sense like in an array it
will be something that we can go ahead
and maybe iterate over or extract
information out from because it's a
little bit more complex because this is
now representing a directory it's a
little bit more complicated than just an
array so now to list through all of the
images or just generally the files in a
directory we need to do this in a while
loop so if we just go ahead and to find
out our while loop we looked at these
earlier but this is slightly different
now what we need to do is place the
assignment of reading this directory
inside of a loop what that will in turn
do is it will pull out each of the files
and we do this in a while loop so we
know that we're looping through
potentially all off the file so this is
a little bit different to what we're
used to but still this is just the way
it works so let's go ahead and assign
within this while loop read dir which is
a function I mentioned earlier and here
what we're going to do is pull in this
resource to read everything from here so
what this essentially will do is it will
loop while we have no new files that we
need to loop through so essentially
we're just looping through all files and
we do that in a while loop because then
in here we can do whatever you want with
each of them files so now what is this
image file just here well we can do a
var dump on that and check it out so
let's go ahead and put that in there and
go ahead and see what we've got
so let's give that a refresh and now we
have a bunch of strings so you can see
here the first one is a dot the second
one is two dots the third one here is a
string DF store
and then finally we have the files that
we actually want so what we need to do
in some way is exclude a list of files
that we don't want to treat as images
that we want to display within our small
gallery so we need to figure out some
way later on of doing that so I think
that's just about it now that we know
how to open a directory and go ahead and
list through all the files in a while
loop because we know that a while loop
will run until this condition here is
false in this case while we're reading
through eventually we'll get to the end
of the file set this won't run anymore
so hopefully that makes sense okay so to
do this we're going to use a function so
we're going to build a function in a
completely separate file and we're going
to pull this in just so we can use it
elsewhere so let's go ahead and give
this a name of directory reader because
it could be used for any other files it
doesn't have to be images and let's
start to define this function out and
then we'll go ahead and pull this all
together so obviously the function is
called directory reader and then we have
a list of parameters or arguments that
we can give this so first of all let's
think about what we might need to pass
through to this function well we need to
know the directory that we actually want
to open that's really important and then
maybe we have an array of excluded files
so we can actually map this out now and
the reason that we're doing it this
within the arguments is so that whenever
we use this we can change which files we
want to exclude so let's say this needs
to be an array and we're gonna say
exclude files and we're going to give
this a default value we've already
learned about this of a list of the
files that we want to exclude and this
basically means as I said we can
override this if we want when we call or
invoke this function so the last one
that we want to exclude is dot DS store
you may not need to do this depending on
which operating system you're using but
you probably will need to exclude at the
dot and the dot dot just in case you
were wondering as well this dot means
the current directory and this means
back a directory so that's why they are
in there okay so now that we have that
in there we need to basically return a
of images so what I'm gonna do is I'm
gonna initialize a images variable and
I'm going to assign this an empty array
what we're then gonna do down here is
loop through the files we're going to do
some checks so there are a couple of
tricks that we need to do and then we
need to add to the images array and then
we know that within a function we can
return the images so that's pretty much
what we're doing here and it's always
helpful to go ahead and just comment out
exactly what you want to do I find this
always helps me just think about the
steps I need to take so let's try to
include this from this file we'll start
to use it and we'll see a couple of
problems along the way if the directory
doesn't exist that we want to use and
all that kind of stuff
okay so let's require this in or we can
do a require one so an include in this
case it really doesn't matter too much
so directory reader PHP and let's go
ahead and call this so directory reader
and we're gonna say open an images
directory so we want to assign this a
variable because remember we're going to
return a list of images so we'll do that
now and let's go ahead and check this
out so it's give that a refresh and you
can see nothing's happening obviously
nothing's happening because in here
we're not really doing anything at the
moment okay so the first thing I want to
do the first check within this function
is checking if a directory exists that
we specify in here so we have that here
we want to now check that now to do this
we're going to use a function called is
dir so is directory and we're going to
pass that directory into there now I'm
using not because I want to say well if
this is not a directory then from this
function I want to return null so now
what we can do is in here somewhere
check if this returns null and we can
display an error so let's just try this
out so I'm going to say if not images
and I'm gonna kill the page we already
saw an example of this and we'll just
say could not load images or could not
load files that make sense because we're
trying to keep this kind of generic two
images and any other files that we want
to read
so in this case then we are passing
images in we're checking if that's a
directory in our case it is so you
shouldn't see this error let's go over
to the browser and it looks like we
couldn't actually load files so let's
just have a look at what's going on here
and it looks like because we're not
returning anything here let's just
return true down here so we can check
this out okay so this disappears and the
reason we're doing this is just
temporarily until we actually get some
images in so what I'm gonna do now is
I'm going to change this over to say cat
now
this directory does not exist so we
should see could not load files
brilliant okay so now what we want to do
is think about the next check here well
we use the open dir function a moment
ago but sometimes this is going to fail
so what we want to do in this case is
use an if statement but at the same time
inside of this if statement we want to
assign the result of that open dir
function to a variable so we're doing a
check at the same time as assigning so
let's parenthesize this just so it's a
little bit easier to see what we're
doing and inside of here we're gonna say
images or we could call this files
directory and we're gonna assign this
the result of open dir passing in that
directory like so and what I'm also
going to do is I'm going to call this
files the reason I'm doing this is I
want to keep this incredibly generic so
you know we don't just want to open
images either way what's going to happen
here is I'm now gonna check if this or
the result of this was false and we're
going to return null if there was a
problem opening that directory so
regardless of whether the directory
exists it will go ahead and also check
if we couldn't open the directory and we
can also make this work by getting rid
of the check here because what's gonna
happen is we're gonna not find this when
we try and open it here and then we're
going to return null anyway so when i
refresh we get the same problem here we
get the same error however we also get a
warning and that's exactly why we had
this check in here because the first
thing we want to do is check if that
taury exists okay so now what we want to
do is loop through all of the files once
again we've already seen this we saw a
little demo of this a minute ago we're
gonna use a while loop in here and what
we're gonna do is we are going to again
in parentheses so it's a little bit
easier to see for each loop we're going
to say something like file equals read
dir and we're going to pass in that
files directory variable like that just
like we did before however what we're
going to do outside of the parentheses
is check that it doesn't equal false
because otherwise we will come across
any problems so now inside of here we
can do a void on pon file just to make
sure we've got the same thing as we had
before and you can see that if we do go
ahead and change over this to our images
directory where we know we do have files
we see the following so we've got all of
these in here don't worry about the
little error here that's just because we
are not returning anything from the
function remember if we don't return
anything from a function we return void
and of course if we are returning void
this check will be truthy and we'll go
ahead and kill the page so don't worry
about that too much for now okay so now
inside of this loop remember we can use
things like continue and break well
ideally what we want to do is we want to
check if each of these files within the
loop matches any of the excluded files
that we've given now if they do match an
excluded file we want to continue the
loop we want to completely ignore the
files and the reason that we're doing
that is because down here what we're
gonna be doing is appending on to this
files array so what we would do here and
we'll just do it for now and then we'll
add to check in we're gonna take the
directory we're gonna append on or
concatenate on a forward slash and then
we're going to concatenate on the name
of the file so if we just go and down
here return the files let's take a look
at what this gives us so down here I'm
gonna do a var dump on images and let's
take a look so we should just see an
array of images slash dot which is
useless images slash dot which is also
useless same for this one here but now
we have three useful par
so that we can use to display the
messages our goal now is to get rid of
these here which we've already defined
as default values just over here so
let's put this check in here and
remember we want to continue the loop if
this file matches one of these now this
is pretty difficult because we've got an
array here so how are we gonna check if
this file is in this array well you'll
be pleased to know there's an in array
function so this takes two arguments the
first argument is what you're looking
for and the second argument is what
you're looking in so the first argument
would be a string or an array but in our
case it's a string and the second
argument is the array so let's do a
check in here and we know that if this
is in the array we want to continue so
we're gonna say in array first argument
the file or the string or array we're
looking for in this case it's just a
string then we're looking inside of that
exclude files thing that's been passed
in there and then if that's the case we
want to continue the loop onto the next
one we will then subsequently check the
next one and then only if we don't
continue well we add that to the files
array so hopefully that makes sense if
not have a really good look at the code
I know sometimes these things can be a
little bit confusing so now we end up
with the following perfect so we've
excluded a list of things we don't want
and we've ended up with an array of
things that we do want okay so now time
to do a little bit of tidying up we've
pretty much looped through the files
we've done the checks that we need we've
added it to images or we renamed it to
files now we have returned the images or
returned the files and now all we need
to do here is close the directory now
this isn't necessary but it's good
practice to do so so I'm just gonna
close the files directory and that is
our function complete a very useful
function that we can now include on any
file and go ahead and just use it
passing in what we want to use okay so
now that we have this then we're gonna
end our PHP tag just there where once
again I'm going to create this document
layout so just a simple HTML layout
we're going to go ahead and change
the title over to gallery now what we
need to do within this template is loop
through each of these items in this
array so we can do that within HTML and
then from that we can create an image
tag and then using that new file path
that we have each of our images we can
go ahead and display it so to do this
within HTML again like we did with echo
earlier we just use an opening and a
closing PHP tag and then we just use a
normal for each loop now this looks a
little bit different we've got a colon
just after here and what we also do is
when we end our loop because remember
normally when we have a for each loop it
looks like this now what it looks like
when we use it in a template is we use
the end for each keyword and we end that
with a semicolon so it looks a little
bit different but it will work in
exactly the same way okay so we know
what we want to loop over we know how to
use the for each loop so let's go ahead
and finish this off so we're going to
say for each images as image and inside
of here again we just want to output
something in this case it's an image tag
we'll get rid of the OLT tag because
we're just kind of focusing on making
this work but in here what we can now do
is again open and close a PHP tag and in
here we want to echo out image which
remember is that path to the image and
remember it's a path because we went
ahead and added the directory were
loading from a forward slash and then
the name of the file okay so now that's
done let's head over to the browser and
we should see a list of them three
images so there we go this one was a
little bit more complex and a little bit
more to do here but hopefully we'll have
that made sense and if not have a really
good look at the code play around with
it change things and these kind of
things will start to make sense</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>