<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>PHP Tutorials: Register &amp; Login (Part 11): Register Users (Part 2) | Coder Coacher - Coaching Coders</title><meta content="PHP Tutorials: Register &amp; Login (Part 11): Register Users (Part 2) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>PHP Tutorials: Register &amp; Login (Part 11): Register Users (Part 2)</b></h2><h5 class="post__date">2012-05-11</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/5A50qmC7wFo" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">okay so welcome back to the the second
part of actually registering our user
inserting the data into the database
hopefully this is going to be relatively
short as we you know explained a lot in
the last part so the query that we're
writing now needs to be insert into we
need to specify the table we're
inserting into and actually users now
remember I gave an example of this query
in the last part of the tutorial and in
here we need to specify the fields and
we already know them we've we've echoed
the mountain we know that they are just
here okay that's they exploded data and
then in here we need to say values and
then there'll be the values so like that
again in brackets here and that's just
about it that's done so let's just go
ahead and test this by echoing this out
and then killing the script here so now
when i refresh undefined variable values
let's just check sorry that should be
data and let's go ahead and refresh okay
so this is our query now insert into
users username password first name last
name email values Billy which relates to
the username this which lists the
password this which relates the first
name Garret which relates to the last
name and that which relates to the email
okay perfect so let's go ahead and copy
this and paste this into our SQL tab
here so at the moment we've got one user
SQL I pasted this in this is what's
going to be executed within PHP remember
click go and one we're inserted so we've
now got a new user in the database
remember with the active status set to
zero let's go ahead and delete them do
this now within PHP so let's go ahead
and get rid of this line so this now
will actually query the database and it
will create this new user and that's it
that's all we need to do from that part
so we can leave that function as it is
so in register now we want to register
the user redirect somewhere and exit so
we're going to deal with the redirect in
the moment and then exit would just be
this so that's relatively
straightforward done and dusted okay so
let's go ahead and actually test this
now we'll go ahead and fill the form out
again I'm going to choose a username I'm
going to choose a password which is just
clearly password first name Billy last
name Garrett and email address will be
Billy L PHP academy' dork click register
notice under phone variable values now
what's gone on here let's just check
sorry again that needs to be data I
think I just reverted that somehow so
refresh continue done nothing showing up
if we look inside of our database you
now see that this record here has been
added okay so perfect we've we've done
what we wanted to do we've actually
registered a user we can't log in
because this active status is set to
zero but we can you know you can go
ahead and just edit and manually change
that and try and log in with that user
so now obviously we're off with register
the user we want to show them a nice
message to say that they've been
registered so let's go ahead and do that
now so we want to redirect the user now
so I'm going to use the header function
and I'm going to say location register
dot PHP and then I'm going to say
success so I'm quick I'm sending a
variable get variable success to this
page so what I can do now is I can just
just up here I can say if
is set dollar underscore get success and
empty dollar underscore get success now
this isn't necessary to say and empty
but essentially what we're looking for
here is whether this is on the end of a
URL we're saying if it's set then we
want to we could just echo you've
escaped that being registered
successfully there we are
and we're done I could then just say
else do all this and indent that there
okay so now we've got if this isn't set
we just go ahead and do the normal flow
of the application otherwise when then
when we direct the user once we've
registered we show this message to them
so let's go back to the registration
script we'll go ahead and delete this
account here and we'll start again so
Billy
password password Billy all right
video PHP academy' dog click register
you've been registered successfully now
that's all well and good but now we're
showing them the form the user accounts
going into here we're still showing the
form to the user so what do we do in
this case well we could extend this else
here and extend it beyond this part here
so I think we'll do that so let's go
ahead and get rid of that there so we're
going to say else all the way down here
and we will break we won't bother
breaking into PHP because we've already
got a tag open here we'll end that just
there and being a bit of a nitpicker
I'll just go ahead and indent that as
well so it's aligned up with the rest of
our code here so let's just run through
the flow of this for anyone that hasn't
understood essentially what we're doing
is when we run through this we're
validating as we've already discussed
we're then checking if this success
variable is at the end of the URL if it
is we just like how you've been
registered successfully if it isn't we
check for posted data we check for
errors and then we also show the form
okay so we output any errors or we
register the user and redirect them in
this case this line will be executed
okay so it's not hard but it might take
a while if you're looking at it to
understand the flow of how this is
working so let's go ahead and delete
this user again and let's go ahead and
in fact we can just force this success
you see now I've just put a question
mark on there with a success however
normally without that we get the form we
can then go and just register the user
again for the third time and oops that's
my first name really Garrett and the
email address register you've been
registered successfully done now the
benefit of doing this is now when I
press f5 I can't actually refresh that
that form submission otherwise I mean in
this case it would check and it would
know that the user really exists but in
this case it might run the query
in other cases sorry it might run the
query over and over again that's not
what we want so now that the user is in
here we can go ahead and we just edit
this to one click go over to our site
login Billy and pass pass word click
login hello Billy there we go and we've
got currently we currently have two
registered users now because two of them
are set to active so now you can start
to see if I log out and I log in as me
you can start to see the folks
flexibility of this now that we've able
to you know now create users log in and
everything like that so that's
essentially it for actually registering
the user we've taken validation into
account we've taken security into
account by looping over this array we
using a ray walk and we've actually
registered the users redirecting them to
a success page otherwise outputting any
errors and
that stuff so yet we've now registered a
user</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>