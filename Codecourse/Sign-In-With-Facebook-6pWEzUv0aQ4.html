<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Sign In With Facebook | Coder Coacher - Coaching Coders</title><meta content="Sign In With Facebook - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Sign In With Facebook</b></h2><h5 class="post__date">2014-06-11</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/6pWEzUv0aQ4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">in this video we're going to implement
the ability to sign in with Facebook
using PHP so let's take a look at how
this works if we hit sign in with
Facebook here you see we get this window
here if we're not signed in already we
will be asked to sign in and we get to
review the information that we are
providing to the app and we hit OK that
will then redirect us back and you can
see it's just showing my full name you
can access other user information here
depending on what you're requesting so
let's go ahead and sign out and the
first thing we really need to do is go
ahead and setup our app it will give us
our API key then we go ahead and install
the Facebook SDK the version 4 and then
that's it really there's a few lines of
code and we're pretty much done we can
authenticate the Facebook SDK makes it
really easy to implement this so the
first thing that we're going to do is
create a new app this is absolutely
vital to implement this so let's go over
to develop the stop facebook.com/ and
let's hit create a new app we'll give
this a name we're just going to quit PHP
academy' in this case and we'll choose a
category we hit create app and we type
in this code so once that's done you'll
see that your apps created you'll have
an app ID and app secret we'll be using
these later when we connect to the
Facebook API but the first thing that we
want to do is go ahead and install the
dependency so let's head over to our
text editor and I'm going to create a
new file in here this is going to be
called composer JSON now you'll need
composer installed to install this
dependency so head over to get composer
2 or if you haven't already got it and
follow the instructions to install it on
your operating system and what we're now
going to do is we're going to use
require to requiring the dependencies
that we need now the Facebook SDK is
hosted on github and you can download
this via composer by using packages here
so we're going to be installing not 4.0
point 7 or anything like that we're
going to be including four point oh
point asterisks so let's paste this in
here and we'll change this to an
asterisk so what we're going to do now
is actually head over to the command
line and run
composure install and that's going to
hit install this dependency for us okay
so now that's downloaded you will notice
that you have a vendor folder inside of
your directory and this click includes
something called auto load which just
allows you to conveniently load in all
of your dependencies for your project
now we're going to create a new folder
inside of our root directory called app
and this is going to house a file called
init PHP which is just going to require
in that auto load file so that's so
require once vendor also load dot PHP
now what we also want to do at this
point is make sure we start sessions
because we're going to be storing the
token that we get back from Facebook in
a session now what we need to do before
we connect using the Facebook SDK is to
make sure that we have a valid URL or
URI as a OAuth callback so if you head
over to your app settings in this
left-hand panel and you head over to
advanced and scroll down you'll see
valid our
redirect your eyes so I'm going to paste
this in here and this just means that
when we validate we know we're going to
be redirected back to the right place so
if we hit Save Changes here we're now
actually ready to start to connect to
the API so what we need to do is we need
to first of all provide our API key or
our secret key in our app ID in here so
if we call the Facebook session class
which is stored under the Facebook
namespace we use the set default
application method to provide in two
parameters this is our app ID and app
key so under here we need to grab our
app ID and we can paste that in there
and we need to grab our app secret which
shouldn't be publicly visible and we can
paste that in there so now that we've
done that we can create a new Facebook
redirect login help it instance what
this will help us to do is generate the
you
well that we click as a user to sign in
and then it will check for us things
like whether we've been redirected
successfully back and the rest is a
breeze so let's create a Facebook
variable here and we'll set this equal
to new Facebook and again it's namespace
under Facebook a Facebook
in helper now inside of here we need to
provide the earth URI which is this one
here so we just paste that in and we're
done so what we can now do with this is
we can generate that link that we saw
earlier so under our root directory
let's create a new file this is going to
be the index file where we show the user
the link let's just bung some basic
markup in here quickly
okay so I've just put some basic markup
in here but this can be whatever you
like what we do need to do is we do need
to include the init file at the top of
this page so let's require that in so
app in it dot PHP and that gives us
access to the Facebook variable that we
created earlier what we want to do down
here is we want to create an if
statement that allows us to check if a
facebook session is set so we're going
to check if it's not set here so it is
accessing the session superglobal and
we've called the session Facebook will
be setting this later so make sure that
you remember this name and let's end
this if just here okay so what we're
going to do in here is we're going to
create an anchor I'm going to say sign
in with Facebook this can be anything
you like an image or whatever so for the
link we can we automatically generate
this we don't really need to do much we
just echo out Facebook and then there's
a method called get log in URL so let's
take a look at what this is done there
we are so when we click on this you see
that we're redirected through to
Facebook and it asked for permission now
we're not going to hit OK just yet
because we don't have any way of
processing things when we've come back
from Facebook so inside of in it dot PHP
we're going to do this now now we're
going to wrap this in a try block so the
first thing that we're going to do is
check if or check the method
sket session from redirect so we create
an if statement here and within this if
statement we're going to set a variable
at the same time so we're going to say
if session we're storing that in session
and what we're checking is get session
from redirect so if that's the case what
we can then do is store this in a
session
remember that session name and from the
session that we have stored here at the
same time as checking we use the get
token method to get this token and what
we're then going to do is we're going to
just redirect the user back to the index
dot PHP page you can do whatever you
want here so let's check that this works
first of all we should see this
disappear once that session has been set
so if I hit sign in with Facebook and I
hit OK our code of course let's head out
catch on here now there's a couple of
things that you can catch one of them is
a facebook request exception which is
when Facebook returns an error and then
we've got just a normal exception when
we have local issues so let's say under
the name space of Facebook catch a
facebook request exception and let's
call this e we're not going to actually
do anything in here we'll just say when
Facebook turns an error and we're also
going to catch a normal exception and
we'll just namespace that under our
current and then we'll say call this E
and this is just a local issue so let's
try this again
let's so go back and there we go so
basically now we are signed in we have
that session set so let's just quickly
get rid of this session the resources
cookies and localhost we'll just go
ahead and get rid of that and we're no
longer signed in so what we're going to
do now is we are going to process sign
out so under the root directory let's
hit a new file and let's save this as
sign out of PHP and in this file let's
require in
app init dot php' now what we now want
to do is simply unset this facebook
session and then redirect the user back
to index dot PHP so let's go ahead and
test this set sign out so we sign in and
we will add our link inside of index so
let's have an else just here and we'll
create an anchor the links through to
that page so sign out
okay so let's test this out we now
signed in so we should see this we hit
sign out on we signed out so what we now
want to do is we want to check if the
user is already signed in we then want
to make a request and actually retrieve
things like their name or other
information about them depending on what
we request so inside of in it dot PHP
here we're going to use this as an
opportunity to check if this session is
actually set so we say if is set session
Facebook and then inside of here what we
can do is create a new facebook session
then we create a request we execute that
request and then we grab information so
the session we store in a variable and
this is a new Facebook session
namespaced under facebook so inside of
here we pass in the session which
remember is the token so let's pass in
that session now what we now need to do
is make a request to /me which will
retrieve information about the user so
let's create this request as a new
facebook request
so we need to pass in the session here
that's the session that we need to
validate we need to pass in what we're
doing the the action and then we need to
pass /me which retrieves the users
details we then want to execute this so
we say request equals request execute so
now what we can do is we can use the get
graph object method and we can use that
to grab the information from the user so
let's say request get graph object and
we're going to get this as an array and
that's it so let's do a print are
quickly on user so we'll sign in make
sure we haven't missed spelt anything
and there we go now you'll notice that
that actually sign being instantly and
didn't ask me to verify myself again now
the reason for this is because if we
check under your app settings you'll see
that you've got an apps you used section
and this means that because we're
already we've already authenticated
essentially we've already said yes I'm
allowing this app to access all this
information then that's it we don't need
to do it again so you can see you've got
a variety of different information about
the user go ahead and look at the docs
if you need any more but for now what we
can do is we can get rid of this and
inside of index dot PHP we could do
something like you assigned in X and we
could replace X with and there we go</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>