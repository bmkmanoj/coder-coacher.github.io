<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Social Network with PHP: Likeable polymorphic relationships (32/37) | Coder Coacher - Coaching Coders</title><meta content="Social Network with PHP: Likeable polymorphic relationships (32/37) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Social Network with PHP: Likeable polymorphic relationships (32/37)</b></h2><h5 class="post__date">2015-08-28</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/l3LBphpylQ4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">now we'll create our like model we'll
see how we set this up to be a
polymorphic relationship and then we'll
update our status model so we can like
statuses we can implement the logic for
this and the functionality for this
later on
so under models we are going to create a
new file and this is going to be called
like PHP call it likable if you want
it's entirely up to you so we namespace
this under chatty models and that's it
and the class is like and of course this
extends our base eloquent model which we
need to import so we use illuminate
database eloquent model and we set
everything up as usual so the table now
this is required because it's a slightly
odd table named likeable and here we
have a method called likeable and what
we do here is we say return this morph
to this says I am a polymorphic
relationship I can be I can be applied
to any other model so if we return over
to our status we need to be able to grab
who or what has liked a status I guess
so what we have here is we have a method
called light because much like we'd
relate to and say this has many likes or
whatever but this time what we're gonna
do is instead of has many we are
morphing many and this allows laravel to
pick up which model that you're talking
about and the ID and then it will work
out the relations for you so this is
chatty models like and we just pass in
the name here of the method which is our
polymorphic relation so that's pretty
much it the only other thing we need to
do on the like is obviously when a user
creates a like so we have here a user ID
we also want a relationship in here to
see who likes something it's later on if
you want
a list of people that liked something
you can do so we'll implement this now
so user and this is just a normal
relationships it's just pretend this
belongs to and then we pass in our user
model so it's chatty models user and the
foreign key is user ID so the other
local key
so we've now set up our models to
actually be able to attach alike to any
model we want this is how we do it if we
wanted to you know at some point allow a
user to be liked for ever reason we
would do the same thing as we've done
under status for user so we could have
this in here and we could say likes
morph many and it would be exactly the
same thing so you can do that later on
if you want but now obviously we're
focusing on just liking statuses at the
moment remember we have these hard-coded
values in this like link doesn't go
anywhere and this count here doesn't
actually represent the amount of likes
each one has but we can easily go ahead
and implement that</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>