<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>PHP Essentials: DateTime: DateTime Periods (7/9) | Coder Coacher - Coaching Coders</title><meta content="PHP Essentials: DateTime: DateTime Periods (7/9) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>PHP Essentials: DateTime: DateTime Periods (7/9)</b></h2><h5 class="post__date">2016-09-05</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/DtO1W3BGqdU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">one thing that can be really annoying
when you're working with dates and times
specifically when you're asking the user
to select maybe a specific date or time
is generating these easily so you don't
have to write out all of the markup or
really just use any kind of looping so
what we're going to do is look at taking
a form that you would usually have a
date or time selection in and just
automating this using date time and
making it really easy to update so by
this let's just take a very quick
example and look at this I mean if you
were to have some kind of HTML document
you would have some kind of form down
here with maybe a select box in and into
this you would have some options so
maybe this was the time let's just
create a label here for time go ahead
and just update these very quickly now
in here you may have say twelve o'clock
like so you might have 12 30 go ahead
and update these and you can generally
just do the same so maybe 1245 or you
might have say 1300 really doing this
manually like this just won't do just
takes too much time and when you want to
update things when you want to change
the period to between things so if you
want to change them to every quarter of
an hour that's going to be really
annoying to do now you can go ahead and
do a loop here so you could loop over
and just try and be clever about it but
really this just takes up a lot of
effort there's lots of messy code
involved so what we're going to do is
just getting rid of that form take a
look at how we would do this using date
time and this uses the date interval
class that we've already looked at
that's remember when we wrote weird
things like P T and then one H for one
hour or period ten days whatever i'm
also going to look at a new class called
date period so to get started them we're
going to set a start this is when we
want this to start when we want the date
period to start so we're going to say
date time then what we're going to do is
set the time so we're going to set time
on this to start format our so that's
taking the hour of that and then 0 for
the minutes and seconds so at the moment
we have the following let's just take a
look at this so we don't get too
confused so we have regardless of the
date this doesn't matter at this point
because all we're interested in is the
time we are setting a time here now this
means that what we can do is if we
wanted this to maybe start at 30 we
could go ahead and do that so if we
wanted D minutes to be 30 now in our
case what we could actually do is say
well when do we won this date period to
actually start well of course what we
could do is go ahead and manually define
this in so we could say well when can
someone book say book a hotel well they
might be able to book from nine in the
morning they might be able to book from
10 or hotels about example but maybe any
kind of an appointment let's say they
can book from ten o'clock in the morning
so now that we have our start period we
need an end period and we need to be
really careful about this because we
want to take the start and we want to go
ahead and add time on so let's say you
were working with a date you would want
to clone the start because you might
want a specific date in here and then
you would want to go ahead and set the
time for this as well now in this case
we want this to run maybe up to let's
say six o'clock so we'll say 1800 hours
and now that we have our start and our
end our boundaries we can start to loop
through these date periods so we want
the interval first of all this is really
important remember we want this to be as
flexible as possible so we're going to
create a new date interval like this and
we're going to define the interval now
we're not going to have days or whatever
in terms of intervals we're just
interested in the time here so we're
going to say p for period time and then
we're going to give a time so let's say
we allow bookings every one hour or
change this in a bit just to see how
flexible this is now we need a date
range so we're going to say date range
and this is a new date period like so
and then in here all we do into this
class is pass in the start
the interval and the end what this will
give us are all of the ranges between
the start and the end if we change the
end this'll update automatically if we
change the start this will automatically
update if we change the interval once
again this will automatically update for
us it's very very flexible now so now we
need to do it's a simple for each loop
because from this will have a looper
ball so let's just go and do a VAR dump
on date range just so you can see what
this looks like and now there we go so
this doesn't look like much it doesn't
look like we could loop through it but
what we can do is actually iterate
through this and it's only when we start
to iterate through this that we will
actually see the period so let's just
test this out we're going to say for
each date range as date let's now for
each of them loops do a VAR dump on the
date and then we'll format it in just a
moment now we have starting at ten
eleven twelve 12 all the way up to five
and of course if you wanted to include
six as well because of course what we're
doing here is stopping it at six then
all you would do is just go ahead and
increment that because it assumes each
kind of slot is one hour so now what we
can do is go ahead and format this so we
would perhaps put this into a form so
let's actually just test this out let's
go ahead and create our mark up again
and we'll go ahead and we'll just put a
select here we went with all the form or
anything like that this would be some
kind of time and now in here what we can
do depending on what you're using you
might be using a templating engine or
something like that i'm going to say for
each date range as date i'm going to go
ahead and end the for each just down
here this is just a plain way of
templating than PHP we have an option
like that the value in here would be say
date format and then in here we would
say something like h i s like so and of
course we want to make sure we echo this
out and we can do a similar thing just
here
as well so now we end up with the
following really simple now let's say
that things changed and we were now
accepting appointments from eight till
eight and we wanted them to be half an
hour slots well in this case we've got
one hour what we can do is now say 30 m
four minutes and there we go if we just
fix this up like so there we go so we've
now got 8 830 9 930 all the way up to 7
30 great so that just shows you how
flexible you can be with this kind of
stuff without really having to do much
work here we've just gone ahead and set
the start the end the interval all of
which is very easy to update and will be
automatically reflected in the form and
of course when this form is submitted
you have a format exactly like this
which you could then go and pass
straight back into a date time instance
if you wanted to or of course it's in
the correct format to go ahead and store
in your database if you need to do that
as well</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>