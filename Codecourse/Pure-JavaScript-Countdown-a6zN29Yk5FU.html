<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Pure JavaScript Countdown | Coder Coacher - Coaching Coders</title><meta content="Pure JavaScript Countdown - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Pure JavaScript Countdown</b></h2><h5 class="post__date">2013-10-11</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/a6zN29Yk5FU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">in this tutorial we're going to create a
JavaScript countdown this is going to be
a function that's allow going to allow
us to pass in a few parameters the first
parameter you can see is a human
readable date that's extremely useful to
be able to pass in something like that
I'm also going to pass in a list of or
an array of elements that are to be
affected on our page so you can see here
that each of these corresponds to the
mark-up I've created up here so we in
this instance is accounting down days
hours minutes and seconds and we've
defined these all in here the reason for
this is there's no point updating data
that you don't need to or that isn't
there lastly we have a callback function
which can obviously be defined as an
anonymous function as you can see here
or it could be a named function that you
want to reference to be to be called
when this finishes so let's take a look
at how this works let's just open a
browser and refresh here so you can see
that we've got the different sets of
timers here so we've got days hours
minutes and seconds and we can quite
clearly see that we've defined a time of
6:30 p.m. on today's date which leaves
us with 52 minutes and 6 seconds as we
speak
so this is what we're going to be
creating it relies on no external
javascript libraries so we're not using
anything like jquery it's going to be
extremely lightweight and you know easy
to manage and easy to change around and
the way that we're going to do this is
with a global function which could be
become part of your applications overall
object under that namespace or you could
of course just take this functionality
and put it into your page as you as you
wish depending on how you feel about
global functions so let's go ahead and
get started and wipe the slate clean and
start working on the markup ok so for
the benefit of those just starting out
in JavaScript we're going
do this from scratch essentially so we
can already see that we're working with
two files these are countdown Jas and
countdown to I HTML countdown Jas is
where our main function is going to be
included so I'm actually just gonna
first of all go ahead and include this
on to the page so I'm just going to use
script tags with a source attribute and
I'm just going to specify a countdown
block j/s that want to load in the next
thing I'm going to do is open and close
some script tags here because in here
this is where we're actually going to
call our function so let's go ahead and
just call this anyway and then we'll
start to add our parameters to it now in
terms of the mark-up we need four
elements and these are just going to be
span elements however they could be any
element type that you want as long as
you can set the inner HTML of these
elements so I'm going to give these all
IDs that correspond to what they are so
in this case we're going to have days
hours minutes and seconds so let's just
duplicate these down so we've got hours
minutes and seconds so on the mark-up
side of things were all done what we now
need to do is jump over to countdown
jeaious and start to actually build our
countdown functionality so the first
thing to do is just to clear the name of
this function and then outline the
function like this so we are naming the
function here in a variable and
assigning this function to it rather
than saying something like function
countdown and like I said before if you
do have a an overall application object
you can add this method if you like to
it so let's create a few variables the
reason we want to do this is because we
want to establish how we actually
calculate minutes hours and days and
obviously seconds based on a time that
we're given now this is actually
extremely straightforward and I'm going
to use underscores to represent these
numbers just to keep them separate to
other things that we're going to be
working with like timers it just means
that when we scan our Chi
we can see where we're doing the the
most calculation so a second is
obviously 1000 milliseconds and now
let's go ahead and work out what a
minute is this should be quite obvious
its second times 60 now you can see here
I've created one variable if you like
but I'm actually comma separating these
so we're crate we are creating more than
one variable here we're just not
defining var each time we want to create
a new variable so an hour is going to be
a minute times 60 again fairly
straightforward and a day is going to
equal an hour and you probably already
guessed times 24 now I'm going to come
down a couple of lines and I'm going to
define the end date that we have in goal
now where are we getting this date from
when we looked at our example we defined
a date just in here and that represented
us of readable date that we want to
count down to so in this case that's
what it's going to look like so if we
define this as a parameter here we can
call that something like end now to work
out the end date we need to create a new
date object in JavaScript so I'm going
to redefine this variable and I'm going
to say new date and so I'm passing in
what we pass from here to this this date
object that we're creating now we need
two more variables one of them is going
to be the timer and the next one is
actually going to be the calculate
function that we use to calculate
everything and spits everything out
we're only going to use one function
here just so we can fill in the contents
and focus on the code rather than
splitting this up into bite-sized
functions if you like so I'm going to
call this calculate and I'm going to
make that equal to a function and that's
it that's all we need to do for now we
have our end date we have our timer
ready for when we want to set a timer
and we've got our calculate function so
I'm going to go ahead and call the
calculate function from just down here
and in here for now
going to console.log something out so
we'll consult log out end just to see
how this line performs so let's go ahead
and run this in the browser and see what
happens
lovely so we've now passed in our human
readable date and we've been presented
with this now with this this might look
a little strange but we're going to be
able to determine what we how we want to
work with the the now value we can check
if it's not a number so we know it's an
invalid date etc etc so in actual fact
that's probably the first thing that we
might want to do here so inside of our
calculate function we might want to
create an if statement just to check
whether we have a valid date on our so
let's go ahead and create that if
statement and we're going to use the is
is not a number function so n a n is not
a number you might have commonly seen
this in sort of anything that calculates
with numbers in JavaScript you might
have seen this appear on a website
somewhere you get an N a n value back
and you think wow what is that but
basically just means that it's not a
number so we passing an end there and we
want to check whether this is a number
or not and we want to say console.log if
it is not a number so I'm going to use
an exclamation mark there to check if
this is false and in this case I'm going
to say invalid date/time perfect so what
I'm then going to do is I'm going to
just return and we don't want anything
else to run if we have an invalid date
there's no need to so let's go ahead and
and check this out in our browser so if
we just refresh it says invalid
date/time oh sorry
home I've actually gone ahead and added
a false check there when it's not needed
quite confusing with JavaScript if you
were to say is not a number we won't say
if it is a number or not anyway let's go
ahead and and define a few more
variables that we need to work with
now when we're counting down we need to
check if we have well we need to check
and compare against the current date so
I'm going to create a variable called
now and I'm going to set that equal to a
new date object we're just going to
return us with the current date I'm then
going to create a variable called
remaining and this is going to be equal
to end dot get time and that's a method
- now dot get time again method I'm also
then going to define a variable called
data now this data variable is going to
be where is store we're basically gonna
we're basically going to build up an
object of the days hours minutes seconds
values that we want to return and then
display on the page so it's just sort of
a lucker
we want to use this at some point but
we're going to declare it here anyway so
let's go ahead and continue with this
the first thing that we really need to
do is check if there is any time
remaining on this timer now we can do
that by checking if the remaining time
that we've just calculated here is equal
to zero is less than or equal to zero if
it's less than equal to zero there's no
need to start applying numbers to the
area on our page here so by default
we'll have double zero is just here to
signify that so that will now look like
this so if there's if if if the time has
passed already there's no need to even
begin our timer start counting down any
functionality it would be a complete
waste of resource so let's go ahead and
check this
so if remaining is less than or equal to
zero what do we want to do well we want
to basically call up call our callback
but we'll get to that in just a moment
so here we'll just put a comment and say
callback
and what we're also going to want to do
is clear our timer so we want to clear
our timer at some point and so we want
to clear our timer we want
call back and we that's it really so
otherwise we want to go ahead and check
our timer isn't set and then set our
timer otherwise so here I'm going to say
if not timer so if our timer hasn't been
set I'm going to set our timer to using
the set interval function we're going to
the function that we're going to run is
calculate and we're going to run that
every second so we've already defined
how many milliseconds are in a second
here so we don't need to specify a
thousand here we can just use the
variable we've already created so what
we're going to do now is we're going to
down here console.log second now what's
going to happen here let's just run over
the code we've already written we're
already running our calculate function
so that's going to run this function
we're going to calculate the current
date and time using the date object in
JavaScript we're going to calculate the
remaining time check of the dates valid
assuming that it is we go on to this
part of our code and we're going to
check if we have any remaining time left
so as long as the counter or the current
time hasn't passed the time that we want
we're going to go ahead and set our
timer otherwise we're going to do
something else but we'll get to that a
bit later on so when i refresh now
you'll see that this count every second
and you can see that Chrome the console
here is just adding a number on for the
same output so every second this is just
outputting second very very
straightforward so what we now want to
do is instead of this useless
functionality here we want to build up a
object of data that we want to output so
we're going to do out all of our
calculations then we're going to go on
and check about elements that we've
defined here actually exist and remember
we're going to define them in an array
just here and we're then going to loop
through each of the elements and create
put the inner HTML to the value that
we've supplied so the data
variable that we defined here is going
to be an object and in here we're going
to have lots of different well the
things that we want to calculate
basically so we're going to have days
and similarly hours minutes and seconds
so hours minutes and seconds so here
what we're going to do is the days is
going to be the remaining time divided
by a day and what we want to do is we
want to use them the floor method on the
math object in JavaScript to floor this
basically round it down so that's what
math dot floor does so for the other
calculations we want to say let's put
these in brackets remaining mod day over
hour and again for all that we want to
do a math dot math dot floor on that and
again remaining mod hour and then we
want to divide that by the minute value
and again we'll just encase these in
brackets so we know what's going on also
makes it little easier to read and for
seconds we're going to do pretty much
the same thing
I'm sure you'll notice a pattern
remaining mod minute over second and
just make sure our brackets line up
there yet we've got a set in here and
set out here perfect so we've now
created or calculated rather our data
and I'm a fan of the console it just
makes it a lot easier to work so I'm
going to go ahead and console.log this
out every second so let's take a look at
this and you can clearly see here that
these values are changing in our console
as we scoop as we output them so every
time we're counting down you can see
these these basically changing
so you can see the seconds counting down
here in fact it looks like the minute
night it looks like it hasn't been
calculated properly so let's go ahead
and just check if we haven't done
anything wrong oh yes here we go so we
have an add a equals an hour equals 24
here so I'm sure someone spotted that
before I did but there we go that's
that's gone ahead and change now so yet
this is the rubbish we've output but now
we've got a more accurate picture here
so we've got 35 minutes each time we
loop and then for the seconds these
obviously will we'll have one removed
from them each time so they'll decrement
down down down obviously until seconds
reaches zero and the minutes is then
going to go down to us so they're the
calculations but we've already done the
next thing to do however is to actually
loop through the elements that we want
to apply these to and then we can
actually put the values on the screen
for the user to see so you can see that
now the 34 has changed in the minute
value here and 59 or the seconds of um
reset to 59 okay so let's jump back over
to our code instead of console dot log
data what we're going to do is we're
going to check if our elements have been
defined so they haven't at the moment so
I'm going to say if elements dot length
now length is a property of an array
that tells you how many items are in the
array and at the moment there are no
items in this array so this is going to
run is going to be false so let's go
ahead and do so so days hours minutes
and seconds cool so now that we've done
that what do we actually want to do like
what are we trying to achieve here well
the point of this is we want we want to
basically loop through all of the
elements that we've defined here and
then find them on the page and then set
their value to what we've defined just
here so let's go ahead and do this now
we want to say for X in elements so
we're now looping through each of the
elements now this code assumes that
you're always going to call the ID here
days hours minutes and seconds this is
just a representation of what you want
to show so you couldn't for example say
days with a Zed and then change this to
days that wouldn't work so let's go
ahead and change that now the reason for
this is if we just pop back to countdown
blah guess is that we have called days
here hours here minutes here seconds
here this could be changed of course so
perhaps it's something to go and change
if you really need that flexibility so
inside here I'm going to define a
variable called X and this is going to
be the position of the elements at X so
here I'm just going to say elements X
now I'm going to say document dot get
element by ID define X and then save dot
inner HTML equals data X so that
basically just replaces the values on
our page let's go ahead and check this
out on our browser oh okay elements is
not defined ah there we go that's the
problem that we've got is that we
haven't actually set this in our list of
arguments or proper parameters that we
want to pass through to our function so
this will be elements let's go ahead and
refresh and there we go now this looks
very strange the reason being is that we
don't actually have double digits on
here where we might want to see double
digits it's still fine when we have
values like this
but you can see these have turned to
single zeros and that's to be expected
just because of the way that we've done
our calculations now if we wanted to
change that there's a really short way
of doing this we just say data X is
equal to so we're sort of replacing this
data and what we want to do is we want
to say double zero we want to
concatenate that on to data X and then
we want to slice it -2 and what this is
going to do is it's going to add triple
0 it's going to add zeros on and then
cut it by 2
leaving you with either two digits if
there were if there was one or nothing
if there was if there was two so let's
go ahead and check this out when we
refresh we can see here up okay let's
just check this error out oh yes of
course
so what we've done here is is I've
misplaced the brackets so if I just get
rid of that like that perfect so just
gets to show you if you misplace your
brackets by accident and things go wrong
so now we've got double digits which is
perfect so the last thing that we've got
to do now is we have to clear our timer
if we finish the countdown if it reaches
zero and we've also got to call our
callback let's go ahead and define the
callback in our list in our argument
list he'll put a parameter list just so
we don't forget and let's go ahead and
define this here so I'm going to create
a function here and in fact let me just
pull this across it's a little bit
easier to read and here I'm going to
console.log finished
perfect so now what we want to do is we
want to clear the timer here if this
gets to zero so we say clear interval
and we know what the timer is called
it's called timer and callback as well
so what we want to do is we want to
check if this callback is actually a
function because we don't want to go
ahead and run if it isn't a function so
we create an if statement we're going to
say if type of this is really really odd
if you're not used to JavaScript but
this is how we're going to check the
type of this item that we've passed so
it won't say type of callback so this if
type of callback is function now the odd
thing about this is that we define this
in the string for example if it hadn't
been defined it would be undefined like
this so in this case we're checking if
it's a function and if that is a case if
that is the case we're just going to
call callback so very very
straightforward so let's go ahead and
refresh and we've still got 28 minutes
so I'm not going to make you sit for 28
minutes and wait oh this counts down so
let's go ahead and just match this up
with the time that we're on at the
moment so let's put this to 210 and
refresh so we've got about 30 seconds to
way in fact let's just put this down a
little more there we go there we go so
we've got 20 seconds to wait as expected
when we get to 0 and we're going to wait
an additional second then when our
callback so that's I guess a downside of
the way that we've written this is it's
going to take an extra second to perform
the callback but if you want to again
make this more precise go ahead and do
that so there we go and then we run the
callback so it's now says finished now
we can see a little problem here and
we're still calculating things even if
we even if we don't need them so for
example here you can see that we're
saying if raining is less than equal 0
else
set the timer now otherwise we want to
calculate our data if we don't have any
time remaining we don't want to
calculate it calculate our data so that
was misplaced if we place this in here
and just properly indent that you'll see
that if we make a slight change to this
and then refresh we'll get we won't get
this minus one problem crop up again so
let's just work this to count down when
we get to zero we were in additional
second the count down is the time is
removed and then we have our callback
performed here so the last the very very
last thing I want to show you is that we
don't actually have to provide an
anonymous function here we can of course
say var call back function equals
function console.log done and then
instead of passing this anonymous
function we could of course just say
callback function so it really depends
on how you want to structure application
but overall that is how we would create
a JavaScript countdown timer without the
use of any external JavaScript libraries</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>