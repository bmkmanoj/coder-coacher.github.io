<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>PHP Tutorials: Register &amp; Login (Part 7): User Data (Part 1) | Coder Coacher - Coaching Coders</title><meta content="PHP Tutorials: Register &amp; Login (Part 7): User Data (Part 1) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>PHP Tutorials: Register &amp; Login (Part 7): User Data (Part 1)</b></h2><h5 class="post__date">2012-05-11</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/JhLnS0mXr0M" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">okay so welcome back to the login and
register tutorial in this part we're
going to be giving ourselves the ability
to gather the currently logged in users
data and we're going to do this really
efficiently so if we ever add any more
fields to our database for example a
gender or any other information then
it's going to make it extremely easy to
just go ahead and help any data we want
so you'll see at the moment I am logged
in I have just literally a message here
saying logged in and nothing else I
don't even have a link to the log out
the log out father we created earlier so
what I want to do is I want to start
building up this side panel that's going
to greet me and it's going to give me a
list of links for example change my
password log out things like that so we
are going to be dealing in this tutorial
with the users to PHP function file and
we're going to be adding a function to
here that lets us pass in any number of
fields and return that in an array then
we can just use this anywhere on the
site at any point and just really really
easily you know type in what field we
want to grab and it will grab it for us
aside at the moment you this is the this
is the message that you can see remember
we created this at the aside which is
here so if the user is logged in echo
logged in else include the login form so
this time what I want to do is instead
don't to echo anything out I want to
include another file and I'm going to
include logged in PHP and we haven't
created this yet so don't worry we're
going to go ahead and just do that now
so I'm going to load up a new file and
save this in widgets and I'm going to
save this as logged in PHP so logged in
is going to house the hello Alex or
hello Billy or whatever users currently
logged in and that's going to be here so
when i refresh now you see that you know
it's gone there's nothing there that
simply cuspid any data in here so if I
just type something in there you'll see
that that's now being included at the
side so what we want to do is we want it
to look something like this hello
Alex this is this is going to be the
username here so we want to replace this
value eventually and we don't need to
worry about any any checks so if logged
in just simply for the fact that we're
including this if the user is logged in
so we can go ahead and get rid of this
aside dot PHP file now I'm going to
focus on creating this function and
outputting it in this file now we're
also going to need to open up our init
file because down here or up here rather
we're going to include a file sorry a
variable that's going to hold all of
this data we can use that anywhere
because remember in it dot PHP we're
going to include in any files that we're
using okay so let's go ahead and just
jump and take a look at our database so
we have all of these fields the ones
that we're interested in pulling in for
run time are things like the username
the first name last name email and
active we can use we can do a clever
little trick with that to see you know
if the users currently logged in we
might want to delete this so or change
this value the user will then be
automatically logged out so we'll look
at that trick a bit later in the next
part okay so yeah so we want the
username first name last name the email
address we're actually going to pull in
password as well and you might be
thinking oh hold on a minute that's
really insecure isn't it well no it's
not because we're going to be running
this obviously compiling server-side no
one's going to have access to this so we
can pull in password and that's going to
be really really useful for the change
password part of the tutorial as well so
okay let's go ahead and start to create
this function then so I'm going to
scroll down to here down to the bottom
if that will start it at the top it's
just going to make a lot more sense so
I'm going to call this function user
underscore data and this function is
going to take an unlimited amount of
parameters the first one being the user
ID so I'm only going to define the user
ID parameter within the function and the
reason being is that we can actually
access parameters that are passed beyond
those that we've defined so for example
if I was to go into init dot PHP and I
was to create a
a user data variable here and say that's
equal to the user data function I might
pass in the session ID like that and
then I might pass in first name last
name email etc so I can pass in these
different variables and within the year
the user data function I now have access
to anything I pass beyond this and not
believe me people realize this but we
can access these variables here and
that's useful because we don't need to
define what we pass through to this and
what we would turn so essentially user
data is just going to be returning all
this data from the database so I'm going
to wrap this around a conditional
statement and this is basically going to
be if the user is logged in so if logged
in
sorry that's a function is equal to true
then we now want to grab this data we
don't want to do if the users logged out
because that you know it doesn't make
sense we also need to define the session
the user ID session remember we set this
in login dot PHP let me just go ahead
and open it up here we set this here so
we've got a session called user ID and
that's equal to the user ID that the
user is currently logged in in my case
that would be one okay so we're going to
say session user ID is equal to dollar
underscore session user ID so we're now
grabbing that value I'm going to go
ahead and just replace this now with
session user ID so again I'm putting
this within logged in function check
because you don't need to set a session
user ID and hold this in a session user
ID variable you know if the user is not
logged in okay so let's go ahead and
pass in all the values that we actually
want to retrieve from this so I actually
want the user ID as well that might be
useful at some point I want the user
name
I also want the password so I'm grabbing
all this data that I can use anywhere on
the site at any point so the first name
last name and email address and that's
about it down here a bit later on we'll
create the function to log the user out
if they don't exist we won't pull it
through here instead okay so now we're
going to go ahead and test out putting
this these values let's just go ahead
and refresh our page to make sure
nothing's gone wrong that's fine we're
logged in at the moment we've got this
hello Alex but we're obviously looking
to replace that so the function user
data what it's what's it going to do
well the first thing we want to do is
define that define a variable with it
with an array an empty array that's the
data that we're going to return data
equals array that's all we need to do
now we need to grab the user ID from
here but what you need to sanitize it so
I'm going to cost it to an integer and
essentially this is just going to mean
that we can't we cast this value to an
integer meaning we remove any characters
or anything like that and we create an
integer from that that input that just
means that we can't you know go ahead
and and pass any SQL injection you know
strings into our into our function or a
query later sorry okay so now what I'm
going to do is I'm going to define two
variables that are going to get the
arguments from the function the first
one is going to count the number of
arguments the second one's going to
actually get the arguments so I'm going
to create a variable called func get or
now we'll say func num args first and
this is equal to the func num args
function and what this is going to do or
just echo func num args when I go ahead
and refresh we've got seven now we've
got this number up here because we've
done it in init dot PHP
that's not important the fact that we
have passed through one two three four
five six seven parameters we now know
how many parameters we've passed through
to this function so that's really useful
because then we can loop through and
grab each one okay so now I want to
actually define func get args and this
is going to be
func get args and I'm going to go ahead
and I'm going to print our func get args
now func get args function returns an
array of the arguments passed through to
the function so in this case we're just
going to get a visual representation of
this data and you'll see here we've got
a first element is one because that's
the session ID remember my my user ID
the second is well from this one all the
way over to here are basically what
we've passed through that basically is
that onwards okay so very clever we're
now checking all of these values or
retrieving all of these values so I'm
going to say if and I'm going to do a
quick conditional statement to say if
func num args is greater than zero so I
has it got one or more arguments I'm
going to go ahead and I'm going to unset
in fact it should be more than one
because we need the user ID and then
another field to grab I'm going to go
and unset the first the first what's it
called our element of the array and so
I'm going to go ahead and unset func get
args 0 so now when I go ahead and print
our on that func get args we have user
ID use name but we don't have the
initial user ID because we've stored
that in a variable up here we don't need
to worry about it anymore and the reason
I've removed this from the array is
because I want to create a field set
from this data and you'll see what I
mean in a minute we're going to use the
implode function again that we used in
the last part of the tutorial so I'm
going to create a variable called fields
and that's going to be equal to implode
we're going to implode with with
something remember we're taking a front
and array and converting it to a string
so we're passing through func get args
and what we essentially want from this
filled thing and if I go ahead and just
echo fields here you'll see that now we
have all the fields that we pass through
to this function in a list well a string
basically what we want to do is we want
to be clever we want to convert this to
how we would pass through it into a
MySQL query so we're in the next part of
the tutorial we're going to look at
actually constructing or fiddling around
with this to make it so it's the the
correct format to pass through into a
query and what we can then do is pass
this string into the query and just
retrieve all the fields we want so like
I said it's a really flexible way of
doing things and then if we want to go
into init dot PHP and remove something
it just automatically updates itself
because it loops through all the
arguments puts into the query and we're
done so that will be in the next part of
this this part of the tutorial</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>