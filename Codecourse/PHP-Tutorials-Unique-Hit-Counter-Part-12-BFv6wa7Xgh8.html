<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>PHP Tutorials: Unique Hit Counter (Part 1/2) | Coder Coacher - Coaching Coders</title><meta content="PHP Tutorials: Unique Hit Counter (Part 1/2) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>PHP Tutorials: Unique Hit Counter (Part 1/2)</b></h2><h5 class="post__date">2011-05-27</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/BFv6wa7Xgh8" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hi this is Alex from PHP academy' in
this tutorial we're going to be creating
a unique visitor counter based on the
users IP address now there is another
tutorial available on the PHP academy'
channel that involves a non unique
visitor counter in which we just
increment a value inside a text file
such as this one here counter txt
however what I've actually done is in
the same directory created a new file
called IP txt which I have open here
which is also blank and what this is
going to do is it's going to store a
list on a line by line basis of user IPS
and these user IPS correspond to the
user IPS that of the visitors that have
visited now the way we're going to be
doing this is there's a couple of things
to point out before we start the server
variable which we're going to be using
which is the remote address server
variable isn't entirely reliable for IP
addresses for example you'll see now
that although I'm connected to the
Internet on my laptop the IP address
will still be one to seven or not dot
one so it won't reflect my global IP
address this is the same for people that
are working through for example hub or a
Rooter you may have a an IP address
something like 192.168.1.1 as opposed to
their global IP so bear that in mind
there are other methods you can use to
grab a more reliable IP address but that
can sort of be returned with a simple
Google search but for the simplicity of
this tutorial I'm going to be doing this
the other thing to point out is that if
you are using this to count visitors on
your website we're using the file get
contents and the file put contents a
function as well as the file function
now if you were to use this on every
page in your website the CPU load could
increase dramatically as opposed to if
you were doing it through a database for
example where you're accessing a my
QL server the other thing to point out
is the file size of IP txt if you're
expecting a lot of visitors and you're
building this file up you may find that
you'll get a large file size therefore
you're wasting space on your server as
opposed to a database method which would
be more reliable however if you are
interested in learning some of the
functions that we're going to be using
in this it's a great tutorial just to
get to grips with file handling and
checking if a file exists in a file and
performing an action based on that that
so this is essentially coming off of the
simple visitor counter which dealt with
non unique hits so we're going to be
doing exactly the same thing but we're
going to make a few minor changes so the
first thing we're going to do is we're
going to define a variable called file
name and that's going to be equal to
counter txt this is where we're going to
store our hits so it's just going to be
a single integer from 1 to the amount of
hits you have gained we also need an IP
file name and that is going to be you
probably guessed IP txt which is a file
I currently have open here the reason
I've got these open in my browser is so
I can monitor the changes throughout
creating this okay so we're going to
create a function and this is going to
be called Inc count so creating the
outline of our function we've got
function keyword here Inc count is the
name of the function which we're going
to call just down here when we finished
the function contents and then we have a
block here with curly braces now we need
to make file name and IP phone and
global in order to use them inside of
our function so we simply use the global
keyword and we say file name and then
comma IP file name this makes these two
here global to this function so we can
use them inside of here
ok so the first thing that we need to do
oh actually I've forgotten the IP
address we need to define the user's IP
address and store it in this IP variable
and to get an IP address its dollar
underscore server so accessing server
the global server variable set and
inside of here it's remote underscore
addr which stands for address so we've
got the IP we can use this later on what
we need to do now is we need to
establish counting out hits this is
outlined in the simple visitor count
tutorial however I'm going to go ahead
and write it out again so we're going to
be creating a variable called current
value and this is going to be written to
the file counter txt based on a
condition that the file exists obviously
if it exists we are going to just write
the current value add one otherwise
we're going to set the count this
current value to zero and later on add
one to it when we're adding the same as
we do if we already had a value they
existed so the current value we create
some parentheses here a question mark a
colon and then a line terminator and
we're going to put in put some data
between these and essentially this is
the condition after the question mark is
the result if this condition is true and
this is the condition if the this is the
result if the condition is false so
you'll see what I mean when we pull it
together so the condition is if file
exists and then in brackets are easing
the file exists function file name this
just ensures that counter dot txt is it
does exist you'll have to create IP txt
manually because I'm not going to
include a check in this particular
script to check if this IP dot txt file
exists so you'll have to go and create
that man you manually yourself you could
even go ahead and create the counts txt
file yourself as well so if it does
exist we want to say file get
contents and we're guessing the contents
of file name otherwise we want to set
this value to zero so essentially what
we're doing is we're checking if the
file exists if it does exist
we are the current value is equal to the
value that's currently in counter txt
which could be 0 1 or it could be a
thousand could be any value whatsoever
otherwise we're setting the current
value here to zero so quite
straightforward now under here what we
need to put sorry note down here what we
need to do is we need to actually write
this to our counter txt file so we're
going to say file put contents so the
opposite of file get contents were
actually putting data into our counter
txt file so we can specify it file name
there and then the value is plus plus so
we're incrementing current value so I'm
not going to go into this too much
because it is outlined in the other
tutorial however let's go ahead and call
the function and then test this out ok
so I've got my counter txt file open I'm
going to come over to my browser and
refresh once twice and three times come
back to my text editor and you can see
that my counter txt file has been
changed I'm going to reload that click
on that and you can see the values 3 so
the first thing we've done is
established that we have a non unique
hit counter now what we need to do is
include some other checks to ensure that
the IP hasn't already been logged and
we're not even logging the IP address
yet we're just incrementing counter txt</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>