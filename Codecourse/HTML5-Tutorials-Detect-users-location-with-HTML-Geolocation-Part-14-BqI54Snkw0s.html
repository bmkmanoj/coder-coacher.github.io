<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>HTML5 Tutorials: Detect user's location with HTML Geolocation (Part 1/4) | Coder Coacher - Coaching Coders</title><meta content="HTML5 Tutorials: Detect user's location with HTML Geolocation (Part 1/4) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>HTML5 Tutorials: Detect user's location with HTML Geolocation (Part 1/4)</b></h2><h5 class="post__date">2013-01-13</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/BqI54Snkw0s" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hi this is Alex from PHP academy' and
welcome to this tutorial on the html5
geolocation API so what we're going to
be doing is at the start of the tutorial
we're going to briefly explain how this
works look at some code that we can
write very very simple to click a click
link and get our location on a map and
then we're going to talk about some of
the more advanced features so something
that you might not need to use but
something that might be interesting to
those of you that want to take this a
bit further and perhaps gain some more
accuracy on GPS enabled devices so the
first thing to do is obviously have a
look at how this works you can see that
I've got a map just in front of me here
I've got a link just up here and when I
click get location the websites going to
ask for my permission which is a really
really important feature here because
you can't gain a user's location without
asking their permission so they have to
they have to allow this it's opt-in
rather than opt-out
so once we've gained the location we're
going to show this on a Google embedded
map so let's go ahead and click get
location and see what happens you see
we've got this thing popped down similar
on Firefox and other browsers but I'm
using just using Chrome to test this so
it says localhost which were obviously
running on local server wants to use
your computer's location so we can
either learn more allow or deny this
so the learn will probably just take you
to some Google page I haven't actually
clicked it danai will you know won't let
us letter the web site determining our
location
if we click allow what this is going to
do is it's going to pinpoint us to our
location now don't get too excited this
isn't where I live it's actually quite a
few miles from my house and because this
is more than likely IP determined so
it's very very very rough idea I'm Sarah
Hauer at the moment on my computer just
using my Internet Service Providers
internet connection if I was on a mobile
device it might use cell tower
pinpointing so that's usually accurate
to I think about a thousand meters I'm
not sure or a kilometer I'm not sure
maybe go and look that one up before you
attain my accuracy advice if I had a GPS
Hardware enabled device
my location could more or less be
pinpointed accurately and this is for
things where you need exact location so
this sort of brings us on to how
geolocation works and and what we should
be using and when at the moment let's
just say I wanted to use geolocation to
find takeaways in my local area this
would more than likely to face because
although this is only a couple of still
a couple of miles from my house if we're
looking a larger area and you know where
can deliver for example then this would
be good enough if we were for example
giving users specific instructions so
for example directions especially in
real time then this would absolutely not
do with needed GPS enabled device and
this is comes a bit later in the
tutorial when we look at more advanced
options but what can they do for now
though is right the basic code that we
need to do this obviously this is all
JavaScript based so we're going to
create an event handler we're not going
to be using an external library like
jQuery to handle all of this because the
you know pure Java scripts absolutely
fine for this so we're going to do this
on a page everything that's going to go
on one page it's going to be super
concentrated and easy and you can see
just how easy is to determine a user's
location so we'll go ahead and look at
that now we'll clear the canvas and
start writing some code from scratch ok
so we've arrived over our text editor
you can see that I've got a basic html5
doctype or a document outline so we're
going to be placing everything in the
body we're going to do some inline
script just so we've got everything on
one page it makes it a lot easier to
concentrate on but otherwise keep all of
your JavaScript files in an external
file and load them at the bottom of your
page so the first thing to do really is
to create this link that we're going to
click for the user to well have our
location determined I'm just going to go
ahead and actually no we'll leave that
so this is blank we may need to adjust
the settings because I've already
allowed my browser to have my location
so we want to get the full effect as you
guys will be writing at the moment so we
want the you the browser's to ask for a
location so I'll go ahead and reset that
in just a moment let's go ahead and
create this anchor so this is going to
just say get
location and the href for this is going
to be just that's just a hash we're
going to give an ID to this so we can
set this up with an event handler and
we'll just say get underscore location
so underneath this we need to give our
map so I'm just going to create a div
with the ID of map and inside of this
I'm going to copy and paste this I'm not
going to waste any time typing this out
you guys can go ahead and copy this so
I'll just I'll just show you what we've
got here
so we've got an iframe the idea of this
is google map so we'll target this as
well because we need to change the
source we've got the width on there
we've got the height on there we've got
a frame border 0 scrolling no margin
height 0 module with 0 and then we've
got a source now this is the original
source basically this just links to Maps
Google Doc code at UK obviously if
you're in another country that can be
your own TLD we have got output equals
embed as one of it as the query string
after that and that's all we need will
change this source later when the user
allows the location to be found and then
and then that will show where we are now
there are obviously loads of things that
you can do with geolocation essentially
what we're getting back is the
coordinates of the user so we don't we
don't have to tie ourselves down to
Google Maps we can use any other map
service that supports coordinates we can
use other API s and pass coordinates in
we can get grabbed the latitude and
longitude so we don't need to worry
about tying ourselves down this is just
an example so just adjust that so yeah
this is just an example here so now on
to the good stuff
we want to create on event handlers
which is boring and then use our
geolocation API so let's go ahead and
create some script tags again this
should be external if you if you're
actually doing this for real and also
I'm going to use global variables as
well so you're going to want to sort of
barely tie this into one namespace so
I'm going to say vast city let's not
start with that part actually let's
start with the event hand
for clicking our link start from the
basics so I'm going to say document dot
get element by ID and what is that well
it's going to be get underscore location
I'm going to say dot on click equals a
function so inside of here is what's
going to run when we click that link so
what do we want to do well the first
thing we want to do is return false
otherwise
you know things go slightly wrong with
this callback function but we're using
navigator to access the geolocation API
so let's say geo location you might have
seen navigator elsewhere perhaps using
for like browser detection stuff not
recommended but that's what we're using
and then we're going to use this method
called get current position now we have
a callback function in here which I'm
going to call C which you saw me typing
up here just a moment ago and I said I'd
leave that one so what this is going to
do is it's going to call the get current
position method of geolocation and it's
going to pass in these details that we
can then grab an output do what we want
with so let's go ahead and create this
function so this function is called C we
can call it whatever we want it really
really doesn't matter you're not tied
down to anything like this and one of
the arguments here is going to be pause
which is obviously position and from
this we can select pause chords and we
can say we'll grab the latitude
longitude whatever so we're going to
stop with the basics and later on we'll
go to the more advanced stuff so we're
going to save our lat equals pause for
dot latitude and it's put a comma there
and let's grab the long
so the longitude well so again pause dot
chords dot long issued so we've got both
of these and then I'm going to create a
final one called chords which is going
to combine them so let's just space
these out and this is going to be lat
plus long but we do want a comma in
between them because this is how the
majority of applications
take them so we have the latitude comma
longitude so what we can do now is pass
this into our map so we again say
documents get element by ID and this
time we want to get Google map Google
map and then we're going to say dot set
up tribute and this takes two parameters
the first one is the attribute what you
want to set which is the source
remember over here we have the source
just the plain Google Maps start page if
you like and but we want to change this
so we want to do more or less exactly
the same thing so it's HTTP s colon
forward slash forward slash maps google
coder UK and then we have a query string
at the end so we have Q equals and then
the coordinate we have another couple we
need to put in but I'm just going to put
0 0 therefore now we also have a zoom
option so I'm going to zoom in 60 this
this is where you can change this
variable so put whatever you want and
then we set output equals embed as we
have done up here so what we've done is
we're just replacing this original
source with this we've got the query
string as the latitude and longitude
we've got a zoom of 60 and we have the
output of embed so here in instead of
that 0 0 which doesn't make sense we are
going to have our chords which is caused
like that so we're grabbing this value
here and plunking that into there so
let's just run through this before we
test it in our browser we are have an
event handler on our get location button
that then calls geolocation and then the
get current position method of
geolocation we use our callback function
in here so we've got C for callback that
has a pause which is one of the
arguments which we can then grab the
coordinate so the latitude and longitude
and then we put that into a variable
called chords and then we replace the
gute the Google map iframe source with
the this URL and query string
so let's head over to our browser and
refresh lovely so everything looks as it
should if I go ahead and hit get
location you see it automatically
pinpointing me this is something I
mentioned a moment ago because my
browser has basically said you know
you've accepted this site to track your
location so whatever page we're viewing
on localhost can track our location if
it wants to because we've given
permission but I'm going to go ahead and
clear these settings for future visits
again similar for other browsers so if
you're using Firefox Safari anything
like that you'll get the same sort on
message up each time this time this is
assuming that a user hasn't visited the
site before has hasn't yet given
permission so I'm going to go ahead and
click get location so localhost wants to
use your computer's location we can
either allow or deny this so when I
click allow there we go and we've
pinpointed the location so that is
essentially how we detect the user's
location with the
html5 geolocation API in the next video
we're going to look at some more
advanced topics and we're going to delve
into this a little deeper so if you just
wanted to use this sort of general
purpose then you know you've already got
this discovered when we go ahead and
inspect this page you can see that we've
got the coordinates here been passed
into Google Maps so go ahead and play
around with this and output things and
you know create alert dialogues for
things and like I said in the next video
we're going to look at this in a bit
more detail</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>