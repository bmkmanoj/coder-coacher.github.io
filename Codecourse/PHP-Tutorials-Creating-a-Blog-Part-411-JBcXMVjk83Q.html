<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>PHP Tutorials: Creating a Blog (Part 4/11) | Coder Coacher - Coaching Coders</title><meta content="PHP Tutorials: Creating a Blog (Part 4/11) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>PHP Tutorials: Creating a Blog (Part 4/11)</b></h2><h5 class="post__date">2011-05-28</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/JBcXMVjk83Q" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">okay so I made a slight error in the
previous part I forgot to add this
function category exists and it has an
ID parameter I also forgot the ID
parameter which is know by default in
the gets categories function I had edit
post as edit posts which obviously is
not what we want and I forgot the ID
parameter here terribly sorry I hope you
don't mind too much now let's go for the
add category door PHP file here I have
this basic file set up my title can be
add category I'm using html5 I hope you
don't mind too much if you're more
comfortable using HTML 4 or XHTML feel
free to use whatever you want I just
sort of like using the latest
technologies so let's view this in the
browser and there we have add a category
and area or form looks horrible I know
but that's not the point of this
tutorial so let's start coding this here
before we start the HTML we're going to
say if it sets post name so basically
we're checking if this field was
submitted and if it was we're going to
trim any weight space from the front and
end of the posted value we need to do
this to make sure that there is actually
input because we're going to check if
empty name then we have an error of
course
so the reason we trim here
is to make sure that if the user only
inputs like a bunch of spaces oops that
still gets an error for not inserting a
valid name so if empty names so if the
name does not have a value we're gonna
say error equals you must submit a user
username category name and whoops there
we go now so if they did submit one
we're gonna say if category exists named
whoops so we're going to create the
category exists function and of course
that means oops this needs to be named
alright so name equals and here we're
going to protect ourselves from my
sequel injection by using my sequel real
escape string on the name remember we're
getting this name from this form so
we're dealing with user input and that
means we need to secure that data and
now we're going to say query equals my
sequel query select count one so we are
checking if there already is an entry in
the database with that particular name
select count one from categories where
name equals name there we go
now we're going to return my sequel
results
query zero and if that's equal to zero
we're going to return false otherwise we
return true
so this line probably looks a bit
cryptic but basically what it says is if
zero rows were returned with that
category name we're going to return
false and the category does not exist
otherwise we return true meaning the
category does exist and that's all there
is to it so here we use count and as you
see it's just an incredibly useful my
sequel function so we'll do if category
exists name then we do error equals that
category already exists and of course we
also need to check if string length of
the name is greater than 24 remember
that we set the maximum length to 24
characters so we need to ensure that
users cannot add more than 24 characters
for a category name and we're gonna say
error equals category names can be can
only be up to 24 characters and then if
no error was found so we're gonna say if
not is set error
remember if none of these conditions
holds true we do not have an error
variable so if it's not set we can
simply do add
category name now of course we have not
created this function yet so let's do
that here we have add category and name
as with the category exists function we
need to make sure it's secure so I'm
just gonna copy this and then we're
going to say my sequel query insert into
categories and then we set the name
equal to 9 this is probably the simplest
function there is in the entire block of
PHP file so let's see I guess we could
redirect somewhere but I'm not gonna do
that just yet let me just show you that
it does work now just to be sure let's
refresh I'm gonna add one called
Uncategorized okay category exists is
not found let's take a look of course we
call it here see category exists did we
do something wrong here oh my voice
sounded a bit weird there I'm just going
to pause the video and check back with
you when I found the error all right I
made a terrible mistake of course we do
need to include the init file so
resources slash in it or PHP spell that
right in it so PHP and let's try that
again yeah some silly things here anyway
on categorized add category
and we get another error that's okay
that's good for debugging so we see that
this query seems to fail
so we're gonna say echo my sequel error
and let's see I hope it did not insert
something it did not that's good so
let's refresh now database selected okay
interesting that sure is interesting my
sequel selects DB DB name Wow
this sure is interesting config.php blog
well I've reached the ten-minute mark
and Alex wants me to stay around that a
bit so I'm just gonna stop this here and
we're going to figure out the problem in
the next part
oh wait by the way I just see it I of
course need to change that back to root
and then when i refresh this it works
perfectly fine and we have if it worked
correctly the uncharacterized
category so I'm gonna stop it here and
see you in the next part</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>