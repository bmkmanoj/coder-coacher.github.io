<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>PHP Tutorials: Register &amp; Login (Part 10): Registration Form and Validation (Part 2) | Coder Coacher - Coaching Coders</title><meta content="PHP Tutorials: Register &amp; Login (Part 10): Registration Form and Validation (Part 2) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>PHP Tutorials: Register &amp; Login (Part 10): Registration Form and Validation (Part 2)</b></h2><h5 class="post__date">2012-05-11</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/zMywwc9vgHU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">okay so we are back and we are going to
be now processing all of the data that
we've passed through here so what do we
want to do well the first thing I want
to do is I want to iterate through these
these values and check the values that I
explicitly want the user to have typed
so all of them are required except last
name so if for example the user fills
out all the data except last name then
that's acceptable however if they omit
something like the password again or
first name or any of these starred even
if they then enter last name we want to
show them an error message so we're
going to we need to think of a clever
way of doing this so I'm going to create
an array which is going to going to hold
all of the field names that are required
and this is just going to save us from
having a massive if statement we could
for example say if dollar underscore
post first-name or in fact we would have
to do empty or and then empty again for
every single field that we want and
that's really really you know its first
of all it's bad practice second of all
it takes a long time and it's harder to
maintain so I'm going to create an array
and this is going to store the required
fields so I'm just going to call this
array required fields so within this
array and this by the way is just
created a new array relatively
straightforward is going to hold just
the names here username password
password underscore again of the
required fields let's go ahead and do
that now we've got one two three four
five that are required so one two three
four five simple so the first one is
username and then its password and then
its password again and then it is first
name and email
so you can already see that if I wanted
to then include say gender as a required
field I would just go ahead and add it
in here obviously we're not using that
yet okay so now this post data here
contains all of the fields that we have
submitted so I'm going to go ahead and
print are the lot underscore post and
we'll just see how that looks in fact
I'm going to echo I'm going to play some
pre tags around this just to format it
you'll you'll see in a moment how this
looks so sticker and a true parameter in
there as well so I'm going to go ahead
and red click register you can see we've
got this array now and it's showing us
the visual representation of the array
we've got user name password password
again first name last name email and
they're all empty if I go ahead and type
in Alex let me just get rid of that from
earlier on in the tutorial because
that's very annoying and that's well so
if I go ahead and type in Alex here and
click register we now got this value
here so what we need is we can loop
through this post array here and we can
check if the field is within this field
so let's go ahead and do that so for
each dollar underscore post as key value
now what is this doing well it's
iterating through our post data so all
of the fields that we saw just here it's
looping through each one and it we're
going to do a check on each one and
because we're using the same names here
as we've defined in our array we can use
the in array function to detect whether
the the field that's that's empty or
empty or not is within this array so if
a field is empty and is in this array it
means it's required so it in error so
remember from earlier on in the series
we had within our init thing here this
errors array that we just declared at
the top because we assumed we're going
to be using it in many places
well this we're going to fill up with
errors so if you if you're unsure on
that skip back to the the error
outputting part of the tutorial
to get to grips with that so for every
value I'm just going to go ahead and
echo key and this just this is just
going to demonstrate a space after that
this is just going to demonstrate that
when we refresh we get username password
password again first name so we can
compare these values so let's go ahead
and do that we want to say if something
and what's that something both if empty
dollar underscore oh no sorry if empty
value so the value of each field here if
it's empty and in array equals equals
equals true now in array what well we
need to specify a value that's in the
array and we need to specify the array
itself now the array itself is the post
array a dollar underscore post array and
the value here is key
so we're saying if the particular value
that we've currently looped through is
empty and the field name of this value
is in this app sorry after my completely
wrong required fields and if the key for
here so I use an impossible password
again is in this required fields array
ie does it equal true then we have hit a
problem because we have an empty value
that's been defined explicitly as a
required field so now what do we do well
we need to append to our errors array as
we've already done and I'm just going to
say fields marked with an asterisk are
required
and then what I'm going to do is we've
got a problem here because we might have
more than one field that is that has you
know been found to not contain any data
so we actually need to break out of this
loop this for each loop here so break
one we'll just say we'll come out of
this loop here and that's it continue
with the execution so what we'll do now
is we'll do as we did in the error
reporting tutorial and we'll just print
our errors now let's go ahead and just
refresh that we've got our empty array
here I'm going to go ahead and I'm going
to type in Alex and type in a password
I'll type in another past part of the
password well the repeated password I am
NOT going to enter a last name but I'm
going to enter my email address I'm
going to click register nothing happens
ie no data is in this array it means
we've entered all the required fields
now if I click register
it says field smart work well with no
data in it says fields marked with an
asterisk are required so we now know
that this works again if I type in data
here here here here here but not email
we get the same error message here
because it's looping through each one
checking if it's in that required field
array and then if not appending to the
errors breaking out that loop because we
don't need to iterate each one
essentially what this means is if one
error is found
ie if one of the fields doesn't exist
then we can't do anything else so just
break out okay so that's that's it for
that we want to go on now to do some
more specific validation and that is to
check if the user exists the password is
is long enough in length you know little
things like that you know we we don't
necessarily have to do like the password
length but a nice to do so let's go
ahead and do this now then so and I'm
going to say first of all if empty
errors is equal to true and why am I
doing this well if this error has
occurred there's no point checking
there's no point continuing to check
essentially because then you know you
might have not entered a password first
time but you might have entered a repeat
password for some reason in that case if
we were validating the password the
first password and the repeated password
are equal to each other they wouldn't be
equal so we would output the first error
would output its fields mark than
Asterix are required and then we would
output the passwords do not match
there's no point if we haven't entered
all fields we don't validate at all
we're asking the user to validate or
enter all the data so let's go ahead and
continue well we need to now check if
this user already exists we don't want
to allow a user to register if the
username already exists so if you
remember within core functions user we
already created this user exists'
function and this will just return true
or false let me just scroll along true
or false if the user exists it returns
true if the user doesn't exist returns
false funnily enough so let's go ahead
and create an if statement to check this
by the way all of these if statements
are going to be separate from each other
we're not going to use chaining and say
else if something the reason being is
that we want to let's say the username
exists and the passwords don't match we
want to append to this errors array and
we want a list of errors we don't just
want one error after another because
that's going to annoy the user they want
all errors they can correct all of the
errors then submit the form properly so
if user exists a dollar underscore post
username so now we're passing through
the posted username from our post post
array and if the user exists is equal to
true so if this function returns true
then we don't want to register the user
we want to return an error and so we're
going to say sorry
the username and then a space and I'm
going to do a single quote escape that
concatenate on the username and then
again concatenate on a single quote
escape that is already taken okay so um
we're not we're not doing anything to
this we're not we're not sanitizing it
so we'll see a problem with this in just
a moment so let me just go ahead and
refresh this I'm going to go ahead and
type in Alex here click register fields
mop with an Asterix are required that
proves my point earlier that we're not
check we're checking that all fields are
required before we validate all of the
fields as a whole so I'll just go ahead
and type in any random information in
here click register sorry the username
Alex in single quotes remember we
escaped them because we're using quotes
on either side already it's already
taken now what I'm going to do is I'm
going to go ahead and type in body BG
color equals black obviously this is a
ridiculous way to set a background color
in the document we would use CSS but I'm
just using this as an example Alex and
my email address now I'm going to click
register oh okay
oh of course because that username
already exists it doesn't exist them I
mean the point I'm trying to get across
is let's just go and get Co out dollar
underscore post email and I'll show you
just a problem we're having and what
would do this in a moment so Alex
password password first name and email
now I'm going to do body BG color equals
not and you probably think I'm obviously
mad why am I doing this we'll win a
click register oh my god okay so let's
just try this again
Paz Alex try and demonstrate a simple
example right so now register and
nothing's happened
odd okay let's just leave that for now
essentially the point I was getting
across is that we're not sanitizing this
data before without putting it to the
user and the problem with that is that
we might be outputting HTML content
anything like that so we want to use the
HTML entities function to convert any
say script you know things like tags or
anything like that so they're not render
or but renderable by the browser so we
would use HTML entities and wrap that
like that obviously this would only
occur if that user name has already been
taken but the point is that we eyes you
know we're sanitizing this anyway I mean
you might not even use it because if
your sanitized in your data when you go
into the database then doesn't really
matter so actually let's leave it out
for now okay so I think we've we've
looked enough at that we'll leave the
video as it is now we'll go into the
next part obviously continue with these
if statements and we'll go ahead and
we'll we'll start to validate some more
of this content so I'll see you in the
next part</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>