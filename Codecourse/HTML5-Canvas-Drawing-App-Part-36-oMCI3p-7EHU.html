<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>HTML5 Canvas Drawing App (Part 3/6) | Coder Coacher - Coaching Coders</title><meta content="HTML5 Canvas Drawing App (Part 3/6) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>HTML5 Canvas Drawing App (Part 3/6)</b></h2><h5 class="post__date">2013-10-10</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/oMCI3p-7EHU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello and welcome back to our
development of this html5 canvas drawing
application now I hope you've been
asking about how we can go about saving
these images to a server or to disk and
we will go over this at some point but I
thought first of all we may as well make
them worth saving so the first thing I'm
going to do to add a bit of variation to
this application that we have is to
allow the user to change the radius of
the brush that we're using so let's see
how we can go about making this so we're
going to add a toolbar as you saw in
that demo and so this is just going to a
div I'm going to give this an ID of
toolbar tool bat that would be
interesting yeah and then within that
toolbar we're gonna have a another div
and it's going to be ID of rad for
radius and inside there we're going to
have it's a radius and then a span that
just has the value of the radius inside
so that's web that is ten now if you
give that an ID of rad Val and then
below that some divs that will be the
little plus and minus buttons that we
had there so div or give it a class of
rad control for radius control and we'll
copy that give one an ID of deck rad for
decreased radius and one an ID of Inc
rad for increased radius
okay so let's style this before we try
to do anything in code so we want to
create a link with a relation style
sheet so we're just including our C
this I'm going to call it master dot CSS
and let's create that file master dad
CSS so first thing I'm going to do just
is just something that I like to do is
change the box sizing to border box now
if you're not aware of what this does
there's plenty of information about
online but basically it instead of
adding aboard the border and the padding
to the outside of block elements like a
div it will add it inside so if you set
a div of width say 40 pixels then add a
10 pixel border it's going to add it to
the inside rather than to the outside so
you don't end up with bizarre width
elements and I find that easier to work
with and you want to if you do want to
use that also use the Mozilla sorry the
Mozilla prefix because they are a bit
awkward about that one and next thing I
want to do is target our toolbar so we
want to I'm going to make this the
entire width of the window so with 100%
high I'm just going to give it 50 pixels
um see padding I'll give it a 10 pixel
padding and the other thing is if you
remember in our main we're using this
client x and e dot client Y these are
the properties of the mouse event that
we're using and these are relative to
the window so we're drawing on the
canvas but relative to the window so
this means this is only going to work if
the canvas is in the same places the
actual window itself so we can't have
anything that's positioned statically
that's going to push down the canvas
because then we'll have the drawing will
go all bizarre so we want to change our
position on this toolbar to fixed and
top to zero
and while that basic that's basically
going to do is put that on top of the
canvas so it's going to fix it to the
top of the window I'm just going to add
a background color to this I'm gonna say
I think 2f I'm just making it up on the
spot all of this stuff you can pretty
much decide what you want for yourself
it's all just outed personal taste so as
you can see at the moment this is very
ugly so what we're going to do in here
I'm going to change the text color to
just white and on the entire thing we're
going to have a font family sans-serif
because that's what all the cool kids
are doing these days okay so now we have
that in our little control boxes that we
made here we want to have a little
negative in there a little positive in
there and we can style these control
boxes so let's go in we're using a class
that's a dot rad control now we can give
them a width or I'm going to give it 30
pixels because because we're using
border box giving this a height of 50
pixels sorry and padding of 10 pixels so
we have 30 pixels of useable space
within it so if we make that height then
with 30 pixels and then that ground
color a bit lighter than this just so we
can tell that it's a button for F again
literally just making it up so it
doesn't matter and yeah that should do
let's have a look not good you can see
we're getting these new lines because
divs are block elements and block
elements by default we'll have yeah new
lines either side of them so it once say
is in line block which is the same as
the block so you still get your width in
your height it's just instead of
dropping the line it will
stick on the same line and also going to
get those little symbols in the center
so I can give that text aligned of
Center made it maybe a bit of padding at
the top as well yeah okay that's nice so
now we want to hook these buttons up to
our JavaScript in fact the buttons and
the span that we set so let's go let's
make a new javascript file actually so
let's say script source equals we'll
call this radius is close that script
tag and create that file
nope not folder yeah
radius J s and then we want to okay so
in this file make sure by the way that
you declare it or include it after main
dot J s because because we're dealing
with the radius and our radius is
defined in main dot j s because we're
using this variable here for radius we
want to make sure that it's that
included afterwards otherwise we'll be
able to interact with it so radius top J
s we're going to create some variables
let's create a min radius variable and
I'm going to set that to 0.5 a max
radius variable I'm going to set to 100
a default radius
I'm going to set to 20 and then we want
to hook up our buttons and that little
label so all that span so we'll say span
or rad span maybe equals document dot
get element by ID um what was it called
round battle it's all right rad well
nailed it
okay the others we've got these little
buttons so deep rad with the crease
radio sir is hooked up to the element
with ID deck rad and increased radius
hooked up to element with ID ink rad and
remember to put that semicolon there by
the way if you're not familiar with this
basically this is the same as just
declaring variables like this
it's just quicker really and so you can
do a comma and this variable this var
keyword will apply to all of them so
that's just a bit of a time-saver in
certain situations so we've hooked up
these buttons before we get the buttons
to do anything we want to create a
function that will set the radius for us
so let's say var set radius equals
function going to pass that a parameter
of new radius cuz we want this function
to set the radius equal to a given
radius so we're going to take in radius
there and then the first thing I'm going
to do is make sure it's within the
bounds of these two things that we've
set here so if the create an if
statement if new radius is less than min
radius then new radius equals min radius
semicolon else if new radius is greater
than max radius new radius equals max
radius so that's the sort of nice way to
trim down into this range in that if
it's below the range trim it to the the
lower bound of the range and it's above
the range trim it to the upper bound so
now we can be sure that new radius is
within the range that we want it to be
next thing is we just want to change the
radius so remember we're using the
radius variable from main js4 the dots
that we place so radius equals new
radius and then we also remember have
the line width of the lines that connect
the dots and that's defined by context
line width and we want that to be twice
the radius in fact we can just copy this
line in to set radius
so to check that function is working
quickly we're going to open up at the
JavaScript console in our browser if you
don't know where this is in your browser
it's usually there should be some sort
of develop menu and then whatever it
says console and I think most of these
interfaces are quite similar it's
usually the last icon here so you click
on that and then you'll see if we begin
typing set radius our function will pop
up and then we can pass this a parameter
so at the moment this is I think a 10
pixel radius and if we type in something
like 40 we'll get a bigger radius so we
can see that that function that we
created is working so now we can use
that function in fact inside this
function we want to update the label so
rad span dot text equals radius just
have a quick check that's working so if
we set radius to 5 not working let's use
you know HTML is radius
try that ok so now so now we're using
the innerhtml property of the rad span
which basically allows us to manipulate
what's in between the two tags of the
element that we've selected and in
between those two tags we just want it
to be the value that is the radius at
the moment so rad spans are innerhtml
equals the radius so now we have that
function we can use it with our two
buttons so we're going to add event
listeners to these buttons so deck rad
dot add event listener hopefully this
sort of procedure is fairly common to
know after the last two tutorials now
we're going to use the click event and
instead of referencing an external
function we're going to create a
function within the the line of event
listener so say function opening close
your parentheses because we don't need
to take any parameters here open your
curly braces and then closing them
before the end of the event listener and
then inside here we're just going to use
our set radius function so set radius to
current radius minus 5 in fact let's set
a variable called interval and yeah and
we'll use that just in case because
we're going to use this variable twice
or this value twice because we're going
to do the same thing for Inc rad
so strong unavailable makes a bit easier
so we're doing the same thing for
increased radius this time just adding
interval and that should do the job so
if we have a look at that in Safari you
can see we have a radius going up and
down and that's a that's affecting the
the radius of the brush you can see that
we're getting this weird annoying thing
with the selection so if we go into our
master door CSS there is a CSS property
we can use for this so if we say user
select none because this is really not
very well standardized property we have
to use all the sort of vendor specific
prefixes that you've seen before so
let's copy this out a few times to want
for Mozilla and again for Microsoft
so this basically just means that they
can't select anything in the entire
document now I think that should be okay
because I can't think of any reason why
you'd need to select something in this
document so as you see that's got rid of
our selection so we can now interact
with that without any issues the final
thing we might want to do is use our
default radius so because we've set a
default radius but never used it so we
can go right at the bottom say set
radius default rad and that will just do
that on load so there you have that I'll
close that console and you can see we
have a perfectly functioning control for
changing the radius all the way up to an
upper bound of your choice and all the
way down to a lower bound of your choice
and you might notice that once we get
down to that lower bound if you're using
a 0.5
I am then it goes up with the point five
still there I'll leave that to you to
figure out how you can change that if
you want to change that next time I'm
going to make this even funkier and
we're going to add a color palette to
our application so I hope to see then</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>