<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>PHP Authentication: Filters (19/30) | Coder Coacher - Coaching Coders</title><meta content="PHP Authentication: Filters (19/30) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>PHP Authentication: Filters (19/30)</b></h2><h5 class="post__date">2015-05-26</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/wJw1Tl_-KiI" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so we're now gonna look at creating
route middleware to filter certain
things and by this I mean if a user is
authenticated we might not want them to
access certain areas and if they're not
authenticated we again might not want
them to access certain areas so for
example I'm currently logged in ah I can
still access the login page and I can
still access the register page which
really is silly you you don't want
authenticated users to be able to access
these areas they don't need to login
they don't need to register so what
we're going to be doing is creating
middleware which will allow us to attach
this to certain routes so let's go ahead
and do this now to do this what I'm
going to do is inside of my app folder
I'm going to create a new file and I
like to call this filters just make
sense although it's middleware
we're gonna put it under filters because
we're using it to filter out certain
things on routes so we need a base
authentication check and this is going
to be not attached directly to routes
but we're going to create new middleware
and use this so let's do this now we're
going to say authentication check that's
going to be a function we're going to
use app and inside of here what we need
to do is we need to return a function
like so and in here we can do something
so for example echo hello and what we
can do then is attach these to certain
routes so for example if I wanted to
attach this to the login route I can
just put it in here make sure it's
callable or it is called
and this will then echo hello so if we
actually include this into start first
of all so let's just include that there
so when I go to the login page it says
hello up here so it's the same as our
middle where we created our before
middleware that we created
here but we're sort of creating them as
filters so what does this automation
check need to actually do well it needs
to pass in whether the user is required
to be authenticated and then we can
extract this and use it down here so now
inside of here
we want to use that required early and
we pass in that's either going to be
true or false and we need to use app and
in here we can do a check to see if the
users logged in and if they should be
redirected on up so in here what we want
to do is we want to put another set of
parentheses just to tidy this up we're
going to say if not app or and
authentication is required or if app or
and authentication is not required so
now what we're going to do is redirect
so we can say app redirect app your our
for home so we can extract well we can
use this in other middleware so we can
say this is our authenticated middleware
we're going to use the authentication
check we just created and we're going to
return authentication check true so for
an authenticated filter or middleware
we need to be authenticated true so if
we attach this to a wrote true would be
passed into required then we return this
function here which is callable and then
we check if the app if the user isn't
authenticated and this is true then we
need to redirect or if they are
redirected and this is false we need to
redirect as well so this is a might be a
little bit difficult to understand but
if you have a little read over it and
play around with it it should make sense
so I'm going to duplicate this and
create a yest
middleware and I'm gonna pass in folks
here that's all we need to do
now have our three or our two filters
we're going to use so under login then
we're going to get rid of that
authentication checks we don't need that
instead we want to use yes
so basically when a user hits this page
we want them to be a guest and it's the
same for the post route too so now all
that's all that's gonna happen is when I
hit login and redirected back to the
home page it's as simple as that so we
can attach this to other routes as well
so for example registration we only want
you registration if the user is a guest
and we only want them to post
registration if they're a guest and also
activate as well a user must be a guest
if they want to activate their account
so by creating that middleware here and
calling it filters and including into
our start file we now have the ability
to check for users authenticated or if
they're a guest so when we build routes
that require authentication we just use
authenticated there instead of guest and
that route is automatically protected
against users that are only
authenticated</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>