<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>PHP Authentication: Hashing &amp; Random Strings (17/30) | Coder Coacher - Coaching Coders</title><meta content="PHP Authentication: Hashing &amp; Random Strings (17/30) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>PHP Authentication: Hashing &amp; Random Strings (17/30)</b></h2><h5 class="post__date">2015-05-26</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/8WczdMaiaPQ" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">in the next part we're going to move on
to allow a user to activate their
account by email but the only problem is
we need to take into account security
for this now activating an account isn't
too much of a security issue but in this
video what we're going to do is before
we do any of that setup the ability to
generate random strings and talk about
encryption and this is important because
when we're sending any identifier 20e to
a user and they click on that that
identifier shouldn't be stored in the
database in plain text it should be
hashed and we need to first of all
generate random enough string so random
you know characters and things like that
so what we're going to be doing is we're
going to be adding to our hash helper
that we created for hashing passwords as
securely as possible and we're also
going to be introducing a new dependency
into our application into the container
which is random Lib and that is a
dependency that we installed at the
start of the series so first of all then
let's just add the ability to hash
something into our hash class we already
have the ability to hash and check
passwords but we need the ability to
hash and check just normal hash strings
and for this we are going to use sha-256
and you can update this later on if you
if you want to so we're going to create
a new method in here called hash this is
just a general hash and all this is
going to do is it's going to return a
hash we need to take some input into
this method and we need to hash it
sha-256 and then put that input in there
we also need to be able to verify that I
happened that to ash
two hashes match this isn't like the
password hashing API it's a little bit
different all we're doing is we're
taking an own hash and he uses submitted
hash and comparing them so you can go
ahead and look this up in the PHP manual
if you need to find out more information
about it
as a hash check is going to take a known
hash and a user hash and we're going to
return hash equals this is the function
you can look up in the PHP library if
you want in the documentation we pass in
the known and the user hash so we now
have the ability to hash and also check
that a hash equals another hash we can
now move on to looking at randomly
generating strings and numbers we're not
going to be randomly generating numbers
but we are going to be randomly
generating strings so we need to pull
into our application the random Lib
library so over in start dot PHP where
we're declaring all of our other
container attachments we need to say app
container singleton we're gonna call
this random Lib and we are going to
instantiate a new random Lib instance so
we're gonna say factory equals new
random Lib now this here needs is under
a namespace and it's under the namespace
of factory so what we can do here is we
can just say use random Lib factory as
random Lib that just makes factory make
more sense in our code so we're calling
it random Lib so we've done that there
and now what we want to do is we want to
get a type of generator so we just
return factory and we're gonna get a
medium strength generator a medium
strength generator the name is a little
bit misleading this is perfectly
acceptable in terms of security if you
pull in a high strength generator you're
gonna find your application run really
slowly and it's not really worth the
extra processing time you can read all
about random live on the github page and
read the documentation for that and
it'll tell you all about these different
methods but for now what we're doing is
we're pulling in random live and we can
generate random strings now so let's
check out how that works let's head over
to our home
view and let's use app so let's just
echo out app random Lib generate string
and let me choose the length of the
string I'm going to do one to eight so
now we have the following
so we've generated a random 128 length
string so this is really useful for
generating long identifies when we're
sending emails to users to maybe
activate their account reset their
password and when we store these
identifies in the database the reason we
do that is because what we need to do is
we need to look up the identifier so
when we move on in the next part to
activating we have a hash here which is
going to be a hashed version of this
identifier and that will allow us to
send this long randomly generated string
by email and then when this is passed
through to our application we can hash
this check that it matches the hash in
the database and then we can activate
the users account otherwise if our
database was broken into and for example
we had the active hash as a sort of
plain text string the user anyone any
attacker could then activate a user's
account and that might not seem much of
a problem for activating users account
isn't really matter too much I guess but
for things like password recovery that
is really dangerous
if you think about it when you are
recovering a password by email you're
sending an identifier essentially that
identifier is a user's password it isn't
actually a user's password but it gives
an attacker the ability to reset a
user's password which is essentially
access to someone's account so all of
these hashes that we're storing in here
are going to be hashed well they are
hashes so that's how we do things like
that so we're now all ready to go we're
going to move on to activating a user's
account by email we have email setup we
have the ability to generate large
random string setup so we can do that
hopefully with ease</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>