<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>PHP Tutorials: Register &amp; Login (Part 6): Error Handling | Coder Coacher - Coaching Coders</title><meta content="PHP Tutorials: Register &amp; Login (Part 6): Error Handling - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>PHP Tutorials: Register &amp; Login (Part 6): Error Handling</b></h2><h5 class="post__date">2012-05-11</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/-XvbXxqJ4xQ" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">okay so we've completed the login system
we're able to log ourselves in if our
account is activated and obviously we're
going to be dealing with the email
activation later but we've got this
problem that we've come across now that
we need to output any errors that occur
during the session or sorry during the
the login process so for example I was
to provide an incorrect password and I
go ahead and click login we see this
array which is fine we're returning any
data that you know any errors that are
relevant this this login process however
what we're not doing is displaying them
in a way that makes sense to the user if
we had say three three different errors
for example or two different errors in
this case because the only time we can
have two more than one error is if one
of these is true which allowed me one
and then whether this one is true here
so it will be say for example I'll
actually know so it'll only really ever
show one of these but if we have more
checks so for example the string length
of the data that's entered we might want
to validate that then that might come
you might say for example enter a really
long username and you're checking the
string length against say the maximum of
I don't know however much we set it to
so 26 or 30 whatever we set it to but
you may have more than one errors that's
why we store them in this array because
we can append to the array and store as
many errors as we like so we're just
going to be showing well let's go ahead
and give an example I'm going to go
ahead and create another check for the
string length just so we can demonstrate
more than one output so I'm going to say
here let's just say else and by the way
this isn't really the way we should be
doing it we should be appending it on to
here I'm going to go ahead and do in
here just to demonstrate so if you
wanted to add any additional validation
you can
you can add it either to the else--if
which would be the more appropriate way
to do it because it would sort of chain
downwards or you could include it within
this else which would you know it would
output to errors so we might not enter a
user name in one field or sorry no we
might get to this stage where we say
else and then we have you know more than
one error so we might have a long user
name or long password and the user name
and password combination might be
correct so what we are aiming for here
is to have a string length check and
we're going to perhaps the enter the
that you can correct user name and
password so I'm going to say if string
length so using the string length
function of the user name and we need to
go ahead and pull up our database table
so let's look at the structure here
we've got a 32 maximum on the username
and the password remember that the the
password will be 32 characters because
we're we're using an md5 hash in it most
of the time render to a 32 character
string so in this case we'll just go
ahead and we'll check the user name
remember this is just you know as an
example so if the string length user
name is greater than 32 then we want to
append something onto our errors array
and this is going to be a username to
long ok so this is just a pure example
you like I said you might have other
requirements for this system so inside
of here let's go ahead and just type in
Alex and we'll copy and paste that a few
times and then we'll do the same for
password we'll just paste anything in
now you see when I click up we compact
username have you registered ah yes of
course
ok so let's change this to password and
I'll say password to long
again it's an example so I'm going to go
ahead and just paste a load of load of
stuff in here so now what's going to
happen is the username is going to be
found the password and the username
combination are going to be incorrect so
we'll have password is too long and that
username and password combination is
incorrect so if you're struggling to
understand this concept I'd go through
and sort of work out how you want to do
things so you might want to I mean this
in this instance is more useful in a
registration form because you may want
to display that the user name is missing
the first name is missing and signify
which feels the user has to do it so
when we get to the registration form
this will be a bit different but anyway
for now we need to go ahead and develop
this this functionality let me just go
and put the back in I don't know I
removed it this functionality to output
these errors properly okay so we're
going to be creating a function called
output errors and what this function is
going to do is it's going to take this
array it's going to loop through each
element of the array and return an
unordered list so it's quite not strange
but it might be something that you're
not used to so what we're going to do is
is we're actually just going to think
about the the setup of this logically
now what I'm going to do is I'm going to
remove this header include just down
here I'm going to include it here and
then here I'm just going to sort of get
rid of rid of everything and then in
here is going to go my markup so let me
just spell that correctly so we're
getting the same we're getting the same
look and feel to this it works exactly
the same way however we are doing all of
the logic up here at the top of our page
and any outputs going to go in here so
we're doing the logic at the top and the
output down here so another thing we
need to do is if if the the data is not
empty so ie it is something in it then
we do this stuff here but otherwise we
actually need to do something we need we
need to do something because if we would
just land on this login dot PHP page let
me just give an example and say echo
landed and this is coming from the else
from this first if statement here you
can see this read this has been
highlighted here else echo landed so for
example if I go to login with just a
load of rubbish details and nothing
happens if I just go and land on this
page we get this landed up here so we
know that we don't want a user to just
land on on on this page now we can do
several things we can append something
to the errors array so I'm just going to
say sort of know no data received okay
yeah no data received but you can you
can redirect them with a header redirect
you know it doesn't make a difference
but yeah let's go ahead and get this
errors function out the way with okay so
we've got our mark up here this is where
we're going to be doing all the logic so
we know that now I'm going to go ahead
and we haven't created a general
function so we have okay so I'm going to
use the general function file for this
because it comes under general functions
so let's go ahead and and create this
output errors function so we obviously
say output errors and what do we need to
pass in one we need to pass in an array
and that will just I'm just going to
call out errors in this case so we're
going to define a variable called output
and that's going to be an array so
actually no we don't need to do that oh
no we do sorry yeah okay so what's going
to happen is we're going to loop through
the errors and we're going to put them
inside of this output variable actually
now is that there's a lot easier way
there's a one-line way that we can do
this and and do bear with me in fact I
might do it the long way first so yep
so output equals array I'm going to use
a for each construct and this basically
we loop through the elements of the
array so we're going to say for errors
as error now what this will do is I'm
just going to echo error for now and I'm
going to append say comma onto it inside
of login dot PHP that's as close that
we'll go ahead and we'll say output
errors error errors so we're passing
this errors variable that were pending
to this array that were pending to into
this output errors function and we now
know that we're going to go through each
of these and just output them with a
comma so I'm going to refresh no data
received we've got column on the end
there
if I have Alex and then an incorrect
password the username combination is
incorrect sorry we can already see this
and if I was to go ahead and into Alex
and then a really long password as I did
before
we've got password to long
comma that username password combination
is incorrect so we were outputting more
than one error in this case we don't
want to do that we want to append this
new variable this new array sorry and
what we want to do is we want to put
this within Li tags which will
eventually go within an unordered list
and item element so we place the arrow
within these and then what we do is here
we would turn and we again we need to
use a ul and this is where it starts to
get slightly tricky we want to go ahead
and append something on here in fact
I've used commas here where they should
be dots if you like okay so I'm going to
implode within here and implodes
basically going to take it's going to is
the opposite of explode explode we'll
take a string and have a character that
it wants to explode by and it will place
each object each string or whatever
into an and array this would sit do the
opposite and it will use an array and it
will put it into a string and what we
want to do is we want to set the
delimiter there which is just nothing
and then we want to pass through the
output so this might look confusing but
essentially what we're doing is we're
taking each error and placing it into an
Li element and then we are returning the
imploded of this output here so we're
basically placing each error within its
own Li tag if you like or element within
this UL element so let's go ahead and
check this out in the browser what's
happened that I always sorry yet we're
returning this value so we need to go
ahead and echo output errors okay so now
we've got an unordered list I'm going to
go ahead and inspect this you can see
we've got a ul and then Li here and Li
here beautiful it's worked perfectly so
we've got UL li li UL so the errors
contain within air lies and this is a
really semantic way to display your
errors so this is why we're doing it
this way I know it's long-winded but you
know she can get your head around this
you can get your head around pretty much
anything so there is an easier way to do
this we could obviously skip all of this
step here and we could just pass in the
errors but we need to make some
additional changes we need to say Li
here we need to end the Li here and we
need to end an Li here and start and I
here so now when I go ahead and i
refresh we get exactly the same thing so
we've got UL li li UL so we've got our
overall UL and two allies in the middle
and that's done with just using this the
reason this works is when it implodes it
places this this at the start of the
element and then this at the start of
the element and then it puts the error
in and then we've obviously got these
outer ones as well so there we go it's
is we can do that within one line
very simple so now we actually need to
check whether there are any errors and
then go ahead and and output any errors
if there are so let's go ahead and do
that now I'm going to say if pull that
down a bit if empty errors is equal to
false ie if there are if there are any
errors if we have any errors we are
going to loop through our errors and
we've already established the way that
we loop through the errors so that's
fine so I'm going to say break out of
PHP I'm going to create a h2 tag I'm
going to say we tried to log you in but
and then here I'm going to go ahead and
just do this within here and break in
and echo output errors passed in that
Haros variable so now what's going to
happen is I'm going to refresh we pass
that data we try to log you in but
password too long the username password
combination is correct blah blah blah
so type Alex and then just password one
for example we get that username
password combination is incorrect if we
login successfully it works ok so that's
this part here redirecting us so this
has been a long and painful processor
but I just wanted to get over the logic
of this so we've got we've changed this
around a bit we've got our header just
down here and we've got our logic at the
top and then our output down here we've
created this function which loops
through any errors that we have stored
in an array and outputs them and you
might be asking yourself why are we
actually doing this well it just makes
it extremely easy for us to collect
errors and display them all we need to
do now if there are any errors is just
this and this just checks if there are
any errors and otherwise up here we're
locating to a different page setting in
the session etc so that's how we've done
the the error handling in in the login
and register script I know it's been
long but hopefully you've learned
something
this</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>