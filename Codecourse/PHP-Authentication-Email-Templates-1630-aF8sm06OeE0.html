<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>PHP Authentication: Email Templates (16/30) | Coder Coacher - Coaching Coders</title><meta content="PHP Authentication: Email Templates (16/30) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>PHP Authentication: Email Templates (16/30)</b></h2><h5 class="post__date">2015-05-26</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/aF8sm06OeE0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so although we're sending email they're
pretty boring at the moment we don't
have greeting to the user and it would
be pretty annoying if we were to come
over to our email or registered view and
have to say hello ex every time we
wanted to send an email so what we're
going to be doing then is we're going to
be doing the same thing as we did
without views before we're going to be
going to be creating a template for all
of our emails so under email let's
create a new folder and call this
template so we're following the same
kind of structure as we did for our
normal views without templates and then
partials and stuff like that and under
templates let's create a new file and
let's set this as the default templates
will call this default dot PHP so within
this template we want to check if a user
is authenticated and if a user is
authenticated we want to output a common
greeting among all templates so what we
can do here then is we can start to
create an if statement we're not gonna
put any markup in here because we're not
gonna be sending pretty emails but you
can go ahead and add that in so I'm
gonna say if forth as we've seen in all
of our views remember we're sharing that
data otherwise we want to do something
else so I'm gonna end the F there so if
the user is authenticated we can output
hello both dot user sorry auth don't get
full name or user name we already know
that that model has that method in it we
can do a little comma there otherwise
we're just gonna say hello there because
the user won't be authenticated and then
what we can do is we can add a Content
block which will allow us to define the
content that we're going to send within
the email so if the users authenticated
we say hello and then the users name so
Alex Garrett Billy Guerra or whatever or
otherwise their user names just Alex and
then otherwise we just do a common
greeting and then we have our content
block
so inside of our registered email we can
now extend from this template so we
extend email templates default dot PHP
you have a Content block the end that
block when we say you have registered so
now that we've got our common template
and we've extended that we can go ahead
and see how this works again so let's
log ourselves out now we're already
logged out let's register and we will
get rid of this record in here
we'll hit register we send that email we
see the email in here when it comes up
there we go and you can see there hello
there you have registered so if the user
is authenticated we will see hello
whoever so let's go ahead and sign in
and see how this changes we'll send an
email in a place where we shouldn't just
to check that this is being this is
being rendered out properly I'm going to
sign in with my user that I just created
and I've just noticed that what we've
done is we've made a slight mistake in
login dot PHP in the root what I'm going
to do is change that now so if you head
over to your login root notice here what
we did earlier to try and be efficient
is redirect the user back to login
regardless of whether they were logged
in properly or not
what we actually want to do is get rid
of that and paste it into here so
redirect the user to login if they
couldn't be signed in and if they could
be signed in and redirect the user to
home so we can just test out that this
has been fixed under resources' cookies
for localhost get rid of this you can
log back in we look a missed something
that doesn't exist could not log you in
if we log in with an account that does
exist we send back to the home page so
anyway that aside we've fixed that up
very quickly but what we do need to do
now is test these emails work properly
when we're signed in so let's close this
off and let's steal the code from the
register root where we authenticate the
user and what we're going to do is we're
just going to put the code for this
inside of our home PHP file we'll also
get rid of this root here that we
created to test out flashing so we will
paste that code in there to send an
email what we'll do is we'll quickly
just say user equals app off we know
that we're signed in so we're testing
this we're grabbing the auth object
which is a user we are passing that
through 12 you we're using that we're
sending it to that users email so this
should now when I hit home send an email
to here saying you have registered which
is obviously wrong and you can see here
it says hello Alex so we now know that
that is working so we've tested that
email template with a signed in user and
a non signed in user so let's just get
rid of this because we don't need that
in there it was only for testing so we
now have a email setup that was a bit
long-winded but we now know that we have
the ability to send email really easily
like this create templates for our
emails so we can create any number of
these kites kinds of templates just pass
in the content we want to send it we'll
greet the user appropriately and it will
send the data like this and we can also
send data through to these as well so
everything is nice and clean</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>