<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Build a JavaScript breakout game with Phaser: Collision detection (9/14) | Coder Coacher - Coaching Coders</title><meta content="Build a JavaScript breakout game with Phaser: Collision detection (9/14) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Build a JavaScript breakout game with Phaser: Collision detection (9/14)</b></h2><h5 class="post__date">2017-12-08</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Woy24SLt0nw" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so what we now need is once we've
released the ball we need a way to tell
phaser that we want the collision
detection to detects when this is hit a
brick or when this is hit the paddle so
it can rebounce upwards so the first
thing that we want to do we know that
over in our game we have an update
method so let's come down to this update
method this is checking if the paddle is
on the ball initially so we can go ahead
and replace it down here though we're
gonna go ahead and set a collision for
our ball and our paddle and our ball and
our bricks so to do this we say this
game physics we say arcade to be using
arcade style within phaser and we say
collide now this takes a few arguments
the first one is going to be what you
are looking to check in terms of what
you want to collide or then we have what
we want it to collide with which is
going to be the paddle then we have a
method that we can call once this has
happened which is really important
because when the ball hits the paddle we
need to do something with it so I'm
gonna say ball hit paddle and I'm gonna
go ahead and implement that method down
here just now so ball hit paddle this
will be the handler when that hits so
I'm gonna say in here hit paddle just so
we can see that working we then have
another argument I'm not actually too
sure what this is I've just got used to
typing null in there but then we refer
to the overall game so now that we've
done that let's go ahead and click wait
for the ball to get to the point where
it hits the paddle and you can see that
that automatically bounces off because
we've added collision between the ball
and the paddle and of course we see hit
paddle now once the ball does hit the
paddle that's a little bit more
complicated let's add the collision with
the bricks first of all and then we'll
come back to this in just a second so we
pretty much want to do the same thing so
I'm gonna go ahead and copy this and
paste this down here and we're gonna go
ahead and say that we want the ball to
collide with the bricks and of course
we're gonna say ball hit brick because
it's only gonna ever hit one brick at a
time we can copy this method down handle
what happens when we hit a brick which
of course is to kill that brick so going
to mean looking at later and of course
we're gonna say hit brick so if we just
give this a refresh and click you notice
that a is now colliding off of each
their bricks and if you take a look on
the right
you can see each of them console logs
being shown so I'm just trying to get
that in the middle there we go so you
can see that working really nicely okay
so now that we've got this working we
need to figure out what's gonna happen
when we hit the paddle this is the most
complicated part of this and what I did
is I took the logic for this from one of
the examples over on phaser so if I
don't explain this entirely correctly I
apologize but essentially what we want
to happen I can explain what we want to
happen if you have a look now when I go
ahead and release this let's go ahead
and release it so it comes straight back
down to the paddle if it's on the corner
it's not really pushing this over to the
left so what you'd expect to happen is
the further over on the left that it
hits the paddle the more it pushes on
the left so we decrease the velocity on
the left and the same for the right as
well
so essentially what we're doing here is
saying is the ball on the left-hand side
of the paddle if it is decrease the
velocity on the x axis if it's on the
right-hand side of the paddle that it
eventually comes down to here increase
the velocity on the wire on the x axis
but increase it so you can see here the
moment it just doesn't look like it's
working very well so to do this let's go
ahead and create a difference in here of
zero we'll see what this does in a
minute let's focus on the left hand side
first of all so if the ball x axis is
less than the paddle x axis which
essentially means it's on the left hand
side of the paddle we're going to set
the difference here to paddle X - ball X
that's just going to give us an idea of
how much difference is between the
center and the left of the paddle so the
further over on the left of the paddle
it hits the more we increase the
velocity now then we say ball body
velocity which we've already seen
because we originally set that when it
left the paddle and on the x axis we're
going to set this to minus 10 multiplied
by that difference so remote the further
away from the center it is the more
we're going to increase the velocity or
decrease the velocity on the x axis so
hopefully that makes sense
let's go ahead and see what this does
I'm gonna release the ball so it goes
ahead and come
straight back down to me so might take a
couple goes when I hit right on the edge
looks like bull is not defined okay so
the reason for this is what we're doing
is inside of here we're expecting in the
ball and the paddle that we have defined
inside of here so that's sir the reason
that that didn't work so let's go ahead
and run this again and you'll see that
when I hit this FET right on the corner
it goes ahead and really decreases the
velocity on the x axis and if it's
slightly in the middle it just doesn't
do it as much so that's pretty much what
we're doing here now
if we go ahead and release the ball
again and so it comes back down to us on
the right hand side of the paddle it's
just kind of bouncing in the same
direction using the same velocity so
what we want to do is say if the ball x
axis is greater than the paddle x axis
that means it's on the right-hand side
the difference is now going to be the
ball x axis minus the paddle x axis so
we're pretty much just reversing this
and instead of minus 10 we want to
increase the velocity on the x axis so
we multiply it by the difference that
we're using here which of course is the
further away is from the center now
really importantly what we want to do is
in each of these statements go ahead and
return so we don't go ahead and continue
down to here
and if we give this a refresh now what
we pretty much end up with is the
ability to really go ahead and push this
depending on where we are and of course
if this is right in the center it's just
going to bounce straight up because
we're checking on the left and on the
right hand side so that's pretty much it
for the collision detection on the
paddle but what happens when a ball hits
a brick well let's just look at a really
quick way of going ahead and killing
them bricks when a ball hits a brick now
we know that we get as part of that
group lots of different bricks so the
group itself isn't being hit each of the
items inside of that group are being
here when we go ahead and hit a single
brick what we're gonna get is into here
the ball and the brick because we know
that when we're defining out the
collision here are saying this ball and
this bricks so let's come down this is
going to be the individual brick that is
going to be hit and what we can do is
say brick
kill and that is easy as it gets that's
gonna go ahead and remove that
particular brick from that group so now
I can go ahead and click and this is
just going ahead and getting rid of each
of the bricks that we collide with let's
try to get this in the center of one of
these so we can see that work really
nicely there we go okay so that is
pretty much it we're gonna leave it at
that for now we've looked at collision
detection and we still have a little bit
of work to do but we're gonna move on to
the next part where when we do hit
bricks we're going to update the score
just up here so we can keep track of
that</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>