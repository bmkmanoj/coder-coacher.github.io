<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Laravel To Do List App: Migrations &amp; Seeding (Part 3/9) | Coder Coacher - Coaching Coders</title><meta content="Laravel To Do List App: Migrations &amp; Seeding (Part 3/9) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Laravel To Do List App: Migrations &amp; Seeding (Part 3/9)</b></h2><h5 class="post__date">2014-04-10</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/6Ap2T2ISMws" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so in the last part we created this
rather boring if you ask me today we're
going to be doing something a little bit
more interesting we're going to be
creating a migration so what is a
migration the migration is a type of
version control for your database so for
our code we have version control like it
or SVN migrations are essentially the
same thing or free database schema they
allow a team of developers to modify the
database schema and stay up to date on
the current schema scape state
migrations are typically paired with the
schema builder which is included with
laravel to easily manage your
application scheme now that is a
definition taken from the larvell Docs
if you don't understand then don't worry
it will become clear eventually so to
create a migration we're going to open
our terminal we're going to say PHP
artisan migrate colon make and we name a
migration exactly what we would exactly
how we would say it so we're going to
call this create users table so once
this is done we can go back to our code
itself and if we go to database
migrations we'll see the file here now
we have two methods here we have the up
I may have down inside up we're going to
create the table and all the fields and
down we're going to destroy the table
I'll explain why we have these here in a
moment for now let's say schema create
users and we're going to pass in a
closing we're going to pass in a table
parameter which is an instance of
illuminate database schema blueprint
the inside here we're going to say table
increments ID we're going to have table
timestamps which is basically just two
fields created us and updated that let
both date time and the interesting part
about this is when you come to use this
time sent in your application laravel
automatically converts them into carbon
instances but we'll get into that a
little bit more later on for now we're
going to add some more fields or say
string name table string password and
table string email in our down function
we just need to say schema drop users so
now this file is created it's complete
we're going to actually run the
migration so we can say PHP Addison
great and I forgot to set up my database
credentials so we're going to open up
our database configuration we're going
to set password to my password I'm going
to set the database to database that we
created so now let's give this an over
down and if we go back to our database
hit refresh you'll see this uses table
here and don't worry about disable just
don't touch it
don't delete it don't just ignore it
completely laravel uses this to
determine which migrations have already
been run so we just called this code
here why did we add this if we go back
to our terminal and we run PHP artisan I
grid rollback enter and we refresh
that's going to delete the users table
altogether now this is especially useful
if you make a mistake in your migration
and you want to roll it back
so you can rewrite it saved my skin a
lot so now we're just going to redo this
we're going to just check this that yep
and now we're going to close this file
we're going to create one more migration
create two duce local discrete items
table and we're going to edit this file
we're going to say schema create items
we're going to pass in our closure and
our table we're going to say table
increments ID and table timestamps just
like before and just so we don't forget
we're going to also add this here so
what we're going to need for our items
we're going to need a integer which will
be the the owner ID which will be
basically the user that created the item
we're going to have a string which will
be the item name and we're also going to
have a boolean done which will determine
whether the item is complete or not so
we can close this we can go and run a
migration and we can refresh here and
just check they worked which it did
perfect that's our migrations complete
so now we want to seat the database so
what is seeding seeding is essentially
just populating a table with data but
that seems a little bit foggy don't
worry you'll get the hang of it so we're
going to go to database seeds we're
going to create a new file users table
see the dot PHP we're going to create a
new class
this is table cedar and it's going to
extend see them we're also going to have
one public method called throat now the
first thing that we want to do is we
want to clear this table if we cede this
table and then we see that again later
on we're going to have two sets of the
same data and obviously we don't want
that so we're going to say DB table uses
delete and that's going to remove
everything inside this table now we're
going to create an array and this is
going to contain our users so we'll have
just one user for now his name will be
Terry this password will be hash fake
we'll just set it to the same as the
username now notice how we're using the
larval hasha and the email will be just
a dummy email so once we have this rate
we're going to insert it into the
database so we're going to say DB table
users insert and we're going to pass in
that array so now if we go to our
terminal let me say PHP Addison DB seed
we don't get anything back which is no
good sign both clearly missed something
oh here we go we forgot to call it
inside our database see there so we need
to go here
we need to uncomment this and we just
need to add that s that we added so now
if we go back PHP artisan DB seed we get
this so if we go to our database and we
refresh here there we go there's the
data that we just inserted now we need
to do the same thing for our items table
so going to create a new file items
table see them
class items table cedar stems see them
are going to say public function run and
you're just going to copy this into here
we're going to rename this to items same
with this this and this
I'm going to remove everything here so
what will those fields we have owner ID
we have name and we have done so the
owner ID will be the ID of the user that
we just created which is one so we can
enter line the name of the task will be
pick up milk and this won't be done yet
we'll also add another item on the ID
will be one the same as only name will
be walk the dogs and then will be true
if I add another one on the ID equals
one name equals cook lunch cook dinner
and done will be false so if we go if we
go to our database see the file we
duplicate this line we're placing the
first parameter with the name of our new
CD which is items table see them and we
go to our command prompt and bring the
same command our table will be seated
hopefully as you can see we have all the
atoms just as expected</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>