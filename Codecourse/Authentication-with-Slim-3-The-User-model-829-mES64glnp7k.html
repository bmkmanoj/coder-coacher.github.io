<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Authentication with Slim 3: The User model (8/29) | Coder Coacher - Coaching Coders</title><meta content="Authentication with Slim 3: The User model (8/29) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Authentication with Slim 3: The User model (8/29)</b></h2><h5 class="post__date">2016-04-13</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/mES64glnp7k" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">now that we can actually access our
database we want to set up a model and
from this we want to extend eloquent
model class which will allow us to use
this globally as a model to create users
to do everything we need to do so we're
going to start just by creating a models
folder within an app just to keep
everything nice and tidy and inside of
here of course we want to create a user
model so let's just give this name space
so it's name space of app models of
course and here we just have a class of
user now of course it's not that simple
because this on its own is pretty
useless what we need to do is extend
eloquent model class so let's use
illuminate database eloquent model and
here we just extend that model class so
now just by doing this we now have the
ability to use this model as a direct
connection to our database table and
that is obviously users now you might be
thinking well how does this know that
it's going to use the users table
well what eloquent does is it will take
the singular version of this which is
user and it will automatically look for
a table with the plural version so in
our cases users if your table differs of
course what you can do is say protected
table and then you can give the table
name here now I could do this just to be
explicit of course I don't need to so
we'll leave that in just so you can
refer back to it so now we want to see
how this works well let's go over to our
controllers so let's go over to our home
controller again once again we'll just
kill the page here and up here we're
going to say user equals user find one
or we could do user we're email Alex at
code course comm pretty straightforward
so now this isn't going to work we have
to import our model name so let's go
ahead and do this it's just app models
user and this is it let's go and do a
var dump
and we should see that this has works
now this looks a little bit different
now the reason that we're getting a
builder class back is because what we've
done is we've kind of built up a query
here so we're using a where clause but
we've not grabbed the first record so
remember when we did find one that just
gave us back that record straight away
but of course now we're doing this we
don't actually have a record so we need
to say first and I will just give us
that user back so this is what we get
now this looks a little bit longer as
well because of course now we're working
with a model so what eloquent has done
is it returned us a model with all of
the properties so it works exactly the
same way so this now has an email
property so we can access that and it
just is slightly different the reason
being is obviously within our user model
we can now create methods here which
will help us out a little bit later on
but we now have that set up we've tested
it out and we know that we have our user
model which is the only model we're
going to need at least for now
and it works now there's one caveat to
this and let's just test this out so if
we head back over to our home controller
and try to create a user so let's do
this by using user create and then we
want to pass in an array of the columns
that we want to fill so let's say we
were registering a user
well we'd enter a name email and a
password so let's say name Alex and here
email let's just give a different email
and of course a password and for now
let's just put something like 1 2 3 now
let's run this you'd expect this to work
this is just the syntax for creating a
record what actually is happening here
is eloquent is throwing a mass
assignment exception and that just means
that it's protecting us against writing
to our columns so what we need to do is
specifically define what columns we want
written to that's really important so we
know for our user model we can have
fillable columns of
email name and password so we know that
we always want to write to these if you
had other columns that you didn't want
to update or ever ever want to really
touch then you don't have to add them to
fillable so now when we run this you can
see it works we see the home view and of
course over in our database table we see
that new record just in there so this is
great I'm going to go ahead and delete
these records because we don't need them
because next what we're going to do is
look at signing a user up so we're going
to be doing pretty much what we've seen
here but of course we're going to take
some other things into account like
hashing passwords and all that good
stuff so let's go on and start to allow
our users to sign up</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>