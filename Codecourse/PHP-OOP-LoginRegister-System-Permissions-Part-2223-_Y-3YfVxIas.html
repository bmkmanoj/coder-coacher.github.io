<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>PHP OOP Login/Register System: Permissions (Part 22/23) | Coder Coacher - Coaching Coders</title><meta content="PHP OOP Login/Register System: Permissions (Part 22/23) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>PHP OOP Login/Register System: Permissions (Part 22/23)</b></h2><h5 class="post__date">2013-11-17</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/_Y-3YfVxIas" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">we're now going to give the ability to
different users to have different groups
so we can perhaps incorporate an admin
group or moderator group or just a
standard user basically and we'll
perform a check on the home page just to
let the user know what kind of
permissions they have and we can really
drill down sort of deep into this and
give them very specific permissions but
for now we're just going to focus on
user being either a standard user or
being an administrator so basically
these permissions here as a JSON object
or string we'll look at what that means
in a minute if you're unfamiliar and
basically govern what these different
rights do so this is very very
straightforward and the method to
actually extract this and check is very
straightforward as well but let's go
ahead and just define what how we sort
of want this to look on the home page so
on the home page I'm just going to
create a check down here and I'm going
to say if user has permission and I'm
going to say admin so that there is the
is this off that the property value here
so if they use a has permission admin
for example I'm just going to echo out
in a paragraph you are an admin it's
straight I guess now this can also be on
a page per page basis so we could
perform this check a top of the page or
if we would move over we might say if
not user has permission and we might
then redirect to you know a 404 or we
might redirect back to the home page or
something like that for now we're just
going to demonstrate this functionality
here and and you know that's going to
that's going to that's how it's going to
work out now when we refresh we
obviously get an error because we
haven't created this functionality in
our user class so let's go ahead and do
that now and let's go down here here and
we'll say public function
has permission okay so obviously we need
to the ability to define what kind of
key we're looking for so we have we
obviously have key value pairs as we've
seen in the database but we want to move
what group they're actually in first of
all so we're going to say if this sorry
we're going to say group is this DB get
and we're going to grab data from our
groups table and we want to say we're
don't sorry not where we want to say
where ID equals this data group and the
reason for that is let's go ahead and
just print our on group first reason we
want to do that is so at the moment we
are just a standard user so we're
outfitting the ID of one which is the
idea that corresponds to a standard user
and name is a standard user permissions
blah blah but let's go ahead and just
change the user that's currently logged
in which is myself to a group of two and
when we refresh we can see that we have
the name of the of the sort of group
we're in and the permissions here and
what we need to do is sum is is to code
this because it's at the moment it's a
JSON object we wanted to code this so we
have a PHP array now it sounds a bit
difficult but if you're unfamiliar what
JSON is it's a JavaScript object
notation it's just notation in your form
of a JavaScript object which is a
lightweight data transfer format so it
basically allows us to store a sort of
common or compact structure but a
structure of data here but without
defining in a you know in an odd way
like a comma-separated way for example
we're defining it as a JSON object so
this is valid perfectly valid JSON and
for example we might also want this user
to be a moderator
we could create the functionality to
look like this like that and one just
signifies that they are and zero would
signify that they aren't so that's
basically how we're going to do it so
let's save that anyway and we can we can
use that in some of our checks later so
you can see that that's now changed so
what we need to do is to code this so
instead of print R we want to first of
all check whether actually the user is
in a group or not we'll assume they are
because that value should always be
required whether or not the standard
user or anything else what we then want
to do is extract extract the permissions
which are obviously group which we've
cut here first and that will be the
missions that so we've extracted the
permissions but at the moment all these
permissions are is just the loops let's
just have a look was I so permissions
that is just a JSON object like that so
what we now need to do is encode it oh
sorry
decode it and that's using the JSON
decode function in PHP now by the by
default this will return an object but
we want this to return an array so we
can just pick the key out of it so we're
just going to parts true there so if we
now go ahead and print our own
permissions we can now see that we have
an array of admin one moderator one so
we've now taken that converted it
essentially or decoded it into a PHP
array what we can now do is we can say
if permissions key and key comes from
what we pass through to it so for
example if permissions admin and we
could say is equal to true I mean this
would this wouldn't work because we're
using and we're type checking as well
but we could say that for example and
then we can return true now otherwise
what we might want to do is well
probably what we do want to do is just
return false in case any of that doesn't
work so what we now do is refresh and
oops again I've said permission instead
of permission so let's just change that
there we go so you are an administrator
and we can do exactly the same thing for
example if we want to check if we're a
moderator and it would work in exactly
the same way like that you're a
moderator but when I go ahead and I
modify my user record to say that I'm in
Group one that simply won't work because
I don't have the relevant permission so
that is really it we've demonstrated how
we can create a rich small but effective
permission system just by introducing
another method and introducing a JSON
object into our groups one of the fields
in our groups and obviously you don't
need to replicate this for every user
because the user is just mapped this
particular ID so as long as a user is
user ID - they are an administrator and
they have the permissions here which can
be checked so you could have moderator
in the moderator one admin admin one or
you can have just super user dev an
admin their moderator etc so this is how
we create a basic mission system and how
we've detected the type of a user</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>