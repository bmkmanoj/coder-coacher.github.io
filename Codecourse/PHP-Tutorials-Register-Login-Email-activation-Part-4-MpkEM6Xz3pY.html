<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>PHP Tutorials: Register &amp; Login: Email activation (Part 4) | Coder Coacher - Coaching Coders</title><meta content="PHP Tutorials: Register &amp; Login: Email activation (Part 4) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>PHP Tutorials: Register &amp; Login: Email activation (Part 4)</b></h2><h5 class="post__date">2009-03-13</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/MpkEM6Xz3pY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">right so in the last part we
successfully activated an account and we
sell that whole process that lets us do
this now what I'm going to do is I'm
going to delete this record here okay so
we've got no users in the database now
and what I'm going to do is just log out
and I'm gonna process this login form
with an email script that sends an email
out now if you haven't already seen my
email tutorial this is basically gonna
explain how to send an email but if you
do really want to learn a bit more about
the email process I suggest you watch
that tutorial and then watch this part
of the this specific tutorial set so
under our register we're going to need
to send the email about email out we've
got the random number going in here but
here underneath we're gonna send
activation email and like I said before
I've got my hotmail account open here
with my inbox just ready
I've got a new email okay there we go
okay so this is basically just going to
be sent to my inbox here okay so we need
a few parameters this is two and our two
is obviously gonna equal at our email
address here that way you can put into
the database we surely added this and
put it into an email there so our two is
just gonna eat for that email you can't
just leave it as an email but I prefer
doing this and our from is going to be
in fact that listens to be under headers
our subject needs to be activate your
account yep
and our headers which we require when
we're sending an email and through the
mail function like at the moment because
it will return an error at the moment is
just going to be from an N PHP or admin
PHP academy' calm and bear in mind that
bear in mind that if you don't
understand what this what I'm going on
about here we'll make sure you read my
email tutorial how to create your email
what we also need is the mail server so
I'm going to say server equals and this
is just my mount host server for my
university so you should really use like
you iEARN okay so this is the function
to send email and this is the
malfunction here we're gonna say - we're
gonna say subject the body which we need
to create I forgot to do that and the
headers so there we are okay so this
function on its own will actually send
the email we need to create a new body
of the email and this is pretty simple
we're gonna create this as a string a
lot of text I'm gonna come down here
because remember we can go down a couple
of lines and I'm gonna say hello and I
need to give a name so the fall just
show for name in there hello full name
so hello Alex Garrett in the case of me
registering you need to activate your
account with the link below we need to
construct this link so the link is going
to be HTTP colon forward slash forward
slash localhost for me
because I see I'm running off my local
my PC it's a localhost or one 127.0.0.1
it's up to you
obviously if you're using a domain on a
hosted or self hosted server you need to
include your domain here that's pretty
self-explanatory
I've got PHP academy' four slash
tutorials ford slash register login
forward slash activate the PHP remember
I showed you guys this before we're
doing a question mark ID equals ID our
ID is put in C Oh in fact we don't have
an ID being put in do we yes okay so we
need to use a function here which is my
SQL insert ID and what this is gonna do
is it's gonna get the last inserted ID
of the record
so the basic basically the way we do
this is alright okay we need to create a
variable up here after we've created
this query here so I'm gonna say the
last ID equals my SQL insert ID okay and
this is going to return the inserted ID
so what I could do is say died the last
ID we can just make sure this works um
obviously I need to test this okay so
let's go go ahead and register a user
okay so Alex Garrett I choose you named
Alex he didn't he didn't and my email
address as usual and I'm gonna kick
register okay we've got nothing no
output at all all right
okay so yeah basically what we're gonna
do is we're gonna get rid of this dye
here and we're just gonna echo this out
here and I'm gonna kill the script
they're just and test this echo command
we'll do it this way okay so we're gonna
register in I'm gonna register Alex and
he didn't really click register and here
has been returned with 14 has been
returned and if we check inside our
database this new registered user
we've got 14 here so naturally what we
need to do is just use this variable
let's find it this variable last ID to
put into our login link that login link
URL in order to activate that specific
user so we're gonna set the last ID
equals to MySQL insidey
this command basically gets the the last
auto increment column value that you
inserted so as long as you've got like a
column or a field if you like with the
auto increment function inside MySQL
you're going to be able to use this mice
cure anxiety okay so that is the last ID
I believe if I call it last ID yeah last
today
okay so we've got last ID for the ID and
code equals now this is pretty easy all
we've got is up here random so that's
the random variable which just generated
our random code there and let's go back
down
and across we're just gonna paste the
random in there so that's basically how
you are constructed obviously here we
need two line breaks with foot backslash
n backslash n and here I'm gonna say
back so seeing backslash n as well after
that after that there and then down here
I'm just gonna say thanks or something
like that you know you do whatever you
want okay and this is then gonna send
that email and then we can die and say
you have been registered
we can't login so they're gonna say
check your email to activate your
account so that's pretty much it and
then that's about yeah that's that's
more or less here hopefully it'll work I
mean I'm not sort of counting on the
email script to work at the moment we
need to make a few modifications to it
and that's basically I said I set my
server here what you need to do is
unless your PHP dot ini set to this
already we need to use the ini set'
function and what this does is it sets
as a particular value of your PHP dot
ini file to whatever you specify and
this is the SMTP part for me and I'm
gonna change this to mail host dot in
fact I don't need to do that at all I
can just write server in there so we're
changing the SMTP line you know PHP dot
ini to my heart Shefford AC UK while we
send this email with this command here
this mail function command so what I'm
gonna do is I'm going to in the next
part of this tutorial
test this out so you guys can see if
it's worked and if it hasn't we can make
a few changes so what I see in the next
part thanks for watching</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>