<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>JavaScript Tutorials: AJAX File Upload with Progress Indicator (Part 1/5) | Coder Coacher - Coaching Coders</title><meta content="JavaScript Tutorials: AJAX File Upload with Progress Indicator (Part 1/5) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>JavaScript Tutorials: AJAX File Upload with Progress Indicator (Part 1/5)</b></h2><h5 class="post__date">2012-08-26</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/pTfVK73CUk8" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">okay welcome to this JavaScript tutorial
in this series of videos what we're
going to be doing is creating a
JavaScript based file upload system so
before we get started I think I'm the
best thing to do is just going to show
you pretty much what we're gonna be
creating and now delete it all and we'll
go through how to create it so we're
going to be making is a page very very
simple just like this so I'm not gonna
be concentrating on any design type
stuff and the way it works is you can
browse for files so if I just pick a few
files hit open then you can upload them
you can see that they uploaded
immediately which isn't quite what I
wanted but never mind there is actually
a progress bar sort of me to think I'll
have to find a bigger file to test that
with some loading these locally it's not
going to take very long by anyway as you
can see that all uploaded quite quickly
with no page reloading like you would
normally get when you load a file and
these links just link to the files so if
we click on one we'll get the image that
I uploaded so for the sake of testing
let's just try and find a bigger file so
I'll hit browse again and let's go I'm
not sure where I'm going to get a bigger
file actually oh okay
I found one let's upload this big zip
file I've got for some reason
helped load and you can see now that
we've got a percentage it goes up as the
files uploaded and then at the end it
disappears and the link is added to the
page so like I said this all works with
JavaScript which is quite a nice thing
to know how to do but there is a slight
problem which is browser compatibility
which I'll mention in a bit more detail
as we get going but for now I just say
that it's quite important to always have
like a fallback if the script doesn't
work so we're going to address that in a
little while but yeah it's not going to
it's not going to work with every
browser I think the method we're using
support is Firefox pretty much all
versions well all recent versions back
to about eight I think chrome same
situation
Oprah is the latest version only 12 at
the time of recording and Internet
Explorer is obviously no-go because
that's how an explorer is I'm not sure
about the other sort of mobile platforms
but yeah not something you have to look
into yourselves if you want to use it
without a fallback method anyway that's
enough of introductions so let's get on
with the actual code
right that's the code removed and now
we'll be starting from scratch
more or less creating the page I just
showed you basically so as you can see
the page is now completely blank just
actually do anything there is still a
bit of HTML here and I'll go over what
we've got as a starting point in a
moment but is essentially just well
basically nothing but like I said I'll
go over that in a moment first thing I
want to do though is go over the sort of
file strokes that we're gonna be using
so if we just go to our folder here you
can see that we've got these two files
here while them is called upload dot PHP
and that's the actual page that we've
used in our browser and one of them is
called upload j/s and that's the one
that that's the file even JavaScript
file that is actually gonna be doing the
sort of JavaScript Ajax upload thing and
then we've got this files folder which
is just the folder that Square or all of
our files are going to get sort of put
into once they're uploaded so the first
thing we're going to do is actually
create a simple upload page just in PHP
then we're going to add the JavaScript
afterwards and the reason for this is
that it's basically what I said earlier
that we need a fallback method for
people that don't have support for this
JavaScript method so if people if
someone whoever is the users browser
doesn't have the capability then they'll
just get the steps simple you know PHP
only upload form and that's why we need
to do this first and also it's quite a
nice way to understand sort of the
concept of what's going on a bit so
first thing we do is go across to our
text editor here and we'll just go over
very briefly what we've got already so
this empty PHP block at the top is where
we're going to be processing our file
uploads then down here we've got a very
simple sort of HTML heading and then a
little tiny bit of HTML down here so
we've got a div with the ID if uploaded
and that's where we're going to be
that's where we're going to be
displaying our then to speak all of our
sort of you know the links the file
links that link to the actual files then
just below that there's this upload
progress thing and that's something
we'll come back to later
because it's something that's only going
to be used from JavaScript and the
reason we've got it set up here in our
style to display:none is that we don't
want this to display if people don't
have JavaScript enabled because it might
break the page layout in some way so
yeah that is pretty much everything for
the HTML and this final box down here is
just where we're going to do the form
which is actually the first thing we're
gonna do it we're going to do so let's
go ahead and do that we're going to
create a new form it's action is going
to be the current page so just empty its
method it's going to be a post lower
case and the ink type encoding
encryption not encryption encoding I
think is encoding I don't know
ank ankle type has to be set to
multi-part slash form data because we're
dealing with file uploads that's just
something you have to do and then inside
of here we're going to have a nother div
tag because you have to and then we're
going to have our two input elements so
Y is going to be the file inputs so I'll
create a new input with the type of file
not guy'll the ID is something we won't
worry about because let's go reset later
and I set the name
to file with two square brackets because
we're dealing with multiple file
selections we need to have PHP create an
array I'll show you what that means in
little in a moment so little while next
attribute multiple multiple equals
multiple that's just so that people are
able to select multiple file attributes
file files even and that's that next we
need to submit button so a new input
with the type of submit
the value can just be upload like so now
if we just reload a browser now we'll
see what we've got which is a simple
file upload form that we can click
browse and pick a load of random files
which isn't particularly useful but
there you go so the moment the upload
button does absolutely nothing so what
we need to do next is actually handle
our upload so go back to the code and
then in this top PHP block here what we
need to do first is check to see if
someone has tried to upload some files
where we can do that is by checking to
see if the files array is not empty and
to just demonstrate the reason this
works I'll just add a print underscore R
of the entire files array like so then
if we go back to our browser and I just
pick a few files again open and upload
you can see you get this big horrible
useless looking text just be the page
source so we can see it in no formatted
format and then you can see that we have
this nice list of files and the reason
we added the two square brackets is so
that we get multiple entries in each of
these if we didn't would just get the
final one without the array element
numbers thing
so as you can hopefully see what we need
to do is do a loop over each one of
these files and then upload it or what
it's already load move it into the
folder so the way we're going to do that
is just by using a well first me to do
the check to see if someone's uploaded a
file so I will do that is by checking to
see if the files array is not empty so
files file which is the name the form
down below file see good okay so what
need to do next is loop over each of the
files now if we just look back at the
page source oh I just view again look
back at the page source here you can see
that for each one of the files it has an
entry in this name thing key elements
section whatever
and then it also has a corresponding
entry in the type and the temp name and
all the others
well error in size so this corresponds
to this and this and so on
so what we can do is to a for each loop
over these and then just use the key to
reference these others it would be quite
a lot easier if it was sort of organized
differently but it's not so we can't do
anything about that anyway so what we do
this is using 8 for each loop
so for each files file name which is
that array I just highlighted a few
times as name and then inside of here
name would be each of the file names in
turn however we also want the index so
as key point to do with the name so then
we have the key in the index so then we
can use for example files upper case
files file let's say size
keye like so and that will give the size
for this file that we're currently
working with so for the sake of this
tutorial we're not going to doing any of
these or proper file upload validation
stuff I'll leave that to you there are
plenty of the videos out there I think
it's probably why on this channel well I
hope there is so what we're going to be
doing is a very simple check to make
sure the file actually uploaded and so
we'll just do if files file error key
is equal to 0 which means success and
move uploaded file which is the function
which is used to move a file that's been
uploaded to a folder you're choosing or
know a location so here we'll do files
file temp name
and key
and we'll be moving it to the files
folder which I showed you a moment ago
so files slash and then we just want the
name which we have from the loop above
you could also use the actual files
array if you want with an underscore
like so it will do the exact same thing
if I can type there we go however it's
just a little bit longer so we're gonna
be using name okay so if that has
happened it returns true so this thing
here will happen so what we're going to
do is just add the name of the file to
an uploaded array so that we can use it
further down to create our links should
be named shouldn't it okay like so
so that's that pretty much done so let's
just give this a test so under here
let's add a print underscore are
uploaded and we'll just test our again
so reload the page it browse pick a few
files upload and you can see that we
have an array with the three file names
so that's good so I think I'm going to
leave this here because we've come to a
nice sort of stopping point sorry if
I've rushed through this first bit a
little bit I'm just trying to get onto
the actual focus of the tutorial really
so in the next part we'll cover how to
create the links which is quite easy and
then in the parts after that or whatever
we'll be working on the actual
JavaScript to make this a lot nicer so
that's it thank you Qing and come back
for part two</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>