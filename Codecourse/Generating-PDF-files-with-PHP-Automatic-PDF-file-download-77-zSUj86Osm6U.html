<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Generating PDF files with PHP: Automatic PDF file download (7/7) | Coder Coacher - Coaching Coders</title><meta content="Generating PDF files with PHP: Automatic PDF file download (7/7) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Generating PDF files with PHP: Automatic PDF file download (7/7)</b></h2><h5 class="post__date">2015-10-12</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/zSUj86Osm6U" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so now that we've actually written the
PDF file to our storage area just here
we now want to serve that to the user
then delete the temporary file so inside
of index.php let's say capture respond
and what we're gonna do is we're going
to choose the file name that we want to
respond with so this could be absolutely
anything at all I'm just gonna put in
voice dot PDF though okay so we need to
implement this respond method so under
our load method here we have our respond
method and inside of here we have the
file name that we want to call this so
we remember loaded in Symphony's HTTP
foundation component and as part of this
we have the ability to return a response
so we're gonna say response equals new
response and we need to grab that PDF
file so remember here when we did load
we set this PDF to capture image that
now contains the path so all we need to
do in here is say file get contents this
PDF we need to respond with a specific
code which is 200 okay and then we have
an array of headers that we can send so
the first one is content description
that's just file transfer the next is
content disposition and this is an
attachment we need to set the file name
so that's we'll just put X dot PHP or
dot PDF and this is going to be
surrounded and double quotes and what we
can now do is append on the file name
and that is just the file name that we
passed in
the next is content transfer encoding
that's binary and last but not least the
content type which is an application PDF
so this then will allow us to respond
the it will automatically be downloaded
remember with grabbing that new PDF
father we've generated we're responding
with a two hundred and we just have
various headers in here that assist this
download now what we want to do is
remove that file that temporary file
because the the user will have already
downloaded it so we're gonna save this
PDF and then we're gonna save response
sent so we create the response we pull
in the content that we want to serve to
the user as a PDF file using the custom
file name under our content-disposition
header we remove the temporary file
because we don't this storage directory
to get massive and then we send the
response so let's go ahead and test this
out I'm gonna delete these two files
that we had in here before we introduced
deleting files and let's see what what
happens now so let's hit enter on here
okay so we've got an error here I think
I know it won't be the problem so this
PDF at the moment remember we're setting
the result of this capture image method
and down here what we're not doing is
returning the path so that was why we
got an error on file get contents
Farnham cannot be empty so let's hit
enter again and there we go so you'll
still see this error if you saw that
error as well but don't worry it just
it's just because the page hasn't
refreshed we've just forced this
download so we now have invoice dot PDF
downloaded we click on that and we see
our invoice and that is it we now have
complete creative control over the PDFs
we create you can go ahead and fiddle
around with the settings under capture
js2 change this to you know how you want
for example you could change the width
of this and you can just go ahead and
see the result here
so that's made things slightly different
it's entirely up to you how you play
around with this but essentially now
what we're doing is we are generating
PDF files via HTML and CSS content which
makes it a lot easier to make any
changes</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>