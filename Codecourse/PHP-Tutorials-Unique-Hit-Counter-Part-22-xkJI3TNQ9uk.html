<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>PHP Tutorials: Unique Hit Counter (Part 2/2) | Coder Coacher - Coaching Coders</title><meta content="PHP Tutorials: Unique Hit Counter (Part 2/2) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>PHP Tutorials: Unique Hit Counter (Part 2/2)</b></h2><h5 class="post__date">2011-05-27</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/xkJI3TNQ9uk" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so we need to create an if statement
based on whether this here should be
gained if it shouldn't if it's not then
we don't need to do anything we also
need to include this file put content in
the IP in this check as well
so essentially what our program is doing
is if the IP address is in here we are
not going to do anything there's no need
to increment the counter because it's
unique based on a unique IP if the IP
address is not found in here we're going
to increment the counter then we're
going to add the IP address to this file
so the next time the same user accesses
it
the counter duck txt will not be
incremented hence the fact it is unique
so we need to create an if statement and
surround this with it with a block so
well surround this with parentheses and
this is our block now we're going to add
some more to this block in a moment but
I'm just going to go through the if
statement itself so the condition is if
not so we used an exclamation mark for
not in underscore array now what this
function is going to do it's going to
check whether a specific value exists in
an array and this value needs to be
obviously an array now our text file at
the moment is not an array because it
just is a text file so we need to use
another function tip to get the content
but load the contents automatically into
an array it's going to make our life a
lot easier if we use the file function
so the first parameter is what we're
looking for now we're looking for the
current IP inside of this IP dot txt
file so we've defined IP up here which
I've then put into here so we're looking
for IP which is the current user's IP
and we're looking for this inside IP txt
so now what I'm going to do is I'm going
to use the file function to define this
array so you can define it elsewhere in
your program but I'm going to be using
it in a single line so we're going to
say file and then in brackets we need to
specify two parameters
the first one is going to be the file
name itself which is IP underscore file
name we're looking for the IP inside IP
file name but we're checking if it is in
the array loaded using this file
function we're then going to write a
comma and we're going to create a
condition almost saying if sorry file
ignore new lines now the reason I'm
doing this is because when you do load
it into an array if you have say 1 9 or
1 27.1 + 1 + 2 1 6 8 sorry
one there now what this will do is it
will load this value and this value into
an array just to bear in mind that if
you haven't looked at arrays go back and
check them because you'll need to know
you know what an array does what it is
if you don't understand already we're
actually going to be including an
additional line break which is going to
be regarded as a space after each one so
in fact my user IP at the moment is 1 2
7 or 1 however it's going to be stored
in the array as 1 2 7 or 10 or 1 with a
space so what we actually need to do is
we need to use this file ignore new
lines in order to load them in in type
values where the whitespace is trimmed
on either side to ensure that we have
this exact value and nothing else so
hopefully that makes sense if not you
can read up about the file function and
this here are at the PHP documentation
so now that we've created this that's
going to only run this block of code if
the file does not exist the IP address
does not exist inside this far that's
the essential working of this condition
now if the if the IP address doesn't
exist that's fine we can write the value
however we need to store the user's IP
address after it hasn't been found so it
hasn't been found
we're gonna increment the value then
we're going to store the IP inside of
the file so next time round
the increment doesn't happen and this
condition of other is to folks as
opposed to true at the moment because
there's nothing in there so you'll see
how it works when I run it so I'm gonna
say file put contents I'm using exactly
the same function as I'm as I've used
here but this time what I'm doing is I'm
inputting it into IP file name so we're
writing something to IP dot txt because
IP far name corresponds to this value
here what we're then inserting is the
user's IP and then we're going to
concatenate on with the . backslash n
which is a newline
so after say five or six are written
down there's going to be new line after
each one which is important and then
what we're gonna do is we're going to
specify file append and the reason for
this is because if we use file put
contents on its own as you saw with
counter dot txt it overwrites the
existing value but with file append it
will add to the file as opposed to
rewrite over it so we just we're just
basically appending to this file a list
of IPs of people that are visited
whereas the writing the counter txt
we're just overwriting it's going to
start off at 1 and then 2 then 3 then 4
however in IP dot txt we're gonna write
an IP here and then we're gonna write an
IP here and so on
otherwise if you didn't specify file
append it would actually just overwrite
and you'd only ever have one IP address
in there so now that we've done that we
can go ahead and actually test it out so
at the moment my IP dot txt file is
blank as is my counter dot txt file I'm
now going to come over to my browser and
I'm going to click refresh oh ok so ever
few errors here let's just pop back and
look at the code
okay so I seem to have spelt ignore
wrong that's obviously generated all of
these errors you can see that our files
have been updated however since I did
gain the error I'm just gonna go back
and I'm gonna try this again so let's
refresh no errors appeared you can see
how just because I spelt just because I
spelt ignore wrong we generated four
errors on the page so now I'm getting as
I'm coming into my text editor the IP
dot txt has been changed I'm going to
reload that and as as the countertop txt
so if we go over to view IP dot txt you
can see my IP address is now written in
this file as well as counter dot txt
being incremented to one so what happens
now if I reload the page again what's
going to happen is it's going to search
for the my IP inside of this file if my
IP is found in this file we're not going
to run any of this hence we're not going
to update anything at all both of these
text files will not be updated if
another user with a different IP decides
to visit the website that this code
happens to be on their IP address might
not be listed in so we will increment
counter and we will add a new IP address
to eiope dot txt let's go back to our
browser press refresh come back over to
our text editor and you can see that
nothing's been updated if we go to IP
dot txt we've got the same IP counter
txt we've still got this value of one so
you can see that just through this
simple check here and then adding in our
IP address and appending it to our IP
dot txt file we've actually created a
unique visitor counter</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>