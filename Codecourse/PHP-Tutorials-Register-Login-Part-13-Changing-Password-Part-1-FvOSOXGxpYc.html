<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>PHP Tutorials: Register &amp; Login (Part 13): Changing Password (Part 1) | Coder Coacher - Coaching Coders</title><meta content="PHP Tutorials: Register &amp; Login (Part 13): Changing Password (Part 1) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>PHP Tutorials: Register &amp; Login (Part 13): Changing Password (Part 1)</b></h2><h5 class="post__date">2012-05-13</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/FvOSOXGxpYc" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">okay so welcome back in this part we are
going to be creating the functionality
that allows the user to change their
password so the reason I've got the
register page open that we did earlier
in this series is because we're going to
take some aspects of this and apply it
to the change password page essentially
we're going to have is a form the user
is going to be able to enter their
current password for security just in
case they've left their account logged
on their new password and the new
password repeated we're going to process
that in more or less exactly the same
way as we've done on the register page
so we are checking if the data has been
posted we're setting the required fields
which will be all of them and then we're
going to you know check if they're empty
bla bla bla bla bla things like that and
then obviously if there's any errors
we're going to output them if the if
it's successful we're going to call a
change password function change the
user's password and redirect them to a
success page like we did just down here
so if it's set success you've been
registered successfully we'll just say
you know we've changed your password
everything like that
okay so we'll keep register dot PHP open
in case we need to refer back to it but
let's go ahead and create a new file and
just go ahead and click some PHP tags
save this as change password dot PHP in
our root directory so we're going to be
linking to this so over here this change
password link will go to change password
dot PHP we've just created it there's
nothing on there so we'll need to go
ahead and copy over a template so I'm
just going to go over to the index page
and copy this over and I'm just going to
say change
password and I'll get rid of that
paragraph there now before we do
anything else we need to take into
account the fact that users that aren't
logged in obviously there's no point in
them being able to access this page so
we need to protect this page against
users that aren't logged in so I'm going
to use the protect page function that we
created in the last part and let's go
ahead and check this out so let's go
ahead and click Change Password we've
got this page let's log out and just
check this there we go so perfect I'll
go ahead and log back in and let's start
working on this so the first thing we're
going to work on is the form obviously
we need to create a form the ability to
submit the data then we'll go through
all the necessary checks so let's go
ahead and start to build the form not
the from so the action is the current
page where you're going to be posting
the data to this page to have it checked
the method is going to be post we're
going to create an unordered list again
much like we did for the last for the
registration form so we three of these
and inside of here what we need well you
need the current password so I'm going
to say current password I'm just going
to place an Asterix before that line
break down to the field so input type
this is going to be now we can obviously
the type in text or password I'm going
to be choosing the password field in
fact I'm going to be choosing the text
field for now just so we can see what
we're entering into the forms for the
purpose of the tutorial but when it
comes to actually applying this to your
site you're going to want to change this
to password and I'll be doing that at
the end anyway hopefully I don't forget
so the type is path type is text sorry
and the name of this is just going to be
current underscore password let's go
down and do the same thing here and
let's just change this so we're just
copying and pasting to be a bit more
efficient in fact we'll just call this
password we won't call the field new
password just makes it longer and then
new password again and I'll just say
password underscore again okay so now we
have a field here at forum here sorry
current password new password and new
password again let's just go ahead and
pop a submit button in here and then
that'll be the end of it the input type
is submit the value is going to be
change password make sense okay so this
is our form at the moment like I said we
can see any data that we're entering
into here which is fine now let's go
ahead and submit this through and and
start to validate the fields so the
validation is probably the most
trickiest part the first thing you need
to do is make sure that you're
validating your passwords the same way
that you're validating your passwords on
your register dot PHP file your
registration page obviously the reason
being is that you know we've got here
that the the string length of the
password must be at least six so we have
to have at least six characters in the
password if then when you ask the user
to enter a new password you don't do
this you know your is pointless even
allowing them to do this in the first
place so if you want the user to change
the password you need to take into
account that you know you need to apply
the same rules here or here as you have
done here obviously it's bad it's
probably you know not great that we're
doing this twice and sort of duplicating
this functionality over we might have a
say global function that allows us to
check password strength and then return
whether it's okay or not and then you
know but you know we'll do it in this
way and then that's something to come
later I guess okay so we've got this now
what do we want to do well up here we
want to go ahead and start to check
everything but we need to want we need
to do it just here and so we're first of
all going to say if
empty post is equal to false so has the
data been posted let's just go ahead and
echo a out just so we know everything is
working click on there has been a code
so that's fine we know that the forms
submitting and the where we you know
we're checking the data now we're going
to define some required fields so we're
going to do exactly as we did here in
fact I'm just going to copy it and paste
it makes it a lot easier so required
fields equals array and we have an array
of required fields now which fields are
required here all of them so let's go
ahead and say current password passwords
and password again now you might be
thinking well if they're all required
why can't we just do one big check to
check that all the form fields are
required well you never know you might
later on want to add another field that
isn't required for example why are you
changing your password and the user
might be able to give optional text as
to why they're changing it you know
anything like that that's that's an
example but so we're doing this now so
we can later on makes it easy it makes
it easier for us so now we need to do
what we've done here and this for each
loop and we need to check whether you
know the form fields that we've
specified are required so again I'm just
going to be a bit lazy and paste this in
but let me just go over it again just in
case you you forgot you need a refresher
so for every item that we post ie
current password password and pass again
as key value now key is the right key so
or the the name of this so this key in
the first loop will be current password
in the second loop it will be password
and the value is the actual value that
the users entered into this text field
and if it's empty so I if they haven't
entered anything in the specific field
and it's in array if it's in the array
that's required then you know they
haven't entered one field then we break
because we you know the first instance
of not finding something we need to
throw an error so that's basically it
for that
let's go ahead and just check this out
so I'm going to go ahead and print our
errors and another reminder just
remember that inside of our core in it
to folder we've got this defined already
because we're using it on on you know
we're going to be using it on lots of
pages so we define up there so we don't
need to do it again again in each page
so print our errors that's just going to
print enter the array that we're storing
errors so if I click Change Password
fill smoke with an Asterix are required
for go ahead and type a a and I change
password no errors so we know that that
works now perfect so let's go ahead and
do the rest of our validation it's not
too too tricky
but let's go ahead and make a start so
we first of all now want to make sure
that the password in the password again
match okay we obviously want to check if
the actually yeah we'll probably do
whether the current password is correct
so let's go ahead and do that so if now
we need to check whether the current
password that the users entered matches
the current password that they're
actually using so where do we get this
data from well if you remember inside of
core and in it we called our user data
function and we passed through all of
the data that we wanted to grab from the
user and we allowed access to this and
we get access to this using user
underscore data this variable just here
and then we because it's an array that
we're storing we just choose their what
we want so how do we take advantage of
this and use it inside of here well in
fact let's go ahead and get rid of this
if statement in just echo user data
password now this will be the password
that's stored in the database so there
we go
we've got this being echoed out now this
is the md5 hash of the password I'm
using which is just password so we can
use this to check the user has you know
into the correct current password so
what we need to do is we need to encrypt
the password that they type in and
compare it to the encrypted password
in our database so if md5 of what we
encrypting or dollar underscore post
current password is equal to or sorry is
not equal to user data password so we're
encrypting the current password that the
users entered in the field and we're
comparing that to the encrypted password
so they're both being encrypted so
therefore we will get match if both of
the plain texts match up so if they do
match do something otherwise we need to
store an error here so errors equals
your current password is in correct
correct
there we go okay so otherwise we want to
do something else so I'm going to just
echo fine for example okay so let's go
ahead and refresh this now I'm going to
go ahead and into my current password
incorrectly which is I'm just going to
type Apple a new password I'm just going
to type anything because otherwise we'll
get an error returned so change
passwords fine it says here oh that's
wrong let's go ahead and check what's
going on here so if an d5 oh sorry is
equal to right okay let's start again if
it's equal to the current password then
that's fine otherwise if it's not equal
to we append an error to that right so
Apple a a change password your current
password is incorrect brilliant that's
what we wanted now my actual password is
just password so I'm going to go ahead
and I'm going to click Change Password
now with the correct current password in
and we've got no errors we just echo
fine out so we've done this first check
and we've gone long to make sure that
you know that's right that's fine
perfect now within this block here we
want to go ahead and do some further
checks so this will be that the two new
passwords match up correctly that the
two new passwords are both greater than
six characters blob up life things like
that so the first thing we want to do is
we want to make sure that they match and
we'll be doing that in the next part of
this short Change Password part of the
series simply because we've run over
time so let's go ahead and take a look
at that in the next part</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>