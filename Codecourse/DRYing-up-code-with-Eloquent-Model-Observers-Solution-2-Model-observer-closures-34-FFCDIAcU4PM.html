<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>DRYing up code with Eloquent Model Observers: Solution 2: Model observer closures (3/4) | Coder Coacher - Coaching Coders</title><meta content="DRYing up code with Eloquent Model Observers: Solution 2: Model observer closures (3/4) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>DRYing up code with Eloquent Model Observers: Solution 2: Model observer closures (3/4)</b></h2><h5 class="post__date">2017-02-07</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/FFCDIAcU4PM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">okay so we've established that this
probably isn't the best solutions i'm
going to go ahead and get rid of this
from the model we're not going to touch
the model at all in this case what we're
going to do is rather than do this here
once again we're going to set up an
observer for an action on a model or at
least an event on a model so if you
weren't aware that when you go ahead and
new up say a topic or use the create
method eloquent will actually find
events that we can listen to so just as
a really quick example if we come over
to providers and say app service
provider under the boot method we could
actually pull in this model and we can
go ahead and observe a particular event
on this model so we have things like
creating which is while the models being
creating we have created once it's been
created we have things like saved or
saving if you were kind of saving
something out updating updated all of
that kind of stuff now in our case when
we're creating a topic maybe we want to
do something to this topic and we know
that we do want to do that we want to go
and we want to add a slug in so in this
case what we have is a callback and in
the next part we're going to look at
setting up a class for these kind of
observers to tidy things up if you want
to do lots of different things rather
than bunting them all inside of this
provider now into here we get a topic so
from here if we just do a dye dump on
this topic we know that when we go and
create this we should see this in here
so let's go ahead and refresh and you
can see here we do in fact get that
topic and that means that what we can do
is we can kind of intervene in the
creation of this topic so all that means
is taking the topic that we receive in
here and doing something with the
property much better solution we've not
had to update our model we're just
creating a separate listener for this
event so now we need to do is go ahead
and say str slug because we have that
topic in there we can still grab the
title and that is pretty much it we're
done so while this is being created this
will happen and then when we go and save
it we will have that property in there
so we can get rid of that line there go
over to our page give this refresh
refresh the database and you can see
it's worked in exactly the same way
now this is a well and good but
sometimes if you are you know having a
lot of events here if you had lots of
models you are listening to things and
hon you can imagine this is going to get
pretty crazy so we're going to quickly
look at how we would create a separate
provider for this which would at least
be the first step in keeping this a
little bit tidier rather than putting
everything in our app service provider
because it's highly likely that you'll
have other things inside of here as well
so what we would do is if you're not
familiar with providers and making them
you would come over here to the command
line and use artisan to make a provider
and I would call this something like
eloquent event service provider and of
course you can choose any name you one
and if things did get super crazy you
could create a separate one for each
model I wouldn't really recommend doing
that but we'll take a look in the next
part how we create that class it will it
be a little bit cleaner anyway so now
that we have this we need to obviously
register this over in config app
alongside all about other providers so
that's go all the way down and just
wonder here let's go ahead and pull this
in so I'm going to duplicate this down
and give the name of that new service
provider so now we have a kind of
separate space to do what we've done
over here so I can take this and leave
this kind of a loan and go ahead and
place it in here instead and that means
that at least we've separated it away
from everything else now still though
we're going to end up in the situation
where we have lots of different events
for lots of different models so how do
we solve that well we're going to cover
that in the next part and do pretty much
exactly the same here but with a little
bit more flexibility and make this a
little bit tidier</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>