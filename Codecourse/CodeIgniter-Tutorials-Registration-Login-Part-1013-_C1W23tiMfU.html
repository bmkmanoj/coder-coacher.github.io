<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>CodeIgniter Tutorials: Registration &amp; Login (Part 10/13) | Coder Coacher - Coaching Coders</title><meta content="CodeIgniter Tutorials: Registration &amp; Login (Part 10/13) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>CodeIgniter Tutorials: Registration &amp; Login (Part 10/13)</b></h2><h5 class="post__date">2012-08-13</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/_C1W23tiMfU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hi guys my name is Steven and welcome to
video number 10 in this new video in
this new video series where I'm building
a login registration system using
CodeIgniter so what we'll be doing in
this video is I'm going to what we've
done so far is we've been able to
successfully validate our signup form so
now what we want to do is I can delete
this this is the email that we'll be
sending it to eventually but what
happens once the form validation has run
that'll be the main topic for this video
but there's a couple more things I want
to do first with the actual validation
like for one I want to I want to
describe this is unique function a
little bit better you can see right now
if I it checks whatever the email that I
entered in with the users table in the
email field in that now right now hello
at welcome comm should still be entered
from one RIA
from when we built our sign up version
or signup form or login form sorry so
now if I try and sign up with the same
email address that's already registered
you should get an error so that the
email field must contain a unique value
now this is great that means that it's
successfully checking and if we want to
check that we can actually go into our
users table and then okay so we will go
into browse our users table and you can
see here is checking the users table the
email field and right now we only have
one entry and that one entry just so
happens to be Hello at welcome comm so
therefore we can't sign up with it again
however this this message right here the
email field must contain a unique value
that doesn't make a lot of sense to the
end user so what we can do actually is
we could rename this the same way that
we renamed those call back up here the
call back message loop that was right
credentials yeah well I'm not worried
about it I'll just show you what I mean
we can set the the message the error
message for the is unique function or
rule by going this form underscore
validation set message and this takes
two parameters the first is the actual
function that we want to in this case
override the message for and then the
second part is the actual message so
that email address already exists okay
so now if I save this and run it and try
this again
password and password that email address
already exists because it had a message
for these unique function but we
overrode it by doing this
yeah so that's how the is unique
function works this the second thing I
want to do is just get rid of this you
shall not pass line if they don't pass
because you don't actually need that and
we also don't need this either because
we're about to because we're about to
write what actually happens once the
validation is successful and in short
essentially if there's a couple things
we want to do we want to generate a
random key and I'll explain why in a
second we want to send an email to the
user and that will actually have a link
to another to registration form contain
with the key appended on to it and
you'll see what I mean by that in a
second
and then we act and we actually want to
add them to the temp database
okay so let's do it well generate a
random key by I'm sure you're familiar
with this we go key equals md5 so we're
gonna encrypt whatever isn't inside this
or md5 hash it sorry and then
essentially all we need to do is our
function called you Nick
ID and that's actually so Jenna generate
a random ID number and then we're going
to md5 hash that so it uh it creates a
pretty I don't it's not a super high
security feature if this by far is not
the best way to do it but for the
purposes of this video tutorial it'll do
essentially it's just ensuring that
anyone who signs up won't have the same
unique key and there's obviously other
ways we could check that but we're not
going to in this video this is just
gonna be good enough the next thing we
want to do is auto load the or not auto
load just load the email library so over
this load library email and now we can
start actually fulfilling some of these
functions that the email library
requires when it's been called so we can
go we'll set the from so we'll set this
email from now this will take two
parameters the first one will be like me
at my website calm or whatever your
website is web and the second is your
actual name so I'll just put Steven the
next thing is the this email too I
believe
yeah so in this case we actually want to
send the email to them like so we can
actually grab that email the email
address that they specified in the form
which we've already actually validated
is a is a valid email address know this
input post email so it'll send it to
them
next we can actually we can do the
subject I'll just
this line and then we just specify a
string in here of the subject of the
email so in this case we confirm your
account perfect and lastly we want to do
the message so before actually send the
message I want to actually create a
message variable and fill it up so the
message is going to be an HTML message
and so which means the content of the of
the email will actually be HTML format
and I'm pretty sure that the email
library when it's loaded automatically
what it'll do is it'll configure it to
send the message as plain text so we
actually on this topic we need to
actually change the how the email
library is configured and we can do that
by passing an array as the second
parameter when we load the email library
with some configuration options so in
this case we just specify the mail type
we set that to HTML by default this is
set to text and you can find that on the
CodeIgniter user guide on their website
however we want this to be HTML so that
we can send a tags more specifically a
link containing this specific key that
we just created so we'll just give them
a nice little P tag message thank you
for signing up or something like that
closed the B tag message ID equals so
I'll just append or prepend this to
whatever I'm about about to type they'll
create another P tag a tag inside of
that a traffic I'll just close the a tag
because I always forget to close it
afterwards click here to confirm your
account
okay and now in here on a break open
with double quotes again and depend on
the base URL which is a function of the
URL helper that I auto floated at the
beginning of the series and then after
that after this double quote I want to
specify another the main controller and
then say we can call this function
register user or something like that
good gesture I'm just go user okay and
then lastly we want to actually pass the
key so this is gonna be a link back to
our website because this base URL will
actually be we're sending them a link
back to my website the main controller
the register function which were about
to write and we're gonna be passing in
this third print this third segment of
the URI as and it'll be the key
so just explaining what's actually going
to be going on here they'll get an email
containing a link right and they'll
click on the link that link will take us
back to our website to the register user
function and then it's going to receive
a parameter of this key then we can
actually grab that grab that key and
compare it to the temp users table on
the database and then if if we can find
it then we'll actually take them from
that temp users will grab all their
information out of there and we'll put
it into the permanent users and then
once they're in the permanent users then
we'll actually remove all their old data
from the temp users database so um I
think that's it for the message we can
actually go ahead and send the message
now this email message and then we'll
just pass in the message variable that
we just created perfect okay now we can
try and send the email
so we'll go this you know send and why
don't we actually check and we'll say if
if email sends an echo the email has
been sent
else failed okay let's try it out
so just refresh this and we'll start
from scratch
we'll say PHP login Tut at gmail.com
password is password and we'll click
sign up the email has been sent
okay so I'm already logged in over here
and you can see we've got our email
confirm your account thank you for
signing up click here to confirm your
account so I'll click click it and there
we have we're actually going to us to
the website main register user and then
this unique validation key that was
randomly generated so every single user
that tries that signs up through our
website will have it a different
validation key and that's the point of
this so that we can actually grab this
key from like in the register user
function that we're about to create and
we can compare it to the temp user's
database so I think I went a little bit
over time in this video I'm going to
continue by adding as well as sending
them an email I want to add them to the
temp users database so we'll do that in
the next video
thanks for watching</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>