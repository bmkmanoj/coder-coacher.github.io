<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>PHP Tutorials: Register &amp; Login (Part 5): User Login (Part 1) | Coder Coacher - Coaching Coders</title><meta content="PHP Tutorials: Register &amp; Login (Part 5): User Login (Part 1) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>PHP Tutorials: Register &amp; Login (Part 5): User Login (Part 1)</b></h2><h5 class="post__date">2012-05-11</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/ueruxlD0Smo" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">okay so this is the part of the tutorial
that gets a lot more interesting we're
actually going to go ahead and allow our
users that have registered to login now
obviously we haven't actually registered
any users we just have this users table
that we place this data into which was
the username the password these are
obviously the two important fields in
this case and some other data that we're
going to be looking at later this active
field also relates to logging in because
if a user has not activated their
account which we'll look at later by
email then they won't be allowed to log
in so we're going to perform a check as
the user logs in to see if this value is
zero and if it's zero we're going to let
them log in if it's one we'll go ahead
and let them log in so this is extremely
simple and we're going to be using
functions that we're going to place
inside about users dot PHP functions
file that we created which is this one
here remember that's within our
functions folder and it's called
or included within it dot PHP which
subsequently is included at the top of
our pages here so we're obviously
dealing with a widget I've already
discussed that we're going to have our
login form over here so the first thing
we're going to do is build the
aesthetics so we'll build the form that
that the users can you know fill in and
click Submit and go somewhere so let's
go ahead and do that now I'm going to go
ahead and open includes widgets I'm
gonna open this login widget here so
what this is is it's a widget that goes
on the side and eventually we're going
to have some kind of logic to say if the
users not logged in show this widget
which is going to be the login form
otherwise show the greeting so let's go
ahead and just modify this I'm going to
change the header slightly I'm going to
change this to login slash register and
obviously this can be anything anything
one now within here we need a form so
let's go ahead and build the basis for
our form that's the action
and the method and we'll end the form
there so we've now got this form the
action we're going to post this data to
login dot PHP and the method is going to
be post data so that obviously there's
differences between posting get dates I
won't go into that just now
if you haven't you know looked up post
and get data already it's a good idea
that you do so okay so now I'm going to
create an unordered list too to display
or structure the D form regardless of
whether that's your preferred method I'm
going to be doing so so I've created an
unordered list and I'm going to give
this an ID of login oops
I've login and you'll notice that if we
open up our style sheet which you might
have downloaded you might be using your
own styles let's go all the way down and
find login there so we've got login Li
link we've got a margin top of five
pixels that's just going to space that
out slightly and also with or let's see
our widget alright this is just going to
display this is just going to display
them top down so you'll see that we've
got um we've got general styles for you
else here and everything like that
but anyway you and obviously we've got
out our resets at the tops we've got um
our padding six is zero
our margins are list-style:none so
essentially we're creating an unordered
list which would by default have bullet
points but we're not actually showing
them so I'll just demonstrate this
actually just by creating the list items
and how many this items were going to
have well we're going to have four which
might seem strange at first but I'll go
ahead and explain what these are for and
I just realized I could have duplicated
these but nevermind my text editor
allows me to duplicate lines okay so and
the first one is going to be for the
username field and the label as well
although we're just going to write this
as text and have a line break the next
one is password and then we've got the
submit button
we've got a link to allow the user to
click through to register we've already
created the registration page but
there's there's not much on it so user
name I'm just going to pull this down
and indent so it looks a bit nicer and
I'm going to do a line break and I'm
going to create an input field the type
is going to be text the name is going to
be user name and that's all I'm doing so
within the second one we have password
and we're going to do exactly the same
as here but we're going to have the type
as password so we have our browser cover
up the characters as we type we no need
a sign-in button so a submit button
sorry so we're going to have a input
with the type of submit and we'll give
this a value as well so I'm going to say
login okay so let's go ahead and refresh
and you see we've got now growl our form
it's is looking okay we can enter data
and we can click the log in which goes
through to login dot PHP at the moment
that's not found because we haven't
created that yet but that's going to be
the next stage so within here we need to
create this link to ask the user to
register or you know give the option to
to register so that's going to link
through to register dot PHP so when i
refresh and i click this we go through
to the register page and notice
obviously this still stays the same
because the use of our includes okay so
we've actually finished this form now so
I can go ahead and close that we don't
need that up anymore and the files that
I'm going to be dealing with now if I
I'm going to leave in it up here it
should be open this we're going to deal
with that at some point we don't really
need index dot PHP open it's not really
relevant we're going to be previewing in
our browser but we're going to be
working on the login dot PHP file which
we haven't created yet so let's go ahead
and create a file login dot PHP this is
in the root directory along without
normal files and this is the file that
processes the username and the password
and goes off and cause different
functions and says does this user exist
or you know has this login been
successful or is this user at
so is their account active yet all them
kinds of things this this file is going
to deal with so the one thing that we
need to do is we need to think about
error handling as well how are we going
to handle the errors that that we passed
through PHP and you know say I don't
enter anything in the forum and I just
click Submit I want to be able to say to
the user you need to enter a username
and password and we do this I'm going to
create a variable at the top of init dot
PHP and this is just going to be a sort
of global it's not going to be a global
variable but it's going to be a variable
that's going to be accessed by every
page and it's going to be in a array
called errors and this might seem odd at
first but it's just going to be my
method of checking through errors and
logging any errors we find so you'll
know why I've done this in a moment when
we get down to the nitty-gritty in login
dot PHP ok so we obviously need to
access specific functionality within
login dot PHP we need to access it
within our core directory our users
functions now we're obviously not going
to include our users functions file
directly in here but we are going to go
ahead and we're going to include core
oops
core forward slash init the PHP so
including our core files so now when I
go ahead and click login we go through
to this page nothing happens cuz we
there's no content on here ok so what do
we need to do now well we need to go
ahead and process this this this login
so let's just let's just go over to our
our login widget just so we can see the
names of the fields so we've got I
didn't change that one good thing I open
that up again so we've got a user name
with the name of username this is the
name that we're going to use to access
it within PHP and the same with password
as well so within login dot PHP what we
need to do well when we click we go
through we need to say if
something so we say if empty dollar
underscore post is equal to false I'm
using the triples triple equals operator
which is essentially checking for type
as well you don't need to do a triple
equals but I prefer to we're now going
to define two variables which are
username and that's going to equal
something here and password and this is
going to equal something here and the
two things that they equal are the
posted values so dollar underscore post
username and here dollar underscore post
password so let's just go ahead and test
this out I'm going to go and echo
username and then I'll just echo it I'll
pop a space on there and I'll do
password so let's go back to our page
and I'm going to type in Alex and
password login and you see we've got
Alex and then password or password okay
so we know that that's now transferring
the data that we type in this form and
we're able to pick it up within this
file obviously we're on echo this data
out to the user we want to start
checking things the first thing I'm
going to do is I'm going to check
whether the username or the password is
empty ie if they haven't typed anything
in either of the field because we
require both fields so I'm going to say
if and inside of here I'm going to say
empty so we're checking if empty oh if
the username is empty or empty password
we can always use a comparison here we
can say equals equals equals true
you know it's entirely preference it
doesn't really matter okay so what
happens if the username and password is
true well we need to login error somehow
so I'm going to append a value or append
an element onto this errors array that I
created up here okay so if you unsure
how arrays work you may be coming from
another language in which case you
probably will do if you've looked at
arrays in PHP they're relatively
straightforward so we would just say
errors and then these two brackets and
we'd basically
now append on this value here so if the
username or password is empty the error
will now contain this value here but we
don't want it to just say value we
wanted to display the error so you need
to enter a username and password that's
relatively straightforward now we're not
actually going to display any data right
here because we need to create some kind
of function to output our errors so all
this is actually doing is it's storing
these line after line of errors within
this errors array and the reason we do
this is because we may have four or five
errors or you know two or three errors
or ten or fifteen errors so we want to
display them out in an order to the user
so that's not it we need to say else if
something so if the username or password
isn't it is there it does exist we want
to go ahead and check if the user exists
because if the user doesn't exist
there's no point even bothering to go
ahead and try and lock them in so we're
going to use the user exists' function
which we need to create ourselves so
it's not a built-in function now if this
equals false then we need to login error
okay
but we also need to pass a parameter in
here so I'm sort of jumping the gun a
bit I'm passing things in when I haven't
even created a function yet but it's a
relatively straightforward function
it'll just it will just count in our
database if our user exists so we'll
create a query in a moment and we'll all
sort of display you know feed back some
information here so we're going to pass
through the username and that's
basically going to check whether this
user exists or not so if the user
doesn't exist we need to again append an
element onto this errors array and I'm
just going to say we can't escape that
character find that username
let's just say have you registered okay
so now we're at the point where we
really we commonly test the page because
this function here does not exist so we
need to jump over to our users dot PHP
violence and create this function so
let's go ahead and outline the function
again if you haven't dealt with
functions before it's a good idea that
you do so so the function is going to be
called user exists and we need to define
what we want to pass through here and
that's the user name so we can just go
ahead and say user name now within this
function we need to return true or false
based on whether the user does exist or
not so we need to create a query and
that's going to be equal to the MySQL
query function which is going to send a
query string to our MySQL database and
return some data so in this case I'm
going to say select count so I'm
counting a specific field now we're
selecting from the users table let's
just jump back over to our our database
table here and we're counting the user
ID so we're just picking the index to
count really user ID and we're counting
from users so accounting from the table
users here remember these are back ticks
but when we use string data we use
single quotes so you'll see in a minute
how this changes slightly so selecting
count basically the count from users
where the username is equal to single
quotes not back ticks and then in here
we just replace the variable so use name
okay so we've passed through username
and we have pet you basically injected
this into the string now there is one
problem here and this is security now
I'm not going to go too much into SQL
injection but as this stands it's
relatively insecure because this value
here can be passed through to make it
seem as if the queries well we can
essentially modify the structure of the
query and again we have videos on that
so so you know that's good thing to
watch but I'm gonna
create a general function to sanitize
data and this will this will just you
know this will just escape any
characters that aren't meant to be
passed to a query string so this
function that we're going to create is
going to sanitize the data I'm going to
leave this video part as it is for now
and we'll go ahead and do this in the
second part of this same video chunk so
I'll join you in that part
join me in that part for for doing that</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>