<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>jQuery Load More Plugin: The Plugin (Part 4/4) | Coder Coacher - Coaching Coders</title><meta content="jQuery Load More Plugin: The Plugin (Part 4/4) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>jQuery Load More Plugin: The Plugin (Part 4/4)</b></h2><h5 class="post__date">2014-04-03</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/O1h2Qleaevc" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">okay so we're now actually gonna start
building the plugin so at the fun part
where we actually get to make everything
that we've done so far work so we're
very very nearly there this isn't gonna
be very complicated at all so let's go
ahead and define a jQuery plugin so what
we do is we to do two parentheses here
we create a function within it and then
we append on passing in jQuery so this
will execute automatically we pass a
dollar in there as well which is the
notation for jQuery basically that's
what we use to define jQuery so in here
let's just go ahead and console.log
something just so we can see that this
is working remember we're loading this
in on our main page so let's go ahead
and refresh our browser and you can see
here that we've got hello now we've got
this area down here because it says that
object which is the articles container
that we selected earlier has no method
load more don't worry about that because
we haven't defined our plug-in within
this within this function here so we'll
go ahead and do that now and then we'll
do another console just to check along
the way that everything's working first
of all though because I've used JSL in
to validate this I'm gonna go ahead and
use strict
so let's go ahead and actually define
the plugin now so he do the dollar which
is jQuery dot F n which is function and
this is the load more so this is the
name of our plugin load more this is
going to be a function and in here we'll
go ahead and console log you just called
a plugin so now that we've got this when
we refresh it says you just called a
plug-in so that is now this part here
working but we've got these options that
we're passing into this function or this
method so we need a place to actually go
ahead and read these so we type options
in here and what we're going to do is
we're going to go ahead and create a
generic or at sort of a variable that's
going to represent this so it's equals
this so basically what this is going to
do is every time we want to refer to the
object itself that's being selected with
the plugin ie this articles container
because we want access to everything in
here including this load more button
then we're gonna go ahead and refer to
itself it's just an easy way to refer to
that again again against we define it at
the top here and what we also need to do
is grab the settings and we use the
extend method with jQuery in jQuery to
do this so let's go ahead and create a
settings variable and we use jQuery
extend oops extend and inside of here we
go ahead and pass in the options that we
expect and then the actual options that
have been passed through as an object so
in here what we're gonna do is we're
gonna say source the default source is
going to be nothing and the default step
is going to be two so let's go ahead and
space this out you'll notice some comma
separating these variables down and down
and down and down that's because we
don't want to just keep using far over
and over again so what we want to do now
is go ahead and create a variable that
represents how many values have been
stepped I'm just gonna set this to one
by default and we also want to go ahead
and pull in the template of each of the
items or the item that we've defined
here which is this so we want this to
right
the template that we want to duplicate
over and over and over again so in this
case I'm gonna say a item equals self
remember her phone to self dot find this
we'll just find something by a selector
in this case it's datum so when you're
using this plugin your mark up needs to
have an element which has a class of
item but this isn't a problem because it
allows us to be generic we can reuse
this plug-in over and over again with
lots of different containers so what
we're now going to do is just to find a
few methods so the first one is going to
be finished this is what's gonna happen
when there's no more results left so
when we get to the last 15 or we may get
to the 15th article we want to hide the
item items load button which remember we
gave a class of items load so we can
target that so we also want to go ahead
and create a method called append so
what this is going to do is it's going
to actually loop through and append more
of these items on to or inside of the
items container so again it's really
important that you have this generic
class called items and we also have a
load method so this is going to perform
the Ajax request to the file so that's
the last method so I'm going to end up
with a semicolon so we're gonna start
with load because this is probably the
most not the most important because they
all all work together as equally as
important but what this is going to do
is it's gonna Ajax with the URL that
we've given which is the settings dot
source so basically the settings dot
source and then it's going to unsuccess
basically just loop through all of the
items that have been found in the JSON
so in here this case it will loop twice
and then it will use the template that
we created here and duplicate that for
how many times it's found so don't worry
a little bit lost
it's maybe quite confusing to get your
head around at first but once it all
starts coming together it will become a
lot easier so what I actually want to do
is go ahead and check the length of the
source that's been provided because if
the saw hasn't been provided we don't
want to do anything at all so let's
create a quick if statement down here
remember this is still within the load
more function but it's not actually part
of these variables with declaring we've
got a separate if statement down here so
let's go ahead and check settings dot
source and we'll use the length property
as part of that to determine whether
this has been provided now if it hasn't
been provided we want to go ahead and
console.log just to silently warn the
person that's trying to use this plugin
that the source is required so in this
case I'm going to say its source
required for load more so otherwise
we'll say okay so let's go ahead and
refresh and check this and it says ok if
we go ahead and happen to forget to
include this that would return a length
of 0 so in this case it says source
required for load more so we're
providing a little bit of error handling
there just in case it's not used
properly all that property's not
provided because of course a user could
just omit this all together so what
we're gonna do now is instead of console
logging okay which isn't useful at all
what do we want to do well we want to go
ahead and call the load method or the
load function that we created up here
which you haven't done anything with at
the moment now we want to load this well
it's probably better to define the
parameters that this takes first of all
and that is a start and the count now we
already know what these are the start is
where we wanted to start an account is
how many we want to display now the
count it's always going to be the step
but when we initially load this plug-in
we want the start to be 1 and the count
to be the step now we know that the step
has been provided in the settings here
so we can just do settings dot step so
now in the load method we can go ahead
and we can a
Jax to the file parting the data start
and count which will then be represented
here and here so it will load in what we
initially request if the step had been
provided by the user when they use the
plug-in as a 5 this would be sent
through to here as 5 this would replace
this default value we would go down this
would be 5 and this would be passed to
here and when we Ajax we subsequently
would change the count to 5 so it all
sort of flows into pulling out what we
need from this so the load method let's
go ahead and use the Ajax method in
jQuery and this is going to provide a
URL we need to provide a URL which is
going to be setting stop source so
remember this is the source that the
users provided up here what we also need
to do is we don't need to but I'm gonna
define that I want this to be a get
request and I'm also gonna define the
data type I expect back although jQuery
does handle this for you I'm gonna
explicitly define it just in case
another developer coming over to this
code sees it and they know that they're
expecting a JSON response so I'm also
gonna pass through that some data to
this JSON file so in this case it's
going to be start and this will be a
certain number and count and this will
be a certain number so where do we get
start and count from well we get them
from here and here so we can just say
start is start and count its count so
without going any further let's just
take a look at how this works just in
case there's any confusion let's go
ahead and refresh here now under the
network tab if you refresh let's just
pull this open a little bit you can see
that we've actually Ajax to articles PHP
with a query string start one and count
two so if we now go ahead and change
this step to five that will be passed
through to the Ajax request and the data
sent to the articles dot PHP file will
change to five so this if we just open
this here in a preview we can see that
we're getting this response from our
server we know that this is hitting this
successfully and changing the count so
we know that this is a work
so we can go ahead and implement a
success callback this is what's going to
happen when everything works and the
files been hit there were no errors and
we're not gonna implement an error you
can do if you want it probably more
sensible to implement some kind of error
callback but we'll leave it out for now
so the success callback will have a data
property which contains all of the data
that's been returned from that file we
know this is JSON so we can use this as
you know we can loop through this we can
do it one so let's go ahead and create a
items variable and this is going to be
data dot items now jQuery has already
passed this JSON for us we don't need to
use the the JSON object in the pars
method to parse this it's already passed
for us so we can we can just access
items if you're thinking where does
items come from or remember that's from
here so we're accessing data which
represents this whole thing here and
we're accessing items here so now if we
just do a console log on items you'll
see that that gives us this object with
this is a description for article one
this is a description for article two
three four and so on I'm actually just
going to change this back to a step of
two and you'll notice that that reflects
there's only two objects so now that
we've got our objects back from our JSON
file we can go ahead and we can actually
iterate through them so in this case I
first of all want to check if the items
have any well on and check the link for
property so I want to say if items dot
length then what I want to do well I
want to go ahead and loop through each
one so I'm going to use jQuery to parse
this to make it to basically allow us to
use the each method that jQuery provides
for us so basically for every loop we
have a callback function which gives us
an index which is the position to 0 1 2
3 4 so on and the value which is the
actual value so within this every time
we loop what do we want to do well we
want to go ahead and we want to append
the value and we remember earlier we
created this append here so by appending
what we're doing is for every record
whether that's initial or when we click
load more we want to loop through the
new items and create a new copy of that
template we created here and then append
it within this item section so let's go
ahead and call the append method that we
created and pass in the value to
remember the value for each loop will be
this and this so we're parting this data
through to the append method which will
append and what will clear up the
appended thing later so what we're gonna
now do is change the step count so the
step count is how many times we have
clicked load more or initially loaded it
in so I'm gonna say stepped equals
stepped plus count so this will just
basically append on how many we've added
on to so outside of this if statement we
basically want to do a check to see
whether this is the last record or not
so we create an if statement to say if
beta dot last is true so remember inside
of data which is this whole thing here
this is the last property if it's true
we want to go ahead and call the
finished method that we created up here
and that will hide the let's just
comment this hide the load more button
append will append on we'll look at that
in just a moment so let's go ahead and
just check that this will work so
instead of appending let's go ahead and
just console.log something so inhale
let's console.log append oops append so
there we are we have append output twice
if I change the step two three
we'll have this up at three times so now
what we need to do is build the
functionality to take this insert the
title where it should be
insert the ID where it should be insert
the description where it should be and
basically do that for each of the items
pending this - this items wrapper here
so let's go ahead and fill this in now
so to append what do we want to do well
the first thing we want to do is remove
the initial item because we you don't
need it so let's go ahead and create a
couple of variables that we're going to
need that first one is name and the
second one is part and we'll see where
these are used in just a moment it's a
name and part so we're gonna say item
remove now why do we do this well
remember we picked up the item here so
self dot find item this is basically the
template that we've been speaking about
we want to remove the initial item that
doesn't remove this because we've still
got a copy of the item here so we can go
ahead and use that but if we look at
what's happened now that just removes
that initial item see it just disappears
so what we then want to do is we want to
say for name in value now this might
confuse you because where's value coming
from well remember we passed through
when we append the value here let's go
ahead and add that as a parameter so for
name in value that's why we declare this
variable name up here so we didn't have
to do this
so for naming value will basically loop
through each of these items what we then
want to do is check if the value has its
own property name and this will just
this is just a bit of sort of tidying up
really and making sure that we don't you
know mess things up here so we're gonna
say if value has own property name so
we're checking if for each one it has
its own property and then we want to go
ahead and create the part so or
basically find the part that we want to
insert into so let's just go ahead and
just console.log name here okay so now
what you can see is for in this
hopefully should clear things up for for
basically for two records we loop
through an ID a title and a description
and then an ID a title and description
because what we want to do is we want to
insert the ID into here insert the title
into here in the description into here
for two records you probably already
guessed if I change this to five we're
gonna get five lots of these so we're on
the right track to going ahead and
actually inserting these based on the
property name which is why we did the
has own property check the property name
of the values that we returned here ID
title in description so what we want to
do is create or assign a selector to
this part variable so we already
declared this up here we declare the top
of the function so what we're now gonna
do is we're gonna set item got find
we've already seen the fine method but
this time what we're gonna do is inside
of here we're going to go ahead and use
a selector to find the data field where
it equals the name because we've got ID
title in the description so in here
we're gonna do a Asterix search for any
item that has a data field equaling
something in double quotes so in here
what we want to go ahead and do is just
concatenate on the name so if we go
ahead and do a console.log extremely
useful for just debugging as we go or
checking as we go when we refresh you
can see here that for each one we've now
loaded in two spans which are this span
here in the span here and a paragraph so
we can actually see these elements here
so now that we've got these elements as
jquery's objects we've selected them we
can go ahead and simply just apply the
text value to them so the value of the
JSON let me get back so we first of all
want to just do if part length just to
check that the items have actually been
found and then do part dot text and text
remember puts text inside so in this
case I'll just write hello for now and
we'll look at how we do this property in
a minute and that will go ahead and do
that we've what we've not done is gone
ahead and cloned it yet so everything
works here but what do we want to do
well part dot txt we need to get the
value which is remember the value that
we pass in and then we want to find the
value at the property name that we're
currently at so again we could do a
console log on this but let's go ahead
and just clone the items just so we can
see this working so what we want to do
is down here outside of all of this we
want to go ahead and say item dot clone
so we're cloning this and then what we
want to do is append it to where do we
want to pend it well we want to do a
search for the items so we could just
store this up here I suppose so we could
just say items equals self dot find
items so that's the items here which
represents the container let's just go
to index dot HTML container here then
when we append to it would append it
here so it doesn't append it after the
actual container it does it within it so
now that we've done that let's go ahead
and do append two items and let's go
ahead and check out what this does there
we go so we've got article one with the
article description they've all been
placed in the right place load more
button doesn't work at the moment
however you'll be very pleased to know
that the load more button doesn't
actually require much more code all we
need to do is create a selector which
allows us to go ahead and not select an
event handler which allows us to go
ahead and you know unclick load in a
certain value so a stepped value if you
like so let's go ahead and add this
event handle it in here so we're gonna
say self
find so what do we want to find to
attach of it and it vent handler - well
we want to attach items load then we
want to do an on effort and on a click
we want to run a callback here so well
this what this going to do is actually
load we're going to use the load method
again but this time what do we put here
in here well because we already are
incrementing the stepped value we now
know that the counts this the reason we
set this as one is because it's a zero
indexed and the count will always be
well let's just test this out so when I
go ahead and refresh now we get three
here so we know that we want to start at
three so it's always going to be one
ahead remember when we looked at here we
wanted to go ahead and start at three
and we get the next two here so we know
that this stepped value can be used
because we increment every time we load
more results in so if we go ahead and
use step there now what do we want to do
in terms of the step well we know that's
in settings death so it's exactly the
same as we call here and we'll do a
return false here just so we don't flip
up to the top of the page so when we
refresh load more simply loads more
items in it really is that simple and
the reason it's that simple is because
we've created reusable functionality
within our jQuery plugin now the only
thing we've got left to do here now is
when we load more up to 15 its load more
button stays so when I click it nothing
happens that's a bit annoying for users
so let's just go ahead and finish this
up by looking at what we created earlier
this if statement so if data dot last
equals true we know that when we refresh
and let's just keep an eye on our
network tab load more load more you can
see each of these loading in with the
with a new start value so I'm going to
scroll down and click load more load
more load more keep doing that till 15
right - now we've loaded in the last
value
here so start it's 15 count is 2 let's
go ahead and click on this and look at
the response so we can see here that
last is true whereas the one just before
that last was false so for this we now
know that this is being cooled and we
can test that by coming up here and
doing a console log the last ones or the
last one so refresh let's go ahead and
load more in and keep doing this till we
get to 15 now we have the last one
locked in our console so instead of
doing that which isn't much use what do
we want to do well it's obvious we want
to go ahead and hide the load more
button that's the only thing we want to
do is just purely to not annoy people
and just make this work a little bit
better so we do self dot find dot items
load remember that's the button that we
created and then we remove it that's it
so let's go ahead and test this out in
fact I'll change the step value just so
we are getting a little bit of a
different take on things so we're now
loading in 3 when I click load more
we're loading in another 3 load more
another 3 load more another 3 and when I
hit it this time 12 13 14 15 that will
be the last amount to be loaded in so
hit load more and the button disappears
because that was the last amount to be
loaded in so we have created a back-end
that outputs JSON we've created a jQuery
plug-in that can be reused on any other
container so we could even look at an
example of reusing this on another
container if we copy this paste it and
change this to articles 2 or something
we could go ahead and just say copy this
plug-in paste articles - and while the
step is 5 so this is completely
independent now if we just close this
off we can load more on this which will
load another 3
and on this we could load more which
will load another five to ten and again
to 15 so let's scroll down so we can use
this on different containers with
different data sources so this is a
completely reusable won't interfere with
anything else on the page and there we
go that's it
we've built a load more plugin with
jQuery</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>