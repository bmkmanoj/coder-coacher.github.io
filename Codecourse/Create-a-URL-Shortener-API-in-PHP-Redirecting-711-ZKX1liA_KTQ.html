<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Create a URL Shortener API in PHP: Redirecting (7/11) | Coder Coacher - Coaching Coders</title><meta content="Create a URL Shortener API in PHP: Redirecting (7/11) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Create a URL Shortener API in PHP: Redirecting (7/11)</b></h2><h5 class="post__date">2015-06-08</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/ZKX1liA_KTQ" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">alright so to redirect user when they
pass in a short code into your URL to
the full URL we need to be able to pass
this through to the URL which we've
already achieved so we can just pass
that in like that then what we need to
do is read this within this route here
we have the code just here remember
earlier we did echo code so you can see
that here we need to look up this code
in our database if it exists within a
record here we can redirect the user to
this URL it's pretty much as simple as
that the harder parts actually generate
the code but even that's not that
difficult so what is the first thing we
are going to look for within this route
well we need to look it up in our
database so remember we use link because
we have a model attached to eloquent we
already saw earlier how that works we're
going to say we're code equals code and
we're going to grab the first record
there this isn't going to work remember
because we need to import our namespace
and that's under shorty models link so
let's VAR dump link and see what we get
when we pass this code in we've already
seen something similar to this what
happens if we pass a load of rubbish in
well we get null so what we now can do
is we can check if link is not null so
if we say or if it is null so if we say
if not links if this is false see we can
say app not found so that gives a 404
otherwise we can say app
response.redirect remember this is all
coming from apps and this is slim
functionality link and then we use this
to access the value the property URL
which is essentially just the column in
the database so let's before we do that
just kill the page there and dump that
URL
so you can see how this works so here I
hit enter we get the URL back if I type
load of rubbish in we get a 404 not
found error page so that is it for
getting our code looking it up in the
database and redirecting the user off
now we're going to move on to the next
part we're going to be allowing the user
to generate URLs via an API</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>