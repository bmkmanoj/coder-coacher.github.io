<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Create a URL Shortener API in PHP: Setting Up (3/11) | Coder Coacher - Coaching Coders</title><meta content="Create a URL Shortener API in PHP: Setting Up (3/11) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Create a URL Shortener API in PHP: Setting Up (3/11)</b></h2><h5 class="post__date">2015-06-08</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/ALsfcKaKIds" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">let's now set up our slim app and look
at an example of creating a root just so
we know that everything is working
properly so to structure our application
in the best way we can we're gonna
create a new folder just within this
shorty directory called app and this is
where all of our app files are going to
live now the users aren't going to be
browsing to this folder users are going
to be browsing to a public folder and
that means that if you do decide to add
styles on your main page for example you
can go ahead and add just CSS in here
your JavaScript in here and inside of
this public file folder we're gonna have
an index dot PHP file that is the file
that all of your roots are going to go
through so let's head over to here and
refresh and if we click on public this
is where our our sort of domain would be
so anything after this would be after
our domain so I mean our server to point
to this as our root web directory so
inside of index dot PHP then we're not
going to do anything just yet we're
gonna set up our app now so inside of
app we want to create a new file and
essentially this is just going to be a
start file which is going to bootstrap
our application and do anything that we
need and because users are going through
index dot PHP we we need to require this
in so let's go back a directory and
requiring app start of PHP so we'll see
why this makes sense in just a moment
hopefully it'll be clear but let's now
work on this start file to get slim up
and running so what we need to do then
is when we install dependencies with
compose so we don't have to include all
of these files in manually for each of
these we have an autoloader just here
which will load everything in for us so
all we need to include is vendor
autoload and that will give us access to
slim and our database component so we're
going to require in going back a
directory into vendor and we're going to
require autoload dot PHP and we're done
so now we want to define our app so our
app is going to be a new slim instance
now slim is namespaced under slim so we
can either say new slim slim like that
that's perfectly acceptable but I'd
prefer to import this at the top my file
and all we need to do is say use slim
slim and that's it otherwise you'll see
an error here so now what we want to do
is set our ace URL for our project this
is going to be useful later on when we
need to give back to the user the full
URL to their shortened URL so we're
gonna say app config and inside of here
we pass an array in and for each of
these keys we can basically choose what
we want or we can override existing slim
configuration but I'm gonna create a new
one called base URL and this is just
going to be the URL to my public
directory so I'm going to copy this and
I'm going to paste that into there so
we've pretty much set up our application
now but inside of index dot PHP we're
not running our app so we need to do is
say app run and that's everything that
we need to put inside of index dot PHP
because we're going to be working with
roots to break our application up into
small manageable pieces we don't need to
create a new file necessarily every time
we want a user to access something so
we're not going to be creating anything
else within public in terms of PHP files
I've just noticed this let's just tidy
this base URL up by removing the
trailing forward slash now what we're
going to do is we're going to hit our
public directory again and see what
happens and this is absolutely normal
because we don't have a root set up for
our sort of home root if you like so
let's quickly test out how this works
and we're going to be creating these in
other files a bit later on to make
things tidy but this is how we create a
root and this is just a scent
essentially a pathway into a specific
piece of functionality within your
application so we're gonna say app yet
we can have things like app post put up
delete but in this case it's just a get
request to forward slash which is
the home page that we land on and then
we're going to create a function in here
this is a callback which is going to run
any code within this when we hit that
URL in our browser so now I can just
echo home for example when i refresh you
see home here so let's quickly look at a
more advanced route so something like
generate which we're eventually going to
be building to generate URLs this is
going to be our API call so if I just
change this text here we'll notice that
when i refresh this isn't going to work
if we just go to generate you see we get
not found this is a standard server
error that the generate directory was
not found on this server now this surely
should work our problem here is we don't
have an HT access file to route any
requests through to our application so
this is all in the slim documentation so
I'm just going to paste over the HT
access code that I'm going to be using
but you're going to want to create an HT
access file like so save that and you're
going to want to pull over the following
HT access configuration so all this is
doing is sending requests through to
index.php and because we're sending
requests through to here we've included
start this can be picked up by our app
so this means that this will now work if
we go and refresh we see generate so
that is our app set up I'm gonna get rid
of this here because I'm going to be
creating this a bit later but
essentially what we've done is created a
very simple slim app we've not really
done anything yet but we're now ready to
move on to the next part where we're
going to be looking at setting up our
database ready to create our models
which will then be able to read that
data</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>