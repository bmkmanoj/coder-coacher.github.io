<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Powerful And Easy Configuration with PHP | Coder Coacher - Coaching Coders</title><meta content="Powerful And Easy Configuration with PHP - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Powerful And Easy Configuration with PHP</b></h2><h5 class="post__date">2015-04-09</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/qyKt4NF_82g" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">it can get really tricky to deal with
configuration within your project
particularly if your project starts to
grow and you end up with more and more
configuration options and you just don't
know what to do with them so in this
video we're going to look at building a
configuration class which allows us to
read configuration from a nicely
formatted file in this case it's
returning an array of different
configuration options for our project
and we're gonna look at a really easy
way that we can access these so before
we get started we'll actually look at
how this works so I have a file here
called config dot PHP this is a class
and we're gonna load this in and we're
gonna look at how we can actually grab
one of these options nested in this
multi-dimensional array and we can work
with as many nests as we want here so
it's entirely flexible so we'll start
just by requiring in app config dot PHP
this class is namespaced under project
helpers you don't have to namespace this
so you can skip that part if you aren't
using namespacing in your application
but let's go ahead and just have a look
at this and how it works so I'm gonna
create a new project helpers config
obviously if you weren't using
namespaces you just say new config and
we can obviously go ahead and import
this at the top if we want to so we can
create our use statement just there so
the next thing we want to do is load in
the configuration file that we want to
use in this case all we do is we have a
method called load which we can choose a
file so in this case it's config dot PHP
so it's conflict with a lowercase C
that's this far here that we were
looking at a minute ago so now that
we've done that how do we access our
configuration options everything should
be loaded in fine if we go ahead and
refresh nothing seems to happens for not
outputting anything all we need to do is
say config and then use this get method
and then choose separated by a dot which
option we want to grab so in this case
I'm gonna say DB host and we'll see if
we get this output so we say DB dot host
all dot means is you're going one level
into this array
so now what we can do is refresh and we
see that we get that value and we can do
that with any of the other values in
here obviously included further nested
items as well so that's how easy it is
to use this configuration helper let's
go ahead and build this so you can use
it in your projects today so before you
get started you are going to want to
make sure you have some kind of
configuration you can test with now in
this case I'm just returning this array
within this PHP file this is the only
type of configuration we're going to
look at loading in you can obviously
extend the class later on if you want to
deal with different formats JSON XML if
you need to but in this case I've got a
DB key this just holds some database
credentials and mail which holds some
mail credentials for sending email or
whatever you want to do so now we're
gonna start building our config class so
I have an app directory here I'm gonna
just create a new file in here and I'm
gonna go ahead and call this config dot
PHP so let's crowd PHP tag and I'm gonna
namespace this you don't have to but I'm
gonna name spaces under project help us
and we define the class like so so class
config so what we can now do is load
this into this index dot PHP file we can
instantiate it and then as we add the
methods to load in our configuration and
get different keys we can test that out
as we go so we want to require in app
config dot PHP and then we want to
create a config variable that's gonna
hold a new project helpers config
obviously if you're not namespacing this
you just say new config and I'm actually
gonna go ahead and import this at the
top of the file just to keep things a
little bit tidier so like so so now that
we've done that go ahead and refresh the
page we shouldn't see any errors we can
go ahead and start building the rest of
this this class so the first thing we
want to deal with is loading in a
configuration file which is this far
here so let's create a method to do that
so we're going to call this load and
this is going to take the name of the
file so inside of here then we're going
to say file
I'm going to assign requiring in that
file to that file variable so if we do a
var dump on file and inside of index dot
PHP we say config load config.php that's
obviously going to take this config here
require it in and then we'll just divide
dump on it and we can see what we get
so you see here we've got an array of
two items DB and mail and then inside of
here we have an array of more items so
that's our configuration and we need to
put this somewhere so we can go ahead
and either just keep this local variable
here and then say this data equals file
you might want to do something in the
middle depending on how you're loading
in files so in this case what we can
actually do is get rid of that pop that
in there like so so this data is
obviously a property at the top of our
class so I'm going to say protected data
and that's gone ahead and loaded that in
we can use that within other methods now
and if you're having any problems with
this you can just change the visibility
of this property and you can go ahead
and do a var dump on config data and
when you refresh you'll see that array
so let's get rid of that let's change
this back to protected because we don't
really need it to be visible outside of
the class and we can go ahead and look
at actually getting the options now
which is really important so have this
method called yet and this is going to
take in a key and the default value
we're going to assign within here if
that can't be found and this is really
useful because we want to say eventually
config yet and we want to say something
like DB door host what we can do is pass
in here a second option of what's
returned if that can't be found and
that's really important because you
might need to change this at some point
so in my case I can just say an empty
string or I could say null which is the
default anyway so inside of here then
what I'm going to do is I'm going to
assign
default to a property within this class
so we can say protected default that's
just in case we need to use this
anywhere else which we will be doing in
another method in just a moment and now
what we want to do is start to break up
our data that we've stored up here so we
can actually access it by this dot
notation so remember saying DVD host so
what we want to do is break this up into
segments and we do this by exploding
that data value by a dot sorry that key
value by dot so that's going to give us
if we just do a void bump on segments
the following so we've got dB and host
so we now knit know that we need to look
inside of DB and then find the value for
a host so now what we need to do is
we're going to pull in the data from our
property at the top and we're going to
assign that to a local variable so we
can say this data so data here now
obviously has which have a value
whichever arrays been stored in data and
then we want to loop through each of the
segments so we create a for each loop
here and we're gonna say for each
segments as segments so for the first
loop this will be DB for the second loop
it will be host inside of here we need
to check if if it's set inside of our
data which we've stored here so is DB
set and then is host set so we're doing
this sort of in a loop and we're looping
through so we're gonna say is set data
this isn't a string this is segment so
this will be is set data DB on the first
run now if it is set we're gonna set
data or we're going to assign the value
to data that segment so what this will
do then is if DB is set it will set this
data variable here to this array then in
the second loop when we look for host
in the second loop because this array is
now data it will look for hosts and then
it will find the value so if you're not
too sure about this have a little play
around and maybe do some var dumps under
here just to see what what you're
getting out now if that configuration
option isn't found so for example if we
said DB dot encoding we wouldn't be able
to find it here it doesn't exist in here
so we could say else and then what we
want to do is set data to the return the
default return value which remember is
here but we've also stored in this data
so we're gonna say data equals this
default and if that's not found we don't
a loop for the rest of the segments so
we want to go ahead and we want to break
that loop so after the loop we can go
ahead and return the newly built up data
so let's just run over this once more
very very quickly just if it's a little
bit confusing so the first loop of this
in my case where I'm saying DB host the
first loop segment is going to be DB so
it's going to check if data DB is set
which it is so it's going to assign data
the result of data segment which will
end up setting it to this array here in
the second loop it's then going to say
is data host set because remember
segment is in the second loop and then
it's going to set data to data segment
which is data host because this is a
string value it means that all we're
doing is setting data to 1.12 7.1 and
then following on we just return that
data and that's it so let's just check
how this looks so I'm going to go ahead
and echo this out I'm gonna go ahead and
refresh and you can see that we get that
value really is as easy as that we can
go ahead and test this out with more
loop so I'm going to say host and then
I'm going to inside of a new array say
primary and let's just say one and we'll
have maybe secondary and we'll just set
that to two
can now say DV dot hosts dot primary
we're looking three times now and we get
the result we expect we can do the same
for secondary like so and we can
obviously do the same for the male of
this as mobile well male and host now if
it can't be found so for example DB host
now doesn't exist we have this host ski
instead we'll see if we refresh we get
nothing we're actually getting a null
returned on this so if we do a var dump
we can see that clearly like so no and
we can obviously change the default
return value so if I wanted it to be an
empty string
I could be like that string length of
zero so there we go so you've got full
flexibility over pulling in your options
and then defining a default return value
as well we could just stop here but
we're gonna implement a final method
which is going to allow us to check if a
key actually exists there's not many
situations where you want to do that but
it's good just to have it in place
anyway so what we want to do then is
down here define a exists method and
inside of here we want to be able to
pass in a key to check whether it exists
and this is the reason we set the fault
to a property at the top here what we
can actually do is set this to a default
as well which will obviously be
overridden when we go ahead and get any
value if we change that or keep it a
null so this will stay at null if we
don't and it'll change if we do and in
here we can just go ahead and use the
get method inside of this class to check
if it exists so all we want to do is
return this.get passing in that key and
we want to check that it doesn't equal
the default value that we've set so if
for example we set the default of null
or I'll just leave it as it is and we
say go ahead and check that DB that
hosts exists it doesn't so therefore
it's going to equal null because that's
our default value we get a false value
returned and if we do something like
DV dot host dot primary we go ahead and
get true we know that exists so we have
built ourselves a configuration class
that we can easily use with our project
to pull in configuration options that
look like this and I hope you'll agree
it looks a lot idea</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>