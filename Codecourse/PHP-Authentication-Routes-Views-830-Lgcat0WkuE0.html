<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>PHP Authentication: Routes &amp; Views (8/30) | Coder Coacher - Coaching Coders</title><meta content="PHP Authentication: Routes &amp; Views (8/30) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>PHP Authentication: Routes &amp; Views (8/30)</b></h2><h5 class="post__date">2015-05-26</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Lgcat0WkuE0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">all we see at the moment within our
application although we have done a lot
of setup is just this 404 page not found
and this is because we don't have a
route for our home page and we also
don't have things like the ability to
store and render views and you know
things like that so what we'll be doing
in this part is setting up a route for
the home page and we're going to be
using twig templating to render this
page now don't worry if you've not
worked with twig before you should be
able to pick it up fairly easily it's a
lot nicer in the way that the syntax
works and it's also easier to extend
templates and things like that as well
so you will fall in love with it
by the time you finish this series so
there's a couple of things that we need
to do we already have our slim views and
twig installed slim views just lets us
use twig within slim views when we
render a view and twig just supports
this obviously this is for twig so
inside of our start PHP file we need to
pass another configuration option
through to slim and that is essentially
the way we render views and also the
path to our templates or our views so
for view we're going to set this to new
twig
now twig is namespaced
as usual so this is under we'll put
these under slim actually we'll group
these together so this is under slim
views twig so twig is this here so
that's what we're passing through to
view now we also have a template dot
path option which is the path to our
views in our app what we're doing is
we're separating the logic that we
create so when we say register a user
we're separating the code that registers
user with the view that shows the form
etc etc so this is going to be inside of
our include route and we're going to go
into app and
use that's basically where we're gonna
store our views so inside of an app
let's create a new folder called views
and while we're at it let's create a
view for home so let's create home dot
PHP so all of this file is going to do
is be responsible for showing what's on
the home page so let's just type home in
there for now and let's create an
example root down here we're not going
to be storing roots in here but let's do
what we did earlier on in the series and
say get a forward slash and look at how
we actually render a slim view all we
need to do is make sure that we are
using our app and say app render home
PHP and because we know that our
templates path is in views this will
just look for views and then home dot
PHP so now when our home page we see
home that either that's the very basics
of how we're going to be setting up our
views and we have all of this here now
the only thing that we need to do within
slim is configure our views so this will
essentially allow us to turn bogging
debugging on so we can debug if we need
to it will also allow us to pass in our
parser extensions and this is useful
because we have things like helpers in
our views which allow us to generate
URLs so this will become clear a lot a
lot later when we start to look at this
so just down here then we are going to
create a variable called view and that's
going to be app for you and we're going
to save you Parsa options and we're
gonna assign an array to this and we're
going to pass in here debug now this can
either be true or false so debugging
within our twig templates but remember
we have a configuration option for this
it's under twig debug so we can just
pull that value into here so it's at
config' yet twig debug that's it so now
we need to configure our parser
extensions or adding our parser
extensions so we do pretty much the same
thing just pass your extensions this
time we have an array again and in here
we're gonna pass in a new twig extension
now this is what's going to allow us to
do things like generate URLs within
views so really handy basically
extensions that we have and because
we've done this twig extension is
namespace so up here we're going to use
slim views twig extension that's it
so this shouldn't make a difference to
our well we don't have that root anymore
but it shouldn't make a difference to
what's going on now what we're gonna
focus on now is creating our base
template and the partials that come
along without views and this will set
everything up for us so we can just
easily do things like change the page
titles within each one of these views
we're gonna have lots of view files
within this folder here all separated
into nice directories and by the way the
reason we do this is so we can keep our
views separate if we need to update
something on a page it's really
straightforward so we need to then
create our templates so our our base
template so let's create a new folder in
views called templates and we're going
to create a default template this is
just basically going to be an HTML
document where within other views we can
extend this and include the content
where we need it so for the page title
we're gonna say website and then we're
gonna pull in a specific block from twig
now this might not make sense but when
we come to see this in action with our
home page this will make total sense so
we're gonna say block title that's the
name of the block and then we need to
end the block here so we just say end
block so all that means is when we
define the block
within home and extend the folk template
it will say website and then it will say
the name of the page were on that allows
you to just change the page title from
each view really easily just makes
things a lot easier in the future
although it's a little bit you know more
difficult to set up now and now we're
going to do the same thing but with our
content so block content and then we're
going to end that block there so let's
take a look at how we do this within
home and then we'll look at some of the
partials we're going to create in just a
minute
so for the home page then we need to
extend the default template so to do
this up here we say extends and then we
give the filename templates
default dot PHP so now what we can do
then is say block title and end our
block there we can type home in here so
that means that home will now be put
here when we eventually render this view
and then we want to define another block
which is our content and we did that on
the default template as well so in block
like that and we'll just say home so
we're not actually doing anything with
this now we'll have our title and now
content in there from this but we we
don't have any routes that will allow us
to actually do this so what we now want
to do is create our routes folder and
then start to you know separate our
routes but we're just going to do one
for the home page for now it's an inside
of app we want a new folder called
routes this is going to store all of our
routes and for our first route we've
already seen an example of doing this in
start dot PHP we're going to have home
dot PHP and all we're gonna do in here
is app get forward slash like we've seen
before and then just say echo hello and
we want to use app so now we need a way
of collecting together all of our
different routes because we're going to
be creating lots of different files in
here for each of our routes they will
render out templates
or our views so we want a ace root file
so roots dot PHP so all this is going to
do is it's going to include in the roots
that we need so inside of this base
roots file we want to require the
include root forward slash app roots
home dot PHP and then we can add all of
the other roots that we're going to be
creating in this file as well so in
start all we want to do now is require
in roots PHP because we require this in
it requires this file in which requires
our home rooting which I'll allow us to
show something on the home page and at
the moment that's just hello but we have
this view here that we created which you
know is it's all well and good but we're
not actually doing anything with it so
at the moment if we view the page source
here is just the text on the page
because all we're doing from this root
is echoing out hello so we say app
render and then we say home PHP now
that's going to render this it's going
to pull in the default template set the
title and set the content so when we
refresh we see home we see website home
like we expect when we view the page
source we see our document laid out
there so out default template is where
we go to update the design if we want to
add a style sheet in any JavaScript or
anything else in here now what I'm going
to do now is add some partials to my
template this is going to be the
navigation at the top and it's also
going to be the messages that we flashed
through and we'll explain that a lot
later in the series I'm going to create
a partials directory within templates
and in here I'm going to create a file
called navigation dot PHP so that's
going to be my navigation so inside my
default template here I can include this
in just here so all I do is
include templates partials navigation
dot PHP so now on every page that we
create as long as we extend the default
template we'll have our navigation which
makes it a lot more consistent and easy
to work with and keeps it very tidy as
well so we've got our nav here let's
just update this so we kind of give the
nav that we want this is just gonna be
an unordered list with list items of
course you can update this to whatever
you want so I'm gonna have an unordered
list the first is a is a link to the
home page so we have this home link here
which we can click on but it's not
actually going anywhere just yet
so let's focus on named routes so let's
get rid of all these files and let's
open our home route here so we can give
this a name and I'm gonna call this home
and remember when we included in our
twig extension for our views this gave
us the ability to use helpers inside the
navigation and to generate a URL to our
home page all we need to do is say URL
for and pass in the name of the route so
the name of the route is home this will
give us a URL to our home page so let's
see the difference let's just view the
page source and there we go go we've got
tutorials authentication public that is
our home page remember just just forward
slash it's not anything else but this
will work for all of the other routes
that we create and give a name to and
that is pretty much it so now let's
quickly focus on our messages partial
which we're going to be looking at in
the next part and all this is going to
do is provide us a way to flash messages
to the user so for example when they
register and we say you've been
registered you can now activate your
account or you can login or whatever we
want to detect this in this partial
include it into our default template and
then we want to show this to the user so
up here we're gonna say if flash
global and we'll explain this in the
next part we'll see how this works I'm
gonna end it here and this is the syntax
for an if statement within twig it might
take a little bit in use too but it's
it's worth it so we're gonna have a div
here with the class of global and in
here we're gonna output flash global I
should have mentioned these two curly
brackets basically just mean output
something and this will automatically be
escaped as well with twig so you don't
need to worry about escaping content
when you output it to the user so you're
you're preventing against x SS attacks
okay so now that we've got that let's
just include this into our template here
so we'll say messages dot PHP and there
we go
so that is all for this part we let's
just recap what we've done so far we
have pulled in our twig view and our
templates path which we now know we can
create all of our views in we've gone
ahead and added debug mode on twig and
we've added our parser extensions so we
can use things like that URL for that we
have just where is it you know
navigation you are for here and we've
created our first route so this is just
the route to our home page so at the
moment all it looks like is this as we
go along for the rest of the series will
obviously be creating lots of different
routes which are going to handle things
like the login and registration of users
and not only get routes we'll also be
looking at post routes but first of all
let's figure out how we work with
flashing messages within slim and we'll
take a look at how this works</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>