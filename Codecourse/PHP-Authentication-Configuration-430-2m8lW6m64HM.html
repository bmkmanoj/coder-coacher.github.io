<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>PHP Authentication: Configuration (4/30) | Coder Coacher - Coaching Coders</title><meta content="PHP Authentication: Configuration (4/30) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>PHP Authentication: Configuration (4/30)</b></h2><h5 class="post__date">2015-05-25</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/2m8lW6m64HM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">we all know that configuration is really
boring and it's always a pain to set up
within an application but what we're
going to be doing is using the package
that we downloaded earlier this config
package here we're going to be using
this to give us the ability to specify
settings or configuration for different
environments that we want to switch
between so for example when you build
your application you're going to be
working on your local machine with your
local database with maybe a test email
account but when you go live you want to
switch these over really quickly so
we're going to be taking advantage of
Slim's
configuration mode and we're going to be
doing that by pulling in different
configuration options so let's get
started what we're going to do is inside
of our app directory we're going to
create a config folder this is going to
store our configuration so we're going
to create in here two files one is going
to be development dot PHP and the other
is going to be production dot PHP so
development is the configuration we're
going to specify for our local machine
and production is the configuration
we're going to specify for our web
server when we upload it and this means
you don't have to keep changing over
your configuration files but how do we
switch between these two modes of
configuration well inside of our app
outside of here we're going to define a
file called mode PHP and in here we're
either going to write development or
we're going to write production or any
other configuration you want you call it
dev and prod if you wanted to but I'm
going to call it development and we're
going to be focusing on only our
development configuration we will be
creating production as well so let's
write out our configuration this is
going to be really boring but trust me
this will make it a lot easier to
integrate into your application and it
will also feel a lot easier when you
need to switch over settings because
everything will be defined in this file
you won't have to go into any other file
to update your
configuration so from this file then
we're going to return an array that's
all we're doing we're just returning an
array and we're going to define all of
our configuration options inside of this
array so the first then is just at
specific configuration so things like
the URL to our application and also
things like hashing as well you could
break these up into smaller parts if you
want it really doesn't matter so for the
URL to our application this is just
going to be the base URL it's not going
to be the whole URL here so for me it's
just a localhost
so let's go HTTP localhost now this is
important because when we switch to a
live server we might be working with the
domain so we can switch that domain over
in our production configuration so we're
now going to decide what hashing
configuration options we want and this
is for password hashing specifically
this isn't for like sha-256 when we come
to that this is just hashing
configuration so I'm going to choose an
algorithm and that's going to be
password be crypt again this can be
changed really easily if you go ahead
and look up the password hashing API PHP
is password hashing API you can find out
more about this and we also have a cost
for generating that password as well I'm
going to set mine to ten but you can
increase or decrease this depending on
the server power so that's that done
what we now want to do is to find out
database settings so our database
settings really relate to how we're
pulling in the I Ravel's database
component but laravel database component
uses PDO so we have things like a driver
so we can choose a MySQL database or any
other database type that's supported so
driver is MySQL we then have the host
which for me locally is 1 to 7 or naught
naught naught 1 or localhost we have a
database name we've not set up our
database yet but I'm going to call it
site so we can where you can change this
if you want to really doesn't matter now
we have our username and password for me
the
just root and root but obviously when
you switch over to production this is
gonna be different so that's how it's
nice to be able to switch over we also
define the character encoding which is
going to be utf-8 and we define the
collation as well which is utf-8 unicode
CI and we can also prefix as well but
we're going to leave this empty so
that's how database settings out the way
and done with so next is our
authentication settings so this is
really just session names for different
things so we're gonna say off so our
session name it's going to be user ID
that's the the key that we're going to
use when we set our session when the
user logs in and we also need one for
the remember cookie as work so remember
we're building remember me functionality
I'm just going to call this user
underscore half a user remember but of
course you can change this it's entirely
up to you so now come our email settings
which we'll be filling in a little bit
later and in fact we'll fill them in now
so we have SMTP auth true so remember
we're using SMTP to send email if you
can't use SMTP to send email you might
just want to sign up for a Google
account just so you can do this for now
and we'll have all the Google Mail SMTP
settings here right now so SMTP secure
is TLS that's how your Thunder cave with
Google's SMTP server we have the host
which is just smtp.gmail.com and we have
the username which is your email address
again if you haven't signed up for a
Google account or if you don't have one
you might want to now so my Google mail
address is tabby at code course comm
this is just an email address with no
emails in we need the password so you
want to store your mail password here as
well in my case it's I love cats with a
for instead of the a we also need to
define the poor as well that we're
working with that's 487 for Google and
we're also going to define whether we
want to be sending
HTML emails which we do you don't have
to but we'll turn that on okay so now
that we've got our mail settings in
let's look at our view settings or Twigg
settings specifically I'm going to turn
tweak the bugging on so I'm going to
create a new array here with debug to
true so we can easily turn that on off
based on development or production so
now we want to look at cross-site
request forgery settings and all this is
is just the session that we basically
storing this in which CR CSRF token or
underscore token so these settings or
configuration are exhaustive they're not
going to provide you with configuration
for absolutely everything but you can
change these settings here if you want
to remove a certain setting or if you
want to add a certain setting but let's
leave them on just for now so you can
focus on building the app and then we
will or you can go and just remove them
or add more later on so for our
production settings then I'm just gonna
copy and paste this over here but what
you're gonna want to do is change your
production settings based on the
settings when you upload to your website
and everything will be good to go so
we've defined our config within app
config which we can easily change as we
go between servers but how do we
actually include this configuration into
slim well what we can do within slim is
we can define a mode so inside of slim
as we instantiate it we can pass an
array with configuration options
specifically to slim and here we can say
mode and we can choose the mode that
we're currently in so you could say
mode development or you could say mode
production now we obviously don't want
to hard-code that value in we want to
get this from our mode dot PHP file and
what that means is we can then switch
our configuration based on which one we
have so we're gonna do is say file get
contents and we're going to go from our
improved
and pull in the content of mode dot php'
so all that means then is that when we
do something like echo app config mode
we see development when we change this
to production we see production so you
might be thinking well how is that
useful we've got the mode in slim but
we're still not pulling in our
configuration well for our configuration
remember we are using the config package
that we downloaded earlier and we can
set configuration mode within slim and
then attach this configuration so let's
do this now so let's say app configure
mode and then we choose the mode that we
want to configure for now because this
is dynamic we just pass in app mode or
app config mode like that and we then
have a callback here and we want to use
our app because we need to set our
configuration within our app so we this
just basically puts app in scope of this
of this callback this closure so what
we'll do now is load our configuration
using our configuration package which
will easily be able to read these two
files and we're going to place it within
our app configuration so we're gonna say
app config equals and let's put a little
test here for now let's just say test
true and then down here let's do a var
dump on app config so now what it's
going to do is just to recap we set our
mode so let's say we have mode of
development so we'll go with that
so mode is now development so configure
mode for development pull in a specific
config for development at the moment we
just have an array in here let's look at
what happens when we var dump config and
we see an array test true but now what
we want to do is we want to actually
pull in real configuration and that's
using our configuration package so this
is namespaced
under noodle house config so we're gonna
say use noodle house config although the
package name is Hassan Cat Hassan Khan
it's still namespace under noodle house
because this was the previous name for
it so that's why it's like that if
you're wondering and we now have access
to this config class so what we do here
is we say config load and then we pull
in from our include root we go into app
into config and then this is either
going to be development dot PHP or
production dot PHP or any other mode
that you have so all we have to do here
then is just say app config and then in
here we say app mode dot PHP so again
just to recap we have development set as
our mode this labs our mode loads in the
config for the mode which is either
development or production dot PHP or
whatever else so now when we refresh ok
so we've got a not found file exception
so let's just sit ad that's why we need
that forward slash just there so let's
refresh now and there we go so we've got
all of our configuration in here you can
just about see things like driver the
house the username password etc so we
now have configuration hold into our
application how do we get configuration
options well all we do here is to beat
echo app config get and then we access
these by separating each of these levels
by a dot so for example if we wanted to
get the DB driver when we eventually
configure our database we see DB dot
driver and that's smart enough to loop
through this and some find DB driver
which is MySQL so we see MySQL
trying ignore this 404 by the way we
don't have a route set up so this is how
we get configuration so let's say that
we have development as MySQL and we have
production for example as SQLite this
wouldn't happen but let's take a look
now if we switch from development to
production so this says MySQL when we
switch this to production we now see a
new configuration option so that's how
we switch between different
configurations so let's change this back
to MySQL let's close these off and let's
get rid of this example so we now have
configuration setup with our application
we know how to switch modes from
development to production and we also
know how to pull in our configuration so
that means we're ready to go and use
this configuration as we build the rest
of our project so the next part we're
going to look at actually setting up the
users database tables so we can start to
actually then go on and add database
support create how user model and then
start logging the user in and doing
everything else that we need to do</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>