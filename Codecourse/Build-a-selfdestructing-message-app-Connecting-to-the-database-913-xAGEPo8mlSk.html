<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Build a self-destructing message app: Connecting to the database (9/13) | Coder Coacher - Coaching Coders</title><meta content="Build a self-destructing message app: Connecting to the database (9/13) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Build a self-destructing message app: Connecting to the database (9/13)</b></h2><h5 class="post__date">2015-11-26</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/xAGEPo8mlSk" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so we've set our database table up but
how do we actually connect to our
database and start to work with the data
we have well what we're going to be
doing is using PDO and much like we did
with our view and our config we're going
to attach this to slims container and
that means we can really easily use that
within our roots and will test this out
at the end of the video to see that
everything is working just to make sure
you will set up ready to store and
retrieve records so then to attach this
to the container we just add this as a
key in the container and we have our
function just here with our existing
container in here and this is important
because what we need to do is take out
config items from our app config so our
host DB name username and password and
use them within here so we're just going
to return a new PDO instance in here
we're going to be using MySQL as the
driver the host is 127 or not one will
replace these in a moment and the DB
name is destructive and then as the
second and third argument we just have
the username and password so now to
replace these values I'm just going to
remove this and I'm going to concatenate
on an item from our configuration and we
access that with our container we access
config and then we get and if we remind
ourselves which key it's under so it's
under DB mysql host so we just say d b
dot MySQL dot host we do the same thing
for the DB name so if we get rid of this
and onto the end of this append the same
thing so DB config get DB dot mysql DB
name and why don't we just pull these
down just so they're a little bit tidier
so we're just going to pull these down
onto each line and it's a little bit
easier to read so when I say C config
get DB dot mysql user name
and then we do exactly the same thing
for the password so we can actually just
copy this paste it into here and then
change this to password so now that
we've got this set up we need to test
this just to make sure everything is
working so over in roots all we need to
do is say VAR dump this DB so remember
we've attached it to the container named
DB so this should give us the PDO object
back so let's go and check this out and
it looks like there's a problem here so
are there we go so I've d be there
instead of c-4 container you probably
notice that so if we refresh now there
we go so we have a PDO instance just
there and to test this out further we
can do via dump this DB query and inside
of here we can say select one and then
here we can fetch this as an object so
PDO fetch object and then that should
just give us the value 1 being selected
and you can see that we have a class
back here with one and we have the
string one so we now know that our
database connection is all set up and
now what we can do is start to post the
form that we've built here and store the
values inside of our database table</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>