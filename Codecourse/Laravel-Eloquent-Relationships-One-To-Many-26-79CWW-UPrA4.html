<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Laravel Eloquent Relationships: One To Many (2/6) | Coder Coacher - Coaching Coders</title><meta content="Laravel Eloquent Relationships: One To Many (2/6) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Laravel Eloquent Relationships: One To Many (2/6)</b></h2><h5 class="post__date">2014-08-29</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/79CWW-UPrA4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so in the last video we created this
article list and what we did was we used
the belongs to relationship to reference
the username of the user who posted the
article as you can see here but what I
want to do now is actually reverse this
I want to be able to display a profile
for a user and inside that profile
display the users articles so that's
what we're going to look at today and to
do that we're going to be utilizing the
has many relationship so if I just go to
my views here you'll see that I've
created a profile blade uh PHP just to
make the video a bit quicker so if I go
to my routes file I'm going to do is I'm
going to say route get profile username
and then we're going to pass in a
closure and this is going to take the
username so if I just died in dump
username and go to a browser flip end
profile Terry you're going to see the
username there so what we need to do is
we need to get that user from the
database with the username of whatever
was provided by the browser so to do
that we're going to use our user model
we're going to say user where name
equals username and then we're going to
get the first that the first record
which matches that criteria so hit
refresh and we don't get anything but if
we just died and dumped views down here
there we go we get our eloquent a record
now if we provide an invalid username
select Terry D we get null and we want
to provide some feedback to these that
the user wasn't found so what we could
do is we could say if not user app a
Bart
404 hit refresh and that would work or
up here we could just simply say first
or fail and that's going to get the
first result in the database that
matches
the given criteria or it's going to
throw an exception which will just look
like a 404 page in production so now
what we want to do is we want to return
the view make profile with users are
with user user now I'm just going to
delete this for now just so we can view
this really quickly so hit refresh nope
we need to change the user name so here
we go we have Terry's profile so let's
just check that this works for yep okay
so everything is working fine what I'm
going to do now is I'm going to open up
my user model and I'm going to create a
new method called
articles and inside here what we're
going to do is return this as many and
again what we want to do is reference
not the table but the model that is
assigned to that table so in this case
it's add call so down here if we just
signed them user articles
hit refresh and we get our little JSON
array containing all of our articles so
down here I'm just going to add a line
break and then I'm going to loop through
all the articles for each articles as
articles and we're going to stop that
loop and we're going to add a header tag
which will be the article title and then
we're going to have the article body so
hit refresh and we're getting undefined
variable so let's go back to our roots
file okay we need to say user articles
my mistake hit refresh and there we have
it that's how it uses articles so now if
we go to Alex's profile his articles are
also being displayed however mine and
which is exactly what we want</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>