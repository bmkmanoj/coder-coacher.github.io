<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Working with JSON and PHP | Coder Coacher - Coaching Coders</title><meta content="Working with JSON and PHP - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Working with JSON and PHP</b></h2><h5 class="post__date">2013-06-04</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/2qJT09LAh64" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">okay in this video we're going to be
talking about JSON and PHP I'm going to
go ahead and explain what JSON is if
you're not already aware and we'll be
looking at a short example as well of
how we can sort of utilize JSON to pass
data back from PHP and we're going to do
that via an ajax request
so before we start a little bit about
the setup I've just got a basic document
outline I've got three files in total
the first one is the next page that
we're going to be landing on and you're
looking at that right now we've got one
that's going to pass an addition of two
numbers so that's the example that we're
going to look at in just a moment and
then we've got a global JSF our global
javascript file that's included here now
we've also got jQuery included as well
which just makes our life that a hell of
a lot easier so the first thing is
really what is JSON well JSON say
essentially is a data interchange format
and that is in the form of JavaScript
objects so JSON stands for JavaScript
object notation so in that sense this is
sort of baked into a lot of languages
where we can actually pass JSON and you
know and use it as efficiently as we can
in all languages so if we hop over to
our global dot J's file this is what a
JSON string may look like you will have
your object notation inside you'll have
a property name so I could take name
you'll have a colon as you would find in
a JavaScript object and then you would
have a value to this so that is a valid
JSON object so things can get a little
bit more complicated but luckily we
don't really have to create them
ourselves we can use passes within the
language we're working with to actually
do that for us and if you're still
completely lost and you don't understand
the point of this you'll see a bit later
why it makes things a lot easier
and again we'll look at the addition
example so in PHP we have JSON encode
and JSON decode functions which are
extremely useful usually would use JSON
encode because we want
and code perhaps a PHP array to out spit
it out as JSON and we can do that like
so so for example if we had an array so
I'll just call this JSON and this array
looks like this name Alex oops sorry
with our our assignment operator there
so this is what an array would look like
in PHP now what we could do is we could
echo out JSON that's just going to echo
the literal array text but we could we
could use the JSON encode function and
that would actually create a JSON object
from this so if we are hop over to our
browser I'm using Firefox simply the
fact that when we do the Ajax example
Firefox doesn't restrict the by policies
whereas Google Chrome does and I didn't
want to confuse anyone so let's just
head over to add dot PHP and you can see
now that we've actually got at the
example that I showed you earlier so we
have a we have a JavaScript object that
essentially be output and this has been
output to a page with a data type by
default as text HTML but we might want
to go ahead and just change the header
type just so we're outputting the
correct content type which is text
forward slash JavaScript so where now
when we go ahead and refresh this is
actually a text JavaScript page so you
know we are outputting outputting a bit
more nicely so what we're going to do is
we're going to get rid of this but we're
going to build an example here that's
going to allow us to enter two numbers
it will Ajax to add dot PHP we'll add
the numbers together and return a
JavaScript object with a success flag
and a result so if the operation was
successful in it adding the numbers
together successfully and that file
could be accessed it you know it so well
know if the file can't be access then we
won't get the object back but still if
something does go wrong
run along the way then you can solve
note down but yeah you'll understand as
we go through the example so I'm going
to create a form here just as I would
normally create a form the action I'm
just going to set to add dot PHP even
though we're not submitting through this
traditional method and I'll go ahead and
create a few input fields so I have an
input type of text for the first number
so we'll call this first put a little
plus symbol there and we'll have the
second input as just second and then
we'll have a button here that's going to
allow us to actually submit the form so
this will be a type of submit and we'll
have a value on this as work this out
cool so we'll create the event handle in
a moment let's just preview our form so
we'll go back to our index page so yeah
here we've got a ability to enter one
number two number or first number second
number click work this out so let's head
straight over to our global dot J's file
and we'll we'll create the event handler
for this I realize I haven't given an ID
to this or a class or anything like that
to identify it so I'll just call it add
so let's say add dot and we'll use the
on method and we'll say on not click
sorry submit and we have our callback
function now what's going to happen in
here I'm going to create a variable
called that that's going to refer to the
object which is this form that we're
currently working with and then we'll
grab the contents as well so the content
is going to equal that dot serialize now
what serialize does it is it will take
the contents of the form and it'll put
it into a string that would be submitted
via a request to a page an HTTP request
to a page so if we just console log
contents you'll see what I mean and
you'll see the result of this so if I
type in 1 &amp;amp; 2 here and I click work this
out oh sorry
we forgot our return false to stop the
form itself actually submitting so if I
enter 1 &amp;amp; 2 you can see that this is
console.log refers to equals
one and then an ampersand and then
second equals two so that's the
serialized data and we can well we do
that so we can pass this easily you with
the J jQuery AJAX method so the jQuery
AJAX method will be jQuery the jQuery
notation then the Ajax method we have an
object inside this ironically and we
need to specify a few properties here so
I'm going to say the URL is going to be
add PHP now I'm going to specify the
data type that should be expected now
this method is clever enough to
generally work that out but I like to
just specify anyway if anything it helps
anyone looking at this or even myself in
you know a few days time looking back at
this I can see that it is a you know
it's a JSON expected data type we also
have the type which is either get or
post in this case we're going to use
post and we also more importantly need
the data so I'm going to say data and
what do I do here well I can either pass
an object I can pass a serialized string
like that the result of as he realized
action so that will just be contents now
we have a success callback function and
in here we can do what we want so I'm
just going to say consult log one now
this isn't actually going to work at the
moment and the reason being is that the
data type that we get back from ad dot
PHP isn't JSON so nothing happens we get
this post okay but we don't get the
console log because we're not receiving
JSON data back if we were to receive
JSON data back that would succeed in
here and to get to grab this data we use
the data argument in our in our success
callback function so let's go ahead and
just generate some some JSON response so
we can actually get see this working so
the first thing I'm going to do is
create an initial an initial array
that's going to hold a success false and
then a result of zero and then later on
we can check if these two numbers exist
and then we can set the success to true
and then
so on and so forth so remember the data
that we submit in the forum is being
passed to this page as it would be from
another file so even if Java scripts
disabled this is still going to work the
user will just see a JavaScript object
but you know play around with this so
we're going to say success false and
we're going to say result 0 so that's
how original object so let's go ahead
and just echo this out so remember we
had the JSON encode function and we
passed in the JavaScript the PHP array
so let's go ahead and just get rid of
this and say work this out we get the
console log of 1 which is present ah I
don't think I've refreshed the page yet
so we don't get a console there but we
have a console log in there earlier this
time though I'm going to console.log the
data that's returned and we'll actually
see a JavaScript object when I click you
see object success equals false result
equals 0 that is the object that we've
output in our PHP code so now we'll
actually create the code to add these
numbers together which is fairly
self-explanatory we'll just go ahead and
check if the data that's been sent is
set and remember this is in our post
global variable a post request variable
so we say first and second so if they
are set I'm going to create two
variables here first and second
what I'm also going to do is I'm going
to cast these two integers just in case
someone decides to type in some letters
although this is just an example so if
that's correct everything's working what
we want to do is we want to set JSON
success equal to true so we're
overriding the initial value in here and
we also want to set the result to first
plus if I can actually type properly
first plus second so now we echo the
JSON encode the JSON encoded result of
the JSON array so we're sort of starting
off with our defaults sort of guilty
before proven innocent when we come down
if these if this data is set then we set
the success to true and then we
calculate the result and pop them in
there and then output them as we've
already seen so now what's going to
happen is we'll actually get that data
back so if I type 1 3 and you see we've
got success true and result 4 so now
what's the whole point of doing this you
know why do we want this JSON object
returned well the point is that when it
comes to our success callback we can
just do something like if data dot
success so if that step to true then
alert and I am alerting here but you
obviously wouldn't do this the result is
and then we can just append on data dot
result and it's that easy so with this
with the ability of being able to pass
the or receive the JSON objects through
this ajax method and do everything here
we can actually put you know store our
data inside of this common data object
it just makes things a hell of a lot
easier so in a refresh noun I say one
add three the result is four and again
if I change that that's that's going to
change every time so there is always six
of five at one so that is JSON and we've
looked at an example where we submit a
form capture this data using
javascript we use the jQuery AJAX method
to pass it to our PHP page we return in
JSON encoded string and then we we do
something with that returned a string or
returned object</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>