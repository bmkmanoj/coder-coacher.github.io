<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Easy PHP Validation with Violin: Usage Example (4/6) | Coder Coacher - Coaching Coders</title><meta content="Easy PHP Validation with Violin: Usage Example (4/6) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Easy PHP Validation with Violin: Usage Example (4/6)</b></h2><h5 class="post__date">2015-04-06</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/1LjEMnbOR1M" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">okay so now we're going to look at using
violin in a kind of real world situation
the code for this isn't going to be
great we're not going to be separating
views from controllers and anything like
that using a nice templating language
but we can roughly look at how this is
going to work so the first thing I want
to do is just build up a form below the
PHP code to have the top of my page so
imagine this is some kind of login form
or something for this I'm just going to
create a form with an action of a hash
nothing here the method is important
because it's how we're going to pull
everything in and within this so I'm
just going to create a couple of divs
will create a label for an email address
perhaps that we need to give so let's
say that's email and let's create an
input here with the type of text with
email obviously you could take advantage
of fronton validation by having a type
of email but here we'll just focus on
the backend and obviously we would need
password so let's create a label for our
password field into a password label
here and we'll have an input type of
password name an ID being password and
let's go ahead and press submit button
down here and we'll just say login so
this currently looks like the following
and so we can go ahead and hit login
that submits this data through to that
page so what we're going to do at the
top of the page here once that form has
been submitted is first of all check
whether some data has been submitted
then we're going to assign the values of
that posted email and password to two
variables we can then pass them into our
validator and then in our sort of fake
view down here which is obviously just
mark up at the top of the bottom of this
page we can go ahead and output any
errors that we find and we can use the
errors message bag that's returned to us
to handle this in any way that we want
to and we'll see how that works in just
a moment so first then let's crouch if
statement just to check if any data has
been submitted so we check if the
post-super global array is not empty and
then we want to assign a value for email
and password and this is going to be a
little bit
see if you do have some kind of method
so I'm going to help her to pull input
in this would be much better but for now
I'm just going to create a ternary
operator just to check our email if
that's available if it is we're going to
assign email the value of dollar
underscore post email otherwise we're
going to have that as null so we can
potentially pass in null to a validator
but in this case we'll just use null
obviously it could be an empty string so
the password then is exactly the same
again this is a little bit verbose some
messy but we have this now so we now
have our email and our password once
we've submitted so we can start to
validate now so we say V validate
remember we have our array without two
keys here relating to the value and the
rules we want to provide here so for the
email we obviously just pass in email
and then we pass in our roles so we're
only going to look at some basic rules
here we're not going to go through too
many rules and waste any time but we
basically want the email to be required
and an email and the password which we
replace this we want this to just be
required and obviously you can play
around with this if you want any other
rules sir included so now when I hit
login nothing really happens so
basically because we're not outputting
anything but let's say we wanted to loop
through the errors that we have and then
just out put them in a moment we're
going to look at outputting specific
errors next to the field which is
probably more desirable so what we do
here then is we're going to say if v
fail so if our validation has failed and
obviously you could if you were working
with views or maybe a templating
language you can pass the result of v
down to your to your to your view and
then you can use this as as you need
inside of your view so if if he fails
what do we want to do well we're going
to loop through so we're going to say
for each and let's just end that for
each before we start to do anything else
and so for each V errors all so the all
method grabs all errors regardless of
which field they come from so either
email or password they'll just be output
in a list and then what we could do is
something like echo error by doing that
we need to obviously say each one of
these ads error so obviously let's give
that a little break on the end and let's
go ahead and see so if I hit login you
can see we've got email is required and
email must be a valid email address
output and then we also have password is
required output as well so we've got
them errors but what if we want to make
this a little bit better well for now
I'm going to get rid of this and just
replace this with validation failed you
obviously wouldn't do that but it just
gives us a little signifier to say that
it has failed now what I want to do is I
want to output the error messages that
specifically relate to each of these
inputs next to the input so all i need
to do hear you say echo v errors first
which will grab the first error for a
particular field so in this case we
wanted to find email that's the only
thing we'd want to define here we can go
ahead and we can copy this paste it down
to here and we want to say first
password so now what's going to happen
is when we let's just refresh the page
and hit login we now see validation
failed because we used our fails method
but now we see these errors output next
to each field so this is really really
helpful obviously what you could do is
you could loop through using the get
method so you could save for each V
errors get password that would give you
all of the errors relating to the
password but usually you'd only ever
want to output one error next to each of
these field is entirely up to you what
you want to do here so that is a kind of
real-world example of how you might use
violin within your project
you can see how easy it is just to
output errors down here and how easy it
is obviously with this very very small
validate method to pass in the data and
the rules to validate the data from your
form</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>