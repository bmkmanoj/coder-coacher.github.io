<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>What's new in PHP 7.1: Iterable types (10/12) | Coder Coacher - Coaching Coders</title><meta content="What's new in PHP 7.1: Iterable types (10/12) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>What's new in PHP 7.1: Iterable types (10/12)</b></h2><h5 class="post__date">2016-11-27</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/XKyGOxfm_cU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so the next thing that we're gonna look
at is the iterable type pin now just as
a kind of background when you are
defining out saying method within a
class let's say you wanted to include a
callback
you would have a method here or some
kind of function and into this you might
pass in a value and you might pass in
say a callable
which you can type int then to say well
I can call this so this just means that
we have to pass in some kind of callable
now in this case you would call the
function like this you would pass in a
value here and then you would have to
pass in something that was callable like
a closure now what we can actually do is
use iterable we're going to talk about
an example where this might be useful
and we're also gonna speak about what
actually is iterable what can be
iterated on and to demonstrate this i'm
going to create a collection class now
you may be familiar with laravel we have
something called a collection this means
that we can add items to a collection we
can iterate over them we can use helpful
methods and to make this easier we're
going to go ahead and use the iterator
aggregate interface now this means that
we have to go ahead and implement a get
iterator method which allows us to use a
class like an array now this extends
traversable so you can see here
traversable using for each so hopefully
this makes sense but going to look at an
example of this and see how it works so
let's go and just create a constructor
here to allow us to pass some items in
and then we'll look at how this how this
might come together so into this class
we might allow passing in a list of
items and we would set that to a
property just up here now what we could
do with this is go ahead and say create
some kind of user class maybe and this
is just gonna be super simple I'm going
to try and keep this as short as
possible we may create a couple of users
so let's say user 1 is a new user and
then we might say that the user ones
email address is my email address like
so and then we might do pretty much the
same thing for another user like this
and these could be results you get back
from your database it could be from
anywhere what you would do is you would
create a new collection so we could say
users equals new collection passing in
an array
of them users like so now really what we
want to do is on our collection maybe
have methods like count
so we could say users Karen that would
be really helpful but we might want to
do a for each on this now at the moment
obviously this isn't going to do
anything if I do for each users as user
and then echo out user email we know
that what we're trying to do is is to
rate over a class which doesn't really
make sense we just don't see anything
now that is where our iterator aggregate
comes in so what we can do is go ahead
and implement this let's go over to the
browser and we'll see an error now this
contains one abstract method which is
that get iterative method I spoke about
all we do to get around this and I allow
this to be iterate iterable is implement
this get iterator method all we then do
is return a new array iterator on them
items so we just go ahead and pass in
this items what this will now allow us
to do is when we use for each on this
class or on an object on a collection
object this will allow us to iterate
over these items so now this will work
and we see these two email addresses so
this is nothing really new it's pretty
much always been there and this is just
really generally helpful now though what
we need to do is think about what
happens when we want to pass this around
our application so we have type hinting
available for iterable what this means
is anything that can be iterated over we
know that an array is iterate iterable
we know that this is now iterable so it
means that we can type in for both
circumstances so it again just adds a
little bit more strict type into your
applications so let's say out the way of
this somewhere we had a mail class and
I'm gonna make this really really rough
inside of this we might have a method
like set recipients and then into this
we would want to pass in a list of
recipients like so now maybe we wanted
to accept an either an array of email
addresses or a collection of items now
we can't type into either if we say
array
can only pass an array in if we say
collection we can only pass an instance
of a collection in so let's just quickly
fill this out just so we can kind of
demonstrate it cuz we're gonna look at
some other bits here as well inside of
this we might just say this recipients
and set that to recipients and then up
here we would obviously have our
recipients property and what we might
also want to do as well is extract out
all of the emails to an array just in
here we might have some getters for this
later on so inside of this method then
we would want to do a for each and then
into here we would pass in those
recipients that we receive in each of
them would be a recipient and then what
we could do in here is maybe a check to
see if the recipient like so is an
instance of a user model now you may not
do this but it's just kind of an example
and in the ninnescah what we want to do
for each of them is add that recipients
email into there like so or we may have
an interface on our user model and we
may have a get email method so either
way we're just basically setting that to
there now otherwise we know that we're
just getting an array of values in or
something else so we would just say this
emails and then maybe set that directly
to the recipient so essentially what we
can do now is for the mail class that
we've just created we could say mail set
recipients and we could either pass in
like so like that or we could pass in a
collection of users and remember this
users here is now a collection so if we
were to implement some methods in here
so if we do a var dump on mail say get
recipients let's go ahead and implement
this very quickly and see what we can do
to make this a little bit more strictly
typed so this would return this
recipients like so and then this would
also maybe have a method saying
something like get email so just the
emails that have been extracted out that
we've already added in so this should
now give us a collection of them
recipients if we just remove the type
int
down there to demonstrate earlier we see
a collection of our recipients and then
for the get emails method we have the
following two email addresses so again
this is a really rough example but this
is something that you may want to do now
because we have this problem where we
can't type it in this to an array or we
can't type in this to a collection
because we know that we may have either
what we can now do is use iterable and
that will take into account either an
array or something that is iterable
because we know that we are iterating
through whatever we're passing in
whether that be a collection because we
are extending iterator aggregate which
again further extends traversable or
we're just passing a plain array in so
this will now work regardless so we can
send in a collection of users that works
as normal or we could just send in an
array of whatever we wanted like so and
it will just work as normal
now what we can also do is type in the
return value so what I'm actually going
to do in here is I'm going to say this
set recipients mustn't return anything
so we've already covered void return
type I'm going to set that in there as
well so again we strictly type that so
we know that we can't return anything if
we do return something in here then we
know that we get an error now we can
also do the same for get recipients
we're going to say well this returns an
iterable or must always return iterable
so we can do that for this and we can do
that for this because we know that these
two things here are either an array or a
collection so hopefully that makes sense
no no this was a really long example but
again it just kind of shows you how this
may work in real life again really rough
implementation but we've now seen an
example of type int in what we can pass
in whether it's an array or something
that we can iterate over and we've also
looked at how we can check that we are
actually returning something that we can
iterate over because we know that when
we call get emails will get recipients
we need something to iterate over so
make sense here to type into now that we
have this available</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>