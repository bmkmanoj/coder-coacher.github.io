<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Laravel Eloquent Relationships: Polymorphic Relations (6/6) | Coder Coacher - Coaching Coders</title><meta content="Laravel Eloquent Relationships: Polymorphic Relations (6/6) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Laravel Eloquent Relationships: Polymorphic Relations (6/6)</b></h2><h5 class="post__date">2014-08-29</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/lePjXdMC6aM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">in this lesson we're going to be looking
at sending a bit more advanced it's
probably the most advanced of all the
eloquent relationships
it's called polymorphic relationships
it sounds long it sounds scary and
intimidating don't worry it's not
exactly the same when I was first
reading about it so let's explain what
this is about let's say that we want
articles to have comments and we also
want users to have comments on their
profiles well we could create a couple
of tables so we could have user comments
and then we could have article comments
but this is going to cause a lot of
repetition and we want a code to be as
dry as possible
if you don't know dry stands for don't
repeat yourself so we're going to simply
create a comments table and we're going
to have a couple of fields in we're
going to have body which is the common
content we're going to have user ID
which is the comment author and then
what we're going to have is comment
double ID and common table type and this
type is going to be the model okay so
let's very quickly add a couple of
comments or say this add call is awesome
let's say Alex posted that on the
article with an ID of one and comment
upon type is where it gets a little bit
trickier if we think about it we're
trying to make a comment on an article
so all we have to do is put in their
article and notice how I'm I'm giving it
the name of the model instead of the
name of the table so let's also add
another comment saying this user is
awesome and we'll do user ID one which
is me and we'll put that on Alex's
profile and
we're going to provide the model for the
users table so let's create a common
model and this is very simple comment
extends eloquent all we need to do is
put in one method called commentable and
this this method name here is the same
as the prefix we used here so comment
upon ID incompatible type and all we
have to do is return this moth to could
not be simpler so now if we go to user I
will use a model we want to be able to
grab the users comments so what we're
going to do is say public function
comment now your first instinct may be
to say return this belongs to comment
but that isn't going to work because
it's going to return comments for the
articles as well and we only want
comments if I user profiles here so what
we're going to do is we're going to
return this moth many because a profile
has many comments and we're going to
pass in the name of the comments method
the comment model and then we're going
to pass in the name of that method that
we just created so comment about just
like we created here very simple and to
get the add calls comments we can
literally just copy and paste that code
into here so now we've got all of that
done we're going to go to the profile
view and what we want to do now is
display a user's comments so let's get
rid of those articles and we're going to
say for each user comments yeah that'll
do
user comments as comment and for each
and for now we'll just say comment body
so I hit refresh and we're not seeing
anything because we're not on the user
profile we don't have any comments if we
go to Alex's how however we get this
this user is awesome comment which we
just created in the database so now
let's do the same thing for
and if we go to the profile here we can
literally just copy this and paste it
again
so let's indent that and change this to
articles or article go back to the home
page and there we have it there's our
comment and let's just move this rule to
make things a bit clearer and you know
what why not let's add a little header
so this article is awesome so let's just
quickly draw this in your head let's add
another add another comment to this add
or here so body will say hello world
user ID will say by the way this user ID
column is the poster ID so commentable
ID is the article ID since we're making
this for an article and then we provide
the article model hit refresh and there
we have it</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>