<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Learn PHP: Basic CMS - Setting Up (Part 2/8) | Coder Coacher - Coaching Coders</title><meta content="Learn PHP: Basic CMS - Setting Up (Part 2/8) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Learn PHP: Basic CMS - Setting Up (Part 2/8)</b></h2><h5 class="post__date">2015-07-11</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/tv31hTUJ-jc" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">now we know what our basic CMS is going
to look like we want to set up our
database we want to connect to our
database and set up the general
structure of our application and this is
really important to keep everything as
tidy as possible so the first thing that
we want to focus on is the CSS file here
which is going to control the styles so
you can either copy this down from this
video I'll just scroll down so you can
catch it or you can download it as part
of this course so now that we've got the
CSS file in place in this CSS directory
this is within a CMS directory here and
you can see I have this open in my
browser so we have the CSS directory
just there and we'll be creating all of
our files and folders within this
directory so as long as you're at this
stage we can go ahead and start writing
some PHP code but the first thing I want
to do is just focus on my database
design so if you pull up the client that
you use to edit your database with you
can see I've created a database called
CMS here so we're gonna create a table
in here called pages and this is going
to hold all of our pages so the client
I'm using automatically generates an ID
field but if yours doesn't you might
want to go ahead and add this ID field
the type of this needs to be integer you
can leave the length at the default
11 is quite long but it doesn't really
matter we want this to be unsigned
because it's always going to be above 0
and more importantly we have this as the
primary key in our database so make sure
you add a primary key to this table and
we also have an auto increment on this
under extra and all this means is
whenever we create a new page it
automatically gets assigned a new ID and
this increments from one output and that
allows you to uniquely identify each
record in your table so let's go ahead
and add the other fields that we need
the first one is label which remember is
the text that's displayed for the link
when
your user clicks that link and we're
going to set the type for this as a VAR
char and that just means a variable
character length so you can choose
anything for the length anything
sensible in our case we're going to
choose 20 we don't want to allow a null
for this it's always going to be
required all of these are going to be
required so that's pretty much it for
the label so we've got a varchar' 20 so
the next one is the title of the page
again this is going to be a VAR char but
this can be a little bit longer it's
entirely up to you which value you give
it and again let's uncheck allow null so
next is the body this isn't going to be
a var chart
it's gonna be a text type this is going
to allow for a lot more storage and we
don't need to give it a maximum length
this is just more convenient and
appropriate data type for our body so
again we're gonna uncheck around null we
also have our slug which is of our char
and I'm gonna set this the same as the
title so you might want to also generate
the slug at some point but we're gonna
be manually entering this but we're
gonna assume it's the same length as our
title so I'm gonna uncheck allow null
again so the next is the created date
and this is going to be a timestamp we
aren't gonna allow null on this because
we always want to fill it but the next
one is updated that's a timestamp and we
do want to allow null on this because
when we create a page initially we're
going to insert a date here when we
update it with insert a date here so
updated can initially be null so this is
pretty much it we've got our table set
up let's go to content and just add some
test content in here just so we can get
a feel for this and this will also allow
us to work out how we're going to
generate our created and updated dates
as well so when I click here this will
automatically assign an ID of 1 yeah it
hasn't shown just yet so I'm gonna say
that label for this is first page and
you can see that ID has been generated
there and created has also been
auto-generated if this doesn't happen
for you you can go ahead and use the now
function
CAPITAL LETTERS with parentheses
afterwards you can hit enter and that
automatically insert the date view and
you can do the same for updated so the
title can just be this is the first page
the body here we can just say welcome to
the first page and the slug will just
say first - page with no spaces so now
we've got a record in it in here this is
going to help us when we actually start
to build the home page which we're going
to focus on first then we can actually
see some data coming through and then
later on we can remove this when we add
the ability to add records in as well so
now that we've got our database set up
we need to work out how we're going to
structure our application so I'm going
to create a new folder within the root
directory CMS and this is just going to
be called app an inside app we're going
to store things like functions the views
for our application and also our start
file which is going to set everything up
that we need so let's create a new file
in here and we're going to call this
start PHP so we're gonna open our PHP
tags now what I'm gonna do for the
purpose of the video just in case we
come across any errors is we're going to
use ini set' and we're gonna change
display errors on this saves us having
to change it in our PHP configuration
file we don't it to be a global on for
display errors this is purely on a
application basis so we're just gonna
turn this on now when we finish
developing we can go ahead and either
comment this out or remove it all
together so now what we need to do is to
find some of the paths for our
application we're going to define the
route of the app so basically just this
route here I'm also going to find the
base URL for our application as well
that will just allow us to easily
generate links so we're gonna set these
as Global's you don't have to do this we
can use
other methods of configuration but since
this is such a small app or stick with
Global's and here we used two
underscores dir and then two underscores
so let's just go ahead and echo out app
route and see what that gives us now we
can't access this file just yet because
it's hidden away in this app folder we
could go ahead and navigate to this but
I'm going to create a new file just
inside of the root directory and call
this index dot PHP and this is going to
serve as our home page so what we want
to do in here is we want to require in
app start PHP start will require this
file in it will do everything that we
need to in here and at the moment we're
just echoing out the app root so when i
refresh you can see that app fruit just
here so it's basically the route to the
app directory where we're going to be
referencing things like out views and
anything else we need to later on so now
what we're going to do is define our
base URL again this is going to allow us
to inside of our views which were
centrally was displayed to the user the
correct links based on our absolute URL
and then paths so base URL and all this
is is simply a case of heading over to
your browser going ahead and copying
this URL pasting it in and I'm just
going to get rid of the trailing forward
slash there so now that we've done that
we haven't done much at all but the next
thing we want to do is connect to our
database so we can start to actually
output the pages that within our
database table so we're gonna say DB
equals I'm gonna assign to this a new
PDO object and all PDO is is a way to
access our database but we can use
different drivers now I'm using a MySQL
database so in here I'm gonna type my
SQL and then I'm gonna provide the
information about my MySQL server and
then my authentication details as well
so may use name and password if you just
set MySQL up this will likely be root
and root but we'll get to that in just a
moment
so the host is always going to be
something like localhost if you're just
developing on your computer or one 27.1
km/h if you don't remember that's just
here so the next thing in the next
argument so this all here is the first
argument the next is the username in my
case it's root and the third is the
password in my case its root and this is
usual for most default installations so
what we've now done it's got our
database connections set up but let's go
ahead and look at the structure of the
rest of our application so inside of app
we want a folder here called views this
is basically where we're going to be
storing them the mark-up that we have
for outputting pages we're going to
include our admin views in here the page
itself etc so we're going to leave this
empty for now because we're not doing
much in here now what we also want is we
want a folder in here for our admin
access so this is basically where the
files are going to be stored to go ahead
and add pages delete pages edit and then
obviously our admin home which is going
to list out pages so we're not going to
be looking at any kind of authentication
here apart from basic HTTP
authentication and if you're using
Apache all that means is creating a new
file in here called dot HT access and
we're also going to be creating an HT
password file as well and we'll go
through this in just a minute so HT
password PA SS W D so once they're
created if we go ahead and head over to
just admin you can see that we don't see
anything in here now our goal is to
protect this by allowing a username and
password to be given so I'm going to go
ahead and just copy and
taste this over you can see exactly what
this entails so we have an
authentication type of basic we have an
earth name which is just what's
displayed to the user when they hit four
slash admin we have an auth user file
which is an absolute path to your HT
password file so you'll need to modify
this for your path and you can see that
points to forward slash admin and then
this HT password file and then we have
require a valid user so what is a valid
user well when we refresh now we you can
see we get a prompt for authentication
the username in the password I can type
anything in here but at the moment we
don't have any username and password
stored in here so we get an
authorization error a 401 so we're gonna
head over to something like HT password
generator there's a website here there's
plenty of tools are online so you can go
ahead and choose the one you want so I'm
gonna go ahead and type in my username
there and I'm gonna go ahead and type in
a password and click create
htaccess file so that gives me the
following here so I'm going to go ahead
and copy this and I'm gonna paste this
into HT password and now when I go ahead
and refresh on admin I can type in Alex
my password just happens to be password
hit enter and there we go so I'm in so
that is pretty much the basic structure
of our application we've got our admin
area that we just created which is HTTP
or protected we've got our app folder
which stores our views and also our
start file where we can see our database
and to find some basic config here we've
got our CSS directory which you would
have downloaded or copied over which
basically contains the stars that we're
gonna be using for this and then we have
index dot PHP which at the moment isn't
doing anything but in the next part
we're gonna look at outputting all of
the pages that we have within our
database</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>