<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>PHP File Based Image Gallery: Gallery Class (2/3) | Coder Coacher - Coaching Coders</title><meta content="PHP File Based Image Gallery: Gallery Class (2/3) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>PHP File Based Image Gallery: Gallery Class (2/3)</b></h2><h5 class="post__date">2014-02-17</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/TXIt5oaVFOA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so now that we've starred up our gallery
we're going to go ahead now and actually
build the functionality into this so
back over to our code and we're already
looping here so we can leave this as it
is for now but what we want to do is go
ahead and build in the functionality to
instead loop of looping numbers one to
ten we want to actually loop through
images so what we want to do is if we
just close off this style sheet is we
want to create a new file and this is
going to be the PHP class for the
gallery and I'm going to store this
inside of gallery so I'm going to call
this gallery dot PHP with a capital G
just to signify that it's a class file
I'm going to go ahead and open my PHP
tags here now the class is just going to
be called gallery so we define it with
class and then gallery and then an
opening and closing curly bracket so now
all of the properties and methods magic
method that we're going to use the
construct method is going to go in here
now this is a you know fairly
straightforward all we look at here is
properties and methods which are
essentially just variables and functions
it's just the way we initiate the class
or instantiate the class that's
different to what we would do this was
procedural so what we're going to do is
we're going to first of all define the
path and how we allow the user to set
the path so we're going to create a
public property called path and that
means that it can be changed within the
class now we're going to create a setter
to set the path to a specific path
otherwise what we're going to do is
we're going to assume that the images
folder is within the same folder as the
gallery class so for example if I don't
specifically define a path it's going to
assume that the images directory sits in
the same directory as this gallery class
file so what we need to do is the first
thing when we instantiate this class go
ahead and actually set the path now
we're going to use the magic method
construct and let's just take a look at
what this looks like so we say public
function double-under store underscore
construct and what this is going to do
is it's going to do something when we
instantiate the class so if we echo out
hello for example and we go over to
index dot PHP now the first thing we
want to do is open and close PHP tags
and we want to go ahead and in require
this class file in so remember it's it
within gallery and it's called gallery
dot PHP so you want to say gallery
forward slash gallery PHP let's just
check that works just to make sure we
haven't done anything wrong find that
that class is now included so what we
can now do is we can say gallery equals
news to use the new keyword and then
gallery now we don't have to define
brackets like this we can just create
new gallery if we were passing in values
here so for example if I was passing in
you know tests here or something like
that I could go ahead and pick this up
here but we don't need to do that for
now so let's go ahead and get rid of
that okay so what that's done now is
it's instantiating instantiating the
class the gallery class and hello will
be run because construct is run when we
instantiate so when i refresh you see we
get the words word hello up there
so let's go ahead and get rid of that
because that's not too useful what we do
need to do instead is go ahead and set
this path and by default remember we're
going to set it to the path to assume
the images is within the same directory
as the class so to access this variable
or property up here we say this path
with no dollar sign here so we're not
including this dollar sign like this and
then we say equals then what we're going
to do is we're going to say dir with two
double underscores and then we're going
to append on backslash images so if we
go ahead and just echo this you'll see
that oops just go back and there we go
in the line with the Terminator and
there we are so this is the path the
assumed path if we don't specifically
define a path now we haven't included
the ability to find a path yet so this
is just what will be used and this is
absolutely fine it's basically just
looking my C Drive and blah blah blah
but all the way through to the image
gallery folder we're in here
and then for such gallery forward-slash
images so it's assuming that it's within
there if this class file was in a
different place then it would assume a
different directory so if this was in
the root directory it would look for in
images folder in here so anyway what we
now want to do is build a method to
specifically define the path or set the
path so we create a public function set
path now we need to be able to pass a
property into this so let's just take a
look at how we would actually use this
to pull this down a little bit so we
would say gallery set path and we would
say images /or gallery rather forward
slash images so that is how we would set
the path so we're in the root directory
here we're going to say we want it in
gallery and images so that's how we're
specifically defining the path so the
functionality would be we pass the path
in to this method here and that path now
is this value here and within this what
do we want to do well we want to go
ahead and say this path equals path so
now if I just go ahead and just get rid
of this echo and echo this out instead
now that we've run this method we will
now get the basically the value that we
passed in and this is absolutely fine
because relative to this directory
gallery images is fine gallery forward
slash images and there we are there are
all our images and our thumbnails so we
can do that either way now so we're
giving ourselves or whoever's using this
the ability to pass in their custom
directory I mean go ahead and get this
echo now what we do need to do there is
just a little bit bit of tidying up here
if I do pass in a forward slash here I
want to go ahead and just get rid of
that because what we're going to be
doing is in here we're going to be
defining that we want or rather inside
of here somewhere we're going to be
defining the we want it forward slash
something so we want to go ahead and
just clear this
/you no otherwise we don't really have
to do this but it's nice little touch so
what I'm going to do is in here I'm
going to create an if statement and I'm
going to say if substring so this is
going to take a part of this string
that's been passed in so path minus one
now this will basically give us the last
character so if we just echo that then
you can see that we get a forward slash
so it's basically taking this character
here so let's get rid of that so if this
is equal to forward slash then we want
to say path equals substring and this
time what we want to do is we want to
say path 0 minus 1 and what this will do
is chop off the last character and keep
the the you know the path without this
so now what we can do is go ahead and
echo this again and we'll see if we've
got gallery images despite the fact we
have passed in gallery images with the
forward slash at the end if we get rid
of the forward slash we get exactly the
same result so we've applied a little
bit of logic there just to check the
path and just tidy up we didn't have to
do that but it helps ok so the next
thing we want to do is go ahead and just
create a generic or and this is going to
be a private method so this is only
going to be able to be accessed within
this class so if we say public sorry
private function get directory all this
is going to do is provide generic
functionality to just get the contents
of a directory and return it so we
choose path here we have the ability to
define a path and we return scan dir and
then we supply the path now we'll just
scan the IRD
well let's just take a look at this
we're going to change this to public
just to test and we're going to do a
print R which is going to give us the
contents of the of an array sort of in
our browser output I'm going to take
gallery get directory and then I'm going
to choose a path so as
say gallery forward-slash images and
this is going to return an array of all
of the files within the directory are
specified so you can see at the zeroth
element we've got a dot and a dot dot
this is just sort of standard notation
for the directories we've also got this
as well which is thumbs which is a
folder so we want to ignore this and
ignore these and we'll look at the
functionality that will help us ignore
them later but these are what we're
interested in so we've created this
generic functionality to read from a
directory and we now know that we can do
that but we want to keep this private or
protected and just basically so you know
there's no access from this you know
within here ok so now comes the main
method into the last method that we're
creating and this is going to be the
public method called get images so this
is going to return all the images from
the path that we've specified here
whether it be the default path or path
has been set by the user so get images
it's going to take an optional parameter
and this is going to be extensions and
that's going to be an array so what
we're going to do is by default provide
jpg and PNG as the extensions that we
want to pull back from this directory so
this is basically saying well we have
this parameter but by default is this
array with jpg and PNG in so what we now
want to do is go ahead and create a
variable in here and that's going to
access the private method that we
created get directory so it's basically
going to then store all of the you know
contents of the directory that we
provided initially so this is going to
be this path so if we go ahead and
return images we can now see that within
here we could see a print or we could
say rather images equals gallery get
images and then we can optionally
provide this already but we'll look at
that functionality in a moment and I'm
going to go ahead and print our on
images and what we might do as well
do is just some reformatted tags here
just so it looks a bit nicer so this is
now our returned array of images now by
the end of this video we're going to get
to the point where we have all of these
we're going to have a thumbnail here and
a full path in so these images are going
to include the path I'm going to get rid
of these dots here and this thumbs
folder here so we don't need that in
there so let's get started now on actual
some of the logic in here so we're going
to basically loop through all of the
images so we're going to say for each
images as image so this is the first
one's gonna be dots then the next one's
going to dart and then sub on what what
do we want to do well we want to first
of all determine the extension of each
of these array items so I don't say
extension equals so this is a little bit
tricky but we're going to just set this
to image for now now the first thing
that we're going to do is explode this
string value by a dot so this is done
now is this has given us an array and
it's going to give us an array if we
just do a print our on extension you'll
see it might look a bit messy and in
fact let's do a print our with pre tags
okay so that is now going to look like
that so what's happened here is the
first array is the dot and that's been
exploded by dot so we have two of these
the second one is the two dots which has
been exploded by two dots so that's
three elements these are the ones that
we're interested in so what we want to
do is check these now this is now the
extension of the file that we're dealing
with and then thumbs we want to ignore
as well so how do we determine this well
we can use the array that's been passed
in to determine whether we want to
output a JPEG or a PNG or anything like
that so instead of doing that which is
again is useless we want to go ahead and
say end like that so I'm going to go
ahead and echo this
just a break on the end for example and
we'll now see that we've got this so
we've now got you know the sort of
extension here of the last element of
the array so what we want to do now is
say STR to lower and what that's
basically going to do is just if we echo
that again sorry we get a load of JPEG
so we get jpg jbg jpg and then thumbs at
the end which we want to ignore so in
here what we now want to do is create an
if statement and we want to check that
this extension exists within this array
whether it's been passed in or left as
the default so we use the in array
function and this typically takes two
parameters the first one is what you're
looking for and the second one is what
you're looking in so we want to look for
the extension in extensions so if that's
true or rather we want to say if that's
not true that means that the image is
not a valid image so we want to go ahead
and unset it and this will just remove
it from the array so how do we know
which you know image to unset well we
can add to this array or this loop and
we can say index this is now going to be
0 1 2 3 4 5 5 so a 0 indexed array and
this will be the index so we can unset
images and then we access the index like
that so now what we can do is if we
return images we can now see that if you
keep an eye on this part that the dots
go and the thumbs go because these are
valid files alternatively if within here
we were to say get images array PNG
they will go as well there's no images
so if we would say array jpg then we get
JPEG images so we'll leave that as it is
now because we'll just assume that we
only want to get JPEG images ok so now
what we want to do is go ahead and in
gallery and Crean else on this if
statement so if this is a valid image
what
- do we want to say images index equals
array now why would we want to set the
index to an array rather than the value
it contained well what we want to do is
if I just pull this down we want to
create a full key and this is going to
be the full path and we want to create a
thumb key and this is going to be the
thumb so now what's going to happen is
instead of these images we have lots of
arrays with full and Thummim so now that
we filtered down the actual images we
want output we want to go ahead and
create the path and then the actual
image name so what we do is we say this
path and then we append on a forward
slash and then we append on images index
like this or we could just append on
image so image so now it looks like this
gallery ford slash images forward slash
than the image name so we've now
filtered it down then we output in the
full path now we know that the thumb
path is similar to the full path but the
only difference is this within the
thumbs directory like that
so we inside of images we've got this
thumbs directory so we just do forward
slash thumbs and then the same image
name so now we've got an array of images
that we want to output with a full path
and the thumb path so now that we were
sort of returning this what we do want
to do is just create a slight sort of
difference this return here and we want
to say count images so we're doing a
ternary operator so we're basically
saying if the count of images is a
positive number
return the images array otherwise return
false and what this is going to do is
allow us to check whether there are
actually images before we start to
output them so let's just test this out
and we'll use var dump within our main
directory sorry our main fault our file
here so at the moment we're echoing
print our images so let's get rid of
this and save all dump images so at the
moment because we're selecting JPEG
images the
do exist so we get the output here so
this is just a sort of rough dump of all
of the stuff of all of the images but if
we change this to PNG you'll notice that
now this turns to false it so now it
actually would just for outputting
something else here aren't we let's just
get rid of that echo that's annoying so
now we're outputting folks and this'll
allow us to put this into an if
statement to determine whether there are
actually images to display so in the
next part we'll be doing just that and
then we'll be looping through to output
our images</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>