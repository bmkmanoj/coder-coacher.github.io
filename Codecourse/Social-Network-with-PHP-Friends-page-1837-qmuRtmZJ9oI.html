<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Social Network with PHP: Friends page (18/37) | Coder Coacher - Coaching Coders</title><meta content="Social Network with PHP: Friends page (18/37) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Social Network with PHP: Friends page (18/37)</b></h2><h5 class="post__date">2015-08-28</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/qmuRtmZJ9oI" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">now that we know how to list friends
we're gonna build up this friends page
and this is gonna do two things firstly
show the your friends basically this is
going to be accessible by you and it
will also show friend requests which you
can then click on and accept so we're
gonna build up this page ready to go
we're gonna output the list of the users
friends and then we can look later on at
from requests so we're going to build a
controller first of all and this is
going to be probably guest friend
controller and that's again take from
let's say the search controller here and
we'll get rid of D because I'm not going
to need that we will need user and we
will need request as well so we can just
get rid of that and change the
controller name okay so we're gonna
implement the index page here this
controller is also going to handle the
adding of friends as well and accepting
a friend's so we add our index page what
we want to do now is return our view
which is friends dot index and again we
can create this view down in our
resources section so if we create a new
folder here called friends create a new
file in here called index dot PHP will
take the template from home again so you
don't have to keep writing it out and
inside of here in the course downloads
you'll find the index markup for this
it's just a row with two columns and we
have two headers in here so it's not too
much trouble to write out yourself if
you want so we now need a route so let's
update our routes to be able to access
this page this is just gonna be general
friends routes and for this one
it's just going to be forward-slash
friends just the page so again I'm just
going to copy and paste this
it requires the author middleware which
is really really important I'm actually
gonna copy this one so you can either
put that in a route group around this if
you want to or just add the minutes
individually it's entirely up to you so
we change this to friend controller get
index and this is going to be called
friend dot index so let's head over to
friends page then and there we go so
we've got your friends known your
friends requests up here but let's just
add the link in the navigation to this
friend page first of all let's go over
to our templates on navigation and down
here when we are signed in on the left
hand side we've got our friends just
here so root friends stop index I'm also
going to update this timeline link while
I'm here this is just in fact the home
page because when we get to the timeline
the home page will become the timeline
so now we have oops okay so I think it
was friend or index wasn't that so let's
change that there we go so when we click
on this we can go between these two now
so this is going to be a list of our
friends we already know how to do that
so let's update our controller let's
create a friend's variable this is going
to be auth user friends remember that's
the friends method that we implemented
on the user model let's go ahead and use
our author facade up here and we'll pass
this to our view so with friends friends
like that and what we're gonna do is
we're gonna head over to our profile
index page and we are literally just
going to copy this which is the check to
see if friend exists and then loop
through so we're going to paste this
over
under our list of friends make sure it's
indented correctly and obviously here we
have a variable called friend so he just
say friends count we don't need that as
a method call and then here we can just
say you have no friends because this is
just a private page that you would
access so you have no friends which is a
bit cruel but so for each user friends
as user we need to change this to use up
friends as user because remember our
user block uses this user variable and
this should be okay as long as we've not
made any mistakes and there we go so you
have no friends
so I actually removed the friend
relationships but let's go ahead and add
these back in or just at least one of
them you can see here your friends Dale
Garrett there we go so this is pretty
much you know we've come a long way now
we've got a list of our friends we've
got a page that holds our friend
requests so we can check this but next
what we're gonna do is we're gonna look
at how we actually add a friend and then
later on we can look at accepting a
friend and then we can actually just
start to build this friend request list
up and then add to our friends without
having to manually add data into the
database so what I'd suggest you do is
delete all of the friend data from the
database if you don't already make sure
you do have a few user accounts that you
can test this out with and we're ready
to go and start adding friends</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>