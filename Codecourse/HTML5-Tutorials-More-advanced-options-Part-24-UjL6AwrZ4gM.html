<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>HTML5 Tutorials: More advanced options (Part 2/4) | Coder Coacher - Coaching Coders</title><meta content="HTML5 Tutorials: More advanced options (Part 2/4) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>HTML5 Tutorials: More advanced options (Part 2/4)</b></h2><h5 class="post__date">2013-03-17</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/UjL6AwrZ4gM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">okay so welcome to the second part of
the tutorial where we're going to be
looking at some slightly more or looking
at geolocation slightly more in-depth so
we're going to talk about some of the
extended position data that we can grab
from this pause argument that we get
within here so at the moment we're
taking the last two longitude etc but we
can do things like accuracy all sorts of
things so we'll talk about them in a
moment and the ones that will always be
available how to handle them water then
going to talk about handling errors so
for example what happens if the user
denies the request for our website to
try and detect their location what
happens if they are on a device that
suddenly goes offline or is offline and
they try and you know well we try and
grab their location we might not be able
to if they're offline also we have this
timeout option as well so if the user
takes too long and not the user if the
network takes too long to determine the
location we can then handle that error
as well we have also some extended
options that we're going to look at and
one of them is to enable high accuracy
so we'll took a tiny bit about that we
also have a maximum age which deals with
the caching of the location and how
often we need to retrieve the user's
location and/or we're going to look at
timeout as well so that ties into the
error handling for the timeout so we can
actually define the timeout period as
well so we're going to look at that and
in the next video we're then going to
look at using moderniser to detect
geolocation support which is really
important because if you're on something
that Internet Explorer an old version so
I eight or something you're not going to
be able to detect the user's location
without the use of an additional library
and we're also going to look at using
geo position j/s which allows us for
unsupported browsers to also detect the
user's location so we're going to do
this and then provide a fallback which
allows us to detect anyone's location so
this is really really important stuff so
let's talk firstly about the additional
position data that we can retrieve from
callback function so let's go ahead and
extend this so let's say come in we're
going to create another variable we're
going to say accuracy so what we can do
is determine the accuracy of this
determined location so we just do
exactly the exactly the same thing we
say paws Ward's and then we just say
accuracy and that's it now these three
are the only that always guaranteed to
be there will always return latitude
will always return and longitude
obviously if they're available and will
always return an accuracy as well so
these are the three that will always
return others may return null so we can
detect that by saying do they null if so
them no we can't use them so what we can
do now is we're not going to apply this
the map has absolutely no need to but
I'm going to go ahead and just alert
these out so I'm going to let out
accuracy now I told you in the first
video that the accuracy of this wasn't
actually that great and it didn't
determine my exact location it was
actually a few miles away so this is in
meters it returns it to us in meters so
when I click get location you see that
we've got this at one hundred and twenty
two thousand meters so that is the
accuracy the sort of window of accuracy
when I click OK we do the same and it
tells me I live downwind to our Road so
the others that we can do things like
altitude so that's just cords dot
altitude and the altitude accuracy as
well which obviously isn't going to be
available if the altitude isn't
available we also have things like the
heading and the speed so the heading
will be from the north it will be the
clockwise degree of that so we also have
the speed which is an is measured in
meters per second which also may be not
so we can we you know play around with
these that set that's the great thing
around this play around with it speeds
not going to obviously happen if you
don't detect the user's location more
than once so you know that doesn't
really make a difference so there's some
of the additional position
properties that we can take back from
the position object so let's go on to
handling errors where we may have a
problem with either the network or the
user denying or actually timing out so
let's go down here what we need to do is
we need to provide an additional
callback function I'm just going to call
this e I'm going to come up here and I'm
going to create a new function called e
again a global function so not advised
now in here what we can do is we can
pass through this argument error and we
can grab the the error code now there
are 3 error codes the first one is just
one and that means that the user's
denied the request for you to take the
position of their location the second is
whether if the network's unavailable if
then offline then we say sorry
you know we can't determine your
location and the third is just a timeout
which we can set in the extended options
a bit later so in here we can provide
you know a switch or and if statement or
something so let's just create a you
know quick if statement and we're going
to say if error code is equal to 1 let's
just say alert unable to get location so
let's go ahead and test this out we'll
go over to our browser and refresh I'm
just going to click get location and
then I'm going to remove the settings
for future visits so now it's going to
ask me do I want to you know the I want
localhost to take my location I'm gonna
click deny and then it says unable to
get location and obviously we don't show
the location on the map because I've
denied it through my browser now the
second one is whether if you know it's
unavailable I'm not going to go ahead
and unplug my internet connection right
now but if I was to do that then that
would be the second one and the third is
a timeout so if the network takes too
long to respond which is going to be
really difficult for me to recreate here
so I'm not going to go into that one but
we know we've got one it's denied two is
unavailable in three is timeout so these
can be applied here just as a sort of
fallback you might want to go and heck
and let the user know that they're
offline or let the user know that their
location is taking too long to to come
back okay cool so let's go ahead and
just re-enable this so we can look at
some more things let's click get
location and let's clear this click get
location allow and it grabs my location
not my actual location but you know even
off okay so the extended options well
where do we place these well we place
these inside curly brackets here so
we're sort of you know passing in these
these settings here the first one is
enable high accuracy now let's go ahead
and do this because this is quite an
interesting one I currently don't have
GPS enabled hardware because I am
working on my normal computer and my
location has been determined probably by
my IP address so I'm going to say enable
enable high accuracy true so let's take
a look at what happens here so I'm going
to refresh this and click get location
nothing happens now well it does happen
but the higher high accuracy
you know fails almost so you've got to
be careful with this one because on
specific devices this could fail the
reason being is just based on sort of
you know different permission settings
accuracy settings things like that if
you do have a GPS enabled device and you
run this you're going to get high
accuracy enabled every time we also have
an extended option which is maximum age
now this is sort of the cache window of
how long you want to determine the use
of the last location so let's just so I
picked up my stuff and moved house down
the road and then I determine my
location again if I had a large maximum
age this might return my cache location
so I might return you know the same
location I was up for hours ago for
example now this is measured in
milliseconds so we could put something
like 10 milliseconds which mean that you
know yeah well we could do that bit be
silly but essentially then that you know
when I determine my location the next
time I do it we're absolutely sure that
refresh and return the non cashed
location information you may want to
provide the user with the ability to
determine their location several times
so if they're traveling for example you
don't need absolute high accuracy you
can set the maximum age to something low
so all you're going to have to do there
is here just say maximum age and then a
value in milliseconds so we could say
for example a hundred thousand
milliseconds at 100 seconds or we could
say something as low as a thousand the
larger the value obviously the you know
we're going to return a cached version
within that period so let's go ahead and
get rid of that one for now the last one
is the time out so this is going to be
the amount of time that you know we need
to give them a the network to retrieve
our location so I'm going to test this
out I'm going to say timeout one and I'm
going to go over to my browser again and
I'm going to refresh and I'm going to
click get location and it works because
it's being extremely quick and I believe
yes okay so it works but we've set a
timeout anyway it's one and if you would
like to handle this so for example if
the if the time is taking too long to
return the time we can create some kind
of if statement here so error code if
that's equal to three alert to long I'm
not sure if setting this to zero would
actually work let's go ahead and try
this out and see what happens
yeah too long so I've set it to zero
which so you know we've caught the error
here because it's taken too long for to
return on location so we're giving this
zero seconds to return on location which
is obviously silly because we need some
time to allow allow to be returned so
for example if you need the you need you
know if you need this quickly change the
timeout setting okay so in the next
video we're going to look at using
modernizer to detect this support and
then if we can't detect support we're
going to use GOP
is and what this is going to do is it's
going to allow us to detect location on
unsupported browsers</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>