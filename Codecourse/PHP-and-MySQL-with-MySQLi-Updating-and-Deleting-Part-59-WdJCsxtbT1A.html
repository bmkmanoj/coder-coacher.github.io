<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>PHP and MySQL with MySQLi: Updating and Deleting (Part 5/9) | Coder Coacher - Coaching Coders</title><meta content="PHP and MySQL with MySQLi: Updating and Deleting (Part 5/9) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>PHP and MySQL with MySQLi: Updating and Deleting (Part 5/9)</b></h2><h5 class="post__date">2013-10-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/WdJCsxtbT1A" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">now what we're going to look at is
updating and deleting records from a
database so we already know that we've
got two records here in our database
table but what we're going to do is
we're going to update them based on
certain conditions so we're going to
look at a couple of SQL queries that let
us update or manipulate our database
data in certain ways so for example we
could update the created date to the
current time or we could update the last
name to something else where the
first-name equals something or we could
do even do it by unique ID
so we could say update you know the
person at record - for example that
that's their unique identifier so let's
go ahead and look at how we will
actually would actually perform an
update query now this is exactly the
same as performing an any other query so
we're going to use the if statement that
we looked at in the last part to
actually perform a query within here and
then assign it to a variable so that's
how query we want to assign it to an
actual update variable this doesn't
really matter what it's called at this
point but we now want to actually write
out SQL our structured query so I'm
going to say update that's the update
keyword and I'm going to choose the
table that I want to update so this is
going to be people so what we can do is
we can update everything we don't need
to define a where clause and so we could
say update people set this is going to
set a particular field to a particular
value so I'm going to set created equal
to now remember we looked at the now
function when we're actually building
our database table so what this is going
to do is it's going to perform an update
query while checking if it would success
success or not and then what we're going
to do is we're going to check how many
results were actually how many rows were
actually updated we won't do that just
now but we look at that in just a moment
so if we go to our browser and actually
run this refresh looks like everything
was okay but then again we're not
outputting any errors so we wouldn't
know but let's go over to our database
and check so keep an eye on these times
this time should then update so if I
click browse you can see that time is
now updated but
we've used the now function the MySQL
now function that's automatically
changed this for us and this if this was
a week from today
it would update the date as well so now
that we've updated that record what
we've updated all records we might
actually not want to do that so we can
use something called a where Clause so
we can say update create update people
set created that equals now where and I
can say something like ID equals one for
example so now what this is going to do
is it's going to only update one record
now before we do this let's just take a
look at the affected rows property that
we returned by the MySQL object now
again remember from last time we had
echo DB num sorry we had echo result num
rows now in this case you might assume
that we can say echo update num rows in
actual fact we can't so when we go ahead
and refresh nothing no nothing appears
despite the fact we've just updated two
records again that's because we're not
actually returning any data so there's
no rows returned we can prove this by
just doing a print R and again this is a
great debug way of sort of debugging we
can print our an update and see what it
returns to us it just returns one now
why is it returned one you know what's
happened here well let's go ahead and
just change this table name and let's
check what this value is now nothing so
this is a little strange so instead of
doing a print R let's do var dump and
what this will do is it will return the
variable type and the value to us so now
let's go ahead and refresh our we now
see that one actually meant true so
rather than it being a one value that
was returned it actually means true now
let's go ahead and change this to
people's and see what happens
nothing so it returns true when it's a
success so we already know this now that
we can actually you know now we've done
it but we know that doesn't return num
rows or anything like that what actually
happens is the DB object so that
general database object that we used to
create has a property called affected
rows updated and this means anything
that any row that was affected by the
last query and is applied to this to
this property so what we can now do is
refresh and we see we get to back we
know that we have two rows that were
affected now if we were to introduce
this where Clause so I'm going to say
where ID equals one what this is going
to do is it's going to set created to
the now the value of the now function
only where the ID is equal to one so
when I when I go back to my browser here
and refresh the page keep an eye on just
the first records created date when i
refresh we get one returned that's not
the same one as the one we just looked
at the true value is actually saying we
have updated one record so now when i
refresh you see that only that value
changed so we can use where clauses to
to update we can use different operands
as well so we could say where ID is
greater than one and in this case what's
going to happen is when we refresh we
update one record but we only update
record - because that's great the only
record that's greater than one so we can
do all sorts of in here we're not going
to go too much into SQL theory or SQL
syntax but that's essentially how we
update that people table and set a
particular value so we could say set
last name equals now this is string data
so we need to put this in single
quotation marks so I'm going to set last
name to j.r.r each with a single T in
fact let's just change this all together
to Smith for example and I'm going to
say we're ID equals to okay so what this
is now going to do is it's going to
update the last name for that user at a
position to so when i refresh one was up
one was affected and when i refresh now
this last name has changed so let's go
ahead and just edit that back to normal
okay so now that we know how to update
how do we delete well deleting works in
exactly the same way except we're not
setting any values we're deleting things
and the affected values property on the
database object the MySQL object is
exactly the same as well it will tell
you how many records were deleted so in
this case we want to say in fact let's
remove this query altogether we want to
say delete from people now what this is
going to do this is probably the most
dangerous query you could execute if you
had a database full of data this is
going to delete everything everything
you've inserted into your database
already so I'm going to put a where
clause on here I'm just going to say
where ID equals oops where ID equals one
like that so we're deleting from the
people table where the ID equals one
we're gonna we're going to say oh yeah
get these effective rows back so when i
refresh one record was affected which
ultimately means one record was deleted
and we're only left with one record so
if you want to learn more about actually
you know how you construct your queries
and different things that you can do
with queries particularly things like
selecting and updating then it's a good
idea to go ahead and research SQL once
you understand how to use MySQL I the
MySQL I extension whatever queries you
put in doesn't matter that's that's
related to your application and what you
need to retrieve from your application
and SQL queries can be as simple or as
advanced as you like but that's
basically how we would update or delete
records how we would check the affected
rows which is obviously as we've seen
different from the number of rows
because we're getting this from the
database connection object or the MySQL
I object rather than the MySQL a result
object</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>