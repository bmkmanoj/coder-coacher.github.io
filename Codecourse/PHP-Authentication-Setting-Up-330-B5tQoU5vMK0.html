<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>PHP Authentication: Setting Up (3/30) | Coder Coacher - Coaching Coders</title><meta content="PHP Authentication: Setting Up (3/30) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>PHP Authentication: Setting Up (3/30)</b></h2><h5 class="post__date">2015-05-25</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/B5tQoU5vMK0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">now that our project dependencies are
downloaded we want to set up our
framework so we can start building this
authentication system onto it so we're
gonna look at a very brief project
structure and we'll be adding to this
later on but this will give you a good
idea of how things are going to be set
up so over in my browser then we're just
in the root directory that we're working
in but we want a public directory this
is where our index dot PHP file is going
to be stored and this is also where our
things like CSS files JavaScript files
anything you want to add to this after
you've finished the series that's where
you're gonna store all of that this
allows us to keep our public files
separate from our project files we're
not gonna be creating lots of different
files within one directory so let's
first of all create this public folder
then so create that in our root
directory here and let's create a new
file in here and we'll call that index
dot PHP so that's the first file that we
get so let's navigate over to public and
this is where we are going to be working
with in this series so there's nothing
here at the moment but inside of here we
want to bootstrap our application so our
app files are going to be created and a
new folder called app so separating
application files from public files so
again you can create new folders in here
if your CSS and your JavaScript if you
want to add them later on
so to bootstrap our application we need
a start file within app so let's create
that now I'm going to call that start
dot PHP or you can call it bootstrap dot
PHP whatever you want and inside of here
we need to do a few things because we
are building an authentication system we
need to start sessions we need to load
in our composer dependencies and then we
need to boot up our slim application so
we can start writing the routes which
we'll look at later so don't worry if
you're not too familiar with routing so
first thing then we are going to start
sessions so we're going to say session
cache
limiter false and then session starts
that's the first step the next step is
to define out include route so let's do
this now as a global what we do is we
define include route as using the d'art
dir name function and then we have dir
in here so what does this give us so
let's just echo out Inc route now
obviously this file here this start file
won't be accessed at the moment because
we're on index dot PHP but all of this
all of this bootstrapping in here needs
to happen so we need to require it in
from here so we're going to go back a
directory into app and pull in start dot
PHP so now when i refresh you can see
the full path to this app authentication
directory this just makes it easier to
include files along the way so I'm
currently working in users Alex Garrett
Dropbox htdocs tutorials authentication
but this is likely gonna look different
to you so don't worry if it does so now
inside of our bootstrap we want to
require in all of our project
dependencies you might have been
wondering how do we include all of these
files that we included in the last part
well if you look inside the vendor
directory you'll have an auto load PHP
file all this does is it requires in all
of your project dependencies and any
class Maps or autoloading you've defined
within composer and we'll be looking at
that later so all we need to do then is
require in Inc root and then we're going
to append on vendor auto load dot PHP
and that is it that is every single one
of our dependencies included into our
application so we can start using them
so just very quickly what I am going to
be doing is in my PHP configuration
I have display errors turned off which
is sensible even on a production
environment but just for the purpose of
this series I'm going to turn them on so
up here we'll just do after our sessions
actually I'm going to say ini set'
that's our PHP initialization file
display errors on and that means that if
we do come across any errors we're
definitely going to see them and we're
not gonna see blank white pages which
can be really confusing so that is
pretty much it just for the basics we
have all of our dependencies loaded in
we have session started now we want to
focus on building up the actual
framework which is our slim application
and this is very straightforward
all we need is an app variable which
will serve as our entire application so
everything will be attached to app and
here we create a new slim instance and
that is it we can now create routes
which is essentially in your URL just
pages that your users are going to visit
and we can define the options from this
so let's see what happens when we
refresh our browser we will get an error
and we see class slim not found now the
reason for this it's slim as well as all
of our other packages on namespaced now
we'll be looking at name spacing
throughout this video and it's a really
important concept within development so
if we just open up slim here you don't
have to do this I'll just show you and
then we open up the slim file here you
can see if we scroll down we've got this
class slim which we've just created a
new instance of but it's names based
under slim now the reason that we name
space is so we don't have conflict if
for example another package had a class
called slim we would be in trouble
because we have two classes with exactly
the same name and we don't want this so
at the top of this file we're gonna say
use slim slim so this is the top-level
namespace and this is the class name
what you could also do is say new slim
slim and get rid of that but highly
advised you use import statements at the
top here rather than doing that because
it just makes it a little bit easier to
manage so now we won't get the error
because we've defined the correct
namespace and
just see an empty page that's not
because there are rowers we just haven't
done anything yet so let's say app get
and this is might be a slightly new
concept routing is essentially defining
URLs that your users can visit and then
from them URLs you can execute code this
means that we don't have to create in
our public directory login dot PHP
register dot PHP change password dot PHP
and this keeps our application nice and
tidy and we'll be separating these
routes into different files so for
example when you go back to your
application and you want to say oh I
want to update the way change password
works you can just go straight into that
single root and update what you need you
don't have to mess around with huge
files with lots of code in so I'm gonna
say app get forward slash test and then
I'm gonna define in here a callback so
this is just a function like this and
all this is going to do is inside of
this function when we hit this in the
URL it's just gonna execute the code
inside of here so I'm just gonna say
this is a test route so this isn't
actually going to work at the moment and
we'll see why in a minute so when I hit
test
we see not found and this is just a
standard web server error the requested
URL cannot be found um it's this test
directory so at the moment our web
server is thinking that we are looking
for a directory now I'm using Apache
which means I can create an HT access
file in my public directory which will
recruit all requests after public into
index dot PHP then Slim can pick them up
and execute the write code so let's go
over to our public directory and create
a new file and let's call this dot HT
access like site with a dot like that so
let's save this out and this is just
pretty much standard code that you would
find in any HT Access file that routes
very basic requests through to a file
all we're doing here is rewrite turning
rewriting on we're taking anything after
this public
/and we're routing it into index dot PHP
and all that means then is that these
requests will be passed through into our
start file and then they'll be outputted
now I've just realized that inside of
index dot PHP we haven't actually run
the slim app and that was why we didn't
see anything when we were on tests or
even on the home page so that was my bad
but let's go ahead and just change that
in here we're gonna say app run so now
when we go over to our home page we see
a 404 not found so this is just a slim
404 not found error and I don't worry
about this because it's all it means is
we don't have a root setup for our home
page but if I now go to tests you'll see
this is a test route and obviously this
can be absolutely anything we can
include things like placeholders in here
so for example name we can pull in the
name and then we can say something like
hello name like so so we could go ahead
and say test tabby like that and that's
how we pass data into our application
via the URL if we need to okay so let's
get rid of this test route because we
know that that is all up and running we
now have our index.php file which is
bootstrapping our application and then
running our application and we have our
HT access to handle the routing we
looked at an example of a test route
which we're going to be creating a lot
of every single page on our site and we
are pretty much ready to go now however
what we do need to tackle in the next
part is setting up configuration which
can be really boring but trust me this
is going to give us a really easy way of
providing database configuration
providing session configuration hashing
configuration anything we need to do
within our application it's going to
save you a lot of time in the future so
in the next video
we'll look at setting up configuration
with that package we installed earlier
and switching modes between development
and production when we need to</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>