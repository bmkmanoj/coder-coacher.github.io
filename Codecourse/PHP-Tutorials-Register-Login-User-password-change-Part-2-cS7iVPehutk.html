<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>PHP Tutorials: Register &amp; Login: User password change (Part 2) | Coder Coacher - Coaching Coders</title><meta content="PHP Tutorials: Register &amp; Login: User password change (Part 2) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>PHP Tutorials: Register &amp; Login: User password change (Part 2)</b></h2><h5 class="post__date">2009-02-21</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/cS7iVPehutk" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">okay this is the second part of the
change password tutorial in the last one
we checked if our foremost was have been
submitted and we got our data values in
here now bear in mind the inside our
database our passwords are encrypted so
what I'm going to do is as soon as these
fields are coming in I'm going to
encrypt them to md5 into an md5 hash so
25 and make sure you got your brackets
on the end here I've already got the
money because I've been fiddling around
before but yeah so when it md5 and this
here wife that I've highlighted is our
parameter so here we're going to have
our md5 encrypted passwords okay so
we're going to need to check check these
fields whether they exist or not at the
moment when we submit up we can see that
nothing really happens okay so I'm going
to say yes in fact no what we're going
to do is check password against DB so we
need to connect to our database okay now
bear in mind we've connected to our
database in a several in these pages say
the log in page where we have connected
you can put these into a separate file
and say like include and then include
your like connector PHP with your
one-time login script in so you don't
have to keep typing out but for
tutorials sake I'm going to keep typing
out over and over again because it's a
good way to learn so we're going to say
connect equals mykes SQL connect and
we're going to be connecting to our
local host database with my username is
root and the password is nothing and I'm
going to select my database so that is
PHP login I believe which I'll bring up
the example you can see here PHP login
and our table is users so we can use
that bit later on then we're going to do
is we're going to create a query to get
the passwords so I'm going to call it
query again
and this is going to be a my SQL my
MySQL my MySQL query and this is going
to be a select password we need to
select the password from the database
and that's from users remember you can
see here this is our users table and
then I'm going to say where the username
is equal to user remember this is our
session variable holding the users
username so what we're really doing is
we're selecting our password hash here
from this table where the username here
is equal to my session name which at the
moment is equal to Alex so that's how it
should be a successful query you can
stick on the end of it or die
query query didn't work or something
maybe more imaginative with error
messages but as as you can see I'm not
at the moment
and the same with here you can say or
Die and you can add your error message
in for time sake I'm not going to at the
moment okay now we're going to use this
slightly differently before we use the
while function to loop through each
record in the database at the Mokka what
I'm going to do now and suggest it
through a comment someone post a comment
to me suggested this I'm just going to
say while row equals MySQL fetch Assoc
oh you've seen this come on before and
that's query gap and we're going to set
our old password DB and create a new
variable name don't mistake this with
old password that has been submitted our
old password inside our database is
going to be equal to the row remember
remember this creates an array so this
value is password because inside our
database this is password here you need
to use the labels and so from here on we
can
our passwords so checking our old
passwords my new password is just the
same as a simple if statement so if the
old password this is one of these as
typed is equal to the old password
inside the database okay
these are both md5 hashes because up
here we converted it to an md5 hash and
if the old password is equal to the new
password we're going to run a block of
code otherwise we're going to kill the
page and we're going to say old password
doesn't match okay so here presuming
we've got passed the first stage of our
validation we've checked the password
the old password to the new the old
password to the old password in the
database now we need to check two new
passwords okay and this is just systems
the same if the new password is equal to
the repeated L or repeat new password
then we can run a block of code
otherwise we're going to kill the page
and say new passwords don't match okay
so here this is success and then now
we're going to say a change password in
database okay so for now what I'm just
going to do is echo out so SAS and I'm
going to go back to my page mail
possible even I'm going to type it wrong
on purpose I'm going to put a load of
rubbish and my new password I'm just
going to type ABC clicking change
password or password doesn't match if I
type ABC as my old password which is and
I type say 1 2 3 and then a loaded
the next thing will get the error
message oh now isn't machen let's see
ABC if old password equals equals old
password DB row password query get so
what we can do here to debug is just say
echo old password DB with a break on the
end okay and echo new or old password
and what we can do now is we can run
script again so old passwords ABC new
password two three three letter rubbish
okay so let's compare these yeah they
both look the same to me so we can see
that that's actually lucky and but we've
got a problem here if old password
equals equals old password DB just
trying to see if I spell anything wrong
okay I just paused the video and I found
out the problem if I go back to my
database here I had in fact and I did
this in myself this by Lee and I've
created a space at the end of this you
can see highlighted in blue I'm just
going to get rid of that and click go to
change that and I'm going to come back
to my page log in as usual log in ok and
click change my password let's have my
old password incorrectly and a load of
rubbish for two new passwords you can
see that my new passwords don't match
we've echoed out this already we can
delete this soap resuming my new
passwords do matched we're going to echo
this success message so let's just go
and delete these there with a debug
purposes and I'm going to type in my old
password my new password one two three
and one two three click Change Password
and we've got success with only one see
but never mind
so I apologize for that last that will
slip up there by now in the third part
of this tutorial we can crack on with
actually updating our users updating on
users password and just making sure
everything's working okay and making
sure we don't have any more errors okay
so thanks for watching and join me in
the next part to find out how to
continue all right buh-bye</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>