<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Using Eloquent Outside Laravel | Coder Coacher - Coaching Coders</title><meta content="Using Eloquent Outside Laravel - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Using Eloquent Outside Laravel</b></h2><h5 class="post__date">2014-09-26</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/m-P8Ssi97RU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">in this video we're gonna be looking at
how to use la Ravel's eloquent RM
outside of laravel we're gonna be doing
this completely from scratch so you
won't might want to build up a little
example project as we're gonna be doing
in this video and then this is going to
allow us to do things like find a
particular user use this we're method
that you've seen and everything that
you'd be able to do in our eval so if we
take a look inside of our database this
is actually working at the moment this
is the complete code you can see we've
got three records here and at the moment
in this first dying dump I am finding a
user with an ID of one and just simply
outputting the username so this gives us
a string Alex as you can see in the
database there and we've also got the
ability to use other methods like I just
said and that that gives us similar
results
so everything that you'd be able to do
with eloquent you will be able to do
once you've finished this so as I
mentioned we're working completely from
scratch here I've just got a empty
folder here called eloquent and we'll be
pulling in the dependencies that we need
with composer and then creating our
files that we need to build up and use
models so really the first step is to
pull in the database module from the
laravel framework and obviously this is
under illuminate so if we look down on
the github repository here we can see
this database module here what we're
gonna be doing is pulling that in with
composer so we can find this on packages
just here so we can choose which version
we want to pull in in my case I'm going
to be pulling in for point to point star
so we can do this directly from the
terminal or you can create a composer
JSON file under your directory that
you're working but let's take a look at
how we can actually search and
everything with with composer through
the command line so the first thing we
need to do is we can go ahead and we can
search for packages so we can search
perhaps for illuminate database and that
will give us the following ah what we
want to do is we want to go ahead and if
we just run composer again we want to
show information about particular
packages so we can say composer show
illuminate
database and that will give us all of
the version information that we need
like so so we can see all of the
information about this two versions etc
etc the different requirements that this
particular module has so as I said I'm
gonna be putting in for point to point
stars we can say composer require
illuminates database and then that'll
ask us for a version so we'll say for
point to point star now we'll go ahead
and first of all add that to our
composer JSON file but it'll also pull
in that and the dependencies as well so
these are now within a vendor folder
much like you'd see actually within
their eval and this obviously pulls in
the dependencies like carbon when you
access dates using eloquent they're
automatically instances of carbon so you
can go ahead and use all the dates that
you all the bait functionality you need
using carbon anyway let's start to set
up our actual app and then we'll start
to look at how we can pull in this into
our project using the capsule manager so
an under eloquent I'm gonna create a new
folder called app and this is just where
we're going to store all over our
application stuff so I'm going to create
a new folder called models and we'll be
working with users as we saw in the
database I've got a structure like this
with an ID
autoincrement blah blah username an
email so inside of models let's create a
new class so we'll say class of user
maybe and let's save that out as user
dot PHP and what we're now gonna do is
create a file which will initialize
everything so pulling out our composer
auto loader etc so let's call this init
dot PHP you can call it whatever you
want really so to load in these models
I'm actually going to load up my chrome
host JSON far and down here I'm gonna
say auto load and I'm gonna load in a
class map here so class Marvel defined
my class map in this case this will be
anywhere that you want to pull in in my
case it's app model so that's going to
auto load these in to head over to
composer we can say composer done auto
load like so and there we go so now what
we can actually do is inside of our main
eloquent
folder we can create a new file here
called maybe index dot PHP we can
require in our app in it uh PHP file and
we can do something like the following
so because a new sorry user equals new
user we could say something like
username equals Alex and then we could
say echo user name much like you do with
a normal class so if we just head over
here oops we need to load in obviously
our composer autoloader
so it's vendor auto load dot PHP that
just pulls in all of our dependencies as
well so that will pull in all of the
dependencies here
so now we'll see the following so we've
got access to our user model here but we
want to make this so it extends eloquent
much like you do within the Merivale so
we'll get rid of this for now and we're
gonna go ahead and look at how we can
pull in eloquent now so under in it we
need to actually go ahead and pull this
in and we use the capsule manager to
easily use things out of land outside of
laravel that's its main purpose so what
we can do is we can either say something
like capsule equals new and then its
namespace obviously so we could say
something like new illuminate slash
database capsule manager and we're gonna
call that capsule within here you can do
that or more appropriately we would take
this or this rather and up here we use
it like so so we can say new capsule so
that's now going to give us the ability
to add our new connections and then boot
eloquent so we can use it but obviously
we need to provide our connection
settings to our database and we have a
add connection method that allows us to
do this add connection and this is just
an array within here so all we do is we
choose the driver that we want to use
much like you'd see
laravel configuration we're gonna choose
mysql we would obviously choose a host
in here so one two seven not the one we
would choose the database that we're
working with in this case that's website
as shown here and we can do a host of
other things apart from our username and
password in this case my username and
password it routes now we can also do
things like to find the character
encoding so in this case it'd be utf-8
we can define the collation so utf-8
unicode CI and we can also give our
table our database tables our prefix so
you can do whatever you want here I'm
just gonna leave this blank for now so
now what we want to do is we want to set
this as global so we can access static
methods so we say captial set as global
and then we want to be eloquent which is
obviously important so boot eloquent
just allowing eloquent to be used so now
that we've done all that that's now
going to give us the ability to actually
work with eloquent obviously at the
moment our user dot PHP file with our
user class in doesn't extend eloquent so
let's do that now now this isn't going
to work if we just look a refreshing
this oh we need to make use of the class
first so let's just say user because new
user and head over here you'll see it
says class Allah Khan not found and
obviously that's because what we need to
do is we need to provide the name space
for eloquent so up here we can do the
similar thing you can do it down here
but it's probably a lot easier to do at
the top it will be illuminate database
eloquent and then model and we use that
as eloquent so now we're using this
model which we can obviously extend
giving us all of the functionality we
need so things
the wear method the while anything
really so now that's actually gonna work
but we're not actually using anything
yet so on an index page let's actually
try to create a new user
so in laravel we do user create and then
we provide the information that we know
that we need so I can say user name
let's say Ashley and we'll say email is
Ashley at code cost comm so you'd expect
this to just go ahead and create a
record in the database here so at the
moment we've only got three records but
when we refresh we get a masses a mass
assignment exception thrown and that's
because we haven't provided the fillable
fields between user remember this works
exactly the same as it does within
laravel so we create our fillable
property here which is just an array
containing all the fields that we're
allowed to fill so in this case username
and email so now what's going to happen
when we refresh we get a updated at not
found in this column now this is because
it's automatically looking for an
updated app and it created at a
timestamp field within our database so
we've got another problem but we can
easily fix this by basically just saying
dates equals and then an empty array so
oh sorry it's timestamps and updates
timestamps so there we go so inside a
sequel pro now we see that record
created perfect so we're now actually
using eloquent within our application
and obviously what we can now do is we
can do things like die and um
user find one we can grab the user name
here and obviously that's going to give
us a string of four characters of Alex
and then you can go on to use similar
functionality so user where the email
equals Alex a code course comm we need
to use our first method here and then
username and there we go we get exactly
the same result so just by doing this
obviously your application structure is
probably going to be a little bit
different the concept is the same
and what's great is you can use this
with frameworks like slim which is a
popular PHP framework because that
doesn't contain database functionality
itself so we can implement this same
concept here as long as you've got a
model and you've provided the correct
namespace you can extend eloquent you
can go ahead and use that once you've
connected to your database using the
captial manager make it easier to us
easy for us to use this outside of
laravel so that's pretty much it we've
looked at how to purl in our
dependencies how to create a model and
extend eloquent and obviously we're
using this functionality now outside of
laravel</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>