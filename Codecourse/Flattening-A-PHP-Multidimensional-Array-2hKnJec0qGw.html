<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Flattening A PHP Multidimensional Array | Coder Coacher - Coaching Coders</title><meta content="Flattening A PHP Multidimensional Array - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Flattening A PHP Multidimensional Array</b></h2><h5 class="post__date">2015-04-05</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/2hKnJec0qGw" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so if you need to flatten a
multi-dimensional array in PHP we're
going to be looking here at two
different methods to do this now the
first one's going to be a little bit
more of a both it's going to involve
looping through the array to actually
sort it and create new array as we need
and the second is going to use some
standard PHP classes which is going to
give us a lot less code that we work
with it's a little bit more complicated
to understand because we can't
explicitly see what's going on but both
of these methods work pretty well to
flatten a multi-dimensional array so you
can see the result of it just here this
is one of the methods they both
obviously come out with the same result
and I've chosen to create an array that
was some kind of validation and this
contains different keys with an array
within them keys or within them values
so let's take a look at the first method
then we'll jump straight onto the second
method and you can choose which one you
want to use either way it's a good way
to go through this just to learn about
how this can be done if you ever do need
to do this in the future so let's crack
on with the first method then so the
first method involves creating a basic
function which is going to loop through
all of the items within the array that
we provide and if it finds that there's
another array within any of these values
or these keys it will go ahead and it
will call itself again and that allows
us to have an unlimited amount of
nesting and then we can build up a new
array and then return this from this
function it sounds a little bit more
complicated than it actually is so let's
go ahead and start building it and just
see what this looks like so we're going
to define the function called flatten
array and we need to work out what's
going to be passed into this array now
initially all we're going to need to
pass in is an array of items
the reason I'm type printing this is
because if anything else other than an
array is passed in this will give us an
error we want to make sure that this
isn't actually an array so if you don't
already have an example array go ahead
and build something similar to this just
so you have some kind of data to work
with so the next thing then is within
here we want to loop through the
items so we're gonna create for each and
for each of these items loop we're going
to call this item so we can now work
with this item in here let's just do a
quick var dump on item just to see what
we get out and you can see here we get
once we call the function so let's just
call flatten array array which is this
variable up here we get the following so
we've got three arrays here so as we go
through this main array the first thing
we want to do is check if this key here
the value of this key here is an array
because technically we could have
something else down here which is just a
string and it doesn't contain any value
doesn't have an array within it so we
want to include them values as well so
in here what we're going to do is we're
going to check if that item is an array
and let's just go ahead and var dump the
result of flattened array just so you
can see the new output so if this item
is an array so this is an array this is
an array and this is an array we could
just bring back our single string value
just here then what do we need to do if
this item is an array well we need to
define a new variable called flattened
which technically isn't going to be a
new variable because we're going to pass
it in with our arguments just up here
and we're going to call this function so
it's going to call itself I'm gonna pass
in the item and a flattened array that
we currently have and this flattened
array needs to be passed in and also
defined here as an empty array so let's
just go through this once more when we
originally call this flattened array
function we pass in an array here and we
also have a value an argument called
flatten which is by default an empty
array
now for each of these loops if this
happens to be an array which it is we're
going to call the same function so we're
going to call this this function and
we're going to part in that particular
item which is this here and that allows
it to run all over again and then check
if there are any arrays within this
array so it's going to obviously work
with the multi-dimensional array that's
the point of this
but what we're also going to do is we're
going to pass in this flattened variable
which for the first loop will be an
empty array and then we're going to
assign this to it again we're going to
assign the return value of this to this
flatten the flattened variable now what
that's going to do is it's going to keep
adding to that variable but at the
moment it won't all we're doing is we're
assigning the return value of this now
what we're going to do outside of this
if statement is we're going to actually
append to the array and we use the
square brackets like this just after the
variable to do this and that's going to
be item now this will be appended to
this array here if this is not an array
so let's say we go on the first loop
this outer thing is an array so this
array here variable is an array so when
we go through each of these items so
let's say we get to name this is an
array so because it is an array we're
gonna call it again with that item and
that first item will be this that isn't
an array it's a string value so we skip
this if statement and append that string
value to this flattened array here the
second time it loops it'll it will look
for this so this is a string again so
we'll append this again it will skip
this if statement if we did happen to
have an array in here so key and have
another array with something in then
what's going to happen is it's this if
statement is going to return or is going
to evaluate to true because we have
another array in here it will call it
again it will find this string the next
time around it will skip this if
statement and add it to here so if that
still doesn't make sense write the code
out anyway but just take a while to go
through this maybe put some var dumps in
and just see what kind of day
that you're getting back here so now
that we've done that we're not actually
returning anything from this function so
we're going to go ahead and return that
flat underwrite or that flattened
variable which is an array in itself so
now what's going to happen is when we do
a var dump on flattened array it's going
to take in this array loop through it as
I've just explained and it will append
to this flattened variable here and then
return it at the end so we'll get out
the following oops let's just go ahead
and modify this to continue if that is
the case because we don't want to go
ahead and if this isn't a rally we don't
go ahead and append it that's what's
happening here at the moment so we get
the following so that continues
statement is really important because if
it is an array we don't go ahead and
append it to our flattened array which
will contain only string or integer or
float values so that's the first method
as you can see a little bit more verbose
than we would probably like but it does
work you can see that we've got this
something else string here at the end
which is just floating around at the
bottom of this array in the last key and
we've preserved the key values because
remember of building up a new array and
this works perfectly however there is
another method that we can use which is
a little bit simpler to write it's less
easy to understand in terms of just
looking at the code so it will look a
little bit more complicated but I'll try
my best to explain as we go so let's
head over to this second file then which
is doing nothing at the moment and let's
go ahead and start to look at how we can
do this so I'm gonna create a flattened
variable here and I'm going to create a
new recursive array iterator instance
let's just change that iterator so we
have a recursive array iterator this is
a standard PHP class that allows us to
iterate over multi-dimensional arrays or
just basically iterate over them
so we need to pass in array here so
let's do a var dump on flattened and see
what we've got and let's give that a
refresh so we've got an object now a
recursive array iterator and you can see
here that we've got properties which
correspond to the keys within that
original array so now what we want to do
is I'm just gonna for the sake of this
keep creating a new flattened variable
and just pass it re passing that in or
tidy this up at the end we now want to
again use a standard PHP class called
recursive iterator iterator which sounds
really complicated but this is now going
to allow us to iterate over this
recursive array iterator so let's go
ahead and create this a recursive
iterator iterator and we pass in that
recursive array iterator object so now
when we go ahead and do a VAR dump on
flattened we're not actually going to
see anything here we just have this
recursive iterator iterator we need to
use a function called iterator to array
which will convert or basically change
this to an array so now that we've
allowed ourselves to recurse over this
iterator we can go ahead and come up
with our final result so let's go ahead
and say flattened equals iterator to
array and we're going to pass in that
flattened array here and we're gonna
part with this for the second argument
we're gonna say false and this is
because we don't want to use the
iterator keys as the index that's pretty
important so now let's go ahead and var
dump on flattened and see what result we
get and you can see we've now got
exactly the same result as we had before
- some of the other things we added so
we can have an inner array here with
some value and then we can have just a
string value hanging around at the end
if we want and we come up with exactly
the same result in a lot less code
but now let's go and just tidy this up
because you are not going to want to do
this within an application keep defining
these variables over and over again and
passing them through it gets a little
bit complicated so what we want to do
then is we want to basically take this
and instead of referencing that variable
we originally created let's just pull
this down a couple of lines and paste it
in here and it still works in exactly
the same way but it just makes it look a
little bit tidier and then we can even
go as far as to say let's wrap the whole
thing here in this passing in these
values to this iterator to array
function and then we have our false
value at the end so if we just remove
that we have this all nice and tidy now
and when we refresh we get exactly the
same result so there are just a couple
of ways that we can iterate through and
squash if you like or flatten a
multi-dimensional array the first one
being a little bit more verbose having
to loop through and call a function
again and the second one using some
standard PHP classes to make this a lot
shorter a little bit harder to
understand when you originally look at
it but it does the job perfectly</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>