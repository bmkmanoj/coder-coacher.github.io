<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>JavaScript Tutorials: AJAX File Upload with Progress Indicator (Part 2/5) | Coder Coacher - Coaching Coders</title><meta content="JavaScript Tutorials: AJAX File Upload with Progress Indicator (Part 2/5) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>JavaScript Tutorials: AJAX File Upload with Progress Indicator (Part 2/5)</b></h2><h5 class="post__date">2012-08-26</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/T-SawkxuYnI" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">okay so content continuing from where we
left off what we need to do next is
create the links that were displayed in
the first video so if we go back to our
code what we need to do is well first we
need to remove this printer that's got
off because we don't want that and then
in this block here where the links are
supposed to be displayed we need to do a
check to see if there are any links and
if there are I'm just going to show them
so if not empty uploaded we'll just do a
for each loop
so for each but bloated as name because
they are the file names and then we're
just going to do a simple echo so I'll
put a div tag
whoops with a link tag anchor tag I
think it's the proper name with the link
set to something more defined in her
moments
oops okay there we go and then inside of
here which is really hard to see because
that bracket highlighting is getting
very in the way but here is where we're
gonna have the file name so we'll just
put that there first like so and then
here we're going to link to the actual
file which is just files slash in the
file name so we'll do the same thing
okay there we go so now a bit of look
and hopefully no typos we can go back to
our browser hit reload reload and then
you can see we've got these three links
if we click on one we actually see the
file that means it's working the sake of
thorough testing if we look in our files
folder you can see that we have these
three files we just uploaded so that's
that the next step is to create our
JavaScript file to make this process a
bit nicer and show the upload progress
because if we just go back to our
browser again and say if I pick that
very large file from the bottom of here
it open and upload you can see that
there's no feedback to the user while
this happens so it could be quite you
know it's not very user friendly because
it would just just have to wait for the
browser to send it and there's no
feedback so that's the reason we're
doing this but some yeah anyway so first
thing we need to do is actually include
our JavaScript scripts in our thing
which we've already done so oops let's
pretend we didn't do that so to include
our script in this page what we do is
add a script tag or riad has to have a
type attribute which is which should be
set to text slash JavaScript there we go
and it has to have a source which is the
links of the file so this is something
you should be able to add to the URL to
get the script to appear saying it's
like an image link or whatever a link
basically so this is for us it's just
upload dot yes because our script is in
the same folder something to note is
that you can't or you're not meant to
close these like that you have to have a
closing script tag always bad things
happen okay so let's go back to our
let's not go back to anything let's go
to our upload yes and we'll start work
on our actual JavaScript script it's
great thing yeah so first thing we're
gonna do is create a a way for something
to happen on the person clicking the
submit button so problem is that there's
no easy way for us to get hold of this
submit button from the JavaScript so
what I'm gonna do is add an ID to it
which is just going to be submit and
then we can use a JavaScript function to
get this input elements so if we go back
to our scripts we can do that now so the
way we can get that is by using document
get element by ID this takes one
parameter which is the name of the
element which is submit in this case and
that will return a element basically so
we could create a new variable called
submit button or submit and set it equal
to that problem is that this JavaScript
runs before the page loaded so if we run
this at the moment it'll cause an error
because this won't return actually omen
because the element hasn't been created
yet so what we needs to do is wrap this
inside of a method which is run when the
page loads the way we do that is by
adding an event listener to the window
object so we do that by doing window has
event listener and we want to listen for
the load events and when this event
fires we want to run a function which
we're gonna define in the line because
it's just easier this function has to
take one parameter which is the event
and there we go so now what we can do is
put this inside of here so that it only
gets diff only you know runs once the
window is loaded and that won't cause
any errors so just for sake of testing
at this point it's probably a good idea
just to stick an alert in here and just
see if that appears so let's go back to
our browser hit reload and you can see
that we get this alert which means that
our script has worked and it has been
able to get the upload button also
something I'm going to mention at this
point is fire book if you're using
Firefox like I am there is a add-on
called Firebug if you activate it you
can well you can activate the script
thing and it's a really useful tool for
debugging JavaScript one of its most
useful features is the console because
you can actually send messages to this
console via JavaScript so instead of
having loads of alerts popping up all
time you having to click OK okay okay
what you can do is have them logged to
this window here
so if we go back to our script and
replace this alert with the console dot
log method just think of it let's just
do test go back to our browser hit
reload you can see test has appeared in
this console window so this is something
we're going to be using a bit later on
because we need to so show a lot of
debugging information and we don't want
to like spam the user with loads of
alerts they have to click keep clicking
okay - I mean it's only bugging so you
could just go for the elopement if you
want and if you're not using Firefox
there is a similar extension for Chrome
I think built-in not sure owns an
explorer
most likely not oh actually there is
somehow I should mention by Internet
Explorer if we go back to our JavaScript
Internet Explorer doesn't support the
add eventlistener they've got their own
attach event something I think it's
listener method however that's being
fixed with Internet Explorer 10 and
that's the only time when support for
this method were using is can be added
so you don't need to worry about the
alternatives for Internet Explorer so
that's enough if that's what you need to
do now is to find a function which is
going to be executed when the user
clicks this button to handle the file
upload so we'll go actually define this
just above here because it's going to be
quite an extensive function and we don't
want to define all in line because it'll
get quite messy so we're going to create
a new variable which is going to be
called handle upload this is gonna be
equal to a function
and the function is going to take one
parameter which is going to be the event
so just the same as here and then it's
going to do the upload basically and
then down here what we can do is attach
this function to the click events so we
can do submit add event listener click
okay and then we want the function so
this is going to be handle upload so
hopefully you understand what's going on
at this point if not it's probably a
good idea just to go into a brush up on
some basic JavaScript stuff because well
it's only gonna get more complicated
yeah so if you understand keep watching
so what we need to do is first prevent
the form from being submitted so at the
moment when the user clicks to put on
this function will be called and then
the form will be submitted as usual
because we're handling the upload
ourselves in the JavaScript we don't
want this event to carry on so the way
we do that is by using the prevent
default method from the event and we
also want to stop it propagating which
is
like that and what that does is prevent
this event causing future events that
make sense
that's what propagation right I think I
have okay so now that we've done that
what we want to do is get hold of our
file information and we can do that from
the file element itself so as I hinted
to earlier what we need to do is get a
way if you like to get hold of the file
so we can do the same thing as we did
down here we're going to go back to our
HTML and we're going to add a ID to our
file
so ID of file and then here in our
JavaScript we're going to create a new
variable called file input which is
going to be document nope
get element by ID well
like so now we should have our file
element itself so what we need to do
next is get the information about the
actual files are selected the way we can
do that is from a file input we've got
the files array so the file input has a
property called files which has various
information or bits of information about
each file so for the sake of testing
let's just length let's just log that to
the console so that we can see if we've
actually got something that works let's
go back to our browser reload
and now when I select some files for
files and hit upload you can see that we
get a break which is bad why is that
banned file import isn't No
well I spelt wrong this is another
reason why Firebug is so useful because
you get these like warnings anyway let's
look at let's see what I've done
hmm okay file and pushing we know
because we've defined it
that's the same isn't it
oops
yeah so maybe it survived most probably
idea wrong ID file I've saved this okay
oh if okay this problem I hadn't if
rushed around an ID okay there you go
debugging live not live recorded but not
edited yes so now who really of this
again we all will see I think chrome has
a built in version of fire book that
does that soft debugging stuff anyway
let's help load oh look at the log and
you can see that we have four don't
worry about that I just gotten clear it
from before okay so that's enough for
this part we've got something that is
essentially working so in the next part
what we're gonna be doing is actually
you know dealing with our solve upload
basically so thank you watching and come
back for the next part</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>