<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>PayPal Payments with PHP: PayPal API (6/9) | Coder Coacher - Coaching Coders</title><meta content="PayPal Payments with PHP: PayPal API (6/9) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>PayPal Payments with PHP: PayPal API (6/9)</b></h2><h5 class="post__date">2014-11-12</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/7lTZbymICzU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">right so let's go ahead and actually set
our API up or our connection to the
PayPal API up rather so just under here
then I'm going to require in the auto
load file from composer so here I'm just
going to say dir and append on going
back one directory interventive
this is just basically going to pull in
all of our composer dependencies so we
can use any of them basically so here
then we need to actually create a new
instance of API context passing in our
credentials this is fairly
straightforward but everything within
the PayPal SDK is actually namespaced
so what we usually do is we would say
API equals new API context like so and
then we would pass in a new instance of
a auth token credential but this is
namespaced under paypal rest this object
here so at the top we need to go ahead
and use these namespaces so basically
import these now this is important
because we're working very procedurally
and we're not doing things how you would
actually probably do in a real life
application it's very messy but in
reality if you are working within a
framework or you're working within a
really nice structure this would make a
lot more sense so let's go ahead and use
PayPal REST API context you'll see this
a lot because we need to do this for the
actual payment journey a lot so now we
can access this here and within this we
need to pass in a new Roth token
credential instance so in this case this
takes two arguments the first is going
to be the client ID and the second is
going to be our secret
so obviously we have these here client
ID and secret so let's copy and paste
these in so let's grab our client ID
paste that into here and let's grab our
secret and let's paste that into there
now all the token credential is also
namespaced so let's go ahead and just
say use paypal this time its namespace
under paypal auth and a token credential
so we need to import that as well so
let's just refresh this page just to
make sure we've not done anything wrong
it looks good we don't see any errors so
these have obviously been found now what
we want to do is actually set up the
configuration so we say API and we have
a set config method which takes an array
and this is an array of details like the
mode whether you want to enable logging
the logging file name the logging level
so you don't have to specify all this
but I'll do so anyway just in case you
need to use it so the mode here is going
to be sandbox that's really important we
don't want to make calls to the live API
we're only using PayPal sandbox now we
also have a connection timeout and this
I'm just going to say 30 this can be any
value you can tweak it if you need to
now we're going to say log dot log
enabled now I'm actually going to set
this to false because I don't want the
files to be created but if you are
having problems with this checking the
logs is a really good way to actually
figure out what might have gone wrong so
if you do have any problems or anything
like that go ahead and enable this and
obviously you're going to need to store
this in a particular file in this case
it's just going to be an empty string
but choose a file name to log this to
and you can check them logs we can also
choose a log level
this can be a couple of values but fine
is probably good and we also have a
validation level here and that's going
to be log so we've now set up the config
that we need this is obviously really
important so now when we refresh oops
we've got a little error here so there
we go cool so we're done so that's all
we need to be able to actually use the
PayPal API we've got everything set up
so in any files that we create so for
example actually setting up how much to
charge the user we can now reference
this API variable here so that is the
PayPal API connection set up we can now
get on to actually starting the initial
payment process</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>