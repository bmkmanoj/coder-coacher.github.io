<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Traversing through a tree structure in PHP | Coder Coacher - Coaching Coders</title><meta content="Traversing through a tree structure in PHP - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Traversing through a tree structure in PHP</b></h2><h5 class="post__date">2013-08-27</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/GxqgcXmbVgs" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">okay so in this video we're going to be
recursing through an array of items like
a sort of tree form array so it'll be a
multi-dimensional array and basically
we're going to build a function to
recurse through an output in this case
I've chosen to represent the array as
like a file structure so you can see
here we've got sort of core classes
functions templates a folders and then
inside files and then more folders with
files inside them so you know this could
be used for a variety of purposes this
could be navigation it could be like
here file a file structure it could be
anything like that but the main thing
here is we're going to learn to build a
recursive array to actually deal with
this so sorry a recursive function
that's going to deal with this I'm going
to try and do it in the cleanest
quickest way we possibly can so it might
be a little confusing at first but
that's basically what we're going to do
so let's just quickly take a look at the
code for you know without giving away
the actual function we're going to be
building we require this function and we
have this tree here which is obviously
an array inside we have the array keys
here so this one would be core we've got
an array within that so we're already
dealing with multi dimensions in this
array and so on and so forth so the two
of them between them look very similar
so the output and the actual array
itself look very similar because all
we're doing is creating an unordered
list and then list items within that you
can see here all we're doing is just
echoing this tree out function and then
passing in this tree array so in this
tutorial we're going to be looking at
the function that actually does this so
quite interesting to know and an
extremely powerful technique as you
probably know recursion is so let's go
ahead and build this this tree out
function okay so I've completely removed
everything and we're actually going to
start with building the array itself for
the simple reason that to understand how
to do this it's if you know if your
array skills or array building skills
you know aren't gray then this is going
to be a really good way to learn how to
you build up a multi different
dimensional array and what things
actually mean within this it's fair
enough looking at it it's quite easy to
understand but you know what's the key
and what's a value and all that kind of
stuff
so let's go ahead and quickly create
this array we're going to create an
outer array and I bring this down a
couple of lines just so I can indent in
so it makes it look nice and nice and
neat so the first item I'm going to do
is the or the first items I'm going to
do is all the core sort of full folders
in my case so this is going to be core
classes functions and obviously this can
be anything you know while you're
following along just you know build a
navigation if that's your end goal and
so then my folders now my files so index
dot PHP login dot PHP and register dot
PHP so that's what we need to do there
so at the moment we have an array with
just items in it okay so at the moment
these are going to be the values of the
array the keys are going to be 0 1 2 3 4
and so on so we're obviously start at 0
element so we have a 0 0 element here
1st element here 2nd 3rd 4th and so on
now what we're going to do is as soon as
we give this a value and we assign value
to an item of an array using an equals
and a greater than sign as soon as we do
something like that this then becomes
the key rather than being the actual
value this becomes the key so this
becomes the value this becomes the
keywords this is just the value so
slightly confusing but you know in our
function we're going to actually check
for this so what we need to do now is
just start to populate the items within
here so in this case it's just going to
be in it PHP and that will be it now for
classes we do exactly the same we build
an array come a couple of lines down and
indent that so here we're going to have
user dot PHP hash dot PHP and session
PHP the same with functions as well this
is just going to be
and array with one Iseman that's going
to be security dot php' a template now
with template we're going to do
something a little different we're going
to have our base we're going to have one
file and one folder but within that
folder we're going to do another array
so we're getting deeper and deeper and
our function is going to deal with this
because it's recursive it will recur
stru however many levels we have you
know we could have a hundred levels and
it will deal with all of the levels
that's the beauty of recursive recursive
programming or a recursive function so
in this case I'm going to say index
template dot PHP and now I'm going to
create a folder so remember this is a
value within here this is now going to
be a key with a value so we're going to
have includes and then another array and
then in here we'll do say header
template dot PHP and Buser templates dot
PHP so then now that's done and we've
got our three outside of our main main
structure so now we want to go ahead and
actually build this function so we've
built the we've built the tree and that
will works we'll go ahead and just test
that this works I'll just go ahead and
refresh my browser yep so we've got no
errors here so there's no sort of syntax
errors within our array I missed off a
comma or anything like that
so inside of our tree dot PHP file which
we've already required at the top here
we need to actually start to build this
function so let's go ahead and just
define the function first of all and
this could be a method as part of a
class it could be absolutely anything
the main thing is that we give a
function name and we need to feed in the
tree so this is always going to be an
array so let's go ahead and just call
this so in set echo tree out and then we
pass in tree so it's going to call this
function and it's going to echo out the
return value on this we don't have a
return value at the moment but we are
going to return the mark up within the
unordered list so we're going to
generate each list item and if you're
not familiar with unordered lists and
list items in HTML then you know have a
quick look and see what they involve but
otherwise it's basically defining a list
and then a list item inside and the fact
is an unordered list just basically
means that the items aren't in numerical
order
there's no specific order isn't actually
order anything for you but that's what
an unloaded list is so we're going to be
able building up markup so what I'm
going to do is I'm going to create a
variable or markup and it's just going
to be an empty string so we're going to
append to this so to append to something
we do mark up dot equals and then a
string in here so that will just
basically append - you could say of
course markup equals markup dot and then
string to concatenate it on but dot
equals just shorthand notation makes
things a lot easier so what we now need
to do is we need to create for each loop
and remember we're going to be calling
this tree out function from within our
function potentially so we'll do that
within forage but for for for for each
what we're going to do is loop through
tree so this will loop through the items
in the array so on the first loop we're
going to hit this this this this this
and this this and we say as branch and
twig I'm I've chosen these names just
cuz it makes more sense and I'll explain
what these mean in just a moment so
essentially when you use for each and
you define two variables here branch in
this case is going to be the key so this
key this key this key this key now these
are keys but these are values so they
will then be defined as twig this is
fairly difficult to understand but
basically if you have an array like this
for example like this now this would be
value one value to value three and index
or key zero one two so in this case for
each loop of this branch would be equal
to zero one and two
twig will be equal to one two three so
this just represents the key and the
value of the array item so in this case
this is a key because we have a value to
find to it but these are still only
values because they have nothing
assigned to them so we can use this to
determine what we want to do do we want
do we see
Ryan do we want to delve deeper into
this or do we want to just output it as
a value so let's go ahead and just
experiment and play around with this
because that's probably the best thing
we can do at this stage so I'm going to
say markup is equal to sorry we append a
list item now within this list item we
want to append something so let's just
go ahead and append branch and just see
what happens
let's go ahead and view the output in
fact we want obviously need a return
value for this and the return value is
going to be an unordered list and then
inside we're going to concatenate on the
markup that we generate so for example
for three loops just as an example this
would produce 3l is starting and ending
tags and put that within a starting and
ending unordered list so it's just valid
markup there
so in our browser let's refresh so you
can see we've got core classes functions
templates but then we get zero one two
which is really strange because that's
you know not right we have index login
and register but because we're because
we're taking the branch we're taking a
key and we already know that these are
keys so that's correct
now let's go ahead and check out oops
sorry now it's going to check out here
if we change this to twig you're
probably going to guess what's happened
although these will look a bit odd but
then these will be correct so when i
refresh we get a couple of error rate of
string conversion errors that's just
because we're trying to output an array
we'll rather than delve in and output
things like that so index login and
register are now the actual values here
so what we actually need to do is in
here we're going to create a ternary
operator just to check a couple of well
check one thing and then you know
basically output based on what we find
so the check and if you've not seen
ternary operator before this is the
operating it's basically an if statement
this will this will be the result of
this evaluation to true so let's say one
otherwise zero so it's basically an if
statement it would be the same as saying
if
1 is equal to 1 echo 1 else echo 0 so
this is equivalent to this so let's go
ahead and actually change this to
something more useful so what what do we
want to check well we want to check if
the twig meaning the value so these are
an array so we can use a function in PHP
PHP called is array then we pass them
what we want to check will that be twig
because that's the values here this
value this value this value this value
this value and anything else so if it is
an array what do we want to do well if
it's an array we only want to give the
name of the branch we don't output
anything with the array just yet so we
just want to say well we want that to be
a branch now otherwise what do we want
to do well our aim here is to output the
branch and then go into the array and do
exactly the same thing as we're doing
here inside of here so this is where the
recursion comes in and what we're
actually going to do is we're going to
call the function that we're currently
in so that is basically recursion and
what we pass in is the twig sorry not
the tree so we passing the twig so this
is the twig this is the branch we output
the branch and then we delve in and look
further into this so basically as this
stands this is going to be enough to
generate what we need so we'll go ahead
and preview this oops let's just check
if we've done anything wrong here oh yes
of course sorry and complete mistake
here I've made a mistake so basically
what we want to do is we want to append
this rather than say else now otherwise
we want to say twig now this might look
a little confusing let's just run
through it so we come through this
function we'll go through each of these
items it will check if the twig here is
an array if it is it's going to output
the branch and as I said the tree itself
as well so we're going to go through
here through the twig and out put these
items here and for each of them it will
do the same build up a list item
otherwise it's just going to output the
twig so in that case this will be the
twig this will be the twig this will be
the twig so these are branches these are
twigs
so it sounds very confusing but let's
take a look at the results oh yes so
we've got a little syntactical error
here and basically what we're not doing
here is we're not wrapping this entire
thing here because we are concatenated
so what happens is PHP will read this as
twig concatenated to list item so it
will actually say otherwise we want a
twig and Li but we don't want that we
just want twig so we take this like this
and then refresh and there we are so a
couple of little hiccups there but that
just goes to show you that you know
something as simple as doing this can be
you know fairly difficult now of course
we could have used an if statement here
but it's you know it's really it's
personal preference if you're struggling
with this create an if statement and
just play around with it but otherwise
what we're doing here is you know just
taking array looping through checking
something otherwise we want to just
delve that one level deeper into it and
recurse through and then obviously we
just output the result you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>