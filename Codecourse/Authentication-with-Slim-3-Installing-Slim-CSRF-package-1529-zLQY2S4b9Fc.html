<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Authentication with Slim 3: Installing Slim CSRF package (15/29) | Coder Coacher - Coaching Coders</title><meta content="Authentication with Slim 3: Installing Slim CSRF package (15/29) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Authentication with Slim 3: Installing Slim CSRF package (15/29)</b></h2><h5 class="post__date">2016-04-13</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/zLQY2S4b9Fc" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">before we get onto all the good stuff
like signing the user in updating our
navigation bar and implementing stuff
like changing the users password we need
to first think about cross-site request
forgery protection and how we're going
to implement it into our forms to make
sure we're protected now I'm not going
to go over cross-site request forgery
protection we have a security series
that completely covers this so go ahead
and check that out if you're not too
sure but now all we're really concerned
about is getting this into our form so
if we just head over to our sign up form
at the moment we don't have any
cross-site request forgery protection on
here and in a nutshell all this is is a
token that's submitted along with your
form just to make sure the person that's
currently viewing the page is actually
signing up or rather is actually
submitting this form so it's really
important that we do this and it's very
easy to do with slim now we're gonna be
using the official cross-site request
forgery middleware for this but we're
going to be creating some additional
middleware just to make this package a
little bit easier to use if we were to
build this cross-site request forgery
protection ourselves it would take a lot
of effort you can see here that the
middleware for this is pretty extensive
so you can go ahead and browse this at
your leisure
either way we want to get this into our
project and set it up so we can very
easily implement it into our forms so
let's start by just installing this we
know that the package name is slim
cross-site request forgery so again if
we just open up our terminal and require
this in with composer wait for this to
download great so now that that has
downloaded we can go and implement this
and just take a look at how this
normally works so the first thing we
want to do is just pull this into here
so to add this is middleware all we do
is say just the normal way that we would
add middleware app add and then what we
want to do is use slim cross-site
request forgery guard but I'm actually
going to attach this to my container so
let's go up here
here and just attach it in so cross-site
request forgery and create out closure
pulling out container there and we'll
just return a new slim cross-site
request forgery god simple as that so
this is the traditional way we would do
it and then we would use that with our
routes or our controllers but we're
gonna take things a little step further
and we'll cover that in the next video
we'll look at how we use this first of
all so we just want to add container
cross-site request forgery so we now
have a cross-site request forgery
protection turned on so let's take a
look at submitting this form and see how
this works now we get failed cross-site
request forgery check the reason being
is that we haven't placed the data that
we need eg the token name and the token
value into our form and this is
generated for every session and it just
means that whoever's on this page is
actually submitting it it's not being
done from anywhere else okay so how do
we actually use this well traditionally
what we would do is in our controller so
we can test this out in our controller
let's just do this up here we can head
over to the documentation to find out
how we actually use this you can see
here that we attach it to our container
we've already done that and then here we
use this cross-site request forgery get
token name key and get token value key
and this is pretty much what we need to
do so let's just test this out so let's
just pull this into our project and it's
to 'var dump on this so this isn't what
we're going to actually end up doing but
we can actually see how this works so
let's go and just refresh our page and
you can see we get cross-site request
forgery name that's the name of our
first hidden input now we also have get
token
value key so that's cross-site request
forgery value and then what we can do is
we can use request get attribute and
then get that from the name and the
value key so we can just test this out
as well just to make sure everything's
working just pop that in here and in
here we know that it's something like
get cross-site request forgery value and
of course this needs to be request
because that's what we've called that so
this will just be our randomly generated
token that is matched when we hit this
button obviously at the moment is
failing so hopefully that makes sense
now that we've got this installed we can
go over to the next part and actually
set up our middleware that will pass
this through to our view and we're gonna
do this in a really convenient way we'll
see how we do that next</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>