<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>PHP OOP Login/Register System: Initialization (Part 4/23) | Coder Coacher - Coaching Coders</title><meta content="PHP OOP Login/Register System: Initialization (Part 4/23) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>PHP OOP Login/Register System: Initialization (Part 4/23)</b></h2><h5 class="post__date">2013-10-21</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/JQkfAdZbAJE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">before we start building our classes or
the main classes that we're going to use
in our application it's worth knowing
that we should set up an initialization
file that we include on each page what
this is going to do is it's going to
define things like well start sessions
so people can log in set config file so
we're going to include our config in
this file and autoload classes which
we'll touch on and then we'll explain
what this actually does and why we do it
and also include the functions that
we're going to use so the sanitize
function here and any other functions
that you decide to include in your
application so let's go ahead and get
started the first thing that we want to
do is obviously call session start just
so we basically allow people to log in
without this we wouldn't be able to set
any sessions at all so the next thing
then is to create a config now this is
going to be a global variable and it's
going to be an array of different config
settings so for example MySQL convicts
our database config different names for
things like cookies and different names
for things like sessions and this
basically just lets us keep consistency
so once we've done this we will
eventually crowd our config class which
allow us to just pull any data we want
from this config and make it super easy
to set things up and this again saves a
massive amount of time in the future so
Global's config is going to be an array
so what we're going to place inside of
this array well what we're going to do
is we're going to have this as a sort of
storage area so I'm going to say I want
a MySQL settings array
I want a remember settings array and
this is going to be the cookie names and
the cookery cookie expiry of how long we
want users to be remembered for if we if
they check that little box on the login
page and we also have session as well so
this will just be basically the session
name and the token and that we use so
inside of here
let's go ahead and set up our database
properties so the host is obviously
going to be 127.0.0.1 or localhost but
with local host and PDO you're actually
going to have to do a DNS table lookup
so that's going to significantly
increase the amount of time it takes for
your page to load so please please
please use one 27.1 to avoid that lookup
so user name is going to be root these
are just my database settings so yours
will obviously vary and password is
going to be nothing I don't have a
password set on my local machine and the
database name itself is going to be LR
as we've looked at in previous parts of
this series so if we remember and
session let's go ahead and set a cookie
name so we want to define what up with
what we want our cookie name to be I'm
just going to call this hash and we also
want a cookie expiry so we want some
long number of how long we want this to
what how long we want the expiry to be
so go ahead over to Google and if you
want it to be a month just type into
Google a month in seconds and then you
can add the value in here or a week in
seconds or even if you just want it to
be a day or 12 hours for example so
we've got this data here don't worry too
much about what this actually means at
the moment because when we actually come
to creating our out the ability for a
user to be remembered we'll see why all
this is is significant so the session
name here is going to be user and that's
what we're going to need to do so we
have set a little config file there so
we can pull from that when we go ahead
and create our config our config class
eventually now the next thing to do is
because we're going to be working with
lots of different classes we want to
auto load these in now also loading is
basically a quick and very very
efficient way of loading in classes as
and when they're required rather than
meant
creating and maintaining a list of
requires so traditionally what we'd do
is we'd say require once just to make
sure that things aren't required twice
would say classes config.php we would
then go and change this to cookie dot
PHP we change this to DB PHP and you can
see that I'm just basically including
every class I've created in this classes
folder now this is going to be a massive
long list it's going to be inefficient
because we're including everything that
we want in this init file which we might
not want to do and also it's going to be
extremely difficult to maintain because
what if we change the name of this DB
class we then have to go and change it
here or what if we change the name of
the folder for example the location of
the folder we can have to go back and
update this so we'll scrap that and
instead we'll use a function in PHP
called SPL autoload register now what
this does is it allows you to pass in a
function that deals with or that's run
every time a class is accessed what we
then do is from the argument list of
this function take the class name and we
can then require that so we really are
taking you know say ten lines of code
and reducing it to just a couple so I'm
going to use an anonymous function here
a PHP version depending you might have
to create this function outside of here
but the anonymous function is basically
going to have as I've mentioned already
the parameter class which represents the
class we're trying to access so for
example if down here we were to say new
oh sorry DB equals new DB what this is
then going to do is call this function
because we've applied the auto low
register an SPL by the way stands for
standard PHP library and it's basically
just a library of everything that we get
included with PHP we run this anonymous
function no need really to define a name
class then is DB and what we can then do
is inside of here we can require once so
traditionally we'd do classes /d b PHP
but we replace DB with the name of the
class so we
can catenate on class so now when we do
something like DB equals new DB this is
called
this function is called this represents
DB and we require in DB so we're not
requiring every single class in this
init dot PHP file unnecessarily we're
only requiring things in as we need them
so very very useful so we also then want
to go ahead and just include the
functions that we have in our functions
directory so we're going to go ahead and
require once functions forward slash
sanitized PHP unfortunately that have
the luxury of being able to include
these on the fly because they're not
classes so we just have a function list
here you could of course put all of your
functions in one file it doesn't really
matter I prefer to separate things based
on what they do so that's how init dot
PHP file this is going to be included on
every page that we create so for example
in index.php at the top of each page
that we need we're going to go ahead and
require in core forward slash in it dot
PHP we do this on every single page just
so we make use of all of the
functionality our config starting up
sessions and registering classes or
loading classes as they're required and
pulling in our functions that we may or
may not require so that's out in it our
PHP file and that's how we create and
include</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>