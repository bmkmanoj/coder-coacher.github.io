<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>PHP Tutorials: Register &amp; Login (Part 18): Forgotten Username (Part 1) | Coder Coacher - Coaching Coders</title><meta content="PHP Tutorials: Register &amp; Login (Part 18): Forgotten Username (Part 1) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>PHP Tutorials: Register &amp; Login (Part 18): Forgotten Username (Part 1)</b></h2><h5 class="post__date">2012-05-14</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/oo-CdETxKww" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">we are now going to move on to the
username password recovery processes in
this part of the series we're going to
look at recovering a username which is
slightly easier than recovering a
password because in terms of recovering
a password we don't just want to email
the user to their password obviously you
could do but we're going to force the
user to change the password rather than
just give them the password ok so the
first thing we're going to do is then
look at the username recovery so what do
we need to do first of all well we need
to go ahead and create it obviously
create a page for this then we're going
to create the menu items that link to
the username and the recovery password
recovery pages it's going to work off
the same page we're just going to pass
through a different get parameter so
nothing really complicated there it just
means that we don't have to create two
pages that essentially do the same thing
so let's go ahead and open up let's say
forum we'll just go ahead and copy this
and paste this into a new file so you
can make use of our template I'm going
to save this as recover PHP now we need
to make a few changes to this recover
dot PHP file we need the logged in
redirect function now the reason we're
using this is obviously to recover a
username or password would you know
technically mean the user isn't logged
into their account because they're
trying to recover their details so we
need to ensure that they're not logged
in it's not a massive problem but it
just keeps any users that are logged in
from accessing this page so I'm going to
set the header here to recover and
obviously the contents of our page are
going to go here let's just go ahead and
look at this page now covered-up PHP
so that's what the recover page recovery
page looks like at the moment I'm going
to go ahead and add some links here to
recover an email address or a password
in a moment my password in a moment but
just now I'm going to go ahead
and allow this get parameter to be
passed and this is going to look like
and I'll show you what it's going to
look like first it's going to look like
mode equals and it'll either be user
name or it will be password and
depending on that we'll we'll do
different things and as I said this just
allows us to have one page to do both
jobs so let's go ahead and start to do
this first of all so what do we want to
do well we obviously only want to allow
user name or password recovery so we
need to control these variables that are
passed to a page so I'm going to create
a variable here called mode allowed or
modes allowed get AZ mode allowed and
this is going to be an array so much
like we've done before for required
fields in in registration forms things
like that so this is going to be
username and password so we can use this
to check that the posted date or the get
data is is there and in here so a quick
if statement and inside here we want to
make sure that the get variable mode is
set so if is set of mode is equal to
true and if in a race we're using the
inner a function which takes a value
which will be the get mode which will
either be using them and pass username
or password
the second parameter here is the array
that we're looking in and that will be
mode allowed and if that's equal to true
that means that what that means that the
thing that the user has typed here is
checked if it's in here okay so if it is
we do something otherwise we can just go
ahead and redirect the user off
somewhere because we will assume that
they're trying to enter a different
value here cuz we're going to have links
that link to these that values we you
know we're not going to ask the user to
type them in manually in the URL bar so
I'm just going to link through to index
dot PHP and exit
there so if this is all good we can go
ahead and echo I'm just going to do this
for now just to demonstrate so echo the
mode so click on a hit enter on that and
we are recovering username change this
to password and we're recovering
password change this to something else
so for example first name or it could be
anything in here it just redirects us to
index dot PHP so we're controlling the
input that we get through here so let's
go ahead add some links down here let's
go ahead and open up includes widgets
and login so this is the logged out
state I'm going to just copy and paste
this list item down here and in here I'm
going to pop a little sentence in so I'm
going to say forgotten oops
forgotten your username or password and
let's just go ahead and get rid of this
link here so user name is going to be a
link and password it's going to be a
link as well so now we can link through
to the same page that we recovered PHP
but this one will be mode equals
username and this one will be again
recover dot PHP but this time the mode
will be password ok so relatively
straightforward there let's just go
ahead and refresh here we get forgotten
your username or password click on
username we get recovery username click
on password we get the recovery for
password straightforward ok so we can
get rid of that now because we don't
need that open now we need to determine
what we actually need to do in here well
the user needs to enter some kind of
data to be able to recover their
username or password in this part of the
video we're focusing on the username so
let's stick to that for now so if the
user needs to recover the username we
need to enter an email address the email
address will be validated ie
does it exist in the database we're not
going to check if it's a valid email
address or not we don't really need to
do this in this case
because if it's invalid it won't exist
so we could checking check of this email
is exists and then we are going to call
this recover function which we're going
to be creating inside of one of our
function files let's go ahead and crack
on with this obviously we need to build
the form here so I'm just going to break
out of PHP and back in there so in here
what I can do is I can go ahead and
start to build the form up so form
action equals something method equals
post so we're combining here and post
and get data and because we'll be having
a post version of the email but we're
going to be keeping the mode in the URL
bar and in here let's go ahead and
create an unordered list just to keep
this looking nice how we have it styled
so I'm going to say please enter your
email address and I'm trying to keep
this as generic as possible and by that
I mean regardless of whether we are
recovering the user name or recovering
the password or changing the password
we're going to ask the user for their
email address and that will start that
whatever process is required so enter
your e-mail address applies to both so
input type equals text a name equals
email this is just going to help be how
we identify it let's go ahead and create
a the final list item and we'll just put
a submit button in here which obviously
we need to submit our form so type is
going to be submit value is going to be
we'll just so recover so let's take a
look at this now I'm going to switch
back to mode user names I'm going to
click on user name and now we have
please enter your email address so we
type in a user an email address there
we've got all this rubbish in here let's
just go and delete this and we are going
to enter an email address like this
click on recover we're going to check if
it's if it's been set and then we are
going to
go ahead and recover start the recovery
process so in here now we can go ahead
and we can say if something so if is set
obviously dot underscore post email so
if this has been set I has the form
being submitted if that's equal to true
and empty dollar underscore post email
is equal to false so it has contents
then what do we do we need to go ahead
and create an another if statement and
I'm going to say if email exists which
is a function that we've already created
if we go to our core functions and users
email X I'll just type so email exists
we already have this function that we've
created and obviously we passed through
the email here so if that's equal to
true we do something otherwise we want
to do something else now because we're
not collecting a lot of errors here I'm
just going to go ahead and echo the
error out directly so I'm just going to
echo P and the P tag and I'll just say
oops we couldn't find that email address
so echo otherwise we'll just say okay so
we can start to actually test this so
refresh the page I'm gonna enter load of
rubbish in there and click on recover
oops we can find that email address I'm
going to enter an email address that is
actually registered so alexei PHP
academy' door click on recover and it
says okay so now we know that this
process is working we can go ahead and
actually start to recover now we're
going to create a dynamic function
called recover and this is going to take
two parameters first one's going to be
the mode and the second one's going to
be the email address oops so the first
one like I said is going to be the mode
we're going to send the mode to this
function and that we're going to send
the email address if the modes username
then we send an email off saying here's
your username if it's the password be do
something else but we'll be doing that
in another part so in the next part of
the video we're going to be looking at
creating this recover function and a cup
another function that we're going to
depend on and then we're going to tell
the user that their username has been
sent and we're also going to obviously
check this by email as well</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>