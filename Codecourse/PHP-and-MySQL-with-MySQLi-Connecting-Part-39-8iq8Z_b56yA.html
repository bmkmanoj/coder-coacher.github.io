<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>PHP and MySQL with MySQLi: Connecting (Part 3/9) | Coder Coacher - Coaching Coders</title><meta content="PHP and MySQL with MySQLi: Connecting (Part 3/9) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>PHP and MySQL with MySQLi: Connecting (Part 3/9)</b></h2><h5 class="post__date">2013-10-22</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/8iq8Z_b56yA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">ok so now it's time to actually connect
to our database so we're gonna we're
going to create a connection that's
going to be reusable on multiple pages
so we're going to be splitting up the
Kinect functionality so we can include
it on many of our out pages that we
create and you'll see that I've got my
I've got two files open here let's just
take a look at the directory structure
of working with I've created a folder
just called dB and that's storing this
connect file that you can see up here
and I've an index file which I just I'm
going to assumes one of the pages on my
web my website now we're only going to
be working with index dot PHP and
connect dot PHP we're going to be
creating everything inside of this index
dot PHP file just as we go along so the
first thing we really want to do is
create PHP tags on both of our pages
since we are working with PHP
functionality and connect is the file
that we're going to focus on for this
part of the tutorial so we want to
create a connection to our database so
we can use it on other pages so really
what we want to do is we want to require
in this file that we've created so we
want to require DB would slash connect
dot PHP what that's going to do is it
will require this file in so we can make
use of all the variables or anything
that we create on this page so now what
we want to do is create a variable with
a new connection to our database so if
you've not worked with object-oriented
programming before this might look a
little strange but essentially we have a
MySQL I object and what this does is it
contains all of the functionality that
we need this is the benefit of MySQL I
over the old MySQL extension is that we
have object-oriented functionality
within this object or class that we can
instantiate now instantiate just means
that you create a new an object from
that class so a little bit of
object-oriented Theory there but
basically it looks like this it's not
too complicated we create a variable
called DB and we assign that or assign
the value of a new MySQL I object so it
works a little like a function this will
be the constructor function
can pass through different parameters
too and in this case we're going to be
connecting to localhost or 1.77 or not
to one and we want to supply a username
we want to supply a password in my case
there's no password on the root account
I'm just working on my local machine and
optionally the database that you want to
connect to now say this is optional
because you can specify this in your
queries but it's probably best to just
literally tipped to pop it there when
you're connecting so what we now want to
do is check whether our database has
successfully connected or not now we can
leave things as they are let's just open
the browser and check what what this
looks like so nothing's happened because
we know that there's been a successful
connection we know that these
credentials are correct and we know that
this database exists but what if this
database didn't exist so I'm just going
to pop a Z on the end of there if i
refresh now you see that we get this PHP
warning now it's not a fatal error so
the rest of the page is going to
continue to execute but you know if we
can't connect to our database then the
rest of our functionality is pointless
so what we want to be able to do is
actually catch this error and then
output it so typically on a on an
environment that you're working in you
won't have error reporting on because
it's it's a potential security risk so
if we just take a look at that error
again you can see here that it's telling
us sort of vital things about our cell
server setup in this case it's just my
local machine but this could be a linux
server or something like that so we're
giving away a database name we're giving
away path information so it this isn't
great this isn't what we want to do so
what we're going to do is we're going to
set error reporting here and this can be
done via your PHP dot ini file or you
can explicitly define it at the top of
your page remember this has to be
included on every single page as well so
perhaps some an initialization file or
something like that but for now let's
just pop it on on this index dot PHP
page and let's just take a look at what
happens when we connect to a wrong
database with their reporting turned off
now nothing is output this can be
confusing in terms of development so for
development you
I want to have error reporting turned on
so you can keep an eye on the errors
however in a production environment
you're going to want error reporting set
off now how are we going to catch this
error if we if for some reason we can't
connect to our database as unlikely that
we're going to have supplied an
incorrect database name it's still
possible but it's unlikely that if we
don't touch this code for a while that
it's ever going to change in and mess up
so we need some way to determine whether
the connection was successful not
necessarily was the database name
successful successfully the supplies but
we want to catch this error so what we
want to do is create a small if
statement here and we can do this in
other ways we'll look at ways we might
be able to do that in a moment but we
can do things like if DB connect error
number now basically what this is going
to do is it's going to supply us with an
error number if it if the connection has
failed so let's just go ahead and
instead of putting this in an if
statement let's go ahead and echo this
out so what we're now doing is ignore
this if statement for a moment we're
echoing out this property here this
connect error number property so what
that will do is that will give us back a
an error number if it's zero it means
we've successfully connected in this
case we have if I change that back to Z
you will see that we get a specific
error number relating to the problem now
that's a little more friendly than just
outputting that horrible error because
we don't want anyone to see that but
what if we want to say to a user sorry
our sites offline due to a database
error or even just say sorry we're
having some problems at the moment or in
this case we can put this into an if
statement if this is zero that means we
have connected if it's not zero that
means we do have an error so sorry now
if this is positive we do have an error
so you know if it's zero we're fine what
we can do is we can kill the page and
just say sorry we are having some
problems so that will just kill the rest
of the script output on the page this
and nothing else we run so prevent any
further errors
from being triggered so that's how we
connect to our database and how we catch
errors if you needed to
perhaps for debugging purposes fit
purposes specifically output an error
you could do DB connect error which will
give you the specific error in a more
friendly way so in this case we'll see
let's just get rid of this for a moment
in this case what we'll see is this so
it says unknown database apps so you
could of course use this for debugging
purposes if you want to but for now
let's just go ahead and kill the page if
this isn't successful and otherwise we
can assume that this echo statement will
run because our success our database has
successfully connected and that's it
we've connected to a database we've
checked for any errors and kill the page
accordingly and from here we can go on
to actually start querying our database
and returning results</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>