<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>PHP Tutorials: Register &amp; Login (Part 7): User Data (Part 2) | Coder Coacher - Coaching Coders</title><meta content="PHP Tutorials: Register &amp; Login (Part 7): User Data (Part 2) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>PHP Tutorials: Register &amp; Login (Part 7): User Data (Part 2)</b></h2><h5 class="post__date">2012-05-11</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/yX1EushqcIw" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">okay so now we're back with in the
middle of doing this implode thing what
we want to do is we want to make this so
we output some kind of string that we
can pass through into our query so what
do we want to do well on the outside of
this I'm going to append two things or
two strings sorry and what am I going to
do when I'm going to implode a back
sorry I'm going to append a back tick
here I'm going to append a back tick
here now within this I'm going to append
a back tick comma and then another back
tick and this is exactly the same as how
we output errors in the last part of the
tutorial and what we did is this will
always be on the left hand side of the
result of this this will always be on
the right hand side of the result of
this and within we're going to implode
and within that we're going to put a
back tick a comma a backticks and now if
we go ahead and echo fields we get this
so you can see now that when we select
data from a query we actually say select
user ID comma username password and we
do it exactly like this so now we can
just pass this string into a query and
if for example I said in the last part
we want to remove email then this will
be removed from the query so it's
perfect we've got a really really
flexible way of doing this now so let's
go ahead and actually you know get on
with doing our query I'm going to say
data is equal to MySQL query remember
we've got data up here which is going to
you know return all of our data and
we'll need to use the MySQL fetch a sock
function or associative array function
in a moment and we're going to wrap that
around this so I'm going to say select
fields from and remember our database
table is called users where user ID is
equal to user ID user ID is the first
parameter that we passed through into
the the function and fields what we've
just generated so actually let me just
go and echo this so we you can sort of
see the result of this so I'm going to
kill the script there
echo this and go ahead and refresh so
we've got select user ID username
password first name last name email from
users where user ID equals one one is
the session that we passed through here
and then these are the fields so if I go
ahead and get rid of these two the query
that we're going to pass through to the
database updates to reflect that and
then we can just return this data and
use that as we please so very effective
but you know somewhat complicated but
once you get your head around this is a
really really good thing to do and then
outside of this in fact now we're going
to return data now we can't quite return
the data yet because this is going to be
an array so we're going to use the MySQL
fetch a sock function and wrap this all
in this so if I go ahead and print our
data and go ahead and just kill the
script there and I refresh you see now
we've got all of my data all of my user
data from the database has been
retrieved placed into this associative
array and we can just use this where
everyone remember this user data
function is returning the data so it's
returning an array with an init dot PHP
user data is now an array so if I was to
go ahead and say echo user that let's do
that within this query here so if I was
to go ahead and say echo user data let's
say username and a refresh it we've got
Alex up here if I was to go and say echo
user data password and a refresh we get
my password hash and the same with
things like first name and stuff like
that however obviously if I go ahead and
remove first-name we don't have access
to that so you need to make sure we've
got an undefined index error there so
you need to make sure that you're
passing through the all of the
parameters that you want to use and then
you can just use them as you please so
if for example and I'll just give a
quick example if we were to go ahead and
add say another field to here
at some point oops over in the structure
tab if we were to add a field at the end
of the table and this was to be called
I've no color and our favorite color for
example varchar' say 10 and I was to go
ahead and update my account to reflect
this this could be in the front end or
in the back end actually my favorite
colors green and click go now what would
I want to do if I want out update my out
output to my favorite color what I do is
I pass through color and then I can go
ahead and just use this anywhere on the
site and bear in mind this line we can
use anywhere on the site because we now
have access to this user data variable
and then we have the result there so
it's so easy we don't need to write
another line of code once we've done
this so if you're struggling with this
do it you'll you know you'll you'll feel
better a lot better for it
so let's go ahead and tidy up all this
rubbish I'm going to go ahead and get
rid of this color field at the end of
here so let's drop that okay and we
don't want to help my favorite color
that on our returns an error instead
what we want to do is we want to return
back to our original example which is
logged in here and I'm going to say
actually want an h2 in here because
remember this is a widget and it uses an
h2 let's go over to login actually as a
reference let's copy this paste this in
here so this is where we want to say
hello whatever and this is where we want
some links so some links go in here so
inside of here
I'm going to say echo in fact now I'll
do it the proper way so hello and then
echo use the data remember what we've
just done
we'll say first name we'll greet the
user by the first name I think that's a
lot nicer and the next nice exclamation
mark on the end when i refresh hello
Alex so we now have access to this data
anywhere on our site so any pages where
we include in it dot PHP we have this
information and that's about it we've
created a really flexible way to
retrieve data from the database we've
included this logged in script because
we are obviously logged in now otherwise
we would have included this but now that
we are logged in inside in it dot PHP we
check that we're logged in we save the
session we grab all this user data and
then we can output it absolutely
anywhere</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>