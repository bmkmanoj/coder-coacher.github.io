<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Raw JavaScript AJAX: Build | Coder Coacher - Coaching Coders</title><meta content="Raw JavaScript AJAX: Build - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Raw JavaScript AJAX: Build</b></h2><h5 class="post__date">2014-04-01</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/NLzvBcE_nVU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">okay so we're now going to be building
this Ajax functionality and we're gonna
be obviously using not using any
libraries like jQuery so let's go ahead
and just start to build this out and the
first thing I'm gonna do is create a
global app variable within Ajax j/s you
can see that I'm already including this
file onto the page so we need to do is
start filling this in let's go ahead and
create this app variable then and this
is basically just going to be a function
so what we're gonna do is obviously have
this as executing so all we need to do
is go ahead and provide this here so
anything inside of here then will be run
like so so let's go ahead and just head
over to Chrome and refresh and we see
hello so app is automatically run as
soon as the page is hit so within this
now what we're gonna go ahead and do is
actually do something like return an
object and we the reason we do this is
then what we can do is return a specific
object with different properties that we
can then use as part of this app so the
first thing I'm going to do is go ahead
and use the use strict statement here
and this is validated through jslint so
we're going to return an object now this
object is going to contain one property
one method if you like and this is a
function so this is the Ajax function
that we're going to be building so how
do we call this well let's just take a
look at doing a console log in here and
let's go ahead and look at running the
page again obviously nothing's gonna
happen this time we're not going to get
this console output but if we head over
to index.html and we say app dot Ajax
and we call this method when we go ahead
and refresh we now see this hello output
so we can now call this method and we
can go ahead and pass in any arguments
we want in this
we're gonna have the URL we're gonna
have a success callback and we're gonna
have an error callback so remember when
we created this here we had app dot Ajax
and then we had when we can provide a
URL here then we can go ahead and
provide a function here and we can also
provide a function here so let's do a
console dot log error and up here let's
go ahead and do a console log success
and let's go ahead and choose the file
name that we want to Ajax to in this
case is far JSON which is just basically
a valid JSON string in here so let's go
ahead and say far dot JSON is what we
want to Ajax ooh so what gonna need to
do now is inside of the Ajax j/s far we
need to go ahead and create a variable
and this is a new xmlhttprequest and
we're going to base this on the fact
that a XML HTTP request is available
otherwise what we're going to do is
we're going to create an ActiveX object
and this is for older versions of ie so
let's go ahead and create this variable
it's an X we're going to call it X XML
HTTP and this is going to basically be a
ternary operation to check whether
window dot xml httprequest is available
and this is what allows us to actually
perform the ajax request so i'm gonna do
window dot xml HTTP request so if that's
available what do we want to do well we
want to assign XML HTTP a new window dot
XML HTTP request now otherwise what we
want to do is we want to assign it a new
window dot active X object
and then in brackets this is going to be
Microsoft dot X M L HTTP so let's just
run through that again quickly we have
said create a variable if window dot xml
httprequest is available instantiate
this and store it here otherwise
instantiate this and store it here so
now that we've done that let's go ahead
and do something else this is going to
be actually opening the request let's go
ahead and say XML HTTP dot open and
let's go ahead and choose a method that
we want to open this with in this case
it's just gonna be get we're not going
to provide any option this wrapper we're
just gonna always open the request as a
get request so we're now gonna say you
around we pass true so what's gonna
happen now is the URL is gonna be passed
here and this will go ahead and I open
it now what I'm going to do is I'm going
to say XML HTTP dot sense we're actually
sending the request now so this
completes our ajax request we can head
over to our browser and check that this
is actually done let's go over to the
network tab and hit refresh and you can
see here that we've got a get request
too far JSON which is what we expected
because we provided that in the code on
index to HTML here so now what we're
gonna do is look at actually running the
callbacks based on this but we need to
only do this once now we have a request
complete and a 200 ok response code so
what we need to do is we need to create
a an event handler for the XML HTTP
object and this is on ready state change
so we say XML HTTP dot on ready state
change and we create a function here so
this
function will run when the state changes
basically when we send a request so I'm
gonna go ahead and type hello in there
ahead over to my browser and hit refresh
accessing the console you can see that
we've got hello here so that's worked so
what we're now going to do in here is we
need to check some particular things
because we need to check that the ready
state is equal to four that's a request
complete and we need to check that the
status is 200 which is an OK status so
let's nest a couple of this statement in
here we're gonna say if XML HTTP not
ready state equals remember the triple
equals for type comparison if that
equals four then the request is complete
now we're gonna nest again in if
statement and say XML HTTP status equals
200 there ok so let's consult log all ok
let's go ahead and refresh the browser
and he we get all ok so this is all good
now it's all well and good checking
these properties but how do we actually
know you know how to access them let's
go down here and just go ahead and
investigate the XML HTTP object so if we
go ahead and refresh now you see that we
get this out we can see the status here
we can see the response type we can see
the status text and we can see a variety
of other different things as well so
that's how we know what to expect here
so let's now go ahead and actually
create some more functionality in here
notably what we need to do is run the
callbacks as well so the callback is
going to basically just you know call
the function that we passed through in
index.html so what we're gonna do is
we're going to say if type of callback
is a function so we need to make sure
this is actually a function because
otherwise there's no point actually
calling it we're gonna go ahead and run
the callback and what we also need to do
is we need to add an Elk's to this
status check because if the status isn't
okay that means we have an error so we
go ahead then and we say if type of
error is a function run the error so we
can go ahead and we can check that this
these both these callbacks work because
what we've actually done is we've done a
console log success and a console leg
log error in this callback and in this
callback let's go ahead and check this
then so if we refresh we see success we
can go ahead and easily just change this
to files JSON just to force an error and
you see we get an error within the
browser and we get the error here so we
can handle these errors gracefully if we
want let's go ahead and change that back
to file and head back over to a XJS and
we need to do a couple more things in
here because just running the callback
isn't really good enough what we need to
do is give response text back and the
original XML HTTP object so the user has
more control over what they want to do
with it so inside of H index dot HTML
within this function what do we want to
see brought back well we want the data
and we want the XML HTTP object returned
as well for the error we want the actual
error itself and also the XML HTTP
object just in case in here we want to
do any additional output so I'm gonna
say error and then I'm going to
basically comment separate this and say
error so whatever's passed back here we
can output here so for the data which is
notably the most important thing how do
we get this data
well this is basically accessing the
response text that we saw earlier when
we did a console log on the XML HTTP
object so all we need to do here is pass
XML HTTP dot response text and we also
then pass the original XML HTTP object
as we've seen here so now instead of
console logging success will console log
data so we can actually start to see
things happen here and with the error we
need to say XML HTTP dot status text
because this is errored we know that
this will be an error and we also want
to pass the XML HTTP object back as well
so what we expect them to see well we're
hitting file dot JSON we're then running
this callback that we've passed through
here passing in the data which is the
XML HTTP response text and then we can
access it within here we're just console
logging it so we should now expect to
see the JSON object in here there bear
in mind at the moment this is only just
a string we're gonna go ahead and pass
the JSON that we get back and go ahead
and just console.log the name as an
example in terms of the actual code that
we've created for our Ajax functionality
here this is all done so inside of here
let's go ahead and just redefine data as
JSON dot parse data and then we'll go
ahead and console log later dot name in
fact let's go ahead and console log data
just so we can see how this now looks it
looks like this so it's now an object
with a property of name and a value of
Alex we can go ahead and access that
property by doing name and not outbursts
Alex
so that's how to Ajax to a file
we've Ajax to a JSON file and we've
passed it and brought it back we've got
a callback there for a success in the
callback there for an error and we can
successfully hit a URL and do what we
want with the result</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>