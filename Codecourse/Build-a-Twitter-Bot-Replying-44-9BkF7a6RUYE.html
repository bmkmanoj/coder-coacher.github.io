<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Build a Twitter Bot: Replying (4/4) | Coder Coacher - Coaching Coders</title><meta content="Build a Twitter Bot: Replying (4/4) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Build a Twitter Bot: Replying (4/4)</b></h2><h5 class="post__date">2016-07-04</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/9BkF7a6RUYE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">now we're ready then to actually reply
to the user so we can very easily do
this using code bird but there's a
couple of things that we need to bear in
mind when we actually use Twitter's API
so the one thing that we don't want to
do is just tweet the user with their
screen name we actually want to reply to
them so if we just head over to the
Twitter API and we go to statuses update
let's just search for this there we go
and we have a couple of options that we
can pass through here so if we just go
down we've obviously got the status
which is required that's just the text
that we send off that's going to be the
emoji and we want to make sure that we
pass in in reply to status ID so we
already have the status ID it's
literally just the ID that we get back
when we when we loop through these so
it's just tweet ID so with that in mind
we can now use code bird to reply so we
use the CB variable that's code bird
remember and we just say statuses update
we passed an array with all of our
options and we'll start with the status
because this is a little bit tricky we
need to basically decode the entities we
have just up here so they're actually
sent as an emoji otherwise we'll
literally just be sending this text here
which isn't great so to do this then the
status is going to start with an @
symbol because we want to add the user
into this or mention them and then we
want to grab the tweet user screen name
remember that's the way that we kind of
set this up before so we just have these
three items just here so now that we
have done that we want to add in a space
and then we want the emoji just here so
the emoji then is going to be a randomly
selected emoji from whichever emoji set
has been chosen so to start out let's
just say emoji set and then inside of
here we need to choose an index now to
get a random one we just want to use the
rand function we start at zero because
obviously arrays are zero indexed and we
use the count function to grab the upper
bound
this randomly selected number so in this
case it's going to be emoji set but we
want to minus one because if we have say
five in here we want to choose between 0
and 4 because that's a 0 indexed array
will end at 4 so we just minus 1 off of
there
so now that we have that emoji we want
to decode it so we use to do this the
HTML entity decode function you can
obviously read about this more on the
PHP manual if you want to but
essentially what we want to do is just
pass in the emoji so we're going to say
HTML entity decode we are going to pass
in the emoji to this we have two
parameters here one is the we just go
over to the manual the flags there be
any flags that we want to pass in this
case we don't need any and of course we
want to pass in the encoding and in this
case it is utf-8 and that is pretty much
it for the tweet body now the second
argument is going to be in reply to
status ID and we already know the tweet
ID so we just say tweet ID like so so
now that we've done this then for all of
them tweets we're going to tweet the
user store it so we don't keep replying
to them and this should now work
perfectly so if I just refresh here
let's just see what happens
we can go over and just check if there
we go so we didn't do anything there
we've we've not tracked any so we need
to obviously tweet this so let's say
code course bot and just say I love cats
go and tweet this go over here and
refresh and we should see a reply to
that come through let's just check here
and there we go oh so we have a I think
this might be a neutral face so maybe
Center but doesn't like cats or
something
let's go around just do another one just
to test this out so code course but
let's just say programming is hard tweet
this go and refresh and we should see
there we go great so we know that this
is working and we know that it is
tracking now that we've added two onto
here so when we refresh it's not going
to keep replying to that user so that is
pretty much it for the single page
version of this hopefully all of this
makes sense but of course what we want
to do is get this into a nice structure
so I'd recommend you go and followed the
laravel version of this this will mean
that we can set up very easily automatic
scheduling if you're familiar with
laravel and of course what we can do is
also queue the storing of these we can
queue the sending of a tweet and all
that good stuff and if you did want to
just test this out you can just set up a
cron job and run this every 15 minutes
but do be aware of Twitter's API
limitations so remember 15 calls every
15 minutes
and of course monkey learn will also
have limitations as well but you
shouldn't really hit them in the case of
20 tweets at a time with their analysis
so that is it we've built a bot which
replies to us based on the sentiment and
analysis of a tweet</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>