<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>PayPal Payments with PHP: Getting User (5/9) | Coder Coacher - Coaching Coders</title><meta content="PayPal Payments with PHP: Getting User (5/9) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>PayPal Payments with PHP: Getting User (5/9)</b></h2><h5 class="post__date">2014-11-12</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/gZLj6pcKbbQ" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so now we will fake the user signing in
just so we have that user to work with
and then what we can do is create an
index file that's essentially going to
act as a if statement to say you are a
member or you're not a member what also
going to create a connection to our
database in this part as well we can use
that for later parts of the series so
over in my text editor then in the main
directory let's create a new folder I'm
going to call this source this can be
app or something like that all we're
going to do with in here is create a new
file called start dot PHP and this is
going to contain quite a lot probably
more than you would write but this is
going to do things like fake the user
sign in which we're going to do in a
moment it's going to require in our
dependencies it's going to set up our
API keys set the config for the API set
our connection to our database etc so
the first thing we want to do then is
startup session so we can use sessions
this is useful as well so we can store
the hash which we spoke about when we
set up our database so let's create a
session here and the key is going to be
user ID and we'll set that to one so
this is like you would do if you were
authenticated your user you store this
in some kind of session now what we want
to do is set a connection to our
database we're going to be using PDO for
this now the driver is going to be MySQL
obviously you can use any database the
host here is going to be localhost or
127.0.0.1 just so we protect protect
ourselves against SQL injection so I'm
going to select everything from the
users table you don't need to select
everything and that's going to be where
the ID of the user
equals and then we create our
placeholder which we can replace in just
a moment when we execute this query so
let's execute this so we say user
execute and in here we pass an array
with the values that we want to replace
with the placeholder so in this case the
placeholder name is user ID like here
and we assign that the value of the
session key of user ID so that will put
one in this place basically so now what
we can do is just say user equals user
fetch object simple as that
so let's create then a index dot PHP
file let's head over here save this out
in this directory and let's obviously
open up some PHP tags now let's require
in that start file that's really
important so we want to require in
source start PHP and then let's do a var
dump on user just so we can see what
that user variable here contains and you
can probably imagine it's going to
contain all of the information that
we're pulling from the database and this
way we can use the email if we need to
send that off to PayPal we probably
don't in this case but with some
providers you might and whether the
remember or not so then inside of index
dot PHP what we can actually do is
generate some kind of document which we
can then output something down here so
let's use very basic pH should be
templating and we're going to say if
user member we want to do something and
then let's say else and let's end that
if they're like so so if they are
remember we just want to say UI member
and otherwise we want to say you are not
a member and we can create a link going
through in this case it's just going to
be a hash for now this will eventually
be our checkout process start
we'll just say become a member this can
obviously be anything so now if we
refresh we expect to see you are not a
member become a member
obviously let's get rid of this far dump
here that's not really needed and if we
change the value inside of our database
to 1 we should expect to see that go -
you are a member so we've created the
very basic functionality that actually
tells us if this user is a member or not
so for now let's set that back to zero
and we can continue on so next we're
actually going to look at pulling in our
composer autoload file remember earlier
we pulled down the PHP SDK for paypal
and then we're going to pass in our
token credentials out our orth token
credentials which will basically be our
client ID and our secret</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>