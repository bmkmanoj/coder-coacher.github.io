<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>PHP Authentication: Profile Pictures (22/30) | Coder Coacher - Coaching Coders</title><meta content="PHP Authentication: Profile Pictures (22/30) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>PHP Authentication: Profile Pictures (22/30)</b></h2><h5 class="post__date">2015-05-27</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/CLq_6_YPGKI" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">what we're going to do now is add an
avatar to users profile we're not gonna
be looking at uploading a profile
picture but we're gonna be pulling a
profile picture from Gravatar which is
an extremely popular service used to
show avatars across different websites
all this means is that you sign up for a
Gravatar account you upload a profile
picture and you have your email address
on there as soon as you sign up to a
website with an email address which
we're obviously doing here essentially
your avatar will just come through so
I'm going to do then is I'm going to
from this user account so what I'm gonna
do is I'm going to delete this record
that we have in here and I'm going to go
ahead and I'm going to register for a
new account and when you use my email
address and go ahead and use a password
so you've been registered but what we're
going to do is just activate my account
from the database so we don't have to go
through the process of the email so now
what I can do is go ahead and login so
let's login and then we can start adding
this avatar and the reason I've used my
account is because I already have a
Gravatar set up and my email address
when we make a request to Gravatar we'll
pull back my profile picture but if you
don't already have a Gravatar account
you can go ahead and create one and test
this out so what we need to do then is
we need a way to easily pull a user's
Gravatar URL from their account and to
do this we're gonna update the user
model so if we take a look at how to use
Gravatar so how to use creating the hash
all this requires is taking an email
address and creating an md5 hash from it
and then what we do is we attach it on
to the API so if we go to Gravatar image
requests you can see that this is the
hashed email address all we need to do
is append it to this base URL so let's
grab that base URL and unsighted the
user model let's create a new method yet
avatar URL
and from this we're going to return a
string which is going to be the base URL
for Gravatar and then inside of here we
want to add the users email address and
in fact let's make this single quotes
and append this on so the users email
address is just this email and as it
mentioned we just create an md5 hash
just here so we have a couple of options
as well within Gravatar what we can do
is we can set the size of the avatar so
we can set the default size of the
avatar and what we can also do is set a
default image so there's a couple of
options for default images you can
choose one from here but we'll be
including the identic on which is
essentially a geometric pattern based on
an email hash that will look like this
so what we need to do then is we need to
add this size parameter but to make this
a little bit more efficient what I'm
going to do is I'm going to allow four
options to be passed into this method so
I'm going to say options and I'm going
to set that to an empty array for a
default so what we can do then is we can
detect the size so we're going to say
size equals is set options size if that
is the case we're going to output
options size or assign option size to
size otherwise we're going to set a
default size of 45 then what we can do
on the end of this URL we can say s
equals and then we can depend on the
size so I just sighs and let's take a
look at this and then we'll add the
default option so how would I output the
avatar well I'm going to do this within
views templates partials navigation and
I'm going to do this just up here so all
I want to do then is either inside this
paragraph or we could get rid of this
paragraph all together it's entirely up
to you just under here let's create an
image tag now for the sauce we know that
Earth represents the currently signed in
user so we can just say auth yet avatar
URL and if we wanted to we can pass in
size 30 for example we just have a
default size if we don't include this
and then out we can just say
your avatar so now let's check out what
this has done if we go over to our
website and refresh you can see that
that pulls in an image of me just there
so what happens if we don't have an
avatar
well let's log out and register a new
account under the tabie code course comm
which doesn't have an account on
Gravatar so that's register that user oh
ok so let's change the username
ok so we've been registered let's update
this in the database to active no sorry
this record here active one and we'll
get rid of this absolutely no ok so
let's login with tabby code course comm
we just see this default Gravatar logo
so we can change this by appending as
we've already said to the end of the URL
we can add identic on at the end and all
we need to do is say D equals and then
identic on so let's go ahead and do this
over now use a model
let's append on and D equals identic on
and then we'll go ahead and refresh here
none that generates that nice pattern
but you can choose any of these this is
probably the most popular which is mm so
that is a really quick way of putting in
the users avatar like I said this
service is very widely used so it does
make sense to go ahead and take
advantage of it so you don't have to
upload any files to your server and you
can include this anywhere you want with
the new method that we've created on the
user model</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>