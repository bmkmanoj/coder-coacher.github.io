<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>PHP Security: What you shouldn't store in cookies | Coder Coacher - Coaching Coders</title><meta content="PHP Security: What you shouldn't store in cookies - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>PHP Security: What you shouldn't store in cookies</b></h2><h5 class="post__date">2015-10-13</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/q7bU9A6eQYM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">we're now we're going to talk about the
issue of what you should and shouldn't
store within a cookie now this is very
blurred as to what we should and
shouldn't store and obviously within
cookies there are some circumstances
where you may need to store something
that would be unique to a user to say
sign them in or perform another action
on their behalf we're not going to dive
too deep into that but what we are going
to talk about is what we absolutely
should not store in a cookie and kind of
what cookies are and how they work so
you may already know that a cookie is a
plain text file that is stored on your
users computer it just contains text
it's not exactly executable it can't be
run however when we revisit the website
that we have store the cookie on we send
that data along with an HTTP request and
then the website can reuse that
information so let's take a look at just
setting a cookie very basically so I'm
going to go ahead and create a new date
time instance and you might be wondering
why I'm doing this this is so we can set
the expiry for the cookie I'm gonna use
PHP setcookie function and I'm going to
go ahead and store a piece of
information that we absolutely shouldn't
now let's say you are remembering a
particular user so you want them to be
remembered for a week on your website
when they come back to your website
you want to grab their user ID and you
want to sign them in well what we
absolutely should not be doing is
storing something like this now we
shouldn't really even be trying to
obfuscate this to make it seem like it
isn't a user ID we just shouldn't be
doing this unless we have very secure
implementation to actually handle this
we're not gonna go into that too much
but if I go ahead and set this with the
time stamp from my date time object I'm
going to go ahead and set this on this
path I'm gonna set secure or the domain
to null secure to null and I'm gonna set
HTTP only so this is a cookie now that
when we refresh the page we'll be set
here with this particular value now not
can this value be modified so for
example if you had signed user 1 in and
you wanted use a 1 to be remembered
I could modify this cookie value I can't
do it within Chrome without an extension
but I can do it easily within Firefox
with something like Firebug always some
kind of Chrome extension I'm not sure
about Internet Explorer but either way
the point is I can change this value
very very easily so what that means is I
could change this value to user ID five
or ten or hundred and I can then have
immediate access to someone's account so
that's really the first reason why we
shouldn't be storing plain values like
this that are so integral to
authenticating a user that's really
important so that's pretty much it but
we're gonna take a look at the network
tab now I'm just gonna refresh the page
and we're gonna head over if we just
pull this up to look at all of these
requests you can see here that the
headers that are actually being sent
along with this request actually contain
that cookie value so let's come down and
find it so you can see set cookie here
user ID equals 1 so if you weren't aware
of how a cookie works this is pretty
much it this value is stored on my
computer and my browser knows that it
was set by this particular domain this
particular website and then it goes and
sends that value so by being able to
modify this value I'm then in control of
anyone's account so that's why we
shouldn't store plaintext values like
that that can be easily modified and
used to access any ones either
anyone elses account or any other
information within a cookie</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>