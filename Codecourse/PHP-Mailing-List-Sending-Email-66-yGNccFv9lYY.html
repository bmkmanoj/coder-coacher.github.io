<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>PHP Mailing List: Sending Email (6/6) | Coder Coacher - Coaching Coders</title><meta content="PHP Mailing List: Sending Email (6/6) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>PHP Mailing List: Sending Email (6/6)</b></h2><h5 class="post__date">2014-06-06</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/yGNccFv9lYY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">now that we have allowed users to
subscribe to our mailing list we're
gonna work on the ability to send a
message with a subject and a body so
what we're going to do is inside of send
up PHP we're already requiring it in
everything we need we've got a form here
which again is fairly straightforward it
just sends a HTTP request to send PHP we
can pick up everything we need like the
subject and the body here fairly
straightforward you can go ahead and
implement this however you want so what
we now need to do is do a quick check
for the subject and the body and make
sure they're set so subject and body and
inside of here we can then just store
them locally so we can quickly access
them now when we send an email to lots
of people this doesn't mean we have to
do it in a loop we're not going to loop
through everyone that's subscribed what
we're going to do is we're just going to
call the send message method that we've
already seen in the subscribe and
confirm pages because what we now do is
we send the email to the mailgun list
address so if we look under here as long
as we send an email to this address so
news at and then my sandbox address this
will send the email that we provide to
all of the recipients so again this
could be hundreds of thousands so we're
gonna say mailgun send message we're
going to provide the domain as we've
done every time and we're also then
going to provide our array that we've
done before so from again is no reply
PHP academy' to org - this time instead
of doing it to an email address it's to
mailgun list which we stored as a
constant here which we've just spoken
about and what we then want to do is
to provide a subject in this case it's
going to be the subject that we provide
through the forum that's posted back
through to this page and then we have a
body sorry a body which is HTML or text
in my case it's just going to be body
now one important thing that we really
need to make sure that we include and
this really has to be included is the
unsubscribe link now just quickly
popping over to the documentation for
mailgun we get these things called
template variables now we're going to
look at these in a minute when we send
out email but you can see that we've got
things that we can actually provide in
the body of the message so we can type
these in we just get rid of this we can
type these into here and that will pick
up for each user that this is sent to
their first name their last name etc
what we need is we need our unsubscribe
URL so we can copy this and include this
in every message that we send so I'm
just going to actually if we just put
some double quotes here and put the body
in here do a couple of line breaks and
then paste in the unsubscribe URL and we
can put this inside of an anchor to make
it easier for the user to click on let's
just escape that and escape that and
subscribe so that allows the user to
easily unsubscribe from our mailing list
which we saw in the introduction video
so let's now take a look at actually
sending an email
so we'll forward ourselves back to the
current folder and let's test this out
so I'm gonna type in big news or
something this is big news so this is
sending a basic email we hit send that
send it to the list and if we check our
email we can see that that has been sent
to us there we are we've also got the
unsubscribe links which we'll look at in
just a moment I'm not going to
unsubscribe myself
because I'll have to read subscribe so
inside of the user manual let's try and
create a body where we maybe address the
user by their first name so in this case
it's really easy for us to say something
like if we click on send dot php' let's
just say more big news so we're gonna
say hello recipient first name this is
really big news so we can use any of
these template variables in our message
so if I hit Send now and we check our
email you can see that that has
addressed me by my first name
and this means that not everyone's gonna
obviously be dressed as Alex this will
injury address the user personally it
just makes it so easy to personalize oh
emails or mass emails so let's now take
a look at unsubscribe you can see if you
look at the bottom of my browser this
goes through to a mailgun email of
mailgun domain and when we hit this this
will allow us to unsubscribe from this
particular mailing list in reality this
wouldn't say sandbox because we wouldn't
use this in production it would say
something like your domain so if I hit
unsubscribe it's now says it's official
you have unsubscribed so we can see the
users that have unsubscribed here and if
we scroll down it shows that the email
address Alex at PHP academy' the org
hasn't subscribed we can remove them but
it's probably not a good idea if the
user has chosen to unsubscribe here so
that is basically it we can also enable
the unsubscribed link in the footer if
we don't want to automatically put this
into our code and you can also edit the
template for this as well so you don't
actually have to include this
unsubscribe URL but probably if you want
to make this part of your email and make
it look nice you may want to do so so
that is pretty much how we send mass
email or create a mailing list with PHP
using mailgun you can see how
straightforward it is and obviously this
is a really scalable solution rather
than doing it all on your server
you can actually see here that the
maximum list size is two and a half
million so that's how we create a
mailing list with PHP</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>