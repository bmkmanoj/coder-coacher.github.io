<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Laravel Eloquent Relationships: Many To Many (4/6) | Coder Coacher - Coaching Coders</title><meta content="Laravel Eloquent Relationships: Many To Many (4/6) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Laravel Eloquent Relationships: Many To Many (4/6)</b></h2><h5 class="post__date">2014-08-29</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/bjF7NE_xYMk" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so we've had a look at the belongs to
relationship now what we're going to
look at is the belongs to many
relationship so to demonstrate this I'm
going to go back to my database and I'm
going to create a new table and I'm
going to call this roles so in here what
I'm going to say is I'm going to have a
wrong name if I chart to 55 and we could
also have things like role permissions
but obviously this is just a
demonstration so we're not going to get
into that so now let's actually create a
couple of roles we'll say administrator
and we'll also say moderator whoops and
that'll do for now so we have a user's
table and we have our roles table but at
the minute we have no way to to tell
which users have which roles so what we
could do is we could add a user ID field
here and then we could say user one so
Terry is an administrator but what if we
want a user to have multiple roles well
then we're going to have to add another
column another entry sorry called
moderator and then we're going to have
to do user ID equals one again but what
happens when you want to change the name
of a role well then you're going to have
to do a query to your roles table to
find all roles with the name of
moderator or administrator and then
change that and that's just a bit of a
hassle so what we're going to use
instead is something called a pivot
table so a pivot table acts as kind of a
bond between two or usually - but
there's sometimes more - tables so
there's a way that there's a naming
convention for this so if we look at the
two tables that we're trying to create a
bond for its roles and users so what we
do is we sort them alphabetically so
roles users and we separate them by an
underscore and then we make the the
table names singular so we'll add that
and what this will have is user ID and a
role ID so if we go back to our roles
table or C let's get rid of that user ID
field we have an administrator and a
moderator role so let's give Terry a an
administrator role so user ID equals 1
and row ID equals 1 now let's also make
him a moderator sounds a bit pointless
but there you go so user ID equals 1 and
role ID equals 2 so as well as
displaying the country here what I want
to do is also display the users roles so
here I'm going to say roles and then
well we need to set this up so first
things first we need to create a new
model for our roles table plus role
extends and the quint and then what we
need to do is go to our users tab F
users model and say public function
roles and we're going to return this
belongs to many role and again we're
going to reference that model not the
actual table named so because laravel is
so clever what it does is it gets the
name of the model that you provided and
the name of the model that you're
calling it in and using the naming
convention we already discussed it
calculates the name of the pivot table
so that's all we need to worry about but
if you decided not to follow the naming
convention for some reason and you
called the table something like users
roles what you could do is specify that
table name as a second argument but in
this case because we follow the naming
convention we don't have to worry about
that so in here what I'm going to say is
I'm going to add a for each loop and I'm
going to say future roles as role
and then what we're going to do is let's
put this in a unordered list it's not
going to look great but it will work so
what we're going to say is Li list item
role name so back in the browser hit
refresh and there we go we get our roles
administrator moderator so just to make
sure that this works exactly how we want
to do let's add another role or call
this editor and then we'll give Terri
the role of editor hit refresh and there
we have it
Terri now has the role of editor so if
we head over to Alex's profile it
doesn't have any roles at the minute
let's try to give them an admin position
user ID equals two sorry hit refresh and
there we have it</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>