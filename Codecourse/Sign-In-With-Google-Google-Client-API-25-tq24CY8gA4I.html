<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Sign In With Google: Google Client API (2/5) | Coder Coacher - Coaching Coders</title><meta content="Sign In With Google: Google Client API (2/5) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Sign In With Google: Google Client API (2/5)</b></h2><h5 class="post__date">2014-05-24</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/tq24CY8gA4I" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">okay so to get started with actually
using Google the Google API we're going
to need to first of all generate some
credentials and you'll have a need to
basically go over to the developer
console and under your apos and auth
credentials you'll need to create a new
client ID so the information we'll need
is this one here the client ID the
client secret and the redirect URI which
is really important this has to match
the path back to your page where you're
going to be checking for this
authentication basically so you'll need
to set this up to match or Google will
give you an error when you basically
forward a user through so once you've
done that you've got all your details
that you need and we're good to go
but we need to install the Google API
client for PHP so we're going to do this
through composer so basically inside of
our root directory here we're going to
create a new file this is basically a
composer JSON file which we're going to
store in here so let's call this
composer JSON and this is basically just
going to require in the details
you are the package that you need since
this is a package manager so this is the
place we're getting it from let's put
that in there you'll need to install
composer but head over to get composer
to or follow the instructions for
whatever operating system you're working
with if you don't already have installed
it's super simple so we say composer
installed inside of that directory
that's going to go ahead and install the
Google client API for us okay so now
that that's done we've now got a vendor
autoload file basically so we're going
to start to load stuff in now and create
this Google auth class so inside of my
root directory I'm going to create a new
folder called app I'm basically going to
keep everything out the way inside of
here and I'll need to create a new file
here this is going to do a couple of
things the first thing is use a session
start because we are going to be using
sessions here as we normally do for
authentication so we use PHP session
start
we also want to load in the autoloader
from composer so inside of that vendor
folder so we do require once and we
require vendor slash auto loader PHP
that's all we need to do to load in our
Google client API which was just the
library that we've just downloaded it's
done so let's say this is in it dot PHP
we can include this from any page that
we need to start working with now we
also need to include out database and
our Google Earth class but we haven't
quite created them yet so inside of app
let's create a new folder and call this
classes and we will create a new file in
here and this is going to be our Google
Earth class and this is going to contain
the majority or basically all of the
functionality that pertains to actually
authenticating with Google checking if
we're signed in to checking of the
session set checking for a code return
from Google so we can authenticate with
it this is going to be our Google Earth
class this just closed that vendor
folder ok so inside of here let's
actually start to provide some of the
details that we need to connect so we're
going to have a construct function which
is obviously going to be run this magic
method sorry is going to be run when we
instantiate our class so we need to pass
through an instance of the Google client
so we need to we'll do type hinting here
we'll say Google client which is
basically what it's called and we'll
pass in a Google client now by default
we want that to be null just in case it
doesn't exist and there's a reason for
that later on we find out that we need
to instantiate this class to log out we
don't need to provide Google client
information when we log out so we'll get
to that later so what we want to do is
we want say if in fact we want to set
this to a protected property first so we
tell you protected client that's going
to store that so we say this client
is the Google client and now we want to
check if this client has been set
because by default is null so this
eventually will end up null if we don't
pass it through so if that's the case we
need to set our client ID our client
secret the redirect URI which must match
what we set under the settings over here
and we can get rid of this now and
that's it oh and the scope as well which
is just going to be the email we were
just interested in grabbing the user's
email so we can now say this client and
we're going to use the set client ID
method we're going to pop our client ID
and there we've also got the set client
secret method we're just going to pop
our secret in there and we have the set
redirect your I method that's going to
be the redirect URI and we just finally
have the set scope method and this will
just be email that's all we're after
so let's sir copy the details over from
here and put them into here so that's
the client ID we've also got the client
secret here and we've got the redirect
URI which again because this is a
massive thing if it doesn't work it's
not gonna work if it doesn't match
nothing to work this must match the file
that you're passing through so we
haven't created index dot PHP yet but we
will be so that's going to go in there
and we're done
so let's instantiate this and see if it
works so we've got this load well we
have got this loaded in yet so let's
require this in classes Google or PHP
and okay so inside of our root directory
let's create a new file on your folder
and we'll call this index dot PHP we
will require in
at init.php which will do all the hard
work for us and we will say auth is a
new Google auth and that's it eventually
we're going to pass in oh no we do of
course we need to pass in so we're going
to need to say I know Google client
equals new Google score client so what's
happening here is we're creating a new
instance of the Google crime we don't
need them brackets as notch and pass in
and now we're going to pass in the
Google client this is basically
dependency injection we want to
instantiate this within our Google auth
class and because obviously then it's
dependent on this so we're passing that
in as and when we need it so if we have
over here we don't see any errors which
is sounding good let's just check this
part is actually executing so we just
type in okay awesome in there okay so it
looks good we don't see any errors we'll
find out any problems later when we
start to generate URLs if there if
anything gone wrong but as far as it
goes at the moment it doesn't look like
there's anything wrong so we have now
authenticated with Google hopefully
we've loaded sort of loaded our details
in and we can start to do things like
getting the authentication URL and
things like that</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>