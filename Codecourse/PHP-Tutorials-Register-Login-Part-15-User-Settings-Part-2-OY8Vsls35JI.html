<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>PHP Tutorials: Register &amp; Login (Part 15): User Settings (Part 2) | Coder Coacher - Coaching Coders</title><meta content="PHP Tutorials: Register &amp; Login (Part 15): User Settings (Part 2) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>PHP Tutorials: Register &amp; Login (Part 15): User Settings (Part 2)</b></h2><h5 class="post__date">2012-05-13</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/OY8Vsls35JI" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">ok so now we're going to continue with
the validation it's obviously you know
fairly boring but we need to get this
done
and it'll also go over you know a few
more things that we've looked at and
hopefully clarify them better ok so now
what we need to do is once we've loop
through our items we need to do another
check that this array is empty the
reason being is that if we hit any item
that has not been specified or anything
nothing's been typed and it's required
we don't really want to do any more
validation until all of the field form
fields are filled in so here I want to
say if empty errors is equal to true
then what do we want to do well the we
don't have much data really to validate
we've just got the email address here
the first name really can be any amount
of characters we haven't specified
whether it has to be greater than or
less than a certain amount of characters
obviously if you had done that in your
registration process it'd be a good idea
to include that that here as well that
check here but I'm just going to be
focusing on validating the email address
and then we'll go on to the actual
important part which is actually
updating the users details so I'm going
to do a couple of or I'm going to do an
if-elsif statement here and the first is
validating the email address much like
we did down here using filter var and
then we checked if the email exists or
not
so I'm going to say filter far email and
how we want to validate this so I'm
going to validate sorry filter validate
email now if this is equal to false that
means that we have an invalid email
address so we can go ahead and basically
just copy this here paste that in there
now if the email address is valid we go
on to this part of this this block of
the if statement and then we need to
perform another check now this is where
the logic starts to get slightly
different now we need to check if this
email address already exists because if
the email address already exists we
can't have another user use it say I
registered and the
you registered and then you tried to
change your email address to my email
address that's not something's wrong
there you know we don't want to allow
that but we also need to include an
additional part to this condition and
that is as long as the user the current
email is different from the from the
email stored the reason being is that if
I let's just talk about me now if I went
and registered with an email address
Alex a PHP academy' dog or Billy a PHP
academy' two org and then I wants to
update my details and I left my email as
it was that that email technically
exists so only want to perform this
check when the email address has been
changed within the field hopefully that
makes sense if not I write it out and
then it will so we need to use the email
exists function that we created if you
need to remind yourself go back and look
at that and we're passing through the
posted email address so if email if
e-mail exists is equal to true then we
need to error but only when as well so
and the user data email which is our
current email address remember we're
using user data down here doesn't equal
posted email so we'll take a look at how
this works in a moment when we test out
all these these things but essentially
we need the same error if that email
address already exists and we're done so
let's go ahead and just print our errors
this will just give us a visual
representation of our array I'm going to
hit settings and I'm going to click
update okay so we've got an undefined
variable here we can go ahead and fix
that
so undefined variable email in on line
16 nine sixteenths here okay so yeah
I've tried to pass through a variable
email that unfortunately doesn't exist
it is dollar underscore post email that
we're validating so that was a problem
there okay so let's go back onto setting
fine let's click update and the array is
empty which is good news that's what we
want to see if I then go ahead and say
don't include my last name that's fine
no no problems there's you know
nothing's happened really I know this
has popped back but that's only because
we're not actually doing anything once
we've clicked update so if I was to
remove my first name or that's not my
first name but update it now says feels
mark then asterisks are required so
we're getting this this data these
errors start to show through
now you notice when I click update this
isn't returning an error saying oh that
email address isn't it you know it's
already in use if we didn't have this
part just cut that out for a moment and
we clicked update it says sorry the
email Billy at PHP academy' dog is
already in use because you know if you
get a hold and this is my email address
what's the problem so that's why we
include this part in here ok so now if
we're going to try and change this then
you know it will be validated so for
this I'm just going to go ahead and
create a new user account in here so I'm
going to really quickly do this so my
username Alex password password
Alex Garrett's this email don't have to
worry about that and I'm going to
activate my account make sure that is an
md5 hash could go so I've manually
registered this account called Alex with
the email Alex at PHP academy' dog if I
was to change this to say Fred at PHP
academy' dog I click update there's no
errors we can change I can change my
email address to Fred at PHP academy' at
all if I change it to Alex at PHP
academy' dog however the email Alex at
PHP academy' dog is already in use so
we've you know we've gone through chop
Li and check these this form field
validation so now to actually output the
errors we'll quickly go ahead and do
that we want to do this under the header
so remembering a logic at the top and
then we're outputting anything down here
so what do we want to say well we want
to say if empty the lot underscore post
is equal to false and empty errors is
equal to true then what do we want to do
well this means that we've posted data
and there's no errors so we want to
update user details otherwise what do we
want to do what we'll say else if empty
errors is equal to false and what does
this mean well this means we have errors
so we go ahead and we echo using our
output errors function that we created
earlier on so again if you're unfamiliar
go ahead go back and check that and we
echo the errors okay so at the moment
we're not doing anything if we are
successful but when we click update when
we sorry when we click update and we
have something wrong we get this error
out here we get some error business
going on ok so now that we've done that
that's perfect we need to go ahead and
actually look at updating our user now
so we're going to look at that in the
next part we're going to be constructing
an array of data that we need to pass
through to our function to update
exactly like we did in register we're
going to update the details redirect the
user and show success message</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>