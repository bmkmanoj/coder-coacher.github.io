<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Laravel 5: What's new?: Handling Requests (3/5) | Coder Coacher - Coaching Coders</title><meta content="Laravel 5: What's new?: Handling Requests (3/5) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Laravel 5: What's new?: Handling Requests (3/5)</b></h2><h5 class="post__date">2015-02-20</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/1_51Lxi4UME" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">in this video we're going to look at
handling requests in laravel five just
so to demonstrate this I'm going to
create a new view the views directory is
now under resources by the way and we'll
just call this form the play whp we're
going to open up a quick form we're
going to set the method to post we're
going to create a label set this phone
name and we'll have an input field
hey equals text name equals name ID
equals name that I'll do there I think
then we'll have a submit button and we
also need to have our token so input
type equals hidden name echoes token
underscore token that's important and
funny equals C RF as CSRF underscore
token as a function so the next thing
that we need to do is create a
controller so inside haitch ttp
controllers going to create a new file
will call this request controller in
fact now we'll call it something less
confusing or say form controller it's
going to have the namespace of Acme HTTP
controllers so class form controller and
it's going to extend controller so going
to have a public function index the fact
we'll call this show form and we're
going to return view by the way in
laravel five instead of calling view
make you can simply call few as a
function just makes things a bit more
readable so we're going to return view I
think we called it phone yes okay so
finally we just need to add our routes
sitting our routes file in the our HTTP
directory I'm just going to remove some
of this stuff here
they don't leave that home right that
just adds a little separator we're going
to say route get fold slash which is
basically just the default route we're
going to say farm controller act show
fall so let's refresh and see if this is
working which it is great if we submit
we're going to get an error a method not
allow HTTP exception and that's because
we only have a route for the get request
we haven't actually added one for the
post request so we're going to say route
post farm controller at post fall so
we'll create that method now post forum
and we'll just lead the input all so
let's refresh that what enter our name
and hit submit all right we need to
either use statement for that since
we're in the namespace directory hit
refresh and there we go we have the name
that I entered and my hidden CSRF token
so validation previously we'd have had
to say validator equals new validator
make wit pass in the input and would
pass in an array of rules so it says
something like name is required well so
do we have well that's it let's add a
mineral of three and a max of six and
then would say something like if
validator fails return redirect and in
fact there's also a redirect function in
laravel five so read return redirect
back you'd passed the input and with
errors passing the validator so you can
see it's quite cluttered and especially
when you have lots of
post requests your controllers is going
to be full of the same code just with
different rules so laravel five combats
that pretty well this is get rid of all
of this now inside of our HTTP directory
we also have a requests directory and
all this contains for now is one
abstract request class so what we're
going to do is we're going to use
artisan to generate a new request so if
we just list our help inside here here
it is make requests so PHP artisan make
requests and we're going to set the name
of the request which would be form
requests it would typically be the same
as this in fact let's just make this a
bit more readable a bit more
understandable sorry name request and
you'll see that our request gets created
here so let's just clean this up so now
what you can actually do is enter your
rules here so he had name it's required
we had min 3 and Max 6 and then simply
inject that request using the method
injection that we looked at in the last
video so name request request and we'll
add a use statement for that use Acme
HTTP requests name request down here
we'll just echo your name is and in bold
we'll say input get name and we'll add a
little exclamation mark there so if we
submit now without entering anything we
should get something that's not that so
the problem with this is if we go back
to our name request it said the user
isn't authorized
to make the request so all we have to do
is return return true here typically
what this would be used for is for
example checking for missions so if the
request was to let's say create a user
through an admin panel it says something
like return auth user is admin and if
the user isn't an admin then they would
get this forbidden message but since we
don't have that functionality in this
application we're just going to simply
return true hit refresh and we get
redirected back now we're not actually
displaying any errors here so let's
change that if errors for each errors
are as error and for each in fact I'll
make this little list so all and we'll
just leave that error there we go so we
get the name field that is required if
we enter something that's under three
characters we get this or there error
message and if we end something that's
over 6 we should get the name must be
over or sorry under 6 characters like so
so we did all of that by simply creating
that class and injecting it through this
method now if we enter something that
will pass the validation and hit submit
all the code inside of that method gets
executed so obviously that's a much much
cleaner way of handling requests in
laravel 5</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>