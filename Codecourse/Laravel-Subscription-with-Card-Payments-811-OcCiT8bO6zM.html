<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Laravel Subscription with Card Payments (8/11) | Coder Coacher - Coaching Coders</title><meta content="Laravel Subscription with Card Payments (8/11) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Laravel Subscription with Card Payments (8/11)</b></h2><h5 class="post__date">2014-07-15</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/OcCiT8bO6zM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so we now want to allow the user to
resume their subscription if they no
longer want to cancel by this date so we
need to do a very similar thing to that
we're doing here and in this case I'm
just gonna put an else here I'm going to
create another list item with another
anchor inside here and basically this is
going to be to resume a subscription
now the anger for this other sorry the
HR for this is going to be the action to
subscription resume now we're also going
to pass the token here because again
this is a candidate for potential
cross-site request forgery attack so
we're gonna add the token in here
manually with the cross-site request
forgery token helper but we obviously
don't have this subscription resume at
the moment so where do we put this well
before we resume a subscription the user
needs to be subscribed now this is a
little bit confusing subscribed means
they're an active subscriber they may
still have canceled so we can just
basically copy this say resume we can
get rid of that and we can say cancelled
subscription resume and we can say get
resume and we need to create this
cancelled filter so we can basically
just copy this paste that there and if
the user hasn't cancelled will just
redirect them here so we aren't creating
a lot of filters you could do this
within your controller but it does just
make it a little bit neat just to get
them out the way and then they can be
reused really easily so we're basically
resuming now so at the moment we hit
enter on here and refresh we click
resume but obviously the get resume
method doesn't exist so let's create
that now inside of our subscription
controller so get resume now this is a
little bit different it's not much
harder to implement but basically to
resume we need to choose the users
subscription
and actually define it now we know that
the users current subscription or plan
rather is stored in here so what we can
do is we can say this user and then we
can say subscription we need to provide
a subscription here like small or large
so in this case we can just say this
user stripe plan and then we use the
resume method and there we go we're
resumed so now we can just redirect the
user back to the generic subscription
page cool so let's take a look at this
now I'm gonna go back I'm gonna refresh
hit resume and then we go we're back in
the state that we were in when we
subscribe the first time we don't have
the message showing that we've cancelled
but we now have the count on my
subscription option I can go ahead and I
can click on cancel my subscription
again if I really wanted to and there we
go and then I can go ahead and resume it
again so that's how easy it is to cancel
and resume subscriptions
we've now given the ability for users to
do that but next what happens if you use
wants to update their card to details if
they want to use a different card well
in the next video we're gonna look at
how to do just that</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>