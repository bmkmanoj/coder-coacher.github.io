<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Learn PHP: Basic CMS - Output Pages (Part 3/8) | Coder Coacher - Coaching Coders</title><meta content="Learn PHP: Basic CMS - Output Pages (Part 3/8) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>Learn PHP: Basic CMS - Output Pages (Part 3/8)</b></h2><h5 class="post__date">2015-07-11</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/t0x18Gy2raE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so in this part we're going to get our
home page set up that's basically just
going to list all of the links that we
have stored in our database for each
page so we already have this example
page here but let's go ahead and create
another one just so we can see this a
little better so I'm going to create a
second page just here and we can go
ahead and add a title and page in here
to be a little bit quicker do the same
for the slug as well so second page and
created that has already been added for
us but again you can use the now
function if it hasn't so what we now
need to do is inside of our index.php
file we need to create a query that's
going to pull all of the pages from our
database table so I'm going to create a
variable called pages and I'm going to
use that database object we have stored
in start dot PHP which remember we are
including in here I'm going to use the
query method so inside of here we have a
string and I'm going to pull this down
so I can do it on multiple lines and
we're going to use select to select the
columns that we want to pull back now I
want back the ID the label and the slug
and now we're going to pull that from
the pages table and that is it that's
how query that's going to pull in all of
our pages now this won't actually give
you all of your pages just yet we need
to use a method called fetch all which
is going to allow us to fetch all of the
records that result from this query now
we need to choose the type we want to
pull this back as so I'm going to choose
an associative array so I use PDO and
then we have this static fetch a sock
which means associative so how do we
know the contents of this variable now
we can use var dump to give us a rough
idea so if I say var dump pages this is
going to give us an
of everything within that so it looks a
little bit messy we can go ahead and
just view the page source to make that
look a little bit nicer and you can see
here we have an array with two items in
it the first you can see contains the ID
which is one the label and the slug and
the second array has ID label and slug
for the second page so we've got an
array now of both of our pages and
obviously if we add more pages we would
have more here as well so we don't want
to do that instead what we want to do is
we want to kind of pass this to a new
file where we can output it to the user
of course what we could do is down here
we could start writing up our document
but that's sir a little bit messy we
want to keep things nice and tidy so I
need to require in a view we haven't
created a view yet for our homepage so
we can go ahead and do that now so if I
go ahead and create a new file in here
I'm going to go ahead and I'm going to
call that home dot PHP and inside of
here let's just for now write home and
we want to include this just in here now
we don't know the path to our views file
well we kind of do because our app route
which remember represents this folder
here is stored as a peru as a global but
wouldn't it be a lot better if down here
we could define our view route so let's
do this now we're going to say view
route and we're going to assign this the
value app route and then we're going to
append on forward slash fuse so this is
going to do is it's going to mean the
path to this app folder here but then
inside views and we know that home dot
PHP is inside there so what we can do on
the home page then is we can go ahead
and require this in so let's require
view route forward slash home dot PHP
now when we refresh we see home and what
we can do is we can use this pages
variable within this file here to go
ahead and output everything we need now
the one thing we haven't set up is the
template for our site we already have
the CSS file which you should have
downloaded or copied over earlier but we
don't have a efficient enough way to go
ahead and avoid duplication of our
markup so let's first of all just build
up a page within this home dot PHP file
I'm also generating this document layout
you can go ahead and just copy this down
as it is you'll only need to write this
one because we're going to break it up
into a header and a footer and then
include that on every page so for the
title I'm going to change this to my CMS
and inside of the body we're not going
to put anything just yet because we're
going to break down this file so let's
create a new folder inside of our views
folder and let's call this template so
I'm going to cut the top part of this
like so and I'm going to create a new
file in templates and I'm going to call
this header dot PHP
I'm going to paste that in so let's
close that off for now I'm going to grab
the bottom part of this and inside of
templates I'm going to create footer.php
paste that in and then close that off so
now inside of home what do we do well
all we need to do here is require in
view route and you probably guessed
templates
hejdå dot php' and we can duplicate
this down and include the footer so now
whatever we write inside of here will be
wrapped around that header and footer so
let's just view the page source and
there we go so you can see we've got the
head the content and then the footer so
we still need to make it look pretty so
we're going to go ahead and adjust the
header to pull in our stylesheet so
let's go ahead and do this I'm going to
generate this automatically but it's a
link element with a rel attribute of
stylesheet the href is just the location
of the stylesheet now to make this
actually work across all the pages that
we're going to build we need to include
our base URL remember we defined our
base URL here so we need to do then is
in PHP tags we need to echo out base URL
and we can append on we don't really
need to append this here actually we can
just do a forward slash CSS app dot CSS
so that's doing then is it's outputting
the base URL and then we're doing four
slash CSS app dot CSS when we refresh
you don't see much change we've got a
font change in the background color
change when we view the page source you
can see that that's generated the full
URL to that style sheet so when nearly
there all we need to do now is utilize
this wrapper class that's within our CSS
file so down here I'm going to create a
div with a class of wrapper and I'm
going to create a header here saying my
CMS and it will be on every page but you
can modify this so we need to end this
div tag and that ends in the footer so
down here we can just add that in and
all that means now is that when we
refresh we see the following so when I
view the page source here we can see
that we got our header with the start of
our wrapper we have our header here home
which is our text we added to that view
and then the footer is normal so there
we are let's go ahead and
output these pages to this homepage so
inside of here then I'm going to go
ahead and first of all check whether
there are actually pages available so if
we don't have any pages on the home page
we want to show a message but how do we
know from here if we don't have any
pages well if there aren't any pages if
nothing's returned from this query the
array will be empty so what we can do
here is we can say if empty pages we can
come and open and close another PHP tag
and say else and then down here we can
end our if statement I'm using PHP s
kind of templating language if you like
here where I'm opening and closing a PHP
tag for each of these lines but feel
free to do this however you want
ordinarily you use a pre-built
templating engine but for now we're just
focusing on raw PHP so it does look a
little bit messier than you would
normally find so if the page is variable
is empty if there are no results in
there we want to say sorry no pages at
the moment now otherwise in here we want
to go ahead and loop through all of our
pages and I'm going to do this within an
unordered list so we open our PHP tag
here and we use a for each loop this
allows us to loop over an array so we're
going to say for each pages and for each
of them pages we're going to call that
page that allows us to access it and I'm
going to go ahead and end the for each
just in here so inside of this loop we
want to output a list item and inside of
that we want to output a link so an
anchor element so let's do the label
first which is the easiest part just
inside of here so we're going to open
and close another PHP tag and we're
going to output page and then
label so let's preview this and see what
we've got now there you can see we've
got 1st and 2nd page so we're nearly
there the next thing we want to do is
generate the link to the actual page to
see the page but we don't have a file
for this just yet so inside of our root
directory let's create a new file and
we'll call this page dot PHP and inside
of here let's just say page just so we
can click through to it at least see
something so inside of the href which is
where this link is going to go we're
going to echo out the base URL again
remember that's the HTTP forward slash
forward slash or colon forward slash
forward slash and then our URL and then
here we're going to say page dot PHP
page equals so all we're doing here then
is we're linking to page dot PHP that
we've just created but we're also
passing in a value in the query string
this is the query string here from here
onwards and all this means is we can
assign a value to a key inside of the
query string so for page we're going to
again echo page slug so all that will do
when we refresh when we click on first
page that's generated our base URL page
PHP and then the query string we have
page equals and then the slug that's
stored inside of our database for that
and all this means is that when we come
to show this page we can use this pickup
that value find the record that it's
associated with we can go ahead and
output that page to the user so for the
home page then that is pretty much it
we've built the basic templating we've
created a view we've gone ahead and
passed the values to that view by just
requiring in the view and now we're
outputting first and second page from
our database
so the next step is to actually build
the page that shows the page we clicked
on</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>