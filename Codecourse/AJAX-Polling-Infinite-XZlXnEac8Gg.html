<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>AJAX Polling: Infinite | Coder Coacher - Coaching Coders</title><meta content="AJAX Polling: Infinite - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>AJAX Polling: Infinite</b></h2><h5 class="post__date">2014-03-14</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/XZlXnEac8Gg" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">okay so in this video we're going to be
looking at Ajax polling and I'm going to
look at specifically polling a JSON file
and don't worry if you don't know what a
JSON file is we're going to apologize
some file and pull back a specific piece
of data and let the call to this file
refresh over and over again or poll or
hit or whatever you want to call it
again again again so we can update the
value on the page so this is prop you
know a popular way to basically just
refresh what you see on the screen we're
going to look at very very basic example
and perhaps not the best example because
this is infinite polling it will never
ever stop but if you need something like
this then it could well work for you
depending on your data source and a
variety of other things but let's take a
look at how this works so I'm just going
to go ahead and pull up my text editor I
have a JSON file here open already with
a users property and a value of 1200 and
you can see that reflected here so this
value here that you see is exactly the
same as what you see here now what's
actually happening is in my network tab
in chrome you can see that every two
seconds this is actually pulling this
users don't chase them far you can keep
up to speed with how many requests are
being made down here and you can see
that every couple of seconds that's
actually just increasing so what's
actually happening is it's pulling for
this file if we click on this we can see
that we get a value back here and that's
directly drawn from that JSON file and
we're using jQuery which is you know
exceptional handing a polling or Ajax
request sorry so if I go ahead and just
change this value maybe we got 1,300
users you can see that the next time
that that refreshes you saw the value up
there just change the 1300 so this file
here could come from anywhere really it
could be database generated so when the
when Ajax
when you Ajax to a file in your server
your server could then maybe pull the
count of all users and then you put it
in there this could be a cached file so
it might have a layer of caching on it
whatever we're basically going to look
at the front-end code that we need to
actually make this work
so let's go ahead and do that now so if
we head over to our index file we can
see that company is blank we've got
nothing here at all and subsequently in
our browser we've got absolutely nothing
refresh the page there's no content here
at all so we'll start out just by
creating a little paragraph that we saw
so we can sort of set this up so I'm
just going to say we have X amazing
users now what we're going to put in
place this X well we need some way to
target and actually place this value so
I'm going to go ahead and create a span
and what this allows allow me to do is
just have an inline element basically
with a certain value in here and I'm
going to give this a class of user count
so specifically target that down here
without JavaScript ok so I'm going to go
ahead and use Google hosted libraries to
bring in jQuery if you've not used
jQuery before there's not really too
much to explain here it's literally just
a JavaScript library so Google hosted
libraries provides this served as from a
content delivery network so we can just
go ahead and copy this in and paste this
into our page just at the bottom of our
body I'm going to go ahead and just
change this to http it's going to be
pretty slow for us since I'm on my local
machine and yeah essentially that's just
bringing in jQuery all this allows us to
do if you're not familiar with jQuery is
just basically use work in JavaScript
but work extremely quickly because this
provides us hooks different things that
we need to do so Ajax is extremely easy
with this so what do we want to do well
I'm going to do everything on this on
this page just to save sort of creating
a new file and stuff but we want to go
ahead and just open closed script tags
here we've already got jQuery loaded in
so we can go ahead and start writing
code down here underneath where it's
loaded I you know ideally and ordinarily
you'd have this in a separate file but
let's just go ahead and and look at what
we might do what the first thing we're
going to do is look at the interval that
we want to create so I'm going to do is
I'm going to go ahead and create a
function and this is going to be a sort
of wrapper for everything here and
inside of here I'm going to go ahead and
just
an interval so we have this set interval
function in JavaScript this is nothing
to do with jQuery and then within this
we have a function and we want to do
something in here every X amount of
milliseconds and in this case it's going
to be 2,000 milliseconds so I'm going to
go ahead and just console.log Paul and
what this is going to do is once this
function is run this means it will run
set interval we run everything within
this function every two seconds now what
this won't do is it what it will wait
two seconds before it pulse will need to
sort of take that into account later as
well so when I go ahead and refresh
we've got we have nothing amazing users
that's fine if we go ahead to our
console though you can see this number
in the blue circles increasing for a
refresh again we wait two seconds
Paul appears and then it will do exactly
the same thing that the number in the
circle just means that the same things
being outputs the console so what we
want to do now is we obviously don't
want to contour look but that's the idea
of how we pull something what we do want
to do is call a function within here to
actually this function is going to Ajax
to our content and that sort of
functionality is going to be contained
within a function called pole so this is
effectively the same as doing what we've
already seen if I console.log pole
function and then in here I call pole
then we can go ahead and see it does
pretty much exactly the same thing so we
just see pole function and then again
and again again every two seconds so now
that we've got that wrapped up we can
actually include our Ajax functionality
inside of here now what we want to do is
use the ajax method that's part of the
jquery library this is one of the
reasons i include jQuery because it
makes it extremely easy to do this we
want to pull to the user's JSON file
which we have here this basically just
sits in the directory I'm working in so
you got user straight on there and we
want to go ahead say that this data type
we expect back is JSON the type of the
request is going to be a get to request
and onsuccess we want to go ahead and
read the value here and then apply it to
this span so let's go ahead and do that
now so
we use dollar which represents jQuery
and we use the Ajax method so it's
jQuery AJAX you can go ahead and write
it like that if you want but it's
shorter to do this so in this we have an
object and this object contains all the
properties and the values that we want
to say to this Ajax function do so in
this case we want to hit users JSON so
this specifies the father we hit now as
they stand this will actually start to
Ajax that v if we go over to the network
tab you can see that every two seconds
now we get this users JSON appear here
so it is actually pulling this file and
you can see that if I click on it we get
the response back that we we would
expect we have a users property and the
value but that's not it we need to go
ahead and just do a few more things we
don't really need to do this but I'm
going to go ahead and declare a datatype
this just means that we say oh we're
expecting JSON back if you were doing
this with XML you would type XML you
might expect XML back the type of the
request is going to be get we don't
really need to supply that but you know
it makes sense to do so and we then have
a something called a callback function
and this callback function is when when
we successfully hit this five if there's
a problem a network error this won't be
run we reuse error for that we're not
going to include that here but I'll just
include it anyway so in success what do
we want to do well I'll go ahead and
just console.log something again just to
sort of prove that works and let's go
ahead and refresh now so in the network
tab you can see we're hitting users JSON
and in the console we subsequently get
this success request back there so if I
just pull the console up there you can
see both at the same time so we know
that now we're successfully hitting that
file but we actually want to do
something with the data now so in here
I'm going to go ahead and enter data
which is one of the arguments from this
success callback and then I'm going to
use jQuery selector again another reason
why I chose jQuery it's extremely easy
to do so I'm going to go ahead and
select the users count element which is
here and I'm going to go ahead and use
the text method to set some tech
now we already know that data now
represents the content of this and
because it's JSON it's extremely easy to
work with it's just dot notation so we
just say data dot users and that will
give us data which is this entire file
dot user so it will basically return
1300 so now that we've done that that
will now work but we have one more thing
to do after this so if i refresh we wait
two seconds that span there is populated
with this and that will keep updating
itself so that's how easy it is to
actually paul for data there's one thing
that we are sort of missing here and
that is the fact that when i refresh the
page this stays blank for two seconds
and that's just sort of naturally how
set interval works it will only execute
whatever is in this function here after
the initial sort of period here there's
a couple of ways we can do this but
because I've created this inside of a
function I can go ahead and just call
that function before set interval so
that would mean that I Paul thirsteee
as soon as the user lands on the page in
this script runs and then I go ahead and
set interval so now I'm going to go
ahead and refresh that automatically
shows 1300 and then subsequently goes
ahead and polls down here so what I can
now do is I'm going to go ahead and just
pull this down and we'll test this out
so if for example you know we come back
with 1500 users that then changes and
maybe 2500 users it changes again so
this will just keep updating as long as
the user is actually sat on the page so
that's how we do infinite polling with
jQuery and Ajax into a JSON file</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>