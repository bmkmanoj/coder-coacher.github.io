<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Pausing Video When Users Switch Tabs | Coder Coacher - Coaching Coders</title><meta content="Pausing Video When Users Switch Tabs - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Pausing Video When Users Switch Tabs</b></h2><h5 class="post__date">2015-04-13</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/P_NnQF5AOIM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">in this video we're going to look at
positing a video automatically when a
user switches tabs minimizes their
browser or opens a new tab now you might
not always want to do this it's not a
recommendation that you should pause a
video but it's good to use new
technologies to actually go ahead and
see how these things are done in case
there is some kind of good use case for
them so this is how it works I've got a
video here it's currently pause there's
no autoplay attribute on our html5 video
when i click play that video obviously
goes ahead and plays and I have another
tab open here when I go ahead and click
on this you'll notice the first thing
the title here has changed so it's got
paused afterwards obviously when we
return back the video has in fact paused
at the particular point that we paused
it and then we can just go ahead and
play it again so let's go and have a
look at how we can build this we're
going to write some very basic code just
to demonstrate the concept but by the
end of this video you'll be able to
implement this into your project so here
we are over in our text editor there
isn't much going on here at the moment
just a basic document laid out for us
we're going to be writing some styles
very basic style just to control the
video width and then we'll write the
JavaScript to the bottom of this page
obviously as with any JavaScript you
right probably best in a separate file
so let's go ahead and implement our
video first of all we'll take that as
the first step so we're going to have a
video here which is a HTML 5 video
elements let's open and close that we're
going to give this an ID of video we're
going to have controls on here and if
you do want this to be autoplay you can
just use the autoplay attribute but I'm
going to leave that out just for now now
inside of here we need to define our
video saw so I have one in this video
folder called caps mp4 go ahead and grab
an mp4 video I'm just going to be
looking at mp4 videos not other types
that work with different browsers so
don't expect this to to work in all
browsers so let's go ahead and define
the source for this and also the type
and let's just end that so the source
then is just where it's located so it's
video cats
mp4 and the type is going to be video /
mp4 and that should give us our video so
let's just refresh and you can see we
have a rather large video but it is now
loaded in and we can work with it so
again I'm going to be writing just the
styles up here at the top make sure
these in a separate stylesheet I'm just
doing this literally to save time so
let's create some style tags up here and
obviously this is temporary but we're
just going to target the video element
and we're going to give that a width of
fifty percent so now we have a reduced
video so we can work with that a little
bit better and now we're going to move
on to the JavaScript again this would be
placed in a separate file but we'll just
include this down here just to save a
little bit of time save us having to
create files so the first thing we want
to do is define where this video is so
I'm going to create a variable called
video and i'm going to say
document.getelementbyid remember we gave
that video an idea of video we're just
going to put that in there and we now
have control over our video by this
variable so what we're also going to do
is pull in the document title because we
want to change this eventually remember
we saw the pause text in the brackets
let's go ahead and define this as well
and again this is a very rough example
this would be much better without global
variables or anything like that so go
ahead and put this into your project how
it makes sense under some kind of global
namespace so let's take a look at the
html5 events for video so we have
unpause on on play which we're going to
be using and we also have pause and play
methods which are allow allow us to
actually play and pause the video and we
need to be able to control this so we're
going to say video on pause and we
assign a function to this which allows
us when the video is paused to take a
particular action so let's just go ahead
and console.log paused and we pretty
much to exactly the same here on play
fairly straightforward and inside of
here let's do a console log played now
these are going
to be used to update the titles only so
when we pause the video we're going to
update the title to have that pause text
and we're going to update the title to
nothing or just the original title on
play these don't relate to the actual
javascript is ability API they just
relate to changing the title just a
small feature we're implementing so the
main bit comes from the visibility
change of the browser so let's go ahead
and add an event listener and let's go
and listen for visibility change so we
can now do something within this closure
here when the visibility changes that
means the user minimizes have browser
switches to another tab opens another
type etc so that's just to a console log
here visibility changed and we could
even check the visibility state so let's
say two and then let's just depend on
document dot visibility state and that's
with a lowercase V and this will just be
the hidden or visible so let's just
check this out let's bring up our
console so we can check what's going on
here so over to the console and let's go
ahead and play the video we see we get
played and then when I paused it just
almost immediately we see paused let's
go over to this other tab and then
switch back and you can see visibility
changed a hidden which is when we
originally switch to the tab and
invisibility change to visible when we
came back again so we now know that
we've got everything we need to make
this work we just need to implement the
functionality mainly within this event
listener here to make this work so let's
go ahead and store that state so we can
detect well use that variable a little
bit easier so its visibility state and
what we're going to do is if the video
isn't already paused we don't want to do
this if the user has already paused the
video because we don't need to report it
and now we need to if statements 14 if
the state is hidden so remember we're
storing the state here so let's just
check if the state is hidden if the
state is
hidden we want to go ahead and pause the
video that basically means pause the
video when the user navigates away from
our current tab or current page and
that's pretty much it what we also want
to do is update the title which we'll
look at in just a moment so that's
pretty much it we we don't need to do
much else in here if the state's hidden
we want to pause the video I have you
two if statements here and nested them
but obviously you can go ahead and
implement this within this check as well
you might want to do something else in
here as well though so that would make
that a little bit cleaner so now let's
check this actually work so let's give
the page a refresh and Palais and then
let's come over to this tab and then
back again and we can see that the video
has been paused and we get them play and
pause that we added in before so now
that's working we can go ahead and just
update the title so obviously this isn't
entirely necessary but it does obviously
give the user some kind of indication
that the video has been paused that
they've switched over is just to let
them know basically so up here we're
going to create a function so this is
going to be update title for video
that's going to be a function and we're
going to take in the state here so what
we're going to do here is check if the
state is nothing we want the title to
return back to its original original
title basically so we just set that to
document title and then we return from
that function now otherwise and this is
the part where we actually update the
title to include that state and the
reason we're using state here is because
we can a part in anything we want into
the update title for video if you want
to say that it's paused or it's doing
something else you can set otherwise
we're going to say document title equals
document title which remember is the
original title and then in a string
we're going to create some brackets and
then in here we can just append in that
state so it gives you the flexibility to
pass in anything you want so now we can
go ahead and use this update title for
video so update title
video and let's pass in paused so now if
the video isn't already paused and the
user moves away from the page we can go
ahead and pause the video and update the
title to have paused at the end of it
let's go ahead and check this out let's
play this move away and you can see that
we get paused we might want to go ahead
and just add a space in there so if we
play that and move away we get paused
when we return back obviously when we
play the video this title remains
because we're not doing anything in the
on pause and on play event handlers to
actually remove this so let's go ahead
and say when the user pauses the video
we're going to go ahead and do the same
as if the user was to switch away from
another tab which just adds a little bit
of consistency there and then when they
play it we're going to update the title
for video remember we include this check
to see if state equals an empty string
and then we just return the document to
its original title so in here we'll just
have an empty string doesn't have to be
an empty string can be an owl or or
something else so let's refresh for a
final time let's play this let's go
ahead and pause this we can see that
that updates to paused we can play it
again and that removes we can switch
over to another tab and we see paused
when we come back we could obviously
have the video autoplay again if we want
to but in this case we're just leaving
it paused to let the user play when they
want to and then when we play again that
goes so that's how we update a video to
pause and resume if we switch tabs
pretty straightforward and using the
page visibility API this might add some
kind of value to your project if you
needed it</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>