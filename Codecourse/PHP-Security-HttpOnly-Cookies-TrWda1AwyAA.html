<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>PHP Security: HttpOnly Cookies | Coder Coacher - Coaching Coders</title><meta content="PHP Security: HttpOnly Cookies - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>PHP Security: HttpOnly Cookies</b></h2><h5 class="post__date">2015-10-10</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/TrWda1AwyAA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">in this video we're going to be looking
at an example of setting HTTP only
cookies with PHP now what this means is
that once we do set an HTTP only cookie
as long as the browser that we're using
supports this which most do now we
cannot then access or the client can
then access these cookies via JavaScript
and that's really important in also
protecting against XSS attacks so we'll
look at an example of setting a cookie
normally just with the basics of the
setcookie function in PHP and then we'll
go on to look at how we can do this
properly so if we open up this cookies
dot PHP file have this open in my
browser at the moment we're not doing
anything and we also have the PHP manual
to hand so you can see the arguments we
need to pass through to this setcookie
function so normally what we would do is
choose an expiry so I'm going to be
using the date/time object for this and
I'm gonna say well I want this to expire
in one week
then what we gonna do is use the
setcookie function and we're going to
set a key so for example I'll just call
this key and then we have a value I'm
just going to call this value for now
just as an example and then we need the
timestamp that it expires that so we do
is we say get timestamp from the week
variable there which is that date/time
object and this is what we'd normally do
so let's take a look at how this works
I'm going to hit enter and you can see
that it might developer tools in my
resources tab and under the cookies you
can see that we have the key and the
value for this cookie great so an XSS
attack we have a video on this in this
in this security series so you can go
ahead and watch that if you haven't
already but essentially what this means
is that any script that may accident you
accidentally execute as part of some
kind of an attack will have access to
document cookie which is this command
here and you can see that that results
in key equals value now this could be
information like hey remember me token
which persists a user session it could
really be anything but the point is we
don't want anyone to access this and we
want to limit the ability to access this
as much as possible so what we're going
to do then is we're going to get rid
this command and we're gonna start this
again I'm gonna go and get rid of the
cookie so I'm just gonna delete that and
let's go and refresh the page so we can
start again so this time around what
we're gonna be doing is the same thing
so we still have the key we still have
the value and we still have the expiry
so get timestamp but this time what
we're gonna do is I'm gonna set a couple
of additional options this is the path
then we have the domain which we're
gonna set to null we also have HTTP
secure as well so if we go to here we
can see security as false we're not
gonna worry about this too much this is
for transferring over HTTPS but we're
gonna ignore this for now and we're just
going to assume that whatever we are
storing in a cookie you shouldn't really
be read anyway and the last option we're
gonna set to true which is if we go to
the manual HTTP only let's go and hit
enter and you can see that the same
cookie value has been created but you
can see now that this HTTP column has a
tick by this cookie so now let's go and
try the document cookie javascript again
and you can see this time we get
absolutely nothing however what we can
do is we can still read this same value
on the server side because it's being
sent with the HTTP request so we can
still say echo cookie
key and we get the value that we've
stored in that cookie
so next time you're setting cookies use
the HTTP only option to make sure that
you are fully protected against XSS
attacks making sure that the cookies
can't be read</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>