<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Mini Image Upload Website: Sharing images (7/7) | Coder Coacher - Coaching Coders</title><meta content="Mini Image Upload Website: Sharing images (7/7) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Mini Image Upload Website: Sharing images (7/7)</b></h2><h5 class="post__date">2016-06-21</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/vyXClACM338" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so now then I want to be able to click
on one of these images and this to take
me through to an individual page that I
can share and this will be obviously
using the hash that we generated earlier
so let's start out with the root and
then we will hook this up in our view to
be able to click through and then we
will start to add everything that we
need so over in our views then let's
just create the view that we need so
we're going to just call this show twig
you can call it whatever you like but
this is going to be the individual image
so I'm just going to type anything in
here just so we can see that this works
so now we will create a new route so
just down here much like we did for the
index and the upload we want to say app
get and we can say image and then in
here we want to be able to pass in the
hash into the URI and then we have our
callback as usual and into this we pass
in our request as well so we can grab
this and we want to use app here as well
so it's within the scope of this closure
so now we need to do the following we
need to pull the image from the database
we need to check if it actually exists
first of all and then we can redirect if
it doesn't and then we want to render
the view passing in that image and then
just displaying it as we've done within
the home page so the first step then is
to grab this from the database so
remember we say app DB we create a
prepared statement because of course
we're using something that is going to
be defined by the user and into this we
pass our query so in this case it's
going to be select all compare doesn't
have to be all columns it can just be
the URL actually from the images table
and this is where the hash equals a hash
placeholder and then we can execute this
query passing in the hash from the
request and we get this from our request
object just here so we pass in the hash
property and
into this we want to say request get
hash and we are done so now we want to
obviously fetch this as an object
because remember we're working with that
image model just in case we want to add
any methods in there or anything else so
I'm going to overwrite this image and
I'm going to say image fetch and then
we're going to choose PDO fetch object
or rather sorry fetch class and then we
want to pass in our image class which is
a I models image and we grab the class
name like so so now if we just do a VAR
dump on this image just to check that
this is working we can hit this uri
directly using one of these hashes so
let's take the first one here and we
will duplicate this will go over to
image will paste this hash in and oh it
looks like nope fetch class specified so
let's just check this a so what we might
need to do in this case we might need to
say image set fetch mode and then pass
in this and then part in our class and
then this should then give us the right
result there we go so don't worry about
this this is just because we haven't
returned any response but what we now
have is that URL and we have that URL
that we can pass through to the upload
care library so we can render our view
out now knowing that we can pass the
correct image through to this so we just
returned app and we use twig to render
out that view that we created which is
showing and as we did with the homepage
we want to just pass in this image like
so and we are done so now if we just
head over here we see that image view
that we created but obviously we're not
doing anything with this just at the
moment so over on show then we can
update this to output the image and then
we'll go back and update our styles just
so this looks a little bit night
sir so we can actually grab the kind of
template from this we're going to get
rid of most of this we're going to get
rid of the script obviously because
we're not uploading on this page and we
can get rid of all this as well we just
want this kind of stuff here so I'm
going to create a new class and this is
going to be called thumbnail inside of
this will be an image again I'm going to
get rid of the old but make sure you do
include and out with a description of
what the image is and inside of this i
can use upload care again so we can say
image to upload care and we can grab the
file pass in the image URL use get URL
and of course you can pass through any
other options you want this if you want
to add filters anything the upload care
can do you can call a method on here or
if there isn't a method available
remember you can use opie to set
something specific like we did on the
homepage so here then we're just going
to have some male image now could have
done a better job at renaming these or
at least naming them but essentially
this is different from thumbnails image
and this is different from thumbnails so
let's head over to our styles in actual
fact we can preview this first of all
and you can see that's working let's go
over to our styles I'm going to kind of
keep what we had here but we're going to
add this to our thumb nail as well so we
can see that that was already improved
and then we can just add some very
specific styling for the thumbnail image
and all of that kind of stuff what we
want to do though is just down here we
want to set the thumbnail with to auto
and we want to set the thumbnail height
to also so if we have a look here that
will just go ahead and put this at full
width and full height depending on the
height of the image so we'll upload a
larger image in a minute just so you can
see how this looks so for the thumbnail
image then because this could be larger
than the container which will preview in
just a moment we want to set a max width
of a hundred percent so remember that is
this image here so we don't list exceed
one hundred percent
so now then we can click on any of these
images and what we actually can't we
need to update this so we'll update this
in just a moment but theoretically we
could click on any of these images and
now see a shareable link that we can
send off so let's just very quickly then
go and update our links on our homepage
which is just here now we haven't
actually given this route and name just
here so we can go ahead and do this now
we call the bind method and we're going
to say image show now to actually
generate the URL here remember that we
did this earlier over here we use the
URL helper with image upload this is
going to be slightly different now
because what we need to do is say
something like URL image show but of
course we need to pass the hash into
this if we don't do this it's going to
look a little bit odd or we actually get
an error for this so we need to pass in
a hash so we use an object for this and
we say hash image have so that's coming
from this loop remember and now we
should have a full path built up we can
click through and we can view each of
these images so I'm just going to upload
a slightly larger image just to see how
this looks of course I can crop this if
i want to but i'm not going to just to
see how it performs and now you can see
we have a image just here i can go and
click on this and you can see that this
is a filling the entire width of this
container well it's not because it's not
wider than the container but essentially
here we just have a very large image
perfect so with that done we can now
upload images we can crop them we can
display them on our homepage we have a
nice responsive flexbox contain the set
out and we can click on each individual
image and go ahead and share it so there
we go that's how easy it is with a very
simple framework using flexbox and using
upload care to process our image uploads</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>