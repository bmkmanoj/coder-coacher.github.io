<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Deploying Laravel Applications with Forge and Envoyer: Deploying your application (10/11) | Coder Coacher - Coaching Coders</title><meta content="Deploying Laravel Applications with Forge and Envoyer: Deploying your application (10/11) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Deploying Laravel Applications with Forge and Envoyer: Deploying your application (10/11)</b></h2><h5 class="post__date">2015-10-20</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/jnu0ufC8r64" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so we're now going to actually deploy
everything to our server just in one go
so hopefully you've already signed up
with on voyeur and you've connected up
to github or whichever version control
you're using we're now going to add a
project and set everything up and this
is surprisingly easy so let's click add
a project here we can go ahead and give
our project a name I'm going to call
this in stick add me and you can choose
the type of project now level 5 or lumen
you can choose laravel for or you can
choose other we're focusing on larval
here so I'm going to choose level five
and we need to pull in far from a
particular repository so if we head over
to github you can see that this is Alex
Garrett / inst Academy so what we can do
is we can go and paste this in here and
hit save project so once that's done now
is if we go over to this it set up our
project but we need to actually deploy
the files from that github repository to
our server we don't currently have a
server setup so if we head over to the
servers tab just down here you can see
here that no servers have been assigned
to this project now it's also worth
noting some of the details here so we've
got project details we know the
repository we know the deployment
branches master although we can choose
which branch we pull from we have a
health check URL as well which will look
at later and we have deployment
statistics as well as post deployment
health which again will look out later
and this is directly linked to this
health check URL so under the service
tab we need to add a new server so the
name of the server doesn't really matter
i'm just going to call it into the
academy in fact we'll call it inst
academy prod for production we need to
provide the IP address so if we head
over to forge we know the IP address for
this server so we can go ahead and just
paste that in there the port is 22 we
need to connect as Forge remember the
email that you got earlier contains the
username for the access which is Forge
if you well you can't really control
this but if it was different you would
and something different here and you can
obviously choose if it runs on PHP seven
if you chose that option when you
created your server over on for
we need to check receives code
deployments now we also need to give a
project path so let's just read the
information about this so when you
deploy on voir will create a release its
directory in this path a current symlink
will also be created that links to each
new release that's why I was talking
about earlier so what we need to do here
is we need to say home insta kadim
ecomme and then we need to say sorry
home Forge and then in staccato bring
calm so Forge like that the reason that
we do this is if we look in our terminal
we're currently within the insta Kadim e
public directory but if we go back one
you can see here that we've got this
forged directory which is in the home
directory so we can go in to forge and
then we obviously see that they're so
this is our project path it's really
going to be something different to this
but it's useful to be able to change it
let's hit save server so the next step
is on voyeur needs to be able to
actually place these files on your Forge
created server so we need to actually
add this SSH key like we did earlier for
our personal key over on our server so
we're going to copy the contents of this
we're going to head over to forge I'm
going to go under our server here and we
can go over to the ssh key section I'm
going to call this on voyeur like that
so just imagine that this is another
person accessing your server when in
actual fact it's an automated process is
part of on voyeur so we'll wait for that
to install and once that's done we can
go ahead and check out servers status so
that is finished what we can now do is
head back over to on voyeur close this
off we don't need anymore and you can
see this part here it's connection
status it's unknown at the moment but we
can refresh this and it will see if it
can connect to that Forge created server
and you can see that that was successful
so we basically now have a server setup
we have on voyeur which can basically
take code from our github project and it
also has access to our Forge created
server so now we can go ahead and deploy
so what we're going to do is head over
to our terminal and we're going to keep
an eye on this insta Kadim edirectory
and what I'm actually going to do is you
can see we've got our public directory
in here I'm actually going to go ahead
and remove this because we don't need
this so I'm going to remove public like
that so we have nothing in here at all
at the moment so now we can hit the
lovely deploy button and we can see how
this all works so we can choose the
default branch we can choose a different
branch if we had any other branches on
that repo or we can choose a tag we
don't have any available at the moment
so I'm going to do the default branch
hit deploy and now it's waiting for
workers it started deploying if we click
this button here we can see each step of
the deployment process now what's going
to happen here is if one of these fails
it's going to stop the deployment and
we're not going to see the changes on
our server this is what I was talking
about so if any one of these steps fire
the next one will not be run and that
means that we won't see them reflected
changes because the sim linked hasn't
been changed over so installing composer
dependencies the moment we'll just wait
for all this to finish the last two
steps are activating the new release and
then purging the old releases so that
just gets rid of everything else it
moves that symlink over to the new
deploy and then we're ready to go so at
the moment obviously within our server
we have nothing at all but once this
deployment process is finished we'll
actually see a problem so I'll have to
make a slight modification but we'll
wait for this to finish now so this is
now done so the composer dependencies
have been installed we've activated the
new release we've purged the old
releases we have now deployed our first
code so now if we head over to here and
hit enter we still see nothing now why
is this well the key is to have a look
inside of here and the directories that
envoy has created we remove that public
directory because it's useless now if we
look inside of the current directory you
can see the colors different sim linked
if we CD over to current you can see all
of our files in here so if we go back
over to forge and we come under our site
and then we gon go under meta
you can see the web directory here is
public now this isn't the case because
we deleted that public directory what we
now need to do is go into current and
then we need to go into public that's
where we start off our larval
application so all we need to do is add
current to the start of this we need to
update that now this can take a few
seconds so we'll just give it a minute
to finish and we can go ahead and
refresh this so it has now worked we are
now into our la Rafael application but
you can see here it's saying that
something looks like something has gone
wrong now we're not going to dive in and
look at the specific error because I
already know why this has failed we're
actually going to in the next video talk
about environmental variables within
employer</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>