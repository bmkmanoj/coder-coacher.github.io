<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>What's new in PHP 7.1: $this handling improvements (12/12) | Coder Coacher - Coaching Coders</title><meta content="What's new in PHP 7.1: $this handling improvements (12/12) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>What's new in PHP 7.1: $this handling improvements (12/12)</b></h2><h5 class="post__date">2016-11-27</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Sa9fZdfGoE0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">it's highly likely that you are never
going to come across the problem that
we're just about to look at but there's
been an improvement in the way that this
has been handled and by this I mean this
which refers as we may know to a current
object so what we're going to do is
build out a simple class and look at how
this can potentially be a problem and
then we're going to look at what's been
improved in 7.1 so this is really just a
little bit of fun really just gives you
an insight into how PHP is working
behind the scenes so I'm going to create
a really simple and I mean really simple
calculator class and we'll go ahead and
say a result in here 20 maybe what we
have in here is a method to add a number
on to the result so we just go ahead and
implement this passing in a number we're
going to do something in here in a
minute but what you also might have just
in here is some kind of get result
method which is simply just a getter for
that result property like so so all
looking normal to start with we would
new upper calculator instance here so
create a new instance of this and we
would say something like calculator add
two and then we will go ahead and echo
out calculator get results so pretty
simple stuff let's just head over here
and check this out obviously it's not
doing anything at the moment because
we've not implemented this method now
this is nothing to do with the
calculator but let's take a look at what
happens if we would define out the
result as this so by this I mean I'm
literally putting this inside of a
string now if you're not too familiar
with PHP what we can do is we can say
something like this to dollar signs
which is a variable variable so what
this will do is I've just bought up the
PHP manual sometimes it's convenient to
be able to have variable variable names
and you can read more about this here so
a variable name which can be set and use
dynamically and you can see an example
of this here as well so hopefully that
makes sense but if we were to say result
what we're actually saying is this as a
variable like so so this now would
become literally this like so so what
we're actually doing here is we're
assigning
but actually what we're doing is
resigning this equals something so for
example I'll go ahead and do this then
I'll show you what's actually happening
behind the scenes I'm going to say this
result + number so the result equals
this and then you would do something
down here maybe set it back to this now
what's actually happening is this line
here if I just bring it down is the
equivalent of saying this equals this
result so it's very unlikely highly
unlikely that you would ever run into
this problem but like I said it's just
kind of interesting to see what is
happening behind the scenes so if we
just do a VAR dump on this let's just
take a look at what we would normally
see from this well we would expect to
see the actual class if I get rid of
this here we know that we get back a
calculator object sorry so in this case
what we're doing is but overwriting this
with the result that we've just passed
in so if we would have then go ahead and
say this result equals result say some
kind of local variable then we end up
going literary this string here so this
is a little bit confusing and like I
said it's not always going to be the
case but it is interesting to see how
this works now in PHP 7.1 if we were to
do what we've just done in PHP 7 the way
that this has been handled has been
improved so now we come over to PHP 7.1
and we can see cannot reassign this so
basically all it is doing is protecting
against the accidental reassignment of
this by you know by its update so again
very useless it's highly unlikely that
you would ever do this you could do that
by mistake so you never know but then
again you'd have to have this defined
inside of a string either way just a
little improvement and something
interesting to see how this has been
handled and fixed up behind the scenes</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>