<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>PHP Tutorials: Register &amp; Login: User login (Part 2) | Coder Coacher - Coaching Coders</title><meta content="PHP Tutorials: Register &amp; Login: User login (Part 2) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>PHP Tutorials: Register &amp; Login: User login (Part 2)</b></h2><h5 class="post__date">2009-02-11</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/y7ae_cZahPs" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">welcome to the second part now I'm going
to show you how to edit your login dot
PHP page to connect to your well we've
already connected to the database but
we're going to check our username and
password against that in the database
now we've already connected to our
database and from refreshing this and
resending my username and password where
you can establish that there has been no
errors I this error here and we've seen
that if we don't type data we will get
an error now firstly what I'm going to
do is I'm going to say I'm going to
setup a query and if you've used MySQL
or sorry any structured query language
before you will know that you can query
a database you can I think Microsoft
Access has this and so what we're going
to do is we're going to say select in
fact we're going to select stubs we need
the ID the username and the password I
mean I don't think we need the ID but
our social select star anywhere it will
grab all the data so select star from
and we've called this let's have a look
users so select star from users and here
we're going to say 'where username which
is the name of what our if we have a
look here it's the name of this here and
we are going to say where username
equals and the username that has been
typed now if the username doesn't exist
we need to have some kind of error
message to say hold on a second that
user doesn't exist so what we need to do
is we need to use another and function
MySQL function and called MySQL num rows
so it counts the number of rows that
have been retrieved from the query you
have given the database so and we're
going to say 'numrows equals mysql num
rows and then in brackets we have the
name of our query for the mother of the
variable I've stored the query function
in and if we echo out the number of rows
I'll just prove to you
and test for myself that we should have
won because we at the moment have won
right if I were to add click insert and
add another row of data for example
another username and another password
I'll give that a go now I'm going to be
testing this later on and let's see user
name we're going to say Kyle and
password is going to be one two three
this time okay and so we can go and
there we are
Oh done a second where are my pass for
these are they go blah screen I can
really work with that okay so we've got
Alex Kyle we can see the ideas been
automatically incremented we can see I
both our passwords here and the 2
usernames so now if we refresh this
you'll be expecting to see oh okay right
the reason this is returned one and this
is the whole part of the check is that
if I was just selecting every user and
then counting the right let's go back
here and refreshing will get the value
of two because it's two rows but if I'm
saying select where the username equals
my username
we're obviously only selecting where my
username exists and that is in one row
because you usually on a website you
won't have a duplicate username okay so
now that we've got this what is the
purpose of finding out how many rows
there are now the purpose is that we can
say if num rows is equal to nothing then
that means we can or rather if my
numbers doesn't equal nothing then we
can execute the code we need to do and
the we need to log in otherwise sorry
else we need to echo out or rather die
again we need to die and that user
doesn't exist so basically what we're
doing is were checking that a row has
been returned where we've supplied this
username
and if it doesn't equal nothing we can
execute our code to login otherwise
we're going to die and say that username
visit doesn't exist because this will
equal one two three four and so on so
sorry it will equal and it will equal if
it doesn't equal nothing then it must
equal something but if it does equal
something it will echo this else so if
it's equal to nor that basically means
that no results have been returned so
I'm going to resend this actually let's
go back and let's get rid of our echo
non rose okay
so let's go back to our main page and
we'll login with Alex and ABC password
doesn't matter at the moment nothing's
happened because no errors have been
returned if I use for example Billy and
type a password in login that user
doesn't exist because no rows that have
the username equal to Billy have been
returned so we can see that that's
working I'll go back to my original
thing so Alex and my password is ABC
ok now the code to login what we need to
do to login is we need to perform a
password check so to grab the password
I'm going to use a function sorry not a
function I'm going to use a loop and
that is going to be the while loop and
what I'm going to say is I need a
variable name I'm going to say row and
that is equal to MySQL and sorry that is
equal to MySQL and fetches a row as an
array okay so I'm going to say MySQL
fetch
a sock for short and inside this is
going to be my query okay so I've got my
query there from this and we're fetching
each column data from here and putting
it into a an array called row okay so
obviously with the while loop we're
going to have our brackets and now we're
going to set some variables so I'm going
to say DB username which is the username
this I'm going to extract from the
database is equal to the row and this is
the row name so username so as we can
see here this is the row name if this is
an array of the data then each of these
this is going to be ID username and
password we're not using 0 1 2 well I'm
not sure that does work so for now we'll
keep it simple and we'll directly
reference the name of our column so the
database username is going to be row and
that since this is an array due to this
function on our query ok and oh and our
guess we're going to set a DVR swerd
equals row and then our password ok so
after this what we can do is say echo
out and in fact now we don't need to
echo out our contents of our DB username
password unless we're running into
errors and because we already know they
are we've seen into the database now
what we're going to do is we're going to
perform a check so check to see if they
match okay and to do this it's very
simple using this statement if our
username equals our DB username okay and
our password is equal to our DB password
ok we're going to say it's correct okay
and then otherwise we're going to say
it's incorrect
and in fact for this I'm only going to
need one line so incorrect password'
okay and in fact what n' yeah we'll just
leave it at that okay so here we're
going to say echo urine okay let's come
back here and we'll test this just
before I end this part of the video I'm
going to say first Alex and I'm going to
put a long password in incorrect
password and for now I'm going to put
ABC and you're in okay so we've checked
our username and exists we've checked
both fields exist so please enter
username and password if we enter a
username and a wrong password we get an
error message incorrect password if we
end to enter the correct password we get
you're in and if we enter a username
that is not found we retrieve an error
message saying oops sorry and a username
that's not found we say that the user
doesn't exist
okay so join me in the next part and
I'll show you how to create your
sessions and your log out page see there</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>