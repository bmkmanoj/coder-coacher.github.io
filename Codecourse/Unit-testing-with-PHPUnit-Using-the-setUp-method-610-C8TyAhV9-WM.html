<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Unit testing with PHPUnit: Using the setUp method (6/10) | Coder Coacher - Coaching Coders</title><meta content="Unit testing with PHPUnit: Using the setUp method (6/10) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Unit testing with PHPUnit: Using the setUp method (6/10)</b></h2><h5 class="post__date">2017-01-24</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/C8TyAhV9-WM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so one thing you'll often find when
you're writing tests like this
particularly if you are unit testing and
you are testing an individual model or
an individual class you know that you
have to new it up inside of every test
here now would it be nice if we could
new this up before every test so we
don't have to keep defining out here
well that's exactly what we're gonna
look at here now this is very very
simple and there's a lot more you can do
with this but in our case we confidently
know that in every test we need a fresh
user model it has to be fresh because
otherwise if we were kind of setting
things and then doing things again and
again it would kind of interfere with
each subsequent test so we know that
every test we write in here we need a
new user model because we're testing the
functionality over and over again with
separate things so all we do in this
case we create a setup method now this
is specific to PHP unit so this will be
called before every single test just
here so we can go ahead and just prove
this by doing a var dump and it's dumb
one doesn't really matter and let's go
ahead and run our test suite again so
you can see here that this is run every
single time before each of our tests so
we see this just dumped now what we want
to do then is maybe up the top here
create a protected user property and
then in here we can deal with the newing
up of this user so we could say this
user and then set that to a new user
model now that means we can get rid of
all of these and instead we can just say
this user set first-name this user get
first-name now I don't always like this
method I think it's absolutely fine to
go ahead and new up a model inside of
each test but let's say this was a
little bit more complicated and you were
testing specific say email functionality
on a user model well in this case you
might maybe want to pass through an
email this would be a little bit more
messy to go ahead and add in each of
your tests it really is just kind of
common sense now let's go ahead and just
switch this over for each of these
anyway just so it's done when
not gonna be doing this in anything else
that we're building but it does help if
you have lots going on up here that you
need to kind of set up so I think we can
just change it for these two I think you
kind of get the idea of this let's go
ahead and run our tests again and it
looks like we have some failure so let's
have a look crating default object from
empty value and of course there we go I
misspelled this and that should go ahead
and run and we have all of our tests
passing so if you want to even for
something simple like this you can go
ahead and do that but like I said it's
more for when you have more advanced
setup of a particular model or a
particular class that you're dealing
with either way that you know now that
setup is gonna run before each of your
tests so you can freshen everything up
here and then it just means you have
less code to write in each of your tests
but that just should give you a good
example of how you might want to do that</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>