<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Create a URL Shortener API in PHP: Better Short Codes (11/11) | Coder Coacher - Coaching Coders</title><meta content="Create a URL Shortener API in PHP: Better Short Codes (11/11) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Create a URL Shortener API in PHP: Better Short Codes (11/11)</b></h2><h5 class="post__date">2015-06-08</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/EHbXyQ8QHNw" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">when I would look at way that we can
make the URL code generated a little bit
longer because remember what we're doing
is when we generate a URL we're getting
something like five through if the ID is
five although we're converting from base
ten to base 36 this is fine if you want
it this way remember in previous parts
we looked at changing the auto increment
of the table which isn't ideal we don't
want to do that so we're going to look
at way that we can from the start when
we launched this and allow people to
start generating URLs to see longer
better-looking codes so I'm going to
clear out the database entirely here and
what we're actually going to do is at
the point where we update our link or a
new link that we create with our URL
rather than doing this base convert here
what we're actually going to do is we're
going to implement a method on our links
model to actually generate a short URL
code from this model directly and that's
going to pull it in the ID and actually
go ahead and generate that so the first
thing I'm going to do actually in here
is just tidy this up I'm going to change
these two properties to protect it they
don't need to be public so I'll go ahead
and do that first and the next thing I
want to do is create a new method in
here so this is going to be called
generate short code we could call it get
short code but that assumes we're
actually getting the code from the
database table so this is to actually
generate a short code so this is going
to be a useful method for when we create
the new link but haven't actually
generated the new code yet we can pull
that through and use it within here so
what I'm going to do is I'm going to
copy and paste this and I'm going to
return that base convert function and
here I'm just going to say this ID
because this will then refer to the
current object we're working with so
when we create this we can now say you
link generate short
code so we're using that method to pull
that back so let's make sure this works
first and then we'll look at the better
method of generating longer URLs so
let's create a new record in here and
you can see it's done exactly the same
thing and it's worked in exactly the
same way we have an ID of six and a code
of six now we want to make this a little
bit better so what we can actually do
then is just I'm going to wrap this in
parenthesis just so it's a little bit
easier to read and we're going to say
this ID plus and then we're going to say
something like 100,000 so all that will
do is whatever ID that we get it's going
to add a hundred thousand onto it so
when we create our first record which
has an idea of one that's going to be
one hundred thousand and one and then
100,000 2 and so on and so forth so it
will keep generating these they'll still
be unique because we'll be adding this
ID on but we're just modifying this
value slightly so we get a better URL
from this so let's go ahead and try this
out then I'm going to delete the record
in here on I already did that going to
hit this and we see 255 Z let's go ahead
and pass another URL in and you see we
get something else we can do the same
here like that of course what you could
do is make this even larger and then we
go ahead and generate another URL so
let's do this there we go so we get
something even larger there so we've now
got a slightly better code set from the
offset so we don't have to modify the
auto increment on our table which is
obviously bad practice so there we go I
wouldn't make this number two large I'd
probably keep it or something like a
hundred thousand just to be safe but
there we are there is a new method of
generating a shortcode so it's a lot
cleaner we just have to call that on
that model and then we have the
increment of our ID to give us better
codes from when we first launched this
and allow people to use</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>