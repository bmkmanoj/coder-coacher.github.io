<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Dates And Times in PHP: Real-life Example (13/13) | Coder Coacher - Coaching Coders</title><meta content="Dates And Times in PHP: Real-life Example (13/13) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Dates And Times in PHP: Real-life Example (13/13)</b></h2><h5 class="post__date">2015-04-20</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/5XafUJw0Ppo" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so we're going to wrap this series up by
looking at a very basic example of a
application you might want to implement
carbon into and this is going to include
looking at a model that we've created
inside of a fake application to go ahead
and grab a post from a database at the
moment you can see that the text here on
the screen says post was created and
then this just gives the date that's
stood in the database of course you can
format this in whatever way you like but
we're going to be using carbon to do
this so we can use all of the
functionality within carbon as we've
learned throughout the series so let's
go on and look at the base code that
we're going to be working with and then
we'll use carbon to make this a little
bit nicer so over to the code base then
and I've created a very basic
representation of what you might find
inside of a model most of the code that
I'm going to be using I wouldn't
recommend to actually use this is just
to demonstrate how you might be pulling
records back implementing them into a
model somehow now this could be with any
framework that you're using any very
light framework that doesn't already use
carbon to allow you to manipulate dates
and format dates with carbon so let's
take a look at what's happening here
then we are creating a new instance of
this post class here which all is doing
is it's extending model which is our
base model and we're defining which
table we're pulling records from in this
case I just have a database here called
project / table called posts and I have
one post in here and the title and
created they are just here so what we're
doing then on here is we're saying post
was created and then we're accessing the
created property here if we look at this
base model which is what we're going to
be modifying you can see here that we've
got a new database connection obviously
don't do this because this would be
within some kind of container you
wouldn't actually instantiate this every
time you created a model and if we head
down here we can see this get
first method which we're using on here
so get first all this is doing is
pulling back the first record and we're
using a protected method here yet first
record and all that's doing is it's
querying the database for everything
from the particular table that we're
using remember this table here refers to
this property just here and then we are
just limiting it by one so that's pretty
much it now what we're also doing is we
are fetching an object from this and
we're setting this to this data the
reason for that is then we can access
this data inside of here using the get
magic method which allows us to do
things like the following so for example
public function gets title and then we
can just return this title obviously
that's beyond the scope of this video
what we're interested in is when we go
ahead and pull in created so the created
property on this object which is the
creator day here we want to have this as
a carbon instance so we can do anything
we want with it in this case we're going
to be looking at using the diff for
humans method to output this to say
something like two hours ago or three
hours ago so we need to modify the base
model to allow us to do this obviously
depending on the framework or code
you're currently using this is going to
dramatically differ but this is really
just an example to show you how to work
with this in a real world scenario so
the first thing that we're going to do
then is you'll notice we have this
protected get collection method down
here I've created this as a kind of
example of you would of sort of
collecting data from your model and then
doing whatever you need with it before
you output it so what we're going to do
then is we're going to say this data
equals and we're going to wrap this in
this get collection so let's just pull
that balance it's a little bit more
readable and all this is doing then is
it's setting the data property on here
which remember we can access you
this Gator here this sir magic method
and get collection now allows us to
modify this in any way we want this of
course could be a separate class will
together you could create a new
collection object whatever you want to
do so what we're going to do then is in
our post model we're going to go ahead
and we're going to define the date in
here within our table so for example
created you might have updated you might
have last visited these basically just
relate to any columns that you have in
your database for now though we're going
to work with created so now inside of
our base model we have access to this
dates as long as that's set if it's not
set we can go ahead and pop it up here
as I'd public dates and we can just set
that to an empty array as the default so
under I'll get collection method then we
want to transform our dates and what
we're doing by transforming them is just
returning a carbon object with that date
inside of it so we're going to be used
in the carbon pars method to do this so
let's go ahead and loop through all of
the dates that are available and we'll
go ahead and say for each this dates as
date you can obviously check here if you
want if it is empty before you go ahead
and loop and what we're going to do is
we're going to say object which is the
object that we pass through here
remember we're passing this first record
here into it and we're going to say
object date so that's the property or
the columns that are stored within this
away and we're going to modify them and
we're going to say this new carbon pars
and then we're going to pass in the date
and that date is object date so
essentially all we're doing here is when
we find a record that we need through
whichever method that we're using on
that base model we're taking it we're
looking at the dates that we want to
transform
terms of carbon we're looping through
them and then we're updating that but
we're returning a new carbon instance
here you may notice we don't have a new
carbon method on this on this class so
we can go ahead and create that now
let's create a protected function called
new carbon so this is a method to return
a new instance of carbon so all we do is
we say return new carbon and you know to
the top here is already imported but you
would have to go ahead and do that if
you didn't already have it there so now
that we've done this then let's just
recap about what we're doing taking the
date so in this case it will be object
created so remember our object contains
that created property and we're saying
this new carbon so we're grabbing a new
carbon instance we using the pars method
which we've already looked at and we're
passing in the created date here and
then if you have any others this would
just do the same for each one in this
loop so now what's going to happen then
is when we refresh we won't see any
difference so it looks exactly the same
art what we can do now is we can go
ahead and let's just do a VAR dump on
this actually so let's do a VAR dump on
post and let's just comment this out for
now let's see the difference here so we
now see created rather than created
being that as part of the object that's
returned when we query using PDO instead
of it being this it's now a carbon
instance so what we can do now then is
with this created property we can say
things like format if we wanted to we
could choose a format in here or we can
use something like diff for humans or
any other methods that are available in
carbon that we've already looked at so
it's just overriding that property and
instead of it just being a normal string
that's coming back from our database
table it's now a carbon object and there
we go when we refresh you can see the
result of using that new method so
depending on the structure of your
application you can use carbon to
override eight properties
coming from an external source that
doesn't have to be a database it could
be an API from somewhere pull that back
and do something like the following
obviously this is just a very basic
example of how some kind of project
might be structural or some kind of
framework might be structured we can go
ahead and pull in the new instance of
carbon and we can choose the properties
that we want to override as we've
already seen and then we have that
collection of methods and all of the
other functionality that comes with
carbon</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>