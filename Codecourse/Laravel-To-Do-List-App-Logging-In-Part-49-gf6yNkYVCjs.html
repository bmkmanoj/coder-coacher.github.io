<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Laravel To Do List App: Logging In (Part 4/9) | Coder Coacher - Coaching Coders</title><meta content="Laravel To Do List App: Logging In (Part 4/9) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Laravel To Do List App: Logging In (Part 4/9)</b></h2><h5 class="post__date">2014-04-10</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/gf6yNkYVCjs" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so now we're going to add some sort of
login functionality so we're going to
create two new routes we're going to
save route to get login
post login I'm going to pass a race into
both of them the first one we're going
to Elias logging and it's going to use
off controller get login we don't need
to add in Elias for this one because
it's unnecessary but we do need to
specify the controller so users off
controller at post logging now notice
how in each of these routes the first
word of our method names are the same as
the HTTP method
this isn't mandatory you can name your
methods how you please but it is nice to
keep your code organized this way so now
we need to create this controller so
going to create this file here class off
controller extends controller and we're
going to add these two methods public
function get logging public function
post Hogan inside here we're just going
to simply return a few called logging
and we're going to create this view now
so log in upload the PHP so inside here
this is going to extend the layout stop
main we're going to have section content
and we're going to stop and we want to
create a form here so form open we're
using levels form helper and form close
basically this just converts to form
action method equals post blah blah blah
it also adds the CSRs token
automatically which I think it's very
nice inside this form we're going to
have two inputs three inputs actually
we're going to have text don't have a
password and we're going to have I
submit this is going to be named
username and it's going to have a
placeholder of username this one is
going to named password and that it's
going to have a placeholder of password
and submit we're just going to add a
value of sign in so if we go to our
browser
I go to slash login
I've already styled this form by the way
if I gots my style sheet I already added
all the CSS for this if you want to copy
it feel free if not then no problem so
now we need to handle this form at the
moment when they user click sign in we
just get a blank page we need to fix
that and by the way I just want to
remove this so we're going to pass in
enough right here the form open method
takes the first parameter as an array
and the array is going to contain custom
attributes so in this case we're going
to set autocomplete 'off so this is just
going to convert to form method equals
post autocomplete equals off that's all
it is so if we go back then we go fix so
as I was saying right now if we click
submit we just get a white page so we
want to process this form here the first
thing that we want to do is set up some
rules we have a user name field and we
have a password field both are going to
be required and I think that's the only
validation you know we need I think
that's all this necessary
we're also going to create a validator
instance so when a day to make we're
going to passing all the user input and
we've got passing the rolls now we're
going to say if validator fails we're
going to return the use of back to login
and we're also going to pass in some
errors so with errors and we passing the
validator object so if we go back to our
browser and we leave these fields
incomplete hit sign in we get returned
as expected but we're not getting any
errors here so we're going to go back to
our view outside of the form we're going
to say for each errors
helped as error and for each we're going
to say P classical era and we're going
to have the error so for each area which
is going to display a paragraph element
with a class of error containing the
error message so let's test this again
so we got an error here itself we this
would be aerosol so let's give this
another go sign in and we have our
errors so now we made sure that the user
entered some data now we need to check
if the user entered the correct data so
we're going to say off equals off
attempt we're going to have an array and
the boolean I'll explain what this is
later the array is going to be the data
that we want to match against the
database so we're going to match name to
a look at user name and password
same but for password now we don't
actually have to hash this larval detect
that we're looking for a password and it
will hash it out marketing so now what
is this on most websites you will see a
login form just like this but you'll
also see a checkbox in for remember me
if you select it then you won't have to
log in every time you if it's at the
website we're not actually going to
implement that here because we want to
keep tutorial as short as possible but
if you feel that you can then by all
means feel free so now we need to
actually check if this worked so we're
going to say if not off return redirect
room login with errors but instead of
passing a validator instance we're going
to pass our own array and this rate will
contain our error messages we're just
going to have one here invalid
credentials provided so if we go back we
enter some bogus data enter invalid for
that store provided what if the user
inputs correct credentials then we just
want to return redirect route home
that's it so if we refresh into our
correct details enter we get redirected
to home but now we have an issue if a
logged in user visits to the login page
he still sees it we want to prevent that
so we are going to go to our routes file
after this room we're going to add a
method before guest
now this is a this is called a root
filter if we go to our filters file here
and we look for guests here is no sorry
he raised so basically when we append
this to a root where I was inside this
filter will get executed so in this case
we're checking if the user is logged in
and if he is we're going to redirect to
the home page also need to add a filter
for this before CSRF and this is all we
need to do in laravel to protect against
CSRF as long as we use default helper if
you decide to type your forms manually
then you'll need to use the form token
to add the form token so let's just
check this worked let's go back to our
browser we're logged in at the moment so
if we visit this page again if we
refresh we should get redirected to the
home page there we go perfect</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>