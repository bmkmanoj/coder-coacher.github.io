<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Social Network with PHP: Friends table migration (16/37) | Coder Coacher - Coaching Coders</title><meta content="Social Network with PHP: Friends table migration (16/37) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Social Network with PHP: Friends table migration (16/37)</b></h2><h5 class="post__date">2015-08-27</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/nqPc5zrrciY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">to test the friend relationship between
two users we're going to be manually
inserting records into the database to
say that two users are friends with each
other and whether they've accepted on
our but the first step is creating the
migration for the friends table and if
we just open up our database client here
we obviously have an ID for each user
that's obvious so our friends table
needs to have a user ID and a friend ID
and then we're gonna have a boolean
which is whether that other friend has
accepted and will create the logic for
this within the user model later so
let's go ahead and generate a migration
so we're gonna do the same thing as we
did when we migrated or created the
migration migration for the users table
so we say PHP artisan make migration
this time we're creating the friends
table so once that's created head over
to our text editor over to database
migrations and over to the create
friend's table migration we do the same
thing really as we did for the users
table so at least use the schema builder
to create the friends table about call
back here remember we type in blueprint
and have our table variable there so we
don't really need increments on here as
an ID but we'll keep it in there anyway
and we are going to have a user ID and a
friend ID these are both going to be
integers
so user ID and friend ID now obviously
when we send a friend request we need to
have the other user accept it so we're
gonna have a boolean here which
translates to a tiny in in the database
and that is whether they've accepted or
not and we can go ahead and add our
table timestamps as usual so when we
reverse or a rollback or reset
migrations we want to do here is drop
that friends table like so
okay so now that we've done that then
let's go ahead and run our migration so
PHP artisan migrate so this error is
I've made a mistake care of schema table
we're actually creating that schema so
let's go ahead and run that again and
there we go so let's take a look at our
database table again the database table
here we've got user ID friend ID
accepted we've got everything we need
and in the next step we can move on to
actually looking at the relationship
between two people and then eventually
we can output a list of our friends on
our profile page and of course on our
friends page too</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>