<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Build a JavaScript breakout game with Phaser: Adding the ball (7/14) | Coder Coacher - Coaching Coders</title><meta content="Build a JavaScript breakout game with Phaser: Adding the ball (7/14) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Build a JavaScript breakout game with Phaser: Adding the ball (7/14)</b></h2><h5 class="post__date">2017-12-08</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Y9soJUy5-zE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">by now you already know how we're gonna
go ahead and get this ball on the first
thing is that we're gonna copy the ball
image over that's the first step and of
course we're gonna head over to boot j/s
and we're gonna go ahead and register
this down here so let's duplicate this
down go ahead and add this ball image in
go ahead and add that in like that and
we are done now we're gonna create a
prefab for this as well though we don't
really necessarily need to it make sense
to go ahead and keep everything nice and
tidy so I'm just gonna copy over the
structure of brick again and we're gonna
create the prefab just in here for the
ball paste this in and let's switch over
these two things here
okay so again we're gonna enable physics
body on this because of course it is
part of our physic system when it hits
something we're gonna remove it move the
ball because of course we need the ball
to move we're gonna go ahead and set
this Czech world bounce which is really
important to true all that's gonna do is
it's going to react to the edges of if
we just open our browser edges of our
screen of course we've done on the ball
to go missing so we want it to react so
next thing we want to do is say this
body collide world bounce like science
said that's true that's pretty much the
same thing as check well bound so we're
just saying that we want it to collide
with the edges and then we're gonna go
ahead and set the body of this and we're
gonna set bounce like so so this is
going to bounce off of things as that
ball is moving okay so we'll come back
to this later if it doesn't make too
much sense for now we have our ball we
now need to head over to our game and
work out how we're gonna place this ball
on our paddle so as you'd imagine I'm
gonna have another method in here set up
ball and we'll go ahead and create this
set up ball method just inside of here
and look at what we can do so first
thing is this dot ball so we can we're
gonna assign it to a property within
this game so we can reference it later
if we need to we're gonna create a new
ball passing in this game we're not
going to set the x and y position for
this just here but if we go ahead and
pull this in like so so ball
pull this in from that prefab we created
let's go ahead and add it to our world
so let's go ahead and say this game add
existing like we did before for our
paddle and pass in this ball so what
this is gonna do is add our ball in at
the moment this looks like it's a brick
so if we just go over to ball and switch
that over then of course we end up with
the ball so you can see that just in the
corner there okay so now what we want to
do is go ahead and add this ball to the
paddle so we're gonna say this put ball
on paddle now the reason I'm doing this
why would I be creating a separate
method to place the ball on the paddle
well the idea of this is that when we
lose so when the ball eventually drops
to the bottom of the screen we want to
place the ball back on the paddle so we
know that we need this to happen more
than one so automatically I'm thinking
well let's extract this out to a new
method so we can just reference it once
again now what I'm gonna do at the top
of our game just here under a
constructor perhaps so let's go ahead
and crowd out constructor out let's
first of all go ahead and call super
which we'll call the parent constructor
and I'm gonna go ahead and set this ball
on paddle to true that means that we
know when the ball is specifically on
the paddle so we can react to click
events and things like that and that
will make sense in a little bit so the
first thing that I'm gonna do when we
call this I'm gonna say this ball on
paddle and I'm gonna set that to true
just so we have somewhere in our game to
reference and we know that the ball is
on the paddle now the next thing that
we're going to do is say this ball we're
gonna say reset this paddle body X are
the x axis of the paddle and for the y
axis we're going to set this to the y
axis of the paddle subtract this paddle
body height so of course the x axis of
the paddle is going to be in the very
center of the world so what we're now
doing is placing this ball on another
object based on that object's x-axis
position and then we're saying the
paddle y
- the height of the paddle the reason
that we're doing that is otherwise it
would sit directly in the center of it
so as an example if I just set this to
this paddle why we'll see the problem
and then I'll bring that back in in a
minute so let's go over and you can see
that sure enough that ball is pretty
much placed where we want it but like I
said the reason that we're subtracting
the height of the paddle is just so it
goes ahead and sits on top now the one
thing that you'll notice is it just
floats floating in the middle it's not
doing anything so what we need to do is
we need to add an update method to our
game to keep this in place so let's just
go down to the bottom just here we're
gonna create our update method unless
it's already in here by default I don't
think it is no it's not so inside of
update this is gonna work in much the
same way that everything else did so
update here reacts to things in your
world in your game and goes ahead and
allows you to do things and this will
happen in here as well just to give you
an example of this if I just log test
out here you can see that this is just
constantly re-rendering and you see this
is very very quick so it's just
constantly locking out tests now what we
want to do inside of our update method
is say if the ball is on the paddle and
we know that we have that variable
available now so if this ball on paddle
then we just want the ball body on the x
axis to equal this paddle X - the ball
width / - and I'll explain why this
works in just a minute
so ball with / - now let's just go ahead
and check this out you can see now that
this is just following the paddle around
nicely and that's working now the reason
that this works is if the ball is on the
paddle we know that we set the ball on
the paddle we don't want to do anything
with the ball we don't want to release
the ball all we want to do is set the
body of the x axis of the ball matching
the paddles x axis because we want that
to stay of course in the center and then
we're going to subtract the balls width
/ - now the reason that we do that if I
just get rid of that notice that this is
slightly unaligned it's very difficult
to tell but it's slightly unaligned what
we want to do is send to that in the
very center so we take the ball's width
/ 2
now we'll give us the actual position
now one thing that you might have
noticed is when you refresh the game
before you've moved your mouse the
paddle is actually over on the very left
hand side and if I go ahead and slightly
move my mouse then it starts to match up
there's not really much we can do about
this in terms of actually immediately
matching this to the position of our
input but we can make a slight change so
it doesn't sit on the very left hand
side it's just a really quick fix here
if we go over to the paddle here what we
did is took the x-axis of the game input
and set it to the x-axis of the paddle
now if I just log out this game input X
just to show you what happens when we
immediately refresh notice that's zero
until we slightly move and then we jump
over now to go ahead and get around this
what we could do is we could say if and
say this game input X equals zero then
we just want to return and do nothing
all that's going to do is it's gonna
position the paddle where we wanted it
originally which is directly in the
center and now when we move it kind of
flips to match up with the position that
at least it's not hanging over on the
very left hand side so we now have our
ball on our paddle and we're gonna get
to the real fun stuff in the next part
where we're gonna release the ball so we
can start interacting with everything
else in our world</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>