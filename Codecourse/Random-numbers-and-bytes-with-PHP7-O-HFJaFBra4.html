<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Random numbers and bytes with PHP7 | Coder Coacher - Coaching Coders</title><meta content="Random numbers and bytes with PHP7 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Random numbers and bytes with PHP7</b></h2><h5 class="post__date">2016-03-15</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/O-HFJaFBra4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">it feels like we've covered random
generation of numbers and strings again
and again and that is true but the
reason for this is that we can't and
shouldn't rely on using functions like
Rand to perhaps generate a random number
or use something like say md5 to
generate a random string in one video
I've covered using the openssl random
pseudo bytes function and another video
showed a package called random lib now
either solution is fine but PHP 7 has
introduced two new functions to create
cryptographically secure random numbers
and bytes ok so before we start looking
at these two new functions why shouldn't
we use something like open SSL random
pseudo bytes well there's nothing
actually wrong with using this but for
example if you don't have the openssl
extension installed or enabled within
your PHP installation it simply will not
work this function will say this doesn't
exist so this might be fine if you know
your environment but when it comes to
transferring your project around to
different environments you might run
into trouble there's also the
possibility that this won't generate
cryptographically secure bytes which is
fine because we can check this so if you
look here we have this boolean that's
returned whether it has or hasn't
generated cryptographically secure data
or rather it indicates if a
cryptographically strong algorithm was
used so we could check this but again
it's just unnecessary effort now these
two new functions that have been
introduced are as follows we have random
int and we have random bytes now random
int will take a minimum and a maximum
value and simply generate an integer for
you and you can see a possible use case
here in the dark so for example suitable
for use where unbiased results are
critical such as when shuffling a deck
of
cards for a poker game so in this case
using r and won't be enough if we were
to say 1 252 this is not enough for that
use case and of course this might not be
for everyone but there are other uses
for this so let's just have a quick look
at this it's pretty straightforward but
if you do have PHP 7 installed you just
want to echo the result or store the
result of the random int function and
again we can pass in two numbers here
and this will cryptographically securely
or rather generate a number for you now
how does this work well if we just take
a look at the docs on windows this will
use crypt gen random on Linux the get
random siskel will be used if available
and on other platforms dev view random
will be used now the most important
thing and this goes for random bytes in
a minute which will take a look at if
none of them are available an exception
will be thrown so you can catch that
exception and then handle it gracefully
so the more useful and more interesting
function we want to take a look at is
random bytes now we often for whatever
reason need to generate a random string
perhaps to include in a password reset
URL we sent to a user just so we can
identify something or we use it for
things like salting so let's take a look
at how we use this and then we'll talk a
little bit about why we might not use
this so we obviously want to echo the
result of random bytes and the reason
it's random bytes is important because
this won't give you an actual string so
let's do 255 here and see what result we
get so you can see here these are random
bytes it's not a string at least it's
not something that we can actually read
so the option here is to use bin to hex
or binary to hex and that will actually
give us the string just out here you can
see its pretty long string randomly
generated so you can see here there's no
real speed impact because we're using
system functionality to generate this
and we now have
a cryptographically secure randomly
generated string so this is much like
you'd find using openssl random pseudo
bytes or using an external dependency
like random live and if you're not sure
what random lib is we have a series on
that so you can go ahead and check that
out and that's also perfectly acceptable
to use so we've now learned about two
new PHP seven functions that make it
incredibly easy to just generate this
data without even having to think about
it and this is pretty similar to the
password hashing API that was introduced
with in PHP this makes generating
passwords a lot easier and a lot more
secure so just a side note in terms of
using these two functions in terms of
security if you're looking to generate
passwords please make sure you do
actually use the PHP password hashing
API I know we said for random bytes we
can use this for salting however it's a
lot better to use the PHP password
hashing API rather than attempt to do
anything yourself now we have a series
on this if you've not heard of it before
so you can go ahead and check that out
so as always make sure you refer back to
the documentation when dealing with any
security related functions just to keep
up to date with any changes and warnings
have fun</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>