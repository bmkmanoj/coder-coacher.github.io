<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Elasticsearch &amp; Twitter River | Coder Coacher - Coaching Coders</title><meta content="Elasticsearch &amp; Twitter River - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Elasticsearch &amp; Twitter River</b></h2><h5 class="post__date">2014-08-10</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/6swzc_XA-j8" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">if you are playing around with
elasticsearch and you need some test
data it's sometimes difficult to insert
all of that day to yourself because
you're gonna you're gonna spend a lot of
time putting things into an elastic
search index and it's quite frankly a
waste of time so we have here a plugin
called Twitter River and this allows us
to index a constant stream of tweets
random tweets or tweets on the public
timeline and they are put into your
index and then you can just search on
them
now bear in mind with tweets you get
lots of data you get things like
geolocation you get the user's name you
get the user screen name you get the
actual tweet itself a variety of data
that you can actually play around with
so in this video we're gonna look at
installing this plug-in and getting it
set up so we can actually use it so the
first thing that we want to do is over
on apps Twitter comm you're going to
want to create a new application because
your Twitter River plug-in is going to
need credentials like an API key to be
able to actually do this so let's just
call this Twitter River and for the
description we'll just right Twitter
River for es the website doesn't matter
at all you can just choose absolutely
anything so I'm just going to choose Co
course comm and the callback URL you do
not need one let's go ahead and read the
developer rules and click create your
Twitter application and once that's done
we'll be able to head over to the API
key section and what you're going to
want to do is you're going to want to
create an access token because what we
need is the API key the API secret and
then we're going to need these access
tokens as well so if you just hit that
button that should generate and give the
page a refresh and there they are so
let's go ahead and in actually install
this plugin
it's very very very easy with
elasticsearch to do this now depending
on what version you're using I'm going
to install version 2 here but there are
other versions that you can install as
well so I'm just going to grab the URL
for this
the inside of my command my terminal I'm
currently in my astok search directory
where its installed so in the bin
directory or the binary directory we
have elasticsearch itself and we have
this plugin so what we can do is we can
use plug-in to actually install this
like so and that's very very quick it'll
just download that and there we go so we
don't need to restart elasticsearch we
can head straight over to postman making
sure that elasticsearch is actually
running what we need to do now is we
need to actually add some metadata to
that River so over on the github
repository this actually has all this
for us so I'm going to copy all this and
I'm gonna put this into just a text
editor here and we need to allow
consumer key which is the same set API
key the consumer secret which is the
same as our API secret so let's just
grab all of these now and just put them
into there and then we'll look at a
couple of other things that we can do
we've got our API secret there it just
goes into there and lastly our access
token so these are the ones we generated
just a moment ago and then our access
secret as well just there there we go so
we've got all that data in there now for
the index this gives you the ability to
choose the index name and the type now
the types pretty obvious here it's a
status and the index I usually go with
something like Twitter River rather than
my Twitter where it's just longer to
type if you need to but you can really
call this anything good to call this
Twitter if you wanted to so that's
pretty much it this is the this is
essentially if you've not used to
elastic search before which I assume you
have this is essentially the same as a
database and this is essentially the
same as a table now the bulk size in the
flush interval whichever of these is
reached first that's how that's how
these tweets will be put in so you could
change the flush interval to one second
or or it could be as long as say a
minute now what this would do is every
minute it would Akuma's enough tweets
have been accumulated they would be
inserted into your into your index and
your time the bulk size if this is
reached first that will then be put in
now I usually use these as defaults
because after a while this just
accumulates and it will give you enough
data to work with really so let's
actually put this into where it's
supposed to be so I'm using postman as
my rest client so I'm going to do a post
and under the data this is obviously
JSON I'm going to add this in but I'm
gonna add it to underscore River and
then I'm gonna choose the name of the
river and in this case it's Twitter
River this is where you'll be able to
access the data so you can see that this
is the same as the index I've given here
and then it's underscore meta so we can
do a post on that and down here you can
see that we've got a version two I've
already inserted it before that's why
it's version two but you'll likely see
version one if you have done this for
the first time and then what we can
actually do is we can just check that
that's in there by doing a get on that
and you see that we do actually have all
of that data in there that we have that
we've just inserted so now what we can
actually do is either in the browser or
in or in a rest client you can head over
to Twitter underscore River and then
just do a search on it with no query
when we hit send out we'll need to
restart elasticsearch so if I just do a
unload of that and then I'll do a load
of that again so once we've restarted
the service you can see just by sending
a request to Twitter River which is the
index name and then underscore search
from there query string you can see that
we've already got a lot of tweets coming
through so we've got just over a
thousand here and we can also do this in
the browser if you have some kind of
plug-in installed perhaps to render JSON
a little bit nicer you can see here that
we have all of our tweets that we can
just play around with so you can use
what you know about searching or what
you don't know about so
King to actually search through all of
this data that has been indexed and of
course there are a lot of different
options for the Twitter River plugin so
go ahead and read through the github
page to find out more but for now if
you're just playing around with search
this should be enough to play around
with</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>