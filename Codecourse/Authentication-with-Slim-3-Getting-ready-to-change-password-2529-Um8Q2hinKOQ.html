<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Authentication with Slim 3: Getting ready to change password (25/29) | Coder Coacher - Coaching Coders</title><meta content="Authentication with Slim 3: Getting ready to change password (25/29) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Authentication with Slim 3: Getting ready to change password (25/29)</b></h2><h5 class="post__date">2016-04-13</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Um8Q2hinKOQ" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">for updating the users password we need
to take a couple of additional steps
because obviously what we need to do is
have some kind of protection against
people that are already signed in so if
you're already signed into your account
and someone else then tries to change
your password it would be helpful if we
could check the user's current password
so you know when you go ahead and change
your password on any website they'll ask
you for your current password this just
makes sense and this means a little bit
more work for us it means that we have
to create another validation rule so
another custom validation rule which
will check this against the password for
that user in the database so what we
want to do is first of all just build
our controller we're going to create a
separate controller this for this just
to avoid cluttering our orth controller
we're going to create our view and then
we're going to set up our methods we're
gonna set up our routes we'll update our
navigation as well when the users signed
in then we can tackle all of them other
things so let's sign in just so we can
actually see this obviously we need to
be signed in of course there's no
protection against this at the moment
because we don't have any middleware set
up so anyone can technically access any
of these signed in pages either way
let's start to build this out so
alongside our Earth controller we're
going to create our password controller
of course you can stick it in the author
controller if you want it's entirely up
to you so I'm going to grab the auth
controller just to make this a little
bit quicker and I'm gonna get rid of all
of the methods in him so let's just save
this out and we will need our validation
so we can keep this namespace import in
there we need this namespace import and
we might need to access the user as well
well of course we look for updating the
password so here we just changed the
name of this and here we'll say get
change password and post change password
like so and of course we won our request
and our response in there the same for
this too so we need to render our view
so let's start to create our view out
so under off I'm going to create a
password folder and in here I'm just
going to create a change twig file so in
here we can actually again grab this
from say sign-in because it's pretty
similar we just have two fields instead
so let's start from the top let's set
this to change password we don't have
our root at the moment so we'll leave
this but we'll come back to it we don't
need email we do need password so we'll
leave this one in here as the new
password but we'll have to create a new
field in just a moment and of course we
will change our submit button as well so
change password so let's set up our root
that makes a lot more sense
again let's copy one of these and just
go and paste it down here so we'll say
change or we could say auth password
change or password change and here it
will be our password controller remember
we need to set this in our container as
well so get change password and here's
well post change password and we'll call
this off password change so let's just
add this to our container and if you are
thinking this is a little bit annoying
like I said earlier we do have a series
on setting up dependency injection so if
you do start to find you have a lot of
controllers here and this is getting
pretty cluttered you may want to check
out dependency injection I highly
recommend you go ahead and have a look
at that it's a bit beyond the scope of
what we're doing here though so we now
have our password control it in here we
have our root set up we have the correct
methods correct control name a new URI
and of course we've set a name here so
we can change this on our form now this
is now off
I swear change and I think that is
pretty good so let's just render that
view out let's return this view render
passing our response and it's off
passwords change quick so let's see what
this looks like
this is off password change there we go
okay so now obviously what we need to do
is we're going to update our navigation
and we're also going to add that extra
field in there so we can pretty much
copy this we want this one at the top
this is going to be our current password
so current password and for these will
call them password old so that's just
update these here and we'll say errors
password old errors password old and
errors password old so just making this
update makes sense so now we have the
following let's just quickly update our
navigation dot twig file so we able to
click on this so again it's path for
fourth dot password change so if we head
over to the home page we can now click
on this perfect so that is our password
controller our methods and our view
setup we've done this stuff before but
we're going to go ahead next and look at
how we implement our validation rules
but also implement that custom
validation rule as well that we need to
be able to check that this matches the
current users password and then we can
show it in line</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>