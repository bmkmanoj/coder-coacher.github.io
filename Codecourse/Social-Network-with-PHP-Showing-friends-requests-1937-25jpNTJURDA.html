<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Social Network with PHP: Showing friends requests (19/37) | Coder Coacher - Coaching Coders</title><meta content="Social Network with PHP: Showing friends requests (19/37) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Social Network with PHP: Showing friends requests (19/37)</b></h2><h5 class="post__date">2015-08-28</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/25jpNTJURDA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">we're now going to deal with showing a
user's friend request and we're actually
going to add some more manual data into
the database into the friends table
before we get started with actually
giving the users the ability to click an
Add button and add them so we'll get
this out the way and done with first of
all and we'll implement the method on
the user model to handle this it's
pretty straightforward so the first
thing that we need to do then is head
over to our user model so let's close
all of this off just focus on our user
model so that's within app models user
let's go down here and let's create a
method to grab the friend's requests and
this is very simple so we're going to
say friend requests as a method name and
what this is going to do is it's gonna
return this friends of mine so remember
that friends of mine method we added and
that doesn't necessarily mean they have
been accepted so we can implement a
where clause on the pivot table which is
our friends table and we can say we're
accepted is folks and we can grab them
records so this will then display any
records here with accepted false where
someone has added you so we need to also
update this friend's request section
here so let's go ahead and do that now
and then we can create some example
records so we're gonna head over to our
friend controller and here we're going
to create a new variable called requests
and this is going to be off user friend
requests
and we can pass this through here as
well so I'm just going to call this
requests we'll change that accordingly
like so okay so over to our template
then if we head down to friends index
we're gonna get rid of this HTML comment
and we're gonna check if the user has
any friends requests and then if so
we're going to loop through them it's a
similar deal to before say if no
requests count you want to do something
otherwise if you want to do something
else so in this case we can just say you
have no friend requests now otherwise we
want to loop through our friends
requests and we want to output the users
profile block you could modify this
later to add an add button here but
we're just gonna keep things nice and
simple and keep all of the buttons on
the user's profile page so we'll say for
each requests as user will end that for
each there and we'll go ahead and
include our template test user dot
partials dot user block so at the moment
as you expect we have no data for this
we have no friend requests but if we go
and add one in so for example if Dale
adds us so that we two to one so we say
user ID two added user ID one and except
it is zero then we see that from request
I mean actual fact that should be the
other way around so let's change that
from one to two and there we go so if we
were to go ahead and just sign in as
Dale so let's open up a new browser and
let's just sign in with that Dale
account just so we can check that we're
getting the right data through here so
I'm going to sign in I'm going to go
over to friends and you can see that we
don't have any friends requests here we
don't have any friends as soon as that
is accepted it will appear here that we
have Alex Garret as a friend and over in
our other browser here the friend
requests will disappear and it will
change over to our friends so that is
how we output a list of our friend's
requests if we do have a friend request
that hasn't been accepted the process
that we're going
through which obviously you can change
is we're gonna click through onto the
profile and we're gonna have a button up
here to accept our friend request and in
the next part we're gonna deal with
adding friends as well so we're going to
do the whole lot</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>