<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>PHP Data Objects (PDO): Fetching into a class (Part 4/8) | Coder Coacher - Coaching Coders</title><meta content="PHP Data Objects (PDO): Fetching into a class (Part 4/8) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>PHP Data Objects (PDO): Fetching into a class (Part 4/8)</b></h2><h5 class="post__date">2014-01-14</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/aj9x5b5PSGM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">what we're now going to look at is
something slightly more complicated and
that is fetching data into a class so
you can use it within a class and make
use of methods within that class in fact
the constructor property of a cup
constructor method of a class is
probably going to be you know useful
here so why would we want to do this
well what we're going to be doing in
this video is creating a class that
holds the properties that we expect to
be returned from this query then with
the constructor function we're going to
create a new property or assign the
value of a property called
entry and that's going to form a
sentence for us so for example Alex
posted and then the message that Alex
posted or Billy posted mr. Billy posted
and then within the while loop we can
actually echo that entry out now this
short example just sort of demonstrates
how you can sort of keep your logic of
structuring what you need to away from
your while loop because things could get
a little bit messy if you're outputting
things within your while loop you might
want to keep generic functionality you
might want a generic class to handle the
outputting of data from your database so
this will allow you to do that so let's
take a look at how this might work well
at the moment we've just got our query
here and nothing else
so usually what we would do we'll just
start to write the code out here is
while our equals and say query fetch
that will do a default fetch associative
array and then we go ahead and just
output content here now we won't do that
for now but what we'll we'll do is we'll
use the set
fetch mode method to define how we want
this to be fetched and then we need to
provide another property for this method
which is the class that we want this to
work with so in here we'll go ahead and
do that so set fetch mode now the reason
I've commented that is we won't do that
just now what we'll do now is go ahead
and we'll create our class and I'm going
to call this guestbook entry so I'll
call this guestbook
entry now this would all almost always
be located elsewhere and be included in
we're doing a lot on this page at the
moment so structuring your code like
this on one single page isn't a good
idea
this would most likely be in a connect
file and this would most likely be in
its own class file that you would you
know require in or however you're
requiring in classes but for now we'll
put it all on one page just to make a
little bit easier to read so what we
need to do here is we need to create
four public properties and in fact what
we'll do is for now we might want to go
ahead and yeah we'll do four so we'll
create four we won't include ID but
we'll include all of the other
properties that we would find in our
database so that is name message and
post it I'm going to create an
additional property down here and that
I'm going to call that entry so entry is
going to be something like Alex posted
and then the message here so that's
going to be a string and that's going to
be you know how that's going to be how
that looks
so let's go ahead and just we won't do
anything in this for now we'll go ahead
and we'll set the fetch mode and we'll
see how that syntax looks in this case
it will be query set fetch mode and then
in here what we want to do is set the
actual fetch mode because we haven't
defined that that's going to be fetch
class and because we fetch the class now
we want to define the class name that we
want these properties to be included in
and that's going to be guestbook entry
so the class that we've already created
so what's going to happen now is when
the query is executed we'll get the
field names back and for each loop of
this when we do a fetch the properties
here will be the same as the properties
that we have in our database so there'll
be an additional property added which
will be ID we haven't included that here
but that will be available so let's go
ahead and just do a print R on our to
see how that looks just so we can sort
of get an idea of what's going on here
ok so this is a little bit odd so let's
go ahead and just echo some pre tags
around this and we'll be able to see
what this has actually done and then it
might make a little bit more sense okay
so you can see now that we've got the
guestbook entry object for each of the
records so remember we have two records
in our database
the first guestbook entry object has
name message posted entry which is the
proper property that we created within
our object which is empty and we've got
ID like I mentioned earlier this has
automatically created an ID property we
could define it here if we wanted to so
we could say ID like that and that will
just jump to the top of the list so
we've got this entry property now what
do we want this to do well we want to
implement a constructor inside of our
class so we say public function and this
is a magic method called construct so
this will be run as the class is
instantiated so the class will be
instantiated each time these these fetch
are run so what we can say here is we
can say this entry equals and then we
make up the string that we want to put
this this value as so as I've said is
going to be named posted and then the
message so in here we can say message so
this is going to say Alex posted test
and Billy posted and whatever they are
another tests or something so now when
we go ahead and refresh you can see that
the entry is now sort of using the
values within the class and actually
constructing this sort of entry here so
why is this of any use well now down
here what we can do is instead of
printing R on the object which obviously
to a user we wouldn't want to do we can
now just echo our entry we don't need to
do anything else in here and what that's
going to do is if we append a break on
to it is it's going to take the entry
that we constructed within this class
based on the properties that we created
and it's going to go ahead and it's
going to output what we created within
the class
so if you look at this from the point of
view where you can just do anything you
want within a class it doesn't matter
there's there's endless amounts of
things you can do within a class this is
only a very basic example it will save
you having to do all of your logic or
anything here and it also allows further
brilliant reuse of code you could create
a generic object that did things from
your database data you used you know use
this generic functionality to stop
having to repeat code so this way
working this way with fetching the data
into a class and then outputting like
this sticks with you know a really good
pattern of development where you're not
going to have to reuse a lot of your
code so yeah that's how you fetch data
from your database into a class and then
how we output a simple enter entry that
we've just built up within our construct
magic method</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>