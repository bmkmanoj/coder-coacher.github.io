<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Learn PHP: Basic CMS - Adding Pages (Part 6/8) | Coder Coacher - Coaching Coders</title><meta content="Learn PHP: Basic CMS - Adding Pages (Part 6/8) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Learn PHP: Basic CMS - Adding Pages (Part 6/8)</b></h2><h5 class="post__date">2015-07-11</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/GqV9XJvmMaU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so now time to fill in this ad page
which we've already linked through from
our admin list of pages we're going to
click this we're going to be presented
with a form where we can fill in a fill
in everything and that will be submitted
to our database table as a new row so
let's get started then on the form first
of all so over inside of admin we're
going to create a new file called add
dot PHP inside of here we're going to
require in back a directory app start
like we did on the listing page and
let's output the view first of all
because we're going to build up the form
first just to see what kind of data we
need to work with and put into our
database so over in our views under
admin I'm going to create a new file
called add dot PHP and this is going to
be our template so again I'm going to
copy the header and the footer and in
here we'll go out form so let's add a
title to this called add page and then
here we're going to create a form so the
action is basically where this is going
to so if we output our base URL which
remember is our website URL forward
slash admin for slash a dot PHP so it's
basically submitting it back through to
this page so this page here and we can
do all the processing out here we also
then have a method as well this is going
to be post because we're going to be
sending this as post data rather than
data in the query string and then we can
fill in out form here but let's just
require this view in just now so we're
going to require view root forward slash
admin add PHP and we see this page here
so let's build up our form then we're
gonna have labels which are going to be
for a specific field and then we're
gonna
put our input within these labels this
doesn't matter too much if you're not
interested in the markup but there are
styles already for the forms or at least
very basic styles just to make this look
a little bit prettier inside of app dot
CSS if you're wondering how these are
rendered so we have an input field in
here with a type of text the name of
this one is going to be title and the
idea is going to be title just in this
label matches up of this input so this
is the first thing that we have and we
can add up here some text like so so we
can type anything we want to tie into
here I'm also going to turn turn
autocomplete off for this form just so
we don't get auto completion and just to
save a little bit of time I'm gonna copy
this paste it down here and I'm going to
change this to label so that's the label
that we're submitting through to our
database table
and again change this to label change
this to label and this is still the type
of text so we can copy and paste down
again this is going to be the slug so in
manually creating the slug although you
could also generate it and then finally
we're finishing off with the body which
is slightly different so I'm gonna get
rid of this input and I change this to
body now change our label text to body
and this time it's going to be a text
area now the name of this is going to be
body the idea is going to be body and we
can keep the columns and rows at 30
antennas was generated there and we see
the following so we've got our title
label slug and body and we need to
finish off with the submit button so we
have an input type of submit and the
value is whatever you want to show on
that button so we have the following
there we go so we can enter this data
when we click Add this is posted through
to the same page so what we can do is
obviously not in our view in our logic
up here
we can go ahead and check if that form
was submitted and then we can go ahead
and send that data through to our
database table now we're not gonna be
looking at validation here so it might
be something you want to look into and
include some kind of validation solution
here so you can output any errors along
the way really depending on what you're
putting into this your fields might be
completely different so we're gonna skip
validation and it doesn't really matter
too much as well since we know what
we're entering inside of this very small
application but as something like this
gets bigger you obviously want to take
validation into account so all we're
going to be checking up here is if not
empty the post superglobal we've already
seen the get super global when we looked
at passing in the page and the query
string but this is posted data because
we've chose chosen a method of post so
this is our post superglobal and this
contains our label title slug and body
as defined in our form so we're going to
create local variables here for these so
we're gonna assign the value of post or
the key label this label variable and we
can duplicate this down and just quickly
change these so we've got label title
slug and body and just to make these
look a little neater we can go ahead and
align them up so now what we want to do
is actually insert this page into the
database so we'll create a variable
called insert page and again this is
going to be a prepared statement the
reason being is that we are taking data
that has been submitted by a user even
though it's an admin and we're placing
that directly into our database so we
need to make sure that we sanitize
everything that goes through this so the
query is insert into the table name the
columns you want to insert into
label title slug body and created
although we haven't submitted a creator
update in the forum we can still
generate it in here so remember it's
submitted through label title body
slugging then we're gonna generate the
created date now we passed in the values
and these are all going to be
placeholders like we saw before when we
used a prepared statement this time we
have more of them so we've got label
title slug body and then for the created
date although at the moment it's
auto-generated because we can see within
the structure we have the default as the
current timestamp we can go ahead and
explicitly define the now function that
we saw earlier as well so that will
update that created day automatically so
remember the query hasn't been run yet
because we haven't executed it but we
can go ahead and say insert page execute
and remember in here we need to pass in
an array of our placeholders and the
values that are associated to them
placeholders so we say label label I'm
gonna duplicate this down just to make
it a little bit quicker title slug body
we can go ahead and line these up again
label title slug and body so just
quickly to recap we're checking if the
post data is not empty ie the form has
been submitted we're storing these in
local variables we're creating a
prepared statement to actually insert on
these placeholders here which remember
this does not run the query then we're
executing and now once we have stored
that we want to redirect the user back
to the listing and the admin listing
page so for this we can use the header
function to go ahead and send a header
to redirect the user so the location for
this is going to be base URL so we're
just appending this on
and then it's forward slash admin /list
or PHP so all that's doing is
redirecting the user so everything's
done now it should be working so let's
add a title so we'll say third page the
page and that lets that exclamation mark
we'll set our slug we'll set the body
and we'll hit add and there we go so
we've now got third page remember it
ordering by the created dates this is
now at the top and we have the slug here
that we can click on go through to the
third page we can see the third page on
our home page as well so the users can
now see that and we're now good to sort
of go we've got the ability to add in a
page we can click this again and add
another page if we want but what happens
if we want to edit this page well we're
gonna create a very similar structure to
this because all we're really doing is
getting the data from a particular page
and we're going going to resubmit that
and this time update the data rather
than reinsert it so the next thing we're
going to work on is the edit page</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>