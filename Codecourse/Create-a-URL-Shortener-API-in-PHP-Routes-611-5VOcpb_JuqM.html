<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Create a URL Shortener API in PHP: Routes (6/11) | Coder Coacher - Coaching Coders</title><meta content="Create a URL Shortener API in PHP: Routes (6/11) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Create a URL Shortener API in PHP: Routes (6/11)</b></h2><h5 class="post__date">2015-06-08</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/5VOcpb_JuqM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">now it's time to set up our routing with
our application we've already seen an
example of how we do create a route but
we're going to structure this so things
are nice and separated so we're not
putting everything within one file
essentially so what we're going to do is
inside of app we're going to create a
new folder called roots this is going to
store all of the roots for our
application in separate files so it can
manage them easily and inside of app
also going to create a new file which is
going to pull in all of them roots so we
can easily include them in to start so
I'm going to call that root stock PHP so
we have root stock PHP and a roots
folder let's inside of roots just create
our opening PHP tag and inside of start
let's require that file in just so you
don't forget later so inside of roots we
want a new file this is going to be our
first route we're going to call this
home PHP all this is going to be is the
route that we saw earliest the example
so it's app yet forward slash and then
i'll call back just there and what we're
going to put in here is just some text
we're not going to be looking at views
because this is mainly a kind of api
style application so in here i'm just
going to say pass in a short URL to get
a full URL or something like that you
can obviously do whatever you want here
now we're still getting a 4 at 4 because
instead of routes we're not including
that home route so let's do that now so
let's require in roots home PHP like so
so there we go so that's our homepage
you can kind of do what you want now we
need to root for actually redirecting if
a code is supplied so let's duplicate
this down and let's say we're going to
create a code PHP route just in here
let's create a new file called code PHP
so this is going to be similar it's
going to be
get requests to this art we're going to
create a placeholder here which is going
to serve as whatever is passed after the
forward slash and what we can then do is
pick this up in here so if I echo out
code for example and we I think we
already required in here yet so we're on
the home page here if i type in blah
there we echo out blah so we're going to
take this this is going to be the short
URL remember this whole part here will
eventually be your domain we're going to
take this look it up and do what we need
to do with them so that's our code route
what also going to do is because we need
to use our appt object we need to
basically use Slim's functionality we're
going to say use app just at the end
here so we'll leave this empty just for
now and we'll create our API folder here
which is going to stall of our API
endpoints and by endpoint I just mean a
URL that we hit to do something and
inside of this folder I'm going to
create generate PHP so generate dot PHP
is going to be slightly different
because it's going to be a post route
because we're posting a JSON payload
through which will make a lot more sense
bit later if that doesn't make too much
sense so I'm going to call that generate
quickly create a call back there again
we're going to use app because we need
to use that a little bit later and here
we have absolutely nothing so last but
not least let's just include this into
here set API generate PHP so we have
three routes here now so we can't
actually hit the generate page because
it's a post route as opposed to a get
route if we were to echo hello here we
don't see anything if this was a get
route because we're making a get request
through our browser you can see it so
post will allow us to post data through
to that route it doesn't really matter
this is the convention for restful api
so now that we have created our home
which is a kind of pointless route but
it just gives us something to see on the
home page we've created our code route
which is going to allow the user to pass
in that short code and then that will
redirect them off to the right place and
we've got generate which allow us from
an AP it from the API all this API go
ahead and send a request to this route
and that will create a new database
record we are ready to move on to the
next part where we're going to do this
part of it so we're going to do the
redirecting first rather than the
inserting first and this is pretty
straightforward so let's move on to the
next part where we'll get that finished</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>