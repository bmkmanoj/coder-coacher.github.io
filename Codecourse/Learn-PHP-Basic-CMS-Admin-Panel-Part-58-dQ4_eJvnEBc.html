<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Learn PHP: Basic CMS - Admin Panel (Part 5/8) | Coder Coacher - Coaching Coders</title><meta content="Learn PHP: Basic CMS - Admin Panel (Part 5/8) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Learn PHP: Basic CMS - Admin Panel (Part 5/8)</b></h2><h5 class="post__date">2015-07-11</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/dQ4_eJvnEBc" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so now that we're out putting the list
of pages that we have in our database
table to a user and we're allowing them
to click on a link and see the contents
of that page we want to work on the
admin part of this the first thing that
we're going to do is work on the listing
of all the pages that we currently have
and then we can create links to do
things like add a new page edit a
already existing page or delete a page
so let's go ahead and build this list
page remember earlier we created an HT
access an HT password so whenever we
access admin and then anything within
that we'll be prompted to enter a
username and password
now I've already authenticated so I can
just see the root of this admin
directory here so I'm going to go ahead
and create a new file in here and this
is going to kill the list PHP it could
be indexed or PHP it's entirely up to
you and all this file is going to do is
it's going to list out the pages that we
have so that's a similar query to what
we saw earlier where we're just
outputting all of the pages this time
it's going to be in a table and we're
gonna go ahead and add all the links
that we need so inside of list dot PHP
then we need to require in app start now
we're out of the directory now so what
we actually need to do is go back one
directory we need to go into app and
then include start PHP and then we can
start writing out our query to pull out
all of our pages so let's create a pages
variable as we did before for our home
page and we're going to do a raw query
just here we're not going to execute
anything because we're not passing any
user data in so we're gonna choose the
columns that we want to select in this
case it's gonna be ID label title and
slug and obviously that's coming from
our pages table as we've already seen
but this time we're going to order it by
the created field I'm gonna order that
descending so we do the same as before
by fetching all of our records I'm gonna
fetch them
as an associative array and when we do a
quick var dump on that just to check
that we've done everything right we
should see let me hit this dot php' the
list of them page is perfect so now we
want to create a view to basically
output all of our pages so inside of our
views folder I'm going to create a
folder called admin and then inside of
here I'm going to create a new file this
is going to be called a list PHP and I'm
just going to say list admin and then
here we can require view route much like
we've done for the other two pages we've
created forward slash admin /list PHP
and then we see that view so for this
view then we can just copy and paste
over the header of course you can
include a different header and footer if
you wanted to I'm going to paste over
the footer as well there we go so inside
of here then it's going to be very
similar to before where we check if
there are any pages so remember we're
checking if that pages variable is empty
we have our else here
and then we have our end if so if the
pages array is empty we can say no pages
at the moment otherwise we can go ahead
and list all of the pages so I'm going
to create this in a table we're gonna
have a head here the row and then we're
gonna have a label title slug and then
we're gonna have three links to links
rather edit and delete so we have our
label we have our title our slug and
then we're gonna create two empty table
headers like so so we've got label title
slug then our links will go here so
moving on to the body of our table what
we now want to do in here is loop
through each of the pages and then we
can output a new row for each of the
pages so we're gonna say for each pages
as page which we did when we're out
putting them on the home page and we'll
end the for each and inside of here then
we can crowd our table row we can create
our cells so the first cell then is the
label so we'll just write label in there
for now the next is the title the next
is the slug and then we have two links
in here so we'll just say edit
and delete so we'll leave them empty for
now but now we can see label title slug
editing dates these these represent our
two pages we already have in our
database but we need to obviously change
this so inside of PHP tags we can echo
page label remember we want to escape
that we can do the same for our title as
well so echo page title and again we're
going to escape this and Frost's like
actually we're going to create an anchor
for this because we want this to go
through to the actual page itself so us
as admins can preview this so inside of
the text of the anchor we can just
output the slug but for the href we can
go an echo base URL and then we could
say forward slash page dot PHP page
equals and then we can output the slug
here exactly the same as we did on the
home page so we can output page slug so
we can echo that out and remember let's
escape this output as well like so there
you go so let's refresh and we see all
of the information we would expect so
first page second page the title here a
slug edit and delete which don't do
anything but these will take us through
to them pages so we can preview them as
we're editing them so we are done with
the listing page the last thing that we
want to do is include an anchor down
here which is going to allow us to add a
new page so add new page we're gonna go
ahead and fill in the link to this and
I'm gonna build that in the next part
so let's echo out base URL forward slash
admin forward slash
dot php' and when we click on that we go
through to the ad dot PHP page mrs.
which is going to allow us to add a page
which will be building next</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>