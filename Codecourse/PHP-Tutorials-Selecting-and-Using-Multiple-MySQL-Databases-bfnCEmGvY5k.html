<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>PHP Tutorials: Selecting and Using Multiple MySQL Databases | Coder Coacher - Coaching Coders</title><meta content="PHP Tutorials: Selecting and Using Multiple MySQL Databases - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>PHP Tutorials: Selecting and Using Multiple MySQL Databases</b></h2><h5 class="post__date">2012-02-11</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/bfnCEmGvY5k" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hi this is Alex from PHP academy' and in
this video we're going to be looking at
connecting to multiple databases and
displaying data from tables within these
different databases now you can see in
my browser at the moment I've got two
unordered lists one of them is
displaying four names and one of them is
displaying four locations now in my tabs
up here I've got a names database open
with a names table inside and the four
names you've seen and in another tab
I've got another database open with
another obviously another table within
that four different cities so we need to
you know establish how we're going to
connect to two different databases at
the same time because we'd usually use
the MySQL Connect function just once
then we'd use the MySQL select DB
function to select a database and
obviously we can't keep you know going
through our page switching databases
because it's obviously extremely
inefficient to do so so why might we
want to connect to multiple databases
well for example if you have a main site
and then in addition to that you have a
guestbook or you have a forum and you
want to integrate data from the two
databases so for example if you had a
forum and on your main website you want
to display let's say the most popular
forum topics or the most recent forum
topics or the most recently registered
member for example on a PHP Beebe forum
you might want to integrate the data
then you need a way to first of all
connect to a database for your main
website and retrieve data from that and
have the operation as you would and
secondly you need to then connect to the
PHP Beebe database for it for example
and display data from that so I'm going
to show you the long way around doing
this and the example that I've seen
floating around the internet on a few
forums and a few tutorials which is
actually you know not
great way to do it but you know it's
good to learn it anyway and then I'm
going to show you a second example which
is extremely easier and a lot more
efficient as well okay so we're going to
head over to the text editor in just a
moment and we'll start writing out the
code for the first method of doing this
okay so we're over in our text editor
and we've got an index dot PHP file and
a connect PHP file so connect is where
we're going to be connecting to our
database and then index dot PHP is where
we're going to be displaying some of
this data so you can see that in my
browser tabs I've still got the names
database open with a names table
same with the cities as well and
obviously we've got nothing in the
browser window because we don't have any
code yet okay so usually when we go
ahead and connect to a MySQL database we
would use the MySQL connect function and
would give this three parameters so the
first parameter would be the server that
were connecting to in this case it's
localhost and then the username and then
the password and because I'm working on
a local server I don't have a password
here and we would usually set up some
kind of or Die MySQL error just in case
the connection fails for any reason then
what we would do is we would go ahead
and use MySQL select underscore DB and
we would choose a database so in the
case of what we have at the moment we
might choose names underscore DB so
names underscore DB and again we can say
or Die MySQL error
okay so what we want to do is from index
dot PHP what we want to include this
connect up PHP file or require it into
our script require since if we don't
have access to this file we want to
error and not execute any more code so
and this connect dot PHP file you can
see is in the core directory within this
root directory that's core ford slash
connect dot PHP now assuming that our
we've successfully connected to our
MySQL server and successfully selected
this database we shouldn't have any
errors appear on this page so when I go
ahead and refresh you can see that
there's no errors so how do we go about
connecting to both of our databases now
obviously inside of index dot PHP we
could now go query equals MySQL query
and inside we could go insert a sorry
select let's say where we connected to
of connected to the named database say
select name from names and then we could
use a while loop and this here doesn't
equal false just means while this
condition while this condition here
doesn't equal false
so while row equals mysql fetch
associative array from the query this is
probably syntax that you've seen before
but we're essentially just looping
through all the results from this query
so we're retrieving every name in the
order they appear in the database and
then we're going to say echo row
name finally we're just going to make a
few modifications to this I'm going to
create it inside the unordered list so
ul up here and then down here we end the
UL and we'll indent this for readability
and then what we'll do is we'll add the
lists each list item inside of here and
then refresh and you can see they've got
Alex Billy Dell and Ashley as that
appears in our names database
Alex Billy Dell and Ashley so if we want
to go ahead and underneath this as we
saw start the tutorial list out the
cities as well how do we go about doing
this because we've connected to and
selected database now one of the things
that would be extremely incorrect to do
would be to copy this line here and go
ahead and say paste that in there and
choose cities DB and then under here go
ahead and select data as well so for
example this is absolutely horrible way
of doing it
so select city from cities and then city
so we're doing essentially the same
thing what we've done is halfway through
our page we've switched the database
over now obviously it works but the
first thing we're doing wrong
technically is we are unnecessarily
using resource because we're you know
switching a database and secondly if you
had a lot of code and you kept switching
through tends to you know get quite hard
to keep track of what you're doing if
you were going to go ahead and you know
keep switching you might have a head or
a fitter you you know you're going to
have to change a lot of times in your
page so it's an extremely bad way of
doing things so we're going to go ahead
and get rid of that we're going to keep
these two these two queries here with
the results but we're going to make some
small changes now again the
the process that we're going to use now
is not you know ideal but it is one
solution and in a moment we're going to
look at a really really good way of
doing this so what we're going to do is
we are going to create variables for
each database connection and then base
our database selection on each one so
for example I'm going to say names
underscore DB equals and I'm making the
MySQL connect query the result of this
inside of this names DB what we're also
going to do then is say cities
underscore DB equals and we're going to
do pretty much the same thing in fact
now we're going to do exactly the same
thing I'm also going to pass an
additional true parameter here I'm not
sure if this is required it's written in
the php.net documentation if you go over
and have a look at that I'll give you a
full explanation of this I'll just end
in here for readability now what we're
going to do is instead of it's quite odd
really because it doesn't logically make
sense when you do this but what we're
going to do is we're going to pass an
additional parameter here and we're
going to say names underscore DB what's
going to do is we're going to duplicate
this line down and we're going to choose
the city's DB so these two lines here
remain exactly the same we've done
exactly the same thing for both however
all we're doing now is selecting a
different database database and we're
choosing this city's DB connection so
what it's now done is assigned this
database selection to each connection so
obviously this well this is going to
work now and we're going to take a look
at how we use how we use queries based
on these different connections however
you can see that we which sort of
duplicating code here which is in
programming an extremely bad practice to
duplicate any code so with you know
running this twice and then we're
selecting two databases so this is the
solution and it's a better solution than
switching halfway through code however
it's not ideal so let's go over to index
dot PHP
so named we want to utilize the names
database connection so we provide an
additional parameter to the MySQL query
and we say names underscore DV and then
we obviously do the same thing for here
but we choose city's DB okay so now what
we can do is when we refresh it's the
same okay so we've got exactly the same
result we've just connected to two
different databases and we've not
switched halfway through so if for
example you wanted to go ahead and you
know and display this out again later
down in your page you can do so without
having to you know switch back the
connection okay so this is all well and
good we've you know found a better way
to do this however there is an even
better way so I'm going to get rid of
this here in fact let's just start again
might as well and I'm going to get rid
of this I'm going to keep the MySQL
connect just that okay that's all I'm
going to keep I'm not using the MySQL
select DB function I'm also going to go
ahead and get rid of true there so I've
connected my MySQL server and that's it
I haven't selected a database at all yet
I'm going to select a database from my
query okay so let's go ahead and refresh
the page we've got a successful
connection we haven't seen any errors
now I want to go ahead and perform a
query so I'm going to structure my query
like this inside I'm going to say select
name from now normally we would say
names okay because that's the name of
our table however we don't have a
database selected so how does it know
where this table is it doesn't know it
can't work out MySQL can't work out that
this names table is within names dB so
what I want to do is here I want to
specify something dot names which is
names underscore DB okay so now if we
perform a while loop
and in here we say make Rho equal to
fetching an associative array of our
results and then we say echo out for the
sake of time I'm just going to echo out
row name and then I'm just going to do a
line break when we come in here and
refresh you can see that we've selected
from a specific table now if we go ahead
and we copy this and we come down and we
paste that down there but this time we
want to select city from cities DB dot
cities so select the field from the
database table that's a good way of
thinking about it
and then obviously we want to change
that data there when we go ahead and
refresh you can see that we've got the
four cities on just below the names so
obviously this is a really really good
way of doing things you could perhaps
store these values here in variables in
your in some kind of you know
initialization script or setting script
which would be extremely useful but
that's it for now we've looked at an
awful way of doing it a slightly better
way of doing it and probably the best
way of doing it in terms of selecting
multiple database tables or multiple
databases</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>