<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Laravel: Form Validation | Coder Coacher - Coaching Coders</title><meta content="Laravel: Form Validation - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Laravel: Form Validation</b></h2><h5 class="post__date">2014-07-05</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/mvCAEDBbliM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">in this video we're going to look at how
we can make form validation much more
simpler so here in my browser you can
see that I'm getting this message you
are not logged in so let's just go to
fold slash login I'll type in my dummy
data so John and my password is password
login and there we go we get you are
logged in so if I just go here and log
out quickly and go back to the login
form you'll see that we have this very
standard form here if we hit login
without filling out any fields we get
our errors out put it up here now back
in our controller you can see that this
is a huge method there's lots of things
going on here and we can actually
refactor all of this form validation
into one line of code and that's what
we're going to be looking at in this
video so the first thing that we want to
do is go to our Acme folder and we're
going to create a new directory called
form inside here we're going to create a
new file called form the PHP we're going
to add a namespace Acme form we're going
to say class form and this is also going
to be abstract and inside here we're
going to create a constructor and we're
going to take some data and that's going
to be an array and then we're just going
to store that in the class so protected
data okay so the next thing that we want
to do is create a validate method and as
we're writing this method here not much
of it's going to make sense to you but
don't worry once we create our first
form it will all just slot into place
and make sense it'll just click so the
first thing that we want to do inside of
here as we want to check to see if a
user or if the developer has specified
some rules so we want to say if not is
set this rules then we're going to throw
a new exception
and that's going to say no rules have
been specified so the next thing that we
want to do is we want to create a new
validator so going to say validator
equals validator make and we do need
this little backslash here because
validator is a facade in the global
namespace so validate to make the first
thing that we do is pass in our data so
in this case it's this so this data and
then we need to pass in the rules this
rules now what we want to do is we want
to check if this what if this validator
failed so going to say if validator
fails and what do we want to do here
well we could redirect the user back but
that wouldn't be very practical but
since we're in the forum class and
that's really something that the
controller should be doing so instead
we're going to create a new exception so
inside of here I'm going to call it form
exception and that's probably not the
best name but it will work we're going
to add our namespace we're going to have
class form exception and that's going to
extend the native PHP exception and
again we need this global namespace here
we're going to have a constructor and
inside of our constructor we're going to
take some errors and this is going to be
a message back and the message back is a
class provided by laravel so we're going
to type in list a message back and we're
going to take errors and we're going to
set this errors to errors and we're
going to set that up here and then we
just want to create a very quick getter
for that property
now this isn't going to work just yet we
need to provide a namespace so up here
we're going to say use illuminate
support message back and I think that's
the correct path let's just check really
quickly laravel framework illuminate
support
and there we go message back this right
there okay so let's get rid of all of
that close this up we're done with this
as well so inside here all we need to do
is throw new form exception and we need
to pass in the the validator errors and
we do that with the validator messages
method now if everything went well up to
here and the validator didn't fail we
just want to return true okay so now
what we need to do is we need to create
a new form inside here we're going to
call this login form we're going to have
first we need to specify the namespace
so Acme form let me go into psych class
login form extends form and inside here
we're going to create a property called
rules and this is going to be an array
containing our rules now if we go to the
controller you'll see that these are our
rules here so I'm just going to copy and
paste that and then we're done we can
just close that class there the next
thing that we need to do is inject that
login form into our controller so we're
going to do that up here through the
constructor we're going to take login
form and we're going to type int nut and
we also need to set the namespace up
here
so use a comma phone login form we're
going to set that to a property so this
login form equals log in form and and in
large applications you're probably going
to have a lot of things like this you
can have forms and repositories and it
won't just be for logging it'll be for
sign up and edit profile and all that
kind of stuff so you may want to turn
this into a service
we're not going to be covering that in
this video but do read up on that if
you're interested so back to this we're
going to set our property up there and
now what we can do is we can get rid of
all of this we can say try this login
form validate and then we can catch the
exception that was called form exception
and up here we need to set that the the
namespace self farm exception and all
we're gonna do here is return redirect
back with input with errors II get
errors and that's the method in our form
exception that we created here
okay so let's test this out back to our
browser I'm going to hit refresh okay so
I just spent a couple of minutes
debugging this code and I realized that
I made a huge mistake
so we need to get rid of this
constructor here and we're going to
instead pass the data into our validate
method so we want to take array data and
we're going to replace this down here
with data hit refresh and there we go we
get our phone so let's hit submit
without without inputting anything and
there we go we get our errors now I did
say that we were going to refactor this
into one line so let's do that let's go
to global dot PHP and down here you'll
see app error and this is how laravel
handles its errors it uses a kind of
observer pattern to detect when
exception is thrown and then it calls
log error and we can actually add our
own handlers down here so we're going to
say app error function and we're going
to pass in our class so it was Acme form
form exception so Acme form form
exception and the type hinting is vital
here
if we don't provide the full path to the
class then laravel won't know what type
of exception we're looking for so now
what we're going to do is we're going to
take this and we're going to paste it in
there so now what we can do is we can
get rid of this try-catch block like so
hit refresh and hopefully this will work
okay
I forgot to fix this let's try it one
more time and there we go everything
works perfectly so now whenever we want
to create a form we just create a new
class name it add the namespace Acme
form plus sign up form extends form and
then we pass in our data sorry our rules
and we'll just leave that blank and
inside our method all we have to do is
say this signup form validate and then
we pass in our input and of course this
would be injected via the constructor
and that will handle everything that
will if there's any errors that will
redirect the user back with its old form
data and any errors</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>