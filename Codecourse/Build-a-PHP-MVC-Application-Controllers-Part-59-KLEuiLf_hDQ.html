<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Build a PHP MVC Application: Controllers (Part 5/9) | Coder Coacher - Coaching Coders</title><meta content="Build a PHP MVC Application: Controllers (Part 5/9) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Build a PHP MVC Application: Controllers (Part 5/9)</b></h2><h5 class="post__date">2014-05-16</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/KLEuiLf_hDQ" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so we're now going to actually pull
controller and and call a method on that
controller if it exists bear in mind
that we also have these defaults so if
for example a method isn't provided and
the home controller is provided this
will automatically be called if this if
the controller that we passed through
here is say contact and a method isn't
passed this will automatically call the
index method on contact so we'll stick
with the home example now and then later
we'll build another method just to prove
this works now the first thing we want
to do is check if this control it exists
now we're doing this because if the
controller doesn't exist
then we want to well we don't base
achill 'i don't want to set this
controller here we just want to use the
default so let's do a quick if statement
here and this is going to basically use
the file exists function in PHP and
we're going to call app controllers and
this will be x dot PHP now X is going to
be the name of the controller so we can
basically get the name of the controller
that we've called with URL 0 so if you
are l0 does exist that's going to what
it's going to check if that actually
exists if that's the case we want to set
the controller to URL 0 so this will
replace this essentially and then what
we want to do is actually unset this so
we want to remove it from the array now
once that's happened we want to
immediately require in a controller that
we have so we can use require once app
controllers again X dot PHP and X this
time is going to come from this
controller so what this is now going to
do is require in that file now you'll
notice that if we do this home index
home does exist so that's been required
in otherwise that will still require
home if we were to choose blur for
example that doesn't exist therefore
this if statement won't set or this
won't this block won't run and it will
just require in-home controller
we can prove that by just echoing out
this controller just to see what's going
on here so here this is saying home even
though we've provided blah if we also
say do a print are on the URL despite
the fact that this 0 element he'll the
first element is blah with still
requiring in home because blood doesn't
exist as a file as soon as we for
example create a controller called blah
let's just do that now and return to our
thing then that will go ahead and
actually oh sorry
let's get rid of this PHP file that is
required in blob because the file exists
it's not useful because we haven't got
any you know anything in there but let's
delete this here okay cool so we've
printed on the URL we can see that works
we'll keep that actually so we know that
the controller has been set if the
actual controller exists what we now
want to do is replace this controller
with a new instance of this controller
this will create a new object let's do a
var dump on this controller see what
happens so let's get rid of that so now
we've got a home object here which is
the controller that we have again if we
type blur here it basically doesn't work
it still gives us object home so let's
say home index and / am so what we've
now got is home index and parameter all
at the method and the parameter and
we've got a home object being created so
now what we want to do is check if the
second parameter has been passed and
this is going to be the requested method
so let's create an if statement here and
this is going to check whether URL 1 is
set so if is set URL 1 then what we want
to do is check if a method X actually
exists so if this method exists on this
controller so we use the method exists
function in PHP and we say this
controller that's the
name of the object or class name that we
want to check and we want to check if
the method that's been passed during the
control it exists or not now I'm just
going to echo out okay here just to test
this out so if I call home what this is
now done is what we don't actually have
anything passed so this won't echo but
if we pass a perfectly valid method name
so index this says okay index does exist
if I pass in test that doesn't echo okay
because the method within our home
controller doesn't exist now what I can
do is create a test method and that now
says okay so it's basically checking
whether a method exists that's been
requested so now instead of echoing okay
out we want to set the method that we
created up here earlier method by
default its index remember we want to
say this method equals URL 1 then we
want to unset URL 1 now the reason we're
unsetting is because if down here we do
another print our on URL we're doing a
print up our up here and a print our
down here now when we call that you'll
see that we've got an original array
here with home and the 10 tests now here
we've got what's left are the parameters
that we then pass through to our
controller so if we were to say home
index / am this gives us parameter and
it gives us home index / am but if we
don't call a specific method this still
works because we have our default index
method so we've now got pram which is
the leftover pram array and these are
what we can use it within our controller
so the full lot will look like index
prom like this but what's important now
is we've got this array left over that
we can pass through to our controller so
instead of printing our let's get rid of
both of these now because we don't
really need to do much more checking of
these what we now need to do is set the
parameters so I'm going to say
params equals and need to do a little
bit of check here we need to check if
the URL actually has any content first
so I'm going to say URL if so we're
going to say array values URL otherwise
we're going to pass through an empty
object now the reason that we do this is
if there are no parameters this will
cause a problem if we try and set it
let's try and do this as we might
normally do so let's say array values
and basically array values we'll just
rebase the indexes so down here we saw
that this is two what this will do now
is rebase it so if we do a print are on
this Ram's you'll see that that will
start at zero so if we have no
parameters here we've got an empty array
perfect however what happens if we don't
pass anything in here out we've got an
array values expects one parameter to be
array error so that's why earlier we
said if the URL then doing a rebase of
the values otherwise just set this prams
to an empty object so like this now we
could of course just set params
well we already set prams to an empty
object just see we could do this
somewhere else but we'll leave it as it
is now so now we've got an empty array
which is fine but this is all useless
unless we're actually calling the
controller in the method that we've
worked so hard to check here so we use
the call user func array method app
function now basically this will take an
array containing the controller and the
method and then the second argument will
be the parameters that we want to pass
through so we create an array in here
and we say this controller this method
oops
we've done all the checking up here
already and then the second is going to
be this Gramps easy as that and that
will call that method so now we see home
index which is what we echoed out from
here earlier let's create a new
controller method call this test and
let's just echo out test' and there we
go now let's create a new controller
just to check that this will work so I'm
going to create a new controller I'm
going to call this contact and I'm going
to extend the base controller that we
have and I'm going to save this as in
here contact PHP so remember the name is
important here that's what that's what's
basically going to allow us to say
contact like this and the reason we're
getting this error is because we don't
have any methods inside of here but if
we create our index method and echo out
contact index what this is going to do
is call that we can likewise do that now
we could also say something like public
function that phone or something like
that so contact by phone bear in mind
again just to remind you wouldn't echo
stuff out from your controllers you do
that all in your views so we've gotta
now get our phone methods so all we do
is simply say contact phone and there we
go
simple as that we've done a little bit
of logic to come up with this sir you
know not powerful but quite flexible
functionality let's delete our contact
control we don't need that we know that
everything's working now let's delete
our test method here as well so let's
return to home index now we need to deal
with our parameter situation I want to
pass in I know just say a name at the
moment it's not doing anything but it is
actually passing the free look inside of
our app is actually passing the
parameters to this method so inside of
home we can actually say name equals say
empty and we can echo name here so now
what's going to happen is if we don't
pass a parameter it will just be nothing
but if we do pass a parameter it will
echo out these parameters and we can do
the same by saying Alex Billy and we can
say other name equals empty string oops
empty string so we can echo out now
in maybe just concatenate a space on and
say other name now what's going to
happen is we get both so this is how
easy it is now to pass in parameters and
have them available in your controller
and therefore have them available in our
view eventually and what we've done is
we've completed routing now we have
routed basically our controller method
our controller method and parameters
through to our controller or the URL
through to our controller we can now
start to make use of all this wonderful
functionality</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>