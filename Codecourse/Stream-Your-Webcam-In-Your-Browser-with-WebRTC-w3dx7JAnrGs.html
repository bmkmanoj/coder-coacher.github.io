<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Stream Your Webcam In Your Browser with WebRTC | Coder Coacher - Coaching Coders</title><meta content="Stream Your Webcam In Your Browser with WebRTC - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Stream Your Webcam In Your Browser with WebRTC</b></h2><h5 class="post__date">2014-09-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/w3dx7JAnrGs" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">in this series we're going to look at
taking a stream from your device's
camera and we're going to basically
stream it to a video element on the page
here inside of this gray box so at the
moment I'm on just localhost just
testing this does need to be done
through a web server as opposed to
actually doing it locally to make sure
you are actually running some kind of
local web server or even public web
server and so if i refresh here it asks
me if I want to use the cameras I'm
going to hit allow and you'll see that
all just load up there and there I am so
this is basically what we're going to be
doing and then from this later on what
you can do is like I said take elements
like canvas imprint this on two elements
like that and then and then do what you
want with it so let's take a look at
building the code it is extremely simple
probably 30 lines or or less and this
allow you to do exactly what you can see
me doing here and then from there on the
possibilities are endless so let's take
a look at the code so we're pretty much
starting from scratch here the only
thing I've done is is marked out my
document and I've linked in my main dot
CSS stylesheet and I have a JavaScript
file linked in here the bottom just
before the ending of the body tag that
should be pretty self-explanatory we
write our Styles in here these are going
to be very minimal and then the video
j/s file is how we access our camera and
grab that and stream it to that video
element so really the first thing to do
is start building the markup on this
page what exactly do we need to to get
this going
but we don't need a div for the class of
booth but I'm just going to do this just
so we contain it in a nice area and then
later on you might want to change this
around so in terms of the booth then
let's just start this up we're going to
give this a width of 400 pixels let's
give this a sort of gray background
nothing too interesting so CCC will do
and I'll give this a border of 10 pixels
solid and we'll do ddd and then we'll do
margin auto just so this is centered in
the middle so let's just put some text
in here or something just to test this
and there we go so that's looking okay
we can focus on the
javascript side of this now okay so to
be able to stream a video to an element
this needs to be a video element so
typically you would apply a source here
but we're not doing that because we
don't have a video that we want to apply
that's that's not what we're doing we're
taking this from our webcam so I'm going
to give this an ID just so we can target
it with JavaScript we're not going to be
using any JavaScript library so no
jQuery or anything like that and I'm
going to give this a width and the
height so I'm going to say 400 in width
and for the height let's do 300 so you
can play around with this you can even
set it using JavaScript if you want okay
I'm not going to put autoplay on there
so this video element is now pretty much
ready to go the rest is done with
JavaScript so let's focus on that
remember this is linked in here at the
bottom so make sure you've done that
okay so we're going to create a self
invoking function and this just keeps
all of the variables that we're going to
create in here away from the global
namespace you might obviously have an
application already and you might be
dealing with best practices there but
for now I'm just going to wrap it in
this and essentially all this means is
anything in here upon page running will
be automatically run so the first thing
to do then is target that video element
that we created so we're going to create
a variable here called video and that's
going to be document dot and then we
have the get element by ID method which
as you probably guess takes an element
on your page by its ID in this case
remember we called the element video we
gave it an idea video so that's fairly
easy okay so the next thing to do then
in actual fact let's do this part now
we're going to store the URL API in here
so I'm going to say vendor you are el
and all this is is it's the ability to
manipulate create your rels and it's
supported differently in two different
browsers in WebKit and normal
implementation so what we need to do is
we need to separate this by an or
operator and we're going to say first of
all window dot URL which is the standard
implementation then we have a WebKit
implementation
so we have window to WebKit URL and you
can check these out inside of your
console if you open up your developer
console you can do window dot URL that's
not there WebKit URL is there you can
see that's also completing for me and
you can see that code being executed
there not executed output there so now
that we've got this what we need to do
next is determine the namespaced
function for getting medial the method
for getting media and that's exactly the
same with the vendor URL this is
unnavigable basically assign something
to navigate or get media so going to
overwrite this with the browser specific
vendor the browser specific
implementation and this is called
getusermedia so all we're doing here is
we're saying navigator dot get user
media that's the standard implementation
or i'm going to bring this down another
line just to make it a little bit more
readable
we have navigator dot WebKit get user
media which you can imagine is the
WebKit prefixed version we also have
that the Mozilla prefixed version and
the Microsoft prefix version so
navigator dot Mars get user media and
then finally navigator dot MS get user
media so that's that covered in terms of
different browser support at the time of
recording I believe all of these are
actually required that may change in
which case you can refactor your code
but for now we're just really playing
around so you know doesn't matter too
much so now we want to capture video and
the way that we do this because at the
moment let's just go back to here at the
moment all that's happening is we have
this video element which is the width
and height that we specified but
obviously we're not streaming anything
to it so we're going to say navigator
dot get media we assigned one of these
to that up here remember okay so this is
a method
which takes a few objects the first one
is whether you want video or audio so
it's basically the properties that you
want this to hold so I'm going to create
an object there and just pull this down
for readability and we're going to say
video true and then we're going to say
audio folks we don't necessarily want
audio to be streamed through if we have
that ability so we're going to we're
going to ignore that one okay so for the
second object here oh sorry this is a
not an object this is a callback this is
basically what happens when it's
successful and we have access to the
stream in one of these arguments so for
example I could console dot log the
stream let's take a look at what happens
in our console here oops
WebKit getusermedia okay so it does
require whether we actually pass the
third element I was going to go onto
that in a moment this is basically the
callback when it is in fact an error so
this means an error occurred and you can
grab the error code with the code
property on this so it's error like the
argument we just passed through code
like so so let's go back and see what
this console logs out for us in in here
when we hit allow that's at the point
where it gives us this media stream here
so that's great we've got all this
information but what do we do with it
well we need to place it within the
video element otherwise we're not going
to see the stream and we need to use the
create object URL method on this vendor
URL API that we stored up here so all
I'm going to do is I'm going to say
video which is remember the video
element that we captured earlier up here
we're going to say video SRC that's
obviously source and then it's vendor
URL dot and then like I just said a
moment ago the create object URL method
and in that we passed the stream done so
now what we can do is we can say video
dot play because we need to force this
to be able to play yeah oh actually I
think it's on autoplay but we'll do this
anyway so we've got video play there we
now are grabbing the stream from the
webcam which is so simple it's
unbelievable we're applying the source
to the video element and then we are
playing that video
so let's go ahead and take a look at
this so it's asking me if you want to
use the camera I hit allow and there we
go we get the webcam stream back again
and in chrome it just so happens that it
has this little icon up here which is
quite useful to see if anyone is spying
on you so that is pretty much it we've
used very very minimal code like I said
only 22 lines long that's an include
line empty lines here just to capture
the video from your webcam and output it
to the screen and this is actually going
to work in other browsers as well
because we have in fact included the
vendor prefixed versions of getusermedia
so we've now used the webcam on our
device give it a go on other browsers
and yeah this is pretty cool and very
very easy so from here on you can do
things like put it onto the canvas which
we have a lesson for and you can also do
things like take snapshots take pictures
which we also have a lesson for as well
so there we go there's a lot you can do
with the camera</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>