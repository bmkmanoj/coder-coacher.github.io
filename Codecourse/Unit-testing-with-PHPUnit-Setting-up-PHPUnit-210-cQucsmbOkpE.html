<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Unit testing with PHPUnit: Setting up PHPUnit (2/10) | Coder Coacher - Coaching Coders</title><meta content="Unit testing with PHPUnit: Setting up PHPUnit (2/10) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Unit testing with PHPUnit: Setting up PHPUnit (2/10)</b></h2><h5 class="post__date">2017-01-24</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/cQucsmbOkpE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">okay so before we get started writing
any tests at all we obviously need to
install PHP unit in this part we're also
going to look at setting up autoloading
we're going to create our tests
directory and then really importantly
we're going to pull over a PHP unit
configuration file and we'll see how
this all comes together so I'm currently
working within a completely empty
directory so we are starting truly from
scratch here the first thing that I want
to do however you're running this go
ahead and require in PHP unit and this
is just PHP unit slash PHP unit and
we're just going to wait for this to
finish okay so now that that's done
let's just take a look running PHP unit
as it is at the moment so if we just
come over to vendor and bin this will
have our PHP unit executable file in
here which we can very easily run from
the command line now if you wanted to
you could set up an alias for this so
you just maybe have to run PHP unit in
this case I have but what you could also
do is manually say vendor in PHP unit
depends on which operating system you're
working with and it's entirely up to you
now the goal at the end of this part
though is to actually just be able to
run this with no additional options in
here so we don't want to have to run out
options every single time we want
everything set up so we can just run
this and it runs all of our application
tests now where are we going to even
place our tests well this is important
so we need to define this out when we
configure PHP unit and of course I'm
just going to create a simple tests
folder just within here so that is
pretty much where all of our tests are
going to go so what I'm going to do now
is just quickly setup Auto loading so
hopefully you're familiar with also
loading we're just going to auto load
everything from app just so we can start
writing out our code in here so we're
going to auto load here using PSR for
Auto loading as normal and we're going
to call our app just app and we're going
to load from the app directory and now
that we've done this we just come over
and we're going to run composer dump
auto load and then maybe pass the
optimized black so now that we have this
done we need to think about our
configuration as you can see when I run
PHP unit just here we have
configuration options but as I've
already mentioned we really don't to
have to prepare specify these every
single time now the basics of this is
that when we do run PHP unit we can
specify the directories or files that we
want to test but again we just want to
run everything from text you can
individually run tests later if you want
to but generally when you have a project
you want to run all of your tests
because that's the point you want to see
if anything that you've changed has had
a knock-on effect of any of your other
code so what I'm going to do is inside
of the root directory here I'm going to
create a PHP unit - XML file so we
define this out so it's just PHP s PHP
unit configuration file that it will
always read from now I'm going to pull
this over because I'm not going to write
out all of the XML it's a little bit of
a waste of time but I'm going to talk
you through what this means so obviously
we just have a standard XML declaration
and these are just some of the options
that we can pass through and you can
pass through as many here as you want to
but generally for very simple testing
and just to get started this is pretty
much all we really need and of course
what I always like to do is take a look
at popular projects maybe you know
github and see which kind of PHP unit
configuration they're using and of
course later on down the line you could
get stuck with anything and you need a
particular option you can just go ahead
and define it in either here or when you
run PHP you know on the command line so
the first one I have here is a really
important one this is our bootstrap file
so this at the moment I've set to vendor
auto load which is just our composer
auto loader but maybe you have some kind
of app bootstrap file so maybe this is
crucial to running before you run your
tests maybe it does something special
that you need to happen either way you
can go ahead and define the file there
that boots everything up before your
tests run now the second one here is
colors pretty self-explanatory this will
just add color to the command line and I
always have this set to true because
it's a lot easier to see green and red
just to see if your tests have passed or
failed now the both will just give you a
little bit more output normal so I
always keep this on just in case and
stop on failure will literally just stop
if a particular test fails so your tests
will be run sequentially if one fails
then if you have this set to true it
will just stop the execution of your
test suite now that brings us on to the
actual test suite declaration at the
moment I have one I've called it test
suite it doesn't really matter what you
call it but generally this is fine and
here I'll define that a directory that
we're running our tests from now you can
also define out specific files if you
want here but like I said generally when
you're running your tests you want to
run all of your application tests so
this is really all I ever really need so
now that we've done this the difference
now is that when we do go ahead and run
PHP unit this will actually take into
account our configuration it knows where
we want to run our tests from it knows
all of our options we have our test
suite setup and at the moment we see our
verbose output just here if we were to
turn this to false you can see that we
get slightly less information again this
one really doesn't matter too much and
of course if I change colors to false we
instead of this mustard color just see
nothing so I always like to have this on
and that for installing PHP unit and
setting up our configuration is pretty
much it later on down the line like I
said if you have any specific needs then
you can go ahead and either add them
here or you can define these out in the
command line but with that done we don't
have any tests but we're all set up
ready to run our first test which we're
going to look at in the next part</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>