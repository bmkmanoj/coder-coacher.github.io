<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>PHP Tutorials: Register &amp; Login (Part 8): Disable/Ban User Accounts | Coder Coacher - Coaching Coders</title><meta content="PHP Tutorials: Register &amp; Login (Part 8): Disable/Ban User Accounts - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Codecourse/">Codecourse</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>PHP Tutorials: Register &amp; Login (Part 8): Disable/Ban User Accounts</b></h2><h5 class="post__date">2012-05-11</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/OY5OxqMI3WA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">okay so we've done a lot of work so far
to log the user in check for any errors
and then grab all the user data but
we're going to focus on something really
short and sharp in this part just to you
know give you a break if you're
following this all the way through now
just one thing to mention because we've
created all these different functions
inside of our like users dot PHP file
for example this gives us the ability to
be really flexible and use code over and
over again which is obviously the point
of creating a function so like we can
use logged in again and again in this
part we're going to check if a user is
currently active if a user's account is
active while they're browsing the site
and if they if their account for any
reason is deactivated ie I change active
from one to zero for any particular user
we're going to log that user out we're
going to force that user to be logged
out so what I'm going to be what I'm
going to do is within if logged in
equals true within this block I'm going
to create another conditional statement
now I want to check here if the user is
equal so if the user is users account is
active or not now we've already created
a function for this called user active
and we use this within the login
remember if the users account has not
been activated we can't lock them in we
haven't actually created the ability to
log to you know activate the account yet
but we'll be doing that later on so we
can use this function again so while the
users browsing the website if they if we
activate their account then deactivate
their account then it will force them to
logout simple as that is something
that's not often considered so I'm going
to say if user active
is equal to false and what we pass in
here while we pass in user data username
and remember that we're grabbing the
username from here so let's go back and
take a look at our user active function
we're sanitizing the username we are
selecting the count the total rows from
users where the username is equal to use
them and activate equal to one otherwise
you know if it's equal to one we return
true otherwise false so you know so in
here what do we do well we're going to
use session destroy' as we used in the
logout dot PHP script we could in fact
just redirect them to the to the logout
script but if a user for example has
modified a brazed browser to disable
headers will not allow any header
redirects then we don't get the effect
that we want we don't actually look them
out because if we're just redirecting
like this location logout dot PHP then
this might not work for a user so I'm
here going to session destroy' and then
I'm going to redirect them to the index
page and then I'm going to exit the
script just here so let's go ahead and
test this I can be happily browsing the
site you know nothing's happening I can
be clicking on these links that we
haven't created just for you blah blah
blah blah blah and then I go into my
database as an administrator I edit this
row I deactivate Alex's account and
click go and then I refresh and I'm
logged out simple as that so that's a
really great great way to have a lot
more control over your users and if you
do want to deactivate the account or
while they're browsing the site you can
do so and that's just a demonstration of
how we've reused a function that we used
for an entirely different thing we use
it for the login process and now we've
just used it to check if your users
account is active while they're browsing
the site so relatively straightforward
and a bit of a break from all of the
long stuff we've been doing but there we
go we have successfully created this
functionality to log user out if we do
to rate their account</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>