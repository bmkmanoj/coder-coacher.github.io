<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Server Sessions and Application Design | Coder Coacher - Coaching Coders</title><meta content="Server Sessions and Application Design - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Stefan-Mischook/">Stefan Mischook</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Server Sessions and Application Design</b></h2><h5 class="post__date">2018-03-11</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/PJPBABh3vjs" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys welcome to the vlog it's Sunday
afternoon so yeah what I'm gonna cover
gonna cover a bunch of topics today this
is more of a rambling type of situation
Tech an entrepreneur related of course
I've been vlogging much less as weak as
I was very sick so I was just doing the
bare minimum and just resting as much as
I can that's the thing about being a
tech entrepreneur if you're the head of
the company freedom is the last thing
you have in terms of time now when you
become more established and the business
is running smooth and you're not doing
anything new yes you could coast a
little bit they do call stating is you
tend to coast on a slow slope down so in
the high tech space a lot of money can
be made very quickly on all levels of
business but you can also drop off
slowly if you're not continuously
continuously innovating so what the high
profitability of a tech company you see
with the big boys like the Facebook in
Apple and Microsoft so on
you got that high profitability but they
also have this issue of intense
competition whereas if you go for more
traditional business like at McDonald's
or something
restaurant business or real estate
owning or you rent out real estate that
is much more stable in terms of your
earnings typically but the rate of the
return meaning how quickly you generate
profit how much profit you make in terms
of percentage is far far lower that's
because it's a more established industry
that's why you can make big money as a
tech entrepreneur but if you go into
real estate and do the real estate game
the process is so much slower because as
I said as I said just as I just said as
the industry becomes more mature of a
margins the profitability drops quite a
bit so the typical tech company can make
30% margins on their products or more
whereas other businesses at the end of
the day their profitability may be 10%
5% if you're in commodities based
businesses
that could be much lower than that I
remember one of guys I used to do
business was 20 years ago he had a
company a 50 million dollar per annum
company and they sell chicken products
chickens and he told me the margins were
three to five percent depending on the
year three to five percent so they had
to run a really tight operation so yeah
anyway there's a little tech business
tip there anyhow so what happened last
night Saturday night I was resting up
and I started getting in a tech support
request something was happening with the
studio web software training software
and I monitor these things because I
like to be on the front lines I want to
know what's going on even though I have
support partners with me I'll get into
that in a second anyway long story short
what had happened is one of the cloud
the service providers had made some
underlying changes to their
infrastructure as a result of these
changes it started messing with the city
web application session wasn't being
held so what is a session this is a bit
of a nerd talk here
so anybody if you're trained properly in
the web and the web stack you know that
the web by default is stateless meaning
when somebody loads a web page whether
it be a dynamic page like for Facebook
or from Instagram or whatever era or
status any type of web page it's
basically loses connection with the
server the server gets a request Hayes
load up this page for me their server go
goes okay and it sends the page which is
a bunch of HTML code CSS code JavaScript
code and then it cuts off the connection
so now the server doesn't know if you're
still looking at that page or not and
the reason the web was designed that way
is that allowed it to scale much more
easily much more quickly because if the
server had to maintain a connection with
the client in this case the web browser
client-server interaction I've talked
about that in my beginners courses if
the server would have to maintain
connections with the clients all the
time it would be
very very very expensive in terms of
resources RAM CPU memory array you would
need much more powerful servers to
manage X amount of people visiting your
websites or your web apps so that's why
the web is designed that way so to get
around that they came up with this
concept of a session they you know go in
for a massage session you go for a yoga
session you know that kind of session so
this is a service session so what they
do is frameworks like asp.net Django or
PHP that's a language etc etc they
provide mechanisms where you can have
the web server app but you write it I
can automatically tag of a person's web
browser with something called a cookie
which is a small text file so that next
time the guy visits the site you can
click on another button or for some or
etc the server will check to see oh this
is this guy okay we he was visiting just
two seconds ago or five minutes ago so
using the session mechanism they get
around the fact that by default the web
is stateless in nature it does not
maintain state they think of state as a
state of being basically it doesn't
track it allows you to track who's
visiting your site that's pretty much it
so anyway that long nerd discussion
about the stateless nature of the web
coming back to my story they did
something the cloud service provider
they did something to interrupt the
absolutely to track session so things
weren't hooking up started started
getting complaints anyhow so being the
owner I am the first line so I checked
into it I have to do some investigation
15 minutes later I realized okay it's
got to be something on the on the server
now we hadn't updated that code that
installation for months so it wasn't us
so I emailed the cloud service provider
and had got a response but all of a
sudden within about a half an hour so it
started working
again so this can happen on a Saturday
night that's the life of the
entrepreneur entrepreneur is what you
establish yourself have tremendous
freedom like I can work what I want I
could tick off what I want they can work
in California Florida easy I could do
whatever I want in that regard so I have
a lot of freedom in that regard but I
also have the issue where if stuff hits
the fan the app starts messing up I'm on
the front line because it's still a
small business overall small business
anything under fifty million a year in
sales so that's the downside to that
lifestyle but to me it's kind of a game
it's still game for me you know and
tracking down errors and stuff we had
something a few months ago where it kept
up being the server power because having
more and more people join the system
more and more schools or more private
it's mostly schools so and the server is
tanking we're spending a lot of money on
my service on my hosting cloud hosting
in fact I had think at what point close
it at 32 gigs around 12 CPUs it was a
massive allocation of resources was
costing many many thousands of dollars a
year to keep the server at this power
and I said this is crazy this is crazy
we have to fix something there's got to
be something done it what happened even
we were maxing out the server a huge
cost it was still starting to slow down
terribly when we have too many schools
come on they all come on at the same
time that's the nature of the web apps
by the way it's always like and no
problems and it's the peak and that's
what you have to design for when you're
writing a code you're choosing your
server architecture you have to design
for peaks now in the beginning you don't
worry about that so much because you
don't know what's gonna happen if it's
gonna work but when you start because
designing for peak usage time and that
could be just an hour a day and then the
rest of day is fine but if that hour a
day when you have your peak users it's
not working the systems in big trouble
so anyhow so we had that issue
we were about three hours a day peak
usage peak usage was tanking the server
and I was putting like we had huge
resources I said there's got to be
something going on here there's got to
be something going on so I haven't been
big boom bang bang bang did my
investigation I found out that the
previous lead developer hadn't properly
indexed some key fields in some key
tables it's it's crazy okay I've got
I've talked about database indexing it's
how important that is in a previous
video so anyway three hours of
investigation I decided to take get into
it boom boom bang it figured out indexed
couple tables literally to fix it this
problem it took me literally once I
figured out what was the problem was you
have to isolate things it literally took
me a minute to fix it all sudden I was
able to reduce my server cost by 95%
just about 95 percent and it still runs
super fast again because of a simple
thing I was sitting at lunch earlier
this week with a friend of mine who was
a CTO of a company that they've raised
millions of dollars and they have a SAS
in an educational SAS and used to work
for me a mentee of mine and we were
talking about that and I was telling you
know it's been I've been in this game
for 23 years and you see these new
technologies emerge node and this
framework in that JavaScript framework
or this new server-side language or this
new programming language but at the end
of the day still after all for these
years 23 years from me the same basic
problems we had back then are pretty
much the same basic problems we have
today most apps are just UI is user
interfaces sending and receiving data
from a database that is most of the work
now there are exceptions with games and
stuff like that but that's really what
it comes down to and so in this
situation where I was having problems
where studio web was was tanking because
I had so much so many users on
the problem was not the infrastructure
and the code it wasn't all these things
that you might consider how we got to
move to node and that's what we did in
fact when we first started having
problems we built a series of micro
services with a separate app server and
then we would feed data to the old
system with the micro services services
based architecture and that helped to a
certain extent but the end of the day
the you know all that work building this
whole new API this whole new micro
server services layer there was at the
end of the day the real problem was
again the old prom it was the database
once again the database so when you're
looking at app development you have to
first and foremost especially doing web
apps and so on and if there's a database
behind the scenes you gotta pay
attention to that database because how
you interact with that databases is so
important it's the bottleneck in 90% of
apps keep that in mind</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>