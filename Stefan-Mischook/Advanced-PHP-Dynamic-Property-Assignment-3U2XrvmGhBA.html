<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Advanced PHP - Dynamic Property Assignment | Coder Coacher - Coaching Coders</title><meta content="Advanced PHP - Dynamic Property Assignment - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Stefan-Mischook/">Stefan Mischook</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Advanced PHP - Dynamic Property Assignment</b></h2><h5 class="post__date">2010-07-26</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/3U2XrvmGhBA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hi there this is John for killer PHP
comm and today what I'm going to be
doing is looking at how we can do a bit
of clean-up on our project so what I'm
gonna do is I'm going to start off by
just fixing up we've been doing a lot of
neucom killer PHP models user and these
can be really long namespaces and it
might seem a little bit overkill so
we're gonna clean that up
we're also going to get rid of all of
these this render this render this
render since we're basically repeating
ourselves in our controller so we're
going to clean those two things up
and then we're going to look at how we
can clean up our models and how they're
defining various parameters so we're
going to start there and then we're
going to go and we're going to refine
our persistence we're going to move
stuff into our lower layers and let the
the models handle the persistence of
objects and so on and so forth so we're
gonna move the user exists' flag down to
the user model and we're going to be
passing the whole request object down to
the model so that the model can handle
that request by its own self so let's
get started
the first thing I want to do is I want
to stop typing calm killer PHP models
user because we always know that we're
working with killer PHP and it seems a
little redundant so I'm going to use the
use declaration at the top and I'm going
to say use calm killer PHP models rather
use calm killer PHP and then that way
down here I can just say new models user
which is a little more precise and well
it's not more precise but it just means
that I don't have to always type in calm
pillock killer PHP so that's just a nice
little shortcut if i refresh this
nothing will change which is good so
that's the first thing I wanted to do
the next thing I want to do is I want to
pass the whole request object in to this
user and I also don't want to use the
constructor the reason I don't want to
use the constructor is because it's not
very good practice to rely on a certain
number of
arguments for your models if you do then
it means that we always have to put in a
first name in the last name in an
address and this can be kind of hectic
so rather I'd rather just declare one
constructor that is a little more
freeform it doesn't require any
arguments so instead here I'm going to
rename I'm going to create a public
function here called construct and we'll
just leave that empty and then here we
will rename this to save parameters and
instead of saving the parameters and
requiring that this be the first name in
the last name in the address we're going
to do this a little more dynamically and
what I mean is that I'm going to take in
whatever the parameters are and then for
each of those parameters
I'll assign the necessary variable which
makes a lot of sense at this point so
I'll just say this key equals Val now
this is all fine and now what you'll see
is that because we've got address first
name and last name and because in my
form over here I've got address first
name and last name and they're identical
then in my index controller if instead
of doing current user equals like this
hold on one second
so now I can just say this new models
user okay so that works so now instead I
can just do session current user and
then save parameters requests and what
it'll do is this can be treated like any
other variable right so the only
difference between saying user equals
new models user and session current user
equals new models user is that this is
going to be stored in session or in
memory on the web server
the other thing yeah so now I'm just
passing in all those parameters as the
request object and then here everything
else was the same so let's see what
happens if i refresh this again nothing
is going to change however if I go back
to the default page and I say let's say
my name is Jane Roberts and I live in
Vancouver BC and I hit submit let's see
what happens okay so as require once
calm killer PHP controller models user
so we're getting this error here saying
calm killer PHP controllers and then
models and then user dot PHP and this is
happening because of my use declaration
I made a mistake since I still new to
this stuff
myself so we say use calm killer PHP and
here I'm just going to say as KP and
then down here I can just put in new KP
backslash models user and there we go so
Jane Roberts and she lives in Vancouver
submit the query and then if I go back
to welcome index actor index controller
and then welcome then we'll see that
Vancouver and Jane and Roberts and all
of that is being persisted properly so
now what's happening is that basically
that request parameter is getting passed
into the user object which is actually
being stored in session
so this is all nice and fine and dandy
the other thing I want to do is I want
to move this user exists' function into
the into the model so if you look here
we could actually create a user object
before setting all the parameters a lot
of very rich PHP frameworks will let you
manage these kinds of parameters and the
setting of various session variables
whether you're using symphony ortho Zend
framework because we've got a very
rudimentary system here and we're
highlighting all these different neat
tricks with PHP 5.3 and the MVC
architecture for now we're going to
leave it as is and we're going to shift
our focus over to using session to store
users and how we can basically pass or
handle the callback in one page so that
we can simplify our example and then
move the example over to a aggregate or
a collection of users rather than one
user so that's what we're going to do in
the next video the last thing that I
want to try and just kind of highlight
here is that we've been using this
render repeatedly in our example so I'm
going to delete that
and delete that and I'm gonna delete
that as well and now our pages aren't
going to render anymore however if I go
back to the controller abstract class at
the top I can just run this render after
we run the particular method and then
everything will be back the way it was
so we render a method dynamically we
don't know what it's called or
what-have-you we know that it ends with
the word action and then we render it
and that's when we do and that's how we
fire off the rendering of function so
this is just a little bit of code
cleanup which we should be doing along
the way anyways so we've managed to save
parameters here if we wanted to we could
easily check to see if a user exists and
pass that functionality down but I'd
like to shift the focus a bit and look
at how we can render multiple users
using the user model since the user
model is storing anything related to
user management it's not just a user
it's also going to be handling the
persistence of multiple users and so in
order to properly illustrate this we're
going to shift our focus from the
current user session variable to the
user's session variable in the next
video thanks for listening</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>