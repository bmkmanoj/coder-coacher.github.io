<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Build A CMS Part 44 - Change Password Form | Coder Coacher - Coaching Coders</title><meta content="Build A CMS Part 44 - Change Password Form - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Stefan-Mischook/">Stefan Mischook</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Build A CMS Part 44 - Change Password Form</b></h2><h5 class="post__date">2012-01-18</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/q21F34FEvMk" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">welcome to part 44 the next video too I
want to cover how to build out a change
password form and this should give you a
foundation for building out additional
forms of your own for further CMS
functionality so I'm going to be working
with the files within the settings
folder and that's within app settings
and we have three main files there we
have em under squish settings within the
models folder we have password PHP and
we have viendo squared password PHP
within the views folder and i think i'm
going to start out with password PHP
like so so i'm going to start out with
an opening PHP tag I want to do an
include okay and I want to include in it
dot PHP and that will take care of
setting up the content management system
and I also want to include our settings
model
and while I'm at it I'm going to create
a settings object like so and I think
I'm going to pause this particular page
right here let's jump to the models and
at least get the basic setup so all I
need to do here let's start out with a
comment
so basically this particular model will
take care of all tasks related to the
current user settings it could be
changed password it could be change user
name change personal details you know
whatever you want to build out but in
this specific case I'm going to be
building out a function that allows us
to change the password so class settings
and within this I'm going to create a
function change password and it's going
to accept two parameters user and the
upass and I'm just going to leave this
function alone for the moment work first
on the main controller in the view then
come back to this file at a bit so back
here after we've created our settings
object let's also make sure that the
user is logged and properly I do that
with FP off check authorization and
assuming they are logged in and
everything's fine PHP will just continue
down this file and I think the next step
is going to be checking if the change
password form has been submitted I'll do
an if is set i'll check for the post
data specifically if the submit button
has been pressed
otherwise else I want to go ahead and
load the view so that's going to do like
this it'll be FP template load and we're
going to load settings views feet under
square password dot PHP so let's save
that and at the moment this should work
fine if we take a look at this page we
should just get a blank page there's
nothing within our view yet but let me
go ahead and work on the view next
so within our view the first thing I
want to do is load that template file we
created earlier that's within core
templates t under square page under
square head at PHP and i'm going to copy
this and do the same thing except it's
going to be the photo template instead
and within this file I guess I may as
well just open up the dashboard view and
copy this entire section the middle
section here because that's basically
what we're working with so we can leave
all this alone the only difference is
here within the right column and rather
than h2 with dashboard let me h2 with
change password and then we want the
fire for have an action to blank so it
redirects to the same page method 'post
an ID
I've edit my class of wide label which
I'll explain more in a couple minutes
and within this form I'm going to start
out with a div and that div is going to
hold any alert messages for example if
you didn't fill in all the form fields
or you know whatever else goes on with
the form we want to be able to display
alert messages and if you've worked with
the object oriented PHP login series
that I did some of this code should be
recognizable so PHP and i'm going to set
a variable alerts equals this get alerts
and if
load is not blank want to echo out an
unordered list with a class of alerts
and I want to echo out the bloats
themselves and finally the closing
unordered list
there you go so this first section will
display any alerts that are related to
this form and next one we're going to
have a div of a class row and we have a
label for and it'll be for an element
called old pass and to indicate which
fields in this form are required I'm
going to use a spam with a class of
required and I'll add a star there that
should be pretty obvious that's sort of
a universal symbol for this field is
required this little star so we have our
label in place let's actually include
the input now so input type of password
name is old pass it needs to match what
the four is well so set the ID to old
pass as well and the value is going to
be a little bit of a PHP echo this get
data
hold pass
and finally is the last element within
this row class and have another div the
class of error and within this we're
going to echo out this get data or under
square hold pass like so so what this
does is this creates a row within our
forum it contains a label and input and
any related error messages and I can
basically copy and paste this twice
because the first one is the old the
first rose the old password the second
one is the new password and the third
one is the new password just repeated so
let me go through and change all the
various fields here so instead of old
pass this will be new pass
okay believe that looks good and then
same thing down here so this is new pass
and the number two
okay so so far in our forum we have a
row for our different alert messages and
then three rows each for individual form
elements within this table and finally
we have a div with a class of row and
submit row and this is going to be our
submit button here so input type of
submit name submit class of submit and
finally a value oopsy a value of submit
okay like so so I believe that takes
care of this view file as a quick
reminder and explanation as i go here
when we use iframes as the CMS settings
was set up in the last couple videos we
were actually going to use proper form
submit process rather than the ajax and
jquery that we were using to edit
content areas or to log in so we're
going to go ahead and just use a
standard post submit so the process will
be user visits this page if the form has
been submitted we're going to process
process it here otherwise we're going to
load the view and the view will have
various data fields that are
automatically populated for us
so let me go ahead I think I'll just
save what i have and do a quick preview
and see where we are at the moment there
we are so it looks like we're headed in
the right direction everything looks
good we're going to have to change some
CSS styles just a little bit here and
there but this looks pretty good so I
think is the last thing in this
particular video let's go ahead and
tweak that CSS so if we open up some
resources CSS let's see what do we need
to change we need to copy this line here
FP under square wrapper and dot required
I'm going to paste it below and I'm
going to specify any spams with the
class required i'm going to set border
to 0 so it overrides this I'm keeping
this particular line because I don't
want to accidentally overwrite
functionality that we previously written
or in this case styles that we
previously written so border 0 and a
color I'll just leave it as read and
then the other thing that I wanted to do
if you remember let's look at our view
again notice i have a class of wide
label and that's because if you take a
look I want these labels to all be on
one line and this actually wraps two
lines so that's pretty easy to fix I
think I'll just put it what's the best
spot I guess right after our FP wrapper
under square label their FP undergo
rapper label
so FP wrapper that wide label label and
this way we're going to set a different
width I think I'll set a width of 160
pixels I believe that should work for us
there we go so that works a little bit
better we could even probably modify
that make that 150 and it worked just
fine yep ok so next step is to actually
have our forum be processed properly and
to access the model and update the
database but I'm going to handle that in
the next video</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>