<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>MySQL Advanced - Backup &amp; Restoring Databases | Coder Coacher - Coaching Coders</title><meta content="MySQL Advanced - Backup &amp; Restoring Databases - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Stefan-Mischook/">Stefan Mischook</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>MySQL Advanced - Backup &amp; Restoring Databases</b></h2><h5 class="post__date">2010-10-26</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/s2f_1ROWzuA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hi there this is John Levin sold for
killer PHP comm and this is part 8 of a
nine part series or looks to be a nine
part series on advanced MySQL usage and
today what I'm going to be showing you
is how you can do backups and restore
your data with the help of the MySQL
dump function that comes with pretty
much every distribution of MySQL so
let's just get started here if I start
by showing you the tables from our last
video you can very easily see that we've
got author post and then we've got post
count post with authors and published
posts which are all views that we
created in the last two videos so if I
want to do any kind of backups of my
data the most effective way of doing
this is actually from the command line
now granted you can also do this and I'm
just going to show you quickly how if I
just create a new tab here so you can
see if you do have a map configuration
then it's actually very easy for you to
just use the PHP my admin toolset that
usually comes with some kind of lamp
stack whatever it may be and from PHP my
admin if you remember it from the
introductory tutorial that Stephane did
you can see basically your whole
database schema and you can see how many
records you have and everything else but
you can also do an export of your data
so if I were to check all and I said
export and at the bottom here you can
actually save it as a file or you can
just hit go and when you hit go you'll
see that MySQL will actually generate
all the necessary statements for
creating the ah the the constraints that
we looked at in even the first or the
second video too
creating the views that we described in
the last video and so on and so forth
and even all the tables and all the the
rows and everything else so this is a
great way of doing your backups if you
don't have access to this or if you're
for example using SSH to log into a
server and you don't have phpMyAdmin at
your disposal
then you're not there's actually a very
simple way of doing this too so if I go
back to my terminal and I just quit my
SQL you'll notice that in my my
particular MySQL binaries are stored in
the the bin folder here
so I have minus QL client test MySQL
config MySQL find rows install DB and so
on and so forth minus QL admin but
there's also MySQL dump and MySQL dump
is a really simple way of just dumping
out all the information in a particular
database and it's great if you want to
do that turn it into an SQL file similar
to the scripts that we've been creating
over time except that this is going to
be something that is automatically
generated for us so I'm just going to
create a - I'm just going to run MySQL
dump from here and see what happens so
you're going to notice that it's going
to give me a selection of options now in
this case my first option is going to be
that I want to access my database using
root and my password for my database is
actually going to be root not very high
security and if I just specify the
database name then what's going to
happen is it's just going to dump
everything out straight to my command
line which isn't very helpful I mean
yeah you can copy and paste it but
that's not a very elegant solution with
a bit of shell scripting we can actually
easily move this into a file so if I
wanted to push all of the data that the
MySQL dump function is going to return
then it would just be a matter of using
the greater than symbol which will pipe
that output into a file and then I just
need to specify a file so
this case it's going to be K PHP SQL and
I'm going to call it back up dot SQL hit
enter and nothing should happen or seem
to happen however if I go to this
particular folder using CD and then
using the tilde which takes me home to
my desktop to K PHP SQL which is the
folder that I have this particular
backup file sitting in and I were to or
even I can just go into my finder here
so it's nice and easy for you to see if
I go to my desktop I'm going to have in
my K PHP SQL folder a backup SQL that
was just created so if I open this in my
editor you can see that it has all the
necessary information for defining the
the website that I or the the database
schema for my website so it's got you
know the inserts it's got you know a
whole bunch of extra junk which might
not necessarily be super user-friendly
but at least we know that it's all it's
all there so with that in place we can
also see that there's the views and
everything else so if I just select all
of this and I were to go back here into
MySQL and for the sake of argument I was
going to say okay show databases I've
got a whole bunch of databases here if I
wanted to create a new database called K
PHP back up with a collation of utf-8
underscore general underscore CI and a
encoding of utf-8 I believe that's how
you would do it ah here we go
it's actually not kool-aid it's
character set yeah so Kool Aid is fine
but it's actually character set
so if I create this K PHP backup and I
decide I want to use K PHP backup then
if I go back here and I take my backup
SQL file select it all and then paste it
in then it's going to say dump completed
everything looks good if I say show
tables I'm going to get all of the
tables from Mike a PHP a database
including all the views so if I say
define post with underscore authors oops
I mean describe post underscore with
underscore authors I'm going to get a
description of that if I say select star
from published posts I should get a nice
description of that and everything is in
place so with that one simple MySQL dump
command if you wanted to and you had to
log into MySQL this would be a very
simple way of doing it another way of
doing it is actually without even
accessing MySQL at all so to illustrate
this example what I'm going to do is I'm
just going to drop the database of K PHP
underscore back up show databases and
then I'm going to recreate the create
database K PHP underscore back up and
then collate to utf-8 underscore general
underscore CI it's very important that
you make sure that your defaults are
properly set up or else you'll end up
having like a Swedish character set for
some of your columns and then a utf-8
one for other columns which if you have
any kind of funny characters or you know
if you're trying to store multiple
languages you're going to set yourself
up for a lot of trouble and we're going
to have the character set set to utf-8
so I've created this K PHP backup
database except that now if I say use K
PHP underscore backup and I show tables
it's going to be absolutely empty now if
I quit my SQL
instead of just running my regular MySQL
query and specifying K PHP underscore
backup as my database I can then pipe
the backup SQL script back into MySQL
through the client and that means
instead of using the greater than two I
would put to a file I'm just going to
use the less than and then I'm going to
find that backup dot SQL file so in this
case it's in K PHP SQL backup SQL if I
hit enter it'll take a moment and then
it'll just pipe all that information
back into the SQL server if I run the
client and I say show tables then
they're going to be back where they
belong so with a couple of very simple
commands at your disposal it's actually
not difficult to do your backups and
your restores and to be able to easily
manage your database if you're moving
from a development environment to a
staging environment if you need to
create a test script to show that
there's certain integrity that is
maintained within your application you
know these little simple queries are
going to save you a ton of time I'm John
Leben saled and thanks for listening</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>