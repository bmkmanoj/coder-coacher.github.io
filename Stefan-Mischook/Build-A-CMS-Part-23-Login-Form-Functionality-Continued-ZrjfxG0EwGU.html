<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Build A CMS Part 23 - Login Form Functionality Continued | Coder Coacher - Coaching Coders</title><meta content="Build A CMS Part 23 - Login Form Functionality Continued - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Stefan-Mischook/">Stefan Mischook</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Build A CMS Part 23 - Login Form Functionality Continued</b></h2><h5 class="post__date">2011-05-21</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/ZrjfxG0EwGU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">welcome to part 23 in this video
hopefully we're going to wrap up the
color box functionality at least for the
login form section of the content
management system and in the last video
we ran into an issue right at the end
where color box was seeming to process
the form correctly except we were
running into a preparer issue an error
message within an authorization object
so if we go to our models and open up
the authorization object I'm you'll
notice that it's calling the original
database object this particular object
no longer exists because this is code
left over from the object oriented PHP
login series that I did so rather than
using regular database i'm going to call
FP database to access the database
object within the main flight path
object and rather than using global
database i'm going to use global FP so
we can access the FP object so let's go
back to test and see what we get at the
moment and it says invalid username or
password so we are getting back the
correct response so let me go ahead and
tweak this a little bit more first thing
that I notice is this box doesn't
automatically expand to fit the full
amount of contents if we add in an error
message here so how I'm going to go
about fixing that if i open up login dot
PHP remember Ajax just returns whatever
HTML the browser or the at PHP
processing script returns so if we have
an invalid login and we want to change
the height of the color box I'm going to
go ahead and insert a line here
let's say we'll set the alert and I'm
going to echo out and this will appear
within the color box ultimately script
and we can resize the color box using
the color box free sites function which
is talked about in the color box
documentation so we do that with jquery
color box got resize like so and this
function automatically resizes the color
box based on the contents so we did
include this line and I also want to
include this line in case the user
didn't input either username or password
so the same thing I'm going to place it
right here just before we load our login
view let's save that and run a quick
test and you'll notice the login box
resizes and test test and we do get an
invalid username or password but things
look like they're working correctly one
thing I wanted to note before we
continue is if you do try to log in with
the correct username and password you
will run into some issues we haven't
built out a couple different files that
we're going to need for example you
haven't built out logged in view or the
underscore logging in view at the moment
so you will have some issues so hold off
on doing that for the moment I'm going
to come back to that in the next video
and talk about successful login and
logout functionality however we're just
about finished with this particular
video but there are a couple things I
did want to tweak first of all I wanted
to talk about making this cancel button
work
I'm going to be nice to have a way to
close out this pop-up by being able to
click a button and i also want to talk
about removing this ? and log in from
the URL when the user closes this window
so we're going to approach this by
making a couple changes to the existing
code first thing we're going to do is I
want to make sure there's no way to
close this login box with without
clicking the cancel button so there are
a couple options that I need to set if I
go back to my it's actually my template
t underscore login dot PHP there are two
additional options that I need to set
when I initially call color box first of
them is overlay clothes and I'm going to
set that to false and the second one is
Escape key and set that one to false as
well and these are two options one that
says clicking on the overlay closes the
light closes the color box and the other
one is hitting the Escape key closes the
color box and we want to make sure that
the only way to close it is via that
cancel button and one other thing that I
want to remove is this little X here
because that also closes this field and
I'm going to approach it like this i'm
going to go ahead and copy the URL and
open it up in firefox
and i'm going to use firebug to find out
what element that x is looks like it's
see box clothes is the ID I'm going to
bring up Kota again I'm going to open up
the color box folder and specifically
the color box CSS file and change color
box clothes and remove color box closed
over i'm going to change that to display
none so it's hidden by default if we go
back to test we don't have that X
anymore so now there isn't any way to
close this box but we're going to go
ahead and add it in the V under squared
login dot PHP file and we're going to
add it by adding an additional jquery
event here and this one is going to be
going to be connected to something with
the ID of FP underscore cancel and if
you remember correctly FP underscore
cancel is ID for that cancel link and we
can't just use a regular cliq item like
this because this element doesn't exist
when the page is first loaded so we need
to use jquery's live function if i open
up firefox you can check out the live
function documentation at api jquery com
/ live and basically as the description
says here it says it attaches a handler
to the event for all elements which
match the current selector now and in
the future so what this does is this
means that we can access the items let
me start over when items with an ID of
FP underscore cancel I clicked we have
the ability to
function whether they whether that item
exists when the page is first loaded
what exists later for example when color
box is called an AJAX occurs so like I
said we're going to use the live
function and we pass in we want to use
the click I don't actually know what you
call this click event I guess and
similarly to above I want to use the
prevent default function so with an
function i'm gonna include e and i'll do
a dot prevent default there we go and
similarly to what we did when resizing
color box toy box also gives us a
function to close colleague laughs so
we're going to do it like this pound
sign colorbox close and like i said a
couple seconds ago I wanted to remove
this log in from the URL if the user
closes this field it closes the color
box pop up so I'm going to do it like
this i'm going to create a page variable
dining like whole page so barb page
equals and i'm going to get the current
location of the window so
window.location.href i'm going to strip
out anything after a question mark so
page equals page substring
and we're going to look from the
beginning of the string to the last
index of the question mark character so
basically this takes the existing URL
and it removes the chunk where it
doesn't even move EDM just selects the
chunk from the beginning of the URL up
until the question mark character and
then I'm going to refresh the page using
the new URL so window that location
equals page like so and let's test this
and make sure it's working properly and
it is not so let's go ahead and just
make sure that we refresh the page
properly
I'm just scanning for any errors or
issues I guess the first thing to do
just make sure the ids are correct and
they look like they are let's also try
adding an alert oh I know what it is
misspelled color box I'm sure you caught
that as you're watching along so let's
try this there we go so you notice that
the URL also changed so index dot log in
or index dot PHP ? log in wait cancel
gets removed from the URL and the color
box closes well if that wraps up this
tutorial so join me in the next video
I'll be talking about what to do when
you enter in the correct username and
password and be creating a couple views
for logging in and we'll also be talking
about logout functionality</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>