<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>PHP Shopping Cart &amp; Paypal - Calculating Cost | Coder Coacher - Coaching Coders</title><meta content="PHP Shopping Cart &amp; Paypal - Calculating Cost - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Stefan-Mischook/">Stefan Mischook</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>PHP Shopping Cart &amp; Paypal - Calculating Cost</b></h2><h5 class="post__date">2010-08-31</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/cZCJElN9usY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hi there I'm John Leben sold and this is
the eighth video in a series to set up a
very simple PayPal shopping cart so far
we've got the beginnings of a shopping
cart object it's can add an item we can
get items from it we can get item
quantity from it we can empty our cart
and we've also created a couple of
interesting little templates and we've
got two pages for our shopping cart
we've got an index page and we've got an
Add to Cart page and what we're gonna do
in this video is we're gonna create the
amount in our order form we're also
going to put in the unit cost and we're
gonna flush out the rest of that
shopping cart class so let's get started
just like we have a quantity here I also
want to get the i the item amount it's
gonna do something like for each get XML
catalog as product and if product ID is
equal to Product ID and this is from the
the node in the XML collection then we
want to basically have the amount equal
the product price right and that's the
cost of the item now I'm gonna wrap this
up into a function we're gonna call this
get item cost and I'm gonna take this
I'm just gonna paste that in there you
know you're noticing that there's a
function inside of a function but don't
worry we'll pull that out and we'll just
put that here whoops and what we'll do
is we'll actually return the product
price and if we don't we're gonna do
something we're gonna throw an exception
and an exception is basically a way of
saying hey something went wrong with the
program we couldn't find something or
the item wasn't found or there was an
issue so I'm just going to say throw new
exception so an exception object is
an object that comes you know this is
just like new shopping cart but new
exception but exception is part of the
PHP 5.2 language so it's an object that
has been written into the PHP language
and I'm just gonna say item not found
and I'm gonna put in the product ID so
oh and the last thing we're gonna do is
we're gonna ask for the Product ID here
now oh we need a semicolon
so either what's gonna happen is we're
gonna find this Product and then we're
gonna return the price and if we don't
find the product then we're just gonna
throw an exception and that way we're
gonna know something bad happened now
I'm gonna cut this out and I'm gonna
stick it in my functions file so we're
starting to get these neat little
functions that really describe what
we're doing we have get XML catalog get
shopping cart set shopping cart product
exists which returns true or false get
item cost and we've got this shopping
cart object which has its own set of the
functions that are specific to the
shopping cart so add item get items get
item quantity and empty cart now that we
have that we can go back to our Add to
Cart page and we can say that the amount
is equal to get item cost product ID now
I'm just going to add a dollar sign here
and if i refresh that you're gonna see
that the amount is a dollar 33 now that
doesn't quite look right if you asked me
because we should be counting how many
times you've gotten tomato soup right so
this is why maybe it does make sense for
us to rather than just get the item cost
we also want to maybe we let's call this
the unit cost instead and what we'll do
is we'll get the amount from the
shopping cart
and because the shopping cart knows how
many items we've got of or the quantity
of each item it will be in a better
position to tell us how much this
actually costs so I'm gonna say get item
cost and I'm gonna pass in the same
product ID so this is a little confusing
but basically we've got the unit cost
which is for one item and we're gonna
need that for our paypal shopping cart
because PayPal wants to know how much
each individual item costs and it'll do
its own math and then we have the amount
that we want to show to our actual users
so let's create a function here called
get item cost pass in the Product ID
again a product idea is really important
as you can see because it basically ties
everything together it's a unique
identifier and so this is gonna look a
little strange but we're basically going
to take the cost as a string and we're
gonna do get item cost and we're gonna
pass in the product ID then we have to
convert it into a float now a float is
basically a decimal point number that we
can do math with and I'm gonna say cost
float equals and this is gonna look a
little funny but basically we take the
cost as a string aa as a string variable
and then we add nothing to it
so now PHP knows that this is a number
that we can do math with as opposed to
just a string and then we're gonna
return cost float times we're gonna do
int Val
and now what int Val does is it
basically takes whatever we've got
whatever number or anything and makes
sure that it's an integer because we
don't want to have it multiplying a
float with something that isn't even an
integer you know and then we'd get some
funny math there and so we'll say this
items and then we'll pass in the
tidy and in fact looking at this we can
we can do a little better so I'm gonna
say this get item quantity product ID so
what's going on here is actually we can
do a little better than that we can just
say cost float times get item quantity
and over here I'm gonna put in the in
valve so whenever I call get item
quantity it's gonna return as an integer
and over here I'm basically saying cost
float times get item quantity and that's
the item cost so if i refresh that now
this is starting to look a little more
logical
we've got tomato soup we've got the
quantity and we have got the total
amount</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>