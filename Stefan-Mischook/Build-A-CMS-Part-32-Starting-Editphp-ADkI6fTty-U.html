<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Build A CMS Part 32 - Starting Edit.php | Coder Coacher - Coaching Coders</title><meta content="Build A CMS Part 32 - Starting Edit.php - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Stefan-Mischook/">Stefan Mischook</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Build A CMS Part 32 - Starting Edit.php</b></h2><h5 class="post__date">2011-05-21</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/ADkI6fTty-U" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">welcome to part 32 as you can see on our
project roadmap we don't have a huge
amount of items left to do what I'm
going to focus on in this video is
getting a database setup so we can store
content and working on our edit PHP file
and the view files so I'm going to open
up Firefox and work first on the
database so we have a user's table which
stores our user information but i also
want to create a Content table and it's
gonna have two fields and it's going to
contain one field for an ID which is
going to be a VAR char with 32
characters and the second one is going
to be a Content field and it's going to
have the text type and that looks good
so let me hit save ok so that's the
basic database functionality that I need
and we're going to be using our M
underscore CMS PHP file to interact with
this database and save and retrieve data
so go back to Kota I guess the next
place that we need to work on is edit
PHP so I'm going to create that file
with in ICMS folded so if we open up our
login dot PHP file the first two lines
are what we're going to use to start
edit at PHP we need to make sure to
include our knit dot PHP line and I need
to update the path there and the first
thing to do in this file similarly like
what we did in login dot PHP is we want
to check if the form within this file
has been submitted so I do that with
that simple if is that
and I'm going to check for a post
variable that i'm going to call field
and this will refer to the main field
that we're editing and else probably the
next step that we need to do is we need
to make sure that the urls that were
passing in in the variable zoomit the
variables that we're passing in in the
URL are present so to give you a brief
demonstration of that let me go back and
look at our preview so if you hover your
mouse or remiss link you notice we're
looking at a link to edit page p ? and
ID should be equals in their ID equals
content underscore header and type
equals one line and we're expecting two
variables in this URL an ID and a type
so let me briefly go back to my M
underscore CMS file and add equal signs
here after the ID I thought I'd fix that
in an earlier video but maybe I didn't
for some reason so back to edit dot PHP
so the first thing I want to do is I
want to make sure those variables do
exist so if is set we're going to check
for get ID so if this particular
variable does not exist so if it equals
if is that equals false or the same
thing with the type
we're going to display an error message
and as I talked about in a previous
video or too much of quite how long it
goes two or three videos ago I think we
created a function that we're going to
be using for this purpose if you open up
within core models open up the N minus
square template dot PHP file you'll
notice we do have an error function that
we can use to display an error message
so go back to edit I'm going to do FP
template error and exit so that will
display an error message if a user for
some reason maybe tries to change the
URL or insert something they shouldn't
books it in some way this will display
an error message out to the user we're
going to follow that by doing some
things with the ID and the type
variables so I'm going to create a
temporary variable that i'm going to
call ID whoopsie and the first thing I'm
going to do is I'm going to clean the ID
so FP let me call the CMS and I'm going
to do a clean block so specifically
clean block ID I'm going to pass in get
ID and this just makes sure that the
user hasn't changed this ID value in any
way try to insert their own information
just as a security measure and the clean
block ID just as a quick reminder is
this function here which changes URL and
just make sure there isn't anything
incorrect about it replaces spaces with
underscores dashes or underscores and
removes any non-alphanumeric
who is anything that isn't a through z
uppercase or lowercase or a zero through
nine or another score so that's the
first thing we need to clean that block
ID because we'll be using it later and
then i'm going to create another
variable that i'm going to call type and
i want to make sure that's cleaned as
well so i'm going to use the HTML
entities function and put in get type
and n 10 in the past and the next step
after we've clean these variables is to
actually get the content itself and we
don't have a anything stored in the
database yet and I'm going to hold off
on that till the next video but I'm just
going to create a simple content
variable that we're going to use later
and i'm just going to sign it to say
content here just a temporary string and
then i want to create a couple variables
that will be using the next video in our
view so I'm going to use FP template set
data through these so I'm going to
create a variable that i'm going to call
block ID and we're going to pass in the
ID variable from up above online 17 and
i'm simply going to copy and paste the
slide a couple times we have a few
additional variables that we need to
pass along to our view so for instance
is total actually 3 i'm sorry so we have
a block ID we have a block type
and we're going to pass in the type
variable and we're also going to pass in
a CMS field and this is going to be
slightly different and I'm going to show
you how to do this in the next video
we're going to add a third argument here
which I'm going to simply leave as false
and instead of passing an ID we're going
to pass in a function f p CMS and there
will be a new function that will create
in the next video called generate field
and that generate field function has two
arguments a type and content and just to
provide a brief overview of what this
does we're setting this variable we've
added a third argument here which in the
next video I'll show you how to do this
basically it prevents any auto escaping
of the content again I'll talk about
that in the next video and we've added a
new function here generate field and
this is going to create our form
elements within our view and the last
thing I want to do in this particular
video is load the view so FP template
load and I'm use the app path for
constant and i'll load CMS views fee and
your squirt edit PHP
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>