<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Advanced PHP - Passing Parameters Around our MVC Application | Coder Coacher - Coaching Coders</title><meta content="Advanced PHP - Passing Parameters Around our MVC Application - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Stefan-Mischook/">Stefan Mischook</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Advanced PHP - Passing Parameters Around our MVC Application</b></h2><h5 class="post__date">2010-07-26</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/TrZK32VEj94" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hi there this is John for killer PHP
comm and today what we're doing is we're
looking at how we can write a very
simple MVC framework from scratch using
PHP 5.3 and so I'm kind of going out of
my way to show you all the neat new
features in PHP 5.3 and soon-to-be PHP 6
so over the last couple videos we've
looked at how we can create anonymous
functions you'll notice that we're
dealing with namespaces at the top we've
also looked at how we can create
inheritance structures and implement
interfaces all of this stuff which has
to do more with object-oriented
programming in general and in the last
video we looked at how we could
basically create a form and post the
results back to the controller so I have
this default dot PHP file which is
currently sitting in killer PHP calm
killer PHP views and it's sitting in the
index default the index folder so in
views we've got index and we've got test
test is from an earlier video when we
were dealing with an index controller
and a test controller and seeing the
differences but in the index controller
we've got default dot PHP which is a
form and then we've got learned PHP
which is another action and then we've
got welcome dot PHP which is the welcome
page that we were playing with so these
were just some simple examples of the
controller architecture now we're going
to be looking at how we can save the
data in the model using the simplest
form of persistence in PHP which would
be session so session variables are
variables that are stored on the server
and they're done so by setting a key or
a cookie on the user's browser so what
happens is you go to the website and a
cookie a tiny little text file is stored
on the user's computer and that you tiny
little text file has a very very long
and
key and that long and encrypted key
corresponds with a long and encrypted
key on the server and using that long
and encrypted key the server and the
browser the user running the browser are
able to pair up and any data that is
stored in the session variables is made
accessible to that user so that's kind
of quickly how that works what we're
going to do is we're going to rely on
this as a way of carrying data over from
one stage or one one page to another
page and I'll show you what I mean so if
I go back to my index controller here
you can see that I've got this default
action and it's basically just var
dumping the request so if I go back here
and I say hello and world and my address
and I submit this query then I'm gonna
get hello and world and my address now
what if because we're at the default
action what if I wanted to check to see
if a particular user has already put in
their name and their address well the
first thing we need to do is we need to
start up the session variable and to do
that we need to go back to our index dot
PHP file and the index dot PHP file is
acting as our as our bootstrap in for
all intensive purposes at least in this
project
so we are bootstrapping our application
where we're starting it up we're firing
it up in the index dot PHP file so right
after we specify the namespace I'm going
to put in session underscore start and
what this will do is this will start the
session variables up for our application
now if we weren't doing this with an MVC
application or if we hadn't written this
MVC architecture that every single entry
point into our application whether was
the index dot PHP file or any other PHP
file that somebody wanted to directly
access we'd have to put in session start
so already because we have this idea of
a dispatcher and all requests are being
run
index dot PHP we only need to declare
this once so with session start declared
we can start using session variables
what I'm going to do is I'm going to go
back to the index controller and I'm
going to check to see if somebody has
posted back with a first name in the
last name so I'm gonna say if request
first name if this is set and the last
name is set then we want to do something
a little different we want to go to the
session variable and say current user is
equal to and here we're going to create
a new calm killer PHP models user with
these parameters so with current user
set on my welcome page instead of just
creating this new random user I'm going
to say that this user variable is
actually going to equal whatever is in
session or current user and if the
current user is not there then we're
going to change the view of it so I'm
going to say that there's a new
parameter in the welcome action called
user exists' and it will equal whatever
is set session current user yes so this
will be you know a true or false
statement now if the user doesn't exist
we're going to have to show something
different
right so if I go back to my welcome
action and I say index slash welcome I'm
gonna get a syntax error so let's see
what did I screw up okay yes so I need
another parenthesis there to close the
if statement so if i refresh this it'll
say call to a member function render
with on an on object right because
render width can only work if the user
exists if the user doesn't exist then
the model hasn't been created up here
and if the model hasn't been created up
here then the function render with
hasn't been instantiated so there's no
way that we can actually run this code
so we'll add a statement saying here if
this user exists and if that in fact is
the case then we'll define this user
with this particular rendering scheme
which we defined down here it's refresh
this again and it'll just say welcome to
my killer PHP application now what's
neat about this is that we've actually
created a variable called user exists'
and we have inadvertently passed it to
the view so if I go to welcome dot PHP I
can create a very simple if statement
here saying if this user exists we're
using a different style here and if and
I'll open another tag here saying else
so this is more as a templating engine
you if you were if you've done anything
with classical ASP or if you've done
anything with a you know with Ruby you
might have seen this kind of declarative
very simple to follow if-else four
templating and I can say oh we don't
know who you are please
register and here we'll just link to the
forward slash so if i refresh this again
it'll say uh-oh we don't know who you
are please register so if I click on
register and I put in John and letting
sold and my address so I'll just say
Montreal Canada and I submit this and
then if I go back to the Welcome it'll
say address Montreal Canada first name
last name and everything else so now our
application is able to detect whether or
not I've already registered and so on
and so forth
so in the next video we're going to take
this a step further by looking at how we
can start passing things to the model
and let the model do the saving rather
than the setting and stuff in the in the
in the view or rather in the controller
and also how we can clean up our
namespace so that we don't have to do
these really long things thanks for
listening</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>