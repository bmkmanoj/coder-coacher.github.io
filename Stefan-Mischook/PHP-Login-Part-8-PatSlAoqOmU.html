<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>PHP Login - Part 8 | Coder Coacher - Coaching Coders</title><meta content="PHP Login - Part 8 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Stefan-Mischook/">Stefan Mischook</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>PHP Login - Part 8</b></h2><h5 class="post__date">2010-09-09</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/PatSlAoqOmU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello all this is Ben Faulk for Q sights
calm welcome to part eight in our series
on building a basic PHP login system I
wanted to extend what we discussed in
parts one through seven and add on a
little bit of more advanced
functionality so it's a more fully
featured system so what we're going to
be discussing today is how to build a
form that allow users to change their
password pretty simple basic stuff but
it's one of those things I wanted to
explain how to do so I've started out by
downloading the files from the cooler
sites University the project files that
I posted from products 1 through 7 and
this is what we're going to be using to
start off with today
so I've downloaded it I'm just gonna
unzip it and I'll delete this folder ok
so here are basic files and I'm gonna
open up coda and let's get started so
the first thing I want to do is I want
to modify our login dot PHP file
slightly so I'm gonna go down this is
login dot PHP the controller file and
what I want to do is I want to change
this section here just a little bit the
important part is I want to add in an
additional session variable to store the
ID of the user who logs in so just a
couple minor things here so we don't
necessarily need to select star anyway
because that selects all columns so I'm
gonna specifically select the ID so
that's good that's good we can remove
the store result so we're going to be
doing things slightly differently and
instead we're gonna do statement
find result and we're gonna set the ID
variable that's going to hold whatever
this brings back and then finally let me
fix this and then we're gonna do the
fetch command which actually gets the
data that's pretty good now after the
results of this query the ID variable
will hold the ID of the currently logged
in user and if we some reason this
doesn't work the ID is gonna hold 0
so rather than num rows I'm just gonna
check ID if it's 0 we know that this
query failed and it wasn't a matching
login or there wasn't a matching user
and we'll need to display an error
otherwise we can go ahead and login so
last change to this file is I'm gonna
set this up the session ID and that's
gonna equal ID okay so that's all we
need to change in this file we're just
going to use this session variable in a
couple places later in this tutorial and
I thought it would be a good thing to
set it up now the next step will be to
create the actual form that changes the
password so I'm gonna start out by
opening up my view and if you remember
from post 1 through 7 the register page
was pretty similar to what we want it
has three fields what we want is an the
current password and the new password
and the new password again so I'm just
going to go ahead and duplicate this and
I'm going to rename it to V underscore
password
and open it up and just make a couple
basic changes here
and this is basically just how things
are named is all I'm changing
so basically any instances of user name
or user I'm changing to current pass and
password pass and pass to I'm leaving
alone I believe that's all let me just
go through this one more time okay
I believe we're good to go I guess the
last change I want to make is on all the
lot pages where the user is logged in
I'm going to also add in a link to this
new page so it's going to be I'm gonna
call it change password dot PHP like so
and I'm going to copy this line save
this file and then paste it into the
register page like so and also the
members page
okay so now that I have you set up let's
go and setup the actual controller so
again I'm just going to duplicate the
register controller and a majority of
this work will again like in the view be
simply renaming things so this looks
good and we just need to change any
existence any variables that use user
and change that to current pass I'm
simply going to copy this and go through
I'm going to change this
just any instances of the old username
and we also want to change any instances
of the view file from register to
password
okay that's the majority of the changes
and now the last couple things we want
going to want to do is so if the form is
submitted
we're going to go ahead and check we
want to make sure that all the fields
are filled in properly and if they're
not we display error messages and show
the form again and the next step is we
want to check if the password with a new
password and this repeated new password
are the same thing if they match so if
not we display errors and we show the
form again finally if all that is fine
we want to go ahead and process the form
and missed this one here let me just go
up and make sure I caught okay the rest
of it looks good</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>