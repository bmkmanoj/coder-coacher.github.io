<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>MySQL Advanced - Timestamps, Dates &amp; Ordering Part 1 | Coder Coacher - Coaching Coders</title><meta content="MySQL Advanced - Timestamps, Dates &amp; Ordering Part 1 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Stefan-Mischook/">Stefan Mischook</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>MySQL Advanced - Timestamps, Dates &amp; Ordering Part 1</b></h2><h5 class="post__date">2010-10-26</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/bs2pFytphcw" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hi there this is John Levin sold for
killer PHP comm and this is the I think
we're the sixth video I think we're the
sixth or the seventh video in this
series seventh video in this series and
we're gonna be talking about time zones
and intervals between dates and we're
gonna be building on an existing example
which I've got here of a post and a
author table basically I've got a one to
many relationship between the authors
and the posts so one author many
postings but we're gonna modify our
schema in this particular tutorial to
look at how we can essentially work with
dates and use the date functionality
inside of MySQL to add delays or
expiration dates for the publishing of
content this is similar to how the very
popular blogging platform WordPress does
it where you want to have something like
a blog post that is future posted or is
posted you know a week from now or an
hour from now or a day from now or what
have you
the same thing can be done very easily
just by performing a couple of neat
MySQL tricks and yeah that's about it so
let's get started the first thing I want
to do is just I'm going to select this
part of my last tutorial video and I'm
gonna create a new file paste it in hit
save and this time I'm going to call
this timestamps and timing dot SQL now
there's two features that I really want
to cover here one is time stamping and
if you do any kind of work with a
database being able to mark the time
that something was either modified or
created can be a great and very low-cost
way of adding the first most basic kind
of auditing to a system and MySQL has
some primitive features that can be
helpful if you need more advanced
features than a tool like doctrine can
definitely facilitate that but right out
of the box
if you just want to be able to track
when something was updated when a row
was updated on this particular table
it's very easy to do that with MySQL's
timestamp functionality so let's start
adding that we've got two tables here
we've got an author table and we've got
a post table I'm just gonna move the
information in the author table down
here we'll just keep all our insert
statements together for for now and
after the author ID are actually before
the author ID I want to add some new
columns the first column that I'm gonna
be adding is a publish date and that's
going to be of type date/time I'm also
going to add an expire date and that's
also going to be of type date/time and
then I'm gonna add a updated which will
be of type timestamp where the default
property of that is going to be now
which is by the way this is a function
this is a MySQL function just like count
is a MySQL function and on update it's
also gonna be now and then we'll just
add another comma so what this actually
means practically is that when we first
create a record the updated timestamp is
going to show now and then once it's
updated on update just like one here we
have undelete no action here we're
saying on update we want to update it to
now and now being the relative time that
the database perform the update to
better illustrate this I'm gonna add
some sleep statements in between my
various posts so I'm gonna say sleep or
it's actually select sleep and I'm just
going to sleep for two seconds here and
I'm gonna sleep for one second here and
I'm gonna sleep for one second here
let's see what happens
let's see what happens so if I go back
to my terminal here and I just paste all
this in it's gonna take a little longer
you'll see that we're running these
sleep statements but now if I do a
select star from post watch what happens
you'll notice that I've got one inserted
at twelve thirty two and twelve seconds
one inserted at twelve thirty two and
thirteen seconds one inserted at twelve
thirty two and fifteen seconds so you
can see there's that difference used
from the sleep command and one inserted
at twelve thirty two and 16 seconds
actually two of them are so the other
values right now are no and that's fine
we're not going to mess around with that
just point yet however you can see that
basically we've got these timestamps and
we had to do very little work to get
them now what's neat about this is that
your web application doesn't necessarily
need to handle the insertions of these
dates for example if I want to do an
update on political posting and oops
sorry if I want to update post set title
equals political posting and I'm just
gonna uppercase it not tile but title
and it's gonna be where ID equals one if
I do another select statement here you
can see now that political posting has
now been updated to twelve thirty three
thirty one so by very quickly just you
know doing this one update I'm also
going to inadvertently it's like a
trigger on a gun so you know you do one
thing and then another thing fires or
the tripwire or something like that so
as soon as you update a record then
immediately the updated column is also
going to be updated so it makes for
auditing very very easy and very
effective you know on our authors table
if we wanted to extend this example a
little bit I could add the same sort of
column
right here oops I don't want to do tabs
because when I paste it'll act funny so
select all this paste it back in now if
I do a select star from author I'm gonna
have the various you know authors and
when they were inserted into the
database now actually let's just add
some sleep statements so again we can
see what's really happening and to
better illustrate my point I'm actually
going to change the IDs so they're in
the reverse order so 3 2 &amp;amp; 1 or 3 1 &amp;amp; 2
better yet on this again sleep just
tells MySQL to take a break and waste
some CPU cycles on your behalf so if we
do select star from author now we're
gonna get various insertion dates right
so actually they're out of order when
you just do your regular select star
from author</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>