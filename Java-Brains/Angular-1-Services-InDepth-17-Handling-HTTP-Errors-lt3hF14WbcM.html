<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Angular 1 Services In-Depth 17 - Handling HTTP Errors | Coder Coacher - Coaching Coders</title><meta content="Angular 1 Services In-Depth 17 - Handling HTTP Errors - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Java-Brains/">Java Brains</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Angular 1 Services In-Depth 17 - Handling HTTP Errors</b></h2><h5 class="post__date">2016-10-21</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/lt3hF14WbcM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">okay there's gonna be a very quick
tutorial to show you how handling error
scenarios works with dollar HTTP now
we've seen that you can make changes to
what occurred and we show a success
message now what happens if we have a
server error I'm gonna open the console
here and let's say we uploaded the page
the console is up and running right now
I click on a user click Edit and I make
a change but before I hit say what I'm
gonna do is I'm gonna actually kill this
server alright now this server is not
running if I were to click Save notice
what happens well you don't really show
an error message to open the console we
see an error here easy connection
refused what we'd like to do is be able
to show some kind of an error message so
that the user knows that this wasn't
actually saved of course the error
condition is not always as drastic as a
server going down but this was a
simplest way for me to illustrate a
problem right it might not exactly be a
situation where the server is down it
could be that the save itself did not go
through if there could be server errors
or whatever we need to be able to handle
those cases and let the user know that a
particular action was not completed now
how do you do that it turns out that
when you do a dart then on top of a
promise we've passed in one function
right so even here we passed in one
function turns out the dot then actually
takes two functions as arguments the
first function is what to do when there
is a success scenario the second
functions in at least what to do when
there is an error so what I could do is
pass a second function as an argument
here right so this is the first function
an inline function passed as an argument
the second function can be the error
scenario so I'm going to have a function
here which is just gonna say self dot
error message it doesn't have to be
anything too fancy for this example I'm
going to have a separate property here
just like have a success message I'm
gonna have a error message right so I'm
going to say was
there was an error please try again and
I'm gonna make sure that this there's
also set to undefined if the user were
to switch between different views now I
have this defined over here I need to
show that just like I'd showed the
success message I need to show the error
message so I'm gonna have another alert
here and this is alert danger well
that's the name given to this alert by
the bootstrap class and error message
show over here now I'm going to start
the JSON server one more time so that I
can load the page refresh click on a
user click on it and now before I hit
save what I'm gonna do is kill the
server I'll go back click Save there you
go
it shows an error message so we let the
user know that something was wrong and
of course when I change to a different
user that goes away so it kind of
behaves the same way as a success
message does just that you can handle
errors by passing in a second argument
to the den function so when there is an
error this is the second argument is a
function that gets called when there is
a success successful scenario is the
first argument function that gets called
now this is simple enough but what's
important to note is that there is a
little bit of a weird thing going on
over here if you look at the service let
me notice here this service is what's
having the first 10 right so I do $1
HTTP but but and I have it then assigned
to it now when there is an error like
when I kill the server and there was an
error making that HTTP put request it
was basically this thing that fail it
was the line 18 right this dollar HTTP
does but this was what had an error but
if you look at the dot then here you see
there's just one argument there are no
two arguments here however there is a
dot then chain to it in the controller
and that has the second argument which
is the failure scenario so that's the
babies promises work at least an angular
what's gonna happen is let's say this
thing edit out right now the framework
says ok
to call the error scenario now is there
an error scenario in the immediate 10
well if there were a second argument
that would have executed but there's no
second argument here so what's gonna do
is it can actually carry over the error
and see if there is a then attach to
this which has the second argument well
turns out this has this as a second
argument so there is an error handler
over here so it's gonna call this so
basically the execution is gonna run
through all these different tents that
are chained to this promise right so is
a promise returning another promise to
thing of the promise because if you then
cause and if there is at any point of
time an error handler a second argument
to the dart then it is gonna find that
and execute that and if you have a bunch
of things and there is no error handler
there it is going to just ignore it
which is what we started out with so the
moral of the story is you can have these
error handlers anywhere in the then
chain and the promise chain and the
execution is going to find the first
then that the error handler which is the
second argument and it's going to
execute it and of course this is only
for the error case in the case of a
success scenario it's gonna execute all
the dents and all the success functions
that go along with it</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>