<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Angular 1 Services In-Depth 6 - Factory Service | Coder Coacher - Coaching Coders</title><meta content="Angular 1 Services In-Depth 6 - Factory Service - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Java-Brains/">Java Brains</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Angular 1 Services In-Depth 6 - Factory Service</b></h2><h5 class="post__date">2016-10-21</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/B99u_Lf9-aU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">okay so far we have looked at two api's
value and constant which are more or
less the same and they let you share
primitives the reducer objects Dilla to
share functions so that'll be done we
have everything we need right these are
the common JavaScript constructs and you
have everything you need to share all
the common JavaScript constructs are we
done well there is a lot you can do with
value at constants but there are some
advanced API so you might sometimes need
so here is the limitation of having a
value declaration and this applies to
constants as well you notice here that
the value which is the second argument
has to be in line so here you see this
is an object that has to be in line here
is a function that has to be in line
yeah earlier we had a string that
happened to be in line your first
argument is your name
the second argument has to be the value
itself what if you have a scenario where
you don't have the value right away
you need to execute some function to
prepare the object that is set as the
value right so let's say this is not
something that's available in line
instead I need to execute some logic to
prepare this object and then return it
and have that be the value no the the
service right you can do that by using
this new API called the factory so we've
seen the value of service and we've seen
the constant service so there is this 30
API for creating these shared data and
that's the factory service so how does
the factory service work so you say app
dot factory and again you create you
give it a name let's say I call it app
data factory service the name really
doesn't matter now the second argument
here is not the object itself in line
it's not the value itself in line the
second argument is going to be a
function that when executed is going to
return the value that you need to set
over here right so let's say you want to
set the value as sai-dono
hello this is the string hello this
works if this is value it just takes the
second argument and then sets it do this
but if
a factory you don't specify the value
here you specify a function that is
going to return the value that you need
so in this case it would be function and
then return
hello all right so this is the factory
way of doing things and compared to this
this seems to be like a roundabout way
isn't it instead of having a value
directly you give a function which
returns the value but the advantage of
this approach is you can write code here
to do anything you want right you can
have a lot of complex logic over here
which executes whatever you need and
then at the end you return a prepared
object and that prepared object is going
to be this service all right it can get
really powerful I'm gonna do just that
I'm going to say return hello from
factory service and now I can inject
this over here I'm just going to do this
in the header I don't need this in the
footer and I'm going to do I'm going to
remove this don't need it I'm going to
say console dot log I'm going to print
the value that I inject it what's the
value that I injected AppData factory
service the value is not the function
the value is the return of this function
call which will be hello from factory
service so what angular is going to do
is when it sees this factory declaration
it's going to expect a second argument
to be a function it's going to call this
function it's going to see what it
returns that return value whatever you
return is going to get set as the
service value and AB data factory
service when it's injected is going to
be this return value right now I have
that printed over here I'm going to
reload the page and here you see the
hello from factory service gets returned
so that is the value of the service and
again like with the other stuff you can
return object itself so I'm going to
return this object
just going to be sorted done valuable
format to code a bit so this is the
factory factory takes in the second
argument which is a function that needs
to be executed for the value to be
returned and whatever that function
returns is going to get assigned as the
value here so now what I can do is over
here I'm going to remove this what I
need is AB data factory service dot name
Brad then AB data service name I will
put the same value at this point of time
refresh the page and still see contact
so this is the factory service so I
talked about one advantage of a factory
service being you can have a function to
prepare the value versus the value
service where you have to put the value
here well if you think about it it's not
exactly a difference you can actually
have a function that returns this object
in have it executed rather than
providing the function itself let me
tell you what I mean by that so let me
take this function out and create it
over here say function prepare app
config alright it's a simple function
which does the stuff pretty much what we
have done here right it's a simple
function over here now what I can do
here in the app that factory is put that
function instead of having a function in
line and it's going to work
right I'm passing in a function just
like I did before rather than have it be
in line number of rinsing a function
object but now here's the thing this can
kind of work in the value two so rather
than have it be an in line object I can
actually call this function now when I
call this function what's gonna happen
JavaScript interpreter is going to
execute this function get the return
value and that's what's the second
argument right it's not angular it's
just be our JavaScript if any function
argument is actually another function
call it's going to execute that function
get that object and assign it so in a in
that sense both AB dot value and AB dot
factory can accommodate of function
executions we can have this kind of
complicated logic get executed and the
return value assigned it's just that in
the factory example you're passing the
function itself in the value case you're
executing the function so the return
value is what gets assigned this is the
difference right so well then can we
just do with value why do we even need a
factory the difference and the reason
why we need the factory is this now
let's take for example I'm going to
change this up value I'm going to create
a new value service over here so you
create AB value I'm going to call this
app name service and this is going to be
a string which is contact that so what
I'm going to do is have a separate value
for the application name it's going to
be a constant more or less but I just
want to have it as a value but it gets
injected in multiple other places I want
to de couple this from the app config AB
data factory service all right so I have
this separate and now when I'm creating
this AB data factory service I want this
service to use the app name service and
give the app name alone right I don't
want the app name to be over here
I want essentially one service to use
another service ok well how can we do
this turns out we can angular supports
dependency injection of the service
inside another service we've done
dependency injection of a service inside
a controller right we pass it as an
argument so we can actually pass one
service into another service so here I
have the app data factory service which
is going to be this function this
function let's say depends on the app
name service well then I can actually
inject app name service in do you have
data factory service function all right
so what angular is going to do this
going to initialize the app name service
first it's going to pass that as an
argument to this app data factory
service execution and then once it
executes it's going to take the return
value so now what we can do is I can
pick the
while you were here and then use that
and start coding the name of the app all
right so what I'm doing is creating one
service for the value and creating one
more service for the factory let me
actually get rid of all these things we
don't need this now factory service
which is another function so this
function is sticking in as an argument
another service all right so this is
thanks to the factory API we cannot do
this with value because angular doesn't
know that that is a function it's just
the JavaScript interpreter that executes
the function however in the case of a
factory service angular is going to
execute this so angular knows that if
you have something added as a dependency
it's going to find that service first
and inject it for you so you can have
services depending on other services
that's the magic of the factory function
you cannot do that with value all right
so now the destined place I'm going to
take just the service and inject it into
put the header controller and photo
controller and now I'm going to assign
the name to it of course here what I
could have done is assigned the app name
directly but I want to go through the
factory service so it's basically the
app name service injected into the
factory service the factory service is
injected into the controller so you can
have that kind of a hierarchy because
just like the controller being a
function that I neither execute the
factory service argument is also going
to be a function that I can get our
execute so it can do the dependency
injection refresh the page and nothing
has changed let me I can let me change
the name of the app name service value
refresh this now you see this gets
updated but this didn't get updated
let's see what's going on there at the
footer seems to have an issue well with
looking at the wrong element here I
removed that so angular was not able to
find it so I need to use the service
alright let's test this again they go it
works it's using the new value that I
updated
in the value service so that's the
advantage of a factory service it
provides you with a function that lets
you construct the object and the side
benefit of having a function is you can
pass in arguments which are other
services and angular is no dependency
inject those into the function and you
can use that for your object
construction all you need to do is when
your function is done you need to return
the object whatever it is that you want
to associate with your service manglers
when associated and dependency inject
for whatever needs it in the future</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>