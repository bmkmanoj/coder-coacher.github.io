<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Spring Tutorial 22 - Using MessageSource To Get Text From Property Files | Coder Coacher - Coaching Coders</title><meta content="Spring Tutorial 22 - Using MessageSource To Get Text From Property Files - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Java-Brains/">Java Brains</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Spring Tutorial 22 - Using MessageSource To Get Text From Property Files</b></h2><h5 class="post__date">2011-07-11</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/cUqquQDZR-c" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hi and welcome to this tutorial in the
beginning of the spring tutorials I
introduced you to the bean factory which
was a spring object that let us create
spring beans and later we replaced it
with the application context but I which
is actually doing the job of the bean
factory but I told you that it had some
additional functionalities so in this
tutorial we're going to look at one such
additional functionality that the
application context object provides over
a bean factory object and this is the
support for messaging and
internationalization so if you have
messages that need to be displayed in
different places in your application UI
you would not want to have those
messages inside the core be a Java class
or a JSP we want to take all those
messages out and keep them in a common
properties file and then you would want
to refer to those texts inside the
properties file and then print out those
texts instead of having the text itself
inside your source code so spring
provides support for that you can have a
file which consolidates all these key
and value pairs and then you specify the
key itself in your application and refer
to the text which is assigned to that
key in the properties file so we're
going to have a look at how we can we
can use this support for messaging and
we'll see how spring helps us in making
this a bit easier so first what I'll do
is let me create a simple properties
file just say new file I'll call this my
messages dot properties and click finish
now here if I click on the source tab
you can see that it's obviously an empty
file so I can add key value pairs here
to store all my text messages so let me
have a greeting message equals hello so
I will save this file
so I have my message hello saved inside
a properties file and I've given it a
key of greeting so I want to use this
key value pair and print the hello
message in my program so let's say in my
drawing after Java after printing the
shape I want to print a greeting over
here okay so now the first thing that we
need to do in order to have this
messaging support enabled is to have a
message source being defined in my
application and the way to define this
is just like any other bean I would
define this in the spring XML and we'll
have a look at what the class for that
is but let me start by defining the bean
first bean I'll give the ID as message
source and the class for this is the
classes org dot Spring Framework dot
context dot support so if you have a
look the context is where the
application context related stuff come
in so that's where this classes there so
in the support there is this message
source implementation called
resourcebundle message source so
responded message source so the
resourcebundle message source is a class
that spring provides up to the box and
this message source helps us pick
messages out of property files so since
we are using a property file this is
what we need to use here okay so now
this bean that we have declared here has
a name message source and I've defined
and after the box class offspring to use
and this is what we're going to use to
pick messages out here and this needs a
configuration so it you need to tell
this
particular class where the property file
is so in a sense we need to tell this
class what the name of our property file
is so that's what I'm going to do here
look at a property tag and the name of
the property is base names and what I
need to do here is I need to provide a
list of all the property files that I
have where I've stored all the messages
so obviously we can have more than one
so if you have multiple property files
you'll have to give the names of all of
those property files over here and this
is what this message shows is going to
refer to when it needs to pull up
messages okay so I need to provide a
list and the value I just need to give
the name I don't have to give the DRI
properties extension by default it looks
for properties from the dart property
files in the classpath so of a message
source beam that knows what property
file to read so now what we'll do is
we'll add the code here to print out the
greeting message the way I do this is by
calling a method of the context itself
which is our application context so the
context object has a method called get
message and there are actually different
signatures for this get message but I'm
going to use a signature which takes in
four parameters the first parameter that
I'm going to pass here this the name of
the property that I need three so this
happens to be greeting in our case so
this is what will be the first parameter
here so I'm going to pass the string
greeting
the second parameter here is a string of
objects in case my message sticks in
some parameters they'll have a look at
parameter the parameter messages a bit
later but for now since I do not have
any parameters in my in my message here
they're just a simple text so I will
pass null here we're going to look at
parameters in just a minute okay so
these are the first two parameters a
third parameter is the default message
that it needs to return in case it does
not find a message that we are looking
for so I will call this default greeting
and this default greeting is used when
we have a key here that is not available
in the properties file and it also has
some other behavior like if you are
looking at a local specific string
that's again something that we're going
to look at in just a minute but if the
whole point of this default string is
that if you do not find a value for this
key you have to print this so this is
what we tell spring so this is the third
parameter and the fourth parameter is
the local for which we need to get the
message I'm going to use null for this
one as well and we're going to look at
locate also in a minute but this is what
gets the message hello and it returns
that message so what I'll do for now is
I'll just do a system dot out dot
println and I'll print the message that
this returns save this if we run this
yes we get the hello message so this is
the result of this context dot get
message so we have told the context that
first of all we need to use the resource
bundle message source which means that
spring is actually looking at property
files
and we give the property file name and
then in our application we use a get
message method off the application
context to get the message for the
greeting key so this is one of the ways
in which you can get the messages but
most of the times the normal usage of
the messaging feature of spring is when
you want to use it in a in a beam so
let's say I have the circle beam and I
want to print messages here say instead
of this draw I want to print out a
message so I want to have all the static
text over here in the message properties
and I'm going to use that over here so
we can do it using the same method call
we can make this application context
aware that like I've showed you earlier
and you can do a context Target message
but there is a better way so what we can
do is in our spring dot XML we have
defined the beam coil message source so
this message source also has you know it
implements an interface called message
source and that has this method what we
see here okay so we have a get message
so this get message method is also
available in this beam inside this class
so what we need to do is as long as we
have a member variable of message source
inside this circle we can do dependency
injection and we can get this particular
beam this particular beam inside the
circle class and we can do a get message
for that beam let me do let me write the
code so that it becomes clear so what I
will do is I will use a message source
member variable inside the circle so I
will declare a private message source
message source so so the message source
is available in arc Spring Framework
context so the message source is the
interface that is implemented by various
different
patience so this get message method that
you've seen here is actually a method of
that interface since the application
context implements that interface you
can use a get message there and even
this particular beam over here you know
the responded message source also
implements the message source interface
so we can either use the application
context and call the get message of that
object to get the message or we can get
an instance of this beam which again
implements the message source and we can
call the same method for this beam so
what we do is we define a member
variable of type message source now let
me generate the setter here we need the
setters okay so I however have a setter
here which has a message source for the
it's a setter for the message source now
the reason why I have declared this
member variable and I've generated the
getters and setters is because I want
this beam an instance of this beam to be
made available here now having a member
variable is just one step the first step
the second step is to actually do the
dependency injection now I can do a
dependency injection by type because
there is only one beam in this entire
XML of type resourcebundle message
source and of course there's only one
beam of type message source itself so
what I will do is I will do a water wire
I will do this on the property itself
I'll see auto wire then it's going to
auto wire by type import Auto wire and
that's it so now I have an instance of
this I'm an instance of this message
source inside my circle class okay so
now what I need to do is use this
message source to get the message so I
will do this in the draw method since
I'm going to call the draw method anyway
so after these two statements I will do
a system to our out
dot println and over here what I'm going
to do is I'm going to do a this dart
message source dot right here you have a
get message method so I will use the
same same signature that I have used
over here because again it's operating
on the same property file so it has
access to the same text this this here
so again I'm going to pass the key name
which is creating no parameters default
value in case the value for that key is
not found and then the locale I'm going
to print this out so save this I'm going
to remove this line here I don't want
the screeding to be printed in the main
I wanted to be printed in the draw
method so this is where I'm printing
this hello greeting so if you run this
the shaped or draw should print out that
greeting so let's run this well here you
go it prints out the greeting but this
time it's not from the main application
it's from the draw method of a bean so
this is a simple way to have access to
the message source in all your bean so
all you need to do is have a member
variable of message source and then do
dependency injection by type using water
wire and then in the spring XML you
would have defined the message source
and given it a property file name so
it's going to pick that up and give you
whatever text you need depending on the
key that you pass ok so now that I've
done this what I'm going to do next is I
want to use this message source to print
out these two messages so I'm doing a
system dot out dot println in my draw
and I have hard-coded text over here so
I want to use the message source to
print this out so what I will do is
first let's take this message drawing
circle needs to be moved to the messages
start properties so I will have a
drawing draw circle equals to the sister
message that I need to display okay so
here I can remove this over here and
then instead I will use the this start
message source start get message and I
will get the message that I've just
added into the property file fix this
here and the message here is drawing dot
circle
you
I've changed the default message as well
but that's not really required here we
have the message over here already so
now this is a replacement for our
previous system dot out dot println
which actually had the hard-coded text
so let's run this once again to make
sure it's picking it up yes it is
picking it up and you can see that as a
drawing circle okay so this is fine but
now the question is how are we going to
replace this so here we are displaying a
text for the point and then we have
added these get X and get Y methods over
here so what we are doing is we are
interleaving the static text with the
actual value of these objects so this is
again something that we can do using
message so what I'll do is let me just
copy this text over here I'll call this
drawing to point equals base thus now
here what I can do is I can add
placeholders for arguments so the first
argument will be 0 and curly braces and
there's no need to get all the codes
over here the second argument would be 1
and curly braces so this is what would
get substituted over here but
essentially what I'm doing is I'm
defining the message text so the static
part are going to be standard text and
then the dynamic part are going to be
the arguments so I have two arguments
over here 0 and 1 in curly braces so I
will save this and here what I need to
do now is
copy this again so I will be calling a
drawing dot point and then the second
argument here I told you is a list of
arguments it's an array of arguments so
since I have two documents that need to
be substituted over here I need to
create a new array an object array by
the way it takes object parameters so I
need to create an object array which has
two elements which are the two values
and I need to pass over here so I will
say new object and I will pass the
points Center dot get X and Center
target why okay so I'm creating a new
object array and I'm passing these two
parameters and we'll call this the
default point message and we save and
run this well there you go it's printed
this
I think it's printing it twice because I
didn't remove the earlier one yeah I
haven't removed the earlier one so let's
comment this out and run this again well
there you see it's printed out the same
message and this time it's actually
getting it from the properties file and
what it's also doing is it's doing a
parameter substitution over here in the
message so I have defined two parameters
two arguments in the message and I'm
substituting those values by passing an
array of objects and if you have more
argument you need to pass multiple
elements in this array but what it's
going to do is it's going to substitute
the values inside this array into this
message and then it's going to get the
completed message
that's going to be the result of this
case get message call so this is a
high-level look at message source
interface and how we can use this
message source interface to get messages
out of property files and this is
something very handy if you want to do
internationalization as well what you
can do is if you have multiple locales
that you need to supply messages for
then probably the message property file
will have to rename this refactor rename
so I can call this underscore en for
English and I can supply different
locales over here and then I can pass
the corresponding locale as the last
parameter over here and then the
corresponding message is picked up from
the right properties file spring is
going to do all that for you you just
have to pass the key and then the right
message gets picked up I'm not going to
cover located here in the interest of
time but this is something that you can
explore and the spring online
documentation also has an example that
covers this located feature</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>