<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Thinking in Angular1 25 - Nested Controllers and Scope Hierarchy | Coder Coacher - Coaching Coders</title><meta content="Thinking in Angular1 25 - Nested Controllers and Scope Hierarchy - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Java-Brains/">Java Brains</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Thinking in Angular1 25 - Nested Controllers and Scope Hierarchy</b></h2><h5 class="post__date">2016-09-13</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/W8Z2lo8hodc" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so controllers can be nested to talk
about why we want to do this it's it's
fairly common to have multiple
controllers in a single angular
application you don't to have one giant
controller which contains all the logic
you want to break that down so you have
multiple controllers and it's fairly
common so when you do have multiple
controllers it's also common that you
have one controller inside another
controller and that still works angular
does support nested controllers but it
also introduces a new kind of problems
you know it's a different set of
headaches and I'll demonstrate what that
headache is in a bit then I'll show you
the solution for having managing those
nested controllers so I'm going to start
by taking the next red extreme and so I
created a new directory here called
nested controllers so this is the
standard index.html that you already
familiar with it has ng-app as a nested
controllers and I have two scripts one
is angular one is app an app dot GS I
have angular module nested controllers
right it's a simple angular application
now I can refresh the page and it's
essentially an empty HTML doesn't really
do anything alright so now what I'm
going to do is I'm going to create a
couple of controllers in my ABS our GS
so I'm going to have a controller one
which is pointing to a controller one
function controller - we just want you
to a controller to function when I have
a couple of controller functions over
here ctrl one and ctrl - they have the
dollar scope injected to them alright so
what I'm going to do here is add a
property on top of dollar scope and see
dollars scope dot test prop equals from
ctrl one and I'm going to have same
thing but for a message from ctrl - ok
now I'm going to create two devs over
here just so that I can have two ng
controllers right I have a do ng
controller ctrl one here two as well all
right so now I must tell you that there
is one thing about scopes that have been
lying to you all along
but I wouldn't say lie but there is a
certain piece of information that I
haven't revealed yet to facilitate your
understanding of the concept of
controllers and basically what I've been
telling you is that there is this scope
object which is the scope there is a
scope object in angular which is kind of
like the shared space where all the
variables are being maintained the terms
are there's not just one scope object
turns out that every time you have a
controller
every time you using an NG controller
angular is actually creating a new scope
object so what's actually happening here
is that the controller's scope
controller one scope is different from
controller to scope whenever there is a
controller angular says okay I need to
create a new scope object it creates a
new object injects a controller to again
it's a different controller so there's a
new scope object it creates the object
and injects it so there is no one scope
object there are multiple scope objects
there is a new scope object for every
controller so in order to demonstrate
this what I'm going to do is I'm going
to have this test drop we printed inside
these controllers so if I were to say
paragraph ng bind equals test bra I'm
going to copy the same thing over here
and if I were to refresh you see here I
get two different values there is this
from controller one there is this from
controller - so essentially we are
looking at two different properties of
two entirely different objects so this
is the first scope guess prop this is
the second scope dot s prop alright so
that's how this works every time you
create an NG controller you're
essentially asking angular to create a
new scope and so when you have your
controller in a sinking angular injects
scope for me by using this dollar scope
in the first controller angular injects
the scope that I created for
controller one second controller angular
injects the scope that are created for a
controller - so this dollar scope is a
different object compared to this dollar
scope alright so I hope that makes sense
this is something that confuses a lot of
people who are new to angular then you
have no controllers in your application
right I mean you did not have this let's
say to move this stuff and you use
something like an NG in it let's say I
have Adam NG in it equals test prop
equals stand for example right so I'm
just creating a value and there are no
ng controllers this actually work too
and I said that there is the scope
object where this is getting populated
now what is the scope object when you
don't have controllers because I told
you that a controller is what causes a
scope object to be created here there is
no controller so is there no scope
object well even if there are no control
is there is a scope object and that's
the global scope object whenever you
have an NG app you have a scope that
comes with it and that's called the root
scope okay that's like the core basic
scope object that you get out of the box
when you have an ng application what you
do get like by adding these controllers
is you get separate scope objects for
each controller which is kind of handy
because you get to limit the data to
that controller right so let's say you
have this section of HTML then you need
to execute some business logic and show
some value you have another section of
this HTML where you need to execute
different business logic and show some
different values does it make sense to
put all the data into one object to be
very in elegant so having these separate
objects actually make sense it actually
makes things a little bit easier right
you have one section where you have your
own controller and it has its own model
which is the scope for that controller
you have another section with its own
controller and model and view it makes
things easier to segregate the challenge
however is when you are not having these
as separate sections and
then actually nested that's where things
get a little bit tricky now let's say I
take this thing over here and put this
inside controller too so I have
controller
sorry controller 2 inside controller 1
right so this is ng controller
controller 1 that's this block all right
inside this controller 1 I have another
damn just controller 2 now what would
get displayed can you guess so it still
says from controller 1 from controller -
it seems to work like it did before now
let me also make this other change I'm
going to go to the apt RGS and I'm going
to remove this line right I don't want
to set the test prop property off the
controller one's scope now what's going
to get displayed well this seems to work
fine till since you've removed this test
prop the first ng bind would not have
any value right this is not going to
show up other word the second ng bind is
going to have the test bra from
controller 2 so this seems pretty
obvious - so I'm going to put this black
back so that we have them both here now
the tricky part is if I remove this line
if I remove the initialization for the
second controller remember the second
controller is inside the first
controller if I were to remove this well
guess what happens it actually says from
controller 1 so what's actually
happening here is then angular was not
able to find the value test prop in the
inner controller it's actually looking
up to its parent since these controllers
are nested it actually forms a scope
hierarchy so the first controller the
outer controller has its own scope the
inner controller has its own scope of
course and what's happening over here is
the scope hierarchy the inner controller
is a child of the outer controller more
accurately the inner controllers scope
is a child of the outer controllers
scope if the inner controller is
accessing a value on the scope a
property on the scope which exists it's
going to get it but if whatever is the
inner controller is accessing is not
available in the inner scope it actually
goes to the parent scope here the parent
is the outer controller with its outer
scope object so it's going to look data
and if that is available then it's going
to get that right so that's what's
happening here is actually doing a
parent lookup since we removed the inner
controllers s prop it's actually looking
up the parent and the parent has the
from controller 1 so it's going to take
that and show it in the you know
controller - alright so this is actually
a little bit confusing because once you
have this whole nested structure right
we have three controllers or four
controllers which are nested one inside
another and you're looking up a property
on a scope it's very hard to figure out
where it's looking it up from is it
looking it up from the controller scope
or maybe some parent scope well you
never know what in fact also happens is
if you're looking up something from the
inner controller it doesn't find it it
only looks at the outer controller right
let's say it doesn't find it even there
it actually looks at the root scope okay
that's the like the last step where it
checks it keeps going up the scroll
hierarchy and the root of that hierarchy
is the root scope and if it finds it in
the root scope it's gonna get that if it
doesn't find it only then does it not
show anything right so if this is too
confusing don't worry too much about it
just realize that when you have nested
controllers you have nested scopes you
have a scope hierarchy and whenever you
look up something using ng bind it's not
just looking at that scope it's actually
going to multiple levels which keep it
keeps going to up the scope hierarchy to
see if there is any scope which has that
property when I started this video I
said that this is a headache and I
wasn't kidding when you have complex
applications with multiple scopes and
multiple controllers it's going to be a
pain to figure out where the value is
coming from so you can have some
something like an NG bind or an eye
either expression somewhere in the
middle of
your code imagine like a 500 line long
HTML code right you have this ng bind
over here which putting up a property
and you open your HTML and you see that
property being displayed it's there's no
way you can say for sure which scope
object it's pulling the data from there
are some nice plugins for browsers which
display the scope hierarchy but it is
actually painful so in order to solve
this problem
angular introduced a new feature called
controller as and that's their
recommended way of creating these
multiple controllers especially if you
have a hierarchy the controller as
syntax is very popular and now that
people don't use this kind of syntax
anymore right they don't use the
ng-controller equals controller main
syntax I'm going to demonstrate what
that controller I syntax is in the next
video
but it's safe enough to say that this
kind of syntax is not recommended so
since this is not recommended you don't
have to worry too much about this kind
of a hierarchical lookup you shouldn't
really be writing code which makes it
necessary for you to get a debug the
scope hierarchy so see you in the next
video where I show you a better way to
write your controllers</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>