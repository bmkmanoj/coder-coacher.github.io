<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Spring Tutorial 27 - Writing Our First Aspect Part 2 | Coder Coacher - Coaching Coders</title><meta content="Spring Tutorial 27 - Writing Our First Aspect Part 2 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Java-Brains/">Java Brains</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Spring Tutorial 27 - Writing Our First Aspect Part 2</b></h2><h5 class="post__date">2011-08-21</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/4-z-YsRfSF0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hi and welcome back in the previous
tutorial we set up this project spring
AOP which does not do any a would be yet
it does the basic spring framework
initialization we have ventral eyes the
application context over here and we're
doing a get beam and the beam that we're
getting has a dependency injection
that's happening here so we have the
shape service which we are getting by
using the get beam and this has a couple
of member variables which are being
injected to the service in our spring
XML so you have the triangle and the
circle being injected to shape service
through auto wire by name so this is
basic core spring so we will add AOP
related code now and the use case that
we were discussing in the earlier
tutorial is that we want to have some
kind of a logging method to run using
aspect-oriented configuration and we
want a method that prints a simple log
message to the console and we want that
method to be called then this particular
method the get name off the circle
object this call so every time I get
name of circle is called we need that
method to be printed so the first thing
we need to do in order to have an aspect
which you know which you're going to
configure the first thing we need to do
is to write that aspect so I'm going to
create a new class because we know that
the aspect is just a class with
additional annotation so I will create a
new Java class and I'll call this
logging aspect and I'll place this
inside the package aspect and click
finish okay so now inside this logging
aspect I can write as many methods as I
want
note that this is still a class it's not
an aspect yet even though we're calling
it as an aspect I'll write the logging
method here so I'll call this public
why'd locking advice and I will do a
print off I'll just print that the
advice is run and the gate mentor to
Scott so this is a method in my aspect
now why am i calling this as advice
advice is standard hubie terminology for
this kind of a cross getting concerned
that we have isolated in two aspects so
an aspect can contain a number of
advisors so these advice methods can be
configured to run on a particular method
run so that's the terminology that I'm
using here so this is a logging method
which is inside an aspect and this is
called as an advice because this is the
standard eup name for this so now that I
have defined a method over here now
let's convert this class into an aspect
now the way to convert a standard class
into an aspect this is by using an
annotation at aspect so as simple as
that
now ad aspect is I need to import this
from aspectj lying annotation now once I
do that this class becomes an aspect and
the methods of this class become advice
and you can apply this advice any advice
in this aspect you can apply it to any
of the other methods inside your spring
container now I have the logging aspect
here this is fine but I will have to
apply this to a method now I'll have to
tell spring that this method has to run
whenever this particular method has to
run so the way to do that is again
through another annotation now I need to
annotate this method
and I need to tell this that this has to
run when this method is called so the
way to do that is by using another
annotation there are different
annotations that we can use in order to
make a method as an advice so what we
are telling spring is that this has to
run on call of something else so there
are different reason which we can do
that the example that I'm going to take
is I want this method to get executed
before the get name method executes so
the way to do that the annotation that
we need to use in order to configure a
method and advise method to run before
any of our method runs is the at before
annotation so at before this at standard
AOP annotation input this this again
from our door aspect chain this is a
standard UV annotation that we can use
to make our advice methods run before
our target methods now what I need to
pass as a parameter do this before
annotation is the place where this you
know this method has to run so before
what that is the parameter that we need
to pass over here so what I'm going to
say is I'm going to ask this locking
advice to run before the execution off a
method so before a target method runs I
want this method to get executed so
before the execution of a particular
method I want logging advice to get
executed now before the execution of
what method so that is something that we
need to specify now what I'll do is I'll
copy this complete signature over here
and I'll paste this over here okay so
now what this particular line says is I
want this logging advice to run before
the execution of a public string get me
that's a
simple as that a logging advice will run
before the execution of this particular
method signature so whenever the spring
container sees an execution of a public
string get name it's going to execute
this logging advice before it and then
it's going to proceed with the execution
off this so this is all it takes to make
this logging advice run before a public
string get me so it's as simple as that
now our aspect is ready so now we have
defined a logging aspect as an aspect by
using the add aspect annotation and we
have an advice method that we have
configured by using the before
annotation and we have also passed a
parameter which tells the spring
container what is the method that this
needs to run before off so on before the
execution of this method run this
logging advice as simple as that now I
will save this and we are done with the
logging aspect now the only thing that's
left to do is that we need to tell
spring that we have aspect oriented
programming in place there is the
special annotation that we have to use
and you probably have guessed it by now
it's AOP aspect G Auto proxy so this you
remember is the key string that we used
for searching for this particular beam
tag in the earlier tutorial so this is
actually the tag that we are interested
in and this is the tag for which we
imported this particular AUP namespace
and the schema location this is what
tells the spring container that hey we
using aspect oriented programming so if
you see any aspects then make sure that
these kind of advice methods are
executed has configured now in order for
spring to see that this is an aspect as
with the post processors or any other
beans we'll have to have a bean
definition here so have a bean
definition for our logging aspect
and the classes I think packages aspect
yeah logging aspect so this beam
definition has to be there for all the
aspects you can either have it inside
the spring XML or you can define
annotations if you want you can have a
component annotation here so spring
needs to know that this is a beam
configured in the container and only
then it's going to look for all the
aspect agz inside the beans that are
configured and then if it finds an
aspect it's going to take care of
configuring it so that you know whenever
the target methods that you've defined
here runs these advise methods also run
so now we have completed our aspect
definition we have the aspect class here
this marking it is an aspect and then
the advise method telling it what to do
and thus tag telling it when to do it
and of course this parameter tells the
container what is the method for which
this advice s to run now we can run the
say P main again again just to refresh
we have shape service and then using the
shape service we're getting the circle
beam and then we're doing a get name for
that beam and this kid name is what we
are watching out for in the aspect so
for a get name call we want this aspect
the advice of this aspect to get
executed so now let's run this and see
what happens
there you go so the circle name is
getting is printed we have a getname
method that gets called and secondly
misprinted but note that before the
circle name is printed you see this
advice has been executed so this is this
method the logging advice so even though
we have not explicitly called the advice
we see that the advice is executed and
that's because this is configured as an
advise using aspect oriented program
now there is a catch here so this is
this very simple aspect that we have
defined we have a lot of ways in which
we can configure that we're going to
look at that in the subsequent tutorials
but I like to point out one catch over
here notice this name public string get
me
we have no mention of the circle class
over here we have just mentioned that
whenever a public string get name is
called run this advice now the thing to
point out here is that look at the
triangle class even this triangle class
has a public string get name so now what
happens if I call Oh triangle tell me
what if I do a get triangle that get
name now what happens if I on this it's
calling a triangle get name but then the
advice is running even for the triangle
because we have not asked this logging
advice to be specific for only execution
of a get name of a circle class we've
said you know run this before the
execution of a public string get name no
matter which class it is in so it
obviously runs for triangle if you have
a square shape or any other class
actually which has a public string get
name this advice is going to run so
we're going to look at ways in which we
can configure this particular string so
that we can actually tell the before
annotation exactly which class in which
method we are looking at so we're going
to look at that in the next tutorial and
of course a few other ways in which we
can configure this particular advice</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>