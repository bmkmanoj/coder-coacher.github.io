<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>JSPs and Servlets Tutorial 08 - Request, Session and Context Part 1 | Coder Coacher - Coaching Coders</title><meta content="JSPs and Servlets Tutorial 08 - Request, Session and Context Part 1 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Java-Brains/">Java Brains</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>JSPs and Servlets Tutorial 08 - Request, Session and Context Part 1</b></h2><h5 class="post__date">2011-05-03</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/GbvuAIhLUZU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">in this tutorial we're going to talk
about scopes look at some of the
important objects that we have used in
our servlet example and we'll try to
understand the Scopes of those objects
now here's a snippet of our servlet that
we wrote in our earlier tutorials it's a
very simple servlet it just has a do get
method and it's taking a request object
and response object there is some code
inside to read something out of the
response I'm in the request object and
then print to the response object now
what are the important objects that we
see here of course the request and the
response we just saw this and then
another object as the servlet itself we
do not see any static method so this
servlet class itself has to be
instantiated as an object for this
Duquette method to be called so we have
the request and the response objects and
the servlet object itself now when when
are these created and when are these
destroyed before we go to the venn the
another question we need to answer is
who creates them and who destroys them
the answer is Tomcat we know that the
web application is deployed in the
Tomcat container so the servlet runs
inside the Tomcat container itself so
the Tomcat container takes care of
initializing the servlet it takes care
of creating objects of the servlet and
then it also takes care of creating
those requests and response objects we
saw earlier so another point to note
here is that every class that we use
that we have not explicitly written as
provided by Tomcat when I say every of
course there are some I mean lot of
classes that you know libraries that we
use especially the Java EE libraries but
then the classes that we saw earlier the
request and the response they are
actually Tomcats implementations so they
are the httpservletrequest and the
httpservletresponse
we saw this diagram in our earlier
tutorial when the browser makes a hash
ttp request there are these two objects
generated a request object and a
response object the request object
contains data about the request that was
initiated by the browser and the
response object is a blank object it's a
clean slate that is generated by Tomcat
and both these objects are passed to the
to the servlet inside the web
application so the request object isn't
required by the servlet in order to
understand what exactly is requested by
the browser it will have details about
the request itself the parameters and a
lot of other metadata related to the
request we'll look at that later but
this does contain all the information
required by the servlet in order to
understand what exactly the request is
and the response object as I said it's a
clean slate that is handed over to the
servlet for the servlet to write
whatever response it needs to write now
after executing this servlet this is the
second other code okay we have written
this servlet class and this object has
been initialized by Tomcat so this code
that we have written the do get method
runs and then it pulls data from the
request writes response to this response
object and then it completes execution
now the response object is sent as HTML
by Tomcat back to the browser so again
Tomcat creates the request in the
response now the thing to remember here
is say there is another browser over
here which makes a call to the same URL
so that the same servlet has to execute
then Tomcat creates a new request and a
new response object and say this browser
the first browser again creates you know
makes another request it makes a the
same request for the second time Tomcat
does not reuse the objects it creates a
new request and a new response object so
every
time there is a URL that's accessed the
request and response objects are created
and they're handed out to the Duquette
of the do post methods of that servlet
so requests and response objects are
created per axis but how about the
servlet object itself the solid object
is not created or access say you know
there are five browser five browser
windows or five different clients
accessing the urls that serve by the
same servlet that does not mean that
there are five different objects of the
servlet so what happens is that sublet
objects are reused they are not created
but access the way it works is they have
different sublet threads that I just
these requests there are not different
instances this is beneficial for four
reasons of you know using less resources
you know this instance the Tomcat
instance does not have to create new
objects and you know the benefits are
obviously you have hundreds and
thousands of users who are accessing the
same servlet that does not mean that
there is an equal number of sublet
objects itself for Duncan does is it
creates different threads and then each
of those threads address those different
users okay so the request object has
created every time for every request so
why is it not reused so I just like to
make a note about the HTTP protocol
being called as a stateless protocol
it's what stateless means is that HTTP
protocol does not expect that the user
and the data are remembered
say for example I make a request and I
pass a couple of parameters to my
through my request object there's no way
that the the application or the servlet
remembers those parameters when I make a
request the next time so how do we make
the servlet remember that
so here's a quick test to understand the
problem I have the sublet here I'm going
to run this I will be accessing the
sublet passing a parameter called new
user I hit enter I get a response
so the sublet actually picks up this
parameter and renders it now when I
remove this and access it again this
time it shows null because there is no
value here the earlier value that was
passed is now lost so this is happening
because the request object is created
again newly for a new accent okay so how
do we solve this problem now there are a
lot of use cases where you'd want to
remember users data like login screen
for example you have a login screen with
user enters user ID and password you
want to remember the user ID so that you
can customize the application experience
for that user and does not make sense to
ask for the user ID every time so in
order to save user data in the server
memory we need to use something called
as a session object so a session object
is something that Tomcat gives for us
and we can use that to save data values
at some point during the you know the
execution of a servlet and then retrieve
the same data in another point during
the execution of a servlet so just like
we have the request object here that
dumb cat has provided for us Tomcat also
provides this session object for us so
in order to access the session object we
have to use a method from the request
object you can use that method to
retrieve a session object from the
request object so let's do that here we
have a simple example where we take a
name parameter and the request every
time and then display that name back to
the user so what I'm going to do this
time is I will also save this into the
session object so that even though the
user does not enter a name parameter
later as long as he has entered it once
for the session object will have that
name and we can pull out that name out
of the session object so a session
object is is of type HTTP session so I
will declare an object of type HTTP
session equals request dot get session I
will use this method and I will get the
session object as I told you this is an
object which Tomcat provides for us now
let me do the import now I can put any
value into the session object here and
then this will remain across multiple
executions of this do gate so let me put
this name parameter here we've already
used a string variable to capture this
name I will place the string variable
the value of the string variable into a
session so what I'll do is I'll use
session dot set attribute now I need to
give a name for this I am placing this
value over here and I will have to
retrieve this later so I need to provide
a name that helps me retrieve this later
so I will call this saved username it is
a string and as a second parameter I can
place the actual object here I'm putting
a string here but I could as well put an
int or any other user-defined objects so
I'm going to use this username and I'm
going to pass this so that this username
is saved in the session now I will
change this so that we can differentiate
between the two
session dot kid attribute so I need to
pass the same string that I had used for
saving this attribute I need to pass
this value here so that it pulls up
whatever username was saved because if
this needs to be a string and I will
cast this as a string because session
dot get attribute returns an object as I
told you before we can save any object
here so the return type of this is an
object just as the value of the second
parameter here is an object you can pass
any object here to us at attribute now
this is fine but then I don't want the
name which is passed to be set here if
the name is null if the name is null I
want the session value to be pulled out
but if the name is not null I want that
to be displayed and also put into the
session so I'll do a quick null check
here if username is not empty and
username is not null need to fix the
case here so if it is if it has some
value only then put the session
so I take the session declaration out so
here's what I'm doing again to summarize
I'm taking the username parameter and
then I am also having a session object
here now if the username parameter is
not null then I am putting this into the
session otherwise I'm printing the
session valued username I'll save this
and let's see how this works now if I
call it just the simple servlet both of
them are null because I have not passed
any value now if I pass or username here
you check okay it's just name sorry
about that
okay now I'm passing the parameter name
now both the request and the session has
name now what I've done is I've taken
this request and I've taken this value
and I've put it into the session now
even if I do not pass this value again
it's going to pull this up from the
session and as you can see the request
parameter is null but the data are still
there in the session so this is very
handy if you want to use a particular
user data across different URL accesses
so that you know you don't you don't
have to pass this value every time as
long as the user has passed at once it
is there now I can change this if I want
I can pass another value here so that
goes and sits into the session object
now if I do not pass this value again so
that will be the new value that's there
in the session so the session value
remains as the last one that you've said
using this session dot set attribute so
you can you can have as many attributes
over here but every particular string
will have a corresponding object here
and the last value that you have the
last object that you've set for a
particular string will continue to be
there and you can retrieve that value
using the gate attribute as many times
as you want</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>