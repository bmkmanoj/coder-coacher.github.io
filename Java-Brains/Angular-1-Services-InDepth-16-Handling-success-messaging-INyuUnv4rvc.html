<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Angular 1 Services In-Depth 16 - Handling success messaging | Coder Coacher - Coaching Coders</title><meta content="Angular 1 Services In-Depth 16 - Handling success messaging - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Java-Brains/">Java Brains</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Angular 1 Services In-Depth 16 - Handling success messaging</b></h2><h5 class="post__date">2016-10-21</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/INyuUnv4rvc" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">in the previous tutorial we managed to
make a put request in order to update a
record update the users contact
information if we send the updated value
by making a put request and we managed
to update the data on the server we
don't really have some kind of a success
message to kind of let us know that
something has changed now if I were to
make a change here and just add a one
here and I click Save but the change has
happened but what I'd like to do is have
some kind of a message here which
actually shows that the data was
successfully saved and this message
should ideally show up only when the put
request was successfully completed now I
could have the JSON server which is
running the backend I could have that
beat down and this page wouldn't let us
know that the call failed right if you
would like to have some kind of
confirmation so you're gonna be doing
both the success message and a failure
message we're gonna handle put the
success and the error scenarios so how
do we handle the success scenario we
have the service here which makes the
call and then we have a den method which
prints the response so we are printing
something to the console what we'd like
to do is have a banner at the top here
which says record successfully updated
I'm just gonna create a banner HTML
element which is not really a big deal
but I'm gonna put that there so that
there is a place for our success message
message to show up so here's the column
for the contact information I'm gonna
have a div here and I'm gonna use the
bootstrap alert class alert and then
success and then I'm gonna hard code the
message now I can say user successfully
updated or let's say data successfully
updated and close the div now we are
gonna see a success message all the time
so this needs to be changed to show up
on the event that has been a successful
save to the database
all right now what we going to do is
have a message in the scope object which
is a success message for instance and
I'm gonna have that
be something that shows up over here I'm
gonna say ctrl dot success message all
right and I'm gonna have this be an NG
if so that this shows up only if there
is something like success message on the
scope and I'm gonna read for us
successfully the same to actually put
that message into here so I'm gonna say
this ng F is ctrl dot this message now
the message is gonna go of me but now
what we gonna do is we're gonna populate
the success message property then we
have successfully updated the record so
and that happens the message is gonna
pop up over here how do we make this
happen how do we populate the success
message property on the controller scope
then this is successful notice what
we're doing in the controller here we're
just calling this service method you're
not really bothered about what the
return is this could fail and we don't
care we just make a call and then we
forget about it
notice what we're doing in the service
we have it then here to do something
after the call happens but that
something just happens to be a console
that log you're not really doing
anything here now what we could do is
then the call happens this sense is an
async method this returns a promise
right
we could return the promise to the
controller and have the controller do it
then and inside that then take that
message and populate it just like we're
doing over here you're doing a contact
data service circuit contacts once we
get that we do it then and then do what
we mean right so for this to happen the
service needs to return the promise
object now in this case the save user
method needs to return the promise
object so that's what I'm gonna do I'm
just gonna see rIDOT now this is gonna
do HTTP dot put catch 1 return a promise
subject and on that you're gonna do it
then and print something to the console
just find this dot then again is a thing
so it's written another promise object
right that's what this method is going
to return it's going to return the
promise that was returned by this dot
then now I'm going to take that promise
object oh sure and I'm gonna call it
dart then on top of it I'm gonna say
function I don't really care about what
the data is I don't want to hold on to
it what this does is return the response
if I'm returning a response over here of
course I'm not returning anything so
you're not gonna get anything back
anyway so this is not gonna have any
arguments but what I am gonna do is I'm
gonna say this dad success message
equals whatever message I mean see Dow
successfully updated
now what's gonna happen well it's the
same is complete and successful the den
is gonna get called and the success
message property on the scope is gonna
get populated and that happens well we
have wired something up over here and
that is this alert there is an alert
which shows up only when there is
success message and it shows that sets
this message inside this alert class so
that you have that green bar thing that
displays the alert all right let's
refresh the page click on a user click
at it make a change click Save well
nothing happened see why and open the
console we are getting the object back
but we are not returning the message
let's see what I'm missing but there is
something that I'm missing I'm gonna
give you a minute to see if you can
identify it so if you want to give that
a shot
pause the video and see if you can find
what's going on alright what I'm missing
is I'm calling this using the distance
you remember I told you that when you're
using a dis reference inside a callback
you need to use the alias here the alias
itself you want to use this because in
this function that this reference is
different this is kinda Java scripts
behavior for this reference so I need to
call this reference that the alias when
I'm doing this insider call that
function because every callback function
we don't have a different this reference
all right let's refresh this one more
time close the console take a user again
edit and remove the 1 this time click
Save and you get a message
successfully updated cool so that was
the success message scenario now before
we wrap up this video there's one thing
that I want to do as you notice there is
a message over here now if I click on a
different users that message doesn't go
away it's always there
now I want the message to show up es
para and I click on a different user
don't want that to go away the reason it
still stays as big as it's in the
controller property now you see here
I've put the success message property in
there and then I select a different
contact I want the property to get
cleared now I can do one thing I can go
to the Select contact method and that's
where I can clear this message so I'm
going to do undefined which is basically
the beginning state of this property it
starts out being undefined so when the
Select contact method is called that is
when the element in the grid one of
these guys are clicked on then what I
want to do is clear the success message
let's refresh the page make sure this
works okay user edit it change the value
click Save now you have the message
there but when I click on a different
user that message goes away all right so
this is perfect in the next tutorial I'm
gonna handle the error case now what
happens when there is a problem in the
server it did say the server is down or
there is an error we want to show an
error message so how do we handle those
scenarios let's take a look at that in
the next tutorial</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>