<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Hibernate Tutorial 29 - Introduction to Criteria API | Coder Coacher - Coaching Coders</title><meta content="Hibernate Tutorial 29 - Introduction to Criteria API - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Java-Brains/">Java Brains</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Hibernate Tutorial 29 - Introduction to Criteria API</b></h2><h5 class="post__date">2011-06-07</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/4fVlAobgQGI" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hi and welcome they've now seen two ways
to pull up objects from databases using
hibernate the first way is by
configuring entity objects and then
doing a session or get of the entity
objects which returns the object and
also the associations the second way is
by using hibernate query language
writing queries and pulling up objects
depending on our requirements so the
first object is the most basic way where
you have limited control and you need to
specify the object or the entity that
you need to extract and the second way
has a slightly more you know it gives
you slightly more control in that you
can specify where clauses you can you
can have you can find green the you know
the constraints that you want to impose
on the data that you're pulling up from
the database so the second way is the
hibernate query language so now we're
going to look at the third way to
extract data from the database using
hibernate and I'll tell you some of the
problems of using hibernate query
language and how this third way
addresses those problems we look at the
first problem see we've seen the named
query in our previous tutorial so let's
let's remove the name native query okay
so we have this named query and the
named query is nothing but hibernate
query language and we've specifying all
the parameter placeholders here and then
we are substituting the parameters in
our application not generally no not
only this name query even if you're
using simple hql and we know running the
directly hql after point is not very
different from sequel you know you have
from you have where clauses you have
joins so all these are very similar to
sequel and in a real life scenario or
your life application most of the times
you have a complex query the
it's a SQL or HQ the query is going to
be fairly complex and as the query grows
it becomes bigger and bigger and becomes
tougher to maintain so you want to make
changes you will end up with a query
that goes for 15 20 lines and making a
change involves finding out exactly
where it is that you want to modify but
then making a modification there you
need to make sure you're taking care of
all the parentheses you'll have a whole
lot of practices query inside a query
and all that stuff so anybody who has
actually you know gone through the pain
of changing an existing huge query will
understand what I'm trying to say here
so yeah the basic point is that even
though we are using HPL which deals with
objects rather than tables and all that
that's all fine but the point is that
essentially it is still a query language
that follows the same format as sequel
and you have to first of all know sequel
in order to make changes and secondly as
the you know the parameters and the
constraints grow the query is going to
grow and become baked and becomes hard
to maintain and this is a problem that
we can address by looking at a different
way in which we can pull up data in
hibernate and this is by using a
criteria api that's something that we're
going to look at in this tutorial so
what does a criteria API look like so
here we have the session that gate query
and we are specifying the query hql
directly or we can specify the query
here and the core now what we are going
to do is instead of specifying any hql
query we are going to look at how to get
the records by specifying our criteria
using the criteria API so instead of the
query object I will create a criteria
object
session dot I will use a method called
create criteria now the session dot
create criteria takes a class as an
argument we will look at the string
later but let's consider this one
obsession to create criteria takes up
class as an argument so let's choose
this and here I have to specify the name
of the class this is user details dot
class okay so now I'll have to import
criteria from org dot
hibernate so I've imported that so what
i'm doing here is i'm telling hibernate
that i need to create a criteria and I'm
creating this criteria for the user
details dot class a criteria is more
like you know a ver class you know we
are specifying what is the criteria that
you need to be fulfilled for the data
that you are interested in so I can
specify conditions here and you know
that we look at that in a minute but
here what we are saying is that all the
conditions that I am going to apply
subsequently will apply for user details
so it knows what table it needs to apply
the where Clause to so now that I've
specified that I'm interested in the
user details and I need to say what
particular records I'm interested in so
what I do is I do a criteria dot there
is this add method ok so I use the add
method now here I can add any
restrictions that I want let's say I
want to pull up the user with the name
user 10 so this is a restriction that I
add to this criteria so I use
restrictions I need to create a new
restrictions as a restriction
. eq so what i'm saying is i'm creating
the equal restriction so i want to say
this is equal to something
so I'll just say user name because I
need to give this inside a string comma
use a 10 ok now I need to import
restrictions as well okay now that I've
created this restriction all I need to
do is instead of using a query dot list
I use criteria that lists criteria also
has a list method and it's going to
return the list of users so yeah let's
have a look at this one more time what
I'm doing here is I'm creating a
criteria object a criteria object is
kind of like a where clause where you
say these are the restrictions that I
need to impose now the criteria object
needs to know for which table or which
entity you are imposing the restrictions
so that's the first thing that you
mentioned the first thing you mention is
what object or what list of objects you
are looking at right now we are looking
at a user details object so I mention
the class here in my create criteria now
that I've established what entity I'm
looking at now I need to set the
criteria for that entity I need to say
get me only these records if you want
all the records you can skip this step
which is to add the restrictions but if
you need only a particular subset of
records then you need to add
restrictions and the way to add
restrictions is by using criteria dot
add in my criteria dot add I can add any
restriction that I want in this example
I'm adding a restriction of equals I
want a restriction where one of the
column names or one of the properties
a value that I am specifying so I want
user name to be equal to use a 10 so
here you have a lot of other
restrictions you have created and less
than and all that we're going to look at
that later but in this example I'm going
to do I'm looking at an equals
restriction so I'm going to pull up all
the records where the user name equals
user 10 so this restriction is something
that I'm going to create here and pass
it on to the criteria dot ad so I can
add as many restrictions as I want here
but once I am done with adding all the
restrictions when I do a criteria dot
list so first it's going to look at this
entity the class or dimension here and
for this entity it's going to apply all
the restrictions that I've added here
here in this case it's just an equal
restriction so it's going to apply this
equal restriction and get the list of
users where the username is equal to use
a 10 as this is the only restriction we
have applied here so now let's run this
and I will see what is the output there
you go it's returned user 10 because
this is the only record in this list of
entities that satisfies this criteria
restriction</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>