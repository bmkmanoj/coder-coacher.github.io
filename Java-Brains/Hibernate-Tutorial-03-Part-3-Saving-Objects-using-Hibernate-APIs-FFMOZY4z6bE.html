<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Hibernate Tutorial 03 Part 3- Saving Objects using Hibernate APIs | Coder Coacher - Coaching Coders</title><meta content="Hibernate Tutorial 03 Part 3- Saving Objects using Hibernate APIs - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Java-Brains/">Java Brains</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Hibernate Tutorial 03 Part 3- Saving Objects using Hibernate APIs</b></h2><h5 class="post__date">2011-05-19</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/FFMOZY4z6bE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">now the third step and the only
remaining step left is to have a class
that instantiates these objects of user
detail class and calls the hibernate API
to save it we need to have some of these
objects initially to say and we will
hard code some initialization code for
these user details and we will pass the
object to hibernate in order to save it
so we will create a simple class with
the main method new class open 8 I'll
call this class as hibernate test and
it'll have a main method finish now
inside this main method what I will do
is I will instantiate an object of this
user details class okay now I need to
import this class here okay that's done
now let me create some let me initialize
the value of this
set user ID I'll pass the value of one
user I'd set username call this user as
first user now I have an object here
with initialized values
now I need to versus this object I need
to save this object in the database now
how do I do that I do that by using the
hibernate api's normally what would
happen is if this were a service method
you would normally want to create a data
layer method Dao and pass this object to
the D you and the DA would take care of
using hibernate API is to save this but
for our example we will use the
hibernate EP ice in the service method
itself there are a few steps involved in
using the hibernate API so let's quickly
go with those steps the first step is to
create something called a session
Factory a session Factory is only one
object per application and what this
object does is it creates sessions
depending on how many other sessions you
want in your application throughout its
execution period now if you want to say
of something you get a session from the
session factory and then you use that
session to save but you would need a
session factory to be created upfront in
your application so that all the
different methods and all the different
pieces of code in your application use
the session factory to get hold of the
session objects now the session Factory
is created out of the configuration that
we've already done we have used the
hibernate dot C of G dot XML
configuration file to to tell hibernate
what our databases were to the
configuration we need and all those
things so using this configuration file
we will be creating a session factory so
that's the first step now after we
create a session factory which is again
as I mentioned only once in your
application you will create sessions
from the session factory every time you
want to use the database be it to say
or to retrieve data whatever it is you
will create sessions from the session
factory and then once you have a session
you will use that session the save model
objects in this case it is a save it
could be any other database operation
you would use the session object so
these are three simple steps that we
will write right now so in order to
build a session Factory in order to
create a session Factory what I need to
do is I need to get the configuration
and this you know this is the
configuration that we have already done
hibernate dot CFG dot XML so we need to
ask hibernate to open up that
configuration file so what I do is I
create a new configuration object and I
will call a method of this configuration
object called configure now what this
configure method does is it takes the it
takes this configuration file and then
it reads the configuration file to
understand what is the database
configuration that needs to be made now
once we do the configure then we can
call the build session factory method
now this build session factory method
returns a session factory so this is
what we need so I will create a new
session factory object and I will assign
this configuration configure dot build
session Factory so what I'm doing again
I am taking the configuration then
calling the configure method of the
configuration so that you know it goes
to this XML file and then it reads the
configuration and then I'm calling the
build session factory so that it varies
a session factory object based on the
configuration that we have provided now
the build session factory returns
factory object that I'm assigning to my
local session factory variable let me
get all the imports right so session
factory is outdoor hibernate and
configuration is again on orb dot
hibernate dot CFG okay so now I have the
session factory object I can use this to
create new sessions right now I want to
save this user object or I need a
session object to save so I'll define a
new session object here equals session
factory dot there is a there is a open
session method here so I'm opening a new
session of the session factory object I
will again have to import the session
from the orb dot hibernate package okay
now that I have the session object I can
use the session object to save my model
objects in this case I just have one
model object which is user I can use the
session object to save that so before
saving a model object first first thing
I need to do is to create our
transaction I'll have to begin the
transaction and I do that by using
section dot bacon transaction now a new
transaction is created and now in this
transaction I can save as many objects
as I want and I will use this
transaction to define the single unit of
work so I can group all these objects to
be saved and I can save them all inside
this transaction in our case we just
have a user object so I will need to
save just one user object so the way I
save the object is by using session dot
save the session dot save has one
argument which is the object itself I
will pass the user object here
okay now that I've saved this I will
have to end the transaction and the veto
in the transaction is to first get the
transaction that I've started here and
then do a commit for that transaction so
I would do a session dot get transaction
dot comment so I haven't done any error
handling here but say I did error
handling what I would do is I'd put this
whole thing inside a try block and
inside my catch block I would probably
do a kid transaction or rollback but
we'll keep this simple for now now with
the comment we are actually done with
the coding so we do not do any you know
splitting open of the object getting all
the values building the sequel queries
none of that we do we just pass the
object to hibernate and provided that we
have configured the object properly
these two configurations one is the
annotations second thing is adding that
object class name into the mapping class
then we're all set - it knows what needs
to be done to save this so it will take
care of saving this object this
particular user object to the database
so let's run this and watch as hibernate
does it's magic
so first let's open up the Postgres
console now I can expand hibernate DB so
this is where the object is getting
saved now in my public there are no
tables now hibernate is going to create
the table for us when we run this let's
run this as a java application yes
save this okay now we can see in the
console there is this insert query ok
hibernate has created this insert query
and it has actually run it now note what
it's inserting - it's inserting to a
table called user details now this is
the table that hibernate generated for
us in order to save our user details dot
Java so the table name the same as our
class name so this is an intelligent
default that
as for us and then now look at the
column names inside the in the stable
name we have user name and user ID again
the same as our member variable name so
again this is taking the default and it
has created this table for us the table
is user details with two columns and it
has inserted the values of course it's
question mark here but what it would
have done is it would have inserted the
user ID as one and the first user as the
user name now let's have a look at the
snow tables is still zero because I
haven't refreshed should i refresh there
you go we have a user details table here
and it has two columns user ID is the
primary key user name is not the primary
key again because we have set ID for the
user ID and nothing for the user name
now let's look at the data here - all
rows well there you go
we have these are ready as one and the
name as first user these are the values
that we have said in our main method so
what happen it has done for us is it's
created a table and it has inserted the
value here which is the value that we
had set for our model object so no
matter how complex your object is as
long as you can figure it right
happening it will take care of all the
heavy lifting it will convert this into
sequel queries it will generate the
table for you and it will do the insert
so in the next tutorials we are going to
look at what other things we can do we
need to do there is a lot of
configurations that we can do in order
to tailor the very happen it does this
for us there's a lot of automatic
defaults that are happening for example
the you know the class name the same as
a table name the field names are same as
the column names so we will have a look
at how we can configure all these things
in a bit more detail in the subsequent
tutorials</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>