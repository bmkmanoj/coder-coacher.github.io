<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Angular 1 Services In-Depth 18 - Adding data using POST | Coder Coacher - Coaching Coders</title><meta content="Angular 1 Services In-Depth 18 - Adding data using POST - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Java-Brains/">Java Brains</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Angular 1 Services In-Depth 18 - Adding data using POST</b></h2><h5 class="post__date">2016-10-21</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/pep-xDRZNx4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">there's one last feature that I want to
add to this contact uh before we wrap up
and that's the add contact functionality
right now we can choose a contact and
make changes to that contact but what if
you wanna create a new contact the steps
that we need to do is more or less an
extension of what we've already learned
so feel free to give this a shot without
looking at the videos if you'd like but
for the sake of completeness I'm just
going to implement a very simple set of
logic to add a new contact to the
existing list now what we need to do is
have an add button over here which pulls
up a farm which lets you enter these
details and when you're done you click
Save and it's gonna get saved right it's
as simple as that
now before I do that here's one thing
you might have noticed I don't have the
Edit change the name right I'm able to
change the location city state and phone
but it doesn't have an option to edit
the name it's kind of a lapse on my part
I hadn't noticed this all along so again
if you want to do this feel free to do
it as an exercise but I'm just going to
implement that person then I'm gonna do
the add contact part so let me go to the
index.html and here is my edit button
edit and same button so they are showing
up below the name so I'm going to take
this above the name alright and I'm
going to have a bunch of spans for the
first name and the last name I want to
have two spans so I'm going to create
similar kind of spans that we have over
here and get rid of the edge for we
don't need this instead gonna have two
paragraphs here one for the first name
and one for the last name
the first name is gonna be this guy here
we need to see that here and the last
name is gonna be the second spot all
right I'm gonna get rid of this edge for
now the course format the code a little
bit now we have editable names as well
let's try that out
very fresh click on a name and I can
change this to again I'm gonna add one
to put the names and click Save
should have updated click refresh and
there you go
we get the name updated all right now
how do we make the add functionality it
happen so I have this list here I'm
gonna have a button below the list which
say that I'm gonna go add that pattern
first now this is the list and let's see
it's in this ng-repeat this is the list
UL ends your now below the UL i'm gonna
have a button which says add and this is
gonna have a method hooked into it and c
ng click equals contact alright now this
button doesn't do anything right now we
need to add this method so I'm going to
go there and go to the controller the
stud contact there's gonna be a function
basically needs to create a new user
object so I'm gonna actually do this by
doing this start selected contact equals
an empty object so that we have a blank
slate now what I also want to do is add
the edit mode I want the edit mode to
show up so I'm gonna say this dot edit
mode this is true so we have an empty
form let's see what that looks like when
i refresh the page and of course i need
to
spell function correctly save and
refresh again I'm gonna click add you
notice what happens have a blank record
I just create a time I have these
elements over here now if I click say
what's gonna happen is it's gonna try
and do a put request on an ID which
really doesn't exist
alright so we gonna have to figure out
what the ID is I can create some kind of
a random ID for instance so let me
actually go ahead and do that say this
start selected contact and there should
be selected contact I see the type of
here and what I'm going to do is I'm
gonna have this object pre-populated
with the ID property because I don't
want the user to enter this ID right so
this I'm gonna just do a new date dot
time string I'm just going to show the
I'm just gonna generate a random string
based on the current date it's fine for
now what you would ideally like to do is
have the back in handle what the idea is
and have just the post be done by the
client but we are using a simple
rudimentary JSON server so the whole
object has to be prepared on the client
side it's on this populating ID you may
not necessarily populate it in a real
application
okay so we have populated this object
I'm gonna refresh the page and now when
I click on an ad this farm is gonna show
up with the simple object that we have
created over here this is a selected
object there's just the ID if I were to
print the ID it would show up but it
doesn't have any of these other fields
thanks to the magic of angular data
binding as I enter values over here it's
actually gonna create those properties
the first name the last name the street
city state and phone number it will
actually create all those properties in
the right places on this selected
contact object now if I were to hit save
what should happen the same is currently
hoped to make output requests so it's
gonna find the ID of this object
which is gonna be the time strength that
we pull up over here and it's going to
try and make a put request to slash
contacts slash that ID well now does
this exist currently doesn't exist so
the some server some
data endpoints support making a put
request on and on an element that isn't
there but in this case it's probably
gonna fail so I'm gonna open a console
here and when I click Save
notice what's gonna happen it's gonna
try and make a put request to slash
contact slash this thing which is the
current time the time string which is
what we treat is an ID and there's
summer basically respond saying hey I
was there's not even find it it's a 404
right we could this handy error message
as well so this will not work what we'd
like to do is when there is an ad that's
happening I don't want it to go ahead
and make a boot request I wanted to
actually make a post request to slash
contacts in the first body should
contain the the new user data so what
I'm going to do is I'm actually gonna
byron that functionality over here so i
have add user or maybe create user which
takes in the user data and it actually
does HTTP dot post to slash contacts and
doesn't take in the user ID and the post
body is gonna be user data over here and
this should work pretty much the same
way now how do we have the controller
call that then the Save button is
clicked well there are a couple of
different ways we can do this one way to
do it is have some kind of a Moore which
identifies if the form is being clicked
because of an edit or if it's being
clicked because of an ADD so what we can
do is have some kind of the flag which
is if it's edit or add more can have an
ID more which has true or false so I'm
going to have the self dot add modis set
to false by default and if the add
button is clicked I'm gonna say it self
dad add modest set truth and now in my
say be user I'm going to toggle the edit
more because I wanted to come out of
there it more than the partners being
clicked but here I check if the hide
more destroyed on if
self dot add more then what I need to do
is not call save user instead I want to
call create user ID user whatever that
function that I called call the create
user right so I'm going to call create
user in this case and if add mode is not
true
call the save user format again
okay so again just to recap I have a
flag which is to text for that I'm in
the add mode or in the edit mode if I'm
in the add mode I'm going to pass the
user data to create user however if I'm
not in the add mode I'm gonna pass the
data to save user now when I'm out of
the add mode what I'd like to do is just
clear this flag so I'm going to have
switch over here which basically does
this after add more as false because
once this thing is done whether it was
successfully saved are if it failed I
just warned the add mode to be out so
I'm gonna set this to false manually all
right so now let's refresh the page I'm
going to add and I'm gonna populate with
a bunch of values over here there is a
time string that was created by my code
here which created this time string but
that doesn't matter when I click Save
what's gonna happen is this ID mordor's
turn on so it should call create user so
let's try that
it's save well there was a post that was
made and data has been successfully
updated if I were to click refresh well
there you go there's my new user who's
showing up right here of course I can go
to an existing user and see that as well
I know this is not really elegant there
is still a bunch of cleanup activities
that we need to do for instance if I go
to a user which has a photo like a cure
you see the photo doesn't go away
because there isn't
thing in the in this object which
populates that photograph so those are
things that I'm not gonna belabor
because that's really not in the scope
of the promise handling I definitely
encourage you to give that a try and I'm
gonna take the lazy way out and say this
is left as an exercise to the viewer but
yeah I definitely do give it a try if
you're interested but at the basic level
I would like you to walk out of this
tutorial but understanding of the put
versus the post and of course we are
just calling it with a switch was really
not that important what you need to
understand is you can make all these
different calls using HTTP and have
either any data updated or a new data
created by changing the method and the
end points</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>