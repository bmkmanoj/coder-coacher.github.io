<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Struts 2 Tutorial 17 - Configuring Interceptors | Coder Coacher - Coaching Coders</title><meta content="Struts 2 Tutorial 17 - Configuring Interceptors - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Java-Brains/">Java Brains</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Struts 2 Tutorial 17 - Configuring Interceptors</b></h2><h5 class="post__date">2013-03-30</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Kkn_8BcmopA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">in the previous video you've had a
high-level discussion about interceptors
we've learned what interceptors are and
likely need interceptors in this session
we're going to go a little bit in detail
we'll try to understand what are the
different interceptors that are coming
into play by default and how they're
actually configured we did realize that
even without doing anything there is
something that's happening out of the
box to provide us the interceptor
functionality and that's because of the
default package that we use but before
we get into that there are a few things
that interceptors have to provide so the
nature of interceptors are first of all
they have to be configurable this is one
of the requirements of interceptors we
don't actually write the code to get the
interceptors into play every time we
need it it does something that's kind of
like plug-and-play
we have all the interceptor classes
separately and we just configure what
interceptors need to be applied to what
actions the second requirement is that
they are actually Java classes which is
kind of obvious we have separate Java
classes for each interceptors and then
ever we can figure something those Java
classes have to do the work whatever is
quoted in them to actually do the rule
of the interceptor the third requirement
is that you could have one or many
interceptors that get that intercept a
particular request and then execute
right so okay let me explain what all
these three points mean now let's say
you have a simple client making a call
to a particular action in our MVC
application we have a stretch to MVC
application over here now let's say you
have like two different versi three
different action classes oh here right
so this is this this is action one
action to action three right so there
are three different action class
now when the request is made right there
is this controller which decides which
action to get executed so this is the
starts - controller now what we can
actually configure is that we can say
now let's say you want to have some kind
of a cross-cutting concern right this
that's the whole point of interceptors
you want to have a class which has some
logic to execute cross-cutting concerns
which is let's say it's common among all
these three action classes so what you
can actually do is you can make
configurable cross-cutting concerns you
can have like an interceptor over here
which intercepts all the requests that
the controller hides to these three
action classes right so whenever a
request is made the controller picks up
the action but then what's happening is
these interceptors execute before the
action executes and then there is
post-processing so there's both pre and
post so part of the logic can execute
before the action executes and then the
part of the logic can execute after the
action executes so let's say the flow
goes like this the interceptor logic
executes and then let's say this is the
action that gets picked up so the action
executes and then it goes back to the
Interceptor and then back to the user so
this is what I mean by configurable you
can actually plug in these interceptors
for any of your action classes the
second requirement is that the
interceptor have to be Java classes
right so you can write simple Java
classes that have the logic to actually
intercept these requests and then the
one remaining requirement is that this
could be one interceptor or it could be
multiple interceptors right so you could
have interceptor one interceptor -
interceptor three you could have as many
interceptors as you want and they all
execute one after the other right so you
can have intercept
one executes then two then three then
your action and then the post-processing
logic is like at the action after the
action completes you have intercepted
three running then two then one and then
back to the time right so these are kind
of at a high level of what interceptors
should actually provide for us so there
are a certain set of steps that you need
to follow in order to declare and use
interceptors all the interceptors that
come out of the box and stripes - all
follow the same set of steps in order to
declare themselves so you're going to
take an example of us writing our own
interceptor and then see what are the
steps that are needed so that we
understand all those steps so let's say
you're you're writing your scholar of my
int dot Java okay so this is your
interceptor class this contains all the
logic we still haven't looked at what
this class contains we'll take a look at
that later but let's assume that we have
written all the logic that does the
pre-processing and post-processing and
you want this as an interceptor so the
first thing you need to do is to declare
this as an interceptor what I mean by
declare so you go to your struts excimer
c0 start XML you have to declare it so
you have an element called interceptor
and this takes in a name and then the
class so you give it a name you call it
say my int or whatever and you give the
full class name with the package name so
you say your package name dot mind or
Java so you give the full name and you
declare it so you're telling struts too
that this is supposed to be an
interceptor right the second step is to
actually use in your action so again in
the struts XML you probably have your
action tag somewhere over here right so
let's say
you have your particular action for
which you want this interceptor to
intersect so any call that goes through
the action goes to the action needs to
go through this interceptor first right
it has to do the pre-processing then the
action has to execute and then the
post-processing say that's your
intention so what you need to do is you
need to go to all those action elements
and then add this reference ok so you're
adding a reference over here we look at
the specifics of the XML later but it is
adding a reference and the references to
this name so you have declared this
interceptor saying this is an
interceptor with this name so again in
the reference you don't have to give the
whole package name and class name all
you need to do is refer to this name you
saying hey I've already declared
interceptor over here call that
interceptor ok so these are pretty much
the two steps that you would have to
take in order to configure an
interceptor but the thing is usually one
interceptor is really enough right
because you have a whole lot of
interceptors that you want to execute
whenever you execute an action I told
you that the whole you know all the
features of stretch 2 are actually
interceptors so you would want all of
them to come and then your own
interceptor to come so it's basically
you you're not dealing with one
interceptor most of the times you'd be
dealing with a bunch of interceptors
which means that you have to refer all
those things for each and every actions
you have to say my action 1 refer
interceptor my own interceptor 2 and
receptor 3 all that stuff then action to
refer interceptor 1 interceptor 2 and
receptor 4 whatever
so you have a whole lot of references
for each and every action element which
is actually a pain so structures
actually come up with the concept of
what's called as an interceptor stack
so what you do is you bundle all the
interceptors that you would normally
want into what is called as an
interceptor stack so this is again an in
configuration in this charts XML so you
have an interceptor stack and then you
refer all your common interceptors
together again the reference is actually
the name over here so these names are
actually getting referred over here so
you refer all the names list on all the
names of all the interceptors that you
want and then of course in the right
order so let's say you want intercept
the one first then interceptor four then
interceptor three so you basically list
them in the order in which you want to
run right and then put them as a stack
so it's kind of like a preset of all
your interceptors that you want together
in that case once you do that then you
don't have to refer to all the
individual interceptors over here all
you do is refer to the stack you say for
my action apply this interceptor stack
right so that's the easier way so you
can either specify a single interceptor
in the action or you can specify a stack
of interceptors in the action both of
them are possible but either way you
will have to specify a declaration of
the interceptors we write your class and
then you declare the interceptor okay so
now if you take a look at the stretch
eczema you will see all these things
applied to all the interceptors that we
that we have as a default so again to go
to the struts XML you go to the struts -
char which is in the library okay so in
the stretch to jar the root itself you
should see a starts default or Dixon and
we learn that the struts default or XML
this ought to include it into our starts
excellent so all this configuration is
actually applied to our starts
application any starts application that
we write so if you look here at the
package stretch default right this is
this is our concern because we are
actually extending the struts defaults
so all this
figuration is a part of our package so
you see here this is the interceptor
declaration portion right this is the
first step so see there is a node called
interceptors and it has all these
individual Interceptor alum elements
so each interceptor element has a name
and a class so name is kind of like a
short form so you don't have to put the
whole P no reference every time and then
the class actually specifies which java
class has the interceptor logic so in
this case the interceptor call alias has
this class associated with it the es
interceptor in this patch the
interceptor named Auto wiring has this
action auto wiring interceptor class
associated to it so this is the first
part this is the declaration part they
have declared all the interceptors that
comes stretch to and each of them has a
unique name okay the second thing
they've done is they've actually created
all these sample Interceptor stacks okay
so they have given a whole lot of
combinations which you would normally
use so you have something called as a
basic stack which contains these set of
interceptors you have a validation
workflow stack which contains the set of
interceptors so all these are like
common combinations that people would
typically use that the struts to
development team have given as presets
so you can pick and choose whatever we
want one thing I want you to notice here
is that some of the Interceptor refs
actually you take a look at this one
right the validation workflows stack
actually has an interceptor RIF - basic
stack so you can have a stack pointing
to a stack so you can say I want this
stack to contain all the interceptors in
this stack and then interceptor
validation intercept above you right we
can mix and match a stack declaration
and an actually intercept a name so it
supplies if whenever you mention a stack
it applies all the interceptors of that
stack and then it applies all the other
interceptors okay
so yeah so these are some of the preset
so as you can see you have all these
stats you have chain stock i18n stack
and here you have the default stack so
we know that the default stack is what
gets applied right so let's say let's
open up our our stretch XML right so in
order to apply any particular stack
let's say you do not want the default
start let's say you wanna apply let's
pick one of those here let's say you
want to apply this one right params
prepare params stack okay so all you
need to do is go to your action let's
say I wanna apply to the tutorial action
so all I need to do is go over here and
enter interceptor stack sorry
Interceptor def it's pretty much the
same stacked as this one right
interceptor RIF and then give the name
so I can give the name here here the
name can be a specific interceptor name
or a stack name okay so here I want to
apply this stack so I just put that
stack name over here so now what's going
to happen is whenever tutorial action is
called structure is going to look up
this stack right in the stats default
and it's going to apply all these
interceptors one after the other in this
order okay so this is as simple as that
I can give a stack name here or I can
give a specific interceptor name now the
question is without this right let's say
this was not that we did not have this
before okay so we had just given the
action we did not have any specific
interceptor declared and I told you that
the default stack that was applied was
the stack called the default stack now
how does struts to know that this is the
default stack that needs to be applied
but it's not really than me it's not
because this is called default stack you
can call it anything else but how would
stretch to know what's the default stack
needs to be applied well the answer is
this particular declaration over here
see here after all the interceptors type
declarations there is this element over
here which says default interceptor F is
the default stack so what this means is
for this particular package right for
let's go back to the package declaration
away all this is inside this package
right all this is declared inside the
starts default so for the stretch
default package the default interceptor
ref is this the default stack so you can
give any stack name over here okay you
can give a complete stack or it can give
a specific interceptor name so whatever
you give here is going to be applied to
all the actions inside that package by
default okay so since our package is
extending the stretch default the
default interceptor that gets applied is
what's declared as default in the
default package okay
so if you want to change it you can
provide your own default interceptor ref
inside your package and so in that case
this package alone will have that
particular thing applied so in our let's
say in our search package right you
don't want the default interceptor ref
to be the bait defaults tax you want to
change it so you can apply your own
custom default so that particular
interceptor stack or that particular
interceptor is going to get applied by
default to all the actions inside that
package okay so this is how the struts
interceptor configuration is working
right now and this is what you need to
do in case you write your own
interceptors we're going to take a look
at how to write our own interceptors a
bit later but I hope the configuration
of all the default things are clear</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>