<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Spring Tutorial 16 - Writing a BeanFactoryPostProcessor | Coder Coacher - Coaching Coders</title><meta content="Spring Tutorial 16 - Writing a BeanFactoryPostProcessor - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Java-Brains/">Java Brains</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Spring Tutorial 16 - Writing a BeanFactoryPostProcessor</b></h2><h5 class="post__date">2011-07-02</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/szNWTBlewQI" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">we learned about being postprocessors in
our previous tutorial we learn how it's
an extension point for the Spring
Framework and how we can configure the
framework for your specific needs using
the beam processor today we're going to
talk about one more extension point
which is the bean factory post processor
again this is a feature provided by
spring if you want to execute code then
the bean factory itself is being
initialized then you can use bean
factory post processors you can write
your own bean factory post processors
and you can also use some of those bean
factory post processes that come out of
the box with spring so let's first try
and write a bean factory post processor
and then we'll also see one of the
out-of-the-box objects that spring
provides now in order to customize a
bean factory post processor just like a
bean post processor see here what we did
was we implemented the bean post
processor and we wrote these methods we
had to world ID we had to implement
these methods and then the second step
that we had to do was in the spring
eczema we had to just declare the bean
so these are the two steps that are
required for the bean factory post
processor as well we have to write a
class which implements the bean factory
post processor and then implement the
method and then also declare that class
in the spring XML so first let me switch
off this bean post processor that we
have written earlier all it takes is to
remove this declaration in the spring
XML so in order for a bean post
processor to work the bean has to be
declared in the spring XML if not then
even though you have a class which
implements the bean post processor it's
not going to get implemented it's not
going to get called when the beans are
being utilized so if I save this and if
we run this class again you'll notice
that the bean post processor is not in
action so now let's close this and we'll
write a B
in factory boss processors I'll create a
new class let's say my bean factory PB
for post processor and finish now again
I will have to implement bean factory
post processor now the first thing I
need to do is import it from beans
factory config now once I imported it'll
ask me to implement the unimplemented
method so there's going to be this one
and implemented method here which is the
post process bean factory now this is a
method that spring is gonna run when
bean factory itself is being in July
before the bean factory itself is being
analyzed and what argument we get is the
bean factory itself so let me call this
the bean factory and here I'm not going
to use the bean factory I'm just going
to print the message so that we know
that this is getting executed so I will
just print a system dot out dot println
ok and of course the second thing that
we need to do is to declare this class
this spring XML so I'm going to write a
new beam tag
and close it and that's all it takes so
again what I've done is have created a
new class which implements the bean
factory post processor and then I have
to implement this method if I'm
implementing this class and in this
method I've just written a print
statement and what spring is going to do
is it's going to call this method off
all the classes that's declared in the
spring XML which implements the spin
Factory post processor so I have to
declare this in the spring XML I have
done that here so then the bean factory
itself is being initialized then this
method of this class is being called now
you might ask we are not using a bean
factory here we are using an application
context it is still fine it's still
going to call because the application
context as I've told you is actually a
being Factory you're using a get bean of
the application context and you're
acting I mean the bit the application
context is acting like a bean factory
and remember an application context is
actually a bean factory underneath plus
additional functionality so that's why
this is going to get called even whether
you are implementing a bean factory here
or an application context here so now
let's run this well here you see the
message is printed over here and then
you can see there are some log messages
over here that should give you an idea
here it says pre instantiate Singleton's
so i've told you then spring initializes
the bean factory the first thing it does
is initializes all the singleton beans
so what's happening here is the bean
factory post processor is first coiled
and then the bean factory is initialized
and then all the singletons are
initialized so this is the order in
which the execution go
and then here you have all the beans
that are initialized over here and then
of course the actual execution of the
program so this is a handy way in which
we can plug in some extra functionality
if you want to override some of the
default behavior when the bean factory's
initialized one example of a bean
factory post processor is something that
comes out of the box
it's called property placeholder
configure and the property placeholder
configure it is an out-of-the-box bean
factory post processor that spring
provides and what it helps us do is if
you want to have some kind of a
placeholder for these configuration see
I have my beans over here and I have
defined all the values over here now
let's say I want to have a placeholder
for for this bean see I'm going to take
an example see I have this point and I
have initialized the value as 0 0 now
let's say I don't want to specify the
values over here I want to specify the
values in a property file which I'm
going to add and then the property file
will contain the actual values and I'm
going to put placeholders here which
refers to the actual property in that
property file now let me create a
property file here let's say new file I
will call this points config dot
properties this can be this can be any
name I'm just going a an arbitrary name
here ok now you go to the source view
here and let's say I call this point a
dot point x equals 0 and 0.8 dot point y
equals 0 ok so these are the values of
my x and y that I need this beam to be
initializes but here's the thing I want
the values to be in this property file I
don't want the values to be inside the
XML file of spring
I want to externalize these values and
of course I'm just taking this one
particular beam as an example you can
take as many values as you want so you
want to keep all these values outside
the spring XML you don't want hard-coded
values to be there in the XML you could
keep all these properties over here
you know define the values over here and
then here what you do is in the spring
XML instead of actually having the value
we add a placeholder for these
properties so my spring XML is going to
be point eight dot point X and then this
will be point a dot point Y so note the
syntax for the placeholders here its
dollar and then you have the square
brace and you have the actual property
inside the curly brace there's actually
a standard convention normally you would
see placeholders like this in some other
frameworks like add for example so this
is this a common syntax that even this
bean factory post-processor uses so I
have my properties defined in this
properties file let's save this and I
have added the property placeholder
instead of the actual value in my spring
exim now in order to not let spring know
that these values have to be substituted
over here I will have to use this after
the Box bean factory pros processor that
spring provides which is called as a
property placeholder configurator so
again in order to define any bean
factory post-processor all I need to do
is write a simple bean tag here have a
bean and then class equals and I give
them class name it's as simple as that
so if I was writing my own bean factory
post processor I would have to write the
class and then add it here but since I'm
using the
out-of-the-box bean factory bose
processor I don't have to write the
class spring is already providing the
class for me so I just have to add the
class name over here and the class name
is of course with full package name it
is OGG dot spring framework good beans
dot factory dot config dot property
place folder configure us ok so this is
actually the name of the class which is
doing this ok so this class is going to
look at this properties file and then
it's going to look at the spring XML and
then whenever you have the placeholders
it's going to look up the properties and
then substitute it so this is a bean
factory post processor so this gets
executed before the bean factory gets
executed so the bean factory will not
see this placeholders the bean factory
will have a completely substituted XML
file ready because the skies will go in
first and do the substitutions but
here's the thing for this place this
bean factory post processor to do the
substitutions it has to know what the
properties file is it knows what the XML
file is because this is the one but this
is an arbitrary name that I've given
I've given points config dot properties
now it has to know what this property
file name is so in order to do that I
will configure that value first let me
open the bean tag here so that I can
write a configuration value inside it
now I will have a property name equals
locations and the value equals other
call this the points
config dot properties note that I'm not
specifying any relative path here so it
assumes that the properties file is in
the same path as the XML file so I
notice that it's not there so let me put
that in the same path as in the same
location as the spring XML if you want
it to be a different location you can
use a class path relative path so here
you can have a class path : and then you
can have a relative path so it's going
to look at all the class path locations
for you know a file like this so now
that I have specified this the this bean
factory post processor knows that this
is the properties file and then this is
the XML file it's going to do the
substitution and then the bean factory
is ready with the substituted values let
me remove this because I don't need this
this my bean factory course processor
I'm not going to use that here and saved
this file so let's run this now what's
going to happen is point a will have 0 0
even though I have not specified the
values here because the this bean
factory post processor is going to do
the substitution for us so let's run
this and find out well there you go
point is still 0 0 and the bean factory
post processor has gone ahead and done
the substitution before the bean
factory's initialized as you can see
here here we have a property loader
support which loads the properties and
then it loads the properties from points
configured properties and then after
that the bean factory loads and then it
prints 10 sheets the singletons when
this phase happens the properties would
have already been substituted and that's
how point a ends up with 0 0 so again
this is another handy feature if you
want to override some of the behavior of
spring and you want to add your own
steps in order to configure the beans or
to add any extra features like the
property substitution
then bean factory post-process service
really handy</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>