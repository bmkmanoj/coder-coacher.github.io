<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Hibernate Tutorial 21 - CRUD Operations | Coder Coacher - Coaching Coders</title><meta content="Hibernate Tutorial 21 - CRUD Operations - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Java-Brains/">Java Brains</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Hibernate Tutorial 21 - CRUD Operations</b></h2><h5 class="post__date">2011-06-01</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/hDBQy-dWC0A" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hi and welcome to this tutorial on
hibernate in the past few tutorials we
have looked at annotations in
considerable detail we have seen how to
annotate individual entity classes we've
seen how to annotate the relationships
between different entities and of course
relationships between entities and value
types as well and we've also seen how to
annotate inheritance mapping so in this
tutorial we're going to look at a simple
crud operation of a single entity
so I as far as annotations are concerned
you know if you've been following along
you should have enough information to
write any application and map any
relationship using annotations there are
a few annotations other than what I've
covered it would not be possible for me
to go through all the annotations and
cover all of them but you know the
tutorials that you know we've already
seen should be you know should get you
going on writing annotations and of
course the you know the reference manual
on the hibernate website should answer
any other questions you have on
annotations now moving on as I said in
this tutorial we're going to do a simple
crud operation so I will have and a user
details the object here I have actually
removed all the other you know the
relationships and all those things again
I want to keep things very simple I just
have a generated ID and or user name so
that's that's all there is to it
okay so this is my user details object
and of course I have defined a table
this is also not required let me move
this so it's as simple as it can get so
I have entity annotation and I have this
ID which is a generated value and have a
name with you know getters and setters
for both the ID in the name now let's
run some code to let's write some code
and run it which you know saves use a
detail object you know and fetches a
user details object makes some changes
to the user details object
then finally deletes the user detail
object and see how it maps to a create
update and delete for you know a
database record now we have seen how to
create records earlier maybe through the
session dot save in order to create
records and we also did a session don't
get in our previous tutorials in which
we got records from the database given a
particular key the primary key now let's
let's look at the update and delete as
well in this tutorial so ok so here I
have my main method which is doing the
basics here again it has a session
factory initialized and it's getting a
session from the session factory its
beginning a transaction and then here is
where all our operations go whether we
want to do a create update or delete and
then finally we do a transaction commit
and a session dot close okay so now
let's let's do a let's go create first
so I'll create a few user objects let's
say user details user equals new user
details so the idea is to have a few
records available in the database so one
thing I can do is add it in the loop so
that we can have a few set of records
okay so I will be having a set of 10
records
here okay so the ID will be
auto-generated here all I have to do is
set the name let's say user don't set
user name so it will just create with
the value I so it'll be the 1 user 2 and
so on so of course start with 0 so it'll
be user 0 user 1 and so on now I have 10
such objects available here so all I
need to do is I need to do a section dot
save for each of these objects so I will
put this loop inside the transaction
here so that I can access a session I
cannot do it over here because I haven't
opened the session yet so here what I'll
do is once I've set user name I will do
a session dot save off user and then I
close the transaction and I close the
session okay so if everything goes well
we should have 10 users in the user
details table and of course here I have
set the you know HBM to DTL as create so
it's going to create the schema let's
run this okay so you see here there are
so many inserts happening now let's use
the details and if you give us this list
of users use a 0 t to the 9 which is
factor this is the C of crud you can
create objects by using the session dot
save and you create new objects here
which of course are off
glass which has been marked as an entity
okay so now that the create is done
let's see how to fetch it so let me
remove this that we have the tables and
the data and we need to create it now
let me fetch the data here so I will do
a session dot get now I need to specify
two arguments here we've already seen
this register recap in order to get any
object from the database I need to
specify two arguments one is the class
of the object that we are trying to get
here it's user details class so I need
to specify user details dot class and
the second argument is the primary key
now here if I just specify the user
details class it knows what table it
needs to pull up the data from but you
have so many records in this table now I
need to isolate one particular record I
need to tell hibernate hey get me this
record so I need to specify the key so
here this is the key value that I need
to specify which is in the user ID so I
will specify the value let's say six
okay now I will assign this to a user
details object user details you slit
equals and of course the session dot
gate returns me a type object so I will
have to cast this again note that I'm
not doing any error handling here
because it's a simple example so let's
go with it for now sis let me I will do
a system dot out let's say user name up
this user dot get user name
I have to put the plus sign here that's
that okay so now let's run this but
before we run this I what I'll do is
here instead of a create I will do an
update the reason I'm doing this is I
don't want the list of user said I'd
inserted earlier to go away now if I do
a create here what it's going to do is
it's going to drop the entire scheme and
it's going to recreate it and all the
user values that I had inserted earlier
will go away so now if I do an update
it's not going to drop the schema so
these values are going to remain and
then I can also retrieve the value so I
can retake the value with an ID of six
so now let's run this so there you go
here we have a select query that's
getting run because I'm doing a session
kit here and I'm passing this you know
the primary key s six so it's from you
know run this query where the user
details table dot user ID equals six so
this is going to give us the user Phi
here this one so I get a user object and
then I can use this user object in my
code I have used it to print the gate
username and then it's printed out user
five which works perfect okay now here
you need to note that I can actually
take this these couple of lines of code
and of course this one alone I cannot do
a session dot gate outside this but I
can do I can access the user object
outside the session so here's what it is
earlier the system dot out dot print was
over here it was in between these two
like you know lines of code the session
was still open but now here I have
closed the session in spite of closing
the session I can still access the user
because the first level data is being
pulled up we've already learned what a
proxy object is and how it you know
pulls up data dynamically there is no
list here there is no collection object
so since it's just a username it's a
first level record and it's going to
pull that up by default it's going to be
a eager fetch for the first level it's
not going to be lazy so I can access the
property even after closing the session
just to test that out let's run this one
more time there you go
it still comes up with the user because
user five would have already been
populated in this user object when you
do a session dot gate okay so this forms
the R of the crud you are able to read
the objects depending on the primary key
now before we do the update part let's
try doing our delete first because it's
a simpler of the two in order to delete
any object I need to do a let's do this
now let's try to remove this you know
this user five object itself so in order
to delete any object what I need to do
is I need to call section dot delete the
session or delete takes an object as a
parameter and the object is the object
that you want to delete so the it
involves two steps now you see here you
have to first pull up the object and you
know here we have pulled up an object
with ID six so I can delete this object
itself and of course you don't have to
actually pull up the object every time
say you have an object in memory that
you are working on and you want to
delete that then it will just pass that
object to a session or delete and what
the session or delete does is it finds
out what this object is and of course it
identifies it by the primary key and
then it deletes that record in the
database which corresponds to this user
object because I'll have to remove this
system door order friend because this
user object is no longer going to be
there okay so now let's
run this of course before running square
this one more time
see primary key six user five is
available now since I run this it first
as a select and gets the object and then
it does it lead so our session door
delete is actually doing a delete
command say is delete from user details
where user ID equals again it's
identifying the object by the primary
key now if you run this you can see
Heidi six user five is not there anymore
okay so this forms the D of crud
you can delete objects by using the
session or delete now let's have a look
at how to do an update now I have this
user object here now I want to change
the user name so once I have pulled up
the user object I can update the
properties of this user object that's
going to this set user name up call this
updated use it of course this will not
get me anything because primary key six
is already been removed let me try five
okay so now I will set this as set user
name as updated user and then what I
will do is a lower session dot update so
the session will update also takes an
object and I will pass the user object
here and that's it now again to verify
primary key five has the value user for
now if I run this here you can see it's
does an update query after doing a
select now if I execute this here you
can see the primary key five has the
updated property as the updated user so
this forms the you of crud so now we've
seen how to create an object how to read
an object to update it and how to
so this is one of the most simplest ways
to do a crud operation and hibernate by
using the session object methods in
order to operate on the objects now in
the subsequent tutorials we are going to
look at a few more advanced options for
fetching objects and then updating them
so see you in the next tutorials</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>