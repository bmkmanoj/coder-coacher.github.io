<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Hibernate Tutorial 14 - One To Many Mapping | Coder Coacher - Coaching Coders</title><meta content="Hibernate Tutorial 14 - One To Many Mapping - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Java-Brains/">Java Brains</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Hibernate Tutorial 14 - One To Many Mapping</b></h2><h5 class="post__date">2011-05-25</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/4mANZ4MMbD4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">we've seen one-to-one relationships in
our previous tutorial this tutorial
we're going to see one-to-many the
example that we had was a user object
and a vehicle object and we had a
one-to-one mapping so in this tutorial
we're going to look at a single user
object with multiple vehicle objects so
that establishes the one-to-many
relationship it also establishes the
many to one relationship depending on
where you're looking at it
the user to vehicle is a one-to-many and
a vehicle to use it as a mini to one so
we're going to look at both of them and
this tutorial so just like one-to-one
one-to-many is as simple as just having
a one-to-many annotation now I just have
to import this so all I'm doing is I'm
having a one-to-many annotation I don't
even have to give the join column just
like the one-to-one join column is
optional so I just declare one-to-many
and then I define up a collection set
here so I just have set of wake up I'll
let me call this a collection so I can
emit an array list collection waker
and i will initialize it so that it has
a value it is not null on the first
edition say new ArrayList vehicle now I
will change the getters and setters to
reflect this change
okay so now this is done let's save this
and of course they'll have to change
this to charge gate vehicle dot add off
Waco
so I'm passing this vehicle and I'm
adding this vehicle object evangelized
here to this relist and now when I'm
saving and saving the user as well as
the vehicle and it now has to map it
according so let me just create a new
vehicle objects just start just because
we have this one too many we need to
have one more to know exactly what's
happening so I'll have vehicle two and
call this Jeep and let me add this as
well very equal to user dot save of
vehicle as well as vehicle to so in
essence it is same as what we saw in
moment the app with user object in the
address so I have one user object with
multiple addresses the same way I have
one user object multiple vehicles the
only change that I'm making here is that
since vehicle is an entity and not an
embeddable object I'm declaring this as
one-to-many that's it so this is all it
takes
so now let's let's run this let's see
what is the data structure what is a
table structure that it creates okay now
here you go you have user details okay
so this is the user table veco the
vehicle table note that neither the user
details has information about the
vehicle nor the vehicle has information
about the user
instead what hibernate has done is it
has created this new table
called user details underscore vehicle
and it has mapped both these user IDs
it has taken the user details user ID
and it's taken the vehicles ID and it's
called it the vehicle in this call
vehicle ID and then it has created the
stable with these two IDs mapped to it
now let's have a look at the data here
user details this is first user and
bought vehicle I have made the same
mistake that I did in the earlier
tutorials have again a copy pasted
together sorry about that
that's why this this field is not there
so let me just plant this again
okay so vehicle should have these two
red cards yeah there it does so now we
use an N vehicle of fine but now let's
look at this the stable here user
details and the score vehicle now this
has a mapping off the user ID and the
vehicle ID so ideally what should happen
is this table should have one mapped to
and one map to three so if we just query
this one
oops they go line this map to do and one
is mapped to three so this is a very
simple implementation of you know one
too many so I have this user details to
java having a one mini implementation
and this is what is stored now i can
configure the the join columns in the
joint table here so I have this join our
table annotation again this is just this
is overwrite the default names that has
come up if you look at the default names
here you have user details underscore
user ID that it's actually the table
name underscore user ID and then this
again the other table name underscore
vehicle ID and then it has concatenated
both these for the table that's user at
the score details in the score vehicle
so say I want to overwrite these names
all I do is I do a join table and this
join table has a few options in order to
configure this so if i do a control
space so you can see there is something
called as join columns and inverse join
columns so the join columns allows you
to configure the name of the column from
the user details tables and the inverse
join columns allows you to configure the
name of the other but you know they are
the other ID that are actually getting
embedded here let me let me just quote
this so that it becomes clear so what I
do is I have a at I join column and then
name equals for this user ID and then I
have the inverse join columns
equals again that drawing column name
equals what's that very good score ID so
so essentially what I'm doing is I'm
saying create a join table and then the
join column that is the column from this
from as an ID of this entity the user ID
and then English one column is the other
guy the other ID from the related entity
has to be vehicle ID and of course I can
change the name here as well as name
property so I can say name equals user
Waco and so I'm configuring the table
name as well so I save and run this
again the names should change cat name
is change so it's using score vehicle
for the join and then user ID and the
score user underscore ID and make an
underscore ID for the primary keys so
this is one other thing that we can we
can do here we can do this for the
one-to-one also which we saw in the
earlier tutorial but it makes more sense
to do this here which is that you can
have a reverse relationship in the sense
that just like you have just like I have
a one-to-many here for the user details
we can have a mini two one here in the
vehicle so I can have here private user
details user now what I'm doing is I'm
creating a reverse relationship every
vehicle as owner right so I no matter
what vehicle you take there has to be a
link pointing to the owner so if you
have a user object it's easy to get the
vehicle object but if you have a vehicle
object you need a way to get who the
user is so
I'm going to define this user member
variable here and I'm going to implement
getters and setters okay now what I'll
do here is I will I will define act many
to one relationship so I will again this
is from Java X or persistence so what
this is saying is just like you have
this relationship here which is one to
many
I can have a reverse relationship so
that when I pull up a vehicle object say
I have a handle with the vehicle object
I can use a vehicle dot get user so this
get user will return me the user so I am
telling hibernate to have this many to
one annotation so that the proxy knows
that when I'm doing a get user needs to
go to the database and pull up the
record show that way I can depending on
whether I have a user object or a
vehicle object I can get the other
object easily by using the corresponding
Kidder's so now that we have this
there's just one other thing which needs
to be done we have the link from vehicle
to user so when we are actually creating
the data what we do is just like you're
adding a vehicle to the user what we do
is you do a make a dot set user as user
so we are establishing the link the
other way as well so the same way equal
to dot set user as user so essentially
what we are doing is we are having a
bi-directional relationship so if we do
this and we have saved all these three
entities you can get a vehicle from a
user by using a vehicle you know user
dot get vehicle and you get a list and
the same way you can get a user by using
a vehicle object by using a vehicle dot
get user so that will give you the user
for any vehicle so this is something
that
we can use for bi-directional
relationships it's very commonly used in
real world applications one other thing
that is a handy tip what we do is we can
have a convenience method so in the user
details class or in the vehicle acid
vehicle class it doesn't matter you can
have a assign vehicle method so what
that does is that method takes care of
doing both
so when whenever you want to associate a
user to a vehicle you will have to do
two things first user target vehicle
door add a vehicle and then make a dot
set user of user so you can use you can
add these two lines of code into a
convenience method and then call that
method probably pass both the user and
the vehicle object to that method so
that method takes care of doing put
these assignments you know adding the
user to make a landing vehicle to user
so so that the data remains consistent
and of course the advantage is that you
can access one object from the other</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>