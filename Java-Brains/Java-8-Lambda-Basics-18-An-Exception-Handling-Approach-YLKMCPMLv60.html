<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Java 8 Lambda Basics 18 - An Exception Handling Approach | Coder Coacher - Coaching Coders</title><meta content="Java 8 Lambda Basics 18 - An Exception Handling Approach - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Java-Brains/">Java Brains</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Java 8 Lambda Basics 18 - An Exception Handling Approach</b></h2><h5 class="post__date">2016-11-22</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/YLKMCPMLv60" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so there have been a lot of discussions
in the online communities about how to
handle exceptions in the case of lambdas
v1 lambdas to be really small and crisp
one-line functions but on the other hand
those functions could throw exceptions
and you want to handle the exception the
only way you can handle exceptions in
java is by using a try-catch block which
means that our one line lambda becomes a
Phi line monstrosity of try and catch
that looks like this which is not nice
so here's a solution and of course you
can feel free to come up with your own
solution there are multiple ways to
handle this now let's say I take this
out and have the slam that still be that
elegant one-liner that we've seen before
get rid of this and this is a very
elegant lambda now instead of having the
try-catch happen over here itself what
if I were to externalize the try-catch
into a separate function and then wrap
this lambda with another lambda that has
the try catch you heard that right I
said drop a lambda in another lambda how
does that work well here's how it works
now let's say I have another lambda here
which is a wrapper lambda okay so let me
call this private static trapper lambda
let's look at what the type is in a
little bit but what this does is it
basically takes the same type as the
lambda that it needs to wrap so I'm
going to accept this it's basically
going to be a by consumer now what if I
were to just return what I'm accepting
now this consumer is a lambda expression
it's a value which contains a lambda
expression now let's say I just returned
consumer and what's the return type now
it is by consumer of integer integer is
basically taking in a by consumer of two
integers and it's returning the same
thing okay it's basically a pass through
now if this were to happen can I do this
can I instead of passing in this lambda
expression pass in a wrapper lambda off
the land expression this work it would
work because what will happen is this
wrapper lambda is the method that gets
called with a lambda expression that's
passed in and what does this method do
it just returns the lambda expression
that's passed in so it is accepting a by
consumer and it's returning a by
consumer so this is essentially an OAuth
so if this is gets it gets into the
process method basically doing a no op
all right so let's execute this to make
sure this still works but we now have a
divide by zero so let me change this to
a valid key and make sure this still
works yes this still works so this is
essentially doing a no op but here's
another thing I can do rather than pass
in a consumer I can actually create a
new lambda now let's say I create a new
lambda here let say a and B I'm going to
say system dot out print ellen off a
plus b okay
so what the lambda be passed in was
something that takes in two arguments
then you call it the same argument so
that there is no confusion should be NK
and I'm going to use v NK here right so
what was passed to a wrapper lambda was
this lambda takes in two arguments and
it prints the division but what I'm
doing is rather than passing it through
I'm replacing it with something else I'm
creating a new lambda here which adds
those two numbers up and if I were to
pass wrapper lambda off this lambda
expression this basically takes this
lambda expression ignores it throws it
away creates a new lambda expression and
that is what's passed to process so when
process takes in the consumer it's
taking in this lambda expression that
the wrapper lambda created so when
consumer or acceptors call what gets
executed is this print of the sum so
let's execute this and make sure it's
the sum that's getting printed so it is
now why am i doing all this the reason
I'm doing this is to elicit
it that you can have this kind of a
pass-through function which creates a
new lambda expression rather than
totally ignoring what's passed in and
creating a new lambda expression what I
can do is execute whatever is passed in
consumer dot except of V and K now what
am i doing this is a true wrapper now I
am basically creating a new lambda
expression which only does what the
consumer does right so it's an
unnecessary wrapper in this case so it's
basically creating a new lambda
expression which executes what it's
passed in and this is what gets passed
into process so I'm basically wrapping
this lambda expression with a new lambda
expression so when process takes in the
consumer it gets the wrapper and they
just consumer it except what lambda
expression gets called it's this one
and that takes in these two arguments
and that says okay I have a consumer now
I need to execute the accept on this now
what is this consumer it is this lambda
expression that was initially passed and
so it's going to come to that and that
is going to do for V / K so it's
basically adding an extra layer an extra
wrapper around whatever you passed in in
line over here so since it's not doing
anything else since it's just executing
what the consumer passed and it should
basically it returned the same thing it
should just do integer division all
right so you can do something fancy like
adding some extra lines they can say
system dot out dot println off executing
from trapper now what's going to happen
is this wrapper is going to do one more
thing and then it's going to execute
what it was actually wrapping so in this
case I'm going to get this executing
from wrapper printed for each time this
lambda expression runs inside the
wrapper so if I were to run this see
this every time the wrapper executes and
then it does the consumer door except
with the original lambda and that
original lambda execute which is over
here the why am i doing all this
this should give you an idea why did we
start this conversation we were looking
at doing a try-catch now isn't this a
good place to do a try-catch and I can
isolate this thing out into a separate
trap or lambda I can do the trycatch in
the rack or lambda so that when you are
passing in the actual lambda to the
actual function you don't have to do the
try-catch so let's say you do something
like this have a try block here and then
I execute the original lambda inside the
try block and then I catch an exception
here then here I print the error message
exception card in the wrapper lambda so
what's going to happen is the process is
going to get a wrapped lambda I mean
consumer is executed by calling the X
set this is what gets executed now what
is this it's a try-catch block now what
is this executes it does the actual
inner lambda consumer relax set which is
this guy now if this executes
successfully but everybody's happy but
if this were to throw an exception well
guess what
you have a try-catch here and this catch
is going to get executed and we can get
this system that off now this again
should not change the execution the way
we have it now but if I were to change
the key to zero and execute this again
you can see that the exception is caught
in the wrapper lambda so the original
lambda is pretty much free of try-catch
so it's still crisp and short but you're
basically moving the try-catch to
another lambda now you might argue that
you haven't made the complexity any
simpler it's still the same thing just
move it to another location but I wanted
to highlight that this is one of the
ways in which you can solve this another
thing you can do is have a wrapper
lambda be a generic method right now
it's just doing indeed you write by
consumer of integers you can have this
be a generic method so that you can pass
in any types and for any by consumer
lambda
you can have a wrapper which handles
exceptions farther by consumer by making
this whole thing be generic I'm not sure
why these wrappers weren't shipped into
the JDK just like you have a by consumer
interface that comes out of the box with
generics we could also have a by
consumer wrapper shipped out of the box
but with the generics but the JDK the
Java language designers decided not to
do that and it is what it is but we can
leverage the same concept and write
these wrappers with generic methods so
that it can be used in multiple
locations</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>