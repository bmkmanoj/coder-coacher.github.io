<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Hibernate Tutorial 13 - One To One Mapping | Coder Coacher - Coaching Coders</title><meta content="Hibernate Tutorial 13 - One To One Mapping - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Java-Brains/">Java Brains</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Hibernate Tutorial 13 - One To One Mapping</b></h2><h5 class="post__date">2011-05-25</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Of7qR-WagYk" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">the last few tutorials we've been
looking at the object inside another
object scenario we've explored a couple
of scenarios there with one object being
the entity and the object inside the
entity being a value type we saw how
they could you know use hibernate to
save those objects if it was just one
instance of the entity once into the
value type inside the entity and we also
looked at what if there was a collection
of value type objects inside the entity
so in this tutorial we're going to take
it a step further again and in this in
this time we're going to look at what
happens if there is an entity inside
another entity so in this is this what
we've done so far we have a user details
entity then inside that we have an
element collection of address the
address is not an entity it's a value
type and we have looked at how how to
use hibernate to persist this entity if
this address was just a single instance
and also if it were a collection so in
this tutorial we're going to look at
something slightly different it's very
similar to what we have done for value
types but there are a few differences so
we'll have to make a note of that so the
first thing we're going to see is an
entity inside another entity there's
going to be just one instance and the
you know it'll it will just be and one
entity inside another entity and what
we're going to look at in this tutorial
is a one-to-one mapping so this is the
much one mapping is a very common term
that we use when you're designing
databases we look at relationships
between tables and we see how what kind
of relationship it is if you have
one-to-one one-to-many many-to-one which
is actually an inverse of one-to-many
and of course the third one is many to
many so in this scenario we're going to
look at one-to-one now let me just
remove the the address portion here
because we want to keep things simple we
have a user details class and it has
only two properties one is the user name
and when it's the user ID the user ID is
auto-generated value because I've given
this generated value annotation here and
the user name is populated by the you by
the code so I will also remove some code
from the main method here which
instantiates the address so the main
method is a simple user details
declaration setting the first name and
then using hibernate to save this this
object that we have here I will create
one more entity class and I'll have a
one-to-one mapping between the user
details and that entity class I'll just
take a simple example I'll just have say
a vehicle a vehicle class and we'll have
a one-to-one mapping between this user
object here and the vehicle object we'll
assume for now that we live in a world
well one person can have only one one
person can own only one vehicle and
we'll see how we can expand on having a
one-to-many relationship later but for
this tutorial we'll have a one-to-one
mapping between user and Wako now ah
we save these here okay now I'll go
ahead and create a new model class so
that's nothing with a simple class in
the DTO package will call this vehicle
finish and
private and vehicle ID string vehicle
name again we'll keep this simple just
like we had an ID and a name for a user
will have an ID in the name for the
vehicle as well so now I'll generate
getters and setters for these two okay
now in order to make this we will back
up here okay so in order to make this as
an entity I need to have an end entity
annotation here at entity again this is
same as what we did for the user details
so the add entity will set this class is
an entity class and then on top of the
ID I will have a hat ID and I also have
a generated value so that I think will
generate the primary key for us so I
will import these annotations from Java
extra persistence
okay now that we have the entity class
here one more thing we need to do is to
go to the hibernate dot C of G dot XML
and here we have the list of entity
classes so we need to add this vehicle
entity class here as well so I'll create
a new mapping here and we need to you
need to tell hibernate that even this is
an entity class that it needs to look at
and persist so I'll save this now we
have this new entity class and we have
you know market as an entity class in
hibernate XML as well so here I can
instantiate this new entity class so I
can say
Vica equals new bike
now I'll import set like a name just
call this cut okay so now I can save
this vehicle object also sir just like I
do a session dot save a fuser I'll do a
session let's say you off like now so
far I've not done any mapping here
vehicle is an independent object user is
an independent object that is there's no
relation between the user and the
vehicle now let's run this and see
what's what happens I'll just run as
java application okay so here you can
see it's done an insert to user details
table it's done an insert the vehicle
the vehicle table is something that's
created newly now the user details table
has user name and user ID the vehicle
table has vehicle name and vehicle ID so
these two are two independent entities
with no relation to each other
so you can have n number of entities you
know any number of entities as you want
you just have to mark them as entities
and then you know if you do a session
dot save of objects of that entity it's
going to create tables and then insert
them now the question is what happens if
we establish a relation number I want to
establish a one-to-one relation between
the user details class and the vehicle
class so in order to do that what I will
do is I will have an instance of the
vehicle class in the user details class
so I'll have a private vehicle
Michael and I'll create getters and
setters for these okay now we saw this
in the earlier tutorial if it were just
a value type
okay this was just a value type we could
have had ad embedded and an ad
embeddable and what would have happened
is the vehicle columns would have come
inside the the user detail table so the
user details would have table would have
had a vehicle ID and a vehicle name
column but that's not the case here here
a vehicle is a separate entity it needs
a separate table now obviously we will
have to have a mapping between the user
details and the legal table so the V
hibernate does it by having a column in
the user details table to point to the
vehicle table I'll show you how that's
done so when mapping entities we need to
use a different set of annotations
depending on the relation that we have
here we are trying to establish a
one-to-one relationship so we use the
annotation at one-to-one and save this
is all it needs this is all that we
require to provide for hibernate and the
only other thing we need to do is to
associate this vehicle with this user so
I have these two entities here so all I
need to do is I need to say user dot set
wake up yes wake up so that there is a
mapping between the two now what happens
if we run this user details has this
column here called vehicle underscore
vehicle ID so this is a new column
that's come up and this column maps to
the vehicle ID of this way
kill table so what's happening is it's
inserting the user record into the user
details table
it's inserting the vehicle record to the
vehicle table but now what it's actually
doing is in the user details table it
has a reference to the vehicle ID here
and whatever record whatever a primary
key it has generated for this vehicle ID
it will insert over here of course in
this case we are using the auto
generation keys for Hibernia to get the
the primary keys but say we are not
using this what would happen is you
would not know that you know though what
is the primary key of the vehicle unless
the insertion is made so that's a reason
why and in search the user details
without the vehicle ID in place and then
it inserts the vehicle details with and
then it figures out what the vehicle ID
is now it goes back to the user details
and it updates the relationship by
mentioning that the vehicle and square
vehicle ID should be this vehicle ID so
that this user is mapped to this vehicle
using this vehicle ID link now this is
this is actually the very basic way we
have not done a lot of configuration
here but most of the configuration that
we have already seen already applies to
this one to one say for example let's
say I want to change the name of this
this column into the vehicle underscore
vehicle ID I want to make this just
vehicle underscore ID C so I would use
that join column and name equals I would
pass the name here vehicle underscore ID
now save and run this that you see
vehicle and the score ID is what is the
you know the link here so I'm
controlling what the join column should
be so
it's you know it's using a more readable
format</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>