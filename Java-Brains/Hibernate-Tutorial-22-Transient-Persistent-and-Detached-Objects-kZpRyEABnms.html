<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Hibernate Tutorial 22  - Transient, Persistent and Detached Objects | Coder Coacher - Coaching Coders</title><meta content="Hibernate Tutorial 22  - Transient, Persistent and Detached Objects - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Java-Brains/">Java Brains</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Hibernate Tutorial 22  - Transient, Persistent and Detached Objects</b></h2><h5 class="post__date">2011-06-02</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/kZpRyEABnms" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hi and welcome to this tutorial on
hibernate this is another one of those
important tutorials I'm going to talk
about a concept that's fundamental to
hibernate so make sure you try out the
examples in this tutorial probably watch
the tutorial a couple of times so that
you are sure you get the concepts here
the concept that I'm going to talk about
in this tutorial is the concept of our
transient object and a persistent object
this is something that we've been seeing
all along in the tutorials but without
actually realizing it so we'll spend
some time and understand what a
transient object is and what a
persistent object is and I'm going to
explain this concepts with you know the
best way to explain anything which is by
seeing them in action so we'll write
some code
I have this main method here this is
something that I've been using all along
the tutorials I have a session factory
here which reads from a configuration
and I'm opening a session in beginning a
transaction and here at the end of it
I'm committing the transaction at
closing so all my high benita
transaction code will go over here now
this is a common thing that we did
earlier we had a user details entity
class we had marked it as an entity and
all it does is it I know it just has an
ID and the name the ID has been marked
as a tidy annotation with the generated
value the name is just another property
now we did this in our earlier tutorial
but let's try this again I will
instantiate a user object and I will set
the user name
okay so now I have my user object here
this is an entity we have defined this
as an entity here so I'm instantiating a
new object of the user details class and
I'm setting a name to it now what I
would do normally is I would have a
session dot save of the user here okay
so when this line is entered hibernate
would save this user into the database
so what would happen is it would have a
new record in the table for this user
now this is this is actually a two-step
process the first step is to instantiate
an object and the second step is to
actually pass this object over session
dot save if you do not do this step then
this object is not saved to the database
it search fairly simple because we are
not asking having you to save this now
without passing an object to a session
would save even though it is an entity
object if you are not passing this to a
session dot save this object is said to
be what is called as a transient object
that means that this object is not
persistent it's not saved by hibernate
hibernate doesn't know that this object
has to be saved so that's a transient
object and now when I use a session dot
save to save this object then it becomes
a persistent object when it when an
object is persistent then hibernate
tracks that object and saves it now what
do I mean by drag an object let's run a
couple of tests to find out the first
thing I'm going to do is I'm going to
mark this I'm going to comment this out
so it's not going to do a session touch
save now what happens if I run this okay
before I run this this one will change I
need to make I'll go to the hibernate
dot cf0 XML and I will mark this
as create I'm changing the HBM TDD
Eldorado property as create so I want
the schemer to be dropped right now if I
run this it's going to have data of our
previous example so I'm going to map the
removal of that and create the schema
from the scratch so I'll save this file
ok let's save this so what we are doing
here is we are instantiating a new
object of the entity class but we are
not passing it to hibernate I'm just
beginning a transaction and I'm closing
it now if I run this it is obvious what
the result is going to be there will not
be any records now if I do a session dot
save of this object that I'm
initializing here and run this now it's
actually going to insert the value so I
can see here use a record available here
now the interesting thing that I want to
show you is this now I've done a session
dot save right now what I'm going to do
is I'm going to update the user object
here after the session dot C well before
before the session not save is
straightforward now I do a user dot set
user name say updated user ok now what's
the what's the value going to be in the
database obviously it'll be the updated
user okay simple enough so the question
is what happens if I do this change
after the session let's see now I have a
user object here I have already asked
happening to save this and now after a
last five need to save this I am
changing one of the properties of the
user now will the user in the table the
will the value be test user or the
updated user let's
they're out if I run this here you can
see you see an insert statement and an
update statement what's going on here
now let's query it again
the value is updated user so what's
happening here is that when I do a
session dot save hibernate is doing an
insert off this data it's inserting dest
user but then when I change the username
of the user object and I'm not I'm not
asking Happiny to save it again
you know note that here they are not
doing anything else here I'm just
changing the property of the user object
but what hibernate does is it
automatically triggers the update so
that the value in the database is also
reflecting this change so this opens up
a lot of new questions here now how does
hibernate know what change to get
reflected in the database the answer is
that once you pass you know an object an
entity object to a session dot save
after that any change you make to that
object will go as an update statement to
the database so whatever changes you
make at the end of the program you know
once you call once you commit the
transaction once you do a session dot
close the last you know state of the
user object this is what's going to be
the state of the database so you might
do you might do ten different updates
here but then the last update that
you're going to do before you commit the
transaction and close the session so
that last one is what's going to go into
the database so of course if you have a
different property then the last update
of that property is going to go and
since I have just one user name here so
it's the last update for that username
so what happens is that no matter what
change you do here you know whatever
changes you make it is going to do the
update now let's let's update this one
more time now I will have set the user
name as updated user
okay I'm gonna do a set username twice
after I have done a session dot save now
will there be two updates entered now
note that there is just one update so
again but if you look at the look at the
database you see that the last value has
been reflected even though the update
has been called only once how is that
happening how is this update not getting
reflected what's happening is that not
every change you make triggers an update
query now hibernate intelligently
detects what is the change that needs to
go to the database and then it figures
out what is the least number of updates
that need to be made we're going to look
at this in a bit more detail but what's
important to understand here is that
once you hand over an object to
hibernate and say hey hibernate save
this object for me then hibernate is
going to watch that object for any
changes so no matter what change you
make hibernate is going to automatically
fire update queries so that the row in
the database that corresponds to this
object is reflecting the changes that
you have made in the object so that is
the important difference between a
transient object and a persistent object
before an object is handed over to
hibernate it is a transient object
hibernate does not track this object
over here but then I do a session dot
save then I am giving the responsibility
to hibernate to make sure that the
object state matches the database state
so no matter what updates I make to this
persistent object it is going to get
reflected in the database so here it's a
transient object once I handed over to
hibernate it becomes a persistent object
and any changes made to the persistent
object get reflected in the database
once I do a session dot close it becomes
what's called as a detached object a
detached object is similar to the
transient object in the send
that hibernate is not going to track the
changes and no matter what changes no
matter what updates you make to the
object it is not going to be persisted
in the database but a detached object
means that it was the object was tracked
by happening before it was persisted by
happening before but now that the
session has been closed it is no longer
track by hibernate and now it is in a
detached State a transient state is when
it is not even you know a heaven it
hasn't even looked at that object so
it's a transient but you know once
hibernate takes up that object it
becomes persistent and once the object
has been once the session has been
closed the object becomes detached now
say I do an update here I say session
dot user dot set username now I do this
if I run this let's see what's the
database state it does not have the
update that I've made after the session
close now this update has not gone
through to the database because after
the session closes hibernate says ok my
responsibility is done I have tracked
this object as long as the session was
open and I have saved all the data to
the database but then after the session
is closed this user is not - it's the
responsibility it becomes a detached
object this is what we need to remember
transient object before we handed over
to hibernate
once we handed over to hibernate once we
do a session dot say you hibernate takes
the responsibility of tracking the
object and making database updates and
once the session is closed the object
becomes a detached object and hoping it
is not going to track the changes hope
this is clear if we're going to look at
a few more you know implications of this
concept in the next tutorial</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>