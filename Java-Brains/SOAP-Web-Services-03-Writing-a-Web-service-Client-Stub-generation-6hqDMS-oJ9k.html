<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>SOAP Web Services 03 - Writing a Web service Client: Stub generation | Coder Coacher - Coaching Coders</title><meta content="SOAP Web Services 03 - Writing a Web service Client: Stub generation - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Java-Brains/">Java Brains</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>SOAP Web Services 03 - Writing a Web service Client: Stub generation</b></h2><h5 class="post__date">2013-06-20</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/6hqDMS-oJ9k" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">oK we've learned some theoretical
concepts about web services and in this
tutorial we are going to go hands-on
we're going to write a java application
that consumes a web service we are not
writing a web service yet we are writing
a client a web service client that uses
an existing web service makes a call to
that web servers and consumes the result
so what I'll be doing is I'll pick
randomly a web service that's available
online for free there are quite a few
web services that are available online
and they're free to use so I'm going to
just pick one of them and we will write
a sample Java client application that
calls that web service or this one that
I'm using is from this website web
service X dotnet is just a random choice
I'm not really sure about the
reliability of this web service it could
be down when you are trying it but this
tutorial is just intended as an example
just make a note of the steps that I'm
following here to consume the web
service and you can apply to any other
web service you know the similarly so
this web service is actually called
geoip service what it does is it enables
you to easily look up countries by IP
address or the context so basically you
pass in an IP address to this web
service and the web service tells you
which country that IP address is in so
if you pass in your IP address it should
tell you the country that you are in so
we're going to use this to implement a
simple Java client which takes in an
argument which is the IP address and
then it just prints out the country name
on the console nothing fancy it's just a
basic Java program but what we're going
to be doing is we're going to call this
web service and we're going to get the
response and we're going to print the
response to the console simple enough
but it gets us started and they learn
what it takes to implement ellipses
kline okay so when you look at this
there's actually the web service page
and you have a description here and you
have a section here called the still
schema location we've learned earlier
that the visited is actually the
contract it's the interface the tells
you about the web selves what is the
server's what are the
parameters in what's the return type so
I'm going to just access this URL
directly and fix it in the browser so
this is the Vista it's an XML document
like they've already seen don't worry
too much about all the elements over
here you know frankly you should not
really be worrying about it we have
tools that helps us parse this you can
go into the details but let's leave it
as is for now okay so what I want you to
look at actually is this element over
here mr. : service there has to be one
such element in any Vista so it actually
gives the name of the service this name
of the service is geoip service and you
have something called as the board the
board name has geoip service port so
just make a note of this we'll revisit
this board again in a little while okay
so now that we have this lister right
ideally we should have all the
information required to call this web
service so let's switch back to our
Eclipse IDE
so I hope you have some kind of an
Eclipse IDE set up on your machine it
need not be Java EE your basic Java will
do for this tutorial but down the line
we're going to be working with Java EE
so I recommend you download the Java EE
version of Eclipse from eclipse.org and
have it running so I have the Eclipse
IDE running over here there are no
projects I'm going to create a new Java
project and I'll call it IP location
finder it's the name of my Java project
okay so you have a simple Java project
with absolutely no class let's create a
new Java class so this is going to be
our main a class which contains the main
method so I'll call this also IP
location finder same name as the project
and I'll place this in my package or got
character Java brings and I have a main
method selected
and I click finish so I have the main
class over here with a blank main method
so what I plan to do here is I will
accept an input argument which is the IP
address and in the main method I'm going
to take that IP address I'm going to
make a call to that web service that we
just saw the geoip web service and the
web service is going to return the
country name and I'm going to print the
country name onto the console using a
system dot out dot println ok so the
first thing I'm going to do is to check
if the input argument has been supplied
we should not run the program if there
is no input argument right so I'm going
to just do a check over here say if
argument length is not equal to 1 there
has to be only one argument for this
program so if the argument length is not
equal to 1 I shall print a message about
the usage of the program and if the
argument length is exactly 1 then I'm
going to assume that's the IP address
and I'm going to call the web service so
I will have a string IP address that
takes in the first argument which I'm
assuming is the IP address now I need to
call the web service and pass this as an
argument
how do I do that now think about how you
would do this if it were a local
business service let's say you had a
service well here locally in your
project which had a method called get
country and it takes an int IP address
as an input argument so it would be very
simple right it would be that service an
instance of the service dot get country
name and you pass in the IP address and
this meant this method returns the name
of the country it would be very simple
but since this is actually a remote web
service how does it work what actually
happens here is in the case of a remote
web service call we have to use what is
called as a service endpoint interface
we've learned what a service endpoint
two phases in previous tutorial it's
basically an interface to a service
endpoint a remote service endpoint so
how do we get that interface we don't
actually have to write that interface we
can have it generate it for us right so
there are tools which Java provides
which takes in a wisdom and it actually
generates classes for us which we can
actually use to make these calls just
like we make you know any other calls
just like this one right instead of our
local service we actually use the stub
that skills that gets generated so this
will probably be a stub so we generate
this stub using the tools the Java
provides and then we call the method on
that stub and what the stub does is it
internally translates this to of web
service call so that we don't have to
worry about all the web service details
it's all hidden from us all we need to
do is just call a method on this stuff
okay so how do how do we get hold of the
stub how do we generate the stub so we
have to use some of the tools that come
with Java for this very purpose so I'm
going to switch to my command prompt
here so I'm in the home directory what
I'll do now is I will create a temporary
directory called service endpoint face
so it's it's you know I'm going to
remove this later so you can call it
whatever you want and I'm going to
switch through this territory okay so
what we need to do is we need to use a
tool called as WS import so this is a
tool that actually comes with Java SC
you don't need Java EE for that so if
you have Java SE installed on your
machine you should have this tool called
WS import and considering that you have
Java on your path
this w is import should also be on your
path so if you just use it up yours
import command it should give you a
brief idea of what and how to use it for
so basically you have the list of
parameters but take a look at the usage
it's basically WS import and the visible
URL right it's simple just type in SS
import and type in the URL where the
Vistal is available and you have some
options which control have the SS import
works but the basic usage is very simple
okay so what is this w is steel URL the
URL is what we saw earlier right we
entered the vessel URL in the browser
and we saw the vessel XML rendered by
the browser so that is the same URL so
this is the little URL right we've
already seen this I'm going to just copy
this and let's try to run this command
with the basic option right I'll just do
a WS import and I will paste the Vistal
URL
okay now notice what happens it's
actually parsing the Vista right it
provides some warnings and it's
generating the code this code happens to
be the sei the service endpoint
interface code and then it's compiling
the code so you have basic Java code
generator it's also compiling it so we
get a dot class so we get a set of dot
class files so if you look now there is
a folder called net let's look at this
generated folder so I have the a CI
folder open over here so you have a net
and inside that observe is X and you see
all these class files have been
generated okay so this is the basic
default behavior of WS import it looks
at the visible URL parses the wisdom so
it generates the dot Java compiles all
the dot Java classes into dot class
bytecode and it actually deletes the
dart Java classes the source now let's
say you want to retain the dot Java
files so that's when the options come so
basically any modification to this
default behavior would mean you have to
go look at these options and customize
it the way you want okay so now some of
the options that are helpful here are
the the keep which says keep the
generated files so basically I don't
want the generated files to be deleted
all the torturer files need to be
reading and you have a - s directory
which specifies where to place the
generated source files so I'm going to
use these two options over here in order
to retain the source code that is
generated okay so I've deleted all this
stuff in the ACI folder let's do this
one more time and this time I'm going to
retain the source code so I'll do a
double yes import again I'll do a - keep
and a - s now the - s would need our
source directory so I'm going to create
a source directory over here I'll say
new folder
SRC okay and I'm going to use that SRC
that's the source territory and again I
use the mister you are right it's the
same mister URL so let's run this now
and does the same thing again it parses
it generates the code and it also
compiles the code but now if you take a
look so you have this the package
structure here for the class files but
you also have the source directory here
which contains the source code again
with the same package structure right so
all the corresponding class files have
this dot Java file associated with it so
these are all the classes that are
generated by AWS import don't worry too
much about what all these classes are
we're going to look at that or in much
more detail later but these classes
serve the purpose for us we can use
these as stubs to actually call the from
mode at service and now that we've
learned how to generate these stubs from
the visitor the next tutorial we're
going to learn how to actually use those
stubs in our java application thanks for
watching</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>