<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Scopes and Closures In-depth 13 - The Global scope problem | Coder Coacher - Coaching Coders</title><meta content="Scopes and Closures In-depth 13 - The Global scope problem - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Java-Brains/">Java Brains</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Scopes and Closures In-depth 13 - The Global scope problem</b></h2><h5 class="post__date">2016-04-09</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/eAYiCBb-5Q4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">but what we've seen so far relating to
scopes is something that's the behavior
of JavaScript and it has its rules but
you think about it it kind of seems
quite obvious once you realize that
functions create scopes right it's quite
obvious to figure out what's going on
then a variable is used depending on
where the scope is but if you notice all
the examples had one common
characteristic which is that all the
variables that were used were properly
declared with the war keyboard there was
never a variable that was accessed
without declaration now when the
variables are properly declared and then
they're used whatever we've learned so
far applies just fine and you know it
behaves exactly like you would expect it
to but then things kind of start to
deviate when you use variables without
declaring them we looked at the previous
video where we said that if we are doing
a read operation on an undeclared
variable it's going to result in an
error but if you do a write operation on
an undeclared variable it's going to
actually create that variable with the
knowledge of scopes and the scope chain
that we have learned so far let's
revisit that concept and see how it
works with the kind of scope loop lookup
that FIFA give look so far so let's
start with this example of a var equals
10 which is at the global scope and now
I'm going to create a function called my
FN and it is going to create a new
variable inside the function Bar B and
it's going to assign the value a to it
and then I'm going to do a consult of
log of B and again this should print the
B which is inside the scope fairly
obvious but now here's where I'm going
to do something different I'm going to
use a variable which I haven't declared
so let's say I do a console that log of
C there's no VAR c anywhere in this code
and i'm trying to do a read operation on
a variable that hasn't been declared
okay so now let's call the function my
FN and now the question is what gets
printed on the console well let's set up
the scope chain for this now we have two
passes one is to play the role of the
compiler which accumulates all the bars
and the second pass is the keys to play
the role of the interpreter which
executes the code so let's play the role
of the compiler here now compiler starts
with line
one it looks at bar a so it creates a on
the global scope next it looks at this
function
it creates the my FN e Ripper on the
global scope and now it examines this
function and now you have a bar be
inside so it creates be in the my FN
scope and there are no readable
declarations in these two lines is just
accessing the variables and now it comes
to the line 9 there is no variable
declaration here so this is our scope
chain but the compiler is done and now
the interpreter runs and the interpreter
looks at the first line it's going to
look at this part like we've talked
about a good Sten it's going to examine
the global scope to see if there's a
variable Ghale now it finds it and it
uses it now this is a function
declaration the intruder has nothing to
do with it for now
now here is a function execution it's
executing a function called my FN again
it looks at the global scope and says
hey do you have a variable called my FN
there is a variable called my offend
which is a function so it gets it and it
executes it now we are in line for line
for game interpreter looks at this part
B equals a now it looks to the my F and
scope to get B says do you have B you
get B now it checks for a as well it
says hey my FN scope
do you have hey my F in scope does not
have it so it looks one level up and it
looks at the global scope so a global
scope do you have variable a local scope
says yes and the value is stand on so it
uses the value 10 and it assigns that to
the in a B contains the value then here
it does console that log of B of course
it looks at console goes all the way up
to the global scope and that will repeat
that but now it has to print the right
it's treating B they say my offense
scope
do you have B there is a variable B
inside my - scopes which when you use
that instead of print the value 10 I was
going to come to line 6 the line 6 test
control that log of C now let's say it
looks up console that's happy and now it
wants to look up C let's say say my FN
do you have available that the name see
with my friend says no in the scope
there is no variable data name see now
it goes up to the global scope and so
you say global scope do you have a
variable good to me
see now the global scope say is no now
what the interpreter does is since this
is a read operation and it is not able
to find a variable it doesn't know what
to read from so it is going to throw an
error okay this is where an error is
thrown so it look it goes all the way to
the global scope to see if there is any
variable and even after it reaches the
global scope if there is no variable
that's available in the global scope
it's trying to read a variable it cannot
find the variable to read from so it's
going to throw an error now here is
where it's different if you were to
write to it okay let's say instead of
reading instead of using a read
operation that you have a write
operation that you have a C equals 100
okay now this there's a write operation
on C you're assigning the value hundred
to see you're writing to C now it's the
same flow again and let's say we come to
line 6 and now you're writing to C and
now the interpreter says hey my offense
scope do you have a variable width see
my friend scope says no then it goes to
the global scope and checks if there is
a variable with the name C the global
scope says no but now what happens is
since it's alright it does not give an
error okay it says I don't have to read
from it I'm writing do it so if the
variable does not exist let me actually
create one maybe the developer needs
this to be created so the interpreter
assumes the need for this variable to
exist and now it creates it the question
is which cope does it create it in now
at this point of time the interpreter
has checked all the way up to the global
scope and you know it's looking at the
global scope now so when the interpreter
creates the variable the name C it
actually creates it in the global scope
so this line line 6 actually creates the
variable C in the global scope it
doesn't create it in the my effing scope
even though the line that causes the
variable to be created is inside the my
effing scope okay it happened because
you didn't have a bar here just suppose
we had a war here what would happen is
this would have been something that the
compiler would have looked at and C
would have been in the my FN scope but
since you did not have a war here the
first pass the compiler pass is
skipped through this right addy didn't
even look at line six and the
interpreter checks all the way to the
global scope to see if there is a
variable with the name C and since it
doesn't find it it actually creates the
variable C in the global scope which is
all kinds of bad you remember how many
times I've told you in this course that
global variables are bad but here it
turns out JavaScript has this default
behavior of you know looking at
variables which I undeclared and if it's
a right operation it actually creates
variables in the global scope so yes
javascript is particularly sensitive to
global variables because you load a
bunch of scripts in the same namespace
in a window so global variables are bad
in any language but it's especially bad
in JavaScript and add to that javascript
has this weird behavior where if you use
a variable without declaring and you do
a write operation on the variable you
actually end up creating the variable in
the global scope I'm going to talk about
how to prevent this from happening a bit
later but remember that this does happen
so moral of the story always use VARs to
declare your variables</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>