<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Angular 1 Services In-Depth 15 - Saving updated data using PUT | Coder Coacher - Coaching Coders</title><meta content="Angular 1 Services In-Depth 15 - Saving updated data using PUT - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Java-Brains/">Java Brains</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Angular 1 Services In-Depth 15 - Saving updated data using PUT</b></h2><h5 class="post__date">2016-10-21</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/8xaxpTAHL1k" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">in this tutorial we're gonna add some
edit functionality to our contact
application right now it's a read-only
application you fetched the data and you
can see it but you cannot change it what
we want to do is be able to change this
and then the change is complete click on
a Save button and have it persist on the
server typically this involves making a
REST API call to the server with a put
request and making a call to that
endpoint where you want to update once
you make the put request to the endpoint
you want to change and then you pass in
the payload that you want to update
right so that's what you're going to be
doing in this tutorial I mean a couple
of changes to the code so I have broken
out the address into multiple fields you
see here I have a street city and state
paragraphs right each one of these is
into a separate paragraph now so as you
can see here our street city and state
show up separately this was in one long
line before and I'm kind of broken it
down so you can see the multiple values
over here okay
now we want to be able to make changes
which means that we could have to have
some kind of an edit button over here
and then when you click on it you want
these things to be editable so let me
actually go ahead and create the button
here so I'm going to go here and well
actually before I do that I'm going to
have these two big columns rather than
the rows one below the other so I want
the list of contacts to be on the left
and then the details to be on the right
and this is actually fairly easy to do
in bootstrap the way to do this is by
doing a call md6 so this class basically
breaks down the whole page into a grid
of twelve elements and you're basically
saying this one is a grid of six
elements in this one's a grid of six
elements I'm not going to go into the
detail but this is basically all we need
to do to make this be the two column
layout let me say row equals class
equals row and this whole thing is going
to be inside or low
alright let's refresh the page and given
enough let you see here it's basically
broken down into two columns you click
on one and here you can see it's
basically the same functionality just
the layout has slightly changed I'm
going to format this a little bit and
let's now add the edit button now I'm
going to add a button at the media body
so you see here you have the contact
information I'm going to add a button
over here so I'm not gonna make it to
pretty I'm just gonna have a button here
it says edit nothing too fancy or
stylistic about this we're just worried
about the functionality so here you go
we have an edit button over here now
when you click on an edit button it
doesn't obviously do anything right now
but what we want to do is change these
address elements into text boxes that
can be editable if you've seen my
thinking in angularjs 1 course I you
know I did one approach which was flag
biggest I had an edit mode flag and if
the page is in an edit mode then these
text elements will be text boxes and the
page is not in an edit more it would be
labels as we have here ideally what we
would like to use this we use some kind
of about state but the concept of routes
is beyond the scope of this course I'm
going to just do a quick edit mode like
implementation so let's go to the
contact controller here and I'm going to
have a flag called edit mode and it's
going to be false by default and I'm
going to have a method here set at it
more or let me call the stuggle edit
mode there's going to be a function
which basically toggles the edit mode so
this dad edit mode is a toggle after
start edit mode so if edit mode is true
it makes it false and if it's false
makes it true now I'm going to call this
function whenever the button is clicked
so the button here is the edit button
I'm gonna say ng click equals ctrl now
there is a button which when clicked is
going to toggle the edit mode but you're
not really hooking anything into it
so let's actually use text boxes here to
convert the display into a text element
then there is more is clicked so I'm
going to take these fans and create text
boxes here so I'm gonna say input type
equals text and then the ng model
because I need to back this but the data
let me see this is the model that drives
this and I'm going to copy this over and
of course change it so that each element
points to the right value and of course
a notice that I'm just using a few
fields I don't want to make all those
fields editable because it's really no
different than what we're doing over
here just the basic set of fields now
here you can see we have the label and
the text box because we have put the
label and the text box here what we want
to do is hide the text box when edit
mode is false and hide the label if edit
mode is true so that's a bunch of ng
shows and ng Heights so I'm going to go
to the spans here so in these pants I'm
going to say ng hide
ctrl edit mode and then the inputs I'm
going to have ng-show equals ctrl
targeted more because I want the textbox
to show then the edit mode is turned on
so let's try this again okay we have
this button SMS one text box
let's see edit mode now it gets into a
text box I click on it again it goes
alright so this is more like it so we
have an edit mode option where each
element here gets converted to a text
box but it's not really conversion
because we know we are doing both and we
are showing and hiding selectively but
that gives an impression that it's
changing to a text box all we need now
each of these text boxes when they show
up is bound using ng models if I were to
change this what we're actually doing is
changing the object in the controller so
the controller has the contacts object
alright right so this is what's getting
changed what we need to do is when we
actually are done with the editing we
want to be able to save the changes and
have it persisted on the server
alright let's actually implement this
Save button right now so the Save button
there's gonna be kinda similar to the
edit button I'm actually gonna take this
over here and call this save and I also
need to shore hide these buttons
depending on the edit mode so when the
edit mode is set to false then I want
the edit button to show up and the edit
mode is true then we have text boxes so
I want the Save button to show up so I'm
going to have Angie hide edit mode for
the edit and the ng show edit mode for
the save
right when the edit mode is on I want
the edit button to be hidden and the
Save button to show up let's try this
again alright click on edit now the
editing button
goes away and the save button is what
stays now I don't have to do any save
implementation and it still
automatically gets persisted in the
browser's memory and what I mean by that
is let's say I call the city as one two
three right I click on save it actually
gets persisted over here and I switch to
another user go back to that user
receiver it gets updated the reason it's
doing it is because this view is bound
to again like I mentioned the contact
object on the controller the problem
however is if I were to refresh this and
I click on that user again that goes
away so what we want to do is persist it
to the endpoint we want to be able to
make a REST API call and update it now
how do I make a restavek on an update
that endpoint so here's the API URL and
I can access a particular users endpoint
by just typing that user ID right this
gives me the user information for user
ID one in order to update this
information what I need to do is not a
get request to this URL but instead of
put request to the URL where the put
body is this updated data if I do that
then it gets saved in the endpoint so
what I need to do is have the Save
button which is right now just calling
the toggle edit mode I want that to
actually send a put request to that
endpoint I'm going to go back to the
HTML and I'm going to make this save
save user and I want the save user
method in the controller to be a
function that does toggle edit mode but
then what it also needs to do is persist
dot data and what's the data that needs
to be persisted the data that needs to
be persisted is the start selected
contact this is the data right so I'm
gonna call this user theta equals the
start selected contact now I wish there
was a service method which took this
user data and saved it well let's
actually create that so I'm gonna go to
contact data service
dot save user and I'm going to send the
user data all right now this method is
basically in charge of all the all the
changes that needs to be done right as
it has to figure out what the URL s and
then make a put request let's actually
create this method in the service go to
the service here and self dot save user
it's going to be a function and this is
gonna contain the user data now how do I
make a put request to a particular URL
well I do a dollar HTTP dot put so again
in dollar HTTP has a bunch of methods
for each HTTP method like it as a method
forget this method for post here we're
using a method for put let's figure out
what the URL is later but the put method
also takes in a second argument which is
the put body similar to a post method
which also sticks in the second argument
which is the post body there's the get
method a gonna get body well there's no
such thing as a get party in HTTP so it
really doesn't but for the put method
your are you first argument is a URL and
the second argument is the put body here
in this case is just use a data ok so
all we need to do now how did you figure
out what the URL as well the root URL as
localhost 3000 slash contacts and this
is going to give you everything right
what we want to do is figure out what's
the URL for that one user and how do we
find that
but this object has a property called ID
which contains that ID so what we need
to do is get that user's ID and add it
to the contact so if we're getting the
URL for this user just get that ID which
is one here and then append slash one to
it and now we have URL for that user so
what we need to do here is get the root
URL and append that ID so I'm gonna get
the root URL here and then of course the
slash and then add user data dot
I D alright now once this is done but
this is again gonna be a anything cot
right so it's going to return a promise
so I'm going to do a dot then on top of
it and then call it a function which
takes in a response and I'm just going
to log this right now let's say console
that log responds right I'm gonna see if
the controller as well alright so let's
test this out I'm gonna click on a user
click on edit change a field and of
course I'm gonna open the console and
then I click Save you get a response
back which is the result of the put and
if you examine the data well this is
actually returning the updated value so
let's check at the city where updated
location city is updated when I click
refresh the browser has cleared its
memory and it's gotten from the service
click on that user again will they go
the updated value is now showing up so
this is a very simple put implementation
but what if you also want to do is have
some kind of an alerting mechanism so
that the user knows when the change
happened so let's do that at the next
tutorial</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>