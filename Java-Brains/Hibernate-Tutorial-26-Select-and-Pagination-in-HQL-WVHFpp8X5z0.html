<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Hibernate Tutorial 26 - Select and Pagination in HQL | Coder Coacher - Coaching Coders</title><meta content="Hibernate Tutorial 26 - Select and Pagination in HQL - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Java-Brains/">Java Brains</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Hibernate Tutorial 26 - Select and Pagination in HQL</b></h2><h5 class="post__date">2011-06-03</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/WVHFpp8X5z0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">we've seen what HQ elders on how to use
hedge quail to pull up all the records
from a particular table in this tutorial
we're going to look at a few more ways
in which we can configure the results
that we get from using HQ
before we get started there are a couple
of changes that I'd like to make to our
code that we wrote in our earlier
tutorial when I use generics and this is
actually a list of users so I'll declare
it as a list of user details so what I'm
doing here is that I'm getting the
values of all the users in the list and
we know for a fact that these are a list
of users so I am going to you know use
the list of user details as generic and
I'm going to cast this because as far as
the query rat list is concerned since
returning des it's just returning a list
okay so now what I will do here is after
I have closed the session instead of
just displaying the comment I'll display
all the records so say for
so see users and just kind of plan it
get user name it's as simple as that now
this would be helpful because of a few
things that we're going to look at in
this tutorial we need to understand the
data that's getting pulled up ok so now
I have again I'll just quickly recap
what we did in our earlier tutorial we
used a query object to pull up all the
records from the user details table what
we did was we mentioned the class name
and hibernate managed to pull up all the
data and we also saw how to use a where
to us to restrict the data that we get
remove the where clause for this example
and then once we use the query object to
get the list by using the query dot list
method then we you know use this we got
this user list and we displayed the
count now what we're doing is reading
the name of each of those users just to
make sure everything is right we'll run
at once and see that we are getting the
list of users fine ok so now oh the
change that we note that in this kind of
query when it compares to a sequel query
this is that first of all hibernate does
a lot of work for us it takes the data
that you know it's a result of the query
and it converts it into entity objects
and it hands it over to us in a way it's
good because it saves a lot of trouble
but then the problem is that you do not
have a lot of control for example so you
want to have control over what Colin's
get pulled up you don't want to pull up
the entire object say for example I just
I'm just interested in the user name in
this example itself I have I have no
need for the user ID but hibernate
manages to pull that up as well so
that's the first thing the second thing
is I do not want all the users to be
retrieved
I want to I want to do a page nation
kind of mode I want to get the first set
of users and then fire another query to
get the second set of users and so on I
don't want to get the whole list
users because again this is going to be
a problem if the number of views is a
huge you don't want to get all of them
at once so these are the two problems
that you're going to address now the
first thing that we're going to look at
a space nation how does hibernate
support pagination the way hibernate
supports pagination is configuring this
query object that we've got over here so
now that I have created the query and I
can configure what is the page that I
need from the database I do that by
using the query dot set first result now
the query dot set first result allows me
to set what is the start of my results
that I'm interested in now if I you know
I want to start from say a row number
five so I do a square e dot set first
result five now this will make sure that
among the data that gets pulled up let's
say for example it was a select star
from okay and you know you got ten
records so what query dot said first
result would do is starting from the
first record of a select star it would
go fire results below and then that
would be the first result so I can skip
the first set of records and I can start
my result the one that I'm interested in
I can start from any one particular
point so that will be the first result
for me okay so there's one more this one
more property here called query dot set
max results query dot set max results
allows me to tell hibernate what is the
maximum number of records that it needs
to pull up for a less query not less so
I can say I need to say four records so
what happens is happening it will pull
up records and then once it reaches four
records it's going to stop that and it's
going to return me the list even though
there are more records available so
essentially what we are doing this we
are starting from a particular point
which
I can configure and we are ending at a
particular point which I can configure
so this is in essence how you can manage
pagination so I can specify the start
and end points the start point is by
directly mentioning the number of
Records I mean the the enth record from
which I need to get the data and the end
point is by specifying the number of
Records that I need so it'll be this
Plus this that would be the end so now
let's have a look at let's have a look
at what's the data that I beneath pulls
up in this scenario so now I run this
started from record five since our our
list of users is not starting from zero
it's starting from one so the first
record is user six and then what it is
done is it has pulled up four records
because we have said the max result is
four so even though there is a user ten
it's not pulling that up it's stopped it
using that and not what's happening here
the configuration that we've given has
actually affected the Select query so
here you can see there is a user detail
limit and offset so these are the two
properties that you know that is a
direct result of our configuration so
whatever configuration you make it gets
translated to the sequel query that
hibernate generates so you're going to
end up with only those records because
hibernate only queries for those records
so this makes it a more efficient first
of all and then you can control the data
that you can get out of hibernate so
this is a this is the one way you can
use a space nation so what what ideally
you would do is that you'd probably have
a method which takes the start point and
the end point or the start point and the
the number of results and whatever you
know view you have to configure the the
pagination maybe you have a drop-down
for number of results per page that
would probably go to the guiltiness set
max results and you probably have page
by page view with the next in a previous
and each page would decide what the
first result is so this makes it very
simple for you to implement pagination
in you know any way that as a web page
or as a simple java application as long
as you had you've written a method which
takes these two parameters and then
you can dynamically get the right page
bypassing the right parameters okay so
now patient is done let me look at
another option another configuration
that we can do earlier I told you that
if you do a create query it's going to
pull up the entire record so when I'm
saying from user details each object
that it gets pulled up has all the
values populated in it now I have in my
user details I have user ID and username
so in this list this list that I get
here the user name and the user ID is
populated of course we've already seen
lazy loading so if the you know the
property happens to be a list or a
collection or something like that then
hibernate does do lazy loading unless
you access a gator it's not going to
load from the database but let's say all
our data are you know first level data I
have I have a little I don't have any
lists here but I have a huge number of
member variables here and the problem
here is that I'm not interested in all
of those member variables say this is
all and I'm trying to do I'm just trying
to print the user names and now if my
user object has 10 member variables
there's really no point in pulling up
all the ten member variables you would
want to configure hibernate to pull up
only the user name so you can do that by
actually writing the whole select query
so here earlier we had written just a
from user details so what I'm going to
do now is I'm going to write select and
the I instead of the column name what
I'm going to do is I'm going to give the
the member variable name again so this
is no way different from what we're done
earlier so it sits in it's all in the
object paradigm so I'm going to say
select member variable name from class
name so what it's going to do is it's
going to end up with just this name it's
going to give me a list of names it's as
simple as that but there is one thing
that you need to note I'm doing a select
name from user details so I'm just
selecting one field I'm just selecting
one value so
it's going to be a list of a single
value so what changes here is that the
list that cabinet is going to give me
here it's not going to be a list of user
details it's going to be a list of a
string because I'm just pulling up one
value and that value happens to be a
string so instead of giving me a list of
objects this time since I'm just pulling
up the user name it's going to give me a
list of user names and since user name
happens to be a string it's going to
give me a list of strings so if I run
this now it's going to show me an error
so let me save and run this so there you
see it's giving me a class cast
exception because this list is cannot be
cast into a list of user details it's
actually a list of strings so let's
change this part of the code so what I
will do is instead of having a list of
user details I'm going to have a list of
strings so let's say let's string user
names equals query dot list I'm casting
it to a list of strings so this will be
user names and this will be a string so
now what I can do is in my system dot
out dot print I can directly print you
because you happens to be a string so
let me save and run this so there you go
I'm able to pull up the names and the
advantage here is that I am limiting the
data that happening pulls up only to the
record that I'm only to the field that
I'm interested in I don't wanna pull up
pull up the whole object I have more
than one field here so let's say I enter
select user ID comma user name from user
details then what will happen is
hibernate would return via list off this
so each member of the first-level list
is going to be a list of two strings
which is the user ID in the user name so
you can enter any number of column names
or the field names you want and it's all
going to be added to a list there are a
few other ways we can configure this I'm
not going to go into the detail but
I'd recommend you try them out I can say
select new map off you know user ID
comma username in which case I get a
list of map objects so that it's going
to return me a list and each member of
that list is going to be a map and the
map is for the user ID and the user name
so these kind of configurations are
possible you can control what is the
object that you get in the list it's
going to end up in a list anyway so the
first level is going to be a list but
you can configure what each member of
the list is going to be so before we
wind up this one last thing I'd like to
mention here the few other things that
you can do in a normal select will still
apply here so I can say a select max off
user ID so all the aggregation functions
like max sum all those things will still
work so hibernate is going to return me
only one value here so it's just going
to get one value and I can print that of
course I'll have to change this so I'm
not going to go into the details it's
going to return me a list with a single
integer and the integer is going to be
this maximum user ID so you can you can
probably try out all these things with
the Select most of the features that a
sequel select has will translate well to
the Select of hql the only thing you
need to notice that instead of using a
column name you will have to use the
property name of the class that you're
trying to pull up</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>