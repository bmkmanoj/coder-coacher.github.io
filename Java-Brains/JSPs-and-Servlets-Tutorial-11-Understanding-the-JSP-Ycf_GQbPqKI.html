<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>JSPs and Servlets Tutorial 11 - Understanding the JSP | Coder Coacher - Coaching Coders</title><meta content="JSPs and Servlets Tutorial 11 - Understanding the JSP - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Java-Brains/">Java Brains</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>JSPs and Servlets Tutorial 11 - Understanding the JSP</b></h2><h5 class="post__date">2011-05-08</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Ycf_GQbPqKI" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hi and welcome back in a previous
tutorial we saw how to write a simple
JSP and write some java coordinate this
kind of script tags and Java cord inside
script tags sometimes throw people off
we know that in Java everything is a
class so if you're a Java veteran and
you're new to JSP you might ask what's
happening here where is the class there
are a couple of experiments that we can
conduct to understand this in a bit more
detail let me do one one small change
here first we have a method here inside
the definition tag that I had explained
earlier what happens if i take this
method and ID remove that out and then i
put it inside this tag itself so this is
a simple script tag it's not inside a
method definition tag now what happens
and I already see that Eclipse is
throwing me an error but I will ignore
it and press save let me try refreshing
there you go we have exception and the
exception is you should returned as a
status 500 which makes sense this is how
the web application handles it now look
at the error here it says this syntax on
token PIN brace is not expected the
semicolon is expected so this is
commonly found when you cannot define a
method so it's complaining that it
cannot have a method definition here
it's having a problem with this open
brace now okay now this is this is one
thing that need about this back to how
it was before yeah so now we have this
again
now let's make sure that everything is
fine yes everything is back to how it
was before now there's one other thing
that I can do here and we first do it
and we'll try to analyze how that works
now let me open up a new script tag
again I can open up as many of these as
I want I will have a like a for loop
here
have to close this here now inside the
for-loop I will say out dot println let
me put a break here I equals just blend
the value of I so you've now when i
refresh this I see the value of I
getting printed here which is fine but
now I'll make one more change here we
know that the static value can be
removed out so I don't want to print
this inside an out dot println so what I
will do is I will delete this line and
I'll close this script tag so inside the
script tag we just have a for loop open
but it's not closed yet so I'll have
another script tag where the for loop is
closed here's the closing brace your
mother's in this ok so what I've done
here is I have put two script tags one
where the for loop is open with an open
flowery brace and the other script tag
with the for loop closed this works you
know the the compiler sees this as the
closing brace of this one so now what's
interesting is if I type some value here
let me put the same text here and then
I use the equal to I value which is the
person equals where I'm printing out the
value of I now notice what happens it's
still printing that so let me make a
change here so that we know the effect
okay there you go so this is interesting
we have a script tag and we have Java
code inside it and now we have a simple
HTML text you also have this print where
we are printing on the value here but
the Java code to close this for loop
which is disclosing places inside a
different script tag and the text in
between these two script tags are
getting executed as if it were a part of
this Java code so to explain these two
behaviors you know the first behavior is
you cannot have methods inside the
script tags and the second behavior is
you can have text inside in between
script tags and then they are actually
treated as if they're a part of the Java
code and the script itself in order to
explain these two behaviors let me
explain how the JSP actually works well
if you haven't guessed it already it's
the way it works is this JSP is actually
converted to a class so this whole test
or JSP see here is actually converted to
a Java class by Tomcat and Tomcat
execute this Java class now what is a
Java class it gets executed gets
generated by this JSP it's actually a
servlet so every JSP is actually a
different way to write a servlet and
once you save the JSP and deploy Tomcat
takes this JSP and then converts it into
a servlet and it's actually the servlet
that runs now if you had to write the
same functionality inside a servlet all
these code if you have to write it
inside a servlet how would you do it
you'd write all these insider to get
method obviously because we are using a
get method here because you're not
passing any values and it's not a post
so the default value is a get method so
that's exactly what Tomcat does as well
every code inside a scriptlet is
actually converted to code inside a do
get method so it takes all this code
whatever you write inside a scriptlet
takes all these code and adds it to a
loop get method that it generates for
the servlet class that it generates for
this JSP now what happens to these
static ticks that's coming up in between
the way Tomcat reads it is this say this
BR for example or this text the value of
KS so this has to directly go to the
output so how would you do it you would
obviously put it inside a out dot
println I'm sorry the printwriter dot
println so that's exactly what Tomcat
does as well it takes the print writer
and then it passes all these text into
the output stream and that's how we get
this output here now you should be able
to understand why we cannot put this
method declaration inside the script tag
because all this code is going into a do
gate now if you put a method definition
inside the script tag then you and the
method definition goes inside a do get
and that's the reason why we got the
error here earlier saying that we cannot
have a method definition because
obviously you cannot have a method
defined inside another method that's the
reason why we put this other tag which
is a definition tag whatever code you
put inside the definition tag stays
outside the do gate and this forms a
separate method definition inside the
class now let's have a look at the
servlet that gets generated by this JSP
we can actually look that up inside the
tomcat folder now let me open up the
Apache Tomcat installation now Tomcat
generates the servlets and applies it in
a temporary folder which is different
from the folder where we have our
application
so this temporary folder is called work
and this might be different depending on
the version of Tomcat that you're using
but it should by I think it should be
called work anyway so here we have our
localhost and there you go here's our
simple servlet project and look at the
package name that's given its OGG apache
JSP and here you go we have our test JSP
dot java and test JSP dot class so our
test our JSP that we have written here
has been converted to test underscore j
speed or java and it is in the org
Apache JSP package and it's also compile
it and it has the test a speed class and
that's what's executing and rendering
this output so let's have a look at what
test JS b dot java looks like okay I've
increased the font of it here so we can
see there is this package which
auto-generated it's all red Apache dot
JSP
all our J's piece converted to servlet
will have this package now it has a few
imports which is required again these
are sublet imports and now you have a
public final class test JSP this is the
name that we're going to get its the JSP
name underscore JSP that's the name of
the sublet and it extends a class called
HTTP JSP base we look at what this class
is in a little while but uh have a look
at this now we have a method here this
method was there in our definition tag
and this method actually becomes a part
of this class that's generated because
of this JSP now let's look at a few
other things here we have a init and
destroy let's not worry about that as of
now we have a service this service
acts as a common method for the do gate
and the do post because here when we
write our code inside the JSP we are not
actually telling Tomcat whether this has
to be inside to get or inside a do post
so what Tomcat
des whatever code you put in the JSP
instead of putting it inside both the do
gate and the do post because we don't
know which one we are actually looking
at what it does instead is it puts
inside this JSP service and this JSP
service forms a you know it catches both
the gate and the post methods and it
does have all the code that we have
written here so here we have some
initial text worried about that as of
now here you can see it has out dot
write and this out dot write is there
for every static line that we have
inside our JSP so here you see we have a
doctype which is the static line we have
not come to this line yet so just ignore
it for now we'll look at this in the
next set of tutorials but the static
line this is where it's actually no
different from the HTML that we saw see
this is the HTML and this is the JSP so
these are all HTML code
so all these HTML code have been
converted to out dot right so these are
actually going as Java statements and
each one of these statements have been
converted they have even been escaped as
you can see here there are escape
characters that have been added wherever
required and they have been converted
into simple Java statements now the
non-static code here now after all this
code and of course the definition we
have already seen now after all this
code here is this where the script
starts so these script statements are
actually converted into direct
statements inside the method which is
obvious because we want these to run so
so no matter how many script tags you
have here and go do you have here all
these are going to get up ended one
after the other and if you have static
lines of code in between they get
converted to out dot right so this
actually explains the other question
that we had how does this for loop work
so the value the for loop works is this
script tag gets directly converted to
one line of code inside them inside the
method which is a for loop initiation
this static code
this one gets converted to dot right as
you can see here all this gets converted
to a dot right and then when we are
actually printing out this value of y so
it just has to print out the value of I
so here just as out dot print of I and
then the remaining code and then it
catches and then it has the closing
brace for this for loop so you have a
few catch and finally blocks of code
also but let's not worry about that for
now so to get an overall idea of what's
happening here is static code is being
converted to ordered right
the definition is being converted to a
you know methods inside the class and
then all these executable pieces of code
inside the script tags are actually
converted to code inside the service
method which gets executed on get and
post</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>