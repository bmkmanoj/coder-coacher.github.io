<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Spring Tutorial 34 - AOP XML configuration | Coder Coacher - Coaching Coders</title><meta content="Spring Tutorial 34 - AOP XML configuration - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Java-Brains/">Java Brains</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Spring Tutorial 34 - AOP XML configuration</b></h2><h5 class="post__date">2011-10-20</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/ewWzxcNnI7k" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">welcome to this tutorial in the past few
tutorials we've seen how we can
configure aspects and advice and we've
done all the configuration using
annotations we learned how we can write
an aspect annotation to define an aspect
and we learned all the different advice
types so you know different defined as
different annotations we have before
after after returning after throwing
around and we also looked at the point
cut annotation which allows us to define
a point cut in one place and then apply
it to different advice methods in
addition to defining aspects and advise
methods using annotations there is
another way we can perform all this
configuration and definition and that's
in this spring XML which is the XML VIII
after we look at some of the XML
configuration we'll also discuss about
when to use what when would you choose
to define aspects using XML and when
would you rather define it using
annotations so let's transfer some of
these configuration into the XML format
first let me remove some of the advice
that we do not use here I'm going to
remove all these things we'll just have
one advise method over here let's remove
this and I'm going to change this around
advise to use this expression which is
the all Gators
okay so well this aspect is very simple
now I have defined one point cut which
is you know which turns on the execution
of all methods that start with the gate
and then calling it all Gators and my
all Gators has the point gate expression
for this around annotation and this
around an addiction is annotating this
advice method over here so let's run
this once to make sure everything is
good yes everything is good so far so
now let's transfer this configuration
into an XML so what that means is this
aspect will not have any annotations it
will not have this annotation will not
have if the you know the add advise
method annotation it will not have the
point cut annotation everything will be
configured in this spring XML so let's
open up the spring XML so the one
configuration that we've already set for
the aspect is defining the beam for the
logging aspect well we have actually
given a name as well as defined the
class while the name is not really
required because we're not using this
beam anyway this could be an ellipse
anonymous beam but then you can add a
name also so now what I will do is I
will configure this aspect all the
annotations that we have defined for
this at Specter will configure that in
this spring XML so in order to do that
what I need to do is I need to have a
particular AOB tag called AUP config so
AOP config will contain all my aspect
configuration and you know all the you
know specific method related
configuration like the around and the
point cut everything will go inside the
AOP conflict tag so now what I'll do is
transfer all the annotations into XML
configuration one by one so let's look
at the first one at aspect for the
logging aspect to add this moment this
logging aspect has been configured as a
beam now the only thing that tells
spring that this is an ass
is this ad aspect annotation now if we
remove this we need to tell spring that
this is an aspect that we are looking at
it is not an ordinary beam so if we
remove this annotation we need to
transfer that to XML what we need to do
is we need to provide that information
over here and I can do that by doing a o
P colon aspect but the a up equals an
aspect takes in the ID and the reference
let's not look at order at this moment
now the ID there's the ID of the aspect
I can give it say logging aspect and I
also need to give a reference the
reference is reference to the beam that
I have defined for the aspect now I will
define the logging aspect as a beam call
logging aspect so I will use that as the
reference over here okay
so this line is equal into marking the
aspect as ad aspect over here know
whatever annotation we had over here
called ad aspect is replaced by this
line of XML code over here okay so now
that takes care of the first ad aspect
annotation now let's look at this point
at that point cut is containing two
information over here one is the name of
the point cut and one is the expression
so let's let's put that over here now
this needs to be inside the aspect I so
I'll open this here and I'll create a
new tag your B colon point cut and the
expression the same as the expression
here
okay and this also takes the ID so the
ID would be the name that is used to
refer to this point good now I'm using
the oil Gators name here so I'll use the
same name for the ID here as well I'll
get us so this defines a point cut
called all Gators and having the
expression as this inside the logging
aspects of this is equal into having
this these two lines of code over here
so we have a blank method annotated with
a point cut annotation we do not need to
use this anymore since you already have
that point
expression defined over here okay so
that's done now we will have to look at
this annotation the add around marks
this particular method as an around
method and then it also you know refers
to what point that expression for which
this advice needs to be applied so if we
remove this and transfer this
configuration to XML what we need to do
is you need to use the AOP colon around
now the AOP colon around takes in a
method that meter method happens to be
the method of the slogging aspect which
is the my around advice so if you have
multiple methods and you need different
methods to be configured with different
advice types you would use the
corresponding XML configuration over
here here it's AOP colon around you
could use AUP colon before after after
throwing after returning all those
things okay
so now again I can use the point cut
reference the point cut reference is a
reference to the point get that we have
already defined so here we use a
reference to all get us we know our
annotation here had a reference to all
get us so that's what I'm going to do
here I'm going to use all Gators as the
point cut reference so in summary what
we're doing is
we are defining an aspect called logging
aspect that refers to the beam that
we've already defined we are defining a
point cut called all Gators and that
contains the expression and then finally
we are defining around as one of the
methods off the aspect and then I'm also
mentioning what is the point at
expression for which this method has to
get executed as advice so this is a
complete configuration for what we had
in the logging aspect so let's save this
save this and then run this once again
to make sure everything is fine yes so
the advice is getting executed but the
difference here is this aspect class
there is no different from any other
class well we are not having any aspect
related configuration we are not having
any point cut related configuration
everything has been transferred to the
XML so everything sits inside up here be
config element and I have defined my
aspect insider here P colon aspect so
there is there are other ways we can we
can configure this now let's say you do
not want to define a point gate
configuration we saw how inline
configuration works so I could write the
add around and then I could I could
write the point gate expression itself
over here I need not have to define a
point cut so that also is possible to
what we need to do is instead of having
a separate AOP colon point cut what we
could do is in the around instead of
having a point cut ref we could have a
point cut itself so this point cut
expression could be mentioned in line
fix this here we do not need the point
contrivance or a separate pointer
definition so this would be an
equivalent of an in line point cut
expression so I have an around energy
you know our own XML tag which says this
is the around advice in this is the
point get expression so
just to make sure this works yes this is
also okay fine so thus you know I'm not
covering all of the intricacies there
are there are a few ways in which we can
you know configure all of the things
that we've seen so far say for example I
have let's take another advice type
before now you have our names which
allows you to pass argument names as
input so you can pass the arguments that
go to the method we saw that earlier by
defining a point cut expression and then
having those arguments as method
arguments you can define those method
arguments over here and these arguments
are going to get passed on to their
actual method so this is in summary a
brief introduction to XML configuration
in spring AOP well personally I'm a big
fan of annotations and I would like to
configure all these using annotations
whenever possible but then there are two
reasons why we need to know how to
configure all these things in XML first
of all if you're looking at some legacy
code which was written before annotation
support was introduced in Java most
likely all the configuration over there
is an XML there might be new
configuration set could be added so you
could have a project that has a mix of
XML and annotation configuration but all
the code that was written before
annotation support would obviously have
XML configuration so it's it's good to
know what these configurations are in
XML format the second thing is whenever
you write a new aspect configuration you
always have a choice about whether you
want to configure them using annotations
or using XML the reason you would choose
annotations is of course it's simpler
and it's more readable and one
predominant factor where you would want
to choose XML configuration is if you
treat these aspects as configuration
rather than functionality what I mean by
that is let's take the example of
transactions transactions are a part of
the functionality for most cases and
whenever you write transaction aspects
you want that to be a part of the
functionality and you would want them to
be annotated but let's say you have some
kind of a debugging logic that you want
to bring in and out during the lifetime
of the application and you don't want to
build the application all over again
just to configure it then it would make
sense to have them in the XML
configuration</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>