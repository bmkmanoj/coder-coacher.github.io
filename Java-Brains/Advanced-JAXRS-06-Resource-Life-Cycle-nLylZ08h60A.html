<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Advanced JAX-RS 06 - Resource Life Cycle | Coder Coacher - Coaching Coders</title><meta content="Advanced JAX-RS 06 - Resource Life Cycle - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Java-Brains/">Java Brains</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Advanced JAX-RS 06 - Resource Life Cycle</b></h2><h5 class="post__date">2016-01-08</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/nLylZ08h60A" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">you
in this lesson we're going to learn
about the life cycle of resource what
causes the resource to be created when
does it get initialized let's learn
about that ok now what I have here is a
copy of the first project of NIEM that
advance checks are 0-2 it's just exactly
the same as advance Jax r01 just a name
change if I run this I should be able to
get to the exact same location so
everything is the same what I'm going to
do here is let make a change to the
resource right we have this my resource
class which has a slash test map to a
hard-coded string value now in this
resource class what I'm going to do is
add a member variable I'm going to call
it a private I'm creating a variable
called count and now in the test method
the method that maps to the slash test
this is the rest API I'm going to do a
count equals count plus 1 right and here
I'm printing out
the message with the count right I want
to I want to return back in the response
how many times this method was called
okay so I'm having a local variable I
met a member variable called count and
every time there is a call to the API I
increment it and then either turn how
many times that's what's called okay now
let's access this this was called one
time okay great now what happens if I
access this again any guesses still one
no matter how many times I click this so
many times access this it's always gonna
return one and what's happening here
what's happening here is this is being
reset to zero every time and
incrementing it to one it returns in
this being shown as one all the time why
is this being reset to zero it's because
every time you make this API request
jax-rs is creating a new instance of
this my resource class okay so it never
shares the same instance every request
results in a new instance okay this
happens to be the default behavior of
resources in jax-rs they are said to be
request scoped which means the scope off
a resource instance is about the request
so there is a new instance that gets
created for a request and then that
request to serve that instance is
destroyed okay so if you make ten
requests to ten different api's there
are ten resource instances that are
created and then immediately after those
api's are serve one by one those
instances get destroyed okay this is the
default but now what if you want to
change it what if I want to implement
something like this there's no way to do
it now because there's a new instance
that gets created every time I'm going
to have to depend on another class and
manage that lifecycle over here so I
told you that so this bird request
lifecycle is the default but it can be
changed you can also have what's called
the singleton case a singleton that it
is what it sounds like but singleton you
can configure a resource to be created
just once and then jax-rs holds on to
that instance no matter how many times
you make a request and to make a
resource a singleton all you have to do
is annotate it with that
singleton now singleton is from this
package July X dot inject now let me
save this and wait for the application
to read apply try this again I'm going
to make a call just called one time call
again two times so it's you can see it's
the same instance that's being held on
so if you make multiple requests it gets
incremented on the same instance of my
resource so the count keeps getting
incremented every time so these are the
two types of resources when it comes to
the life cycle you can choose to create
a resource to be the default per request
resource are you can make it a singleton
the default life cycle is every request
results in a new instance of the
resource class and that instance gets
destroyed when the reason when the
request is served and the singleton
approach the singleton life cycle is one
instance that gets held on jax-rs holds
on to that instance no matter how many
times you make your request this of
course gets to start when you in the
server you do you know you stop the
server but that's obvious as long as the
server is running that instance stays</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>