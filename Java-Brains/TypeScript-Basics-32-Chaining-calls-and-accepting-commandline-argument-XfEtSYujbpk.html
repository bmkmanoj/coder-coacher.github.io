<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>TypeScript Basics 32 - Chaining calls and accepting commandline argument | Coder Coacher - Coaching Coders</title><meta content="TypeScript Basics 32 - Chaining calls and accepting commandline argument - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Java-Brains/">Java Brains</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>TypeScript Basics 32 - Chaining calls and accepting commandline argument</b></h2><h5 class="post__date">2018-02-17</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/XfEtSYujbpk" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">okay an application is looking good but
we need to do a last few set of steps in
order to get a consolidated output the
first thing that we need to do is get a
user instance which consists of the user
object and the repose object within it
right now I'm making these two calls
separately so there's a get user info
which is a separate call there is a get
repose which is another call so I'd like
to consolidate the two and have one
object and in order to do this I'm gonna
have to make this in the callback of the
first API response so we're gonna get
into kind of what's called callback hell
you have a callback inside a callback
but that's you know inevitable in this
case you're gonna have to deal with it
and this is one of the reasons why
you've got patterns like promises and
observables to deal with asynchronous
calls but this is a small program we can
deal with callback hell or whatever that
is for now so here's what we're gonna do
now this line at line 7 you have the
user object ready right it creates the
user object and has it now inside this
I'm gonna make the call to get repos and
then get the repo and then populate the
repo from the user into the user so I'm
gonna move this instead of the scroll
back and then let's get rid of the
console the vlog over here and inside
this is where we have the user and the
repos so I'm gonna say user dot repos
equals repos and then here I'm gonna do
a console that log off user all right so
here's what I'm doing I'm meeting the
first call to get user info and now I
have the user object I'm not printing
anything yet I'm gonna make a subsequent
call to get repos and then I'll have the
repos and the user so in the user object
I'm gonna populate the repos property
with the repos output that the second
caller returns and then I'm printing
something to the console right there's
not fully there yet but this is a start
so let's do NPM
start so that we can verify that we have
a single user object but 3po is
populated all right so this is looking
good now what we want to do is limit
three pause we don't want to populate
the whole thing like we said we want to
populate like the top four or five repos
so there are a couple of things we need
to do first
start the repositories by fork count the
number of folks that have happened and
sorted in descending order and secondly
just pick like the top five repos in
that and then ignore the rest and this
is where we're gonna get the help of lo
- right lo - has these api's to sort
arrays with objects will have API used
to pick the top five and all that stuff
so I'm gonna import lo - over here
import star has use underscore and here
I'm gonna make a make use of a couple of
API so slow - there is one API which
lets you sort an array of objects based
on a certain property and based on a
sorting function and secondly there is a
there is a function - there's an API to
pick certain elements so if you don't
know what these API is are the best way
to find out is by looking at the lodash
documentation alright so here we have
the lodash documentation beta it's low -
calm and there should be a link for the
talks over here we have a whole lot of
api's that are available over here I
happen to know what those API is every
kind of you can of course you know
browse through this and and pick the
ones that you want I'm gonna pick this
thing called sort by sort by takes in a
collection and the ticks in the function
that lets you choose the iteration order
here's an example you have a an array of
users it has user property in each
property I'm gonna start by age what you
do is pass in an array as
in argument the array is gonna have a
function which lets you choose what is
it that you want to start by so here's
what I'm gonna do is use that function
and start the repos by the number of
Forks so I'm going to do a let started
repost equals underscore dot sort by and
I'm going to start the repos array and
the second argument is is a function
which takes in the object and returns
the field of that object so I'm gonna
take in the object and I'm going to
return repo cut repo and I'm gonna
return repo dot for count all right and
I'm going to assign user three poses the
started repos so what happens now is if
you run this and you look at the order
it's basically sorting in ascending
order you see this the number of repos
number of folks are one at the beginning
and then as we scroll down the number of
Forks increases so it's starting in
ascending order but that's not what you
want you want it to start and descending
order so what I'm gonna do is I'm gonna
multiply this with minus one so I
changed the the sign so if it starts
it's gonna be in descending order and
this and there you go we have it started
in listening order but the topmost fork
count at the very top so this is good
the last thing that's left is to pick
the top five you don't want to assign
the whole thing so this is a started
repo I'm gonna have sign the whole thing
to use it out repost wanna pick the top
five so again I'm gonna take the help of
a Lord Ashe
there should be something called take
yeah here it is so there does it take
API which takes in an array and the
count the number of elements you need
from that array and it's gonna pick
those many elements from that array
starting from the beginning so I'm gonna
use the take API just get the first five
elements alright so let filtered repose
is underscore dot pick started repose
and then the first five elements and I'm
gonna assign two repos the filtered
repos and let's run this and there you
go you get five repos over here and
those have been sorted in descending
order one last thing that needs to be
done is semicolon here one last thing
that needs to be done is to take this
out and make it a command-line argument
right now I'm hard coding this this
value right here that's not good
you want to be able to pass then passer
in as a command-line argument the way to
do this is by using this process start
arguing as a way of killing Kemal and
arguments from in a node.js program so
I'm gonna say let username equals
process start argh me actually let me
print this out so that get to know what
the surface should ideally be an array
so console log off process arguing and
run this
and I should get the output over here so
these are the command-line arguments but
however if I were to pass a command-line
argument here and p.m. start and then
the name of the ID that I want to pull
up and look at the command-line
arguments here you see the third item is
the idea that I need so here's what I'm
gonna do I'm gonna do if process start
Arg V dot lint is less than three I'm
going to output please pass the username
as as an argument else I'm going to get
that third item in theory
and instead of using the hard-coded user
name I'm going to pass it user name all
right it's format this now if I do NPM
start without the argument I should get
up an error message but if I use the
argument I should get my repository
count and I can use another username
here and it's gonna get that users
information and the repositories all
right so this is what we've got again
this is not fully done yet there are
ways you can handle errors better like
if the username doesn't exist errors
during the rest API calls and all that
stuff but I hope this kind of gives you
an idea about how to build an
application using typescript this was a
command-line nodejs application but in
order to build dom application that's
used by the browser you would have a
similar process in the case of a Dom
application what you would do is
probably create one bundle the
JavaScript file so you have one file
that's been referred by the HTML and in
this case of course it really doesn't
matter you are using node.js to run it
so as long as it goes out into the the
out directly like we have over here it
should be good so this was implementing
some of the concepts we learned in this
course I hope this was helpful I'm gonna
check this in to a github repository and
make the link available in the video
description and also in the course page</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>