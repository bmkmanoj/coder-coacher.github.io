<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Advanced JAX-RS 15 - Client Code Explained Step By Step | Coder Coacher - Coaching Coders</title><meta content="Advanced JAX-RS 15 - Client Code Explained Step By Step - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Java-Brains/">Java Brains</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Advanced JAX-RS 15 - Client Code Explained Step By Step</b></h2><h5 class="post__date">2016-01-12</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/PRqnswCO4JU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">okay so here's the code we wrote in the
previous tutorial this way of chaining
these method calls is what's referred to
as fluent API you can chain method calls
one after the other till you get the
object we want but in this tutorial what
we going to do is we're going to
separate these different calls out so
that we know what's going on okay so the
first line is pretty simple I'm using
the client builder dot new client to get
a client object but this is what is the
fluent API this is where you have method
chaining so let's break this out so the
first thing we do here is client at
target let me give it a target we give
it a URL where the client needs to 0.2
so I'm going to take this out let me
actually remove this return value here
so I'm going to take this part out and
I'm going to assign it to a new local
variable Eclipse helps us identify what
the type is now the type happens to be
web target we point the client to a
target using the target method and we
get back there's an object of web target
alright so now I can do a target dot
request dot get now let me split target
request up and again I'm going to use
Eclipse to assign to a new local
variable turns out what we get back is a
builder I'm going to call this builder
now Eclipse has done the import for us
so this is off type invocation dot
builder so that's what's important
all right so now we get a builder back
now I'm going to do a builder dot get
and now if I assign this I should get a
response and there you go we get a
response so these are the three steps
that are happening that we did in the
previous video but this is broken down
so that we have a better idea of what's
going on here when you do a client argot
when you point a client to a target
location target URL what do you get back
there's an object of their target so the
client itself is something that you want
to in July
once per application once you have
established that you're going to be
making a REST API call you make this
call client builder new client and get
hold of a client instance now with this
client instance you can make multiple
REST API calls now the first thing you
need to do in order to make a REST API
call from this client instance is to get
hold of a web target object the way to
get a web target object is to do this
client our target point it to a URL and
now we get the web target every time you
do a client target you get a new
instance off web target so you can
create multiple web targets per
execution of your client code now here
I'm just getting one web target instance
and now with this web target instance I
create what's called a builder by
preparing this request so when I get a
web target I'm not really all set
to make that request I need to create a
request and I build it that's how the
API works in jax-rs so I first build a
request by doing a target request and I
get hold of a builder now I can use this
builder to build my request I can do a
bunch of stuff I can configure how the
requests should be I'm not doing any of
that here but you could potentially do
that with this builder now once you've
configured the builder and you're ready
to make a request then you do a builder
dot method now here I'm doing a get now
let me see what are the other methods in
the builder you see here there is delete
that is get there is head there is post
which accepts the entity itself as an
argument
there's put so all the HTTP methods that
we have seen is available over here now
here I'm just going to do a get and then
I get the response back and now I do a
response to our identity this part
hasn't changed all right so hopefully
this gives you an idea of what are the
steps involved and what actually happens
when you do that fluent API now that we
have understood this let me put this
back to the way the code was before I'm
going to do a bunch of undos and get
this back to the response I'm going to
break this down into multiple lines even
though it's the same fluently
I'm going to demonstrate a couple of
configurations you can do to configure
how this request gets sent
now the request method takes in a few
parameters so one of the parameters it
takes is if i do a control space here
you see there is a request of media type
this is where you specify what the media
type of your request should be now i'm
going to choose this and say media type
dot so this lets this request know that
you need json response we've already
seen that this is just a string in the
previous course so all we are doing is
sending it a string which is media type
dot application JSON so this way you can
send whatever content type you need so
when you pass that in the request it's
going to send that in the accept header
the other configuration we can do is in
using the get if the get has a bunch of
signatures if you do a control space
here you see there is a get without any
arguments which is what we've used there
is also a get which takes in an argument
which is this which is a class now what
this lets you do is specify upfront what
is the type that you are interested in
in the response now you see here we just
did it then generate get we got the
response and then we did a response dot
read entity of message dot class now if
you were to tell this get method that
what you're going to get back is a
particular class then what the Jersey
implementation does is once it gets the
response it's going to try and convert
that response to an instance of the
class 'ti of path so if I were to do
this if I were to say get off message
dot class what this returns is an
instance of message dot class whatever
response it gets it's going to try and
convert that into a message instance so
this is going to return me of message
instance I'm going to change this to
message and I'm going to call this
message now I don't need to do this I
can directly print the response so I'm
going to execute this let's make sure it
works
the UC we get hello world so things work
as usual I can verify this again by
making a call to message ID - we should
get hello Jersey yes we do
alright so this is a that you know these
are two ways in which you can configure
what goes on over here another quick tip
that has helped me when I'm
troubleshooting this is now let's say
you're you're accepting particular class
in your code and there is some error in
converting from that stream to an
instance of the class right so basically
what this does is when it gets a
response in JSON it tries to unmarshal
it right it creates an object out of it
but now let's say there is something
wrong with your response or there is
something wrong with your class itself
and it's unable to unmarshal it you get
a nasty error but it's hard to
troubleshoot it so the trick that I use
is rather than have a message here I
just use string dot class now string I'm
going to change this because it's going
to return string back and let me comment
this out now since what you're passing
is a string the jax-rs library here is
going to convert the response to a
string since the HTTP protocol does have
content as string this should be a
trivial thing to do there not going to
be any errors so when you get this the
value here message is going to be the
actual payload that you get back from
HTTP so if I were to print this out of
the message I'm going to get the actual
payload let's try this well there you go
you see you're getting the JSON payload
over here so this is something that the
library is doing is just getting the
response here and saying okay this user
wants it to be returned as a string
we've already got a string so this is
easy so it's going to convert that to a
string and in an instance of a string
class and that's what I can use to print
out and see what the actual response set
of card back is but this is this way I
found this to be very handy for
debugging but
really have to do this there is this
handy shortcut here for passing in the
actual class itself that you want the
library to unmarshal to so that you get
an actual Java instance that is ready to
use in your client code</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>