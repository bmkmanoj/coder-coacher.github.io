<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Struts 2 Tutorial 04 Part 2 - Writing a Struts 2 Application | Coder Coacher - Coaching Coders</title><meta content="Struts 2 Tutorial 04 Part 2 - Writing a Struts 2 Application - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Java-Brains/">Java Brains</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Struts 2 Tutorial 04 Part 2 - Writing a Struts 2 Application</b></h2><h5 class="post__date">2012-02-04</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/1rDnWURZOWI" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">we have a URL to the action class
mapping so this is happening fine now
now the question is what happens when
the action class method is executed
now this execute method completes now we
have implemented us out in our execute
method but that's not really the ideal
way in which a web application
communicates to an end user the in user
the client would like to see a HTML and
the way to see hTML is by rendering a
JSP and of course using servlets as well
but now we are not going to be using sub
words we are using JSP s for the view so
a client would like to see a rendered
JSP as a end result of the request now
the client has made a request and right
now we are printing to the log so now
the client is wondering hey what's going
on so we have to send a JSP or render
JSP back to the client so that's going
to be the next step now how does an
execute method transfer the flow of
execution to the JSP now an execute
method could do a lot of things now here
I have a tutorial action that the
intended goal of a tutorial action is to
pull up a list of tutorials available on
the Internet now let's say you have a
business service method that gives the
list or execute method itself does all
the hard work and it ends up with a list
of tutorials now it has to pass the
control to a JSP that actually renders
those tutorials in an HTML format now
this could be an ArrayList or some kind
of a list in the method you need a JSP
to render that in HTML format and passed
to the client now an execute method
could pass the control to the JSP now
let's say you have a JSP which says you
know view tutorials or show tutorials or
JSP i'm an execute method should say hey
struts framework i have the list of
tutorials now pass the control to that
show tutorial star JSP but that's not
really ideal because now let's say you
change the name of the JSP to display
tutorials or somebody else did it now
you have to go to this method and change
the name over here and of course three
bells and
apply the entire application which is a
pain so ideally this should actually be
a configuration item but that's not a
problem
we can have an additional column over
here which say is JSP and then the start
XML does all the mapping so from a URL
go to an action class execute this
method in the action class and go to the
JSP so URL action JSP URL action JSP URL
action JSP so this nothing could be
there but there is one problem an
execute method could end up displaying
different results depending on different
conditions and you might want to display
different JSP you might want to render
different jsps depending on how things
go inside this execute method one
example that I can give you is now let's
say I have this gate tutorial request
that's being made the tutorial actions
execute method executes a number if it
gets the list of tutorials and
everything is fine it has to redirect to
the show tutorials start JSP you could
configure that over here but the problem
is if there's an error there's some
problems not able to get the list of
tutorials then you might want to
redirect to another JSP called as an
error message dot JSP which displays an
error message so that should also be you
know that's also a potential JSP that
could be displayed because of this
tutorial action and let's say this is a
secured site user has to log in to see
the site now let's say there is no
session available and this call is being
made you might want to read at it to a
login dot JSP so there are three
different J's B's that you would want
this tutorial action to possibly
redirect to of course in one request
it's going to be just one JSP but there
are three different conditions and there
is a possibility that this execute
method could redirect to three different
J's B's in this scenario so how do you
deal with that so the problem here is a
JSP displayed depends on the result of
the method execution and then the same
class may need to show different JSP is
depending on different conditions
so what do we do then there is a
situation like this but the solution
that the stretched framework has
proposed for this and which is a part of
the configuration is that well you
cannot really mention the JSP name and
they execute and you cannot really
mention the JSP name in the XML because
you would need the intercept of the
execute so what the stretch framework
proposes is first of all have the JS
piece in this transaction say there are
three different J's peas that execute
could possibly redirect to then
configure all the three J's pieces over
here and secondly the executed knows
what JSP to call depending on how things
go in the you know in the method so
depending on that let the execute method
return some kind of a code which
indicates which JSP to call so it's
going to be something like this execute
method returns let's say a success or a
failure and there is a specific JSP map
to each condition that the execute
method returns in case of a success
there is a JSP in case of a failure
there's a JSP so it's very simple and
execute method executes returns a code
and a code is mapped to a JSP and that
JSP executes so this is the solution for
the problem so we do not have to mention
the tsps over here the execute method
does not have to worry about the JSP it
just returns a particular code and then
based on that code the write JSP which
is configured in the XML again is used
for rendering the results so it could be
something like this you have URL map to
an action as usual but then each action
will have a particular code upon which a
particular JSP has to get executed so
you could have n number of this for a
particular action class so depending on
the result of the action class if it
returns a success then you show success
or JSP if it returns a failure you show
an error dot JSP and if it returns say a
no session code depending on its check
for logged in session if it returns in
our session redirect to a login dot JSP
so this
is an additional configuration that goes
to the starts XML okay back to eclipse
now the first part of the configuration
has already been achieved a URL to an
action mapping now this mapping could
have multiple code to JSP mappings so
that there's actually a child of this
action mapping so you have something
called as a result so in this result AG
I can specify the name of the JSP so let
me create a JSP because we don't have
anything here so I'll say new either
want to create a JSP I'll call this
success star J SP and I will just print
success page very simple so now I can
show success tour chase be as it is a
LOF
tutorial action so let me just do that I
will say search JSP
okay note that I've used a slash here
because it's actually in the web
directory so the success or JSP is
directly inside web so the path is slash
success or JSP if you have another
directory inside which you put the JSP
you can specify the path over here ok so
now this is the GSP what about the code
now I can specify the code over here
using the name property so let's say I
have a code called success so if the
action class execute method returns me a
code of success display success Sturgess
be so this is the mapping off code to
change pin them again I can have
multiple search mappings I can have a
failure code in which I display editor
JSP now let's create a error or JSP as
well so that we have that
to use so I have an error page okay so
this is the editor GSP as well so I have
two mappings so a tutorial action could
display either a success or an error
depending on the code that it returns
and the question is how does the
tutorial action return a code in the
first place so that the right JSP this
is rendered well it actually does that
by the string or you remember we had a
string return type for the execute we
had just returned a blank over here but
actually what this return type means is
this return type is the code that the
action class sends back for the right
JSP to be rendered so this could either
return a success or it could return a
failure so depending on the code that
this action class method x0 returns we
can display the right
JSP I mean we don't have to actually
since we have configured it starts
automatically takes care of rendering
the right
JSP so just to test it out what I'm
going to do is I'm going to return the
same code as we've configured over here
for success to our JSP now let's see if
the success JSP is going to get rendered
now unfortunately even with all these
configurations we have the struts XML we
have the action class we have the J's
peas in spite of having all this we are
still not ready to execute the project
there's one final thing that we have to
do might be wondering what that is well
the thing is if I run this project now
okay and I call a gif tutorial what's
going to happen is this is this is going
to run inside Tomcat right don't get us
a sublet container so what it's going to
do is whenever it gets any input request
to the struts to started application the
first thing that's going to do is it's
going to look up a cell
so if it's a if it sees an input URL
like get tutorial it's going to look up
web dot XML and see if there is any
sublet map to that there is no sublet
map to that so Tomcat says hey what's
going on I'm going to display an error
that is the problem we need to tell
Tomcat not to worry about doing the
mapping and we need to tell need to tell
it to just leave the mapping to strut
you need to tell it hey we have all the
configuration done in starts we want
starts to take care of the mapping in
the rendering and all that stuff so do
not try to look for servlets over here
we have all that covered so the way we
do that instructs to this to have a
filter now the purpose of using a filter
is I'm going to put this filter diag
which I've copied side so what I'm doing
here is I'm using a filter called
stretch tool and I'm giving a filter
class the purpose of using this filter
is for stretch tool to kick in even
before tom cassell Tomcat looks at the
servlets so filter obviously executes
before all the servlets execute so even
if you have any sublet over here it's
going to be looked at only after this
filter does its job so that's a reason
why we have a filter over here and this
filter is actually a struts class we
have a class car it starts prepare and
execute filter this is the default
filter that you need to use and this
filter is going to do the rest so as
long as you have declared the filter
over here and of course you have to do
the filter mapping as well which I'm
going to do now I'm going to say all the
URLs by using the slash star if for the
URL pattern every URL will have to go
through the starts to filter so these
two you know the filter as well as the
filter mapping configuration is going to
make sure that every request that comes
to starts to starter is going to go
through starts to so Tomcat does not
have to worry about looking up servlets
it has to pass the control to the struts
too and then stretch to is going to kick
in and it's going to look up at the
stars XML and then
it's going to take control from then on
it's going to look at the URL it's going
to see what's the action that's mapped
to it
it sees okay it's tutorial action and it
executes the execute method waits for a
return type okay it returns success and
it's going to look up success to our JSP
because that's the Miss B for the code
success and it's going to render the JSP
so this is finally he done and we have a
complete flow and we are ready to
execute oh I think I've made a mistake
over here the filter should be inside
the web app okay now that should work
fine okay now we are all set to run this
project so I'm going to right click and
say run on server choose Tomcat always
use this guy and finish now it's going
to deploy this application on Tomcat and
it's going to start the Tomcat server
and right away we see an error how
awesome is that so this error says that
there is no action mapped for namespace
slash we're going to look at what this
error is in a little while but our goal
is to execute the action that we have
marked get tutorials so what I'm going
to do is I'm going to enter that URL
remember we spoke about the application
context root and then the URL after that
so that's what we've done this is going
to be the URL after the application name
so I'm going to call that get tutorial I
think what I'm going to do is I'm going
to do a dot action so this is the
default extension if you can call it an
extension for a URL that you can figure
over here whenever you configure an
action name it actually means that name
dot action so the URL
have a dart action in the end again this
is configurable in the latter phase
we're going to look at that in the
subsequent tutorials
but for now the way to execute the
particular action to call a particular
action in the URL is to use the action
name appended with dot action so I'm
going to use that and hit enter and
there you go we have a success page and
we also have hello from execute which
means that our execute method has run
displayed it's printed this message and
it has returned success and that success
has picked up our success to JSP and our
success our JSP has printed our success
page now let's change this to error now
let's say I want to change my class to
root on failure let's see this hopefully
Tomcat is going to pick that up and do a
hot deploy and they go stand that now
let's execute the same action the same
URL and they go it's returning me editor
JSP because the action class is
retaining failure code and the failure
code is mapped to edit our JSP so this
is a complete flow from a URL to an
action class and from an action class
depending on the code to the write JSP
so this is the configuration and stretch
and the other configuration that we did
was in web dot XML we added a filter and
the filter mapping so we added a filter
called starts to and the filter class
was starts prepare and execute filter
and that filter was mapped to all URL so
we had a slash start which means for any
URL that is requested by this to this
application you want the starts to
filter to take over and then this
configuration is going to pick it up
from there and call the right action
classes in the J's piece so this is our
first
starts to web application I think this
application they've covered a lot of
concepts we've covered action classes
we've covered starts XML and we've
covered the action class respite result
map to jsps and we've also looked at the
web dot XML configuration for using the
struts filter
I hope the concepts subtly allow at
least an initial level we look at a lot
of these concepts in much more detail in
the subsequent tutorials
thanks for watching</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>