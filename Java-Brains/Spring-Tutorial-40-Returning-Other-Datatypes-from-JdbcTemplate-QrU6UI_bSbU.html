<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Spring Tutorial 40 - Returning Other Datatypes from JdbcTemplate | Coder Coacher - Coaching Coders</title><meta content="Spring Tutorial 40 - Returning Other Datatypes from JdbcTemplate - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Java-Brains/">Java Brains</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Spring Tutorial 40 - Returning Other Datatypes from JdbcTemplate</b></h2><h5 class="post__date">2011-10-30</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/QrU6UI_bSbU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">in the last tutorial we used the JDBC
template that's provided by spring in
order to reduce Diego method which was
around this many lines of code into
something that was only this mean it's
actually just one line of code as long
as you take the string in line we reduce
the number of lines of code we reduce
the not the number of things that we
have to worry about we reduce the number
of things that we needed to do as
boilerplate code all that we did was we
had getters and setters for the data
source and the JDBC template and
actually we were using just JDBC
template and initializing it with the
data source and then we are ready to go
we could use this JDBC template and all
our Diego methods so the diva method
that we implemented was to get the count
of all the records from a particular
table and since this is a query that
return an integer we used a query for
int method now the question is what if
we are running a query that returns some
other data type now JDBC template has
some methods pre-built that handle some
standard data types so I'll just say
JDBC template dot query now if you look
here you have a query for int thatx in a
sequel string of course you see you have
a whole lot of query methods over here
which takes in a lot of different
objects we'll have a look at some of
these in the subsequent tutorials but as
far as a method that takes in a string
which is a sequel is concerned you have
query for end that returns an integer so
obviously have to pass a query that
returns a number an integer number and
then you scroll down you have query for
list that takes care of generating a
list of objects so this is handy if you
have a sequel query that returns
multiple records then you also have
query for longs if you are anticipating
that the result is going to be long we
can use this method and then have a look
at this we have a query for object
this can be used for all the other data
types that we need now in the previous
tutorial I talked about what if equated
on the string so we could use the query
for object to handle such cases and
we'll do that in this tutorials let me
remove this now let's say I need to
write a method that returns the circle
name for the circle whose ID am passing
so this could be a public string it
returns the string get circular name and
then I pass in the end circle ID okay so
now the the query would be a string
sequel equals select circle name where
ID plus question mark so I am passing in
an ID and I'm fetching the circle name
so I'm assuming its name here I'm sorry
it's just me it's to call me so I'm
getting the name where I'm passing the
ID now what is the method that I need to
use to run this I will use the JDBC
template dot
query for object but the query for
object has different signatures which
overloaded but I will use this option
over here it takes in a string as well
as it takes in a second parameter which
is the required type which is the type
that this particular string this
particular sequel query is returning so
I will send this so the sequel is the
sequel that I've just generated and the
required type will be string the class
ok so now this is going to execute this
query and then return a string so we are
telling it that the return type is going
to be a string by passing the string
that lies over here but there's one
thing that we are missing we have a
parameter in this case in the previous
query we didn't have a parameter it was
just a query that it had to run now in
the case of a parameter what we can do
is we can pass the parameter also to
this method so what we need to do is we
need to pass but let me actually show
you that method signatures should be BC
template dot query for objects so here
you can see there is this signature over
here which takes in three parameters one
is the sequel one is an object array of
arguments and the third parameter is the
required type so this is what we are
going to use so the object array of
arguments is going to be the arguments
that you need to pass to this equal over
here so you have just one argument one
parameter placeholder over here so it's
going to be an array of just one element
but if we have multiple parameters we
could pass all of them as an array and
that's going to be either the second
parameter over here the third parameter
has to be the return type whatever
object type that we are returning fine
the query that needs to be passed over
here so I will remove this and we'll add
the object array over here I will say
new
objectid another pass in the circle ID
just a one-element all right
okay so now this is going to return me a
string so all I need to do is return the
result of this method and that's it so
let's save this and now I will try
executing that method over here so I
will use the get circle name and I will
pass the ID of one because we know this
is the only record in the table save and
run this there you go for a circle is
printed because this is the name so
again we have used JDBC template to
simplify drastically the amount of code
that we need to write to get a query
executed so we've done a couple of
methods now we have an integer return
type and we have a string return type
but now what if I want to return the
circle object itself which is what we
are doing over here we are preparing the
circle object and we are returning it
some teeny an ID and then returning a
circle object for a circle that has that
ID
well string even though it's an object
the JDBC template has the intelligence
to convert a wire care column into a
string and then return the string return
type but the JDBC template obviously
does not know about our custom model
like a circle it does not know which
column needs to go to which member
variable so we can have some kind of an
ORM tool which does that for us if you
use hibernate one of the things that
happen it does is map which column goes
to which member variable but then we are
not using hibernate here we are using
plain JDBC so we will have to provide
the code that lets the JDBC template
know that name has to go to the circles
open this year name has to go to the
name and the ID has to go to the ID so
we have to write the code to do the
mapping and then JDBC templates still
takes care of the rest
but here when we are returning the type
of circle we need to do two things first
we need to provide the query and the
second we need to actually write code
for the mapping and we need to tell JDBC
template that hey this is the code that
you need to run in order to map to the
custom type that we're going to provide
and then you're going to return the
custom type as the output of this query
for objects so that is what we're going
to do now so let's say I have an
implementation of this method public
circle get circle for ID I'm going to
call it a different name because we
already have a get circle the tick's in
a circle ID so I'm going to say get
circle for ID I'm going to pass in
teacher circle ID now the the query it's
very similar to this we'll just copy
this the be instead of select name it's
going to be a select star I need all the
columns of that record okay
so now I will pass this to put the JDBC
template I will still use the query for
object
let's remove this so the first type that
we need to pass the first argument that
we need to pass is of course the sequel
okay
the second type that we need to pass is
again an object array to plug in all the
parameters of this query so here I have
one query so I still need to pass this a
new object array of the circle ID so
I'll just space this here so this is
going to be the second parameter so this
so far it's the same now the third
parameter has to be something called as
a row mapper and what is a room apple a
row mapper is a class that has a
particular callback method that takes
care of mapping the output off a result
set to an object so this is the mapping
that I'm talking about so we need to
have some code which knows that the
circle ID is actually the ID of the
circle object and then the gate string
of name is actually the name member
variable of the circle object so we need
to provide that code somewhere and that
code has to be inside class that is a
row mapper so let's see that signature
over here if you look at the query for
object over here see here you have a
sequel and a row mapper and here you
have a sequel an object array and a row
mapper so these two signatures are
required whenever you need to run a
query that returns the entire record or
probably some columns and that you want
to put into a particular model object so
you would use this version when you do
not have any arguments in the query and
you would use this version when you need
sorry this version when you need to
substitute the arguments in the query
since we do have arguments this is the
one that we're going to use so we need
to write our own custom class that
implements this row mapper interface and
that class will have the large
to do this conversion so we learn about
the raw mapper and we'll implement it in
the next tutorial</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>