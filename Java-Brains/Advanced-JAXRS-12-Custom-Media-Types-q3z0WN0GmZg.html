<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Advanced JAX-RS 12 - Custom Media Types | Coder Coacher - Coaching Coders</title><meta content="Advanced JAX-RS 12 - Custom Media Types - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Java-Brains/">Java Brains</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Advanced JAX-RS 12 - Custom Media Types</b></h2><h5 class="post__date">2016-01-12</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/q3z0WN0GmZg" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">now not only can message body readers
and message body writers be implemented
for the common media types you can also
create your own custom media types and
implement message body readers and
message body writers so a string like
application slash JSON it's a media type
but it's actually an arbitrary string
you can create your own application
slash my Nydia type and have message
body readers and message body writers
implemented for it so let's create a
custom media type in this tutorial in
the previous course I had mentioned that
when you use media type constants
there's really no magic that's happening
here so this is just a string you see
there is text slash plain which is what
media type dot explain does is just a
constant string so you can imagine what
it takes to create a new media type well
you don't have to do anything it's just
another string right so any arbitrary
string can be a media type now all you
have to do to create a new media type is
to choose what string you want and make
sure you have the right message body
readers and message body writers for
your new media type so in this tutorial
I'm going to create a custom media type
I'm going to choose the same example of
returning a date I'm going to create a
new media type for returning a short
date so I'm let me remove this text
plane I can pass in a string here which
is my new media type this could be
anything I'm just going to call it text
slash short date so this could be fubar
it doesn't matter it's just the string
so I can create a new media type just by
sending this string here to the
producers now if I run this what's going
to happen is can you guess let's try it
out just recall the same thing in zone
status 500 the same error that you've
seen before message body writer not
found for date and for this new media
type called Dec / shard date so that's
the second step we have to create a new
message body writer which knows how to
convert
from date to text slash short date so
let's do that I'm going to copy the
existing date message body writer and
I'm going to paste this here I'm going
to call this date or short date message
body writer click OK
so this should produce the media type
that we want which is text slash short
date and here what I'm going to do is do
a string short date date
- did get month - date dot get here ok
and now I'm going to do a short date dot
get bytes so I'm just sending sharted so
I'm getting a short date which is date -
month - you're and I'm sending that back
for text slash short date content type
let's save this and let's access this
again and here you see char date so this
is all it takes to create a new media
type right you define your string have a
unique string for your media type and
then make sure you have the right
message for your writers in the right
message body readers - right to the
output stream and read from the input
string alright so another thing I can do
is and this is this pretty cool so I
have a producer sanitation over here
which takes in my new custom media type
right I can actually have a bunch of
media types over here that we already
seen so let's say I have a value
property here and I can send in a bunch
of media types let's say I do a media
type
dot explained as well as my text slash
our date media type okay so now what's
going to happen is when a request comes
in a client can pick what media type
they want from the accept header and
what Jersey what Jack's has been is
going to do is looking at the accept
header it's going to pick the right
message body writer to convert that and
write to the output stream so if the
media type that in the accepted or text
slash plane it's going to choose the
date message body writer and if the
media type in the accepted it is text
slash our date it's going to pick this
one so I'm going to illustrate that in
postman so I have the postman window
open over here I'm going to make a get
request to this it returns the text
plane by default but now let's say I add
the accept header and I pass in my
custom media type text slash short date
now I get the shot date so this is
pretty cool the x-plane returns the
original text so this is a brief
introduction to creating your own media
types there are a few scenarios where
you would want to do this I've seen some
people use this for versioning so you
have a produces a version v1 version v2
over here and have different methods
execute for different versions of your
API I don't think that's a very good
idea but I've seen that being used for
versioning you can also have different
media types for things like CSV or other
data formats which are not available up
to the box with any of these frameworks
so this is how you do it does have you
create your own custom media types and
add support by using message body
readers and message body writers</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>