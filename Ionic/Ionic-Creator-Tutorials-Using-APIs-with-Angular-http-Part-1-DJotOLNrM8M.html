<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Ionic Creator Tutorials // Using APIs with Angular $http // Part 1 | Coder Coacher - Coaching Coders</title><meta content="Ionic Creator Tutorials // Using APIs with Angular $http // Part 1 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Ionic/">Ionic</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Ionic Creator Tutorials // Using APIs with Angular $http // Part 1</b></h2><h5 class="post__date">2016-10-13</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/DJotOLNrM8M" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey everybody I'm Matt from the Creator
team and you're watching our weekly
workshop this week I want to show you
how to use angular dollar HTTP to
interact with any HTTP API that you'd
like to use now for today's specific
example we're going to create a simple
survey application backed by a Google
spreadsheet and to do that we're going
to use a service called shih-tzu which
turns a Google spreadsheet directly into
an API so first I want to get started by
actually designing the application and
then we are going to interact with that
API we're just going to do a simple get
all from the API and then post a new
entry to the survey in a later tutorial
I might show you how to use the same API
to for instance do some queries on rows
and things like that but today I just
want to show you how to get started
using angular HTTP so the first thing
we're going to do is create a new
project and I'm going to call this
survey app and we are going to use a tab
space project for this so we just want
to get started and make this look how we
want it to look so in the future I'm
imagining we're going to have three
pages we are most likely going to have
the actual survey for that let's pull in
like a list icon then we might have a
results tab they couldn't show all of
the results for that let's maybe use a
check mark and then finally maybe later
on we have a Search tab that we can use
to go and find specific survey results
that we might want to look for now just
some visual things I want to change this
to positive and then our overall header
color for the entire app I probably want
to go change that to positive as well so
the first thing we are going to do after
that
let's go rename these pages so they make
some sense this is survey this is going
to be results and this is going to be
search then what we can do is start to
design our actual survey here so let's
add a paragraph of instructions here
that's just going to say fill out this
form and we will record your results
okay and we are going to drag over a
form element
let's kill that toggle let's move the
input up one and the first thing we're
gonna want to do is take the user's name
then let's ask them for their favorite
colors so let's move over a select box
here name this favorite color and add
some options so we can do I don't know
green orange red
let's do pink blue black and we'll just
leave it at that alright so after a
favorite color let's ask favorite pizza
topping and for that we're gonna want to
use a radio button we're going to give
you three choices okay so for this radio
the first one is going to be pepperoni
and the category is going to be topping
and what this category does is it lets
us know that once we create three
different radios that those three are
linked together by category so let's
duplicate pepperoni twice and change one
of these two sausage and one of these
two cheese so we've got a simple survey
here named favorite color topping we can
add a submit button as well let's do
submit and let's make that button green
okay
so now we've got our survey app kind of
designed and how that looks is we have
our tabs at the bottom of the page with
our simple survey asking name color this
is gonna come up as a native drop-down
in your actual export but since from the
browser it just looks like a normal
select and then pepperoni sausage or
cheese and you can only choose one of
those all right so here's our design but
now we want to back this by an actual
angular HTTP API so the first thing I'm
gonna do is go over to Google Drive and
you know this works for any API just for
this one we're gonna back it by
spreadsheet and I'm gonna do new Google
sheets and here we are going to name
this survey results survey results and
for this we're going to do ID name
favorite color and they
Everitt pizza and let's put a dummy row
in here so we're gonna have the idea of
one name is Matt favorite colors orange
favorite pizza is sausage just so we can
see what this looks like in our API so
the first thing we're gonna do is we're
gonna copy this URL for our actual
Google spreadsheet and then we're going
to go to sheets ooh calm you can sign up
for your own account and then go over to
your api's or use this form here I'm
just gonna paste the URL for my Google
spreadsheet hit create API and now we
get our nice little API URL that Shih
Tzu gives us okay now if I copy this API
URL and just open it in a new tab what
we see is we get that row in a list
directly from our spreadsheet so we've
turned that spreadsheet into a URL that
we can put in the browser and that we
can use as an API so the first thing
we're going to want to do here is open
up our code and let's go over to
services and start creating a survey
service that we can interact with
through multiple pages based on this API
I like using something that we're gonna
return to store data here just in case I
need to call something from the return I
like to store that object in a separate
variable now let's do this let's do var
API URL is equal to the URL that sheets
you gave us okay and let's start to
build something so let's do the function
all we want this to return everything
for our entire collection okay so the
whole spreadsheets data we want to get
from all so the first thing I want to do
is I want to include two different
things in the service I want to include
dollar Q and dollar HTTP and you have to
put both of those things both in the
list as well as passed them to the
function so dollar Q dollar HTTP and Q
gets us what's called a promise and for
lack of you know a very in-depth
explanation a promise is something
you're going to use when a function
takes some amount of indeterminate time
to execute so when you're going out and
asking an API for some data
you don't want to actually return the
function until you have the data back
which it has to go to the server get the
data send it back to you and we don't
know how long that's going to take it
you know it just happens at some point
in time in the future so we're going to
do VAR deferred equals dollar Q dot
defer and then at the bottom of this
function we're going to return deferred
promise okay
and in between we're gonna fire off that
request using dollar HTTP so this is
going to be a really simple one for all
you see how we put that URL in just
regular URL and it gave us everything
that's all we want to fire off here so
we want to use dollar HTTP GET and a get
is just a normal request that gets data
from a specific URL we're gonna pass it
our API URL and we're going to do dot
then function rest for response and
we're gonna do something okay so just
like we're using a promise here with
this defer HTTP GET is also using a
promise so it's going to wait and when
it's finished we're gonna get RESP as a
response of whatever that URL gave us
okay so let's see here what do we want
to do first of all let's just see what
that looks like so let's console that
log
RESP right here right and save our
service and then in our survey page we
can inject survey which was the name of
the service okay and do console dot
whoops let's do survey dot all okay so
we are going to inject the survey
service and just call that dot all
function from it okay so that dot all is
what we returned we're going to call off
this and console.log what we get back so
when I preview our survey page it should
fire off that service and it should it
blog in the console what that data is
going to look like to us so down here we
can see we got an object back and we've
got conveyed some headers some status
codes all sorts of fun stuff but data is
an array of that data straight from the
spreadsheet where we got favorite color
orange for Pizza sausage ID one name mat
so the actual list is in dot data
spots data okay so down in our code here
we can do a couple different things okay
we can do deferred resolve RESP data
okay and what that does is we're just
gonna do that from so what this does is
it's gonna say go tell this promise okay
that we're now finished we've resolved
and here's the data we got back okay so
now we're not going to actually use dot
all today but what we did need it for is
to figure out that ID column so Shih Tzu
and Google Spreadsheets don't have like
an overall ID but an ID is something we
might need in the future so we want to
for instance if we're adding this new
survey result we want it the ID to be
the next available ID so let's do VAR
current ID equals zero okay just a store
that source service can use it then when
we get this response back we have all
the rows so we can do if response that
data dot length is greater than zero so
if there's any amount of data in here
okay we can set current ID equal to
parse integer rest data rest at data
length minus 1 dot ID so we're getting
the ID field of the last element in the
collection so we can store that to
current ID and use it for an ad function
when we fill out the survey I know that
might be a little bit weird
you know normally whatever API you're
using is probably managing IDs for you
this specific wave is you using a Google
spreadsheet just means we have to manage
our own IDs okay now in order to make
sure that current ID is always valid
this service I'm just gonna have a call
ret doll and fire that off immediately
whenever the service is injected so this
is gonna set that current ID for us even
if we don't call dot all here because
just the second survey is injected it's
gonna follow through and get that ID all
right so now we can start rigging up our
form to some data that we're going to
send to the API to add a survey result
to our spreadsheet so we are going to
start off by doing our standard scope
dot data equals an object
name is nothing okay favorite color
let's set the default to orange and
favorite pizza let's set the default to
pepperoni okay
and let's start to rig up this data to
our UI so a name we're going to add a
directive ngmodel is going to be data
dot name okay favorite color we are
going to add just another simple ngmodel
here so ngmodel
is equal to data dot favorite underscore
color and then the pepperoni sausage
cheese one gets a little bit different
we actually need two directives on each
of these things okay we are going to do
ng model is equal to data favorite
underscore favorite pizza okay and we're
gonna add this to all three okay so
we're gonna do ng model dated our
favorite pizza ng model dated our
favorite pizza okay but we need to tell
it what actual value is associated with
this radio so we're gonna add ng value
is equal to with quotes the quotes are
extremely important pepperoni and we're
going to add that to each one so this is
going to get ng value is equal to
sausage in quotes and cheese is equal to
ng value cheese in quotes okay
so now this is rigged up to our actual
data so when we now preview the name
should be nothing favorite color should
actually default to orange instead of
green and pepperoni should be checked
immediately so let's preview and see if
we did everything right alright so name
is nothing favorite color defaulted to
orange and pepperoni defaulted to
checked so now we're all rigged up to
that data so now what we need to do is
create a submit function okay that we
use to send off our data to the API so
we're just going to do scope that cement
equals function and here actually
probably want to disable the submit
button while we wait for the survey
response to come back so I'm going to
create another scope variable here is
called scope dot
submitting equals false when we start
the submit process we can use scope that
submitting equals true right then we can
do a survey dot ad
now we haven't created this dot add
function we'll do that in just a second
okay and we will pass this dot add
function scope dot data okay and then
it's a promise so we've got then
function okay and after we are submitted
after we've submitted our data here
we're gonna want to reset the whole form
okay so we'll just reset that scope
variable we're gonna want to set scope
dot submitting equal to false again
because we're done submitting and then
maybe I want to show a pop-up that shows
ok we've succeeded
so let's inject the dollar I had a
pop-up service go down here and do an ik
pop-up dot alert okay and if you want to
look this up dollar on ik pop up an ik
one documentation shows us here that the
show alert function here opens up a
regular that's all we need so let's do I
ought to pop up alert here let's do
title thank you and let's do template
your response has been recorded alright
so that looks good to me
except this add function doesn't exist
you know so let's go back to our service
and let's make sure that we have an add
function hooked up to this API so add
function data
okay now this one let's say maybe I
don't I don't know what what API
endpoint we're supposed to use for add
okay we put our API URL in the browser
and you okay that responded with
everything so let's go to the shih-tzu
documentation here and let's look up
post and a post is what is normally used
to create a row so sheets who says it
creates a row or rows given from this
data so you can see you know here's a
curl response here where they sent it to
the main URL so our main URL here and
they just passed it in the data okay so
that's all we're going to do is we're
going to do a post to
data URL with the information that we
now want okay so we gotta do a couple
things here first let's set up our
promise let's do return deferred promise
okay and then let's do dollar HTTP POST
and yet again we're just going to our
standard URL API URL and let's pass it
in the data that was passed to this
function dot then we wait for it to
respond back and here we do deferred
resolve Resta data now we do need to set
up that ID field because we didn't pass
it in an ID so right here I'm just going
to set current ID plus plus we're gonna
increment the ID to the next available
ID and set data ID equal the current ID
okay so that's just setting up that ID
field automatically so the user doesn't
have to manage it or service manages
everything we post to the URL for a
general API the data that was submitted
from this form we're gonna wait for that
data to respond and after that data it
gets a response is when we set the data
back to our blank values set submitting
to false and set the Attic pop-up alert
okay alright now we already ready to
perform but we haven't rigged up the
button yet so on the button we are gonna
add two different directives Ang's
submit is equal to submit with
parentheses but we also want ng disabled
is set to submit
so when submitting is true this button
will automatically get disabled all
right so let's cross our fingers preview
this and hope everything works so we're
gonna do Joe his favorite color is blue
and then his favorite type of pizza is
cheese we should see when I click this
button the button should disabled it'll
wait a little bit of time while goes to
the API and post our response ok and
then the button will come back to
enabled status and we should get our
pop-up so submit them alright and we
failed a little bit so let's see what I
did wrong
all right we have ng submit ng disabled
scope dot submit is a function let's
just try it again here
cheese Joe his favorite colors blue
submit hmm alright let's inspect that
Angie's submit oh whoops
we're not in the button actually isn't
in a form okay so this button is outside
of our form here so we don't want Angie
submit we want ng click my bad if we put
the button in the form and you submit
what for instance work on enter like our
last tutorial in the chat example so
let's do previewing again Angie click
should fire off that whole sequence of
events and actually I left blank values
so blank values did just get entered
into the database if you want to do
validation you're gonna have to set that
up so let's do Joe his favorite color is
blue favorite pepper pizzas sausage
submit that thank you your response has
been recorded and let's pull up our
spreadsheet so let's pull up the actual
spreadsheet here we could see there's
one matte orange sausage one nobody
orange pepperoni because we forgot to
put any values to Joe blue sausage ok
now this one is slightly questionable
because we already had something in here
so let's see here
we probably just want to go and let me
double check that code I don't want to
give you guys any false information here
ok current ID plus plus dated on ID
parson trust date arrest dated a link
for minus one so 1 minus 0.2 furred
current ID let's just set that to 1 make
sure that doesn't screw up all right so
let's preview this let's add another row
here testing let's go to red cheese
submit and while that's working go look
here three tests ok so it is working
appropriately we got one two three we're
going up and incrementing our values
here ok so now that we've done that we
can see that if we just look at that get
URL and refresh again
we get all of our responses in there
okay so we've done two things so far
we've done a dot all function which sets
up our IDs gets the entirety of the
database from the spreadsheet and then
we got our dot add function which adds
something to the actual spreadsheet now
if you're just creating a survey app to
collect those responses and you want to
look at them later in Yorke's you know
in your Google spreadsheet that's fine
you're done now I think in a maybe next
week's tutorial we're gonna go through
and work on those other tabs so we're
going to work through the results tab
and the Search tab but for right now
this kind of gives you a great starting
point for dollar HTTP okay so all you do
is we pass the URL to post to get to
wherever now like I said if you pull up
the documentation for shih-tzu you might
see like okay if you want to update a
row it uses a different URL so for
something like that if you want to get
an early head start on maybe the next
tutorial you just you know add whoops
you would add something to this URL like
you know slash the column slash the
value and that would do an update if you
change the post to whatever it wants for
this URL which is actually a put okay so
as you're working through dollar HTTP is
very easy to use you can look up angular
dollar HTTP on Google to find their
official documentation but it's pretty
straight forward so okay
today we looked at the api's I had to
pop up Shih Tzu Google Spreadsheets we
got that all working in a survey
application I look forward it I look
forward to chat with you guys next week
catch you then please</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>