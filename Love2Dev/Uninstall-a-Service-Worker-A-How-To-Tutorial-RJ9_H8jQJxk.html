<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Uninstall a Service Worker - A How To Tutorial | Coder Coacher - Coaching Coders</title><meta content="Uninstall a Service Worker - A How To Tutorial - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Love2Dev/">Love2Dev</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Uninstall a Service Worker - A How To Tutorial</b></h2><h5 class="post__date">2017-11-01</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/RJ9_H8jQJxk" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey in today's video I'm going to show
you how to unregister
a serviceworker and this is a very
common question that I see asked a lot
about service workers especially about
developers because let's face it we're
not all perfect and we're going to
inevitably introduce a bug and sometimes
those bugs can be sort of catastrophic
and get us in a situation where our
service worker is kind of cached tightly
in the browser for lack of a better term
and you can't just update it now there
are really two scenarios I'm going to
kind of focus on trying to help you out
here first is what to do locally on
localhost as a developer and then second
what are your options if you happen to
deploy deploy a serviceworker with a bug
that you need to update but the bug
itself or the way you've got things
going on with your serviceworker
it's just not updating with the latest
changes so that's what I wanted to go
over now if you're developing locally
which is where you should encounter
these bugs before you deploy them let's
be honest you've got a lot of recourse
and this will work even if you're on a
website and it's got a serviceworker
that's public you still have access to
these I'm just saying as a developer
because let's face it the average
consumer out there does not know what
f12 is or how to use the f12 tools but
your developer and you should know how
to use these so I've got our fast
furniture demo site here and I've on the
application tab and I've chosen the
service workers option over here on the
left now up here at the top we've got
the first option I'm going to show you
and that is force the update on reload
and as you can see there basically the
serviceworker is going to automatically
go through the update cycle every single
time kind of assuming that there is a
new version of a sort of the
serviceworker on the server so if you
check this and then you reload you'll
see that went through the installing
event over here
and everything worked out the way we
wanted it to I believe I have a skip
waiting call in there right now that's
why it automatically made it active but
if I just refresh this again it'll it'll
trigger it up to 29 I believe we'll see
that happen you know there we go
nope just 28 I guess that kind of
detects that there's not a change but it
does go ahead and try to do the update
there so that's one way that you can
definitely get out of that and the
problem with doing this is as a
developer you may masking a potential
problem with your life cycle by having
that checked so my advice is before you
commit your code even to your repository
like github or whatever uncheck this and
do a couple of test runs through your
site just to make sure that your service
worker life cycle is not say compromised
okay now our next option if that's
failing or maybe you don't really like
to work with it like that maybe you are
trying to debug your life cycle you have
another option here and that is to hit
the unregister button and you can see
now the state of it is deleted and if I
go through and redo this we're gonna go
through the full application life cycle
or the service worker life cycle and I
believe I may have got myself into this
state I don't like where it's kind of
waiting for me to close this out but you
get the idea there it goes all right
good all right now so that's what we can
do as a developer and as you can see I'm
on localhost obviously I could do this
with any Service Worker wanted on any
site but again you're not the consumer
and the consumers not gonna how to do
this plus if they're on the phone the
chances of them being able to do this
are next to zero because it's not easy
to do this on the phone so what are your
options well the first option is to
architect your site choices a little
better first off
never place your serviceworker in your
cache have a P my number one advice
right there is don't put it in any of
your cache it doesn't need to be there
in fact I don't think it will honor it
in the cache I got a double check on
that but I don't put it in there
next is be careful of how long you keep
assets in cache now obviously the goal
is to try to cache as many of the
webpages and the CSS and JavaScript
images whatever as feasible for your
application but you want to be careful
of keeping them in there for a super
long time and as you can see right here
all these are cached today because I've
been clearing the cache here a little
bit trying to get speed things done but
you may want to force an update to these
assets at different period periods of
time and of course that's gonna be up to
you how you update those assets I call
it the personality of your application
you need to be mindful of that and
create a caching strategy that works for
you now there's a lot to be said about
choosing the caching strategy for the
different types of assets in your
application and there are about 15 to 20
well-known caching strategies and if you
really want to take a deep dive in those
will be launching a big giant
progressive web app course over the
sometime in the next week so you
definitely want stay tuned for that and
we will go deep dive into that now
what's your last choice here well if you
maybe have something that's not updating
because the cache headers are updated on
the script file that's registering your
serviceworker or whatnot and you need to
get that updated and you're worried that
you're you're just out of luck you're
not out of luck the the serviceworker
specification has a little safeguard in
there and I call it the happy mom factor
and that is if the service work
has not checked for an update on the
server within the last 24 hours
it will automatically bypass all of the
potential caching to go check the server
for a new version of the serviceworker
automatically now this is the concept
that's a little hard for most to grasp
at first so so kind of listen to me
carefully here now there's different
levels of cache obviously we got the
serviceworker cache but we still have
browser cache and browser cache
generally honors the cache control
header and this is where you say
essentially how long the browser should
cache this file before having to go back
to the server for a new version and
obviously the best practice on that is
to set a what we call a long life on
that you typically a year is what you
really want that that can vary by file
obviously and you could get yourself
into a little pickle if you say put your
serviceworker in there for a long time
now browsers do purge that cache
periodically based on the amount of
resources available and since most
people use their phones for the internet
today the browsers get fairly aggressive
in purging the browser cache now you
can't rely on that so what the
serviceworker specification put in there
was an automatic update from the server
after 24 hours so let's say the person
visits your site gets the buggy
serviceworker situation going on and you
can't update that serviceworker through
the other means that we talked about
without many walking them through how to
do it through the developer tools but
you do not want to get into the worst
case scenario you're going to run into
is you're gonna be able to find a fix
deploy it and it's going to be 24 hours
from when the person loaded that buggy
situation until it's going to just clear
itself up naturally so you think about
this kind of a healing factor built into
the specification now this does not mean
that it's going to phone home every 24
hours it doesn't do that the only time
it will do that is when
the serviceworker instance is invoked
meaning that a web page was loaded a
push notification was sit down and if
you've got push notifications set down a
set up and the person has agreed to that
this might be a way for you to get
yourself out of that pickle manually
right is to send a push notification
down the line after 24 hours or whatnot
what's gonna happen is the 24 hour
window is it kicks in the next time the
service worker is loaded after that 24
hour window has expired now they only
visit your site once a week or once a
month or once a year it's not going to
be until they say visit your site to
cause that service worker to spin up an
instance before it's going to go through
that update cycle it's not just going to
naturally update itself on its own so
you could in theory send a push
notification of course they have to be
subscribed or maybe maybe sometimes an
email Thor on your email list and you
know provoke them to go you know load
the site to read something or maybe be a
good excuse for touch for a touch point
with your customers who knows again
nature character personality of your
site so basically the worst case
scenario you're gonna run into is no
more than 24 hours before updates going
to post and you can get yourself out of
the behind and move on with life and
you're gonna have that of course you can
have that horrible 24 hours of course it
doesn't necessarily mean it's your
site's broken just because your
serviceworker might be in a broken state
and you can't update it remember make
sure you code your serviceworker so it's
say not couple that tightly to your
front end let's say and break stuff so
hopefully that that will keep you from
getting in a bind and give you some
options to get out hopefully you
troubleshoot and find these potential
issues while you're in development and
you can control them through the
developer tools and hopefully you'll be
able to fix this if it does happen to
you in production and know that the
biggest time frame you have to sweat it
out is about 24 hours now before go
or thing I wanted to show you Firefox
also has the ability to unregister a
serviceworker
now to get to their serviceworker stuff
you have to do something a little
differently you have to go to a
developer which pops out this menu and
then you can go to the serviceworker
option which brings this up or you can
type in about : debugging pound sign
workers which obviously the pound sign
is for the different parts here and I've
got because I got my serviceworker is
unregistered in here oh there they are
okay alright good thing I checked that
out you can click the unregistered just
like you can in the chrome developer
tools now right now Firefox does not
have the ability to bypass there
automatically do that update during the
development cycle obviously their tools
aren't necessarily as robust at this
point and I will be covering those
obviously in the course as well we'll go
into a deep dive than this the Opera
developer tools are basically a carbon
copy of the chrome developer tools
they're probably a little bit off
because chrome does update a little more
frequently I think but as far as this
goes they have the features there and
opera as well and I need to go back and
double check how just doing it but right
now that's in such a fluid state with
the developer tools and service workers
in particular I don't want to give you
any guidance especially since those are
hidden behind an about flag when those
are general consumption ready I will
come back and show you how to do that in
Microsoft edge as well so hopefully this
is going to help you out of any pickles
it's also going to help you heck build a
strategy to handle these scenarios that
way you've got some sort of disaster
recovery documentation in place or
straight a plan of action and this goes
another one of those things that can go
a long way and getting sign-off from the
old bosses on deploying a Service Worker
it is knowing that you can fix problems
in a reasonable manner if you got
questions about unregistering a service
worker please feel free to leave a
comment below and if you think this will
help other people out please like the
video share it with your friends and
again just give me any feedback you want
and definitely be on the lookout for our
upcoming progressive web app course
we've got a lot of great excitement that
we've got planned around that as well so
until later I'll talk to you later this
is Chris Allah the owner of love to Dev</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>