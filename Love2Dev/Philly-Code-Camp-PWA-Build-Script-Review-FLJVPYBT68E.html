<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Philly Code Camp PWA Build Script Review | Coder Coacher - Coaching Coders</title><meta content="Philly Code Camp PWA Build Script Review - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Love2Dev/">Love2Dev</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Philly Code Camp PWA Build Script Review</b></h2><h5 class="post__date">2018-03-19</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/FLJVPYBT68E" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys Chris loved the envelope to dev
and I'm back with you for the Philly
code camp progressive web app schedule
application and in this video what I
want to do is I want to go over
essentially the build and parsing script
that I wrote now honestly a not sure why
I put so many little things in this but
you know I was just trying to run
through and race to get this thing done
over the weekend so it's not as
refactored is normal now honestly of
what I do with scripts like this now is
I'll kind of work through some of the
logic here and then I will transform
those into AWS lambdas and make those
part of my overall infrastructure build
process render process if you will open
need to you know anyway I do have a
session where I'm going to go over some
server lists blood a server list stuff
an AWS doing lambdas and the server list
concepts and stuff this Saturday at the
code camp which you can find only
schedule up if you go get it anyway so I
just wanted to go over real quick if
you're not familiar with doing node
modules or scripts basically you need to
reference the node modules and so the fs
and paths are native node modules for
file system and path to manipulate pass
and interact with file system now you
know lambda wouldn't actually I wouldn't
even reference either one of these
because it wouldn't be any use because
there is no file system to play with but
I would reference this this is mustache
this is a templating library and I do
use mustache most of my sites if not
I've got a there's like a 21 22 line
JavaScript templating function that John
Reza created it was in backbone
essentially was not really backbone but
it was part of using backbone but it was
part of the inner score library in
another modification I actually used but
it's like 21 lines of code to do the
templating but it does require you to do
some I don't know kind of fierce data
transforms and I almost like a little
burned out on that so I went back to
musta
I always said a utf-8 variable because
they use it multiple times when I'm
writing to and from the file system I
don't wait I don't have to manipulate
the string multiple places anyway so
here I am loading our main data source
file for the code camp schedule now just
real quick this is what that file looks
like it's just a list of all things 63
sessions and it does include the Friday
sessions as well as the Saturday
sessions if I think if we scroll down to
the bottom yeah these are the Friday
sessions and those I think I'm filtering
out of the application because those are
full day workshops and I don't think
these scheduling app is going to be all
that useful to you for a full day
workshop anyway so but anyway did go
over real quick the app show if you're
not for me with the concept of an app
shell if you've done any single page
applications you have been using an app
shell I'm pretty sure of it but I'm
gonna make a separate video just about
app shells here in the next few days I
got that on the slate but for
progressive web apps and single page
apps the idea and really any web app
it's that master layout stuff so the
header the common footer maybe the
common layout features you may have your
nav all that kind of stuff now basically
the skeleton of your core site and if we
go look at the actual page that I have
here all like honey oh here we go it's
all up there you can see that this is
stuff that it's going to be reused
notice I've got some mustache fields in
here I've got the title in here and then
because there's the descriptions of the
courses were all over the place and I
know that to make a description for
search engine optimization you need to
have in a certain amount per character
for yadda yadda I decided to do that and
then I've got the social media stuff
that you need in the header it's it's
kind of a small header compared to what
you would do for a real production app
here's the header which is basically a
bootstrap navbar which I've got some
content on working with those but we
don't really have a menu here because
I'm doing the side navigation for the
faceted search and I want to go over the
structure of this in a separate video so
don't worry about that but I'm just
going over the app shell here is the
side navigation piece these are common
things to everything to all the pages in
this particular application here's the
JavaScript references and that's it
there is a super simple application and
so anyway let's go back to this is this
script is really to tee up everything so
this is the individual session template
the Java the mustache template for that
and if we want I can go load that up
here is my template folder and I hit the
wrong thing stupid app cache always
getting in the way all right so here's
our session detail layout the mustache
fields are just indicated by double
squiggly brackets and that's why it's
called mustache because looks like a
mustache on the side and those are the
fields that come from the adjacent and
the triple squiggly brackets indicate
that you need to encode in which you
because I do that because those are
actually HTML and if I didn't do that it
would make those turn out wrong let's
just put that way you would actually see
the markup and we don't want that so
okay and I'll go go over the template
here we'll do it later
load the sessions this is going to give
us a string so we need to parse that
into a JavaScript object so I just do a
quick conversion and I I initialize an
array for the sessions and then I went
ahead and as part of this I went ahead
and do with essentially a faceted
breakdown of the sessions by each
session time I want I'm not actually
using a but that's okay
now I made a function to go through and
render out the individual session page
and what I'm doing is I'm taking the app
shell and I am dropping in this session
and if we go look at the app show itself
I put in a little special blend
delineator here and I'm just doing it
one time so I can do this simple replace
the string replace you know just did the
the open angle bracket and percent and
then the inverse on the other side
all I'm doing is just giving it a place
to go through and drop in this
particular template and I did that so I
could do that for like any potential
page I might make I might do that kind
of thing a lot of times for the app
shell in these kind of scenarios and
mustache is super simple to do just call
the mustache object order you name the
mustache object and the render method
you pass in the the the mark up which
has the actual template and the reason
why I drop this into that is because the
app shell has some mustache fields in
the header for the title basically in
this case and then the actual template
which you saw a minute ago this will be
the individual session Jason the
JavaScript object so what it'll do is
it'll take that object merge those
fields matching the properties up and
it'll spit out the mark up for us that
we're making mark up you could do
strings or anything else that's a string
or if you wanted to do just text files
markdown whatever it may be that's why
mustaches like so anyway now the actual
place I want to put it is going to be
under the public folder which is where
I'm hosting the website locally in my
development code and then there's a
subfolder called session and then the
actual file itself will go in another
folder that uses the slug now this is
way for static websites to do extension
less URLs that way I don't have to do
slash slug slash index dot HTML and this
makes it the it uses that as the default
so that will make it an extension less
URL now I have to do this I actually
need to make sure that the folder
doesn't exist before I go make it
because node will puke on us if we do
that so we have to actually check to see
if it exists
if it doesn't exist then go create it of
course after you run the thing the first
time it should exist in this
but you know that's a good practice you
got to do it one policed once so you
always have to do it and then here's
where I actually create the file just
using the native node if file system
object now just I don't do the callback
thing usually I do the sync thing on
these particular things how many times
can I say thing anyway so here's where
you write it and again it's going to be
index.html there but because of the way
the web servers work that'll be the
default document so you don't have to
actually type it out to bring it up and
then of course here is the HTML that was
rendered using mustache our nice little
utf-8 reference and that cool okay now
to actually get into the script itself
the first thing I want to do is I want
to filter out and just get sessions that
are Saturday so this is just a simple
way to do that it just loops through all
of them and gives me back an array that
only includes Saturday sessions and then
I want to sort them so that the 830
sessions are the first sessions and then
onto that now I didn't go through and
like try to do them alphabetically or by
room or by speaker or anything like that
I just did it grouping by time and
however they lay out they layout I don't
think it really mattered that much and
this is just a simple way to do the time
and because you know the time wasn't
really a valid date object and I just
want to keep it simple right here I'm
just stripping out the semicolon a colon
that separates the hour from the minutes
and that is perfectly fine for with what
we needed to have happen here and so
what's going to happen is it's going to
sort these eight thirty first all the
way down to the three o'clock sessions
now here I'm looping through all of the
sessions after we've got almost ordered
and filtered and we are writing out the
actual individual session JSON file
I want not actually using it but it
doesn't this whole script takes like a
half a second to run so it's not a huge
deal and then I used a switch statement
which if you haven't seen my JavaScript
switch statement article or recently
there's a link to it and basically I
break it down by session time and what
I'm doing is pushing those into the
individual a session faceted JSON files
and will write each one of those I opted
will do that down here
I could have looped through and done it
I don't know just this just worked out
faster for me to just copy and paste I
don't know what in that many and then
I'm going to write out the sorted and
filtered jason bohn this is the one I
actually wound up using in the
application so that's what this script
does it's just there to basically parse
it now every time I change the app shell
I reacts acute this obviously I don't
really need to do the data files anymore
I really just need if I really want to
be efficient I would just make one that
just did the HTML for me and did it that
way and honestly that's all I would make
and for the most part and in my lambda
actually well generally I would trigger
all my rendering processes off a JSON
data file change I won't get into that
it's I'll talk more about that in my
session on Saturday about AWS and I will
make videos about those eventually so
anyway anyway this is a quick
run-through of the script to actually
build and render any questions leave
those in the comments below
check me out Saturday if you see me at
the code camp let talk to you about all
this this is a lot of fun this isn't
necessarily the progressive web app
related but it I just wanted to go over
how I get the content produced so anyway
I gotta have more videos in the series
hope he checked them out</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>