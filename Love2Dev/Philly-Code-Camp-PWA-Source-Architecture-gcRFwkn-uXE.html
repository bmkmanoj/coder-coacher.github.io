<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Philly Code Camp PWA Source Architecture | Coder Coacher - Coaching Coders</title><meta content="Philly Code Camp PWA Source Architecture - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Love2Dev/">Love2Dev</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Philly Code Camp PWA Source Architecture</b></h2><h5 class="post__date">2018-03-19</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/gcRFwkn-uXE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys this is Chris love the owner of
loped dev and if you haven't paid
attention last night I made live the
Philly code camp schedule progressive
web app now affiliate code camp is
technically two days March 23rd and 24th
2018 at least that's the spring code
camp we'll probably have another one on
the fall here in Philly so this version
is for the March 23rd and 24th code camp
and of course we will probably reuse the
application for the fall and it should
you could also use it as a template to
do your own code camp or event kind of
thing so in this video what I wanted to
do was actually walk through kind of a
higher level the code architecture kind
of how I structure the progressive web
app now the application itself is a
simple static web site there are two
types of pages there's the home page and
then there's the session detail page now
the application itself is well this is
the source code that I use and it's
top-level I've just got you know project
level stuff here it's pretty simple just
a package.json which honestly just has
the local web server that I use which is
HTTP server and I'll also use mustache
to pre-render the session detail pages
and all will go over that piece here in
a second now if you're not familiar with
that that's basically a Java Script
templating library I've got a link to a
blog post I recently posted about using
mustache if that will help you out
now the util folder essentially is a
build script the build script actually
do anything I was kind of something I
did actually put it all in this parse
schedule script which we'll look at here
in a moment I did get the original JSON
file by essentially stealing it from the
one that bill wolf posted for that
schedule which it's the whole motivation
behind it because it was
me super hard to read counsel but the
the basic data that was available here
is an ID the date which also has the
session time and it's using military
Thomas we're familiar with that if
you're in the u.s. its military Tom it's
1,500 stands for three o'clock he's got
like fifty nine fifty I don't know why
but the second something like that
that's okay but he did aggregate out
what what is the actual session time I
think he I think these were actually
done in reverse order
I didn't order to take the time to to
get into it too much but it does look
like they're probably universe order
which is why my script goes through and
sorts them but anyway so you get the
time you get a slug which is if you're
not familiar with that that's you need
to do a URL that uses dashes between
words you also want to make them
lowercase O bill did a good job with
that
and so that's reusable and I IDM using
that I think yeah I'm using that in the
session detail thing absolutely the the
title of the session the body which is
the session description and those are
all over the place what room at the
Microsoft Malvern MTC which is where the
code camp is who the speaker is and the
badge
basically those are going to be for
Microsoft and MVPs this is the Microsoft
badge which is just text and the MVP
just says in VP and I will use that and
then I actually broke these out into
individual session with tiles to now
ultimately what I did was the site
itself is under this public folder and
there is the home page which is the
index.html I am going to add an about
page to this I haven't done that yet but
I will
the next day probably today and then
here is the session folder and each page
or each session has their own page which
we will reference as the application
moves along and so to do that what I do
is I created an app shell and then the
little script that I got I will render
each individual
session page based on the session
detailed template and that app shell and
I'll go over that here in a little bit
maybe in a separate video kind of break
these down because it make it a little
too long if I do that already
now the copied the data into this API
folder and those are individual files I
want up not actually using the
individual session files I also created
essentially versions for faceted search
as I was starting out I thought well
maybe I'll make an API call to get the
individual sessions for the session
times in the individual sessions you
know the the reality was this file
honestly is not that large
especially when it's gzipped and it was
super easy to just parse on the client
side I want to just making this the only
API call that I make and it's super
simple and the great thing about this
and a lot of times we overthink this I
think is that you we tend to go for a
full-blown API solution lots of code to
maintain crap like that you know
something I found in recent years is
most sites don't have a ton of data that
really drives them like this and this is
a great example and because I use the
static website infrastructure I can just
call the JSON file directly I kind of
stumbled into this pattern building Tim
little applications for presentations
and stuff and it's just so much simpler
to be able to focus on the front-end you
just have a simple API and I just kind
of incorporated that in the development
and as I started looking at a lot of the
the smaller production sites it's just
made a lot more sense so for this one I
just made a lot of sense
let me just format this so you can see
that's all that is there now the CSS
right now I'm using the full bootstrap
and font awesome I'm gonna change that
because the only thing I'm using for fun
awesome is the search icon I'm just
gonna get a search image a little image
and just reference that and I can dump
that out I was I go through and do
performance we're not using actually
that much of bootstrap at the moment but
for now I consider this kind of a work
in progress so I don't worry
about optimizing the CSS I'll make a
separate video to show you how I do that
to trim it down it'll probably get down
to one or two kilobytes of CSS and I'll
just didn't line those in the head and
then here's the customers customized CSS
for this particular application that's
it again is not that big assembly lines
I've got in here less than 300 lines of
CSS it's not gonna be that much in the
end okay I've got one image which is the
logo I don't even sure I even optimized
that and though the HTML folder is the
app shell which we reference from that
built script and then here is the
JavaScript I've got some libraries I'm
using local forge to hit index DB to
make that simpler to use make it look
like local storage I use mustache for
templating I'll go over that in a little
bit and I've got a simple little utility
library because quite frankly I'm gonna
make a video about this or at least a
blog post about this but I get so I got
so tired of just writing document that
query selector and query selector all
etc I just made a little quick
JavaScript object that abstracts those
away so don't have as much code in my
code if that makes sense
and anyway because you don't really need
jQuery for anything anymore and but I
did I do like the simple syntax that it
offers so I just made a made that so
you'll see that in the JavaScript code
when we go over that under the
application itself I've got one to
essentially manage the data set of
things at least I've tried to do that as
much as possible and one to drive the
app the actual UI side of it now a lot
of times I do if this was a little more
complicated
I would refactor this into essentially
some different controllers that have a
main app and then some different
controllers but because this is super
simple I just used the one big module
it's not really even that big let's see
how many lines of code again less than
250 lines of code to drive the entire up
there and less then let's see if I
button correctly yeah so we're looking
at less than 500 lines of JavaScript
that I actually had to write for the
I didn't do this
I'm sure actually didn't used any of
this be honest with you I did not I can
tell you right now it did not so I will
probably take this out I'm not even
using it I didn't realize that so that
will go away I think I actually copied
that for another project one more thing
I do have some polyfills for a few
things promises the fetch API and object
out of sign if you're not familiar with
object out of sign it's essentially the
equivalent to extend which you see in
jQuery and a few other libraries link
backbone lodash had it but they changed
it to match up it's called a Sun Inn and
I believe something like that but
basically this is a native function now
you don't even need to do that but I do
do some feature detection and load this
dynamically if I need to we can look at
that here in a second too because I have
changed that up recently and let's go
look at that real quick the progressive
web app icons for the homescreen I have
gone to putting those under a meta
folder to isolate those out from the
application images and I used the
progressive web app image generator to
just generate those for me and drop
those into the web manifest file as you
can see that's where I start with that
this is the web manifest file I'm not
going to go over that cuz I go over that
and a lot of other videos the
serviceworker I'm gonna have a special
video just for the serviceworker but
this is the serviceworker file and if we
go into here I'll just show you how we
do the feature detection real quick
there are three things I'm looking for
I'm looking to see if object at assign
and if promises are supported and
fetched because fetch depends on
promises there's a certain order if this
needs to be and now recently I've been
using the kind of a long strip I think
the film I group was the one that came
up with it but I just had to try
something on this and it worked and that
is go ahead and reference the script but
give it a type of script gas polyfill
and by doing that that means the browser
will not look at the source and actually
download it but this little this toggle
script method all it does is toggle the
type which is script polyfill to text
slash JavaScript
as soon as that happens then the browser
will download the file as a polyfill I
did test this out and Internet Explorer
because Internet Explorer I don't think
it supports promises and don't worry
it's never going to but the the
application work just Bond and Internet
Explorer for me so anyway this is a
quick overview of just how the source
code is structured and hopefully this
will help you out if you if you do clone
or fork these a source code to at least
know what is going on</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>