<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>What is Service Worker event.waituntil? | Coder Coacher - Coaching Coders</title><meta content="What is Service Worker event.waituntil? - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Love2Dev/">Love2Dev</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>What is Service Worker event.waituntil?</b></h2><h5 class="post__date">2017-09-14</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/GLDNWeSl1I8" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">if you're new to service workers even
trying to follow some code examples you
may have a question what is event dot
wait until on this video I'm gonna tell
you what you need to know about event
dot wait until hey guys Chris love the
owner of love to death and in this video
we're gonna talk about event dot wait
until now this is a very new function
that you may not have familiarity with
if you're just starting off in
serviceworker development you no doubt
encountered this in in code examples all
over the web but you may not have a clue
what this function does or why you need
to use it well this is a very important
function for service workers in the
install and activate event now when you
bind an event handler to either install
or activate that event can close at any
time but if you wrap your activity which
should be in a promise
inside event dot wait until that and it
utilizes the one member the really the
one member if you look at the actual
spec that's underneath essentially the
code that's underneath the hood this
event object that's being passed to your
install or activate event handler is
actually it's what they call an extended
event ok our extendable event and it has
a member called wait until and the
purpose of this function is to hold the
event handler open until all of the
action has happened and honestly the way
it's really written is until the promise
that's being executed inside of that
wait until function is finished and it
has completed now that could be either
returns resolves or rejects right so
we've promised we have either resolved
or reject and we handle that with either
then or a catch function ok
so basically what we're gonna do in this
particular code example is we're gonna
call self dot add eventlistener and then
we're gonna say install and that's gonna
be the event we're gonna bind if handler
to and actually I go I send text wrong
here but we'll do a vent into a callback
function now inside of our handler we're
gonna call event wait until which is a
member of this event object that were
the parameter that's going to be passed
to our handler from the the subsystem
here okay
now inside of this wait until function
we're gonna execute something now this
needs to be based on a promise because
everything inside the service workers is
now promised based you need to keep that
in mind now they didn't write anything
in here because I don't want to like
glue you into anything in particular but
just know that this is a promise and
when this promise finishes execution
that's when this wait until essentially
returns control back to the system so
that it knows that it's safe to
essentially close that event handler out
completely otherwise you could literally
be in the middle of executing code and
this event handler would just close up
right and that's one of the one of the
issues you have to be cognizant of when
you start working with asynchronous
programming now this an example as an
install event we could just as easily
done activate now one of the things
about the activate event that you need
to be aware of and the real one of the
reasons why this wait until is extremely
important in the activate event is while
the service worker is becoming activated
or taking over control of the clients
the your web page for example may be
making calls to the network and they
need to go through the fetch event
handler and what really goes on is you
could actually have those those pass
through and get essentially get hung up
in that fetch event handler with your
activate event so basically your
activate event handler is going to be
there and what's going to happen is
those fetch events that you're
intercepting are literally going to wait
until you've finished executing that
activator
all right and so we need to be cognizant
of that as well so that could be another
problem you may have all right Cooper is
gonna join us because he's getting
excited about this and maybe you're
excited about service workers too and if
you got any questions about the event
wait until function please leave those
in the comments below I'd love to have
dialogue with you you got general
questions about service workers feel
free I want you to leave questions and
comments below and we have a great
dialogue maybe I can use those as
guidance to make future videos all right
now if you like this video and you think
it's helpful definitely hit the like
button share it with your friends we
want to be able to help as many people
as possible understand service workers
and progressive web apps and we've got
all kinds of great resources available
for you
I'd love dev and on our Facebook page as
well thanks a lot I'm Chris love the
owner of love to death
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>