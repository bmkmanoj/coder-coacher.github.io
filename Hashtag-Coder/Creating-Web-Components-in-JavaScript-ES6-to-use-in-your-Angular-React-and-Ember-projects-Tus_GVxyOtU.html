<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Creating Web Components in JavaScript (ES6) to use in your Angular, React and Ember projects | Coder Coacher - Coaching Coders</title><meta content="Creating Web Components in JavaScript (ES6) to use in your Angular, React and Ember projects - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Hashtag-Coder/">Hashtag Coder</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Creating Web Components in JavaScript (ES6) to use in your Angular, React and Ember projects</b></h2><h5 class="post__date">2017-03-14</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Tus_GVxyOtU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey what's up guys
I wanted to do a quick video and talk to
you about web components now I first
heard about them back in 2013 w3c
released a version 0 spec it was really
experimental demonstrating how you can
create these custom web components using
just vanilla JavaScript and it seemed
really interesting but there wasn't much
browser support recently the polymer
framework that's created by Google
released their version 2 release
candidate and it supports es6 syntax and
lets you create custom elements using
version 1 spec that w3c have just come
out with and it seems really cool
there's a whole website about it and web
components org so those of you who don't
know what web components are what I'm
talking about web components are like
custom elements are just totally
encapsulated so a great example is if
you use a Twitter bootstrap framework
you know you have all these components
that they provide to you navbars
breadcrumbs lists and progress bars and
all of that one of the difficult things
is you know you always have to make sure
you import in the CSS you have to either
remember the mark-up that you need to
use that custom component or like me
you'll always be on their web site
copying and pasting and you know it gets
it gets a bit tedious I always thought
it would be great if you could do
something like this where you have just
a custom component called progress bar
you can set some attributes on it and it
will fill in the blanks it will add
styling web components actually lets us
achieve this that's really cool it does
it outside of any frameworks in fact
what's even better is it you can use
these
opponents within your framework as well
I wanted to see how easy it is to code
say a custom progress bar and then look
at how easy it would be to import that
into say an angular 2 project basically
see how easy it would be to create a
component that could be used through a
variety of different projects so if
you're using angular 1 or using angular
2 or even react or you're not using a
framework a tool we could use a same
progress bar throughout so let's dive
into the code and see the process I'm
going to create a folder called progress
bar and I'll CD into that and load it
into my editor really our component is
just comprised of just a simple class so
I'll create that class so that is
JavaScript and basically the way you
create it if we look at the
documentation at w3c provides it's a
very basic class that extends HTML
element that if you want to create a
very generic component one that doesn't
already exist or doesn't extend one that
that exists already but you know if
you're creating say a buying man maybe
does some sort of animation every time
you click it you can you can extend a
different elements or HTML button
element for example but we'll stick to
the basics for now going back to sublime
so we'll coil the class progress bar and
it will extend the HTML element
interface and the first thing we need to
do is in the constructor call the parent
constructor there and we'll give our
component some sort of context and
access some of the attributes from HTML
element the other thing that we're going
to do in the constructor is we're going
to set up a variable that we're going to
call shadow and we're going to set it to
what's called a shadow DOM and what the
shadow Dom is is it basically creates a
Dom that's separate from the main
document but is nested within that main
document and one of the things that lets
us do is add styling to our component
that doesn't affect any of the classes
outside so if we use a progressive art
class and there's already a progress bar
class somewhere else in our project any
styling we add within our custom
component won't affect anything outside
so it's encapsulated and it's really
convenient especially when you create a
component that you want to distribute
say on valor or NPM so if we want to
achieve something like this where we've
got a complete attribute that basically
sets how much of the progress bar is
going to be filled we can just create
that variable here too and will default
it to zero we'll add a couple of methods
to get and set that variable so complete
and it's just going to return just
complete and set complete with a value
and that's just going to set the
attribute so there's a set attribute
method and it will set that attribute to
whatever we pass in cool now going back
to the class definition here that w3c
provides us we can see there's three
methods that we're going to be using so
the first one is method called observed
attributes and in there we're going to
return a array of
tributes that we want to watch now every
time one of the attributes within the
array changes it will fire this method
underneath called attribute change
callback and if that's useful if we want
to make our progress bar dynamic so you
know maybe there's a loop or maybe
there's a HTTP request and that we want
to use to update the value of the
progress bar we'll put that code in this
method and the last method that we're
going to be using is connected callback
and all that does is when the element is
added to the Dom that's the method that
we call to render it so let's go back to
our code and set these up so the first
one was it's a stagette and it's called
observed attribute and we're going to
return an array and the only attribute
we're going to need for this demo is
complete we'll then set up the attribute
change callback method and it takes
three parameters the name of the
attribute the current value and the new
value and in there what we'll do is just
to make sure we set the right attribute
or
switch statement in there and when name
is complete we'll set the completeness
of the complete variable that we've
created and we'll set it to the new
value and just to make sure that we get
integer because what we're going to be
doing with this value is we're going to
be passing it into our template and
saying be the div the inner div width so
we just got to make sure that it's a
number and if it's not a number than
just default it to zero
and the last thing is will set their
connected call back and in here what
we'll do is we'll create our template so
I'll use backticks so that we can use
mul multiple lines and it's going to be
a really basic component so there's
going to be a container and it's going
to have a class progress bar and inside
that container will have another div and
we'll just give it the class progress
bar inner and that should do it then we
can add some styling to it as well so on
the progress bar class we'll just give
it a width of 50% of the screen it can
be anything but just for this demo so we
can see what's going on we'll give a
height of 8 pix
we'll give it a background color we'll
give it a border radius just to make it
look a little bit nicer 5 pic and we'll
set the text color to white and then the
inner div we'll make sure that it's the
same height as the container
we'll give the text inside so what we
can what we'll do is we'll just display
and the current progress as a percent so
we'll just set the line height to the
same as a height we'll give the field
area its own color so we can actually
differentiate we'll align the text in
there
to to the middle we'll set the border
radius to the same as the container and
finally we'll give a transition
attribute and what that would do is if
our progress bar is updating in real
time that transition will just animate
it and make it look less janky and a
little bit more fluid and here let's
just output complete and then add a
percent there cool
now we have our template we want to
attach it to our shadow Dom up here we
could do this dot in a HTML equals
template which would change the the
parent Dom but we want to change the
shadow Dom so it's the same thing by
just cool this shadow so now we have our
connected callback attribute change
callback adds of actually beaut glad I
caught that and just a quick change to
our attribute change callback we want to
set the value inside that in a bar and
we want to set the width so we can do
that every time as a complete attribute
is changed so the first thing we need to
do is get a reference to it so we'll use
query selector method to get the
progress bar in a div and then once the
values being set we want to say that in
a bar style width to this complete and
then it's going to be a percentage value
and we're going to study in an HTML to
the same thing and that should be
everything in our class so now we have
that we have to register it as a custom
element and the way we do that is
there's a attribute on window called
custom element and it has a define
method and what we do is first we set
the name of the method and that's what
we'll use to actually call it within our
done and then we pass in the class that
we just created cool so now we can save
that and we'll save that as progress bar
within our folder and we'll just create
one more file called index and that's
what we'll use to test this out so we'll
set it to HTML and we'll give the title
web component and here we'll just do the
same thing
we'll add basic styles to it just to
make the fun slightly more presentable
now we'll just set it to tell baffan ooh
nice and easy
and then we'll import our grip
and now we should hopefully be able to
test this out let's just make sure it
works so I have an ABS called serve and
that all that does is fires a simple
HTTP server if you guys want to know how
to do that
just drop a comment below and I'll show
you so if we go to local host on port
8000 hopefully we should see a page cool
let's just pull out console lucky we did
fix that error fresh they're happy it
should be good all right cool so now
let's test our component so we should be
able to do progress bar and then we can
set a value 60 for example but let's
take it a step further and have it
update in real time so let's up a script
and we'll put it in an iffy so that it
fire straight away and within that what
we want to do is we want to update this
value say we want to increase one
percent every hundred milliseconds so
our reference to it document dot query
selector is we want to find progress bar
and will initially have complete a zero
and then let's set up our interval
functions so progress interval equals
interval now you'll notice that I'm just
using es6 syntax without any transpilers
or anything that's because i'm using the
latest version of Chrome there is a
dependence a browser support table on
the web components website and you can
see that chrome supports everything out
of the box and as does opera if you're
using Firefox Safari or edge you do
have to use polyfills and I will put
links in the description for you guys so
that you can go in and load your
polyfills if you want to and you'll be
able to support browsers all the way
back to I think Internet Explorer 11 I
also play link in for the polymer
framework as well in case you want to
use that instead so back to the code on
each interval we're going to increase
the complete number by one we'll have a
fire every 100 milliseconds and we'll
make sure that it only fires until we're
100% complete
so if complete is less than or equal to
100 we want to set the complete
attribute to our complete variable and
if it's more than 100 then we want to
clear our interval called progress
interval
cool alright hopefully this works let's
check it out
come back here and let's lick come up so
what did we do wrong here we can find it
out progress bar try again and there it
is that's awesome
that was nice and easy so that's cool we
now have a component but it's only
really useful if we can actually use it
in a project so next what I wanted to do
is to show you how we could use this
component within a sample angular 2
application so I'll cancel this server
and we'll use angular CLI if you've
never used angular CLI and you're
interested I do have some videos out
there and that just gives you a rundown
on how to use it what it does and how we
can make it how we can speed up your
development so progress bar demo it's
going to take a second to load all of
that there we go
cool so let's load that up and so I'm
going to be lazy and what I'm going to
do is I'm just going to copy and paste
this into our assets folder what we'd
usually do is register our component say
to bow or whatever and then bower
install it that way we can maintain
versions and all of that but just for
the sake of this demo we'll do it the
easy way and then in our angular CLI
JSON we just want to register that
script
so here asset
and the skooled progress bar GS that
should load it in and then we want to
put it in our app component so progress
bar and let's say complete we'll just
let it go and hopefully run in G sub
will get it to navigate to 4200 then
unloaded yet so it's giving us an error
that it can't resolves that file and
that's just because you need to do that
and the file name was wrong try that
again
IP this time it should work let's see
what it says all right cool all right
so we do have an error and what that
error says is if progress bar is an
angular component and verify that it's
part of this module which it isn't
and if angular progress bar is a web
component and add custom element scheme
into the ng module schemas to suppress
this message so we have to go ahead and
do one more step so in our app module
file we just need to import custom
element schema like that and then we
need to add one more array called
schemas and
drop that in and if we go back should
reload this Oh put it in the wrong place
she'll be an angular core Oh help us we
got the element name right and there we
go
there it is nice and easy we got there
in the end so that was a very very quick
overview of web components it's by no
means a definitive look at them I
definitely recommend if you guys are
interested that you look through the
documentation I'll post some links like
I said in the scripture and have a read
through there's already a bunch of
elements that have been created flip
cards game cards and notifications
calendars and all of that so there's a
lot of information out there for you
guys to learn from and have fun show me
what you guys build</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>