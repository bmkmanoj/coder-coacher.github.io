<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>How JavaScript's Array Reduce Works - #JavaScript30 18/30 | Coder Coacher - Coaching Coders</title><meta content="How JavaScript's Array Reduce Works - #JavaScript30 18/30 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Wes-Bos/">Wes Bos</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>How JavaScript's Array Reduce Works - #JavaScript30 18/30</b></h2><h5 class="post__date">2017-09-20</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/SadWPo2KZWg" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">today we're gonna be solving a problem
that I actually run into fairly
frequently and that is I want to add up
the total number of minutes and seconds
and hours that is my actual videos so
what I usually do is I'll export all my
videos and I'll upload them to YouTube
or whatever it is my host and they'll
give me this like timestamp here 5
minutes and 23 seconds and I go ha I
need to I need to add that up altogether
right and and it's just in HTML so what
I've done is I've sort of replicated
what YouTube generally gives me
they have like a list item or a div or
something like that and then there's
going to be some sort of Dom node that
it's either like a span with the clasp
of time and inside of that I'll say 2
minutes and 34 seconds or usually with
YouTube they have a data - time
attribute that is a string containing
the minutes and the seconds of it so
what I wanted to do is to figure out how
do we pull these out of the Dom convert
them to numbers make them into minutes
and seconds add it all up figure out how
many hours minutes and seconds there are
totally and then finally console dot log
those actual values so we are going to
be using reduce in this one and I'm
going to show you how to first do it
with math and reduce and then we'll look
at how do you just make it in one single
reduce so we'll go into our script tag
here and I'm just gonna open this up
there's not much to look at for this one
it's kind of ugly but we're really just
concerned with these data - time
attributes here so first thing that we
want to do is we want to select all of
those nodes so we're gonna say Const
time nodes equals document dot query
selector all we're going to be looking
at not just a list item because you
don't know if it's just going to be a
list item we want to say anything with
the data - time attribute on it
now let's console.log those time nodes
okay we've got a bunch of list items now
what I want to do is I want to turn this
from a node list into an array of actual
time string
so you might think okay well do this
Const let's just say seconds equals time
note stop map and for each one we are
going to take the node and you're going
to return the node dot data set time so
watch what's gonna air out in here
all right time nodes dot map is not a
function so map is not a function of
time notes why is that I thought it was
an array let's see it again time nodes
is looks like an array walks like an
array but it's not it's a node list and
if you open up the prototype we do not
have we have a for each which we could
use but it's not as clean so what we
want to do is convert this sucker from a
node list into an array and there are
two ways you could spread it into a new
array or you can run array dot from
around the entire thing and now when we
loop over it we should have our seconds
variable which is now going to be an
array of all of the times good so what I
did there is I took the time nodes and I
mapped it which means I took I made it
from an array of list items and into an
array of strings good now what I want to
do is turn that into just seconds okay
so we're going to dot map it into and
that is going to give us the time code
and from that we are going to split it
because if we have a string like this I
want to break that into minutes and
seconds so let me let me show you an
example here I might say something like
string dot split and we split it on the
colon and that will give us the first
thing is going to be the minute so the
second thing will be the seconds so what
we can do is we can use es6
destructuring there which they say Const
mins sex is equal to time code split and
I'll split it on that
okay so let's see where that gets us we
want to console.log the mins and the sex
and you see that we've got a 543 2 K
we're good we've got them into their own
variables however there they're black
and what that tells me is that they are
strings and if we want to do any sort of
math because what we're going to be
doing here is we're going to return the
mins plus the minutes times 60 and plus
the seconds and if we take a look at our
seconds array here you'll see that these
are way bigger than they should be zero
four seven that's not a number and
that's because when we split that string
off of it it's still going to be a
string so if I take something like a
string of six ten and I split it each of
the six and the ten are still strings so
what can we do we could just map over
that array real quick and you could pass
it parse float and what that will do is
it's going to run the parsefloat
function against every item in the
result array and that's going to return
to us a actual array of numbers so we're
gonna split and then right away
map that into parse float and that's the
same thing as doing this function stir
stir and then returning parsefloat stir
but because we're just running this it
doesn't make sense to run a function you
can just pass it the function directly
and it will call that function against
every item in that array good so what do
we got here let's look at our seconds
good we've got an array of seconds
the first one is 343 seconds so I don't
1 is 47 seconds let's double-check that
right here the first one is that it
looks good the fourth one is 47 seconds
good so our numbers are all adding up
now we want to add them together so how
would I do that well reduce is a really
good way so if map takes in an array and
exports an array a reduce will take in
an array and return anything you want it
could be a number could be a string
could be an
object in our case we are going to take
all of these numbers and reduce them
down into one big number so we'll call
that reduce and that will give us each
we'll call that a total in seconds and
from that we are going to return the
total plus the seconds and of course we
can make that a nice little tidy arrow
function so just do it in one line so by
the way the seconds is not the same as
the seconds if you wanted to rename that
to something like vid seconds just so
you don't confuse yourself go for it
good now let's see what our main seconds
variables at okay good we've got the
total number of seconds for every single
video added together good I'm nice and
happy with that now what we need to do
with this seconds variable here is we
need to chop it down into hours minutes
and seconds so I'm going to create a
variable that's sort of going to be a
running tally of seconds left because
we're going to just start chipping away
at the hours and minutes in a second so
we'll say let seconds left equals
seconds then we make our hours is going
to be equal to normally we do something
like this
seconds left divided by 3600 and what
that will do if I save it we look at how
many hours we have we have four point
nine hours but we don't care about the
point nine so what we can do is if we
can just grab the lower limit of that we
only care about whole hours the point
nine is going to make itself in two
seconds in minutes so wrap it in a
math.floor and that's going to tell us
that we have four whole hours now
seconds left is equal to how do we
figure that out it was like point nine
so is it that does that mean there's
like 90 seconds left no it doesn't
matter because math is 100 based and
minutes are 60 base so how do we figure
that out well what we can do is we take
the seconds left and we use mod
3,600 now what does mod do let's let's
do a little quick aside lesson I've got
a box of Smarties and in that box I have
10 Smarties now I have 5 children so I'm
gonna divide that by five how many
Smarties as each kid have two every kid
gets two Smarties good but what if I
open up a box in low and behold there
was 11 Smarties well there's only five
kids so how many smartness is each kid
get to 2.2 Smarties there's no way
you're gonna you're gonna oh by the way
if you're not Canadian a smarty is like
mmm it's like a little chocolate treat
so there's no way you're gonna cut a
little smarty up into 0.2 pieces
so what we're only concerned with is how
many whole Smarties is each going to kid
gonna get math.floor so each kid is
gonna get two whole Smarties good but
now what we want to know and that's what
we've done right here but now what we
want to do is we want to figure out how
many Smarties are left for dad because I
get to eat whatever it cannot be evenly
distributed between all the kids so what
we have is 11 Smarties mod 5 and that's
going to return to us 1 y1 because what
mod does is it says how many are left
after they've been evenly distributed so
after each kid gets to there's going to
be one left same thing if I have 5
oranges and I divide them by 2 kids
there's going to be one left because it
doesn't tell us and let's do a second
example if I have 73 seconds and I
divide that by 60 seconds we clearly
have one whole minute math.floor shows
us one whole minute but what is that
point two seconds that's not 20 seconds
because that's that's a percentage so 73
mod 60 will tell us that after we chunk
it out into one whole minute we have 13
seconds left that's exactly what we're
doing here after we
chunk it into the hours we are going to
have this many seconds less let's
console.log seconds left o seconds there
we go so we have three thousand five
hundred and thirty-eight seconds left so
we can go ahead and do minutes now const
mins equals we'll do the same thing math
dot floor like the seconds left and
we'll divide that by 60 because there
are 60 seconds in a minute and then we
update our seconds left variable just
like we did here but instead we use 60
and this is why i use LED up here
because we need to reassign this value
over and over so console.log hours and
minutes four hours 58 minutes and then
we can just use the seconds left because
that's that's what's left at the end of
the day there's no need to convert it so
we have our seconds left variable so 4
hours 58 minutes in 58 seconds you can
test that you can take this one that's
404 and change it to 406 if you refresh
it will show you 4 hours 59 minutes and
0 seconds left so that's how I would do
it um you could also I've done this in
in to map map and reduce just so I can
show you what we're doing in every step
of the time but if you really understand
what's going on here this could be all
done in a single reduce you take in this
array of nodes you convert the data set
dot time into minutes and seconds you
convert that then into seconds then you
convert that into whole number of
seconds once you have the number and
then finally add it all together so it's
up to you whether you do it in one shot
or make it a little bit more readable
and chunk it into separate ones and that
allows you to write little comments
above each of them hopefully you enjoyed
that I will see you tomorrow
[Laughter]</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>