<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Make a Whack A Mole Game with Vanilla JS - #JavaScript30 30/30 | Coder Coacher - Coaching Coders</title><meta content="Make a Whack A Mole Game with Vanilla JS - #JavaScript30 30/30 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Wes-Bos/">Wes Bos</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Make a Whack A Mole Game with Vanilla JS - #JavaScript30 30/30</b></h2><h5 class="post__date">2017-10-31</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/toNFfAaWghU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">here we are on day 30 and have a little
bit of fun today we are going well like
you didn't have fun the whole time but
we're gonna be building a game so you
can have fun and play it and just have a
great time so what we are building is
whack-a-mole and what happens is when
you run the game you're gonna get these
little critters popping up in random
holes at four random amounts of time so
and then when you click them you get a
point you sort of have to follow and
along with your mouse so there's a
couple of things we need to know here
the game itself is going to be ten
seconds long but which hole the mole
pops up in and for how long that mole
peeps his head up from the ground is
totally random it's all gonna be between
like 200 milliseconds in a couple
seconds and then the the mole hill that
it's going to pop up from is also going
to be totally random as well so I've
gone here and I've gone ahead and
selected all of the holes I've gone
ahead and selected the scoreboard which
is the 7 right here and I've gone ahead
and selected all the moles so look at
our HTML here you got your holes you got
your moles in your holes and we're ready
to roll with our moles in our holes so
we first need a function that's going to
give us a random amount of time between
however minimum and maximum so we're
going to say function R and time and
that's going to take a minimum and a
maximum and that will return a
math.random times X minus min plus min
and we've done this whole off set thing
a couple times now I'm not going to
explain it again that should give us a
function that if we open it up in our
browser here and we run rand time and if
we go between 20 milliseconds and 2
seconds just gonna give us a random
amount of milliseconds we could probably
also pop a math dot round around that
just so we can get a nice clean number
of milliseconds back there we go
now we're getting a random amount of
time that it's going to
popping itself up so it's one function
it's sort of a bit of a utility then we
needed another function that's going to
pick a random hole for the mole to pop
up from so function random hole that is
going to take in a list of holes which
is going to be in our case it's going to
be this holes that we have here however
is could be any list of Dom elements
essentially this is just a get me a
random Dom element function there and
what we're going to do here is let's
just console.log holes now if I were to
run ran hole and pass our holes variable
we're gonna get six why because holes is
a node list that contains all six of our
holes okay good so we need to find a
random index between zero and five which
is going to give us that one so it's at
kansai DX math.floor math.random times
holes dot length cost hole is equal to
holes by DX why because that's gonna be
like hole zero one two three four all
the way up till five
so I DX and then let's just cancel the
whole itself so now if we run that
function by passing it our holes gives
us five 5:05 again that's gonna be a
problem for us
one 101 again that's gonna be a problem
for us one I get what are the chances I
guess one in six hole three hole too you
see I was giving us a random one but the
problem that we're running into is that
sometimes we get the same one it's it's
a one in six chance so it's going to be
pretty common and you don't want the
same the same mole popping up so what
we're going to do is we're going to
create a variable up here we're going to
say let last hole and that's just going
to create a variable and then down here
we're going to say at the very bottom
put a line in between that one say last
hole is equal to hole and what this will
do is it will save the reference to what
one got popped up last time this
function was called so that in here
we can do it'll say if hole is equal to
last hole like if it was the same one
that popped up last time I'll just come
so long ah nah that's the same one bud
and then we'll simply just run this
function random hole again bypassing it
holes now this this function here is
just console logging but it's not really
what we want because we can't get the
the reference to the Dom node if we just
count along it so what we need to do
here is return the hole which is what we
have and then up here if it was the same
one we will just return that function
itself which will in turn get called so
you got some recursion going on here
returning the hole now if we rerun that
we should never get the same one twice
in a row so oh we got two things going
on here why do we oh because we're
running it and we're console logging it
that's so this one this little thing is
saying it's returned and we're console
logging so we can take that console log
out and run it there we go 1 2 3 to 6 3
there we go never getting the same one
every now and then we're kidding now
that's the same one but why because it's
it is in this case it was 1 and then I
found one again but rather than
returning it it just returned the
function which will call itself again so
if you call that a few more times you
might get a chance where it will run it
more than once yeah there we go see it
ran it once had one ran it again and got
one ran it again and got one and then
ran it again and got three so we've got
them running there so we got a random
time we got a random hole
maybe we should rename this to random
time keep that consistent random in
random hole next what we need to do is
actually get the the moles popping up so
we'll go here and we'll make a function
called peep which is they're gonna go
they're gonna pop up from their holes
and we will get some time which is a
random time it's going to be tween 0 200
milliseconds and 1 second and we're
going to get a random hole which will
should give us random
and pass it holes so now it just
console.log time and hole see what you
got here now when I just run peep we get
450 milliseconds hole five should pop up
whole four should pop up for 821
milliseconds hole three should be just
under one second so you see how we're
getting a random hole in a random amount
of time so what we'll do here is we'll
take that hole we'll add a class to it
of up and that is going to trigger our
CSS to be top zero and that's just going
to animate itself in because by default
I have put on top 100% and I put a
transition of 0.4 seconds to pop up on
it so there we go let's let's try this
here hey hey there he is
I'll do it again hey and again and again
and again and again you see that they
are all slowly popping up however we
don't they don't go away
and what we need to do now is after this
random amount of time we need to remove
the class of up from this random hole
set timeout which is after how many
seconds time and when that happens we're
going to take our hole and we're going
to remove the class of up oh not remove
class just remove remove classes jQuery
so here we go and I would say peep I
think goes down deep again goes down
deep again woohoo having some fun here
awesome then what we need to do is
unless the game is over we just need to
run it again when it's done
or run peep so if you were to keep
kickoff peep like that it's just gonna
run indefinitely because there's no way
to actually stop that so what we'll do
here is
we'll go up to our top and we'll create
a variable called time up and we'll set
that to false and we'll go down here and
we'll say if the time is not up then we
will run peep so if there is the
variable time up has ever set to true
then it will stop so here we go well run
peep it's going to run forever but then
we can take this time up variable it's
set to false we can set it to true and
it never starts again because it just
well people call itself and then it will
call itself for the last time because
this will not run okay that makes sense
so far
then what we need to do is make a
function called start game function
start game and first thing we need to do
is just reset the scoreboard here just
in case there we're playing again so
I'll say scoreboard text content is
equal to zero then we'll say time up is
equal to false again we set that on page
load I know but if you were to run start
game again like you want to play twice
then you could do that then we want to
kick off peep there which will run it so
let's see here
start game so they're running like crazy
but what we also want to do is after 10
seconds we want to set that variable
that we time up we want to set it to
true so set timeout after that happens
we'll say time up is equal to true and
that will run after ten seconds ten
thousand milliseconds let's do it after
two seconds now it's just so we can see
if it works so we'll run it two seconds
is the elapsed and no longer is running
good so we'll set that back to ten
seconds so we got our start game got our
peep and we can make a button now that
when clicked we can maybe put a button
right here on click
game start no you click it will start
playing the game for you
woo last piece that we need is when you
click on a mole
we need to bonk them on the head so we
are going to make a function called bunk
it's gonna take in the event console
long the event then will take all of our
moles and we will listen for a click on
each of the moles and we'll run bonk
bonk good so now we have to get a little
bit crafty with our clicking o start it
click a I got the first one all right
let's take a look at this mouse event
all kinds of information in here first
thing I wanted to do you might say like
Oh Wes but I can fake a click with
JavaScript couldn't I just like do that
and win the entire game well on all of
your events you have this thing called
is trusted and it will say true if you
fake clicking something with JavaScript
that's going to be false because you can
you can simulate a click which is handy
in some cases but we need to be true
that this actually came from the users
mouse input so first thing we're going
to do is we say if bang a dot is trusted
returned and that will say cheater so
you try it someone's trying to fake the
click without their mouse okay good then
what we want to do here is when someone
clicks something we got to give them
some sort of score so let's go up to the
top here and we'll say let score
let's equal to 0 and when we start the
game we'll set score to 0 as well just
so that if we restart it we can do that
and then we'll go down here and want
some because a score plus plus and we
will move that little guy down so this
dot class list dot remove up because if
you if you smack them they should remove
down even if they have like a second or
so left on the clock and then we take
our scoreboard which have we selected
that yes yes we have document a query
selector and we'll set the text content
I got 8 and click start will run again
and you can keep playing with all of
your values there so that is our
whack-a-mole game there's a lot more you
could do first of all what would be
really cool is if you had like an
all-time scoreboard and you were to save
that in local storage so if someone were
to come back then you could reload the
the high scores and you save them in
local storage it would also be cool if
you had like levels like this is like I
don't know pretty clickable but if you
were to say like expert level and then
you were to change this random time to
like between 50 milliseconds and 300
milliseconds and then it would be like
super hard like
like some people would be really good at
that not me but I got one sweet so you
could do expert mode you can just create
all kinds of different controls up here
along with the dashboard and I would
just love to see where you take this one
hopefully you enjoyed that and I won't
see you tomorrow because that is it I
hopefully you enjoyed it and I'll have a
little bit of an outro video for you as
well thanks a lot
[Laughter]</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>