<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Vanilla JavaScript Sticky Nav - #JavaScript30 24/30 | Coder Coacher - Coaching Coders</title><meta content="Vanilla JavaScript Sticky Nav - #JavaScript30 24/30 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Wes-Bos/">Wes Bos</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Vanilla JavaScript Sticky Nav - #JavaScript30 24/30</b></h2><h5 class="post__date">2017-10-10</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/5FLOBCGH3_U" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">today we're gonna do something that this
is probably one of the very first things
that I learned in jQuery when I was
first starting to learn JavaScript and
it was how do I actually fix a nav when
you've scrolled to it so this is what
we're gonna be building here where once
you've got this now that's just
position:relative or static and then as
soon as you hit that point or it hits
the top of the browser we're going to
make it fixed so the content Scrolls
underneath and then we can also do some
hotshot stuff like like scroll out the
logo or something like that so first
thing we want to do is grab this nav
right here so I say constant out equals
document dot query selector and we're
going to look for the now with the ID of
main and then we're also going to make a
function called fixed nav that is then
going to run every single page scroll
awesome so what this is going to do is
we're gonna figure out where the BA or
the top of this navigation block bar is
let's say it's 500 pixels from the top
and then when we scroll we're gonna
figure out how far are we scrolled let's
say right here I'm about 400 pixels
scrolled but as soon as I hit that
threshold of scrolling more than the top
of the nav is so as soon as I've
scrolled 500 in 1 pixels the nav bar is
gonna go up I'm off screen I should now
fix myself so what we need to do on page
load is grab wherever the top of this
nav actually looks so say Const top of
nav is equal to knob knob now I've got
offset top then when you console that
log top of now let's just console.log
that every single time that we run it
open up your dev tools I recommend
putting your dev tools at the side here
so that won't mess up your top of nav
here you could also update this variable
every time that your your window resizes
just so that if somebody does resize or
open def to
you've got it so I'm going to scroll
here and you see it's 542 pixels that is
the top of the navigation at that point
so what we can then do is we'll same if
window don't scroll why why because what
is window tell scroll why well let's go
back to that top of and then we'll also
console.log window dot scroll why we've
done this in a couple tutorials so far
now so now you're going to see that the
second value one that's how far we've
scrolled and then you're going to see
that as we get closer and closer to
where it's going to hit the top we're
just about at that point where the 542
pixels is going to be equal to the 542
and at that point we want to make that
nav fixed so we're going to go in here I
want to say if top of nav is greater or
equal to window or other way around
window dot scroll Y is greater or equal
to top of now if that is true what we're
gonna do is we're going to pop a class
and when I do things like this I like to
pop the class on the body just so that I
can always target any of the children
when we're in the fixed nav state some
people like to put it on the nav itself
but I found that if I want to target
anything else it's nice to have it nice
and high on the body document dot body
class list dot add fixed - nav and then
we'll say else and we'll just duplicate
this which we're going to remove now
that's not going to get us all the way
there but if we save that now and
refresh now as you scroll you'll see
this fixed nav is being added and
removed but it's not actually fixing
itself so we need to go over to our
style - start dot CSS and find our nav
CSS and this isn't the greatest CSS
because it's using just element
selectors here should probably have a
class or something like that but I'm
trying to keep it as simple as we can
and I'm gonna say when the body has a
class of fixed - nav the nav itself is
going to be position fixed and then I'm
going to put a quick little box shadow
they're just give it a little bit of a
shadow so when it is in that fixed state
you have a shadow showing that you have
some depth there all right so now when I
hit this point oh you see what's
happening now it's it seems to be
working but it seems kind of kind of
janky you see what's going on here as
soon as we hit that little end point
there the the content jumps up and and
why is that happening well the the
reason for that happening is because
when you make this nav fixed it is no
longer taking up space in the document
you know this from CSS when you make an
element fixed it no longer takes up
space it sort of floats on top of the
browser and by doing that what's
happening is that we cause a reflow on
the page and this site wrap right here
it says oh this nav is no longer taking
up space oh don't mind if I do
and it moves on up the exact amount of
space that it gave up which is however
many pixels so what we need to do is we
need to offset that amount by adding
some padding to our body so just as we
make it fixed we need to offset that
amount so don't get this jerky jump
right here so let's go back to our
element right here and we're going to
take our document dot body dot style and
we're gonna set the padding top and if
you have something that is like padding
- top you cannot do that in JavaScript
so it's camelcase and we're going to set
that to be the nav dot offset height why
what is that going to give us if I were
to run this in my console here now dot
offset height is going to give us
however large this nav is and I've seen
people just like hard code 64 px but
don't do that because then what happens
if you don't have changes or your font
changes or anything else and then you're
gonna be off just a couple pixels so
programmatically grab the height of the
pixels and then add on px to the top and
then what we'll also do is on the
opposite end we'll just set the padding
top to be zero
good so now when whoo look at that so
now we've got this nav nav nav normal
normal normal and then fixed and as soon
as we hit that point we don't have that
jump anymore and you can go into your
elements panel and take a look at what's
going on here see this style of padding
top zero and then as soon as we hit that
point the class of fixed goes on and
then the padding top is sixty-four px
again why you might be asking why don't
I just like put it in here when it has a
class a fixed nav give it padding top of
64 px this is we don't know how high
this nav is gonna be and I rather do it
programmatically and do it inline then
have to guess and update that every time
the nav changes itself so that's looking
pretty good so that's working great
there's a couple other things that we
can do if you open up your nav you're
gonna see that we have an Li with a
class of logo if we look into our style
sheet here you see that I gave it a max
width of 0 and give it an overflow of
hidden so it's there it's just not being
shown at all because it has a width of 0
then what we're gonna do is we're gonna
say when the body has a class of fixed -
nav the Li with the class of logo is
going to have a max width of something
bigger than it will ever be like 500 px
and I'll show you why in just a second
why we didn't use width in this case so
give that a safe and now watch what
happens when we scroll when we hit that
point whoo it slides itself out why
because we have set it to be default
zero and then when you have a max width
of 500 it's going to transition which is
right here you could set that to be 5px
if if you really like and then over five
seconds it's going to animate itself in
and animate itself out
now a bit quick question this is a bit
of an aside nothing C of JavaScript
why didn't I do width and width:auto and
that's because you cannot animate the
width of something to be from zero to
auto you do have to use a max width
in order to get that transition to kick
in here so nothing brings itself in
obviously let's do it over half a second
instead Wu brings itself in and then one
last thing that I did is if you look at
this site rap you'll see I've given it a
scale of 98% we can do here is when the
body has a class of fixed now the site
rap is going to take our transform we're
gonna scale it up to 1 so it's just
going to go from 98% to 1 and we're
gonna get this little you see how it
sort of brings itself in a little bit
effect I really like these things
because all we did there is add one
class to the body and then everything
else is just taken care of in our CSS so
hopefully like that it's really
interesting there's not a lot of code
but understanding that you need to take
care of that extra space when you fix it
is really the key to this one thanks a
lot I'll see you tomorrow
[Laughter]</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>