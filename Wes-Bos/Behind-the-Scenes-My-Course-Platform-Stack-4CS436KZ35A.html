<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Behind the Scenes - My Course Platform Stack! | Coder Coacher - Coaching Coders</title><meta content="Behind the Scenes - My Course Platform Stack! - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Wes-Bos/">Wes Bos</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Behind the Scenes - My Course Platform Stack!</b></h2><h5 class="post__date">2016-12-16</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/4CS436KZ35A" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">everybody Wes here I'm just about to
head off for Christmas vacation and I'm
cleaning on my email and I'm seeing like
a lot of emails from people saying like
what's the stack that you're running on
what's the platform that you used to
sell your horses to give away your free
ones like I'm interested in and I always
think it's interesting to see what the
stack is behind all of that so what I
thought I'd do is sort of just run
through this whole thing and in what
powers at all so this is a custom-built
node application that I've been cooking
up for probably about three three and a
half years now so it's been a long time
in the making and starting to get pretty
polished in terms of what works for me
it obviously is not something that would
work for everybody that's one of the
reasons if I don't have it available to
other people but hey maybe one day in
the future I'll do something like that
so I've got like JavaScript 30 I've got
es6 IO and I've got react for beginners
all running on the same stack right now
and I'm currently working at moving over
all of the rest of my courses to this
this application as well first someone's
gonna be my sublime book and then the
rest of my free ones as well so the way
it works and I'll just go over
JavaScript 30 right here is you put in
your email what that will do is it'll
send off an email to you and then you
click that you sign up for an account or
you log in to your existing account and
what's cool about this is that we share
accounts across all of these so if
you've bought any of my courses before
you'll be able to log in in and see yeah
so that's what you get here with your
account dashboard once you've logged in
it's pretty simple right here it just
shows you a list of all the purchases
obviously I've been trying it out I've
got a bunch of reacts here and then once
you log in you can see your invoice you
can download your starter files if you
have access to download some of the
files some of the packages don't have
access to download just streaming and
then of course you can always stream for
each of them go ahead and click through
to stream on one of them and what that's
going to do is it's going to load up
this video player here has the ability
to control the speed you can jump ahead
a number of seconds you can download the
files you can click on one of them it's
just a regular video player here so and
then of course on the front end here if
all the information about it
there's intro videos and then the big
one is you can go ahead and buy it
either with a credit card or PayPal so
let's start from the beginning and talk
about what that stack looks like so it's
100% JavaScript everything runs on node
I use Express which is sort of like a
framework for node.js that will allow
you to take in requests and do routing
and all that good stuff so stress is a
pretty big one it's it's sort of like
like laravel for in the PHP world or
rails it's a little bit stripped back as
everything is in JavaScript and you do
need to install a lot more stuff to to
go to to carry on with that I use
passport Jaz to manage a login so
there's a whole login system and once
you login you can access your stuff
that's done with passport j/s which has
a whole bunch of different ways that you
can authenticate with like github or
whatever I use MongoDB to store the data
so that's my database I use mongoose
which is a node package to make queries
and aggregations and and all that good
stuff and then the actual database
itself because i feel very scared about
hosting my own database is i use a
service called Mongo hub and it's
essentially just a service that gives
you a database and they do all the
backups in the replication and uptime
and all that headache stuff that you
don't want to deal with they do all of
that and then since I've been building
this for three and a half years most of
it is built in something called a sync
jjs which allows you to step things like
someone can buy a product then you check
their credit card then you do this and
that and that you step through it I use
a sink for that however I'm slowly
moving everything over to promises and
then I'm really looking forward to
promises are obviously hopefully you've
taken the es6 course you know that's
part of javascript but once a sink and a
wake comes to note i'm going to move a
lot of it over to that as well so that's
really the backend that we have here the
servers it runs on a digital ocean it's
just a $5 a month box although I'm just
about hitting when I launched JavaScript
30 it started to fall over so I needed
to move it up to
10 or $20 a month box I use SSL's comm
for certificates I know that you can use
let's encrypt for free ones but I pay 15
bucks for three years at SSL's comm and
I want to worry about cron jobs or
anything like that not worth it or
totally worth it for me nginx is a
server that sits on top of it so because
I am on three different domains
I don't just serve up Express write to
the domain name what I do is I run nginx
which is a web server and that'll sit on
top of my Express and then whenever
someone hits any of these domains at
first is gonna do all of the serving of
the certificates and second it's going
to proxy those requests es6 IO react for
beginners because these are all running
on port 80 and my application runs on a
different port so it's gonna proxy it
through to whatever that is and then at
that point my Express application picks
up the requests figures out what the
domain name is and then will show the
correct index dot Jade and show the
correct prices and everything related to
that specific course on the server I use
something called forever which if you
ever have node it's not like PHP where
if something crashes you can just
refresh the page if node crashes then
you have to restart the application so
if what forever will do is if something
crashes for whatever reasons I write
terrible code or something like that
forever is gonna kick it back into place
on the payment side of things I use
stripe for processing credit cards just
the best experience ever working with
stripe if you ever have to process
credit cards absolutely go stripe it's
just a really great overall developer
experience in order to process credit
cards what's really cool about strength
is that you just never touch the credit
card number the person inputs it on the
page how that sort of works let's
explain this here what a big page so
when someone types in their credit card
number right here what that does is it
goes off to stripe it doesn't go to my
servers it goes to stripe and straight
comes back with what's called a token
and then I use that token on my server
to actually charge it so stripe will
sort of like make sure that you can
charge the card and all that good stuff
and then on the server I'm gonna
actually process that charge and that's
really nice because then I don't have to
ever worry about having credit cards in
my logs or on my server never touches it
it's only in the browser that goes
straight to stripe of course PayPal for
using PayPal I get a lot of people
telling me like hey you should use
stripe instead of PayPal and of course I
use stripe for credit cards but PayPal
is an absolute necessary evil in this
industry I didn't have PayPal for a long
time I got a ton of email when I
implemented PayPal I got tons and tons
of new signups my sales went up about 20
percent so whereas stripe is like the
best thing in the world
PayPal is just the absolute worst thing
in the world to work with but it's a
necessary evil so we sort of have to
work with it
and then also I've got something I use
something called pushover which if I
have a sale my phone will go to Ching
and to do that I use pushover which when
I make a sale I just ping this API and
then it will send a bitching to my phone
and I can see that in there I'll also
have like reporting in my back-end as
well if we go to my dashboard here I've
got this if you're an affiliate you can
log in and go to the affiliates and you
can see how much you've earned to where
people are coming from see monthly
breakdowns and then I also have my own
dashboard that short sort of shows me
sales and signups and numbers for that
um on the front end side of things I
make all these these sites myself just
HTML CSS some JavaScript that goes along
with it I write all of my CSS in
something called stylus which most
people have never heard of I saw a graph
the other day and it was like 10 percent
or 2 percent of all people have even
heard of it and what it is it's just
like sass or less is absolutely not
better or worse it's just a personal
preference and one of the features that
you can do with with stylus is you don't
need your semicolons or your colons or
your brac
you can put them in if you like but I
prefer to just do it based on
indentation and I'm a big fan of it
I've been trying out for JavaScript 30
I've been trying out like a BEM because
I had a the site is getting a bit big
and I'm starting to feel the pain of of
having a large CSS code base here so for
JavaScript 30 I completely rewrote it
with them which is block element
modifier and and I'm really liking it so
I might uh I might move to that for my
next one we'll see that's like on the
player side of things so like all of
this sign up this one's just pure
JavaScript this one is built mostly in
jQuery and then on the back end here
this is react so this whole player
experience I really wanted to have
control over what this looks like so the
videos first of all the videos are
hosted on Vimeo which everyone says
that's weird because I don't see Vimeo
player but if you were to inspect my
player here you'll see that the video
source let me see here is player Vimeo
calm so the video source if you've
signed up for Vimeo Pro
they will give you a streaming URL which
for 150 bucks a year you get unlimited
bandwidth which is unheard of because I
pay 150 bucks for people to stream and
then on the account dashboard when
people download the course I host that
on Amazon called
s3 with something called cloud front in
front of it so s3 is like where you put
your your files and then you can choose
what like where do you put them in
Virginia or do you put them in Toronto
and what cloud front will do is cloud
front sits in front of s3 and it will
distribute it to everywhere because I
initially just had it on s3 and people
were from Germany and stuff we're
complaining that the downloads were just
brutally slow and I was like oh that's
weird it's because they were hosted in
Virginia so cloud front will distribute
it to all the servers and then just pick
the closest one and allow them to
download that but I pay like hundreds of
dollars a month for people to download
these zip files right here which is
crazy expensive for me some months when
I do a big launch is over a thousand
dollars a month to download that and
then I
almost nothing for you to stream them so
if you if you wouldn't mind streaming
them that would really help me out so
the player is in react here I've it's
html5 video player one of the reasons
why I went with html5 video player is
because it's totally accessible I don't
need to build any interface on top of it
and also one cool thing about it is that
you can have captions go on it so I just
I have captions done for all my videos
and people who are ESL or people who are
deaf are able to just turn those on and
don't have to create a new interface for
that the whole thing down here this is
all done in react as well and then the
checking of when you're done a video I
listen for the html5 video player to
progress in every 10 seconds or so what
I'll do is I'll save where you are in
that video up to the database it's
attached to that person's profile the
other big part of this whole stack is
email because when you signup when you
reset your passwords it's called
transactional email and all of that
stuff is done it's actually pretty
complicated setup that I have so I write
my HTML and something called Jade so if
I were to look at index Jade this is
what Jade looks like it's it's by the
same guy that built stylus it looks the
same it's all based on indentation you
don't have any closing tags you just
indent it all and I just really really
like it I really enjoy it it has it's a
templating language so you can do
looping and including in partials and if
statements and you can also just put
JavaScript in it if you want to do a
little bit of logic you don't have to
like figure out like oh what's the like
weird equivalent in this language you
just use JavaScript at the end of the
day which is sort of like react so big
fan of that and I also write my emails
in Jade and then I take my emails from
Jade and they get compiled into HTML and
then I also write them in these HTML
blocks in something called Enki so if
you've ever tried to code in html5 or
HTML email before you'll know that it's
just the worst thing
the world so what he will do is you just
like code like button tag or like a
panel tag and then it will convert it to
like the hellish table nested tables for
you so you don't have to worry about it
so I code like a button tag in HTML inky
will turn that into the equivalent table
and call span and all that
which is really really nice and then you
also something with emails you need your
styles to be in line you can't just put
a style tag and expect it to work across
all of them so there's this thing called
juice which will then take my HTML and
take my CSS and then apply inline styles
to every single paragraph tag and button
on the actual page finally once that's
all done you send it to the user I use a
package called node mailer which will
connect to their SMTP server and then I
use a service called postmark to
actually send out those emails I was
using Amazon SES had a bit of trouble
with that and I'm kind of glad it
happened because the postmark has a
really nice interface for seeing like
who received your emails when emails
were sent how many people opened them
what links were clicked it's nice to
like if someone says like oh I never got
an email and you can just go in there
and take a look and it did send so it's
not a problem on your end it's it's a
problem on their end so I think that is
it it's it's a pretty cool little system
really this is where I cut my teeth in a
lot of my node stuff because I've been
doing it for I've been doing like node
and Express for about five years now and
I've been building my own little
platform beast for about three three and
a half years now and learning a lot
about it and it's it's really fun so I
don't necessarily recommend it if
somebody wants to cuz obviously it takes
a long time to build just something like
this but if you're looking to learn it's
it's been a really nice stack for me so
hopefully that clears up a whole bunch
of questions I'm happy to answer any
more in the comments also hit subscribe
if you're interested in more stuff like
this I'd love to hear you thanks I'll
see you later</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>