<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Vanilla JavaScript Slide In on Scroll - #JavaScript30 13/30 | Coder Coacher - Coaching Coders</title><meta content="Vanilla JavaScript Slide In on Scroll - #JavaScript30 13/30 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Wes-Bos/">Wes Bos</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Vanilla JavaScript Slide In on Scroll - #JavaScript30 13/30</b></h2><h5 class="post__date">2017-09-05</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/uzRsENVD3W8" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">today we're going to learn how to build
a slide in on scroll and you slide down
the images will sort of slide themselves
in from the left or from the right and
you can do whatever other animations you
like to do
I've actually got this request from a
lot of people over the years and I'm
always hesitant to do it because I I
really don't like the effect all that
much I think it's kind of annoying to
have to wait for it so use this with
your discretion however that said I
think that you can learn a lot about
window events and then we're also going
to talk about debouncing which is going
to make sure that this is not just
hammering on scroll so let's go down to
our script tags here and you'll notice
that I've already given you a debounce
function here and we're gonna talk about
that in a second but imagine it's not
there it's gone okay now what we want to
do is first thing we need to do is
select all of the images that we are
going to be listening for and if I open
this up in the browser here you'll see
that all the images by default are being
hidden and if you inspect them you'll
see that I've just translated them
off-screen just a little bit as well as
the opacity here see that's really where
they are and then I have to translate X
them off-screen so you could you could
really do them all the way off screen if
you prefer and then I've scaled them at
95% so it just gets a little bit of a
nice little fade in effect here so by
default they are going to be hidden and
when they scroll into view or when they
are have scrolled into view what we're
going to do is we're going to apply a
class called active which is right here
and that is going to bring the opacity
to one and translate the X to zero
putting it where it was and scaling it
back up from 95% to one or a 100% so we
need to select all the images that we're
going to be working with here so we will
say Const slider images equals document
a query selector all and we want to
select every single image that we want
to slide in and that they all have a
class of slide in good now what we want
to do is create a function
called check slide that will run every
time the person Scrolls so a function
check slide and let's just pass
ourselves the event and console.log the
event and then when the window is
scrolled we are going to run the
function check slide let's say look at
what we got here
open up your dev tools watch s whoa look
at this I just logged like hundreds and
hundreds of offence when I've gone and
this can be a little bit of performance
issue because the amount of times that
it's actually running here let's let's
do a console dot count how many times
are we going to count this event here
like I scroll from top to bottom and it
logged it 50 times in like a second
another 50 times so if I just like
flicked my finger we're gonna run that
function 50 times and that is too much
so what we want to do is D bounce it
which essentially means that we will
only run this function at most however
many seconds so what we've done here is
we have this D bounce function and there
is a D bounce in low - functions all
over the place however this is a
framework free tutorial so I just
grabbed a D balance function off the
internet here and essentially what you
do is you pass it a function and it will
run the bounce all the time when we
scroll but it will actually only run the
function check slide once every 20
milliseconds or once every 100
milliseconds which is going to give you
a little bit more control and it's not
going to give you that hurt and
performance so we're gonna wrap it that
in D bounce here and now when I scroll
look at scrolling from top to bottom
it's only running seven times versus
fifty times when I want to scroll up and
down and of course you can change that
weight from 20 seconds to few or 20
milliseconds if you wanted to do only
once every half a second you want it to
check for something like this you see
it's it's very suddenly being called so
that's what the bouncing is and any time
you're doing something on scroll you
they want to stop and think about you
might think like oh it's fine but later
down the road you might have animation
jank and a whole bunch of other stuff
that's happening so make sure that you
debounce your scroll functions good now
we're gonna do all of our work inside of
this check slide here and we're gonna
talk about what's going on here so the
first thing that we need to do is loop
over every single image and figure out
where the image needs to then be shown
so the idea here is that once the image
is I like to call this peaking because
like at this point the image is fully
shown at this point the image is fully
hidden but at about this point the image
is just peeking out about 50% and that's
the point where when the the image
should be on the page at least 50% of
its height then we want to animate that
on in so we're going to take our slider
images we're going to loop over each one
with a for each that's going to give us
a slider image and for each of those
we're gonna have to do a whole bunch of
math to decide whether it's on page or
not so us a Const slide in at equals now
we need to get a couple things here we
need to figure out how far is the page
being scrolled down and that's what
something called window dot scroll why
so if I were to go here and just
console.log window scroll Y open this
sucker up if I just scroll a little bit
Oh window scroll Y if I just scroll a
little bit at this point you see like
I'm 67 pixels scrolled down I'm a
hundred pixels scroll down I'm a hundred
and fifty one pixel scroll so that will
tell us how much you are scrolled down
but that tells us how much we are scroll
down at the very top of our browser we
want to know where we are at the very
bottom of our window the viewport that
we have here so what we can do is we
take that window scroll Y and then we
add the window dot inner
Haight and that's going to give us the
bot the pixel level for where you
currently are at the bottom of that and
if we console.log slide in at you'll now
see 600 see even at the top of the page
I'm at 663 pixels and then as I scroll
down it's going to be telling me how far
down we are scrolled good but we need to
figure out we don't want to slide in at
just at the bottom right here we want to
slide in at halfway through the image
here so we're going to minus the slider
image which is each individual image the
height of that and that will give us
that will allow us to slide in the image
at the very bottom but we want to slide
it in when it's at the middle so if we
take that and divide it by 2 that will
give us the pixel level of when the each
of the images should be slow slid in at
so let's take a look here so now you see
each of the images are being a little
bit different because it's going to be
giving you that information and the
reason why we recalculate this every
single time is visits if something
changes on the page like if you were to
put like I share this button and it
bumped your content down or someone or
to resize our window then we need to
recalculate where the images lie on the
page ok good now we need to figure out
what is where's the bottom of the image
because we also want to know if we
scroll past the image it should slide
itself back out because we don't just
want to scroll from the top down
sometimes if you scroll back up we want
to have that same animation so say Const
image bottom equals slider image that's
the each individual image the offset top
offset top is going to tell us take this
image it's going to tell us the top of
this image is how far from the top of
the actual window here so it's going to
give us a pixel level of how far down it
actually is
and then we want to know not where the
top of the image is we want to know
where's the bottom of the image so we
just have to add the slider image
Haight so that'll give us the actual
height of the image okay good so we have
the slide in at which is halfway through
the image maybe we should write some
comments here halfway through the image
and this is the bottom of the image now
we need to figure out first is the image
half shown and second if the image is
not if we're not scrolled past it so
let's do the first one here so Const is
half shown these are going to go into an
if statement but I always like to put my
variables into variables that make sense
for me to read them rather than just
stick everything in if statement come
back a week later not sure what's going
on so is half shown is equal to slide in
at is greater than the slider image dot
offset top and that will make sure that
our slide in at value is greater than
the top of where the actual image is so
that's good and then we will make a is
not scrolled past variable and I realize
that's a really long variable but it
will help you in a second when we do our
if statements say window scroll Y is
less than image bottom so we want to
make sure that we are not scrolled all
the way past the image because if we are
then we need to slide it out again and
that's what this variable is going to
check if that image if we're scroll if
we are not scrolled past it and then
finally we have our if statement I'll
say if is half shown and is not scrolled
past so if it is half shown on the page
and we are not scrolled past it then we
are going to take that image and we are
going to grab the classlist and we are
going to add active otherwise else we
are going to simply just remove that
because that means that we've either
scrolled past it or have not got to it
yet and then we will
I've got a bit of read going on in my
editor it's telling me that that
variable has not been created because
they just slide her image there we go
and make sure you fix that one as well
looks like we're in good shape now if
you're having trouble understanding what
these positions are I understand that
scroll and position on the page can be a
little bit hard just go ahead and
console.log these values to understand
where they are it sometimes takes a
little bit to to get what's going on
here but if this has worked we should be
able to add a class of active to each of
our items here so here we go oh we got
an error go to our console cannot reap
on defined class list don't remove class
list I'm sure you're screaming at me
there we go now you can see as soon as
we hit that halfway point for the image
let's scroll all the way out here about
date halfway and there we go the image
will add a class of active and then as
you go away as soon as you hit this
value right here you can't see it but as
soon as it goes off screen it's going to
move itself on out and we scroll back to
it it will show it again same with these
ones and this one as we scroll on down
so that's really it there's not a whole
lot of code it is a bit to understand
all of these scroll X and scroll Y
especially if you don't really like
doing a bunch of math at the same time
but again what I like to do is stick
them into their own variables before you
do your if statement and console.log
these variables to understand exactly
what is going on hopefully you enjoy
that and I will see you tomorrow
[Laughter]</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>