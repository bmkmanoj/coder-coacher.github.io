<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>JavaScript Event Capture, Propagation and Bubbling - #JavaScript30 25/30 | Coder Coacher - Coaching Coders</title><meta content="JavaScript Event Capture, Propagation and Bubbling - #JavaScript30 25/30 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Wes-Bos/">Wes Bos</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>JavaScript Event Capture, Propagation and Bubbling - #JavaScript30 25/30</b></h2><h5 class="post__date">2017-10-12</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/F1anRyL37lE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">quick short and sweet lesson today and
it's going to be about add eventlistener
or not gonna be building anything huge
here but there's a couple of concepts
that I need to make sure that we all get
down pat because we've you've been using
these out event listeners throughout all
these videos but there's going to be
edge cases that you run into where these
things are going to be helpful so what
I've got here is I've got three divs
I've got a div with a class of one two
and three and they're all nested inside
of each other and what I want to do is
explain to you a couple things about
propagation bubbling event capturing as
well as using this new property called
once so go into your script tag here and
I want to just listen for a click on all
of these divs so we're gonna select all
those divs and we're going to make a
function called log text takes in the
event and we're just going to
console.log this class list dot value
and when somebody clicks a div we're
going to log it so we'll say take all
the divs loop over each one we're gonna
take the div and we're going to add the
event listener of click and when that
happens we're gonna call log text and
this is the one you may see me like otto
completing this and we have this capture
boolean right here that's really what
we're going to be looking at here today
but we'll leave that there for now so
give it a save now I'm going to click on
and obviously this purple one is is div
with the class of one the misty Rose one
is two in the coral one is three so when
I click on the coral one what is going
to log don't cheat just tell yourself
what will console that log click it
three two and one wait I just clicked on
the third one which is the the very most
inner one but I also console.log two in
one
that's weird well also if we console.log
this you'll see the actual elements
themselves three two and one so what's
going on here well what is happening is
if we go to our elements panel here and
we go to the div that
clicked on we clicked on three but we
really also clicked on two because it
wraps around it we also clicked on one
we also clicked on the body we also
clicked on the HTML tag and we also
clicked on the current tab and we also
clicked on Google Chrome and we also
clicked on our OS X operating system and
we also clicked on the world and it just
keeps zooming out and out and out so
that's the concept of something called
bubbling where the browser will figure
out what you clicked on but it will also
trigger clicks up every and the sort of
ripple all the way up so case in point
if I take document body and I add the
event listener of click and when that
happens I going to log text and we have
to give our body a class here so class
equals bod now watch I'm gonna click on
the coral one three two one and bod so
what's happening is that when you make
it click it will ripple all the way up
to the top of the document and trigger
clicks on those elements as well now you
don't always see them because you're not
necessarily listening for a click on
those elements but if you're listening
for a click on multiple nested elements
in this case we're listening for a click
on three two one and bod then it's going
to trigger a click on all of those right
there so I want to explain to you how
this actually works in JavaScript the
way that it works in modern browsers is
that the browser will first do something
called a capture which means that when
you click on the element it's going to
ripple down it's going to say okay you
click on the body you clicked on one you
clicked on two and you clicked on three
so it actually goes from the top down
and then it captures all of those events
and then it starts at the bottom and
then starts doing something called a
bubble so the capture goes from top down
and then the events the vents haven't
fired yet it just captures where you
clicked and is storing them and then it
will start to bubble up which means that
it's triggering the events as you go up
so it says okay we've done figuring out
what you've clicked on all the way down
now I'm going to start firing off those
cook events on three then two then one
then body and anything else you're
listening for so if we go to our add
eventlistener here and let's get rid of
this document dot body here after our
function and pass a third argument which
is an options object and we say capture
is going to be equal to true what that
will then do is when I click we go one
two three and what's happening is that
this function log text is not going to
get run on the bubble up it's going to
get run on the capture down so we go to
the elements here it's gonna say oh they
clicked on one fire it they cooked on
two fire it and clicked on three fire it
so that is what capture means is that
you will run the function on the way
down rather than on the way up now let
me put that back to false by default it
is false so that's the normal version
that we have here another thing we have
is called stop propagation so we just
talked about events bubble up meaning
that if you click on the innermost one
it will also trigger an event on the
parent in that parent as well
however what you could then do is you
take your event in your function and you
call e-stop propagation and what that
will do is it will say stop bubbling
this event up I click the one that I
actually wanted so now if I go in here
and click on the middle one I just see
three into and then one why is that
because we run what happens is the
browser starts out the very lowest one
it runs that function and then we say
stop propagation which essentially means
stop bubbling and it will it will no
longer trigger events on the parents on
the way on up so let's stop propagation
you can wrap that in an if statement if
you like needed to get the middle one or
something like that but that's what stop
propagation does you can also use that
in conjunction with your on your way
down right here if I were to click on
the the middle one or sorry
if I were to click on three what are we
gonna get with capture true and stop
propagation just one why because capture
makes it go on the way down
one and then we run stop propagation
which stops it from going down even
further last thing I wanted to show you
was something called once and this is
very new in the browser we have here so
I'm just gonna console.log that
propagation out and bring this capture
back to false just so we can get our
defaults going back here three two one
we also have an option called once and
if you set that to true what will happen
is it will listen for a click and then
unbind itself and unbinding itself is
the same thing as saying if remove event
listener click log text so it will
listen for a click once and then unbind
itself so that there's no feature clicks
on it so now if I click on one of these
here here we go I'm clicking as many as
I can it ran once it fired all those
events but it will never run again until
I rerun the page so that could be
helpful if you have a button let's just
make ourselves a quick button here and
we'll grab it and you only ever wanted
somebody to click that button once we
just say button to add event listener
click and then when that happens we'll
run a quick function here that just
console logs click watch this so we've
got this button I click it over and over
and over and over it we're going to get
it but if I were to add that third
options argument here where we have once
is equal to true I should only be able
to click this once and never again and
and where I've used that specifically is
in store checkouts where you do not wish
for someone to click that button more
than once
you can unbind it and stop them from
from clicking at multiple times so
hopefully you learned a few things there
I know that propagation and bubbling and
capturing all of those words used to be
very very confusing to me and it's not
something you use every day so it's one
of those things where
you just sort of put off from learning
so hopefully you spent a couple minutes
and just learned exactly what
propagation and bubbling and all of that
stuff does Thanks I'll see you tomorrow
[Laughter]</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>