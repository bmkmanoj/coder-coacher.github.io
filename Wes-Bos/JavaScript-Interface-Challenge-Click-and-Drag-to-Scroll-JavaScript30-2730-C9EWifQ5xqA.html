<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>JavaScript Interface Challenge: Click and Drag to Scroll - #JavaScript30 27/30 | Coder Coacher - Coaching Coders</title><meta content="JavaScript Interface Challenge: Click and Drag to Scroll - #JavaScript30 27/30 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Wes-Bos/">Wes Bos</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>JavaScript Interface Challenge: Click and Drag to Scroll - #JavaScript30 27/30</b></h2><h5 class="post__date">2017-10-19</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/C9EWifQ5xqA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">they were gonna learn how to do
click-and-drag
from scratch this is an effect that I
saw on this website hover states I
scroll down to the bottom here and I
noticed that you can just you can scroll
this if you want it's just a
horizontally scrolling div which is kind
of cool because it works without
JavaScript however you can also take
your cursor click and drag as you want
to go through and I thought that was a
kind of a cool effect so that's what I
would like to do here is when you click
drag your mouse and go somewhere we want
it sort of to come along with it and
this whole like Mouse event in Mouse
positioning stuff I find it to be a
little bit complicated so I thought that
this would be a really nice exercise to
get us comfortable with what's going on
here
so pretty simple what we've got going on
here we've got our style dot CSS which
is just our CSS I've added some sort of
fun CSS to it like when you click it we
add a class of active and it will bring
it up a little bit and then I also use
this rotate Y and a perspective so that
when you move it you see how seventeen
is like oh yeah oh now it's totally
looking at us just some fun stuff it has
nothing to do with it oh then it looks
pretty so let's go down to our scripts
here and really what we want to be doing
here is selecting the items which is
this white box right here and then we're
going to be listening for a number of
different events so when I first click
down we're gonna add a class of active
and we're gonna figure out where did I
click down then when I move my mouse to
either to the left or to the right we're
gonna figure out okay if I let's say if
I click right here this is 500px
and if I scroll to the left 20px we know
that we should scroll the div 20 pixels
if I scroll to the right 20 pixels we
know that we should scroll the div 20
pixels it that way and that's really how
it's gonna work we're just gonna anchor
it down as soon as we click and then
depending on how far either way we
scroll that's how much we're going to be
scrolling the div or we can do it a
multiple of that if you like for this
growing to go a little bit bigger so
it's just a combination of Mouse down
mouse leave mouse out up and mouse move
so let's first go ahead and grab the
slider so say count slider equals
document dog query selector we are going
to look for the items that's the the
white div that surrounds everything and
then we need a couple of variables
they're all going to be let because they
are going to be updated so we're say let
is down it's equal to false and that's
going to be our flag variable that's
either going to be true or false
depending on if I'm clicking or if I'm
not and then we also need one called
start X and scroll left so as I let
start X and let scroll left you notice
how I'm not assigning any values to them
because that's going to be happening in
our events and we'll understand exactly
what these are in just a second then
what we need to do is attach a whole
bunch of different listeners so we're
gonna be working with Mouse down mouse
leave mouse up and mouse move kind of
paste these in here and we're gonna
listen for an event on each of them so
guiness gonna say slider to add event
listener and you could farm these off to
separate functions I'm going to do them
in line just cuz right now I think it's
important that we attach the code that
is happening directly to the event
however once you're done it would be
great to refactor those out into
separate functions and then just pass
them into your event listener like we've
been doing with a lot of our videos so
far so I got Mouse down mostly mouse up
and mouse move so first let's handle the
is down that's happening so when someone
Mouse's down we're going to take this is
down variable and set it to true when
someone leaves so so I'm dragging here
and then I leave this thing and come
back it shouldn't work because what
happens is someone leaves they come back
they let go and then they come back here
and it's still in the down state so what
we need to then do is to take this is
down and set that to be false when
someone Mouse's up we will want to set
that to be false as well and then in
Mouse move that
where all of our magic is going to
happen so let's just inside of that
console.log is down and then we're gonna
console.log do work so open that up open
up your console I wanna see what's going
on here and you see like I'm console
logging like a lot here and I haven't
even clicked anything this console
Logging's shouldn't show anything at all
unless I am actually Mouse down and if I
click it in Mouse around we see Church
or true I'll let go false false false so
what we want to do first thing here is
in our mouse move will say if is not
down we are just going to return and
what that will do is stop the function
from running and then this console.log
is down and do work won't get logged
unless you're clicked in the click state
so here we go let go let me clear this
out see I'm moving around nothing
nothing nothing click down move around
it starts to work let go there's no
updated and we could console dot log if
you change it to console that count and
just to see how many times it happens no
no none drag drag drag good and then it
stops
and then it goes again good so we have
that Mouse down next thing I want to do
is we'll take the slider when you mouse
down orient a slider to an eventlistener
nope
we'll take the slider classlist add
active and then we'll also do that the
opposite when someone leaves so remove
and then one so my mouse is up we will
also remove closet active good so now
when you click it you see you get a
little bit of a effect there why is that
happening that's happening because if
you look at our style that CSS when we
have a class of active I just changed
the background I change the cursor you
have to change it to WebKit I didn't
even know that you had to vendor prefix
a cursor it's been a while since I've
seen that and then transform the scale
up to one so it'll it goes from 98% to
one just gives you a little bit of a
cool effect that goes in and out now
let's think about how this is going to
work when I click down here and I draw
20 pixels to the left or 20 pixels to
the right we need to know where that
anchor point is when I scroll to the
left or to the right because as many
times as I move around until I unclick
or mouse up we need to know where that
initial click down was and that's what
that start X variable is for we
recreated right here so when someone
clicks down before they start moving to
the left or to the right we need to
record where they did that initial click
down and that's going to happen in our
Mouse down here and we're going to go up
to our function and pass the event now
if we were to console.log that event
let's just see what information we get
on there okay I got that mouse event
they got all kinds of information client
a client Y etc etc one way to tell where
we clicked inside of it and we've done a
couple different ways in this series
it's the console.log e dot page X and
then it's going to tell us exactly 3 9 6
it's selling exactly the x coordinates
on the actual page however if there was
like some margin in between this items
here like margin 50px if we've really
brought it out then that would be off we
need to know where did they click inside
of this thing not on the page so we just
take start X is equal to e dot page X
but then we'll tract the slider dot
offset left and that will just offset it
if there's 50 px of margin in between
the page and the item that we care about
then subtracting it will handle that
offset for us so then we can constant
log start X and if I click right here we
should get a really low number 18 if I
click over here we'll get a high number
good then
what's important about that is when we
move our mouse we should be able to
console.log start x over and over see
it's 6:45 regardless of where I'm moving
my actual cursor here that's pretty cool
and then when I let go we don't really
care about it click again now it's 547
we care about that the other thing that
we need to sort of log at the time of
click is this
grohl because let's say I'm scrolled 200
pixels in and then I want to scroll to
the left and to the right of this div
then we need to figure out where the
initial scroll was when we started it
and that's what this other variable is
for which is scroll left so we'll take
this will say scroll left is equal to
slider dot scroll left and the reason
why we're going to keep that in a
variable was because it's going to move
if I go to the answer here it's going to
move but we always need to go back to
that initial state when it started when
you did that first click down so got our
start X and we got our scroll left we
can take these console logs out of here
good now we'll go down to our mouse move
and start doing the work so first of all
I like to take the event and then just
call an e dot prevent default on it and
that will stop any like selecting of
text that's inside of there or any of
the sliding to the left or any other
weird stuff that the browser might think
you're actually trying to select some
text that will stop it for us then what
we need to do is figure out where the
cursor is when they moved it we already
know where the cursor is when they
initially click down but we want to know
where the cursor is when they move it to
the left into the right so we'll say
Const X is equal to e dot page X minus
slider dot offset left that's exact same
code that we just used up here here
we're using it to say where did they
initially click and here we're going to
recalculate it every single time that we
move the mouse so now if we just console
dot log X as well as what was that other
one called here start X and a little tip
here if you want to know what those
variables are just throw them in a
object and you'll see the values now
when I click in the middle here you see
that the x value is changing and the
start X is not changing at all so we can
simply then take that and I'm going to
call that the walk so say Const walk is
equal to
we'll take the x value and subtract the
start X and this is gonna tell us how
far have we deviated from that initial
space walk walk get rid of that initial
console.log and now we're seeing look at
that so I'm going to click here I'm
gonna move 20 pixels to the right so
we've gone 20 pixels to the right then
I'm gonna go back and 20 pixels to the
left gives me negative so it's telling
us how far have we deviated from that
initial point which I could put like a
red dot there when you clicked because
then you can see exactly how far to the
left and to the right you are working so
next up what we need to do is actually
change this div here to scroll and we do
that with the scroll left property
so we'll say slider scroll left is equal
to now you might think okay we'll just
set it to walk and let's see what that
does for us it kind of works but like
it's it's really jumpy and the problem
is that is we're recalculating the
scroll left every single time so the
reason why we captured the scroll left
value when we did that initial click is
so we can reference it inside of this
function so we'll take slider out scroll
left and set it to the scroll left value
which is what we initially captured we
put it in a variable and then we - the
walk value so give that a save here and
now we should be able to click and drag
beautifully back and forth if you feel
like this is a lot of work just to get
over what you can then do is put this in
parentheses and then multiply it by like
3 or something so for every pixel moved
you're gonna scroll the slider 3 pixels
and there you get a bit of a nice slider
effect as we're going on in there so I
think that's it for what we've got going
on here looking pretty good it's a
simple ish code however actually
building this the first time took me a
while to understand oh you need to put
these variables you need to capture them
at the time of your mouse down and then
reference them whenever someone moves
the mouse
so hopefully you enjoyed that obviously
there's a lot more to libraries if you
take a look at this one right here you
can just kind of like flick it and you
don't have to worry and it really gives
me appreciation for people who build
like bouncy scrolling and inertial
scrolling you see how like it kind of
fades out at the end there's a lot of
math that goes into building these
different libraries but it's really
important to know how they're working
sort of under the hood case you ever
wanted to build your own I should also
note that with this sort of Mouse down
most leave Mouse up Mouse and move dance
that we've done here you can also
implement your own drag-and-drop so if
that's something you're interested in
doing a challenge you to do that thanks
a lot I'll see you tomorrow
[Laughter]</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>