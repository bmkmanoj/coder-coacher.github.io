<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Learn Redux #15 — Updating Comment State in our Store | Coder Coacher - Coaching Coders</title><meta content="Learn Redux #15 — Updating Comment State in our Store - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Wes-Bos/">Wes Bos</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>Learn Redux #15 — Updating Comment State in our Store</b></h2><h5 class="post__date">2016-05-16</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/v0DdCELM-k0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">when we click on one of our photos and
type something into the comment box and
hit enter it just refreshes the page and
that's because this form has not yet
been hooked up to anything so let's go
back to our comments component right
here and we are going to add a submit
handler to this actual form so let's say
uncle or not on click on submit because
that's the event we're listening to
equals this dot handle submit and that
what that's going to do is is going to
run a function called handle submit and
we haven't yet made that whenever it
runs so let's go and create the handle
submit function and you'll know that
when you submit any sort of event
especially the form submit it passes you
the event and we can use event prevent
default and what that does is it will
stop the page from refreshing so I'm
gonna give that a save and try it once
more here so Wes testing one one two
three and now when I hit enter I'm
hitting Enter over and over again
nothing happens because the default form
which is submitting so now we have to do
our own little thing so let's just say
console.log submitting the form and I'm
gonna open up my console just to make
sure that that is running clear out this
junk here there we go every time I hit
enter it's submitting the actual form so
what we need to do is get the text out
of these inputs here and that's what we
put the refs on these form elements for
because when you want to actually
reference a Dom element and generally in
react you don't reference Dom elements
you just change the data and react will
update the Dom for you but when you
actually need to get data out of it one
way you can do that is with a ref so
because I put a ref in a ref on here we
can actually say console.log this not
refs because this is the comments
component and refs is going to be
populated with all of the things that we
put refs on so author comment and the
actual form it's
self so these are just HTML inputs in
which we can grab the value from it so
let's create three variables what kind
of information do we need here first of
all we need this ID right here where
that information comes from the URL so
this dot props params dot post ID or if
we want to use gs6 destructuring we can
say Kant's post ID equals sub props up
Rams and that will create a variable
called post ID then we're going to make
one called author in one called comment
so I'm gonna say author equals this dot
Refs
author and I'm not gonna stop there
because that's the actual entire HTML
element what I want is whatever the user
typed in to that and because it's just
an HTML element we can just called dot
value on it and it will work same goes
for the comment right there so and I've
got all three of these things that I
want here
I'm gonna go console.log them out and
I'm gonna submit I've got a problem here
it's telling me I cannot get a post id
of undefined I actually don't know what
it is but it's helpful for me to step
through my debugging process just to
show you how I would tackle this so
cannot read post id of undefined and
that looks like we are looking for post
ID of params so I'm wondering does this
component not have the params so the way
I check is if I go to the react console
we are in the comments component right
here and we clearly do not have any of
the params that got passed down to it so
what we can do is go back to here and we
never pass along any of the props so I'm
just gonna pass them along or you could
just pass along the ones that you
actually needed so save that now when I
think now when I submit this it should
show me there we go that's the ID that's
the name or the author and that's the
actual comma the other person wrote
great so I'm console logging now what do
I actually do with this information now
that I have it well I
what are we using to update our state
we're using a reducer to update our
state so let's go to the comments
reducer right here and let's go to our
Action creators right here and this is
the actual function that we need to run
because it's going to create an action
and it's going to dispatch the actual
action so it requires the post ID which
is the first item the author in the
comment so we know that we have access
to that odd add comment function inside
of here once more let's open up the
react you see there's the add comment so
it would be this dot props that add
comment and then you pass it the post ID
the author and the comment and that
should be it in terms of handling it
here we can head on over to our action
creator here console.log firing or let's
say just bad shall we use the language
that react uses wes testing dispatching
add comment good so it is running and
then that gets dispatched and we can go
to our comments reducer because now our
reducer is going to be handling right
now it's just returning state but we
want to actually update</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>