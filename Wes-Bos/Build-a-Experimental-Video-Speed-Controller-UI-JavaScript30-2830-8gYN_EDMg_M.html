<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Build a Experimental Video Speed Controller UI - #JavaScript30 28/30 | Coder Coacher - Coaching Coders</title><meta content="Build a Experimental Video Speed Controller UI - #JavaScript30 28/30 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Wes-Bos/">Wes Bos</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Build a Experimental Video Speed Controller UI - #JavaScript30 28/30</b></h2><h5 class="post__date">2017-10-24</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/8gYN_EDMg_M" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">today we're going to be taking two of
the things that we've done in the past
which is working with mousemove events
and second working with html5 video and
we're gonna sort of put them together
and mash them into our clap so this is
just an idea that I've had I don't know
if it's totally a great idea but I
thought it was a fun thing to build
regardless so I run a video site where
I've got lots of people watching my
videos and I'm always thinking about how
do I make the the viewing experience a
little bit better so one thing that a
lot of developers like to do is they
don't watch their videos at 1x they
watch them at like 1.5 or 2 or they like
to speed it up and slow it down
depending on how quickly or how boring
or how exciting something is or how
important something is so what I really
wanted to do here is just experiment
with a new sort of input that would
control how fast the video goes so that
rather than you having to click up and
down to change the video speed you can
sort of just like DJ it here as you're
watching the video to go slower and
faster so I'm just going to give you a
little play here on you see what's going
on here as I move this like the lowest
is going to be 0.5 X or 0.4 X and then
the highest is going to be all the way
up to 4 X and as you mouse over or as
you click and drag depending on how you
like to do your interface we are just
changing that value and then it's
indirectly going to be setting the
playback rate on this video so let's
jump into it won't be too big of a one
right so so far what I've done is I've
selected the speed which is the the
entire white bar here and then we have
the speed bar which is going to be the
the filled part in here with the that
sort of blue gradient right here and
then I've just got a video sort of
playing here streaming off of Dropbox
hopefully it doesn't get shut down so
that's a lot of bandwidth and then I've
got a video element here which is the
actual video here
now I'm gonna take autoplay off just for
our sanity sake so it doesn't keep
playing every single time and then what
happens is when you hover over top of
this we're going to change the playback
rate as well as update the actual
visuals so let's do the visual part
first and then we'll we'll work on the
playback rate so first thing we need to
do is take our speed and add the event
listener of mousemove and when that
happened and we'll have a function I'm
using a proper function here so I need
this to be equal to the video itself or
sorry not the video the actual speed bar
when you mouse over it and cool in that
function pass yourself the event and
let's just console.log the event when
you mouse over it open that sucker up in
your browser and you should see this
video that we've got going on and our
thing now when I start hovering over top
of it you will now see all the different
events that we have going on it so first
of all we need to get where like this is
going to be zero pixels and this is
going to be however high it is let's
take a look look look
410 so that's going to be four hundred
ten pixels so how do we get that will
say Const y is equal to and we'll do the
same thing we did in last video a dot
page Y and we're going to take the
offset this dot offset top Y because we
can't assume that this bar is going to
be at the top of it there might be
padding or margin or anything or another
element in between it so let's call it a
log Y see we've got there
there we go you see at the top you're
getting zero all the way at the bottom
we're getting around 4:10 so that's
showing us how far along we are we want
to turn that into a percentage so if
this is a 410 pixel if I go to 200 in 5
pixels right around here that should be
50% so I say Const percent
is equal to I'll take Y divided by this
top offset height and that's a way to
get the height of the actual one that we
have there so let's console.log done
percent there we go
so that is one that is zero and we could
bump those up to get to what we want
then we also need a min in a max because
we want this to be 0.4 and this to be 4
right so how do we do that I would just
say constant min equals zero point four
and a Const max is equal to I don't know
4 X or whatever you think the crazy up
upper bound then what we do is we'll
make a height variable and we're going
to set that to the percentage right now
is like 0.99 and we want to turn that
into 99 percent take our percent
variable multiply it by a hundred and
then we'll wrap that sucker in math
thought round and then add percent to
the end console.log the height so we got
here all right so now we actually are
getting a full percentage that we're
looking for rather than a zero point
something whatever and then we'll take
our bar which is the speed bar say bar
dot style the height is equal to height
ah this so so far we've got it up and
going looks good next thing we need to
do is update that number that's inside
of there and the way that we do that is
we will then calculate what the playback
rate is a Const playback rate that's
going to be equal to and this is a bit
of a weird one because we don't want the
minimum to be zero in the maximum to be
one that's not the playback rate the add
a 0% height it should be zero point four
X and a hundred-percent height it should
be 4x so we sort of need to do a little
bit of math to get that lower and upper
bounds and the way that you do that is
you take your percent and you multiply
that by the max minus the min plus the
min and that's sort of how you can
offset your height we did that in a
couple of videos ago when we are doing
the text shadow one where you needed to
hover negative fifty and plus fifty not
zero to a hundred and that's just a neat
way that we can do that so we have that
playback rate
and we can take our bar and set the text
content to be that play back rate let's
see here so you see it's just like a
crazy number so we can take that and
just run to fixed on it and just give us
two decimal places yeah there we go
and then you can tack on a little X or
something on to the end so plus X or you
could use a template string to pop that
in haha look in pretty snazzy last thing
we need to do is actually to take that
playback rate that we have here called
the log playback rails so we got going
on here
3.5 we've got to take that value and
apply it to our video so let's say video
playback rate and and what playback rate
is if you take a look at it in our
console here video playback rate 1 is
just normal speed so 2 is equal to if we
were to just play it ourselves 10 it's
the audio stops at some point four zero
point two audio stops at a very slow
amount as well like zero point five is
as low as you can get it sounds like I'm
just wasted trying to teach you flexbox
so video playback rate equals playback
rate and don't worry about those long
percentage I know some people act when
you have like a very long decimal places
but it won't be issue there now we'll
give it a play fantastic so that was
kind of cool we did there is we both
calculated the height as well as
attached to the playback rate if you
don't like doing both your presentation
and your functionality in a single
function you could shell that off to
suit two separate functions which you
would just then call from your mouse
move event right here and then also we
could take this
function out and call it handle move and
then up here we'll make a function I'll
paste that function I'll call it handle
move and then you just can hook that up
to Mouse move but maybe you also wanted
it to hook it up to touch move or any
other event that you wanted so I got
that still works wonderfully
excellent so hopefully you enjoy that
and I will see you tomorrow
[Laughter]</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>