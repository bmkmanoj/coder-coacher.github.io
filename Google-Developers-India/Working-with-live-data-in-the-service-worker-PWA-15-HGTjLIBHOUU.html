<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Working with live data in the service worker - PWA #15 | Coder Coacher - Coaching Coders</title><meta content="Working with live data in the service worker - PWA #15 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Google-Developers-India/">Google Developers India</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Working with live data in the service worker - PWA #15</b></h2><h5 class="post__date">2017-04-28</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/HGTjLIBHOUU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so let's combine the serviceworker and
the database together and work with live
data this is not a super long section
this is just some guidelines for
thinking about when you put the two
together so let's say you have a shop
and you have some images and you have
prices and descriptions how would you
store the data where would you put
everything you know you have a choice
some of these things will go in the
database some will go in the cache the
thing I've been saying and I'll repeat
it here is in general the cache gets
anything that can take a URL address on
it so if it's got a URL you probably put
it in the cache now in some cases some
of the discussions I've had with people
is doing rendering on the client side
rendering snippets and such I would
probably put those in the cache too as
long as I had a URL attached to them
anything else that's not URL based it
goes ahead into the database the
lifetime of things in the cache tends to
be fairly long the lifetime of things in
the database may be short and fairly
dynamic remember that it all stores on
the disk and remember that it all
together counts towards your storage
quota so in a browser that has a 50 Meg
storage quota that it would be
everything in Chrome this all counts
towards your quota and remember that if
it's on the disk be very careful about
storing sensitive user data you probably
don't want to put it in here unless
you've got a secure way of encrypting it
so this is basically just unpacking what
we said right store the data locally
JSON of the database sample of what
could go in index DB now as opposed to
creating a cache of static assets where
I said create those uninstall you're
going to create the cache of dynamic
assets in the database on activate this
is another case where writing index DB
from service worker on uninstall had
some problems at one point so better not
to do it there better to do it here so
uh nocte Veit create the database so to
create the database you know should be
common code that you've seen already
right open it
create the object store put obviously
we've simplified this code to fit on one
slide you'd want to check that the
object store doesn't exist yet you
probably want to check the version
number that you were given to see if you
need to upgrade the schema to add
additional indices you know but
sometimes you're writing of course you
just have to make it fit on the slide so
we took some shortcuts
but that's Yeun activate put resources
in the cache uninstall cache the assets
you've seen this technique before also
this case we're doing at all
and then pull the data from the database
and pull the data from the cache it's
really that simple that's the rule you
need to think about though so shortest
shortest thing ever</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>