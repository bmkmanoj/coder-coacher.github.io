<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Core technologies - fetch and promises intro - PWA #04 | Coder Coacher - Coaching Coders</title><meta content="Core technologies - fetch and promises intro - PWA #04 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Google-Developers-India/">Google Developers India</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Core technologies - fetch and promises intro - PWA #04</b></h2><h5 class="post__date">2017-04-28</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/JPms9zSMDa0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so lab went okay for people I saw a lot
of people were doing experiments and
asking really interesting questions so
responsive images nice stuff lets you
control how much you pull in now we're
going to move away from the design side
add more into JavaScript and I need to
talk about two core technologies and
that's fetched promises most of you have
heard of them some of you have used them
and normally we would go a deep dive
fetch a deep dive promises except
they're kind of tied together so we're
going to do a super short intro here and
then a deeper dive early tomorrow so how
many people have used XML HTTP requests
how many people like XML HTTP requests
right no hands up I mean let's be fair
XML HTTP requests it's old enough to
drink
it's it's over actually it's over 21
years old which in the u.s. makes it old
enough to drink it was built I mean it
was basically built in around 1993 or so
by Microsoft in order to build a web
outlook client and then everybody else
started using it but I mean it's
basically based on events it's based on
callbacks it's an old style API did a
great job at the time but what we like
to work with now has moved and so fetch
is a new modern replacement for XML HTTP
requests and it's quite a bit simpler so
I'll call fetch on a file this is an
asynchronous operation it's going to
take a while so I need to know when it's
finished I add it returns an object
called a promise dot then is a method on
the promise that takes this function and
schedules it to run after the fetch so
think of this as being a callback
this callback gets the response from the
fetch response has a JSON conversion
method that does a conversion to JSON
and it returns that value and you can do
something with it and if there's any
errors a catch will catch errors from
anything above it nice and simple even
easier than the jQuery AJAX method which
is pretty cool but this is even simpler
let's see yeah let me do this first all
right so just a side note so everybody
in here has been using javascript you
know up through es5 you're pretty
comfortable you're pretty comfortable
with that you know what it looks like
we're actually using for some of the
examples and some of the labs es6
otherwise known as es2015 where you can
define a function by giving a list of
arguments the fat arrow equals greater
than and then the function body other
than this handles this much better it's
just easier to read sometimes it's just
a cleaner syntax so when you see
parenthesis fat arrow think this is a
function on a miss function taking those
values I could tell my voice is gonna
have trouble today okay so there's the
example there we circled it because you
know that's what the camera can see it
right so let's try some examples so if
you do this in the console in fact we'll
do this in a minute we're going to fetch
a file indexed on HTML so we're going to
need one of those and then take the
response object pull its text out and
then take the text and log to the
console by the way what is this chain of
dents look like I know there's UNIX
people in the room it's a pipe
yeah it's basically you're just piping
from one function to the next so let's
do this now for this to work I need an
index.html which I have conveniently
written one already
I need a web server now there's a bunch
of ways to do it you can use the web
server built in a node you can use the
one built into Python the one that we
use for a lot of examples around here is
a Chrome extension called basically just
the web server for web server for Chrome
do you hundred okay yes you see some
super-secret things on that screen and
so web server for Chrome says it's
pointing at the scratch folder it gives
me a URL which I'll click okay great
there's my index.html now I can go write
some code I'm going to go ahead and open
my console I've already made the font
nice and big I'm going to save myself
some typing by copying that flipping
over to Chrome finding the window not
that window that window pasting it in
and so what happens a promise gets
returned from this whole stack the
promise status here says pending because
it was an asynchronous operation that
promise is returned immediately from
fetch now it has already gone out in the
meantime and fetch the file it displayed
it as you can see here so if I open up
that promise it's actually resolved it's
no longer pending it actually contains
the data and then you could see that
that extract the text and displayed it
at the bottom of the screen that is by
the way probably the shortest web page
you can create you don't need a head you
don't need a body those are actually
inferred from content in html5 that's
about 70 characters you could put two of
those in a tweet
Oh stroked real flat okay
oh here's the other thing so notice in
the promised value undefined the value
is actually invisible to you here
because the the promised value actually
is tied to the web security model it can
only be read by the origin that asked
for it
so in this case the origin was that that
particular page so only that page could
read what's in the promised if I had a
cross origin request which we'll talk
about in a minute it would be opaque but
you could pass it to the other origin
now I can do the same thing I could do
the same thing with JSON I won't bother
it's the pretty straightforward demo I
could read a JSON file in the response
call response JSON which is built into
the response object and get a JSON
object back out
so there are response readers for a text
JSON and a blob so if you just need a
blob of data you can read it this way
things like reading an image file and
dynamically installing it can be done
this way</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>