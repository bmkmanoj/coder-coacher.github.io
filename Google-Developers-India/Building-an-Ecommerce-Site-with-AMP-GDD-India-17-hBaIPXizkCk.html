<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Building an E-commerce Site with AMP (GDD India '17) | Coder Coacher - Coaching Coders</title><meta content="Building an E-commerce Site with AMP (GDD India '17) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Google-Developers-India/">Google Developers India</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Building an E-commerce Site with AMP (GDD India '17)</b></h2><h5 class="post__date">2017-12-01</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/hBaIPXizkCk" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello good afternoon namaste my name is
Ben Morse I'm a developer advocate at
Google where my job is to help the web
be beautiful and easy for both users and
developers and before I was at Google I
worked on websites for companies like
the New York Times a Ola PSA's like that
before that I was a musician I took
Topol lessons actually for a little
while and did a little slow cut too so
I'm here with my friend and colleague
Greg ooh hey good afternoon everybody
I'm a developer at Google I work on amp
and together with Ben we're gonna talk
about building an e-commerce site with
amp but before that I thought I'd
mentioned that I - in the local former
bangalore ian over to you Ben this is
true he grew up here so onto amp which
as you probably know it accelerated
mobile pages so why do you want to
convert your current site to amp or
build new pages and amp what's the point
of this thing good question it's mostly
because today's mobile sites aren't what
they could be in many cases I mean
they've gotten much better than they
were five years ago
especially six seven years ago but sites
still tend to be too slow and too
complicated under the hood the thing is
that the phone is a very personal thing
for people people use their phones all
the time for all kinds of purposes and
they expect everything on their phone to
be good whether it's a messaging app
they're watching videos playing candy
crush or using your website they expect
everything to be fast responsive and
beautiful and useful and if your website
isn't like that on mobile it will suffer
you see over here some stats there more
stats like this out there the one on the
left is from a studies double-click did
recently just taking data from sites
that were opted into sharing their data
with Google Analytics and they found out
that if a site took longer than three
seconds to load more than half of users
would just leave 3 seconds which isn't
that much time and other stats over here
show that most people who think of
is slow or doesn't work well won't come
back they've just gone forever and also
of course conversions will drop it
beside his slower bounce rate gets worse
when the site is slower it's just that
people want their phone to work really
well and work fast and if it doesn't
they'll just think it's broken it isn't
good and they'll just do something else
and in fact many sites today load slowly
I think that I recently saw that
three-quarters of sites mobile sites
took ten seconds or longer to load over
3G and also they can be unresponsive
content might display but javascript is
still loading it's still parsing and
it's still executing which is much
slower on phones than on laptops and so
people will tap on things and they don't
do anything they assume it's broken
though to something else and also ads
may kind of pop in there and displace
content so none of these things are good
not to sound negative but also you can
decide to be faster as a good developer
you people are all smart over here you
know the latest techniques for site
performance how to make things work
quickly but it takes a lot of work to do
this it's not easy and sites will keep
on slowing down and require constant
speeding up so for all these reasons we
created amp
the amp project is an open source
initiative to make a better web with
sites that are fast that are beautiful
and also can make money and it's fast
and easy
not just for users but also for you the
developers it's been popular there's
over four billion pages that are in
production now that are amp pages over a
million domains are producing amp pages
and every week more than 50 million
pages get produced and now rhaggy will
talk about what amp is a little more
thanks Ben
so we've motivated the reason behind the
existence of the amp project as you
might have heard am stands for
accelerated mobile pages but we're gonna
soon discover
whether the mobile is really respected
to mobile or if you can make just
beautiful experiences on desktop and
mobile with em so now that we've talked
about the motivation let's dive into
what amp really is there are three core
components to amp as you can see on the
screen behind me amp HTML amp Jas and
amp cash 1/2 hTML is a modified version
of HTML that you're all familiar with it
consists of a web components library
that provides a powerful and
comprehensive set of building blocks
with which you can make beautiful
desktop and mobile sites that are fast
responsive and not only that beautiful
user friendly the second aspect of amp
amp j/s that's the engine that drives
amp it's a JavaScript engine and it does
things like managing resource loading
and implementing best practices that
ensure that your pages render really
fast
and finally the amp cache it fetches
caches and serves amp pages and ensures
that what you see on the screen is in
fact as fresh as possible now for out
for all intents and purposes the amp
cache is virtually invisible that is
what you see when you when you load a
page via the cache is a cached version
and in the background the cache is
updated now for pages that are uploaded
frequently or hit frequently this is not
a problem the cache is virtually
transparent but if you have a page
that's not hit as frequently there are
api's you can call that help you
manually update this cache now amp is
designed for efficiency and speed and it
therefore must enforce some constraints
to ensure good performance the first
thing might surprise some of you a valid
amp page may not contain any custom
JavaScript you heard me right most web
pages today contain lots of JavaScript
so what's the deal with this well most
of the JavaScript on a valid amp page is
contained inside the amp runtime and you
in your page
use amp web components library and use
this javascript engine to write your
page second you might ask what about the
am format how does it relate to HTML
well the amp format is a specialized
subset of HTML and it does contain
several additional features which you'll
see about in the web components library
and finally there's a hard limit on the
size of the CSS that can be associated
with an amp page now in spite of these
constraints and I'm going to argue
because of these constraints the amp
runtime lets you build mobile and
desktop experiences that can delight
your users while remaining high
performance so let's take a simple image
in regular HTML you'd use an image tag
what do we do with amp well we use amp
image you're gonna see a whole lot of
examples like this with the amp - in
front of it this is a simple HTML tag
it's part of the amp HTML web components
library the only thing to note here is
that you spy specifying the width and
the height of an image beforehand the
amp runtime already knows the aspect
ratio it knows how to layout a page and
that's how the amp runtime makes pages
load fast we also introduced a layout
attribute to most amp components and by
saying that it's a responsive layout
element the runtime knows how to resize
this element when the size of the page
changes
let's breeze through a couple more if
you want videos on your page let's say
you want to embed a YouTube video it's
as simple as this little piece of HTML
on the screen again specify the width
and the height
our responsive layout and it's as simple
as writing a few lines of code here the
JavaScript engine takes care of the rest
you will see an example and we're gonna
discuss how to build an e-commerce site
later during this talk and some of the
things you will see can be done using
the web components I'm going to show you
now the first example is amp carousel
where you can swipe images left and
right and
have a carousel of images articles
whatever a sidebar most complex websites
need to have a menu and a way to get
around the website so amp sidebar lets
you do that and finally if you want to
let people share pages from your website
and social share lets you do that really
easily with just a few lines of code so
what you saw just now were just a few of
the building blocks that together form
the amp web components library but the
library contains so much more
functionality like video players social
embeds accordions that let you expand
and collapse areas on a page carousels
menus special effects and a whole host
of things in addition to doing things
like serving ads FAQ and user engagement
and now Ben's gonna talk you through a
way of building an e-commerce site what
this web components library saying oh
sorry I'm not on
so how's route good was just saying amp
has a lot of components built in when
amp first started out it was made for
publishers to use so it was good for
static pages simple pages but as he's
been showing you over here amp has
advanced since then and I'm here to say
amp isn't just for publishers anymore it
can be used to make all kinds of sites
and as Ricky was saying not just mobile
experiences but desktop as well many
many kinds of sites are now easier to
make with amp and are just a lot faster
for users hopefully easier for you is
including ecommerce sites ecommerce is a
pretty complicated idea so we're gonna
discuss actually how to build an
e-commerce site with amp and that may
show that all kinds of things can be
done including of course ecommerce so
going on let's do it
here's a site over here this is a bike
shop we're gonna build for you in the
next 19 minutes and 24 seconds and by
the way this bike shop already exists in
a template form on am start com we'll
give you guys the URL later on and the
code examples are modeled after that
site so any commerce site first of all
you need a home page where the user
could go there from
search from Facebook from Twitter or
wherever and they can find your stuff
and you know see what you are look for
things and then when they found
something they're interested in they
might search around they might use a
category and menu they're gonna want to
go to our product browse page where they
can look at various products and you
know do you want to actually buy next
they actually will click on our product
hopefully if things all go well and go
to our product details page where they
can see the product what it's like what
it costs and so on if they like it they
might try to actually buy it in which
case they'll go to the cart page and the
cart page shows you know what's in the
car but they have and then finally the
checkout and then you guys get money so
let's go back to the beginning the home
page the home page is not that
complicated usually in most cases and
the things on this home page over here
can mostly be done using pretty standard
static type amp components so for
example images we saw amp image if you I
have a video of some sort we have
various components for embedding videos
if you want to have a little sliding
image carousel showing products or
specials also possible a navigation and
menu and beside bar gives you that there
it is up there that little hamburger up
there on the top left because they call
this a burger menu in Germany not a
hamburger menu even though a Homburg is
a city in Germany let's pass on that
though navigation isn't hard to do and
offers highlights mostly possible using
standard kinds of amp components I
didn't include a search here yet we'll
get to that let's go on to our next page
though the product browsing page so here
again you could have these products over
here loaded as static products but maybe
at this point you feel like you want
some stuff to be dynamic maybe you want
to have the freshest product data or
prices and maybe the cash doesn't
refresh often enough to have that happen
for you maybe you want to actually pull
these in using JavaScript using Ajax the
ragu is saying there is no JavaScript so
how do you do that it's impossible right
it's possible we're going to show you
how to do it and something else
the user wants to go through and maybe
filter you know bike certain kinds of
bikes certain brands of bikes they want
to sort by price filter by color again
these are user actions it's gonna
require some different kinds of dynamic
components so we have those in amp now
oh sorry what do we do the question mark
the burning question dynamic amp we can
do it
so you think about page being dynamic
there's two ways where this often would
happen where a content would want to
change in some way one of those is
simply retrieve content from the server
and display it on the page whether the
user has requested something whether you
just do it because you want to do it so
one way content is it fee from the
server and displayed way number two the
page simply changes in response to user
actions maybe that content is already
there in the page somewhere in the HTML
and it just gets shown or a class gets
changed it gets changed in some way so
another way of looking at this is that
dynamic stuff can happen either in
response to user action or not and
content can come from the client or the
server amp is user focused so an amp in
general things change when the user
requests them so here's our heroes today
that can do these things are Wonder
Twins of amp list and amp bind they
combine their forces together over here
to make pages dynamic the cases we just
discussed
they cover these cases amp lists post
content from the server and a bind over
here looks very very serious today and
bind lets you actually bind components
to actions of some sort so that's the
second case and bind is when you change
the page in response to user action so
these two things actually cover a
shockingly wide array of different ways
to change a page so back to our pet
browse page over here if you want fresh
product data when the page is loaded
that's a case of pulling content from
the server so amp list and then the
sorting and filtering is the case where
the page just changes in response to
user actions
it might also involve plunk on
from the server as well but this is
mostly an amp buying the kind of thing
so let's begin with amp list amp lists
again retrieve data from the server lets
you actually format it with a template
and show the results to the user and as
amp lists and a binder friends and Bliss
has its own little friend over here
called amp mustache amp lists and
mustache perform together and write
google show you how that works thank you
very much now it's time to write some
code so pull out your notebooks I'm
kidding
let's see what the first problem been
alluded to which has to do with
retrieving content from the server
dynamically so in this example you see
behind me we're gonna start with some
product data and it's just raw JSON data
as you can see there's we're trying to
build a product site so there's a couple
of items in this JSON and each item has
some data associated with it in JSON
format it's got an an item ID the name
that you're going to display on the
product page a description of what it
does a price which you can update behind
the scenes on the server and an image
that you show in your store second amp
mustache we're gonna introduce this so
those familiar with HTML might already
know about templates in HTML the
template element the amp runtime
introduces a new template type it's
called amp mustache which is a wrapper
around the mustache JS templating system
and as you can see here this template
specifies the way of product item needs
to be displayed on the page so we
specify things like formatting what goes
in each field how large the text is
displayed etc but it's just a
placeholder as you can see
so now let's flesh this out the next
step let's add some more details like a
link to the actual product page from the
details page an image of what the
product looks like and yet as you can
see the double curly braces indicate
that it's also a templated element which
via hiding a wit so the runtime knows
how big to display it and now that we
fleshed out our amp mustache template
let's combine it with amp list so this
is where the magic happens
this piece of code here as you can see
contains an outer layer of an amp list
element the list uses in the source
field the product components JSON which
was the first code slide we just looked
at and so the list is dynamically
populated based on data pulled from a
server in raw JSON format and that JSON
that's pulled from a server is populated
using the format specified in the amp
mustache template so this looks like a
simple piece of HTML code and it does
pretty complex stuff and so what we're
really doing here is encapsulating this
JSON data and in inside an amp list and
with this we've got a product page hey
it worked
she's very excited by this so there it
is actually at the live page here it is
the actual thing to be straight to you
minute ago those two products and the
JSON caliper brakes and we all set there
it is it works
I might go a little faster because I
realize our time is running a little
shorter here so let's go on to the
second part over here because for their
filtering and the sorting we're gonna
want to use amp bind again this being an
example of the page changing in response
to user actions so binding as you have
in angular and react and so on is useful
and there it is like I just said and and
bind has a friend as well ant bind works
with this constant companion and
faithful collaborator amp state here's
what I do to explain how this works
all right let's read through this we're
gonna solve the second problem here with
code the second problem namely changing
a pages content in response to a user
action so user clicks and the page
responds immediately and the web's the
the contents of the page change what
your user input so understanding how
this works can be done in three quick
step one we call it state we're defining
state and in this case aunt by an
introduces a custom sub element called
amp state in this case the ID is
greeting so this is an example we're
gonna go through it contains some raw
JSON in it and we can index it so you
can say greeting dot name and this
evaluates to an expression on the page
so this is a way of putting data inside
the Dom of a page step two we've got to
bind this data to an actual element
that's on a page so far we just had data
now we have a paragraph element which is
going to be displayed on the page the
thing to note here is that the text
property of the paragraph element is in
square brackets and so what happens is
the value of that text property is going
to be what we evaluate from the
expression so in this case what I've
done is I've initialized the value of
the text property with the phrase hello
Bangalore and this is bound to the
expression that you see there in double
quotes and that's where AMP binds its
name now the third and most important
step mutation which means changing the
data on the page based on user input a
simple example of how you can interact
with a page a button in this example the
amp runtime and particularly amp bind
introduces a new method called set state
and when you tap the button we're gonna
set the state of the city field to
Bengaluru and the title of the button is
correct the city name so you can imagine
how this is gonna work out let's put
them together really fast to recap we've
got the amp state which establishes the
JSON data and initializes it the second
step has an element that's seen on the
page and we bind the expression to the
value of that element and third the
mutation which comes from user input so
as you can see in the animated gif
behind me tapping the button corrects
the name of our old cities named
Bangalore to our current city named
Bengaluru and that is amp bind in a
nutshell
now let's put these ingredients together
and see how this applies to the product
page really fast again we apply this to
the product page example we've got state
in raw JSON format these are the
products we start off by showing all
products from all categories and then
we've got a selector in this case not a
button and when the user clicks the
selector and changes the value so when
you go from all categories to say just
bikes or components the magic happens in
the background and thirdly when we have
an amplifier Achatz means it is now
bound to the value of the JSON in the
page and here we are there she is it's
working and that wasn't hard to do was
it there was no JavaScript involved
there are some expressions involved this
is a pretty simple way to make pages
dynamic and it works pretty well who's
this guy over here it's just like a
baseball player with a funny-looking bat
or something
well everybody knows who this is like a
well-crafted century that such and makes
it took was quite a lot of steps to get
here it's a slow process but it works
it's that cricket thing that's right
we'll talk more about it but what we
really have as a result of this is of
this process of using amplest and bind
em state is a product page that just
serves as dynamic content and supports
advanced user functionality and all this
is built from the ground up with amp
with no custom user javascript pretty
amazing not bad yeah so we can now make
dynamic pages let's finish up our site
so again the idea here is that this is
how you can make a site that's pretty
dynamic pretty simply with amp so back
to our home page over here I said before
there was no search because we didn't
know how to make auto completion before
and search without auto completion is
like cricket without a bat it's not good
see I'm learning things already over
here so over here on our home page we
have a search over here we can use amp
form for a validated form over here
which is our search area
we can use amp bind over here to bind
the contents of the search input to an
API request and then we use
amplification area itself so the mplet
has the API request in it it is bound to
the search input where the input changes
the API request changes you can make a
request to the server and format it with
a mustache and stick it right there on
your page it works pretty well down the
product detail page over here let's say
you want to have the user be able to
actually choose different colors
different sizes over here
you simply actually find those the image
up there and there it is the add to the
Cart button can make a server request
this is a form over here also possible
to do if you want to have reviews they
can get pulled from the server using amp
lists if the user is gonna actually make
new reviews submit those via a form
again amplest for templating you get the
idea right you can do all these things
with the various things with amp
bind and amp lists and social sharing as
we are good pointed out before there's a
component for that so Twitter Facebook
all those little buttons over there G+
all possible with amp the card page
again similar you want to get shipping
costs you can go to the server for those
kinds of things if you want to change
the quantities you can bind the
quantities there to the actual price if
you want if you often remove items again
you can have binding to actually change
classes on things when things are
removed you can have a state variable on
there to track what's actually in the
cart and be calculating totals same idea
finally the checkout page over here we
haven't discussed this before but amp
comes with some very very nice form
validation that's built in you can
specify regular expressions whatever you
want to to have some nice helpful
messages over here when things are
submitted or things are entered that are
not the correct format and then for
payments this is a new feature that's
coming to all browsers chrome already
has it Safari is working on it it's
coming everywhere payment request API
can be used
to do this if you'd like this will pull
up over here a nice little screen with
users devices sorry the users actual
methods of payments already built-in if
that isn't good for you
amp iframe else it can be used the
iframe you could put whatever you want
to in there javascript is a loud name of
course so you can do payment also
through the iframe but what if you
actually need more like virat kohli
that's right yeah I saw on TV this
morning I think for higher wages for
cricket players if you find that
actually you don't you can't use the amp
for everything anymore
and you want custom JavaScript there are
some ways to do this as well of course
we mentioned before with the amp iframe
you can embed it whatever JSU want to
use but also you might find it at a
certain point that the balance of speed
and convenience of amp is outweighed by
wanting to do either more powerful
functionality that a PWA has or we have
just more complicated stuff on your page
that means more JavaScript so this is
not a problem here
this lovely animation says it all amp
PWA in this case it is common to start
with some amp pages for speed and then
at a certain point transition to the PWA
so you can have PWA features where
things load quickly things were
available offline and so on and so forth
and amp install serviceworker can be
used because serviceworker loaded and
running in the background so your next
PWI page loads immediately so amp PWA
are a very powerful combination as i was
saying before you can try this out of
yourself over here amp start calm slash
templates has this very same bike
template over here that we showed you
today and he kept e-commerce actually
work shockingly well womp mobile over in
Seattle has been vamping various
people's e-commerce sites and the
numbers here are usually pretty
impressive a doubling of the conversion
rates numbers like this occur sometimes
with draw performance but not usually
this amp is so much faster than anything
else that tends to please user is quite
a bit as long as the user interface is
still nice and the design is still good
fast commerce also has made lots of amp
pages
Sene pages get much faster and
conversion rates increased
correspondingly and actually right over
here and Bengaluru is Myntra
which has done amped ecommerce recently
and they've seen 60 percent improvement
in speeds and a very very large
reduction in bounce rates that's all we
have for you if you have questions come
find this at the amp office hours or the
amp sandbox over in the other room other
building place we're here to answer your
questions thank you for your time and
have an excellent afternoon thank you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>