<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Constraint Layout with Dan Galpin (GDD India '17) | Coder Coacher - Coaching Coders</title><meta content="Constraint Layout with Dan Galpin (GDD India '17) - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Google-Developers-India/">Google Developers India</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Constraint Layout with Dan Galpin (GDD India '17)</b></h2><h5 class="post__date">2018-03-11</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/tj4vrwgQxRo" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">is a huge pleasure to be here now I wish
I had some dance routine to go along
with that music not that sophisticated
it's really hard to move in this jacket
thank you all for for coming as you all
know it's we've radically radically
improved the constraint layout editors
in Android studio 3.0 so if you don't
have Android studio 3.0 it will be very
difficult to complete in this code lab
I'm sure everyone already has it I just
wanted to make sure you know as you're
coming in your I recommend getting the
sample code and as quickly as possible
making sure all of your your your the
android plug-in Gradle everything is up
to date so you can go do that now I'll
go I'll go back through this the most
important thing is to get that sample
starter project loaded into Android
studio now what's really unique about
this particular training is that we do
not touch any code which is kind of fun
and it's kind of an amazing thing to be
at this point in Android wear for the
first time we actually can work on
layouts without touching XML I know
that's how many people actually believe
it that's possible first of all to do to
doing okay I'm glad we have some
faithful here but we're actually gonna
do some fun not you know reasonably
complex layouts here without touching
any XML and that was really our goal of
this most importantly important thing to
do now is make sure to get the sample
code there you can either go straight to
github you can download the zip file
from this site so that's the most
important thing and I want to apologize
my voice is completely gone so I would
love to have I would have loved to have
managed to keep it but it decided to
flee at the very last moment so and
thank you all for staying here till the
end I think this is our last training so
so really appreciate the enthusiasm of
all you being here also like all of our
TAS to stand up and raise their hands we
have an enormous number of TA so if any
of you get stuck configuration problem
need anything we have an incredibly
dedicated group of people here so thanks
to all of you guys for staying to the
end as well
all right let's let's rewind a little
bit what are we going to be doing here
first of all if for those who don't know
I'm Dan Galpin and I've been doing
Android for about nine years
then at Google for over seven and a half
years and I I've done just about
everything with Android I've built stuff
for NDK I've worked with Game Developers
I work with half developers I've talked
a lot in a lot of places usually with a
slightly better voice in this and and
and it is really amazing actually to be
where we are in Android today
this is an instructor-led training we're
gonna work through a code lab myself and
all the other TAS are here to help and
the goal of this is to work at your own
pace this will not take for almost this
will not take an hour and a half if your
machine is already set up and and if why
fight doesn't go down or anything like
that so we're gonna talk a lot about
about the latest features of constraint
layout things like biased constraints
using chains to actually Center multiple
views barriers to support localization
better which is really honestly that was
the last missing feature for me of
constraint layout using ratios which is
something I've been wanting to do in
android forever which which is something
and I have wish image you could do and
also using inference inferring
constraints to boat layouts we're gonna
cover a lot of cool stuff here so again
I'll keep this up for another minute how
many people have already gone here and
fetched the project okay
it's your time to give this now
a few minutes
again you're having problems please know
one of the TAS or raise your hand and
someone will come over and help because
that's why we're all here our goal is to
get every single person in this room
through this code lab and also to laugh
at me okay that's the other thing
hopefully I'll laugh at me at least once
I'm really here for comic relief the
code lab is mostly self-explanatory all
right I'm gonna come a-knockin you're
gonna start this this things you guys
don't have to sit here so what is
constraint layout you know how many
people use it all the time first of all
honey people are big constraint layout
users okay many people aren't listening
to me and aren't aren't gonna raise your
hand no matter what I say alright just
want to check so constraint layout
actually started with a lot of the
principles from relative layout it's
actually built by the same people to a
large degree and the big difference is
that we did something we had never done
before we actually went and designed the
visual editor for constraint layout
while we were actually building
constraint layout so it's the first of
our layouts that was completely built to
work well with a visual editor and this
is actually a prototype of that editor
if you look that's actually not Android
studio this is like this is what it
looked like it worked really well by the
way it was like super fast and we had to
put it in Android studio it took us a
while to get that to work well and but
the basics are are much the same between
relative layout and constraint layout
and you know it's very simple
constraints are used to place views
relative to other views the constraint
layout parent or relative to special
layout objects such as guidelines and as
with relative layout the goal is to make
layouts that are flexible enough to
eliminate nested layouts flattening the
layout hierarchy and and this is and
this is important because nested layouts
can be really really slow you can end up
with geometric type calculations in
order to lay it out the entire view
so we only use constraints to layout the
UI and we use these handles for
alignment sizing and margins and stuff
like that so what can we do well we can
resize these handles and reposition to
get absolute visually for absolute
sizing and we use matched constraint to
to do dynamic sizing kind of like match
parent but don't actually use match
parent and in a constrained layout
because it doesn't really work so one of
the most important things about about
our layout system is that we have
baseline support that is very important
in for European and West Asian
typography as I'm sure you know the
baseline is this line of which on which
letters sit and below below which
descenders descend and and and
constraint layout allows you to really
easily align these baselines you just
hover over the element that contains
text and then the baseline will appear
and then you can drag it over to align
to the other other elements note you
cannot align a baseline to another
object that doesn't have a baseline so
it has to contain text to use this
feature chains are really really cool
and very important and I had no clue
what they were when I first saw this I
had to have it explained to me although
I blamed the fact that the editor didn't
actually work at the time but they're a
bi-directional constraint and when you
in they're treated as a single group so
it's really cool is we can actually do
things like say hey I want to chain
these two objects create a virtual
vertical chain and then I want to Center
that chain within my layout and that's
very important otherwise you'd have to
do all sorts of calculations to do this
and it's very useful and this again
replaces having to use a nested linear
layout in your in something like a
relative layout and barriers the
my probably my favorite feature this is
used to constrain groups and and as you
can see here this barrier can move if
either one of these text boxes changes
so we basically align and we align both
of them and size them based upon this
barrier in the band so if if camera gets
longer it'll also move and this is
really important because otherwise a lot
of constraint layouts would never
internationalize properly especially if
one is going to a language like German
which has very very very long words it's
a really good language the test
internationalization on and imageview
has never supported ratios and asmik
ratios are important a lot of people
like to actually see the entire image or
like to see the image not get distorted
so this is this is a way to keep your
designers happy one of the things that's
interesting about ratios is that because
displays have different ratios it can it
this means that your review your imagery
will actually take up a very different
amount of space so you do have to be a
little careful when using them on
displays that have very different aspect
ratios so that is one thing to note so
again we have a visual layout editor
here and this does not necessarily mean
that we're designing those for designers
there's still a lot of kind of techie
stuff you need to know to understand how
to use constraint layout well but it is
really nice not to have to touch XML and
so what we're going to do is we're going
to add views we're going to resize them
we're gonna set up constraints and we're
going to manage change barriers and
ratios we're going to it all visually
now of course it is still all just XML
as you can see here you know just like
any other any other layout it's great
for source control it would be you know
one of the things we wanted to do was
continue allowing Android developers to
use
floo floo they've been using with all of
their other layouts so this all works
pretty well and so yeah that was that's
it it's really time to start one thing
of course is when you import this into
Android studio three dotto it's gonna
yell at you and say it doesn't have the
latest version it's not using the latest
version of the android plug-in and all
of this but it did this morning what
does it will all work once you actually
go and upgrade it and at some point I'm
going to go and fix that in the sample
because you really can't do this code
lab very well without Android studio 3.0
and the latest version of constraint
layout which fixes so many problems it's
really it's pretty awesome I actually
last year I was demonstrating constraint
layout and and and I was I always get a
little fear in me because I like will
the layout edit or make it through and
now honestly it's very rare that there's
a problem so it really is a great time
to be learning constraint layout and
that's it for me
so again if people have questions I can
I can walk around but doing but to enjoy
the code lab it is pretty cool actually
what I'll probably do is start doing the
code lab up here and so when I get stuck
inevitably I can mention why I got stuck
to since I haven't done this code laven
in about two months so you should all be
loading the constraint layout start
project we named it to try to make it
obvious but sometimes these things are
not obvious so that's where this whole
code lab begins so you should see
something like this if you actually can
get everything loaded and as you can see
we've got the two separate views the
blueprints mode and the more visual view
here but both of them show you
constraints is obviously the final
version of this and one of our goals is
to create really responsive layouts so
one of my favorite thing about the
favorite things about this particular
editor is not only can you go and change
it to reflect different devices aspect
ratios etc but you can also just drag
drag the handles and resize it so which
is just super cool
get rid of the blueprint by going here
if we want to just go straight into the
design view but recommend using both of
them side by side it's it's useful
so if you are if you did use an older
version of Android studio you can
actually get about halfway through this
before things would start to break so
that each will be working here
now I will point out that I totally
cheated on the first one I just wanted
them to stay in this location so I just
used infer constraints but obviously
that's you know not we actually want you
to do may dissipate is a pretty cool
trick though and I don't know about 50%
of the time I think it does what I want
which is pretty good actually so if you
like that you can just position
everything visually and click and fur
constraint and it does a pretty good job
that was really the original design of
his whole thing as you can see it it
actually does kind of what you would
expect if I were to scale this thing
switch it to pixel that's something
radically different so Nexus 4 that was
with no work at all I just clicked one
button however the auto-connect is
pretty cool I don't use it but I know
people who love it there we have it
that's again it's nicely greeted
constraints which will Center it I love
these constraint Springs they're pretty
cool one of the big things they also
wanted with the editor was to have
animation so so you'll notice the things
spring and out of place dynamically as
you use them and I think it makes it
more fun and also makes certain things
more obvious and they'd otherwise be and
I think some of this inspired the
physics based animation system we now
have in support library if you want you
didn't see my Android Oreo talk I I went
through a dizzying hard to understand
set of slides about how to use it
and these little biased things are
really fun to play with you can see one
of the main reasons you want to use the
does this blueprints view as you can see
things move much better it's designed
much more to animate in real time than
the design view is so you know one of
the cool things that I'm not going to
talk about in this code lap because we
just don't have time is the use of
constraint sets but if you actually make
two separate layouts you could actually
use a standard transition animation to
animate between different different sets
of constraints which gives you all sorts
of really cool animation possibilities
so with that the constraint layout
system constraint layout becomes almost
like a complete animator toolkit or at
least a semi complete animator toolkit
so it's pretty fun if you're actually
looking at your layout and you see tools
absolute stuff in it that's really bad
so you may be good to have a lint rule
that we never check that into source
control because all that stuff just will
only show up in the layout editor and
it's useful for helping you position
things until you actually have satisfied
all of your constraints I mean you can
actually see all the unsatisfied
constraints in the layout editor but it
can sometimes be a little confusing we
made it we made it a little too nice I
think perhaps to have unsatisfied
constraints I mean the real the
beautiful thing about this is again
about constraint layout is being able to
drag out a whole bunch of things around
get them visually where you want them to
be and hit that infer constraints button
in some cases you're done after doing
that and then you know you're just right
in some cases you just have to tweak a
few of your constraints to get it to
where you want so that's what those
tools constraints are actually for I
know people who are like God you know if
this really takes away my from my
programming
crafts like having this visual layout
editor but I think it's pretty good so I
just want to say one thing that that
will help you in using constraint layout
it's actually clicking on this little
button here in the corner you can see
all of your missing constraints and go
by view and take a look at them and it's
very very helpful if you do find any
issues with any of our code labs by the
way it's really really easy to file a
bug but you know don't just do it for
fun
actually please do it if you find
something that's really wrong it's
helpful</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>