<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Offline Quickstart - PWA #06 | Coder Coacher - Coaching Coders</title><meta content="Offline Quickstart - PWA #06 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Google-Developers-India/">Google Developers India</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Offline Quickstart - PWA #06</b></h2><h5 class="post__date">2017-04-28</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/x-cFtkRfvKk" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so we're going to do a very short
section here like no more than 15
minutes on using the serviceworker to
actually cache an existing site so I'm
going to show you how to do it and then
guess what you get another lab where you
get to take an existing site and convert
it offline and it's a lot better than
listening to a lot of lecture after
lunch because I know how to put you to
sleep it's not what you want so okay so
what we're going to do is in two phases
we're going to store the files in the
serviceworker install event and then
retrieve them when a fetch happens now I
want to make a point here there is still
a browser cache so there's the cache API
that you're using but there's still a
browser cache if the browser cache will
still have files it'll still serve them
it'll still pass them through so it's
possible just like with regular browser
cache to get files are stale because
they're stuck in here so some of the
files I'm going to suggest that you set
to 0 lifetime in the browser cache so
that they always get through to the
serviceworker so basic registration I
showed you this before right if it
exists register it with a control file
you don't need this function
registration but you should wait and at
least register that it came up or show
the error but the registration after
that you don't really care about it
right now
so for storage start by building a list
of files give the cache a name this
could be by the way a letter or a Const
we're using var here just because not
everybody's familiar with es6 and then
list out the urls you want now notice it
index.html and a dot any guess why I
have that because they both refer to the
same thing
any good guesses
so remember there's two ways to get to
index dot HTML slash which means current
directory or dot and index dot HTML if
you don't cache both of those then one
of those accesses the user will use like
slash and they'll get a not found
because that doesn't match the cache
request so you're actually going to wind
up grabbing the same file twice but this
will come over the network once go into
the browser cache and then it'll be
picked up a second time from the browser
cache so it only costs you one network
access
I mean well we'll go ahead and cache our
main CSS file this is the minimum set
basically to get that page working so we
do the install event wait until remember
that's to keep the serviceworker from
going to sleep
open the cache which returns a promise
when that's open you'll get the cache
object and you just saved the object
okay add all those URLs and it goes out
grab everything everything from the
network and stores it really simple now
to retrieve install a fetch handler
inside the serviceworker respond with if
the catch map cache has this event then
return the response back now fetch is
interesting because it won't return
until fetch resolves out in this case we
can also we return the response or we
can recursively fetch well it's not
recursive this will fall straight to the
network outside to make the request if
it's not in the cache already this does
not trigger a recursive there's no
reentrant here so you can examine it in
the examine it in the developer tools
and anything different here nope you've
seen this particular picture so here's
your lab use serviceworker to make an
app work offline you'll catch the
resources and use them instead of the
network it's just that easy
we're it scheduled for half an hour it'd
probably take you 15 minutes I'm going
to
Kimba cute 15 okay go ahead</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>