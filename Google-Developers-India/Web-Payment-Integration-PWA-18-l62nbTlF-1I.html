<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Web Payment Integration - PWA #18 | Coder Coacher - Coaching Coders</title><meta content="Web Payment Integration - PWA #18 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Google-Developers-India/">Google Developers India</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Web Payment Integration - PWA #18</b></h2><h5 class="post__date">2017-04-28</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/l62nbTlF-1I" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so the last section you know most of our
things been pretty short followed by a
lab this is a little bit longer and
there's not a single lab that goes with
this but what you can do is in the lab
notes there is actually a series of four
labs that use the e-commerce sample the
standard Google one that basically have
you start with a shell of an e-commerce
app and build it all the way up using
all the techniques you learn to
progressive web apps so it's a good
final lab if you do that lab it takes
most people two or three hours but it's
worth it because it gives you the whole
picture of how to put an app together so
web payment integration why do we want
it so how many of you are in e-commerce
right about a third of the room one of
the biggest problems in e-commerce is
cart abandonment people add something to
the shopping cart they might even click
checkout but they never get to pay
ninety five percent on average of carts
get abandoned it's a terrible number
right only five percent make it all the
way through the payment process and
there's a lot of reasons for this
sometimes it's they don't have the
credit card handy to look up right that
minute sometimes autofill puts things in
the wrong places sometimes it's just the
network isn't up enough for them do it
whatever it is you'd like to get that
number that a benefit number down
because that's free money that's more
people coming in buying product so the
idea of payment integration is to really
make that much simpler and easier for
everybody
and also more secure so we're going to
talk about the user experience we'll
talk about the payment request API in
JavaScript how those requests work and
then point you at how to get started so
66% of purchases on mobile are on web
even when you have custom application
for shopping people still go to their
web browsers it's another argument in
favor of a progressive web app if you're
doing a new e-commerce
product putting it in the App Store is
probably less productive than building
something really good for the web but
there are 66 fewer percent fewer
conversions on mobile websites meaning
people come to the site but fewer people
actually buy relative to a app now the
reason is is because usually is that
checkout form it's just too tough for
people to get all the way through it so
check out forms today
they tend to be manual you have to fill
everything in they're kind of tedious
are kind of a pain to fill in they're
slow and it takes a lot of interactions
to make it work now one way to work
around this of course is to build good
autofill the web autofill knows how to
fill most of this stuff in and it makes
them pretty strong guesses real good
heuristics actually about where things
live but sometimes it needs a little
help it needs to know exactly where to
put things and so the first step to
improving checkout - dropping the number
of cart loss cart just drop the word I'm
sorry to improving checkout to stop cart
abandonment is to build better autofill
hints into your forms so proper autofill
can increase your conversion rate 25%
that's pretty meaningful what if the
mark-up look like you're gonna try the
dreaded laser pointer and see if it goes
crazy here so out of complete value so a
new attribute like credit card - name CC
name autocomplete attribute CC - number
so there's a standard list of these and
if you just add these to your form
now autocomplete becomes much faster and
much more exact you don't have to rely
on the heuristics you can guide it
exactly where it needs to go these are
actually a standard they're not Chrome
specific they are a web standard if you
look up what w/g autofill here's the
whole list or you can look at web
fundamentals because we publish the same
thing online so after using autofill
suddenly you replace manual
a lot of automatic capabilities it's
quick and simple
it's it's still though kind of slow and
still takes a bunch of taps so imagine
if we could get away just get rid of the
form entirely the user says I want to
check out the phone knows what they want
to do and it does the right thing
so that's payment request so the payment
request API the idea is to get rid of
the checkout form for users and really
standardize payment collection so if you
watch the animation what you'll see is
here's a cart it'll loop around in just
a second okay I think it went all the
way through here we go so checkout up
pops this window okay all looks good I
hit pay it processes I touch my
fingerprint to confirm my identity the
payment goes through to the merchants
site and there you're done literally
that fast
that's not edited that's not sped up
that was an actual example of the
Shopify integration you know how many
more carts how many more people are
going to buy what's in their cart if
it's that easy so now it becomes fast
and it's one tap plus a fingerprint or
other or other way over thinik a ting so
the way it works is first the site makes
a call to payment request now I'm sorry
at the gray stuff you can't really see
in the corner here says initialize new
payment request with payments methods
purchase details and options so new
payment request supported methods
methods are the ways you have a paying
so in this case it's Visa and MasterCard
display items so when you pull up that
payment window there was a subtotal and
a price sometimes a list of items so
that's what the display items are it's
basically something just to display like
a label and a price and you can have any
number of these things it's an array and
then you finally give it a total
it's the total price including currency
code and the value and this often
doesn't count shipping shipping is
another line underneath this it gets
summed in now the browser automatically
pops up the UI to collect payment so in
this case we said order summary it's a
donation of $55 the payment information
is already in the phone usually because
somebody's either typed in their credit
card on a previous form or if we
recognize a new card we'll say okay how
many if you take a picture of the card
we'll scan it in for you so we've
captured that payment info now maybe if
this is the wrong credit card I can go
ahead and tap Edit and I can make
changes to the payment type I could
change shipping locations but most of
the time what comes up here is going to
be correct and if it's correct you just
hit pay so if the is rate it's edit they
can select which card they can add a
card they can change shipping address or
shipping options and then they pay it
now the browser UI talks to whichever
payment app is integrated for that
payment method it might be something
local on the device like Android pay it
might be talking remotely to your
payment gateway to figure out what it
needs but it goes ahead and sends that
down and says all right here's what the
person wants to pay and you get back an
authorization token now in all of these
cases that authorization token basically
doesn't make the final payment it author
it sets up the open-to-buy
so it authorizes that a much of a
payment and then you pass that token to
your site and your site then passes it
back to the payment gateway and the
Gateway redeems that token and basically
pays you the money standard it's a very
standard way of running a payment system
and that token is one-time-use encrypted
it's the same security mechanism at
these with chip cards that you get a
one-time use token it's a nonce you
can't
take it and reuse it and nobody can
really see what's inside of it so the
payment yeah what happens is the payment
API has integration hooks into the
different payment gateways and there's a
way for you to do the integration also
on the outside but I don't happen to
know it but when you supply those
methods you can also supply
corresponding data so you might say I
take oh I dunno
Bangalore pay right and it needs a
special account number so I'd say I take
Bangalore pay and here's my account
number and we would go ahead and send
out the message appropriately and get
the token back browser sends it down to
the site so it's as secure as any other
system that you've got but the really
interesting thing is as you also are not
necessarily giving out personal payment
information to the end merchants because
it's a token right the payment
information goes to the Gateway payment
gateway encrypted and the Gateway
returns you a token and the merchants
only sees the token so is it safe so
autofill and this so autofill is stored
encrypted on the disk it's not websites
can't actually look at the autofill data
unless that data has been put into one
of that sites forms and you can only
look at the things that have been put
into the form the server can run that
transaction without saving any account
or card info it could be a one-time
guest thing so it's a very nice quick
streamlined safe experience so payment
request is an open standard
it's cross-browser it's cross-platform
it's open ecosystem it's not just Chrome
it's across the industry so it makes
things really nice and make some
automatic simple fast you know one tap
so how do we do it so this slide
describes it in text you know lets you
take payments different ways there's a
bunch of links to code samples at Google
Chrome github dot IO but let me actually
show you some real code start with
method data I'll say visa and Discover I
mean this is obviously going to be
locally
relevant what your list is the fine
details total price display items for
the summary and an array of shipping
options at the bottom the options each
option has an ID internally used a label
for the user to see what its price is
and optionally but you should probably
do this a selected bit because if you
have five options the user or select one
of them so that bit you'll need to keep
that current to say which one's current
on here in options you can say do I need
you know do I need to add a shipping
method so does the user include that or
is that just automatic do you need their
email do you need their phone number so
I built the payment request I call show
let's see it returns a promise so that
has already pulled things up on the
screen the user goes through the whole
process and when they're done they
either pay or they cancel this resolves
with a payment response you process the
payment response you sent it to the
server and such as needed and then when
it's done you call complete and that's
what displays the success on the screen
of course if anything goes wrong the
catch will get triggered
so payment response has at more than
this but these are the main fields the
method name so how they're paying any
details needed for it shipping address
option so all that you can read just as
well as I can now what happens if the
user changes their shipping address
let's say they don't like what they see
they want to do an edit so if they do an
edit while the payments being processed
while payment request is open but before
it's resolved you'll get an event
listener for either shipping address
change or shipping option change and
your job is to update the event past in
here with new data so get the new data
resolve it pass it into the event this
codes a little hard to follow honestly
look at the payment sample that's
published online I'll give you a link
or it it works all of that out for you
the same thing works by the way with
shipping option change you get an event
shipping option change you pick the new
option you resolve the promise with that
new option so there's a bunch of
resources and there's no single lab to
go with this but like I said ecommerce
demo there's actually four labs that are
in your book that I'll go with that now
for Android pay supported methods
android comm slash pay you just pass the
URL in there are some parameters you
need to add which are a little crazy but
this comes right from the documentation
it'll explain how to do it and that's it
it works okay so that's your last lab is
doing the payment stuff and that does it
for the course look at the look at the
camera they say
so that's your less less</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>