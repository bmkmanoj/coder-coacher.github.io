<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Working with Responsive Images - PWA #03 | Coder Coacher - Coaching Coders</title><meta content="Working with Responsive Images - PWA #03 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Google-Developers-India/">Google Developers India</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Working with Responsive Images - PWA #03</b></h2><h5 class="post__date">2017-04-28</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/BWI8pUtVvcw" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">alright bro welcome back I hope that lab
went ok it should have been pretty easy
it should have been a review for pretty
much everybody the only thing that would
have really been new to you is maybe
flexbox
but the first lab of the day I want to
keep it easy just so you can make sure
you get used to the labs you can get to
everything it's familiar so they won't
be quite as easy from here on out we're
going to go into some new territories
how many people have used responsive
images yeah that's a nice number
actually about a third of the room so
again for you this will be new except
they are familiar except that there are
some things you may not have seen before
all right I'm going to move over to the
middle here and so why our image is
important because if you look at the
average bytes per content type per page
you know we have this little thing
called a Google search engine that looks
at all your pages so we can calculate ok
what's the average you know HTML on
those pages
how big is it you know how big is the
average image we can figure that stuff
out so the average image weight of a
site is one and a half megabytes that's
average now some sites are much heavier
some are lighter but compare that to 54
ok of HTML so images take up a
disproportionate amount of the page
weight of the stuff on the wire and so
if you can get this image size down that
would be a good thing now some of the
ways you get it down is by using better
image compression
maybe JPEG with lower settings or web P
or you know any of the things you can
use but another way to do it is to
select the best image for your given
screen size if somebody has a small
phone in their pocket you don't need to
give them a desktop size image you could
give them the right thing or if they had
a 1x display a lower resolution display
you could serve them a low resolution
image that matches their display and
save a lot of bytes
because remember the goal here is to
make web apps that are extremely useful
on mobile and remember that you have
networks it might not be that fast when
you get out of the major urban centers
and you're paying for the but paying per
byte so you're really trying to minimize
your data budget we have a good
discussion at the break about fonts and
we'll talk about it strategy for cashing
those later so responsive images um long
definition but basically what it breaks
down to is helping the browser to pick
the best image for your current
conditions don't need to read you the
whole big list words so what can we do
it's responsive images so you could
serve different images for different
resolution screens you could serve
different images for different display
sizes you could serve based on different
formats or art direction now there's a
little demo here of reaching images as
you resize the screen but I'll show you
another in a little demo later that's
the same the same one so first first
rule is well if you don't need an image
don't use it that's kind of obvious if
you can use SVG or an icon font a little
button where you though you are that's
much smaller and it scales to any device
resolution or using responsive images
select the lowest possible resolution
and quality and pick the right format
for the image type so for a photograph
JPEG or WebP II work really well if it's
a diagram it might be web P or pings
JPEGs are less useful for diagrams
because of the way they compress don't
need to walk over sorry have it so
responsive images introduce a new
element picture an element from html5
source which you might have seen before
and two new attributes for set and sizes
so here's an example of a picture
element how many people have used the
audio element or the video element in
html5 okay Tim will see on this side of
the room
you must know each other so the way it
works is picture as well as audio and
video as you put the rapper element in
picture you list one or more sources and
the browser goes down and picks the
first one that it can do so you list
them in most preferred to least
preferred order so in this case kittens
you know so I could say okay web P
format and if the browser doesn't know
web P format it'll try the second line
jpg and if it doesn't know anything it
will fall back to this image now
remember the rule in HTML in HTML not
just html5 is if a browser doesn't know
what a tag does render the content so if
the browser is an older browser maybe
it's an older ie doesn't know what a
picture element is it'll ignore the
picture tag it will ignore the source
tags but it'll still render this image
the thing that it knows on the inside
now somebody asked me last week wait a
minute this is our set and this image
source are the same thing so do I need
them both the answer is no you actually
don't if this is your ultimate fallback
you can have it by itself but you'll see
later that we actually put this in
because we're going to do some special
things of this line but in this example
I could actually just do the single
source and then the fallback image and
we'd get something that works now for
art direction I have an example here of
injecting a media query into the source
statement so in the previous slide we
had a type a type here on the source
statement we can have a type and a media
query and in this case so if it's
minimum if it's at least 650 or bigger
use the large kitten if it's for 65 or
bigger if this one fails but it's for 65
or bigger use the medium kitten
if that fails use the small kitten okay
so that's changing images based on
screen size but I also said you could
change your majest based on screen
resolution and here's how you do it in
the image tag you include a source set
which is a set of alternate variations
on the image and you say if this is a 1
X screen love this image 1 X meaning a
resolution of the older screens that I'd
like 72 to 96 dpi if this is a higher
resolution screen the so-called retina
resolutions anything above 300 then it's
considered 2x so 1x goes up to about 144
2x is 300 and up and loads that image
instead the advantage being if I have an
older 1x screen I can load an image
that's much smaller and bite-sized now
there's another interesting thing here
what if I wanted to bit one thing I can
do also is instead of using the source
tag so the source tag said if the screen
is this size you're using a media query
load this image well how does the
browser know how big the image is if I'm
doing a set of images maybe the browser
has to look at everything to decide
what's best so in this case I can hint
the browser in the source set tag I
could say here's small and this is 500
wide medium is a thousand and large is
1500 and the browser will auto select
from these sizes without needing to use
a bunch of source elements and media
queries easy because how much of a pain
would it be but they've got 20 images on
the page at three different sizes do I
really want to write a 60 or 60 lines of
source when I can do it this way and
think about it these could be
auto-generated you could have a build
tool look at the image on the disk look
at the width and inject that into your
code building
you don't have to do it by hand and what
I can say is now to the browser here's
the size of the peers the size of the
image to load here's the display size
that I want 50 viewport width so I want
half the viewport width because
remembering an image tag you could say
size to say what size screen you want so
I can say size is plural I'd say okay I
want you at 50/50 viewport width and
there's the alt tag so now it'll pick
the best image to fit in half of the
viewport size so on a thousand widget
wide screen it'll pick small thousand
widescreen or smaller on a two thousand
wide screen and we'll get medium and on
a three thousand it will get large but
the browser can then pick the single
best fit so all together this time using
picture and source so picture source
media query for this different
resolutions media source media query
also different resolutions and a
fallback to a regular bird lots of
resources again this is in the slide
deck so you can get online also in your
textbook so it's loud time again nice
quick so we're going to give you a blog
site non-responsive and have you make it
given responsive images so you'll get to
work with source set and with user sizes
attribute use media queries to change
the image based on the size it's called
art direction and then use the picture
in through our elements to do the same
thing for our direction so this one
should be a little different now tell
you one interesting mystery here people
last week for doing this and then they
were opening a network tab and looking
at what got loaded people said hey wait
a minute
this screen that said like small medium
and large in that order
they said the network tab says it's
pulling in the big picture first it's
because they looked at it at full
sighs and then they shrunk it down so we
grabbed the full size image for the big
screen we grabbed the small image for
the small screen but because they're
both in the cache they will both show up
in the network tab but they're not
actually hitting the network so good
luck with this this will give you a
really good feel for how these work this
should be new for most of you and we'll
come back to about half an hour</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>