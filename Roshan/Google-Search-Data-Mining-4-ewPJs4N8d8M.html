<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Google Search - Data Mining #4 | Coder Coacher - Coaching Coders</title><meta content="Google Search - Data Mining #4 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Roshan/">Roshan</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Google Search - Data Mining #4</b></h2><h5 class="post__date">2014-10-28</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/ewPJs4N8d8M" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello and welcome to the series about
data mining this is part four and it's
about Google search so we will be
covering the basics of using Google
Custom Search API to search the Internet
three important links to work with when
you're dealing with this API is the
Google custom search website Google
developer console and this is the link
to the Google Search API documentation I
will start by importing JSON requests
and pandas as PD so were to actually
start working with Google custom search
you have to have a key a Google API key
and a custom search ID I will show you
now how to get to both so we will start
with the custom search website the link
to this is in the description box below
I will be working with my current custom
search engine but I will add a new one
just to show you the process of creating
a new custom search so you click on add
I will add our company website and I
will create it will create a new custom
search go to edit search engine then
setup make sure you select the search
engine the custom search engine that
you're working with go down to sites to
search make sure you change it to search
the entire web but emphasize included
websites and then delete the website
that you added so now it will only
search as it will search the entire web
and not emphasize anything and update to
get your search engine ID you will find
it under a detail
else if you click in here you will see
your search engine ID the second thing
you will need is a key to the API if you
don't this is the Google developer
console if you don't have a project
create a new one but I already have
project here for this tutorial once you
enter your project go to api's make sure
you enable custom search API if it's not
enabled here and there enabled the api's
go down and make sure you enable it so
you can always monitor your Kota you
have 100 requests as it stands today
this might change in the future but for
now they give you hundred free searches
every day this is enough for development
and testing the API now the key you can
get your key from credentials and I will
be using this key which is a server key
if you don't have one you can create a
new key and click on server key so let's
go back to our notebook once you have
your key and your search engine a custom
search engine ID store them in key and
see X so let's take a look at the API
itself you have your required parameters
you have Q this is your query expression
so we can see this is where you put your
search terms basically another important
one is CX this is where you add your
custom custom search ID date
restrictions exact terms exclude terms
all important things a file type this is
where you can specify a file type from
a list of file types that google index
then you have GLS important to this is
the geolocation of end-user
google host if you are working with
google debt FR for france or google the
de for germany you can specify that in
your google host parameter if you are
working with the image search you have a
lot of really important parameters in
here and the image color type color gray
mano you can
the dominant color of the image you can
specify which color you want from this
list image size image type a lot of
really interesting things in here you
have L R which is the it will restrict
the search results to a specific
language so if you want to work with
Arabic for example you will put L R
equals Lang underscore a R this is the
number of results to return per page you
can specify anything between 1 and 10
the default is 10 so you don't really
have to change that if your if you want
the maximum of results related the site
you can specify which site you want to
you can specify a site that you want to
search or related websites to it rights
if you want to work only with the
Creative Commons you can specify that to
save search you can specify high medium
or off and search type you can leave it
empty if you don't want to if you want
just the Google search or you can pass
the value of image to
do an image search site search filter
sort you can specify an expression in
here and this is really important start
this is the index to start returning
results from so if you're returning more
than ten results if you want to request
again the next page you will have to
pass a starting index in here so let's
see that in action will prepare our
request and here I'm passing the URL for
this API and I'm passing three
parameters only I'm looking for
Halloween since Halloween is near I will
be looking at adding CX which is my
custom search ID and my key my Google
API key so let's execute that sorry I
forgot to execute something previous to
that let's see see X is not defined yeah
I forgot to process this filled with my
key and my CX now let's go back in here
and rerun this cell now I will request
this URL and parameters and I will be
using the method get to get the results
according to Google documentation and
the first thing I want to do is process
the result text into a JSON object so
Jason that load s for strength load
string and I saved that in results and
object named results let's inspect the
results that we have so I will I'm
looking at all the keys that it returned
it returned kind URL items context
queries and search information it will
be looking at each one of them
individually kind it will tell you that
you're doing a
Custom Search Search if you are doing an
image search you will get in here image
URL it will return a full URL with all
parameters where you can just replace
anything in here for example you can
replace your queue with another query
and num or anything else in here to a to
a different value so that's the template
URL basically a second thing we'll be
looking at is items items are the
research the search results so I'm
looking at the length of them I have 10
results queries a few important things
in here is one is a next page so I know
there is a next page in here I know the
total number of results is okay what is
that that's 117 million results about
Halloween and this is and the second one
is my current search so this is my
current request this is the starting
index for the next page 11 so if I want
to get the next page I can pass 11 to
start parameter I will be looking at
that in a minute
finally we have search information and
in here it will just tell me how much
time it took to perform this search
total number of results and other things
so let's take a look at a single search
result I'm looking at the first one
under items from my 10 search results
you have cash ID display link formatted
URL link
you have HTML formatted URL and a lot of
other things not every search result
will include everything in here but the
things that you will always get our
title cache ID and display link
formatted URL HTML formatted URL HTML
snippet and snippet
in here I have something else for
example like let me see
that's a snippet HTML the title you want
to always get that a page map you won't
always get a page map some results don't
support page maps and inside page map
you might get completely different
structure so it depends on what you are
looking for and the website that you
that you are looking at so let's process
this I'm defining a simple function in
here it will loop offer results and it
will get the link it will put it in a
data frame so I'm passing data frame
naming this column link then I'm adding
a new column title and I'm looping over
my results to get titles and finally
snippet then I'm returning this data
frame and in here I'm calling this
function and passing the results that we
just got and this is how it looks like I
have links in here I have 10 results
starting from 0 to 9
I have titles in here starting with
Wikipedia history IMDB hello ENCOM this
is interesting the Library of Congress
and CDC the CDC website has something
about Halloween five days ago and you
can see your results in here can extract
more results if you want but that will
do for this tutorial if you want to get
the next page you will be using the next
page index so I'm looking at results
queries next page then I'm getting the
first result within that and getting the
start index of the next page let's see
that in here just to look at it we have
Nick
Paige I'm getting the first result
within this list and getting the start
index which is 11 the second thing I'm
getting is my search terms so I'm doing
that in here I'm passing
I'm redefining the realm actually no
need to redefine URL your URL but you
can you have to specify the next index
to start with so in here I'm passing the
value for start which is my next index
which is 11 for this case so let's do
that and let's switch these results and
then here I'm just I redefine my
function actually I no need to do that
then I'm calling it again passing my
results and concatenating my old results
with my new results and ignoring index
to get this so I will have I have now 20
results in here
sorry tick from 0 to 19 with all 20
results with links from Google search
this tutorial is available open source
on github and viewable on MB viewer the
link to this is in the description below
feel free to use this whenever you're
working with the custom Google search I
hope if you like this you will subscribe
to this channel and watch the previous
part about Twitter API data mining
Twitter API or the next part about
MongoDB thank you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>