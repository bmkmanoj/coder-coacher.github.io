<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>YouTube Data API - Data Mining #2 | Coder Coacher - Coaching Coders</title><meta content="YouTube Data API - Data Mining #2 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Roshan/">Roshan</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>YouTube Data API - Data Mining #2</b></h2><h5 class="post__date">2014-10-08</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/bCrCkfSyuNE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello and welcome to the series about
data mining this is part 2 and it's
about YouTube data API before you start
with any Google API you have to have a
code and register with Google API
console so to get there I'm looking for
Google API console it's the first link
in here if you have a project it will
open to your active project if you don't
you can you'll get a screen like this
where you can create a new project you
can create a new project in here but I
will go to my active project first step
you can monitor your API usage in here
this is requests per second so I can
know my performance over the last few
days the second thing you can you have
to do you have to go to API and enable
YouTube data API version 3 if it's not
in your enabled api's you have to scroll
down and click enable on it the last
thing we'll have to do go to credentials
create a new public API access the
server key and yes create and you will
get a server an API key like this copy
this API that we will use in the next
slide so in here I have my API key I
will be using two functions from the
YouTube data API I will be using YouTube
that search that list that searches for
videos using a keyboard
the second thing I'll be using is
YouTube that videos that list this
retrieves backs that
stakes information like likes dislikes
favorite and other information like even
viewcount and things like this about one
or multiple videos so make sure you put
your API key in here before you proceed
this whole notebook is pre-processed
because this took more than an hour to
finalize and to run the whole code
inside so be patient when you're trying
to replicate this and here I'm importing
division that time request to access the
API Alexa Mel Jason I'm using text blob
for sentiment analysis pandas must plot
libe then finally I'm hiding the
warnings and setting up pandas to my
screen specifications the first one that
we'll be using as YouTube that search
that list this is the documentation link
so you can go and read the documentation
for this basically it uses get and this
is the URL that you'll have to request
these are all the parameters I would not
go over all the parameters because I
have compiled a small list in here
with the important ones so the first one
is part you can use either ID or simple
ID will only return IDs of the videos
that you were looking for snippet will
return a small brief about video about
the video like title description upload
date so if you don't need these you can
just go for the ID and request
statistics with the other function
channel ID if you want to receive all
videos or some videos from a single
channel ID maximum results you can
choose everything between zero and fifty
the default is 5 usually when you're
dealing with large amount of debt they
want to go with the maximum 50 or there
is very
important because you can only receive
50 results per page usually we'll have
thousands of results so you want to
receive you want to order your videos in
a way to receive the more information
from the first pages so if you're
looking into every event you will have
to sort by dates so you will get the
latest videos first rating relevance
title view count video count that's if
you're looking for channels but this
does not apply for when you're searching
for videos and finally view count this
is what we will be using in this
tutorial page talking once you're once
you request a search once you send a
search request you will receive any
number between 0 and 50 but if the
results are more than 50 it will send
you a page talking so it will send you
the next page talking on the previous
page talking so you can request the next
page or the previous page usually we'll
be using next page talking to go over
the complete list of results published
after and published before this is the
format for them queue is a query you can
have or gates there or not gate if you
want and finally you have to put your
key the key that we get in the beginning
of this tutorial
and here I'm preparing just an HTTP
request so these are the parameters that
I will be dealing with part equals
snippets maximum results 5 order date
talking page talking is empty published
after published before so I'm looking
during the period of 2008 elections in
here from 4th of
September until the 4th of November
sorry from the 4th of August sorry my
bad anyway my queue is empty for now I'm
putting the key there and they find it I
am looking for the type video so I don't
want to retrieve everything just videos
the URL is the URL that we will use to
access this API finally I'm fetching the
results in here for Marco del Sol the
queue in here which is Mike where is
Mark II though I'm looking for him
during the 2008 elections and I can see
in here that I received a number of
items each one represented one video I
can see the video ID which is the
identifying number of that video
published at channel ID title
description thumbnail images a channel
title Associated Press and you can see
the other results the other 5 results in
my query the second API that we'll be
using is the YouTube video list this
retrieves specific information about one
or more videos so you can retrieve any
of these information about that video I
will be using statistics to receive
likes dislikes view count and things
like that so I'm using part statistics
ID my video ID one of these videos up
there key and which is my API key this
is the URL that we use for videos list
API and I'm enquiring about that single
video and this is the result I receive
the view count 58 like count zero
dislike and zero favorite comments
so I will I will be trying to forecast
some Senate elections using YouTube
sentiment of both candidates so in here
I'm just using the same codes that we
had before I will not describe every
line because it's just like the one
before but finally I'm processing the
text of that page as JSON because the
results as we can see in here is in JSON
format so we can process that as a JSON
object to make accessing the data inside
it easier I have a wrapper function for
that to split my results into smaller
touches and search for them in here I
have a wrapper function for video list
and finally sorry in here the main
function for video list which is the
parameter URL fetching the data
processing the dates and things like
that nothing major in here and finally a
wrapper function for that so I'm getting
in here I defined a function to get data
for two candidates or more than two
candidates but usually we'll be dealing
with two I specified the date ranges for
2008 2010 2012 2014 and now I have
functions that I can pass the name of to
candidates and I will tell it to get
2008 data for these two candidates or
ten twelve or fourteen so I will be
analyzing the Colorado Senate state for
2014 the main two candidates are Gauri
Gardner a Republican and
have mark you there who's a Democrat and
who is also the incumbent so he's the
existing senator in that seat I'm
retrieving the data for 2014 and
converting the table to summarize it I'm
getting the values of comment comments
dislikes favorite likes and view count
and I'm using some so it will get the
sum of all videos in that list so in
here I have Gauri Gardner and I can see
that he's he has two hundred thirty four
thousand views and Mark Adele has only
hundred and forty-four thousand views
likes are very close favorite zero
dislikes and mark Adele has much higher
dislikes actually more than his likes
and comments we can see Gauri Gardner
has much higher comments than the other
candidate this is a chart it's compiling
the number of videos uploaded per week
so I'm starting at week 32 until week 41
the current week you can see the
Democratic candidate was uploading there
were more videos about him so he it's
not necessary that he's the one
uploading them but there are more videos
about him or mentioning him and then we
can see somewhere around the week 38
more about the Republican then it went
back then there is a really high spike
here at week 41 the current week we can
see more data in here this is the use
count so this doesn't measure the views
of that specific week but that measure
is the views of the videos applauded
that week so
even if you watch this video a month
later four weeks later it will still
show up in the week where the video was
uploaded we can see that the Democratic
candidate had more views in the first
week in here but then he went down and
we can see the Republican has generally
more views for his videos we can see a
slight shift here at the last week I
don't think of I don't know if that
would make a difference or it will it
might actually switch by the end of the
week
remember I'm recording this on the
beginning of the week anyway finally I'm
checking out the likes count so I can
see the Democratic candidate trailing
once it comes to Mike's count and and
there is a little switch here in the
last week dislikes he received a lot of
dislikes in the first week but then
they're performing almost similarly
maybe the Democratic candidate is
receiving a little more dislikes so how
predictive was this we'll look at a few
races from 2012
these are races that major forecast
websites mentioned as unpredictable or a
toss-up as they called it so this is the
first one in here I'm looking at
Virginia I had a I had an open challenge
in here so there is no incumbent
competing here
I had one Republican candidate and one
Democratic candidate and we can see the
Democratic candidate won this one the
series if we look at their data Tim
Kaine is the Democratic candidate we can
see that he received more
views 240,000 more likes list dislikes
than the other one and lists messages on
his videos or videos mentioning him I
can take a look at the videos he
published you can see the Democratic the
Republican candidate excelled in the
number of videos published about him or
he published him this is the view count
you can see that he had there were a
video around the week 35 that was highly
viewed about the Democratic candidate
and around week 41 there was a very
highly viewed video of the Republican
candidate and both of them I think
released a video on week 44 just about
two weeks before the elections or less
that or a week actually before the
election that received a varying number
of views so the Democratic candidate
received actually more views and the
videos that we they released just a week
before the election we can see the likes
for that video on week forty for the
Democratic candidates received way more
likes than the other one he received
fairly few likes two dislikes were
really high for the Republican candidate
and last few weeks let's take a look at
Nevada 2012 also and here we have a
Republican incumbent who won and the
Democratic candidate who lost in here I
combined all the three codes from the
top so I'll receive everything in one
page and here we have let me see who's
the Republican Dean Heller I could have
seen it in the chart anyway so Dean
Heller received way more views than the
other one and Democratic
candidates received listviews 679
thousand views he received more likes
he received also more dislikes than the
other one but less than his likes anyway
so I'd like to dislike ratio is still
positive comments he received actually
more comments to his videos this is a
time plot for what happened just like
the previous one you can see the
dislikes and videos for the last weeks
but it didn't make much of a difference
I think all publicity is good publicity
for in this scenario but anyway he
received more views than the other one
eight hundred seventy thousand to six
hundred seventy nine thousand so let's
let take a look at the current Senate
113 s and I'm getting all my data from
the fac website and senate.gov website
so i will start by collecting all
senators data and fetching that as an
XML file from the Senate API and you can
see that I have hundred senators
representing the US Senate the 113th US
Senate and here I will be a plotting
who's controlling the current Senate so
we can see that Democrats have fifty
three candidates the Republicans has
forty five candidates and independents
are two sorry
senators and independents have two
senators and the current Senate you can
see this is the majority line you can
see the Democrat have a majority now and
Senate so who's up for re-election
the Senate has three classes so class
one class two class three and each one
of them will have and they will have an
election every two years two are to
re-elect or replace
one class of senators so they replace
one third of the Senate every or
have reelection z' for the third of the
Senate every two years that makes the
whole term six years so this is the
current class that's that will have
reelection z' you can see that democrats
has twenty seats for reelection and
republicans have only 13 seats up for
reelection so it will be harder for
democrats to defend all twenty seats and
it will be easier for a republican to
defend their 13 seats and maybe pick few
seats from the other one from the other
party looking at other classes the so
this is the 2016 this is the 2016
election senate elections it will be
twenty four republicans and ten
Democrats i don't know how will that
work with the presidential election and
the last class which is class one that's
up for erection 2018 is twenty three
democrats eight Republicans and two
independent senators so let's do a
little forecasting for 2014 using
youtube data so I got all Class two
senators and here by filtering senators
class equal plus two and sorting by
state so I'll have states starting with
a first and in the good W last I'm
fetching candidates data from the fac
website for 2014 and you can see the
replying here is an XML file if we just
look at the first ten tags we have
inside the XML file we will see a title
description timestamp copyright then
candidates summary candles summer
candidate summary so each candidate has
a tag called hand candy
summary with his information inside if
we loop over over one a candidate will
see all the data points about that
candidate we have his summary website a
candidate ID name the office he's
running for so housed in here the state
the district and the rest goes around
this is party affiliation incumbency
status and address you will see with the
most of them even some donations and
expenses about the current election
cycle we have in here I'm filtering only
people in Senate races so people who'll
show up on ballots for the Senate races
and 2014 and I have four hundred and
twelve people according to the FAC
website
I'm just extracting some data about
these senators from the XML file and
adding them to our data frame so now we
have all our senators and Senate
candidates and all of their data is in
here inside this single data frame I
will be retrieving YouTube data for all
the candidates using get state data so
I'll pass to candidate names it will get
2014 data as we see before it will pivot
that table to get some summary add more
data points like statistics about like
to dislike ratio views share within the
trace messages here likes share this
last year it will print that summary
table and returns it and here I just
have a function to fix the names because
the names are formatted in all caps
and last comma first so I'm just dealing
with that in here to make the name's
YouTube friendly that's I think anyway
looping all senators in class too and
these are the result for Alaska we have
Democratic senator we have two people
running for Senate him and then Sullivan
I can see that this one has more
comments has less dislikes way more
likes view counts he has more views
hundred sixty five thousand two hundred
and four and these are our other stats
so the view here is 61 to 38 which is a
decent margin actually you can see
Alabama with the single candidate so
there is no challenger for him who is a
Republican senator we can see the other
states in here the list goes on and on
but let's go down and visualize all this
data to get some sense of what is it
telling us this chart I will just
explain few things about it and here I
have X - views here so people on the
right will have more of the views share
for that Senate race this is the
absolute number of views and finally
size is controlled by the number of the
amount of donations they received so
people with smaller circles received
less money people with larger circles
received more money in here people to
the right controlled more of the YouTube
viewing
share and this is a log scale by the way
so this is 10 this is hundred this is
thousand ten thousand hundred thousand
and this is a million and this is the
absolute number of views people who had
more than 50 percent of their views of
the views here 14 Republicans 12
Democrats and 1 DFL I have no idea where
is that but I guess that's something
like independent or something like this
but anyway so we have 14 Democrats 12
very public at 14 Republicans and 12
Democrats with more view share so how
predictive is this we can we can
remember that the current class of
Senate that's up for re-election is
mostly Democrat it was 20 Democrats and
13 Republicans so this this is not
really good news for Democrats because
we have 14 Republicans controlling the
YouTube viewing share basically and only
12 Democrats so let's see how predictive
this is what is the probability that
someone will receive more views will win
the race the actual race and we receive
actual actually more votes how
predictive is this model in here I'm
doing this with the 2012 Senate
elections so I will I'm retrieving bay
back Senate
data from 2012 this is the function
we're doing the same thing but just
changing the get data to get 2012 data I
have thus the
and the debts of that race in a comma
separated value file it will be
available on github if you want to get
it and to replicate our results in here
I'm finally just compiling their full
name which is their first name plus last
name nothing major in here just adding
some statistics so this data frame and
fetching their data from 2012
so I'm touching data between for 2012
842 2012 11 4 so until November 4th and
this is the data for all of them state
by state you can see the data in here
finally I'm calculating the what share
between the two candidates so I can know
who received how what percentage of the
vote and this is the data visualized you
can see that people who received more
than 50% are these guys people who
received less than 50% are these guys
you can see there is some kind of linear
thing going on in here but you can
easily confirm that people who received
more than 50% of the votes are
represented by stars so they won the
race people who lost the race are
represented by circle red is Republicans
and blue is Democrats
Green is independent and yellow has no
party affiliation according to the
official data that I received but anyway
the chance of you winning the actual
race based on winning the YouTube views
share is 72% 0.7 so 24 of the 33 people
who won the YouTube race won the actual
race and only 9 out of the 3
the three who lost the you through
YouTube race actually lost the race won
the actual race only nine out of 33 so
27 percent probability to win according
to the single chart we can see in here
that we could have done more than this
single feature or the single major I'm
just using in here views here you can
see Todd Aiken is showing up really high
in here but with a fairly low maybe less
than forty percent of the actual votes
we can see that if we look at his the
sentiment analysis of his videos are
negative so most of the videos he
received were attack videos so even if
he received a lot of views he received a
lot views or has to his attack videos
basically and other candidate had and
slightly above zero but still positive
sentiment for their videos this tutorial
is available open source on github and
is viewable on MB viewer you can use
this tutorial for any purpose you want
maybe you want to follow up on the
elections I hope you like this you'll
subscribe to this channel and you will
watch the previous part about whips
cribbing or the next part about Twitter
API thank you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>