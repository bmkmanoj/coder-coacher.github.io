<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>XPath - Quick Tip | Coder Coacher - Coaching Coders</title><meta content="XPath - Quick Tip - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Roshan/">Roshan</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>XPath - Quick Tip</b></h2><h5 class="post__date">2016-01-12</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/btfc_d2rJKk" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello everyone this is a quick tip about
how to use XPath XPath is short for XML
path it's a query language to find the
nodes within an XML or HTML document
this is how we find information when we
are web scraping basically it has so
many other usages but this is what I'm
going to concentrate on right now so I'm
starting by importing requests and HTML
from Aleksei metal library which I will
be using for parsing documents and
expert implementation so in here I have
a cell with the cell magic to tell the
cell this is an HTML code cell I have an
HTML tag a body tag oh it didn't close
the body tag that's embarrassing okay I
have a body tag I have a header in here
h1 then I have a unsorted list with
three items telling you which are my
favorite Python libraries so once this
is rendered it looks like this favorite
Python libraries and I have three items
in here so let's say I want to get the
title the text and the title basically
to do that and here I'm just basically
getting the code from the cell and just
parsing the parts which are not
important just to get to this string out
which is - I could have just copied this
code and paste it here but it's just
another way to get the code from the
previous cell so I have my HTML code and
I parsed it using HTML from string so
now I have an L XML
node with representing this document so
how can I get the title using XPath you
can use XPath in several ways you can
just list the path to your node so you
can say for example HTML body h1 and you
can separate them with forward slashes
make sure you add the forward slash in
the beginning if you are if you're on
the road document so you have to put
forward slash in the beginning expect
always returns lists so this is why I'm
selecting the first item in that list so
I'm going HTML body h1 and it's
returning an element which is nothing
exactly what I want I want the tick's
inside that element so I could go to
that element and use the text the text
variable or I could use the text
function inside my expert so in here I'm
going HTML body h1 then I'm using the
text function and that returns the text
inside that tag working with multiple
items so let's say I want to read my
favorite libraries from this document I
could go HTML body UL li which is
basically HTML body UL li and because i
have three items in here it's going to
return a list with three items so we can
look in here and we'll see that it
returned three elements if I add text
function to the end of that it will
return my the text inside these list
items you can use tag selector without
path so if you use a double forward
slash it will select every tag that
matches a lie in this document but if
lucky for us in this case
I have only the items that I'm
interested in using the Li tag so I can
do use a double forward slash then I can
use the text function and that returns
my three items this is what you are
going to end up using mostly in
production because websites change their
design all the time and you have to be
able to find your data easily without
sticking to some path anyway selecting
one result so let's say I want only to
read my favorite library I don't want to
read all three so I can use index
selector since at the end of my query
I'm using one because this is an index
that starts from one so if I put zero
that's not gonna work
so it's one two three four numpy pandas
and requests then I'm using my text
function so make sure you always use
your index at the end of your tag
selection part of your query and here I
have a more complicated website with two
H tags so I have two headers one telling
us about my favorite Python libraries
and the other one telling us about my
favorite J's libraries you can see I
have you else and they have Ally tags
and so inside of that and they contain
anchors with the name of the library and
the link to the website so this is going
to be more interesting to use XPath with
so the first thing I'm just parsing this
code or HTML code who likes a metal not
document or a note basically so the
first thing I want to you do is a I want
to select the first header which is this
one and if you notice in here
my first header uses class text muted
and my second one use uses class class
text successful or success so to select
my h1 I'm gonna tell my path in here go
to HTML body h1 where it has an
attribute called class equals text muted
then get the text function from that so
it returns favorite Python libraries you
can use the contains function this is
when you want to read part of if you
have multiple classes so in here I could
I want to read the list of the my
favorite Python libraries and I have I
have a UL tag in here but I have a
second year of tagging here they are
using different classes I could copy
this whole class until that go and find
the UL that has all of this but I just
want to tell it
go and find any UL tag that has enough
stacked and here in this example I have
only this URL using enough stacked so
and here I'm telling it instead of at
class equals I'm using the contains
function contains function takes two
parameters the first one is where to
look and what to look for so I'm telling
it to look in class and find nav stacked
then give me a lie a the anchor inside
of that Li and read the text with the
text function so it returns my three
favorite
libraries I could read also attributes
so in here
the Ashraf attribute inside my anchor
has URL to this to my favorite libraries
so trade these URLs I can use instead of
text I could use at href which is the
attribute that stores the link inside an
anchor tag so when I run this you can
see it returned my three URLs a real
world example I'm looking at the
Wikipedia page in here and on the
Wikipedia page you will notice that
there are some languages that have more
than 1 million articles I'm using in
here Firefox but chrome is gonna be very
similar to know where to look
usually you'll have to right click
inspect element so I'm looking at this
this link for Dutch this link is in an
Li and there um and none of these have
like classes or anything unique to them
to easily identify them but if we look
back there is a div tag in here that
encapsulate all of this so if I collapse
this you can see that this DIF this div
has a very special class the problem is
it exists in two of them so this one
this one basically which is the
languages with the million plus articles
and this one with the languages with
hundred thousand plus articles they both
have the same they both have the same
class basic
so if I go back to my example I'm
reading Wikipedia page instead of the
response the text I'm using content
because I need a special parser for
Unicode and once I have this document
I'm looking for all depths within the
document that have this special class
then I'm selecting the first one because
there are two in this document that have
this class the ones with million plus
and the one with hundred thousand plus
then I'm going to ul Li a and curried
and I'm finally reading the text inside
of them and here are the languages with
1 million plus articles in them from
Wikipedia I hope this is clear and if
you have any questions feel free to post
them in the comment section below
and this this notebook will be available
available on github feel free to use for
any purpose here thanks for watching</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>