<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Speech Synthesis with Amazon Polly in Python - 2 | Coder Coacher - Coaching Coders</title><meta content="Speech Synthesis with Amazon Polly in Python - 2 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Cristi-Vlad/">Cristi Vlad</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Speech Synthesis with Amazon Polly in Python - 2</b></h2><h5 class="post__date">2017-06-13</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/1bF07DhdSeg" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">in this video we're going to build the
basic code that allows us to synthesize
speech with Amazon calling in Python
please see the previous video for the
prerequisites if you'll be coding the
long additionally to what I said there I
have to specify that we also need by
game so if you don't have it you can
simply put install fine game alright so
let's get to it
first the imports so import boto 3 and
then from PI game import mixer them also
going to need the operating system so
import OS will create a poly instance so
poly equals bottle 3 client poly and
then a variable called spoken text that
will hold the response we get from
calling the synthesized speech method so
spoken text poly synthesized speech and
then our text is going to be I am Emma
let's say you know me from ivona but now
I come vile poly
alright and our output format is going
to be mp3 and the voice ID is gonna be
Emma alright now let me quickly show you
how this response looks like in
interactive mode so you get an idea of
what spoken text is basically so I'll
just repeat these commands in a 5-pound
3.5 shell so import photo 3
from pygame and port mixer and for to
Les Paul is boto three clients Polly and
then spoken text is Polly's synthesized
speech text I am Emma you know me from
Ivana that should be enough and our
output format is mp3 and our voice ID is
Emma okay and I will simply call or we
can print but I'll just call spoken text
printing like gives you the same output
so this is basically the response you
get from calling synthesized speech and
the part we're interested in from this
response is the audio stream this is the
part of the response that will write as
MP mp3 file so let's just do that within
the code so we're going to open a new
file with open let's say output dot mp3
in write binary mode as F F right so
we're going to write spoken text so
we're going to write the part of the
response the audio stream read okay so
this is basically the most important I
would say the most important part of the
code and then we're gonna just close the
file now at this point we have we kind
of have our mp3 file and we can simply
open and play and let me just
execute this code so f5 okay and we
should have a new file output mp3 this
is this is it okay so let me open it
hi I'm Emma you know me for my food but
now I come back Cuddy
okay but what I wanted so this is fine
but what I want is to have it play
directly in this file and then remove
the output file so this is kind of
optional and you don't have to do it but
I guess it simplifies things and it
makes things even smoother so this is
where we will need the mixer from
finding so mixer we're going to
initialize the mixer first and then
we're going to load our output so mixer
music load our output dot mp3 and then
we're going to play mixer music play so
we're going to play whatever whatever is
loaded okay and now another important
thing as long as the mixer is the busy
playing or speaking the text that's good
that's fine but once it's finished
speaking work that's one will delete the
file so how do we do that
we're going to use a while loop so while
next sir
music get dizzy equals equals true then
pass so do nothing as long as the mixer
is busy but once that's done then we're
going to do mixer quit and that's when
we use the operating system to remove
our output so output that and be three
okay now let's run this code once again
hi I'm Emma you know me from my phone
but now I come back Connie and that's
gone okay so that's kind of it that's
how you synthesized speech with Amazon
quality now I'm considering writing this
whole thing as a class or wrapper so it
can be easily used similar to the way
the Python a wrapper was used for iPhone
now but I'll see next will probably
build GUI applications with poly so
stick around if you're interested as
always if you enjoyed this video please
hit the thumbs up button and subscribe
thank you for watching</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>