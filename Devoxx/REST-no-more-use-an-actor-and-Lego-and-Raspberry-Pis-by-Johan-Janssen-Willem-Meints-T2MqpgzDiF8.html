<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>REST no more, use an actor and (Lego and Raspberry Pi’s ) by Johan Janssen &amp; Willem Meints | Coder Coacher - Coaching Coders</title><meta content="REST no more, use an actor and (Lego and Raspberry Pi’s ) by Johan Janssen &amp; Willem Meints - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Devoxx/">Devoxx</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>REST no more, use an actor and (Lego and Raspberry Pi’s ) by Johan Janssen &amp; Willem Meints</b></h2><h5 class="post__date">2015-11-14</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/T2MqpgzDiF8" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello good morning Deb ox welcome to the
last day Friday so this is me I'm Simon
and this talk is going to explore the
intersection between software
architecture and code and really there
are two things that inspired me I don't
know what is going on but no worries we
just will talk about trains no difficult
stuff about architecture or anything
else so if you're here for trains you're
in the right room if you're here for a
movie like Spectre you're probably in
the wrong room we're going to talk a bit
about trains together with my colleague
Willem and myself we will talk for the
next hour about what we did with Lego
trains mmm we don't work for Lego or or
another company that's producing toys
normally we just build enterprise
software for large organizations but we
thought this would be fun and oh we can
get probably a quite cool demo and I
mean demos they always go okay you never
have any issues with live demos so we
thought it's friday the 13th what could
go wrong if you have like four raspberry
PI's a bit of Wi-Fi and a couple of
applications so we will probably be all
right so we will show you later how it's
working first of course the disclaimer
you always need a disclaimer oh I have
to admit although the Lego wasn't harmed
I hunt like three raspberry PI's beyond
repair but I mean that's cheap the
content for today is this if you have
any questions you can also ask them in
between just shout really loud and we'll
try and answer them but first a bit of
why did we do this I mean it didn't just
pop up for like oh okay we do Lego
trains and the ferris wheel add some
raspberry PI's know we had a couple of
reasons to do this first of all like I
said we mainly build large systems for
large organizations on big servers using
java or scala and all the frameworks
that you probably already know
and we were thinking like okay can we
use those frameworks on I OT hardware
like the Raspberry Pi because if that's
the case and our developers could quite
easily develop IOT software because they
are already familiar with those
languages and they don't need to learn
some version of C or some other
low-level language they could start
immediately so that was one of the
reasons we started with it and one of
the other reasons was it's a lot easier
to use Lego and stuff like this to
explain some contest concepts for
instance ever tried to explain to my
wife what an event-driven architecture
is and I say it's sending a message ax
from position a to position B or
something like that then probably she
stopped listening after even driven
that's not her fault but it's I think
our fault because we have some strange
dialect as developers and it's hard to
understand but if we use Lego and we I
say to my wife like we send a message to
the train that it has to play a song and
she can easily understand it and I'm
almost telling the same thing as I did
before in some dialect language so that
makes it easier and we can maybe also
use it to educate kids with it but as
you can see at the top it's also a nice
project to just have some fun
ingredients so often I see like cool
stuff and presentations but it's hard to
figure out what they actually use for it
so I thought like okay I just mentioned
the different hardware that I bought two
motorized these trains and to make them
connect it because it's quite cheap if
you don't have a Raspberry Pi it's about
50 euros if you already have a raspberry
pi it's like 20 25 euros so that's
really cheap and you can already control
the train speed but if you want to go
one step further like this here we
already have like a camera on the Left
we have an RFID reader at the bottom and
a speaker at the back of course you can
keep adding adding adding but then of
course it gets a bit more expensive but
you can have more or less endless fun
with it so now my colleague will take
over for a moment so if you have bought
those trains you
the rest is just adding more software to
it and my colleague is a very fun of
buying Lego but he buys it with a
bucketful so and there's also some
architecture in there so we started out
with building an angular application of
front-end to control everything I will
shout later what it is and we used rest
services Jersey and Java to start out
and start building this whole project
and we use Jason to transport messages
from the train control to the train and
to the switches but when we started
working with akka and Scala we
discovered that it's way easier to do
the same thing with acha acha has is
messaging pattern it allows you to send
messages between actors and you can
easily convert a train into an actor
it's basically the same thing there are
a few tricks involve which will show you
later but that's about it so we replace
everything that's with a car except for
the for the bit where we talk from
angular tuaca because yeah you can you
can't just send messages to akka forms
from angular maybe in the future so how
does it work on the hardware level well
we connected a few trains to Raspberry
Pi using infrared transmitters we
reverse engineered the remote control
that Lego users normally and the rest
goes off Wi-Fi we bought a couple of
cheap y5 dongles and inserted those and
the switches we normally use through
Wi-Fi but we switch to cable because
Wi-Fi has this very annoying property
that it disconnects if there's a lot of
people in the room so it could
disconnect over here to fight at the 13
I hope Murphy is out of the building by
right now but that's about it and we
have overview camera which is in the
corner over there also connected to a
cable and we added just for fun we added
a couple of particle photon computers
which are even smaller about this big
you probably can't see it in the back
but it's a few centimeters two or three
it has a Wi-Fi chip and very small
computer that you can use also to
control things like lads
this is work acha has this principle of
building actors that you can send
messages at the top you can see a class
coordinator and extends from an actor
and it has a receive method you can't
talk to actor directly you have to send
it messages because it's highly
concurrent and once you send the message
you can do things like print a line or
in our case you can control the RFID or
the infrared controller and finally if
you have an actor you can make an actor
system in which the actor is hosted and
you can send you can can ask The
Exorcist to create a new actor of your
choice and send the message using the
exclamation operator or the tell
operation on the XR okay networks on a
single computer but we have this thing
where your Raspberry Pi it's in the
train and we have a computer controlling
it acha has a very cool feature called a
career mode actors too until you get and
what they do is basically if you have an
actor on the train that's on the top the
code it has a simple actor that's local
it's running and it accepts messages you
can either send a message to it locally
and it will go at a certain speed at the
bottom we have is the same thing
basically but remote and the idea is you
create an remote XRF but instead of
creating the actor now I'm going to ask
for an actor on a different system and
you can see you by the string acha TCP
it goes to my example actor system at a
certain IP address in the port and it
will ask for the slash user slash
coordinator actor and basically what
this does it tries to connect to the
remote computer find that actor in your
actor system and talk to it and after
yet it's just normal actor reference and
you can send messages to it so it's just
like program locally but now it's all
over the network apart from from a
little bit of code you need to change
there's also a little bit of
configuration you need to do it dare say
active provider you need to configure
and it needs to be a remote actigraph
provider which basically tells acha okay
I support remote actors and I want to
talk to them and the other thing you
need to do is to set up a remote
connection
which enables occur on one system talk
to acha system on another computer
that's all cool but we have a slight
problem since we have now two
applications one on the train and one on
my computer I need to have a way to
share a protocol between them namely the
messages were going to send so for
example I have an actor on my laptop my
train control actor in this case let's
go to send a play message for a song on
the on the train because that's going to
play across the speaker but yeah that
message has to exist in both ends
because acha doesn't use JSON or XML or
soap or anything it uses a binary
serialization so it means that you have
to share the messages between one system
and the other and this is how we do that
we basically introduce a third library
that contains only the messages we're
going to use and we set it as a
dependency of both our server product
and the train so what does her message
look like it looks like this we have a
basic pattern in a car weighs say we
have a actor class we have companion
objects with that actor class and the
companion objects will basically define
the messages that the actor can receive
so when you see here is an object music
service message and it has a play and a
music list and play it accepts a file
name that must exist on the train
obviously I can't send whole files over
the network right now and it will play
and this is how it works in in practice
so you ask for the music service on the
train and send the message from that's
coming from our message package to play
your song so we told you earlier than we
did something with with less services in
the beginning and we removed from rest
services on to remote actors and there
are a couple of difference between that
in HTTP you have to send Jason sir
messages you have to
serialize your data integration and at
the other end you have to deserialize it
you have to convert it into objects
again it you don't need to do that in
our Chi you don't even have to make a
connection in our car you just say I
need that other actor and in config it
will say it's on a different machine we
use it in code but you could do it in
conflict by the way it feels much more
natural and another advantage is because
it's like programming on a single system
you could even run it on a single system
unit tested so for a bit of quality I
would recommend thank you the he tried
is if you have such a thing there's also
one downside in our case we could use
remote access because we have a closed
systems a system we don't have to
version our messages we don't have to
think about independent technology
things like Java talking to dotnet
services or Java talking to some C
program or stuff like that it doesn't
need to do that so version is not a
problem but if you're running
microservice for example I suggest you
stick to request into to Jason because
that's version able to some extent in an
archive messages aren't because you have
to share a binary dependency between
them and it has to be upgraded every
time on both ends also HTTP has more
more loosely coupled because of the
versioning aspect so what does the use
of remote actors bring us well we have a
highly concurrent system so we don't
need to worry about shared resources
getting messed up or things breaking in
that sense another thing is we have a
building load balancer which means that
we could say for example if we have too
much trains on a single train control we
could duplicate it and instantiate the
second instance of the train control and
go from there so that it makes more
scalable it's not like you have a
hundred trains on there but you could do
that and also one other thing we
experienced that the wireless is
sometimes breaking over here on the
conference and other conferences and
akka has is built-in circuit breaker
what would happen if I can't
deliver a speed message to my train for
example in a restful world you have to
program a circuit breaker by hand you
have to catch that exception and ask ok
why does this exception break I don't
know it's my connection gone it's my
civilization wrong what's happening and
I have to decide for myself what's going
to happen it's not really easy to do
that in acha you have a built-in circuit
breaker so if it fails the delivery is
always an exception and you can use
supervision to say okay doesn't didn't
deliver no problem i will try again and
this way you prevent the train from
going wild or stuff happening that
shouldn't happen so that's it's very
useful trick to have in your toolbox if
you're running occur so that's a little
bit about a software that we use in the
wet and the reason why we build it this
way and on a hardware level we have a
couple of things involved we have
switches we don't happen right now but
normally you you can control the
switches to acha by sending a message
student use a couple of servo motors in
a surfer control board and which will
translate the signals in the correct way
obviously we have infrared because we
have lego normally uses infrared control
to to communicate with the train motor
but yeah we will replace that so
normally the they use this kind of
remote control in the train and the idea
behind it is that kids usually we would
have voltage on the rails in an old
train if you have a train like 15 year
olds in 15 years old you have folded on
the rails and kids these days don't like
that anymore I don't know it isn't isn't
allowed anymore so Lego switch to
infrared and was this Japanese guy of
course the Japanese he went ahead and he
reverse engineered the whole thing and
wrote it down on his blog how it worked
and we practically yeah took that code
and converted from c to java and later
on into scholar messages and used that
to control train
I train has a cool thing it also plays
sound we can share that later we edit a
battery charged speaker to it and you
can use that to play sound on between
because what's the train without train
sounds I mean pretty boring lot of voice
and if you're a feeling especially
you're lucky today we have a couple of
air of ID chips among the rails and what
you can do with that is where we build a
auto pilot program for the train and at
this location aware so if it crosses a
certain point on the rails we could say
okay first we'll go clockwise at a speed
of five and it crosses another point go
anti-clockwise at the speed of two
things like that you could do and it's a
that's pretty cool to you as well and
since you can control the train from a
remote location like your work if you're
feeling bored out by all the other stuff
you're doing during the day you could
control your train to your telephone and
yeah then it's handy to have a camera on
there we have edited a camera to the to
the Blue Train and you can see where
it's going and if that's not enough
there's also offer a few camera which
you can use to overview the whole track
so how does this work what we say
there's an open source project that has
a raspberry pi camera control and we use
this code to build a front end for it so
you can see what's happening it's
basically it works like this the camera
is taking screenshots constantly staking
frame by frame and it's sending it over
the network and when you have a small
javascript file in there that contains
code basically just refreshes the images
every few milliseconds cause a lot of
bandwidth but video does too so that's
kind of cool yeah okay our rails is cool
and it's everything is it's nice over
here I can play with that my kids could
play with that but we want to make it
even cooler so we added a ferris wheel
which you can control in exactly the
same way using infrared and a raspberry
pi and that it even has an indicator of
how fast it's going
two if particle photon that controls the
lats and it tells you in which direction
the ferris wheel is going and how fast
it's going and this is a particle photon
it's a few centimeters big it only has
GPIO pin so you you can't do a whole lot
with it but yeah it's kind of cool and
has it's a unique thing about this
device is that it's connected to the
cloud so you write your code in a web
browser actually it's not like you have
to use SSH clients and all that stuff it
does that all automatically so you write
your C code that's arduino compatible by
the way you write it in your browser and
when you're done you say publish publish
this to my device and it will
automatically update it uploaded through
the internet to your device and it will
start to run it's really cool my
colleague is going to explain a little
bit about dresses software we are doing
yeah thanks I think you forgot to show
the wall he wasn't it yeah because
you're a boy yeah we will show the wali
I mean you do it sure it falls off the
table some painful I will first show it
is it visible so this is like the same
infrared receiver as we use on Lego
trains the engines are not the same as
on the trains because in the training of
course of wheels which are directly
controlled by the engine but these are
practically the same ones as we use for
the ferris wheel to make the ferris
wheel go around and we have a battery
pack which is essentially the same
battery pack as we have on the lego
trains so it's more or less the same but
I mean Wally is probably even cooler
than a train so I had to get one and we
will show you how it works hopefully
work oh yeah we're just half the course
on it's all this Lego sedro-woolley it's
normally a static thing you can't
control it but there's a description on
the internet how to add a couple of
motors and a battery pack to control
this sort of thing and you can see it's
a pretty cool and sometimes I get out of
reach that's also the thing that's the
reason why we control it through a
Raspberry Pi with infrared to range from
my remote control to the robot is really
short so yeah if we use the USB Wi-Fi
download on the
I mean we have antlers reach as long as
you have some Wi-Fi and that's a big
advantage I mean when I to start a tray
playing with these strains and went from
my living room to my kitchen and tried
to stop it it didn't stop and just
crashed in the kitchen hey you don't
really want that I mean then you cannot
make cool big layouts of your trains but
but it's nice to play around a bit with
like Wally but for like serious training
hey I mean you need a bit more advanced
setup and to show a bit of what we did
for software and what applications we
build to control it I will show you the
rest this is a bit of a summary I won't
read them all it's probably quite common
stuff so we more or less used first job
on later Scotland acha as sort of an
interface integration layer between all
the different components so on the lower
level we still have some seek out and
some Python code to control the LEDs are
not the LEDs the infrared transmitter
and the air Phi D and the service from
the track switches so we set up some
low-level coat and we call that true the
scholar layer and that that works but
Michael equal is already working on sort
of abstracting that away so that we only
need to use acha code and don't have to
rely on C and Python code anymore so
that would be even easier for us to
start adding extra stuff and improving
it even further this is a bit how it
looks like but I mean it's just static
so why not just do a demo because mean
it's friday the 13th what could go wrong
if we are lucky a train starts moving we
can make the first we'll go around and
if you look here the LEDs show the train
speed so it's now moving at speed 3
backwards it's automatically updating if
you send new speed commands to the
ferris wheel then the photon will also
get an update with the new speed and
display it on the LEDs at the front the
Lord's straight
it shows the speed of both trains so
only one train is now moving at speed
three the other one is waiting so I will
enable that one and it's moving at speed
five you can see it is catching up on
the other one
you see that the camera at the top the
camera here it's the overview camera the
camera on the train we had to disable it
because it uses quite a lot of bandwidth
and with all the Wi-Fi here that's
really tricky so to make our demo go a
bit smoother we decided to just disable
that and we also have some train sounds
because I mean you need some train
sounds so that I can use to scare my
wife when she's at home and i'm at work
of course during my lunch break playing
with the trains you see some of the lego
minifigures at the top that's more or
less to control the track switches but
we didn't bring them because it's a bit
hard to set them up with a lots of wires
and stuff like that so it's it takes a
lot of time to set up and break down and
we have to break down quickly after this
session so we decided not to bring them
we can view the different cameras we can
do some stuff with the LEDs like
increase the brightness and then they
get quite bright and annoying so I put
it down a bit we can also do like
standard animation all the LEDs are
individually controllable so you can
more or less do anything with it we can
change it back so that it catches up
with the speed speed is only shown again
when we adjust the speed so when I again
and now you can see all the speeds are
moving and what we have is like an
autopilot so we have like two kinds of
autopilot a one all right this one for
instance we can send a set of commands
to the lego train like speed commands
you see that right oh it's not to try in
the ferris wheel I'm sorry so we send a
couple of speed commands a sound command
we can do a lot longer list so this is
one of the things we can do and another
thing we can do is for instance this one
now when the blue train which has the FI
dear reader reaches the station the
white train will start moving at speed
tree forward when the Blue Train is
reaching the crossing the white rain
will move backward with the speed of
tree so then we can control the
different components and we could even
do that with the blue train that is if
the Blue Train reaches something that he
should go the other direction or
whatever we also thought about adding
things like collision detection and
stuff like that but that's for more or
less the next phase because that's quite
hard to implement and we didn't manage
to do that yet which we got an intern
who's going to work on it for the next
half a year so that saves me a bit of
time hopefully so that more or less a
quick overview of the application that
we built to control it for now I make
sure they stopped because else it's a
lot of noise
yes it is an example of the autopilot
with some extra commands I mean we can
tell you I like we really liked remote
actors and we can tell you are there
cool the cool of course mean our opinion
but we try to get some figures to back
our coolness more or less so it started
to compare us some facts for instance
with Scala you can create like fat jars
and five jars were really easy because
you can just put it on a machine where
Java is running and then just run it
with Java you don't need any application
server or whatever you can just start it
and it packs all the libraries that you
need and what we see here is that if we
make a package with only the local actor
it's like eight megabytes if we add a
remote actor it's like 11 megabytes or
12 cannot see it exactly but if we
remove the remote actor and we add acha
HTTP which is used to enable rest so you
can do a bit of Jason rest in your
application you see the amount of
libraries that you need is huge to do
Jason to do XML you need lots of
libraries and if you just use remote
actors you will need a lot less library
so from a library perspective it's
already a lot more friendly and it made
a bit of a comparison with spring boot
you can see that that compares a bit too
remote actors are at the base still
fairly new so maybe they can optimize it
a bit and and exclude some dependencies
and make that size go down a bit as well
we really think that remote actors is a
nice and clean solution without having
to add lots of extra dependencies next
to that I mean Gatling is really popular
so i won't give lots of information
about it but Gatling is a performance
test two if you want to know more about
it you can find a lot on the internet
but I will just show you what what we
would get with it so this is an example
of how you do performance testing with
Gatling it's written in Scala as quite a
nice way of testing before i did that's
with jmeter and tools like that they're
quite hard to learn a bit of a steep
learning curve and with this one you can
just read a couple of pay
ages and then you know more or less
every feature that is available with
Gatling so it's really a convenient tool
and what you see here is I simply define
a scenario and I want it to be repeated
a hundred times so everything that's
after the 100 times gets repeated a
hundred times and what we do is we do a
ping request on localhost then we check
if the status is 200 so basically if I
get a good message back and then I I did
like a couple of runs so I did a set of
runs where I did a pause after each
request 100 millisecond boss and I also
did some runs where it didn't do a pause
and just sent a lot of requests at it
and in the end we see that i started the
user so thousand users get built up in
10 seconds so it's a bit shared over 10
seconds to not over flood it from the
beginning of course if you have like a
real system bigger system maybe you want
to do more than 10 seconds with to do a
quick test this is really helpful and we
did this with a couple of situations and
we did three test runs for every
situation that we tested and we took the
average of debt and we will show the
details of what came out of that in a
second but first to show you what we
actually tested so the stuff on the left
side so from JVM one to the left it's
it's the same for both scenarios we
tested so we had HTTP application
running in one JVM and on the right we
had in scenario one we have another HTTP
so we do a rest call with Jason over the
to another JVM on the same machine and
at the lower one we do just a remote
actor call to another JVM on the same
machine so this is basically to compare
HTTP call with a remote actor call and
now for the numbers I mean of course you
shouldn't trust numbers you didn't
falsify yourself but I did my best to
make sure that the numbers weren't
falsified too much so what do we see
here I mean we see that remote actors
them the mean response time in
milliseconds it'sit's way quicker
remote actors are the ones in orange so
I mean that's a clear win for remote
actors isn't it and the same moral as
goes for the max response time and to
show you that I actually didn't mess too
much with my results you can see the
large green bar that's basically a
measurement error I got some high
results and I thought okay maybe I can
filter them out but then I'm it felt a
bit like cheating so I was like okay you
can already see the the line going up
and this is just a measurement error so
I didn't filter annual results just took
two three runs and took averages of it
and display them in this graph so again
clear win for remote actors in 99
percentile which it's commonly used at
big enterprises they use the 99
percentile to measure performance and it
has to be of a certain level before they
go to production and again a clear win
so it's easy isn't it but we were like
okay so now we've done a bit of a car
comparisons with HTTP and with remote
actors but probably lots of you don't
use Colin okay yet and so I thought okay
let's compare it with spring boot
because that's quite popular and maybe a
bit closer to what lots of you were
doing at the moment although I say I
didn't try to cheat too much and to do
not optimized too much I mean you can
optimize performance tests by changing
values like timeouts and and stuff like
that I tried not to do that but when I
used fring I almost immediately got a
crash we were using the rest template to
do a rest call to the other JVM but with
like 200 users that already broke down
and yeah i mean with acha i already had
like a thousand users that was working
fine so I did a bit of investigation and
I was like why isn't it working so it
changed a bit of parameters did a bit of
googling and then I found a block of a
guy who's that like yeah but the default
connection factory that the rest
template of spring is using is
practically not production ready you
should use something else and apparently
there is a apache HTTP client which
offers are nice
action factory which is working really
good so I added that one and I got way
better performance so of course I mean
these are just some numbers of in my
case but if you do performance tuning it
will completely differ this gives a bit
of an indication on a comparison and
what we see here I mean I I wasn't
really happy about it I mean remote
actors lose a bit so I was like oh man
how do i change the results to still get
a positive image mean else i ah I cannot
really do the presentation i mean i have
to say remote actor suckin and just walk
away but i know in a bit further i mean
these are the mean response times in
milliseconds so here remote actors
clearly loose but if we look at the max
response times remote actors win again
which we can see to the right i mean at
the left they still lose a bit but on
higher load they start winning and a lot
i mean the max response times of spring
are a lot higher so if you don't want
too many really high response times then
again a remote actors seem to be like a
good solution and we see that again if
you look at the 99 percentile so
although this is just some figures i
think it gives a good indication that
remote actors they can catch up quite
well with rest maybe in some cases
they're a bit faster some cases a bit
less fast but we think there are quite a
good solution for these kinds of things
I'm challenges ya know we didn't had any
challenges it was really easy so now
actually we had a few couple of weeks
ago I try to add as the servos with the
adapter and you need a servo board to
connect multiple servers to a raspberry
pi because the Raspberry Pi cannot do
that directly so I told like okay what
do we do to fix that I added some wires
and I did it before we have two of these
set up so that was the second one and I
connected everything went to do
something else because takes a little
while raspberries really quickly so
starting up an application will take a
minute or
two minutes so I was doing something
else and then I thought I'd try out if
it was working didn't work so I was like
okay let's see if the wires are properly
connected maybe they got a bit loose and
then I felt like oh it's actually quite
warm so I touched it adds really warm
and that was the end of my raspberry
apparently I connected the adapter to
the wrong port so luckily they're cheap
another thing we had was with the new
the Raspberry Pi a plus model so did the
small or less powerful models we use
them in the trains because there are a
lot smaller and consume a lot less power
but also built a bit cheaper def a bit
cheap USB connectors so what happens is
if you have a bit take USB device like a
Wi-Fi dongle which is apparently a bit
thicker than using like a mouse or a
keyboard then the pins and start of
making sure that your USB connector is
fixed the pins bent back when you enter
the USB device and that practically is
the end of your Raspberry again so that
cost me two other raspberries so I mean
I playing with hardware it's it's a lot
harder than playing with software I mean
if something doesn't work you fix it and
you can play again but if the hardware
is broken you need to order new stuff
and so if you start doing this it's good
to order some extras some reserves so
you can just keep on playing so it's not
really plug-and-play I mean even the
documentation on the internet sometimes
it's not much especially depending on
what you're doing I mean we found out
for raspberry pi there is a big
community if you have any issues most of
the time you can find the answer on the
Internet we also played with Oh droids
which are comparable boards to the
Raspberry Pi but I didn't really get
them up and running that heat issues at
least I think that was the issue but
they would break down after half an hour
and had two of them they all broke down
I think it was due to the fact that they
didn't had any heat sink so I could have
added those heat sinks but in the end I
decided to just buy new raspberry PI's
because they had quad cores also by that
time before that although I've were the
only ones with quad-core many boards
more or less that were still quite cheap
um and you still have lots of options I
mean we're all java program so we know
for every thing we choose we have like
30 options 30 libraries to pick from
it's it's the same when you do things
like that i mean when i started with the
boards i was like okay dr. is really
cool i want to have dr. on a train
running my stuff and that would be cool
but then yeah our clinics office act of
offered excellent support for dr. it's
really easy to set it up on a raspberry
pi but our clinics doesn't really offer
any support for things like the camera
or it's more or less the other way
around the camera is built specifically
for raspbian and some other things that
we use are specifically built for
raspbian so in the end I was like okay
forget about darker for now I just use
raspbian and of course I mean I read
people doing dr. run on that all the
raspbian version but then you had to do
cross compiling and everything and it
was like okay that's too much effort for
now we just run it without doctor and
maybe in the to that over ssion we will
add docker with a new raspbian version
where it's easily supported another
issue is i mean if you have kids at
school you can play around with the lego
together i mean have a good excuse to do
a bit of lego playing but if they are
too little it's a bit of a challenge
because they tend to break up stuff that
doesn't help a lot and i think the
biggest challenge was time I mean at the
beginning we talking how hard can it be
we add a few infrared transmitters and
some other stuff and aa couple of
evenings and should be up and running
but in the end it costs a little bit
more time than that but we had some help
from from our lack of friends so what
about the future this actually was a
Lego set you can buy I don't have any
stock options but I think it's quite
cool sad so what we wanted to do is use
the reactive pi library my colleague in
that just help me with the presentation
built so with that we can easily just
use scholar and a calm remote actors to
send events to the Raspberry Pi ports
and we don't need any C Python code
anymore so that's a lot easier and as I
mentioned already we want to do
something like collision detection so
that we can make like autonomous driving
Lego trains I mean Google those cars but
I mean everybody can do cars we will do
Lego trains that's the real world
lessons learned so yeah what what did we
learn during the project I mean you can
run like enterprise software the things
we're running on big service you can
easily run them on raspberries even on
on the small ones and of course if you
do a lot next to it I mean we also have
the camera attached and some other stuff
then you start to reach the limits of
the memory it has 256 megabytes of
memory and that's a bit tight so we just
we can manage but just barely but if you
use the quad course they have a
gigabytes of RAM and lots of processing
capacity that's quite easy you can
practically run anything on it at rest
first remote actos I think you already
saw from our presentation that we really
like this it's it's really nice more
natural programming approach than using
JSON XML or something like that and also
the particle photon so that the small
things we use to control the LEDs we
think they are really cool but
unfortunately I didn't see somebody run
Java on it but still they are quite cool
and of course we are playing with Lego
it's it's awesome what do you want more
but to show you that there is even more
I will show you a little video no not
that one in this one
so maybe some of you can already guess
what's going to happen else you have to
wait for like 30 seconds to see what is
going to happen so here you can see I
can control the trains with my mobile
phone I can just move speed forward stop
them yeah there was one piece I fail to
automate fortunately but my wife luckily
was really helpful assisting me and
sorry I have to apologize i already
drunk all my good belgian beer so
there's a dutch beer on the train sorry
but i mean this is really helpful mean
you don't have to get up from your chair
if you're watching a movie what else do
you want so we reach the questions for
now and instead of just displaying this
slide I will display a movie and during
the movie you can just have just ask any
questions that you have so this is a
movie from my home it also shows you the
switches and some other stuff that we
built into it so any questions just
shout loud because i only see like
lights and the first few rows I see
someone waving yeah okay so the question
is why didn't you spray instead of oka
HTTP yeah we looked at it but we thought
our arc HTTP how difficult can it be we
just use that but of course I mean you
could have used spray as well I don't
know if I've speed differs much I didn't
do any performance that's between those
two yeah difference a lot ok so for
everybody that is going to work with
aqua and wants to have rest endpoints
apparently still spray is the way to go
so I think that's a good addition yeah
yeah
okay so if I understand you correctly
it's best to you spray or wait for the
new acha HTTP version or if you're
feeling really lucky go to 2.0 milestone
one and then break all your stuff okay
okay any other questions please just
shout or wave really of course I don't
know yeah like we just one option and go
went for this that's it we there's no
other excuse to do this yeah okay other
questions maybe yes you wanted front
yeah so the question is how do we
continue with this can we make any
business value more or less out of it
can we sell it but we already had some
people asking like I do you sell this
and I mean I read a Picasso a salt for
like 180 million so we can probably sell
you a train and the first wheel for it
but now it's not our business more or
less we build software so this was
partly just to investigate do a bit of
research play around a bit I get more
knowledgeable about acha and stuff like
that so we don't have direct intention
of selling this but we actually got from
quite a large company in the Netherlands
the request of can we let the show this
to their developers and maybe let them
participate in it a bit so they get more
knowledgeable about IOT and working with
hardware so in that respect we might end
up making money off it do some
consultancy I don't know but it wasn't
our intention I mean we just wanted to
play around a bit have something visual
which we could show to others so that's
more or less it and of course if you
think about building IT solutions and
writing see I don't know if there are
many guys doing see right now can you
raise a hand if you do any see
development and see if you a few so
there are just a few of us that do this
and if you think about it it's a lot
easier to write Java but the problem
right now is there is one tool that this
does it kind of stuff there's a pie for
Jay there's a free library but it has a
GPL license and if you're doing any
commercial development that's a bad
thing to have because there's no way
companies are going to share their code
that they use for their client together
with the library like par for Jay so
instead we went ahead and built a
library that does the same thing only to
akka and Scala but has a patchy to
license and it's basically okay also the
idea behind this get this libraries out
so people start doing at and see from
there what happens I saw another hand
yeah
yes so the question is do you plan to
use the camera of collision detection I
did a bit of Investigation and
apparently you can do things with
cameras which also have like ultrasonic
sensors so there are a few solutions so
we still have to investigate and I hope
my intern who could hit for us I did a
bit of research and it's a really broad
filled with lots of scientific papers
about it it's it's quite interesting but
I think it requires quite some time to
implement it carefully because if you
think about it it's quite easy I mean
you just detect what's in front of you
and then you're okay but what if you
have a track switching two trains go
like this I mean in front of the trains
nothing is happening until they crash
together so you need like sensors at the
sides or something like that so it's
then it starts getting complicated quite
quickly so I don't know yet what we will
do its I think a matter of
experimentation and more getting more
knowledge about it but if you have a
good solution of course you can help run
other questions hey yeah okay so the
question is how much time did you spend
I don't know and if I knew I probably
wouldn't say but then my wife would be
really angry with me now it started in
lots of evenings weekends and later on
when it was like yeah we got it more or
less up and running we use it at talks
like this then my manager decided okay
we will give you some time for it so
that you can also do it during the day
so I'm so lucky that my employer paid me
to play with Lego so that was really
cool but I've really no idea it's it's
it's a lot i think couple of work weeks
easily because we didn't only make this
one we have like two or three of these
sets so it's it's quite a lot of work to
get it going and in fact i mean you
could see like the tracks which is there
they have a what's a paper clip yeah
label another nice like paper clip yeah
out and that's the most expensive part
of our train actually it took three
people 100 euros an hour and i were to
complete that so 300 euros for a single
paper clip I mean yeah you could get a
whole Palace full I
for the amount of money so things like
that you think oh it's just bending a
paper clip but if it just too short or a
bit too long then the switch doesn't
move properly anymore so it's everything
is a bit tight fit lots of customization
trying around so it cost you quite a lot
of time but actually I mean first days
setting up the first set to quite a lot
of time setting up the second set it
went really quickly because we already
had the programs and everything we knew
which cables to connect to which ports
and everything said second time it goes
quicker so if you have to do batch
production of it we could probably
increase the speed even more so if
you're interested in buying hundred sets
of it and in the other hardest part is
actually trying to find find out how
drivers work in linux linux has this
kernel space and user space and lots of
magic numbers and stuff like that it's
quite hard to get right and i don't know
if any of you guys have ever read the
colonel specifications from linen store
vaults and other guys those are quite
hard to read that's a lot of text to get
through before you can even think about
controlling switch so yeah any other
questions I don't see any hands so then
thank you for your attention if you have
any questions remaining feel free to
contact us afterwards to Twitter or come
here just let us know and thank you
again for showing up</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>