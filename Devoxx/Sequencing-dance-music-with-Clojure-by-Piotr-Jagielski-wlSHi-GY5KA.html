<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Sequencing dance music with Clojure by Piotr Jagielski | Coder Coacher - Coaching Coders</title><meta content="Sequencing dance music with Clojure by Piotr Jagielski - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Devoxx/">Devoxx</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Sequencing dance music with Clojure by Piotr Jagielski</b></h2><h5 class="post__date">2018-03-12</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/wlSHi-GY5KA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">okay so we can start now sorry for the
technical difficulties so my name is
Portuguese key I work at company called
talk from Warsaw we are software house
and the title of my talk is sequencing
dance music with closure so this is a
quick talk but I have some plan for it
so firstly I will is this vegetable in
the back maybe I can enlarge I will give
a really quick introduction into closure
language then I will introduce the
overtone library some with some example
of playing music and at the end I'll
I've planned to do some short
performance maybe it will work so yeah
regarding closure I think you may know
it as for it's really weird syntax
because it's it's a lisp but yeah if for
me also the first the first impression
was not that pleasant but when I dig
into the language it occurred to me that
it has some really nice ideas underneath
and the most the most important I think
is so-called interactive development so
how it work as many modern languages
today closure has a built in ripples so
you can start a console within your
project and then just type a code which
gets evaluated but what closure allows
you also to do is to connect to a
running cripple from any other process
so it is common for for major editors to
have plug-ins for closure and for this
development so also there is also omit
that you can only use Emacs to develop
closure
it's no longer true because now here I'm
using
which is more convenient for big
beginners so here I have this window
connected to a running process in the
terminal so I can also evaluate cold
here but still it's not a rocket science
so what makes it really interesting it
is that I can also send a call to a
running cripple straight from rice
source file and because closure is a
lisp
it is really trivial because every
expression is a list so we can really
easy send it over the wire to some other
process so here I have a function
definition just a hello world if if I
execute this code is just the function
gets registered and now you can now call
called the function and see instantly
the results straight here in my in my
editor and inter Apple also and of
course if I just modify the function and
reevaluate the new definition it will it
will also the new the new or invocation
will pick the latest version so
basically this is this is how the
development workflow in closure looks
like so you just write a small function
then invoke interact with the code if
you are satisfied you can you can then
compose this function with some some
bigger pieces of code but also there is
some some test case framework so if you
have sample invocation you can then then
transform it into test cases for for
some regression or edge cases but this
is rather the the test last approach so
you just in traditional languages you
you should you
must write test case just to just
execute your code here you just
constantly execute execute your code so
it's the tests are rather for some
regression and for a factor Incans and
so so this is not a must-have for you
okay so getting back to the to the nine
topic which is which is an library
called Overtown it's it's a sound
synthesis library created by some Erin
and Jeff Ross and so the the main
concept you know in overtone is an
instrument so there is some convenient
helper functions to do I'm not going
into details of this code but what I
want you to get from this is that you
can you have some some small small
components from the library that lets
you design a sound like a synthesizer
and also that you have this def inst
macro so like you define a function in
total you can define an instrument it's
the same nothing really different from
from normal code and also if you call if
you call this created instrument with
some argument it's just you can call it
just like a normal function but it makes
some side effect of playing a sound also
if you just specify another argument
that the sound to should the sound would
be different and yeah what is really
nice with this interactive development
if I just change this this instrument
somehow then the the later invocation
would sound different so so basically
you just do the same as a normal closed
record so you just if you try to design
an instrument you can just experiment
and
without leaving her editor you can you
can work with this but yeah in my
opinion this is really cool library to
design a sound but not as good with
farther so like playing melodies it's
there is some concept of this but it's
really not that simple so what I'm using
is it's another library it's called
Leipzig created by Chris Ford and what
is the main idea of Leipzig is also
another closure idea is that this is
that you model the world with just plain
data straight structures so you have
like lists Maps enclosure and you just
represent something with this with this
plain data structure so here in Leipzig
the analogy is is just a sequence of
notes and each note has a time duration
pitch and also the instrument that
should play this note and chloral really
has good support for data structure
they're immutable by default there are
some persistent so if you create want to
modify for example a map you could just
create another map but it shares some
some structure with the previously
previously created map and this is these
lines here are just telling that what
this instrument means so but it's not
important here the important is that we
are just I'm just calling the def
previously defined function from
Overtown here so equivalent of playing a
single note in leipzig so this is
basically the same but I also can play
these free notes from this melody
yeah but it's still a bit verbose just
to type all the notes with line by once
line by line so there are some further
abstractions in this leipzig library one
of these are scales so there is a
special scale namespace that lets you
compose compose various functions to
create complex scales and then if you
have as if you have a scale you can use
this phrase function with with that just
takes a sequence of durations and
indexes of given scales and then the
Zips these two collections to create
some mezzo melody so for example I have
here five lines of code using this face
function and it produces a melody with
15 notes and one more thing
we need here is because these durations
are represented in bits or than off
length so we have to specify what the
bit or the note means so we have this
tempo here so we are saying that this is
110 beats per minute and now we can play
this this whole melody here
yeah and getting this concept further I
create my own library that is helps you
create drum patterns for them for the
melodies so the idea is that I have
separate directories we've heard samples
I can load the samples and then then
play the drums bind by name so I have
some kick drum snare drum hi-hat and
also just like the normal melody I can
represent drum pattern so this is
something really simple but then you're
using these further helper functions I
can create something more
something more something more
complicated and of course I can then mix
the the drum the dress with the
previously defined melody with this wave
function so the whole song sounds like
this yeah sorry for not picking some
Swiss but French band but I didn't know
any of this
so next because we are running out of
time maybe I will show you something
because the this example this example
words was rather static because when I
play the melody I cannot interact with
it so I recently discovered this
technology called
open sound control and basically it
allows you to send event between between
various devices through a Wi-Fi so I
have I have a sample application on my
mobile phone with some I don't know if
it's visible but there are some knobs
here or end buttons and it is using this
open sound control protocol so when I
start the server here just take the IP
of my machine
and if then you just register a handler
so there's just a simple function that
takes the event and does something with
it
so I think it's not working
No so but basically this is this lets me
modify the playing sound in in runtime
so I can so I can in this example I was
just modifying the frequency so maybe I
will show you without this this
interface but when I have this melody
playing I can now modify the cutoff so
the filter cutoff of the sound like this
so without like this application there
was like 10 euros so what buying any any
girl you can just imitate the like DJ
equipment but it was also the locks are
all done not so not so big so I think
it's for a start it's it's really good
to learn something ok so maybe it's time
for for a performance now so I can
okay so that was it so far for the day
at the end I have just one thought that
yeah we are like developers but instead
of like writing all the time apps and
web sites we can just because we have so
much powers that make something really
different from the the other so you can
get get inspired by some by some like
Internet of Things the hardware thing so
I will try to encourage you to to
explore some some different concepts and
and techniques to to improve your
developer experience so so this is a
message for me so thank you very much
for this
okay thank you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>