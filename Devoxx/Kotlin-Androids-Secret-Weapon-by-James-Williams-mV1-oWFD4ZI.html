<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Kotlin, Androids Secret Weapon by James Williams | Coder Coacher - Coaching Coders</title><meta content="Kotlin, Androids Secret Weapon by James Williams - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Devoxx/">Devoxx</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Kotlin, Androids Secret Weapon by James Williams</b></h2><h5 class="post__date">2017-04-19</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/mV1-oWFD4ZI" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">very cool glasses on side look smart but
people on the screen can tell um so yeah
this Android secret weapon this tuck
used to be continent androids other
white meat
but we've had some problems with
projects at Udacity was having length
wrapping bacon and we're expanding into
places like Saudi Arabia Egypt
so having pork in the title of the talk
is probably a bad idea
so I am a Content developer and
curriculum lead at Udacity what that
means is basically I get to make cool
courses with Googlers and other SMEs and
Android world and provide them to
students because our most of our Android
courses are all available free on the
internet and you can go to that link and
see our Android developer nanodegree I
promise this is the last time that I'm
going to like do the Udacity spiel well
not really but it's going to come at the
end the next time so what's up Chet
alright so as for our agenda we're going
to talk about complan and basic overview
of the language how content makes
Android way more awesome and I'll have a
bit of sample code throughout the doc so
a quick poll would use content I know at
least one person back there is use it -
okay cool and if you're on the stream
just frantically wave or something and
I'll sort of acknowledge you and say
that it's like 25% of people watching so
Colin's a sadly typed programming
language for the JVM like many other jvm
languages like groovy it's 100% Java
compatible and it also has very good
first class IDE support in IntelliJ
jetLink jetbrains and Android studio
it kind of also compiles to JavaScript
but you know that's weird
what else so so here's kind of the
canonical hello world both in Java and
in complan one thing that you'll notice
on the content side is you don't have to
have an exploding class to create a main
function the other thing is that the
main function and I call everything
functions and not functions and methods
and all that stuff it's functions
because that's what it was in math class
anyways so yeah so the function is
declared with the f-u-n keyword and then
the other key difference other than the
lack of semicolons on the count one side
is that the type declaration is after
the variable kind of like I believe
Scala does this as well and one of the
other cool things where is something
that I have open is that with Android
studio and IntelliJ IDEA you can convert
to common code straight in applications
so this is a project that have already
partially moved over to count one and
here's just a normal Java just a POJO
class and I can go over and convert it
by going to the convert to common thing
and and it converts everything so yeah
so it's JetBrains has made it really
easy to integrate and complan in your
code and let me go back and undo that
because I don't need that right now one
of the other things that complan
addresses that Java doesn't is no safety
a variable cannot be know by default and
the reason for this is that you can if
something cannot be know by default you
have to go through extra extra like
directives and hoops
to make something no that means that
probably you're going to find your your
errors with what's null safety or
whatever at compile time and not during
runtime and this is actually important
for something like Android where you
don't want your your app just randomly
crashing so here's a bit of declaring
variables and we can see on the top one
we have a verbal of a string type and we
assigned it to no that's not going to
compile that's going to flag it at the
compiler level the next type is with the
question mark after it that's basically
saying that this type is either going to
be string or no but it also needs to be
declared at the time that it's assigned
there's a extra special directive to let
you do it later we'll talk about that in
a second so the next couple lines of
code we're assigning name to John and
when we're trying to check the length of
it we have this question mark dot and if
you've used screw before this will look
very similar to you and it's basically
saying check to see if this object is no
and then if it's not no proceed with
whatever comes after it and you can
chain these multiple of these together
so if this were like I don't know what's
something that returns itself so if this
was like some type of builder or
something that you could chain variables
the chain function calls together you
could do question mark question mark
that infinity times and in this bottom
one after we've assigned it to no
calling that same property is going to
return null it's not going to no pointer
exception on you so touch on this a
little bit before with with the last
slide you can declare variables in two
ways with either a var or
thou VAR allah allows reassignment thou
prevented and the thing that you need to
understand is it's not exactly
immutability because if the underlying
type is able to be mutated so if you
have ArrayList or something you can only
assign that ArrayList once but you can
add stuff to it or remove things from it
so it's not exactly immutability per se
but it just prevents reassignment and
this last one down here for late
initialization is a directive that you
can put on your variables to say and
actually I screwed up this slide because
it's supposed to be late an it bar but
anyway assume that's there but anyway
late initialization says at the time
that this is assigned I don't know what
this is going to be so I promise that
before I use it I'm going to properly
initialize it and there are other ways
to get around this that I'm not going to
talk about but check the documentation
on common langford that stuff so let's
go to which app go to this one it's
actually a night I want to go to this
guy yeah all right so this is a Android
app that I have running that I have
created and one thing that you'll notice
with this class it's using MVP is that
you have actual like parameter variables
in the class decorate declaration and
for count len basically and stop
clicking okay for countless basically a
way to define your default constructor
and just like Java you can have multiple
constructors but this will be like the
default one
for this recording interactor imple
after this : is the list of classes and
or interfaces that you want to extend
from so for this one it's extending from
recording interactor that's an interface
but i have another example right here
okay this one is extending from main
presenter which is an interface and then
broadcast receiver which is a class so
that makes it kind of very simple for
you to be able to extend and not have to
think okay do I use extends they use
implements or have errors when you're
changing classes from one to the other
another thing to note is I go back to my
slides okay and here's kind of a smaller
example where I have a class animal and
the default constructor is that it
specifies a species now when I have this
valve here this actually creates a class
variable that is not rewritable of a
string and I should have put string on
these I bet anyways
down here is a secondary constructor
where I can set the genus and the
species and it has to call through to
our default class constructor any
questions so far
cool
right and we touch on this a bit before
if inheritance where it doesn't matter
if it's a class or a or a interface they
just come after the : so in this example
I have a class called 2d point in a
class 3d point and one thing that you'll
notice with the 2d point is I have a
keyword called open here and basically
with open P in complan classes are by
default final or sealed or whatever you
want to call it where they can't be
extended so you have to practice lead
Eclair this class can be extended to be
able to extend it and extension
functions are a way that you can inst
extend a class that's closed so string
for instance is a final class in Java
and all its variants so this is a way
that I can add a new function to string
called that first that returns the first
character and collections they're a
bunch of helper functions to create
collections to create ArrayList hashmaps
maps all that type of stuff and those
can also have extension functions as
well and you can also do a lot of
different kind of not really reactive
but Map Reduce type things like finding
the minimum the maximum average
filtering all that type of stuff so
lambdas comments got them I'm not going
to really talk about them so much
because that could be its own talk and I
kind of want to get to Java to the
Android stuff but here's a quick example
at the bottom where you can extend int
to have a function called x and do
something that's very readable two times
eight and have it return an integer all
right so for
how count ylim makes android awesome to
add Kotlin to your project you'll need
to add a couple of things to your build
scripts this is the stuff that you need
to add to the outer build script and
this is the stuff that needs to be added
to the inner build script this line that
I commented right here is not exactly
required I generally don't separate my
content in my Java because sometimes I
decide certain things are better in
comma and certain things are better in
Java and I don't want to have 50 million
files in 50 million directories so you
can do kind of as you go because it can
cross compile very well and you don't
have to worry about things being in the
wrong namespace and all that all right
so unko is a DSL for Compline
have any of you guys used groovy here
okay 103 okay cool
so in groovy they have domain-specific
languages to do layouts and in uncle you
can do that for Android UI s so let me
go to an example alright and it's here
all right and I'm going to bring up so
this is one of the first projects from
our Android basics program and it's just
a simple single view with some text
views and an image so here's kind of how
it's laid out in Hongo each view type
uses pretty much the name of the view so
this is a vertical layout
it has layout parameters of match parent
for the height and width has an image
view this is the resource and so on and
so forth you can also set margins and
deal with relative layout and stuff like
that I'm not saying that you should do
all your you eyes like this
but what I've found with uncle is it's
really easy to prototype things so I
might have kind of just rough out
something and then when I want to refine
it I might go to the actual XML yeah so
that question I just coughed okay my bad
and so yeah so if we look at the layout
it's you know just kind of your your
normal layout but this is the same stuff
the images in text views and stuff like
that so just gives you options on ways
that you can kind of interact with your
your things one of the ways that and
here's a smaller example of just a
button and a text and the thing that you
here see here at the bottom what's on
click and the toast is uncle has
extensions to allow you to do on click
listeners and toast messages and things
like that so this is actually the part
that I've used I'll go a lot for is for
injecting a quick toast or some of the
stuff that get that already some of this
stuff right here with being able to do
intent in alerts and async tasks and
things like that so yeah so it has a
couple of intent handlers and these are
the basic ones the ones that I've used
the most out of this list are browse and
share and these can just go into your
regular UI so here's another example
that of where that same text field that
we have from before when it on clicks it
launches the intent to go to whatever
your browser services and you can also
pass intent flags and things like that
and there's also a shortened way to call
a specific individual intent and yep and
I'm going to show you some more code
just the right one yeah
all right um so here's kind of another
layout that I've done with unko and this
is for a I'll show you the news app it
is oops okay
here and you have a minute I might not
have inner half oops okay that's not
coming up but I will show you what it
looks like right here reason why I like
this one is a heavy preset to Angela
Merkel and she was here for a press
conference with Trump that the President
of the United States for people on the
screen and there was a interaction with
nowhere it was awesome look of
incredulity of like what is this guy
saying so oh but anyway that that's how
the look the app looks and let me go
back to my code right here it is alright
so yeah so for this the original app
used a couple of loaders and I replaced
it with uncle's async task so I just
have a lambda closure whatever you want
to call it peace of runnable code where
I have these things that I want to run
in the background and that is down here
where I just have load and background of
loading JSON from this URL that's built
from The Guardian API it gets gets the
text and return to JSON object
and this is a lot shorter than the
complementary Java would be because I
don't have to worry about using
stringbuilder and all that stuff I can
just get me the text of the thing and
that is wrapped in our inking tests up
here and then I have a recyclerview
initialization that we'll get to in a
second okay and here is a kind of
simpler example of that same thing of
where you have a function or just the
code that you want to run in that
closure getting the text from a URL and
then on the UI thread returning a toast
result so LASEK dabbler adapter one of
the suckiest things of writing android
is writing recycler adaptors and view
holders and all that stuff so less
adapter is a library that uses the
android data binding capabilities and
it's available in java and in complan
that allows you to do recycler views
without having to review holders view
adapters or making any changes to your
model classes which you're probably
already writing anyway so that same map
that I just showed you you'll have to
add a couple of things to your
build.gradle file to enable this but
it's it's not that crazy the only things
that are required is a last adapter and
the data binding in this specific
project i'm also using honk oh so that's
why uncle is there but they work very
well together and this is the model
class that I have it's just your normal
just generic POJO not really doing that
much and then when I go to
my notes a-anyway up yeah this is the
one alright so there are a couple of
changes I need to make to my item
layouts I needed to wrap it in a layout
tag and add a variable for the name of
variable and the type for the class and
then the rest of this is just your
normal data binding stuff so item that
title I don't either
things like that yeah so one thing that
I needed to add for for this
specifically because I have an image is
I want it to have an easy and simple way
to give it an image URL and have it
loaded so to do that you have an
additional annotation binding adapter
where you're giving the string that
you're going to bind to in this case
it's image URL so I have that on my app
colon image URL namespace and in the
string I'm passing through the URL to
the thumbnail well the string
representation the URL so that when this
is invoked and it loads the image it
actually uses Picasso to grab the image
and load it into that specific view and
I just showed that stuff and oh yeah the
async request that's right I wanted to
show that this last adapter
actually hurry to them honey
did that okay so this is the actual last
adapter code for creating all that stuff
behind the scenes you pass in a
collection of objects and a data binding
object ID which in my case is a BR dot
item because that's something that's
auto-generated for you the name of the
model class that you're mapping it to
and the layout ID in this case it would
be news item and item layout or layout
io 100 and then into the list or
recycler view that you're going to use
you can also do an expanded model where
you're doing all of the stuff that you
would do with your with your view holder
like setting what happens when it gets
initially bound recycled long click or
clicked the way that you do that is you
would have to pass in the class name of
the object mining and this is something
else that's automatically generated for
you based off of the layout ID name and
then pass in your closure your lambdas
or your functions for all of these tasks
so in the actual app it looks like this
I have a list of items my bound object
for my UI the news item POJO that we saw
and then I want it to respond to clicks
so the way that I did that is actually
set a tag on the view so that when you
click it it pulls that tag and then
fires off to on code to do a browse URL
and one thing to note here items has two
exclamation points after it that has to
do with the fact that
it's it was declared as one of those
types that could be null or could have a
value so the two exclamation point says
I am definitely sure that I want to get
the actual object like don't know
dereference or anything just give me the
object I'm sure it'll be there so give
it to me and when it was all said and
done an app that was 500 lines in Kotlin
came out to about 270 lines and a mix of
the two and I saved a lot of that
writing code came from eliminating the
news adapter the view holder and all the
weird loader stuff which might be good
or bad to do but like loaders are a pain
in the butt and actually I did not
insert that into my slides but I will go
to actually I don't have an internet
that's right so one thing that count one
has is a set of Android extensions where
it kind of creates synthetic it's kind
of like butter knife as people reviews
about it knife where it binds names from
your Android XML to your actual activity
file and allows you to use those without
going find by ID but I apparently
dropped those slides so I apologize for
that
my final spiel before I open up for
questions is Udacity is hiring we have
positions for all types of things
especially in our content group where we
get to speak at conferences and talk to
cool Googlers and not so cool Googlers
sorry chat chat so cool Googler but he's
I like calling you out because you're
you're kind of like the human embodiment
sounds like grumpy cat so
video yeah so personally I've been able
to make lots of Android courses with
people from Google design people that
are working on Android wear ubiquitous
computing things like that so a really
awesome place to be so check it out
and with that I have probably too much
time okay I'm good
open up for questions anyone
okay uh thanks for coming</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>