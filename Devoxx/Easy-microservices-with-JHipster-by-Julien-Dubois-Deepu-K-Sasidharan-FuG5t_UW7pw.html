<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Easy microservices with JHipster by Julien Dubois, Deepu K Sasidharan | Coder Coacher - Coaching Coders</title><meta content="Easy microservices with JHipster by Julien Dubois, Deepu K Sasidharan - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Devoxx/">Devoxx</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Easy microservices with JHipster by Julien Dubois, Deepu K Sasidharan</b></h2><h5 class="post__date">2017-11-08</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/FuG5t_UW7pw" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hi everyone thanks a lot from for being
air and welcome to this session is in
micro services with Jeffster let's first
introduce ourselves so I'm jr. you can
follow me on twitter at Julian wha I'm
the Jeep's Turk theatre and still lead
developer after four years and seen not
fed up with it and I'm the chief
technology officer at Epping so I've got
some advertisement yeah and my
co-speaker so my name is the deep ok
Chadron and the co-lead of J hipster I
work for a company called JBL apps we do
a lot of DevOps Enterprise DevOps
products we are based in Netherlands I
also live in Netherlands
oh nice being here this is a take a
second time a second time last year you
did the same on like number four Tigers
yeah I think in the same same room
that's nice okay yes we meet every year
for their books yeah and I'm also
currently writing a book on J hipster
it's available from packed I'll put up a
special they give some special discount
code for the book if somebody is
interested I will put it up after the
session so you can grab a copy if you
are interested it should be a good book
reviewing it yeah so what are we going
to do for the next three hours we will
see how to create microservices quickly
and efficiently of course with chipster
we will talk about architecture and
design but scalability failover best
practices and bad practices also it also
and about micro services in production
on the same real life we will quickly
see that which Jeepster you can do
simple micro services very quickly but
of course our idea is to work for a real
life application which are much more
complex than basic hello world that we
often see in conferences so are we going
to have something of fully much more
complex and complete that what we
usually see so we're going to do it with
Jeffster well first of all because we
love the hipster
but why would you like to use it or sir
so first of all today we are clearly the
most popular application generator in
java world we've got nearly nine eight
thousand and five hundred get up stars
which is very big for new Java project
we've got nearly four hundred
contributors so nearly 1 million
installations so it's with our to count
but a lot of people are using it clearly
we've got more than 200 companies which
are listed on our on our page we just
want to award the first one is Duke's
Choice Award from Oracle and the second
is Jack's Innovation Award at Jack's
London it's yeah yes so we just won both
of them this year which is quite unique
I think by the way we just met Stephan
Johnson with doing devoxx and he told us
he was using Jeff's on the daily basis
for the box so you just use the devoxx
website it looks like you use JH star
quite a lot
student Zhang is a chip size fully open
source we don't have an ultra
professional where we try to make you
pay some stuff it's totally open source
and community driven and that's very
important for us and hopefully for you
also it is based on the most popular
frameworks today so for the background
we're better on spring boot and from the
front town where bears on Angela and
soon react there will be a talk on
Thursday with much variable and if you
on react versus Angela so both are a
creator of course and with zip so you
will have to choice so we are not taking
sides with Jeff surrett will give you
the choice to use the best tool you want
and for micro services so we make evilly
use of the Netflix open source libraries
we will seize a lot of options and it's
more compact than that but to put it
simply I mean for a first slide we use
Netflix there was a PhD paper which
estimated that you can do 2600 options
with Jade star twenty six thousand yeah
sorry twenty six thousand options that
yes the hipster yes yes it's a paper
that will go pretty soon still secret
like that
as things that said more options today
than when it started because it did it
one year ago so we will move some
options but we also added quite a lot
more so it's quite big so we talked a
little bit for four minutes
but with Jeepster we've always been very
on down and focused on the code so as
Linnaeus says talk is cheap
show me the code let's cut a little bit
so the first thing we'll do simple macro
service I said simplest possible because
you've got no database which is not that
simple but it's one of the simple things
you can do with Jeffster so we will see
different ways to generate the cash ins
which Jeepster
I'm going to start with the first one we
will own pupils change the ways to
generate just to show you different ways
to to do it so I'm going to gypsy online
so it's still at start the episode of
tech it's also all free like everything
we do that's why we need to some Google
because it gave us $5,000 of credit to
all this for free so it's not really
free because people give us free credits
so you need to create an account you got
one of course and so this tool is
basically to help you generate your
application with a web page instead of
losing a common line which will we'll do
later and we get now because it's easier
like that so it's going to ask me what
kind of application you would like to
create need to do micro service I'm
going to call it micro service I'm going
to keep the default options for security
only we said it was going to be very
simple to know there is no
internationalization nothing complex the
first one I'm going to generate it and
get up so I just put a few buttons it's
generating this app I can go there so my
app is already generated air
I've got full documentation for
everything and I'm going to clean it
turn it like this
ready workspace des Voges
get close and I cannot really well my
app with Navin so jimster generates a
full application for us including Melvin
Weber
so methanol is already included in it so
I just need to run the mavin Weber and
everything is running we'll have a few
stack traces it is normal we quickly see
why we have this and my app is already
running so it wasn't port 81
80 81 so my app is air and I already got
my simple micro service running got a
simple web page we have some
documentation air to help us and if we
want to have a look at the API just take
air and we'll get some basic swagger
definition of our application it's
pretty small because we didn't take
anything
it's pretty small first moment that's
the first simple my quest ever saw as we
saw I didn't cut anything I just clicked
a little bit and I've got a full spring
boot micro-service with swagger with
some service discovery stuff and so on
working and I didn't do anything so
that's what I said the first one is
going to be very easy there's one more
thing we need to talk about when we
started you saw we had a an error
message
so the error messages on your pose of
course as I'm in development it's just
trying to start the application whatever
happens but it's not totally good
what is trying to which it's something
culture with JIP Sturbridge history so
how many Western eight I'm going to end
it with maven but also ways to do it
so the Gypsy registry is a it's three
times I mean three different things just
let's just have a look it is a spring
code config server so it's going to
configure my micro
services it's doing service discovery
using Rekha Switzer so service discovery
server it's also management servers
giving you lots of monitoring and
management screens on your application
so now I have started it
let's fill my app again and if I go so I
would not have in stock classes anymore
and if I go to the GPO registry I need
to log in because it's secure of course
and I'm going to have my app available
in the you a cow didn't start yet should
start pretty quickly
ah here it is so my app is already
registered into Eureka it is configured
using Springwood config so this is
printed config service running
configuration to the micro service well
a lots of options here you can also do a
kripp shirt and so on I'm not going to
go into the details for our first demo
and the such thing it does is at
monitoring and I administration screens
so I can go and see the metrics of my
application I can see we've got some
rest on points not a lot because it's
the beginning we can see it was a spring
boot configuration we can see the logs
of the application should click in fact
and oh sorry sorry went too quickly so
err which sees the logs of the
application so I don't need to go into
and know any specific tool to have look
at the logs of my application and if I
want to change log levels well that's
all so yeah logger screen I can just
click and I will be able to change the
logging level or if I don't know what
spring security security now I won't
spin security in informal it's going to
be in a format so I can challenge a log
level at one time and see the logs at
one time also last month say last but
not least I can see two swag your API we
just saw but here we've got swagger
right so it's much better to see it
with a graphical interface than doing
what I just did before in clicking air
and sing it like that in G's informant
so we just sort of the gypsy Willis to
the three things ring to traffic service
discovery and management server now
we're going to work out a bit on the app
because we saw it was a very very simple
app of course we want to do something
useful with it as it's the first sample
we're doing like everybody and ello
world so let me just make it a little
bit bigger there works so I'm going to
type gesture so it's a common line that
is installed with shape so I'm going to
use what we call a sub generator it's
something that is going to improve my
application so the first one we could
screen controller just going to add a
simple spring MVC controller and the
test so I'm going to call it ello I'm
going to say it's going to have an
action called ello to get and that's
good so just generate you the very
simple app for me if I come by it it's
going to well we compile my app and as
we can see above my app will restart
automatically very quickly and I can
come back here and have a look oh and
have a new one no just fail to start oh
sorry
using simple a zoo registry I did a
mistake
hey what conflict it happens I'm going
to open it in IntelliJ and change the
port didn't try ah oh yeah let's do it
like this sure
also I my application is automatically
configured I can just open it it into
intelligent energy recognizes my
application has a mavin project
I've got mavin working while budget
recognizes everything so I just need to
go
to my spring good configuration and say
that support is not a th one it's yeah
where is it
yeah it's 80 82 and just to show it
another way to run the app I tell also
will it's directly IntelliJ
individualizes my app as a spring with
application so it's just automatically
configured I just need to start it is
going to run this time we'll do it in
the pod conflict and if I come back to
my app air so the microservices
up again and this time if I go to the
API I can't see my microservice winning
I've got L world being air I can click
on it and try it out we said giving us a
low because that's what we what if I
want to because we we we went with a
little stop in the say in the show if I
go to I've looked at my micro service
the same version ello would say which
one in the world I just click on compile
and this time is going to restart
everything automatically so now when I
do try it out it has a low world so
everything that's automatically
let's not talk about security because I
lost some time and let's my let's move
on yes
sorry just one thing of course
everything is fully secured I chose a
JWT we'll talk about it later but
everything is fully secured so what did
we see so we created a very very simple
spring good micro service just a few
clicks we saw the gypsy registry which
I've Smith from ultima app configure it
and and scale it that's what we'll see
later when we saw we could improve it we
think a sub generator by just adding a
simple spring and VCS controller will of
course do something much more complex
afterwards so the first we quick demo
was about doing the simple macro service
now let's talk about micro services
architecture and see are we going to do
some more complex stuff in the real
world I'm going to so before we start
like probably some of you already know
this but for others let's take a quick
look at the popular Microsoft a tones
that are commonly used so there is a
pattern called aggregator pattern and
there is a variation of it which is
called proxy pattern then there is
change and there's a branch pattern
share data pattern in a synchronous
messaging pattern and some of it are
very self-explanatory
like the synchronous message pattern
which means everything is done using a
message queues and like you know Kafka
and stuff like that so we are not gonna
see in detail about the last four let us
take a look at the first two that's
because that these are the patterns that
we use in injector so in terms of
aggregator and proxy pattern so these
are the most commonly used patterns and
it's made very famous by Netflix because
they use aggregated proxy pattern
themselves it's also known as the
iceberg pattern because when you go to
the API you don't see much you just see
one service but underneath there are
there could be thousands of services
which does the stuff but you only see
one gateway service so typical
characteristics are that you have a
gateway or API gateway and which takes
take care
routing your request to various
underlying services doing aggregations
of you know what is returned by the
underlying services and stuff like that
so Gateway can also Gateway can act
either as an aggregator or as a proxy or
as both in in je hipster we normally use
the Gateway as a proxy more off we don't
do much aggregation because aggregations
normally are domain and business
specific is very difficult to generate
that so it's up to you to if you want to
aggregate few services to do something
so otherwise we by default use it as use
it for proxy oh so that's it idea we
will have more of those slides
afterwards it's going to be more and
more complex but the basic idea with
chipster is that we have a gateway in
front of micro service architecture it
opens door to one or several micro
services what probably said well
otherwise you know it everything is
wired up using the Gypsy with history
that we use so you can replace it we
will so other options afterwards but
that's the basic idea and everything is
monitored with something we call the
chipster console which is basically so
elastic stack with some customize
dashboard that knows well what you want
to monitor so this is very simple to
generate that's what we will do for
several times today it it it is already
very powerful because we get well not a
lot of security you wait wait emitting
options and it can generate also
front-ends from your micro service
back-end chips is all about generating
stuff instead of generating everything
inside the same application what we do
with monoliths here we generate one part
of the application on one micro service
which enhance backhander you generate
the photon on the Gateway and you can
mix and match stuff depending on your
needs so in terms of the client side
actually the Gateway is kind of an
aggregator so it creates the client side
for yes yeah yes yes exactly you can
already do aggregation just on the front
end in that idea yo yo yo Angela your
react application
is it's a real application the
disaggregation and of course if you want
to do more complex stuff you can also do
aggregation with micro services and then
those would be done in in java but it's
let's say more advanced patterns and for
the beginning we are with the simple
ones so before we delve further into
this like there is always the wall
between micro services and monolith and
whether to do micro service or to
monolith and there are people on both
side we are not going to take any sites
so from our experience doing micro
services and developing the micro
service part of jape so it's been more
than a year now since we started yeah
almost two years like since you started
the micro service support and stuff so
some of the good reasons for choosing
micro services are like we have listed
them down like so if your application
scope is very large and not well defined
that means you you don't know what
you're going to end up with so you start
with an idea you know that it is going
to be huge it's going to grow and you're
sure that it's going to be you know
you're going to add keep on adding
features and stuff then it it might be
worth itself to start as a micro service
or another option is good reason is when
you have a huge team it's very difficult
to build monoliths with a huge team you
keep working on the same stuff then
micro services are good for you there
might be some duplication of work but
still your teams will move faster
another thing to consider is when your
average skill set of your team should be
good if you are choosing micro sizes
because micro services are not so simple
it's much more complex than doing
monolith so you should have a good team
composition to do that when time to
market is not critical because you might
think that it is very easy to build
micro service and go to production but
compared to monolith it takes more time
to get everything right set up your rain
fly and stuff like that so time to
market should be a factor as well you
should be ready to spend more on
infrastructure monitoring with monolith
you may not be spending that much
monitoring in France stuff like that but
with micro service since closed lot of
moving parts those are very important
and when your user base is huge and you
you know that you would want to
aggressively scale then micro service is
also a good fit in those kind of
situations like Netflix for example
some bad reasons for choosing
micro-services which we see that some
people do because many people choose
microservice because they thought it was
very cool they didn't know the
implications so you wanted to impress
your boss or someone so that you could
do microscopy process of course
everybody is doing micro service so you
have to do micro services and you you
thought that micro services may perform
better than monolith sometimes true
sometimes not so true so it depends on
your use case and other factors we
listed and you already have always have
to keep in mind you are not Netflix
Google or Facebook so most of the times
you might not need my tow services
monolith might be sufficient for you
scale so always have to you know
carefully choose between the two and of
course if you use case demands then
micro service very good for you but
choose wisely just just wanted to say
just one thing just as an example the
chipster online application that just
used so this is a moderate yes and so
I'm myself doing model it's yes if I can
because I could do that in like a couple
of days using jape sir
I could ask it for very cheap it goes
like so to the last by our moments
something like that so if you have a
simple need like I have here you are
alone well don't use my question the
same can be built as micro services well
I could of course you'll be paying more
for her better I could have cost me a
lot more money yeah some more days -
yeah more problems more issues sorry
okay so let's take a look at service
because discovery
so normally service discovery helps your
gateways to identify services and or
endpoints so you don't have to manually
keep track of your micro services so
they are discovered automatically
service discovery normally will also
have load balancers to regulate traffic
to your services so that when you are
when you have multiple micro services
serving the same stuff and when you make
a request it is load balanced properly
will have some demos of that later based
on location load
balancing can be done in two different
ways so there is a client-side discovery
pattern example is Netflix ribbon so in
this kind of pattern the the client is
responsible for discovery and load
balancing the server just keeps track of
your services it just acts as a registry
then there is a server-side discovery
pattern an example is Amazon's elastic
load balancer so where you have a
dedicated server which is responsible
for discovery of your micro services and
also for the load balancing so they go
in in both these scenarios they need a
service registry for you to discover the
services itself and with gesture we use
Netflix Eureka for service discovery so
it's kind of a server-side discovery
pattern and for load balancing we use
Netflix ribbon so it supports a lot of
cool options like fault tolerance
suppose multiple protocols a synchronous
it supports a synchronous model or
reactive which is the cool phrase
nowadays so it's supposed caching and
batching of requests and lot of other
cool features as well so this is by
default what we use for load balancing
ourselves in J then there is circu break
and so these are all very very common
concepts in micro services so these are
the stuff that we need to understand
before we delve into the terms you hear
all the time so circuit breaking in
gesture we use Netflix history and as we
said like we use a lot of Netflix
libraries and these are very good for
this job so main features of hystrix is
that so main features of a circuit
breaking system is that it should stop
cascading failures and it should support
fallback and stuff and hystrix is very
good at that so it definitely supports
stopping cascading failures it support
fallback and graceful degradation ''s
itself or it supports fail fast and
rapid recovery which is very important
when you are doing micro services
because you need to know that when stuff
is failing you need to know fast so that
you can recover
it has real-time monitoring it has even
a dashboard for that which is a cool it
can also monitor configuration changes
it supports concurrency it supports
caching records request caching it can
work with caching mechanisms to you know
cache your requests at one layer instead
of you know taxing your actual services
for that so they're a bit more complete
complex topics
it also supports automated batching and
record request class think that is like
if you have so many requests for the
same stuff it can be bashed and there is
also request collapsing feature with it
those are the cool keywords in we also
want to highlight that with gesture we
follow closely follow our toll factors
of web app and sass development you can
see so I'm not going to go into details
of what each of these are they are very
self-explanatory and one code code base
track didn't wash in control is we
always evangelize that we even do
automatic commits and stuff in do get
now with our reason version 11
twit logs as even streams we just saw
the logs in the registry so you can
imagine it works quite well we kind of
try to follow this as closely as
possible and as we starting doing that
before Springwood existed so it's
already something we were following and
spring would also follows twelve facto
very closely so we all always yes so I'm
going to go a little more in details
about what is included into Jeepster
because here we are like a toe ethical
view of what you could do with micro
services now let's go into the details
of what is done with gesture and then we
will of course do them off with the more
important let's start the fun part yes
such a gateway where people could edge
initiative is a gateway this is
basically
to the application it acts as a proxy so
it's going to do several things
well basically to to to our micro
service architecture so first thing is
that for text the micro services you can
do some weight limiting for example each
would request so when you scale your
micro services is going to know well
which server is I pushed our eyes down
and spin to would android balance the
request accordingly and it's also going
to surf the front and we talked about
Angela and react or ear to get R is also
responsible for serving the front end as
usually people have a look at this slide
which we have everywhere on our web site
people think by default to only have one
gateway well it's basically wrong most
of the time people have several gateways
on one project i'm working for because
it was my idea
we've got one for the client for the
clients their own users there's one for
the internal back office and there's one
for specific mobile app for so some
specific kind of users so it's quite
common to have several gateways for
let's say developer who have a better
developer experience i mean you you have
when you lose a mobile app you just have
the api that you need but also for
security for the back office have access
to invoices you don't want people in the
mobile app to have access to the
invoices from other people so maybe
doesn't have the same security rules or
maybe you're so it doesn't have the same
weight limiting abilities maybe you want
to have some clients who are more
important than others typically in the
two scales so challenge facing app is
far more important than the mobile app
so is that an issue we just yeah by app
and I can imagine that it's it's much
more easier to do stuff in separate
gateways so you don't have to do
everything in a single gate which
becomes much much more yeah which
becomes here it's also better for the
team of course yes because you can
semi-different microservices
you can separate teams much more easy
easily
so if you got huge teams it's it's of
course one of the biggest advantages of
microservices on another project I work
on we've got search developers so you
can imagine if we're all building a
moderate we would not it's like what one
developer can do in one month two
developers can do in two months it
doesn't scale basically so yes that's
one of the good solution to scale when
you go to big team and and yes I think
several get worse some time calls
back-end from the fronton pattern you do
a specific back-end for your front end
so it has been theoretically discussed
by I think it's Martin follow from suit
works my previous slide wasn't normal
gateway but sometimes get away get more
advanced than that and they go into the
API management world so a gateway like
we have in Jeffster can either be itself
and a pea management solution or work
with another API management solution
what do I PI API management solution do
usually they do three things to do
quality of service so what limiting
typically to do security with open a to
connect GWT that kind of situate
solutions and also they usually give you
a developer portal with tomato
documentation with swagger so we added
so you already know that we do it so you
can either have it for free with
chipster and it works very well and
we've got hundreds or thousands of
companies doing that or you can plug an
API management solution on top of
chipster that does it I've got no two or
three customers doing it and the pay for
it so you want to pay tempeh and but
it's supposed to be better anyway a PA
management is something that is becoming
more and more important because as a
number of micro services grow of course
all of this is going to be more and more
important if I come back air to my
swagger
documentation you can imagine that if I
have 10 micro services that are listed a
and I can test everything it's a lot
more easier for me as a developer to use
that versus a cool project called the
swagger cogent that can generate a
swagger that you swagger clients from is
from a swagger definition and he'll
first-class support for that person we
have surfaced of course it's one of the
options that he didn't click but it we
have first-class support for that and
also because again doing it histo bonnie
is the same person doing the java spots
australia cogent and is a core developer
of fuji eep stuff so of course we're
first first-class support it's the same
person doing it
configuration management as we saw or
saw with Jupiter which history while
Springwood can be configured in many
different obviously there are 13 ways to
configure so officially gone on the
website there are 13 listed ways to
configure strip book it's a yeah anyways
just well very complex to configure and
white very complex now it's very easy
but you get lots of options so you get
to choose wisely your options that's the
first thing the second thing is that you
probably want to have a centralized
configuration if I come back into my
witch history it will get a very basic
configuration but we can see that the
main thing we configure is saying for so
we're using GWT authentication and we've
got two shared secret key which by
default is called my secret token to
charge in production so you can imagine
we need to charge it don't you like
Equifax and I mean what is interesting
here is you have a shared secret if you
put it into every app by that's probably
a security issue first of all you should
not put it into your to get a repository
of each application and if you copy past
it everywhere while you can be sure that
at some point will have an issue the
idea is that I was security where I was
printed configuration
server is going to sound the same token
to everyone so each MIT micro service is
automatically configured correctly and
if you scale the map so we of course get
the right configuration so it's a very
important way important solution if you
want to scale your micro-services so
configuration management is very
important if you use the spring code
config with gesture
so all micro-services will be
automatically configured of course they
can be stored in to get not everybody
does it
there's some other options but by
default this is what we do so you would
have a specific git repository which
would be sexual of course and as its
gate what is interesting is that you can
tag and roll back your configuration
which is very nice unless we just saw
gypsy registry add a nice UI layer on
top of it so that's easier for us and
using spring crude config by default you
can see it in general in jeans on as a
table and if you've got some secured
token in it you can hear you we have a
little screen to let you encrypt and
decrypt stuff using your using your key
we've got documentation err try to hide
effort of course to cover you so ya know
50 talked already yeah so let's start
with the micro services let's start
building actual micro services so so for
this demo what we'll use is we use the
microscope is generated earlier from the
Jade online web application we will use
the same and we will add on more micro
services gateways and stuff to make it
you know an entire architecture
so our second micro service will be a
bit more complex the first one was very
simple it didn't have a database or
anything just add a simple controller
the second one will have MySQL database
it will have a second-level hibernate
cache it will have several entities
which we will generate using our own jdu
studio which we'll see about in some
time so the JDL is available on this
link which will
yeah of course so on the Gateway will
also generate these entities and we'll
show you how these interact together so
let's let's start with generating the
first one so deep we are going to talk
yeah I'm going to call it so I'm going
to remove the site and put them back
when we can so so the first one we'll
use we already saw how to generate the
application from the web application now
let's see how we can do it from the CLE
as well yeah let's do it yeah
so this will be our second micro service
yeah so I'm going to my devoxx
repository I've got so really my first
might be services let's create another
one we'll call shop online shop online
shop and this time I'm calling sir key
yeah it's going to basically ask me the
same questions that we had with with the
web application but this time I need to
use the term online so I'm selecting
also micro-service application make it a
name this time I'm not doing the patron
fate I'm using chip services today I'm
using Beauty this time I'm taking the
technical SQL so by default we have a
distributed cache which is called as a
ghast this is only the default with zip
star for micro services because we know
you will want to scale your micro
services we'll talk about more about
this later maven and also has by default
so this is generating another micro
service yes it is it's done I can delude
you in it what I open it also with
intelligent
so yeah this me just so this is this is
your it's a registry okay and so what I
don't have running the first
microservice its default micro service
which is yeah okay this can kill this
one sorry just trying to have it easily
readable okay so my app is air let's run
it and well let's see it appearing in my
chip services to it
oh and then we should yeah it's
happening now but says let's go to the
slide
yeah so before that starts up let's see
about what is JD so JD Lee is James to a
specific domain language so it's a DSL
for generating entities which I do so
it's it's it's a neat way if you are
doing a natural application very well a
lot of entities and relationships
because you can use the key but for once
you have more than two or three entities
it becomes difficult doing everything in
the clique so we develop the JDL for
that so it's a very simple jph kind of
our DSL so you can define your entities
you can define relationships you can
define options for entities like
pagination search option which Microsoft
own all those things in a nice DSL then
you can import it using gesture so we
will see how that import thing works in
the next step so we have the two micro
services running well let's go to say
else to do so to work with jdl we also
developed a web app called a deal studio
it's like a visual editor where you can
you know do your definition while having
a UML like visualization as well it's
helpful just putting some no damn string
and as you can see it updates
automatically on the screen so I can
just type and have it automatically
showed on the screen this is an online
application which is also free you can
also use several UML editor offers ads
we also have just a human which supports
working with humans and converting them
to entities you also have ID plugins for
those oh yes
plug-in with Eclipse and gbg and
NetBeans which is probably very cool
also because it's inside your eye geet
so you don't have to switch yeah I'm
going to download or upload my file
which is little bit annoying if it's an
ID plug-in it directly into your IDE so
you don't have to upload and download
but if you don't like plugins and a lot
of to worry about them I don't like to
install a plug-in
truly very depends like always with
chips I've got many choices this one is
the simplest one that's why I know some
people who are really hate plugins and
lots of people using chips also work
with Mac Microsoft Visual Studio not
choses to plug-in for that
so my app sorry yeah let's generate
those entities on my application so much
one application if we go to the gypsy
registry let's have a look at its API
unlike shop so unlike shop first mode
has got nothing
well just a basic micro service giving
you your profile so when we say profiles
your Springwood profiles frame we're
going to tell you if it wants in the
world production values are in Rome and
it's how we first what we'll use also
internally to know if your application
is in development production or
something else
so as my app I'm going to just call the
app star import GDL and so the cicadas
yeah I'm going to download it click here
to download it download loads if it is
imported DL and my phone oh by the way
it works also the other way around if
you create lots of quantities you can
tell it export GDL and give you your GDL
out of your entities it works both ways
bi-directional so I'm going to import it
I'm going to generate also entities for
me so as we did before I'm just
compiling my staff which we start yeah
very quickly so the body's done by
spring dev tools which is very good for
the vapor experience and we care a lot
of a lot about developer experience so
if I come here we have all our micro
services running this time so we got
much more complex controllers and we've
got relationships we got table
good as well cast it's much more complex
that what we just have before so we've
got two microservices but what's
allowing is that I can't show much of it
because we don't have a phone and yes
navigate with now we need to generate a
registry for that let's do it before
that let's do the Gateway yes he works
no it would is go straight and can you
catch way hipster so I already selected
a little bit slow because checking the
network and I get a network access that
the box is not very good so I did two
micro service applications this time I'm
doing a gateway a key which is called oh
hang on I'm not in the right directory
need to generate into direct direct way
where you are I mean I just add a little
winding for that so micro service
gateway which is called gateway for 8080
system got nothing on this one it's also
using zip so which is to it
oh of course you need to select the same
options I selected two gypsy registry
for everywhere for every application I'm
selecting for security and this of
course you got to be quite often with
otherwise out of the box it's not gonna
work to below yeah of course we will see
all the options in the rest of the
session of course so let's talk let's
take a person by day four or so for the
moment
I'm using on good a four so we still
support on village yes one but it's
clearly the end of it yeah I talked to
the latest statistic looks like eighty
percent of people are using angular for
when the process of migrating from graph
five which was released last we just
think and of course we have react
support which is soon going to be
released soon very soon I'm not going to
use SAS yes now I've got some specific
client-side questions like do you want
to use SAS for doing my style sheets I'm
not going to do the resurrection
saying so I'm generating everything this
time is going to take a little bit more
time because I'm generating your front
end as you know is going to use NPM and
I don't know the internet yeah it's not
EPS yeah yeah but this is technically
the book download sentiment it's going
to download the Internet
so depending on the network it can take
between with the 30 seconds with a good
good connection to devices pretty quick
nobody and once it's all done earlier
Angela were also compiled everything
well generate two full well with
JavaScript application from our
typescript code and we'll be able to run
to Gateway
maybe it's time most lights on the side
so so I just went quickly
yeah I think that's okay so we already
saw the JD the studio so nothing to say
Vegas that's what we are doing so oh I
said we were going to use a stat the
chip so the techie I did it manually but
it's okay but it's the same thing but
we'll do just afterwards so we have to
generate the entities now so it shows so
we have to generate the entities now for
the Gateway so let's see for yeah it's
still so we have to wait for that to
finish any way to generate yes yes still
downloading the Internet
that's a win time what will we do here
is we used before suggest to you because
it was easier it was good we are going
to use a common line and so to generate
the entities it is like we had before
you have a web app which is easier and
you have got common line which is more
complex
moreover fool because you can select the
most flexible depending on what you want
to do and what you like you can choose
one or the other on pupils I'm doing
boss so you you saw the best option for
you yes gypsy entity is a bit specific
because it will understand it's running
on the Gateway so it's going to ask me
if I want to generate the entity on to
Gateway itself because it's
we are quite similar it also so it could
you could Jenny majorities yeah but is
going to ask me oh I see I'm a gateway
would you like me to generate a fountain
from my quest a second which is
elsewhere so it's going to be the first
question to ask me alright still when
it's it's almost almost there you have
to pitch here is this is going to take
forever it's like so probably we can
start generating in another tab and by
the time you finish hope this oh yes we
can be a little bit and and we can still
generate even if it didn't finish don't
do it that don't do it at all so what
I'm going to do is I'm going to tell you
chief strategy I'm going to first to
generate the product so I'm generate to
product because yeah you see we got two
product and category and this is an
enumeration of categories so I'm going
to generate that front end on my gateway
I could do I could do it with HDS to do
like which was dead but this time I'm
doing it on the command line just to
show the auto options so I'm going to
first to do the product and then the
category there is no you don't need to
do one before the other in fact no we so
is a foreign key between them of course
but we generate first entities and then
the relationships so you can generate in
whatever order whatever you want so I'm
going to tell it to start to product do
you want to generate that entity formal
existing micro service so as I said it's
saying it's a gateway of course I'm
going to say yes where is it well it's
it's air it's sorry I'm going to do it
like this screen is not polluted Dave
works online shop so I want to copy
paste because I don't want to to do any
error now so here is my micro service
why do you want to generate your front
end from that micro service of course
yes
it generally it I can kill it in fact
and then I want to do two category which
was the other table while so I wanted to
be add here so you saw chips wanted to
category it's going to ask me just in
question
I'm into trade yes oh Jenny wait just
look if I finished no oh it's finished
wonderful you see just in time almost
there the network is with us it's taking
some time because it's building the wall
onto the application
yeah doing it for nothing cause I'm
going to generate it right away
yes it wasn't a well message but that's
normal because you know I think we can
let it run the art and now it's going to
work now it will rebuild the friend and
the game because it's a angular
application type script so it has to be
transpiled so and I can open it up
because the openness to burn window oh
let's just run it like this did finish
yes
so was this one let's run it and let's
have a look yeah at you a cow so here we
are going to save a cage with appearing
and that gateway will be connected to
the two microservices so the first one
doesn't do anything for this not much
interest but the second one will serve
the public and to category so we'll be
able to use them so here's a gateway
coming and by the way we didn't we could
show the entities generators in the
cycle for the only shop I think we
already the entities oh yes yes yes
so it had only profile info so now yes
I never cease yeah here as well and if I
go to my to my gateway now so I've got
my own villa for font and I'm going to
log in I've got 200 teeth suppose you
can do category so I can create a
product BR and another pollute French
fries and I can do categories food and I
will put my B and my French fries in the
food category and as we can see here
we've got our gateway which is just
adding Anand village even angrier for
application which is doing micro
services cold shoe jewel to a micro
service back-end so we've got something
quite complete err already and we
haven't started for one yet so let's see
what else we had so before we go into
more complex demos and more details
let's see a short look at what Netflix
TAC has to offer and what components we
use so we use as we stated earlier we
use the Rika so Eureka is a Netflix
default solution for service discovery
sorry service registry and also for
service discovery kind of so it can also
it offers a client-server model so there
is a eureka server with which acts as a
registry for your services and it it can
also load balance between eureka
instances so it is useful in cloud
environments it was specifically built
for almost a double use by netflix so it
works very well in cloud environments
there is also a rake a client which is a
java-based client which talks to you a
casaba it does server service discovery
this is what we use for service
discovery in Jacob stow it it is a
middle tier client based load balancer
so it
load balancers your requests as well so
this is also available as part of spring
cloud Netflix which is like a Springs
you know a wrapper on top of the net
fixed spot which also offers speak more
than that with cloud config servers and
stuff like that so which we also use
then we have feign and Reuben which are
other two important parts from Netflix
so feign is a Java to HTTP client binder
so it is it was inspired by retro fect
and Jack's aris to and of course
WebSocket it has to be so so it is a
declarative web service client so you
can also use it like I know like typical
web service client to talk to your micro
services as well spring cloud netflix
fine which is a wrapper on top of it
it also adds ribbon which is convenient
so if you if you are using fain alone it
doesn't do everything but once you use
rain and ribbon together then it becomes
much more powerful because it also
brings in a lot of the options from
ribbon like load balancing and request
caching and all those stuff so spring
cloud Netflix Train is better then using
Spain alone because it combines both
chuckle and we use that as well then we
have Zul which is a very important piece
of the puzzle as well so this is used in
the gateway for AP management and for
you know your requests routing and all
these stuff so it's in its service so it
can do dynamic routing it can do
monitoring resiliency security lot of
stuff we also do we use it for security
we used for rate limiting and you can
write more filters for that so it has a
filter mechanism so you can write
filters to do whatever you want with it
so currently you the filters that can be
you know written vassal are like can
write filters for authentication any
kind of security ACL you can write
filters for insight and monitoring you
can write filters for dynamic routing
stress testing and load shredding which
is like an interesting topic in micro
services more you can you know you can
slowly increase your amount of requests
going to a service so you can stress
test the service until it breaks or
something like that you know then you
can also do
 when some service becomes
heavily loaded you can try to distribute
and stuff like that so you can write
filters for that static response
handling which is very good if you have
a you know say for example Netflix or
something you know like where you have a
lot of static content then you don't
have to always route those requests to
services and load them you can you can
you know sew them from you know your
gateway directly because they are static
content you can put them in static
content servers and you can know them
Suhel to is apparently on the pipeline
it is supposed to be non blocking and
like you know much much more better than
full it's been on the pipeline for some
time now I hope it will be out soon then
we can migrate to that so we use it in
our gateway as the default solution
let's look at ap manage me just I just
wanted to add one thing because we're
good some time and just once we didn't
talk about its WebSockets because you
just talked about it yeah yeah Laberge
dual there is a limitation with Zulu one
it does not support WebSockets this rule
to shoot supportive shorts one day it
goes out and it is supposed to be non
blocking so it is reactive and all those
cool stuff goes to to HTTP - it's not
ready yet
and so forth we support WebSockets only
on the gateway and there's a very good
support for web socket in ships both on
the server side and on the client side
there's quite a lot of work it also and
oh and by the way it's not that bad
that jewel does not support WebSockets
because what I what we would mean is
that you got your angular client that
does WebSocket to Zeus that does
WebSocket to something else and this is
a bit strong you know others WebSockets
routing what many people do what what I
do is that there is also Cass Cass
support in Jeffster so basically you've
got calf gap between your gateway and
your micro services and dual between
your gateway and your own good
application that's a very good patent
works very well I've been doing that for
no more than one your carry so if jewel
did not support WebSockets - what is
that bad in fact you have better options
than WebSockets so let's talk a little
bit API management
so we talked about the chipster gateway
and zoo but zip staggers more than what
jewel does by default first saying it
does it provides a situati on top of top
of spring boot so by default if you use
spring boot and so on you've got well
you've got security which is implied but
it's not which petition it's not credit
for you yeah what we generate for you is
three different security mechanisms so
there are more if you do a moderate it's
a new session based authentication yeah
as well in microservice world you can do
session based so we're doing squeezer
options which are well more efficient
for for micro services the first one is
JSON web token which is what we have
done first which is very very even used
the second one is GPA which is user
authentication authorization we're going
to detail them afterwards and the third
one is open active Connect which is the
new shiny stuff that everybody wants
today we're going to detail each of them
what's important to know which they've
stirred that request has secured by
default that is when you generate an
oddity by default it is secure it is
also monitored
that's why we you can see just that's
why you can go to matrix and see in your
matrix because each method of its spring
beam is monitored by default and when
you do microservices the chipster
gateway where is either sharing a secret
like what we do with GWT or having a
public key mechanism something like that
what you do usually with a OpenEdge
connect and that's all that well
security is trusted between services
will detail that in the next slides
second things that you have with the
Gateway
with the Jeepster gateway you have great
limiting
when you do API management one of the
most important topic this quality of
service what happens when you have got
to work users is doing lots of requests
what happens when your system is too
loaded while GIPSA provides were
committed filter which is using a
library quelle bucket 4j it's very
important because it uses an algorithm
called token bucket algorithm which is
very efficient for that kind of load and
I've seen many competing implementation
including in proprietary software which
is expensive and they don't have
something as good as this token bucket
algorithm which Alexandra based
implementation before this yes before
complex before that I I copied on some
other systems which are very bad that's
why I know the other systems are bad and
what is good also we stated for J is
that if you distribute your buckets over
a cluster it works with Azal caste and
one of the other options I didn't check
you know if you saw it is that we
support adult caste so basically out of
the box you have token bucket algorithm
for weekly meeting with which can be
distributed using as a ghast for for
free and that's where we advanced and I
don't think any other competitor that's
got something like that and what is good
ear is if you mix this like with a
fridge slide sausage it's a gateway also
under security so it's very good well
it's very easy when you are in the
Gateway to do some custom code let's say
if an and mean comes it's got like
infinite requests if an anonymous user
comes it goes I can request me I can
write a more complex rate limiting
algorithm you can do a yeah so by
default we have a way to really mean
hell wisdom that allows you I don't
remember how many lakhs is 100,000
requests per hour something like that I
don't even remember it so lot and the
idea is that you customize that code
depending on your business needs so
because this is something we cannot
generate because totally depends it's
regular France implementation from yeah
and that's what we usually do in shape
size that we generate the technical
stuff and as soon as there's some
business stuff of course
you know generalities but we give you a
template and some good examples so you
can then work on your business needs
depending of course of what you want to
do but you've got a very strong and good
basis for what you want to do a third
thing that a PA management solution do
is a swagger aggregation so as we saw it
the Jeepster gateway uh so you know I
throw it on I show it shot it on the
registry to get where does the same
thing to get with us also so you know
you have aggregation going on both your
gateway as well as on your registry
depends up on what people want to do so
a I'm on the registry so it could be
good to use swagger air because you're
inside your network and it said sure you
don't want to show that to protection to
everyone that's but if you want to show
that registry is not the good place to
show yeah maybe you want it on the
gateway yeah because you've got lots of
developers from outside and you want to
give them a nice portal so maybe that's
what you want to do so we give you both
options those options are secure so you
need to be an L mean by default to see
that and they are disabled when you're
in prediction profiles it's only works
in the mode and security same as
whatever security are chosen so in for
this example we have chosen JWT
so same security our place for these as
well and of course you can you can also
choose to enable it in production if you
want yes why defer we we do not enable
it in production there is a switch like
there is a profile which you can use to
enable it in production if you want
because in some use cases you might want
this to be if you are building API for
third party consumers then you might
want to have this on your production as
well probably with you know with more
security and stuff you know like more
kind of authorization security on top
but you might want to tone production as
well so we've got always to profile but
we could more but two main profile one
for development went from production
that's what we showed last year at well
in this very room but when you do micro
services it's the same idea when you are
in development it's everything is done
to to to have something
easy for for developer to have a great
developer experience and when you're in
production everything is done so it's
very sexual
so you are not act so different needs we
have a 20 back do we do it now because
we're a little bit early
my proposal is that we we do the 20 min
back in 10 minutes that final say 1 yeah
yeah let's use next few slides because
we little bit early and we've got since
free demos so we might be happy to have
the time later so we talked a lot about
Netflix but we've got some alternatives
to Netflix because what we just show
might not be good for everyone yeah do
you know why I put nepali home because
you put it not know but it is not
function well nobody well it's the first
console there it's only a French stuff I
don't know the problems you know I had
some fun I was wondering why so that's a
question we often have some people don't
like Eureka was asking good and bad
reasons for that from is the good reason
to dislike Eureka is that when it you
know it has a timeout then sometimes we
forget basically by default I think
search is so or 60 seconds and willing I
think even even with that it's a
slightly not consistent all the time
yeah when you kill off your instances or
when you start news it takes a slight
bit of time for it to recognize and
register also issues that when you get
it
yeah when you start up again it takes
some time to record everything so for
some time it's wrong so when some other
services replicate with it when it's not
well just starting up the they're
getting some bad data for some time so
Erika is very stable and very good and
we will play with it well in the last
demo we'll kill stuff and so on you will
see that each time it will come back it
will I have done that them were like
tons of time it never fade well the
microservices failed but the demo didn't
fail
but it takes some time it's not very
good concern for that is very quick it's
much nicer for that then the issue is
that control to ensure strong
consistency must be run as a cluster one
of my clients a big French banks they've
got clustering with five console which
really catches each other because if you
lose that well you lose everything but
so some people with a concern it's like
Angela versus reactor and also this is a
commercially supported solution so I
think yes we are an enterprise and who
cares a lot of supplements important yes
if you have a small start-up you might
not want to pay for support depend on
what you want to do so culture is very
popular it's written in go it's open
source also what's very good but concern
is that it's it supports multiple
languages you're a guy to rest api but
in fact the only good trainer support is
Java there's something for dotnet but
it's worth seeing also an NGO but mercy
only works in Java so if you want to
have multiple languages console is
probably better
and of course so with zip star we've got
a first-class support for concealed so
well I will show it afterwards and we
are not paid by console - okay so with
console the architects are slightly
divorced you can see that in the earlier
architecture that so you can see that
the the blue one so this is the part
which console replaces so it was JH the
registry with Eureka sprint cloud config
and monitoring dashboards which was our
custom built monitoring dashboard and
we're going to replace well most of the
little boxes well when after yeah so
this is now replaced by console so it
doesn't have some of the fancy
dashboards that we had in the registry
but it has its own
options which we didn't have in the
registry as well so it basically does
the book it does the work of service
registry oh sorry
because this is a gypsy registry did
service discovery so construe does the
same thing it did the spring source
spring code configure configuration and
for concealed we've got a little AK will
show you that does the same thing with
its own kV store and stuff
yes it's and this is we provided okay
match for that I have no idea why but we
have like what Nellie 200,000 pulls ones
at the crime edge so what we did with
the very very vapor Philip yeah not sure
why
well it's basically the same as the
original yeah but I don't understand why
we have so many people donating that
spark and the only thing missing here as
mutual - boats but we'll see afterwards
we've got the Gypsy console that does
basically the same thing not exactly but
pretty much pretty much so first thing
which change was service discovery
mechanism the second thing we can change
air is it's a gateway which if so by
default we use chips our gateway with
with Zul well we have lots of
competitors to that the main one well
one of the main ones is traffic which is
also we can go which is also open source
which is French so that's really really
good and very important and it's alright
so you see it simple HTTP proxy and load
balancer it does not do API management
like gesture but it's a very good a lot
balancer reverse proxy and it works with
control very well that's why the two are
links and you have two patterns with
that when you new Jeepster so the first
one here which is that says most well
when people think about first that you
got traffic replacing in the tips that
gateway you seen into the ship's our
gateway for one thing
static content digital gateway endures
angular or react code so you need it
somewhere so basically push it somewhere
else
you also need it for security we'll see
to that or security can goes out but I
just beginning to move some boxes the
main difference here I want to add is
that with DJ hipsters architecture since
we put all the client side in the
gateway for all the micro services and
if you are having client sites for micro
services then you can only go with this
pattern because traffic doesn't have a
way to host that client site for you you
need a guess a for that yes yes and an
air traffic also routes requests
directly to the micro services well
that's I need the pattern what is most
of this one and second one you will see
the Gateway is going to move this is
basically our first slide but with
traffic on top of it so interest here is
that you have was several gateways you
can you microphone to use traffic
because there's no SSL encryption uh for
other things and yeah basically you've
got a mix of both worlds you have the
same time traffic and enter gateway
because I mean you want to get where for
the rate limiting but you want traffic
for the SSL encryption and and load
balancing several gateways maybe both
option both options work by by default
I'm going to do a small demo probably we
can do it after the yes I'm going to my
father I do the demo now because if they
move face then we've got 20 minutes to
fix it to under there's a failure not
fail that never fail now you never know
with the network yeah so I'm going to
kill everything because yeah but
question above single to code so so
let's go let's go - just let's go to
simple micro service so yeah yeah try
feet so the name is a name is ugly
traffic micro serve this they use a
special character for that or yes oh
yeah you like a capacitor all the time
this is a specific character III copy
past it I'm going to run jab stir well
I'll do the Gateway
works
gateway oh sorry I'm tired
okay back to the micro service says
micro service application
it's called service it's winnaman poet
eh one everything is by sorry but not
everything is by default it's losing
control during GWT searching a database
MySQL we don't really care because I
start with want to show okay and and do
anything to Gateway so Jeffster also so
it's a gateway which is called gateway
by
yeah let's really by default it's
raising concern GWT everything else by
default so no no nothing nothing an
error for my micro service I will do
like with what we did before I will use
in port ideal so we've got some some
some tables and some stuff in it what
I'm going to do here on the bottom
screen I'm going to create a new
directory called docker because I want
to conceal and traffic and those comes
well you can run them like this but so
so come as docker images is going to be
easier for me to run them as a docker
image so for this I'm going to use a new
my zip sort of generator which is called
docker composing
I'm just calling just a docker compose
and telling it oh by the way I need to
win docker it works better if dr. is
winning I'm going to tell it I'm doing a
micro service which is going to use not
Zul this time but traffic my my
different micro services in the buy one
directory so it's carrying all my my
director is it sees three well the
gateway the two micro services with it
before so that's the to the traffic get
where to traffic micro service we just
did I'm sending just those ones I just
wanna a cute extra with those two and oh
by the way I need to build documentaries
of everything okay I don't want to
mentor them yet which is that afterwards
so this has generated for me a docker
compose configuration with concealer
with traffic with my gateway and with my
micro service so everything is wired up
and of course the boss used databases
and so on so everything is made up build
up just so that's why I add a warning
message tell me we still need to wait
for the end
yeah and it just saw that I didn't build
my docker images for my micro service in
my gateway so micro service just which
was built so you might okay image is
done and for two gateways most okay
image is being done is that a good time
for doing a coffee
probably yeah because that can take some
time so my proposal is that we do a 20
minute break for the coffee
this will finish fully and we won't
cheat and we want it I will not touch
anything because it seems to be working
and and let's meet again in 20 minutes
is that fine yes thank you
you
okay yeah so we've got this little
command on the top geh doch this is a
common I used to build my docker image
so the question was what is this command
of course so first of all if you go to
the bottom screen when I asked the jib
start dock docker compose of generator
to generate my docker compose
configuration he turned me you didn't
build your docker images here as command
to run it so it's a maven package with
support for file and with docker file
build goal so that's what you need to
run and when I went to gh dot that's
typically what it's running so judge dr.
Shah shortcut you can of could build
your own shortcut but this one is done
using Omaha - so if you are using Linux
or Mac OS like me you can use oh my -
and let me just show you and we've got
our own almighty - plugin so it gives
you lots of little shortcuts when you
have a setting your job your environment
shell plugins
we've got while two plugins one for
fishermen and one for Omega des - which
is the one I am using so it's a it's
managing your plugins for your for for
for CDs - and it's everything you to
have to configuration for lots of tuning
that's what I'm also going to do when I
will use docker I will have to
completion with docker that's also an
almighty - plug-in so that's the
sectional tuning which is very good and
we have our own plugins for sauce you
see I mean typically what I'm using
imagine a session using the get dhoka
dhoka compose and Jeepster plugins so
you just need to follow that and you
will have the same commands and as me
oh I'm just shooting a little bit 12
things were quicker
like any good Java developer you know I
always I don't want I don't want this in
fact I always add
skip tests
so it goes faster it's a nice trick
everyone should do usually don't do it I
only do it for first demos because of
the wise text and forever
yeah which everyone should do in demos
so I built so the km/h was a micro
service I didn't do it yet for the
Gateway because so the microservice has
got the entities
I need also to to create them here so
I'm just going to do the same thing as
we did before so you get your product
yes you know micro-service didn't yet
I'm killing it because I knew I'd wanted
to finish it take away yes it is
Virginie wet so this is building to
client entities with angular on my
gateway and I'm going to package this as
a duplication with gh doc and after that
I'm going to run everything yeah so as
it going to take some time to build the
decay image let me just open this app
just to show it was generated with the
docker compose sushi narrator it
generated for me yeah a full docker
compose configuration oh can you see yes
it's working so we've got our gateway
its magistrate database we could have a
micro service it's my history database
we've got console we've got the console
config loader is our say trick to load
swing code config configuration inside
console and a we have traffic so this
does extent some other docker compose
configuration so which I take for
example traffic it's right yeah so here
you see we are using traffic 1.4 which
is it's not the latest versions there it
is one point four point one today I
think so you couldn't read right now
and concern we're not using the latest
version because I think it says 0.9.5
but it fails with spring cloud so we
haven't - Evan fix it night party so yes
but that's no well because we know it
fails and so if you look at those two
examples you saw so one of the
interesting points of Jeepster that we
configure everything for you but we also
test all combinations for you issue
we're doing that yourself but you would
have the bug you will have to fix it to
rollback yourself and so on you've got a
team of nearly 400 contributors lots of
people who knows all sorts very well
with doing that for you so there's a
huge interest you to gain of time and an
effort if you use tipster because all
that testing or that integration is done
for you so that's one of the main
interesting thing of GIPSA is that it
removes you a lot of trouble so my
duckling has image each running yeah I'm
just running to compose app oh sorry and
so this is going through an my micro
service my gateway with concern and with
traffic
so as consul starts up very quickly I
cannot really go see anomaly yes console
is already air so this is what we had
before with the gypsy which history but
this time it's consumed so for the mark
no services running and we can go it
with a key value store this is a little
trick I was talking about as you can see
I got my spring good mash free my spring
good configuration which is here so
that's what I told that that was a
little act so we are importing the
spring configuration into the console
configure a key value store so that all
application are getting the spring pod
configured from console so it's working
exactly like the gto registry
my app is not running yet oh it's
starting to annoy another thing that
started up pretty quickly is this
passage so if I go there you can see
traffic
stuff elodea appearing here so 2fh we've
got two screens this is the routing
screen and you see where that if you go
to slash service you've got your micro
service then you got a l screen was just
as much we didn't do any it so there's
nothing yet but we will be able to see I
will keep you quest yeah so everything
is coming we can see them
yeah if I come back everything is
running so I can go to some I app so
another thing with jib star is that by
default we always use the default
configuration of each tool so let's list
it's a philosophy we have so by default
when we run the application we use post
88 because that's what swing boot and
Tomcat and undertow use by default but
when we use traffic is the same thing
the issue here is that traffic also use
both 8080 so and by default it it
switches which would request on port 80
so that's what we are using it I find it
a bit misleading but that's how traffic
works and our philosophy is not to
charge it so between using gauge the
registry with soul and traffic console
the difference would be that in the
other set out you can yeah you can
access each one at localhost with the
port whereas here you would have to go
you know slash oh yes into context also
yet the context which is provided by
traffic so you would have to go slash
gateway slash Zoey's class whatever you
say microscope is name so which you
don't have to do in data set so let's go
to the gateway so oh it works
whoa good demo so let's sign in and
let's go to our my course I will just to
see that everything is running a let's
create a new pizza yes it works so yeah
what's happening air when you go to
slash gateway so you first go to traffic
which is air traffic slash get with air
is getting to a gateway to tool but
basically and then the
get where roots the request to the micro
service so this is typically this schema
yeah which is happening if you want to
use this schema with traffic on link
directives you request to the micro
service way 12 the SEM is only an issue
of context in fact my service is here
and it's just a matter of modifying the
context so in Jeepster by default we
have a relative context let you pass
it's very easy to so move it if you
don't like it it's a constant in in so
you can modify it in the front-end code
where when you where you're talking to
your back-end through the angular
services you can modify it to remove the
relative context and you can route them
directly to your so V so both both
pattern by default it works in the
second pattern we showed but you can
easily switch to the first pattern if
you prefer that way yeah that's very
easy to do well no other pattern
depending what you would rather do and
so well basically that's it we've got
traffic running we've got consider a
name and what app is running so so the
only thing missing in this this
alternate setup is the shiny dashboards
you know the API aggregation I mean the
swagger aggregation the metric screen
the config screen the logger screen the
log screen those are custom built in a
gypsy registry which are yes but
afterwards we could JYP's a console
which kind of does the same thing yeah
well so there are more options so that
we will see some alternatives for that
also so let's stop everything because
winning and I'll talk about security so
the topic will be introduced but we
didn't detail the different security
options so it was the time to see that
first thing what security HTTP we've got
of course actually support which is
built in with Jeepster
no sorry if you see our spring boot
configuration we've got to Fulham
documentation about that is very easy
you generator you can it's basically
just you know uncommenting some part in
our UML files add your own let's encrypt
certificate or something and you are
ready to go HTTP it's very easy to do
yeah I'm opting into intelligible show
you when it happened HTTP is also why
it's important for situate you of course
but it's also important because if you
want you to HTTP - you need an HTTPS
it's not requirement the specification
but all browsers that have HTTP to
support require HTTPS so we support HTTP
- configuration as well it is commanded
by default but you can enable data so
yeah well let me show that to you if you
go to our spring boot configuration so
in resources convenient if we go to is
it yeah
so to 'never SSL they get why we give
user the line to do with the key tool
and then you just put source of ssl port
so Keystone control you just uncommon
that you run the command and you
uncommon that and if you want HTTP to
yeah you've got chipster
HTTP version instead of 1.1 you just put
two if your IDE is cool like this one
whoa it should at Oh complete well
IntelliJ is not as good as it's supposed
to be no why
oh it's indexing it's not finished ok
nobody IntelliJ
once it has yes it's my fault I didn't
commit oh that's another interesting
thing with Jeepster so nobody with
Jeepster will push always to commit
everything to get em in to get a I
didn't do it and would also default
configuration forget and if you do that
what's interesting is that your well
IntelliJ understand that not module is
an ignored we put it directory in get
and will not index it as I didn't do it
well until she shows that nice directory
and I started to index it with Elsa
files yes beautiful so it's just hungry
everything up so now I have extruded it
it should watch yes it should work so
just put v2 and you have got HTTP to
those configuration as we sit for the
document it's also $42 website and this
is a specific job star configuration
this is not by default in Springwood
it is what we add to Springwood so lots
of things to spring good but in
particular we have HDPE to support with
HTTP so with a GPS or so we've got some
other options that just situate with
with the spring boot some people first
of all is it should get worse because it
considers at the micro service our into
your internal infrastructure should not
be secured why not I mean it's actually
using an aggregator pattern it kind of
makes sense because you have your
renderer your you know data center
whatever already secured supposed to be
secured so you're only exposing the
Gateway to the outside world so it's
good enough if you secure that that SSL
is I think quite a lot of of little
definites it so maybe you want to remove
that I don't know but but again it
depends on your business choices and the
choices you mean so of course if you
don't worry about the puffins overhead
and like you know if you think that your
info is not secure enough then of course
you can enable security initiatives on
everything if you don't want to do it
with the spring boot and undertow you
can use it with traffic that's what one
of the good reasons to use traffic is
that support HTTP edge support let's
encrypt
so with traffic is very easy to set you
everything so one very good reason to
have traffic in front of ships
architecture and yes another I just
talked about that song clip so you
probably all know but this right free
SSL certificate
it's really great it's only is only
downsides that your website needs to be
publicly available but that's a very
good solution in fact that's what I'm
using myself should go to Jupiter online
you see it secured it's secured with
that encrypt oh I have no idea where
this is written from dev tools they keep
moving it anyway
yeah well it's a ticket let's encrypt
Authority yes whoof so this is done by
let's encrypt and in fact my photon is
Apache I just used Apache because as
there's an easy-to-use tool to generate
and when you USS your let's encrypt
configuration with Apache thank you by
the way so that's a very easy to do and
free so that's a great solution to
secure your app without spending any
money so HTTPS watches the protocol now
or do we secure our architecture we've
got three main options for for micro
services with chipster the first one
which is the most popular but it's also
because it's the oldest one and also the
easiest one is to design web token so
it's totally stateless you've got a
signed token that all microservices and
Getwell share and trust so it's very
easy to understand the code would
generate if you want to have a look at
it it's very very simple
oh yes with zip so we've got libraries
it's not a library that is generated
because we know you want to charge it
you want to add claims to modify it so
it's but it's very easy in symbol so
that's why people love it it's just
couple of issues if you want to be very
secure so first one is that the default
algorithm is not most secured one it's
honestly enough for everyone but if you
want a better one you can you should add
bouncy castle libraries where you're
enough it's not good for you yeah well
so you can have something much more
secured with bouncy castle
by default we use a shared key because
we deploy it using the gypsy registry or
console which is good enough but if that
not good enough for you and you want to
do public/private key encryption while
you can also easily do it but then
there's more setup to do a bit more
complex to yeah so those other two good
traits if you want to have better
security but the default situation
already good enough normally I we have
tons of users doing that ability is the
most most used option is out of there
all the security mechanisms we provide
yes because it's the simplest to use and
it's the cheapest to understand the
second one which is in fact super jingly
popular if we have time at the end we
have a look at the stats what I will so
we also so another option we provide is
our own
UAS over so it's a user authentication
and authorization server so it is again
a gesture application which you can
generate along so when you run gesture
you have option to generate a gateway
micro service and a UA
so once you generate this it it provides
a Cloud Foundry you a application for
you so it handles security it it is much
more secure than JWT option it also
works with jet ability for the micro
service itself so easier to use when you
have multiple gateways so because it is
easier to handle because normally in our
JW options a user management is handled
in the Gateway itself but you have when
you have several gateways it doesn't
make sense to have user management in
each of them so it's better to move it
out to its own service it's popular for
micro service architecture where you
have you need better security than jet
ability or you know gateways and stuff
so as I said it has to be generated it
can be easily customized because it is a
normal jettster obligation which is with
with a lot more code for security
generator so it also provides what to
tokens for all your applications so the
architecture looks something like that
so you can see that there is a war to
server here which is of course
us over which spokes along with the
Gateway to secure application yeah yeah
we also have open ID connected things
yes open it connected our last option we
released it into our last release so
it's very new but everybody wants it so
it's we are very very I demand for that
so two good reasons to use that was like
it's like chips to you you AAA and
that's what people said that you've got
several get wares or so because you want
to have something external because it's
more sexual because there's a team and
also if you're a company with a lot of
applications where you want to kind of
do a so-so kind of stuff and if you
already have a you know mechanism like
octa or key clock then it makes sense to
use that here as well
NID connect two of my bit clients the
ones they use open educate because well
for the world company and at my company
we've got several customers with key
clock you know entreprise cutie clock
for everyone so Panera Connect is a and
I and I don't see layer on top of o2 so
it's basically the same thing at ships
to you a but you've got let's say full
applications providing it it's great for
micro services architecture because
we've got servers which can aggregate
security like you know several LDAP
servers and so they can aggregate
everything you can on the social
websites on education and so on all
those things I mean we it system Alice's
so it's a very very high demand for that
so don't act that it's much more complex
tools to use the good thing with deep
charge that we did add work yeah very
very hard so unless we have some bugs
honestly it's as easy for you to use as
GWT it's much more powerful so that
should be a very good the only
differences might be slightly difficult
to a bit more difficult to understand
compared to JW because yet every code is
hardly two or three files two or three
classes and
this one is bit more complicated yeah
and the setup zilbert applies with us
kind of okay
and so today we support the open edge
collective stand out and we support true
implementation which but okhta which is
a company from Matt rebel with the
person who is the college if developer
is is the one who what gypsum in eBook
which is first one the only chipster
book until book is printed and and so
Matt works for Akhtar and digital
Octavia mutation so that's very
interesting because well business Elvis
company so obviously it should be some
very institute and well with written
code and you put both octa and key Koch
and why do we support both because well
two most popular and that are open-ended
they both support open any standard yes
because that's also another thing which
tipster we want to not to be linked to
one implementation so when we talk with
Matt we told him okay for parents
collect but we want to implementation to
be sure that well we can switch and if
you have another implementation
I know whatever client who uses for
George yeah I don't know imitation works
but it's another open ID connect
implementation as well at least report
two completely different implementations
that should also work with them so so
technically we open it is supporter the
authentication server should work should
work yes
little configuration changes so this
works very well for monoliths
for micro services it's a bit more
complex but I think that today we've got
something quite good in the latest
release which is what I'm using it we
have like nerdy everything working just
I know one little bug which is very
small you will not not notice it it's
already fixed so in the next patch
release it won't be there unless it
should be good now but well if you want
to use in production maybe wait a little
bit few more a few more releases you
have to pull of food it is but yeah well
as it should
why starting to be good oh and I want
you to do a demo of a parody correct as
we've got time yeah let's do the demo so
let's do it again
yes so this time let's use I'm just
changing just to have fun
let's just let's use micro size
application let's call it clock clock
service so it's using the gypsy registry
it's using open educate this time let's
do it like that generating it on github
yeah let's go in it so git clone we got
it now let's do the gateway it's quicker
like that like this then I need to clean
up my github account
khitab gateway OpenID connect and
everything else by default
to to to to to pee
git clone so see the cloud service let's
do it okay image search dodge and for
the gateway key clock gateway oh I need
first to do an install for the to
download intent dependencies so this is
going to take some time and then I will
do the carriage again and yeah with my
docker configuration I'm going to run it
again you will be running the docker
image at Peapod so you actually children
run installing everything anyway so I'm
just yeah yeah oh yes I could yeah oh
let's do it like that that's several
ways to win it
let's do a micro service with the Zul
and so this time I'm not using traffic
using key clock and I'm setting my
gateway and the service I just generated
just need to wait a little bit until
this is done I did maybe we can go on
build it again tree sorry build it again
so we can that's at which is a quick we
can do the rest of the of the
presentation yeah I will come back in
until it's done loaded I will see that
we will see that we have so a simple
gauge where simple micro service and
everything is not fitted by key clock so
you will not have the user management
which is part of Egypt's at Gateway
anomaly and we will be we do a kit to
kick lock we wanted to get it there
everything will be running taking
forever so let's move on a little bit I
will come back just to see so we talked
a lot about
architecting our microservices there was
a different path that we could move we
could situate but we didn't talk about
the tories monitoring and in Microsoft
that is that's very important that's
yeah probably the most important thing
in micro services because you're going
to have tons of services you can scale
them so you absolutely need to know
what's going on we already saw that in
the gypsy registry we've got some basic
monitoring metrics and health monitoring
and all those stuff but yeah it's good
for development because you see the
issues in predictions can be useful
somebody anymore but not it's not
perfect for production biggest issue is
that well the good thing is that it's
live because a live data but the bad
thing is that it's not historical data
it doesn't I mean the metric registry
the norm the metrics we use is from
spring boot actuator and which doesn't
persist it so you don't have historical
data to analyze and like you know find
patterns or anything like that it's good
not good enough so well that's what we
do so we've got matrix as the logs like
logs just showed it at the beginning
with the spring boot configuration you
can change log levels at one time I
showed it at the beginning so let's not
do it again what is interesting with
what you get by default with spring boot
is that it's free secure either with GWT
or when I did connect or depending on
what you choose there isn't
ura and it's an issue I did not know
that I just discovered it so but the
important thing in comparison to what
you are by default with spring bootie
that is fully secured and fully secured
with the statute option is selected so
it's like release with the rest of your
of your architecture yes it's done let's
do the image can I come back just after
that so let us introduce you to the
Jupiter console so this is based on the
elastic stacks or elastic stack is lock
- elastic search and Cabana which very
well-known for people doing monitoring
we did tuned it quite a lot first of all
we tuned it in our spring wood
application we sound first of all we
added metrics using Java metrics no drop
without metrics so we we have a lot more
money joining that what you have by
default with Springwood but were so
tuned what was being exported which
bought it in the right format and we and
we directly on the network with tcp - 2
X - so basically it looks - is good
nothing to do you know number it does
get to take your log file modifies I am
the fans and so on we just get so we
will show when we when we stream the
logs closer we already made sure that it
is optimal
so then log star take it takes care of
aggregating that and yeah yeah so there
was a big work here to optimize the log
stash and second thing is that we
provide a lot of building dashboards so
we will see them in the demo because as
well will you know know you use a micro
services with yet cash with no we know
that what we are going to use so we
generate the correct dashboards so it's
already done for you it's normal
elastic stack dashboard so you can do
whatever you want with it you can add
your own dashboard and so on but you've
got already pre-made dashboards so it's
easier for you you can also configure a
last alert on top of that if you want
you can do whatever you can do with the
elastic stack you can do on top of what
we provide as well you just make sure
that we provide something which you can
already start using we don't provide a
bare-bones Cubana where you have to go
and look for everything we provide
something which you can already start
seeing stuff then you can obviously do
all stuff that you can do with Kabana
and like elastic in general and so
compared to services trees interesting
yeah
is that we aggregate all applications
and all instances of all applications
and we store that over time so of course
it's much more interesting let me just
go back to the club demo because
the Duke image I was done I started do
compose so everything starting to run
let's have a look at our G cloud
architecture so first of all let's go to
the GPO registry so Oh already straight
away so I went to the gypsy we'll just
wait it saw that I was using kii cloud
which would graduate me to keep lock key
clock so by default to same login
password as usual with so it's aluminum
in knowing in coming back air so as we
just said it's fully secured by key
clock I can go to key clock yeah just to
have a look so it's important if this
port so it's opposite yeah console if I
go to keep lodge we've got already gypsy
configured air and it sees already we've
got a session air in the gypsy with this
tree that is opened we just opened at
the moment so as you can see we already
have our all cheap stuff jung in ki
clock with the users as rewards
everything is already done and the Gypsy
will just treat using it already so
everything is running let's go to the
gateway sign in so this is basically
some screen as before but when I click
Sign In
I am also with empty to click lock oh no
because they were already low yes yes
we're sorry
when so fast I was automatically logged
in by kick lodge let's let's go back
here in fact is going so fast two demos
then go to the web app oh I didn't even
know this one session log out all that
should be good let's restart
treated it
no no it's time so yeah okay it's going
to take some time I didn't want to go
through all that
Sookie clock you know just open let you
connect which does that it's a stateful
mechanism so it's going to work for
enough no little time and that was the
token is still valid yes sterkens
invited it's been dramatically in melody
to refresh token if I seen I sign out
air this time I said I'm sign out in my
app and in key o'clock so this time is
going to work I'm going to key clock I
am logging into key o'clock and I'm
coming back and of course the pacing
works and if I go oh I didn't generate
any entities but you need to trust me if
I was clicking on some oddities the key
o'clock token is transferred to the
micro services and that's why a big part
of the hard work was done was done by
Daniel pet scenes which is with the
French it already would work pretty
similarly when you do this all right
ah yes I'm not sure this one works if it
works at school technically not in
person from yeah so yeah of course we we
are accessing the micro service thanks
for this good idea
and as it is for example as this one
stick you wanna you can imagine that
when I go there it is standing the
correct - correct
a token to the micro service there is
even two special ones offline accident
oh yes radiation which we don't which is
not wrong yeah I don't know those ones
yes this just comes off from keep large
we configured only role user and role
that means yeah k clock is adding two
more special rules so what happens is
that the Gateway is authenticated by ki
ladki that gives it a token like a to a
stanza token to the micro service and
the micro service trusts to Gateway is a
key clock so it accepts a token from the
Gateway and everything goes through so
it's also quite short of work air
because so by default what we just saw
is that it is a stateful mechanism so in
the gateway why it's working fine but
the micro service is not stateful notice
that micro sites can scale it be
stateless we're going to Turkey with
the fullness that left very soon and so
that's an issue because by default if
you ski o'clock and spring good I was
going to happen is that spring was just
going to ask key o'clock for every
request do I trust this guy I'd Westeros
this guy whizzy whizzy all the time
so that specific key plot endpoint which
is called user info it's going to call
it all the time so it's not going to
scale with GWT you've got a token which
with everything says dokkan it's sign so
the micro services trusted token open it
and everything works fine but with kid
lock same thing so the micro service
always gets back to keep lock to ask so
of course a big performance issue
because Jude doesn't scale at all so
what we added here is a specific cache
so we we have our own cache to cache
tokens on micro services so we don't ask
key clock also time this token is valid
all this works because tipster also
manages the cash value so if you say to
the other guest who got distributed
cache with that working with doing
anything and that's is the different
option just working by default this is
one of the strengths of gesture because
you see where everything integrated
we've got docker we got kick lock we've
got other guest everything is and we go
to John Villa fronting everything is
tightly integrated together and works
find out of the box probably this is the
fastest way to set up kick lock oh yeah
you know who yes if you don't do that
good luck something for traffic traffic
we we well know keep Lucky's worse
o'clock you need save a lot yeah I left
right I do idea why we were sweetums
well we did a little a cation at work
and we are three teams only one team
succeeding I didn't succeed and we each
each of us had one day and we saw we
took the winning solution so if you do
it maybe you if you are lucky you will
need one day if you're unlucky I mean
when was the losing team so the
interesting thing is that is already
working for you so you win a lot of time
and if that doesn't suit you completely
as you've got lots of options lots of
configuration you can tune stuff that is
what easier to tune something this which
is already working I mean there was
already a proposal to move the
authorization part to the client side
yes
so yeah but there are discussions like
it should be done on the server side or
the client side and they're already
people are trying to bring in a lot more
other options yes this is an option but
notnot so back to the tipster console
because switched our data over time and
we have a demo for that yes yes we will
have time for the demo for that morgan's
as as we said more options yes we pretty
much cover everything in the microscope
is world I guess almost yes yeah so is a
moto we always give options for anything
we don't try to you know go into one
particular solution and lock in there so
since we offer elastic stack as gesture
console for monitoring we offer
Prometheus as an alternative as well so
you can choose between gesture console
all Prometheus so if you are choosing
Prometheus which is which is the
commercially supported no it's not
commercially supported sorry the other
one so it is also open source so it is
an alternative to James to model console
the advantage compared to elastic stack
is that Prometheus of us
multi-dimensional data and they out of
the box they are they support time
series variable
they have very flexible queries and
graph on our based visualization so if
you're if you don't like the elastic
stack then you could try Prometheus
which has graph on ax which is very good
for time series visualizations and stuff
and it has inbuilt alerting you can also
do alerting with Jeff stack on console
but then you have to use Alex Alaska
alert you have to configure that here it
comes out of the box it also it is
returning go which I was told that
better it's writing in Java
yeah so it also goes with you know
console traffic and this all written in
go you could have a full go yeah yes you
like go platform because a lot of people
go to platform
yeah well lots of people in the same
fashion world
go well the only feedback I can give you
is that when I build my stack with
console and traffic it which is a lot
more memory than with Java or starts up
faster I guess it starts out faster but
it uses lot lot more memory I don't know
why so just the first setup he uses but
more memory but also voice is faster and
got some it's also fades better so it's
a yeah it's like a trade-off like this
it's really choices
I have no recommendation for that though
for myself I'll use as I'm a Java
developer I'd rather use the Java tools
because I'm not lost with them if I want
to tune them I can tune them that's all
so with gesture console with gesture
console or with prometheus
we also offer Zipkin as an option so
when you generate the docker compose set
apart you can enable to use Zipkin so
Zipkin is a distributor tracing system
so it collects your timing data that
means from from your logs it collects
your timing data and all registered
services or your micro services gateways
and everything so so it sends your
timing data to Zipkin and Zipkin creates
a dependency diagram based on that time
in data so by analyzing that you will
know where you're losing time you can
trace no performance issues and stuff
like that so it also helps to
troubleshoot latency issues in
microcircuit etcher which is very
important because once you have lot of
services you know running here and there
in a lot of moving parts
it will be very hard to track or trace
where stuff is going wrong or if your
performance issue with lot of
Microsoft's you know in between gateways
and all these things it becomes very
difficult to track where you know where
you have to tune so Zipkin helps there
because it builds a dependency tree and
tells you exactly where to look
so you can start tuning that part so it
also supports in mem so so this can
purchase the data so it can it can
either post in in memory or it can
support any of the commercially
available or non commercially available
as well like it can support MySQL
Cassandra or elasticsearch for storage
so it goes very well with the
you know monitoring solution so you can
use it with console or with prometheus
we Auto configure this and provide
docker images for this as well when you
choose this option next is about scaling
micro services yes so as we talked about
when toying with scaling of course it
isn't
yeah that's why we will have demo with
everything after that so the first issue
about scaling is being stateless austat
for just talked about it a little bit
earlier and I said we were going to
detail that so scaling is a class
application is very easy that's why
people always tell you to be stateless
and that's why chip sub by default uses
test status design as much as possible
at what we have with JSON web token for
example with GWT who has fully stateless
so it's great and if you want to
schedule just one more instances and it
works of course one of the issues that
the instance need to see each other and
so on is that what we do with super g3
and so on so that's ready no issue with
zip stuff of that unfortunately
sometimes you need to be stateful for my
usual easy to use cases the first one in
security we just saw it with with open
edge connect the other one is caches
that's going to happen and we talked
about this just after we're going to see
that when we want to scale a micro
service who sees on top for database
while you going to have a cache and
you're going to want to scale to cache
so typically this is going to be an
issue because this is going to be like
to under some stateful data it's bad for
scanning
but it's necessary and we are going to
see how we solve that problem there's a
usual solution for that when you do a
monolid
is that you do sticky sessions it's a
very usual solution remember first time
I did it it's like 20 years ago
even worse original documentation for
Jebus on sticky session like you know
she was 2.2 something like that so
that's very good when you have a
moderate you can one big JBoss server
the issue with micro services that maybe
you can have sticky sessions on your get
worse but then there are micro services
don't have the sticky sessions and
imagine that if the micro service : as a
micro service are you're going to hassle
cast kind of supports or distributor
well you get distributed HTTP sessions
so for to get wet it's good but let's
for to make your services but still not
good enough it's not yeah it's just
basically not going to work very well
it's a good solution
yeah for micro service it's not good
it's not good enough which was in any
way the biggest issue is getting caches
yeah even for security because I as I
just told for open educate we also store
this in a cache so but it is just cannon
caches how do you scale caches well
we've got for caching options with
chipster
the first one is not using any cash so
it scales very well for your app the bad
thing is that you son also load to the
database so the tables is not going to
scale that's what I see in a lot of
contrast or you know people just don't
care
put everything to the database but your
database is just not scalable at all so
then people tell you oh yeah okay but
I'm going to use it no SQL database but
if you use a new SQL database you won't
have the relationships and so on that
which is showed so you lose a lot of
goodness from relational database and
also I'm using a lot of MongoDB for a
client I'm not sure it's got that well
in the end this is not easy to back up
and you can lose that a very easily so
it's not good for everyone but so first
option is not using any cash
oh and by the way chips are support
MongoDB
we've got like 15% of people using
MongoDB with chips that's quite popular
and Cassandra Cassandra but
unfortunately I love Cassandra like
totally love it but we have got very
very very few people using it so maybe
we're at one time we we left I don't
know if we'll do a bit a note it works
very well
but very few people use it and we should
support couch bears any time soon
there's already appear in the work with
dr. Pierre we've got at least two
project working because so two people I
know from different companies so two
projects using any in production but we
still haven't that time to merge this
pull request it will probably be in the
next widdy's while it will be next to
this because I promise to get you I work
with him tomorrow I think so I promised
him so on so first option - the good
option yecchh cash cash the word default
cash usually from monolids it's very
popular it's very good like everything
is good it starts up very quickly that's
also why I like it better than other
casts and infinity span you have a
better startup time the issue with each
cash is that if you want to have
distributed cache but if you have two
options
the first ones the network broadcasting
which is like forbidden in most
companies and doesn't work with docker
so just what watch so other option is
that you've got to list all the IP
address you are going to use so of
course not going to work because we want
to scale live so no option works so
unfortunately we have no good option for
eh cache and if you want to scale well
to have distributed cache we've got two
very good option the first one is a
caste which is our original option which
works very very well which can also do
HTTP session clustering so that what we
just talked about I'm not recommending
it by default if you need it use it but
if you don't need it don't use it and
we've got in Spain by the way that which
basically will be same as other caste
just a different solution from a
different company but both are
equivalent one fun fun fact about the
caching solutions each of them were
implemented by dice but your company
doing it oh yeah yeah yeah yeah well we
well it's a big good
what's very good with zipser is that
we've got companies contributing so yes
catch code well I could it's the
original version but it was recorded by
these people from software AG so the
people doing H cash I sell cash I also
carried the original version which was
recorded by see people from esocast
and in spain was carried by the web by
one of your friends who works from where
that so each option was coded by the
company doing the cashing solution so
you can imagine sporty better that what
you have coded yourself first so what
well good reason to use a code generator
is that it's going you're going to have
code written by the people using the
caching solution which is probably
better than the code you would write
yourself at this time I let them delete
my code and put that question yes of
mine because that's what I think I think
they're better than me and oh yeah and
we've got some added bonus with both as
a cast anything span when you add nodes
with will see we will use talk about
that when you add new nodes so they all
join the same cache and if you have idea
net or that kind of thing everything
will work out of the box they scalar
variable very well where we will show it
into demo because we we have time for
the demo and so I would scale we've got
lots of pollution options we'll talk a
little bit on production afterwards but
just thinkin square to scale on the
laptop is to use docker so I'm going to
use the zip stroker sub generator that
we already used and I'm going to scare
some microservices and while you will
see that well the scale is the cache
works automatically
failover we just talked about scaling
but before the demo at of course you
scale but you also and scaler you have
fade over some time when others fail it
is managed by your underlying code
infrastructure so if you've got an
occupant at ease it's going to pop up
and you and you know to
undelete that service discovery is a
service discovery mechanism should other
to other services and and under
everything or the failures so the issue
we talked about with Eureka and we will
see it when we will make it fail is that
you a can take a few seconds by 3067
cut out of time to remove an old nerd
why is it so slow is that indeed
conversion is the next version supposed
to change but it's not out yet and as
I'm making taking a long time to release
a new version the current profession you
replicate everything in all not so
unloads I've got the full dictionary of
services so if you got 500 micro
services it's not very good idea to
replicate 500 micro services all the
time so by default the time I would is
quite big if you got less I know if
you've got five or ten micro services
you can have a smaller time out so that
should replicate quicker but if you got
hundreds of them it's just going to be
too slow and blotch and that work for
nothing so this is reason why Eureka has
got some very big timeout Wisconsin so
it's going to be much quicker but it's
immediate
immediately and then actually TP request
voting should under just fail you of
course what I mean is that even if you
occur you I in the 30 60 seconds when
you haven't seen anything so you are
eating a server which does not exist
anymore well you actually P you request
within my consumption under that fellow
so we did a specific tuning on the
Gateway for that basically statistics
and if you use fine so if you just want
to access a micro service from another
one while you can configure your
fallback so fine shoot under as a
failure but you can also tell you okay
this thing is failing well let's do
something else
so going to do a complete demo from the
two previous part we are going to see my
giant scaling any failover so are all
linked together so that's why
so it's a nice demo for everything I
will do I will we use the Gateway and
the first two microservices we need at
the very beginning
not a simple l world so they'll make
Wasabi's and the real gateway i will
configure everything with the card
compartment which we have already done
before but this time I would use
subjects our console to monitor and we
are going to run it and have fun with it
let's stop put view before
yes when they use the Gypsy docker
compose super generator as you see it so
I can look the compose for for moderate
or for microservices applications of
course I'm using micro services it's
going to ask me where all my micro
services are so it's my PI wonder
directory as you can see here we see all
the projects we've done because it
scanning everything so it sees gateways
and micro services and it remembers my
life choices social idea when you are
developer is that you know I'm only
working on this and this and this I have
my custom code I can work on and and
then the final ad maybe you will have
everything so it's a great tool for
developers we want to test micro
services from you know when you work in
a team you know you're working on the
Gateway and you've got to micro services
from other team exam and then you pull
the images from them and you don't even
know what they are doing but for you
it's all packaged for you and you don't
even know it works but you can already
use it so so it's a gateway micro
service an online shop so this time I
will use the GPO console as you can see
like the pod you can choose Zipkin a
primitive us here we have two more
options so you talked about Zipkin which
is really must-have if you want to see
the flow of your HTTP requests
but you can also use kata which is
something which is cleaning up because
the issue with what we do is that it
just blots let's put everything into
elasticsearch so at some point you need
to clean it up
not you putting to use it because I only
had three hours up telling me I don't
have my images for that should be there
because we did it before I don't know
maybe not and I never did it oh okay
sorry we've got tons of docker images to
do I shouldn't just be random locally
all right Josh dark gateway I should
have been the Gateway before 9:00 sharp
okay good buildings yet okay image for
everything I didn't do it at the
beginning yeah yeah i mean ii desuka
afterwards and so it's building to
micro-services building the gateway will
build faster and let's come back yeah
and once everything is is build up I
will just run docker compose app and
everything will we work is it quick yes
we need two things built just want to
wet that Ron is running the angular
compilation votes should be fast yeah
I'm just so do you see what would do
next just make give some time once we
have also its you okay so by the time we
finished let's take a quick look at what
we do to support continuous delivery so
yeah for continuous delivery you need
good testing infrastructure and testing
support so we suffer a lot of testing
options so
on the server side by default we
generate a lot of J unit tests we also I
mean J unit of course is a de facto
standard in Java so we do generate lot
of that so you can run them based on
what you have choosen Gradle or maven
you can run them using the default
testa's so we also generate a lot of
spring integration tests they are also
returned with J unit mockito and spring
test context so we do this only for the
rest endpoints I mean or the rest
resources so we generate integration
test for them so mockito is also very
excellent for mocking mocking and
creating spice for your services and
endpoints so you can also run these
using maven test or Gradle tests so they
run in memory versions of whatever
database you use so we also provide in
memory database for Mongo Cassandra and
elasticsearch when you do the testing
which is like very unique so you can run
integration tests and on the server side
we also generate performance tests so
the J unit tests and the spring
integration tests are by default
generated they are not options so they
are not options whereas the performance
tests using Gatling is optional you can
choose to enable them so Gatling is the
Scala framework which is very good for
load and performance testing so Gatling
tests are generated for entities so we
use the Gatling scalar DSL while
creating the test suits they also
provide very good visualization using
high charts once your tests are done so
it is very good to analyze how your
application is performing and stuff so
you can also do load testing with it so
I think this is one of the go-to tools
for performance testing these days very
very good - yeah - yeah so you can use
maven or gay Gradle to run them and
select appropriate test suits and
execute them as well oh and by the way
we say getting as we have security
we under yeah examples so I wonder if it
works with operated Kinect that would be
nice
yeah I'm not even sure it works I think
it works because work yeah yeah Matt did
some tests on yes oh yes so it should
work because if you if you do not use
GIPSA then first of all you need to
learn to scale a DSL which is not that
bad that are but people are often
frightened by it but the biggest issue
for me is that you need to to under the
security and so by default all the tests
they work with whatever security options
you choose we we make sure that it works
with the we make sure everything works
out of the box
yes so depending on your options so for
BDT tests we provide khumba support we
don't generate a lot of combat tests we
provide the infrastructure for that we
configure cucumber we put in all the
libraries and stuff we generate a sample
test case but we don't generate tests
for entities yet but you can easily
because for BDD testing it's mostly
driven by your business needs and this
is supposed to be a business test case
so it's hard to generate them so tests
are return using joking you can also
this is also optional you can choose it
when you generate the application these
were on the server side on client side
by default we generate karma and Jasmine
you know so come and Jasmine you do this
so tests are returned using jasmine and
they are run using karma this is one of
the most widely used unit testing
frameworks in the Anglo volt and
otherwise as well so you can run them
using yarn test command for e 2 e tests
we also put a support protector as an
optional item so you can to enable
protector tests are again return using
jasmine and run using protector so it is
default testing e2 testing frames over
angular because it's from the angular
team itself it also supports parallel
testing no having tests suits and lot of
stuff you can also use so this uses
selenium webdriver that means you can
also use it with selenium grid so we use
it in our company selenium grid so we
can paralyze the tests and stuff like
that so it's it's very good when you
have lot of tests so it is very nice
most other
testing you to testing frameworks like
you know Nightwatch so there are few
others they don't most of them don't
support selenium grid so this is a very
good advantage if you are in a company
and if you have selenium grid then you
can you know run a lot of tests
parallely and all those selenium grid
instances so this is run using yarn e to
e for protector also we generate entity
e to e test as well as some of the other
application side e2 tests as well so we
generally quite a lot of meat to eat
test cases various yes very important
what people yeah and you might not sure
love it because it's a graphic so once
the testing part is taken care of you
also have CA C D sub generator that
means you can generate your pipeline
using gesture as well so currently we
support Jenkins Travis CI gate lab and
circle CI so once you fire up the sub
generator it will ask you what kind of
pipeline you want to use you can choose
it and it generates a you know a
configuration file for that for Jenkins
it generates a Jenkins pipeline with all
basic steps like you know compiling your
application building your application
testing your application you know
running e2 tests and stuff like on even
deploying if you are choosing Heroku
currently we you know generate steps to
deploy as well for other cloud providers
we don't support that yet currently only
Heroku is supported so you can anyway
you can still generate the basic
pipeline and you can customize as per
your needs as well
so still have the templates there for
you so now we can see how we go to
production good along with other demo
and if we have time I will do a little
shy Yesi yeah we can do that
oh hey so this is an issue I guess I
guess Duke your crashed yeah wondering
how can a demo go without but crash is
very often dukkha for Mac which is very
often so I'm not too surprised and we're
just restarting should not crash in
prediction with that anyway dokgo
supposed to be the future and we're
starting everything well as it can take
little time to start
we can do a little CI CD is that that's
good
Travis CI so that's good you remember I
generated an app which is weighted your
profile was generated several up
repositories so the first ones Olo world
where is it
microservice so generated that up at the
very very beginning you see three hours
ago
let's go to that app three hours ago
yeah what seems like we haven't
rehearsed so here it is and I would like
to make it work in Travis so basically
let's say oh yes I added I value the
controller in it git commit Yolo I
always get kamijou low and now I'm going
to do lips touch ICD I'm going to ask it
to generate for me a Travis CI
Delta should use CC and no I'm not going
to departure
Goku so this generated for me a Travis
build pipeline I'm just get to commit
try this
so now if I come back to my app yeah you
need to push it oh I didn't push sorry
git push so if I come here we've got now
the Travis CI pipeline which is here and
if I just go to Travis now if I'm
remember where it is
I can't sync account
because I got tons of mine on the pitch
we have got too many yeah
and make wasn't yeah so that's just a
search box didn't work that's awesome
and and so now I've got a trip is built
for this and if I can just figure it's
actually a build I will have a built
with my no not a custom build oh I'm
going to force it get add get you know
you just to add some stuff it push that
should to trigger the build
come on it is so trigger the build and
we well we wait a little bit and we see
the Wizard so this one started
yeah so now it started my let's go back
to my original demo so yeah we started a
wall micro-service architecture so let's
go to first thing the Gypsy with this
way is everything running remember me
so we've got to gauge where microservice
and what I am to micro services let's
refresh this automatically and we can go
to the app oh sorry we can go to the
application which is a sign-in and let's
not add again a beer so I've got my key
to working I've got the registry working
we talked about the Jeepster console in
retail so this aggregates logs from
everything so this is this is a basic
screen from cabana but we've got
dashboard which are already created for
us now we can see the those instances
there we got to get where to micro
services in the registry and we've got
some cool dashboards I like this one but
can change of course I'm going to auto
refresh it and so this is done by
default by JIP stuff so I didn't have to
do anything to have all my logs
aggregated and I've all my dashboard so
that's very good and so now we're going
to have fun with those micro services
Doka I'm going to scare them look a
composer scaler
so I'm going to scale of course online
shop so it's so one which has database
and then distributed as I'll cast cash
so I'm going to scale it three times so
we already got one instance we're going
to have three instances let's do this
so if we go air to online shop for the
mode we go to Swan and it's going to
launch the other ones and we're going to
see those instances appearing air and
then we're going to play and crash some
of them to see what happens in the
meantime we just have a look at Travis
connection timed out yeah so good with
advertisement for Travis no it's working
Travis is done learning everything never
know what is doing because running the
test no packaging building Wow
yeah bitch success should be happy oh
sorry so as you see you know also I
didn't cut anything I just use the
correct generator and everything is done
for me well we didn't I didn't even know
the Travis and syntax or anything I just
as we observe build Travis to pipeline
for me so it's starting up let's have a
look the instances so it's so that tune
instances are arriving
you know starting something quite an air
let's go to discover you remember we are
using as webcast so there's a little
request I love with a little cast this
one as you can say there's my man a
micro service application source to
other services so now I've got a cluster
with three members it already sees it so
I know that other gas is working here
because so it
it's so it in the logs it's Aussie
Aussie Aussie others see you've got I
see and everything the instance names
and it sounded - true true the Egyptians
or so I know everything is running fine
so now if I go to my app ear so to serve
this registry I see everything is
running and if I go to my Gateway
administration get well as you can see
the online shop
now we've got three instances of the
same micro service which are all up of
course and it is going to load balanced
requests between those micro services so
if I go to product again so this is
supposed to be load balanced of course
we're going to have to prove that well
it works like that but we don't know if
it on which tsavorite is running so
let's kill some stuff basically going to
be automatic so we have a graphical view
of what I what I'm doing you see we've
got four instances
err one two and three I'm going to kill
the first one and just to be sure I'm
going to kill also the second one which
one did I kill all right sorry I killed
the second one this one is the first one
so I killed the first two ones so as we
as we say said so the widgets we didn't
see it yet does your issue with break up
different I'm out yet so it's blind Oh
see things everything is okay and a of
course as its replicating here
yeah it's also blind so it's it thinks
everything is okay but it's not okay we
go to a product and say it's failing
let's create a product hello
it's failing it's going to normally it
should run web in with all the instances
we're going to wait a little bit oh yeah
sorry
just once you know general because this
thing is really bad just a new message
will show something we didn't tell we
had a challenge in J&amp;amp;J to answer
I say last couple of months we added
Zalando chipster sorry Street problem
problem library social library - under
your your spring MVC West issues using a
number of FC but the specific FC for
that so this is the one supposed to be
standard around the edges and stuff so
so it's level low for final 500 errors
that's throwing in general if we have a
look at yeah we get it yeah so now we've
got ours you know in in jizan you got an
error page so you should of course
customize it go to a title and so on and
if I go so of course we we did some
basic error messages for you and we tell
you yeah I would customize the class of
course so everything should be fine
again it's sinking oh that's the general
it will come back agenda still not
registered
Oh still has to dr. what it's doing when
you're bedstead so we have an issue area
because it should whirlwind with
remaining server it's working quite bad
we'll wait a little bit you will see in
let's a couple of minutes we'll come
back it always told us does which will
do and we will see oh sorry but we can
have a look here also is as you see in
just GIPSA console we had three members
then just to Jane just one is so me
killing them in sunny the information
and if I go to the dashboard
I see the also microservices those LED
world which has disappeared and one
which has not disappeared yet seeking
some time anyway so this this is much
more faster with console yeah amber to
and so
I would sew it and now it's working
again yeah so now it does no and now
it's while it's working
no I think in the registry in the yeah
everything is good now yeah so that's
exactly takes about 30 to 60 seconds
normally we do some optimization I was
hoping it was going to be better than
that honestly
but yeah anyway whatever we do after a
few minutes which always come back it's
always worth and then you can scale
again and so on you can have fun with it
we have three minutes left so let's move
on going to production it's very easy
slide anyway because we did that already
quite a lot without telling it which if
so we got to death mode where everything
is ultra loaded and so on that was the
biggest part of our talk last year
experience in the third mode we have a
specific build that's what we do all the
time with docker so we use a specific
web pack configuration to greet the
optimizer fountains there's a lot of
work from Depot or from lots of people
but especially Deepu on the on the web
pack configuration spring boot has got a
specific configuration with no actual
dealing with bigger cash values and so
on by default our caching values are
quite low because you can monitor all of
them that's what we you can see in the
in the registry air metrics you can you
can see also I know this one let's go to
my application you're going to see all
your own points a performance your
caches and you're going to be able also
to see them here we've got specific
dashboard for that we've got only four -
- oh it's good desire and I'm not using
your cache yeah yeah it just works the
same way for the others but basically
we've got lots of money trying for you
so you can see if your cache is good or
not and of course by default it's a bit
low and it's up to you to increase it
the final wizard that we generate with
that production build is an executable
war file you should people tell it an
exhibit about jar file we keep the wha
suffix because you can also deploy it to
Tomcat or to an app server and for that
you need to have the Wow
stiffing 6i extension but it's it's a
jar file it's an executable jar file it
has got an embedded undertow service on
the toys an observer from JBoss which is
very light and it can be run directly
like this it's just an executable file
in fact I didn't do it err because I
wanted twelve by Y SQL I wanted to have
to tiptoe with these tweaks and so on
but if I want to run everything in a
simple way with just an executable Wi-Fi
that's also why we support a lot of
cloud we support openshift
cloud foundry kubernetes air whoo-hoo
that's a bunch which about tons of them
because basically it's just an
executable file so all of them are
support Java and can run an executable
file so it's quite easy to to earn
anywhere from that 12y file you can also
do what I just did several times before
you can build a docker image which is
better than Alpina with Java 8 GAE only
and as it to the crime actually supposed
to be able to run it easily everywhere
except you like in my little example
when the car crashes but that's not
supposed to happen and thirty minutes
left - do you have any final words oh
yes supposed to be QE yeah I have a
discount code for books here if somebody
is interested
so we'll post the link the I'll just
tweet it yeah it really three different
this thing as well so if somebody's
interested you can grab a copy it's
supposed to be coming out next year
beginning of next year oh yeah of course
Q&amp;amp;A time but you can just come and you
have lots of time and we will be there
for the world which well I won't be such
movin the day after but
there will be there on Thursday and
Friday so just come and have a talk if
you want to you also have a Europe on
Thursday oh yes there's a bit of a
phaser on Thursday evening yeah you'll
be mad fireballs there will be lots of
things it's better of affairs oh it's
like community and together and in the
evening we can also have a lot of Q&amp;amp;A
then as well oh yes
oh well that we Julianne me a Matt ray
blent central from the core team four
main contributors yeah basically so yes
if you have questions or they said to
come to the both session Thursday
evening is the best best we will have
t-shirts yes we have special gesture
t-shirts as well yes so if you want to
collect your t-shirts that's the place
to go
thanks Alice thank you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>