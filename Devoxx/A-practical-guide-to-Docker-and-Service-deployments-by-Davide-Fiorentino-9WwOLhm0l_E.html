<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>A practical guide to Docker and µService deployments by Davide Fiorentino | Coder Coacher - Coaching Coders</title><meta content="A practical guide to Docker and µService deployments by Davide Fiorentino - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Devoxx/">Devoxx</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>A practical guide to Docker and µService deployments by Davide Fiorentino</b></h2><h5 class="post__date">2017-05-17</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/9WwOLhm0l_E" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">Birgit you play get into it make sure we
are ready so who wants to sleep can
raise their hands I would like to sleep
on okay so good morning and thank you
for coming so today we will I don't know
how much you eat yesterday in the night
but usually when you eat a lot
you cannot sleep very well so you may
have nightmares today we are going to
talk about one of my nightmare hoping
that you're not going to leave it the
same nightmare unfortunately mine anime
was not during the night but it was
during the days and in the office or not
something that I will wish to everybody
but okay should have a sort so actually
the one all the things that I want to
say you is that whatever I'm gonna talk
you today is the truth nothing else the
truth I know that the web moment where
you will believe no that's not that
can't be true it is unfortunately it was
so even it's unbelievable it is going to
be all the truth quickly about myself my
name is Davide usually for the English
people I prefer to be called a lead just
because many cannot prove my name so
that is much better I have worked for
different organization including on
United Nations and Oracle University
giving Java classes so it's hard for me
to say what is my job usually it's the
worst question that you may ask me so
what I usually do trying to innovate for
the realm working and prove the
environment either culturally or
technology to do that usually I continue
study every month every month new topics
it's hard but sometimes you can have a
lot of rewards not all the time so such
something looking about the my work at
the United Nations
we had faced a huge problem so we have
to deliver an application to rock
countries where you may know if they
have computer is not something very fast
maybe something that is still running on
name it AMD
big k-6 or something like very slow so
the one of the the problem was to build
to deliver something that could run on
every computer even when sealed windows
95 and 98 if you don't believe me than
some countries that are still using them
but they need them because that with
that software software do we double they
can get some loans from World Bank but
of course if you're asking mortgage the
bank is want you to return their money
sometimes with something more some
interests me it's not it usually game of
World Bank but it may happen so they
want to check that everybody using the
money in the right way to deliver that
thing we spent years to build the
application and the Installer and check
that everything was working on old
operating systems that was a nightmare
but it was a technological point of view
so we try to deliver the best that we
can the application is built in Java at
the time doctor was not something that
we could use because you know exist
anymore
not yet and to be honest I will have
loved to have daughter because lots of
times people were calling me oh this is
not running this is not installing and
then we found that the way different
configuration or at the beginning was
only running on Windows so different DLL
or Windows was blocking something else
or the firewall other stuff it was at
the beginning a lot of time that the
application seems not work and of course
it lenny and user does not care why is
not working you just want the
application to work and many said oh but
why you can have an installer that does
this stuff yeah it's fine if you have
the latest version of Windows we can do
it but if you're running Windows 95 the
user may not have that feature so it was
hard for us to figure out how to have
that application working unload the
system I had thousands of virtual
machine with all the different
configuration sometimes also ones that
we found that running the application on
the Turkish machine was not working
because the script was doing some kind
of crazy stuff
but assume that the user was running an
operative system with English in English
we talk to Turkish it's different so the
output is defined and we cannot not grab
the information that we want so let's
start building other six machines for
Turkish unfortunately I couldn't use
docker lately at which to add a company
that was working with genomes we were
trying to change or to predict how did
we make and change and how to predict
also how to cure to fight some illness
with without actually doing experiments
but just looking into large amount of
data and then finding the right maybe
thing that may cure something else we
had to work with a lot of data and also
we were building an application at some
point some guy say oh you know there is
another application on the regional
group that had been an application that
is doing part of the things that we need
so actually as I don't want to reinvent
the wheel I said okay yeah let's look at
that that application that time I was
leading that group so it was fine we can
save some resources we can focus on what
we really want to do so we started
looking at that application and that
time I discovered docker because that
application was using docker fine hell
idea is fine just new virtual machine no
docker Paulo yes let's try never care
but learning something new so we started
around the commander when documentation
and it was not working daughter was not
compiling with image so there were some
problems so I spoke with the developers
they were looking some soft ballad
meantime I was also building image and
doing the changes that I saw in the
error log that were happening so what
was preventing building the image the
time I needed new was an image we will
discover today after spending some time
I made image working so that was how was
starting working with docker
it was not easy actually the the way
that that be they were building the
image was not clean but I could
understand it was a beginning they were
still experimenting and developing the
application so they were their core
focus was not docker that's fine and
that may happen you may see some
configuration of dog at the moment are
not using specific times how many you
already use docker oh cool
how many you already build an image with
docker beautiful ok so when you are for
all the others when you're building an
image actually you have to build some
instructions we will see in details
later
some of those instructions sometimes you
have to write few things some other
times you have to write a lot of stuff
that project they were writing a lot of
stuff so it's like executing a bad
script with a lot of informational
blessing hundreds all rows it's not the
best option because anybody that has to
maintain that thing has to go through
all those rows
madam send everything that you are doing
and if you are doing some hacks they may
not work ever every time or maybe
somebody that is just maintaining them
or trying to change them they make some
mistakes so that can happen that that's
fine we will learn how to avoid those
things so how many of you all may know
last is working in an agile environment
so yeah actually that's the the point is
is it really agile your environment who
really believe that is working
environment is agile
COO two three four now is that not
option okay so almost everybody claims
that they're working on agile or the
things that are working are drive then
it be working on an agile but if you are
spending how us with your colleagues
trying to define a feature or to the
side why
you missed some critical relief or
everybody else believes that you're
ready to release a new version and maybe
your boss says no we are not yet ready
why because we haven't run that test
maybe everybody else run the test or
maybe it was his duty to do that test
but that may break your agile so you
come to the end of the Sprint if you're
using spins and you can't release so
sometimes you are spending power so you
have the impression that you're wasting
time and I would say you that it's
definitely not agile if you ends with
Manolis because then when you want to
change even a little thing you may spend
hours days weeks just try to change as
more thing so I would say that we should
have studied this in my previous project
with genomics because to me Mona Lisa is
something like an illness we should be
more more you know when you're working
with the model is usually you know just
a single part of the ball application it
may work it may not or sometimes he
works but nobody else wants change or
update or even a library because you
know maybe you fix that things and then
you broke everything else and most of
the times don't have tests that check
everything so just it's it's raining
that's maybe why you don't want to
release quickly because you want to test
once twice three times then let's have
somebody else to to test and then let it
rest a while and see if it's still
working and it is still working with you
you're just doing a little step in
production and say yeah yeah maybe
working but it is not the best thing
what I'd really love to do is to build
something deliver it and never worry
when it goes to production know if it's
still running because I want to be sure
that everything is still running and I
don't really like when I hear
oh my computer is working on mine is not
working production is not working and
tree is not working so even if it's
working on your computer it's not enough
so that is when we can get to a point
that we need an environment that we can
reproduce and that is why often you may
have seen visually machines we see them
this presentation as well let me be fine
because when you have some environment
that you can test and you can move and
is working you should continue to work
it's not always the case so when you are
working with a model it usually you go
down in a spear because you don't change
something or you just make a knack
because you cannot change it in whatever
you consider the proper way you can do
that because you are scared that you may
break everything of course nobody else
won't nobody wants to break everything
we try to to survive to be honest I
don't think that surviving we just be
the things that we should do I believe
that we should improve our environment
we should improve our application on
daily basis even more change may help
may help the application to improve that
something that we may we should be proud
of having working with how many of you
are proud of the work that is working
now okay not too bad I guess like people
in the room so it's usually less people
but let's try that's fine
that's why we can we can go there so
what you may hear that is your
application is complicated yeah small it
it's completed completed some somebody
can say that it's complex it's just a
little better than complicated what I
really love to to hear another say that
that application is easy it just works
so how to get there it's not a dream we
can have well it was a dream for me but
now that ring became true so I want you
to have the same dream make true so when
you are working usually without your
application you have to decide if
you need more CPU or more this storage
or database storage each unless your
company has very your deep pockets you
have to decide something that is in the
middle you cannot have a thousand CPU
and an unlimited disk space because that
would cost a lot and even if your
company has very deep pockets probably
they don't want to spend waste so much
money on such machine and then if that
breaks you have to buy another one so
it's a not best investment that
companies want to do so you usually have
to try to find an average or CPU or
database that may help your application
to run in the best way smoothly wizard
and say but so usually we cannot have
everything that we want but there is a
light somewhere because actually if
flabber application if we can split our
money's in some parts that is doing a
lot of calculation but just need CPU and
almost no disk space another one that is
just storing the data we can have lots
of resources just CPU and a lot of uses
just leak that would be cheap
maintainable and also we can add more
Seuss's as we need without having to buy
another machine that may cause medium
but so how to to do that that's the
tricky point so we know that one size
does not fit all and but what is the
right size that's hard to answer you
know developing your application you
know if you need more CPU or more memory
or more disk more data base you know but
if you can split and having different
machines that had the most maximum of
what you need on that machine you can
work smoothly so you can achieve your
task so what we did before was using
virtual machine
so let's look how this realization works
how many of you didn't use a virtual
machine
okay one okay
- so we almost almost everybody know how
virtual machines works and actually if
we want to simplify that the original
machine is like a computer that has the
the system departed system the
application configuration connection
usually and then on top of that virtual
machine the virtual computer you are
solving the application you're running
the benefit of your machine is that it's
cloneable so you can copy it and move
and install on many instances without
having to rebuild everything is not
Hardware so you don't have to move that
thing to another Center it's cheaper
usually you may have to buy license but
it's it's fine so how do we build the
little machine we start from an adware
so we have our bare metal where we are
going to install something that
something is the operative system as we
usually do and on top of that we are
installing a software that will allow us
to run the digital machine on top of
that software we are installing another
operative system because our application
needs the 30 system and cannot use the
underlying operating system not with the
virtual machine so you see something you
may see something wait we see that in
detail later and then on top of that
property system install whatever you
need to have your application running so
at this stage we have something like
five layers there may be some more but
let's say quit five how we charge a Sony
different from the docker environment
so actually we document we have hardware
that's fine same thing for virtual
machine we have an operative system
that's same thing and then we have more
software that is called docker
it's the ocher virtual machine not is
not is larger application running
virtual machine it's not they are
different so on top of the daughter that
is an application that can run other
stuff and though we call those other
stuff images and images like what mage
is actually an immutable take
immutable means that you can copy that
everywhere you want and it's going to
work the same way every time that you
run it when you run it the image then it
has been called container because the
container contains all the configuration
and may contain all the data that you
need to run your application so so far
if you see we are still with five layers
but we have something more because we
have more copies or web application
other image actually now we know the
time that I run we may run everywhere in
the same machine we can run multiple
images which we cannot do in the same
virtual machine of course on the same
virtual environment we can run multiple
virtual machine but we are kind of
wasting resources so what are the
differences between literal machine and
docker
there are both five layers but if we
will see in detail you see in the visual
machine we have two operating system
sometimes they are the same some others
and they may be different but we are
wasting a lot of space in our machine so
even if you have an unlimited space you
are still wasting space so why don't
save that space we can do that with
docker
another thing that it's an important
about docker is that it's using the
underline kernel to do some stuff so
it's delegating lot of stuff to the curl
the underline kernel that's very good
because we don't have to install
different kernels we don't have to
maintain a lot of stuff because in
virtual machine
you will have at some point you will
have to upgrade that will machine to
something else let's stick let's say
that you are only working on Linux
environment but fine now you want to
upgrade the kernel you have to upgrade
if you are working on virtual machine
just upgrade maybe the host and all your
virtual machine that is a huge task if
you just want to upgrade the kernel on
your local environment we just create
the kernel on the dolls that we work and
that change will be picked by all the
container running on that machine so you
can save lots of time and also see if
it's working once it's going to work
every time it is not working one
is not working on my computer is not
going work to own any of your computers
that's good because then we can add we
can avoid that people say it's working
on my computer if it's working on your
computer it's fine
so let's get back to the to our model if
we want with we went to a point that we
want to split the Malloys in virus
micro-services I don't know how you how
much things you have with micro-services
nowadays everybody almost everybody is
talking about micro-services it's
something cool often you can air micro
services and docker together
there is a reason why that happens both
because why you want to split
microservices and model is in micro
services and why you are hearing about
docker that's because with micro service
actually you are doing a single task the
best way using the most of the resources
that you have and using but sometimes
all those that you have so we can you
can have machine that has a lot of CPU
for an application that teaching using a
lot of CPU and you can have another
machine that has a lot of big space
because maybe it's your my sequel
application so let's say how we can
build micro service we start from an
operating system that's fine
sorry we are so we are building the
micro service into in the docker image
so how we build that image we define
what is the operating system that we
want to use you may have tests on
different systems you have may have your
preferences you may have a package that
runs on that system that's fine you
decide whatever it is on top of that
system you are making your customization
so you are sewing maybe more packages
maybe the package that you or another
branch of your company has built or is a
dependency is a library of whatever it
is you know you can name them in our
case maybe also do yours
you're also installing Jolla because
your application is running Java so
let's add another layer that use Java
configure the way that
you want so you decide version you may
decide other libraries dependencies and
also policies then we go to our service
so we can solve our service on top that
Java layer that means that when I'm
talking about layers the layers in
docker docker images are also immutable
so once you have that Java layer it
won't change you on the on top of that
layer you can install any number or
micro services that you want they will
all using the same configuration as
Dory's b-dawg images build as layers
then if you want to change anything that
is below your micro service you can just
change that rebuild just copying your
micro service and it's keep working as
it was but you upgrade the world stack
so somebody can say okay yes finance
same thing as building another virtual
image no it's not just because we can
reuse the image the layers and when if
we are just changing let's say the Java
layer or better
let's change just the microservice layer
because we just released a new version
we don't tell top-grade everything so if
you build your service that is for
example one mega and I will show you
service that is using less space you can
upgrade the wall environment with just
just sending one mega data to your other
machines to production so instead of
sending a typical application that is
using an application server like JBoss
or pi r is probably going on is for sure
going over three gig of data and when
you want it that will be a virtual image
you have to send three gig of data the
one with this in this case you can just
send one mega around and we will see how
and that we work because everything else
hasn't changed and need to change just
if you want to change the application
server layer because you have to grade
JBoss that's fine you have to change to
just send some amount of data not
everything and on top of that you can
steal our data stuff the benefit is that
anything your company somebody else is
using another job application they don't
want to know
they can just use whatever you build and
put on that on top of that their
application it was still working using
the same things and you can reproduce
them any number of times that you want
any still working so the K difference
with between
microservice and the application server
is that on top of the application server
you will install your application that
maybe be larger but that's fine so let's
see in detail how it did an image to
build an image daughter use a file that
is called docker file so how we define
the operating system it's this way in
this case I start from you mental so I
said just literally wrote from Ubuntu
1604 that means that docker starts from
another image that is being tagged as
you name it Bluetooth tagged as 1604 you
may realize that 1604 is the bathroom
that's fine yes exactly it's independent
so you can decide whatever you want
that's one of the benefits because if
you in your machine for example are
running Ubuntu or st. OS any production
on your head reddit you don't have to be
able major adduct because let's say that
you have a package that is only released
as DB you don't want to go in the mode
and build another package just for that
you can use it so you have major such
from Ubuntu you install that package
that is the bulls dependency with all
dependencies that come from with that
then you ship on reddit image there is
that system and it will work if it works
on your machine it will work on that
machine so in my case actually I'm using
a different starting layer just because
I made some customization something that
I'm I need and I'm not going to write
every time so I build another image with
some changes and I name it is just a
noise it concludes everything that I
need when adding a new tool just create
that image then we change the floor
from other images and I will build new
images the process is very very easy
so I also target with the version number
so I know that that version runs on
Ubuntu 1604 and it is the first release
and no patch I went to that after
sometimes at the beginning was just
using from Ubuntu and knowing all the
changes when I consolidate them then a
bit that image I'm not still reusing it
so let's say that we want to install
some package what you usually do is if
you are using Ubuntu is to upgrade your
package dependencies library and then
you main store something so in this case
we are just installing three or two
packages what I'm doing at the bit at
the end is removing the cache ubuntu yes
you may say you may ask why usually you
do not do that on your machine that's
because as I told you before
layers are mutable so once you store
that cache and that layer will stay
there forever so it's you're wasting
space you may not need that cash again
so if you see I'm also linking all the
changes so for docker that is just a
single instruction so doctor is
upgrading the library page
it's a storing Pleiades is cache is
leading the cache and also the color the
package cache so at the end I have just
the two or in this case two packages
like I want nothing extra so from this
image to the other one it's just couple
mega of difference so recently Oracle
finally released the adoption layer
docker image for Java previously it was
not available you can not redistribute
your image based on Java due to licenses
so what you would like to do is just run
apt-get install Java that's fine
unfortunately you couldn't because due
to licenses you have to a set some some
things so you need an interactive shell
which you do not have non daughter so
what I usually had to do is writing all
those stuff to be able to install Java
eight so it's a lot of things I also had
to accept the license it's not idea
that's fine that was what was the
problem so what you have to remember
that it's not an interactive shell so if
a 10-point the application or the
package at your installing is going to
ask you any damn equation if you only
have to enter and accept the default I
answer it won't work in docker because
it's not interactive you're running that
doctor is running that for you so you
have to think about all the possible
questions so if you remember if you see
also when I'm sewing package I'm using
the - why that's because I won't want to
not to ask anything
I already test those those stuff and
that's what you have to do at the
beginning when I was building the image
I was running a stalling package by
package by package to be sure that
everything was working it's a tedious
process takes time but once you do it
once it's going to work every time so we
are avoiding that rule - or thus your
system is asking you any question so at
the end you may want to do something
like that because your application may
point with Java home that's fine but
that's not just another configuration if
you see all the things that are run in
the image that is actually bash our bash
commands the only thing is that we
prevent them with the label run let's
because stealth docker you must run that
command so whatever it is you must run
that command when we build our image we
can copy our micro-service how the
command is copy where is the service the
jar file in our case and when we want to
copy that file you decide whatever is on
the right and we will see how right
means belongs to the container to the
image so it's inside daughter is not
inside your machine whatever is on the
left it's on your machine I will get
back to that concept because we will
have to do some stuff about that yeah if
you are working on an applicator
enterprise application you just have to
copy your Vegas somewhere there maybe I
prefer to call it an opt but you can
copy in also deploy application of your
application server or anywhere else and
then you install it it's up to you you
decide how to do what to do and when to
do it so let's see let's build an image
when I want to get an image from
somewhere in docker I just pulled that
image there are some places called
registry or repository if you want but
then the correct name is Reggie see that
are all seeing the images so when I want
root 16 adjust to run the common local
pool and it's downloading the code from
somewhere I'm just running a video now
to avoid any latency with the the Wi-Fi
at some point that we are also doing the
same for the application that we are
going to develop if you won't talk
around that on my computer it's not a
demo that's only working on the video
it's a live application so if you want
just raise your hand and I will show you
so we developed the Ubuntu 16
application and if you see there are six
Alexa five layers because whoever willed
that may be six five five things so run
five commands they may be a great the
comments that's fine but the end there
are five layers so if we want to change
anything for for example on the second
from the top layer we can and we docker
is going to reduce all the under
underneath layers that's another touch
because we don't have to repeat
everything we don't have to ship
everything now that I have been made my
computer if somebody else in the company
has used that image to build something
else I will only have to download
whatever he built so not again
117 megabyte and you see under 17 maybe
wait for somebody because of google if
you're running it it's not using
understanding mega mega byte over your
space that because usually image has a
lot less thing
that you usually have on your computer
that's why I had to install curl because
it was not there I need it let's build
another image now let's run now in an
image I told you I spoke to you about
the registry registry where we are
storing in the data so I want to do the
same things I want to build the images
and then so somewhere where my
colleagues can use them so how to do
that
I just running it another common that is
doctor run let's keep what is in the
middle registry colon 2 that means that
I want to run a docker image call it
registry version 2 in a container and I
called registry that's what happens
before name and then I want to run it
heavy listening on port 80
so it's on the left as I said before
what is in the left is happening on my
computer so my computer here we have
container that's van listening on
Portugal but on the right I have 5000
that's because whomever build that image
set it to run and leave them on port
5000 I don't worried it's easier to have
port 80 so that was my configuration you
may know that typing list stuff in
production is not the best option I will
discourage you to do that unfortunately
some people are doing that well it's
that's another story we will see how to
use that try to avoid that and how to
have a lot of services running all
together
so actually you saw where to run the
registry it was very quick to run
database if you using my sequel for
example takes more at the same time and
then you have Mexico running with you
default configuration you can change it
in an easy way but with with almost no
effort ever somebody has build image
maybe they spent months building that
image that's fine but you just have to
do daughter run the name of the image
when I first proposed to the person that
could approve to use docker and the
company that I'm working now we said no
we don't need it the application were to
start that application we took a lot of
time when the head of grade the water
the world
stack or service of the company it took
six months to do that upgrade I see I
believe that there is something that
should never happen to me something that
is over an hour is too much but this
might my opinion so I went through him
second time and said look we had to set
up a script that had good run some tasks
to do almost all the time it was working
not every time and I'm talking
production not test so you know can
image that you say to a customer oh yeah
we're going to create your service it's
fine there may be a couple of hours or
downtime maybe a couple of days that
pattern and but don't worry it will work
and then it doesn't work it's not
something that is fine so I suggest for
second time to use daughter and say no
then the third time after someone's I
went to him and I say look I run a
common doctor run and I told him look
here now I'm running our pre-clear
application in a smooth way after Spain
at guest has one minute at most they
said yeah okay what is next step that is
an a web application I told him yeah
open your browser to the world what we
have to do next use the application
application is after running in one
minute
our chip that I was using daughter
nothing special did invent docker so now
we want to build a micro service that is
using docker other services other thing
and we have we want to have that quickly
so to do that I usually prefer to use
springboard
it's a based on spring no configuration
it's a some way awesome you just have to
write some little stuff and it's it's
working how many you use Gradle actually
I'm not alone okay so Gradle actually is
different
how many is using maven how many end ok
one ok
so our application on eyes using Gradle
that's because I believe that is more
flexible less hassle less to maintain
and sometimes it's if you know groovy
you can write a lot of stuff just inside
your BSI and it's going to work it's
something new to learn
I'm not care about learning I will all
suggest you to look at Gradle and some
of the stuff that we are going to look
today so I'm going to use spring boot
and in Gradle I will have to set some
dependencies that those that you see you
can also see use that that dependence is
made on actually Gradle is using maven
repository so whatever is maven
repository is also available on on
Gradle if you're already using those
dependencies or your computer data
source on your bottom two directory
there those are already available for
Gradle so you don't have to reinvent
stuff you just reuse whatever you have
so we're going to use those packages
from spring boot just copy and paste you
may not be interested in what they are
doing we will see how they works the
next thing that i'm using is log back
because everybody wants to log whatever
is happening i prefer a lot back edge
tool you can decide whatever you want
actually it's just matter maybe just
matter of personal choice I believe that
log back is better but that's my opinion
to deliver XML five I'm also using
Jackson I don't want to reinvent things
so there is a library that's working
Jackson is working it's fine I'm just
gonna add that dependency what the
potential should do the application
should extract some data metadata from
an image so how to do that luckily
somebody else working on that and build
library that is called metadata
extractor so just going to use it with
building Java and just use it how to do
that so in Gradle I have to define
another dependency you can use that with
maven as well using Nathan syntax in
Gradle that is what I have to define so
if you can see they're just not XML but
it's working how to achieve the tasks is
just using controller so I'm actually
mapping metadata my
rather as a request that is doing
something's what is actually doing is to
well as it is a get request I'm just
getting the URL so actually I'm passing
to my application a URL that may be
everywhere and the application will take
note or that URL and pass through the
library the library will return in this
way with this the object and the result
so the metadata list so the real common
that you need to run is this one so I'm
saying image the metadata reader is an
object from the library so from the
emitter detect structure and act 8 to
open that stream it was visual before
that I had to do some more stuff to
clean URL and figure out other stuff but
again that was the common I will skip
that library at that slide quickly but I
will tell about you when you're using
Gradle a beginning they suggest to use
the Gradle W that is a wrapper W stands
for wrapper that download Gradle if you
don't have on your computer the whatever
version operator that the person did the
project is working with so you don't
have to worry where I have to download
grade or what I have to do how to
configure the wrapper has everything so
if you don't have it the wrapper is
downloading from the internet and then
installing so we'll skip that when we
finished I want to build the project so
that is those are comments that I want
to run
so I say greater claim build like I said
everybody can understand that and then I
want to build image on docker how to do
that
doggie build then I'm using the dash T
that means tag and the name of the mage
and the version number I suggest you to
of course which is the version number
every time then I'm running the
application so I'm mapping post 80
because an application I said that is
listening on port 80 on port 8080
because maybe this is a production
server and I'm running something else on
port 80 this is a micro service I want
it to run on another post that's fine
you can you can change it to whatever
you want
so I Jack I just leave it when it's
running but this is big riddle compiling
the application at the beginning the
first time greater takes sometimes to be
the application Gradle has a system that
is a demon that it's running on the
background so from the second time that
you're running the discrete it's much
quicker usually it goes down from two
seconds to a half second or 200
milliseconds so it's much better now
it's darker building in the nature so
you see any line that you see a step
which I'm sorry it's a step is common
the types I wrote in my docker file so
now the application is running we spring
boot configuring some stuff so we can
just go and pick an image and have it
running to build that application to put
all together it took me two hours when
we first spoke in the company to build
it they plan eight weeks to do all the
job
so after two hours nobody believed me
that it was ready so let's pick an image
I will use the image in the middle and
if I want to show to get the XML person
the sorry the JSON version I will just
have to pass the URL in the internet
browser and this is the output that they
get from the application if you saw I
wrote almost nothing in my application
really really few things of course those
comes from a library but that's fine we
don't have to reinvent the wheel or
maybe some bias in your company has been
read this is the XML that's why our
Jackson otherwise couldn't have it so
how to to prove that application is
working I usually use Spock that is a
tool for testing for Angela
you can each build we own greater GUI
but you can use july's as you do
I believe that it's a it's awesome I
suggest you to have a look so let's look
at the dockerfile actually the same that
I ran for the micro service so from an
image this case is Java then is that
there are many more on the underneath
but at the end I need Java to run my
application so I'm starting from Java
later it's my latest not Oracle later
then the maintainer so whom to have to
go to if something is broken so it's
also taking the responsibility I'm
exposing for safety that means to docker
you have the application is listening on
port 80 so doctor is making available
port 80 so everybody those two comments
actually do say it
docker what you have to do when you're
running that application so you're
running command Java with parameters
- jar metadata jar so that's actually
the core of what you need to do of
course where is your metadata jar you
have to tell docker where is it
so when your my machine it's called
metadata - 1 0 0 and I'm calling it
metal slash metadata jar into docker
that's enough that's all you don't have
to do anything else to have it final so
when you have when you run it say oh ok
cool it's running everything it's
running on my machine so as I told you
it's going to run everywhere so we moved
that on my server and I was just sitting
there saying oh yeah it's gonna work
cool it wasn't working because okay well
must work it was working on my machine
so am i lying about everything else no I
wasn't lying
we spent some time I did a lot of tests
I tried on different machine it was
working on most of the machine
not on Sam come on it's it's impossible
it's it must work so I went we went back
and checking everything and at some
point somebody said oh you know it was a
suddenly say oh you know we didn't touch
the cable the network cable to the
server come on
you are joking me because it's a it's
not possible huh yeah yeah it is now we
plug the cable and end
suddenly was working that's okay come
come on again we decide that we are
telling to our sysadmin have you to ask
them have you connected cable it's
unbelievable then actually we found out
that they have they decide to have to
use a different strategy for poker we
want to have things doing in a cool way
so they use the whatever I was working
on to improve the company quality of
network with the systems so they decide
to use VLANs that's a cool thing so you
can segregate your applications into
different environments without having to
do to work a lot with the firewall for
every instance so they use the Lance
that's cool we are going to use the
Lance that's cool
no because VLANs are an experimental
feature in daughter so you actually have
to say to tell docker look you must use
an experimental facial you may be scared
about using experiment experimental
stage features but you may see the
leaning tower is still there it was not
something that well most was mostly in
experiment if somebody it's working
actually it that experimental feature of
daughter is still working in our
production so how to do that you have to
set in your doors so the dose that is
running docker on into the file a PC
docker dog Beamen dot J's on that you
want to use enable experimental feature
once you do that that's fine you can use
all the features that you want so I'm
not spending a lot of time with
orchestration but when you are running
one micro service you want to run many
you won't have something that may work
for you so if some some service go down
it must be live somewhere else so that
happens with your construction there is
not enough time to look the
orchestrators but actually you will need
a conductor that will drive all the
stuff there are three systems at the
moment it is warm kubernetes and missus
I can't suggest any of them if you don't
want to if you just want to start and
having things working look at swarm
it starts very quickly if you have
other needs you may want to look at
something else very very quickly those
are the usage this this moment so most
of people using kubernetes most of the
companies are switching to darker I
realize that when I use docker and them
are using as planning to spend this year
half million dollars only for docker
what I want to say is that you must be
pricing your company so don't worry
about trying and experimenting and
pushing may take time sometimes somebody
can forget the cable but keep trying and
you can make it any question don't yeah
yeah so the question is how much RAM you
need to run all the services on using
Java that depends on your application of
course Java is using a lot of RAM we're
also memory so you need to plan that
head what you are avoiding is the other
head of your operating system so if
you're using a log the application is
using a lot of CPU auto memory you will
need a machine that is using has a lot
of memory on the orchestrator managed
how much instances can run on the same
bare metal so they will optimizing your
infrastructure you're not wasting space
for other operating systems you can use
all that the remaining memory for your
system and the orchestrator will just
find another instance or close another
instance if there is not enough memory
or needs more for them so there is not a
clear answer I know but that depends on
your system another question yes
you
not at the moment just because Colonel
is used up as it is now
docker it needs to use a Linux kernel so
it doesn't work
I read that Microsoft is working at
something like that so they may had
something soon that is not yet available
unfortunately okay can I have time for
another question yes last one everywhere
honnestly i also use George Jenkins in
Dhaka on my machine another machine in
development environment the benefit is
that sometimes for Gia for example they
are giving producing a docker image so
when you want upgrade you just pull new
image in everything is done you don't
have to confuse change
configuration for jail you just have to
apply the license and that's all okay
thank you very much</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>