<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Continuous Delivery At GitHub by Alain Hélaïli | Coder Coacher - Coaching Coders</title><meta content="Continuous Delivery At GitHub by Alain Hélaïli - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Devoxx/">Devoxx</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>Continuous Delivery At GitHub by Alain Hélaïli</b></h2><h5 class="post__date">2016-11-14</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/cIJ4sKaoF8A" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hi everybody my name is uh Allah Allah
lady so I know the chairs are very comfy
so if you fell asleep during the
previous talk and you don't want to be
here it's a it's a new one this one is
about get up
it's about get up it's about how do we
continuously deliver at get up
so I treat change the tile about chat
offs tell us about get up it's still the
same talk I have couple disclaimer first
I will not be handing t-shirts away
after the talk I've been asked for a lot
of t-shirts sorry don't have them the
other thing I want to share is also
everything that starts with get is not
geared up so sometimes it's good to you
know we might people out get was
actually started by linnaeus toward 10
years ago now and 11 years now actually
and it's it's a core component of our
platform but we are just one contributor
out of many but one of the biggest
contributor obviously and we created on
top of that platform called get up
actually get up start eight years ago it
was really a way for us to better
collaborate better using of Keith
because it was it's great the best was
good management that you can find today
but it's not great to share ideas and
our wall the world concept of our
founder is really was really to find a
better way to exchange ideas together
and to not only send packages of code
across emails but to starting storing
the idea storing that concept showing
the discussions about the code and and
keeping that you know through time so
other people are joining later the teams
could discover all that information and
not not having to get you know forwards
of all the emails for the last years or
so with the project so that's when gear
up started physically fast forward fast
forward to
a gear Ibiza is a very distributed on
company you see it's actually an old an
old map of the employees of get up we
have that real-time system where we can
see where everybody is on the planet we
are now 600 employees this was a couple
months ago and you can see that we are a
super distributed company and that's
always been the case I get up and there
is a good reason where I'm sharing that
with you because it's it's part of the
way we're walking basically we want
everybody to be where it makes the most
sense for them to be where it's where
they are the most productive basically
so you can basically work wherever you
want
we have people who don't have a home
they are going from one country to
another and they work that way we got
people who are living an RV and going
across the US and they stopped some
places and they work from there
but the world that our world
organization is based on the fact that
we don't care what you are
you can work wherever you want and and
we make sure that you don't need to be
next to the coffee machine to be aware
of what's going on in the company like
the chit-chats next to the in the mid
pack or next to the water cooler should
not be required for you to be aware of
what's going on and it's a very
important part of our culture I go in
depth with that so we are people all
over the world and can see we've got
people in Hawaii we get people in
Australia we have people in Europe in
Japan and these people might very well
be in the same team so in a one team you
could you could have someone you know ye
someone in Australia somewhere in Europe
we have team of five or six people and
this these people should be able to work
together and again regardless of where
they are and you can imagine that when
you have such a distributed team it's
quite hard to have discussions it's
quite hard to to do a stand-up Mina
meeting it's even hard to do a WebEx
right you can have a you can have a good
time frame for meeting on
that feeds people who are scattered all
over the world that way
so we because of that and it's just one
reason out of many but because of that
we decided that we needed to have a very
Breeden oriented culture so everything
is we're gonna get up and we have a say
that if something is not written if
something doesn't have a link that you
can share then it doesn't exist right
your conversation that you are next to
the water cooler doesn't exist or the
decision you made in that meeting room
doesn't exist if you cannot share the
link about everything that was said
during that decision that discussion and
what were the reason why you took that
decision and the matter of fact if you
using gear up are people using Kira yeah
okay if you using get up you know that
everything you're doing basically has a
leak an issue has a link a pull request
is a link a comment in an issue as a
link so you can set a link with just
that one comment and everybody will be
able to receive a link and see exactly
what you are looking at when you send a
link so we took that concept very far
and it's very central to all thing but
we have other there are wherever there
are tools and techniques but our main
goal behind that is to be able to
deliver and deliver quickly wherever you
are in whenever it is so this is a graph
of the number of deployments we did in
prediction so on github.com in a given
week so that was in May May 26 week it
was actually a four-day week because
there was a holiday on the Monday and
you see the number of deployments on
github.com goes almost all the way up to
480 480 deployments in a given week on
github.com I hope you didn't see that
week a lot of you know error screen
hangry unicorns that's what we have when
there is a problem sometimes that
happened but we basically managed to to
create something which allows us to
deliver whenever we want seamlessly
without anybody seeing anything any
change any done time and whatever on our
web
there are good reasons for doing that
for us one of the main reason being you
know being I think we had number 56 in
the ranking of the most popular website
on the planet we have a we have about 40
million visitors per month so you can
imagine that we have couple servers in
our data center and what we what we
figure out is that there is no way for
us to be able to create a test
environment that would work for that
scale of traffic we're facing for
diversity of traffic we're facing and
with all the components we have to go
through for you know when whenever we're
serving one request so we our conclusion
was the only way to validate some some
code the only way to make sure that some
code is production really is to release
it into production and see how it works
so that's why we're deploying so often
you know we're not we don't have that
many features that we need to deploy 80
times a day but every time we're
developing something when we want to
validate that we push it to production
and we see our works all right and I'm
going to show you today how we do that
while the tools were using and actually
all the tools were using all most likely
most of them you could use them as well
I mean there is no this was hard
complexity over there it's just a matter
of organization it's just a matter of
thinking that you can do it and then
it's super easy and so some people
sometimes tells me yes but you know I'm
a bank I cannot do that on B's I cannot
do that we are the customer called the
JPL so the Jet Propulsion lab the guys
who are doing the the enzymes for the
NASA they want to do continues delivery
and they do continuous delivery and so
it's it's really about thinking about
the trade-off because you're what people
always tell me like yeah we if there is
a bug in production what happens but
first of all there's always bug in
production and how fast can you fix them
so when you have a bug in your jet
that's going in the space what happened
if you cannot fix it
what happened if you have one bug
and on the other hand you can fix it in
couple seconds well maybe that's better
right because the jet goes back to
trajectory and that might be better so
maybe you got more birds in production
but you're fixing them faster so you
know think about that trade-off that
might be better and I think it's better
for a lot of companies so how do we do
that so what's our secret that won't be
a secret anymore because I'm going to
share everything obviously but there you
go so first of all and I'm going to go
in dev about visa these four different
points but the first thing is we needed
a common philosophy and I mean I urge
you to start thinking about you know
your team and are we you know in your
team are you all thinking the same way
about features but the way you develop
you might have a common workflow but
even in a given workflow there are some
room for people doing different things
so we have that common philosophy I'll
show you that to you right after
isochronous communication so I showed
you that we are all over the planet and
being able to share information
regardless of where you are is super
important so that concept of a
synchronous communication goes also
beyond that and and we go over that as
well because delivery of course we
cannot do that we cannot deploy that
many times today in production if we
don't have a solid continuous delivery
platform and that goes for something
that's we call chat ups so chair ups you
will see it's basically doing devops for
a chat client and it's fun but it's also
super useful and I'll show you why
all right so first of all come on
philosophy so that's what we call the
Zen of github it's it's a list of things
that we try to keep in mind when we
develop in feature and it's very simple
it's about like okay are we going to
develop for three weeks and then start
sharing this code with our colleagues or
do we rather break down everything so we
develop only for three days and
shirring after three days and but having
more like pull request open for instance
so it's a lot of thing that way where if
you're not doing all if you if you don't
go all in the same direction then it's
going you're going to have some clash in
the in the team at one point and it's
going to show in the code as well and
you can imagine that us being so
distributed you have many cultures many
ways of saying things many backgrounds
we don't you know we didn't go to the
same good schooling systems so there are
a lot of differences between people and
how they approach things and how they
approach complexity for instance so it
was super important for us to have that
common view of things so every developer
had gear up we know that it should not
walk on you know by himself on the
corner for weeks and weeks and weeks
before sharing something that's that
doesn't work in our company it needs to
be up and it needs to be short it needs
to be concise we need to be able to
deliver it quickly so we can I eat a
write on that you know it's there's no
fee there's no such thing about like a
feature that we're going to spend years
and years working on and deliver that
and see that maybe it doesn't work or
it's our users don't want that that
would be stupid
so that's our then of get up and
actually I told you earlier that
everything needs to have a link that we
can share so if you go into HTTP API
that get up that comes AutoCAD and you
call that several times you will have
one of each sentence showing on your
screen and you can go through that on
your own so it's actually the first
sample of our API CPU if you want to try
leveraging our API so you can find out
that stuff it's public so that's the
first thing second thing is that asset
reduce communication and it's obvious
that a second is communication is very
important for just really just really
team like ours because there is no again
time for a WebEx there's no time for a
physical meeting it's not possible to
add that so that's the first reason why
we started that way but if we're talking
to our founders they will tell you that
even when they were on the
four of them all in secon Valley sorry
in the same office they were hardly ever
talking to each other and there's a good
reason for that they were saying if I'm
talking to you while you're coding I'm
interrupting your flow you were deaf
thinking about something coding
something and I'm asking you a simple
question that it's going to take you
maybe 30 seconds to answer even shorter
maybe but you're going to lose a lot of
time and some some researcher depth in
depth study about that and they find out
that it will take you about 15 minutes
to go back to your regular coding flow
when you be interrupted fifteen minutes
to get back to the speed of code that
you were at before you can imagine that
it's really it's really big right the
number of times you're being interrupted
on a given day it accounts to probably
an hour at the end of the day because
think about it I mean when you're
calling something you're hardly ever
just one time you're probably thinking
about several fights because you have
speed your logic and your data and your
presentation in different files and you
have that model online and I still have
somebody's talking to you that mother
get flush you get flush like you're like
in the toilets and you have to reboot
that stuff in your mind and we start you
know start back to very well so being
able to say okay instead of interrupting
you whenever I have a question well I'm
going to you know organize myself in a
way that I might be able to wait for the
answer at the end of the day you know oh
it can you I can give you two hours of
three hours or maybe more to provide me
that answer and my colleague will send
me the answer when it's convenient for
them
so when they done with something like
they've merged up or request for
instance and they're ready to you know
to have free time in their mind they can
start going back to slag going back to
the pull request going back to the
issues to start answering my questions
and giving me feedback and it's just
that's fine for me because I probably I
had some of the things to do anyway and
I can multitask I can do other things
and it will the answer would come as a
timely in a timely manner not well
but I don't need that right away most of
the time so it's it's it's one of the
great benefit of that a synchronous
communication and that really works
whether you're distributed for the world
or that you are all in the same room the
other thing is very often we have
meetings and I mean meetings is like
it's craziness we have so many meetings
I had some customer ones looking at a
developer schedule and he calculated
that the developer actually is
developing only 60% of his day
60% you paid for Brian code and you just
writing code 60% of your day it's not
that you're not doing any meaningful
things for the other 40% but what if we
could give you back 20% of time of
coding would that be great
maybe there are some meetings where you
draw the developer for an hour and is
really useful in that meeting for 10
minutes and what about if we also could
maybe get that information in a
different way maybe you know have a
system where everything is open so
everybody can grab the information they
need to create their own report and
that's what we do in basically a get up
you know get up it's funny because it's
a it's a developer developer company for
developers so we are one of the few
company who really eats his own dog food
so it makes our life very different and
when we think about what we're doing
we're really thinking about how we can
improve our day to day life and it's
probably I hope it's probably impacting
your life as well as a developer so
being able to have more time developing
it's sometimes also like making sure
that your manager understand the way
you're walking and that it doesn't like
set up a meeting right in the middle of
your day or your afternoon or your
morning because if you have a meeting at
10:00 a.m. why are you going to start
walking out at am probably not that big
refactoring stuff that's super useful
but that's going to be complex because
you know you just going to our like 1 or
2 hours of work and it's going to take
you four or five hours to really
you know start that meaningfully so
you're just going to do some meaningless
things or like less important things
it's because it's different for you to
have two blocks of two hours of having
one block of four hours so educating the
manager sometimes about you know when to
schedule it meaning could save you or so
a lot of times and that's that's the
kind of things we're trying to think
about being conscious about in order
again to make our life easier and being
more productive so that that all goes
into the umbrella the asynchronous
communication that's super important and
then of course we use our tools so I as
I told you we are using our we are
eating our own dog food and for instance
we are never sending emails to each
other we are never sending emails to
each other we are just creating issues
when I want to talk to somebody I create
an issue in a repo and I got that
conversation starting for that and it's
it's I mean look think about it when you
put information in an email can you find
it back six months later right can you
look I mean you you know that it was in
an email
you know it's somewhere you cannot find
it and think about also alright we
discuss we discuss about that wall new
refactoring stuff we made decision
somebody was good enough to technology
send the notes to everybody in the team
and you have a new colleague coming
three weeks later what does he know
about that stuff how does he find out
information you want it's buried it's
lost you won't find any time anymore
so that's why we're using issues with
just using issues you want to talk to
something about you know you want share
an idea you just create an issue and it
sends emails notification you can reply
for emails but it gets back into an
issue there are labels there are meta
data and it's searchable so you can you
can relate back to that and people who
are coming on in the till later people
who are way on vacation they can catch
up they can discover the information so
it's super valuable um and then I don't
know if you've seen that who's been it's
been released a month ago you can now
organizer issuing Kanban boards and and
walking projects so I don't know if
you've seen that it's we super excited
about that stuff and it comes it comes
for free and then we're using poor
request so poor requests are so very
interesting things there are many many
ways to use to request the wrong way I'm
saying the wrong way but I would say
that not so up to my way when I discuss
with people a lot of people are telling
me that they could you know they create
their branch the future branch they
start coding on that branch and at the
end they open a pull request to share
with their teams and say can I have
color with you well great but if the
first comment of the code review is like
oh I would not have used that stuff I
would not have used that framework or I
think you went in the wrong directions
well maybe we should have talked about
that before you know because you've been
working on that stuff you've made you've
made decisions and if nobody agrees with
your decision then he might have lost
couple you know days of work and and
going back on that it's probably a bad
idea and also what happens if you're
doing that that you're asking people
basically to discover everything you've
done they have no idea when they start
to pull requests when they will start
reading your code where do you want to
go you know what was your you know your
your logics what what was in your mind
when you study that so we're doing we're
doing things are pretty slightly
different what we do when we have a new
new feature to implement that we open a
new branch of course a feature branch
and we're probably going to create like
a very small commit somewhere or get
things started so so so you can just
create a pull request and then the
developers start sharing why it's going
to do you know it's not about what I've
done is why am i opening these pull
requests what do we want to go why am I
thinking about in terms of impacts or in
terms of changes in the model in terms
of refactoring in terms of whatever arts
I'm going to share first with other
people while playing what I'm planning
to do and then my colleagues can start
jumping in the conversation say yes and
don't forget to do that as well or you
know maybe you should not use that stuff
because we did something different
somewhere else you know you can imagine
whatever conversation may have so it's
happening these conversations are
happening before we start coding so then
you know when we start coding we know
that everybody agrees on the direction
we're going to and when the developer
when my colleagues are up to do a code
review they pretty much have an idea of
what they what they go in to see you
know they're not surprised by anything
and they can send me back some good
information they and I'm maximizing
their time at the same time you know
they know exactly where to go where to
look they know what's important what's
less important they have you know they
are saving hours of code review per per
week just because they know already what
we are talking about and super important
the other important part is to make sure
that you know asking code review on
40,000 lines of code because then you
know you could use are coming and saying
it's good go ahead and then story
useless I mean when you're doing 40
lines you have 40 comments that's maybe
too much but at least you have
meaningful feedback and I mean code
review is so important today I don't
know if you guys are using that but from
a quality point of view it's great
because you're going to be able to catch
some bugs that you might not see
otherwise and that your country
integration cannot see here and you make
sure so that the knowledge of the code
is distributed for the team because you
know sometimes you have you know these
guys in charge of that part of the code
and they go in for vacations they're
coming back in two days there's a bug
well let's wait for him to come back
because by the time I read all that code
I mean he'll be back anyway so let's
let's you know live with that bug for
now that's not a great way of doing
things and what if what if he dies
tomorrow right if you've been doing code
review consistently doesn't matter if he
dies
no matter you get the code you know it
you know the code base and it's a great
teaching opportunity as well what we see
that younger people are learning by
doing code reviews to other people it's
not just about the senior developer
reviewing the juniors code that's great
they can they can tell them things they
can teach you them things but with the
junior guy reading the senior guys could
they we learn a lot of things that they
have never learned at school you know
and they can improve their own code by
that so everybody benefits for that so
it's really something that you you guys
should start doing more of and it pays
off right away
there is no it's not a waste of time I
mean people some people still believe
that testing is a waste of time I've met
some I've met some like very recently so
some people think that code review can
be a waste of time but honestly it pays
off right away all right
so we're doing that a lot and what we do
also and that's that's also something I
encourage you on doing is that we're
sending back a lot of feedback to the
developer right the great benefit of
gift I think and it's kind of a side
effect but it's still a great benefit is
that it's easy to create a lot of
branches but it's also easy to plug your
countries integration tool to all these
branches
so whenever agile approach is creating a
branch request for requests and that
will request you know triggers a
notification to the continuous
decoration platform whenever somebody's
pushing some code and the contribute
equation platform can send back feedback
to the developer right you probably all
do that already but most people just get
back one piece of information like is
green or it's red and you've you know
you've you've configure your Jenkins
with like 45 different plugins to get a
lot of information back and just have
one green or red and that's it so when
it's red you know what's red you know
tell me about it
I need to go in Jenkins look for it look
for my bit of scroll down
oh that's B stuff I don't care about
that stuff you know and I've just wait
like five minutes to look for my my
error that I don't really care
probably a lot so that's a huge waste of
time again and remember it's about
getting some time back to create some
new features so what you can do is use
the API so that we offer and you can
send back some intermediate status so
you know the linker is green the
computation is green the unit test is
red you know it's not just about
something is red it's this stuff is red
and is that stuff important or not well
you can design that so you can say okay
these studies for instance the the get
up one is required so you cannot merge
it that stuff is not green none of the
stuff is not that required it means good
to have nice to have but if it's red you
can see merge alright so your decisions
developer and you guys can do that today
I mean it's a variable it's very easy to
do it's just some HTTP API and you can
you can really improve your wall your di
system because the CI system is really
about getting feedback to the developer
so why is developing or she is
developing she can get more information
make better decisions and go faster as
well so go ahead and do that and what
we've done so is we modify our Jenkins
so it's called janky it's actually open
source so you can you can download that
so we have direct link between our pull
request and our build status
so basically when I'm when I'm clicking
on the details here for instance for
that bill I'll go there and from there I
can click on the palookas button and go
back to my pull request for instance so
I never have to do three clicks
or even two clicks I'm always one click
away from my information and I'm saving
a lot of time that way the other stuff
we're doing is that we are using our
deployment status as well so that's
another API that you can use because
probably when you're developing today
you have some environments that you can
target before going to the live
production environment you might have a
test environment or a QA environment
whatever other environments you can
think of and it's quite convenient to be
able to know that that somebody deployed
that feature to some environment like I
need I'm a tester I need to test
something I can go and get up I can see
all the pro requests being worked worked
out and I know that I want to test that
one it's important that feature really
explaining that I'm going to that
feature I'm scrolling down the history
of that Pro request and I'm seeing I'm
seeing oh I can click on view deployment
it means that I will go to some
environment somewhere where this code is
running at the moment and I can see for
myself how it's running and I didn't
have to talk to the developer to get
that information
I haven't been interrupting anyone to
know that I can test that stuff it's
here it's still active because it could
be a could be a virtual environment that
that's been spin off automatically or it
could have been erased by some other
deployment later I know all this
information and I can see it for myself
super important super valuable and when
you're looking at the history of app
requests you can understand how many
times has been deployed which
environments we've been through I mean
you can really assess the release cycle
that we went through to to two other
feature running you can use that it's
again an HTTP API that we that we offer
all right
so super valuable let me skip that one
I'll go back on that later
other things again about reporting
without reporting again that's that you
know do you like do you enjoy doing some
reporting I guess not nobody like that
but you still need to do that you still
need to get you know information back to
the project manager product owners and
while we've been working on this week
what are we delivered so that's kind of
dashboard where everything shows
automatically I don't know if you know
that but when you start up request you
can say it fixes and the issue number so
if your if your user stories comes as
issues you can reference the issues you
are fixing in a pull request and as soon
as you emerge upon request you
matching issues are closed so if you
walk in that way your product owner just
create issues and they know exactly when
you've been working on these issues
because there is a cross-reference
automatically generated and they will
know exactly whenever you have closed
all merge this pull request again the
best reporting and the one you don't you
know doing basically it's the most
accurate one and uh and it's very
transparent there is no more like yeah I
think we are not far back you know we
are almost finished developing the
feature like let's say we are 85% no I
mean you've done it or you've not done
it and that's very simple all right so
that's all the tools we're using but
then oh yeah let's recap this we've got
so what we're doing we're creating a
future branch we are adding very few
commits and we are putting the pull
request right away and then discussion
happens come in happens more discussion
more commits review is happening as well
in the pro requests and then we ship the
code all right we still our on our
feeder branch master is over there
that's big big fat line of there's
master and this is a feature branch and
so we shoot that code so you can shoot
that code to again a QA platform a test
platform whatever but as I told you
before we happen to see that to
production and in order to do that in a
reliable way because you know doing 80
times a day that thing there could be
room for you know a fat finger or like
some problem or you know thousands of
servers are involved in these
deployments there are multiple tiers
multiple databases multiple you know
Rooter proxies whatnot and we actually
manage all this layer support Lee I mean
a proxy at github is some code created
by get up because there is no get proxy
on the on the market or get ruder or so
it doesn't exist except together so we
have to handle all these different tiers
that you're going for whenever you're
hitting
the commit you know the coming Berlin or
whatever so we created you but to help
us doing that so you buddies doing a lot
of things for us it's a it's our what
there was actually an article on wire
about you but once you know I'd love to
have an Archie : on why all about me but
this is a robot and got that he's been
called the you know the hardest worker
of get up it does everything for us so
it does our deployments and I'll show
you how it works but it does so some
more fun things like it can can get us
some some maps on Google Maps can get
some images as well so it just sees in
slack we use slack but you can use
something else you bar is an open source
project it's just a GS runtime and yes
adaptors for a lot of different chat
environment so if you use if chat or you
know other other stuff I don't think of
right now you can use it as well very
easy and you can create your own plugins
so we've created a lot of plugins sort
of tasks that you what can do we told
him a lot of things some are very
serious some are less serious so we can
have like the the food-truck around the
the office we just ask you bots and you
know the truck may come and give you
that information you can get you some
animated gifs so it makes things a lot
fun you can like our our our sales
people whenever they want to have some
information in Salesforce they don't go
in cessful to go to you but and they say
ok dot SFG see me and they say you know
whatever customer they want to look
information for and you bought go
successful and give that information
like you know they what our thinking now
I'd give up is that anytime I have to do
something anytime I have a script to do
or system to interact with what most
likely the best way to do that is to go
for a you bad script that way I don't
need to log into any system I'm just in
my slack environment and just works for
me right I don't need to know where it
is and the side effect of that is that
all that work I'm doing you know talking
to you but I'm doing that in front
of my colleagues because we are in slack
rooms and if I'm looking at a customer
and somebody else is also interested by
this customer then we can you know they
can say oh yeah I know what you're
looking at that because you know at that
discussion with that customer some of
the day likewise and I'll show you that
later or our you know sprung for
instance or our graphing systems they
are all accessible who you got in slack
so when I'm troubleshooting something
I'm looking at you know the response
time of the on page for instance
everybody knows that I'm looking at that
and people can jump in the conversation
and and tell me things I'm not aware of
and they will not be able to tell me
that if I was looking at that on my
laptop you know being in Paris for
instance when my colleague is in San
Francisco and he knows about that and I
would maybe not have the idea to put him
over in the conversation but it just
sees what I'm doing so we can start that
conversation that way so another great
thing with Hubert is it kind of listen
to what happens so we can configure you
but to watch the activity on some repos
for a given sacrum so each team as a
slack room and each team as is list of
repo and you both will tell me whatever
is happening in the repo that I'm
interested in in my team slack room so
whenever somebody's opening an issue or
commenting or whatever well I know
what's going on so I don't need to you
know watch some notification anywhere
I mean slack and I know what's going on
over there likewise if in slack with
referencing an issue and we have a
description in slack about an issue well
there will be a comment by you but in
the issue saying a this is a link to
that conversation that happen in slack
so I don't I don't need to like copy and
paste discussions to send them back to
to the issue to keep the track of that
it's is the cross-referencing is
happening naturally so I'm just using
whatever tool I have to you know to have
that discussion if my colleague is there
is available to chat we can shut up at
that right away or otherwise I would go
to my
you and you put maybe longer tacks of
questions or thoughts or whatever else
but it's up to me to decide what tool I
want to use because I'm not losing
anything I'm not afraid of losing
anything by using one of the two tools
so it's pretty it's pretty and then
comes the times where I wanted to point
my code so the developer wants to deploy
some code somewhere can just go to slack
and again it could be something else
like I'm not trying to sell a slack here
and it just asked you but where can i
deploy w CID is where can i deploy and
whenever there is a dot it means it's a
you but come on you could you could also
use a longer form would be you but where
can i deploy but we made it shorter
obviously and you will list all the
environments we have and and this this
particular command comes it's open
source as well so you can you can use
that command to list all your
environments and give some some couple
properties to define you know where they
are what kind of environment they are
and everything so up to there its
standard
anybody can can use that this is no
problem and so the dropper we then
decide to use one of these environments
so for instance my colleague MgO decide
to deploy the branch mobile underscore
nav in the sky experiment from the
github repo to the branch lab which was
one of our environments listed before
okay you just need to say that and then
you words going to pick up that code and
deploy that on servers I mean then we
have some you know we have some script
we're using top hat
so you bar is going to work with our
propeller environment to trigger the
deployment because you but even is not
doing much it's more like a middleware
for instance if you can put it that way
and so the deployment is going to be
triggered and couple minutes later he
was going to come back and say hey this
is available now it's been deployed and
he got some message back from the
deployment system from puppet here about
the the location where
this deployment can be seen and that
that link over there the mobile the -
now - experiment blah blah blah blah
that's why you will get on the proquest
as well you know remember that beauty
poem in Berlin that will show as well in
the pro requests so the developer just
need to click on that and that's it it's
done so you see the great thing about
that is any developer can arrive you
know I'd get up and ten minutes later
they can start deploying things they can
mess up anything here right it's hard to
mess up that small small workflow so
we've been able that way to deploy in
the in our in our branch lab system but
then we again we want to devote to the
production environment because that's
where things are really happening for us
that's where we test everything so
that's where we test everything but
we've test everything before we don't
wait for the personal environment to
make the basic test and so the
production environment is a little
trickier right you don't want to people
to deploy some test codes at the same
time you want to make sure that one
person goes after the other ones and you
want to make couple checks as well -
just just to be sure right so the first
the first safety measure we have that
only one person at the time can deploy
in the production environment so there
is a queue so you need to wait in the
queue to be able to deploy anything so
the developer can ask you but why is the
stages of the queue because if you have
25 person in the queue you might you
know you might decide to go back coding
and come back later
so here we see that we have couple guys
in the queue somebody is using is using
the environment already and another one
is in the queue so it's very manageable
so the the developer can say okay queue
me to deploy queue MTD and it will give
the reference of his branch so you but
can you know I remember that this guy
wants to deploy and you come back to him
later
so you see the time it was 343 it's a
real surreal disappointment right I'm
not making up anything here so it was
343 and 350 for you but comes back and
say you you up it's it's your turn at 2
to deploy things so you see it goes
pretty quickly right you don't want to
you don't want to have people hugging
the the poor environment for hours and
hours again we have a lot of requests
per seconds so if something goes wrong
we can see it pretty quickly we we don't
have to wait for users to come they
always come so that way that's why our
our turnaround is pretty pretty short
and on top of that and I'll show you
that later the developer needs to be
there physically in front of the screen
to monitor everything that's going on to
make sure that Eastcote didn't break
anything so 21 minutes later the
developer can say okay I want to deploy
my code to this environment prod slash
canary so it's a subset of our
production environment and then you but
makes couple checks so you bought checks
for instance that your branch is not
behind master because if you are being a
master you're going to remove some
features we'll be unfortunate so there
are a couple checks that way we will
check the status of the CI so remember
earlier there was some required studies
some you know some feedback from the
constant aggression while we're going to
double-check that the developer has the
right and to deploy given the status of
the cities the CI one school but that's
all they were on check to make sure that
we're not breaking anything
so okay you was going to do the job and
get back to the developer a little bit
later so it was surely less than a
minute and to give back a list of all
the servers that I've been impacted so
you know the grayed out prediction
servers and that's it again I can't
break anything doing such thing you know
it's very hard to break that that
workflow cause it's so simple anybody
can do it so it's in the production
environment it's super easy to check
then the developer most likely nobody
will see what happened over there nobody
will see if there is a new feature a new
Baron or whatnot nobody will see that
because we
you have some feature flags and we have
an application so points us as well you
can download it to manage our feature
flags so we can decide that this barn
will show only for Visa and these people
on this and this repo and only you know
during a couple days or whatever I mean
we can really decide from an external
tool how that feature is going to show
up so that way we can introduce a lot of
new things without anybody noticing and
then we can open the knob later and say
okay now everybody can see it or now
only this organization can see it it's
very easy to manage
so we've deployed unto our canary
environment and now we want to deploy to
the production environment
so likewise the developer still has the
lock under on the production environment
so you can still use it for doing other
things and you can decide to deploy to
prod and again same thing happens again
we just need to deploy branches that you
know basically if something was going
wrong so if the de l'Opera decided that
the deployment on canary was not good
the curl was not good where it needs to
do is just deploy master Depot's my
story is the wall back of the feature it
just created and that's it so either I'm
deploying a feature branch either and
point master and I always go back to a
solid state that way easy you can can't
mess it up so what we ask the developer
though is that it needs to monitor
what's going on
so here's being about to deploy his code
but in his to monitor what's going on in
the production environment because he's
the most likely person to understand the
exceptions are showing up all the
problems that can appear because he
knows what kind of code is been
deploying all right so we give them some
tools and we actually give him all the
tools he needs to monitor everything so
there is no like one team as the
monitoring one team is coding it's like
everybody's monitoring and everybody has
access to all the monitoring tools
because if you don't know what code has
been deployed how effective can you be
at monitoring or diagnosing what's going
on in the system so we are that tool and
we have another tool called haystack so
in a haystack obviously you looking for
needles and every exception is called a
needle and what you see on the timeline
here is a picture of all the engineers
that have deployed something so if you
see in the timeline and this is the
response time of the of the homepage of
the pages and get up so if you if you
see a problem in between two deployments
while you know that the one on the left
is the person responsible for that
deployment and you can obviously contact
that person but your CQC directly the
pull request or the compare page on the
pull request of that deployment so you
can isolate immediately the amur of code
has been deployed through you know
during that during that deployment and
you don't have to you know investigate
all the code base you have or like the
twenty five feature you released every
month in production you know that's only
one feature one set of code and it's
very fast to then read for that and find
the bug right you have just one pull
request to examine not twenty-five of
them so it's really it's a lot faster to
assess any problem and it's a lot faster
to diagnose the problem so it faster to
work back eventually or to fix the
problem right it's still going back to
that not a jet that goes in space if you
can fix the problem quickly then it's
not such a problem anymore but if you
cannot fix it then it's good so we have
that and then what happens also is you
bird again is listening to our different
systems so we don't have somebody in
front of nag yours for instance or some
other system you might use to to watch
the alert you are just doing that for us
and think about it whenever you have
something to diagnose in your production
environment you have an incident
forgiven up you always go through the
same indicators while you're checking
you know you're checking the response
time checking the CPU checking you know
all these systems are part of your
application what the stereos there are
all these steps you're going through
almost every time you have an incident
well if you're doing it all the times it
means you're wasting your time because
you could automate a
so whenever we have like for instance
beast incident here this particular like
haystack slow queries per minute well
you was going to report us in slack that
there is a problem but you boys'll is
also going to create the issue for us so
we can track that you boys creating the
issues putting the right levels putting
the right information over there so the
the name of the incidents the
description of the incidents as it's
been recorded somewhere but also it's
going to grab the stories of all the
systems will be usually looking at so
instead of going to system a and B and C
and D together all the information while
you body is doing that put all that
information in an issue it's going to
look at some graphs as well again put
down the issue
so whenever some engineers need to
diagnose the issue he goes to the issue
that program sorry we go into the issue
and we have all the usual suspects you
know all the things you always do when
you're diagnosing something it's here
what you might need to go further why
the solution might not be there but
actually but you actually have all the
basics you need to get started and then
you need to you know start doing your
your foot process and investigate that
stuff but the usual stuff and here you
see it will have been at three or four
different systems though I will need to
go to to get all the information
everything is right over there likewise
I told you if I need to look into my
logs
we are sprung sties ingesting all our
logs I'm just going to slack and I got
some comments to query my my sprung
clogs and again I'm doing that in front
of my colleagues they can see what I'm
doing and they can jump in the
conversation and tell me hey I know what
you're looking at or that kind of
program is happening when you're doing
this and within that with seven times
and we have conversation about the
problems or junior people can just sit
and enjoy this like discussion and see
how other people are diagnosing this
random programs and they can follow
their fault process and they can do that
you know you can come back go back in
time so people can look at an incident
up and like two days ago and understand
what was the thought process of the
people
and love for that likewise graphs
everything is our variable for that so
let's say everything went well we can
now merge with master it's only after we
are validated that something works in
production that we merging with masters
because master should always be the
branch that you can redeploy whenever
there is something wrong so master
should be only by the code that you can
redeploy whenever something else is
going wrong so we mention master so the
developer just click on the merge button
and it's you see it says okay I confirm
that coding prediction that works and
then what happens that you bought detect
that the branch I was deploying
production is now merged so we can
release the lock we can give the log to
somebody else and the process is just
finishing the next one the queue gets
gets to deploy then and the process is
over and that's just that super simple
do you have any questions yeah can you
speak up yeah you get flow like we use
what we call get up flow we use get up
flow I mean get flow get for is so much
more complicated you have long-running
branches you have to apply a patch to
different branches it's it's a great
opportunity to fight finger something so
we we we like to make things easy as
possible
other questions
No oh yeah sorry I can see yeah do we
have a new world box yeah that happens
that happens and rod backing is just
deploying master again that's it I mean
we very often of the question about also
database schema and we created a
framework again open source called gust
we using my sequel so we have a tool to
migrate schema without any interruption
and we leverage a lot to be a giant at
the schema level so we can we can change
the schema there's no interruption that
we start with whatsoever it's pretty
efficient as well yep so what well
whenever whenever there is the question
is about what happened when you have
both a schema change and a feature
change so we're doing things in two
steps
so we will first do the schema migration
and make sure that the schema migration
is you know the code needed to access
the data it's a pretty straightforward
layer that we have so it's easy to
change that we found messing up anything
and then we can build features on top of
that so it's like there is a separate
pull request for that and it's quite
easy to do that it's just a matter of
breaking down the work in in ways that
cannot cannot fail yeah yeah
so yeah to to make sure the branch is on
top of master are we using rebasing or
so there are there are several ways so
the developer can we base itself is
branch himself if he wants but also you
but if there's no much conflict you but
can create a fake like a like a virtual
branch that is the result of the rebase
so you but can do that for me I don't
necessarily have to do that when
deploying you but can do that to Mike
Lee as well so but later on when the
developer wants to merge its pull
request it's up to the developer to
decide why what he or she wants to do we
don't have we don't have a really Janet
get up about marriage or eBay's we don't
care these stories in the pro requires a
story is not in in the git log so we
don't cover that if somebody is raising
his hand and I'm not seeing it oh yeah
okay
because I got the light in my in my face
so I can see you have to scream sorry
can you speak a little louder
stuff too
so the question is uh what the amount of
time we spend talking about code rather
than writing code and to have that kind
of social coding that's what we call it
social coding activities it's hard to
tell three out there but I would say
that we spend probably at least one or
two hours talking discussing about each
other's code in a given day yeah but I
mean the the benefits you know it's
better design better code so let's box
at the end of the day and less time
refactoring things or so there's there's
a I mean it really pays off but yeah I
will think one hour to two hours a day I
can see oh yeah I can see you so but I
see us or hands oh good question
no because we don't we don't want our
salespeople to deploy code so there is a
there's two levels of security I'd say
or two ways to enforce security first of
all you Watts has different behaviors in
different slack rooms so there are some
commands are now available in certain
slack rooms so if you have access to
that slack room you will be able to to
to trigger these comments and then for
the most sensitive ones we have a second
factor authentication so we received a
notification on our phone to confirm
that we are the person who is typing
that command and slack and we need to
acknowledge that on our phone and then
the commands range
yeah we yeah we secured a little bit we
fell out living everything up to to
slack for our own security was not such
a good idea
you have two minute left
yeah yes yes we do that we do whatever
something is going wrong we doing
postmodern or whenever a a large project
is over we do post mortems as well to to
learn from that yes definitely
will you allow them yeah
to master them into two parts production
well yeah I mean if if we have an
emergency like we see that something is
really wrong and we need to act quickly
on that then we know that we can
redeploy master but obviously sometimes
we have bugs that are still existing in
our code base then it's just the same
cycle again we create a pull request
which in the code and we push that code
in production to fix the bug and what we
can do to avoid waiting in the queue and
send emergencies that we can we can
leapfrog everybody and do an emergency
program so we we can just say okay you
know I'm the first you know whatever is
happening right now just get out of my
way and I need to push that code in
production right now do we fix about
yeah yeah cuz the feature might still be
useful so yeah
no no no it's uh everything is in the US
right now and it's can't give you all
the details but no not yet we're doing
stuff to to be to improve our
distribution over the world but right
now it's it's a fairly narrow geography
I mean similar places but not not
several continents all right I think my
time is up I'll be on the roof we have a
gear a booth over there we have stickers
and I can't get more questions thanks
everybody</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>