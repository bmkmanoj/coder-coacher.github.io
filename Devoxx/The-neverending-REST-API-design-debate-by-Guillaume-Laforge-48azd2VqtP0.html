<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>The never-ending REST API design debate by Guillaume Laforge | Coder Coacher - Coaching Coders</title><meta content="The never-ending REST API design debate by Guillaume Laforge - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Devoxx/">Devoxx</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>The never-ending REST API design debate by Guillaume Laforge</b></h2><h5 class="post__date">2015-11-13</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/48azd2VqtP0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">okay so well hello everybody I'm happy
to be there with you to speak about REST
API design there are quite a few topics
around REST API design and there's not
always one single way of doing things
and sometimes you know there's not
necessarily standard associated with a
certain topic etc so it's sometimes more
about preferences than anything else so
I'll try to give you a different you
know alternatives etc and we'll try to
cover quite a bit of things around the
topic of REST API design so why do I
speak about rest so I'm usually more
well known for groovy because I've been
working on the groovy programming
language project for more than 12 years
but pretty recently I joined a company
called red sled which is focusing on API
where the API is and so I joined the
company last February and we build
projects and tools around the topic of
Web API so seeing lots of API is from
our users and customers give you that
gives you some ideas of how to design a
REST API so you can double check
wristlet comm if you're interested in
what we're doing and actually doing if
the network is working correctly I'll
try to do a demo of one of the project
DHC but you'll see that h1 if it works
so Roy fielding coined the term rest for
representational state transfer in in
his PhD thesis called principle design
of the modern web architecture and in
this talk it defined different
properties your software architecture
should have
you be you know compliant with the rest
approach so property is like performance
scalability etc so I want Ashley you
know go through each but work more
around the different little topics
around API design rather than coming
back to the whole principles of rest but
I just wanted to highlight highlight
them here as an introduction so there
are properties and there are constraints
I mean properties you know who wouldn't
be performing scalable and simple and
etc that's that's cool
but it has some some impact on how you
you design your API is and as well as
the constraints like stateless aspect or
certain operations where you can catch
the results of calls so that you can
also improve the performance even even
if only by the fact that you can cache
some results and we will perhaps focus a
little bit little bit more on the the
uniform interface aspect so in rest you
identify resources things that are
actually important to your business
domain so let's say I build an API for
the devoxx conference schedule there are
important concepts in my API like you
know the speakers the the the sessions
the agenda the rooms etc so all these
things should be somehow represented and
identified thanks to resources distinct
resources you also want to manipulate
those resources and for viewing and
creating your resources you deal with
representations and perhaps I can
actually show the little bubbles so for
first resource here I can identify let's
say a certain car I don't find with the
one two three ID for the representations
well I could represent that car
with a J'son pail and an XML payload or
why not JPEG or gif image for for that
car
self descriptive messages it's also
about things like how you deal with
those resources you deal with them
thanks to HTTP methods like get post put
delete so that's the four most common
ones but there are other interesting
ones like options patch head etc well
there aren't that many that's the most
of them and we will also near the end to
speak a little bit about hypermedia and
how you can make your api more easily
discoverable more make it more navigable
if you want to go from one resource to
another so let's say you're looking at a
speaker and you want to see all the
sessions that that speaker is presenting
and there are some approaches some if
not standard at least some how could I
call that some some projects to
represent hypermedia
links between your resources I was
mentioning the four key methods get post
put delete so usually you usually have
two kind of resources you've got a
single item so like a car that's one
individual single item a car but you
also have lists of cars or collections
of cars the operations on items and
collections are not initially doing the
same thing obviously so let's have a
look at the collections first if you do
get on the cars resource you're going to
get the list of all those cars okay if
you do a post on that collection you're
going to add and create a new car if you
do put well usually putting something on
the collection itself that's because
you're replacing the entire collection
of of cars and if you do delete the
delete operation that you need to delete
everything
on the item get cars 1 2 3 4 you're
going to retrieve one car a post on a
single car identified by an ID doesn't
really mean something so it's usually an
error but with boots you can replace or
create an individual car so instead of
posting on the collection you can do a
put and if you've got some times you can
decide that IDs should be created by the
client or provided by the API if you do
that if you do a put on cars / 1 2 3 4
that means that you want your car to
actually have that specific ID and then
the delete operation is going to
obviously delete the the car you're
pointing at basic stuff next bit of
advice to be rest wrist for you have to
favor
Noons / verbs so there's a nice blog
post and saying Nunes are good verbs are
barred but so that's kind of like
something you were going to say it at a
protest so usually prefer Nunes - verbs
and Nunes really refer to resources and
verbs tend to refer to actions okay but
actions we said that we deal with
actions thanks to the HTTP verbs so news
are I don't find your resources so you
would say instead of doing and then you
are your eyes get speakers you're gonna
say slash speakers right you don't put
verbs or retrieve list of speakers or
something like that you're not putting
verbs you're putting Nunes for your
resources but actions are actually okay
there are some cases where you need some
actions and some verbs so things like
login logout operations or conversions
calculations etc you might use verbs for
that kind of stuff and the last example
if you if you if you show browsing let's
say repository on github or some project
repository of some sort you might want
you might want to star that repository
so you can say report
is one two three let's do the reaper's
degree I'm looking at and then I say
it's star because I want to star and to
start to that repository so it's okay
well starry pops is it's probably not
well chosen in the sense that in English
star is both a verb and unknown but
imaging vote or no vote is another bad
example but the image in a verb which is
the other known it's not a name of
something confined like or like yeah
let's say I like that repository so I'm
gonna light it and I would have slash
like instead of star thank you for this
good suggestion so knowns are good verbs
are bad and when speaking about Nunes
names naming naming is also something
which is important there there's been
some debate well don't think it's reopen
anymore but some people like URLs of the
form so for the individual single item
your eyes prefer slash tickets plural
form / two three four verses slash
ticket no s slash two three four usually
at least my experience with all the
api's I've seen is that it's often less
con you know less confusing to have just
one single plural form both for the
collection and for the item so it avoids
confusion with words which have a
different kind of spelling in a plural
and singular form so let's say person
people goose geese you know it can feel
a bit weird to have different paths for
representing the same thing so I mean
technically speaking when you are
working with your favorite rest toolkit
or web framework etc to implement your
API you might be able to do routing
based on the on the prefix and
everything under slash tickets will go
to the tickets control so you it's just
basically one mapping and then you you
map the the rest of the path if there's
an ID you do this if there's no idea
that means that's the collection so it's
usually easier technically speaking to
just have plural forms for your
resources and usually the the mental
trick is to think of it as you know
that's the the item that 234 item or
item with that number of the tickets
collection so that's how I mentally
think about it and why I use the plural
form then also about names there's how
you you write you spell those names so
should you be so in my examples there
was just single word like repositories
cars etc but sometimes you have some
more complex resources which are made of
let's say two words so should you be
using camel casing or perhaps snake
casing so there are different approaches
so you know upper case camel case lower
case camel case neck case or natural
it's called - snake case but that's how
I called it when you use hyphens instead
of underscores I've seen all of this but
it seems that there's a slight
preference for lowercase forms and snake
case and I I've found a study on the net
I don't have the link handy but that I
found a study which was explaining that
using snake case was more readable than
using camel case because you know it's
like there's a space in between so it
reads more easily so I don't know how
they did their their study but that's
what they came up with in terms of
conclusion but at least whatever you
choose be sure to be consistent so if
you've chosen one kaysing camel case
Nick case lower case upper case be sure
to stick with that convention don't have
both for different areas of your API
that wouldn't really feel very good
when you deal with relations in your
URLs sometimes you can see URLs with
let's say tickets one two three messages
for so sub resources of your main
resource sometimes you may be wondering
well should that be dedicated message /
4 resource or should it be a sub
resource of the tickets resource and
usually the the trick is to think in
terms of whether the that sub resource
stands on its own if it can be linked to
without referring to the ticket here my
message I could put it you know instead
of under slash tickets I could put it
under just slash slash messages for but
in this case perhaps messages are any
messages for one ticket that cannot be
for older tickets so it's okay to have
that a sub resource in my path let's say
for groups of users user groups I think
I would probably just although my user
could be in this or that particular
group it could be in several groups so
instead of saying users 67 of that user
group I would probably not use a sub
resource here but instead map directly
and put directly slash users 67 rather
than user groups under under user groups
and if you do that in the payload for
your user group you should be using a
reference to that URL but it will come
back to hypermedia links etc later on
and so I'd come back a little bit on
that topic API parameters some rule of
those that I like to give when so in
some of my examples I was using some
path parameters so slash
so cars slash 23 the ID of my car is
part of the path right you could have
thought okay I could have used a query
parameter question mark ID equals 42 or
sometimes when you do request request
with bodies you could pass that
information through the body and there's
a fourth option which is through a
header can use HTTP headers to have
those those parameters so when I say
parameters it's whatever customizes
certain resource let's say so usually
four so four parameter which is actually
identifying a resource it's better to
put it in the past
cars slash 23 if it's something that
refines or is optimal or that refines
let's say you query collection like you
want to filter a collection then you
should use a query parameter when
there's some more advanced logic going
on or if you want to send a search query
you would probably put that in a body
but sometimes certain api's can have
both a query string and a body some
support both and the last one that's
probably the one you would use the the
less frequent frequently is it's when
you pass headers so things which are
more global let's say if you've got an
API key and you want to pass that as a
header but some API is do pass it as a
query parameter so there's no real rule
but that's kind of rule of them to
decide what to use and when yeah a
little focus now on HTTP status codes
and you can have a look at this short
URL be key as tico like status code it's
with some of my colleagues and let me
see if I can show you that with some of
my colleagues we made a little subway
map of HTTP status codes with
each family of status code is actually a
metro subway line and there are some
funny crossing stations like you know
HTTP central both Bazaar etc and when
you hover some of the some of these
status codes you can see the what it's
about
and you can also click to get to the so
let's see if I click on 500 of 7 it's
going to lead me to the the explanation
of this status code ok so let's get back
to the status codes so status codes is
the code if you want to look at that
so I said there are families of codes so
there's all the 1x codes the 2x codes
etc the 1x code is usually you know hold
on there's more to come the - Xcode is
here you go
I've got your resource I'm gonna give it
to you 3 something you know that's
redirections etc so just go away for xx
you factor you used some bad you know
query parameters or something 5x it's I
 up because my API is doing
something wrong you know technical in
awkward or something like that that's a
or not just that but rate limitation on
other topics will be 5 xx and there's a
pretty cute website called HTTP status
dogs which illustrate each HTTP status
with cute pictures of dogs so 100
continue 200 everything is OK 201
created accepted none of relative
information no content yeah nothing to
it today 2/6 partial content poor dog if
there's a they are there's one with cats
there's one with rappers singers and I
think there's a fourth one in the in
that Simon Illustrated illustrating HTTP
status codes with funny
pictures and sometimes you see a pianist
returning 200 all the time but there's
more than just 200 there are some useful
- Oh X codes which are interesting and I
could you know put a finger on an
anti-pattern
for instance the the Facebook API which
uses 200 for everything even foreigners
so everything is always okay even if
it's an error which is not very restful
at least not it's not my taste 200 let's
say you you post a new car so the three
dots that's the the car I want to learn
to create I want to post a new car
create a new car so instead of returning
200 I should actually use the proper
HTTP studied code status code 201 that's
a created resource and it's important to
pass the location pointing at the
locations of that newly created car so
cars convey to power / that's the new
because I couldn't know the idea
beforehand now in my in the response I
get from the API
I know where my newly created resource
is located so use the location header
for that because API navigation is
important to make API more discoverable
so when you play with an API you learn
to use it
it's nice to have not to have to guess
what the the a the the URLs will be but
to actually get them and be able to
navigate from one request to to another
and that's why hypermedia that I'll
mention later on can also be interesting
and important and I'm gonna make a small
demo with the DHC API testing tool if
the network still works so I've heard
that there's a so it's not the movie
we're going to watch tonight unless
Stefan has got the scoop but there's an
API called the Star Wars API right so
you don't have to wait for December 2 to
get some Star Wars film and this there's
a Star Wars fan an API file created an
API which lists all the
all the characters all the other planets
all the movies all the VI calls
spaceships etcetera all the species it's
it and for instance if you do swap Pico
API people one you do a request and it's
going well it's the result which is
already displayed but I could I'd say do
a another one people / - I don't know
what's gonna probably Dark Matter order
some know this repeal so it's um it's a
nice API and what's nice is that there
they are actually using URLs to
represent the related resources so if
you want to know in which movies in
which films see c-3po was part of you
can get the the films property and
you'll see you don't see that and when
you have some clever tools like DHC you
can do so again I'm gonna do the query
but in in that tool and when your API is
discoverable and is properly using links
you can actually navigate those links so
here I was looking at Luke Skywalker
here Luke Skywalker is actually quite
small by the way a bit heavy for this is
a fight and notice that the movies there
the films there are actually hyperlink
and if I click on the hyperlink it's
going to prepare another request for
that specific hyperlink for that
specific resource so I can click it and
then I get ok the force awakens there's
that's the the coming one I have from
December and perhaps if I continue I'll
find the scoop what's happening to Luke
Skywalker in Star Wars 7 I don't know
but yeah having links makes API more
easily discoverable so let's continue
with our status codes accepted sometimes
there are some requests where the API
cannot reply right away like returning
the payload Geraghty but you can say
okay I accepted the request but the
treatment
I'm going to process that later on as
synchronously so you might have to call
me back or something like that so you
can say - OH - we don't return any pea
payload but later on you'll have to do
another call to figure out where is this
year this request has gone to o4 if you
delete a resource instead of saying 200
ok because the deviation work you can
use 200 or 4 say no content because
you've just deleted that entity but you
might also see some api's which actually
do return 200 and return the the payload
of the resource the representation of
the resource that has just been deleted
because you might still want to do
something with that payload so you can
see both but there's a proper status
code for deletion you can use - not for
deletion but to express that there's no
content anymore at least under that
resource partial content with 2 or 6
let's say I want to list all the
meteorites lending and I want to watch
page 4 and instead of saying 200 you
could say 200 or six partial content
because you're not there are so many
meteorites that you cannot return them
all in one single Peggle in one single
response so instead you're going to give
just a small section of that collection
and you can also or you should also use
the link header to say ok this is the
first page this is the previous the next
the last page that also helps navigating
through the results but I'll come back
to pagination later on yes there's a ok
I thought you were you wanted to ask a
question ok no no worries
so if you stretch I might be thinking
you know not sure you want to ask some
question in case of using caching
instead of returning 200 and you give
the pail the the presentation you might
be saying ok 304 you already requested
that resource so I'm just saying okay it
hasn't been notified so we can use the
one you have in care
already instead of computing and doing a
you know let's say your database access
or something I got to get the resource
and speaking of caching I'm just
trashing my that's in my map last
modified so there are two the most
common approaches for that there's the
last modified hitter and etag header so
let's say I do a first get and I know
it's been modified since that date but
then so I the the reply says okay the
last modification date is this date so
it's a the the number of seconds of the
epoch time so that you you know when the
last modification has been done perhaps
two more it will be clear with the e-tag
approach where let's say you do get and
you knew that the the resource you you
had a the version of that resource with
that identifier a four or five blah blah
blah but then you get the the content
things are things have changed and you
get a new version of that resource and
you've got a new attack for that and
then the next time okay I'm gonna do
another get because I want to see if
this there's an update for it I could
also use a head cold instead of a get in
case the the payload is huge but that
would mean potentially doing two calls
instead of one and then I get another
time with the that same identifier that
I had discovered the last time for the
previous call and then it's telling me
three or four not modified because
that's the same way the same one I got
the previous time so let's come back a
little bit pagination so I mentioned the
discoverability the link header etc
there are often different ways of doing
pagination so either using the page
number or limit offset approach so you
say okay
I won't page 23 of my metal rights and
you can also sometimes specify the size
of the page and the number of items
returned for for each page the tricky
the downside of this approach that if
you've got an insertion going on there
might be a you know a slight difference
between the pages perhaps some overlap
or if if something was deleted or
inserted novel app or some elements
missing when you are navigating so
that's a drawback of this approach
there's a another approach which is
using cursors so that once you've moved
at a certain point into that collection
you're going to continue from that point
whether something was deleted or
inserted before doesn't really matter
because you're going to continue after
that cursor point and there was a an
interesting article that I read a few
months ago but what I would call let's
say semantic parameters when there's a
limited number or a discrete number of
pages let's say only you you you make
bunches of pages you regroup the
entities the resources by the first
letter of their name or something like
that or let's say you've got only five
categories of something and you could
decide to do pagination across those
special semantic meanings but usually if
there's a you know any number of
possible elements that's also drawback
because perhaps you you would actually
be doing a first filter operation and
then do the usual pagination instead of
doing that but that was an interesting
idea that I wanted to mention so it's
not one I'm seeing very often but it's
an interesting idea and another approach
instead of using query parameters you
can also use the the range header often
ranges accept-ranges is usually used for
bytes so let's say you're retrieving
you know a big picture or something like
that you can retrieve the picture in
chunks and say okay I've already
downloaded that part so I want to
download that part of the the big binary
resource but you can also create your
own ranges and you can specify okay so
here I do first call for the list of
users and it's telling me okay I accept
the range users and then what's returned
for that first call is actually the
range the the first ten items of my
users and there are 200 items and the
next call I could make I could say okay
now I want range 10 to 19 etcetera using
headers instead of query parameters so
that's quite elegant but I'm not seeing
that used much often when returning
collections of things so it's not
necessarily a devoxx on which although
that what might look tasty oh that's
nasty I'm glad I had my sandwich this so
wrapped collections
sometimes you see API switch return so
especially when it when we're speaking
about Jason even more so than other
formats XML etcetera sometimes although
you're just returning a list of
something you're not using the the the
J's array array concept you're using
wrapper JSON object within which there's
property which contains an array of here
tickets okay I mean it's a bit of
useless additional boilerplate that you
have here because you don't actually
need that you know curly brace date etc
you could just return directly the the
object the array sorry the JSON array
that's it when there's when there are
some specific items no specific metadata
about the collection let's say you are
getting a collection of pictures an
album your album might have a title
location some days etc so these are
particular to that collection so it's
not just a paging information like this
is the first page of my list of pictures
now so when there's real metadata
associated to that collection of things
then it makes sense to have wrapped
collections but otherwise my feeling is
that it's better to use directly JSON
array rather than rapt array inside a
JSON object okay let's move on to the
three X code moved permanently found see
other not modified temporary redirects
permanent redirects so nothing specific
to say about the three X code so that's
usually you know when things have moved
resources moved locations so you can use
those code now the the code where users
made an error so bad request and
authorized forbidden because you don't
have the right to do that operation and
not found no bones to be found another
devoxx on which if you're not a vegan or
vegetarian and too many requests so
let's say you are using an API like I
don't know the github API or something
like that and you've hit the rate
limitations welcome back to make a
limitation later on you can also get a
429 too many requests have been issued
and speaking of 4x so usually that's
because there are some errors going on
it's good to not just return you know 4
or 4 or 4 for 3 or whatever but it's
good to be able you know it's good to be
able to describe more precisely what
this error is about so
something is forbidden not necessarily
because you have not the right to do
something like the you know in terms of
authorization but actually here it's
more you know banking authorization here
I cannot do a transfer or debit because
I don't have enough on my account and
then you can describe what's there so
you could give a title you can give some
details the instances on which the
problem was occurring and potentially
other details and there's no standard
for that but there are proposals like
the VND error mind type or the HTTP
problem proposal which might become an
RFC and this one is the HTTP problem
approach also note is the the plus Jason
stuff if you've not if you're not
familiar with that it's to say okay this
is a special content type but I want to
have a JSON representation for that
resource for that content type
so you'll see plus Jason plus Yahoo post
XML etc for the 5x internal server error
not implemented service and available
bandwidth exceeded also something
interesting when you're a client when in
your consumer of an API if there's an an
an error code that as a client you don't
understand let's say for 99 I don't
think that it exists but you should be
treating it as if it were a 405 18 I'm a
teapot you don't know what to do about
that error could just treat it as if
it's a server error and in terms of you
know what you're going to display in the
UI of your application or mobile app or
something like that just treat that it's
part of the the HTTP rfcs that you
should treat unknown status code as the
zero zero error status code of the the
status code family so recommendation so
for twenty one nine too many requests
for instance
you'll see api's using those headers ex
rage limit so it's it's not a standard
but it's quite used commonly on various
API is the github API or other API is
I've seen in the wild in the wild so you
can say you can give the number of total
requests that are allow allowed the
remaining that you're allowed to make
and also when that recommendation will
be lift so the next time I'll be able to
you know once you've reached zero the
next time I'm going to be able to make
new requests so that you don't make
requests when you don't have the right
to do so because you've exceeded the
limit so if you add rate limitation
because you want to you know your API is
so successful that you have to limit
customers to access it you can use those
quite common HTTP headers one size
doesn't necessarily fit all and you may
provide different payloads for different
consumers for instance let's say you
want to select just a subset of
restaurants so it's much more about
filtering if you will so you can say
okay I want the Chinese restaurants with
five stars but for filtering you can
also say that the payload let's say I'm
retrieving the user details my user
might have tons of information but you
know not just first name last name and
you know address in whatever but perhaps
my user is a very heavy object okay but
in my letting my mobile application I'm
really only interested in the first name
last name and age that I want to display
and my mobile view so I could use this
approach of saying with using a query
parameter fields equals first name last
name age because the
I want the pail but I just want to get
those properties not all the rest of the
payload of the representation
you could also say exclude because I
want to exclude certain fields I'm not
even interested in and the other one
which I find quite interesting it's you
could also decide that there are
different profiles different styles
let's say a mobile view of my user or a
full view of my user it's a try you
could define one two three buckets or I
would say that we have styles I don't I
don't think there's a common term for
that I came up with style but there's
also another approach which is not very
well known it's using the prefer header
this one is my opinion more elegant so
you can DIF yeah here I used the term
profile instead of style so choose your
main mean let's say different profiles
so minimal profile mobile profile full
profile because I want to see all the
details and when I do get I say I want
to get I do the get and it's telling me
okay every the API written the minimal
profile but in the very header I know
that the the API except that prefer
header and then I'm able to say so in
the in the the the reply that I get the
preference that was applied what minimal
because I requested and here I asked
further
yeah sorry I'm saying it wrong I asked
for the minimal profile and then yeah
the preference that was applied was the
minimal profile okay so that's a way
because different consumer is different
clients mobile apps versus web apps
might not need the same information so
you instead of letting the client decide
which fields he wants to get you could
in terms of so it's more in control is
on the API implementer side of things
you could say okay I support three
profile
these are the profiles you can use as a
consumer
sometimes resources depend on other
resources so a user might depend on and
it has a more deeper model layer the the
user has got a dress the dress has got a
zip code country etc so sometimes or
often you see users with just the top
level properties but then you've got
references to the sub resources and if
you really want to customize and get the
the whole address you could say just
like we were filtering on fields you
could say instead of just address
address dot zip because you also want
the zip code inside the address so it's
a way of expanding all the resources or
sub resources which are part of that
user then so we spoke also about
filtering pagination etc we can sort
your collections so there are different
approach so that's the the sequel what I
call the sequel style where where you
say soar equals title plus desc
because you want to desk in descending
order on the title or you can put you
know two swords
there are also api's which do two query
parameters one for the sort column or
property and then
desk end or ask for descending or
ascending order but sometimes you could
see also sort and order so sort order
equals ask or desc
but if you do that you can't have one
field descending and the other field
ascending so depending on how you want
your users to sort through your data you
might be preferring one over the other
but again there's no real standard for
that so it's more you know your own
taste
searching yeah very briefly within
different ways of filtering things so
can do simple searches on one particular
resource with that approach but
sometimes there are api's which also
provide a much richer query system and
in that case you know it could be a
sequel like long wait it could be a
Jason kind of tree or something like
that so again there's no real standard
there now versioning versioning your API
is so v1 that that was a flying boom
from World War two a German flying bomb
so it's not the version so they are
different again different approaches to
API versioning the one I see most
frequently in the API is that we see at
wristlet and that we also support it in
our own API platform by the way it's
using the version in the URL itself so
it's V 2 slash restaurants etc so the
very beginning of the the path
corresponds to the version of your API
another approach is to use a custom
header so in the header it's not a
standard but I've seen several API is
with that notation X API key X API
version etc so X API version would say I
want to get the restaurant with the v2
of my API and the other one which is
interesting is with the accept header
where you use that notation VND
restaurants dot v2 plus jasm if you look
at the the github API for example they
are using such an approach if you're not
using an accept header it's going to
return the latest API but if you're
still stuck for a little while with the
old API before moving to the new one you
can specify ok I want v2 with the accept
header with that special media type and
hypermedia
so it's a big topic it could be we could
spend an hour a full hour on hypermedia
so we already spoke a little bit there's
kind of Star Wars theme in that
presentation we spoke a little bit about
the nice aspects of using hyperlinks to
navigate between resources that makes
the API more discoverable and it's
easier once you get let's say a user and
you want to get the list of friends of
that user you get directly the URLs of
that of those users it's it makes the
API easier to navigate and remember when
that was a few years ago and not
Richardson defined a matrix in model for
how restful an API can be so the first
level was just exchanging plain old XML
and you could have get users in the in
the path etcetera then you go with Nunes
and resources then you've got users cars
etc but then perhaps your API was just
using get and post but not delete and
input then the the other level with HTTP
verbs now you use the proper HTTP verbs
and then the best level level three you
use hypermedia control with links to the
the related resources there are some
pros and cons for hypermedia what's
interesting with sometimes people sell
hypermedia because oh yeah you can
escape the versioning api versioning
hell because if there are new linked
resources you can just add new links in
in the payload or let's say the I don't
have a good example in mind let's say
the users the way you get the the
friends of a sudden user is done through
a certain
resource but then in the next version of
your API you're dealing friends very
differently and then you can add new
link to the new way of how getting
friends for a certain user so you could
make versioning more transparent without
defining v1 v2 v3 because the API change
changed a little bit or wider but I
don't think it works for all possible
changes because sometimes changes are
really two far-reaching and just
changing links won't be enough to
support the the new version of the API
another Pro is that it makes API is more
generic in the sense that clients who
are able to navigate those resources
could discover the new links and then
help you navigate to those links but for
me the the con there is that there's
some semantics associated with link so
if I mean I I'm a mobile device I'm
using your API and there's a there's a
new link called friends okay
what is that concept concept of friends
I don't know what it is how to represent
that in my mobile app UI so in terms of
I mean even if a client of a sudden API
a consumer of an API can discover those
links you might not necessarily know
what this new link is about because
there's semantics associated with that
hypermedia link and you'll have to
evolve the the mobile application to get
a good understanding and how to
represent this new link in this new
hypermedia link in the payload that is
returned also another downside is that
well the more links you have the heavier
the payload so especially you know on
your mobile device like so
I took the I only arrived to DevOps at
noon and I came from Paris with the
Tally's train and I was using my mobile
phone for tethering because the onboard
Wi-Fi doesn't always work and the
connectivity wasn't all that great even
you know at full speed on the train and
the heavier the payload the harder you
know the interaction and how smooth your
mobile app is going to be because you
might spend 10 seconds to get a result
because of all these additional links so
the app is less responsive because the
payload as are much heavier so think
about that but also you can think again
about things like the the prefer header
that I talked about yet earlier on
because you could say that ok I'm on a
mobile device so I don't want to have
all the hypermedia information in the
payload so I could just say I'm using
the mobile profile or no hypermedia
profile or something like that
so that's the list of pros and cons for
hypermedia api's but keep in mind that
change is unavoidable because the the
API might be changing drastically and
hypermedia won't be the answer in all
the possible cases for implementing
hypermedia
there's a lot of choice so there are
different competing proposals or
projects and ways of doing hypermedia
hal is perhaps the the most well known
there's json-ld collection plus jason
siren and quite a few others so those
ones are the most let's say the most
popular ones
so I'll just yeah so I should have put
that later on just before so I'm going
to mention how in
in a few slides just a few words about
IDs in your linked resources if you
don't go with how json-ld etc and if you
do your own hypermedia using links
directly without using those standard
approaches be sure to actually put URLs
not just the IDS let's say I've got a
list of photos in an album I want to get
the lead it should be inside strings
insider quotes I mean you want to have
the links to the photos not just the IDS
of the photos because the I mean the the
client would need to figure out what the
URL of the of the photo which is kind of
error-prone if you make a change or if
the you are eyes are changing a little
bit when you evolve the API so it's more
resilient it's more solid if you go with
URLs for IDs instead of just the the ID
and another word about IDs is that
usually it's better to use so although
it's a in all my slide I used counter
types of IDs 1 2 3 4 etc but usually
it's better to use uu IDs because to
benefits we could list but that is that
you know hackers might not as easily
guess the related resources or find new
resources that they shouldn't have
access to and the other aspect is that
depending on how you deal with the
generation of IDs but in distributed
systems an API which is on several nodes
etc depending on how you implemented it
using auto incrementing IDs you might
have you know problems with IDs which
are not unique depending on the node you
hit and you've got two calls generating
the same IDs and so you you IDs are
usually better than just pure counter
IDs so let's get back to one example of
hypermedia with how I'm sorry Dave I'm
sorry Dave I can do hypermedia with a
soft voice
so this is one approach here let's say
I'm looking at some player and the the
so I'm just showing one aspect of how
but they are more than just with that
link so there's a special links property
where you can define the links there's a
self link pointing at yourself the the
current resource but you can also define
links let's say ok to the friends of
that player again with the full URL so
that you can easily navigate but there's
more to that in the the whole approach
but if you want to follow one approach
in your API you could use that yeah so
we're reaching at the end there are some
useful resources that I'm putting there
but there are many more interesting
links on the topic of API design so the
video will be online later on and I'll
put the slides later on if you follow me
on twitter ji DeForge I'll put a link to
to the slides and I think that's all so
thanks a lot for your attention and I
think we just have so I don't see the
counter but I think we have two minutes
right two or three minutes for a few
questions
yes over there in the middle
so the query parameters repeated query
parameters I don't hear you very well
now I'm not sure I understand the
question so say it much louder yes okay
yeah so how do you do that you mean okay
yeah is it a good approach I usually
like when you separate with commas
you know player a player equals a comma
B comma C etc I tend to prefer that
style but yeah I'm not sure there's a
not sure which the the most frequent
thing yeah yes in the front matrix
parameters like what kind of metrics do
you mean of metrics metrics metrics
parameters what kind of metrics you
would have okay okay so the query
parameters might be referencing the top
resource or sub resources yeah okay so
how to select which resource or sub
resource does the query parameter
applies to
so if you use the you know the dot
notation approach like let's say he
wants to get player dots or like the
example I gave with a city nor a user
with an address with a zip code etc
that's a way to you know access
particular aspects of sub resources so I
would probably go with that so I'm not
sure that's your question because no
okay okay so let's talk about it after
so that you can better explain the
context okay I think are we good or
still one more or we could so we are
good okay
thanks a lot for your attention and
don't hesitate to come to me for further
questions thanks</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>