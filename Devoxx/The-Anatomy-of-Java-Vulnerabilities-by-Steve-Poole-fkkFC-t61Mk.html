<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>The Anatomy of Java Vulnerabilities by Steve Poole | Coder Coacher - Coaching Coders</title><meta content="The Anatomy of Java Vulnerabilities by Steve Poole - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Devoxx/">Devoxx</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>The Anatomy of Java Vulnerabilities by Steve Poole</b></h2><h5 class="post__date">2017-11-11</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/fkkFC-t61Mk" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">excellent
cool well welcome to the last session at
devoxx and I thank you very much for
choosing me over the others this will be
the scariest talk happening at this time
well okay so this is the talk I'm going
to talk to you about Joe of honor
abilities okay so me well I work for IBM
I'm a Java runtimes guy DBMS done for a
long time but I've also do DevOps and
this talk comes about off another talk
that I used to do about cybercrime so a
few years ago I did I went off and did
some DevOps and led a large DevOps team
in IBM and I learned a lot about how our
operation guys looked development teams
and they didn't like what they saw and I
was going no you don't understand and
then I have conversations with them when
I start learning about things like
compliance in other words and I realize
that actually it's really scary and so I
did some talks about cybercrime in
general and one of the things people get
asking was can you give us some examples
of code because we're all very cagey
about sharing stuff so this talk is
going to talk about Java vulnerabilities
and touch about some of the processes
and I'm going to show you some example
codes and I'm also going to give you a
little bit about why this is important
and I know it's becoming important to us
because there are enough tools that
DevOps rather conferences about security
that it's really good that stuff is
starting to bubble up so I'll give you
some pointers about where else to go to
look formed for more information so
let's start with the really simple thing
a bit of code so this is a diff and this
up it's a two character change okay not
very much okay just a piece of code you
wouldn't notice
would you it's a corner case there's
this bug in past
if you pass in some text and that text
has that particular number to point to
play okay then the code what's parsing
the code will loop before ever just pop
that number okay and it was found a
reported 2001 so what it's just a weird
thing okay
it's just sat around for 10 years but it
turned out that actually it was a really
really good bug to bringing systems down
because it turns out that we have lots
of places where doubles are stored in
strings and get passed and those doubles
can come in from all sorts of places web
services for instance right if you've
got a HTTP request and there's some
headers and it's going to double and you
got some Java code and you're expecting
a double you pass it right there's no
security checking it's just it's just to
get send some headers post double system
hangs right
there's a nice u2 URL you can go read
all about this because it is totally
public and do you know what happened
it went viral in the sense that
everybody had to go because any script
kiddie anybody could try it what happens
if I put that thing in a header and send
it off to a web server it doesn't even
have to have it be expecting it if there
are ways that you can get the you like
you can just send it some headers and
dunk it parses it in hangs right it cost
everybody our large amount of money
because it was so easy to bring your
systems down right just for kicks
this talk is this talk is a technical
horror story really because so much of
the things that I'm going to talk about
are really our fault as developers we
haven't been paying attention right
sometimes it just bugs that's fine and
sometimes they're things that we've
added because it's good for us and then
when these things did come out like that
particular one we didn't really pay much
attention because we weren't thinking
about the big picture okay so it does
that occasionally who would do that
right that little bug is what would be
called a vulnerability right so i'ma
talk to you about these what are
vulnerabilities in detail and it's all
Java based so the first thing you can
talk about is well as I've seen it's a
bug that can be exploited so it's not
just any old bug it's a bug where a
attacker can achieve his goal steal your
day to bring your system down etc all
right and they it's an exploit so it's a
bug that somebody finds out how to do
something with it right and there's lots
of things they can do so they can bring
your system down right that's a really
good one that's nice and easy and how
would they make money out of there well
denial of service attacks they may
ransom you if you don't give us some
money we will keep doing it and it's
just those sorts of they're just trivial
because they're easy to easy to do right
now they can get in and reduce your
integrity so they can get into your
system they can modify your data and
we'll talk about how they can do that
later right and other exploits are
getting in actually running your code or
running code that you weren't even
running code that you didn't even know
you had right and that's pretty much all
of us all right and then there are
classics of getting in and getting in
and exploiting bugs that let you get
more more more privileges so you can do
things that you weren't expecting so
your systems will suddenly find they've
got root access when they didn't and if
you've got root access you can do other
things so that's what exploits are right
no it might be they don't care
maybe I just write code and these things
come through and it's like who cares
what's the problem how big is the
problem that we're facing so you
probably if you're lucky you went to
sirens talk this morning about security
perhaps you went to the keynote last
night about not necessary illegal
activities but new thinking about how
you use the web to make money and
achieve Pitt and change people that
people's aims so in all that there is a
bunch of people who are making lots of
money so let's talk about the scale of
the problem who do we think you know are
the bad guys now various people will
tell you you know it's script kiddies
it's courage 16 year olds who got access
to the web you know it's the disgruntled
employee etc and that's true there are
lots of those right and you might think
that's all it is that there were just
these lone hackers around doing things
and making some money but it's not true
it's much worse than that here's the
killer take away cybercrime is more
profitable than the illicit drugs trade
2016 right 450 billion dollars a year
was estimated we made by the cyber by
cybercrime ist's criminalists the drug
trade from 2013 they're burying my it's
hard to get figures from people who have
you know try not to get caught you could
work out what it is and the UNODC said
4:35 right the expectation is as you can
see that the cybercrime which they value
is going to hit 2120 100 billion dollars
by 2019 which isn't that far away what
Java versions that right and the thing
you have to remember is it's there is no
risk
right it's growing fast and all the rest
because it's easy there's no physicality
to it right and you can't prosecute the
people let me say that again right so
least risk the chances of anybody
catching somebody one of these organized
criminals so these are these are this is
organized crime right these are guys
like us sitting in rooms hacking away
for profit they do good profit sharing
deals okay they don't get caught what do
they get caught for they get caught for
some other criminal activity and then
when they're caught it finds it turns
out that they were doing something like
this right and it's really hard to
prosecute so we've got these guys here
hacking this system in the other side of
the world I mean who would you do right
so not much happens and it's just gonna
get worse
so in this just used more code another
vulnerability some more code right so I
have this directory on my system right
user school foo spacebar and I'm going
to refer to URL so hey that I've encoded
it cuz this easy so I put a percentage
20 in for a space you will all seen URLs
like that okay
and so I've got little snippets of code
here so I'm gonna create URL from it and
then I'm going to ask for the file path
okay and I'm gonna have got two piece of
code they're going to say what's the
path and does it exist okay we important
so I run that and I get two bits of
information I get the path oh ah so
there's not quite the path of the
directory that I actually had and of
course he doesn't exist all right I
forgot to decode it so let's do that
let's add in decoding so now I'm going
to use a URI so I've got the URL with
the encoded path and I'm gonna pretty
your eye from it because that'll do all
the decoding for me and then I asked for
the path and I do the same thing again
and uh it works
so my code now is correct
okay now you may not see the that's
that's fantastic but I was looking for a
file that didn't exist what would happen
if somebody had created that file on my
system right then I would have got
exists equals true okay no not big deal
okay how about this on Windows anybody
can create anyone any access can create
top-level directory so if my path had
been say what you're seeing there I
didn't exist then anybody who'd got
access to my system could create it so
my application that was looking for
father didn't exist suddenly found it
okay so maybe not a big deal just a bug
all right but what happens if your it's
on your extensions path but if your
extension path has entries like this
right see Carolyn program percentage 20
files blah blah blah actually lots of
people have sisters have things
installed and have paths where things
don't exist that optional products are
all sorts of reasons why you will have
some path where the things on the line
don't exist right and you probably won't
notice right right so if we had a
problem the JVM say with the extensions
directory or we didn't decode it
then if somebody created the path
because they got access to the system
they could get you they could get your
application to run code or the very
least because they give they're putting
something into your queue and it's your
class path or extensions path they're
now allowing you they're now forcing you
that whether you know it or not to go
visit what they've installed it could be
classes it could be libraries right if
it's found on the poet's arch poet
search path before what you expected
that gets used one line right no it's
not quite what actually happened because
I'm not going to tell you there's any
one example in all this where I'm going
to tell you what actually was real in
duty detail everything else is going to
be slightly obstacle right and that's
that's what good reasons right but there
was a bug similar to this in the JVM
right so the thing I want you to start
thinking about is when you hear about
thunder abilities and exploits exploits
have the bringing together of all these
little tiny weaknesses in your code
they're not big holes right
you saw the differ at the beginning you
know you've got to understand what the
consequences are so there's a definitely
a whole set of fixes bugs where you
wouldn't get them by looking at them
you've got to be in the frame of mind to
understand what you're looking for but
there is a bunch of behavior that we do
that you would spot and you would
realize once you've got your head around
it that they were bad things to do and
we're going to talk about those as well
so a case of vulnerabilities tiny bits
and pieces and it's the joining together
that makes the exploit
ok that's great so how do they get at
these exports how do they find this
stuff out all right well in general if
you look at how cybercrime works there's
a there's a whole bunch of social
engineering going on right so they're
always targeting people to get them to
do things we all know about fish sharing
and stuff like that and they're looking
right they're following you on social
media they're seeing what you think of
your boss okay
they're very industry savvy they know
how you think right so there's all the
usual sorts of stuff like trying to get
you're trying to get the secretary for a
boss to do something if she's new she's
writing to her boss fake text comes in
she actions it those sorts of things
that's all social media that's all
social engineering so you can probably
imagine that these are all good
candidates for being targeted but so are
we right because the bad guys prey on
the weak the fun will need current right
and that's us right because they want to
target us because we know the inside
story we know what the code is in fact
we share the code on github right we
tend to run with better privileges than
others
we are very trusting we are super
trusting how many people here have have
downloaded some code from maven central
or have done apt-get install something
on Linux yes ok now I bet you in a full
commercial sense if you're doing it on
your company you might be going there
and going what's the license but I bet
you don't check the Providence what do I
think about the people who write this
code how do I know that it's any good
how do I know it's not written by a
bunch of guys in Russia or hacking the
world right or any part of the world all
right all right we do that all the time
right we are and we will flee ignore
signature security matches right and so
they can after us
no you might not agree you might go no
no let's not be I'm really clever I
don't do bad things okay well how many
of you have done things like this I'm
Eve a googled for getting Java to accept
all the certs over HTTPS how to trust in
the SSL certificate yeah I've done it
yeah come on and it C same reaction
every time I do this talk nobody puts
their hands up nope I never did that
no thank you thank you honestly yes okay
all right sorry yeah that's what they
all say
yeah all right have you ever written one
of these the trust manager the important
bits the bit in red you know what you do
you go oh I've got a self signed
certificate from a server and I've got
to trust it I'll know I'm just how do I
do that I don't have to use security
mode I'll just write just write my own
trust manager because I can and it'll
just trust everything right
you know we've all done that do all the
time everybody does it right how bad can
it be
I did a github search for implements
trust manager a couple years ago and 70
mm here's normal code some text but I
think you'll like some of the text a
very trusting trust manager that accepts
everything a very friendly accepting
trust manager factory allows anything
through some of this stuff is in the
code that you may have downloaded when
you put a dependency into your maven
pump because that's what we do
right so it turns out that this sort of
stuff this feature that we do we can add
to the list so it's not just bugs it's
also features it's things that we've
added in for our own benefit are
discovered and exploited by the bad guys
right and they're out all the time there
are good guys what hacks researchers who
are trying to find these things for us
all these all these vulnerabilities very
inventive looking at way to join things
together to make things happen but the
bad guys are out there too and they are
super organized right they are out to
get us because they make loads of money
and nobody stopping them right now we
take a pause because I'm going to talk
about the processes of how Java and
vulnerabilities get managed because
there's a job and abilities talk okay
so I'm gonna talk about this first and
then we'll go back to some more code
because this is it's important to
understand that this works
so there's CVS common vulnerabilities
and exposures website this is a global
thing this isn't a java thing it's a
bunch of cybersecurity guys getting
together and tracking the
vulnerabilities right sometimes the
vulnerabilities are exploitable across
platforms sometimes the language
specific sometimes it's an algorithm
whatever they're all tracked so we can
all talk about them
right so you can imagine Java IBM
produces Java stack and Oracle produces
one and Red Hat does what you'd like to
know that that particular vulnerability
is fixed in all those places so you have
these sorts of things right so you know
what it is if you go to this website and
I just updated this this morning they go
to search and I said search for Java and
I've got 692 which are the ones on that
one you're right and that's those ones
there this is the first ones I also just
search for Java and serialization which
is the 19 on that site and you can
search for any programming language your
Y and you'll find lots of nice lists ok
so if you dig into one of those you get
something like this so this is not from
that list this is from May but there's
the CVE number there's some descriptions
gives you some sense of what's going on
civilization failure serialization
failure Oh serialization failure ok so
you care so now you're going to say
that's really good
can I see the code well if you read into
the CVE you're not getting much more
than that right so the first thing is
nobody is going to tell you the details
we're going to try very hard to make
sure that we don't share with you the
details of the code changes even if
you're interested right because if we
share it with you we're sharing it with
the world right my analogy for this is
sharing details of Honor ability is like
you tweeting your credit card number and
your PIN right you wouldn't do that so
why would you start sharing all the
details of how your security system
works at home you know well you wouldn't
so just the same here we're not going to
show the details right well but what we
can do is help you understand how to
assess the problem right so cv c VSS you
can see all the words basically there's
a bunch of guys who manager this are
trying to assess the
a vulnerability from a whole bunch of
things from a whole bunch of point okay
and one thing to point out because I got
it in red it's not as IBM doing this but
temporal so well trying to see CBS will
get revisited as things get discovered
so you come in one day and you go it's a
low score and then maybe something will
happen and then the score will go up so
it's not fixed alright and there's lots
of things about the vulnerability that
we're going to talk to you about so
we'll talk about the attack vectors
which I'll talk some more about that and
as you can see confidentially impact
what's it going - how is is it to do
what's the trick what's the impact if it
gets that get through etc etc okay the
assumption is that you are behaving
normally in the sense that you have some
willingness to be secure if you're not
willing to be secure and you run
everything under root and you know then
forget all this because you wouldn't
they weren't there to assess it for you
right but you can imagine lots of effort
goes into trying to assess the impact
because we've got to put effort into
fixing these things and you've got to
put make some decisions about taking the
update so we'll send out oracle will do
cpu advisories IBM before java we've got
security bulletins so small links their
information comes out telling you that
they're these high impact severity is
there going to be fixed in the
particular release you can go to the
website the CPA website and find out
what the details are you won't find the
code and if you want to find the code
you have to go work hard to find that
okay so that's how we tell you right the
process if you find one yourself then
report it responsibly
as I said don't share it okay there's
there are when you get the slide deck on
up on SlideShare you can take the links
if you if you want to go do it report to
the various organizations as you care
but please don't shout about it right
don't mail it
don't put on forums I say date sites the
bad guys but of course if you're that
way inclined and that's not really going
to be a warning you're going to follow
but don't worry about how how severe you
think it is right if you think you found
something that's a denial-of-service
thing or I know validates the security
any of those little bugs just report it
because as you saw the beginning it's
the little things that get joined
together you're never gonna find this
gray pink hole that you can drive a
truck through it's just not like that so
when you've done that or when we found
them or the white the researchers have
found them and what I'm into so the
first thing is what we're going to
assess them or put some information
together we're going to figure out how
to fix them and as you can imagine this
costs time and money so we're going to
try and get the ones fixed as possible
as fixed as quickly as possible based on
those those priorities right and if we
find something that's super super
important there will be some outer band
release process where we'll deliver
something quicker you can bet if that
happens it's really important for you to
put that fixing so when you're assessing
how you apply this stuff well the rules
are not quite not quite right because
what they say to you is have a look at
the list of components that the CVE
is applied to so for instance Jax P if
you don't use Jax P and the CVE says
it's the Jax P you'd go no no not only
use that okay so you can go through all
this stuff and assess them make some
decisions but my experience with all
this is is actually you don't know what
your Co does because you don't know if
you're vulnerable right because you
don't know what your dependents are now
you may have sat there and gone I have
got my pom file or whatever and I've
installed things or had get I've
installed something
and then what does it drag in other
things and other things and other things
alright so in general nobody actually
knows what the dependency tree looks
like and nobody really cares other than
just how big it is right so how do you
know that some think five layers down
doesn't use Jack's P so again I'm gonna
switch back to some more about the
processes so this is this is just
overview of how some of this stuff up
and so you can think about this
so attack vectors are obviously how do
these guys get into your system so the
first one is untrusted code it's like
how can I run code that bypasses or
escapes the security manager right now I
know a lot of people don't use security
managers because they can be complicated
but if you have a security manager then
untrusted code is is vulnerabilities
that let you get past that all right oh
and by the way vulnerabilities aren't
just in Java they're in the C code right
of the VM and all the native libraries
that you're running right it's not just
Java right so the point is untrusted
code is all about this how do I get
access can I run some of your code to
get access to data can I can I raise
braised privileges and stuff like that
and I'll see that's what the security
audit is trying to prevent you doing but
there are always places where you can
find a way around it and if you have a
Security Manager it's not going to stop
these denial of service attacks because
that's coming in and finding these
weaknesses where you end up spinning
right then there's the it has its own
section plug-in a web star Java has not
a very good security reputation as we
all know and the biggest reason was the
first of those in the list was the
plug-in right 60 70 percent of all the
vulnerabilities reported fixed are in
the plug-in right
and as you know it's been deprecated in
Java 9 and the idea is we'll use webstar
or basically use something else right
the reason that it was so vulnerable was
because it had its fingers in so many
places and it wasn't enormous ly well
architected right principles but at the
end of the day do you know just too hard
so it was actually better to get rid of
it and let's be honest it's killed
itself because how many times do you see
an applet on the web page now so code
poor systems like the plug-in untrusted
data is the other one this is the one
within where we're saying hey you must
validate the data that you get in and
everybody keeps saying that to you as
okay I want you to think beyond text
right I want you to think about other
forms of information like images etc it
happened so often where you've got an
application right where you're saying
I'll take stuff in and you do little
things like denial of service how about
a denial of service attack from an image
right so I'm an example I had was
recently I was uploading an image to a
web site that said this image could only
be no it should be no more than one make
and I up ladies in 10 make you image
right didn't complain if I had lost
people doing that maybe I could've
bought the system too right and then
just generally we're so open to taking
data in without validating right and
there are lots of vulnerabilities around
that space and you can even get things
like images to run code for you there's
this little bug in JPEG and I said about
hub in native code as well as Java there
was this lovely image not of a cat this
is just for example but the image
exploited a buffer overflow in the JPEG
format which is written in C in such a
way that you could run arbitrary code
I could embed in the image some
instructions right and I had to side a
payload a nasty little payload right
that you didn't see because the it
wasn't visible in the image and an
amateur system how about other ways of
getting into your system okay so this is
complicated code but you will recognize
this well maybe you won't recognize this
we'll see so in the top blue box so this
is a real one this has been around in
the press it's been well defined which
is why that URL gives you the group that
take you to all this information so blue
box the top content type and as you can
see it's all a bit strange doesn't
really like a compa content type at all
and in fact it seems to be doing some
sorts of runtime exactly in there right
so actually it's not bogus
it's in this form called ogia now right
and if you look carefully you can see at
the top lines is multi-part slash form -
data right but that's a programming
language right and Apache struts uses
this so what Patti struts does is it
went does the content type of this
request match multi-part form data yes
because it did because it saw it in
there so it tries to pass it as form
data because that's what's coming in and
the forms data the parsing the form data
fails because it's not valid forms data
okay the thing is as that forms data
that as failure is processed struts
calls the Oh Janelle Co parser to build
up an error message and a part of that
is it executes the code because it forms
it runs that code right anyway you have
a guess at which famous company this is
No
Equifax so the one that you've been
hearing about right was that bug right
that was a bug where it was the driving
of some helpful code to create error
messages the executed code right boom so
that's that's untrusted data and
untrusted code and then there are other
ones like cryptographic issues so these
are the ones where you've probably heard
about they have nice names like poodle
and heartbleed and stuff like that their
protocol flaws so when somebody
discovers a flaw in the protocol we are
really hosed and then we have to do
something up moving up or changing the
protocol there are lots of examples
about those again they do things that
maybe you weren't you wouldn't recognize
as being a real problem but so for
instance heartbleed was one where you
can make a request to a server and
you're supposed to ask for four bytes
but if you are some more than four bytes
you've got more than four bytes and what
you basically got was contents of memory
and if you keep asking and asking asking
then you just get random sections of the
memory but of course it's memory so
what's in memory passwords access all
sorts of information customer data right
and by the user being that the bad guys
being persistent they actually stole the
data right so Java lots of
implementation flaws as you'd expect in
other programs as well all right
and these cryptographic things well you
can have denial service but basically if
there's a problem in the protocol then
we have a problem because people
everybody everybody can understand the
protocol it's not a flaw in the code
it's the flaw in the implementation all
right so cryptographic issues that turn
up on the list of things that you have
to pay attention to and then the last
one is about local vectors so again this
is one but people go this isn't possible
this is
where you're saying the only person you
will actually run this or abuses is the
person who has access to the system all
right
and if you think about it you'd say well
if I have access system and I have root
access I can do anything right fair
enough so all these things like adding
things to unexpected locations like I
showed you at the beginning just
installing bad code right most of the
vectors that are the Seavey's that
vulnerabilities that get seen with that
will have a low score because the
assumption is is that you're controlling
access but that's beginning to change
because you may think that you're not
vulnerable to local attacks okay but
again let me show you something Hanabi
does anybody know what this is ah wanna
cry so if you were really unlucky you
would have received one of these right
which was your systems been encrypted
there behind the scenes or a bunch of
technologies that you can buy off the
shelf the eight make use of exploits in
Windows etc to deliver pay notes to your
system so this basically was run as you
this is a local this is a code that runs
on your system local user access alright
now as an aside it turns out the wanna
cry guys right a bit further so the
wanna cry guys who put this together I
mean they brought many things down they
brought UK they brought the National
Health Service down this India cleared
close to all the ATMs right listen a
Renault or their production right you
look at the scale of that 250,000
computers right boom boom boom
due to combination of vulnerabilities
that got to that point the really sad
piece of all this is that as far as the
Bitcoin owners are concerned all that's
the other thing the other reason to
ransom ransomware is taking off is
because you can get anonymous bitcoins
so that you can actually
make money without being tracked right
but the guys who did this guys the guys
who did this got interviewed I'm quite
sure how they got interviewed but they
got interviewed and they said that it
was a failure for them because they
didn't make very much money and not like
actually people most people didn't want
to pay and they said they were gonna
draw better okay so let's talk about
some more examples of vulnerabilities d
serialization yes I don't I could do a
whole talk on this and I have done a
whole talks on this what happens here is
really the fundamentals it is you have a
serialization form take your Java you
turn into byte form if your byte form is
exposed so you can get in the middle can
get access to it and amazingly some
people take theorization as a form and
they stick it out and cookies because
it's easy all right
so if your Viceroy's ation form it is
exposed then people can hack it and if
your if you've got read objects in there
so if you basically few like object a
class that's got fields that are object
types then then you're dead because
people can you can legally get your
object to be instantiated to create
another objects and well they do this
thing called gadget chains which is
basically scouring the world the code
looking for places where you have some
piece of a piece of java code that have
ultimately gets you to doing something
like run times on exec so if I find a
piece of code that does that can I
create a civilized form of objects that
will end up running that okay clever to
do that and then see rows form inject it
into your payloads and away you go all
right
and as it says there was this prominent
one the Apaches common again it was the
thing we knew was possible and then
somebody did it right so as in Java this
year they said about the white listing
so that that will be that will help you
manage it but the fundamental problem is
is that as you probably heard when
still was talking about it nobody really
wants civilization around you know it
was it was a flawed idea and we're
reaping the benefits so it's quite hard
to do civilization exploits you to know
what you're doing got to work hard but
there are other ones perhaps really easy
a particular well-known bank or a
banking type company a few years ago did
something rather silly they decided that
it would be good to have the debug
available on all their servers so that
it was easy to debug remotely but when
they said remotely they didn't realize
that they'd exposed it on the internet
and so this researcher junior pimp
reports can found the JD that report and
went in jwp has no security controls if
you let that port open people will come
in and they will have access to your
system they have access to your running
memory they can do whatever they want
right the reason I put this on here is
it's not even complicated things or even
one-liners it's simple behavior that we
do things that are good for us things
that we do to help others right right so
have some more code just explain how
we're helpful so here's a class there's
got a properties object at the top and
it's going to do some helpful class
loading for you so it's got a map and
you can see default equals foo dot
string handler foo means come to IBM to
run Tech cetera right and there's a
little method that says given a handler
if you look up in the properties find
the corresponding value and try and
create the class let's don't check the
class and if it doesn't work it'll throw
an exception okay so there we go I'm
going to try and run it
there's the values in the in the map and
the property on the top right so if I
run it the first time when I say let low
class helpfully for default
right well that works I get the class
because it was in the map right
if I do it again
and I use Fuu okay what do I get
oh I get class not found because even
though I had it in the map I forgot to
have it on the class path okay and I get
an error back so it says class not found
could not create class for handler Fuu
with that value okay cool what happens
if I ask for something that's not in the
map altogether how about if I try mmm
Java DXT doctors and I run this what do
I get
oh I get a nice little error message
that says for that property it couldn't
find a class with the value of my
extensions path right asked about let me
finish this off so the reason that
happened was because I didn't show it in
the code because I would have given the
game away but in reality real bug
reality the object the property object I
created was backed by system properties
so anything that wasn't found in it it
went down the next level right so the
point is something like that helpful
code so if I can cool your code however
I do it and you're helpful and tell me
this thing doesn't work here's some more
data to help you figure it I now give
away secrets I'm giving away at full
access to my system right so you can see
things right I can get code to execute
in your system I can tell get you to
tell me what about what the information
is about your system I can do all that
right so I can add to this list
it's a developer aid so your bugs your
features your helpfulness are all
considered to be vulnerabilities in the
right circumstances and as I said at the
beginning we have all these guys out who
are searching for these things
so the question now is what are we going
to do to change this well you can't
change overnight but we have to be
better educated so I'm going to quickly
go through the last few minutes the
information that's available to you
right so one really good thing is this
the cwe's this is like patterns of anti
patterns but it's a really good website
so many a bugs that we see as
vulnerabilities can be found as being
covered by this sort of thing going oh
look there's an example of why you
shouldn't have done it all right so I
thoroughly recommend you go looking at
that I just wander through start looking
at it and seeing if you can find code
patterns that for things that you've
written right that's obviously just the
beginning of it is a lot more there's an
example so that's things like internally
hard code passwords for the back end
that you can see at the bottom if the
password equals this then it's okay all
right don't put it in the code don't
check in to get Harpe okay that's nice
like a fairly obvious one but there's
lots of others where you're going to be
making basically the same obvious
mistake and maybe you didn't know it the
CWA things they have this wonderful
finishes kingdoms thing you'll probably
have seen that list and if you haven't
seen it already you love seeing it in
different types around there all the
obvious things that we keep telling you
you know it's validation its validations
validation all right
this the Oracle Java coding website it
is a lot drier all right but again it
Asia gives you good advice for you to
understand what the consequences are of
how you write your code all right and
then there are tools LG TM is what I've
been playing around with it looks quite
cool you can point it your github repo
if it's public and it will tell you
things about your code not just not like
you know he's like fine bugs but it does
other things okay
okay there
to help you there's findbugs or the
equivalent there's a fine security bug
like find blogs plugins why do we want
to use these things have a look try them
out to contribute but there are tools
coming that will help you to make this
happen
there's lots people out there talking
about it talk about Owen woods he does a
really good talk about security
principles and then there are things
like a wasp again another set of
information about the types of attacks
and how they're and how they're how they
happen right which you can learn from to
understand when you're writing code
about whether it's the right way to do
it if you're not educated you will not
improve your code so basically one of
the things we're saying is be better
educated but we're also saying you need
to be more updated you need to keep
things updated so it's a difficult thing
we're seeing that the Java community the
Java release process is now moving to
six-month releases I need to take those
right whatever the consequences are if
you're not into a process of updating
then on a regular basis then you're
going to venerable
if you're vulnerable then they're going
to get in because people are targeting
you as individuals and as companies
right and there are certain things you
should not do don't write any of the
custom stuff all right thank you views
hashing with security right don't do
desolation there right custom pauses at
the end of the day it's all yours I you
have to keep things current much as we
know how painful that is we have to do
that we have to be updating our code
more often we need to be paying more
attention good news is things like micro
services those sorts of architectures
are helping us because they're getting
us into a compartmentalization model but
start going further start going I've got
micro services who has access to the
micro services do you have developers
who have full access to
everything that's a bad idea not
necessary cuz they're bad guys but
because if they get compromised then
your system get compromised right and so
those are sort of things you'd do look
at your levels of helpfulness that's
really hard for developers because we
want to be helpful all right and then
but I'm at penetration testing yeah
they're gonna know what the bad guys do
from the good guys who are doing it to
find out how they get into your system
and then after you've picked yourself up
from the floor about how easy they're
getting into systems it'll help you
start to understand what the challenges
right and I said there are tools I've
mentioned a few there's documentation
all right I want you to understand this
right at the end of the day here they're
out there they're out to get you and if
we ignore it it's just gonna get worse
that's it thank you so thank you for
listening on the last part of devoxx I
will be here if you'll ask questions and
then I'm going to go and get a plane</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>