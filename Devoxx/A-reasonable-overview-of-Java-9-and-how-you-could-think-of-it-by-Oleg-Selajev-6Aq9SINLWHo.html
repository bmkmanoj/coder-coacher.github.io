<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>A reasonable overview of Java 9 and how you could think of it by Oleg Šelajev | Coder Coacher - Coaching Coders</title><meta content="A reasonable overview of Java 9 and how you could think of it by Oleg Šelajev - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Devoxx/">Devoxx</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>A reasonable overview of Java 9 and how you could think of it by Oleg Šelajev</b></h2><h5 class="post__date">2017-08-11</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/6Aq9SINLWHo" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">great to see all of you here and you
made the right choice it was a hard
choice in this time float I know and I'm
very thankful that you came here so
welcome to the reasonable overview of
John nine and what you should think of
it and before you I start speaking to
you about John nine let's talk about
myself a little bit so you have some
amount of trust that I'm not just coming
up with stuff out of thin air
so I am my name is Alec and I come from
Estonia I work for a company called zero
turnaround which is a company that does
tools for Java developers so if you are
a Java developers please go and check
them out they're amazing tools I promise
you people love us so my employer would
be happy and they would send me to meet
more people I'm a developer advocate as
of right now which means my main
responsibility is to care about
community of Java developers all over
the world kind of travel talk to people
try to figure out what the problem says
and maybe advice on from my past
experience before that I was a Java
developer for approximately eight years
so I've done my share of coding I'm one
of the founders of not founders leaders
of a virtual jack which is the online
user Java user group so if you're not a
member of that join it's an excellent
all the sessions are online so you can
learn without leaving the comfort of
your own home if you have any questions
during during this presentation or
afterwards find me on Twitter I'll be
happy to chat with you so with all that
compulsory stuff out of the way let's
talk about Java 9 and this is obviously
not the first session here about Java 9
and I expect like almost all of you
heard something of seeing something
about Java 9 because it's such a great
release before before me Simon Reiter
was on stage and he took a look about on
Java 9 with what goes inside from the
Java
enhancement proposals what topics are in
so we're going to take a look a bit
differently what the developer would
expect from that and and if this really
is actually good for developers or maybe
it's not as great as as we could wish
for so let's start do you know what's
the code name for Java IDE 9 you don't
because there is no official code names
but in one of the main projects in Java
10 that we know of is the value types
called Valhalla right so and obviously
Java 9 would be the road to Valhalla so
it would be John 9 the fury road and as
we will see at the end of the
presentation we will almost die on this
road to Java 10 now this presentation I
come from Sony it's a dark and cold
country so I have a very dark and cold
sense of humor this presentation will
contain sarcasm and opinion if you think
I said something obnoxious throw a
frisbee at me don't don't keep the
laptop because the setup will waste
precious time if you hit me nothing
don't worry about that bruises heal we
have tons of content so the I will be
speaking fast and it's going to be a
little bit hard but like all true fans
of metal would expect and I hope you
will enjoy it so without further ado
let's talk about John I'm one of the
most important things that you have to
know about John 9 is that the release
date is set on September 21st this is
not the first release date that was
announced somewhere back back in the
past
in 2011 somewhere at John 1 Oracle said
that well we will release or we plan to
release online in 2016 and then they
postponed it advanced owned it and
postponed it again and now September
21st is when we expect that and probably
things are on track so what we're
talking about now is kind of the almost
the finished state of Java 9 allegedly
and if you follow the information of the
official John 9 website today June 22nd
is the release date of the
initial release candidate right so when
they release that maybe it will be in a
couple of days probably this binary we
would set in stone so there will be
minor improvements but allegedly nothing
much to change because that's what
release candidates are we will see tons
of stuff has come in to July 9th
obviously it's been a couple of years
now one way to learn all about that is
to read the jobs right and there are
tons of them and always no one does that
no normal developers that I know of go
through all the jobs in the list and do
that another way to see what's inside is
the fold of mailing list and mailing
lists they contain discussions not only
you get the information about what's
inside that you also get motivation and
everything and it's it's great fun to
look at that there are some hard core
battles happening in their opinions
clash people they don't call names to
each other but they are pretty agitated
there we are developers what we do we
stir at the laptop screen all day long
so we're going to take a very practical
approach and and we will download the
latest Java release ja9 release and we
will see what's inside
squeezing board with that yay wishes so
at this point of time I will move into
the different mode and I will show you
what I will show you I will show you my
common line terminal you can see my
screen right excellent and you can see
it's pretty is it pretty songs is nice
so Jay shell what is agile it is rebel
it's a read eval print loop one is good
for you can run Java Satan's and
expressions in that and get the results
immediately
there is cool things you don't have to
you don't have to do certain things so
if I type into a equals one it works it
prints me back the value of the variable
that is declared I didn't type the
semicolon
so finally Java is like half a step
towards groovy and other modern
languages you can omit semicolons and we
will look at the API improvements in
John
nine because API is what developers do
all all day long right so there are
other features but they might be not as
important or influential of today
today's developers slice the best thing
in Java 9 improvement is ITI are the
collection literals who would like to
see collection literals in java 9 to
that there are no collection literals is
java after all there are tactical
methods so what you can do you can type
stuff like list off and give the
parameters here and you will get back a
list which is a nice collection method
factor methods you easily create a
collection out of the elements you can
also do that with set set of element or
multiple elements and maps as well you
just give the pairs of keys and values
and get back the results what is good
about that because it's uncluttered zip
code you never need to do that
double braces trick against because you
have a nice API so that what is also
good that the implementations of those
methods of those classes is extremely
efficient right so if we if you think if
I do this list of one get class who
thinks it will be an ArrayList so thinks
it will be a linked list that's neither
first it's an immutable collection and
it's also a list of one element because
we know it's immutable and contains just
one element for the most efficient
access this element is packed into a few
in that class so accident in that you
just removed one redirect you don't read
the array of elements you just go
directly to the element and it's pretty
great and and there are you can give
multiple arguments to that for args and
up to ten arguments for the classes and
it's it's perfect the next most exciting
API here is the additions to optional
who view is currently on Java 8 pretty
much who is on Java 7 your auto upgrade
the end of life for Java 8 is this
September as well so you're almost two
versions behind if you are in Java 6 or
beyond that I feel a little bit sorry
for you but I hope they pay you a lot of
money so optional optional is a
container for Valis it can contain
we'll be empty so you can eliminate the
null and null check from your API what
you can do and you can do that in Java
is as well in Java 9 one of the most
things
welcome things is that now you can turn
an optional into a stream right and a
stream is ready to get on the stream you
can have the oldest stream API the
question is now why would you want to do
that the answer is very simple if you
call and map on an optional and say you
apply a function it's eager you
immediately evaluate that on an optional
and you pass it ahead right if you call
it in a stream the map and all the non
terminal function invocation on a stream
are lazy so if we turn it into a stream
first and then we map it then we get
back not the actual value but the
pipeline implementation so the function
is not evaluated so your code can
potentially execute less statements and
be more efficient and it's pretty great
another thing an optional is optional
say of one of now say empty and you can
view an or which takes a supplier of
another optional of dialogues rocks very
great so you don't have to specify even
mourn objects in that you don't have to
ever specify it and access the optional
is present if you find an optional is
present code in your in your code base
that's probably codes no you shouldn't
do that
additionally on top of the optional
there are things like if present on else
if that can take two roundels and
execute runnable based on the condition
if there is something under optional or
not and you can basically you can
replace all the ifs in your code base
with optional and that's very great
another thing is strings on a string
what you have now you have the weight
you operate on infinite streams way
better what it is it is the take while
and drop while say if we have an int
range now
in streams in 3m range 1 to 10 what you
can say you can say drop while you can
see that gel comes with and completion
so any drop while say X X less than 5
and then you map something for all the
elements you print system.out.println X
you can see that API is not the most
convenient because to type in addition
what don't you like that return time
it's not map it's for each and stuff
like that so you can see the part of the
code is dropped the take while moves the
same way you take the elements until the
condition is done so if you have an
infinite stream it's very easy you just
take all the elements that you need and
you skip the rest there are improvements
the date and time they're smaller and
for the sake of time and brevity I will
not show you on the J show what you can
do basically can't have a duration now
so and you can convert that duration
like a time chunk into into the virus
unit and you also have the way to stream
to have a stream of all the dates
between two to two kind of dates which
is excellent if you do any kind of
processing who does concurrency who is
interested in concurrency for people
more people should be interesting
concurrency because I'm interesting in
that and I'm on stage so you're kind of
here what you can have now is
improvement to the completable future a
computable future is a class that what
we have let's say completable future of
strength and we call it f and the new
completable future and semicolon is
expected weird now
that's true we're not doing here anyway
future thank you
see that's why I'm a developer advocate
they don't trust me to Scott anymore so
what you can do with future now you can
copy that so a future a completely
future represents a result of the
computation that will happen in the
future and it's very convenient if you
want to have in a synchronous API you
just return a completely future to a
client and they just wait on it where
the check if it's done or not and you
will complete that at your time now
before that it was very inconvenient
because your client would have the
actual reference to your future and they
would can't they will be able to
complete that probably it's not what you
want you want to be in control so now
the copy is a defensive copy so if I
just do 43
completes and give it a type I think so
now what 43 is done is true and it's
excellent but what is that a future my
future my excellent future it's not done
and it's Marlo's so now you're way safer
if you do a synchronous API I think they
also added timeouts and delays into the
computer future and it works pretty
pretty good another thing is the process
management API so I think it goes like
process handle excellent pH and we have
process handle and there is new again
I'm bad with it this new stuff come on
come here no you you don't judge me
I think it's current and it's not even
new let me check yeah it's not needs
come on guys
you should have spotted that process
handle pH excellent now what we can do
on this page if you do any kind of sub
processing or if you refer to processes
by the pits right it's great because you
can have the feed number out of that and
then you can do all kind of cool things
you can get info not the pit but pH of
course you get the info and you can get
the command line that was used to start
your process where you can get the
arguments and it's exciting because that
works on all the platforms the Java
supports out of the box consistently in
the same fashion which is amazing pretty
amazing there are other API improvements
I want to talk with about language
improvements a little bit what will
happen if I type this an underscore
equals one correct answer is that
underscore is not a reserved keyword and
the reason for that is that when
somewhere in the future probably it will
be used to refer to unused arguments in
lambda expressions if you have a lambda
of four parameters but you only use once
one you can just name all the others
other sports and it's going to be fine
so how do you overcome that if you use
lambda underscores in your code use two
underscores cool things this will work
to people well it works interesting I
thought there would be a type
declaration right but this is what it is
what it is
there is semantic versioning which
changed now if you have runtime versions
you get back the number and objects and
then you can access the major minor and
so on you can have the private methods
in interfaces you also have what I have
you can use effectively final of wired
variables in the try with try final
block in the try with resources
excellent block which is great because
it's a quadratic code and the last last
bit that I will not type because I'm bad
I think as we see there is a thing now
if use property files and you if you do
if you use the utf-8 if you have any
letters that are accented which is very
dear to me because my surname starts
with accent letter so it's great now
there is a way to read property files in
utf-8 in it's fantastic right so we just
all we need to do is have the proper
e-resource Bandol and then the hand
handle get object and give it a
parameter and we get in response back
the utf-8 strength which is amazing none
of the other property of methods are
working like that yes but hopefully it's
a step forward and this is excellent
so these has been the what was the API
improvements let Sun mirror this and go
back to the presentation
it sounds pretty exciting I am very
excited to see the API improvements here
one more thing that is all that API if
you want to read about that now the
Javadoc off of java 9 is html5 more and
it's searchable which the things that I
caught on the previous Simon's Reader
presentation so you actually have a way
to search for those things easily and
this is this is great
and it works it indeed those API makes
alexis develops better maybe not
everyone of you will use those all the
time but just knowing that they're there
should should warm your hearts and know
that the platform move forward now J
shell in itself it obviously it's a toy
it just let you run one statement lines
and it's not that great what you write
your code in you use an IDE an IDE is a
support so Gemini exists and as a
reasonable developer myself I use
IntelliJ IDEA obviously if you use
others they also have the support for
Java 9 somebody left somebody more who
uses eclipse
please NetBeans
so the thing is I'm running currently
one of the surveys and later I will
report back to the results inform read
PDF the service aim is to learn why
developers use the tools they use so if
you take a moment after that or
somewhere in a break work in the
upcoming week and feel the survey it
will take just a couple of times it
would be amazing especially if you use
eclipse or NetBeans if you use IntelliJ
IDEA I personally know why is that it's
a great idea so it works now you start
using those API in your IDE what happens
you stuck on the module system right and
this is the big elephant in the room the
module system consists of like seven
jobs and it's taking so much time to you
actually materializing the thing what
does it do it was supposed to divide the
JDK into smaller modules so you actually
only use the stuff that you need to use
you don't you have the core bra classes
in your JDK process the Java process by
default anymore you have to add that
manually who uses core right excellent
who knows what Corbett stands for it
okay for people excellent if you talk
about the modules why is it good is
because there are like when we talk
about systems large systems we talk
about in this way we withdraw diagrams
of boxes and say oh now the payment
processing module will talk to you not
module component will talk to the
payments API thing and there are micro
services and also and it's great because
it's very easy to understand on a human
level it's really hard if you understand
on the code level and sometimes things
that are good for the platform like the
module system are not great for the
application code not surprisingly the
module the module system has found some
backlash people are not happy there are
some module systems in existence like
OSGi JBoss modules and they all express
their opinions if you haven't read the
jigsaw mailing list it's full of great
jumps and you should go and educate
yourself on that and it's also fun
reading so who thinks modules are
exciting so I have great news you are
clearly there
suitable for position of an architect
and there are also a little bit of bad
news in the room too currently our own
group that talks about container
orchestration that talk might be more
suitable for you
modules are not that exciting the syntax
is what developers will see the most and
this consists of a bunch of Hindi words
added to TTT Java language and their
restricted keywords what basically does
you have modules and they organize
themselves into graphs into direct graph
of dependencies a module can require a
different module and that means that it
specifies the intent to use the classes
of that module the JVM will see that
connection and we'll make the best to
you to provide those classes to them and
if you don't require a module you will
not get access to those classes if you
want to offer some API to see another
module like to be a dependency to
something you export certain packages
and you see those packages are not
public and somebody can use those
packages and classes and those packages
if you don't want to do that
you can advert some packages to specific
modules you can say oh now my user info
store module will have access to my user
different module but no no other modules
will have that so you control the
visibility rules that helps you with the
integrity of the application that helps
you with the encapsulation of your code
and it's very great you can also open
the module to everyone absolutely
everyone using the open key word and
that will give access not only to public
methods and the classes and feels in
that in the packages but just the
everything in that module will be open
for manipulation it cool a good summary
of what it all means is disabled or you
can read that on a blog of Nicolette
paralog and what in his book but
basically expert you mean all every old
code can access public members open
means that everyone can access
everything on top of that if you just
don't want to specify that stuff in the
module info files that go into the jar
files
you can add the common line arguments
and you can add experts on the common
line after the fact you will use that
also too since JDK itself it's more
modular right you will use add experts
to say oh my code will really really
want to access that particular thing and
you can also specify which modules you
want in your image in your runtime and
this is where we go to the IDE because
we will have IDs just to see it works in
the ID and it works on my machine so
hopefully that's enough for everyone you
can see that excellent can you see that
you can see that so we have a small
project here which consists of two
modules it's a maven project so there is
a hint that it actually works with maven
and you use the correct versions of the
plugins up to date you use the correct
version of some dependencies and it
built now we have two modules the module
2 requires module 1 it wants the access
classes from the module 1 and the module
1 extras classes to key module to anyone
now there are a couple things couple
ways to call a method in Java so you can
use just instantiate the class a call a
method using the bytecode you will see
that it actually works right it calls a
method and this is implementation of the
superclass in a package that is internal
that is not exported and it works now if
I do this I will use reflection because
the reflection is cool right so I will
say that I would say ask I I want you
what that method
I want you access that message through
reflection at runtime if I use this
unfortunately just the expert keyword in
module does not allow the reflection
axis this used this is used to
encapsulate to encourage strong
congratulations a better encapsulation
so this is right who herself has heard
of methods handles right this is kind of
reflection to the DOE API for accessing
methods surprisingly if I just do the
as handles and pull the same method I
would expect it to work as the
reflection but it's not it allows the
access through method handles which is
very confusing top of that since way
here
yeah and this were obviously works in 91
things that I want to talk about is the
unsafe who uses the unsafe right either
I don't see any hands where you're very
responsible developers so if I just
uncomment my code here and I will import
stuff and I will import my unsafe you
can see that my ID gives me a suggestion
that I need to add the requirement to
require the module and I will do that
now we have the requires JDK and
supported thing here and there were many
talks about how they want to remove the
jail the unsafe from John 9 but you can
see the unsafe is still there so you're
good to go
they also copied that the into internal
packages for their personal use JJ get
the gate version but the old unsafe is
still here so we are good to go for at
least key to three years or judging but
the past performance of the releases
maybe four or five years excellent stuff
the unsafe we can do manipulation of
stuff more let's go back to the
presentation let's go back to the
presentation on mirror keynote so when
we talk about modules one thing that you
want to remember is that modules are
about the art architect in your app
right and you know that whatever goes
wrong developers will be the ones to fix
the code and be blamed for for the
estimates and deadlines everything
because developers are the only ones who
can fix things so when you think of
modules think of this picture and think
about who here is a developer and who
here is the architect were somebody else
a team lead I judge from my experience
that the developer is the bottom one
here very unsafe on the topic of the
reflection you know that how you can say
like a field or a method set accessible
right and make it public so now let
with the module system it doesn't really
like that easy anymore but what I also
wanted to ask you do you know that there
is a getter that course is called
method is accessible and it's returned
to booyah what I think it returns
because it is returns if the method is
accessible like is it public or not who
thinks it's returned something else
approximately equal amount of people so
what actually it's returned it returns
whether you call that accessible true
previously or not it actually doesn't
query the visibility of the method and
this is very strange and because well
the JDK developers are actually very
smart people so now they're adding the
check accessible method which is way
better because checks accessible works
in the module systems in the module pass
as well and so and they deprecated is
accessible because that may mean just
wasn't making any sense
if you don't want to do the modules you
can just drop the jars into your class
pass if you use module paths and modules
they will become an automatic modules
with the name derived from the jar file
the automatic module experts everything
to everyone well done so you can just
use that and the summary of what it is
if you use the class path mode which is
still present and it's a great mode
we've been with that forever and it
works everything gets into the unnamed
module if you use module class with
module or jars or non-modular drawers
it's automatic modules so talking about
class fast the one thing that we're very
controversial is that the migration path
on the module system is crazy
complicated for the applications real
life applications so they added the kill
switch which initially was called the
permit illegal access and then they
renamed that into the illegal access
equals and level of things by default
its permit which means that when you run
that java 9 with the class pass mode and
you run your code it will issue you one
wearing if you violate any encapsulation
rules but it will allow you to do
anything you want and this is great
because actually pretty dope because it
means the class pass can leave now
basically forever
where until they will cut it off so with
that in mind the migration strategy for
teach online modules is very simple
don't do that first wait for your
dependencies to move to this to the Java
9 modules to motorize themselves and
then you can use them if you use your if
you module or a zip code first you will
end up with automatic modules the file
names for those modules will determine
the module name you will use that module
name in your module info files to
require them and then they will release
the proper modular jars and they'll
probably change a different name so it's
going to be pain to migrate twice don't
do that wait and then migrate and
modular to self you can be pretty happy
on the class path for a long time after
all 20 years of Fast Pass and we're
still here now what else we have modules
we have the chart files how do we get
those jar files from the source files we
compile them if you see in any Java 9
modules presentation they do that with
Java
nobody compiled nobody I know no
developer I know compiles their code
with Java
it is built oh let's talk about Mavis
maven and John 9 situation is a little
bit so and so currently because it's
complicated man has two packages us
there are plugins which are external
dependencies it has to process your
class files some things work something
do not work good thing is that we are
not yet at the release date so by
September allegedly they will be able to
fix everything if you're using Gradle
you were in the way better situation
dreg you'll typically releases fixes way
more often that once twice a year so
Gradle supports a little bit more and
with a more modern architecture of the
build tool itself it's easier for them
to do that
with maven important things are that the
compilation works making jar files work
works test work everything works what
you need except like pesky static code
analysis things and packaging resources
and shadowing classes into your own jar
those things might not work or
application if you do that
this and that hopefully it will wait yep
way better
I want the azzam the library is that the
bytecode manipulation everyone depends
on when they release the version that is
capable of processing Jam online class
files
everyone will upgrade and situation will
get better but until now it's hard to
say if that works or not so I did the
test I have a small project called Z
physic which is a zip archive utility
processing things not my personal attack
contributes is that a little bit with
Java 9 it built and it runs all the
tests and it's absolutely perfect and
you can even set the target level and
source level of the code to Java 9 and
use the features and it's perfect and
works with veins if you're not
particularly often deal with creating
small libraries consisting of four
classes then you probably need a
different example let's look at the fit
Clinic app for spring who use the spring
yet it's a choice that the reasonable
developer would do if you just try to
build a spring path link up and I use
not the most outdated version but
something reasonably 2017 with spring
boot 1.5 one something then at first you
will get the issues with the main slide
in it's like cobertura and compliant
packages the resources the CSS files and
images into a single sprite and the
single file so since those are not
exactly essential to the compilation
running I just deleted that from the
pong file let's be sure so I run this
kind of short and build what I guess I
get an exception and it doesn't work and
it's because the jar file the jar plugin
is out of date because the spring boot
plug-in which is was released a couple
of weeks months ago right it didn't know
yet that it has to support all that
stuff so if you just want to drop in
your existing code base into the German
ein environment you will need to upgrade
the dependencies and the framework so
okay I said what if we built on Java 8
because it built in John 8 and just run
it on John I write this supposed to work
afterwards the backwards compatibility
is what Java is known for and what we
get
we get obviously the access violation
thing surprised me that was unbuilt
Gemini built 174 which was the latest
release built on the Downloads that work
yes as of yesterday I think maybe today
as well but maybe they're released
something else okay the access violation
what we need to do we need to allow the
illegal access we use the permit illegal
access because the illegal - - user
access equals permit is not yet merged
into open JDK and we run this good
things will work the things it doesn't
work who doesn't care good it doesn't
work it doesn't work what it new
requires it requires some some classes
that are not in the default image for
genre anymore and those are for XML
bindings this is John ie
API and what you need to do you need to
slap it add modules a common line
parameter to the process to actually
make the image that will use that module
so what we do now we add modules with
the fascinating name of umbrella modules
Java SE EE which looks surprisingly like
an Estonian website hiding a Swedish
website hosting Java but that's the name
the name is heart being in his heart who
thinks it works yeah it works of course
in parts after four steps the one thing
is remember the plugins that we disabled
the copies were and the resource
packaging since it doesn't it didn't
package the resources now
well the CSS was gone so it was a very
ugly application but that's not the
fault of the application and it works
out so you can make your projects run on
gem online as of now it requires some
tinkering and please if you have half an
hour spare try to do that you will learn
a lot it will be painful but you will be
able to provide some feedback it is not
yet super late let's talk about another
feature we have 12 minutes left the
multi relief dart which is a great
feature in Java 9 what you
can do now you can package multiple
versions of the same class inside a
single jar and then the JVM will decide
which version it tries to access when
you say oh please load my class and it
will look at itself and say oh I'm Java
nine and I will go into the meta in
versions nine folder and try to locate
passes from there obviously if you run
on something older you will access the
classroom its normal location ja9 if it
doesn't find the class in its predefined
location it will fall back to that and
it works great if you are a library
author and you want to ship a single
executable for older versions of Java
there are but use different API like for
example in some classes you will be able
to enjoy online classes you will be able
to use those fancy collection literals
you can do that and then also you can
you can prepare for the future and
package the classes for the later
releases of Java for example this is a
perfect place to hide the code that will
steal credit card numbers in the under
the tense version of Java when they
release that the code will snip into
action and you will quickly become rich
and also the police will be taking
interest me probably so probably you
shouldn't do that it's a great feature
if you really have a use case for that
and you know you have a useless for that
do that otherwise don't the carrot with
that is that no bill - as of now yes
builds normal mouth will release jars in
the standard ways at least maven doesn't
do that for sure so you have to like
invent workarounds and stuff and it's
kind of sad another thing is the memory
and additions to the garbage collection
now the G 1 G C will be default what it
means for you as developers if you have
this image of how the Java heap operates
right you have multiple generations you
have the young generation where the
objects are allocated then they are
promoted then they are throwing it again
and stay there forever sometimes you
work too late if you have this you know
that the rationale for that was that
garbage collecting from the hole
which is large is long it takes time so
you want to separate those into smaller
buckets the problem with that approach
is that when you have a very large heap
those buckets are also large so when you
need to traverse that and garbage
collects the memory there it was still
take time so we all get the pauses from
the garbage collection which which
doesn't improve your latency at all the
answer to that is the G 1 G C it's a
regionalized garbage collection instead
of having like three regions it has a
ton of them but they're small they're
also sometimes they're even called new
objects sometimes they're used for the
old generation of Survivor space what is
great about that is that when you do a
garbage collection in the old generation
at least you can see I would like to
have my garbage collection for us at
most 200 milliseconds and the garbage
collection would say ok I get 200
milliseconds I know that I will be able
to empty 3 blocks of world generation
space so it will reclaim this piece
three chunks at a time so it can film
itself and depending on the usage of
your application it can say and kind of
confirm to those suggestions how much
time can take so you'll get a low
latency garbage collection you will not
get all the pauses there it's great for
performance allegedly this slide comes
from from a blog post of alexey shavelev
who is currently at Red Hat and before
that was an open education developer at
Oracle and he is a benchmarking char and
he knows a lot about performance what he
says is that here's how this hero's
garbage collection works everyone
everything must stop the world now the
current Java 8 garbage collection
implementation is concurrent mark-sweep
what it does the orange areas are stop
the world the green ones run
concurrently it is allegedly it doesn't
compact the old generation on the right
there so it can get the fragmentation
issues and then stop the world for the
whole garbage collection now the g1 GC
you have the causes in the younger
generation you don't get anywhere from
that and it still has a very small and
adjustable power in the old garbage
collection but it's very adjustable
house the trade-off for that is that it
has to do more work concurrently with
your applications so allegedly the
impact of running with G 1 GC is that it
can take up to like say 8 or 10% of your
CPU time so you get a smaller maximum
throughput it's balanced itself with
having full process so you can still do
the same amount of work but it's
something that you should be aware of
obviously you can add that the unit and
everything and if you want to know more
about garbage collection I can recommend
to listening to the sessions by Kirk
Pepperdine I have a link to their recent
one of him and then you will know a lot
about how the actual garbage collection
G 1 G C works how to tune it where the
logs are and everything the next thing
on that is the instrumentation API and
Java agent why should developer care
about that because most of the APM s
most of the sophisticated tools that
will do the monitoring for you or they
do something spectacular with your java
process and transform the classes will
be the java agents for the long time the
java 19 wanted to disable the dynamic
attach of java agents to Orion JVM
process and in the end they didn't do
that so you can still have your cluster
of applications running and then you can
attach one Java agency to to a machine
and I don't know debug or profile what's
happening there
one thing that with that is prohibitive
now is the self attach from the method
from that from the code so a process
cannot dynamically attach Java agent to
itself
what I have to do to overcome that well
you have to you have to spin a
subprocess to attach the dynamic the Joe
agent to your parent process
which sounds like cumbersome but now
with the great new process management
API you're kind of good to go
Oh also another latency the Java agents
API is not API how it works is that now
a single jar file can work as an
application as a gender Java agent
itself so you can just shape a single
Java jar file and when you run with Java
9 it can start the job agents from that
jar file and then a certain application
from the same file which is great if you
don't actually control that much how you
run the code if you just throw your jar
into the cloud and then hope it works
you are a little bit better well that
was fairly interesting right uhm things
that didn't get into Java 9 we talked
about how we want to have the JSON
processing in the standard library being
happen makes hipster sad and angry the
advice here is very simple use the
library of your choosing there are tons
of them it's not that hard and it's very
easy about web applications now Java 9
supports HTTP to client out of the box
it offers you the fluent API to create
requests and everything and it's pretty
great the only thing is that it says in
the incubator so you have to add that
module it's not available for you by
default if you just run Java the
incubator was now kind of I don't want
to say bad things about that because
it's a lot of work but it's kind of
belly-flop as well because they wanted
dad to have a platform the incubator
where they will put the experimental but
stable more or less stable API and they
will promote that in different modules
currently the only thing in the
incubator is the HTTP to client which
was supposed to be in the main library
so but you can use that and I actually
works really recently pretty great if
you're not convinced that you should
average on ds9 immediately there are
some performance improvements most
notably for the strings and how the
genome handles strings one is to have
the more competent representation of the
strings
shrinking how much space they take on
the heap and it's marvelous another one
is that when you concatenate the strings
which is allegedly one of very frequent
operations that Java code does it now
the jar will omit the invokedynamic
method calls which can be optimized
further and further much better at
runtime so it is great and it gives you
additional motivation to average Joe 9
yeah there could be pains and it there
could be surprising things and it could
be hard and it's an unknown and this is
the first release of Java that breaks
backward compatibility or promised to
break backwards compatibility up to the
very late moment in the release cycle
significantly and and still you get a
lot of stuff in there it's faster if you
it can run with less garbage collection
pauses it gives you new API and you were
strongly encouraged to you upgrade or at
least try and test how it works on your
code you will feel a lot of times that
you don't really understand what's
happening or why is it happening because
there are things that will happen for
the reasons the trade-offs that you're
not aware of so here's a simple advice
things that you don't want to touch in
your in your day to day life are
probably the unless you're some percent
sure that this is what you need you
don't want to touch the multi-religious
you don't really want to build images
with j-link yes you can get a little bit
less space consumption by your final
Java executable but is it really worth
it well the future will show another
things not to touch is the unsafe
because it's always a good as the idea
not to touch the iron safe you are doing
great job on that and advice how to
upgrade to Joanna and download Gemini
upgrade your ID upgrade your all the
tools that you can you build to your
plugins to the build tool everything if
you using the web framework upgrade to
the latest versions string 5 for
when they got it will be released it
will allegedly support the current state
of the things in China and uses the
features of that correctly the previous
4.3 is current latest release is it also
supports that and runs with channel 9
but there are some workarounds on that
as you're going about that I'm not that
extra than that you want to add the
illegal access equals warn not permit to
your Tia process you want to look at the
list of the Waring's legitimate and if
you find something that you can
potentially fix easily do it strong and
capsulation better security better plan
for integrity is our good things do it
when you do that and you just stuck with
things that are not easy to fix go back
to the class pass it's not that it's
normal we run that before you just have
to acknowledge that not always you get
what you want to get and at always it's
as easy and at the moment when you just
like I need this now
well don't have if you think about this
this is a good release Java comes
forward it's very it was very important
to get the module system out of our race
and we did that and hopefully the
migration path won't be as bad and which
is more important than migration path to
the next versions of Java like Java 10
and food further hopefully they will be
easier because currently we will take
that hard thing and do it and manage it
we are out of time so I hope you are
excited about gamma 9 now and if you
have any questions or if you want to
email me and say how insightful this was
you are welcome thank
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>