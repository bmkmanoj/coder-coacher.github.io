<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Serenity BDD - from executable specifications to living documentation by Alex Soto | Coder Coacher - Coaching Coders</title><meta content="Serenity BDD - from executable specifications to living documentation by Alex Soto - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Devoxx/">Devoxx</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Serenity BDD - from executable specifications to living documentation by Alex Soto</b></h2><h5 class="post__date">2015-11-11</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/BxJb6iTpX74" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">thank you very much for coming to the
session about testing and this next
three minutes you're going to learn how
to you know write a clear clean and
Montini well automated acceptance test
let me say that this talk was submitted
by John smart but suddenly hick he
couldn't come to give this talk and well
maybe some of you knows John smart for
being the you know the creator of sanity
BDD and also has righted this amazing
box like Java Porto's Jenkins the
definitive guide and be in action but
yeah I'm Alex Otto M you can find me in
several open source projects like our
Killian Tommy or asciidoctor and I'm
write a disown ref card about the
Patchett on ket and also currently I'm
work working on writing the arc Eden in
action book so first of all let me tell
you a warning that is that intestinal
automation do it well or don't do it at
all because I'm sure that this is my
experience and I'm sure in your
experience as well
happens that you start a project you
start you know writing unit tests
insertion tests a functional test
although all these tests then the
project advances and advances and then
you know you have time to write this you
you know you start to writing more and
more and more business code idea at the
end of the process that test starts to
fail you don't know why it fails so you
start to ignore all of them some other
tests are flaky tests so you don't know
why but sometimes fails and sometimes
not and at the end you finish by doing
something like maven install Minos d
skip test and this your release cycle so
instead of losing your time at the start
of the project
right in test that it's not going to be
maintainer door you know we were right
on then skip it because they are pretty
useless at the end and how you can write
better test well first thing that I
would say is that please don't treat
your test as a second city ii class
citizens you know sometimes you say I'm
going to apply a lot of design
principles in in my business code but
then there are the tests and you know
you don't know you don't know why but
you relax and you start to not apply all
the patterns and all the principles that
you have learned in other your other
courses like university unknown the
school and yeah at the end the test
becomes a really useless thing for
example some of the topics that you can
be focus on test is the separation of
concerns single responsibility principle
open closed principle or you know
narrative calling a style sometimes
happens that you start to you write a
test a unit test for example and when
you read again after one month you
simply don't know what's this test it's
doing because you know it's a lot of
code put it there and you know exactly
what's doing so about the separation of
concerns I would say that probably from
the business point of Bill your company
does something like this it has this
Parliament which they has goals it is
what you are trying to achieve this is
the goals of your company then at the
lower level these tasks is what you need
to do to achieve these goals what are
you going to do for for saying okay I
want to let's say are more or all adopt
more people in my flight company for
example what I'm going to do to gain
more and more adopters and then at the
bottom
of the parameters that the actions what
interactions with the systems you need
for each test how you're going to you
know talk with all your environment to
earn this goes that you have on the you
know on the top of your Parliament so
one way or would say that the ways by
creating behavior driving specifications
like this one but my let me ask you
first how many of you think that this
specification is well writen nobody
everybody sees that the specification
it's okay yeah I mean that it seems that
it could be well writen but as you can
see there is some things like when I
enter buy some milk into the new to the
field this is a you know you are mixing
business things with technology thing or
for example when they say I press ENTER
yeah I mean that it's quite specific for
you know for a computer that has an
enter but it's not your business don't
have an Enter key at all so what you
need to do is write a you know
behavior-driven development example
something like this with the given one
then it again but notice that now I said
when I add the to do action buy some
milk then buy some milk should be
recorded into my to-do list so this is a
bit focus on business not on on how it's
going to be implemented and it's very
important because this at the end these
scenarios should be reviewed not only by
developers but also for product owners
if you're gene scrum or you know product
managers or marketing people all of them
must be sure that you are on the
direction to achieve your goal but also
you need more things like high-level
feedback for from all the layers of your
company also the tailored feedback I
mean that of course you need to know
what you want to
if what is your goals but also you need
to know the details to implement exactly
what the business want and of course
it's like you need like a book of your
future documentation with everything
that you need to implement there and
this is where certainty BDD comes into
the scene it's like sorry we did it we
can think about it's a tool for writing
DVD in am is the way since it uses the
technologies that are already on the on
the system like J behave become verge a
you need selenium etc it puts all
together and gives you some common way
to do the things in a good way and also
it forces you to write it or to write
your test in a good following good
principles so they are more maintainable
or cruzi so basically similar DVD is a
uses a layered approach which means that
as you are going to see in the next
example you have you go from the top of
your application and you still where
it's you know the devolved application
is the business thing and goes down and
down level until you face it to the
technology thing it integrates with J
you need Cacambo J we have testing G
with all these well-known technologies
if you need to access to the browser it
uses selenium webdriver but it can be
used for REST API as well then we don't
have this seven young access and one of
the really interesting thing is that the
living the condition system that it has
we are going to see an example where you
can you can see all the rules that you
want to apply for a business method or
solve a business process and we took
these are implementing which not so you
are moving the coverage from code
coverage to future coverage
so in case of serenity sanity VDD the
same Parliament is like goals are tests
or scenarios tasks are the steps you
need to do to achieve this goals and
interactions is the page objects or all
technical components page objects it's a
you know it's the pattern of selenium
for that map's your browser to a model
object then if you are going to use you
know web web driver or a browser the
interactions are a page object but if
it's a REST API then it's for example
rest assured thing so this is a again
and another another specification on a
story or future the scenario is the goal
the wall is record a new two direction
for future use this is our goal then we
have a task then the task is when James
adds the two direction buy some milk
this is something it's the test you want
to record this goal and then we have the
then buy some milk should be recorded
into his to-do list then notice that we
have you know that that code is and it's
the real code then the Java code let's
say that when you maps all your a
scenario with a method probably all of
you are using a camera G we have this
something that you are pretty familiar
and this is the task itself I mean that
it is add an action called action name
which at the end it's it's a call to the
to do page this is the implementation of
the page object and of course when you
talk with the processor in this case
this is the interaction with your system
so of course we will need to have you
know some report that if this scenario
has passes or not if all the steps the
even the when and then has work or not
also having some point
kind of feedback visual feed but
sometimes about how has work everything
and in this is where Saleem gives you a
really good rapport in form of HTML also
PDF or there are several format and yeah
I mean that let me show you us a code
this thing I have here a project which
is the one that we have seen no notice
that we have a future which is add new
to doose's you know that the big goal
then we have some goals that is
recording you to direction for future
use new new to those should be market as
active or new to you should also make
coffee and then we have all the even
when then and it's a scenario have this
piece even when then and of course if
you want to see in this case the record
tools it has also other surveys which is
that you can also complete to those so
how does this map to Java code it's
simply have here this sorry by simply
creating a class which you use the run
with a notation which is this is the
j-unit annotation and you said where all
these features are defined in this case
in sauce Taral sources future record to
those which is this directory that i
have already shown you now there is one
other thing that you notice that this
class is empty and then you need to
define the steps that it need to be
executed by sanity VDD and in this case
there are definite in record to the
steps which not is that in this case
what you have is that given I need to
and this
regular expression this is what we are
going to be it's going to be map with
this expression then we have also the
this when I added this then this and
then this I mean that you have all the
old up know that this is the mapping
between your future and your class and
notice that here Jane we just it's a an
actor should show up an action called
dissection shall see that two direction
and so on and this to those it's in us
it's very latina steps this step
sanitation makes that said nativity
inject all the webdriver and so on
inside steps so if you vote into to
those steps you will see that it's a
simple class which has a to do page this
is the page object pattern and then here
it has all the implementation of the
method for example should see the
direction should see to action filter by
status letter dissolved all the steps
that you will require from the point of
view of of your story to way executed
and finally if you go inside to page you
will see a simple page object which
extends from page object you have the
default URL to you know to start the
browser and then has all the typos
called selenium thing here of finding
elements
typing keys to a form or so on this is
the typical thing and that's all I mean
with only you know you create the page
object which is quite big with all the
interactions with the browser then you
create your stat your steps here with
all the fit with all the steps
it's required by by your business logic
and put in this recourse tool it will
attack you and now if I run it you know
that the store serenity notice that well
the unit is also are intercepting this
thing you can see here but the futures
are printed here and now we need to wait
because it uses an external to do
application in this case and maybe let
me check
oh cool
okay
demo problems is down
even the wired one the we are we good
oh cool now maybe the and this one do
yeah oh what a well what we can do is we
we explain more things and then let's
see if I have oh yeah thank you
that's right the wire and if not I will
know let's see if we are lucky
mmm but sometimes it take oh okay sorry
guys I have net I want to run again now
start the processor again automatically
now it goes to to the side of and see it
no rights buy some milk and checks that
is active and so on and finally in the
execute three because remember there are
three scenarios to execute
undissolved it's you know it ring all
the all the all these scenarios and this
is scenarios has been executed it's
quite I mean quite simple to do when
when you have all your steps to finite
because you can reuse these steps in
other you know another in our places but
this is this is okay but probably most
of you are using P jobs you will notice
that page of the objects becomes a broad
classes will fit a lot of logic there of
dealing with you know web elements by
searching for CSS elements and so on
also your pictures you will have
multiple responsibilities I mean I mean
that you're missing they're going to a
page and sending keys to a forum or you
know pushing a button doing them
modifications in the page objects
sometimes it's hard and also if you are
using a single page applications the
page object hmm it's like page objects
are static and my page is dynamically
refreshed so I don't know exactly how to
fit this and yeah some guys not is this
and they introduced something that is
called the journey pattern and the
journey button what does is making you
user centric test it means that the user
the actor of is doing something it's the
base of all the tests it uses a lot of a
small reusable components and since they
are small and mirrors there is only one
responsibility you know it's really easy
to to reuse them and it's really as you
will see now an example really easy to
read what this test is doing so
this is James and James want to know
what actions can do also want to know
which abilities can do for example they
can browse the web with a browser or it
can also query a rest service there's
something that James can do and also can
create do some tasks against the system
for example buy some milk which means
adding the milk to the to-do application
and press ENTER and of course the goals
are implant are implemented in this way
as we have seen the abilities at DNR
code so when you have the ability of
plus something using the web you do
something like this you do the actor
James is an actor that it's called James
it has a browser and you put James can
browse the web with his browser this is
you know it is code it's something that
you call it and it's really natural for
people know that James can navigate of
course James can also buy some milk so
you can put that James attempts to add a
to-do item called buy some milk and of
course these attempts are add to the
item is like enter the value things to
do into that into the list and then hit
return I mean again you still need the
interaction with the browser but it in a
you know in a more readable and easy way
let me show you the same example as
before but using the journey pattern
in this case we are going to see the
here a filter might reduce which
basically it says that I should be able
to display only the active tasks that I
have in my to do list so I have again
this class which has the run with a unit
annotation and I put here the location
of my stories may I have that filter to
the steps notice that now it it's quite
simple I'm using only the Wayne because
the author the given under then it's
already on the recourse to the steps
definition that we've seen before so now
the only thing that is different is the
when so I put what is different here and
notice that I said the actor name name
this is the parameters that I've
received from the from the future you
can see here Jose in this case attempts
to filter items via status the status
that is even by the file so if you you
want to see how this is implemented
inside you can go to display items which
is the one who displays that it it's the
class that implements notice that it's
really really simple and basically what
this does is uses a static method this
blows the web us the actor that item
very putting and final to the list items
and well this is to you know because
this receives the HTML and you always
transform the HTML or text to text and
that's all you don't need anything else
so en and you can see it's really more
readable this thing that the other
example that we have run before that you
need to define all the steps all the
step inside the steps for example all
the configuration with webdriver and so
on and one thing that I need to show you
now is that
reports that we say that Reapers are
really useful in in infinity Billy you
will see now here I have the
okay now here you can see all the
results with this thing that they can do
here say that that all tests are 12 pass
tests and two pending it means that 86%
is passed and 14 is pending impending
means that you have created the dot
future in the directory but it has no J
unit implementation so it means that you
know that you need to match org unit
implement this feature but it's not
implemented yet so with this simple
metric you can know the work that it's
not done as of course you will see if
someone is failing or or it has an
errors you can see all the capabilities
here with filter my to dos it's all the
tested tested and implemented but the
record to those you can see that there
is one feature that is not implemented
yet
and anyway again for the add new to
those and so on and you can see one
example this is all the requirement
filter to those maintain my to do listen
recording to those notice that here it
win means that all has passed and if we
go to complete a to action you see here
that I completed two at direction is
okay given I need to buy some milk
it opens a to the application you can go
there and you can see the screenshot
then you can go to buy some milk and you
can go here and said yeah I keep I type
at buy some milk and at the end you can
so see here that the add milk has been
completed and it
the test is success so as you can see
that the things that that the reports
that you can generate with relativity is
really really interesting because you
know every time for it execution which
features are implemented which features
are implemented and failing and we
futures are identified but not
implemented which is really good thing
to know what it's need to be done and in
the summary you see that add new to
those requires some work
so well there's the website of serenity
is sanity VD dot info the the code of
this example are on it app also if you
want to learn more about the joining
pattern you can go to be totally slash
every few journey and you can see a lot
of information about journey pattern and
that's all you have any question okay
thank you if you have any question you
can send me an email or tweet or
whatever</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>