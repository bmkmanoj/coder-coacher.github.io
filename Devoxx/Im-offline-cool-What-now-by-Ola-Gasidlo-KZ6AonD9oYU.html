<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>I'm offline, cool! What now? by Ola Gasidlo | Coder Coacher - Coaching Coders</title><meta content="I'm offline, cool! What now? by Ola Gasidlo - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Devoxx/">Devoxx</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>I'm offline, cool! What now? by Ola Gasidlo</b></h2><h5 class="post__date">2017-03-02</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/KZ6AonD9oYU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">yeah hi everyone I you're answering i
like that so you're not sleeping okay so
this is welcome thank you very much for
being here and today we'll talk about
best practice enough line first and
learns together in a posture years with
a few really interesting use cases
before we start one two three so my name
is Ozzie low I'm a platform engineer at
Mozilla and work on the web
compatibility team to make sure the
broken web gets fixed I'm also part of
justice conference you organize a lot of
conferences meetups things open tech
school yeah but you might be like web
comp what it took me like I think months
to actually pronounce that lexapro spoke
so imagine you probably ever experienced
the website that was broken in one
browser but not in the others right who
did that did you report the book did you
write a dirty hack so the web complete
project is an open source project that
makes sure that specs are implemented in
the correct way in all the browsers so
when you find a website that is broken
in one browser but works in others just
report that go to that side report we
have to fix and annoy other browser
vendors to actually fix that and if
you're interested in actually helping so
today I would love to tell you a little
bit about the actual state of Absalom
first and how a point of view change in
a pulse for years now and how it's
adapting in the real world before we
start I like to mend like to mention
that in this talk I would speak about
death and dynamic there won't be any
graphical display but I just like to
mention that so if you feel
uncomfortable with this and also because
of motion sickness animated gifs if you
want to leave
cool tal to get it happy to give you a
short summary after the talk but yes sir
the internet turned 25 plus years
amazing times we were living in this
time our relationship with the internet
it changed a lot we do different things
with different devices then like 25 10
or even five years ago and it's a part
of our everyday life we rely on our
devices but i need to change four years
ago when the offline first movement
about broader attention I give her first
talks about the concept that was 2013
what was our idea back then why did we
need the offense first concept so badly
first thing was the rise of the mobile
devices and they use it there are
countries where people actually do not
use a desktop device like at all when
you think about it it totally makes
sense for example a phone its way
cheaper than a laptop and it basically
covers you need for whatever you want to
do with it there's also the issue of no
constant connectivity or really poor
network coverage here of when first felt
like a huge enhancement the application
and adaption to a new behavior for years
later in 2017 what do you think do we
still need the offline first contact so
tell me they're raising your hand yes I
like to ask questions who of you is
already building offline first
application just raised just there a few
okay cool who of your things they're
following the correct approach that's
good hands is good because actually
there's still no perfect pause there are
a few things to figure it out over the
time but we're still trying to figure
things out so you probably right who of
you things about upon first as
progressive enhancement
after sitting up on first in the wild
we've realized it's not just about a
specific and special use case or the
rise of the mobile devices it's just the
whole approach it's so much more like
audible set ones offline first means
getting on screen without a network
request the more that it's there before
the network the more of one first it is
this means every web application should
work after the very first visit just to
use and use the network just basically
to get and set new data everything else
is online first remember me asking you
like a long time ago three slides or
something if offline first is
progressive enhancement and quite a few
people were like ha ha holy what about
tell you that you're actually wrong yes
exactly you might sound confusing why is
offline first concept not progressive
enhancement I mean actually it's the
other way around let's take step back
and see why do we need of a first
application normally we use applications
for everyday life right to make it
easier better like checking in with your
family members other loved ones abroad
baby just picks a partner during the day
using flex rs.c etc at work especially
in remote team that all comes down to
communication we also need application
for collecting data how much money do
you spend doing a drink enough during
the day have how many steps mimic but
also how can i fix my bike or my washing
machine how do i translate that even or
did i spell this raise basically that is
all about information posting selfies
from the Los vacation tweeting your
thoughts etc checking in many symptoms
when you're sick or
even checking the internet why your kids
act out probably this all comes down to
empowerment and the most important thing
there is again and it's a basic life
need and I think we can all agree in it
this sums up to love so when we look at
those points communication information
empowerment love sounds like something
you all have in common right when we
break it down it all comes down to help
satisfy our very basic human needs for
safety the longing esteem and self
actualization must love defined all
those points in its hair care of needs
already 1943 so since when is helping
people to fulfill a very basic human
need progressive enhancement but we all
love to sell it that way right so
developers jump on a progressive
enhancement train and we do the
application every six weeks and the
nuchal framework or tool or whatever and
without knowing what the real issue
actually is and I'm kind of tired of
this half-ton applications no
documentation nothing at all released
out in the wild because someone will
wanted to reflect the application just
really quick right right temporary it's
always temporary so we have all this
really bad and super slow applications
because of bad planning and really messy
architecture we think we do not need a
new google mail or Twitter or whatever
trust me we tend to forget that this our
jobs are basically about humans people
it's not about frameworks tech design
patterns or even discussions about
semicolons put up billet town when you
actually just need a house just because
you can especially because usually you
with the gorilla banana problem any one
of you knows the gorilla banana problem
you know it let me explain I love this
one you wanted a banana but what you got
was a gorilla holding a banana and the
entire jungle so every time you used
like a whole infrastructure like a
framework to solve one problem you get
all this implicit environment that they
carry around with them it's about using
the right tool for a job without
building account just because you can
it's all about keeping this thing simple
but solid basic but optimized this is
why I think putting often first in their
progressive enhancement pot is pure BS
you know what the progressive
enhancement part of your application
actually is the network so you might ask
yourself why should I care my
applications work I do they do they have
a checked your application with a bad
connection or none at all how productive
are you when for example just one
service like it happens down or is not
to mention office Wi-Fi how easy it is
in everyday life to communicate for
example with your friends at a concert
whenever one is just sending live stream
of concert by a phone and you're like
normal people and dislikes us with good
connectivity situation blessed people
surprise there are others 243 of the
population has access to internet
connection and just a very small amount
of them literally forced and steady
where data is expensive it is as you can
see here on this list from Ben Schwartz
talk about performance metrics Germans
would have to work like less than an
hour for 500 mb but people in India
about 17 hours let's assume you have a
five heard MP plan right so what can you
do
you could visit almost some websites per
day during that month nothing else you
could watch one talk basically 22
minutes so one talk per month and data
would be gone or you could make other
people really happy and write a lot of
emails or procrastinating on without
attachment of course so the application
should provide the base and work offline
/ default the network is the one to
enhance the application with new and
outside data no matter which technology
stack we actually use peer-to-peer
network direct connection to the server
or a USBC whatever works to transfer
your data it's fine it's not important
how you transfer the data basically or
the application on your device it's
important that we save it locally and
enhance that thing through the network I
know mind-blowing so we cover theory hey
let's check out what is happening in the
real world and how other souls offline
issues a next minute I'll show you like
real approaches and really impressive
ideas so let's start with router imagine
like beautiful morning you decided to
work remotely sitting in an internet
cafe so okay you need probably first to
check you connect your laptop to the
router open your email application and
sent the request to get your emails
close the laptop and come back in the
evening and you're like wait wait flows
of it it was morning right exactly this
happens because there's no physical
connection to the internet like like a
cable that the internet cafes using they
just have a router that saves the
request and connects buy a bluetooth to
a book it sinks and the request goes
like off it goes literally the bus
arrives at a stop after half of the
route to the hotspot with a physical
connection
since that another bus also exchanged
not just the data but also passengers
and luggage the buses sunk by a
Bluetooth previous request and results
both buses return literally and you get
two emails hopefully when you were able
to authorize the tech behind the smc
service is a combination it's by the way
it's actually a thing people are using
this is a combination of nhi zones
detain routing and the darknet so what
are learning actually check your
requests besides of the fact that you
should be aware what you're actually
doing do you need the 20 request or
maybe just two would be enough please
serve ugly fight at minified files and
do you really need this life and be
background for mobile really beware of
life I you should be aware of life I
which is the state where your device
check check your connectivity situation
and tells you yes you're definitely
online pinky promise but actually no
data is passed through we could go with
checking the bandwidth after the very
first thing right could work and we
could develop something similar to media
queries right device sizes but like
meter crews for device either purchase
for bed with so we could load assets to
detect true bandwidth that will be cool
but bandwidth can differ per request in
per package especially when you're
moving for example on a train I even
experienced that here today in cinema we
would need to ping not just forever
request but basically constantly so it
will kill your performance the whole
application and even the network you
can't rely on your request to come back
so either you at a time out to kill your
quest or make you whole application
fully independent of your question data
this is why we need to separate updating
from the efforts and data the update of
efforts is way less important and
actually getting data set a basic set of
you I locally to go easy on your storage
just a basic one and head start with web
fonts and images whatever you need
offline should be the default state and
we need to make the banquet assumption
by device we detect take
responsibilities of your castles and
keep them clean what could be better to
use to manage your caches than
serviceworker right now entrance service
worker today I think Microsystems you
can totally do that just one thing if
you want to use app cache for quite a
bit just because browser I dropping the
support really hard but also for
migration from app cash to service
worker you say cash images if it is a
really hard especially in the offline
context sending images in the in browser
search good way to go but still very
painful because of different story
limitations different story limit
implementations across the systems
across version so porting the cart of
images like I can logos etc TCG and CSS
great way to cut off a bit of the OPA
encoding assets in basics before and
during the spring in the in browsers
part of your choice could be a way to go
for example saving funds like this
loading them straight from the start
improves it performs enormously you
don't have to jump anymore this is
impossible for images like a logo but
please be aware do not do this for all
of your images don't build the town when
you just need the house just because you
can the things they used as we already
know and in browser storage are limited
plus decoding base64 on the fly is
really heavy task so it slows down your
entire site and especially in
combination with some manipulating
frameworks like react you can find
yourself running into race conditions
here like really badly
okay next use case bit heavier so just
let you know in advance the next use
case is about the pandemic 2014 and 2015
the Ebola pandemic in parts of West
Africa was a really big scary issue I
was involved in a project by the NGO in
of Africa to build two applications to
stop the pandemic the first application
was to solve specific issue to provide
information for the population because
information is the key to prevent a
pandemic to spread and kill the process
was the population was informed about
one specific number they could call just
off questions about symptoms report
someone sick reason that the call center
checked the calls within the application
we've built collected all the provided
information from the caller and send out
a team if needed did edit also
information is through the application
like name location and some additional
information phone number so they could
even call back for any further issues
data analysis and filtering was really
easy thanks to that application they
thought there was issues like unexpected
and constant all us the generators
jumped back in after some time but we
could not afford to lose data just one
case could have caused another outbreak
and many desks all first learning here
was the couple's server inclined to
serve the needs of eventual eventual
contingency built in a task and message
system that can act independently on
connectivity situations for example for
data couch to be especially in
combination with pouch provided their
usability in the real world really well
kelsey be is no sequel database
appropriate age which is exactly what we
want for sync couch to be comfortable
suitor features such as on the fly to
come into a document transformation
real-time changed education and we need
that for our message and health system
but also for decoupled architect
pudsey be is known for JavaScript
library that it's inspired by couch so
same API but very different
implementation it's designed to run well
within the browser store everything
locally when you're offline presses
presley it syncs with couch thanks to
the replication protocol and when it's
back online so you don't have to take
care of that by yourself so one of the
learnings was also to save data
documents locally with pouch we actually
had documents that we could store
locally we wouldn't so we don't have to
worry about flushing the caches accident
one of the biggest issue is the syncing
data was merge conflicts because pouch
in college speaks the same protocol sink
was on that part really easy when we're
back online we didn't have to take care
of it the second application we spelled
was actually to check patient data in
the field after examining the infected
patients they had to stay in quarantine
for like twenty one days the team added
the data to a general database through
the application plus got like lab
results for very different endpoints and
very different file types so that was
really messy the data was imported and
safe in a global database sync all
across all devices so what do you do
with a mess clean it up second learning
was about schemas there define flexible
des gamers we added an organization
system interface to map the data and
warm defined schema the schema was
flexible enough to be extended if needed
thanks to the node sequel database
behind it data was imported
automatically when it arrived mostly /
mail mostly sometimes to sue's be stick
that travel for two weeks and we added
data on the fly constant automatic
testing and high test coverage for the
important interest was must the scheme
and the testing helped us a lot to
prevent merge conflicts before the
get-go couch and pouch
pacificare of the sink merge and
flexibility big bonus also the schema
help us with making filters and analyze
the data so visualizing it was really
easy we helped actually to curtail the
pandemic because of clean data
structures and constant testing of
applications and if anyone tells you
ever again that testing and clean
structures don't matter now you know
what to reply okay it's I think it's
almost lunch ish so you might hate me
for the next thing I'm sorry the pizza
s'okay protect appropriate as you all
love this order to food right who loves
to order food yes okay did you ever
check the local storage by ordering yes
sir like just to see what could stored
your items things a friend of mine did
that once and went a little bit further
just curiosity so he was actually
wondering it's a validating everything
on the server and he manipulated
checkout subtracted just one cent and
sent it out and waited Pizza came and
nope no server side validation could
have been a very cheap meal what do we
learn and contrast to the limited
possibilities and the use case before
this company could have validated the
data on the server right but this is
sometimes not possible especially when
everything needs to work without
actually request security is still very
new topic to assign first and so many
tools are provided yet I'm super happy
to chat later about that because any
input is good input you should
definitely also watch Marcos talk and
the end of the day about mobile security
so a lot of us seem to hate course
sometimes
it provides already a really great set
of features to make give up applications
like more safe but it does also not
solve the issues within browser storage
manipulation one way to go would be to
encrypt your data when you use powers
you can apt for example crypt apology
which encrypts your pouch documents Vic
downside here is the documents get a
cryptid but not the ID so you could like
reverse engineer really quick but at
least you can't change the data anymore
when you want to a crypt data you might
also want to login right which does not
work without a request to the server
there's a way to use tokens necklines
you could use JSON web tokens it's an
open industry standard method for
basically representing claims securely
between two parties and it's pretty much
what we want it makes you coupled and
Sakura sing and communication possible
okay those are the big ones I still have
one last use case because I think this
is the most hilarious amazing and most
impressive one I've ever seen so I would
love to show you that one it's about the
rally any one of you ever heard about
the mongol rally before one two three
just a few ok so the mongol rally was an
unconventional rally where people
started either from london or the czech
republic with a really old car to
mongolia the main intention of the rally
was a donate your car program so every
car is actually made it there could be
donated without importing duties which
was really cool 2009 and team from Spain
took part in the rally last thing
specialist first kinds will the issue at
the rally was they had to cross a lot of
countries obviously with different
receptions different payment models for
data volumes etc etc etc so they needed
a way to communicate with a last one so
they could say like hey we're alive and
well
or could you actually pay me out of jail
so the build a system that could encode
a nasty message in 8-bit binary code ran
that through eight phones that actually
call just one number to save money they
didn't establish a full connection it
was mainly about letting it ring the
short ring was a zero long ring was one
the other end just checked the number
basically the numbers were set for the
order of the bits because it's binary
back now ski and send out the message I
noticed my blu-ray what our learnings
here that's basically just one tiny know
as we is the most important learning
I've ever seen rethink how to use
technology by thinking about the issue
not about the tools you need directional
communication it's so basic it's so
simple right the fix that already in the
beginning by thinking about the real
issue and not the solution first okay
time I think yeah fine we'll have some
questions in a moment and you can also
like fight me I mean I'm the one with
green hair so you probably fight me
really click and remember it's not about
frameworks design patterns tools
semicolons it's all about humans thank
you the questions
it's not a totally okay I know you're
hungry and I'm around you can also tweet
I think we're good show you one okay
ajantha IE work with mobile the magic
and one thing that you would like to do
is to save some data locally and then
send it on the server when we have
connection yes it's actual cake in the
travel business yes rating out of the
country able to connect surely also
really if I use application on
modalities wooden carving a problem
about rationing of which data is the
most recent the most valuable do you
know I mean we will be editing conewago
solving this problem because I get that
I would say no different diversities
data in the race to decide which one is
actually lower value beta very name of
data is really hard this is why I love
to use couch in touch it's not like you
have to use this because flights I don't
know I don't consult them so because
they have revision numbers so they take
care of this and they're aware which
revision number you actually on right
now which devices on which number and
how to merge things so it's kind of
automatic on one way but you're also
able to when you have merge conflicts to
solve and within your code by yourself
to write a logic just for that plus like
the detection is always like really hard
because when you're back online you
basically would need to for example use
web socket or long polling or whatever
just to see if there is a connection
established trade the cool thing is that
because of pouch and how to speak the
same protocol when pouches like realizes
i'm back online it just things basically
couch realize hey there's something
eating because it sends just the task
and a short message it gets one back it
knows okay I can sink now let's do this
and just talk to each other so just
don't have to take care of this anymore
there are different solutions but pretty
much all of them away way harder because
either they don't have the versioning or
you have to use a different protocol to
actually establish the connection
listing thank you yeah you're welcome
you look program cool so enjoy thank you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>