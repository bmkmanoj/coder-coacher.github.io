<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Reactive Programming in Java by Venkat Subramaniam | Coder Coacher - Coaching Coders</title><meta content="Reactive Programming in Java by Venkat Subramaniam - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Devoxx/">Devoxx</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Reactive Programming in Java by Venkat Subramaniam</b></h2><h5 class="post__date">2017-03-13</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/f3acAsSZPhU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">we know an author and passionate speaker
when you're talking about software
development we should probably be
listening at least I should so without
any further ado bank out we all use and
enjoy thank you very much thank you it's
a immense pleasure to be here it's
almost overwhelming to be standing here
and talking about it the things that's
being done here and I just realized they
are talking about particle physics and
I'm here to tell you that I am that
particle I am that little thing that the
piece of dust compared to what's going
on so it's amazing
thanks to fun for having me here I
really appreciate it thanks for hearty
because my computer broke today so it's
crashed so I'm going to do the demo from
Hardy's machine
hopefully I know how to use this machine
but I'll try my best
it's a great pleasure to be here I want
to talk about reactive programming so
one of the things that I find us
challenges when I look at new
technologies I also ask the question
where did it come from there's always
got to be a context so it's really
struggling to understand what reactive
programming is and then I'll just share
with you some of my learnings and how I
look at it you know the theories and
concepts are extremely important
absolutely no doubt about it but I also
want to really relate it to what we can
do on a daily basis how can we put this
to use and that's what I want to really
focus on today so what is really a
reactive programming well I think I've
come to realize that we work in a field
where every ten years or so will give a
new name for what we already do and get
really excited about it and so this time
around it's called reactive programming
and that's a great thing because then we
can party have fun time but be known for
a very long time this is really nothing
new at all in a way if you really think
about it extreme programming was nothing
new and yet what was new about it was it
brought together about 12 different
practices that we are extremely
important for us to focus on and to in a
similar way reactive programming doing
four different practices together but
obviously the question is why and why
now why should we change what we do
or at least we think about what we do
and the reason is I'm almost in tears
when I say this but I remember those
beautiful days when I used to wake up in
the morning turn on the coffee pot and
as my coffee pot is brewing coffee I
would hear my modem connect and
reconnect and disconnect and reconnect
and then I would call my friends and ask
them what's your baud rate today those
days are long gone every one of us is
walking around with multiple devices
connected to the internet all the time
the biggest geek I personally know is my
son I patted him one day and several
devices fell off him I don't even know
how many is carrying I couldn't
confiscate on enough of them soon enough
and and we are talking about these
devices the second thing is if you
really look back about 10 years ago what
companies really did was they made their
employees available to us the users and
they made software available to their
employees well employees using software
there's a special name for them they're
called captive users meaning nobody
cares what they think about but on the
other hand we the real world users have
a greater demand on applications no
matter how much your what size of your
company is I can bet you you have more
customers than employees so the demand
on the application is a lot more today
the third important reason is that we
are interacting with applications so
differently today than we did 15 20
years ago and then we are talking about
wearable devices and when I talk about
wearable devices a frigate you know a
watches and and and devices like that
I'm talking about earrings no strings
and thumbs rings all of them enter it
enabled constantly communicating and the
days when doctors can have devices
honest where the devices are constantly
monitoring our health and the doctors
get to know about a however else
condition even before we realize that
something could be wrong it's not very
far away well all this is really leading
to big data and when I say big data I'm
really talking about high frequency high
volume of interaction and how do we go
about dealing with it well this is where
reactive programming really starts
without and it really is about having an
architecture that focuses on four key
components the first is message driven
Orkut
picture we really want to be able to use
messages to communicate I'm going to say
using a distributed centralized exhibit
a transaction on a centralized database
is so 20th century it makes no sense to
do it so we definitely want to use the
communication that we can use by using
messages
well scalability is extremely important
I was talking to a client recently and I
asked them how many users use your
application on a given day and they said
oh about 200 users use of our
application a given day I can elastance
the 200 users well you guys are a
billion dollar company how come you have
that many only that many users and they
said what you asked on a given day well
generally people use you know the
computer only for maintenance but on two
days in a month about 50 million people
use it well and those two days the
system better be really producing good
throughput and all the transactions
happen on those two days how do you
scale for something like that and I'm
going to say that maintaining your own
infrastructure and maintaining staffs to
maintain those infrastructure doesn't
really make sense anymore in 2017 the
cloud computing has shown us how we can
deploy machines on the fly you can
configure it to start services when the
demand goes up whether it's time based
our load based and then when the demand
goes down those computers can go away
virtually and as a result we pay as we
go and of course we have learned how to
really leverage local cloud computing
really well and that's what they talk
about as elastic elasticity and that's
something they really recommend doing
the next thing to think about is
responsiveness
now why is responsiveness so important
we don't live in the world where we're
going to be patient we are all you know
living in a world of instant
gratification if an application doesn't
respond right away you have moved on to
work with something else you're not
going to sit there and wait for those
applications anymore responsiveness is
extremely important imagine you walk
into a store on a Sunday afternoon and
then you notice the clerk is busy
helping somebody and what are you going
to do you're going to look around for a
few minutes look at the wall look at the
ceiling look at the full floor and then
you're going to quietly leave why did he
do that because there was no
sponsored this and then you're kind of
feeling like there's not the place where
you want to be well on the other hand
you come into the store and the minute
you walk in the clerk who is busy with
somebody makes an eye contact and says
I'll deal with you shortly and then goes
back to help the clutter customer what
did you do you've probably waited for a
good 15 minutes
why because you felt important even
though you know you're not and the point
really is that's one of the key things
is responsiveness imagine the very first
day you discovered infinite scroll what
an idea you have been using the site for
a while but that day you came in and it
snapped back with the response you're
like wow it's fast today wonder if I
have a better internet connection and
you scroll down and your brain just
caught the fact there is nothing in the
bottom and before you could react to it
well something filled up the space and
then you scroll down and like wow as
you're scrolling more data keeps filling
in well that's a great idea because they
did not work so hard to get all the data
they got you enough for you to look at
and while you're looking at it they go
back and get more things that can make
the systems really responsive that's a
great idea
but what about resilience that's
extremely important to the worst kind of
applications are the ones that fail in
unpredictable manner I mean I mean I
remember I want to tell you what country
this is but I was filling the visa
application I'm on the 15th page the
worst question they could ever ask me is
list all the countries you have visited
I'm like are you kidding me so I answer
all this data and my heart is pounding
because I'm the last page I'm selling
please please please and I click the
button and the whole damn thing closes
and the other start over again right and
that's really a poor application to be
working with and you want to save the
state you want to be grateful to the
users that's very critical well you want
the applications to be really resilient
that's very critical what I was speaking
I've been teaching at the University for
about nearly close to thirty years now
but I was speaking in a conference last
year and a gentleman came to me said hey
Bank kid I took your distributed object
computing course back in 1998 I said oh
I remember teaching that course in 1998
he said I've got a story
to tell you about it I said a love
stories tell me what story you got he
said I was in your class and it was a
demo day and we were doing a demo of the
final project and when I was doing the
demo you quietly walked up to my machine
disconnected the internet cable went
back in stood down and said continue and
my application crashed and I failed the
project I said I'm really excited to
hear it I don't like hearing stories of
failures like this I'm really sorry that
I failed you in the project he said no
no no I wanted to really come and tell
you the story because you helped me a
lot I said how could I help you by
failing you he said because that's the
last day I ever wrote code like that he
said from now from then on when I write
code I always deal with errors I always
deal with exception and he went on to
say these days when I code at my work in
my cubicle in front of me I have a
picture of evil blanket and I look at
that picture every day when I code I
don't think we want to have a picture of
evil blanket in front of us decoded but
the point really is that we do want to
really plan for resilience that's
extremely important so these are the
four things that it really brings
together is to leverage elasticity to
deploy applications to use message
driven architecture to be able to build
applications that are responsive and to
make them really resilient
is extremely important but if you really
think about it what does this all really
mean to us well let's get back for a
minute and rethink about what we've been
doing for a good about twenty plus years
and we can pretty much summarize what we
have been doing to maybe developing crud
applications almost every one of us
spends time developing crud applications
you cook you read data you you know
delete data you update data but then you
realize can would the entire world be
full of cloud applications there's gotta
be applications where it doesn't fit
into crud after all and suddenly we
realize yes there are applications that
don't quite fit into crud for example I
want to listen to let's say a Twitter
stream you want to know what people are
tweeting I mean that's the best way to
waste time isn't it and then you can
just start listening to the Twitter feed
and then if there's something of
interest to your product or your company
you can do some processing about it
otherwise you can just ignore it in a
similar way you could be looking at
stock data coming through and you're not
interested in all the stock data but a
particular data in a particular range
and when that Google stock price it's
the price you really are looking for
maybe that's when you want to do the
trade until then you want to just slip
it by our claim we heard about how so
much volume of data is being collected
here in in the in the in the detectors
but you're not obviously interested in
all the data we are filtering out and
selecting only data that you care about
these are all really not crud
applications these are applications
where you have some middle agent that's
interested in looking at the stream of
data coming in and can take action based
on what they need and then all of a
sudden we say well okay maybe we should
rethink about the way we develop
applications now what do we do as
programmers when we read think about
things we start coding and the minute we
start coding we realize well this is
really painful to code all of this and
at that point you have two options when
things become painful you can give it to
somebody else to code it well that's one
way to solve the problem but usually
that somebody else is us the programmers
for two reasons because we are the
programmers and second why would you
want to give the real fun stuff to
others anyways right well the second way
I really get this done
it could be productive about it needs to
raise the level of abstraction and
that's what we are talking about here is
a level of abstraction that's been
raised on enough so we can actually do
reasonably well with this but in a way
if you really think about it what I did
I mentioned that this is nothing new
this has been around for a long time you
couldn't have been a programmer in the
80s and not heard about what are called
data flow computers and data flow
computing wealth data flow computing is
where you really have a component or you
can have expressions they are ready to
be fired or computed as soon as the data
that they need becomes available
well data for computing offers through
parallelism and the reason is you're not
going from instruction to instruction to
instruction your instructions are kind
of floating around and the minute
something is ready for the instruction
is ready to fire if I tell you data for
computing
is awesome we can do it you're gonna say
old man sit down we're not interested
but if I tell you well we could be using
Amazon lambdas electricity that's
awesome because we give a name cause
serverless computing and this is really
awesome
what is that dataflow right because
you've got prophecies that are ready to
fire you don't have acidity to a server
but they can execute as soon as data
becomes available
well the concepts are being recycled but
what it really is that it's really a
commercialization and more so adoption
of technologies that we once were able
to talk about but we are able to
actually realize it in fact I would want
to emphasize this because when I was a
young developer oh it was frustrating
for me because I would read books and I
would read all these wonderful ideas and
I look through the window and say I
really wish I can do these things rather
than reading about it and now I feel
like a kid all over again because I can
do everything I read decades ago because
that's really viable and you know
available to us with the with the way
the software industry but not only the
that but the hardware industry has
changed as well these are within reach
for any common person to play with
that's phenomenal so I want to really
get into the code level and see what
this really means and for this purpose
I'm going to ask for a help from one
person here who has a smartphone and
wants to help me who wants to be the
volunteer don't be shy who wants to help
me s-sir what's your name start sailing
for me I'm Mauro Babel Bible palpable
nice to meet all of you can sit down
while you help out in the chair okay you
have the chairs base okay good all right
I want to make sure there is there all
right are you ready all right I want you
to your smartphone is ready and I want
you to tell me the following the stock
price for Google and for Amazon and for
let's say Intel so I want the price for
all these three please I want a stock
price for all of those three yes
are you done yet father we are counting
on you who we have think that travel is
very slow everybody thinks you're slow
bubble are you really done he will fly
he's giving excuses you are offline how
disappointing
are you still trying okay well thank you
for all you really explained how the
world wide web works why don't we give
him a hand that was awesome
so thank you so so what did he do he
very beautifully explained how the world
wide web works today right what do you
do - the world wide web you make a
request what does the web do oh thanks
for calling and goes down to work and
what does the user do are you done yet
and the user says well this site is not
responding
let me help and click the refresh button
so what does that do it creates one more
thread on the server it's like me
constantly interrupting him was he
helping him asking more questions
no now we have three or four threads
running want to see what's not working
what does Beckett say what is everybody
else a and he's completely distracted
right in the meantime I was impatient I
said never mind don't do this anymore
and he never really saw me do that why
because he was so busy doing the work
like the web applications do and
eventually the web applications finishes
and says the results where does the user
go and the user have got long gone
before right well I'll tell you somebody
likes how well did something absolutely
phenomenal a few you know in a
presentation was giving earlier I've
never seen anyone do what this guy did
either before or after so what I did was
I gave him the exact same question it
said give me the stock price for these
three stock values well the guy
immediately said oh okay and recruited
three people around him and he said you
find the price for Google you'll find
the price for you know Amazon you'll
find the price for Intel and by doing so
he immediately demonstrated not only can
a machine suck a cluster of machines can
subdue collectively together and I
would have never done this better so the
point really is we've been getting this
totally wrong
we cannot be just taking somebody's
request and God knows down to process it
because that is just simply not
efficient at all in what we do so what
are we really trying to get to and what
I say efficiency is achieved not by
doing things faster it is actually
achieved by eliminating things we
shouldn't be doing in the first place if
Powell says why do you care about all
these prices now can I give you one of
these prices I can get back to you later
on for example right that's a way to say
I'm going to give you some and if you
don't want anymore
I'm not going to do any more let me
rephrase what I said what I'm saying is
it pays to be lazy both in life and in
programming because laziness means
efficiency and that's one of the key
components to think about it's not to be
eager and agitated and do everything
when the instant is given just take it
easy a little bit and then if it's
important we'll come back and do it not
otherwise right so how do we get to that
point this is where observable comes in
so what's observable observable is a
data source it's a data stream and an
observable can start sending a stream of
data and we can process the stream of
data as the data arrives towards us well
javascript has a concert of promises as
well and the main difference is a
promise is a single transport of data
and observable is a continuous stream of
data I'm a huge fan of public radio I
have to listen to public radio every
morning and when I turn on the radio I
listen to the program when it turn it
off well they still transmit the program
it's just that I don't care to listen
anymore and they don't care that I don't
listen anymore so it plays even so the
point really is that I can turn in and
listen to it but it's a stream that
keeps flowing towards me and that's what
I observe herbalist but wait a minute
but how is the system from iterators an
iterator is often a pool pain you have
the next element half's next get me the
next house next get me the next you keep
pulling the data in an air raid
in this case the data gets pushed
towards you rather than being full
it could be synchronous or asynchronous
but I mean how is it different from the
observer pattern well it's very similar
to the observer pattern except I'm going
to say there are three channels thus the
data channel and the data channel is
where the data arrives there is a
complete channel where you know that
there's no more data coming through and
by giving data to the sending a signal
to the complete channel they tell you
I'm not going to send you any more data
so you can do cleanup operations and
there's an error channel the error
channel is extremely important we have
really found it hard to deal with errors
in overfilled it's fun to be a
programmer for a while because you see
all the mistakes that happen over the
years and you just sit back and kind of
kind of look at all the errors and how
we are terrible in doing things way back
in time we said if something goes wrong
we will return an error well then we
said if you return an error how do I get
the data well negative is Error positive
is data and then we realize that doesn't
make any sense
because data could be negative - ok
let's try this again we'll return an
error if there is no error we'll turn a
zero if there's an error we'll turn an
error code thank you very much but
where's the data now Oh for that we'll
send the parameter we will fill the
parameter and return to you that didn't
go very well that was really hard and
one of the errors is that they forgot to
fill the data well ok let's try this
again we're going to throw exceptions
that was the worst of the kind because
now every put your empty cache block I
mean every week I said I tell people
please don't put empty cache blocks
right and then this disrupt the call
chain as well not a very good way to do
then we've been sitting there and
thinking how do we deal with errors
reactive programming states observable
says we're going to send you error
through an error channel
in other words error is a first-class
citizen we don't treat error any
differently ever is just like any other
data so just like we're going to give
you data we're going to send error to
you like data except we're going to send
it through the error channel but when
you send the data error to the error
channel then why
happens well imagine you have an API and
you call the API it gives you an error
what if what is it that you should not
do at this time you don't immediately go
back and say here call this a game right
I mean if somebody says I'm busy right
so can I talk to you later you say okay
can I help you now I mean that's the way
to drive them crazy but that's what we
do in code right accord sales we keep
pinging on it which makes it only worse
does what we learned from circuit
breakers circuit breakers say if
something went wrong give it a breather
let it recover so the minute error comes
to the error channel that data channel
immediately closes up there's not going
to be any more data through the data
channel because there's an error that
comes through air Kanna
so observer has three channels a data
channel through which a stream of data
keeps coming in a complete channel to
which one signal for complete will come
at that point the data channel closes up
or error channel has an error coming
through and again the data channel
closes up if that happens that's
basically how this works so we can put
things together to create applications
and I did mention that it could be
synchronous or asynchronous but one of
the beautiful things about it is it
allows us to postpone the time we need
to worry about synchrony let's think
about this for a minute before we get
into the code suppose I tell you to
develop an application you go ahead and
build it
you wrote it in a sequential manner you
know sequential code in front of you
you've been working with it everybody is
happy one day I come to you and say you
know what the sequential code works but
it's very slow I want you to turn this
into a multi-threaded code multi that
day that moment is when this code which
has been beautiful and lovely to look at
suddenly turns into a monster right I
mean people coming to work my elect
everybody they say hi in the morning but
after that day nobody smiles in the
business right they walk in and they sit
there and they start debugging the
stupid code well it becomes really hard
and so what do you tell you've learnt
your lessons right I mean if you open
back shirt of every program you see
scars
those are come multi-threading scars
right so you
gotas developer and say they dude
performance is important what does the
person do they start with threading
first why because if you start threading
later your code sucks by starting
threads in the beginning your entire
development sucks now and you're not
able to do any work at all and as a
result you don't know what you're doing
but you've got to deal with
multi-threading from the day one this
has been a disaster in over in the
making well reactive programming says oh
wait a minute
what if you can't postpone the decision
of concurrency to a later time you
develop the code sequential e if the
code worked and if it's performing
really well keep it sequential there is
no fun in creating threads when you
don't need it
that's a gagney principle isn't it
you're not going to need it I would
rather develop an application and deploy
it and make money out of it and produce
value than saying this is a
multi-threaded disaster on the other
hand if it doesn't perform very well
let's introduce threading late in the
game oh but wait a minute what if the
code turns into a monster
well the good news is structurally the
difference between the sequential code
and concurrent code is zero that's one
of the beautiful things about streams
going from a stream to a parallel stream
is incredibly simple in the syntactical
manner that is semantically there are
issues to deal with still and the code
structure is exactly the same so for the
first time in decades we are beginning
to see code structures of sequential and
concurrent code being just about the
same and that's a huge benefit we can
leverage because that means you can
postpone decisions until those decisions
are important if you make decisions
ahead of time those decisions become a
burden you have to carry around and
that's not fun at all in our efforts so
let's talk about how we're going to do
this this example we were talking about
how are we going to do this so what I'm
going to do here is I'm going to first
of all define a little variable I'll
call it as symbols over here and I'm
interested in using these symbols to get
the work done so I'm going to say a
stock server dot get feed and I'm going
to pass the symbols Oh
to it and I'm going to ask you to give
me an observable in return for me to
work with well obviously I don't have a
get feed method with me right now
so I'm going to go ahead and implement
that get feed method so what are we
going to do to do the get feed method
I'm going to say get me that method and
I'm going to say observable and then
there's going to be a stock info and I'm
going to create an observable offset for
these given symbols and and so that is
the RX observable that I'm going to get
we'll get to that point in just a minute
so I'm going to go ahead and output here
created and that's what I'm going to
leave here just to illustrate the point
but then I'm going to go back to this
code right here and I'm going to assign
this over to you
we call it seed for now and then of
course I'm going to say I was bored and
then I will say over here got observable
so that's basically what I'm going to do
is just display that end and then see
what happens well when I go ahead and
run this code this time notice that in
this case it says create it and it says
god observable so that's pretty clear
that it went ahead and called that other
method that we had in the get feet how
well were I'm going to go back to this
code and I'm going to actually do some
work with them here so we tildes what
I'll do here is rather than returning a
null I'll say observable dot create so
I'm going to say called a create method
well this follows the pattern we saw in
Josh blocks effective Java rather than
using a constructor using as use a
static factory method that's what we are
doing here created a strategy static
method we go to use so in this case I'm
going to call an emitter and then I'm
going to simply say emit a price and
then I will send the emitter do it well
that of course requires an Emmet price
method so I'm going to implement the
Emmet price method which is a void
method right now but here I'm going to
simply say ready to emit so that's
basically the next of the little baby
step I've taken right now if I go back
to this code and one of the Skjold
well notice that in this case it starts
up and in this case of course it is
going to this
play created and it displays god
observable but wait a minute it did not
actually do the other method that we
just saw here which is ready to em it it
didn't do this so why is that well you
know the answer it's because it's lazy
right absolutely so just like my son so
that's basically what it's doing it's
like sitting there and not doing
anything it doesn't get excited it
doesn't get really eager right and and
as a result it says yeah when it's
important I'll do it not until then so I
just waiting as you can see now of
course we need to ask him to do some
work or ask it to do some work so how do
I go about asking that well let's go to
the sample class right here for a second
so I'm going to say bring up the sample
okay how do I go to the other file here
how do you I need your help so what was
it command II he is very tricky he
reconfigured his Intel keyboard for me
now so I don't even know how to use it
thank you so so right there we have the
the class here so what am I going to do
here I'm going to say C dot subscribe
this is when you become the observer to
the observable and you're ready to
subscribe to it now I mentioned that
there are three channels well the data
channel the error channel and of course
the complete channel here is the data
channel I'm going to say stock info and
then I'm going to say in this case an
arrow and I'm going to simply output the
stock info given to me that's the data
Channel I don't have the error channel
of the complete channel registered at
this point but that's okay we can come
back to it a little later so let's go
ahead and run that little bit and well
it's supposed to emit but in this case
of course I got to write the code to
Emmitt which I've been done yet but you
can see ready to emit being called right
now that's because we subscribed to it
and said I'm ready give me the data and
it should suppose to start sending the
data for us so how do we go about doing
that well what I'm going to do now is
now that it's ready to Emmet I'm going
to say while true and I will in this
case go ahead and say the stock symbol
that we are getting so I'm gonna pass
the symbol right here so this is going
to be emitter commas symbols where the
symbols of course is the list of symbols
that I'm going to grab from here and
bring it on so I'm going to say right
there as the symbols coming in so now
what I'll do here is I'll say symbols
dark stream well that's a good time to
pause and ask the question what's the
difference between stream in Java 8 and
observable in reactive programming
because we use the word stream in a very
loose overloaded manner and I've had
developers ask me how is the stream in
Java very different from the stream and
reactive programming well
conceptually they are streams of data
something that flows towards you that's
where the no similarity stops and the
stream in Java 8 is a very nice fancy
iterator that kind of stream our send
data towards you it is lazy absolutely
but it doesn't have data channel error
channel and complete a channel it only
has the data channel to send that data
to you and one thing you never play with
with streams in Java 8 exception
handling right errors are really hard to
work with in streams reactive
programming says our streams observables
has three channels the data channel a
compatibility narrow channel that's very
different it has a better way to handle
this if an exception is thrown in a
reactive observable it grabs that
exception and then sends it as a data
error through the error channel so
exceptions are perfectly normal and ok
to deal with in reactive programming one
of the reasons for that is in the in the
in the model of imperative style of
programming we deal with exceptions by
blowing up the stack and going back to
where we came from that doesn't make
sense in a stream because a stream is
like driving a car on a freeway if you
have a flat tire the most illogical
thing to do is to reverse back right
that's kind of exception handling right
you never do that right if a car has a
flat tire you exit safely or go to the
shoulder safely that's the whole idea
you always move forward you don't go
backwards so the active stream says
we're going to take this exception and
push it down as a
error so you can deal with the
downstream so that's a difference
between those two so now what am I going
to do I'm going to bend say over here a
map and then I'll say stock info and
then in this case info : : fetch what in
the world is the fetch method a fetch
method simply goes out to Yahoo Finance
and gets the stock price for us and
bundles it into a stock info and returns
it and you may say what does get tries
do it gets the price raw data and parses
it I've learned that showing the code
for parsing in public is not a good
manners so I will not show this to you
here but in the privacy at home or
office you can take a look at it make
sure the known children near you you'll
want them to be seen parsing code ok so
now that we have seen this one let's go
back and see how this is going to work
there is a control a again party command
e alright you didn't read configure it
what I was doing this what did you
alright
so let's try this again so what am I
going to do I'm going to go back to this
one here and say all right I have this
right here we did a mapping of the
symbol to the stock price for each and
I'm going to say emitter da on next this
is our data channel through which I'm
going to send the data then I'm going to
just take a break sleep for a second if
you will where the sleep of course is a
method I'm going to create right here so
public static let's say void sleep this
is going to take an milliseconds and
then I'm going to say a thread dot okay
thread dot sleep and then of course this
is going to be that many milliseconds
and of course it tells me got to handle
the exception but as hello programmers
we know exactly how to take care of it
that's wonderful right so that's taken
care so that's basically the idea we got
this being generated right here so now
that we are doing this let's go back and
try this again and run this so what does
this really do well we can see that it
starts emitting the data and and and our
friend Powell can confirm if that's the
right data and so that's basically where
it's pulling the data and displaying it
so we just saw how that is coming
through in this case so all right so we
saw how to bring the data
but what if that is a sequential code as
we know that is doing the job right here
okay but there are times when we want to
control the interaction as well imagine
you have a service that's going to be
sending data to you well I'm using a
part of me in Java there are several
implementations of this just to kind of
go back to the background again the
concept of reactive programming was
introduced by Eric Meyer as far as his
work in in Microsoft Research I'm good
friends with people who are using
Microsoft technology I program in
document as much as a program in Java as
much as in JavaScript I like to program
in all these languages and but what I've
learned things have noticed with people
programming in darknet is the dotnet
programmers are the sweetest people on
earth you give them a solution they'll
quietly go produce results and make
money out of it but the Java people and
Java scripts will look very different
you show them a solution they will run
out and create 50,000 frameworks around
it and and so this idea has been around
for a long time in the darknet world but
nobody really knew about it and then the
job of people in Java see people looked
at this and said this is awesome and
they stood created started creating so
many solutions one such solution is
rxjava apparently Netflix has some
problems with streaming they have to
deal with so they open source their
solution but there are so many other
solutions you heard a few today in other
talks and there are other solutions out
there as well but Rho is just one
solution which is really nice solution
it's what I'm using here and in this
case of course I'm using our Java but
the point though is imagine you are next
legs for example and somebody comes to
you and says I want to know a list of
all the movies available
well you're listing all the movies but
of course you're not going to give them
all the movie details all that once they
give them a bunch of movies for them to
look at and parsing it through it's like
okay I've seen that movie and I make
this very critical decision do I want to
watch this movie for the 20th time or do
we want to look at more movies in the
list when my good friend calls and says
would you like to go out and like thank
you for calling and I'm going to leave
but obviously you don't want Netflix to
be holding on to resources
when I'm gone that's not a good use of
resource that's not going to make it
scalable or you know other things so I
want to be able to tell Netflix or any
other service thank you but no thanks I
don't want any more data on the same
token suppose you are listening to a
device or a flight that's in in flight
and the flight lands or the device is
going to be shut down it would be nice
to be told that there's no more data
coming towards you so you can do the
cleanup so it's got to be a two-way
communication to do that so I not okay
let's create that let's go back here and
see what we could do I'm going to go
back to the get feed method and in here
I'm going to make a small change here
I'm going to start with a count just as
an example here I'm going to count is
equal to zero and I'm going to say a
wild count is less than let's say you
know five I want to do this work and
then of course I'm going to increment
the count right at the end of this but
when I come out of this I'm going to go
ahead and say well just for our purpose
for now let's see this emit dot on next
and I'm going to say new stock info blah
and then 0.0 just so that we can
actually see this you know come out at
the moment so in this case of course if
I go back here and run this little code
what you're going to notice at this
point is that you can see that it's
running through that many times but at
the end it's going to say the BLA and
0.0 because that's the data that comes
with various channels there we go but
instead what I'll do here is I'll go to
the end of this and say right at this
point right before this I'll say emitter
dot on complete and I'm saying that's it
I don't have any more data for you
remember what we talked about earlier
the minute complete channel sends a
signal the data channel slows us up
which means that line 30 should not send
anything to the observer well let's say
see if that's actually true so if I go
back to the sample and run this you will
notice that in this case it produces the
result as we saw before but when it's
completed you would not see the block
come out at this point because the data
channel was terminated but on the same
token what I can do here
as I could now say well let's ignore the
error for now that's not worried about
it so I'm going to simply say system dot
out and then print land for now and then
I'm going to then say over here the
complete channel I'll output done and
that way we can take a look at the
output signal so when the observable
sends the complete signal we can get the
data here on the other side what they're
done so this becomes the data channel
this becomes the error channel I
mentioned earlier and that becomes you a
complete channel and you got these three
channels coming from the observable but
what's really cool about this is you can
communicate from the observable down to
the observer that you don't have any
more data on the same token you can also
communicate from the observer to the
observable that you don't want any more
data by unsubscribing your subscription
and for that you would call a method
from here and say unsubscribe or in this
case you know dispose and then it would
dispose the resource and and say I'm not
going to send you any more data but
what's one of the really cool things
about this kind of approaches you could
also deal with errors very nicely so how
does error handling work in this context
but before I talk about ever handling I
want to emphasize one thing which is
absolutely cool and that is right in the
middle of this you know that feed is an
observable you know that you have an
observer at your hand over here but
between the observable on one end and
the observer on the other end you can
put intermediaries these in familiars
would become observers to the upstream
observable and become observable to
downstream observers so I could be the
observer of what's coming up here and I
could be the observable of what's down
here and this can be extremely effective
so what I can do is I can start
filtering data for example if you notice
the prices of Google and Amazon and
Intel's right now but what I can do here
is I can go to this code and say dot
filter and then I could say given a
stock info and then I can say if the
stock you
for dart you know value is greater than
500 then send it down not otherwise so
if I were to go back and run this code
you would notice that you're getting
only the price of Google and Amazon you
no longer are getting the price of Intel
because you've filtered out this is like
what we heard this morning they were
saying we could we get a lot of data but
we don't care about most of the data
right we only care about a small part of
the data you could filter out and say
this is the this is the area where we
are interested don't keep all these
noise avoided only send me what's
important right it's like me I would sit
in a crowded place I'll be coding I
would not hear anything at all until
they mentioned the words food I'm like
what the so it's a it's a beautiful
filter in the years right so you can
just filter things out and you can work
with this really nicely so that is one
of the nice things but you can also go a
step further and you can say they'll do
a mat for me and I can say stock info
mule stock info and then I can say stock
info dot ticker come a stock info dot
value times 0.9 I can give myself a
little nice discount on the price for
purchasing right we can do some
internals trading if you want to so we
could see that it can be reduction in
price as well that you can get so you
can do all these kinds of nice
transformations but that still begs the
question what do we do if things were to
go wrong well that's my fear Allah what
do you do if things goes wrong how do
you handle that
well in my case my computer went wrong
and I sought help from Holly that was
really good but what about a stream what
do we do about it well there are two
things you can do about it the first is
if something were to go wrong and it
might we want to be able to handle that
so if I go back to this fetch method
that we have here notice that in the
fetch add some absolute random time I'm
going to blow up so I'm going to say
oops ran into trouble right I mean
message like this are wonderful because
it gives nobody any clue what just
happened right so that's kind of in line
with what we normally do so it just
blows up saying oh I'm going into
trouble something is wrong but what am I
going to do when something were to go
wrong well I'm going to go to this
our server I'm not doing anything here
as you can see I don't touch it at all
I'm not doing any work
I could definitely it's a good thing to
deal with it but I'm not doing anything
with it but if I go back to the stock of
a sample that I was working with notice
that I have an error channel right here
but just to make it absolutely clear I'm
going to say error and then I'll output
and say you know error in all uppercase
and then I'll just print the error so or
I could do other things of course right
to handle the error do whatever it is
play a sad music tell the user whatever
I have to do but now when I go back and
run this code you can notice in this
case it starts up visit so it's going to
start up and start running through this
and then of course you can see that it
ran into error right away well it runs
into error when you don't want it to
just stay a little longer okay it gave
us one price on sale so when it fails
though notice that error up here what
does that show us it shows us that it
took the exception but quietly sent the
exception as ever to the error channel
this is something very important to keep
in mind because when you typically work
with a multi-threaded application when
you have multiple threads running when
some tread randomly fails what happens
good luck right it's extremely hard to
deal with it and imagine you have a
thousand threads running and all of a
sudden 179 threads failed what do you do
in that situation that you want to get a
glimpse of how that feels
imagine you're running a day care center
you have a lot of children and all of
them start crying exactly the same time
how would you feel that's how it feels
when you code these applications right
it's completely out of control
this says no another throw exceptions at
you it is very sizzled
right it's not throwing things at you
it's handing over the error and says
here you go here's the error and you do
to the data channel and that's what
you're getting here of course I could
have done a try and catch in the code
and I would have said on ever and I
would have sent it let's take a look at
how I could do that so I could go back
here and I could simply do a couple of
things I can say well at some point if I
run into an error so for instance if
just as an example here if
let's say count is greater than let's
say - I could then say amateur dark on
error and then I could send a probable
new runtime exception so this is a
trouble I'm sending notice I'm not
throwing a throwable I'm just handing
over a throwable to it and say please go
handle this and and as a result what's
going to happen here is it is going to
get that exception on this side if and
when things were to go wrong we're going
to get that exception here to deal with
so that is one thing that you can do
very nicely here in terms of how you
want to deal with it and right there's
the oops coming through oh wait a minute
so that's where the hoops is going to
come through and we get the error - the
error channel well right there that came
through and you better handle this on
this side too so so that is basically
the error I shouldn't have sent it in a
loop again but anyways that's a separate
issue to deal with okay so but one other
problem to think about when what happens
when there is an error well the minute
that is an error you're no longer going
to get the data because the data channel
closes up which is a good thing in a lot
of situations but not all the time there
are times when when a service fails you
may have to switch over to another
service for example let's say I'm
leaving in the morning
and the map doesn't work I want to call
my boss and say I'm not coming to work
because a map doesn't work that's a good
excuse to give and they would say one
Husum of the map or just ask for
directions well the point is you want to
switch over well one of the things you
can do here is when the such need is
there you can say on error resume next
and you can provide a backup service to
switch over but the beauty is notice
where we insert this right in the middle
so I become the intermediary again as
the various flowing through I'll keep
sending it but if the source fails I
will take care of the failure and start
generating the data new and this becomes
very effective way to do it couple of
other small point
details I want to mention really quickly
this is not specific to our X Java I've
been using observable here but RS Java
also has what are called slow when do
you use one or the other
but in other solutions you don't have
the distinct
but the key idea here is what's called a
back pressure the I represent back
pressure is observables don't deal with
back pressure flow do this is a game
specific to rxjava but back pressure is
a generally important concept to think
about if the source is sending me data
at a rate faster than I can handle what
am I going to do this is where the back
pressure comes in I can tell it why
don't you just buffer those and then I
will pick it up and run with it
buffering makes sense when you have
times of you know slowness and regular
speed and you have an ability to catch
up with it
if you're always going to be slow it
doesn't make sense to use back pressure
because it's gonna fill up there are
also applications where you may want to
drop in the case when things are
beginning to slow down only because you
don't care about the all the data you
care about the latest data but the point
really is it really comes down to the
nature of your application what do you
want to buffer when you have a if you
want to buffer the data or you want to
drop it there are also solutions for
throttling the data debouncing the data
if the data is coming at a very fast
actuation rate what do you do with it
imagine for example you want to deal
with a user's typing
so when I start typing what happens my
wife says that I am one of the best
people she knows who can type extremely
well the back spaces so I keep your
editing and editing right so you type
something in you hit the backspace you
will repeat it well you don't want to be
working at that speed because it's a lot
of noise so you could say you know what
throttle let this guy stabilize what
he's typing and then when you have fixed
all these errors I'll take the data and
work with it that can be very powerful -
and you can use that as well there's a
lot of other things built on top of this
to make this really useful but to
summarize what we talked about the whole
idea behind this is think of radiation
from crud we're going to still do crud
applications but not everything we do
have to be a crud application there are
times when quite a number of times when
we want to be able to deal with data
where the data is a stream of data that
flows towards says we want to be the
that intermediary to take actions with
the data is interesting and then
and from the data and pass it down for
something else to potentially handle
that and so this is becoming very
popular there are two reasons why we
want to really take the time to learn it
one reason we want to learn it is maybe
we want to build a reactive application
that's a good goal but I'm little bit
fearful of those goal also because I'm
not a big fan of just using a technology
because it's out there my business needs
to really have a good use for it so
until that point of course you're
learning but you may not have a good
reason to use it until you see that use
well if I don't have an immediate use
for it in my application should I learn
this and the answer is yes and the
reason is a lot of libraries that we use
are beginning to go reactive themselves
so even though you may not build a
reactive application immediately today
the application libraries you are using
are going to give you reactive solutions
for example if you're programming an
angular 2 by default the HTTP module is
returning an observable to you you can
throw a promise on it and use it to but
if you are familiar with observables it
puts you at a better spot because hey I
know what this stuff is I can make a
conscious informed decision whether I
want to continue using observable in
this API or I want to convert it to
promise and use it but that would be a
clear good decision you make knowing it
that's another reason for you to really
look at I hope that was useful thank you
for your time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>