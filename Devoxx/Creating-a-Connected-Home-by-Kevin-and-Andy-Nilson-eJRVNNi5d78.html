<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Creating a Connected Home by Kevin and Andy Nilson | Coder Coacher - Coaching Coders</title><meta content="Creating a Connected Home by Kevin and Andy Nilson - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Devoxx/">Devoxx</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Creating a Connected Home by Kevin and Andy Nilson</b></h2><h5 class="post__date">2017-04-19</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/eJRVNNi5d78" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">get started and we will kind of see what
happens with the network here so you may
have to just trust us in some of the
demos but other ones are going to work
out great so cool so I am Kevin Nelson
and I work at Google on the Google home
team and this is my son Andy and you
want to say hi to everybody hi my name
is Annie nose and I'm 12 years old and I
go to Boris charter school in Los Altos
cool so what Andy and I are going to do
is we're going to talk about home
automation and controlling devices in
your home and we're going to take you
sort of on this journey from geek which
is the geekiest stuff you can do
soldering you know wiring all the things
you can do with the Raspberry Pi and
doing all you know working with sensors
all the way on this journey from geek to
more turnkey things to this is a picture
of Andy's great-grandmother and so
basically you know things you can buy at
the store take them home set him up and
enjoy him and so really you know I guess
some people kind of ask you know why you
know why is it why isn't it grandfather
because my grandfather could never do
this but my grandmother she she has the
newest iPhone and everything she's
really into it and so this is my
grandmother and Annie's
great-grandmother so so today on the
talk most of the stuff that we're going
to do that's you know all the tech side
is a Raspberry Pi and basically we're
using raspberry pi because it's it's a
great little $35 device and really what
what it's its purposes is being it's a
linux computer it has hdmi out has USB n
it's really great for these type of
things so it's a prototyping board for
doing things and Andy can you tell folks
you know if they didn't want to use a
Raspberry Pi what else could they use
they could also use an Arduino yeah yeah
so Arduino and so the first thing that
to talk about is you know the
differences between PI and Arduino where
the pie is really good at like low power
things maybe you're using a battery
where are certainly the Arduino is and
the Raspberry Pi that we're going to use
here
is better you know it's a it's higher
power more powerful it's basically linux
and so it allows you to write in several
languages you want tell folks what are
we going to do today what language
mostly well we're going to mostly use
Python yeah so you know why we're using
Python maybe I Miguel answer so the
reason we're using python is because it
comes pre-installed and pre-configured
and so as I fry raspberry PI's I can
just buy a new one and pull it out and
not have to install and set up things
otherwise we would have done java or
some other thing but you want to lower
that barrier to entry every time you
make one of these deadly mistakes that
kills another pie so cool so the first
thing we're going to do is a little demo
and we're going to go through lots and
lots of demos as we get further and
further along and as we do these demos
and he's going to be live wiring over
there and you guys can watch and learn
and hopefully get some some inspiration
from him and so the first sample is
really really easy it's really going out
there and taken an LED you know a
breadboard and wiring it up and so what
you see here in the picture we got a
jumper cable that's the white cable
that's going to move in power around
we've got an LED it has two legs and so
Andy can you tell folks what the
differences between the two legs so the
longer leg is a positive and the shorter
than I guess leggins and negative yeah
so if you put them backwards it doesn't
work so remember the longer leg is the
positive and then we've got a resistor
in there and do you want to tell folks
what the resistors for well we use a
resistor so that the LED doesn't break
yeah yeah so basically it limits the
power pulls that down so that you don't
end up you know popping the LED there so
it'll it'll stop working so let's jump
over to Andy we'll see if my if I have
the it has a wrong room camera hang on
the game center open this guy bear with
us there it is alright so there is our
breadboard and Andy why don't you go
ahead and wire that up
the demos are going to work awesome so
what Andy did there is basically when
you can get that to focus a little
better Andy so what he's done there is
you know he's ran the wire so what
you'll see is this outside row out here
that is positive and negative or
positive and ground and so he's running
the power from the positive it jumps
over here to the resistor runs through
the resistor into the LED and then into
the ground so very very simple simple
straightforward way to get you know your
Raspberry Pi sort of sort of connected
make that a little bigger for folks we
can see it and that's the first step so
what are we going to do next now we want
to install a button so some sort of
sensor right so where you can control
things will continue down this path
adding more and more but basically the
idea is when the button is impressed the
lights off I'm going to threaten is
pressed we're going to go ahead and turn
on that led so let's hop over to Andy
and then Andy once you show us so there
he goes he's pulling out that jumper
cable so now the lights off and it isn't
connected and then basically the way
that the button works is the button is
just like a single jumper cable the
power passes through but basically when
the button isn't pressed the power
doesn't go through it when the button is
pressed you know what's the power go
through and so there is he's connected
the positives on the black side passing
through don't the red and black colors
are kind of random there doesn't mean
positive and negative and he presses the
button and it'll LED comes on so pretty
straightforward simple I think everybody
makes sense to everybody so show hands
how many of you guys have done any sort
of raspberry pi stuff anybody yeah just
about everybody awesome how about home
automation the folks have home
automation cool so hopefully when you
guys leave you're all going to go home
and not only do some like little cheese
kind of stuff but hopefully you'll get
your pie out and plug it into your house
cool so what are we doing next so we've
got the buttons now we're going to work
with motion so p ir sensors
and so the PIR sensor is really cool
because you know these are only like
about 5 bucks we plug them in and really
powerful could see motion all the way
out probably just about to the back of
the room in this scenario and Andy there
are three wires on the back of it so I'm
going to flip over so you can show folks
on the camera and why don't you tell
folks with those what the three pins are
there ones ground the others power and
then the others output yeah and so
basically you can power and once you go
ahead and wire up the circuit here he's
pulling out the button and he's going to
put that in and so basically with those
three pins one of them is to provide the
power in you know the other is the
ground and that's what controls and
gives it power and the other is
basically like a signal telling it when
there's motion and when there isn't and
so he's plug in each of those devices
you know each of those looks like that's
the the signal line there that's going
to going to be used to tell the light
when to turn on and now he's going to
put the the positive and negative power
supply there and so cool let's see if it
works right and so basically what we
have you can see the the PIR sensor here
so so this guy is red when there's
motion and so now there's no motion so
go ahead and drive motion yep and then
what will happen is it stays for a few
seconds so basically all trigger motion
and then one two three and then it goes
off and so that's the way these work so
there's motion and then I'll stop and
then it turns off and so this is really
great you know it lets you know when
there's motion when there isn't but the
problem is think about if you had one of
these you know if you made one for the
bathroom here that turn the lights on
and then second someone goes into the
stall and closes the door the lights
turn off on you so that's not what you
want you want to be able to keep that
you know knowing that that action
happened when the motion occurred and
then keep things going and so that's
what we're going to do next I'm going to
do next we'll jump over here and talk
about how can we keep this this light on
for 10 seconds after motion and so Andy
what kind of code is this again python
python there you go
so I'll walk through this code it's
really simple I think any of you can
definitely jump in there and do it Andy
actually wrote most of this so the first
thing is to set the mode to BCM I'll
talk about that in a minute we turn off
some of the warning so we'd have to deal
with that and then we've defined which
port support 22 is where we're listening
for the PIR so the PIR is a motion
sensor then and that's sort of the raw
way of working with gpio ports the next
line that led goes into GPIO port 24 so
we're using a library called gpio 0 so
it makes things a little bit more
legible so the LED light we've actually
got an LED class there that that that
we're using to do that so now what we've
got is we've got this while loop it's
almost like a main loop like he's using
graphics that goes and checks and
determines if we're going to turn the
light on and off and then it has asleep
at the bottom so we just put the sleep
in so that you know it is a linux
computer and the computer needs to do
other things while your programs running
and that gives it time to do that so
let's look inside the while loop what
are we doing we're checking if there is
motion then I'm going to keep track of
the last time motion happened and then
if the LED is not lit I'm going to go
ahead and turn it on so that's the first
piece the next part is the more complex
part where we need to determine how long
has it been since there was motion to
determine if we need to turn it off or
not and then basically you're you're
adding these two numbers apart because
we have to remember if we want it to be
lit for 10 seconds the motion sensor
itself keeps it lit for five seconds but
then we need to add five more and so
that's the code for doing that and so
I'm going to jump over to Andy so what
Andy had before was it directly wired
from the PIR sensor now he's going to
wire it into these gpio ports so that it
can go into this Python code and you
know the port 22 and the port 24 that we
do we see here in the top so Andy why
don't you hop in there and flip that out
so the only wire that he's going to that
was the the signal wire and he's going
to pass it into whatever i think was
port 22 and then jumped him to 24 and
come back to the LED so the reason I
don't do this is because it's not funny
when I make a mistake this is funny but
their sympathy when Andy makes a mistake
but I think he's got it right and it's a
little it's a little are we good now
Andy oh we're getting there this is our
light on did you go oops PIR comes in 22
and the LED comes off for 24 okay is it
lighten up no you may have to trust us
is it not working okay we may have fried
this Raspberry Pi in one of our travels
so it happens a lot so anyway the idea
here I'll go over and show you how it's
wired up we've done this in dev con and
done this at gini-ji and it worked well
there so we possibly have bad hardware
but anyway so oh no that's probably a
basically you can see the only thing
that changed is he's moved the white
cable and move the blue cable so where
it goes into the pins and out okay so
let's jump over to the next piece cool
so you'll remember from the code the
first line there talked about the the
GPIO mode so there's two ways of working
with raspberry pi the first is a very
simple board type which is the 1 2 3 4 5
kind of in order and basically you know
I think they kind of do that for like 4
younger children kind of teaching but
any of the samples you'll find on github
any of the code anywhere that you you
you do is doing the top one the BCM and
that's where it's sort of random pins in
random places and that just lays out
well to their wiring design so it's easy
to to pull those together but it's
actually convenient because you kind of
can kind of keep your wires apart from
each other when you have big hands like
me big belly big hands small fee small
ears whatever so the next pro tip I have
is the T cobbler and so you'll notice
you know when we're working over here we
we use this t cobbler with a ribbon
cable and so basically you know what it
is is all the pins on the board so if
you look on the on the board over here
you have all these little pins and
they're kind of difficult to work with
because you have to remember which one
is which and so in one of the pieces i
bought about like an LED array thing and
it basically gave me this little piece
of paper to put over the top so we use
that for a while but actually like
better you know working with this you
know working with the t cobbler on the
left we're basically just plug in a
ribbon cable and you can just switch out
different pies once you break them and
emit you know it works really really
well they're labeled well and then we're
over on time otherwise I would we got a
backup for everything we can just plug
them in so I probably could switch out
the pie for the other demos we'd be good
to go cool another kind of pro tip I've
got a little travel projector because
you have all this like crap on your
table in your work area and occasionally
you need to know like the IP address so
you can push code or whatever it is and
so I started just use a little block of
wood that I do soldering on and that's
my my debian linux boot screen there for
the pie so i found that to be nice to
have just a little bit travel router
instead of a big monitor and things like
that made things easier so kind of in
the same line one of the big challenges
i found when working with pi was like
having to plug monitoring
bored into it and trying to work on it
and then like oh now I have to install
get on my pie and I wanted to eliminate
it where I could just take a
store-bought raspberry pi and start
doing my work and so all I needed to do
is no its IP address which you can kind
of find from your router you can find
however it is and so here I've got some
some scripts I did with their expect
script where basically i can i can spin
you know commands the one on the left is
SFTP where l ftp into my device and in
you know do a put to put code there and
so basically you can see i spawn off an
ftp and then i use expect to listen for
ass word why do we listen for ass word
it's funny in any laughs but because the
pee sometimes its capital sometimes
lower case depends where it is so all
the examples did it this way so it
seemed reasonable and then the user name
is is raspberry don't forget to pee and
you know you can kind of pass through
the pie is username and raspberries the
password so we listen for the command
prompt make a directory home automation
and we go ahead and put our code there
and so basically by by doing this every
time I change code I run this script and
then the other script actually runs it
so we can run the code on the Pat
Raspberry Pi so what this allowed me to
do is work on my macbook work on andy's
macbook to push the code to github from
my mac and working in that but then use
the Raspberry Pi which was made things a
lot easier and then the next thing I did
was basically using crontab so crontab
madness e which is like edit and then i
could go in and define basically what
happens on reboot so when it reboots you
know I could have done the like star
star star type stuff but instead there's
a simple at reboot then basically I can
tell it what script to run on startup so
I run the Python don't forget the
ampersand at the end so to run in the
background otherwise your pie will never
finish booting right have done that
before so the next problem that we had
is we were working with things is we
wanted to figure out how to get more
power and so the raspberry pi can either
provide 3.3 volts or it can provide 5
volts it can't provide more
a lot of the cool LED strips that we use
like the one shown here is you know it
needs 12 volt power and so how do you do
that so the videos I read and the things
that you know i watch videos and read
about it and basically the suggestion
was the quad level shifter and my
reaction was about like this I have a
stack of raspberry PI's in the garbage
can right now as a result of sending too
much sending 12 volts back in through my
raspberry pi because I am a computer
science major I am NOT an electrical
engineer and couldn't quite get it I
feel I had resistors how they should be
but definitely couldn't figure this out
and that's okay like so how many of you
have fried the Raspberry Pi yeah yeah a
couple Bob Bob knows how to fry pie
that's cool yeah so we want another
approach that failed what else can we
learn and you know definitely Andy and I
are not experts what we sure had a lot
of fun learning along the way so the
next thing that we tried is a relay and
this works out great and so what the
relay is is you can see on the bottom
here basically what the relay does is
gives you you know DC or raspberry pi 3
3.3 volt or 5 volts or control and then
you can do the the you know AC power so
maybe before we jump into that should we
show them the yeah yeah so let's jump
over to Andy Before we jump in to that
piece and we'll show you the difference
so you want to power that with that's
good so this is what it looks like when
you power it with the Raspberry Pi so
you can see and maybe you can hold that
up the folks can see and then show them
like plugged in with a 12 volt so
instead of 5 volt we're going to plug it
in with 12 volt and you can see it like
barely can be seen by the camera and
it's really bright and so when you're
doing things with you know Andy's got
cool ground effects Enders bed we did
stuff for halloween that we're going to
show in a little bit you really want to
get that 12 volt so how do we do it you
know we did it with a relay switch
and so again this is a relay switch
there across the bottom the DC power
when the power goes through it will pass
sort of your your you know your AC power
through there right so we've got the one
typical AC or 120 volt AC going through
through there and so the easiest way to
do that is to get a cheap extension cord
and cut one of the wires and then pull
it out and that's what you see up there
and so why don't we jump over to Andy
and he'll show you kind of what what we
built so I was really nervous because I
did shock myself with the home power
twice I did throw out the the fuse at
least twice more than the times I
shocked myself and so we built the blue
box there and it has the outlet that has
you know on the top is controlled by
this switch so why don't we show folks
that so go ahead and flip the power cool
get a cool Edison bulb there that comes
on when you turn that off and then in
the middle let's go ahead and show them
this bottom one is controlled by the
relay so that's the same relay that I
showed but encased in the box and you
can see how that light comes on and it
controls the bottom outlet so go ahead
and move the light bulb down and then
you'll see when he presses the button
the light turns on so he's using his
Raspberry Pi to control the light switch
and you can just see the indicator there
with the little green light in the
middle so that's pretty cool those relay
switches you can get them at frys they
are massively expensive they cost as
much as the pie I think there were 40
bucks but luckily Google helped things
along and and that works out as well so
they also contributes it to the stack
size so the field we're funding open
source in some way all right so all
right so
some of you probably don't want to be an
electrician you don't want to do a bunch
of wiring wire nuts you know splicing
wires together and you're possibly
worried about having one of these relays
under your bed at night while you sleep
and so we found this thing called the
IOT relay it's actually made just up the
road in santa clara and it's basically
exactly what i have kind of built but in
this little self-contained you know
power strip and its really awesome we
love it we got several of them that we
were using on different projects and i
feel really comfortable with andy having
one of those under his bed rather than
the thing that i wired together so when
i first bought it you see it has four
outlets so i'm super excited i was like
awesome i can control four switches at
once well it's not really the case you
can you have one control input you see
on the bottom the two wires coming out
that controls all four of them at once
but you do have to settings you have the
always-on setting and they always like
always off setting and so we'll jump
over and we can show you that really
quick anyone show folks so it looks like
now he's in the default off with his the
light bulb isn't on presses button light
goes on right and then we'll switch it
over to the other side so on the other
side when the second he plugs it in the
light comes on and then when you press
the button the light will turn off so
different applications yep light goes
off so it depends on what your
application is and how you want to use
it it was very convenient to have both
of those and so we basically a lot of
our projects will plug in multiple LED
strips to you know I've never used
concurrently the off and the on at the
same time I'm sure there's some project
that we could come up with you know like
an engineering based design thing we
could try to make a problem it doesn't
exist but we haven't done that yet I'm
sure we will all right so jumping back
around so here's what Andy and I built
for Halloween you can kind of see
hopefully my t-mobile will work for us
today
come on YouTube you can do it not here
we are cool so there's our pumpkin we
put LEDs inside of it we have random
generators that that flip between all
the colors and it's for a random color
for a random amount of time so you get a
pretty cool kind of effect there and
then the next one is pretty cool so what
we did here is whoops sorry to make that
bigger that bigger click that awesome so
what we did is you know when kids walk
up to the house it looks dark and then
basically they see the pumpkin I waved
my hand and then we flash the light back
and forth you know it toggles between
the door and the sides and then when the
kids go away it will stop so we haven't
had motion for a little bit it keeps
going back and forth we live on a
cul-de-sac so there's lots of kids but
they kind of peek down the cul-de-sac
and then as folks kind of walk through
now we'll do motion again and then
things kick off again so it's kind of
fun fun project Andy and I did it the
motion sensor a lot of people ask is
over on the right in the bush and I put
it kind of in the bush where you can't
reach it otherwise because it has that
little red light and the kids tend to
tend to want to grab it so you have to
kid proof your projects very important
so this is what it looks like on the
inside you can see the two IOT relays
that's that's controlling the the ones
in the porch and then the pie back in
the corner over here on the top right
that's the pie that controls the pumpkin
and doing all the lights they're so
pretty fun pretty fundamental project so
the next thing you know it was like what
are we going to do next I've been told I
leave the lights on so my wife tells me
that our closet lights are on every day
when I go to work I try not to but I am
I must be thinking about work or
thinking about my family who knows but
probably work and so I forget to turn
those those closet lights off all the
time all right so
you know here we are we're in a cloud
talk or an IOT talk i t's kind of about
the clouds but we haven't really talked
about the clouds at all and so let's do
that now this is a fun picture looks
like Armageddon some spaceship coming
into my neighborhood so Annie was
playing at the park can I get a fun fun
picture there so you know I work at
Google I actually have nothing to do
with firebase but I actually thought
it's a pretty cool tool for solving this
problem so it's somewhat of a real-time
database that will do push so it'll hold
data in the cloud and then push to you
so I thought it was a great tool my
friend suggested it and so we jumped
over and and we're going to use firebase
to control a bunch of lights and so this
is the firebase console and let's see
let me jump over to what we have here
with Andy so Andy has a red green and a
blue light and then basically we have
the firebase console that will let us
oops there it is so we have a web view
here and then over here you have Android
and it's so incredibly small we can't
see it but basically you can control all
three and if our network is not happy
you just plug in okay we'll wait for it
to boot up in all three lights oh and
he's playing with them over there on his
phone so show folks your phone so that's
the same as the simulator there and
works we can't see it I don't know what
happened there any ever sorry oh there
go okay so move that any so we can see
so it got on the network the lights are
on lose your phone please let's see the
lights yeah so you guys can see on my
screen I've got a little web app I'll
turn off the the rad and you can see the
rad goes let's get this one in screen
and we need to get this one inch screen
we have to oh that one's pretty small
you can't really see it but so will
toggle red go blue we will turn them all
off and then you'll see all the LEDs
come off and so we're basically Andy one
who can turn them all on what's your
phone
oh yeah Andy turned them all on with his
phone so he's using his phone i'm using
the simulator i'm using the website i
didn't write the iOS app yet but that's
you know another 10 minute project that
he and i will probably do over the
spring break together so he can learn a
little swift fine but that's basically
the the idea where we've pulled
everything together and we're using
firebase to control our lights we can
plug this into the AC power and do that
as well so now let's jump over here so
this is kind of the circuit what it
looks like in a better picture we have
the LEDs we have resistors for each one
and then we have this one LED which is
kind of cool that takes all colors and
so it's a single LED that has like an
RGB pen and then you can put power into
each of those to control them I'm not
sure if you can provide like varying
amounts of power to each one to get like
all the color the full color spectrum
but for sure you can control RGB in a
single light it's it's a little
expensive but not too not too bad cool
so what's the code look like to view the
firebase so this is the HTML side what
do we do so basically the first thing we
want to do is is is read those values
from the database this is where i'm
reading from the cloud to see how to
update my dom and then basically i read
the read so I take that snap shot read
its value of the red the green in the
blue and then I'll update the Dom with
the value so you check both checks or
not and then how do I save a color so
actually saving the color where when I
make changes on the Dom how do I push it
forward basically I check the checked of
that state and then in the same firebase
database reference to the red I set the
new value and so if you remember from
the the other the other let's see if I
can this thing over here that red green
and blue on this LED color object that
is the the object that work that we're
working with their cool
so now let's look at the Android code
same idea we get a database reference
and when a child changes right this is
where we're reading from the cloud when
a child changes so one of the firebase
values changed then I go through and set
the the value from the you know from the
snapshot there so I read the snap dot
get value that you see over there oops
where's the no well I can't turn this
thing on that's fine and then you know
basically here's how we save it's very
very similar kind of code we checked the
the button state and then get a
reference to the database and then set
the value of the child to do that so we
are all right and finally the Python how
do we do in the Raspberry Pi so the
raspberry pi is a little bit unique
where there are some libraries there's
something called fire pie and there's
another one I forget the name of it but
I didn't want to do those because then
that means i would have to like when I
fry 2 pi I would have to go and like
download something from github and do a
bunch of installation and like
configuration and scripts and I didn't
really want to be in that world and so
what I'm actually doing here is is
polling a URL so i have this you know
i'm polling and just continuing polling
and so after a while firebase starts to
throttle me so we may see that again
Andy unplugged it but after a while it
starts to throttle me and you have about
a 10 second delay on your bulbs which is
fine or if I was going to build
something that we were using at home
that was controlled via the phone via
firebase I would just install the fire
pie but it's really easy so here you
know regular Python code you go up to
that URL this dot Jason and what does it
look like I think I have it up here so
that's what what it returns the dot
Jason so the blue is false to green and
then basically what you can do things
like lips ah Rosie sorry it's so if i
type green dot Jason then basically i
would get just the value of the green so
it's kind of cool that's that's what
we're using to do the code here
that Jason is kind of like give me the
full object you can do nested objects
and things like that but I didn't need
it here and then reading those values
decode out the adjacent with the JSON
decoder and go from there cool so we
shows lots of things with raspberry pi
but what about you know Andy's
great-grandmother what are some things
for her the first thing I'll talk about
is we mo I've got a little Wemo switch
here and these you just plug them in and
then you can control them with your
phone and so Andy's got one here when
you go ahead and plugged into our fan so
go ahead and turn on our fan so I don't
know if anyone can hear it you know you
need to click the webcam but anyway it's
on and then he can flip it and it'll
turn off and then he turns it off and so
you've got an app that looks just like
this it's a pretty nice little app
pretty fun and then the next thing I'll
show is the Philips hue so we've got the
Philips q light over there you can turn
it on and off you can change all the
colors and and control that and so
anywhere you go ahead and yep so you
just turn the light on most things
changing the color now he's made it
green and you can turn it off so
everything works really well there on
the Phillips you so the next thing I'll
talk about is that if this then that and
so if this in that is any of you guys
used lift yeah most of you guys have
used it so if this which is trigger then
do that which is an action and lots of
integrations with you know everything
from Twitter and email and all kinds of
sensors and will it rain tomorrow all
those things really awesome and so I've
got one if you mentioned me so tell me
out then some light will blink in Andy's
room so that's kind of fun did it last
night gonna do it last night there you
go thank you for the retweet at the
party I was at the speaker party and he
was at home hanging out with Chad so the
next thing I want to talk about is
google home so another really cool this
next sort of revolution is you know
you've got the Alexa from amazon you've
got the google home and be able to
control things in your home or ask
questions in your home so and do you
want to go ahead and play some music
with our
you go home see that time on the Google
home teams it's kind of fun ok Google
Play the beetle bye-bye I know what is
really fun but there you go that's going
to stop there cool and then you can do
other ask it questions and Annie
occasionally gets a little help with his
homework which i think is awesome the
teachers think is horrible I don't know
but it seems like the right way to go so
Google home is awesome so now let's look
at this you know this idea of firebase
let's look at the google home let's look
at the maker channel from if and how do
we sort of bring it all together and so
that's what we're going to show now so
why don't we jump over to Andy and then
anyone you go ahead and do a quick then
turn on the lights ok Google make red
LED on making red lid on oh it did it in
firebase console you see that the
flipping and then there it comes in the
Raspberry Pi and so that's that
throttling delay and maybe I should go
through some of the some of the code how
do we made that made that possible and
then we'll go back in and show some more
fun demos with that and so the way that
we made this possible was with the maker
channel and so we use the maker channel
at ifft in Crater recipe and i think i'm
going to hand it off to Andy Andy why
don't you go ahead and tell folks a
little bit about this recipe and how it
works so the if this part is a trigger
so it's what you want it to respond to
it could be anything like if you get
mentioned on twitter if your battery
drops to a certain amount if it's going
to rain but in this case we use google
assistant who you say okay google and
then we have it we want to say make red
LED dollar sign so then the dollar sign
is a variable that can go in between the
trigger and the action so then in this
case you want to say make a make red LED
and then whatever you say is stored
so then for the action it's what you
want to happen it could be anything like
send you a text like the light in your
son's room or other stuff but in this
case we use maker channel so we call URL
and then you see in the end it says text
field so that's actually the same thing
as a dollar sign so whatever you say
will be put in there yeah and so so I
don't I pretty sure I land something on
App Engine yeah apps pot so this is on
App Engine there's some Java code that
calls out to firebase updates my
firebase database and then basically
that's what turns on our lights so it's
pretty cool you know pulling it all
together kind of circling back to you
know starting with what we did with a
raspberry pi then integrating voice and
then getting the voice to go back and
control a raspberry pi so so this is
what our kitchen table look like for at
least two months so many apologies and
thanks to my wife for her patients we
had many meals on the couch in the
living room and you know Andy and joy I
think Andy's favorite part was a
soldering and then you can see over in
the in the far right a we're growing
bean sprouts from another school project
we've got a paper towel with bean
sprouts and lots of fun soldering iron
and then you can see a PI there that's
probably damaged by something and then
one of the cool projects that we did
just a few weeks ago really just sort of
wrapped it up is Andy started doing a
bunch of home automation in his room and
so basically he wanted this sort of
retro look and once we tell people what
kind of functions okay so all the way on
the left the top row on the left that
one's whether to turn the LED strip
underneath my bed on and then the one
underneath that and then underneath that
is if it's up it'll flash but it only
works if the top ones on it'll flash
what if it's down it'll just stay solid
solid so then the one on the right all
the way far right is on the top is the
monitors live to LED strips
on the top or on the bottom commuter
butter so they can so if you turn it on
it it stays on but then if the bottom
was on they can just go off on off on
and then the middle on a top is our
alarm like a security alarm so then what
I turn it on this the motion sensor gets
motion it'll flash in between nine
monitor in my bed so then that's that
yes we have all these and the buttons on
top that we didn't do the top piece yet
so that's going to be like a wake-up
alarm and kind of funny comment I said
but Andy don't we want to have a
different setting on the weekend so we
can sleep in and Andy's comment was
because like I'm like we don't want to
wake up at seven on Saturday and Andy
said the best part about the weekend is
that we can get up early so I thought
that was that's my life you know and the
kids coming yeah because you get up
early and play a video game yes so there
you go I'm trying to sleep in and three
boys anyway so this is what it looks
like on the inside lots and lots of
wires over to the breadboard you can see
the relay switch this is us setting it
up on the kitchen table this is me
trying to squeeze all the wires into the
case we bought the cool looking case
actually at frys so it's pretty cheap 16
bucks able to buy that here's Andy
putting the ground effects under his bed
frame with the little guy in the corner
playing with his legos and you know
putting those strips underneath all go
through and with that many thanks
everybody for coming cool so one quick
note I am hiring for folks to do work
with home automation and all the
partners at Google and so definitely if
you're interested in in working at
Google or whatever feel free to come and
say hi and i can tell you more about
that and definitely we would love your
feedback don't rate me right Andy so if
you think Andy did a great job up here
please go in and give them 5 stars yeah
well thanks everybody
yeah yeah yeah yeah okay I don't know
that you cut the mustard Chet it was
like a really quick run-through on the
Google home so there's actions on google
and oh sure i'll just show you right
here so it's if this yeah well shit you
can't read it you can read it here you
can't really read it what do you want to
say make this led dollar so i say on it
off and then basically the next screen
in the UI is I'm i picked the maker
channel i could have said turn on the
microwave I could have said I can have
it do any action send a tweet out I
could say like okay Google send a tweet
you know I love check and then the tweet
would go out so the actions are this so
I'm using a maker channel and the maker
channel lets you call or URL okay so i
go to appspot once i get the that text
field is a variable once i get that i
can do i can call firebase I can do
whatever I want no it's it's a it's a
startup that supports oh my god they
support like a hundred they do alexa
they do philip shoes they do washing
machines they do so anybody who's like
in the makerspace yeah anybody who's in
the makerspace they do everything
so you define an action and basically
there's an OAuth link when you define if
you go into ifft and you say I want a
new action or I want a new recipe and
then what is your trigger so the trigger
could be your Android battery got low it
could be somebody tweeted you or it
could be an action on google which is
the voice stuff so then you select
action on Google it'll do ano off
linking to make sure that your if the
count is the same as your google home
account yeah all connected devices it's
this one is specific to my die idee if
you use the system if you said like okay
Google make the lights on I do find your
life by Network you didn't reach
microphone off yep until we have five of
these things and up in our house and we
can turn the lights on and off from
anywhere and control this stuff pretty
cool yeah yeah like Eli yeah yeah my the
knowledge that I don't have is about
micro cracks aah so my question is not
to be a good resources for learning I
started with the for myself I don't know
much I know nothing right I hardly know
anything but I started with like what
problem I trying to solve and then
search for that problem and I would find
somebody solution and then just sort of
you know slowly push into that yeah yeah
gift mm-hmm I open it
just think oh yeah hopefully this may
give me some ideas because you have all
the sensors the button was the motion
sensor yes temperature sensors I just
went to hack that on where they were
using a methane sensor to to trigger and
air freshener so oops my wife saw that
we would have one at home as well so
what was the febreze hack so febreze ran
a hackathon and that was what I thought
was like kind of an interesting take
yeah they would do things like they
would use the device to turn on the fan
and the nest thermostat and spray the
air freshener so that it spreads
throughout the home well and it seems
like pretty good yeah absolutely I have
loved it well I have one of them that's
working with little shoes we mow whoever
to make the integrations work i have i
have like five openings right now that
would all report to me so different
teams sending email i can i can tell you
info okay cool right thank you for you
Bob yeah kind of fun try to get Andy
involved yeah</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>