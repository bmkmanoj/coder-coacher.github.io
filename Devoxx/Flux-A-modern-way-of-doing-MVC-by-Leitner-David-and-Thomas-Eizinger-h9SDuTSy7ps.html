<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Flux: A modern way of doing MVC? by Leitner David and Thomas Eizinger | Coder Coacher - Coaching Coders</title><meta content="Flux: A modern way of doing MVC? by Leitner David and Thomas Eizinger - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Devoxx/">Devoxx</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Flux: A modern way of doing MVC? by Leitner David and Thomas Eizinger</b></h2><h5 class="post__date">2018-03-27</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/h9SDuTSy7ps" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello can you hear me okay
so you enjoy the conference till now you
do this okay hopefully you still do this
after this talk so hi my name is David
and I'm Thomas and we're both software
professionals from Vienna and today we
would like to talk to you about the
problem of UI state management in
applications and in particular we want
to go into flux and MVC and how they are
related so besides being passionate
itself to developers Thomas and I have
one more thing in common we really like
Pablo we really like react so who of you
knows react ok quite a few people and
who of you uses it in his daily work or
in his side-project
ok three people now it's not bad but
there's potential for us so Thomas and I
we talk a lot about technology so we do
this most of the time when we're not
working we talk about our work so it's
kind of a bad habit but it is like it is
and when we talked about reactant and we
as mentioned we like react and we like
to wait how to build web applications
which react we realized well react is
only a small part of what we really like
in building web applications in this
whole stack and we really like to weigh
how we act normally or the way how you
could manage your application state who
is react so is everyone familiar with
application state or state management
itself UI state management
ok let's explain it very short
so you asset management it is very
simple so we took this definition from
Martin follow of course who else so he
is he says that applications have
different kind of state years you have
to record state you have session state
you have screen state so the lifetime is
different but essentially you have
different kind of state in your
application and the real purpose of
state management
is to ensure consistency between the
states so to keep the state in sync and
which reacts you normally achieve this
goal of keeping this state in sync with
something called Redux and so yeah we
said we like react but what you really
love is Redux and how it works and so
the question is what is Redux well it's
a independent library independent from
react and it describes itself as a
predictable state container for
JavaScript apps and as I said it's
independent from react you can also use
it with angular for example doesn't
matter 2 4 5 or I don't know what
version comes next and but you can you
can also use it in an application that
doesn't have a graphical user interface
at all like a CLI for example so it's
just a library for managing application
State so when you take Redux and you
combine it with react you come up with
something that Facebook calls the flux
architecture pattern yeah
so it's flux so as Thomas mentioned flux
was introduced first by Facebook who
knows flux okay cool
so flux is an application area
architecture utilizing an unidirectional
data flow so that's the definition of
Facebook so let's explain this very
simple so so let's take in simple
example so let's think of an web
application so you have some some kind
of react application and some users
clicking on a button so some user
decides to sue to do some some user
interaction this user interaction then
gets normally map to an action ok so
some kind of domain action the user
finishes some some ordering process so
the click buff the click button gets
transformed to user finishes some order
and then there's the dispatcher which
hands all over this action to the store
and the store holds the state of the
application and whenever a new action
comes to the store to store decides how
to change its state so probably in this
case you would say the boolean to
finished order
whatever and every time to state the
store or state in the store changes all
views which depend on this state
automatically getting rear-ended so
every time you change something in your
state all the UI's which depend on the
state automatically getting rear-ended
and what we can see here is that only
this rear entering part is actually
performed by react all the rest is
implemented by Redux so if you're not
familiar with redux these are some terms
that are kind of weird because you never
heard of action creators or anything so
in our opinion a very important question
to ask always when you're faced with new
technology is why create something new
what's the benefit of creating something
new what does it do better than existing
technologies and so what about existing
patterns like MVC or MVP why weren't a
suitable for managing application State
at Facebook and there's an interesting
answer to this to this question there is
an info cue article I recommend it to
everyone read it and in this article
they explained that they did try to use
MVC for their application but it didn't
work out for them they had problems with
in consistently displayed UI states so
for everyone who uses Facebook you all
probably ran into this bug where you
were chatting with someone in the chat
window and usually you would like read
the message but the indicator at the top
says hey you have a new message and when
you click on it oh there is no new
message so it's this kind of
inconsistently displayed data that they
had troubles with and another statement
that they have in this article is that
they say MVC didn't scale for them and
when we were discussing this we thought
okay this is a pretty controversial
statement because from our experience
and we see did scale pretty well and so
yeah we we did what every professional
software engineer bore to we googled it
what is actually MVC and why why would
it not scale and the results were pretty
interesting yeah I mean the results are
amazing
so you find the best UML on Google and
we just want to present you some of the
search results so the first one we got
is here so of course you have a
controller for you you have a model and
you have justice errors so everybody is
speaking to everyone now this is
interesting but makes not that much
sense for us so the next we thought it
was a bit better at least the errors are
no longer bi-directional but the view
and model kind of keep updating
themselves all the time and we're not
quite sure their input from the
controller's coming and yeah I don't
know yeah I mean it's it's very
sophisticated so so skip all these
arrows do gears instead it's much better
so yeah I mean it brings it to a point
no it doesn't yeah this one's also quite
interesting because apparently the our
whole database is now the model and also
take a look at their fears again it's
very important to have gears but yeah
all of these all of these diagrams or
pictures didn't really make sense so we
did some better and better research and
of course again Martin Fowler comes up
and he has this very interesting article
in which he says different people
reading about MVC in different places
take different ideas from it and
describe these as MVC and this pretty
much brought it to the point the whole
confusion about okay what is and we see
actually why's there so much yeah why
are people thinking so differently about
what MVC actually is well and who have
you seen the talk from Adam to on Hill
yesterday great talk I've seen him okay
the keynote yeah so did you realize the
MVC pattern he introduced well it was
this one this is also very interesting
so it's very clever to leave all hours
away because this confirms was Martin
Fowler says yeah it's it's not sure it's
not it depends on the context how you
see and we see so now if you do some
more serious research about MVC you
sooner or later
end up with this guy whose name nobody
can pronounce because he's from Oregon I
think Wayne's card driver wins coke
something like that and so he's the
inventor of MVC he first described this
pattern of MVC back in the old Smalltalk
days who was a life back then hmm
okay very young conference sorry
so in this paper Drago describes this
idea of what he wants to achieve with
MVC and what it actually is and so for
models models for him there's a very
short sentence that describes is pretty
good he says models represent knowledge
models describe a concept of the real
world like in a to-do item something
that is a it's an abstract term and so
it's the models are completely ignorant
of how they are represented and how they
are interacted with and next to the
models there's the view and the views
only job is to create a representation
this is in our opinion a very common
misunderstanding the view is not the
representation of the model the view is
a class that creates a representation
and so this means data flows from the
model to the view but the model doesn't
know that the view even exists so the
Association goes into the different into
the other direction
and the third element is the controller
obviously and the controller's job
described in the in the in determines
that try grow users was the control is
the link between the user and the system
so it's the controller's job to map
things from the user to abstract events
or commands to this model that doesn't
know that it's even presented somewhere
and a very interesting finding in my
opinion is this boundary here that like
tells us that we're operating on
different abstraction levels in our
software so the model is on a different
abstraction level than the view and the
controller because these to deal with
technical details of the presenting
stuff
while the model doesn't know about that
yeah so let's apply all this to the do
the good old web so finally some source
code on our presentation did you like it
hey this is the Java conference
this is way too concise the Java
conference so write some real Java code
here so no getting zeros again so let's
apply all this to the web and what's
really interesting that the pattern
means cut described can be applied very
simple to the web so let's take a look
at it again and all that really changes
is okay to control a takes an HTTP
request with some use action normally
transforms this to some model change
action and staff yuri renders the new
state in the model and returns with an
HTTP response so we can see two things
here the first one is everything is on
the server so the whole i'm you see
pattern is implemented on the server and
the second thing which is very
interesting there's no JavaScript and we
all know this has changed so let's take
a look at of things evolved with the
introduction of javascript in order to
explain that I want to quickly walk you
through this nice little to-do
application that has completely
irrelevant items and so you can mark
them as done but you can't undo them so
make sure you actually do them before
you before you click on the button and
but if we don't have JavaScript this
means only the view country can create
as a new representation so if we click
on the button we issue an HTTP request
and we get back a new view now this user
experience sucks because it's like the
whole view refreshes and the whole the
whole UI refreshes and despite that we
only want to make this little item green
so we introduced JavaScript and if we do
this we make an asynchronous HTTP
request of course and we get back some
chasing and then yeah we just modified
the HTML on the client so now we could
get back some trees we could get back
some chasing but we know how things
evolved and today we are only doing
chasing and tank all
dressed so what happens now is that we
introduced duplication because this
class here that says how does an item
look that's done in the CSS we
duplicated that because our JavaScript
needs to know what is classes and all of
you knows and yes I'm aware this is a
very simplified example and you can
probably get around that but it should
demonstrate that the more functionality
that you put into your JavaScript and
what duplication you're causing in the
view and in the JavaScript so the
question is how do we tackle this
problem of duplication I don't know
anybody knows how to tackle duplication
okay well actually I know only one real
way to tackle duplication and this one
is very simple yeah delete it or get rid
of it so that's the only way I know and
basically that's exactly what happened
in in the MVP or in the JavaScript so
people started to implement MVC with
JavaScript so that that where we went to
so people started doing all this stuff
which was currently done on the server
on the client with JavaScript so it was
and we see for example here to us and
repeated it with and we VM they did it
with MV whatever how they call it at
angle but basically this was what they
have done they did all this was done on
the server on the client now and well
there are lots of implementations of MVC
in JavaScript I like this one from from
peter mayhew off I'm pretty sure you
don't know it does anyone know this yeah
I didn't know it either but it's it's
it's really good because what he tries
to do is he really tries to implement
that the design or the pattern mean
scope described for small talk with
JavaScript so this is very very very
near to that original thoughts from from
rinse coke so this is really interesting
and of course there lots of artists and
in our opinion and nada MVC
implementation in javascript is react
plus redux
and so now before you grab your Tomatoes
let us explain why we think this way and
it's it's actually quite straightforward
so in and we see we have three
components we have a view and we can try
to map these two elements of a reactor
EDX application and so what is the views
job the view takes data and creates a
representation of it yeah I think I
don't have to repeat this anymore
so can I repeat this anymore because
it's so important and it's such a common
misunderstanding in MVC applications or
an MVC frameworks that the view is
actually the HTML and this is not
correct in my opinion it's not correct
because the view is the component which
ran the stage GML okay so the few maybe
uses some HTML template and ran as a
HTML HTML out of it but the view itself
is not the HTML just to make this clear
once more yeah
thank you David so what can we map this
to yeah we can map it to react this is
what react is doing it takes data and it
creates a representation out of it and
why is this true because it's also on
Wikipedia Wikipedia says that react is
the view part of MVC and Wikipedia never
lies we are so go home and we Traverse
on Wikipedia of what we say second part
model what's the model shop models
represent knowledge it means that models
implement your business logic models
implement all the business rules that
you have and they encapsulate state so
how is this handled in redux well it's
the redox store the redox store
encapsulate syou're data it takes
actions and it transforms this a state
based on these actions so these two you
can like literally be mapped to one to
one
yeah yeah things what things getting a
little bit strange was the controller
because we're already done with this
right so where's the controller yeah the
controller's a little bit of a strange
guy but let's reconsider what was
actually the purpose of the control and
MVC
as Thomas mentioned before the
controller takes some user action and
transforms it to some model
transformation action so it takes user
action transforms
the model changes and when we sink back
to the flocs architecture I showed
before so there was this issue I this
react UI so the user has some user
interaction this interaction gets maps
to an action this action or its
dispatcher hence this action over to the
store and the store finally gets updated
so I think you get it's that the main
idea the main goal behind this is is
pretty much the same there's just not a
wording in some more components but the
controller basically is some array of
components in redux I would say yeah
Morris so yeah so as we can see the
structure is very similar so we've
proven this here or we try to prove this
here that the structure of MVC and redux
plus react is quite similar so what the
structure isn't all so we know
frameworks deliver more than just
structure they have some kind of goals
so let's take a look at the goals of
flux so we took a look at that
accommodation on get up on on things
people from Facebook said what are the
main goals of flux what are the main
goals of the flux architecture what
purpose has reactant rejects to cater
for problems does it solve and we found
four very important selling points or
main criterias they always speak of and
the first one is unidirectional it does
anybody know unidirectional adji in UI
state management familiar to unit
directionality okay so basically the
ideas is very simple if I take a look at
flux again so we have this react UI this
triggers some kind of action does
dispatcher
hence this edge go over to restore the
state in the store changes boom react
for you gets rear-ended and what we can
see here is we have this always in this
circle and the circle of direction and
according to redux and according to the
flux team this makes application
very easy to understand and also easy to
test because you don't have anything
from the rag to the store you always
have this circular direction how does
this work in a museum oh yeah actually
exactly the same so we have a controller
model and the view and we always go in
this circle so we never update the model
from the view we always go from the
controller yeah that's that that's
basically it it's exactly the same
actually the thing is there are other
approaches to this so not every UI state
management framework is unidirectional
if you think of any VM for example
that's implemented by angular you have
binding and binding is always
bi-directional and then you don't have
this nice circle of okay I always know
where my data comes from because you're
not quite sure which of the two parties
updated the state okay so another
selling point flux always our use with
is predictability so well this this one
is also quite obvious so you have some
state in your store you have some action
you again have some state in your store
so if you have some state in your store
and you apply the same action again you
will get another state and you can do
this again and again and again and it's
quite predictable so you know how
actions will stay will change the state
in your store and you could describe
this with a very simple function so the
store state plus an action is a new
store state but this one is always
predictable if you know the stores that
into action you know the news to our
state yeah this is also the reason why
it's usually implemented in the form of
pure functions and the thing is if we
just take this to the object-oriented
world it's like the same thing in MVC we
have a model it has some initial state
we apply an action which is probably a
method call or we send the message and
we get a new model state and this is can
be tested in exactly the same way as as
the Redux variant yeah so the third
point saying is source of truth
so the single source of choosing in
Redux is quite simple although we can
see it here the store so the store and
our flux architecture is the only way
where we store our state so there's no
second stored value cutting corners here
you could have a second store but it's
on the same position then so but all
these other things here don't have some
some kind of State of course you have
some some very short living State but
it's not really persistent so all your
state is located in the store and of
course this is a big advantage because
you know ok the only way to update you
stores we've heard before is to create
an action and apply it to the store and
so it's very easy to understand what's
currently going on in the application so
you can retest stuff because you don't
you only need the state of the store and
applied to the current running instance
of your application and this is where
single source of Cruz is really big
because you can do this in lots of
applications you have store everywhere
State everywhere sorry and this is one
of the really big advantages I think
which come with flux so yeah I think you
got me with this one because we now have
three models or even more and seems like
state is now scattered across the
application but if you take a closer
look and might be more easily be seen
from like the last last rows all of
these models could be seen like this is
our my application model and I could
reference them from each other so more
or less you have you have a single
source where you go to four if you want
to know about a particular state and
also if you look at it from the context
of the information that is stored
whether or not a particular to-do item
is done or not is only ever stored in
one place so it's never scattered you
don't have to like combine three boolean
values for in order to get that
information it's always the single
source of truth of information is still
let's yeah so no duplication is to the
point here
yep the next one consistently displayed
out on the UI so this is where they got
me so I was I I figure I I didn't know
exactly when I became an fan of the flux
architecture but this is really the
thing where I said wow I I go with flux
because it's it's it's crazy it's it's
that easy and it's yeah it makes things
so easy because the real for me the real
big advantage of flux is as I mentioned
before already so you change something
in your state by an action so that's the
only way to change your state in and
flux architecture and you don't have to
do anything because all the fuse in your
application all the UI components know
on which state they depend on and if
they recognize okay the state I'm
depending on changed
okay then they will you enter so this is
not my peer anymore and they do it on
their own and you can describe this
again with of course some some very easy
function the few takes install state and
renders and UI yes and with them you see
it's again exactly the same actually
they even use so if you look at small
talk implementations of MSE they even
use the same pattern it's the observer
pattern in both places so you subscribe
to models and react you subscribe to the
store in any kind of updates just get
propagated to all the subscribers and
and they can rerender as soon as the
state changes of course there are some
optimizations to it okay if the state I
depend on doesn't change I don't
remember but the idea is the same you
don't have to specifically tell the view
okay now go update yourself because it
already knows because of the state
changed it was the actual intended
behavior so well what we basically said
it's it's all the same structure is view
is react model a store controller as you
have some some array of react components
and the goals both fulfill some kind of
to go the same goals maybe you
and react is some kind of more
opinionated to achieve two skulls but
basically the goals and the structure is
mapable
so what we say is that you can achieve
what you can achieve with MVC can also
be achieved with flux so does anyone
remember the title of this talk come on
who is that
okay so one guy what was it
all right flux a modern way of doing and
you see question mark so it probably
should have been just flux another way
of doing em you see because this is what
it all comes down to and we hope we
could were able to convince you that the
differences between those frameworks or
approaches are so marginal that in our
opinion this is just another way to do
MVC because both want to achieve exactly
the same things they just use different
terms and structure everything a little
bit differently and as we've seen almost
exactly the same so so why is this
important for you and now it's really
getting getting interesting for you I
think so so wake up and listen one more
two minutes why is this so important
this message because I mean don't get me
wrong and I think I can also speak for
Thomas we both like react we both like
Redux we implemented a couple of
applications with the stack and probably
wish would do it again there will be
some more there will be some more and we
will do it again but the problem really
is when you start talking with some some
react developers normally or some some
JavaScript experts or some some other
guys who use flux a lot they normally
say come on use flux in your application
you got all this big advantages here and
then yes what what what advantages here
and and normally to tell you one of the
four points one of these four key goals
we we showed you before
and then they say come on use it use it
come on to this react land and and
usually I can probably buy some training
for me and we will train you how to use
react really and this is interesting
because as we have seen reen's
green's did this forty years ago so
forty years means cook had some some
pattern in his Cairo and his minder
described some pattern which basically
fulfills the same goals and same
structure like flux starts now with
other wording so if you really should
take one message from this talk it's
probably and that you shouldn't do this
hype driven development you shouldn't
follow this new buzzwords so you should
not learn frameworks at all I would say
because this doesn't scale you can't
learn each new JavaScript framework but
what you should do of course you should
learn but you should probably learn the
concepts behind these frameworks because
when you understand the concepts behind
this framework this is some real big
value for you as a developer because you
can reuse them as we have seen from
small talk till now to JavaScript so as
mentioned learn concepts not passwords
so thanks thanks for listening and just
a quick few words about ourselves so as
I already introduced myself and Thomas
and yeah feel free to approach me and
and talk to me or if you want to do this
to it in the next three weeks because
I'm going to meet this guy again going
to Sydney in April yeah
but follow me on Twitter ask me any kind
of questions whatever you like mm-hmm
yeah I'm I'm David I'm working as a
freelancer Nana
mostly on Java and JavaScript so
sometimes top net when I run out of
money just kidding
the net is is have some really
interesting ideas and in concepts I
think besides the new frameworks yeah
that's it for me
yeah and we also do lie
make software in our free time and so we
have this little project no we just
advertise it here a bit
it's called naath IO and whenever you
run into the situation of being around
with a few of your friends and everyone
has a bill someone placed a coffee
someone pasted beers I'm on the fuel
costs and you don't know okay how to
split this up give it a try it's open
source and get up and tell us what you
think or even contribute fix a bug
whatever you like yeah thanks for having
us sex</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>