<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Simulation of Transient Effects in Accelerator Magnets by Michał Maciejewski | Coder Coacher - Coaching Coders</title><meta content="Simulation of Transient Effects in Accelerator Magnets by Michał Maciejewski - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Devoxx/">Devoxx</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>Simulation of Transient Effects in Accelerator Magnets by Michał Maciejewski</b></h2><h5 class="post__date">2017-03-13</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/vzgKKurxDGw" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello everyone my name is me how much
chef and today I have a great pleasure
to speak on behalf of a great team about
a great project which is called steam
and in particular about the application
of Java technology to the project we are
developing candy it is sadly a recent
project which puts a lot of emphasis on
building a competence in coupling of
optimized simulation tools for the
simulation of trans in effect in
accelerator magnet and speaking about
that actually recently asked in a very
nice movie which is called the bridge of
spies where Tom Hanks plays a lawyer
defending a Russian spy con in United
Stated called war so it was quite
interesting period and he is negotiating
agreement between a Soviet Union excited
states to exchange the spice so it's
quite interesting and now looking behind
the scenes actually what we do in the
real life because I'm coupling term
itself is quite overloaded so what we do
behind the scenes we couple dedicated
hardware so if you want to display a
movie we go for a projector which is a
separate device audio system and a text
processor in case you'd like to play
subtitles and all that is coupled to a
computer that is sending information to
all of them in a one-way so actually in
the life in life every day we perform
one way coupling and now let's ask
ourselves how does it translate to
accelerators and let's recap a bit
because there is a nice keynote in the
morning and accelerators like a swing
okay so we can swing the particles
inside and here we have superconducting
magnets which are covering the entire
circle of the LHC which is 23 kilometers
and they are guiding particles to be
kept inside the trajectory and an
electric field at some point to
accelerate them and now if we cut the
magnets summer in the middle and we look
inside we will observe that there is a
straight field which is perpendicular to
the direction of the motion of particles
and that all together creates a Lorentz
force that will bend the beam and now if
we see as the beam emerges from the
screen is also moves a bit to the right
foot bend it if we now put it into the
accelerator it will blend it with the
magnets until it reaches decorating
cavity get the kick and run
around and okay so now we know the
principal and let's consider the
implementation of that so the principal
stays the same however we need to build
a highly sophisticated structure around
it which is as precise as a Swiss watch
maybe this one as you can see here but
the Swiss watch that way 20 tons and
it's 50 meter long we need to operate a
superconducting state in order to
generate the high magnetic field which
is the magnet is called by superfluid
helium up to 1.9 calvess of some minus
270 degrees and these topics are
anything but easy and we're awarded
several Nobel prizes for the research so
it is quite a complicated machine and we
have 1,200 magnets like this which are
powered with a dedicated circuit so we
have a certain current in the magnet and
for that we have a dedicated controller
that shaped the current in the circuit
that then powers the magnet and get the
desired magnetic field and this magnetic
field has to follow the particles that
travel up to the speed of light and yes
the current in the magnet is in the
magnitudes 12,000 amps which is
equivalent to six hundred households in
this current together with high magnetic
fields if creating or is responsible for
very high energy which for a magnet is
like a 20-ton truck traveling at 95
kilometers an hour but for the circus
composed of 154 Magnus is already
something like the Java and we need to
carefully study these magnets for the
safety and maintenance of the machine as
well as research and development and in
our group we are responsible for both
tasks for today which is the operation
of the LHC for tomorrow high luminosity
average of the LHC and the day the day
after which is future circular collider
and of course with great power comes
great responsibility and if we do not
manage the energy well and unfortunately
it happened already in the HC there was
a damage that stopped the operation of
the accelerator for one year and
therefore we really need to understand
what happens in these very complicated
devices the damage potential is huge
and without simulations we cannot
understand the behavior of the magnets
okay so now let's see how we operate in
normal operations that we already
learned we only need a circuit and the
controller so if you want to simulate
the two actually there is no
one-size-fits-all does the whole purpose
of simulation coupling we have dedicated
tool for a circuit and dedicated tool
for the controller that has to
communicate with one another and here
let's just consider that the circle
itself spans from meters to kilometers
axing the LHC made up of circuit is
seven kilometers and the phenomena
occurring inside are from milliseconds
two minutes so we need to carefully
consider these phenomena occurring in
the simulation tools and does neural
operation however at some point there
could be a quench a quench is a
transition from the superconducting
state to the normal conducting state and
superconducting state is usually
described by certain current density
magnetic field and temperatures so as
long as we are under the surface we are
in nominal operation and we are good
however if there is some energy
depositions are in the magnet miss
functioning of powering system is
functioning of a cooling system we would
quench and if does the case it usually
happens with very small spot we need to
understand how it propagates so we have
1d models which propagate and then we
see whether we will run away and build
up more and more temperature in the very
small spot or we will recover and we can
keep operating if we do not recover with
the tackler quandary we have to protect
it and here the principle is quite
simple because we need to do something
like with clapping of hands so if we
clap then we don't hurt ourselves but if
you put my needle inside in between our
hands in the club again well we will not
clap so again the quench is the same
thing if we have our energy located a
very small spot and we discharge it all
inside will damage the magnetic
irreversibly and will have the same
situations as several years ago so what
we do is actually something
counterintuitive we apply protection
methods to quench as much volume as
possible so claps hands
needle so one thing is to study the
thermal response the other is to study
magnetic field response during the
discharge because both of them are
affecting the mechanical structure of a
magnet we have thermal contraction as we
hit something it expands but you save
also Lawrence force so current and
magnetic field is grating for that we
acting on a coil and this we need to
study especially in case of upgrades
where we are going towards higher
performances so we need higher accuracy
and high fidelity software and now comes
a week challenge of our our group
because here we have distributed model
so that resistance is distributed over
the surface whereas for a circuit the
resistance is a one-parameter it can be
5 on 10 ohms or 1 million so now the
challenge is how to translate something
that is distributed geometrically into a
circus how to distribute the magnetic
field properties into a single parameter
and still be able to follow the process
inside the inside the circuit and these
are the challenge we are tackling with
with this team as well as the challenges
of various scales we're talking about
kilometers but what happens on the
origin of the quenches micrometer scale
merely me microseconds time resolution
so the problem is sort of governed by
multi3 multiphysics multiscale in multi
right and this is non-trivial task there
is no tool on the market that can handle
all of them together and for that we put
a lot for a lot of effort to create
steam every day not every night so yeah
the key question is how we can couple
the two and let's focus on a single
simple example we have a magnet with
which after quench is building
temperature so we have certain
resistance that we have to translate
into a circuit but circles seeing this
resistance will decrease the current
right the resistance for electric
circuit is like a breaker so we will
have a decrease of current and for that
we need we have two models because they
are incompatible we cannot run them
together in a malignant lytic sense so
we run circuit separately we obtain
information about current we plug it to
the magnet we run magnet now we get
information of the resistance and it put
it back
of course if we do it only in one cycle
we cannot guarantee the convergence and
for that we need to iterate so we start
with our initial guess of resistance
which is 0 we get the current profile
this transfer files past the big model
of a magnet we get a resistance
resistance growth so the next step will
have larger current decrease because we
have more resistant but as the current
is decreasing faster we will in this
iteration build less resistance so now
that the resistance means a bit more
current and a bit less resistance so we
iterate and we play this game until we
find the convergence and here actually
after the next iteration the two curves
overlap when you can call it a day we
are done with converge so in general
what we need if you want to make the to
feel the same phenomena is to iterate
and in general the more iterations we do
the better accuracy we get looking at
the example for the future circle I
Collider which is supposed to have
something like hundred kilometers in the
area so you'll have celeb in the middle
and it will go on the lake we see that
indeed we discharge the energy stored in
the magnet in less than half a second
that's mandatory if we don't do it we do
not discharge the current in this time
we destroyed irreversibly so we see the
current discharge we see the resistance
growth so this is what sir could see but
that's actually this resistance is a
result of this temperature profile
inside the magnet which is again a
consequence of triggering the protection
system so these are the complexities we
are dealing with this is something we
have to capture and for that we have
chosen Java and at the early stage of
the project we have a very nice
collaboration that lasts till today with
our software team of MP group we are
receiving a lot of help because by
degree we are mostly electrical
engineers but we are doing software and
for that we started with defining some
sort of Decalogue of good coding
conventions that was a very very first
step and then on the way as we decided
to go for Java we are receiving out of
help defining some integrated
development process we
cause I probably shouldn't explain here
because you know it best and yeah what
do we appreciate about Java in this
particular application its first of all
available ITI so we can build our it
almost automatically it is a mature
technology the weather subs technology
with a great deal of available tools we
have huge expertise inside turn which we
highly value we can turn with any
question to experienced colleagues that
can help us and tell how we should do
things maybe there is a design pattern
actually we implemented quite a few like
state machine factory design pattern
static factory and all that made us
possible lets us implement some sort of
object oriented modeling so we can
describe our models its objects and
create one to one link between the
reality and code because our main
objective is to bring the physical
description bring math to code and we
hope the great the modeling we can do it
and something the reasons and what one
of our colleagues appreciated a lot and
so do we it with java a the use of
lambda functions one thing that is not
yet clear for us it's how to script in
java because always we need to compile
the code so maybe you have an ideas we
can discuss it over coffee and why do we
need to script well actually our main
objective is to let user of the steam
because it's not only for us it is for
the community of superconducting magnets
focus on the task and he starts with not
to build model over and over again but
is to define input create mode
automatically analyze output and mary
made several cycles but focus on the
task at hand the time spent on building
the model by hand is the time wasted so
no matter if we create a geometry like
this when we need to define it from the
very beginning like the high school we
have to define point lines areas or a
circle that which has around 10,000
elements all has parameters or have
special physics properties for that we
have a single recipe which takes the
user input passes it to java model
generator that either triggers a
geometry module so it builds geometry
defines physics over it defines mesh
properties or a topology module that
take
the input describing the circuit and
create the corresponding model so all
that creates among the model and then we
can link it with our custom libraries
that can represent a magnetic power
converter and every faction system and
so on so that is at the level of
automated modern generation now if we
move to the coast emulation interface
getting to the end of my talk actually
what we implemented the state machine so
if we remember what we discussed
actually normally we start with a
controller and circuit and we can move
on like this to the end of the run which
is a nominal operation in case of quench
we need to study the quench propagation
and either we recover or we need to
detect it and then follow this path by
performing magnet circuit cutting to see
what the peak temperature up to the
circle study after we discharge the
magnet and the circuit discharge we can
also go directly from controller circuit
and the field circuit capping but here
the main message is that actually if we
capital model together we get more than
that each model can do on its own so we
have some sort of synergy here and to me
and our team steam is also simulated
together everyone achieves more and
building and bringing that all together
the steam can be seen as some sort of
abstraction to simulation software so on
one side we have here automated model
generation so we create magnetic circuit
and controller model and we can already
see that this is sort of horizontal
scalability because we can plug more and
more and more it's meant to be general
then we have the general model adapters
that trees models in general terms so we
can run these models get output set
input and so on and finally on the top
there is also expertise of the user so
he defines the core simulation scenario
he knows what models to bring together
and we think that that's sustainable
solutions I'm of course this
architecture is supposed to be a factor
on the way but we believe it is a good
image and to conclude as i started with
movie i will finish of a great book of
Allan Lichtman which is icing drinks is
a book with a set of chapters the dreams
of Einstein's that's something that I
shan't could have been dreaming when he
was developing a relativity theory and
these are our co-simulation dreams so
first of all we put a lot of effort to
build optimize models and which F
consists in physics modeling by means of
efficient coupling interfaces we gain
performance the approach itself has
eminent modularity which supports the
main team maintenance and expandability
and hear what is clear to stay it's
important to stay that we are not the
only guys that know how to couple things
and how to model mangas now we are open
to other contributions and finally last
but not least accuracy of result with
this approach is a function of a
liability resources with the function of
license computing power or time of
course I am aware and we are aware that
makes in these dreams come true is a
challenge with our great team impossible
is nothing actually this team as we call
ourselves or third in general because we
have really multiple multiple
collaboration thank you very much for
your attention it was a pleasure for me
to be here you have any questions and we
have this answer
I</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>