<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Real-world Serverless - Going Lambda without being burned too much by David Schmitz | Coder Coacher - Coaching Coders</title><meta content="Real-world Serverless - Going Lambda without being burned too much by David Schmitz - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Devoxx/">Devoxx</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Real-world Serverless - Going Lambda without being burned too much by David Schmitz</b></h2><h5 class="post__date">2018-03-27</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/hErwF1Z_THc" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so great hi thanks for coming real world
travelers get settled this will be right
I know there's lunch afterwards so I
know you're hungry but give me the 50
minutes please
Who am I I'm David I'm from this 2000
Germany
you might recognize my awful German
accent and I work for the narcotic
knowledge ease we are a consultancy
doing stuff and you can find me with
Kony shot sir on PlayStation Twitter
github basically all around the place
for questions before we start
who's doing micro services raise of
hands in production quota and who's
using containers rocket or dock are
something like this also maybe the third
who is running in the cloud public or
on-premise cloud don't care a couple of
friends okay
and whose prior experience with server
list maybe the talk yesterday from birth
or something just one okay - okay great
so expectation management what can you
expect from this talk I am NOT a vendor
I will talk a lot about AWS but I don't
care my company it's not the vendor we
have no preference we do whatever we
want and I'm absolutely not a cloud guru
Amazon is far too complex to know
everything so I'm just doing my best
the next thing is my experience you can
see that's approximately the relation
between my Java spring java ee classical
application stuff experienced and
contrast to my lambda experience lambdas
new so I guess we have to learn there
and things are moving rather fast things
are changing every day in the serverless
landscape so everything I will tell you
now is out of date and you can paste you
can forget everything I said ok the
story we are going to look at is what we
learned with a couple of my teammates
when we migrated our on-premise solution
to AWS lambda and the application was an
asp.net monster based on Microsoft
sequel
and it's used for submitting buildings
you know I'm a consultant so I have to
to submit my travel expenses and my
customer billing since a fact that's
really important and we saw the server
stuff and thought that would be really
awesome to use that and that was our
architectural idea that really was our
architecture idea nothing more concrete
okay
so do something in the cloud and this
was not so smooth so we will look at
some runtime issues like what languages
can you use what are the implications we
are looking at scalability and the
promises Landa makes or doesn't make or
doesn't hold up we will see and for the
perl users among us we are looking at
lambda T and tau D there is one way more
than one way to do it because there is
more than one way and we'll see that
deployment still sucks even if you are
just deploying lambdas deployment is
always hell security is still important
even in the cloud you should not submit
your credentials to github or something
like this and last but not least some
magic and witchcraft namely hot and cold
starts where the magic happens
we don't have much time just 50 minutes
so feel free to come to me afterwards if
we want to dig deeper in one topic or
the other so I would keep things brief
AWS basic knowledge somebody okay so you
are familiar with that great so back in
the days I am now 40 years old so back
then when I started I worked for
companies like this big grey buildings
somewhere in Germany with a nice cellar
and there was this data center and I
guess most of us have something like
this at the customer and we moved to
infrastructure as a service and the idea
was that working on real machines is not
our main business so we abstract away
and we are using virtual machines who's
using virtual machines most of you ok
and then there was platform as a service
like Heroku or the old OpenShift where
your dearest yet you don't care about
the actual virtual machine you deploy an
application
and the Silver Bullet namely docker
docker came along containers rocket
docker whatever and the idea is that you
do not deploy virtual machines you do
not deploy big heavy applications but
just tiny images which can run in
milliseconds and they start in
milliseconds they stop in milliseconds
whatever totally easy
Claude solved I guess but if you go to
production and you start thinking about
docker
there are some questions about
provisioning how do you scale how do you
monitor this mess what about State
Security mmm deploying this is like
drawing an owl I don't know if you know
that it's it's a multi-step process you
start with the head like soap for that
circle for the body and then the rest
and the same for distributed systems
it's really the same it's really
difficult you keep the problems are hard
and there's one solution in the
container space and what is it any any
guesses
of course it's kubernetes we are so glad
and typically when I start a project
there's one or two team members who are
really fluent in kubernetes because
kubernetes is so incredibly easy to use
and they start working on the concepts
in order they go into office and they
are doing all the stuff and six months
later you end up with the this is not
made up this is an actual architecture
and the cool part for me as a developer
I care about this the rest is garbage
and I'm like stop this okay because I
hate this there's this service and does
the place so service as we all know this
has been said many times it's an awful
name let's look at the documentation we
won't read this just focus on the key
points here we can build applications
without thinking about service there are
service but we don't think about them
somebody else scales them for them for
you or monitors them and you can as a
developer you focus on what you are paid
for you focus on what matters
business logic okay
that's what they tell you that's what
they sell and everybody sells that as
your functions AWS lambda Google cloud
functions how was the products I'll only
use AWS so I noticed not all of you know
area Bleus so a cheat sheet
when I say lambda I mean server is
compute piece of code that runs in the
cloud
when I say s3 let's just drop box
everybody knows Dropbox so you know s3 I
am is the security stuff where you
protect things and things and there's
cloud formation who is familiar with
terraform a couple so just think crappy
tariff on then that's all so for for the
rest of you it's a tool for provisioning
infrastructure but we're here for cloud
functions what is the cloud function
it's just a piece of code that gets
executed by an event something happens
some user uploads a cat image you get
triggered and you get executed you
actually do not have state there might
be some state lying around which can do
which you can reuse but in general if
you have two state and you want to keep
the state you need the database surprise
and if you design your lambdas correctly
they should just do a single thing if
the if you name your lambda like creates
an order sends an email and additionally
creates 20 PDFs for certain things then
that lambda is badly designed just a
single sentence regarding the execution
model as I said they are triggered by an
event and lambda calls your handler
nothing else totally easy explained in
one slide the events can come from
everything from your browser from your
mobile device from a message queue from
email whatever so everything could
possibly call your lambda the code is
stored in s 3 that means when you upload
your your lambda to AWS they create a
encrypted bucket that's the bucket and
they store your lambda code inside and
when an event arrives what happens is
the following
AWS creates a container basically a
runtime think docker it extracts the
source code in your runtime
and then it gets executed
that means the event gets processed by
that thing and if another event arrives
in a short timeframe then we can
obviously reuse that we don't have to
create another one and if time passes
some time unspecified AWS will just kill
your instance and maybe create another
one easy right scale by request this is
sorry this is the main selling point of
Solace you do not care about scaling the
idea is popular service and there are
many many many many events like cap
picture upload service and instead of
thinking about how do you scale AWS
dusters for you it just provides
essentially as many lambdas as needed
so no more over provisioning or under
provisioning that's the idea and for the
managers among us the coolest part is
you only pay when this thing bounces
never paying for something it's just
lying around ok who is a Java developer
what are you programming in I think you
two didn't raise your hand
so it's PHP I guess but really lambda
supports many languages and you can even
with a few tricks use other languages
than these and you could definitely use
Java for your lambdas and maybe you
could even migrate your spring
application to service but actually no
we just found it too troublesome
it makes no sense we are just using node
and then python because fast startup
time and you can actually work even if
it's javascript maybe go might be an
alternative I have no idea so that's the
general idea of service you deploy some
code and it gets executed by events easy
yeah maybe not so easy so what did we
build a service application now I think
you all think like Netflix now 1000
lambdas calling each other with advanced
and Kinesis and whatever actually not
what you see here it's basically the
general design
pattern that we are using we are hosting
our single page application no that's
you have to do a single page application
because hype in a bucket so no server
for their web application the logic is
just lambdas lambda lambda lambda so
nothing else and the database is a
dynamo DB so there is no server on this
page that we have to maintain it's a
service website servers compute service
data that's the way you should do your
things but there's no rest api gateway
stuff really and no event extravaganza
yeah right you don't need it you don't
need an api gateway you don't need to
speak rest it's perfectly fine to call
your lambda using javascript directly
from your web page and you won't pay for
api gateway api get with really
expensive and from my perspective use it
if you need but we didn't use it so
let's talk about scale lambda scales per
request I've mentioned that but for
those developers of you who have a
back-end system do you have a back-end
system that scales by request any of you
maybe your whitefly no I don't think so
on and the problem is we have a legacy
API for submitting buildings to our
back-end processing stuff and the idea
was somebody comes along uses the web
page called lambda and submits a bill to
the bidding API why not at the end of
the month this happens all the
consultants are those are developers you
see those t-shirts they submit the built
at the same time and this is a status
diagram from our monitoring tool and the
billing API just blew up and we had to
start to scroll with the administrators
of that thing and they weren't too happy
I'm the guy with the beard but they put
me to the stake and was also awesome so
even in server lists you have to think
about capacity you do have to use
concurrency limits you cannot just hit
your back-end or your database or
whatever thousand requests per second at
the same time
and because things will blow up so just
said concurrency limitations that like
that's like a throttle you mean like
like throttling requests but then you
have to think about if I throttle down
to the database that means just ten
requests at the same time maybe then
those bottlenecks tend to move upwards
in your stack so you need definitely
need to integrate your stuff into
asynchronously that's the real diagram
we are moving to the lower part you see
the dynamo DBM the idea is that instead
of hitting the building API directly you
set up a different trigger that's the
new bullets a red lamda calling into a
message queue and that queue itself
triggers a different lambda so you have
the depth you have a two-step back off
for your billing API that's a general
pattern that's the only time that we use
really event-driven architecture or
design in our application just for
protecting our back ends but this is not
enough the attack of the self-denial
actually concurrent is limited I thought
I could go to service and do whatever I
want and hit millions of requests at the
same time actually no there are account
limits and you would definitely need to
read that up you can find this in the
documentation like here it's written
down concurrent execution blah blah blah
blah 1000 that sounds like much but if
you are working for a financial
institute like Deutsche Bank or whatever
thousand concurrent processes is not
that much so I explained differently
let's say instead of thousands just for
and you have a user system that's really
popular gets four calls so lambda can
provide four containers for runtimes and
if at the same time but it gets called
me can't be processed has to wait
blocking system you don't want that so
this is shared-nothing lambda edition
you do not want to share resources even
Amazon resources so we split it we set
up different accounts this is just basic
AWS so
instead of just having one big account
for all systems you create a system with
a account for a user system with a
contra project the same for budget
really easy can automate this this is
boring let's talk about how we get there
I had the impression that not all of you
are doing lambdas right now so you're
maybe thinking about how can I move
there let's say you have a micro service
for processing orders and you want to go
to to a service landscape there are
three patterns you can actually use one
lambda you can use multiple lambdas or
you can really refactor the hell out of
your application so the first thing one
lambda with the dispatch everybody is
building things like this yeah it's just
a micro service maybe written a note or
whatever with those three functions
creating orders forwarding an order and
canceling an order and the idea is just
you put a lambda in front of it and let
it dispatch that's really cool because
in that sense you can configure the land
as you as you see fit your business
logic is clean and when there are
unspecific no lambda inside and you can
reuse your assets really fast but the
downsides are clear you cannot really
configure the memory settings for
example to match your specific lambda
one lambda one size fits all it's like
those t-shirts large extra-large so that
it fits everybody and from security
perspective this is also a nightmare
because your lambda has to basically
have all permissions of your
applications and we'll talk about this
in a couple of minutes you won't want
that so what's the difference
multi lambda with the same zip let's say
we have this once again this this this
microservice we just create multiple
numbers one lunda for example per rest
endpoint and by the way that's like this
service Java framework from Amazon
that's what that's what it does it just
wraps your your existing job application
and forwards those requests the ideas
that you have for each function you want
to expose a different lambda you can
configure lambda the way you see fit and
you call in to the application free
lunch
think so okay transitioning to that
solution is really easy but think about
flexibility that's still a monolith you
have to deploy you have dependencies in
your in your lambda code which you
probably don't need so from a security
point of view this might be really a
problem and deployment although better
than before it's still a nightmare
because you have to maintain this this
monolith in a zip file and you have to
deployed multiple times maybe in
consistencies you get the idea but the
complexity is handled are so what's the
holy grail multi lambda shared nothing
who is basically not aware what
refactoring us anybody let us change
great nobody so the idea is to reflect
the application you take your
application you split it or you throw
the way it depends and you create
different lambdas for different
functionality that's where you want to
end up that's that's the goal
as I said tiny names tiny functionality
that's not easy to get there but the
flexibility is obviously that what you
want you can scale your lambda exactly
as you want you can refresh them the
exact that you want you can size the
lambda as you want on the other hand
your Ops guys or your ops team might
have some problems telling what you are
doing instead of one application 200
that brings me to deployment you might
ask what's to deploy yeah a lot those
are the frameworks basically will find
on on AWS which support coding for
lambda like server this server is an
awesome framework which which wraps
basically AWS in in a nice vendor
agnostic cocoa but you will find that
you don't need any of them I think you
can definitely code against the Amazon
API but vendor lock-in yeah who is
basically afraid of vendor lock-in like
really that's the same discussion had in
the past with those guys locked 4j
versus Commons logging but back in the
day that 2003 stuff there was Commons
logging and abstracted away form from
the concrete logging implement
and did anyone ever switch the logging
implementation I didn't so really we
need to talk but you might be very just
be aware of that but what you need is
deployment tooling you can't do this by
yourself and avoid the UI every time
somebody speaks about lambda they show
you the Amazon UI by the clicker and
then their tests and and things get
created this is in nightmare because the
UI will just create things for you they
will just add permissions as it sees fit
and you have no idea what you end up and
your account will look like this and now
you can tell me what AWS done the basic
execution roles were six one eight crap
total mess so let's talk about what you
need to run a lambda you need code
obviously you need a handler the thing
the entry point yeah it needs a name
right you need to specify note or Python
or Java and it needs permissions clear
doing that with the command line is
possible you can see the different parts
where the name is hello world or stuff
like this but looking at our example
just this tiny fraction you need the s3
bucket you need three lambdas with maybe
an alias with tagging or whatever you
need roles and policies for all of these
and you need this Dynamo set up so
obviously this doesn't scale you don't
want that so real automation and you
have multiple options like tariffs on
terror forms awesome
forget everything I talked about just
use terraform and everything will be
fine I will just talk briefly about
Claudia J's and then we will look at
this nice little squirrel Claudia is
basically for no developers I guess us
Java developers you hate node and
JavaScript so I won't cover that that
much just basic if you are using node
use this then this is nice squirrel
that's Sam and Sam is the server let's
application model from AWS it's easy
idea the idea is you have a template
describing your application
basically you describe what your
function does what resources it needs
you have cloud formation that can
package everything the dependencies the
code and then it pushes it into
production or whatever wherever you want
it okay totally easy and it's obviously
Yammer
because XML is scrap and Jason scrap and
Yammer is King and I guess it's
self-explanatory you declare a function
some properties I guess the runtime you
will see it it's note once again and the
code and whatever so use that instead of
the command-line instead of the UI okay
but even that isn't a free lunch I said
it sucks yeah it sucks immensely because
just imagine you hit your infrastructure
with such a script and at one point it
just stops working and it complains that
some resources are already there or has
been modified in the meantime so how do
we debug that no chance rollback is an
issue sometimes but can roll back
changes sometimes it can't and you have
no reason to believe that this will work
in production so sometimes just deleting
everything is the only option you have
talking about state you have teammates
you have a CI CD pipeline if everybody
is hitting your environment who is
maintaining the correct setup you know
that won't suffer that won't be enough
but ranting about Sam there still this
point with feature completeness as I
said lambda is changing so fast and
Amazon is changing so fast that tools
like terraform although awesome they
can't keep up so there's always a delta
if you want to use new features like
like traffic shifting supported by by
Sam but not by supported by terraform so
just be aware of crappy tools
cleanliness is really important and this
brings me to test who is not doing unit
tests well really PHP developer
now this is an awesome project that's
some local the idea is stay seed
the idea is you execute AWS on your
laptop using docker cool right yeah
right see the version zero to six not
good
don't use that really cool project might
be worthwhile in a couple of years right
now you do not want to use test tools
that are just crappy you want to use
test tools that actually work like
j-unit or whatever but testing lameness
is really easy you can just invoke its
command line I just say which lambda and
then just a test event the cool part is
we did invoke this that way you see
receipt upload expensive receipt but we
hit our production environment with that
thing so that was submitted to
production so you need protection even
in the cloud you need staging people
tend to forget that and they just deploy
everything because some other guys said
you don't need staging you need staging
you need to protect production and
development and that's really easy too
because there are two steps you can do
the first step is just use host fix for
your functions so that yes a clear name
obviously you can even apply a and alias
or use account or whatever that's the
first step so you know that for what
building is on the death stage so no no
confusion there and if you want to
deploy that to production you over
Reuters and you can use aliases
obviously but what is far more important
is to clean up because I don't even you
notice when you when you start with the
lambda it's so easy to create stuff you
just say aw s lambda create function of
you go and then that's your architecture
just a mess and I have no idea what I
can delete how do you reason about that
there are things there like AWS basic
role execution blah blah blah important
I have no idea how
do you clean up and there's a tiny tool
that I really want to recommend that
slist lund doesn't get up and adjust
I've executed that on our development
stage and that lists basically all
functions in all regions of your account
and when it was last modified and the
last invocation and I guess I can delete
this test function you can see 240 and
we have lots of those things and
production never invoked or once invoked
stuff like this and we have no idea why
they're there just delete them and see
if things break and why should you do
why should you do this we'll talk about
security in a second you need to reduce
the attack surface you know everything
that you deploy is exposed and can be
called so you need to keep a tight
handle on that as I said reasoning and
it's about control secure user security
who security expert here somebody nobody
arises after hand so great server is
actually awesome for security and why no
student helper installing Ubuntu patches
that's one one thing at least you don't
have to Amazon has some student helpers
who are doing just that
but thinking about security I was
wondering how do you deploy a firewall
something like this without web or
applications or servers so we need
something else we need new and adopted
techniques for servers as I said the
increased attack surface is the problem
going back to our event model we can be
called from everybody and the caller
controls basically the access rights the
privileges they say if they are allowed
to call you so the good thing is to be a
psychopath just imagine everybody wants
to kill you every run sauce comes with
an axe that's the idea because you have
things like event injection
everybody knows secret injection right
who doesn't know secret injection
everybody awesome
and thinking about classical
architectures we have this layer cake
with UI services and persistence and the
clear control flow and at each boundary
you have classically some validation
magic where you check the the
credentials you check the parameter
but that doesn't exist in serverless
land you cannot trust your caller every
lamda needs the security boundary in the
validation boundary at every lamda needs
to parse its input and reject events
didn't expect you remember I said that
you have to pay for invocations you are
invoked and maybe you run for a second
or maybe just fine for not milliseconds
that's the amount you pay
that's gigabit gig about seconds this
leads to another attack namely a
building attack if you expose your
lambda even if you keep rejecting my
events you are still being processed you
are still being called you are still
running so you still have to pay so the
most important tip I can give you is the
building alarm set this up there are
reports out there for example where
where guy just left us his lambda
architecture running and he was hit
private project with 800 euros of cost
per week so I recommend you avoid that
and set up these alarms at the end of
the day security is like CSS who's the
front of CSS who like CSS ok couple of
hands
I hate CSS because I'm I can't do this
and when I encounter a web application
we have to start stuff it's just
different mark important font blink and
that's that's enough and the same estate
security you do not tend to take
security privileges away you just add
you know more and more and more and you
definitely need to beware Stack Overflow
examples like this one this is even if
you don't know I am from from Amazon
this is basically just saying you can do
everything that's the action part on
every bucket that you own that means
that function can practically
practically do everything this is what I
call a security shotgun that's just BAM
your infrastructure goes haywire there's
the principle of least privilege --is
that should be our mantra even in the
cloud first step is
be specific with your resources be
specific with the actions that you allow
that thing just says we allow only
reading objects from a really specific
bucket and the same is for dynamo tables
just a love writing to a specific dynamo
table with a specific name same for
other Landers but can we share this
configuration can we say we have a
couple of Landers that do practically
the same think the order example No
do not share sharing is really bad I
know your mother always said share is
good share is bad never share just write
a different policy for each learner but
this is work right not with the right
tuning back to our template this so this
looks like a mess I know but basically
we declare the role and the function in
the same file and we say the policy that
means what is this function allowed to
do even in the same file and then we
just reference that role from the
function so we have everything in one
concise place and use a security
watchdog because even our functions
might be small I know you you're using
maven so you have seen what maven and
spring download downloading the Internet
the same is with no projects just look
at this this is just the size of the
source folder and the resulting lambda
just 8k of source code and 8 MB of
lambda so there might be some
dependencies there and tooth like snow
can help who knows Nick nobody oh great
you like it
ok you should try it it can scan your
dependencies and it will tell you for
example in slack about any CVPs
directly so it's totally cool for every
project and if you're using service you
can use this plugin but as I told you we
are not using service the idea is that
that's this thing and allows us your
source code and generates the least
privileges that you need really cool but
I would prefer just think about your
privileges before you do that so
security is part of the development and
service right from the start you all
know this this this thing for
i Netflix Amazon I confuse it all the
time you build it you run it right it's
wrong
the idea is you build it you secure it
and only then maybe then you can run it
hot and cold start
there was a topic yesterday and then the
other service talk and the idea is
pretty easy I guess when an event
arrives we just have a new cold
container
you remember containers it's moved into
a live environment it can process the
event right easy and if it's warm it can
process the next event easy happens just
once right you have a cold container it
gets started it can stay there right no
no we have scaled by request the idea is
that an event arrives it gets another
event and another event and another
event and what landed a subscriber
request it will handle the first because
that thing is warm but it will
instantiate three new cold containers
move them out and process the events
that means that whoever called the other
functions the other events will look
like this waiting for your lambda so
cold start happens for each concurrent
execution so you have to plan with that
you have to know that if there are 500
executions in parallel that means 500
cold starts in the worst case but what
can you do we turn to Google as always
all stack overflow and now this is the
exciting part and you start looking in
the documentation of Amazon and what
they tell about when they start your
lambda and how often and you'll find
there's no service level agreement none
they don't promise anything it could be
that the cold start takes 20 minutes
could be hasn't happened but could there
are no details regarding what happens
there are just guidelines you know magic
wish thinking chicken bones let's look
at just three of them like a package
size I think your intuition would be the
smaller my lambda the faster the startup
right now here where some lambdas which
obviously contain a lot of crap 60
megabytes or
20 megabytes and we've compared them
with tiny lambdas and there was no no
correlation whatsoever maybe if your
lambda is 1 1 gigabyte big but then I
think you did something absolutely
horrible let's look at memory maybe
memory has an impact like you can assign
between 128 megabytes up to the 3
gigabytes and you can see in the lock
how much memory your function use so you
can find you in that maybe we found no
correlation
sometimes a function but more memory
started faster but we think it's about
the frameworks there's no way of knowing
that and then there's warm up the idea
is basically that you have a different
lambda like the blue one who's triggered
by a schedule every 5 minutes and it
calls your function every five minutes
keeping it warm you know stays awake and
Evon event arrives it can hand behind it
directly by an warm lambda great idea
right no it's terrible idea because it's
invasive you have to reject those those
warm up events you know you get cold and
say ok just a warmer call I will go to
sleep again and think about scale
request if you have 500 lambdas it
should stay warm you need to hit them
500 times to keep them warm and the most
irritating part is that you pay for
nothing you are just paying for an
invocation of a warm function that just
sticks around and the worst part is even
if your function is warm standing around
and being caught sometimes AWS will just
kill it anyway just out of spite
I think Jeff Bezos has a big lever just
kill all unless it's one time and
everything blows up sometimes this
happens after 30 minutes sometimes 40
minutes just no clear guideline what you
can say is the more memory you allocate
for your lambda the sooner it gets
killed well the more resources so what
can you do pray and measure that's the
only thing that you can do measure user
experience if you have a webpage you
know like like a web front-end like we
do then design the user experience with
this latency in
mind like with rest services where you
call a rest service and you wouldn't
block the user interface in that case -
we have some nice feedback same thing
here just design your functions keep
startup times really really really tiny
really fast so that you can actually
work with your language there's no other
guide and there until lamda is specified
in a more concrete way just witchcraft
and that's directly to my summary
serverless it's a hype train right and
this is Comic Sans because I'm serious I
think obviously this is the way forward
I think in five years this will be as
uncontroversial like docker today
everybody will look at you sadly and say
why aren't you using docker what are you
doing and similar service I don't think
that's service however we'll solve our
problems like designing distributed
systems are still hard I've not talked
about user credentials I've not talked
about what you actually can do with with
lambdas that call other lambdas like
distributed failover and stuff like this
you have still to think about that then
you attack scenarios like I mentioned
this the spec and API just imagine if
it's a database if you're interested in
the database denial of service and
attacked by your own lambdas talk to me
does the the IP be PCIP
attack the Chinese are different because
the language changes don't nothing else
if you start that way you need somebody
who actually takes care of that if you
have a cloud ops team or a deaf ops team
then you are doing it wrong you need
somebody who can help you with this
AWS lingo you can help you setting up
monitoring like just cloud watch it's
not enough the locks won't help you have
to use things like x-ray I won't cover
that here but you need someone who
actually is interested in that the same
thing with kubernetes a-- basically it
does devops sec don't write and if you
keep adding things to deaf abstract if
def ops sec business guy project guy
then we would feature team once again
but right now DevOps ech
that means instead of thinking about
security and releasing shortly before we
go into production we think it the first
iteration you have to start thinking
about security you're thinking thinking
about rollout right from the start
tooling is one pile of crap regardless
what which to appreciate everything they
are doing out there it's just all open
source so kudos but be aware that you
will face problems all the way and
surprisingly service might not be a
silver bullet it's a surprise for most
of our I know but it's not it's not
snake oil but not a silver bullet I
think if you tell me you are still
deploying a VM for certain things that
might be totally reasonable yeah I know
we all want service in our CV and a
resume but sometimes a docker image
might totally be fine so instead of
serving us I think of it just one less
server I have to take care of you know
you have to do capacity planning you
have to do security you have to do
everything you are doing with kubernetes
or with your on-premise solution it's
the same thing no difference just
different tooling and set billing alerts
I really mean that if you're playing
around that and your own credit card
especially if it's your boss credit card
go for it and see what happens but other
than that billing you know it's really
so that's everything I have for you
questions no questions the one question
yep yep
the question was what's the because
basically this is similar to Google App
Engine back in the past just one
abstraction even further I guess and
it's not platform-as-a-service it's even
something else yeah and what would be
would be the reason instead of going for
a path to a service that's your question
right I'm not quite sure right now
because it's just so so we haven't seen
so many large customers of us applying
that style the the thing that we are
using it for is for example like
applications where we have no real idea
about scaling what the script what the
scaling requirements are you know and
for example let's think something else
like typical example is ops glue where
you have a cloud infrastructure and you
need for example somebody uploads a new
requirement document to s3 and you have
to convert that to something else that's
a special place for for s3 that's the
first application we've built and to end
with no service whatsoever and the
advantage there is that you are
incredibly fast you know you have no no
approval rate between can I create a new
VP see you know the the networking for
for AWS there's no approval for that you
can just create functions you can create
your webpage on s3 and you have you have
never built anything as scalable as as
s3 you know as you never falls over just
it's there and regarding is this a
replacement for for something like
Google App and you know it's not I think
there will be issues like like Heroku is
an awesome platform but it reduces the
cognitive load for most of yours I'm not
a network expert if you ask me to to set
up like like software-defined networking
for kubernetes no idea with that you
don't care you just have an abstraction
on top it's just a thing you don't have
to worry about again with the with the
downside that there is no service level
agreement so you have to think about
that one question the back
I can show you in code it's just you're
just important basically you can I
repeat the question the question was I
mentioned that we do not expose an API
gateway so the general pattern is that
they recommend just exposing a proxy
rest resource that's just like like it's
just crap like exposing what you do
where HTTP and JSON so it's not not
nothing rest at all so it's just HTTP
Jason for Yolanda what you can do is you
import the AWS library in your single
page application and then you get a
credential from the phone from AWS from
kognito that allows you to call the
lambda anonymously or with a special
role if you have logged in so it's
really easy so instead of hitting slash
whatever slash create slash orders with
a with the put request you just call
create order the function itself so the
question was so I exposed a security
credential to JavaScript what you will
see if you go down the service road is
that your architectures are totally
different for example when we started we
had a function that took some JSON
payload and stored that payload in
dynamodb a document database you sorted
on the image but what we found out is
that you can just expose the Dynamo
table directly to the browser and it's
perfectly protected using I am because
the user logs in using I am yes the
credential is a token and then you can
just write to that single table with
that single key completely protected but
a completely different lifestyle if I
explain that to my security officer my
customer he will just kill me you are
exposing the database to the world wide
web but these are the new new new
patterns like with the image upload you
also always find the example where
somebody uploads an image to s3 to the
bucket and there's always a lambda that
takes the payload and then stores it in
s3 no crap you just exposed the bucket
for upload and you protect that bucket
it's not a public bucket it's like you
want to upload
give you the Express right for the next
five minutes you can upload stuff to
that pocket completely secure and I
guess more secure and everything else
that you are building right now question
answered good good thank you enjoy your
lunch</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>