<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Docker Tooling for JavaEE Developers by Xavier Coulon | Coder Coacher - Coaching Coders</title><meta content="Docker Tooling for JavaEE Developers by Xavier Coulon - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Devoxx/">Devoxx</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Docker Tooling for JavaEE Developers by Xavier Coulon</b></h2><h5 class="post__date">2015-11-11</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/tq58w0DYmgc" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so welcome everyone thanks for coming
for this last session of the day or last
tues in action session of the day we are
going to talk about dr. Turing for java
developers or for java delivers more
general about me my name is equal all my
official title is senior software
engineer which basically means that i am
a developer and i have some gray hair
don't get me wrong I like my job I just
keep my hair short I've been working out
for that for four years I've been
working on the diverse tools project
which is a set of Eclipse plugins for
java ee technology so we provide you
with open source plugins for GTA jax-rs
GSF batch cgi web services in general we
also provide you with plugins for mobile
technology or on cordova for a quickie
on for testing fold and well a lot of
other things as well yeah and as we'll
see later dhaka touring and also a bunch
of towing so i'm also working on the
doco tooling at the clip shot fog and i
have a side project which is called
lambda matic which is about using lambda
expressions to query and update data on
MongoDB so i'm going to give you a quick
introduction about docker so we all
share the same concepts and then we'll
go to the demo in which i will show how
we can use docker inside eclipse so the
main local components are images
containers diamond registries and
clients so dr. images dr. images are
really the build components in dhaka
images are written it on plates and the
interesting thing about docker is but
it's about docker images is what they
are made of an assembly of layers so
you're going to start with something
like a base layer which is the operating
system that you want to use so it may be
something like centralized federal
reddit entreprise nukes debian whatever
you like and then on top of this you are
going to add another layer to make a new
imagine
first image which will be maybe
something like adding your jvm on top of
it so it's going to be your second layer
your third layer would be probably
something like your applications of
something like white fly and then on top
of it you will have a fourth layer which
will be your application itself so this
is a combination of layer the
interesting thing about docker is if you
have multiple images which rely on the
same base layers are going to be cached
on your machine so you open you don't
need to pull them as many times as you
want to use it it's like if you use
maven it's like having a local cache of
your maven dependency Avengers on your
machine now dr. containers so dhoka
containers are the run components so
they are based on images so you take an
images and you say I want to run this
image and is going to give you a
container so your container is going to
contain your application and it's all
its dependencies interesting thing about
docker is that all your containers would
run in same of you can have multiple
containers in the same virtual machine
they will all be either 18 11 from each
other but they will share the same
kernel features containers can be
managed so you can start stop create of
course destroy pause unpause and one
very important thing about containers is
what they are immutable in the sense
that once you start you the container
you cannot change its configuration but
containers are also disposable so when
you don't need it anymore you just trash
it ok dr. Damon so dr. itself is going
to rely heavily on Linux features such
as namespace and see groups so doctor
needs Linux to run so if you have a
machine which is based on linux or
something like federer whatever on your
laptop or on your server you can run
look out immediately on top of it and
it's going to run as a demon if you have
a laptop with mac OS or Windows you will
need to run my daugher in
virtual machine so it will be something
probably like virtual box so if your old
box inside this virtual box you will
have linux and inside these clinics you
will have dhaka demon so dr. is going to
run as a demon and you are going to
interact with docker using some client
so it will be something like
command-line interface or some tooling
such as I keep stirring as we'll see
later or maybe some maven tooling that
is going to do some processing and we
have this kind of diagram here where you
see our local client is going to send
comments to a dhaka demon which manages
some containers and images and maybe
this doc edema is going to contact to
connect to a doctor herb to pull and
push images which brings me to the
college's three registries which are the
distribution components there are some
public instances such as docker hub and
you can have your private registry in
your company if you want to share images
but not with the outside world you can
see dokle registries as maven repository
if your fame familiar with this kind of
thing such as levinson troll or nexus if
you want to run it in your inside your
company ok so the benefits of docker why
is it so popular first you're not need
when you run the container you'll need
to boot and I proviso to for a single
container so you're going to save a lot
of CPU and memory and you're not going
to have this overhead of nye proviso
such as such as virtual box it's not
helping movies so yeah you have you
consume less memory and less CPU
resources and so you have a better
density and infrastructure in which is
asian ok let's have a quick stop
okay so let's carry on so other benefits
of docker you're going to package your
your full stack of your application
inside a single container so as I said
before we you have all these layers of
images so you are going to have your OS
your jvm your application server and
your application inside a single
container this container is going to be
portable across environments so you can
have this container running on your
machine on your developer machine and
you can have it built on your continuous
integration and deployment on your
staging production environment you're
not going to have your full application
inside a single container the pattern
for the car is something like having a
single process for container so maybe
you will have your application in the
container and your database in another
container for example but inside this
application container you have all your
stock OS JVM with everything you need
very specific and the thing is you have
the same stack on your machine and on
your other environments so this is a
good way to have no more but it works on
my machine kind of argument so now let's
talk about docker at eclipse so there is
some doctor tooling at eclipse which is
part of a project named Linux tools but
it also works on mac and windows as well
it's been put there at the beginning at
its inception because it's been started
by the Linux tools team at eclipse but
the tooling works on all platforms the
idea is to make Dhaka accessible from
eclipse and I will show you a demo just
afterwards the idea so is to work with
existing tooling so doko itself of
course but also the Commission mainly we
don't provide this doctor tooling does
not provide all the tooling all the
wizard that cover all commands and all
switches that you may have from come
online but sweetie focused on developer
experience and we'll see what we can do
is it and it's also you know the bedroom
the aim is to be reused by other plugins
so for example algebra stores there is a
team of people working on openshift
tooling
openshift v3 is really is a very base
Don doctor and Cuba needs and so sorry
using some of these tooling for the open
chiptuning so if you want to use dr. on
your machine the easiest way and fastest
way is to go to dokur common install the
new doctor toolbox which gives you
everything like dhoka dhoka machine doc
aswan daka compose and it's going to set
up a virtual box for you if you need it
if you need it on your machine if you
have makinwa or windows and for dr.
chillin at eclipse eclipse tokyo tooling
and you have two ways to grab it you go
to eclipse that oxygen earrings tools
and all you go to tools the bus that hog
or service tools on Eclipse marketplace
because we me or the same tooling and
it's now time for demo ok is it readable
and a bullet readable ok so we are here
in Davos tools for that three final and
I put some dokie tooling some very
latest dr. tooling that I worked on very
recently we have this you with this doko
Explorer view at the bottom left of my
window and what we can do is open the
connection this way down here is going
to detect automatically get text detect
automatically some settings on my
machine so I have environment variables
photo for boot to the curb because this
is what we initially supported so i have
this environment variables in mice in
script file so they can be detected but
we also have now with such button here
which is going to find some do
commissions but our running i have over
the Commission's that i'm not running
but i have this one here and i'm going
to pick this divorce demo one so it's
going to find my name of this
dr. machine I can test my connection and
if I needed to do something different
some if I needed her some custom
settings i could put if I warren linux i
could put some linux socket pass or some
tcp connection with some certificates to
connect in somewhere else i'm just going
to keep the default settings and so i
have this in my tree here at the bottom
left I can see my connection so i can
have multiple connections of course on
this review i can see that i have two
images but I pull some images as well
and so I can connect to the curb and
pull some images so maybe I know as we
the exact name and maybe exact tag of
the image I want to pull otherwise we
have this search feature of here and so
I could do something like wildfly search
for Wirefly so it's going to connect and
grab and give me all the existing images
and if I click on next here it's going
to connect again to dr. hub using
another API is going to show me all
existing tags but you what exists for
this for this image and I can see that
are already have nine dot 0 dot to dot
final so we are going to play with visit
with this one I'm not going to pull it
again so this is how you pull images ok
so I have this image now and I'm going
to run it so i get this wizard here
which is probably the one of the most
interesting wizards this wizard is going
analyzes does something like dr. inspect
and inspect the image I'm going to run
and he's going to show me all the
settings that icon can change so this is
a comment like I'm going to run I'm
going to publish all exposed port on
this machine so by default is going to
pick some random pots but if i uncheck
this box here i can see that port 8080
of my wall fly going to read mapped on
on port 8080 of this virtual box running
underneath so i can i can connect with
very specific port and i can do i can
connect to another I can link this
container to another contain
if I add one I can mount volume and I
can specify some environment variables
okay so I'm starting this container and
this container is started in Dhaka
running inside VirtualBox on my machine
but all the streams are sent back to my
console here and i can see that i have
some wildfly running I now have
obviously a container here which has a
random name because I didn't specify any
name from risk for this container so
it's going to be a veal corner this time
and i can see that i have one port which
is exposed so on my from the outside of
virtualbox it's going to be port 3277
one which is going to be mapped
forwarded to port 8080 on my container
so i can open this in my web browser and
i can see that i have water fly running
inside the container on languishing ok
so we I've shown you how we can start a
wildflower very quickly now let's do
something a bit more complicated a
little more interesting as well let's
say i have an application and i'm going
to deploy it on wirefly but I want to
have a post great database connected I
want to use a password database and I'm
going to use two containers linked
together so i have this application here
which I put from jabot central so simple
central is this thing you can see here
this manga view it's like a portal and a
welcome page that we provide you you can
search for example so let's say I put
something like jax-rs and it's going to
give me a list of a lot of examples that
come inside the bus tools so if you want
to start with some technology you just
type a jax-rs CGI jsf or whatever you
like and boom you get examples and if
you do something like you click on this
one is going to set up launch a wizard
and install this
project in your workspace so this is
what I've done here and i have my
application so we'll go to back to the
application a little later now white fly
as support for h2 database out of the
box which is fine but we won't have we
want to connect to post great database
and there is no post great driver in
wildfly so we need to build our own
image to include this module so we are
going to look at this so i have a first
docker file here which is going to start
from an existing image which is the one
we've run before so it's jboss wildfly
nine dot 0 dot to dot final and what i'm
going to do in this dr. file dhaka file
is what you use to build images ok so
i'm going to say that i want to create a
post gray module directory which is
going to be this one / opt / 06 @ r
theta and inside i'm going to copy this
driver and this module detects ml file
so i'm going to have this new this
driver in my wildfly server it's like
I'm going to customize why fly for my
needs okay i'm also going to replace
standard on dot XML with this one here
which is going to contain and I'm
scrolling down until here is going to
contain a new data source definition
here and as you can see we are going to
use some environment variables so this
is the future of firefly whitefly you
can have something like this in your
standard standard under xml so / bracket
and dot something it's one flyer thought
up is going to look at environment
variables and so we have this specific
environment variables with some
something that looks a bit weird like
positive way and those called port etc
so we have tcp advice tcp port and here
username password we look at this thing
just afterwards but this is how we
package however whitefly how we build
our new world Phi and add some specific
custom configuration so now I have this
docker file and I'm going to write it as
a docker image so this is the first time
we run this docker image and so as
you've seen before on the diagram we are
here as a docker client and we need to
send this docker file and all of this
context this directory with while fly
direct to document which is going to do
the real processing run eclipse is not
going to do any processing okay so we
select the connection and we are going
to give a ripple on image name which is
going to be wild fly dash post grace ok
and I'm going to give it the same target
I'm going to give this one as my initial
water fight ok and ok it's already done
well actually it's very fast just a
matter of cutting a few files and we see
now here but invite we have an image
whitefly post gray here and I think by
the way we can inspect it's like
inspecting we can see something like if
you do something like dr. inspect for
coming online we you will have same same
result ok so we have an image which has
support for postgres while Phi is going
to have support for progress but as a
developer I want to have a little more
we can we can use this image on this
machine and we can share it with you can
we you can use the same image in
continuous integration and maybe power
production environment but as a
developer I want to have some extra
features for my development purpose such
as maybe debugging managing to publish
some stuff etc etc so i have this second
docker file which is extending the first
one the one we just created before ok so
it's whitefly postgres on the first line
and this time I'm going to expose to
overport 8787 for debugging and 99-94
management here i'm going to specify
your volume which is a the path for this
volume is a deployment directory for
wife live this is where whitefly looks
for work files or exploited war files
and I'm going to use a custom command
which is almost the same but with
especially this dash dash debug flag
which is going to say that we allow
remote debugging at at startup so once
again we run an image and i'm going to
call it this time for wildfly post go
dev ok so of course I made the typo
somewhere ok i mistyped while fly my my
bad ok so it's not a big deal ok so now
i have my image with ok so it story will
keep that it's a long name but talks the
same ok so now we have our wildfly dash
post greater development image ready to
run so i'm going to start post gray my
post go container from my database i'm
going to give it a name this time i'm
going to need name it post grade on
progress ok let's go for postgres i'm
going to pass it some environment
variables so it will be post voice user
name
I'm going to be very odd region original
in SE passe gray and post great pass one
and it's going to be something secret
okay so we start this container and so
now we have a database a container post
great container running and we can see
that well though some port but in fact
we don't really care about it okay now
we can start our wirefly container so
let's call it while fly and it's not
make a typo night this time so as you
can see we have this command it's going
to use this comment with dash debug we
are going to expose all ports and we're
going to keep the same mapping 80 80 80
and he 80 90 cm 8787 exit rockstar i'm
going to link this container this one
flag content not my possible container
and this is where the postgres name that
we've seen before novel in variables is
really matters and here i'm going to
mount our volume so this container
volume is going to be mounted on my post
and going to be this deployment director
here okay so why fly is starting and we
have here as you can see we have this
post gray sequel yes database connector
pool of connections which is ready to
use so we have our infrastructure we
have a post gray container while fly
container linked together everything is
ready for deployment so I have my
application here if you remember this is
oh yeah maybe I can show you so if I we
don't have support for the curl exec yet
that's something we are working on but
for now i'm going to use common line so
let me do docker PS and I have wirefly
so if I do something like Dachau exact
dash I key so while fly and I'm going to
execute a bash inside this container and
if I do something like and web post
grace so I can see on my all some a lot
of fun vironment variables oh is it bit
okay a lot of fun environment variables
but I've been created by dr. when
linking this post great container and
this environment variables are the one
that's the ones that we've we can see
here in my standard XML so this is how
things are bound together okay so let's
move on quickly so i have my application
here I made a few changes including this
one here in persistent that xml i'm
using this possible sequel datasource
and change a few things here so I can
see what's happening and i'm going to
create a server adapter i'm going to
connect to a Wi-Fi nine so this is going
to be changed afterwards so one thing
you need to be very careful about is
here you need to check this box server
life cycle is externally managed because
when we create this server adapter we
are not going to start a new server we
are going to connect to an existing
server i'm not going to deploy my
application now because i need to make a
few changes here I need to change my
Austin I'm and put the I do IP address
for my vm so it's going to be 168 9900
okay I don't need it and it is this type
on deployment here i'm going to select
this and this to say that i want to use
no it's
right ok so now i have my server i'm
going to add and remove this application
so this application is going to be
deployed on a local directory which is
mounted and my wild flag container can
see it so so this is where it does did
it work oh sorry I forgot to start it I
I need to start ok so let me publish ok
so you see my container just so just so
that an application has been deployed
and can access to it can deploy it
actually and if i go here to my server
adapter i can show in in my web browser
and i have my application deployed on
the container in wild fly in dokur
connected to possible container if we go
very quickly i had a few things a few
extra things to show you what I won't
have time I can put a breakpoint in my
code and I can run a remote debugger
using connecting on the port 8787 that
we've seen before and if I go and click
on refresh here I can debug my
application in the container ok I didn't
have time to show you how other things
but I can I can also my point is you can
debug your application deployed new
container on in indica and I have just
two minutes left so i'm going to the
conclusion live weird i do not have them
to show you I can show you later so
we've seen that we can manage
connections to the kadhi means we can
search input images we can build custom
images using docker files you can run
images and we can have specific ports
volume links we can manage containers
stop-start pause unpause
hear what I didn't show everything but
you get the idea and we can use jeebus
tools server adapter and live reload I
didn't have time to show it but I can
show it later to progression application
and we can use a Eclipse remote debugger
to connect to a computer bug in a
container so if you want to know more
about this let's get in touch together
and we have well Jabbar Susie is very
consistent as you can see we have ad
java stools on Twitter and duboce tools
on IRC if you have any question you can
ping us here on my Twitter under or on
diverse tools dev a list and Linux tools
dev list as well and we have one minute
for questions if anyone has a question
okay no question okay so thank you very
much I will appreciate any feedback if
you have a good feedback you can write
with this talk of course if you have a
bad feedback as well but if you have
some feedback I will be very happy to
hear from you so i can improve my
presentation thank you very much and
other good develops</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>