<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Thymeleaf by Daniel Fernández | Coder Coacher - Coaching Coders</title><meta content="Thymeleaf by Daniel Fernández - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Devoxx/">Devoxx</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>Thymeleaf by Daniel Fernández</b></h2><h5 class="post__date">2015-11-11</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/GVq0uzpHYoQ" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">good evening to everyone first of all
thank you for being here I am Daniel
Fernandez I am the author and project
lead of time leaf and that's what we are
going to talk about we're going to talk
about time leaf about what it is in
about how it helps bridging the gap
between developers and designers with
server-side templates actually time leaf
is a quite large technology and we only
have a 30 minute slot so we're only
going to be able to cover the very
basics of it
so there's many more the time we have
suffered on what you're about to see
here so if you didn't know about timely
before coming to devoxx I really
recommend you and invite you to go to
the website and have a look at
everything the time we can do for you ok
so first of all what is time live time
leaf is a library ok it isn't it's a
dependency it's something you are to
your project is not standalone software
and it's a template engine so that
whenever you have your data on one hand
and you have your Styles your images
whatever you want your application to
look like on the other hand you want to
match them in order to have style the
data data is visually appealing
that's what user is template engine and
it is an open source template engine and
it's quite actually quite new its first
version was only published four years
ago currently we're in version 2.1 point
4 but 10 days ago we just published the
first peter bit alone of time live 3
which is a complete revamp a very large
steep step forward in in timely
development bringing many new things it
processes HTML and XML and you can do
some things marked in green throughout
the presentation that means those are
things that are new in timely three
parts of timely 3 we will also be
processing JavaScript CSS and plain text
you'll usually view it around as the
view layer of spring MVC applications
the spring guys use it quite a lot in in
guides and tutorials and you should be
able to diffuse you to be to see it as
the view layer of MVC 1.0 applications
jsr 3 7 1 whenever it is a reality that
should be 2017 so what does it look like
at least when we are talking about
processing HTML
it should look pretty similar to that
okay that's a piece of code that might
look quite familiar to anyone who is who
knows HTML you'll see a table the head
TR th those are HTML normal standard
HTML tags and you see some contents and
some of those tags like name price
oranges that's something we're going to
type in text in a moment we're going to
call them like that but you also see
some may be unfamiliar attributes and
family if you don't know time live like
th text and th each in the block of code
in the bottom at th text those
attributes are actually how timely
inserts it's logic into templates it's
how time live does in order to make
templates do things okay
a th text is very similar simple
attributes probably time lives most
simple attribute it simply says evaluate
this expression and whatever comes out
of it of the result of this expression
use it for replacing what is being
expressed as the body of this tag so
those two th text you see at the top
which are actually message expressing
internationalization expressions will
simply replace name and price with the
internationalized versions okay I think
also thh which you can see in the bottom
teaches is what it looks like it's an
iterator it will take the all products
collection or iterate or iterator or
iterable or whatever it is and iterate
it and for each element in that
collection or whatever it is it will
create a role in the table for that
product and for approach it will output
its name and its price with two decimals
which is what is wrong in the other th
text so those are probably two of the
most basic attributes and time lifts
they will their servers in order to
understand a good part of the code that
is going to be presented in these lights
which is anyway very simple but anyway
we can start talking now about what has
actually driven us into this room which
is how this technology how time live is
going to help us gap that brie or bridge
that gap between developers and
designers and and in fact in order to
talk about that we first have to
understand what is the the design
development round trip issue okay the
design development round trip issue is
what happens when you your designers the
designers in Europe in your company or
maybe in your team or maybe you as
different in a different personality
created very nice looking design
probably an HTML design like the one you
see there that's an application from
spring guys that's best bet clinical
sample application for spring and when
you have that you have basically what
the customer wants okay you have you use
those prototypes those designs in order
to reach to a design agreement with your
customer in order to know that that's
what the customer wants the application
to look like and once you have that once
you have well what the application look
wants to look like probably the customer
will only last two days and wanting that
but anyway once you get there you you're
going to start coding you're going to
start converting that into things that
work into templates they're not going to
be HTML prototypes anymore and once you
do that normally this is what happens
okay this is an example for example in
JSP when you convert normal nice-looking
HTML into working template with many
technologies you'll find out that that
HTML is not HTML anymore it's just cold
it's cold which is perfectly
understandable by a web server that is
processing that code in this case
something like a tomcat or whatever it
is but it is no longer usable as a
design artifact because if you try to
open it on the browser just by
double-clicking on it that's what what
is going to happen okay the browser will
not be able to show it anymore so we
cannot use that class the design
prototype as a design agreement artifact
anymore
this is something that has been
happening for lots of years then we have
even justified it a bit during many
times saying things like my HTML is not
HTML anymore that's ok because my design
phase has finished now I'm by oh man a
different phase which is the coding
phase the problem is that in reality in
the real world design and finish are not
words that really work well together
normally design is never finished and
the customers will most probably want to
do style changes graphical design
changes again the problem with that
happens is actually twofold first its
who is going to do those the style
changes and second is how okay normally
in many cases its developers who will
who will end up doing those style
changes most probably because designers
will not want to know anything about JSP
code but that's not the big problem
actually the problem is how developers
are going to do those style changes many
times we will end up restarting the
application every time we want to change
the shade of blue move a pixel around
from any place in our application and
even if we have tools that allow us to
not do that like for example the rebel
things like that any kind of refreshing
mechanism we will still need Java code
that works that allows us if you want to
talk with a customer about specific
template that allows us to get to that
template if that template is shown in
step four of a specific navigational
sequence we need to have steps 1 2 &amp;amp; 3
working at least working enough for us
to be able to reach there and talk about
the design in that step ok so that is a
way of interleaving code and design in
non adequate weight so it must be better
ways actually probably there are many
better ways but one of them which is the
one that time live applies is natural
template natural template is not a term
that I coined it is something that I saw
on Wikipedia once when I was in the
early stages of timely development I
went to that page there the comparison
of web template engines and one of the
columns of the characteristics by which
they were comparing the template engines
was natural template and the legend says
templates can be documents as valid as
the final result
the engine syntax doesn't break the
document structure and then I thought ok
that looks pretty much life for time
live does so from that moment on I
started saying that time to does
template end oh sorry natural template
but the question is okay if you want to
do natural template how are we going to
apply those natural templates to HTML
code and the trick is
using non-standard attributes again
non-standard attributes are those
parties that do not come in the HTML
specifications and have the
characteristic that browsers ignore them
completely if the other browsers will
act as if they weren't so we can use
them from timeless perspective we can
use them in order to inject in our
template the logic that we need our
templates to have in a very harmless way
okay and they are better than non
standard elements or non-standard tags
elements in in XML jargon because
non-standard tags have an influence on
the document object model on the dawn
they will actually do if you do if you
create new tags that are non-standard
they will actually affect the tree of
nodes that the browser will create for
your pages so they will affect the way
your CSS is apply your style supply and
the will affect the way your JavaScript
scripts execute so no standard
attributes are much more harmless than
non-standard tags like for example C for
each C out etc actually in time in html5
there is a standard way sort of standard
way for doing this kind of thing of
course we cannot call an welcome we
cannot talk about non-standard
attributes because html5 allows us to
create custom attributes as long as we
prefix them with data - those are
perfectly valid html5 attributes and
time leaf allows you to - to use both
syntaxes the html5 valid one and the
namespace won't be a the
the one we saw before the result will be
always the same it will be as if nothing
was there I said we just have an at
least item like the one you see in the
bottom of the slide with just the word
apricot in it okay so now we have this
pin now we can prototype and we can have
piece of pieces of code like we want we
see on the top of the slide in which we
have an image tag with an SRC attribute
the standard SSE attribute telling the
browser to go and grab a PNG from
somewhere
somewhere and show it on the on the on
the screen and then at TH SRC which is a
timely fat rib ute that will evaluate
the expression that has inside which is
a link expression and use the result for
creating a new SRC attribute get the
result of this is that we have a piece
of template that works both statically
and dynamically it will work when we
just double-click on it so that the
browser can open it and it will work
when we put it on a web server and a lot
of time relief to really execute it but
even if you can't do that you may think
okay it's great it it looks like a good
idea but I'm going to duplicate a lot of
attribute so if I have to create method
will my template start way I'm going to
create a lot of code that they don't
really need if I'm not doing prototyping
and you'd be right
that's why prototyping is optional it's
completely optional there is no need
that you do this there's no need that
you have an SRC and then a THSRC you
don't need prototype in text like that
name price etc that you saw on the first
block of code and you don't even have to
use th text for output in the result of
expressions you can use if you see the
second TD in that block of code there
welcome to our issue of comma that thing
you see between double brackets that's
an inline expression that's something
that time if we'll execute and we'll
just output just there okay so in that
case that it will work pretty much like
JSP or any other
so first I'm telling you that natural
templates is great and now I'm telling
you that not doing natural templates is
always great so what should we do
okay normally which is in the middle in
real world you will be quite safe it
would be quite sucessful compromise if
you just got those important templates
in your applications those both those
that are most representative in order to
reach to a design agreement with your
customer and do prototyping with them
and do them in the way that natural
templates allows us to do and then the
rest of them those that are not needed
for talking to the customer just do them
fast do them with the less amount of
code that you have that you can the
important thing here is that with time
if you have the ability to do both you
can do prototyping for those templates
are adequate for this kind of
interchange with your customers and the
rest of them you can't just ignore any
kind of prototyping efforts okay so well
until now the things that we have seen
until now are the very basics of time
leaf and also the very basics of how it
bridges the gap but there are many more
cool features that take time it's a bit
different okay
and that actually build on this
capability so let's see some of these
features some of these things that make
time if a bit a bit different than the
others
first of all pitch composition pitch
composition is something that is very
important for all of us it is very
needed it allows us to avoid duplicated
code that thing when you don't really
need in your applications to write your
head around your filter and your menu in
every template you just want to do it
once then use it elsewhere in terms of
there are many ways to do it okay the
most immediate one is by using what we
call the fragment insertion mechanism
and fragment insertion is performed by
three attributes which are th insert
teaching clearer than th replace its
syntax which is the one that you can see
on the upper block of code it's very
simple it says first the name of the
template from which we want to extract a
fragment and then the name of the
fragment are actually the selector of
the fragment in this case we're telling
thyme leaf to get a template called
footer for the something it will be
resolved by a template resolvers and
then from there from that footer
get the fragment called copy the most
simple way of getting a fragment called
copy is expecting that there will be
somehow in that photo dot HTML there
will be a th fragment attribute saying
copy which is what you can see in the
bottom of the slide but there are more
more possibilities on that for example
we could use something called markup
selectors in the th replace that you see
there the first we are selecting the
template not by its name like food like
we saw before but by a complete URL
that's something that we can do we can
make time leave call a complete URL and
use its result as a template and then we
have selected the fragment not by its
name not expecting a th fragment there
but by using a marker
selected by saying div dot panel that is
very similar to CSS selectors to
JavaScript selectors
it's a div tag that has class banner
okay we can do that with IDs we can do
that attribute based we can do that
hierarchy hierarchy based there is
actually it's a pretty powerful
mechanism the what what allows us to do
this thing is precisely if you look at
that example we can be calling a banner
server that can be company-wide used by
all the applications in a company
possibly a public facing portal of some
kind and we can select the piece of code
that does know nothing about time leaf
you don't need any kind of time leaf
code in the fragment you are retrieving
you can just get any kind of HTML and
bring it on as if it were a fragment
okay
what's more we can add parameters to our
fragments if you have a look at that
fragment declared in the first block of
code joiner journey can take a couple of
fragments sorry a couple of arguments
like warm var antiva then to whatever it
wants with them and we can call that
fragment that join a fragment from at
each replace or a th insert by
specifying values to those to those
parameters username username that's how
we can call the fragment as if it were a
function what this allows to us is given
that fragments can live not only in the
same template as it happens here that's
why nothing goes with before the double
the double column not only the same
template but fragments can be in all the
templates and fragments can be elsewhere
for example in a Java file we could
create a jar file with a lot of
fragments that are for example used
company-wide and know the application of
the same company and then just bring
them from those jar files and use them
as if they were functions in our own
templates for each application we can
create the libraries of fragments that
composition at I as I told at the
beginning what I was explained to you
was just the fragment insertion
mechanism it's just one of the ways we
can create composition we can do
composition one time leaf you can also
do hierarchical layouts with something
called the layout dialog which is a
dialect name in our ecosystem pretty
popular for example spring boot uses it
we can also do time leaf sorry tiles to
integration if you are used to the
hierarchy to the hierarchical templates
of tiles you can use them with time leaf
and it's also something called time ojs
with it which is a JavaScript library
that allows you to perform you fragment
insertion statically this is it can
actually when you are not executing your
web server when you're just displaying
your templates statically from the
browser by for the means of prototyping
it can retrieve fragments of time leaf
template and insert them with JavaScript
without the need to execute your web
server so that even for your prototypes
even for your natural templates that
you're using for static prototyping you
don't really need to duplicate a lot of
code okay so more things now different
topic this is something new in time leaf
3 from terminal 3 we can do text
processing text processing means
processing templates that are plain text
ok of course given it is temp plain text
we don't have tax so we don't have a way
a very immediate way of placing
attributes like th text or th th each so
we have to devise a new syntax which is
actually pretty similar to tax okay but
it's using brackets in this case where
you see the th 6 the th each that it is
an in sort of placeholder with brackets
this allows us to create templates like
for example for text email if we wanted
and it works in pretty much the same way
as if they were HTML templates time leaf
will process it having most of the
features that you have available in HTML
templates and an even more because this
text processing extends for JavaScript
and for CSS files so now in terms of 3
we can even we can consider javascript
files and CSS files as template and that
allows us with a bit of intelligence of
added intelligence by time leaf to do
things like javascript natural templates
we could have in a javascript file a
piece of code like the one you
see at the top of the slide which which
is a very basic functional doesn't do
anything interesting but it has an
expression which is session dot user dot
name and that expression is in lined
that's why it has those double brackets
it means execute this and output it but
it is also inside a javascript comment
and time leave will understand that and
whenever it finds it it finds it not
only it will execute that expression and
output it but also it will know that it
has to remove everything that goes from
the end of the comment to the semicolon
so that the end result looks like the
one you see in the bottom of the slide
so will finally have something that will
will not put to us the name of the user
that is currently on the session so this
way we can have JavaScript files that
work both statically both when we are
just importing them from our prototypes
and dynamically when they are being
served by a webserver ok we are here we
are a bit bridging the gap between the
JavaScript developers and the HTML and
java developers again and more another
thing that is coming in time leaf 3 and
say is coming I'm playing a bit the
sales guy here because this doesn't
exist yet ok this is not in beta 1 it
will be imitative it's the couple
templates the couple template is one
also they of the core features of
terminal 3 it will allow us to have
templates that are pure HTML pure HTML
means no time leave code at all so we
will get whatever our designers give to
us whatever it comes out of there
Dreamweavers or whatever they are using
and we'll just use them as template how
by creating a separate file that will
contain several directives inject
directive like the ones you see there
that will actually inject or specify the
attributes the logic the time-life logic
that has to be injected into the pure
HTML file and the way it will do the
data injection is by means of selectors
that those cell attributes that you see
on the inject tags our markup selectors
like the ones we used for fragment
insertion for example the first one
slashed here basically means the roll
the table row inside whatever has an ID
with value detail so it's pretty
straightforward
that way we can just have whatever comes
from our designers do not touch it allow
our designers to evolve it without us
touching it without letting our
designers have to understand any kind of
time lift code and just continue using
it throughout all the design lifecycle
of the template this is a well this is
actually the way we can better or best
bridge the gap between developers and
designers by allowing them to do
completely different things
okay okay we're actually reaching the
end of the talk because I did this very
condensed I was only given a 30-minute
slot so there are many awesome things
that
taimanov can do and there are several of
them that I wanted to mention quite
quickly first time life allows you to do
offline template processing so it has no
hard dependency on servlet API you can
just process your templates from a
server that is not a web server just a
server for application create emails for
example things like that it has full
spring envision integration it can
perform spring form Biden you can't form
spring message resource output him by
integrating with Springs
internationalization mechanisms it can't
perform what it can call the spring
conversion service it can use the spring
expression language which actually it
uses and many other things it is very
extensible you can define your own
dialects we call them dialects which
have basically packages of processors or
preprocessor post processors we have
those now that will add your own
functionality to the time leaf template
you're wrong attributes your own
whatever can be elements to so that they
do whatever exactly you want to do it is
testable because we have a tool called
time leaf testing that will allow you to
define tests for your templates as text
files mer text files no Java code
involved that will tell the time leaf
testing tool what you expect to be the
output of your templates if you give
them
specific input so that you can execute a
lot of these tests automatically as a
part of your continuous integration
efforts okay so it's automated testing
for your view layer and you will be sure
that what you're doing in your
application add the view layer to is
working the way you want we have a lot
of documentation we have tutorials
articles we even have an interactive
tutorial that you can use fallen in the
thyme leaf syntax online with exercises
we have something to me we have an
eclipse plug-in and also IntelliJ IDEA
has support for time live since version
14 and there are many many things III
again I invite you to visit the website
and see everything that we have there
and we don't really have well I think we
have five minutes for questions if you
have any before going to see some drones
crashing into the world I don't see much
anyway if someone's raising his hand I
won't see it
one question okay if the in time lift we
if this change in performance there is a
huge change in performance actually
would we have rebuilt the the engine the
entire engine internals of the engine
have been rebuilt to have going from
dom-based engine an engine that needed
to create a tree for your template in
order to process it to one that works
completely event based so it's now at a
minimum four times faster but it can be
depending on the template many times
faster than hundreds times faster in the
templates very large and actually right
now we have developed it in a way that
you even it will be even start to output
results of processing the template as
soon as it starts passing it it will it
won't wait until everything is done it
will be very fast and very streamlined
so yes there is a big change in before
us
yeah well actually a standard Java
Enterprise it means as of now it means
the future MVC 1.0 because standard Java
Enterprise will tell you now that you
should use JavaServer faces in the
future in 2017 it will start you to say
it will start to tell you that you
should use or you can use MVC 1.0 which
is Djoser 3:01 which is in early draft I
think right now by then yes it will be
usable in the MVC 1.0 because actually
the reference implementation of MVC 1.0
which is called ozark already includes a
time leaf module so yes we are we are
going towards being able to use time
live both in the Java in the standard
Java EE world and the own on the spring
world ok nothing else thank you very
much</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>