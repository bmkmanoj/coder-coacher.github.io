<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>React, a new way to create web components by Mathieu Ancelin | Coder Coacher - Coaching Coders</title><meta content="React, a new way to create web components by Mathieu Ancelin - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Devoxx/">Devoxx</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>React, a new way to create web components by Mathieu Ancelin</b></h2><h5 class="post__date">2015-11-11</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/p99NwRgkTl4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">okay hi everybody thanks for coming to
my session I'm Matt Jensen I am
developer at sorry I mostly do Skylar a
java and a lot of web app stuff with
JavaScript I also contribute to some
open source project like corrective
couchbase and i'm a member of the
platoon on dragon friends so today we
are going to talk about reacts so i just
want to know who already played with
react on the tutorial stuff like that
okay not so much and who is using react
in a real-life project or even in
production okay I think nobody okay okay
great guys okay so react is a JavaScript
library to create views to create user
interface it was created by Facebook in
2011 and open open source two years
later so each day it's just a view a
library to create views it's not a full
stack frame work like angular or amber
there is no HTTP client there is no
person correction or whatever is just
rendering view and response to user
events like clicking or keyboard input
stuff like that so it's used i at
facebook on the facebook web app
obviously and in many other back end
application or internal application a
good example is the Instagram web
application it it's actually built built
with react and Facebook claims that they
are using around 15,000 components in
production there are also a lot of big
users of react like Netflix not doing
everything using react kisara sony yahoo
hipchat read it there is a lot of people
that are using Iraq right now so there
is two main concepts around react the
first one is that the view is
declarative so you have to express what
your view must look
like at any point in time given some
input data and whenever this data
changes react we'll just run the rear
end out the whole stuff but it will be
clever enough to only impact the dump
where things actually changed so let's
take an example here we've got a
favorite button that we can toggle if i
want to write some code to make this
button using imperative code I have to
check first if there is a favorite if
there is not already a gray button on
the screen and then i can do whatever i
need to do remove the whole star and i'd
add the great star and if there is no
favorite i need to do the opposite
that's perfectly good code it doesn't
mutate the damn is there is no need to
but it's just a nightmare to read a
nightmare to to maintain it's just
orrible code I don't want to write this
code I want to write simpler stuff we've
racked you just have to tell what your
view will look like whenever there is a
favorite or not so a great star a white
star button react will write something
like that and when you write something
like that real react will do the boring
code we've seen before in place in place
so that's very cool so you might wonder
what about performances because react
runs out the whole stuff each time you
change the input data so what about
performances so let's take a more
complex example here when I toggle the
button the text here changes to to be
efficient react use a virtual Dom to to
work so the virtual dome it just is just
an in-memory structure that looks like
the DOM and whenever react will render
view it will take a snapshot of the old
view it will run down the review I make
and make a diff between the two to
compute a list of change to impact the
actual done and it works very good so
for our component
we have container that is give an image
a span and the text node and with the
react algorithm of an direct virtual Dom
the only thing that will change when you
toggle the button is the attribute the
source attribute of the image the class
attribute of the span and the text node
inside the span so the virtual damn it
just is just a trick a technical trick
to make it work perfectly but it's are
you to write simple code and to be
efficient at the same time so let's go
the second main concept of react is that
everything is a component so we've react
you build components you don't assemble
some kind of templates or stuff like
that you write a small autonomous
reservoir and compressible piece of code
that you assemble together to make
bigger components and so on and so on so
let's see what it looks like so here
I've got a rag component it's created
with rag great class and there is a
render method that returns some kind of
weird HD HTML so it's actually pure
JavaScript but with the help of a little
preprocessor you can write your
JavaScript this way to looks like HTML
so let's write our own component here i
will call hit hello and i will use it
here so i just that my company field is
hello so I just have to write something
like that to use it I will change the
code here to see it happening and it's
working my component is rendered just
here so now I can play with it I can of
course have more than one instance of
the component that's something we can do
we can have some dynamic code using
curly braces expressions so here I've
got the date and I can reregister some
anglers to do whatever you need to do
here I I will try to refresh
first date the component and now i can
click on my component and change the
value so that's pretty simple actually
there is something funny here in this
slide are a pure react application i use
a library called spectacle to write my
slides so these slides are react
components so I can do something like
that it should work ok and i can write
something like oops and it should work
yep it's working it's pretty nice so rag
doesn't care what are you components you
can mix whatever you want it's just a
component assembling and it works so now
let's see how to put some data inside
your all components so the first way is
to use properties so purple properties
are defined at component instantiation
it's like HTML attributes when you use
it in jsx the word HTML language you can
define some default value and you can
also validate your properties to tell
developers that they are you using the
the component in a bad way so let's see
which works we are going to make a more
clever hello component here I'm using it
and I will try to display the property
called who I will give it a default
value
that will be entered and try it so okay
it's working and now if I want to pass
an actual value to who i'm just using
that as an HTML attribute and it just
works there is also a very special
property in react it's called children
so the children allows you to do
something like that oops so I can make a
list of language I like to use oops and
if I save I've got the list of my
language inside my components I can wrap
other components inside my components
and that's pretty ND the second way to
put data inside your components is the
state so it represents the internal
state of a component so the state is
mutable on ideally only by the continent
itself but sometimes people are not
ideal and any mutation of the state will
trigger a new view around the ring and
the actual done staff and the diff stuff
etc etc so let's try to build a like
button like in Google+ or maybe Facebook
groups and no so copying the g6 and
using it here ok so now I want to
display the number of Lights I've got so
I will use the state to do that I will
have an initial value for the state
okay it should work now is there a type
of something where yeah it's like her oh
good one okay so it should work ok so
now I can add a button this button is
just our bill I will had some style ok
so now I can have a function that will
mutate my state oops and pass the whole
value of likes and had one and now I
just have to had a handler to make it
work and it should work no just that
like sorry so it's working ok so each
component can be aware of its own life
cycle so you can know whenever the
component will be mounted into the damn
whenever the component will be updated
from the down into the dam and whenever
company would be unmounted from the dom
there is also a very interesting
function that is called should update
component that you can define and by
default returns true but if you returns
force it sells to do react give
algorithm that the component did not
change so don't take it into account in
your diff algorithm and it's just a huge
performance boost for your component so
let's see oh we can use a component in
mount for instance i get a value here
I will pass value here and now if i use
component in mount so it will be
triggered whenever the component will be
mounted into the down i will add to it
that i want to oops mutate the state and
assign a new value to value so if i save
i will have the default value and two
seconds later the new value so it's the
it's this kind of thing you can do with
the the life cycle here it is here is a
good way a place to call some web
services or something and you might
wonder how to use web components inside
you are react components so web
components are supported as j6 leaves so
you can use web components inside your
components but you can't expose react
component as a web component if even if
it's a good fit it's not supported we've
react out of the box you have to use
some community lips there is a lot
someday on the internet so I you can
find one and the react team is working
on the integration so it will happens in
in some time if you are the kind of
person that write tests I hope you are
there is a test util package in react
that you can use to render your
component inside some tests on viral
loans to make some assertion on it and
to simulate clicks event in general on
your components it work it works with
all the tests runners like jasmine
matcha or even just the Facebook test
runner and the ecosystem of react is
growing every day it's it's it's like
madness so I will not spend too much
time on it because I don't have much
time if you want to
no more about it I suggest that you go
on github on the awesome react project
it's it's a curated list of tutorials
libraries and stuff on racks it's really
really good and it's a good starting
point if you want to learn react so now
we are going to code so we are going to
code a reddit client so read it is like
a big forum where you can with some
topics where you can post image links or
whatever you can comment on the post and
you can vote the post so the reader is
pretty simple there is here at a bar
where there is the number of story you
have to read there is a list here with
all the story you have to read and each
time you read one the stark change
etcetera etc and you have the images and
the vote here okay so let's write it so
here I've got my default component in
here a reddit component so I will use
the reddit one and unfortunately it run
does nothing so I will had something to
see if it works yes it's working so now
we are going to start with the top bar
here so the top bar is already here that
there is nothing inside so we are going
to make it work so inside the top down
we have some kind of message that say
you use the props that unread unread
stories and we need some default value
okay it should work yes it's working I
can try to pass another value here and
it's still working I just need some star
here because it's ugly it should be
better yeah ok so that's good with the
top bar now we have to do the sidebar so
the sidebar will be here and now that we
have a sidebar we need to put some data
inside and we need some data inside your
application so we need some stories to
display we need to know what has the
story that we already read and we need
to know why what is the selected story
we also need to know the subreddit it's
the topic we want to fetch and we are
going to fetch funny if I stuff so here
I can pass my stories because they are
in the states even if it's empty and now
we can fetch the stories so we are going
to use component announced to do that
here I've get a helper to fetch
subreddit now I need the first story to
select it automatically inside the API
everything is wrapped inside some data
object so I just have to do that and I
do my statement relation here so the
selected one is the first one and the
red array here's a course to first ID so
should be enough here now let's get to
the sidebar component so inside the
sidebar the only thing I want to do is
to iterate over my my stories
so here remember the data stuff it's
just boring so i get rid of it and now i
need to display each story inside the
sidebar so to do that I will use a new
component that is story cell and in the
story cell I just passed the current
story to display it so it should work
now we have some stories but it's not
very interesting because we only add the
name of the component so we are going to
modify that first we are going to oops
to display the title so let's see if it
works yep it's working now we are going
to add some styling yeah I got a helper
for that because we need some complex
stuff here so it's still working but
it's great okay so now we are going to
head the same nail of the of the story
60 pixels should be enough and the
source of the image is this props
straight sunlight is their own an issue
or no it's just the the network and
there is something bad here I will go I
will had some style should be enough and
that's good so now we are we we are
already good but there is a problem with
this time everything is gray so I'm
going to pass some new data inside the
story cell so the computer style we know
which what is the red story the current
story etc etc so inside my side
bar here i will pass the selected story
because we need to know it we need to
pass the red story Vicki because we need
to know it and I've got to do the same
for the story cell because it's in the
story sell that we need it so we have
the selected stuff and here i don't need
the read but if the story is unread so i
will do something like that and it
should be enough okay so it's working
but as you can see i can select my my
story because i do not have something to
do that so i will create a function to
mutate met the sight of my application
to do that so i call it sex story and
the code is oops is pretty easy i just
have to do a set states with the
selected story and a new red version so
i will take the produced version of red
and add the selected ID so now i can had
this function in my props and do the
same here ok and here in the story cell
i will add a new function to select
itself oops and I just call the function
that I have in my props that is called
select with the story in my props it
should be enough and I just need to add
a handler for that and it she works and
it's working
so now we just have to code the viewer
part so the viewer part is pretty simple
the viewer is here so one can see fit
words come on okay pretty long the
viewer will need to know what is the
selected story so I just add a property
for that okay and now let's go to the
code of the viewer so the viewer can
have a story that is null because here
at the beginning of my application still
exceed story is now so here I just get
to add some message nothing here so you
should okay you seen it a little bit now
we need to know what is the image we
want to display so it's on the story so
it's the source so here we need to know
the API of reddit ok and now we can work
first thing I will show the notes
I do the same thing for the downs so it
should work let's see it yep it's
working pretty great and now we just
need to display the image so for the
image we need some styling to do some
risk ailing of the image so i get
something for that and here we had the
image and it should work and it's
working so the only thing that left is
come on guys it's the android pad here
we need to make it work so here i just
have to compute what are the number of
unread story to do that I've got some
little bit piece of code here and I just
have to put it there and it should work
yep it's working so whenever I click on
a story I've got my counter at
decrements and the last thing we can do
to see if everything work is to change
the subreddit here I will go on pics
instead of funny and I should have other
pics so it's working perfectly so it's
good for the life cutting thoughts and
it's the end of my presentation about
react so in conclusion what I can say is
that react is just awesome that now i
hope you want to do react at work that
we will start from monday and i get some
time for questions so don't hesitate
thank
any question are you try to see on the
app if the network is working
no question okay so thank you for for
irritation attention
I still get the mic yep yes it's really
the question was is rack using large
project and the answer is yes because
for instance at Netflix everything is
built we have react the client on mobile
on on rain and iOS maybe the app on your
TV maybe the app on your console gaming
game station whatever the website is in
react so it's really used everywhere on
the BBC website on the reddit mobile
website on a lot of a lot of people are
using it and the best example is
facebook they are using it on the
facebook web app so it's just one of the
most use web app in the world so I guess
it's a big project what it's it's a
really simple framework so yes you have
to add some part but there is other
author library provided by Facebook to
organize your code to add some
intelligent fetching for your website
Vice some services are and stuff like
that so there is other tool react is
just the first stone of the of the
application yep
so the question was how to use a web
component inside the reactor plication
so it's very simple you just have to for
instance here if you get a component
that is I don't know g plus button you
just have to do that with camel case
that will be translated to dash and it
will works just like that another
question ok no more question</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>