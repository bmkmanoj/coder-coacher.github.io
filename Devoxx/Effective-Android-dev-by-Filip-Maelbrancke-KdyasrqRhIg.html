<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Effective Android dev by Filip Maelbrancke | Coder Coacher - Coaching Coders</title><meta content="Effective Android dev by Filip Maelbrancke - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Devoxx/">Devoxx</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Effective Android dev by Filip Maelbrancke</b></h2><h5 class="post__date">2016-11-11</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/KdyasrqRhIg" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">all right hi I'm Philip and I would like
to talk a little bit about android
development I've dubbed it effective
Android development now I'm not gonna do
a very technical talk i'm not going to
show a lot of code i intend the stock
more to be like look behind scenes of
the way we work so we in this cases i
work for a budget conference company up
foundry and we are an agency making
applications android iOS web also quite
a lot of us work at client sites so it's
not only step that video internally but
for both cases i would state that it's
very important for us that we work as
effective as possible now at the same
time I also don't think you can do we'll
talk like these are like the 12 steps
towards effective Android development do
it like this your project will succeed
otherwise it will fail the needs of our
clients are always very different and we
need to find something that works for
everyone it's also i don't really
believe in these absolute terms when we
do software development and also like
effective what is effective I which
stated it's even like it's a spectrum
but why do we care and that's because we
want to make good applications we really
care about the quality of the stuff we
make and then again is like a spectrum
because quality what is quality how much
quality is enough quality but for us
we'd still think a lot about the way we
work and how we can work better and more
effective and one of the reasons is that
gives us the ability to add new features
or to iterate about over current
features in an effective way and codes
and tools and structure and a setup it
basically means to an ends it's a tool
to solve a business problem in the end
so how can we do how can you work in an
effective way again we work for
different clients we also often have
tough deadlines or something like from
time to time we have a little bit well
become short in time and so on so you
need to start about well what do we need
to do how much is enough and so on we
really like to capture what is it that a
client really really really needs quite
often that means that we start with like
the minimum valuable features we really
like to work with a Minimum Viable
Product and give that to the clients
very early and then iterates together
with a client any ant user and we really
believe that is that that is a more
productive and a more effective way of
making an Android app now it all starts
of course with an ID so maybe the first
topic guess how do we go from an ID or
any requests or something that we want
to solve towards well working on
application quite often we don't dive
immediately in a redditor we quite often
likely spend a bit of time and think
about prototyping quite often the first
work we do on a project is basically
gather around a whiteboard sketch try to
understand what a client really needs
and after that we try to make a
prototype and we have found out that
paper works quite well for us it's work
it's very fast to a sketch something up
it's also very flexible and you don't
have to fear losing a lot of your
development time that doesn't mean that
we always do it like in recent weeks for
instance the team I men has been making
like real Android prototypes because we
have a client that is a really thinking
about the navigation and the structure
of the application and they really feel
that they wanted to have something in
hand so in those cases we can make a
prototype like a real app but most of
the time we prefer first to sit around a
whiteboard to work it's paper and so on
we find that leads us quite quickly
to share knowledge and shared
understanding about what it is that we
want to make but after that well we get
our designers involved we know what you
want to make so how should it look how
should it behaved show how should it
animate and for that quite often we use
a tool that is called envision now again
I'm going to share a couple of tools
that work for us that doesn't mean that
they are the only tools that work we
need to Android development it's just
what we have experience with it just
what we know is working well but like
envision for instance is a duel that is
in a space that has lots and lots of
competitors and so what you can do what
is this when your designers went working
on a couple of screens on the flow on a
feature you can just drop all your
designs in envision it has a nice web
app that you can work with and at that
point you have something that you can
show to the client not only in a browser
but when we just send out a link to the
client he can already immediately start
playing around to it on a phone and
that's also one of the things that we
found out for a lot of clients it's very
handy when you have something in their
hands when it feels like real
application so tools like these really
help us quickly and effectively coming
towards well what is it that you really
want us to make it's quite useful tool
you can annotate you can put in comments
and so on you have a nice dashboard and
an overview and an additional well an
additional handy thing about using these
tools is in the past we always used to
have all these meetings and we had to
scheduler those meetings set together
with a client but when we have a tool
like this we can quite effectively work
we just send them a link they can play
around to this they can give their
feedback we can immediately start
iterating over the design and how it
looks and feels and it can just all be
done remotely that doesn't mean that we
don't like sitting together with the
clients but it's just a more effective
and faster way to work together now
after that when we know what we want to
make when we have like sign off about
these are the features we
on at that point we have started trading
a little bit more on the UI and so what
our designers use nowadays is not
Photoshop anymore but it's a tool called
sketch and the nice thing about it is
that there's kind of a little ecosystem
of tools around sketch nowadays and so
what you see here is a tool called
Zeppelin and this is really on the edge
between designers and developers it's a
collaboration tool between those two so
when the designer made well it's quite
happy about what he wants to feature to
look like he can just drop all the
sketch files in Zeppelin and at that
point all those designs are available
for us developers so it's really like a
design handoff tool and it's quite handy
you can inspect whatever you want you
can also use it to generate your asset
so gone are those long emails full of
zip files with lots and lots of P&amp;amp;G s
and they are never in the like right
folder structure that you want or the
right naming so this is quite handy it's
again one of those tools that help us
work very well together so to really a
tool that what you see is what you need
and you can go in the tool Zeppelin and
really start looking well what do I need
to implement what are all these
specifications then that I need to look
into so whatever you need like as an
Android developer with all your
dimensions all your paintings all your
colors all the s is that you want to
have like every time a design is ready
or when the designer is even just keep
iterating on whatever the screen should
look like you can just drop it in
Zeppelin and then as a developer you can
just grab whatever you need you have
always this overview of what are you
making so it's a very handy tool so with
this set of tools we think that we can
quite effectively work from an ID
towards well what is it that we really
need to make what is it that we are
going to code up now next topic I would
like to talk about this one of the first
features that we like to make nowadays
is the concept of a remote configuration
we think it's a very very valuable
concept to have in your app so something
to go into and the idea here is that if
you make an appt and that's android/ios
whatever if you're making up it can be
very very handy to have like a concept
of remote configuration loading so what
is happening here is I have an
application one of them like the left
one is like the production belt the
other one is our testing build and we
have it loads the configuration so in
this case this is like the most simple
setup you can imagine well I'm just
going to grab JSON file from somewhere
and the way we work if we do this most
often is we make separate config files
for every version of the app so in this
case we have version two dot one of the
app left the production one on the right
the test one and so when the app starts
it will grab the configuration act upon
it and then work with this configuration
and we started doing that when we were
thinking about well a problem we
sometimes have is we are always making
new versions of the application and we
see that quite often people are lagging
behind people are not always upgrading
to the latest versions and that's not
really your problem we have a version
backends we have that worked out so we
could not be good support how many
versions we want but that's not always
what you want to do of course if you
have a back and at a certain point you
have a very very small amount of people
still on an old version and well you
would just want them to move up another
case where we had at this we work for a
couple of banking clients there its
quite often requirements that many
application starts up it should always
be on the latest version it's like just
risk management banking banks sometimes
always want users to upgrade and so if
you have a system like this in place if
you can do like remote conflicting you
have everything in place to for instance
suggest the user to upgrade or to really
like block it off and say now it's time
to upgrade or you can't use or features
anymore a second one that is quite handy
is the idea about
intense mode so sometimes god forbid but
it happens like your back end goes of
line I think if at that point your
application is just one blank screen
that's quite bad so if you have like a
configuration coming from some other
place and a good way to do that with for
instance be like you have your own
back-end but you could have these
configuration files living on for
instance the CDN which you can imagine
or normally should have a very good up
time it's also separate from your
back-end systems and so when a system
like this is in place you can quite
nicely show that for instance your
back-end went into your maintenance mode
or whatever again from some banks that
we work we have implemented this and a
way that the thinking is well one of the
most important things you can do with
the banking app is doing your
transactions of course but when a bank
even suspects that something fishy is
going on they can quite easily decide
well we would like to well stop the
transaction engine from now and that
would be quite bad if you don't have a
system in place or if you didn't think
about that problem before had so with a
remote configuration in place you can
quite nicely say well maybe I can shut
down one feature but all the rest of the
application is still up is still running
and is still very useful for the user so
and yeah we also use it for instance
like two loads the base URLs for our API
calls and so on so this concept of
feature switches is something that
between nowadays well it's one of the
first features we want to always put in
an application because we just find it
so very useful because when you start
thinking about it you can use it for
lots and lots of things for instance you
can already publish an application and
then later decide well this new feature
that is already an application but which
is behind a feature flag you can turn a
domino later point so you can also do
can i read releasing so when you turn
the feature on for only like a small
percentage of your total user base and
when you have like a dynamic system and
play
is you are ready to do a details thing
so these feature switches quite
interesting I've all I have also seen it
used for instance like they call it
obstacles an application was released
and they were not sure about rolling out
the feature because like there were some
unclear performance implications for the
back end so when you have something like
this in place you always have like it's
like a manually managed circuit break
that you have at the ends so quite
useful to have but recently we've
started working with a product so it's a
firebase remote config it's part of
Google's fighter base speed of tools and
I'm it's quite handy it's hosted it's a
scalable it's also cross platform so you
can definitely use it for your iOS and
Android apps at the same time and so
just by embedding play Google Play
services in your application and do a
little setup you can have these dynamic
change behaviors at runtime it's quite
elegant and quite well thought out it
also has cashing it has default values
so it's a whole system with the same
ideas but oatley in place it also has
quite a good developer console that you
can visit and so all these rules that
you have you can just go to a nice well
web page doing to a nice console and
there you can do all your actions you
don't only had you don't only have these
rules you can also combine them together
with condition so the conditions that
you can act upon are things like
operating system type or the region or
country the devices and the language you
can assign random person tiles and if
you use google analytics you can even
like segment your users into audiences
and then say well this feature this
feature flag is the only viable or
whatever for this segment of my user so
it's quite a powerful system to have
it's something that nowadays we like to
have in other applications because when
you have this in place you can also
start thinking about gathering user feed
so the idea of well we are quite often
heavily opinionated we need to implement
the feature and we think what is the
best way to implement it how it should
look like but quite often when you
involve real users and give them some
choices quite often we find out that
it's not always what we have in mind
what is the best for all the users so
when you have this remote configuration
system into place you can start playing
around to it's a be testing it's
something we don't see that often we
don't have that many project or clients
in fact or it's done it's like more
established in like well it's more
common in real established companies but
it's very valuable very valuable and we
use it for like in the context of
Android development for instance you
make something you add a feature and we
want to know well the future discovery
is it working ok already uses finding my
new feature or is a duct away far too
deep in the navigation so maybe we need
to think about a new onboarding flow or
something another example is nowadays we
have the new permissions on Android well
what what did you do should you just pop
up the permissions dialogue or should
you provide maybe an extra screen
explaining again why you as an
application one allows these permissions
so sometimes when we have like these
questions and we are not really sure
what is the best way I mean if you're a
chat application you ask for a
microphone permission you can imagine
that people will just understand but
it's not always clear so in those cases
we just think about running an a/b test
and so what you really like we make up a
hypothesis we code it and we design it
we run it and then afterwards we gather
all the statistics and we measure and
analyze so what is what has the best
engagement and so on and we use the
system a be testing to find out about
well what it's really the best way for
the user to implement the feature and
nowadays we
most of the time use optimizely but
again there are lots and lots of tools
in the space so it's only your tool we
know I'm not going to say it's the best
to let me know you can also use the
firebase tools because if you combine
remote config together with the
analytics tool there is nice symbiosis
between the two and you can definitely
use that to run your AP testing but
there are several others amazon has a
whole two sweet and so on and we
sometimes even go were quite far because
I have a couple of colleagues that even
went so far as making two sets of
navigation because at a certain point
your application starts getting new
features and new features and at a
certain point they were like quite an to
dwell the current navigation does it
still fit in or should we maybe even go
for a totally new set of a navigation
they have implemented this and then they
have released it as an a/b test and even
during the a/b test we asked for
feedback from the users and that was
like a great experience because it gave
us enough confidence to switch up the
navigation of the application something
that you normally maybe might be very
hesitant about but we had like real data
showing that users would be fine with it
and even with prefer itself it's a quite
powerful system when you start thinking
about remote configuration together with
a be testing and so on now all this is
of course yeah you need to think about
how you make it how you will code it so
next topic is maybe architecture we
deeply care about architecture we try to
make we try to set up the clean
architecture so this is a uncle bob's
clean architectural schema but basically
the idea is that we won't like have some
independence between frameworks UI
frameworks persistent layer and so on we
really want to have separation of
concerns and also we are on android it's
not always easy the test everything and
since we we are quite big on testing so
for us it's also we really want to think
about how will be architecture codes so
that it's very well testable and so yes
we did a lot of thinking we have like
some sort of go to architecture but I
don't really care that much about
architecture in the sense that I really
do care because otherwise I wouldn't
have it as one of my ways to do
effective Android development but in the
end nowadays in Android and the Android
world we have all these discussions MVC
versus MVP vs mvvm should we go with
unidirectional data flows like the
Redlegs guys have and so on and in the
end I think it doesn't really matter
what really matters to me and why I care
about architecture is because it creates
a common language between everybody in
the team so yes we did decide about an
architecture that work for us that's all
of your presenter so we combined net we
do di we have a dagger to for that we
are quite font of the reactive
principles so we use our eggs Java we
have something that works for us but
again the main goal of having like an
architecture for us is to have like a
common language common ground common
abstractions that we all can share if we
work on a project again as I said any
beginning the needs of every client can
be very different so I'm not going to
claim that the one architecture works
for every app adjust that in order to be
effective we think that it's very handy
to think at least about an architecture
to have something common at least in the
team all have like a common
understanding i really think that that
reduces cost of development and long run
and will ensure that your system will
not crack at the seams when you have
like a new requirement or some
refactoring coming up now when thinking
about codes last well recently we also
start thinking about what are the tools
that we use to set us all up and
wouldn't it be fun if we are if we were
all working in like a language that's
very concise and consistent no
too verbose and might I even say fun to
work in with and I think for us I think
Java is maybe not the best answer
anymore nowadays we are really enjoy
working with Courtland so again it's
definitely not saying that you need
Kotlin to have an effective or a good
working android app not at all it's only
that for us Kotlin is working quite well
in this regard now it's a little bit of
pity there are not any continent talk
sir on this devix conference and i don't
really have the time to go very deeply
into it but what I want to do is I want
to give a few examples why I think
Kotlin helps us and might be of use for
some of you when you do android now
first of all even I know it kodaline is
a language designed by jetbrains so
that's already well that already has one
great advantage because there are of
course other languages on the gvm that
you can use for android development you
have groovy I like playing around to its
Carla so I tried a little bit I kind of
use it for android development but one
of the I would say even most important
things for me is the whole well what is
the tooling and of course in Scotland is
coming from the jet brain guys the
tooling is quite nice I think that's
very important for us in order to stay
effective we want to keep using the same
bill to the same idea the same tools and
libraries that we're used to and that is
very well possible with Courtland it has
great interoperability with Java it's
also not so big so the standard library
is only like a good six hundred
kilobytes so we have no problem
including that in your application it's
a quiet nice modern language it's also
like again the interop and the fact that
you need to add a library we were
already quite often including like a lot
of Java libraries that we feel help us
like for instance Google's guava library
well it's quite a big
library but almost all functionality
that we ever used in guava is part of
the Copeland standard library so for us
really the fact that we need to add a
little library that we have a little bit
methods that contribute to our 64k Dex
method limit isn't really all that much
a problem in our practice now as I said
it's a model language but one of the
reasons that we like it is it's really
reducing boilerplate that we feel might
be there little bits when using just a
regular Java I just want to give a few
examples so like the value object we've
all done it like a thousand times in
Java and I know if I want to talk about
verbosity of Java that there are quite a
lot of options in java space itself so
for instance we are all ready for
longest time using tools like auto value
and so on so yes I know that there are
libraries that can help you with the
verbosity of java at the same time if
you take a look at what we get with
Kotlin it's quite powerful for instance
if you have your value object we have
the data clause in cortland it's like
one liner with all basically same
functionality so it's very nice to have
this concise as nest now another sample
or example I want to give why I'm Kotlin
is quite powerful for is it is I think
nobody has never seen this one in no
pointer exception as i said we care
quite a lot about quality think we are
doing that quite well we don't have a
lot of crashes Android applications but
if we take a look to our crash locks we
can see that the null pointer exception
is quite a frequent one and so that's a
good thing about Kotlin you really need
to think about null ability so it's
really part of the variable assignments
you do in cortland um so yeah even if
you've never seen Kotlin i think
everybody will see the slide you just
have like coughlin uses a syntax that
reverses the type a name ordering when
you do a variable declaration before the
rest I think everybody will agree that
that's quite readable but here you can
see that the ?
along the variable declaration indicates
that the value can be null and cotton
will check that you can also see that
you have the violin for so when you do
variable assignments you need to decide
whether it's immutable or an immutable
variable and so Kotlin will act upon
this null ability so you can for
instance a return null if the parent
object is now that removes the need for
all these if null checks that you would
have in Java you can also assign a
default value using a single adult
expression and you have the what's
called Elvis operator which is basically
just simplification or simpler syntax
for the previous examples and so it's
quite a powerful language you have these
properties you have data classes you
have function literals so I know that we
have lambda Z in Java 8 but on Android
it's complicated we now have the new
jack compiler toolchain which enables
you to use Java 8 language features but
in our testing it's really well when we
play with it it's really not there yet
for instance we are missing the
transform API so most of the time you
are using realm as a database can't use
it because they use the transform API
and also every time we test jack it's
just not their performance wise not cpu
wise and not memory wise so again
cortland it's working grades it's a
generating compatible bytecode for
android but still you have all those
notes nice language features
higher-order functions extension method
so there is no java project where you
have not all the utility classes and
copeland you can quite nicely animated
to an existing type and so well replace
that whole package you have with all
those utilities and a last example I
want to give us when you step into the
Cortland ecosystem I said there is great
java interoperability so whatever
library you are using nowadays when you
do java based android development it's
usable in cortland
so you don't need to learn all those new
libraries you can use whatever you want
like if you have a retrofit for your
networking if you do dagger for di it's
all available and with a very nice
syntax in cortland but with the power of
coughlin as a language throughout a few
interesting libraries popping up in the
cotton in space and the one I want to
show is uncle because uh yeah I would
like to show that it's working for us
and making us a little bit more
effective again in our development now
uncle is a library written in cortland
also by the people from Jay drains and
there they are marketing it as a well an
extension to improve the Kotlin
experience with the android framework
it's basically most of it is a pipe save
dsl builders that ankle provides to work
with layouts to higher-order functions
so let me just a show with a lot of code
example this is how we are used to
writing layouts we do it in XML it's not
really a problem with it but if you take
a look at what we get with uncle it's we
write codes now since we have Kotlin and
all its features they were able to make
a very nice dsl that map's very closely
to what we have an XML but it's codes
and that's great for instance we quite
often have like these checks oh if we
are on lollipop or higher maybe we
should put some elevation on the toolbar
or maybe we want to make like small
changes in a layout whether we are
running in portrait or landscape or a
phone or a tablet and so on so it's
quite nice to have codes but that still
resembles the layouts that you're used
to that still reads as a nice layout
file but it's codes now maybe the most
interesting part about anko and why we
are really interested in using it is
because it can help us with performance
so I have brought with me a small
example
this is an app we made some time ago
it's a small more yeah small a permit
for a good client and they wanted to do
like marketing thing and my colleague
Simon has afterwards made an ankle based
version of it so that we do could do
some comparisons now the reason we took
this one is because it's like more or
less at so yeah quite a complicated
layout yes it's kew morphic but that's
what the client wanted but to make
something like this it's like one
container so we already did our best be
known and an Android in order to get a
good performance layout you shouldn't
nest containers too much if you come so
we did our best but still to make
something like this we have one
container relativelayout it contains
like 16 image views a custom view a
couple of text views we have a surface
view so that we could project the
cameron because yeah yep is basically
remaking deals for the cameras that we
used to have and so if you combine that
with the fact that we need to have
several layers on top of each other we
have like 17 drawable assets like nine
or ten slices until we bring everything
together now the way Android works is
besadii XML file for our layouts Android
will parse the XML and then initiates
all the views and Adam to container now
let's say parse the XML in fact we are
writing XML but what is inside the APK
file is already like compiled XML it's
it's a more performance way to load up
the layouts but still when you inflate a
layout on Android in the normal way you
still have Android going through the XML
structure and after that when it has
made like a model of what it needs to do
at that point it will well initiate
views and add them to the screen so what
if we could just lose the first step one
that is basically what we do we are
writing code now so the whole step of
taking a look at
what is written in the XML is just gone
now when we use ankle and so we have
done a couple of performance tests we
have specially focused on like lower
level cheap devices because that's the
place where it's really the most
important I seldom writes a layout that
doesn't work on my good devices but
sometimes i have like quite a lot of
work making everything work very well on
devices that were even cheap two or
three years ago and that we still on
android you to support and so the
results are quite create we see much we
see of like a great performance increase
when using ANCA so for us stepping into
the hole coughlin world and even taking
a look at whatever is available in this
new ecosystem it's really helping us out
when making my applications so i hope i
could whet your appetite a little bit to
take a look into a Kotlin and whatever
libraries are surrounding it now next
topic testing already said that we are
quite back on testing so you have to do
it quite often we find it's very
important to do now google also has
published a whole set of statistics
around app quality and so on and one of
the things that well stood out to me
when I read it is like they claim that
more than eighty percent of your users
will never open the upper anymore after
they have two early users crashes so
that's again one of the reasons why we
really care about quality you can never
redo your first impression also as an
episode that's a something we care about
deeply and so for us it's not uncommon
to have like a couple of thousand tests
and a project and someone we have quite
high coverage and we really think that
that gives us confidence it made gives
us confidence that we can refactor that
we can deliver something that will be of
high quality and that will be stable
above all it's also like we have like
sometimes we work for clients then we
jover we have new team members and so on
so also if you think about code handover
and so on having a good test suite is
really paramount for us now tomorrow
there's am a talk about testing and
android so i'm not going to go too deep
into tools or how we should do it code
wise just gonna again how we do it is we
try to automate as much as possible so
we have an automation on every comment
on every comment we will run our unit
tests of course if you think about your
wife ests and segmentation tests it's
also very well possible that we could
schedule them if they take too long to
run but we do our unit tests and the j
unit support provided by the android sdk
and we mainly use a espresso and UI
Automator for or integration tests or UI
tests we also have a couple of projects
have like real dedicated testers and
they are playing around with tools like
up your main core motion and all those
tools like in a link the end the
selenium school of testing but we are
really on the tools that the under it is
gay provides now if you think about
running these tests well we run them on
devices and these devices can be
emulators and real physical devices so
this is a photo of one of the projects I
work on the collection of devices so I
think it's still very important to have
quite a nice set of devices the way we
do it is we take a look into either or
analytics or the current installs by
device that you have in your Play Store
console so we can nicely see which are
the most use devices and it's still very
valuable for us to have them on hand so
here you see a charging well or charging
a device now one thing I still want to
show is well you have all those devices
lying around it's handy that you can
just walk over to the closets take one
and well play around with it or test
with it but one tool i wanted to show is
open SDF so is the S stands for
phone test form so when you have all
those devices and you want to expose
them to like your whole organization or
do you want to make like good system to
run your tests on so open STF is like an
interesting tool it's a way to control
and manage all your devices now it's
it's again a web-based tool so it's
working quite nice if you ever would
have so many devices in your
organization you can quite nicely see
which ones are connected you can search
by specification operating system level
and so on so it's quite a handy tool and
you can login on it so again you can of
course we as developers can just mount
them through the Android debug bridge so
you can use this whole collection of
devices to run your tests on but you can
also like expose it to testers or users
of your organization and so you have a
dashboard where you can see all the
actions you can mount you can deploy
applications and so on so quite a
powerful tool if you want to have your
whole set of your own devices managed
now managing your own devices isn't
always that much fun if you do it if you
think about well i would like to start
running all my android tests on real
devices you will quite quickly find out
that it's not always that easy you will
find out that sometimes you is be as
flaky or the Android debug bridge is
flaky you need to think about having
them charged and then sometimes you will
even find out that things like battery
start going wrong this one is the nicest
I saw it's like or beloved Nexus 4 head
like the battery swelling up and then
when you have a glass back it's totally
gone so let's say it's very valuable to
have your devices laying around but
sometimes is also quite a lot of work
and you get these things so we also
started thinking about well I still want
to run on
physical devices but maybe somebody else
should take care of them so that's
something you can do nowadays you can
have all these remote devices so the
once again we have some experience with
is destroyed amazon device form AWS
device form and then Google's cloud test
lab there are several other players here
I know that exam run has a very big
offering and so on but I have no
experience with that one but it's just
enticing when somebody else is taking
care of the physical devices it just
becomes a lot easier and so we are
playing around we have devices for
instance deployed at AWS and you can
just mount them run your tests on it and
that's quite nice a good thing about the
AWS device farm is that they even have
like a whole set of plugins for various
CI systems so we can nice and easily
plug it in whatever setup you have quite
newest Google's offering but it's quite
nice it's google cloud test lab again
you have a whole console ahold dashboard
where you can follow up your tests so
you have a whole history of results you
get the locks attached to every test run
they have a plugin for espresso that you
can use to take screenshots or even
videos so again if you don't want to
manage your own farm it's an interesting
option and by the way nowadays if you
deploy an android application and you
first deploy it to the alpha or beta
channel google will for you already run
a couple of tests so you can write your
own tests you just apply them together
with the application and it's running on
somebody else's infrastructure but
google also has a tool called the monkey
runner which is just just going berserk
on your application and if you already
use the alpha and beta channels and i
hope that after this mario this
morning's presentation about cin android
you're convinced to do that then it's
very handy that google is already
already running like a couple of tests
on every ad that you uploads to the
store now one thing
that you are that is still not ideal I
would say and I hope that Google are
changes it up well quite soon as all
interactions you do with the Google
cloud test lab nowadays still need to
happen to the g-cloud and the GS util
command line utilities so if you want to
use this in Android studio there is
integration but if you want to do it on
your own systems on your own CI systems
you still have a little bit of setup all
the results are just start on the Google
Cloud storage show you need to download
them with the GSU toll commands and then
you need to parse them and well act on
it before the rest the hardest part is
just having somebody else take care of
your infrastructure and it is working
very well now if you want to bring all
this a little bit together we think that
having a continuous integration system
is a extremely important it really helps
us to make sure that we can deliver an
application of good quality and it helps
us and making sure that this is going to
happen so as is already set we try to
automate as much as possible so I was
used to do that when I came from
back-end development it's not because
I'm now doing mobile and android
development that we still don't think
that's a good practice anymore so yes we
are quite heavy on a continuous
integration and so we built a whole
pipeline and that's like having a
pipeline is one of those key concepts in
the continuous delivery ID so it's
really a way to provide visibility into
the production readiness of your
application and it gives you feedback on
every change you make in your system so
we also do that too well gather
statistics about the application I think
it's quite handy quite useful and thus
quite helpful if you want to work as
effective as possible to run static
analysis so on Android we have the lint
tools we can use checkstyle PMD fine
bucks and so on and so for us
something that I highly value when you
have like a static analyzer that can
help you and give you some assessments
about the quality of what you have just
written it's just very handy and then in
the end again like if you did not see
the presentation of this morning I
really urge you to take a look so we
also have a pipeline that goes the whole
way so we want to automatically publish
the application to the store so yes we
also do use alpha and beta channels and
they should all be automated we never
want to have that like the developer
gets a call Friday evening because the
product owner just decided that there
are enough features ready and now you
need to somehow still a look up how you
make builds now just a side remark
continuous delivery I think a good
variant of the name would be having and
continuous deliverable because you don't
need to deliver on every comment on
merch it's more the ID that you are
always ready to put something in
production whenever product owner QA
person whatever decides that this is
releasable artifact for the user we just
can do it with a confidence that it's
always going to work so for that we use
them well we use a CI system now the
only remark I still wanted to make well
before any code gets picked up by the CI
system we always do a code review it's
not technical that's not a library but I
think it helps us and being effective so
the reason why we do code reviews and
again quite heavily stress that it's
important this there are a couple of
reasons actually it's very handy if
other people know what happens at a code
base and it also forces you to write
good code because you know that other
people will read it and besides that we
also want to and we also find out that
it's a good way to bring like junior
developers up to speed so if you do it
in a constructive way and you can handle
a little bit of
direct the feedback it's a way we prefer
to have our pipeline work so if I show
you the pipeline before it's coming up
in our pipeline it's a code it's a code
change that already went through review
and a couple of your fellow developers
agreed upon so this is basically am how
our pipeline in one of the projects is
looking I can just take a quick look so
we have just models again the steps you
need to take so you always start with
well select the future that is a feature
that should be ready so it can go into
testing we can take a look into it we
build it we run tests and afterwards we
deploy it to our testing infrastructure
after that we have a manual step so it's
only after a manual approval that we
then really load it up to the Play Store
now what do we use to distribute your
application to all our test devices into
all the people that are interested then
I'm well testing along with us we use
the tools quite often we use hockey it's
it's quite well-known tool you just load
up your application and everybody who is
interested in testing your application
can see a nice overview what are all the
applications that I'm eligible for is
there an update kind of install it and
so on and the other one is a fabric
stool so twitter has the fabric suite of
tools and they have a great beta app
distribution platform and so the way it
works is if you want to involve some
clients or or some test people we can
very simply just invite them to join the
beta test and then after they join the
beta test they can just see all the
application updates and so on a pier in
a nap they have on the phone so that's
quite working well for us and so after
the first stage of the build distributes
for testing really means that we try to
distribute it to all the test devices
that are testing team is using and also
well like the really involved people at
the clients
after that so after we have done like
the internal QA we do load it up to the
Play Store again to usage of Jenkins
plugins and Gradle plugins that talk to
the Google Play Store API and then most
of the time we will set up the Alpha and
Beta channels and play store we find out
that it's a very handy especially if you
get some folio mad so we have a client
where it's a quite known brands so they
were able to use the Facebook page and
like gather people that are really
interested in testing new applications
and after that most of the time we will
opt for a staged rollout if you have the
time so if we are not under time
pressure we will do a stage fill out in
the unfortunate case that there still
might be some problem then we at least
have not immediately deployed to all on
everyone and hopefully we have only
affected very small sets of our users
with some kind of luck and also what we
use well what is a one of those ways
that the CI system makes us quite
effective asst we have all these metrics
that we can gather so again we have lots
and lots of tests going on but we also
try to generate this coverage report so
that we can nicely have like an ID well
which parts of the code base are really
well tested which are some parts that we
should focus on more and so on and then
of course and one of the last things but
so when you have deployed your
application afterwards it's still very
important to keep the finger on the
pulse so we also do track all the
crashes we have again we aim for well as
we as high as possible of course the
number of crash free user sessions and
quite often for us and normal 399 and
then quite up like in this one this is
an app with well a couple of home yeah
more than 100,000
Suzanne be a nicely average around
ninety-nine point nine percent of crush
recession so thing that's quite good for
an Android application but for us it's
extremely important that we track this
and that we swiftly will take action
when we see some kind of bug appear so
again it doesn't stop when you put
something in the store I would
definitely encourage you to look and
measure all the crashes you have so that
you can take action on them and now to
bring everything together just a last
one it's not really an Android or iOS
related but just wanted to show it if
you want to bring all this together what
works quite well for us is the ID to
have a dashboard so that you get
visibility in the status of all your
projects so the tool we mostly use is a
tool called dashing and we just use it
for well governing statistics and info
and insights and whatever is a handy
because I know that Jenkins has also the
concept of dashboard so that you can
take a look into your built in your
pipeline but we use it for more for
instance we have a nice overview we know
when Nagi else's are saying that our
backends is down we give like an insight
about how our Ram sprint is going on and
it's a very flexible system we even use
it an evening to show with the traffic
situation is a for everyone and it's
just very handy tool again so that when
something is going wrong and we should
all panic because our back-end is going
down we at least get like a better
insight and whatever we are doing so
that's basically it this is like behind
the scenes of how we do android
development a couple of the tools
techniques and patterns we use and
really finds that for us it's more or
less quite an effective way to do
android development so if you have any
questions feel free
yes
sorry do we use the same tools for
iphone development more sorry yes I
would say the same concepts apply and
that's that's basically what I what I
think you should take away from this
talk it's not like one set of tools that
really are working and all the rest
isn't the concepts that I'm that I did
talk about definitely apply to as well
Android as well as iOS development and I
would say that my iOS colleagues have
more or less the same sets of principles
they also value testing highly they also
care a lot about architecture they also
have like the way how you go from an ID
and a feature request to really knowing
what you should make and so on so we
definitely say that it's applicable to
both platforms do we share code no not
really now we have we I would say so do
we share codes between iOS and Android
no we just haven't found a tool that is
a working extremely well for that we are
playing around JavaScript based tools
objective-c to Java I've been playing
around with all these but for us there's
just never been enough gain in using one
of those tools I'm not saying it's not
interesting that is definitely
interesting it's just I don't know of
any tool that is already good enough
that we feel like we need to do it yes
yeah so how do we use the remote
configuration concept together with
Android flavors yeah we we will quite
often have like flavors for instance
like all the app versions we make that
go to a different environments or
production staging testing those will
quite often be different flavors because
it's not only that we need to go to a
separate configuration file a
configuration endpoint for rest there's
quite often a lot more difference
between them like if we have like a
testing application quite often we will
add features and tooling like a debug
panel so that the testers can play
around introducing network errors or
seems that this takes about like caching
and so on so yeah we definitely most of
the time use flavors and then the idea
is that different flavors can talk to
different configuration endpoints or
load their own configuration specific
data and at that point they use the same
concepts but they talk too well
different configurations different for
instance in the case of remote config we
would make like different projects and
so every flavor would have liked its own
separates and dedicated and points to
fetch its configuration yes
mmm so does ain't gonna have to a
binding no no but again that's one of
those architecture things and maybe
don't want to get involved too much I'm
not one hundred percent convinced that
two-way binding is so super special and
so super valuable that I really needed
but I would definitely like to have a
discussion with that about that with you
but now it's just again that's one of
the things I think it's very much team
specific and north team I think that
nobody is really like a big proponent of
two-way binding and the viewmodel stuff
and binding that you now get from
androids we are not really a fan but I
don't want to claim it in such a way
that it seems like i don't think it's
can work or it's not useful or whatever
but i don't really miss it and so the
fact that ankle doesn't have to weigh
binding and i really miss it yes
yes so the question is a set we've been
playing around with the jack compiler
and I wasn't totally happy with it well
thing is that we've tried to use it on
unlike a couple of big projects so that
we have like it's like battle testing it
it's not just well take a simple sample
because that works of course and on my
machine and on our machines we have like
slower compile times when using Jack and
it really is like eating up all my
memory even more than we well on Android
we already need quite a lot of a memory
with the Gradle build tools and for the
projects that we like the already
existing projects that we try to convert
with and have it run through Jack
compiler sorry no we didn't do any
analysis it's just like no it's not
there for us so it's like quick testing
but it's not like we're going to spend a
lot of time and see if we can make it a
lot better for our use case it's like I
more or less expect that if a google is
like releasing okay this is like a new
compiler toolchain then I expect it to
work as least as good as the current one
but of course they are still in
development so I expected to become a
lot faster and a lot more performance
anyway time's up if you have any more
questions I'll be around I'll be
available thanks for catching my talk</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>