<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>People, Platforms and Pipelines by Alex Ley | Coder Coacher - Coaching Coders</title><meta content="People, Platforms and Pipelines by Alex Ley - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Devoxx/">Devoxx</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>People, Platforms and Pipelines by Alex Ley</b></h2><h5 class="post__date">2016-11-11</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/M8VTxYiKIQc" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">it's okay hey everyone good morning good
afternoon actually so my name is Alex
lay i'm here to talk to you today about
people of platform and pipelines so
first of all thank you very much for
coming to the session so yeah my name is
Alex I'm a product manager for pivotal
in London I work specifically on Cloud
Foundry and so some union is my early be
familiar with Cloud Foundry effectively
what we're building at pivotal is a
enterprise distribution of cloud foundry
I work specifically on bringing data
services to cloud boundary so things
like getting my sequel red Arab mq
running on the cloud foundry platform
previously I worked in the engineering
team at pivotal and I worked on the
container technology the runs inside of
cloud foundry which we'll talk a bit
more about in this talk and that's
pretty cool you can find me on Twitter
Alex evade so you can see we've got our
new pivotal office in the silicon
roundabout in London so this is a makes
it look a lot nicer than it is but this
is where pivotal based in London so in
this talk we're going to first of all
explore why people are central to your
success often people are forgotten when
we're looking at technology you know we
want a a framework to solve the problem
but really most of the problems we have
in large organizations today about
people so next we're going to talk about
platforms and we're going to look at how
platforms can lift you up you know do a
lot the boring things you don't like
doing for you and then finally we're
going to try this together with
pipelines so we understand why pipelines
can help deliver success and then based
on how long this will take hopefully we
have some time for some demos so I'm
going to show you a bit about a pivotal
cloud foundry and then we're take a look
at creating a pipeline with a new
product called concourse which some of
you might have heard of it's quite new
came out pivotal but we get into that
bit more later so you know why people
already we're always building software
for people that's the reason any of us
are building applications services we
want to make someone's life better and
we want to do this through software
and so who's building the software again
mostly people are building this we
haven't yet got too much software built
by AI luckily and who runs this software
once is ready again going back to people
so people are running this software so
that we can get through users and the
developers can ship new stuff and so
first of all what we're going to look at
is look at some of the needs and wants
of our of these people so first of all
okay this is your user either they spent
lots of money on your service you spend
lots of money on convincing them to use
your service and product and you want
them to have a good time so they
continue to give you money and use your
service so what do they need new basic
user needs are quite simple a lot of
time thereafter availability so when
they want to use your service or app it
needs to be available and online and so
also they needed to be reliable so when
they use it they want it to work
correctly and they don't want to have
intermittent down times and issues with
things not working and so you know that
means kind of well tested software but
from a perspective but we can meet these
two basic needs then we're going to be
off to a good start so next up what do
they want they want some cool new
features I know every user you know they
quite liked using your product but they
want it to be available and reliable and
also they want new stuff and that's not
always easy from an engineering
perspective and if they don't get these
new features you know perhaps are going
to go to a different product or a
different application so finally you
know we've got your user they're happy
using your service on the internet right
they're having a great time everybody's
happy at this point but what happens
when the service goes offline your users
become sad they start having a really
bad time but from an engineering
perspective we say you know running
servers designing a che systems and
deploying it it's pretty hard it's not a
not an easy problem you know so surely
your users won't mind a bit of down time
now and then because you know they do
want those cool features and this is
just something they're gonna have to put
up with right wrong normally when this
happens the world is on fire they can't
do any of their work they start tweeting
about how
terrible your apt and services they say
we're never going to use it again yeah
and this is kind of what from the users
perspective they don't care they just
want to use your service so next up the
sometimes the culprit of the user fire
is the developer and so you're probably
a developer I guess been at devoxx or
you have lots of them the company
characteristics of developers they hate
meeting so they love coding and so when
a developer's productive in a company
generally everyone's pretty happy if
users are getting new features things
going well so what to developers need so
the first thing developers need is some
development infrastructure and this
sounds pretty basic but in a lot of
places this is quite hard to come by
Sony things that they can run their coat
on and test it before they put into
production so next up they often would
like a choice of a language and
framework and of course a lot of
companies will be quite prescriptive and
say sorry you can only use Java or you
can only use your Ruby but actually when
you're solving problems you want to be
able to pick the right tool for that job
you don't want to have to argue for a
long time about which framework which
library you can use and so you also need
access to services like databases
queuing systems email servers and again
in large enterprise overlays or so
organizations this can become very hard
to come by and they want all of this
today in not in a month so what does
valve has one they want to focus on
features they don't want to have to
worry about getting databases you know
arguing about which frameworks and tools
to use although that could be quite fun
and they really want to ship software
okay so that sounds like a great day if
you can do those things focus on
features and ship software you're
probably gonna be having quite a good
time so first thing developers often
need to do is find somewhere to run your
application so you need to get ahold of
a server again most enterprises this is
still not even easy even with things
like Amazon Web Services and Google
Cloud not many people have permission to
provision new things and so right the
developer you've managed to get your
hands on
server okay then we're going to put one
of our favorite languages on there we're
going to put Java so probably you need
to ssh onto the server download install
Java but just curious how many in the
audience would normally be allowed to
ssh onto a server and now infrastructure
is anyone you know okay a few awesome so
next up you need to get database so you
need to acquire this database from a DBA
team probably you then need to ask them
to set up maybe create your user create
some tables because most applications
you know we need to soar data so great
we've got the database we've got the
server we put Java on their next up we
need to get our software well before we
get our software there we need to make
sure we have connectivity so again this
you know in some organizations this can
be a challenge but you need to get your
application server wired up to some
database you point out to file some
tickets request access and some
firewalls and permission changes and
then finally you to work out how to get
your application software onto onto the
server and so you know this often takes
months so our developers blog from
working really hard you know working
long hours and they've been focused on
getting service getting databases
setting up networks and deploying their
software and so really for all the
developers thinking is why is it so hard
to ship software but you know we've got
a user they're using our service now on
a server they've got the app deployed
and they're connecting to a database
everyone's happy right it's going well
no but in the meantime your developer
has been waiting and waiting because
they've been waiting a month to deploy
their app so you know their product
manager who's probably a real pain has
been keeping them busy and so the
developer has been kind of SAT there at
the Machine and they're producing lots
of new features all right this developer
has been very busy so we've got a ton of
features that are ready to go into
production but the problem is these
changes will take weeks to go live you
know you've got a change committee
that's waiting for the deploy window
you've raised your tickets with
operations and you still can't get this
code to be in production and so under
poi code
a real risk to your organization it
becomes stale everyone forgets what that
feature did why it's even there the
engineer that wrote that code moves on
to another team or go to a different
company completely and also this code
has not been validated by your users so
this feature is SAT there without
getting any customer feedback you know
who knows that in three months time when
this goes live this might not be the
feature that any user wants anymore okay
so next up your applications got popular
and your operations team decided to
scale it to sue servers and they say
okay we're spinning up this new server
so we're going to put the latest job on
their make sense right because they're
go let's have Java 8 so we've got this
new site which I've eight but how's your
application ever been tested against the
you know running on Java 8 maybe not so
the first thing that's where we going to
happen is your Apple start going on fire
maybe some crazy bug you're going to
phone up in the middle of the night
having to debug this nobody likes this
because the operations team probably
won't give you action access to
production and then your apps had some
crazy change its meant the databases on
fire so now you've got to talk to a
database team and finally you know
something goes wrong with the network
file some more tickets your customers
are unhappy and we're back to this the
world's on fire developers getting
shouted at by your business by ops they
aren't trusted to make any more changes
because the operations team have said
hey developers you know our customers
aren't happy everything on fire so we're
going to go through a tree change freeze
which no one likes and they probably
introduce some kind of crazy control
board for making changes so now you have
to go through even more process to get
your code into production so at this
point we've got some very sad users
because the service is offline they're
not getting new features developers are
mostly spending their time fighting
fires or asking for new infrastructure
and nobody gets to build cool new stuff
so that's very sad so the next person
we're going to talk about is the
operator and so these are the people
that working tirelessly and big
enterprises to keep things going they're
keeping your software in your
application running and they're
responding to all of these fires and so
they often take most of the heat when
things go wrong
and so they're having a pretty bad time
in many large organizations but what do
they need they need to keep the software
running so the main job is to keep this
thing alive and running in production so
that the business can make money but
they want a repeatable process for doing
this they don't want to be having to
manually configure everything and that's
a real pain for operations but if they
can get this repeatable process where
they don't create snowflakes in their
environment their be in a much better
place and finally they want to automate
all of this so that they don't have to
sit there and have their seven screens
and you know manually SSH onto each box
and do that again and so what do they
want they want to sleep you know most
operators or anyone that operates
production software probably knows that
you get these three am page of duty
calls and that's no fun so they also
want this snowflake free infrastructure
so this is where the servers are
configured the same setup the same the
applications deployed are the same
everything is predictable and they want
to have hands off of production they
don't want people sht non meddling with
things changing things because that's
you know no fun and they want to focus
on the future so all this time that's
been finding fighting fires and
configuring servers and all this other
boring stuff it means that they can't do
things that they actually want to do
like infrastructure capacity planning
new projects you know and so these all
sound quite reasonable and so this is
how like most operations teams feel in
in large organizations today you know
developers having a great time putting
out with these new features and
operators having to shovel off all of
this you kind of like fighting the fires
and stuff so remember this is the most
day of infrastructure and we're back to
this you know everyone's kind of like
running around shouting screaming
nothing good is happening so now we have
unhappy users we have unhappy developers
who can you get any other code shipped
we have operators who are tired but
right this is 2016 Alex what am I
talking about things have moved on maybe
this is the case in 2012 but
unfortunately you know this isn't the
case for all places but most of the time
I hear the way we've got this figured
out we've got DevOps you know this is
where everyone in the company got given
the card and then they got AWS and so
they could solve a lot the problem sub
selves which has got us a long way
forward so a lot of law large companies
we work with now we're seeing them
moving towards devil DevOps but this is
kind of a great but it also brings up
some concerns so let's have a look at
what most companies will go into so
you've acquired your server within
minutes from Amazon you've probably then
went installed docker and then you think
hey let me make this a repeatable
process and automate this so you've use
your favorite tools like chef and so you
can use this to a PT Leave provision and
configure your server which is great and
then you need to get your code onto the
server so you write some kind of deploy
script it will manage this in my
automate docker whatever so now your
application is happily living running in
a docker container which you probably
haven't tested too well and you don't
actually understand how to run docker in
production but let's just go with this
because it's quick and we can deploy
things fast so then we remember there's
a user that needs to access this so we
set up an engine X server quite
straightforward but again we use our
favorite tools to make sure that this is
repeatable and we can scale them and
then finally some user can come along
and access your application so this is
cool because we've got a few things
improved we can quickly deploy
applications we can use some automation
tools and we get this repeatable process
so the operation sizable like this
development team can ship features
quicker it's a better place than we were
10 minutes ago but this is our developer
now they're looking after infrastructure
so they're setting up servers are
keeping these running you know they're
using the AWS or gcp console to go in
provision things they might even have
some automation around with terraform
but they still have to maintain that
they then have to look after these
deployment scripts this is how to get
your code into production they probably
hand roll these scripts you know who
knows that they've tested them that well
that could be bugs in the deployment
scripts they have to iron those out and
keep it all running next up they have to
worry about security so security on the
cloud is not always simple as you might
think it's very easy to acquire your
servers but setting up the right access
firewalls that's not simple so now that
the developer or the dev ops team is
worried about this they also have to
worry about that application health so
is this apps already does it need to
restarting so on off memory all of these
concerns then they have to worry about
how do i upgrade this stuff you know
we've got all these database servers
spun up we've got these servers running
particular version xubuntu so the
developers are also worrying about how
to upgrade this platform probably
working with the operations team but
they've still got a lot more
responsibility in the DevOps world and
then finally they might get time to
build a feature because you know that's
kind of what they're paid to do and this
is your boardroom you know they're not
happy and they're not impressed that
you've gone away and built this DIY
platform and because they wanted
business value deliver today and they
didn't want it in six months but I will
admit from working on Cloud Foundry
building my platforms is extremely fun
but it is very time-consuming and we get
into a bit more about what these kind of
platforms do for you we maybe convince
you not to go off and build one of these
yourselves so right we might have an
answer for this so platforms we've
established that people have these needs
and wants not all companies are meeting
the needs and wants but what the
platforms have to do with this and can
platforms help us create productive
happy people so this is the first
definition of a platform I found on the
Oxford Dictionary I don't think that's
correct for us the next definition i
found was in the business dictionary
which was saying they're operating
systems and gave linux mac as examples
it's a foundation on which all
application software runs right let's
getting closer so this is a foundational
element to the computing stack and where
your software can run so i think the
platforms are actually the operating
system for the cloud and so this is
where the foundation of software runs on
the cloud i think this is a lot closer
to reality and it gives us a building
block when we're moving on applications
from you know self-hosted legacy manage
data centers into this cloud native
error so let's have a look at over the
history behind platforms so I anyone
familiar with
platforms as a service like Cloud
Foundry in Heroku we've got few people
that familiar with that okay cool so we
remember the days when we had this
traditional IT stack this is where that
we manage everything from the top top to
the bottom so we're concerned about
applications the data middleware layer
what OS is running then we had things
like virtualization then we also had to
go and buy the servers by the storage to
configure networking and this is a huge
amount of overhead for any organization
to manage so naturally next long came
the aisles layer and so this is where
you get access to the underlying servers
storage networking with a click of the
button within two or three minutes so
this removed that layer of concern from
the operations team they were no longer
having to go maintain servers you know
they were no longer having to worry
about what networking equipment to by
plugging it all in their pain someone
else to do this for them so this made
look you made everyone a bit faster and
you could focus on what really mattered
and so we still got a lot of things
under like our concern here we've got OS
we've got the middleware layer you've
got data you've our applications so next
up came the pa's layer and so I'm going
to tell you a bit more about pivotal
cloud foundry next but why is this
interesting it allows us to start moving
into this kind of cloud native error so
we have applications and their data and
so this is all we're concerned with if
we can allow platform to manage things
like the operating system the runtime
services and then you can rely on the
ayahs layer to manage your servers your
storage and networking it means that
teams can focus on applications in data
and this is where most your business
value is because you see in large
organizations and any company really if
you can have new applications delivering
value to customers that's where you're
going to make your money you're not
going to make money by having containers
right containers won't make you the
money so this is a concept going to talk
about called the value line and this is
an idea from pivotal's VP of Product
James waters and it represents you know
where the value falls for your business
and so the first layer we're going to
look at is below the value line and so
this is things that you kind of just
have to have to be successful in this
class
native error so this is things like
operating systems contain orchestration
and cloud orchestration these are solve
problems and if you're going out and
solving these kind of problems yourself
well maybe someone else has done it that
specialized in this and they do it
better so this is where I encourage
everyone to think about using platforms
instead because it shifts your focus
from worrying about this orchestration
layer to worry about things like writing
applications so you can say here we've
got example you can focus on building
microservices with spring boot you're
getting data flow set up you can then
have CI and CD practices you know these
are all things that can add value to
your business and that means that you
can add new features that your
competitors don't have and so I
encourage everyone to start thinking
about am i doing things at the like
below the value line or are we working
above the value line creating value for
our business okay so we kind of heard a
bit about platforms some of the concepts
behind where they came from and so we go
talk to you a bit more about pivotal
cloud foundry so is there any cloud
foundry users in the room what few okay
okay 200 300 know so federal Cloud
Foundry is built upon an open source
product called cloud foundry which is
the leading platform as a service and so
pivotal are kind of wrapping up this in
a commercial offering and it's full of
the latest cloud foundry features
because pivotal are the number one
contributor for cloud foundry so we've
got a team of something like 200
engineer's adding features to cloud
foundry all the time making and then we
put this into the pivotal cloud foundry
product so let's talk about why cloud
foundries got some movement behind it so
it's run by a Linux Foundation
organization called the cloud foundry
foundation it's got a huge amount of
membership and it's growing all the time
but you can see what's interesting here
is you've got members such as IBM HP
intel pivotal SI p but you've also got
companies or integration partners like
Accenture and you've seen that we've got
a real interesting mix here I've
summers plus vendors plus integrators
which you don't often see in open-source
foundations and this is because like the
customers are really invested in the
open source platform and so that you
know they want to be involved in
defining what that platform is so it's
quite an open open process and open
community so this is the cloud foundry
kind of haiku and it's more popular than
this tweet might suggest but the concept
behind it is here's my source code run
it on the cloud for me I do not care how
it would that be nice you're not having
to worry about infrastructure you're not
having to worry about you know fighting
for tickets to provision databases you
can just say here's my code to run it
for me so how do we achieve this you
know a platform level we've talked about
a lots of challenges involved in
operating these things and running
surface yourself so the first level that
we need to look at is the infrastructure
automation so this gives us the power to
have a platform that runs on any
infrastructure so you can see here we
plow family uses a tool called Bosch it
can run on VMware can run on OpenStack
amazon web services as your recently
announced on google cloud platform this
is another open source project but it's
the cloud API layer and so this means
that we can provision a new cloud
foundry on top of vmware are any of
these stacks and so you get that cloud
portability baked in to the product and
the next level we're going to look at is
this container elastic runtime some
containers you know pretty hot topic
cloud foundry has its own container
scheduling system called Diego and this
is built on top of a product called
garden which is using another product
called run c which is the core of docker
containers so this is interesting
because it means that the containers on
Cloud Foundry are using the same code to
run doc containers so we're seeing this
industry standardization around the
container technology but it means that
we can offer app developers a
self-healing H a runtime so it keeps
your application running so you're not
getting those pages duty calls in the
night we can do logging and metrics we
can offer zero downtime upgrades so that
are you
don't have to experience outages when
the software is being deployed and so we
can run a variety of applications so
it's super simple with one command to
run spring applications Ruby go PHP and
also we support bringing docker images
so you can push the docker images into
cloud foundry and because the underlying
technology behind the containers are the
same it means that we can run your
containers on on the platform as well so
Cloud Foundry has support for a range of
managed services so again we use Bosh
for this because gosh is great at
keeping these servers running it will do
health checks and you can create you can
elastically scale your infrastructure
layer with Bosh so cloud foundry
services are examples like my sequel
Redis rabbitmq Cassandra pretty much
anything will be able to run on the PCF
platform you then have this concept of
brokerage services where this is adding
services to your platform that might
exist elsewhere right because many
organizations they probably spent you
know too much money on on some awkward
server and they want to leverage that so
with Cloud Foundry you can have this
concept of brokerage services where you
can add external services into a cloud
foundry marketplace and why is this cool
it means that developers have this one
stop shop for all of the services your
organization has to offer ok so we've
seen the platform but how do you get
accesses a developer to this it looks
like it's very complicated there's lots
of stuff going on this elastic runtime
says infrastructure as a developer or
you have to worry about as one command
CF push and so this is where you know
you're doing this from a command line it
will upload your application and get it
running inside of cloud foundry and you
get all the benefits of that elastic
runtime and you've got a hey CheY
application running ready for users so
we see more about this in the demo but
so how does cloud foundry run your
application this is quite interesting
process so first of all we take your app
source code we then apply Bill pack so
the bill packs job is to detect what
code you've pushed so for example the
we've got a bill pack called the Java
bill pack this would detect your
application is Java it will download
your pet to depend
sees compile it and then produce a file
that can be used to run on the run time
so once we've applied the bill pack
process we also add a file system so
this is the base file system which would
be something like Ubuntu and then we
wrap that up inside of a container so
we've now got your source code the bill
pack and the file system in a container
and what we can do is run this bill pack
process to get your artifact in Cloud
Foundry will call this a droplet so this
is going to give you two benefits
because we've produced a drop look and
it means next time we need to create a
container we simply create the runtime
container add the file system stack
stream your drop play inside and then we
can start you're out running application
this means that we have a really really
simple repeatable process because say we
want eight containers we go ahead and
create containers on Cloud Foundry again
this is I'll show you later but there's
a simple one command to do this and then
we can simply stream the droplet into
each container and then we have the same
identical application running in the
same environment isolated through
containers and so there's no snow flake
applications here all of these are
configured exactly the same so when
you're debugging there's no risk that
our houses container configured or which
version is this running because the
platform will make sure that your
application containers identical so
really we're looking at a jold of
element and so agile development helps
you go fast you can iterate in your
development environments but it doesn't
really help you get your production this
is where agile deployment comes in and
so you can see like having a platform
like Cloud Foundry means it's super easy
to put me to put these apps into
production so if you want to find out
more about cloud foundry I'd recommend
checking out this like quite small book
by Duncan win it's called cloud native
platform it looks like this and we got
some at the pivotal booth if you pop by
later you pick up a copy there's going
to be a full book coming out in the next
few months about this from Duncan but
this is a great starter it will talk to
you a bit without platforms some of the
specifics about cloud foundry how it
works how to write your apps and the
best way to get them running on the
platform so definitely come by and pick
up a copy later
okay getting into the found a final part
before we jump into a demo so we're
going to talk about pipelines and so
platforms have given us this place to
run our apps is managing the
infrastructure but how does our code get
there yeah we can manually do CF push
that's quite easy but does it to operate
is really one UCF pushing into
production I'm not so sure so think of
pipelines as your route to production
these are things that you would have in
your environment that make it super
simple for you to get from the developer
environment all the way through to
production so you'll probably have
systems like this using Jenkins
traditional CI and so it reduces that
risk of having code sitting around
that's not shipped and because we want
Teth we want to test these features
before we ship them so we put them
through this pipeline which is a step of
activities so what are some of the
characteristics of a pipeline so
pipelines are automated and so there's
no manual fiddling the ideas that you
automate everything and put those into
repeatable steps so once you've got the
repeatability you can do the same thing
many times with predictable results
which is great because when you're doing
a production deploy you don't want
something to go wrong you want the same
thing to happen in a repeatable way
pipelines are also great for visibility
so this is important that you can use
these to infer a d8 information so
you'll see in like lots of pivot offices
around we have these huge kind of like
CI monitors that have pipelines and
pipelines are great a great way to
radiate this information and first also
they're very understandable because you
get a visualization of what is happening
so when a new team member joins they can
easily see in comprehend like what's
this pipeline trying to achieve what the
steps what's involved so this is a new
product let's come out of an open source
product actually sponsored by pivotal
it's called concourse do we have any
concourse users or anyone heard of in
the room okay awesome yeah so this has
been going for maybe about a year and a
half now but it came up the complex CI
requirements for cloud foundry each team
had different environments they need to
test it on they have different
configurations they want to use and P
teams with some are using go CD
someone using Jenkins and that was
really really complicated because of all
that kind of you I clicking and so when
you look at the the pipeline in in Congo
and Jenkins rather it's very confusing
to what this is actually doing it were
quite a lot of explanation so on the
team to a key back context where's
concourse allows you to simplify that
into a kind of visual representation
using simple constructs so what does
concourse offer you and why should you
be interested so first of all you're
isolated builds it's built on cloud
foundries container technology so it
means that each time that you do a build
it will run in an isolated container
afterwards it will leave that container
around for a while so you can go on and
see what's happening which is one of the
cool features I hope show you a bit
later and so we don't have anymore build
pollution so there's no UI configuration
in concourse this allows you to commit
your pipelines with the code version
control them it stops people going
around and fiddling the things they
maybe we shouldn't be changing and it
then allows you to have simple pipeline
building blocks and so this is one of
the really powerful constructs of
concourse is it's got some simple
constructs that allow you to make these
very complex deployment pipelines but it
it makes anyone that's reading the
pipeline it's pretty easy to understand
and follow are the various concepts so
let's have a look at a pipeline this is
what you get when you get a concourse
pipeline you can see that it kind of
works left to right so artifacts will
enter on the left exit on the right so
you can see we've got this piece of a
PCF demo resource and so resources and
concourse the things you might care
about that might change for example if
you did a git commit you can have a
resource that looks at that so we'll be
monitoring these resources and whenever
there's a change it can be configured to
trigger the next stage in the pipeline
so you can see this green box represents
a job this is a job that successfully
ran so this is the responsibility of
doing some tests it can then out have an
output so an output of that might be it
might tag or create a release candidate
and so you can see that its output to
this resource as well
and then finally once we're happy that
we've tagged the deployment that we're
going to make we've tested it and then
we can do a zero downtime deploy using
cloud foundry and so behind the scenes
are some complicated stuff going on
these steps but from a you know what you
care about is the build passing and
where did it fail this is a great way to
radiate information cool so going to
jump into a quick demo I'm going to show
you a bit about cloud foundry we're
going to get out get an application
running then we're going to take a look
at concourse and create a simple
pipeline awesome okay great so okay
how's that font size for everyone okay
great so first thing I'm going to show
you is your control center for pivotal
cloud foundry so I'm using pivotal web
services which is a hosted cloud foundry
anyone can sign up for this you get a
30-day free trial and this is where you
go to monitor your applications so you
can see here that we've got a space
called development and so this is an
isolated space within cloud foundry
where you can do whatever you want and
you're not going to impact anyone else
this is great because it means you can
push in your tray on the apps and you
don't have to worry about you breaking
some other teams environment or waiting
for a long time so what we going to do
is jump over the command line and we're
going to see we've got a really simple
application here we're going to use you
can download this from github it's
called the CF example spring up and you
can see we've got a few files here we've
got an appt groovy and apt test we've
got CI folder which is going to use
later for concourse so you can see if we
see the CF API so we can see we were
targeting run up pivotal diet and so the
cool thing with Cloud Foundry is this is
a standard client and you can connect it
to whatever Cloud Foundry you like
there's other cloud providers like IBM
bluemix any 9s and you can easily run
your application on them but the cool
thing is that you have this consistent
user experience and you don't really
care where your code is running use care
that it's running right so if we have a
look
and CF push so this is going to take the
local application directory and upload
it to Cloud Foundry it's going to assign
us a route so that someone from the
internet can access this and it's going
to apply the build packs so hopefully if
the internet connection here is okay
we'll see this happening so you can see
first of all the Cloud Foundry is
creating you that route it's creating a
binding between the route and your
application it's uploading your files so
now the files are currently in the cloud
they've installed in cloud fantage
blobstore we're then trying to work out
which bill pack to apply so you can see
here the Cloud Foundry is detected that
it was a java application and it's
chosen the java bill pack is created us
to staging container that we saw about
earlier is put the build for artifacts
in those containers in the container run
the build pack and it's created us the
droplet so this means we've got an
artifact to represent your code and
compete putting side of container and
you can scale this infinitely ok so now
Cloud Foundry is going to be talking to
the elastic runtime component and
requesting that it starts running your
application so let's see if this comes
online oh great so that's not working
for some reason live demo say right
let's see let's see if we can find out a
bit more about Wyatt crash from the
console ok so we can see we've got to
crash events and if we want to find out
a bit more we can do a command like CF
logs and we can look for CF scrupulous I
look at the manifest so we can call this
we need one CF a and we can see that
we've gone application it started but
it's crushed so let's have a look at CF
locks so see if logs is a great command
for debugging things
so we can see we're telling live logs
from the application so let's go in here
and we can do something like a restart
so it's going to try and redeploy the
application and bring it back online
okay so we can see the logs is Italian
so we've created the container let's see
what happens next kind of gone off
script but this is quite interesting
okay so you can see that we're reporting
that it's going to monitor the health of
your container oh ok something doesn't
look happy here let's have a look so
let's ok let's try and reproach this
application now this might work but you
can see quickly from pushing the
application you've got fast feedback of
what went wrong you can see this through
the UI or you can use the terminal you
can also use debugging tools like CF
logs which is streaming logs from
outside of your container back to the
command line so hopefully we can figure
out what's gone wrong if this doesn't
work we go into the next pile of the
demo which is looking at concourse which
is a bit cooler because it's new ok
let's see this is uploaded the artifacts
again and so while this is doing this
let's take a look and see if we can
create ourselves a data service ok so
Cloud Foundry has a concept called the
marketplace so we're going to be
requesting and say Cloud Foundry show me
all the services that could be available
to me so as an application developer you
can choose say if you're if you know
that you need a sequel database you can
see the cloud foundry marketplace so you
can see pivotal web services has a ton
of services on offer and so we can
simply run let's make this a bit bigger
ok so we do CF great service and we can
say we want to use one called elephant
SQL there we go so we can say elephant
nest well and then we will want to call
we want to grab the
turtle so you can see it to the right
we've got descriptions of what these
various plans mean but this is just a
basic database so we're going to call it
my DB mmm not having much luck here
where is it oh yeah oh yeah cool thanks
right so now we're creating a service a
new database and so this is going to go
off and use the cloud foundry
marketplace to broker us a service and
so we can now see we have that service
available to us great so we now have a
database service that's available for
application so let's jump back and see
if its application Oh still failed to
start I'm sure this worked earlier for
what's really cool with Cloud Foundry is
you can easily create a binding between
your application and this database
service so what this is going to do is
effectively allow your application to
connect and it's going to give it the
kind of connection details inside of the
container and so your application can
read those and connect your data service
really easily so if we do CF bind
service this is a command let's try and
make this a bit ok so much space so so
this is CF bind service and so we're
going to run CF spring devoxx and we're
going to find it to my DB great so now
we have the database service bouncer
application I could show you you through
the if the application started correctly
I was going to show you this through the
pivotal web services you I you can then
start to look at what the database
contains and do all the normal stuff you
would with a database but this was super
simple because it was pretty much three
commands so the CF push CF great service
and CF buying service and then you had
your application running in the cloud
environment you had a database created
and then finally you had you had exposed
to users by a cloud foundry route so
that's what i want to show you with
Cloud Foundry I'd recommend going to
pivotal web services trying out yourself
with your
location the next up let's take a look
at concourse and say what we're going to
try and do is get a simple concourse
pipeline that will take our code it will
test it it will then deploy it to cloud
foundry so for this we're going to use a
tool called fly so fly is the Conte the
way that you interact with your
concourse deployment and so you can i'll
show you an example of one of our teams
pipelines so this is a really really
complicated concourse pipeline so you
can see over here we've got the build
status so we can see if it's reporting
if it's pending if it started it
succeeded and so you get these
visualizations of you can see exactly
what's happening in your pipeline we're
not going to make anything this
complicated we're going to do something
simpler so let's first have a look at
how you configure a concourse pipeline
so let's take a look at our CI and
pipeline so you notice that this
pipeline is committed alongside the code
and so this means that you can get no
credentials you can get the credentials
I hope your pipeline definition you and
into a secret repository like volt or
LastPass ok so what's interesting here
is the concepts we touched on earlier
with concourse we define what jobs are
involved in this pipeline we can then
have multiple jobs and then we define
how they tie together we first of all we
want to define a resource so you can see
this is a spring sample app we're
getting it from gear and we're going to
go to this source and so concourse has
inbuilt support for various types of
resources things like publishing to s3
you can also do pushing notifications to
pivotal tracker you can push the cloud
foundry you can create sin ver so you
can create versioned artifacts and these
are all native to concourse if you want
there's a really simple extension
mechanism to build your own resources so
if you wanted to find a resource to do
something else you can easily do that so
let's take a look at our build plan so
this is all of the steps involved to get
your unit tests running so the first
step is we're going to get our
application
this means that we're going to go to get
and download it and we'll be using this
as a base artifact for this step we're
going to set a trigger so as a trick I
mean it means that every time saw makes
a commit to this repository that it's
going to go off and run an instance of
this unit test job and so this means
that you know simple watching mechanism
so next up we need to actually run some
tests so we've downloaded the code and
now we're doing this phase and so we
want to do this inside of a container so
we're going to use a docker image here
and we're using a groovy docker image
and the input is going to be the sample
spring app so this ties together the
first step which was the get so it's
going to make that those files available
inside this container and then it's
going to run a process so you can see
here we're going to run groovy and we're
just going to run our simple app test
file and so that's quite a
straightforward pipeline is very easy to
read and understand as your pipeline
file groves you can split these tasks
out in two separate files and if you
need to reuse those across your pipeline
it makes it quite easy you just change
this reference for a reference called
file so awesome okay so let's try and
set this pipeline on concourse okay so
first of all we're going to target our
concourse instance so this is my team in
London's concourse I'm boring we're
going to set the pipeline when i call it
dev ox we're then going to pass a
configuration file in which is our
pipeline llamo and then we're going to
load any credentials then we haven't put
any secrets into the configuration yet
but this is a mechanism where we can
load tokens we'll look at that next so
this is the one command there's no UI
configuration I've previously
authenticated with concourse and so it
knows I have the ability to create new
pipelines okay so we can see here this
is a quick chance for you to review
before you push this so let's say yes
okay so now our pipeline should have
been created on concourse let's see if
I'm more lucky this time so let's give
this a refresh okay so we can now see we
have the devil's pipeline so great we
have our CF sample spring app and a unit
test box
so if I click play here so we've done
we've effectively unpause this pipeline
so let's see if we can do something
interesting like getting it to run so
let's make a change to the manifest and
let's say ah it's automatically
triggered great so it must have picked
up a commit i did yesterday on this
project okay so you can see that this is
now in the pending phase and so it's
gone and it's going to start to pull
down a docker container let's have a
look at this little bit more detail so
you can see here this is the job box and
so what was what it's done is it went
and got the CFS sample app it's then
detected that we requested it run in a
container and so this step pulled the
docker image and then crater the
container and ran our tests and so it
took run two tests and took one second
awesome so if we go back to the pipeline
view we can now see we've got a happy
green box and we've put this up on a big
monitor on the wall so all the
developers can see that they have now
successfully unit tested that code and
then we can trust that concourse is
going to do this in a repeated automated
fashion great so let's take a look at
another example pipeline and this one is
going to break and it's intentional so
let's just hope that actually breaks and
doesn't pass so the next file we're
going to take a look at is pipeline so
this is a bit more complicated we've
added a second job to our pipeline and
this is going to be triggered when the
unit tests pass so this allows us to
define dependencies between jobs so
we're pull down the the new code with a
unit test it when that successful we're
going to deploy it to cloud foundry and
so you can see there's also acting on
the same like get resource it's got the
trigger so that when this passes it will
also trigger and we want to make sure
that we only deploy things that pass our
unit tests that's great so we're using a
pup
on a put type on this next operation so
this is concourse telling it needs to
take the artifact and put it somewhere
in this case it's putting it to cloud
foundry okay so what are the parameters
we need to manifest that we have to find
the manifest is just simply telling
Cloud Foundry like what's the name of
this app how many instances do you want
running and then things like how much
memory do you need so you can commit
that alongside your code I mean you need
to tell the resource where to find your
application so you can see here that
we're going to play this app groovy so
we now define another resource called
deployment we've tied this together here
because we're putting to deployment and
we're going to define which cloud
foundry API we'd like to talk to
username password the organization and
space there's a cloud foundry concepts
of how you isolate users within cloud
foundry and because we're not well we
don't need that we're actually deploying
to a real cloud foundry but you can skip
certification if you're doing this in
development environments ok great so
we've now got a pipeline that should be
able to unit test our code and it should
deploy to CF great so let's let's set
this pipeline ok so we're now saying
we're going to use the deployment
pipeline and we're going to load in the
credentials from this creds file and so
what this means is that we've now got no
secrets in our manifest file sorry in
our CI file and we're going to put this
straight through so ok great so we've
now updated the configuration of that
concourse so now we see that how this
new box which is deployed to CF ok so
we've now got going from left to right
we've got a box it does getting the
latest code it's got a unit test it this
is going to detect that this unit test
is passed and then it's going to deploy
to cloud foundry ok so if something went
wrong so we can quickly see and you know
what's happened and the team can easily
go and start diagnosing this issue so
you can see here I've configured this to
use an older version of the cloud
foundry CLI so we're quickly told that
this is the error and so we can go in
and diagnose
problem if we want to actually go on to
the container there's a tool called fly
hijack so we can use sublet okay so we
could go let's have a look at this
deploy to CF okay now we're in the
container so we can just straight away
we've got from seen it something went
wrong on the screen to jump into the
container and then we can start having a
look around the environment we could go
and have a look at the CF example spring
out oops you can start diagnosing logs
and see what went wrong and so you can
quickly debug your pipeline and find out
what the real issues were through the
simple user interface and then able to
ssh into these containers and actually
see what's going wrong and so the
container will stay around for five
minutes afterwards and so you can do
your debugging and you can see a list if
you run a simple command to see what
containers are currently active and you
can see what jobs been run in there
doesn't look too nice on that screen but
this is super effective for building
pipelines debugging pipelines and
radiating information to your teams okay
so I think we're about out of time for
that part of this part the demo sorry I
didn't look at the cloud foundry part
working but i would say recommend
checking out on pivotal web services
didn't like changing ok awesome so just
quick recap we've seen that cloud
foundry can help you with dev
infrastructure because it makes it super
simple to get access to development
environments we've seen you can choose
your language that runs on the platform
you've got access to a range of services
you get to focus on features because
you've got this you've got the tools you
need and you've got the infrastructure
to run it on and eventually you can ship
software you can do that much faster
with a platform and you've seen that the
pipeline can automate your way to
production so next up let's have a look
at the operators so the operators need
to keep things running so they need
repeatability wish the platform
with Bosh keeps the infrastructure
healthy and running it also keeps it the
applications running so they don't have
to worry about app crashes well unless
you're me and did something wrong next
you get repeatability from the platform
it's all automated or and you can
automate this through concours pipelines
and this leads to the snowflake free
infrastructure because Bosh has created
your infrastructure layer in a
repeatable way Cloud Foundry is creating
your application containers in runtime
in the same way and so you can guarantee
that your application is in a consistent
and you can't get snowflakes across your
infrastructure and finally they can
focus on the future because you know
they don't really want to deal with
these it calls it three am plugging in
servers and so the cloud foundry pivotal
I found your platform allows them to
focus on their real job and of course
not forgetting the users don't know why
is one off the screen but the users now
get availability from the platform so
cloud foundry offers four levels of hey
CheY as you saw you get a che at the
infrastructure level the container one
time level and this is far more reliable
and it means that because developers
could be way more productive they get
cool new features ship to production
often so if you want if you want to get
started with this something strange
going on with these slides you can go to
a concourse C I check out the hello
world example you can do vagrant in it
concourse / light and this will give you
a concourse running on your local
machine it's a very quick way to get
started and play with concourse if you
want to get started with pivotal cloud
foundry you can do use a tool called PCF
dev so this is just go to just google
PCF dev and you can use a CF CLI plug-in
again this brings the whole cloud
foundry experience into a vagrant image
you can do things like accessing all the
cloud foundry services like rabbit mq
rightists my sequel spring cloud
services and yeah lots of others so I
think about out of time I'll be happy to
take some questions now I'm going to be
heading back to the pivotal booth this
afternoon so we have time to chat then
you can also pick up a copy of the cloud
foundry book so yeah thanks for thanks
your time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>