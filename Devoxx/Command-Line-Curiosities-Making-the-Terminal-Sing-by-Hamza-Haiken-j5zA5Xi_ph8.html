<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Command Line Curiosities - Making the Terminal Sing by Hamza Haiken | Coder Coacher - Coaching Coders</title><meta content="Command Line Curiosities - Making the Terminal Sing by Hamza Haiken - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Devoxx/">Devoxx</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Command Line Curiosities - Making the Terminal Sing by Hamza Haiken</b></h2><h5 class="post__date">2017-11-07</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/j5zA5Xi_ph8" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello everyone and thanks for coming to
my talk so this talk is gonna be about
the terminal in the terminal so let's
start by opening this one welcome to my
world
and here are my slides also in the
terminal so I divided this talk into
three sections first I'll quickly
introduce myself what I'm doing then I
will teach you the basics of what you
need for experimenting with graphics in
the terminal and finally the big section
is about ten demos section three so be
prepared for that so Who am I
my name is Hamza - also known as 10g on
the internet here's my Twitter and blog
I've been at code store in the
Netherlands for three years since its
creation and I really like terminals so
in my free time and also at work I spend
a lot of time in a terminal and
sometimes I just come across a tool that
I find so it looks like black magic
basically and I want to learn how to do
that and how to do it even better I try
to do my experiments I try to make them
open-source that forces me to make clean
code and also it's nice to share with
everyone and yeah I do that three for
fun so first I'm gonna do a quick demo
about what already exists some of the
things that inspired me so maybe one day
you woke up the morning and you thought
hey maybe today I will be able to see
the code that makes out our universe but
for that you could also just install a
Linux package called C matrix and be
able to do that or maybe you want to
take some vacation of work and you don't
have enough time and you would want to
go skiing or I just died so you can use
glue ski it's an open-source ski
simulator for the terminal you could
play Tetris yeah you could also do more
use useful things like maybe some of you
have used
we cut before it's to make these huge
banners you see sometimes in Widnes
because this is Unix you can compose
everything so let's make a cow say hello
devoxx and this lacks a bit of color so
let's also pipe it into low cat here's a
nice rainbow cows saying hello devoxx
you also have really useful things like
a reddit client let's go to the Java
subreddit yeah so we can be sneaky at
work looking at reddit posts in your
terminal so back to the presentation
before showing you and if the cool
things we need to know about the
characters and how they're displayed in
a terminal so let's start with the
characters I'm sure everyone's familiar
with ASCII it started with only seven
bits hundred twenty eight characters and
it was all that was needed at the time
so a few control characters two times
the alphabet some symbols and numbers
and when computer architecture evolved
we needed to align data with memory so
we extended it to 8-bit and suddenly the
the amount of character doubles doubled
so every company did that their own way
if we look at Commodore and IBM pcs they
didn't have graphical interface so they
use that extra 128 characters to have
fake graphics so characters that you can
use as graphics if we look at the Mac
side they already had a graphical
interface so they took advantage of all
those new character spots to add
accented characters to support more
languages than just English and nowadays
the ASCII standardized by the eye so you
have many variants of it for each
language let's look at code page 437
which is the one of the code pages from
DOS ASCII which is used for terminal
graphics so this is the start of the
normal ASCII table is just a bunch of
control characters the numbers the
alphabet and now we enter the extended
part
so they decided to add a few accented
characters still and this is the the
part that interests us these don't look
like characters it's their code box
drawing characters and they're used to
draw boxes in the terminal so as we can
see here are some boxes with single
single lines double lines can mix and
match and you also have some block
characters with deterring support so
here is with just black and white I'm
doing about eight shades of gray maybe
some of you are familiar with the screen
this was using a code page 437 back in
the day when you installed us and if
you're really quick with typing you can
maybe leave a nice pretty dying message
so first tiny demo here is a file
representing my logo in just hashes and
using Python I wrote a program that will
parse this and create a graph out of it
and do a traversal using breadth-first
search and then print the output as
using box run characters so it creates
basically an animation of drawing that
logo but you might notice that I'm
cheating here I'm just displaying many
messages in a row like a flipbook and it
looks like an animation so we're gonna
fix that layer with ansi escape codes
next we have unicode also I guess
everyone is familiar with Unicode I
won't spend much time here it's
basically you have infinitely more
symbols just spend the time in the spec
sheets you have thousands of them you
might find some useful ones like these
blocks that you can find in the normal
ASCII some numbers maybe emoji if you
want to do something fancy so now that
we know about characters that we can
draw we need to learn about how to draw
them so here's the VT hundred at least
the best I could do to draw it
what is the VT hundred and why am i
talking about this it's the first video
terminal that supported special
sequences of characters that the
mainframe was
to your terminal and they're not printed
but something special will happen like
volt characters adding colors moving the
cursor around and these control
sequences are all bi-directional so I
could by printing text I could ask the
terminal to print in my standard in the
size of my screen for example so that's
quite useful what do these sequences
look like they always start with a thing
called a control sequence introducer
which is an escape character followed by
a left bracket and followed every time
you have a CSI you can add some more
characters or or letters and these
define the commands that you'll be using
if you're curious about all these
there's a Wikipedia page but it's not
really complete if you really want to
deep to dive deeply you should use the
VT hundred manuals so let's go back to
that demo we had earlier and first I'll
just show you an escape character in in
action so I'll use printf to print an S
character a left bracket to J and by
printing text I cleared my screen so my
terminal emulator which is emulating a
VT hundred is instead intercepting those
characters and doing an action so now
let's use a different version of my tool
with the same input data and we can see
a real animation this time it's using
the command to go back to the beginning
of the line and go up a few lines and
draw from there so it's like a real
animation of course when I want to
experiment with this I don't want to
remember all those codes and print them
all the time it would be way too tedious
so I need the framework if you look at
current tools that are existing on the
web most of them will be built using end
curses butt end cursors is a very old C
API and there is a Python binding for it
but it's really tedious to use this is
just boilerplate code to initialize the
screen whenever I want to print
characters I need to initialize color
pairs and and and manage a very limited
number of them
the event handling is full of magic
numbers and in the end you need also
magic incantations to restore the screen
like it was I didn't want that so I made
a library called curse box it's open
source you can try it out
the goal of curse box is to be as simple
as possible as we can see in the code
here this is the exact same operations
as I was doing in other code snippet and
yeah using the with statement I get to
Python scope with the C be object which
I can use to just draw wherever I want
with whatever colors I want and when I
exit that block the screen is reset
automatically I also wanted to
experiment with Scala which is the
language I use at work nothing is so far
for Scala there is of course some Java
bindings for cursors but then we run
into the same issue it's a really old
library and I don't want to just be
doing curses I want to be more
expressive with my language so I created
a library from scratch with no curses
dependencies only using ansi escape
codes and we'll see about that
a bit later in the demo so now that we
know we're equipped with our weapons of
characters and terminal knowledge we can
delve deeper into the dungeon it starts
laying some beasts as I experimented
with with my projects I am a technique
evolved and I separated this part of the
talk into three tiers we'll start from
the blocky and basic we'll go through
the really highly detailed and finally
end up with a happy middle first
technique is using just the the blocks
we saw earlier and with them we can mix
and match the different blocks to create
fake colors using only 16 colors the
aspect ratio is one to two because those
characters are quite tall so your image
will look squished but you can still get
away with doing quite a lot here's a
project called Allen's maybe some of you
recognize the shape of that logo is the
Mandelbrot fractal so this project is a
Mandelbrot fractal Explorer in your
terminal let's do a quick demo
we have a nice splash screen and here we
are so I can just move around zoom in
and yeah just explore the magic that is
Mandelbrot and of course it's really low
resolution but once you find a nice spot
you just press stage you have a nice
little progress bar appearing and it's
currently rendering this exact scene in
high resolution for making backgrounds
or whatever and time now yep here it is
in high resolution and of course you
have multiple palettes you can invert
them many options for customizing next
tier of technique one day I was in the
bus and the bus stopped at the stop
called Braille Street and it gotten
curious to investigate what Braille I
went to Wikipedia and yeah so Braille is
2 by 8 drawing Syst dot character
character system for blind people
so some dots are raised some or not and
with your fingers you can feel them and
and weed and every alphabet or every
language has its own Braille alphabet
and Unicode didn't want to bother
encoding these specifically so what they
did is that they encoded every possible
combinations for these eight dots and
this is really convenient for us because
we can go from pixels look at them in
the order defined by the Unicode
standard and write that as binary
reverse it add an offset and here at the
bottom we have the Braille character
representing these exact pixels and with
that we have a one-to-one mapping of
pixels to 2 characters without
distorting the image and we can draw fun
stuff like this
Ida Vox one project I did with this is
Surveyor
so I was inspired by those hacker movies
where they have awesome terminal
applications you don't know what where
they come from
I wanted to make it real so this is an
application that parses the output of
trace routes and
shows you a vector map it's a bit slow
here we are we can see Europe there's
the night and day limit on the left this
was a traceroute that I baked in advance
for the demo and you can see that it's
going to Japan and all of this is vector
data so you can zoom infinitely and you
know it's all pixels but behind it it's
vector so it stays smooth and again this
is all Braille characters next and final
tier is using half block character so
it's this guy here we will have again a
one-to-one ratio so no distortion two
pixels per character whereas with the
Braille we had eight and this time I
found out the trick to have 256 colors
so this character here the upper half
block since all characters in the
terminal have a ratio of 1 to 2 if we
split that in half and only take the
upper block this block will have a ratio
of 1 to 1 no distortion and by
controlling the the foreground color it
will color at the upper part which is
drawn and the background color will
control the lower color so we have again
I want one mapping of pixels to
characters what about color
I discovered that X term which is the
default terminal emulator for X or on
Linux added on the ansi escape sequence
standard by adding 256 colors these are
an indexed palette in random order so
it's not really easy to have a mapping
of RGB to those what I did is that I
made a function that will create
dynamically a lookup table and will try
to match any given RGB color to all of
the X term palette and find the distance
that is the closest to it and save that
for next calls and with this we have a
one-to-one mapping of RGB to terminal
colors and all in all now you could say
a Braille had more characters but with
Braille you could either color all
the dots at once or not at all and this
is one you want to do graphics it's not
really useful for us so right now what
we have with square pixels and
individual color assignment we have kind
of a during completeness of graphics and
this is exactly what we want for for
experimenting one of the first projects
I did when Pokemon go was getting
popular is to write on the wave and
create a pokedex application for it
terminal it's again open source you can
install it so you just type pokedex
number and you get a nice character
sheet and using those half blocks and
the trick with the background colors
these are all half blocks but I'm
displaying a PNG image here next demo is
called orbiter it's a module player
modules are music files that date from
the 80s it's kind of a MIDI file that
contains its own samples it was really
popular in the demo scene and yeah it's
really neat I I wrote a binding to a sea
library for Python to read those file
types and also I used numpy to do some
Fourier transform to get the frequencies
and everything so let's just see it in
action
I will need some sound for it so start
with the wrong demo sorry there are some
bars made in Braille it's just life
spectrometer or you can see the
frequencies of the phase to travel all
that stuff I already spoiled it earlier
but there's a different kind of
spectrometer or we can see the frequency
is shifting from left to right depending
on the notes like you would in audio
editing software
and the best we can do here is a full
player like Wynnum where you see
individual channels a progress bar some
comments yeah you don't need iTunes
anymore if you have terminal ok next
project I was happy to learn that it was
featured in the Scala times if you're
wondering how I drew that newspaper here
it's by exploring sheets of Unicode
specs and finding that mathematics needs
to encode different kinds of writing
styles for sets for example the real set
has a special character so they happen
to have calligraphy characters that I
can use for the title and for the fake
lines I'm using those symbols you see on
the Korean flag these are elemental
symbols in Chinese cosmology so that's
how we can get creative with unicode so
what is this project it's called
cirrhosis it's that framework I talked
about earlier it's completely written
from scratch using only in spencey
escape codes with no dependencies it's
open source and it's really easy to use
as as I did with the curse box Python
framework you get a block of code
providing you with the screen object you
can use that to get the screen size or
write text in any color in any place you
need and also do some event hunting
let's have a quick demo of cursors so
it's compiling live so it's a bit slow
the first demo is the exact code you'd
saw on the previous slide it's just a
hello world but the next demo is a bit
more interesting it's the game of life
written in scala with that framework
added from scratch and you can see the
frame rate is quite high so you have
some possibilities there to go crazy
next project I did is called onions and
for the Dutch speakers out there I
called it phonons because it's all about
the UI are meaning on
it's a graphical user interface
framework with a tiling layout that
provides a handful of widgets it uses a
reactive model where you can observe
widgets from other widgets and react to
their changes it's also open source if
you want to explore experiment with it
here's I think it's better to see it in
action and again because this is alt
text it's compatible the SSH so I can
SSH to a machine that's running a
dashboard like this and it will just
work over SSH so we can see on the Left
I have some rich text support with bold
underline and colors we have multiple
tiles I can navigate them with the
arrows here is an input box it's
reactive I can just change the color on
the fly we have a histogram showing some
random data with two axes and colored
bars depending on the height it supports
themes here's the ms-dos theme all blue
and nice we have check boxes radio as we
saw above here are some bars we also
have heat maps so this is a heat map
showing the scatter plot on the bottom
that's which tabs here so each tile can
have multiple tabs and here we have a
PNG widget just read the PNG file and
draws it in terminal with text I can
change the blurriness
of the heat map using this slider you
can just go well then have really neat
bash boards for your services over SSH
and last demo it's a game project I
called Fordham it's I wanted to recreate
something like Wolfenstein in the
terminal I didn't go very far yet with
it but it's it already supports
anti-aliasing and dithering of colors
it's quite fun to see nice black screen
with the animated line
and here we are in the world of swaram
so again this is all text I'm in the
terminal and I'm also in the maze
apparently alright so this was my talk
thank you for coming does anyone have
questions sorry yeah well it's all using
a combination of the techniques I showed
it's just experimenting seeing what I
can do by printing characters but for
the individual things like ray tracing I
just followed the classical ray tracing
tutorial that's made for using with a
real graphical canvas but since I have a
one-to-one mapping I can just apply
anything to that all right
oh yes yeah so the question was can can
I use those frameworks I talked about to
make you is a UI applications in the
terminal and that was the goal of the
one of the last demos in scala those
widgets you can add buttons to that also
and have an application like behavior
yeah all right thank you all for coming</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>