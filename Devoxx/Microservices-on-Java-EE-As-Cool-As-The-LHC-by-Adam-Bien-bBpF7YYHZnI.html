<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Microservices on Java EE — As Cool As The LHC by Adam Bien | Coder Coacher - Coaching Coders</title><meta content="Microservices on Java EE — As Cool As The LHC by Adam Bien - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Devoxx/">Devoxx</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>Microservices on Java EE — As Cool As The LHC by Adam Bien</b></h2><h5 class="post__date">2017-03-13</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/bBpF7YYHZnI" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">this keynote was excellent so I attended
a keynote a look at this no really it
would be hard to top the keynote was
really interesting and funny
the next problem I have usually I talk
you know to my attendees or to the to
the session as in these I'm not working
for Facebook Twitter whatever so we can
just go with trade Java it's not like we
have to deal with big data or whatever
and I recognized this after the keynote
is a little bit different here so you
have a petabyte of data I have to admit
I have no no experience with how to
store petabyte of data on Java so I will
just show you what they are usually do
and it could apply to CERN in some
projects but I don't think you can
replace with a Java micro service your
140 second layer data center so it won't
work so usually I have no slides what I
try to provide some edit value' they're
copied three slides or three pages from
Wikipedia to provide oh I've read a
block is like a notepad and this could
be interesting so there are lots of
questions regarding Java and not even
Java EE now angle or whatever and I
don't answer the questions anymore via
email because of time so instead of this
first month of the month
we go live and do it on streaming and
then upload to YouTube great time-saver
some workshops serve on us
so in the recent micro service project
every microservices seemed to be a
little bit old
we need a new or how to call it new
buzzwords there are they asked me what
about service and this is a shy how it's
called she's a friendly definition so I
will show you what it means
so it means first it means there's a
pattern also service you don't care
about service and I thought about this
this is actually exactly what we do what
I do in my projects I don't care at all
about the service this is the great
story of Java so we have the service
well no one cares about them so in
recent projects we move from Tommy to
Wi-Fi back to payara and no one no one
cared about a service so we just try
that and we focus fully on business
logic so
some relation here and the next thing is
despite the name it does not actually
involve running food without services
actually interesting with the second
page so actually it means the server
less head service but you don't have to
care about them ok this is actually what
we are doing in my recent project my
client asked me whether we can run on
Asia and Microsoft AWS and we push the
whole application server to ETS
this is Elastic Compute container
service at Amazon and ec2 and the funny
stories I find out that our full spec
Java applications are stocked payara
without any external voodoo is running
on the cheapest CPU
it's called micro and a half of the CPU
actually so if we could run the whole
year for free so we don't have to care
about this and even Tanya I tried to
deploy it on the nano
but nano is no more free and doesn't
work on the ECS so the nano ec2 instance
is not available for other reasons but
it could run equally well why it's funny
because my client asked me about nodejs
ok we need no GS because Java is too
heavy to run in the clouds and
what-whatever out I don't know what I it
wants already in production that without
any optimization not only it run well on
cloud but the development experience was
great and this is what I actually care
about development experience ah
if you have any question feel free to
ask because after the show I have to fly
back so there will be a limited time for
questions and the last thing is it means
at the end of the day we will need our
kind of you know infrastructure where is
somewhere but you will have to do two
bright chunks of code which won't run on
there on the back end so there's a mix
so what basically means serverless is
nothing new so we always do this so
there are parts of micro services which
are which already there so I'm actually
my current Java EE project one of the
current project it's fully service
because our our API is a cruise ship and
and our application servers are
orchestrating the cruise ship which is
really fun run to docker microservices
scaling and self-healing and
we just started coding without you know
any best-of-breed preparation fancy
tremors whatever again CERN is different
you will have to probably evaluate
something if you would like to store
petabyte of data are just coping in a
blob in a GPA entity is not a best
practice so um this was the last slide
so how it feels like what it means for
me serverless or framework let's let's
take that um I forgot actually I'm
working with Java since 1995 and I
remembered all the ideas the first one
was Java put your workshop this is what
I was the very first time and jbuilder
although was lacking on the slides but
everything else would look very familiar
the warm colors from 1995 you know
orange and yellow so first I would have
to close everything in the break someone
asked me why I'm gonna use IntelliJ
I have IntelliJ of course the problem is
I'm largely I mean I'm working for
larger companies and and then not always
have IntelliJ and if I force them to use
IntelliJ until the project starts with
all the leasing a license regional
ordering process whatever the project is
probably over with NetBeans I can come
in fact download and here we go so
actually and it shouldn't matter so stop
talking about IDE use whatever I like
except eclipse properly but so this is a
let's call it CERN
have no idea so what that first would
like to show you what it means the
framework glance or featherless what it
basically means is it looks like that
and we start over so it's no preparation
time this is the good news and this is
why the cruise ship and all the project
is actually startups so the crazy thing
is I have no time because I'm helping
startups why startups don't care about
the tech or they shouldn't care about
the tech the only thing they care is
time to market so how to achieve a good
time to market in my opinion is the only
way to go is forget about the tech and
just focus on business logic and with
Java it is kind of dirt though whatever
we need is here this is the food profile
we don't even I never use web profile
macro profile whatever profiles I always
the full one why because it does not
matter so I measured it several times go
to youtube to my channel you would see I
try to
um without and with talk and without and
the overhead of application server is
around about 32 to 64 megabyte of RAM so
with Tomcat is 5 megabyte of RAM and
none of my project will fail about 30
Meg's of RAM overhead
Remy's chip depends in your cases
probably something different so if you
would have to spin down or 100,000
instances there should be some money
involved in my project we have no
10-20-30 service no project will die
because we consume 1 gigabyte more RAM
so we have medium mark in Germany 64
gigabyte of RAM 300 euros 400 euros it's
the most expensive if you serum in
Switzerland a little bit more cheaper
but it shouldn't shouldn't influence
your decision okay
now it's done and so what we need for
setup so you probably know Java the
crazy guy needs NetBeans because of XML
good news XML is forbidden so no XML the
only thing I love is this and many say
CDI fanboys say this is an ten girls is
completely wrong because this is all and
you have to think about performance this
is that I would say enterprise Java
sickness too much thinking too much
about the performance without measuring
so what do you do write simple code fast
measure frequently and and and optimize
where it hurts what this means is
dependency injection works everywhere
done so a default would be annotated and
yeah I don't like to add a little too
much and the next thing is with that we
have rest rest exposure okay
so let's implement something sensible
and not sensible let's call that let's
say CERN hello resource so I don't care
about the business logic
so just heck whatever path hello
I wouldn't even try to do something with
protons and whatever it could be only
Bronx or just hello here you know try to
be humble
gasp
return Hey Joe this is my so and then I
can say run this is no joke involved I
would just run it on on standard
application server and I will just
choose payara now on later something
else this is code start actually forgot
to launch it before the session is a
little bit faster so now it starts
everything database and everything
starts from from scratch and with a
little bit of luck should work so now is
the worst possible experience it takes
about three seconds
Tommy will take about one hour second
but the best answer you get from Antonio
I think he has several dogs right shut
up time on your block so his block is
all about
shut up times performance and
application service and my block is
about cows so so we have here our hellos
so it works so now we can say ok but we
have no the application fuge and
override or whatever so the cool story
is so if you switch here and go to junk
junk is my presentation mode out for
trying out the project in junk is what
gets deleted after the show
and so there is a war l s- l h and if
you look at that this is the trick the
son is three kilo byte pic i performed
some interviews with my clients where
possible commit bunga whatever and if
you are reasonable the world will be
around 500k try to write 500k business
logic impossible so i'm finn worth this
is what we do it up in our project why
that if you think I think you're using
docker I actually missed the talk I
wanted to attend this and all clouds are
actually based on how on docker or
similar technologies on kubernetes in
Dhaka and the cool story is what happens
in my project is we push the application
server to the cloud one so we use PI R
alright so I told me what's the Liberty
profile whatever it doesn't matter
we use full Java 8 full centers or it
don't even optimize the image to alpha
and Linux or whatever no one cares
and then we push it once
climb the clouds and it takes some time
one hour
there's about 500 Meg if you have a
crappy connection that was won in hotel
it took one hour with a good connection
here it will take few minutes but it's
too long but the cool story is because
we have three wars the of all subsequent
commits and pushes take seconds if not
milliseconds and this is what was so
great why I'm doing so many projects
because the 10 are on cycles are
extremely fast so the question is how
often we have to rebuild the
infrastructure and the answers if the
applications have a changes so in case
of payara is i would say four times a
year in the case of home is even least
frequent and wide size something similar
so per accident I don't think it was but
pedophile the deployment model of
application server it's what helped us
in micro servers in clouds because what
changes is small and what is stable is
big but no one cares why no one care
content addressable storage is this what
arm what Doka does it means it looks at
the content not on the tile so if the
file is already in the cloud it's not
pushed again so what I did you would
like to to don't do it right now I push
it to ECS and recorded on my screencast
and the first push was was long and then
I updated the application and it took at
an old two seconds to redeploy to fully
deploy the application in the cloud
questions of our questions everyone with
me so the next thing is what do you get
for free is monitoring so in many
projects or the interesting project task
force one of my clients has lots of
dashboards graph on R and Cabana and or
unless bonus I don't know whether they
have lots of diagrams and no one knows
whether the use case is successful or
not
and I say knife so you should even know
know create are two more graphs then
it's believe in it I think they can even
tell me you know the temperature of the
cable or whatever but they cannot tell
whether something was successful or not
from the business perspective so what
you get for free from application
service is this for ice right oh it's
called server
for eight I told you eyes for eight for
eight monitoring domain so this is like
the payara found out and this is
available for all applications service
the problem is it was introduced in the
year 2002 and three so it's completely
forgotten so the funny story is one of
my clients introduced historical
application server because they didn't
knew that this matrix already available
and the cool story is at the end of the
day we are two matrix applications of
the matrix plus fistrick's matrix which
were identical even worse the
application started application server
started the threat and this week started
the sweat on india and the end of the
day we had a lot of buckets and what
those threats and everything died okay
so what we did we deleted histories
because where the application server in
another project which kept hystrix but
we reconfigure the hystrix in order to
use these thread put some application
server so applications cern you see that
you'll see nothing because this is just
a boring class or making a little bit
more exciting so it's like like the CMS
in Java is the stateless everyone is
excited about this so and now you see
something else so I got additional
thingy its hello resource so on the cool
stories this thing is available as Jason
it's available as XML and it's available
as HTML and it was always available that
way I think at most at least 10 years so
it started with graphic v3 so it's
completely old what I'd show it right
now but everyone is excited right now
why because now in the age of micro
services who remember ok monitoring is
important five years ago no one cared
about monitoring so we have the Java one
talks about stress and monitoring no one
cared about this right now
you are the hero if you if you show that
you monitor or something okay so arm so
we have CERN hello resource what you get
out of that so this is an ancient Egypt
ease so beam pools
what you see here how many instances are
active at the same time so what what
what you know immediately how many
parallel transactions we have in the
system without any additional member
nothing out of out of the box and beam
method what we also see is you see a
execution time is zero because nothing
was executed and the statistics
forget the basic statistics what's going
on in your favor and actually we could
look at that what was it
CERN resources hellos it was that I
could try it simple benchmark that's a
five thread 500 times over 500 times so
it's done so get over 1,500 transactions
per second and you would see here that
something happens is left-handed time
and and 500 invocations and what we also
see should see beam pool current count 5
it means there were exactly five
instances so we have five parallel
clients so get it immediately
finally not this information couldn't be
extracted from from the dashboard for my
client so it's okay then look at the
ancient payara and it will see what's
going on questions everyone still with
me cool
so um we could here provide you Jason
whatever but I want you to show you a
little bit more about micro services the
interaction with docker could be
interesting so I'm first of all docker
so what we do frequently there's one of
my open source project called Docklands
why I extracted us actually from from
commercial projects but I do it over and
over again so okay then I put everything
in github and this is at least a rough
idea
so first the images are grouped
according to they change frequency
so first the the super image is just
Java and sent to us so I get the most we
asked question is why are using
centralized or not alpine Linux okay
okay we have what 200 max all that but
no one really cares in my project so
this is one per machine 200 mix then we
can say probably 10 cents whatever if
you are running running on raspberry
PI's or whatever then it's a problem but
so and what I gained from Center is the
same commands my clients already have so
I can use the same script there is no
different try to install Java on the
Alpine Linux it's not the um it's not
apt is something else
okay so which is the first image and the
next let's look at for instance Tommy so
this is this install Tommy but this
image already depends or inherits from
this from this X image so Java is
already there and this is just Tommy so
I'm in my project how it works like the
operations are caring about the
operating system patching or whatever
and this images are pushed to docker
registry which I'll show you in a second
and we developers we check out this or
the normal we developers everything is
DevOps in theory but let's say there's a
little bit of more separation so we as a
DevOps the more tests and ops and there
are more often depth so we have the DD
ops and what we do we pull the DD image
from the registry which is read-only to
us and we just run the system and we
actually inherit from this and provide
configuration like JDBC datasource is
GMs queues or whatever okay let's say a
cool solid to this so I would like to
make to docker eyes the stuff here and
run it as a micro service in my private
cloud here so a docker file and I have
to decide which application server to
choose and what I would like to do this
a hex and let's say Tommy and then I
would like to copy because I'm in a war
target CERN dots war into deployment
dirt and this deployment there is this
what I prefer before you could use the
CLI but this works well enough so this
is the deployment Dirk and therefore it
works the funny stuff
I am implemented this for all common
application servers but the only thing
we changes if you would like to squid
swap the application server instead of
using this I could put here wipe swipe
IR or whatever and I can run the same
application on different application
servers at the same time what do you
actually do to measure performance
differences or whatever so I think it's
a better idea to be depending on one
application server what happens if it
disappears
agree everyone agrees here so uh usually
is not the case so you are crazy and I
don't know application service under
micro or whatever so no one cares what's
my core not maven clean installs now we
built the drinking pipeline maven clean
installed so unit tests are executed and
war is built and afterwards I say rocket
built - pleased attack and how to call
it CERN hello current pull down so uh
because we have sinned Wars is done so
the cool story is if I do it again this
is a video a little bit faster
what is never slower than this so our
expectation is the unit test execute
without anything in about ten seconds
and the doctor built is around 100
milliseconds why because the the war is
tiny okay now we can run this in in the
dhoka dhoka run - pee - pee I would have
to choose different porch this is the
internal part let's call it a hello and
the name was I think CERN hello I hope
said one door Kellogg hello is Detroit
in 103 seconds as a promise Tommy's
hasta PI RS the slowest but no one cares
about you two seconds but if you are
really obsessed about speed take Tommy
and web celebrity profile is even faster
is the WebSphere Liberty profile not the
full one this is where you need a lot of
coffee and breaks so they have to take
the full one but if you are still
interested in development take the
smaller one so um let's see whether it
works localhost H - H - this is the
Tommy and this was CERN hope resources
hello No hello cool so this was
deployment on Tommy the way app ironic
and told me I could send the wiser and
whatever but I don't think we have
enough time to run it on all application
service
so now the question is why is the first
and what I see frequently is docker
images to say wait but your image where
is my image the latest is let's say 450
max there is not that it's just crazy
hello world with a half a geek so I said
if I started 10 times and now my machine
will die like this is actually the size
is actually wrong so we what we can do
you could look inside there and I go
here too and say doctor history doc his
story and you can see is what happened I
actually only built three kilobytes sin
war and everything else didn't change
for two months so what it actually means
is on my applications of my application
server on my box here I have application
server overhead of around 150 M X and
this is so small that I don't even
bother to remove the zip from the docker
file no one cares but if we develop so
we have a drinking spy plan and we build
50 times a day
what we actually build is the thin wall
not the whole stack only then it can be
so fast
the larger the war get smaller the build
and the only thing I'm interested in
this speed in development ok questions
everyone believes me usually I got a lot
of Hitler this is a crazy half a geek
and whatever if you do the computation
you have overhead per application server
around 200 extra machine so now what
about colors how the push to clouds
would look like so on to the do a try it
first so I will let's see what is
running on my machine ok nothing this is
good so um what I can do is the
following I can now say docker run
- see - p1 5,000 5,000 what I'm starting
right now is a docker registry which is
what you used actually always in
production and if you look at the clouds
jelastic Amazon DC as all providers keep
you on registry so this
real-world name registry and the name of
the building registry is registry - this
is free so I think it's written go or
patients or small process which is
running so and now I have like it is
like a maze next to something like this
for doctor images so I can say doc
attack it was a think turn hello exactly
and I have to tag it to the registry
name prefix and then turn and hello
so it's tacked and now I going to push
it to the cloud doctor push this and you
see it's crazy the first time you will
have to upload everything but this
usually happens in the companies once
because this is what the deaf with big o
are doing the operation they are
building every three months are they
pushing to the internal registry so now
I changed something at least something
right so arm so and then I will just
repeat the build notice I have no I
don't using even NetBeans is just
command line experience and may even
clean install exactly so we are not
exactly I'm lazy so I will just do this
here
so and then we can push done why because
the Reg is to recognize nothing change
only math in war and this is crazy fast
and this is one of the reason why all my
micro service projects are actually Java
it's the only reason no I I don't know
just productivity and and and
maintainability and I perform more and
more introduced in my block and the cool
story is some of the startups a lot
don't like to talk about this because of
competitive advantage so hey why it
works
I don't care and whatever crazy right
you say that they built go or whatever
but if you look at this it's actually
pretty compelling so now what do you get
out of the box you get rest Jason you
get WebSocket so you get Java 8 with
computable future you don't get you know
big data frameworks whatever so again it
is more than enough for all my project
something completely different for CERN
or Facebook Twitter or whatever ok this
is the scope questions no questions we
only have to run it right so run and I
will run it on different port so I would
have to Tommy's and I will run it with
the tank
different name and I will have to call
it hello too
so start it again 8 for the 8 for 8 for
8 for a proton so now ever to to to
Tommy's running and the question is to
know if we had more time what we haven't
have not
what about nginx clustering whatever it
is actually trivial so we use not nginx
we'll use usually H a proxy not in
genetics you see somewhere engine should
be H a proxy engine yeah I don't um the
idea is in the show with the engine inks
conte the idea is what do you what you
are doing you are starting all your
services in a token network or the
darkest warm mode and the names of the
container become the IP addresses so
without any additional API gateway
service registries whatever you are good
to go for a smaller project smaller
project in my we have 10 20 30 micro
services it's not about maintaining the
whole data center ok for a larger
project with the use we use
openshift why openshift it's just it's
an open source or pay it is like nice of
rep kubernetes which which maintains
docker containers behind the scenes and
this is what sometimes the ops would
like to have a nice UI to to running
systems the running thoughts still no
questions very good
yes you have to do this how to do this
um will you see a Jenkins file in the
wooden the war it is check out and by
convention of a configuration the I
don't know I don't have internet
continuous integration what happens then
the what I can do is I can at least show
you Jenkins
hopefully there is something there are
1919 and localhost 9090 admin admin of
course and and this is the pipeline this
is La one for my client they wanted to
have a fully automatic built and this is
a thin war and if you if you look what's
inside this is just moving clean install
it performs all the unit tests now sorry
this checkout git clone whatever get lab
clone this is a clean install and
performs or unit tests with mojito
everything is mock out performs in four
seconds because everything is mock out
unit test integration that's are slower
this is a this is just a fake usually it
takes as long as it takes to test you
know the persistence application service
setup is actually dokie build so what I
did from the command line there are
already three steps from the pipeline
here and application starts doctored one
system says is a small maven project we
uses jacks or s2 and goes outside as a
black box test and debug from outside
torture test is either a jmeter stress
versus torture test is more fancy term
for thrusters and is okay client you
have to do torture this and because
stresses are confused with not stress
out Lotus lotus our business and this is
we try to break the servers and in
testing monitoring
and then the Buddha's promoted which
usually means registry push and and take
in in in get and death thing is trivial
so the Jenkins file it stages is like
stage stage stage and this is the
contents are moving clean installed okay
bills docker on Facebook integration
test and this is one liner I agree
sorry what this is the checkout but this
is not the stuff it works like this in
the Jenkins you have to register like a
hash or ID and then you get and then
github has been cook and if you push the
book it will call Jenkins and this this
is what you see here so this step cannot
be here it has to be to get lab get a
separation whatever in one project we
still have to use subversion these are
cool words but in all other project we
use git okay cool any other questions
yep example you were changing one line
of code of your program for building the
docker image and it is only a few case
of difference but if your program is set
of a few case was 200 mesh and you
change the very same line the lathe
linearized it is 200 mesh not there yeah
at one it case not next no no I never
had that in my project we have some
legacy but if you start up
he's never more than 200 mix 200 max
worries like everything in the world but
the fat war or whatever your possible of
course so in Germany we have a Java
magazine is it is it popular here and
you can see most projects behold history
of Java magazine you know each month
developers that download everything and
put it to the war and in the first
project I saw there was 2 gigabyte of
war so they helped us it takes 1 a half
hour to deploy and I look at this ok
what you are doing here is not like a
museum history museum is like you know
if you just focus on the business logic
and not on Java magazine so in Java it
is impossible to develop apps with 200
mix so something is going wrong in your
project if you
son it could be you have like I don't
know well Cassius you know caches of
objects but this would be probably 30
caches but this could be interesting for
micro services like separate the part
which is huge but static and then
everything is small and sin okay so i'm
i performed interviews right at the last
interview was software in running the
government in slovenia and they have
500k wars but try to develop try to
implement 500 kilobyte of bytecode it is
impossible you mean is a really huge
amount of code okay so what what's
what's blows the wars are dependencies
not not the business logic i not a
better pair more distance guys on my
users come with yeah then you have to
look what they deploy you know probably
bitcoins or whatever that's inside the
war okay just to follow up question for
the producer on how do you do deal with
dependencies in your project and also in
context of microservices and the
techniques of deployment using docker
that you're showing here what do mean so
dependencies it can be anything that you
go into your project for example 93 sdk
or anything okay so there are two
choices or arm you have to differentiate
whether the poisons in my current
projects we have to deal with robots and
there's like standarized Farva which
doesn't make any sense to include in
each war in this in this kind of project
what we would do
there's the we have let's say pi are
configured so this is like the project
specific image which inherits from the
ops image and it's configured so i need
so what I would do then I will put
whatever comprises your platform like
ours are specific
encryption or whatever and create an
application server image with that so
you don't have to put it to the world
but this is this is exception from the
rule sometimes this business like in one
project we have the direct calculation
of Texas or whatever so it was common to
everyone what should not share its like
common DT or whatever this is what you
should never do
because then the whole point of
microservices like having you know
multiple maker services is gone okay so
about agree okay so all about the speed
of development and yet have any sense
application server like what logic or
what here the full name in a docker
container what's in a docker depends
which word fears or the web celebrity
profiles make sense the larger one we
have to talk about this right there may
mean this is like I was not project Li
kind of me it took really one hour until
something happened so I don't know what
they are doing there but probably they
already computing some of your stuff
during deployment you know whether the
collision happened or not I don't know
in one project they had the big
WebSphere and they was patch for a GP
container so okay they do it like not
that easy is that why it takes one it
was one gigabyte just a patch for the GP
container the hole in GP containing
GlassFish it's 700 kilobytes so what
they are doing I don't know so the big
WebSphere is complete different story is
not probably even Java is like you know
an alien or whatever the web so Liberty
profile is the most discussed as one and
you can run the smaller one on the same
license of the big one
so the yeah and but more general
question let's forget WebSphere logging
what you asked me what they make sense
to put locks Oracle WebLogic okay this
is a less crazy but what is with them I
mean with the I suspect the WebLogic is
not that bad
so the overt is a little bit more but is
not like crazy so I also in the
screencast it was like 60 megabytes 60
max of overhead and and the problem will
be not WebLogic but usually either crazy
architect or crazy developers with
exception obsession of mapping you know
mapping mapping mapping mapping their
members and non-members and they
decouple from themselves and then forget
about the business logic this is the
problem in most project you know and
then the solution needs to take
JavaScript why because in JavaScript No
no one gets the idea to vibe 50 layers
you know to display a button on the page
okay so could be so um the question be
open to everything right so what we
should do is to know to create to be
mess with with me and you you do plain
Java and I start up with white flag
whatever and see what is easier for
developers there's not decision from you
know from us one from developers what
can tell you developers really like it
if its pragmatic this way and many
thought that it has to be that everyone
has to browse data access objects and
details which has nothing to do with
enterprise Java it's just I don't know
what to to too much radiation that
doesn't happen because if it doesn't
work it won't start
really so in my project we have the
least amount of the one is when the Java
is perfect it's ten perfect if you have
ninety percent of business logic and
small amounts of Java so what you will
need is at inject one stateless and you
don't need any scopes nothing no produce
is nothing this is what we do in 80% of
all times so you don't need any specific
knowledge nothing and with that you can
you you can go 80 percent and sometimes
need the last twenty percent right now
some docket connections which is unusual
but okay so if you are reasonable it's
not a big deal and if you don't like it
you can choose Google juice spring or
whatever it was to work there's even the
same rotation at inject invented by row
Thompson just huh
yeah yeah this is I like inject because
what we get for free now if I go here
and I would say yeah love injection this
could be dangerous right such a
statement but
so in second row so um what you can have
to do with Java II you go here and say
laugh injection and I and say and I
message forgot to return something so
and I'm set but let's say I would like
to measure performance or monitoring is
a good one for instance
give me the slowest methods or logging
so logging is also happened to the
second day I asked about what about
logging a man says in the year 2017 is
somehow strange that if write ASCII
files all the day and hope that one day
we'll find our ex to fight the
information so what you do instead we
try to send CDI even from Java EE with
the information is just interesting to
us and expose it immediately by our
ethic so have real-time information but
this is what you can do you can create a
monitoring it's like an AOP AOP loga and
this AO pillow graham has a method
object intercept in how it's called
invocation context context I see
throws exception so and now I can say
return I see dot proceed and this would
be around invoke so this is like an
aspect it was always there and I can
come here and say hey here is German and
English is English but as interceptors
so I can intercept whatever I like and I
get the application server monitoring so
this is only possible with with
injection and longer story is what
happens behind the scenes this thing
gets pulled and all the injection
happens only once which is really fast I
so experiment like
placing stateless with request scoped
and all the injection happens on this
request which was 20 to 30 percent
slower which still didn't matter because
if you hit the database once it doesn't
matter in the ending but but you
shouldn't optimize because you can
agreed but there are cases where Java 8
is enough then go without anything this
is viable approach but just Java 8 and
no external dependencies did it also go
to my github and hit rate or project I
was actually hired to implement batch
yeah or later there would be no later I
have to fly out or you come with me in
the in the airplane why I have so many
so how to communicate between
microservices tech docker network create
cern dr network inspect sure and you see
cern is empty so let's put this to the
network so I have already running
instance called hello dr. Network
connect CERN hello and the first content
is there and the cool story is now again
hot code without any voodoo
configuration or whatever or harsh
record console or whatever I have just
one name hello and it's available
everywhere so let's try this docker run
docker run yeah hex
charm pink hello so first it one run you
see it's time out
yeah it's time out and then I will do
the same
there was some formatting necessary but
should work docker run - Manos net CERN
and it's available so the second
question is do I need registry is an API
gate with whatever say okay we could do
this but forgot about Java magazine
again focus on business and the cool
story is if you have nice names on
convention of a configuration and they
use the same convention in Jenkins
pipeline and docker naming and you have
a really suitable convention there's
nothing to do so another to say what
about load balancing and the cool story
is what we do then this hello becomes
the name of the nginx or AJ proxy and we
have services called hello one hello -
hello three holo 4 depends on the needs
and still nothing to configure okay so
if you say this is bridge mode to my
machine you can do exactly the same in
swarm mode which is distributed across
my across machines or this is what what
openshift also does again what I show
you right now is blank Java EE with
playing Center West Java it's no tricks
and the G recent docker I think any
other questions how much time do they
have two minutes I guess right questions
or should I hide something no questions
then it's very good because I can take
something so void suspended
so what this is
this means this jax-rs resource is going
to be executed asynchronously what only
means it their threat is no more
involved the HTTP sweat it is passed
over to someone else or assume this is
exactly the same code the same then I
can say response dot settimeout which is
crucial for robustness bulkheads are
built-in because we say resource managed
execute or service
mes and you can define as many as you
like and then this minute execute of
service
it's actually an executor service so
it's completely compatible with
completable future so what I can do
right now I can say ok this is what I
don't like
so a last injection if we get trouble
your foldright
it uh it hurts
so our and we say here now look this
this is an old egb with a method message
and what I can do it now I can say
completable future supply a thing Li
message and it is ready to go then
except response resumed and now I build
a pipeline reactive pipeline with still
no external framework first
this is invoked in monitored and if it's
ready to go if the result is passed here
the problem I have right now is ok it
runs on fork/join and what it means I
have no control about the number of
threats so now to let's change that so
ok now I have full control of the amount
of threat and that set are managed by
the application server and I can set up
as many
managed executive services as you like
this is fully configurable inside
outside the application server and this
is built in bulkheads also not that
known in in my project company also
misuse hystrix
in java application servers to do the
same which is already built in four
years
therefore forgotten okay so I don't so
we have we are one minutes over the time
so last question so we implemented all
the a by the way circuit breaker so
another pattern of micro services with
we implemented this by accident
the AOP logger what it actually does it
has full control over exceptions and
over the performance to implement a
frequent breaker what you will have to
do is to say ok if it three times fails
I return null and then you have your
sequence breaker I get from project yeah
but we use histories because of the
algorithm so I asked multiple times
which algorithms can you use in
production let's say we have a payment
system can you say I try to pay tomorrow
if it doesn't work a try in a one hour
and tomorrow on two weeks and wouldn't
work right so everyone would like to
have the algorithms but if I ask which
algorithms that I should not use so what
we do after attempt by a hide important
service it is escalated like how it's
called management and emergency
management system and the administrators
woke up because in an enterprise
enterprise system is really really hard
to self-heal an external system
something is usually wrong ok and the
stupid break-in term is my github is
called breaker this is one it's two
classes one class implements exactly
this with the counter and the other one
is the strategy ok any questions
challenging questions say this is all
stupid it doesn't work - yeah very good
in my work usually none except if you
use GS F prime faces this is a must if
you would just ask if you have just
business or just really none so now in
the robots project we we killed Jakarta
Commons link because they just used
string is empty and none for instance a
common configuration is misused because
we use with docker system and Dhaka is
the best way to configure so I really I
try to find something in Java 8 so his
approach just try to stick with job ID
if if I nothing then Java and then look
for the dependencies why do I'm against
dependencies haven't many of courses on
what sometimes happens developer using
dependencies and forget about them and
then over time there are problem in the
dependencies but at first code somehow
disappeared from the internet so the
price of the dependency in my Isis
either on each iteration cycle download
all the dependency and see what the
application is working with the recent
one or download the source code make it
buildable in-house in a Jenkins fully
automated way this is your insurance for
the future so several times we have
decompiled the already existing jar
because the the suburbs service provider
was gone and fix the back and recompile
which is of course it's crazy right
sorry oh there's another one it's called
decorator you would love decorators okay
no no if use dynamic proxy which is the
answer from Java 8 it looks worse yeah
but this is device but its diet this is
a generic decorator and the decorator we
type safe
no decorator we are decorators yeah job
is almost forgotten was because it's old
so how it will look like
we have black church again so this is
just for and it would look like
decorator and then inject delegated
delegate and you could inject the
interface into the typesafe so the
Interceptor is used like for monitoring
and if you are interesting in certain
methods use decorators I give an example
Hegel house is like distributed cash in
one project we wanted to monitor the
performance you can implement decorator
for the map because it don't let the
source code of the map and then we only
I think monitored gets and put okay so
now you love strawberry right no very
good we you are the best one okay okay
thank you very much I'm afraid we have
to get the next big of assignment of the
lab so thank you very much Adam thank
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>