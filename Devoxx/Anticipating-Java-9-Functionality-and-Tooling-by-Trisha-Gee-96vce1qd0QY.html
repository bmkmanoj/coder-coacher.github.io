<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Anticipating Java 9 - Functionality and Tooling by Trisha Gee | Coder Coacher - Coaching Coders</title><meta content="Anticipating Java 9 - Functionality and Tooling by Trisha Gee - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Devoxx/">Devoxx</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Anticipating Java 9 - Functionality and Tooling by Trisha Gee</b></h2><h5 class="post__date">2016-11-11</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/96vce1qd0QY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello good ever good afternoon everyone
that's a good start get the first word
wrong and hey I didn't expect this to be
quite so busy so now a bit thrown right
I'm Trisha gee I'm a developer advocate
for JetBrains I work mostly with
IntelliJ IDEA and up source which is our
code review tool who's an IntelliJ IDEA
user everyone who isn't an intelligent
there was some people who are both
that's fine and this is unusually for a
lot of the talks i do i am going to
specifically highlight some IntelliJ
IDEA features for java 9 that's because
i have actually been asked to this is
not like me doing a marketing pitch as
many people you know i usually just like
to use IntelliJ to do stuff and so so
this is a tiny bit more IntelliJ
specific than normal so I won't feel
offended if eclipse users want to leave
that's fine and this is also a bit more
informal than who came to my earlier
talked a bunch of you this is a bit more
a bit less prepared than that talk
because both Java 9 and the tooling
support in idea moves along a lot faster
so this is more kind of like just
throwing some ideas out there and and
seeing how it works together rather than
it being a fully prepped demo of how
things fit together that's my caveat and
also last time I ran this at javaone it
took about 35 minutes so you might be
you might be able to get out early or
you might have loads of time to ask
questions about java 9 or about support
in IntelliJ IDEA ok enough preamble and
if you've seen any Oracle talks about
new features in Java they always say oh
don't hold us to it it might not happen
so this is our safe harbor talk of slide
saying and anything I promise about
what's going to happen in IntelliJ IDEA
may or may not happen it depends a bit
on how hard is and so on and so forth so
if I say it's going to be supported in
IntelliJ IDEA in the future and don't
turn round and say Trish promised it
therefore you have to do it
honest okay so what I want to do is I
want to go through this talk is going to
go through some features of Java 9 which
I expect a bunch of you were hoping for
um and then a bit more about how
IntelliJ IDEA is going to work with java
9 so let's start with the Java 9 stuff
of course java nine is all about jigsaw
right we all know that that's why it's
going to be late again sorry mark for
bringing it up um and jigsaw is
brilliant because it's going to bring
modularization to our code and but the
problem with things like jigsaw is that
along the way as the code base has
separated like certain things become
deprecated or not accessible and people
are worried that not only will their
code break but also the libraries that
they use might break and things like the
Ides might break if they start using
Java 9 and I don't really care about
chickasaw anyway so I might just not
bother and just wait until value types
turn up I'm not that I've heard that
argument ever but Java ngayon it turns
out when you do a bit research is loads
more than just jigsaw and this I think
the thing is that because there isn't
like with Java 8 obviously those lambdas
and streams and other stuff which we
never looked at the other stuff because
we were so excited about lambdas and
streams with java 9 we get carried away
by thinking about jigsaw but all of the
other stuff is actually quite nice
little features that i think are going
to impact our lives as developments just
to make our lives a little bit easier
but there's so much of it and it's so
much kind of scattered around there's
not one theme to kind of umbrella and
over the whole thing so we don't get to
talk so easily about the cool stuff
that's going to be in Java 9 that's
going to make our lives easier so let's
go straight ahead and try and debunk the
first thing of Java 9 might break
everything we're going to start by
trying to compile a project in java 9 so
the project that i'm working with is
actually a real project that I use when
I'm when I'm demoing Java 8 features so
this obviously can pass on Java 8 it's
fine let's switch to using the Java 9ea
i'm going to compile with the java 9ea
but stick with a Java 8 language level
which you probably can't read because on
the surface I can't change those font
sizes
and when I build I'm going to see if
everything breaks or not I actually want
everything to break so if it breaks
that's fine what I would like it to do
is to finish building that V Olson chat
amongst your friends it's fine okay so
there's a few things which are going to
break straightaway things like there are
some classes like ones in some misc that
you shouldn't have been using in the
first place below like no one really
told us and you shouldn't be using the
first place and there are new ways of
doing this stuff so I'm going to be
removing this and this particular case
which is basics t4 encoder instead what
I want to be doing is base64 java dot
util dot base64 dot get encoder dot
encode to string now my code is going to
compile okay in that particular example
so there are some things that you're
probably going to have to change as code
has shifted and moved around and you'll
find that there are replacements for a
lot of these things so it's not like oh
I'm not going to move to Java nine
because everything is going to break
another thing that you'll find is an
underscore use of underscores and
identifiers me it might not be supported
in releases after Java 8 it turns out
though the most people didn't really
know underscore is a valid identifier on
its own like obviously you can say
underscore something but it turns out
some people were using it as a as an
identifier and now that people know that
which has been taken away in Java nine
so people are starting to say oh that's
quite cool though I might actually want
to use under underscores an identifier
don't do that it's a silly idea let's
call it something more sensible okay so
there are going to be some little
changes like that so if you compile it
against you have a night you will see
potentially even in a small codebase
like this some things will crop up that
you need to make some changes but then
when we do that and we do a build
recompile our project we should see
everything starts to compile note by the
way that IntelliJ is working perfectly
happy with with Java 9 nothing breaks
it's totally fine you can use Java 9 is
the IDE as there
as the jvm okay cool so we just have
some duplication warnings but overall
everything still compiles that's great
and what I was going to do is take a
more serious chunky open source project
and compile it to Java nine but I
thought a and that's going to be really
boring for you to watch and be that's
definitely going to go wrong so I'm not
going to do that okay so we can compile
with Java 9 many of your projects will
probably have yeah we'll probably have
some small things to work out and but
there are migration paths for those
things and they are well documented so
for this build i'm using build 143 which
came out really really recently so i
definitely implore you to go download
the EA it's very stable it's very good
it works and use it against your code
base for two reasons one to see if your
code base actually works with Java nine
and see where those things need to be
migrated in your code but too if you
find any unexpected behavior you do want
to report it back now before the Java 9
release so it'd be really cool to kind
of go ahead and have a look at how it
works and see if there's any unexpected
behavior there's loads of stuff like a
feedback forum where you can ask for ask
for advice on is this expected behavior
there's places to report bugs there's an
a whole page about the migration like
what you might expect to see failing
what sorts of things you need to do to
migrate your code and so forth all of
these links will be available on a slide
at the end of the presentation okay so
that's fine we can compile against java
9 that's a good start there are some new
features in Java 9 some of which are
actually really quite nice so we have
some new methods on the streams API
let's take a look at this so it turns
out has anyone been bitten with infinite
streams but your hands up if you have
like one person ok I have I guess if
you're running things like stub services
and things like that what I quite often
do is I start up an infinite stream
which is going to
mit a bunch of data so that I can test
against that data the problem with
infinite streams is that they really are
infinite and you can't stop them there's
like no way to stop them apart from like
control C and it's i found that bit
frustrating when i first started working
with java 8 but Java 9 addresses some of
these concerns so let me show you a test
let me show you a test to prove that my
infinite my service actually doesn't
stop it just you can see is spinning
just there's no way to stop the service
because the infinite stream just keeps
going and going and going with Java nine
let's start working with them the
language level java nine i have some new
methods i can use on streams so i can do
things like take while so i can take it
until some point and so i'm gonna i
guess cheat i'm going to take while and
not finished oh no i'm going to change
the name up I don't like nuts so I'm
going to take it while it's running and
create a field called running which is
true and then the end when I want to
stop it from outside i'm going to set
running to false and now when I we won
my test
you should see why is it taking so long
there we go it stops throw it away so
that's quite nice there are some nice
new features on the streams API to allow
you to stop streams it's a surprising
that was missed but apparently that was
one of the calls it was made so you've
got things like take while which
basically keeps the stream running until
until a particular point so in this case
I want to keep reading this file until I
keep keep bleeding the file while
running is true but I can also do the
opposite I can say and drop while and so
I can ignore everything up until I reach
a particular point so there are some
nice things on streams to allow you to
more easily manage infinite streams ok
what's next collections convenience
methods I think this might be my
favorite area of code and it's such a
sort of small and quick win so if i look
at this class so all of the codes
examples i'm showing you are real code
examples in code that i was using before
and so when I show things working better
it's not because I came up with a fake
example of something that was kind of
bad before java 9 that you never do it's
something that was kind of frustrating
before in Java so this is how we
initialize a hashmap I wanted a hashmap
set up with a string to a particular
enum and what I have to do is I have to
have a static block in order to
initialize that and if you've worked
with any other JVM language basically
there's nice ways to initialize hash
maps and there isn't in the JVM until
now in Java anyway so map of entries and
then i can say i want a map entry of
that i'm going to go around just change
or me syntax
this is a lot more interesting when the
lot less scary when there aren't like
400 people looking at you doing this all
right that's nice now i'm going to use
one my favorite features of IntelliJ
IDEA which is column select mode
and now I get to let's turn that off
static import this and get rid of my
dangling thingy so now I have a much
more concise way of creating my hash
maps I have a map I can do map of
entries where I can put in an infinite
number of entry objects or I can
actually say map of and this gives me I
can say key value key value key value Q
value up until 10 and 10 parameters I've
got more than 10 so i'm going to use map
of entries it's not quite as pretty as
like I'm a big fan of the way that
groovy initializes ash maps but it's
it's really it's a big improvement over
what we have before so I think this is
one of those are under under advertised
things that's going to come in Java 9 in
a similar area of collections we have
let's see I knew this wasn't gonna work
fighting with my for matter where you
format it so everyone can see it okay so
I have a set which is initialized with a
bunch of values and what I have to do it
to do that is I hack around it horribly
using a raised as a list and put that
into a hash set in order to get a set of
these values now this is just going to
be so much easier in Java 9 where I can
just say set dot of these values and I'm
just going to get a set of those values
so there's a bunch of these things
around collection helpers and it's not
going to change anyone's lives the same
way that lambdas and streams did perhaps
but it is going to make our lives as
developers just that tiny bit nicer and
a bit less like oh how do I create a
hash map from these things or how do i
create a set from these things so just
going to remove tiny frustrations I
think okay private methods on interfaces
now when I first heard that I thought
that's kind of weird because the whole
point of an interface is to define an
interface that other people are going to
use why would I need a private method on
an interface and the answer is of course
that interfaces are no longer the
interfaces we use to know so interfaces
let me show you an example interfaces
can now have static methods or default
methods so interfaces can now have
behavior in them and now that that's the
case and again this is like a real
example that I actually had in my code
and go back now that's the case I might
want to have private methods on my
interfaces so if I extract this i'm
going to call its get field value and
now i can reuse the same block of code
and I can make it private so that's why
I want private methods on interfaces so
i can share code between my static
methods or my default methods again just
another nice little thing which is going
to make things a little bit easier
updated deprecation i think for a lot of
people updating deprecation is not
necessarily super exciting if you've
ever worked actually creating an API for
anyone or a library for anyone
and when I was working on a MongoDB Java
driver for example you start to
understand how difficult it is to deal
with deprecation and you want to be able
to say not just deprecated but you want
to be able to say when it was defecated
and how long it's going to be deprecated
for potentially so if I look at an
example instead of just saying this is
deprecated and potentially logging it
somewhere in the javadoc or failing to
log it in the javadoc I can now put
information about this deprecation
inside the annotation so I can say it's
as deprecated since this is a string
value so it doesn't just have to be sort
of a double value of 1.8 or whatever I
can say this is deprecated since forever
because it was a terrible idea and then
I can say and for removal so there's
kind of two ways of doing deprecation
certainly there's kind of an unspoken
standard that things particularly in the
Java libraries are deprecated as in
don't use it but it's still there and
it's going to be there forever and but
when you're actually using other
libraries often when they say deprecated
is like this is deprecated and it will
go away next release so get rid of it so
you can say for removal true and there's
another nice area around application
which you may have noticed if you're
ever trying to clear all the warnings
out of your system which as an OCD
person I tend to try and get rid of all
the warnings you'll notice that
generally when you import a deprecated
class it gets flagged as you're using a
deprecated class and even if you
suppress the warnings it still warns you
that you're using a deprecated class in
Java 9 you don't get that anymore so you
can now clear all your deprecation
warnings quite happily which is which is
quite a nice it's a tiny thing but it
just helps you get that much closer to
having a clean code base with with no
warnings and at least a list of to do's
of the warnings you need to clear up
okay so I've spent enough time just
talking about the exciting and I'm not
so exciting little features in Java 9
which are going to be useful for us as
developers it's probably time to start
looking at jigsaw obviously for the
stuff i just talked about in terms of
compiling traveling in terms of using
features in java 9 intellij idea is just
going to work the same way
did the way that you kind of expect it
to when the new features are available
you can use them as you expect jigsaw is
a little bit of a different beast
because jigsaw has a bunch of files
which are not really what we're
expecting to see so for this demo well
let me show you in IntelliJ IDEA 2016
point to which is the current release
and when you have a jigsaw fire when you
have a jigsaw project which I'm not sure
is anyone working with chicks all right
now thank goodness and there are people
working with jigsaw right now but if you
open even the simple demo which is
available on the jigsaw website which
I've got a link to and IntelliJ IDEA
will say I don't really understand why
this file is called module hyphen info
Java that seems kind of weird and it
will say class or interface expected
because it's expecting it to be a Java
class and and that's not really an an
irrational thing to expect but IntelliJ
IDEA 2016 point 3 which will be out very
very soon i'm not sure if i can promise
the dates but it will be really soon and
home when you open the same project then
you don't get the errors which might
seem like a tiny thing but it's not
really a tiny thing because you don't
want your projects to error so not only
does the module info file compile
correctly but you also get auto
completion the way that you'd expect
from from your IDE so I can it knows
that you want to type module it knows
that you're going to import modules so
it's a small thing but now IntelliJ IDEA
does support module info and it supports
basic and jigsaw functionality if you
like note that the module that you
define in jigsaw has to correspond to
the idea module otherwise it's just not
going to work properly and again it is
working properly because it correctly
imports the class from the other module
so we have very rudimentary support
available right now in IntelliJ IDEA 20
16.3 I can see that you all care about
that because you're all using jigsaw
right now right but it's there so you
can start using it so in the current
version of IntelliJ and we have syntax
support for module info the code
completion which I showed you
and compilation of multi-module projects
which I guess you kind of expect if you
have a multi-module project you do want
it to compile and there's an open ticket
for the support for the jigsaw support
in IntelliJ so if you do start playing
with it and you find any issues or you
find any ways that you would expect it
to work it would be really useful for
you to kind of put it on that ticket
because it's all well and good as kind
of developing features but we really do
need users to tell us how they're really
using it and what's useful for them I'm
coming in some version of intelligent
next year hopefully automatic generation
of module info java files from the from
the idea module structure so this will
be useful if you do start migrating to
Java nine when Java 8 John when Java
nine eventually comes out at some point
next year probably and you'll be able to
start generating jigsaw type projects
from your existing code and and when you
import a jigsaw project IntelliJ IDEA
will understand that and create the
right modules for you also will have
support for J linked artifacts as well
I'm again if you if you have any
features that you want to see or
anything that you want anyways you
expect things to work then do log an
issue we do actually drive the
development of the IDE from the things
that I users tell us okay j show which
is the repple which i think is one of
the other big-ticket items for java 9
has anyone seen any of the talks about
the ripple oh good that mean said I have
to demo it good um okay so this is kind
of one of the really interesting areas
actually for me I think that what's
interesting about the repple is that as
a long term java developer I'm I have
not worked with a rapper before I don't
really know the best way to work with a
ripple the way that I kind of try things
out is usually through writing unit
tests or writing small pieces of
functionality and so I think the repple
is really interesting because I think
it's going to change the way some of us
work at the moment in the current
version of IntelliJ we don't have some
sort of native integrated support for
the repple I've just opened it inside
the
and also I'm basically running it from
the command line inside IntelliJ there's
a couple of reasons that I would do this
and one so that everything is inside the
same IDE I could open it inside the
command if I want to to this is a
windows machine and the command line is
kind of rubbish on windows so I can
actually have copy and paste from inside
the IntelliJ terminal and three i can
easily like copy stuff from over here
and paste it into the terminal inside
here so this kind of some benefits to
using the IntelliJ terminal rather than
your operating system command line so
I'm just for those who might not have
seen any demos the repple allows you to
do things like like there we go so it
wasn't working for a second i can type
in a string with a zero semicolons on
the end it will assign it to to a
variable i can do things like i can
create variables if i want to so i can
say int a equal to 21 and i can do
things like I can do calculations I can
just basically do kind of experimental
stuff i can create strings sorry i can
create methods so i can have like a
string name return Trisha so it can kind
of build up some stuff here and i can
also there are commands so i can the
thing is about the repple is it's not
just simply pausing java it's kind of a
fully-featured thing in its own right so
I can do commands like I can have a look
at all the variables that I've defined
so far I can do things like I can look
at my history I think history is quite
useful if you wanted to sort of copy and
paste some that stuff into say a script
or into something that you're going to
turn into like a more fully featured
Java thing and so I think the thing to
remember about a gel from an IDE point
of view is when people sort of say well
could you not just like delegate stuff
to Jay shell or just run this java stuff
in Jay shell and it's not quite
straightforward as that it's like this
fully featured ecosystem in its own
right
is really nice and and actually offers
loads of support of its own like tab
completion and things like that so the
IDE isn't needed to provide a lot of
these things because it's already there
part of the repple um there are two kind
of show a counter example if you like
some of the things that currently exists
inside the IDE for for doing like
scripting if you like or experimental
stuff is you can open scratch files
that's how I look scratch so I can have
a new scratch file and but the problem
with scratch files this works really
well for things like scripting languages
it doesn't really work so well for java
because i still need to do if i try and
do this out it won't recognize that
because i'm not inside a fully-formed
proper java class so i have to say and
if i do probably so the void main i get
myself a main method but i have to be
inside i have to be inside a class so
even scratch files for java because it's
like this proper full massive oo
language i still have to have a class of
some name I don't know scratch and in
order to start playing around with any
of the language stuff so that's kind of
one of the limitations of Java and
that's what the repple is supposed to
solve for us so here we can with the
repple we can just say what don't even
need to say system out okay you can just
say the stuff that you really care about
so hopefully in the future in some date
in the future the java scratch files
will start using the repple underneath
the covers so we don't have to have like
a fully formed object for that stuff we
can start scripting in Java if you like
the other thing I wanted to show you was
the groovy console and where this is
kind of built into the IDE so if I can
do things like then I can use the full
features of my IDE including auto
completion and highlighting and so forth
and run stuff in the bottom in the
actual console itself and I think this
is kind of the direction we probably
will go with a ripple will
support the repple in something like
this no promises not sure when but it
will probably be something a little bit
like this and what's next ok so the
examples I was using from the repple is
from the repple tutorial and this is
really cool actually because when I
first played with the repple because
it's kind of like a command line which
just stares at you you just put in like
silly things that occur to you with the
tutorial it actually guides you through
a bunch of stuff that you wouldn't have
discovered on your own so it's so it's a
really cool resource and again if you
have any ideas for our support for the
repple we actually do have a ticket for
what we're going to do we haven't
decided when or what what or who so any
ideas that you have are gratefully
received their right I told you this is
going to be short I've still got 32
minutes left yeah so there's the URL for
all the contents of this talk and if
there's anything that you want to see
demoed or any questions that you have
now would be a really good time to to
raise your hand and let me know yes
demos some of the shortcuts are using
IntelliJ that's like a whole talk in its
own thing um yes I can come back to that
in a minute anything job yes
sorry i was listening to what question
over here first he said I've lost you
now okay okay so there was a talk yes
sir which demoed if you use the Edit
command it will open an editor and it
sounds like a good place for integration
with IntelliJ IDEA yes okay that sounds
yes sounds very logical what was the
other question about collections um I
believe the defaults are like a realist
and hash set and I think that can be
defined I don't know I can't see who's
asking the question but I'm aiming it in
that general direction and I think it's
the defaults you'd usually expect to see
they are immutable yes and they are
mutable I'm okay everyone's already
bored thank you very much for listening
to my very short talk if you have any
more feedback or questions and please do
feel free to come and ask me or ping me
on Twitter I'm happy to show you some
IntelliJ sort cuts if you like
particularly if there's something an
area that you're particularly interested
in seeing and thank you very much</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>