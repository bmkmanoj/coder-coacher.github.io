<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>The reactive landscape by Clement Escoffier | Coder Coacher - Coaching Coders</title><meta content="The reactive landscape by Clement Escoffier - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Devoxx/">Devoxx</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>The reactive landscape by Clement Escoffier</b></h2><h5 class="post__date">2017-05-17</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/JMYomqM92MM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">furgus inflated into a nexus
what does reactive actually mean
my name is Clemens Kofi I'm working for
red at to the vertex co-developer and
even if I'm going to use vertex for all
the demos and all the thing I'm going to
present and explaining why vertex make
sense for the right key world the main
interest for you in this section is to
just understand what does reactive mean
so are we fashionista yes or no because
every single week when I check my
Twitter feed I found another reactive
things like if system like you manifest
or active extension like you programming
or active spring right streams and so on
we have many many many new array of
things that arrive every single week
does all those reactive means the same
thing or as a different and actually
just to makes everybody really confused
we associate reactive with scalability
non-working io
event loop as synchronous backpressure
adult actors spreadsheets
yes spreadsheets and so on so it's all
this world is very rate starting to be
confusing so when I drawn as a vertex
team a couple of years ago and say well
let's do some reactive stuffs that looks
cool but I was coming from a very very
different background I was doing dynamic
and modular system actually modular
system seem to be trendy since last week
but yes I was doing that before so I'm a
mark old-school guy I did something that
no one is doing anymore it's opening a
dictionary to the reactive world and I
read reactive mean showing a response to
a stimulus okay fine that looks good but
it it has a certain definition which is
actually very interesting is acting
response to a situation rather than
creating and controlling it okay but
what does it mean for my software so
when we apply this definition to
software well we can say that reactive
software it just
software that is going to show responses
to stimuli that looks cool looks simple
look vague enough I can probably work
with that but what are those team Li it
can be almost anything exactly what why
we have so many active things that who
don't have the same type of stimuli
everywhere it can be event it can be
message it can be request can be
failures it can be the have ability of
your services or devices or your poor
liver your battery leaver on a mobile
phone or if you aren't doing running and
so on your network connectivity all
these stuff are stimuli but you don't
control them you don't control anything
here your system you code is not going
to follow what you have said when you
developed it but what the also stimuli
are telling you to do so before you was
writing line 1 line 2 line 3 and
everything was fine we were controlling
the flow of your system with this you
are going to do this but what will be
next does not depend on you depends on
the all the stimuli that may arrive at
the same time and things that to be kind
of interesting there there is one type
of stimulus that I didn't mention yet
something that we don't do anymore
it's a keystroke you know like cool
button here a and I expect to have an
edge somewhere on my screen we do that
all day long
so there is something somewhere that
react to this event and do something and
print it on my screen and according to
the definition this is also reactive so
is it new no and actually reactive
current from the 70s even probably
before the seventies so that's actually
not really new so the relative landscape
is kind of fragmented with all those
reactive things and in this section we
are going to see three different class
of reactive which are mainly the three
main class effect is that we have two
on one side we have active systems
ranking systems are far from being new
it's come from active systems of 70s
than in a Volvo advanced system and more
recently as an autonomic system self
adaptive system and so on so reactive
system are an Akita lifestyle to build
better distributed system restaurants
distributed system on the other side I
have reactive programming this one is
about architecture this one is about
programming and rectly programming just
an API that will let you write code
around data flow and very close to
functional programming what interesting
is to see that if we take the java world
here we have two technologies akka which
is a pure actor model and vertex and on
the other side we have rector from pivot
or we are reactive extension which is
initiate as an initiative from Microsoft
and now it's so popular that we have
binding in our language and we have
vertex to vertex is on both side let's
add the third path subclass or reactive
things reactive streams ready streams
it's actually just an API is four
classes really four interface that just
lets you implement back pressure in your
program we are going to see that don't
worry and here in terms of
implementation of raki streams we have
extreme reactive extension VQ the v1
does not reactor vertex Q and so on
and Weinke stream is actually coming
inside java 9 under the name of flow
because yes that's always good to change
name when people stop being used with
one so that one's name cool so let's
have a look to all those reactive things
and see all they relate to each other
ten years ago ten years ago everything
was fine it was a good old time I was
doing very very bad HTML one UI which
forms with button while you just write
things in the database and was depleting
a Tibor rarely using table not be with
concise incredible and then
but he was happy that was my application
that was very simple to write this and
time flies first application start to be
a bit ball complicated and say yeah
let's get some of those features out of
it like the pricing system need to be
done by another team so let's do that so
that what we see in micro services can
be non-functional like all the
authentication and security can be
delegated to another system to don't do
security by yourself
there is people where it's a passion to
do that yeah they don't have a life but
why why not then obviously if you do
that you can be used by software code so
software is going to be used so you need
to provide an API for that probably rest
kind of thing you know is just an HTTP
API but yeah okay why not that shouldn't
be fine
can do that ah users common users users
always want the thing up-to-date always
they don't want to refresh the page I
want to have to change on their browser
on their phone immediately as soon as
it's there so we need to think about hey
how do I push things to my users and
something that is interesting software
never sleep user do but with this they
don't sleep anymore so there are always
aliens still need to pull some data
every time yeah you teach you havi iut
school because IOT like software really
really never sleep it's just a big
amount of data that will be sent of your
application I say you see but it can be
anything where you will consume events
so we have lots of events and you need
to under this somehow some way and as
everything is such a mess you decide to
do this to be depressing distributed
logging on or anything so adding another
data store where you will do stuff
inside to try to understand why your
system is so slow and so on so why it's
so complicated because all this
interaction cross the process memory
all of them are distributed interactions
you're inside your browser you can use
an app server it's still distributed it
use HTTP in between and so on so you
need we need to be around that it's
lives distributed and as it's
distributed it's going to fail that's
all that the first rule of distributed
computing it fails while first all of
this you can't predict the load that you
are going to have you don't know so you
maybe your application is going to be
very very popular we hope so and then
you will need to think about all your
architecture your application to be able
to do to under of this load and
everything you use maybe throw fail and
available under update or just
incompatible with the previous version
compatibility and versioning so you will
need to be able to under federal to
under timeouts or whatever if we do
timeouts and retry can I really we try
is our that there is many many question
you need to to ask yourself before doing
such kind of system that was so simple
at the beginning so let's see the first
type of R active things that we are
going to see reactive systems so
relative systems it's an architectural
style to build such kind of systems in a
reliable and responsive way that's been
defined by the writing manifesto you can
relate it to three pages it's very easy
to read and it focused on responsiveness
one main thing it's a synchronous
message passing and that's the important
part of the writing manifesto all your
components are going to discuss using
messages when you send a message you
send a message to a virtual address I
don't send a message to you in
particular a ton of message to hear and
maybe some of you are going to pick it I
don't care the system is going to
dispatch so message so okay I send a
message
the advantage of this is our complete
decoupling between my two components so
that's pretty cool one sending the
message I'm not looking here I am
really doing a synchronous message
facing so I can still under the level
dance and other message I'm not waiting
for a response at least not actively if
there is a response I will receive it
using another message like this so when
you have this in place it's easy to be
elastic why because why as I say if I
have too many miss eight I don't care
I'll just create another consumer
listening to the same virtual address
and the system will dispatch it probably
using a round robin or something a bit
more clever hopefully but yeah it will
just dispatch I don't care
failures and resilience resilience is
not about managing failures or exception
or try/catch now resilience is about
being able to recover after this it's
about self-healing so if this component
failed the message when we process so
the system can quickly decide if you
need to remit it or delegate to this
component to say oh sorry I was not able
to process it do something else but
during that time as it's all as
synchronous I can still under the load
and Sancho's our messages and everything
is fine my system does not suffer from a
failure from somewhere else so if you
have this you are going to be a
synchronous you are going to be
resilient you are going to be elastic so
yes you are going to be Barret proof and
be able to response to your request in a
acceptable amount of time every time and
that's pretty cool that what we want to
do so finally it's actually very simple
right my system that was a big mess I
just say yeah let's just send me stains
all over the place and everything is
fine and everything is going to work
everything is going to work except that
the guys that is going to college
application is going to die pretty
quickly
why because well all those messages are
going to happen at the same time so if
you use a thread based system it's going
to be very very complicated you may have
lots of threads and threads means
deadlock always so
you can't try don't do thread if you are
don't do sweat that's a rule it's also
going to be as synchronous and we are
going to see that sense and nice thing
about our cycling setup you never know
what is going to happen in your system
it's almost unpredictable and that's
pretty cool but pretty dangerous at the
same time so when you want to develop a
reactive systems you need to be very
pragmatic about all you do that first
thing you need to embrace a synchronous
or way down don't think in terms of
synchronous think about them of a
synchronous that's kind of hard for you
it's actually pretty hard because things
are 80s we lie to us we lie to us biting
hey we don't care everything is
synchronous in the world it is not true
the opposite nothing is synchronous
there is absolutely nothing that is
synchronous in a computer science system
everything is a synchronous and we will
need to face it face the realities that
just okay it's there it's a synchronous
we have to embrace it don't you spread
you can use task based event loops or
whatever but don't use thread if you use
threads you are going to have a lot of
synchronized yeah and a lot of deadlocks
and you don't want that all you can use
this volatile keyword that nobody who
only understand what it means so don't
you know or check the spec but it's very
complicated
all you are your need to be non-blocking
never block especially because you are
using an ever group so if you block then
you cannot continue to execute your
system so you must not block so
everything is going to be non-working
but some stuff can't and that where you
need to be pragmatic I said don't do
thread except if you have no choice
so like gdb T so all of these bring you
to the a synchronous non-blocking
development model a synchronous
development that exists in the early
days of computing right the keystroke
that our psycho knows and it's working
interruption of systems sign knows
everything is a synchronous and it was
existing and since the 80s because we
think that the robot cannot understand a
synchronous we try to make things an
Chronos now it's not the case it
various synchronization we will see that
it's not that bad kind of map not too
much so there is different approach of
this the first one is callbacks we are
going to see this one
futures are premised that's another way
to deal with a synchronous operation we
can use data flow variable we can use
data streams or you can use continuation
coroutines and so on but let's focus on
Carmack the ID beyond callback is really
being in Hollywood
don't wait we are going to call you or
not
nobody can be back I don't know so in
the second away you do this compute and
you pass the parameters and at some
point there is something that will turn
a result and on the consumer side you
wait until this compute mossad as we
turned so you wait you thread is blocked
but the next liner that is going to be
executive is this one here so one goes
after that so that's good you are in
control you know exactly what will be
next in a national news world you pass
the parameters and you will pass a
callback here I use the vertex on tax so
the callback is actually not getting the
result but generally an s-rank result
why how many exits possibility do we
have here the results and an exception
so it's actually queue but would check
exception so see if it's a runtime
exception while if we face the wall
program but we don't care here we can't
do that anymore
so we encapsulate the result inside the
structure which is a sank result which
will tell you whether or not a person
has succeeded or failed and when you
consume it will just pass this lambda or
your callback like that you can use
missile reference or whatever so that
looks pretty simple like that so if I
try to do an HTTP server in vertex I
will have so I create my CDP server and
I register or request on low and every
time that I have a request I react to
this stimulus chimney and I just say hey
let's printer name as
read just to see starting and HTTP
server takes a lot of time it's actually
very very blocking and a synchronous
because there is lots of things that
happen at the operating system level so
here you say well tell me when you're
done and whether or not you have been
successful so if I run this and just yep
just run so yeah here we go
so I started so 713 means that a fully
successful has been successful good and
if I go here OOP I have every single
invocation I get the same thread right I
do refreshing when you see that and
every time I have the same thread this
is the application of the pragmatic
creative directive system rules to use
an event loop means that my world system
is going to use a single thread but
that's fine even this callback and this
has been called by the same thread so
the advantage of not using of using a
single thread is that you don't need
synchronize anymore
because you can't be called at the same
time there is a single thread so you
cannot call at the same time
okay callback leads to well what we call
contact hell that was very nice with my
CTP server very so that's my request and
those things but let's imagine that you
want to deal with the gtb/c database or
database first you need to get a
connection from a connection pool okay
this is a synchronous you'll get your
connection so you need to check the
failures about an all-court we just say
hack a failure on them once you have
your connection you will omit your query
okay fine I am it my query this is also
a synchronous so I have a sir second
callback here
where of course I need to check whether
it has failed or not and then I just get
the result and do
what I want to do with my result and
when I'm done I must release the
connection right so this is also a
synchronous so we have three callbacks
three nested call back
why because we just wanted to say once
you have the connection do that and one
you have done do that
so when you start using such kind of
development style the first thing you
will do is to change the number of space
in a tab inside inside given direction
in your ID sessi you we I'm using Q I'm
thinking about using one if I use zero
that's going to be confusing but yeah
you have no choice it's really nasty
things so you don't want to do that
anywhere we are going to see the second
way of things which is reactive
programming and undoing a lot of of
travel Oh before that do we have people
using Excel or Google spreadsheet or
upper number we do so if you don't look
at those people because those people are
true expert or active programming that
don't know it yet
but you are going to explain them so as
I said I do a lot of travel meetings and
so on and the most painful experience
when I do travel is not the jetlag or
the food in the plane where it's kind of
hopeful but yeah it's really my expense
report and when I do my expense report
before entering in my lovely
corporate system I generally use Excel
or something like that and I say ok I
have lunch 15 pounds and I have coffee I
drink a lot of coffee
as you can see 25 pounds and doing 45
pounds because in addition to coffee I'm
also drinking a lot of whiskey and I
have this cell here and actually this
cell is actually very interesting
because these are observe Joseph's cell
so for example in Excel I will just say
oh just some of those cells right we all
did that so there is this idea of
observation
this cell is observing those or cell so
let's take a time machine bit at the
beginning I wrote 15
oh no it's Doros Oh
Dora and then I have 15 us Dora here and
then I write 25 and have froggy so over
time the value in myself change so I
have a stream a sequence of data over
time right that's relatively simple so
when you are in Excel you see only the
latest value but we are seeing of more
than one value you have all the
different revision of you of yourself
that the true nature of reiki
programming ranky programming is about
stream of data called observable in the
reactive extension terminology and
functions that we apply on zoos
observable to generate all the
observable let's take an example I have
this sequence of integer over time
first I have 1 2 3 4 so time is going
this way the first function I will apply
on this say ok take this integral and do
a plus 1 so when I get that then 1 1 is
emitted I just written Q when I got you
are just Rho times 3 so it's also
streamed because over time we are
emitting new values right so we have
another stream the blue stream is a bit
more complicated because I'm going to
take this cue last value and do a sum so
we have 5 and 9 and so on if I want to
write that using one of the most popular
reactive programming API for Java which
is Eric's and which Radcliff extensions
of Java I will write it like that my red
stream adjust all the integer between 1
and 10 or whatever it can be unbonded
then i have my green one which is just
observing the first one and every time
that is there is a new value I'm just
doing plus one and as I said this is a
stream and then I have the blue one so
the blue one is a bit more tricky
because it used a window operator to get
the last cue value and then I'm doing a
flat map while map just written one
value one data flat map can return an
observable
so that means potentially a sequence of
data and as there is flat in the name
you can read that it works and just
create a sequence of all those values
something that is very disturbing the
first time you use Eric is this part
because if you stop here nothing is
going to happen it's very confusing okay
what an actually you need to subscribe
because by therefore he just creates a
structure but does not instantiate it
and if you subscribe then it materialize
a pipeline and get things through we are
going to see a couple of example of this
when you are using reactive programming
so there is Renwick's one I will skew
rector you more or less have the same
kind of concepts everywhere you have
stream of data that in Eric we call
observable in Eric's to the core of
several and three more that can be
bonded on bonded stream of value and
inside your observable you can have
three things data cool so the next data
anymore or the signers that tell you
well and with G handles of the stream so
you won't get any more data Singles are
specialization of observable where you
can have a single value
so in that case inside your stream you
will have either as a result or an arrow
and completable which are just single
but there is no value so you can just
say whether it has succeeded or failed
so why it's interesting for handling and
taming their synchronous because
observable is what we call a sink
reaction you are observing a set of
stimuli and you are going to react to
that one and a set of stimuli it's a
stream because over time you have
different data that you will receive
singles are also a synchronous operation
you create this a synchronous operation
you don't have the results yet but as
soon as you have it the single get value
and then you can continue your pipeline
and completely burn and so on so if we
retain my gdb see example with the three
nested callback and we write that with
with the rigs it will be like that so I
use the vertex g B's clients I just do
get connection on it that is an
assonance operation and i
synchronous oppression your turn a
single when I get value when the
connection came here then I just say
okay know that my connection I'm going
to so using the flat map I'm using doing
my query micro II is going to retrieve a
stream of whoa I have here so that's
going to give my stream of all and I
have this very very neat things in Eric
let's say okay and one you're done just
close the connection and I'm done there
have my observable of wall so all the
walls that I have for my database and I
create my entity or whatever or when you
are using or just your pod row and
that's all so my three nested callback
object really just like this much more
readable right at least I can barely
understand what's going on here but does
it work actually yes it works but what
happens if let's imagine that whether
when you really fast database or in
something really fast that will as soon
as I image query send all the role in
really big back and I've not have the
time to do my maps in here so all will
walk so it would buffer buffer buffer
until until you don't have memory
anymore so fortunately in the vertex
world we are that we have back pressure
but yeah that's what we're going to see
right now what happens when your system
cannot keep up with the amount of data
it getting received so all the stimuli
and so on so let's take this IOT kind of
thing so I have lots of data and I need
to under that so for example I have my
source of data that written well that's
the JSON object and I want to execute
this process in the right order so
concat map instead of flat map really
wait for the previous one to be compared
to be completed before going to the next
one and process take a long time to
return it will be executed what we are
going to have if we run this while with
Erics we're
going to have a missing back crucial
exception if you are using another is
that you have made a system you probably
are going to have a buffer overflow
exception or worse and a lot of memory
exception so what can we do first thing
we can just do up right like I have too
much stuff I don't care now we all did
that we'll always our to-do list right
as soon as the to-do lists are to be too
hard or not to be just pick a couple of
items no manager is here so I cannot say
which one and just drop them okay we can
do that but sometimes we can't really do
this so when we can't do this we need to
find another way and this is a way could
be to a really implement back pressure
there is many back pressure model vertex
has a very simple one which is pause
resume and recta streams propose another
one which is based on request and
subscription so what is back pressure it
just an untracked between the consumer
and the source and instead of letting
the sauce emitting lots of events to my
consumer and my consumer can't keep up
well it will just say hey come on I tell
you when you can send me stuff so we
reverse completely the control we want
students peaking about data flow where
the data was coming from the source and
we need to process it and here because
we have by pressure it's the opposite
the consumer is going to trigger or
trans so that is ready to handle some
rolled so in a pause resume like in
vertex in the vertex score it's going to
be very simple we resume and it's done
data and as soon as we are full with the
opals and if you use react streams of
flow then it's almost the same you
publish your subscribe that you
subscriber subscribe to the pro to the
publisher I get a subscription object
and on this subscription you will say
requests and requests will be the number
we pass a number a time you can receive
from the source so for example
give me three boop-boop-boop and then
give me another three and so on what
January is generally requests one and
get one request one and get one that
yeah just because it's much more simple
to to design like that that is very
simple right there is nothing very
complicated beyond that actually back
pressure is nothing new if we have
internet today is because TCP has back
pressure built in when you download a
file there is back pressure and so on so
there is nothing very complicated beyond
that but here now it start to be very
something where we need to be familiar
with is between the driver one because
we have much more and more data and we
need to think about it so let's talk a
bit about vertex and how it can make
your life much more easier when you want
to address reactive things so what is
vertex so first it's Eclipse vertex and
it's a necklace project and vertex is a
toolkit to build distributed and
reactive systems it has been designed
since the last five years with reactive
in mind from the first line of code
recce was what we were targeting it's
not something that we have added on top
of other systems no it's something where
it's built from scratch to be reactive
it proposed as the annus synchronous
nonworking development model actually no
it proposed a set of a synchronous
non-working development models you can
use callbacks if you like actually the
world vertex core and vertex ecosystem
is implemented using callbacks because
we love suffering the whole but you can
use Eric's as we have seen and it's
polyglot so for example you can use
coding and encoding you as something
very cool which is named coding and we
are going to provide you court in
support in vertex you like Scala we have
a scalar binding that is going to use
futures and Kara features because scalar
futures are really great really well
integrated into the language to do that
so depending on the language you are
using we are providing a different
essentially nonworking development model
we have groovy we have ruby and so on we
have even Ceylon and I think we have
eight of them
goons or web pages with
all of this is going to use an event
loop system again one know this computer
as fork oh yeah
so it can do potentially four things at
the same time why not using my CPU - is
right liver so instead of having one
event loop I will get or actually if I
oh I will get eight because of
pipelining so it's able to do a lot of
things at the same time but it's still a
simplified concurrency because one your
system one your code is being touched by
one thread it will always be executed by
the same thread so not synchronized no
volatile or no or loose in E and vertex
is used today and this is just
production use for micro services of
course a web application IOT gateway
high volume event processing ipi gateway
a lot oh wow a message verse and so on
so it's really used because it is about
to react to the surroundings and one and
implement your active application so
let's have a look
vertex is going to be to provide you all
the building blocks to build or active
systems all synchronous and to an event
loop and everything non-blocking good
with a message extend message system
building we have Reiki stream
integration so if you need back refer we
propose you either the vertex way also
active stream way up to you to choose
the one you want and we provide reactive
programming with different language and
so on so it's up to you to decide what
you want to do vertex is about freedom
you decide how you want to shape your
system we won't tell you how which means
that you can experiment and fail and
iterate we take my application here this
application can be developed in Java
which is quite rebels in Iran one over
Lima line of code first thing my very
simple app so I have my database there
my database I can do an insert on it I
will get a single because inserting
inside my database just it's an a second
expression so I get
singer with the inserted product and
then I just write it to my HTTP response
so every time I have a request
I call my database this is a synchronous
but really the thread is released so I
can under I can get also the request and
as soon as the insertion has been
successful I just write to my request do
my investment when my user wants a list
of my of my de of my products I will
first use a chunked HTTP response so
Trancas to TP response come from HTTP
1.1 and you don't have to have your full
response in your memory and write
everything inside inside the HTTP
response no such is stupid because you
are using your memory and if you have
lots of users then your memory is going
to be your limit why doing that why
doing that one we have shrink responses
and when using chunk responses as soon
as I have something from my database I
will write it directly immediately to my
response making that my memory usage is
still very stable I have something else
boom I wrote in sign language TTP
response and the browser is able to get
that and add it to my tea Bowl and so on
when I retrieve my data for my database
it's going to be an observable so with
all my product that we come one by one
or by batch I don't know it will depend
on your database and every time you have
one you just write it to the response so
that was the first part let's say that
you need to call Pricer every time that
you get that you get a product from your
database so for every product you wade
through from the database you need to
call a distributing or remote service
this Pricer to get the price the current
price of your product so here I do this
asana separation so I have all my roles
that are coming one by one and for each
role after once I have it I'm doing a
flat map to call my web client which is
just an HTTP client in vertex and we
call the Pricer and when this one has
been or completed all this I will write
the responses on my cousin inside - TT
response so here we see sequencer
composition with vertex and reactive
extension it just flat map now remember
your users are picky I want always to
have the latest things immediately so
what we can do here is to use the event
bus the event bus is a backbone of all
vertex application making all the vertex
components interact using messages but
when we have this we can say something
like hey I have a bridge between this
event bus and WebSockets not only not
WebSocket we are going to use such GS
which is a JavaScript library that will
degrade from WebSocket to long pulling
using SSC and so on so even if you are
using Internet Explorer 6 you can still
use that and you will have the result
what user will see update without having
to refresh
but if users are still using Internet
Explorer 6 are probably not as picky or
zoom on that wants updates but well we
never know and to do that want to search
bridge is associated you just say vertex
remembers and publish Z address the
address from my virtual address that
I've explained and such the object
that's all and it will be sent to the
emaan bus the 30th wait we'll get that
send it to the WebSocket and my brother
will get it let's now try to call to
service at the same time again both are
a synchronous so all do I know when
balls are done because I can call one I
can call the second one but I want to be
sure that balls I've done when I
continue my execution you can do that
like this get price or product which is
the code we have just seen this return a
single and then I do another action with
my auditing system so I just write
something in my auditing system and I
want to continue when both are done
then I just say single that zip my two
singles on my set of singles and then I
have a callback that here just returns a
product this car back is only cold when
all of them all the singles here have
been completed successfully so it's very
easy and both core will be done at the
same time and then I just continue doing
the same thing so what about reactive
streams because I didn't talk about very
key stream so let's imagine that I have
control on my IOT device which is
completely fake because you have no
control at all on IOT devices but let's
imagine that and this thing's is
emitting lots of values and you need to
confer it to say well I'm not very hable
to do that so what we can do for example
here this device just a random integer I
have this as a publisher recce stream
publisher or through publisher it's
exactly the same appetizer even keeps
the same class name I have a subscriber
here the SUBSCRIBE the publisher
subscribe to the subscriber the
subscriber get a subscription object and
then can request typically one meaning
that it tells to the source okay I'm
ready to get one dagger then you get the
data and then once you have the data you
can just request another data and so on
so we really really control the speed of
this again this is only possible when
you can control the source there is many
many case where you can't typically you
cannot control users that's bad bad yeah
you can't we're thinking about it so
what is reactive reactive is about
building better system and stopping to
lie to us and saying well the world is a
synchronous and we will need to do with
that
so all every time you see something
reactive you can say okay it's going to
be a synchronous so it can be systems it
can be ready stream it can be active
programming it's horrible being a
synchronous radio system is a
being a building better system better
distributed system and except if you
build a game and even today event game a
distributed system you are just have
this rigid system everywhere so this
will help you build responsive
distributed system but it's very very
complicated in term of API and stuff
like that so we strongly recommend to
use directly programming approach to do
that this will change the x and kunos
based and you have an a synchronous
development model you can understand and
if you have flow that you can control
and you want to be sure that you won't
cross with an out of memory or something
at that you have right two streams that
will under bad question so I'm in London
so I cannot stop orange this
presentation also doing a tribute to the
Beatles so all you need is right key
well thank you very much
before going further I will stop the app
so that's our apps that I just did right
now here so it's so we have surprised
her here to call the prices that I need
to start let's start the Pricer I have
my router with my reactive recipe I here
so that's vertex code but again you can
write it with any other active platform
that's my relative string part just
record from the from the slide and pages
and I have right now
110 line and it's very big font so you
can probably reduce it to less than 100
red line and when I run this
hey it is I have up I don't have
anything because I forget to stop the
first one and both are listening on the
same port let's restart okay hope may be
a bit too big so what we have here is
really what we have just seen is we have
a database and I'll retrieve my products
and the price is running in another
service and I call every times I have
this in every time that have a product
across the Pricer so now if I come back
here and I do I want bacon what we have
seen here is the WebSocket so I push
back on to my recipe I wrote that in my
database i synchronously as soon as it's
back it called the Pricer once he has a
price it sends this to the WebSocket to
the vendors which send it to the
WebSocket because I'm using chrome and
Chrome and very good support of
WebSocket what we see here is the red
key stream sings because I know that
it's last day of devoxx UK I generate a
random integer every three seconds and
not too fast so I use Y key stream to
reduce the speed because why I can
generate random number very very quickly
but I know that you want to with them so
only through the 3 seconds or 5 seconds
I can't remember what I wrote
you have another random integer so and
why I am showing you this is because
last week we realized this book here
that's a very last one that you can find
in a printed version very very last one
we we ran out of it we did three
conference with that so the first one
that we call me that we asked a question
and if the number you see here is below
five you want you in the book it's a
very last one
so if you have question we have four
minutes but check the timing yep so we
have any question there is no question I
keep it I brought it so I know it but I
never read it actually yes three you
made it
I just wondering can you do them
relational operations like joins between
streams and between tables and such like
so the question is about doing
composition of different stream and so
on so yes if you use reactor rack if
extension one or two you have a pressure
and to do that to combine streams to
wait for the compression of one to you
you can do almost everything you have
all those operators to do that use an
API for this that already exists because
it's very very hard to implement it
right
don't try to implement it by yourself
especially with callbacks that's
something when you look at where
extremes you say I am at it should
provide that actually no right extremes
Israeli for classes that just do back
pressure does not provide any operators
to combine the strings or to do
filtering out what you want to do on
swims so you really have to do that
using reactor or active extension 1 or
active extension to version 1 and
referring to another question I don't
know I ran out of boot sorry but you can
have stickers and we have one there so
for me there is two questions first one
how can we manage acknowledgment so if
we send something and we want to be sure
for example if I want to send a trade on
the market and I use several services to
do that I I can be sure the trade is
really on the market so the first one
and the second one I would like to know
how we manage when its face so if I send
a message and never receive message back
how
and I'm a how can I manage this is it
timeout and even if we put time at
everywhere
depending on the size of our machine
maybe it's going to be 5 SEC 10 SEC 1
hour I don't know and that maybe I don't
want to manage this so to answer your
first question you have several ways
first the messaging that will be used by
your reactive system can be reliable
messaging and then you will know whether
or not it has been dispatched or not if
you use a vertex event bus you will add
a callback that will tell you that would
be the response from the other side so
if it has we save your trade or your
quote and successfully write it or wrote
it inside the system it will reply to
you and so you can be sure that it has
been successful about you retry so first
generally we try is a very very bad idea
why because you have a and USB AIDS and
message to be and it gets a timeout for
example so if you retry what does that
mean that means I will remit the same
message but what about the failures that
happen maybe the message between a and B
has been lost
okay maybe B as crushed okay and the
operation as as fail so in both case you
can still with write safely but maybe be
as take your order applied it to the
market and the message the response is
lost and in that case you probably don't
want to be try or you are going to run
out of money so in that case you need to
have some kind of reliable messaging
that will tell you this there is no
silver bullet here except developing a
system that use it once that is it
important in the sense that even if you
retry some things that are already being
applied it doesn't harm your integrity
sorry I'm time's up there is a couple of
sticker here I will stay around for the
next over probably you're close to the
red boots if you have the question and
thank you very much for your attention
to have the book anymore
you can download it for free from this
URL here and the slide will be I will
tweet the slide in a couple of minutes
thank you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>