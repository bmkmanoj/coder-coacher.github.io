<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Kotlin Deep Dive by Guy Heylens and David González | Coder Coacher - Coaching Coders</title><meta content="Kotlin Deep Dive by Guy Heylens and David González - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Devoxx/">Devoxx</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>Kotlin Deep Dive by Guy Heylens and David González</b></h2><h5 class="post__date">2017-11-07</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/E8uk4490S3Q" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">good morning thanks for joining us
wzo who's excited what des loges is here
yeah the top level of the room is some
coffee downstairs
this is excited about it yeah is he
David we are running the occulting user
group here in Belgium it's been open for
now what three months we started end of
January this year yeah and we can
organizing meetups mostly in Brussels
and now I have a few meters for next
year as well in Bruges and few other
cities and the reason of what we are
here today is because we have this
Coleen deep dive and we'll be splitting
it in two sessions the two parts the
first one I think it's an hour and fifty
15 minutes so I will be giving the
introduction so the first part 75
minutes and that will be like starting
from zero what Kotlin is how it started
and going from the ground up
until I can maybe show some REST API if
you're interested then we have a 30
minute break and then David will take
over and I will do the same again now I
used to do the API that he has the
recipes if I'm will try to build an
Android app that consumes that API and
it also explains a bit more advanced
concepts or of called in how can we use
it so it's a bit more pragmatic workshop
because we know just gonna explain the
theory and that's it is gonna be like
practical examples how can you use the
cool features are calling gives us and
again it's just one hour to build an app
so it's not going to be a great up but
at least you're gonna see some really
use case of of what it is hmm so at any
time feel free to just get your laptop
will push all the code after the work so
you can also play with it but if you're
on with your lap around there will be
amazing to them
he will push to the coat afterwards I
was a little bit eager so I've put up
our github you can find the code of the
rest API there already okay
happy news your turn okay so let's start
so good morning again like David said
I'm gay I'm freelance software developer
I have been using coupling a little
little bit over a year now
because I was playing around with
Android and yeah I came across Scotland
started using it and I liked it so the
second thing is there is or there was no
user group in Belgium so I started it
okay so what is Copelan koplan is the
language created by jet breeze in 2010
and they started because they needed a
language other than Java that was safe
and approachable pragmatic and easy to
use but also they did not want to ditch
their old their java code base so it had
to be interoperable with Java of course
so pragmatic means practical language
concise developers we spend more time
reading code than writing code simple to
read save time and money safe code
design of the language prevents certain
kinds of variants in the application so
we had a slow but steady growth from
2010 to 2016 and in 2016 we had the
version 1 that came out of Catalan and
in that same year support was added for
Gradle and spring boot also so the past
year was really great for katli
especially because of the announcement
that Google made in May that Catalan was
going to be an officially supported
language for Android development and a
little bit later on this year like end
of September they
pivotal announced dedicated support for
spring five so Coughlin is just like
Java a statically typed language so this
means that the type of every expression
is known at compile time and the
compiler can validate that methods on
fields you're accessing exists only
objects you're using so Catlin is
inspired by Java groovy Scala see
sharpener and others so on what does it
target the JVM of course Android
JavaScript and native so what can we do
with Coughlin's you can do industrial
applications mobile applications
client-side web applications server-side
backends like last week JetBrains also
made an iOS app in Coughlin's so that's
nice so before starting coding in
Catalan we need to follow some coding
conventions and basically we follow the
Java programming language coding
conventions so this means type start
with an uppercase methods and properties
in lower camel case and of course
semicolons are optional you can see on
the slide that it's mentioned almost
optional because there is one or two
cases where you still have to use
semicolons I don't think I have an
example of it by the way but okay I
could just follow the reverse notation
like the e dot Kotlin dog-training the
basics dot dot dot whatever and package
does not have to match the folder name
so what do you need to write some
coupling
first of all JDK version 6 or above and
a cufflink compiler an editor like
IntelliJ Android studio or eclipse we
also need some build tools like maven
Gradle cobalt cobalt is actually a build
system based on maven and Gradle and is
entirely written in Kotlin
so you can also use enter or the
command-line so now we'll look at some
language features of the of coupling so
we start off with functions because
everything is a function and it's fun to
write they thought it would be nice to
start every function with the keyword
fun followed by a function name in this
case it's max they call this and then
followed by parameters in the list
between the parentheses the return type
comes after the parameter list separated
by a column and between the curly braces
we get the function body
so in Coughlin's if is an expression not
a statement so difference between a
statement and expression is that an
expression has a value which can be used
as part of another expression whereas a
statement is always a top-level element
in its enclosing block and doesn't have
its own value so in Java all control
structures or statements in Catalan most
control structures are expressions
except for the loops the for loop the do
loop and the do value the ability to but
two combined control structures with
other expressions lets you express many
common patterns concisely so you can
even simplify the previous function a
little bit more because its body
consists of a single expression in this
case you can use that expression as the
entire body of the function so removing
the curly braces and the return
statement for expression body functions
the compiler can analyze the expression
used as the body of the function and use
its type as a function return type so
the return type declaration is necessary
so this is called type inference so we
also have variables of course so in Java
you start a variable declaration with
the type in coordinates a little bit
different
because coupling lets you omit the types
from many variable declarations so in
Catalan you start with a keyword which
is the four or the foul and you may or
may not put the type after the variable
name so if you don't specify the type
the compiler analyzes the initializer
expression and it uses its type as the
variable type in the left column the
initializer is 10 which is an integer as
a type so the variable will have the
same type in this case integer type on
the right side it will of course be a
string so like I said before we have two
keywords to declare a variable like we
have the vowel type which comes from the
word value which is an immutable
reference so a variable declared with a
vowel
cannot be reassigned after it's
initialized so it corresponds actually
to a final variable in Java the second
keyword is the VAR type comes from
variable actually and this is a mutable
mutable reference so the value of such
ever variable can be changed so this
declaration corresponds to a regular non
final Java variable so a Val variable
must be initialized exactly once during
the execution of the block where it's
defined but you can initialize it with
different values depending on some
conditions so if the compiler can ensure
that only one of the initialization
statements will be executed so in this
case the message which is a vowel type
will be set in the if block either with
success or failed so in this case you
will not get a compiler error it will
pass
so note that ever even though a Val
reference its is itself immutable and
can be changed the object that it points
to may be mutable so in this case we
created a list of strings with languages
in it which is a file type and
afterwards you can still add other
strings to it so this is a perfectly
valid code so here's another example of
the type interference so both statements
are perfectly valid in Catalan the above
is just a little bit more verbose so you
can simply remove the string type here
so we also have string templates this
makes it easy for us to use a property
in in another string like mention above
so a template expression always starts
with a dollar sign and consists of
either a simple name so in this case we
have name name property and the H
property so another example of string
templates with an arbitrary expression
so between the curly braces here it's
actually getting the length of the name
faragon we also have multi-line strings
so you can use multi-line strings with
triple quotes you can also remove the
leading whitespace with a trim margin
function by default the pipe sign is
used to define the left margin like in
this example here but you can also use
any other character in that case you
would have to explicitly give the
character in the tree margin function
we have some ranges and loops so
arranged expressions are formed with
range two and the down to function so
the we have the operator here the dot
dot which is actually the range two so
if you want to create a range like you
just do one dot dot 4 and this value
will will be a range will hold four
values so range is defined for any
comparable type but for integral
primitive types it has an optimized
implementation so you can also do the
ranges downwards then you have to use
the down to so a for loop basically
iterates through anything that provides
an iterator so any totally needs a
little bit different from Java
equivalent to wait for each actually and
also type inference works in the for
loops like in the second part just
declare a and type will be in feared we
also can do of course a for loop on
strings so we have a list of cities and
therefore each or for city in cities you
print the city name actually
so in Kaplan you also have the while
loops while and do well they are
actually similar to Java so if you have
any loops at a certain point you want to
break out of the loop so we have the
inner if statement here the modular a
and when you get to 0 you want to break
out of the loop so how do we do it so in
Catalan and the expression may be marked
with a label and the label they have the
form of an identifier followed by an @
sign for example ABC at foo bar at
valid labels so in this case I added the
label loop so we just put a label in
front of it and in this case when you
hit the zero here at the module you will
break and return into the loop and this
is not a go-to by the way okay so we
also have classes so basically
visibility modifiers in coupling are
similar to those in Java you have the
same public protected and private
modifiers but the default visibility is
different so if you don't specify a
modifier the declaration becomes public
so default visibility in Java is
packaged private or the default
visibility in Java package private isn't
present in that so Kaplan also offers a
new visibility modifier which is
internal and this means that it's
visible inside a module so another
difference is that Catalan allows to use
the use of private visibility of for
top-level declarations including process
functions and properties such
declarations are visible only in the
file where they are create declared this
is not a useful way to hide the
implementation details of a subsystem so
to begin let's look at a simple Java
Bean person class that so far only has
one property the name property so in
Java the constructor body often contains
code that's repetitive so besides the
parameters to the fields with
corresponding names so if you will
compare or create person class in
Coughlin's you would get actually
testing so this is the color invariant
so the modifier public
disappeared during the conversion from
Java to Copeland so in Catalan public is
the default visibility so you can omit
it don't need to put it so often the
purpose of a class is often to
encapsulate data and the code that works
on that data into a single entity so
Jeeva data stored in fields are usually
private so to let the clients access
that data you provide accessor methods
like a getter and a setter setter can
come to a logic for validating best
value sending notifications on change
and so on so in Java the combination of
the fields and the accessors is referred
to as a property in Coughlin's the
properties are first-class language
feature so the entirely replaces the
fields and accessor methods so you
declare a property like you would
declare a variable with Val and four
actually
so in this case the name is a read-only
property and the is married is a mutable
or a writable property so on upon
compiling the compiler generates for the
read-only a trivial getter and for the
VAR field it generates a getter and a
setter so there are some cases that you
want to have custom getters and setters
in coupling so this is the case with
property H in this case on the person
class so we just get a advocator
so in this case the value will return
the age of that person so on the
property
social security number here we have a
custom setter
so the if statement checks if the social
security number starts with SN and
throws an error if it doesn't so here we
we see the value and the field which is
marked here so here we have the value
and field the field is actually the
backing property of our social security
number and after the check it gets the D
value assigned in the field okay
so continue with classes so frequently
frequently you create a class that holds
only data so in Java you would call that
a POJO such a class classes standard
functionality is often mechanically
derived from data so in Copeland this is
called the data class and it is marked
as data so what the compiler is doing it
derives the following members from all
the properties in the primary
construction so the equals the hashcode
the to string the copy function so
everything you will have your ide
generated in your java class the
compiler will generate for your cotton
Kotlin classes automatically so this is
a big plus for maintainability because
we often hear that when you create a
java class become the ide generates all
your Gators here setters here to string
and everything it's true that the IDE
generates it but of course maintaining
that class that's something that you
would have been doing so so this is a
data class in Copeland called customer
and if you would do the same thing in
Java you would get something like this
so it's a little bit bigger to say the
least
so enumerations this is a rare case when
a public declaration uses actually more
keywords than the corresponding Java ba
but only one word more so so in Java you
would just declare it an enum and
coughlin it's an enum class so just as
in Java idioms or aren't a list of
values so you can declare properties
methods on an enum class so difference
between the left and the rights
declaration of the enum is the value
that's added on the right side so to
summarize everything about the classes
we just see so all declarations are
final and public by default and to make
a declaration non final you have to mark
the class as open so internal
declarations are visible in the same
module and you use the field identifier
to reference a property backing field of
the from the accessor body and of course
data classes provide compiler generated
equals hash code to string copy and
other methods so we also have interfaces
so a couple an interface is similar to
Java 8 they can contain definitions of
abstract methods as well as
implementations of non abstract methods
so similar to Java 84 methods but they
can't contain any state so here's a
small example of two different
interfaces but they have the same
function in it so they both have fun a
in two interfaces so sometimes it can
happen you're using interfaces that are
existing since long time so you cannot
rename the function so how can we use
implement both interfaces and use both
classes so in Kaplan you would do
override the fund and then referred to
interface one or two with the super
keyword so filter and map so filter and
map functions they form the basics or
basis for manipulating collections so
many collection operations can be
expressed with their help so the filter
function goes through a collection and
selects the elements for which they're
given lambda returns true so here you
have a list of numbers and then you just
filter it when modulo modulo 2 equals 0
so in this case we create a list of
persons I would like to have the persons
with an age higher than 31 so the filter
function can remove unwanted elements
from the correction but it doesn't
change the elements so it only returns
in this case all the people from that
filter but the value of people is not
changed in any way so the map function
applies the given function to each
element in a collection and collects the
results into a new collection so you can
transform a list of numbers into a list
of their squares like in this case the
result is a new collection that contains
the same number of elements but each
element is transformed a call according
to the given predicate so also in this
case the list is not changed if you want
to put that in in another variable you
can do it but in this case it's just
returning everything
so you can also chain several calls so
in this case we change the filter and
the map so in this case you would get
all the people with an H of above 30 and
you would map or you would return only
the person's name so in this case Bob
will be returned so control structures
so basically a traditional usage of an
if control structure not that very
different from Java or any other
programming language so in cotton if is
actually an expression so this means
that it returns a value therefore there
is no channel operator like condition
question mark then else so okay the one
in Catalan replaces the switch operator
like we know in a lot of C languages so
it matches its argument against all
branches sequentially until some branch
condition is satisfied so when can be
used as an expression or as a statement
actually so in this case it's evaluating
the result that is if it's the string it
prints excellent and if it's an end it's
prints a number and I'll just prints out
the value so we can also do it of course
with numbers so X is 2 when X is 100
prints are one until result one else is
neither one or two it also works with
ranges so you can check
if a value is in a certain range or is
not in a certain range this is the end
not in a certain range so Kaplan also
provides the ability to extend the class
with new functionality without having to
inherit from that class or use any type
of design patterns such as a decorator
so this is done through a special
declaration called extensions so cutland
supports extension functions and
extension properties so extensions do
not actually modify the classes they
extend by defining an extension you do
not insert new members into a class but
merely make new functions callable with
the dot notation on variables of this
type so for instance considered an
extension on the string class that
returns the last character of the string
so the type you will add the extension
to is called the receiver type and the
extension is called the extension
function so if you would like or if you
would like to use the extensions you can
do it like this so we created two
extension functions like cap stuff and
prefix stuff so in the first line of our
main method we capitalize the Batman
string so this is the string class with
the extension and this is also the
string class with none of extension so
here we have the Batman cap stuff prints
out Batman in uppercase of course and
here we have the string with the prefix
and the cat stuff so again the chaining
is implemented here okay so we know a
little bit about coupling now the big
issue of course is it interoperable with
Java
and of course it is you can call Java
methods extend Java classes and even
implement Java interfaces in Catalan
without any problem so unlike some other
jvm languages Catalan goes a little bit
further with the interoperability so
it's actually effortless to call Catalan
code from Java so coupling classes and
methods can be called exactly like
regular regular Java classes and methods
another area where coupling focuses on
interrupts is its use of existing Java
libraries to the largest degree possible
for example Catalan does not have its
own collection library so I realize
fully on Java standard library for this
so what they did do they extended them
with some additional functions so
basically one calling Java from Kotlin
you followed the coupling conventions
and when you're calling coupling from
Java you follow the Java conventions so
if you have two developers in your team
one is a Java expert the other one is a
Coughlin expert they do not need to
switch hats or change their mindset to
use coupling class if you're a Java
developer or the other way around and do
like you always do so in this case we
created the customer class which
actually comes from a customer Java so
you can see in the name here so this is
the coupling part and we're going to use
the Java classes and Java interfaces so
the customer Java is actually a Java
class in in the backend and you can just
refer to the variable email in the Java
class as email dot email
then the runnable is a Java interface so
you can simply invoke it in this case
with a llama with a lambda expression
you also have a pretty print method in
that Java class you can simply call it
no problem so inheritance from a Java
object no problem so we have a coupling
repo bottom here the class cotton repo
which implements a customer repository
from which is actually a Java interface
so the class simply implemented inherits
from person Java without any problem so
you can easily mix and match Coughlin's
with Java code in the same project so
what about null safety Kaplan is no safe
but Java is not not safe so anything in
Java can be no so how do we cope with
that so when we created our cotton repo
based on the customer repository
interface which was the Java interface
IntelliJ added actually a question mark
behind our return types so this is the
compiler telling us that you're
implementing a Java interface and I
cannot be sure if that will be though or
not knowable so when you leave the
question mark there you should have to
mark everything that comes from Java
with a question mark so you would have a
lot of question marks in your Kotlin
code so this is one of the rare cases
that it's up to the developer how to
implement it so you have to be a little
bit awake when you do this so if you are
implementing a Java interface and yours
that this will never be no you can
simply leave out the question mark so
the compiler will not complain but be
careful when do it so another
possibility is that we the jetbrains
annotation to our java class when you
are sure that the type the return type
will never be known so this is the java
brains annotation so talking to from
Java to Kotlin it's of course also
possible so when talking from Java to
Catalan again we followed the Java
coding conventions so when we are
creating a customer Coughlin's object we
notice that everything is marked as not
knowable because Catalan by default is
not so when you mark your coupling class
with a knowable property Java will
notice this and say it is a nullable
property so when talking to a coupling
class from Java and you want to set the
email property of the Catalan class so
how do you do it so here we have the
customer custom this is actually the
custom class you would just use the set
email so set email is not defined here
anywhere but the compiler will generate
it for you in the java bytecode so again
when you have a Java class and you want
to talk to Kotlin you just use the same
things you just use set email to set an
email what about a field so in Portland
we only have properties so we don't know
we do not have fields in in coughlin so
what you can do then is in your Coughlin
class you can annotate the value some
field here with annotation at JVM field
so in when you're doing it like this you
can get the some fields no problem
so that's about it for the how shall I
say the question marks so we wanted to
create something to show you a little
bit about Coughlin the code for this or
the idea was to create something that
back-end people and front-end people
could rely to so we created a REST API
with spring boot that is what I created
so the code is already on our github and
they will will show afterwards how to
consume this with his Android app so we
started with a simple basic scheme to
database scheme so we thought it would
be interesting to use something
typically Belgium and use some beers so
we created a brewery table if we want to
look up the breweries and get all the
beers from a certain brewery and
everything so if you find any errors in
that don't blame me so what did we do we
we're going to use IntelliJ for this
with like I said spring boot and swagger
to sew and in IntelliJ it's very easy to
create a spring boots application you
just have the you just use the spring
initializer
and then and you project setup you just
add a group and an artifact ID I use the
Gradle project type here and of course
the Kotlin so afterwards we added some
dependencies the rest repository JPA
here it says MongoDB actually in the
code in the github we are using an h2
database because h2 is in memory
database and David is going to use that
afterwards so here you see that we've
selected the spring boot snapshot so
basically this is the end of my
presentation I don't know if there are
people that have any questions up till
now shout what do you mean by
replacement yeah yeah well you should if
you're working from a REST API point you
should get that or like in this case
I've this is my code the data class has
actually default values
so you should you should catch it
something like this that because
otherwise this is one way but you can
also declare your variable to be
nullable and then it will allow you to
get nulls that's answer your question
okay
yeah yeah well business may be not a
good example but you can of course
declare a variable is knowable with the
question mark so it's possible yeah
anybody else yes is there a possibility
to create multiple constructors yes you
can have multiple constructors it's
possible I don't know if I have a code
example yes so the question was is there
a possibility to get multiple
constructors constructors in a in a
class and the answer is yes you can I'm
going to look for an example of this
sorry
do you have an example David
if you have any other questions I can
try and multitask
so here you have a small example this
will be your main constructor in it and
a secondary constructor would be marked
as a constructor so so it's of course
giving me an error but this is the way
to do it
basically anybody else has a question
yes yes no they use the standard Java
collections but they enhanced it a
little bit so by default you can define
it mutable or immutable just like
default depends on the keyboard here
using it severe or far or a vowel if
you're using a var you can they are
mutable but if you use a list of it's
immutable I think so then you can use a
mutable list of depends on what you
would like to do but in the example I
showed like the languages I've declared
there a fowl which is immutable as a
list of string and then afterwards you
see that you can still add strings to it
so that's unit so they don't explicitly
explicitly show it but sometimes you
will see it popping up or when you're
compiling or coding something that it's
indeed asking for you're not returning
something what do you want to do so
that's unit
anybody else yeah
from talking from Java to Kotlin yes yes
yes I will repeat the question so the
question was that if you create an
extension on an existing class like for
instance on the the string class example
I did if you extend the string class
with a get lost character or go to
uppercase if there is a performance
penalty using that one it's a good
question but I did not get the chance to
play with with that or or figure it out
the all your extensions they should be
placed in a separate file so if there
should be a penalty I believe it would
be on compile time okay anybody else has
a question yes
yeah so the question is that you do not
need to declare all the repeated yes
it's so the question is you can put
actually several data classes and
functions in one file so the Java coding
conventions says otherwise has one class
one file I think it's basically up to
the team you're working in I have been
using Catalan now for a little while and
I have also been following the one class
one file rule so I think that's a good
option I think to answer that question
also this the the notion of package that
you have in Java doesn't apply to call
in the same way so there's a problem
you'll see it in the in the example of
the app later in the same file usually
you will have a class in Java I would
say I don't know actions and then you
have different classes inside that file
in inside that class in column is a good
convention to have in one single column
file several data classes just because
this was one single line array defines
one class so having three or four
classes that are ready to the same
domain to me it makes sense it's more
like your personal preference
but haven't seen I've seen different
examples where different data classes
are in the same file and then you can
just reference to them okay anybody else
for the question just to touch on a
point yes yes before about the
performance issue of an extension
function you see later something called
inline functions and and how does that
affect the performance but essentially
every time
you you have an extension function when
you see the code that the bytecode of it
generates it will create a a several in
the Java in the resultant Java that you
would see it will create an anonymous
class when the reference to the function
so you'll see we see the example later
with the with the Android app and
different bytecode but there is a
performance issue in having all the
extension functions you have anybody
else in the Unruh WC and in bulk
operator used yeah is that so the
question sorry note that I so the
question was if in correct me if I'm
wrong if there's plans to support
dynamic invokes instead of anonymous
classes I haven't seen a roadmap it that
it is I don't know and maybe someone
from jetbrains can reply to that yes so
the question is are there any
disadvantages of using Coughlin I don't
know can we say that is a user group no
I think no that's not there's no
disadvantage of you know I think there
is a learning curve yeah and if you have
a big team and everybody needs to learn
something new it can be fun to do it
together but you can also no not forget
you have to focus and ship something but
everyone I talked to that is using
calling for longer than asked for
example they are all M are extremely
happy about the the benefits of having
to be able to write more concise code
and test because it's in our in in my
case being an Android engineer it's
makes Android fun again because it's you
have something new to learn and you can
do the same thing you did before any
less lines of code this is always nicer
yes so the the not the question but the
runt is about not having static analysis
in Carlin there's two answers to that in
lint
for example from Google they are working
very late work very hard and support
having more support for Lynde rules for
coddling and there is a library that is
use detect there is a good static
analysis tool at least I've used it on
Android and it works I don't know if
it's an equivalent for all fire fine box
PMD and and textile but at least detect
I'll find the link I'll put it up later
it does it does its job I know that they
had issues in the past but of last time
I talked to someone about it he said
that he actually worked yes so correct
me if I'm wrong the question is you're
using Coughlin from Java yes yeah if the
classes annotated as not null in column
as well for so Java can't see it you
will get a comma in at the ID they will
tell you you cannot do that you can show
an example Larry I think you should do
the underlined in red and it will tell
you that it's not that is not possible
yes yes the
call it wheelers that's filet yeah yeah
sorry
so indeed we have a second part and
there we will discuss a little bit more
about Singleton's landis Singleton's
lambdas and if another functions as well
but yeah there is a concept of singleton
and it's simpler to declare as opposed
to Java you have to go to the incense
and check that the intent is or is not
null we show you later how it is but yes
it does exist and it's widely used yes
so the question is was the reasoning
behind everything being public by
default yeah um if it correlated to the
actual idea of not having a packet
structure so and if you could write
according up with all the files in the
same place and or having in different
packages and it we'll still see each
other I think it's what a design
decision then then anything else and
obviously if you want it to be private
you can do so and there's even a keyword
called internal that it will show Lee
heights if you're developing an SDK for
example or a module and you don't want
anyone else to be able to even reference
to it or even see it you can add an
internal keyword to the to the property
you to the class and it would be hidden
I think it's more like well you can
decide if you want to or not more than
more than that I think Java before will
be project protected then here is just
public yes if it's possible to create
custom annotations yes we won't bother
it here but yes you can there's a proper
guideline in JetBrains
in their website to explain that yes you
can it's the same thing looking at the
focus thing and there's someone there
yes you don't have so the question is
how do you import extension functions
save it's an extension function on a
string the moment you use a string and
you click dot it will show up in that is
there's nothing that you have to do on
top of that to see the extension part
you just declare I will be visible to
any object using any inside of that
object we'll be able to see the the
extension function so the if you create
all your extension functions in one file
you place that that's that file is in
your project it will get picked up your
ID or compiler so it will work
anybody from that side oh no it's only
yes yeah so the question is was the the
overhead of declaring lambdas in column
how does that compile to each other it
would create an anonymous class in the
Java file I would generate so it's
similar to what I just described in
Scala so it would you agree that if a
new anonymous class with the static
reference to the to the function anybody
else
don't work and show something
so I can show the code that we created
the REST API or yeah a question okay
well me personally I did not do it maybe
David did I don't know we have some
other people in our community that are
doing it so the process is actually
taking your project and doing it step by
step so do not do it immediately in in
one go try and pull some things out and
do it like that there's a really
reasonable class so the easiest the
brute force way is you can go to any
Java file or in Java any Java file you
have in your project you can convert to
calling from the ID that I will be the
brute force non proper way to do it so
you can convert it in five minutes if
you want but then again it's not that's
not the point and I think that that's a
decision more of you as a team I don't
see any benefit to you know come that's
export everything you had in Java movie
to Colin just because it's cool if you
have an issue in that file and you have
to refactor something maybe think about
moving into Colin but just going back to
you have a large code base and just
change it because it's Colin I don't see
the benefit of it how about the 6-2 to
that you know change all the code that
you had before but there's a talk from
Dan Kim from base camp that he did at
roy cohn new york and the video was
online this week and he explains how he
moved base camp to 100% calling code
base and they explained the pain that he
had and some issues that they found so
it is possible it's more like how many
people you have in your team and how
what's a tell and then you have for the
next feature to release outside
so I can go over the decoder I've
written in the nearest API so we still
have some time
no problem I don't know if is that can
you see it probably because it's a very
big screen so it's a basic setup like I
said don't judge me on the setup that
I'm using because it's an example so
I've put every all the controls in here
the entities in here the entities that I
have created our data classes like in
this part like basically or were you
trying to do it in a real world app you
should create data classes DTO actually
and resource allows us to expose to your
front-end actually but because it's a
simple example we just use the entities
here so this is basically a data class
with immutable objects like devel with a
default constructing so we added the ID
and generated value which which is
actually not
Coughlin's but it's is coming from
Springwood and we have the repositories
hang out so okay so here I have simply
created some functions like fine beer by
name by alcohol percentage or by type ID
there is only one implemented here you
can see it by because it's black and the
other ones are grayed out so I did not
get a chance to do everything but this
is simply returning and a list of beer
entities in this case
this is another okay so the beer
entities there are simply data classes
and there we have the controllers so the
starting from we will go top to bottom
actually so the above part is just
getting all the beers that are in our
database just gets all the beers no no
fuss about that creating a new beer you
have developed a request body so it's
it's a post mapping actually so it's
getting the beer entity and and it's
saving it in the third function we are
looking at getting beers by ID so we
mark the ideas about variable and then
the response entity is of course a beer
that's returned beer entity in this case
so here you see something that was not
in the slides is the let thing so we are
looking or we are getting one item or
requesting one item from our repository
and we pass in the ID so and the LAT is
checking if there is something and if
there is something it will return it and
otherwise it will return the it not
found and built an empty one so when
looking for beers on based on a type
it's basically doing the same thing the
the let actually and we also implemented
a put hang on
okay so here we get a beer entity asked
in the request body so what are we doing
here we are copying it actually into an
updated beer entity and then we are
saving that one so this is a really a
basic example of a REST API there was a
question somewhere yes sorry yeah that's
probably not necessary should tell you
you see so if you put a question mark
and a let it's actually unnecessary call
or not necessary safecom that the LV
separator is just to check if that's now
or not so if you have this question mark
for ya if you do that you're saying oh
you want to go after this if this value
is not no it's just to tell the
compressor this could be no in this case
there's no necessary to have the save
code because you let me know that get
one it's not it's not going to return
all but if this function here could
return an old tape a null type then you
would have to use this operator to say
hey maybe this thing is no you need to
check with it so and the question is if
it is no what happens then in this case
it will it will return me the not found
but the question mark here is obsolete
so so this is the if that thing so you
get one was no then what you will get is
this reply here would be a city not
found if it's not null then it goes in
this is unnecessary check but in the
case that kid one would return you know
value that closure would tell you what
to do if it's no or if it's not now it's
a simple nicer way you're supposed to
have if equals no polluting all your
code base you have the operator
and this also another thing just with
this same way you happy that were super
later to the site to check whether it is
not or not if imagine this function here
will return could return inaudible type
and you know that is not going to be
null then hang on a second so in the
repository yeah so we get one method
just go to this definition is going to
go to the repository and what you want
to do to get one method that's that's in
the JPA repository so the get one in
this case come from it so let's do one
thing let's just put one of these as no
level so they can see the difference
okay can you rather enjoy beautiful
touch keyboard that I cannot use sorry
do you mean if
so the question is would led to anything
if it was an old type yeah
so this let is what you do before you
return the before you return the type
can you go back to the yes to the
controller so your question is if this
let yes so you have this if you do have
the Elvis operator it will handle it if
you don't have the operator you won't
handle it
it's the same way if you didn't have and
if equals now check in your code it will
still go through that line but all you
mean you
a try-catch right if this thing was no
and you have this led here with the
Elvis operator he will go to this line
here in this case no because that's how
the function is built-in yes he will
never handle null yes that's true in
this case yes this is definitely not the
best example for the case that you want
to talk about that doesn't work because
it's spring 5 so find one is would work
in the previous spring version I think
this is using Java 8 already so you're
the biking I have no idea in time Sarris
so we're almost out of time I think
anybody else has a question remark for
this part about something that we have
shown on the slides because we have a
second part and we will without spoiling
anything we will have some new or or
other function functions functionality
that we did not cover in the first part
yes ok yes
yes yes yes so that by default the list
of the finishing : is a mutable list
there's a matter if you have an
immutable variable that has a reference
to the list you cannot reassign the
variable but you can add and remove item
from that list you can do create an
immutable collection yes it is not as
the reason that the Val or the viable
holding the reference to the list is
immutable there's a mean that the list
that it tends to be metal you have to do
that manually and the people
implementation in colonists the list is
mutable this yeah it's in when you use
so there are different operators you
have let apply with and so on depending
on which operator using the eat will
return something different in this case
let will return the item itself so
that's when you say it dot copy is
you're actually getting the result from
get one ID is it and then as you go in
copy which is something somebody was
asking about multiple constructors since
you have this concept of named
parameters say the Java so they're pure
entity class has all these different
properties you can say that one of this
if they have a default value you could
remove one of this and it still will
work so that's how you will achieve
multiple constructors if you have
default parameters per every method for
every property you don't have to
specifically call them you can just say
tell you what are you holding on I'm
trying to do can you go into the pier
entity class no no because that's
IntelliJ telling us that so sorry yeah I
have a proper keyboard later that's low
so you have like every property has a
default value you cannot have this in
any class then you don't have to create
different constructors like you would do
in Java that it would say oh if you only
call one if you only had one property or
one field then you would call yourself
is the same with a missing parameter in
calling you can simply do use the
property of named parameters so you
would do the bill color is this color
the alcohol percentage is this covered
and if you don't declare any other
property when you create the class it
would just take the default values so
that's a way to achieve multiple
constructor of either having to
specifically say them you can use your
same parameters yeah he will tell you if
you don't have a one of these didn't
have a default value is a comma there
you go
this thing will complain should complain
if you have a class that has like seven
it's the same way you would to before in
oh if you were using Java you just need
to know that you're doing it if you
don't pass one of these parameters and
it's necessary the idea will tell you
hey you're missing this one there's no
there to is a compiler will tell you so
replacing the peer name here theme
Nellie
using the copy function since copy when
you copy objects in Collin it will take
this all the same values that the
previous I'll go before hats so it is
taking this guy and this guy really have
all this value set so if we were to
create another beer that is and you say
this is a beer entity the parentheses
sorry so this guy that was gonna tell
you you will need to add it will tell
you you're missing all these different
parameters that you have to add so you
have beer name and ID yeah so in this
case we only have because we change the
data clause a little bit only idea and
name so are yeah it's basically telling
you there's only two parameters that you
really have to pass a value for which is
B your name and ID all the other ones we
have default values does that look like
answer the question it was somewhere
over there yeah yes yes yes
yes you have a non-null annotation in
the calling class yeah is this I got it
do you have swathi non no job annotation
for it to pick it up we can you can look
at it if you want yeah so maybe we will
have a small break now save your
questions because we need to change
laptops and an audio system for David's
presentation but while we are changing
things you can come over here we have
stickers and flyers and we can also try
and answer your question it's very good
good thing good idea
so then we can change mics and laptops
and everything in the meantime like 20
minutes
I don't know when does it start again
should be yes 2025 minutes yeah so yeah
okay welcome back
yeah that's it can you see the code from
upstairs yeah sweet safer coming back
who's still excited about the box I
really think the top floor of infidelity
of this room did you come by car to
Antwerp that's why you're not excited
yeah it's my first time going by car to
amber it was Google Maps it's gonna be
45 minutes now like yeah okay and he
said you should leave like two hours
earlier so I left at half past six and I
made it at eight so that's great but
anyway quick show of hands who is an
Android developer or know about androids
aku and you use : a day today have we
used Colin before you don't know what
color is kind of cool so the idea is to
to write a very simple app with the
glorified API that we developed as a
disclaimer if anything fails is always
force of the API is never decline one so
keep that in mind if something fails and
the idea is to to show a little and they
landed up with a few of the features
that you would get with Colin and how
cunning can make our life easier as an
under engineer it's not going to be it's
all about practical cases more than
theory and and and then you have to go
on and search for it so one of the the
first country that we're gonna touch
upon is late in is realization or lazy
initialization so if you come to the to
a normal activity which is the one you
see here on the right side it is extends
from app compat activity and the first
thing we would like to do is to change
the toolbar so normal if I have any
question at any point just raise your
hand and if I can see you or is a shout
and I'll try to to stop so don't don't
pretend to be 73 minutes sitting I want
you to sleep so be creative
you didn't have anything just just shout
so normally what we would do if we have
a toolbar and we define this toolbar as
being from the super library if we
define an immutable viable property is
going to tell us a business to be
initialized so in normal Android you
would come here you would set the layout
and you would say what's the toolbar you
know it is we can find vu by ID and then
this would be toolbar but the problem is
this is not happening when the class is
initialized this is telling us a you
declare an immutable property and here
you are assigning it this is not
happening when the coding class is
created this gray is happening when the
activity and its lifecycle it's
happening so you have options you could
do this and then it would say it still
needs to be initialized or be abstract
so you can say that this can be null and
then you could play around it but this
is not the way that we want to go what
we want to do is either initialize it
here and you can say if M by V and with
this and then we say this is a tool but
the problem is this is going to be cold
and we can just go and try to execute it
and see what happens let's hope clear
that is nice to me today I saw this Nia
is not my thing this nyan cat I saw I
think was Hadi hurriediy that showed it
I like this is so cool you have to spend
hours looking at Gradle building at
least something nice right let's just
put that so if we execute this come on
cat
the whole talk is 20 minutes is 71 just
because of Gradle so that don't quote me
on that what's gonna happen is it's
gonna start is gonna crash because the
moment where it's time to assign the
variable to the toolbar this is still
knowledge initialized the content hasn't
been initialized therefore we can do
anything with it
so what do we do we either move the
decoration somewhere here and then you
don't have it as a field we just do well
we're here and this will work and then
you can do toolbar the title and then
you know hello there box and this will
go and it will work hopefully if this
first example doesn't work then I'm
gonna shut the laptop and go home but
this is okay you can have this local
property you can find it and then it
will work now fellow doubles amazing up
great but what if you want to have this
is a property inside not inside this
method but you want to have it somewhere
else so it will still want to have it
outside there are a few options that we
have we can either do we can call it
late in it and you can say it has to be
a var and then we don't assign it to
anything and then you say well here I'm
actually know that the toolbar is this
so you can call the late in it modifier
to the property and even into the claw
at that time just saying I don't care
when I know later this will be
initialized and and it's okay but
there's a better way to do that and that
helps because if you're another engineer
developer and using having the multiple
views in your activities you're still
having you have like three or four days
with these views and all the views and
you have like a polluted part on your
own create method right so something
that you can do you're gonna say that
this toolbar
it's gonna be lazy which is something
I'm from Spain and I love this name so
you can call it by lazy and by lazy what
allows you to do is you're just when the
first time and it's an inferred
parameters and it needs to know that
it's a toolbar so we'll do this we'll
remove this and then we'll execute it
and what this lazy closure is going to
do is going to allow you to in that
moment the first time that someone is
going to access that property the land
I'm said lazy is gonna be initialized
and that's who's going to be cold so it
doesn't matter when this is called in
your code you know that the first time
that the problem is gonna be accessed
that is going to be initialized so this
is a simple way to make it simpler when
you define views or other objects to
just delegate when this is going to be
initialized to to a lazy to a lazy
lambda so now we have this we have a
toolbar and we have a title so you're
going to do the same thing with a list
that we have and we're going to start to
add some content to it so this is a list
view and I think should be called fears
list go and then we also have a loading
spinner like the one using on the on
screen so we're gonna call this a
progress bar and then we can infer this
is a progress bar and should be called
low thing I think yeah so now we haven't
accessed any of these properties yet but
when this is going to be cold we will
get the value there's also another way
to initialize things in a column class
and you can have something let's say
that we have the adapter for for this
for this list view and it's a beers
adapter and it's telling me hey you
still have an initialized this so what
we wanna do is inside the init log
you can then initialize anything for
that class yes yeah so this is a Java
call from the android framework so
therefore this it needs to tell you you
need to tell him what it is there is a
way and we'll see later you can make in
fix functions sorry yeah
sorry refight type parameters which
would be something if we could write
because right here refight and i saw an
example later how but it's a good point
and I think it in a few moments you'll
see an example of how you can get rid of
it so inside this adapter
these are initialized but since this
doesn't doesn't it's not depending of
the lifecycle of and we can call and
initialize it inside them inside this we
have a beast a list of peers and we just
going to call an empty list to answer
the end the question of the mutable or
immutable list if you go inside the
collections class of cotton you have an
empty list and this is a list if you
continue looking into it it will tell
you that it is a mutable list so unless
you go and call it's actually a mutable
is this is what you will get so now
we've defined our adapter and this is
defined when the class is instantiated
since we don't depend on the lifecycle
we are good to go and what we could do
now is we have this list and you can say
adapter equals adapter market but this
is a good example of a ListView that you
can have multiple methods to cold to the
same object so you can have you know I
want to set a I wanna add a header and I
want to add a food
you then I want to add header view and
all these things the more things you are
referencing on the same class
it gets very repetitive so there's
something you can do you can have with
and this view and with this operator you
can still do the same but with the
returns the type you're putting inside
the closure so you have you can do
adapter equals adapter and this
elaborate is not the adapter from the we
declare over here is the adapter from
the actual this view so we're accessing
the properties inside the object
reference inside the with closure by
adding this so then it's nice so you can
now do add header and then at footer so
it just gets a little nicer than having
to add all the time the the the
preference of the list object that we're
defining and then yeah it's not gonna do
much but now this is a way to make it
nicer just at least if it's nicer to the
eye make sense simple right yes yeah so
this adapter you can have a proper name
now let's call it list adapter and then
this is gonna say hey what are you
talking about listed at and therefore
they start out there being the same name
you will have issues but in this case
just have a different name and that that
would be so so far is very this is
nothing is just a simple screen so we're
going to try to add some data to it
so for make it just for this icon making
it simple inside the the adapter we just
gonna have well that's passing from from
the activity
let me find my cheat sheet we just wanna
have a list of let's call it beers list
and this is a list for now we're gonna
make it simple it's just a list of
strings and it is going to be a list of
I'm gonna pass in for example I don't
know smarter smarter based and I so ever
since I moved to Belgium I just I fell
in love with Belgium beer so I'm I
really really enjoy let's have my
personal preference and then since
grandpa also needs to drink they just
give him a pinch him so he's happy and
yeah I would love to is gonna have you
know beers list and right now we're not
doing anything with view so we're gonna
have to go and fix that because the
progress while it's still there so
you're gonna hear just make it simple
and say the progress bar should be
invisible just call it making a bit
nicer we're gonna go show beers and then
this does progress account in loading
yeah so call it so he's gonna hide the
loading view
we're gonna hide it and then the last
we're just gonna shop it that's it
so inside the adapter we have this Rovio
it was the example since this get view
if using if you used to do base
elaborate in Android you would have what
if the view is already in fairly before
I'll need to declare it therefore you
just do if this is null then I would
call this layer inflator and add it
otherwise this will be executed
therefore we don't do anything with it
and then we'll have a text color coral
be your name and this is will be fun by
ID this should be a textview and i just
want to get is call it peer item level
and your item level and we just gonna
say this guy has a text twist the beer
the name of the beer and it's nothing
more than that here this is already a
string so this is peer done so now we're
gonna do if you save the result is gonna
be an amazing hopefully an amazing list
of beers and the jupiler
and we can continue
come on cat
I like this was pens when you build
something and it's time to install and
if it crashes and then it's embarrassing
or it works
yay forget about the design layout and
so on but at least we have the list of
beers that's it very simple but what can
we do with this list normally if you're
on if you're handling working on
Androids
oppa the normal thing to do now if you
say we want to use you know a click
listener on our adapter then we'll have
to come come here and then declare you
know the clan interface this is
relational and then this listener would
have if it's in Java we'll have a beer
click and this would return the string
and then we'll have to pass in the
listener as a reference inside the
adapter and call it from the activity
and so on and so forth and this is okay
if you don't want to if you need access
to anything happening in the activity
itself but if it is it came delete
complicated
so in code then we can use numbers and
something we could do we can declare a
lambda here which is going to take
string as a parameter as gonna return
unit and we can then whenever we want to
do something with this item we can say
well Rob you set and click listener
listener and we gonna call idea if we
had a listener before we have to do
listener dot dot a dot and that would be
it but if we have the lambda we can
simply come and call the lambda so the
adapter doesn't know anything about the
implementation of what the lamb is
actually doing is a setting these
parameters as it is and then when we
come to the be raptor now it's going to
tell us say I need another parameter so
what are you going to do about this and
we can say well was then the item click
what we're going to do with this since
this is a lambda the only thing we want
is we're gonna pass you in it
year and what I want you to do is to
that's just so a toast with what the vir
name is so pass the parameter from the
lambda and then is a toast and don't
forget to show it when I was doing a
demo once and I forgot to put the show
after the toast I spent like five
minutes looking like what the hell isn't
working I hope I'm not the only one with
that case but yeah and then just for
making it nice you can say do the list
of beers is toast is a function on under
that will display the name of the beer
this test is a simple widget that
appears on-screen and you can show a
text like a alert message on any website
for example it's a pop-up yeah that was
what I was looking for thanks so if this
is okay when when we call this and we
type of the item you should now come and
hopefully no damn it live demos let's
see what have we done wrong
interesting let's say this open live
here see what I'm doing
this is a beer string setting cleaner we
need to know ah of course I'm a moron
you hadn't passing the actual item it's
not gonna do anything did you trust
instant run I'll try out well I'll set
it in and see if it works my experience
haven't been very good but maybe it's me
yeah so um that's just a simple way to
delegate whatever happens in that lambda
you can have it in your activity and
then is a bit simpler and nicer to read
if you really like that so that's that's
lambdas you can do this since this is
the last parameter of the of the lambda
we could do even go a bit further and we
can then just simply have this insight
and it will still work
since looks like black magic but
whenever the lambda is the last
parameter
it has property that you're passing in a
class you can just open a closure at the
end of the declaration and the compiler
will know that this is the lambda you're
referencing as the last item so it also
likes makes it a bit nicer and more
clear to terrain well since we need this
parameter coming in giving this
yes you could do something you could
reference to the actual method as well
yeah I don't know what you are but I'm
saying yes yeah there you go yes Indiana
sees as a function you can define it
yourself you can just pass in even you
can have the anonymous class and passing
the method as well cool so this is this
is lambdas there is the overhead of
every Lander that you would show see
every lambda that is reference it would
create in animals class you can come
here and check the actual Java class
this device could and in Java class you
would use we find the missile laughter
exactly
so it would generate this anonymous
class inside your declaration of the
adapter and then it would do whatever it
has to do so obviously you have these
overheads here and we'll find a way
later to make it a bit nicer too to try
to the result in Java code cool
yeah that's a good question somebody
asked that before I don't know I will
try later with a JDK eight projects is
this is Android we cannot use the JDK 8
if we need to target all the resident of
the device of Android but there's a I
have a project that I will take a look
when we they compiled some inline
functions because I'm also I don't I
don't know the answer to it I'd be nice
to see because if he's using the dynamic
invoke of IRA would be easier than just
having to copy and create a Java class
but good question I'll remember it
hopefully it's not just showed again so
will you get rid of this so think he
talked about to tell you a bit about
extension functions so we're going to do
something with that as well inside this
yeah this activity we have these toast
methods and this toast if every time you
have to show a snack bar or show a
pop-up show a toast is something like
this it just gets very boring it'd be
nicer if we could have an extension
function that would be the toast now
well to put the extension function I
don't know the real answer to it and
I've seen different ways to do that in
my case I like to put the extension
functions and having a reference in the
name so if we have a file is called
activity extensions and then this is
what I would like what I would pull all
the extension functions for the activity
just because I don't wanna create a
utils class with a hundreds of things
inside I'd rather have except rated by
by file and having a bit of the name of
the domain in inside of that so how will
we go about it what we can do is now to
activity and then we're gonna choose the
name of the extension function we're
gonna call it toast and then we're gonna
have a message that is a string and then
we're gonna have a length that it's
going to be about which is an end and
it's going to be toast
it's gonna be toast long and then what
you're gonna get is well toast the
reason why you have to the show
afterwards is because we have to do this
so we're gonna make a text with this
context since this is going to be inside
the activity with I need to reference
any other context this would be inside
the function itself they have a message
we have a length and then there's a
keyboard we can either do
OOP you can do toaster Cho and then that
will do it already but we have this nice
extension that says also that allows you
to call something else we savages did so
you can also do it
punch show dot show so that is also as
the keyword says you can add more stuff
the end of article you could go on and
on and start doing more also and also
and also you don't have to do it but for
things like this when you're dressing
referencing twice the same the same
property it it does the trick so how do
we use this now we have this toast
method here and since we are already
inside an activity we just wanted to
toast beer now we done since this is
already the extension function and has a
predefined a default length for the
message the other thing we need to do is
that we can of course if you want we can
change the length and we're going to
pass it to be toast short and it is the
same but let's see and then see if you
have an extension function you can
simply go under rid of this other
function and which is to toast beer and
we can get rid of this and then if I do
probably know something wrong stop
network
yay and we can get rid of this reference
we don't need it so you can just do this
and that's it so that's a very simple
example of an extension function and you
can do this with absolutely everything
well somebody else before and I don't
know if you compile this they go so
creates a final class that would have
the reference to ta titi whenever you
call toast it will tend to a halt and of
passing in so it's obviously yes it's a
performance issue
I mean performance if you're developing
rockets for the NASA but there is a
performance there so it it exists that's
some weird
the methods like what would you extend
let's see can you do mmm completely
Chanel thought mmm
whatever can you do that
what does it say whatever must have a
body that's good to know yeah you could
do something like this where are you
yes like Samuel joules occur yourself or
something exists in the platform what do
you mean I'm very stupid sorry but I
don't think I understand your question
good question I hate this question now
let me see I don't know we can come over
and we'll take it we'll take a look
because I want to be late with the rest
and now is a very real way to deviate a
question but calm down I will take a
look later because I'm not sure it would
be nice if you can that's for sure but
I'm not sure
yeah yeah it's the same it is actually
the same I didn't wanted to show the
also keyword so you know like that
actually exists but yeah alright you
don't need to have these also to just
call it so you could do something
different here you have reference to
anything that is inside your context so
you could call more stuff in there this
also for example is useful if you're
using a navigation drawer in Android
that when you click on any of the items
you want the driver to close and then
execute the function you could use that
for that so you could call close and
also do something else so you can do it
in one in one line but yes inside this
show they also closure you would have
access to anything in the same context
where your where your expression is
being cold cool what as we do in terms
of we as we show this lambda with them
with extent with the animals class and
and and how its performance when I
change to a normal column project to to
talk about inline functions so Ln
functions is a way that you can avoid
the overhead of having to reference
anonymous classes with static methods in
every piece of your of your code so
we're gonna do a function they're not
going to print stuff and that function
is gonna take lambda is called Opie and
this is gonna get unit and this is going
to print things on screen it's going to
print
first line then is gonna call the lambda
and then it's going to call prints line
it's gonna be the second line and then
from our function we're going to do
we're gonna say print stuff I'm inside
this my prints hey so if we run this if
we ever run this they go ah can you see
this X over here this says you know
first line then the lambda is called and
then the second line is called if we
look inside the the generated by code
and we look what's going on and I'm just
gonna do something like this so he can
keep reference to it
javis not yes forget about the errors
and so on I just wanted to show that
he's gonna invoke so the main he's gonna
call the print stuff then pin stuff is
gonna invoke testing which is he's gonna
call the operation it's gonna pass the
function we can do something different
and we can say that this is function is
in line so what this is going to do is
instead of reference in the classes and
the method is going to simply copy the
content of the function inside so if we
look now at the byte code that's
generated and we do
another class Angelica in nine Oh No and
we compare vertically if we look at the
main function of the inliner they're not
inland you will see that in the inline
function the inland version the code of
the actual functional recalling is being
copied inside the main or inside the
function that is calling it so we don't
have to worry about the performance of
having you know another class and the
reference to it
the downside for is is if we use this
function this inline function somewhere
else you will also go and copy the code
so it can be problematic in the long
term if we're this everything is in line
and we use the same functions everywhere
you're going to be copying the same
thing so you want to keep your your a
line function and short and short and
sweet as possible so you don't have the
issues of copying all the codes every
time that the that is is that is as
reference but then other things that we
can do if for whatever reason we want to
keep a reference to this to this lambda
and we want to do something with it
that's not what I wanted so sorry um the
compiler will only tell you that is a
good idea to inline functions if they to
have a lambda which is when you get a
performance improvement in this case
gonna tell you there's a performance
impact if you can see bigger you say
something out great but basically says
performance a plug of inlining the
public inline fun defined role in
landing works best for function with
lambda parameters so the benefit of
aligning a function is only beneficial
that's probably said if you there is a
lambda parameter in the function if you
don't have it the comparator will tell
you what you don't really need to to do
any of this
from calling us I'm not sure yeah with
land as well
I know if you look at the defend the to
bite cause orders the vodka was
different yeah yeah that's a very good
question I don't know the answer to that
we can look at it if anyone knows sorry
so the question is if the it doesn't the
JVM already the compiler to do that for
you in lining those functions even
though you don't occur in going to be in
line and the answer that I have is that
I don't know so if someone knows yeah
could you know better than to JVM that's
a very profound question for 12
I don't know we get if you want to look
later we can take a look but I have I
don't know the answer to the question of
sorry what else can we do when the gun
or something like with this with this
with this screen and something we could
do is instead of just showing a toast we
could do a second activity with the
result of of that
so just to do it very quickly
it's going to create a function then
it's going to take beer as a string and
then we're going to do if we let's see
if the Whizzer is nice to us today I'm
going to create a new activity we're
going to be empty
I've compared peers call it peer detail
we don't need the layout cut then go so
now we have a second activity and then
ideas to open from the first we open the
second one I know this is rocket science
and very complicated but bear with me so
why would normally do we have this start
activity and then we will declare the
intent and then it will be this and then
it will be peer detail so this is how
you reference the java class from
colleen and we show that before i know
you have this double dots class of java
so at this time what we would do if
everything works we will open the second
activity from the from the list it's
beautiful but you get the point the
issue with this is in java there was
this or there was a trend to have static
fills in your static classes inside your
activity that would be the reference to
it when you would open so if you have
this you would have a static class and
then a static class who have a method
called open and then you will just do be
a detail dot open and then you don't
have to apply the start activity blah
blah blah
since colleen doesn't have doesn't have
notion of static fields they have
something different which is called a
companion object so ideally what we want
to do is open this activity from
somewhere else
so we pass in the context
and then we're gonna do contacts dot
start activity and then we again will
agree at the intent with context and
pier detail so we can hide this from
here but I'm gonna call this let's call
it helper for finding in the name I
really would like to do is something
like this we would like to do beer
detail dot open and then it will open
we could even passing parameters but it
would open and we'll do this this is
what we're aiming for
but this doesn't exist because this
object as you see before it doesn't have
the reference to it so we have to help
her and then open but then this will
create a different class for it we can
do better than that and if you inside
this object we say this is a companion
object then we can do a little dot open
and it was the similarity to having a
static field a static class that does
this you can only have one combined
object or class you can have more than
one oops so if we try to define a second
one with a different name it will tell
you there's only one company optical
outer class so you can have different
functions inside that object but you can
only have one companion object but this
from Java you cannot call this so if we
create a new activity it's going to be
empty and we want this to be in Java
main if we want to be a detail dot
there's nothing egss access to the
helper class and then has the open so we
have to do
define all the different parts for for
that reference what we can do however is
inside this function we can have the
annotation that is JVM static so this is
telling the compiler with that from Java
you should be able to call this method
as a static method so if we go into this
activity we can now come in and remove
it and then it realizes that it is a
static field so this is just another
example of different JVM annotation so
we can see and how we can do the
interoperability from Java to column
does that make sense
are you sleeping already yes I think it
will complain if you don't have a name
it wouldn't complain because in JVM it
will company if he's not a companion
object for sure yes so if he's a
companion object you can just wait you
only need to write it now he would say
it's not applicable inside file I think
it's just in history reference to the
actual class that you want to to call it
from sweet so we have a good'n time T we
have this first interaction to the
object the supporting column and this
would be the equivalent of a singleton
part and somebody was asking about it
before the the way that we use the
singleton we execute a single pattern in
column is by using the object keyword so
there's no need for you to go and do the
whole dance of the get an instant and
then check if ins and is null and then
assign the ins and and so on and so
forth we're just having an object we
already have it so let's say we want to
make this up a bit more real I'm gonna
have a beers repository
and we're gonna have an interface that
is repository and this has this has a
function that's us get all and it's
going to return a list of peers let's
just define a data class like the one we
saw before
that's called beer and this data class
has let's say a name which is a string
and a boolean that save is a Trappist or
not right so we have this and then we
can also declare the object there's a
beers don't why the names that I'm using
have a beers repository and then we just
want this to implement methods and this
is we're gonna get instead of the list
we have in this adapter we define it
here so this thing is gonna be even a
person an empty list and the repository
is gonna have a list of videos and is
gonna return the beer list so there
should be a beer and then we just gonna
create beer which is a trapeze so this
is this is obviously a trapeze then we
have another that is it appears we have
the symbol Nardo's
as an awesome beer but is not a trapeze
and then Jupiter that we won't talk
about it
cool so this is a very simple repository
but we don't share with you subject
declaration is that every time you call
this thing you can be sure that there's
no way that you can have two of multiple
instances of the same of the same class
so you just to make it a bit nicer and
tweet better for later there's gonna do
a beers presenter so this presenter is
gonna have I'm just working a bit more
of code so we can use it later for the
rest of the of the examples so you're
gonna have just a beer
typical view a multi presenter I can
tell you let's say for for this we
assume you're gonna have when we have a
list of beers you have this we have also
a narrower we're gonna have an exception
I want it to be exception and then I'm
gonna have the OPA a place in the
presenter that takes a view piece view
and also takes a repository and then we
have a simple functional sash so beers
and it's gonna go the repository get all
I simply gonna do all the years is going
to view dot of beers
oh cool and then just last thing missing
we're gonna create the presenter and
he's gonna take a test
let's put this here so this tight plus
the repository and now we just want to
implement the interface increment the
interface and now we have more of a
video if it is so this is an error we
don't wanna do anything for now and here
we just have the list adapter has a very
convenient method called
update beers with beers carbonate to
change the implementation of the adapter
so we show the beers here we can do
presenter thought show it's almost on
its own awesome and then in the what am
I missing
this is this this should be a list of
beers these also gets a little peer so
there's going to be a dot and get item
why don't you like me now
they still think the string what is this
refining a string I'll need to aah
moron sorry there you go so we have this
the text was gonna be via the name and
this is gonna send the beer go be good
so far yeah fine so if you look at the
back to the activity code again if we
look at how we declare this repository
we don't need to if it was a normal
class we will have this we have this
parenthesis here that would say hey you
need to you need to initialize this
being a repository we don't need to
so because we cannot invoke we cannot
invoke it as a function so the only
thing we have to do is just call this
and then that would be that will be you
don't have to do any further
clarification or any further action to
take care that this is a singleton let's
see if it runs obviously doesn't run the
Papa caste what this is not here all
right
definitely a theory of this we don't
need this
oh yay
so that's the idea behind the singleton
we don't need to declare anything is
echoing an object and then we have
everything that we need for to get it up
and running what else can we do there is
I think II talked about enums in um
classes before so Colleen has something
which is a bit more a bit more powerful
than enums and it's called sealed
classes and sealed classes are able are
they say in um that are able to hold a
bit more business logic that when an
enum would have the the example that I'm
going to use for this is I'm going to
declare silly classes as view States
which is the state of the screen as you
see like this so we're gonna have three
different types of states we're gonna
have I'm gonna put it just here for the
sake of convenience so we're gonna have
something called a sealed class and this
sealed class is view state and this
class can be a loading States which is
the first thing we'll see when when we
open the the application we have a data
class that is an error and this error
has an exception exception and then up
then we can have a imagine this would be
in a proper application with different
screens you have this view states all
the stage with have all the screens
would have a loathing and an arrow state
and then you can have a more specific
one for the one you're looking at so it
will have a sealed class called beers
you state that inherits from view state
and then we're gonna call we are have a
data class
go beers that has a reference to a list
of years to create this when doing is
beer voila
as you can see we can combine inside the
seal class we can combine objects as
single terms we can complete we can have
data classes we can have classes so
inside that sea glass you could have a
lot of different things and the way this
makes sense is if we do insert the fear
we're going to do something called
render and rendering is going to get a
state and there is a bit state so
instead of having those different
methods inside our presenter view
implementation what we're going to do
test is going to render and we can do a
new peers view state of all so the idea
was to have this as a new state thought
loathing and what am I missing here ah
damn it
so it's peers data
oh yeah I forgot to what this is a
Pierce boosted now you're happy cool
the idea is we can make it a bit more
sequentially what the activity is doing
we have you know a render the loading
and then rendering that the beers are
here just to show it what we can do here
we just gonna put put him to sleep for a
bit and then return the list and this is
now the the proper or what the see
classes are more useful for we have this
now real just bear with me a sec bring
you down here so we have this render and
render takes a scene class as a property
what we can do is we can call the
operating one state and then hope and
then we can say something nicer like if
the state is loading sorry if the state
is loading then I want you to show the
loading screen if the view state is an
error then I want you to go and call the
on error method and if the beef state it
is a bearded state appears then and this
is a nice part you can to show beers and
you can reference what's inside the
viewstate class and its component so it
will know that is we add this inside the
parameter
so this say this says oh I do a smart
cast to the actual class that you're
passing in and that is why you can do
something like this so if your States
has an exception you can do State DOT
exception if he's logging and have some
other parameters you can do that as well
so it's just a very simple this is not a
few state and that's really complaining
there you go so this is a way to show
nicer return types and do a one over all
that so as opposed to have we have
before a lot of different methods from
the presenter or the view that are
calling each other and making it bigger
you can simply have one single one and
have this one close in terms of
conventions people who like the one at
the end all the ones prefer to have it
as a separate I know that Google
released the Colleen style guy it's a
few days back and they use one as a new
line that's more of a preference but it
looks nice when you read it you don't
have to read this you just read whatever
comes in and you can do so it's nicer to
to read then another things so now we
just compute for a sec of completion
they just get these on so we just copy
this this is gonna be visible this is
gonna hide and we're gonna toast the
state
exception dot nice message test for it
I don't know what I did but just know
what you should do
oh is this TV great what did we do here
and they're loading it all was that way
too much let's like this and forget
about it you got 12 minutes I wanted to
show tune to more things that are it
went well until 12 minutes before the
end that wasn't that bad I'll forget
about it so I think is it the adapter
notify well doesn't matter I want to
show you two new things we discussed the
actual late in his initiation and lazy
initialization and there is a new
another step that we can do with that
which is the property delegation so what
you can do that with that is overwrite
the way that getters and setters are
being passed into to that property so a
very example would be imagine this
repository has a violet check if it's
online or not and this is a boolean and
we're gonna initialize this we would
have to initialize this in the
constructor but you can do something
different you can say I want this to be
delegated to a network delegate and if
we do that we will ask us to create we
have this read-only property there you
go so essentially what we're doing here
is you can override the way that those
properties and the values the value to
the property
is being is being received so imagine if
you have here a network connector or
network manager or what not you could
check that out and you can modify the
value based on this you could do you
know in this case we committin always
true which is for the sake of the
example is very stupid but you get the
point that you could have different
dependencies inside this delegate to
delegate the value on the return of the
value to what you toward you will really
need but you can take this a bit further
and you can use something a bit nicer
than this so imagine you have this
presenter that we have here now the
presenter and in a normal on the wall
you would use a dependent dependency
injection framework that will pass in
that presenter but we can do we can
we're going to be nice if you could do
something like this and then get present
as opposed to creating this presenter
here I'm having to do all the dance if
we could just do this and then the
presenter would be injected so we can do
something like that yeah yes yeah
yes you can passing your own delegates
if you wanted to but you will have to
reference this delegate somewhere else
so you will have to wait so in the end
this is just a if it wasn't a generic
abuddin it was a propyl class outside
this thing it would be the same you can
have imagine this is a class and you
have sorry and you have this property
passed in you can have this ball is
online it's a boolean and then you can
say it's a repository and is online is
online by network let me see so you put
it here
mm-hmm
let me find an example and I'll show it
to you but yes you can so as opposed to
having created inside the class you can
pass it as a reference as a property in
the constructor and then you could just
mock that up and then enable the leg it
wouldn't be using it
let me see you have the example closer
but the outcome if you're gonna come
down later I'll show you how how you can
do that but you can do the property you
can do a sum method delegation the same
way so you don't have to say I don't
care who passes this who passes is in I
just want to do it in a different way
I the same name yeah yeah
so they present exactly sorry so let's
do this in a way we can create this call
it here it's going to create a file that
is an injector and then we're just gonna
have a single a single turn of the
injector but I'm gonna just because it's
what's do it faster so this would be the
idea behind behind that instead of we
can have this read-only property and
your injector can be satisfied that way
we can have this custom getter and
custom setter and that is what we will
be passed in when you do the injection
so since you know that this is only one
instead of this you need to be aware
that you will be creating more than one
instance of this presenter but the nice
thing is you will only have you could do
something like this so you do get vias
presenter and then that's how you would
inject how you use properly delegation
to inject to inject values to that host
activity for example and then the last
thing I wanted to chat to touch is going
to be quickly but I think it's it's
worth mentioning are the co-routines so
co-routines is not experimental anymore
cities now since 1.2 it will be it will
be an unstable it's a way to have
different to play with driving plain
simple to play with driving on cotton so
if you're another engineer and you've
done you know a syntax called loaders
and you have our X our two to thread in
as well
there's a different there's a new way
called coal things that make things very
very simple so just for the sake of
doing it easier I'm going to show you
the example and I have two tons of
changes so they just reset all this so
but we can do with coroutines it would
be that you get to a declaration of
threading in a very liking for the
different steps so the different key
words I will I will tell you what it is
all from here so this this is an same
method we have a representative showing
beers what's going on here is we have
this view render is happening in the UI
thread this is happening in a background
thread and this is happening also in a
UI thread
so by this launch key words from
co-routines library what we can do is we
telling hey we're gonna launch a call
routine inside these methods and you
have the keyword async if you're
familiar with seashell we have the async
await the carotenes is based upon up on
that and this is telling you I want to
run whatever is inside this inside this
lambda is going to be async and I'm
going to wait for it so this means that
when you execute this code is going to
do this thing is going to wait for this
to finish and there's going to execute
the next step but this is the simplest
way to have this is a simple example of
background threading on on on column
this get B's use case that you have here
is something that didn't touch upon
because I was running out of time but
this is the operator
it is overloading the operator the
invoke operator so you can say I declare
this a simple it doesn't need to be open
this is a simple class
that it's mimicking that what a use case
would be if you hold a clean
architecture button but essentially
whenever you execute when you invoke
this function I want something to happen
so you can do operate or for an invoke
and then whatever happens inside it will
happen when you call it so when you come
to this and you say get beers use case
is actually calling the invoke function
inside they get beers use case class
which here is just going to the
repository I'm bringing in all the beers
back so this is a very simple way to use
with reading the output the yeah yeah
yeah
so if you don't want to execute the core
routine you can do this and then you
have it will be eight the third sorry it
will be a the third call to that so
until you go and call a wait this is not
going to execute so in this case if we
execute this code it will just do
loathing and it will try to do this but
there's no value here so it would crash
if you have a different state you can
have loading again and it will never
execute anything here because you have
just a reference to the core routine by
not doing anything with it so just to
change the name you will get something
called a job so this job you can cancel
these are just different methods you
have inside the collet in itself you can
cancel you can wait for it you can then
lock it you can delay it this still
different methods you have on top of a
core routine but it's a very where is a
very simple way to declare different
steps to those things in a very
synchronous asynchronous way inside the
Karoo teens library there is a very very
extensive guide about it and explains
how can you use them in parallel
sequentially how do you have you do
error handling and essentially it's a
very powerful tool I'm using it in
production on the on our Android app and
I haven't had any issues with it is a
very lightweight way to declare a
synchronous trunk as synchronous calls
that I weigh and I was so very simple to
test and to and to debug so if you're
interested tarek at the in the library
the the guides how to work with it and
time is up I'm sorry I was slower than I
thought it would be but I hope you got
something from Colin how can you
actually and practically use it on on an
Android app I'm gonna be around have any
questions I'm happy to reply to them and
if there's a new session soon and you're
late
I'm sorry for it thank you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>