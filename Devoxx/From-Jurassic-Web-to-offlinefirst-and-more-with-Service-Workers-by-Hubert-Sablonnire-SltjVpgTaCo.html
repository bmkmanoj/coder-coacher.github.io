<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>From Jurassic Web to offline-first and more with Service Workers by Hubert Sablonnière | Coder Coacher - Coaching Coders</title><meta content="From Jurassic Web to offline-first and more with Service Workers by Hubert Sablonnière - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Devoxx/">Devoxx</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>From Jurassic Web to offline-first and more with Service Workers by Hubert Sablonnière</b></h2><h5 class="post__date">2015-11-13</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/SltjVpgTaCo" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hi everyone I'm in Barcelona I'm a web
developer at in Atkins aya in lil and
today I want to talk about Jurassic Park
I love this movie I can still hear the
t-rex in my nightmares and when it came
out in 93 I was still a bit young so
that's why I went to see it with my
parents on a Saturday afternoon and back
then when you wanted informations about
the movie the pitch the runtime the
showtimes you had to go buy a newspaper
so my parents and I had to take a round
trip using the car to the news dinner
going there buying the newspaper coming
back it took around 20 minutes and it
cost us five francs 22 years later the
web has completely changed we are
connected and I'm still movie addict so
every week I visit my favorite website
to to check the movies in my local area
what are the showtimes etc and when I do
this with my web browser I'm doing
around 21 trips with the server and are
obviously using the internet and it
takes around one second with a good a
good desktop connection and it costs me
nothing so we could easily conclude the
web is far better than a news dinner but
in reality it's it's not that simple I
mean back in 93 when my parents had to
decide it to go watch another movie the
same week they did not need to go back
to the news dinner the the access to the
information is instant because they know
the business rule i I don't know in
Belgium or any anywhere else but in
France the showtimes are valid from
Wednesday morning to choose the evening
so once you have the newspaper you
already have the information
and I think it would good ole times
right right now when I go again visit a
website about showtimes the same week
I'm doing a bunch of round trips with
the server round trips for HTTP are not
the only one I also have to to do some
radio if i'm on mobile to do some dns
tcp TLS etc so basically i think it's
about i think it's exactly the same as
going back to the news dealer just to
buy the same newspaper again or maybe
just to check that the informations are
still relevant so i often hear math it's
2007 15 we all connected the internet of
things man you know smartwatches smart
phone smart fridges well i don't agree
at all with that when you say that
you're completely forgot about Murphy's
Law and people saying that are the same
that code stuff like this
so yes i have a 4g plan I have a fibre
broadband in my apartment but real life
is not simple as airplane mode versus
full internet speed actually having no
connection is quick and simple please
server give me that website no you have
no connection it's it's really simple
the problem is when my laptop my mobile
are saying hey you have signal you have
Wi-Fi but I don't and I don't stress
trust them anymore there there's a lot
of reasons and cases where they lie to
me and I i suffer from my connectivity
when i go on holiday I I think you do
the same sometimes I use netflix and I
completely burst my data allowance and
my phone says 4g no problem but I'm more
in there for 56k modem error you know so
the other day I was doing a performance
audit for client and around 12-15 I am
like a guys what's going on with the
what and the Wi-Fi oh yes yeah we forgot
to tell you just behind this wall
there's the kitchen and you know during
lunch people cannot wanna heat so they
use the microwave and now you're screwed
it's true sorry and then there's the
classic Bauer moment when you are with
some friends you need Wikipedia to prove
their they are wrong and you're right
it's always in those cases that you have
one or two bars of signals but nothing
loads who he is here reads RSS feeds
yeah so like me when I'm reading some
RSS feeds and the only free spot is
often the one that it's really too far
from the
the Wi-Fi you know it drives me really
really crazy because you need to to
optimize this time you know so actually
I call my mobile plan Schrodinger's plan
the quanta can fast slow mobile plan we
need to consider everyone as this man
especially the users of the web
applications we are building all of them
don't have 4g of fiber they say
sometimes live in areas and countries
where it doesn't exist and if they are
lucky enough to have these they are
still getting slapped by murphy's law
murphy's law every day so our users wait
waste too much time waiting for white
screens to become awesome or worst they
don't have a connection at all and it's
the Jurassic part of effect it also
works with firefox and just have to be a
little AB some imagination you know to
remember the letter X a good way to
resolve that is to use offline first
it's a really really interesting pattern
and the two words are really important
so the goal is not to focus on people we
don't have a connection at all the focus
is that in the first time you need to
consider that your user is offline and
you will display all the information you
can without server and then after that
you can enhance the display with
additional informations from the server
there's a lot of information on their
website it's really interesting and
actually you you really need to consider
that every user you have subscribed shut
up shredding your plan and that network
connectivity is a feature like any other
gps location touch webcam you already
test if the user has or has not these
features so let's do the same
offline first is here to help your users
their batteries their data plan but also
your servers and your bandwidth and we
don't really think about that but when
my laptop says one hundred percent Wi-Fi
and my modem at as the perfect speed
access to the Internet the website I'm
visiting still needs to load and
recently anyone uses pocket recently
pocket went down and their website was
completely unusable but then native a I
OS app and Android app was working great
in offline mode so it's exactly thanks
to that kind of example that people tend
to believe that a native app is better
than a web app connectivity push
notifications OS integrations and of
course performance and i love the web so
it really bothers me to display that
kind of information and it's not because
native can do better that it always does
there's a lot of anti-patterns and then
there's also good examples the sweeter
up for for example you open the app it
displays the last wit you visited
instantly really fast and while it
you're reading something it goes to the
server to check if there's anything new
if there are anything new it's okay it
will load please do not scroll and
disturb the user just display
something's new just up but don't push
it into his face and if there's nothing
new it's okay you can still use the app
so nothing's nothing breaks so since
2009 we can try to tackle offline first
on the web using something called app
cache it's in the html5 spec and today
the support is pretty good on modern web
site
so how does appcache works has anyone
ever tried yeah you're still alive well
done so AB cash you reference manifest
in your HTML file and in that manifest
you have to put a special adder cache
manifest you also put a version a
version number will see that just after
and there's three sections so the first
one is cash you list everything you
really need in your application it's the
shell HTML CSS images etc then you have
the network part here you list
everything that needs the network but if
you forget to list something or if you
forget to put a star it won't work so by
using this technology the one way every
request that tries to go to the server
will fail so don't forget the Tsar or
through specifically this step and then
there's a fallback section so for
example here if I can't manage to
retrieve list HTML I can display no
connection HTML instead so on the first
load classic loading it goes from the
from the network it displays on the page
and while you you're reading the website
the browser as stored all the files
listed in cash etc in the app cache and
on all the second clothes it goes
instantly from the app cache no network
nas server access it's the quickest way
you can display page
awesome right but if I visit again and
it comes from the app cache how can i
display something new and I how can i
update that it's strange so imagine I
modify a CSS file the browser while it
displaying the information from the
cache is actually asking the network the
server do you have something new but
instead of saying is the CSS new is the
Jays new etc it just say yeah you know
the manifest here as it changed okay so
that's why you really have to put
something like a version number at to
increment it to specify that a file has
change that your truck or starting to to
see the problems with that technology so
if you're real developer you'll use some
tools adding some hashes as comments or
in the file names so the network side
yes i have a new manifest okay I'm
dumping everything in the garbage and
I'm redownloading everything and I mean
everything if you have the good adders
you want maybe have too much data in the
bandwidth but you'll still do a lot of
round trips so you feel like an idiot
because the app cache as the next
version of your web page but you don't
the page is still on version 1 and at
first it seems really strange I was like
what the hell and actually it's quite
logical and if one of your users is
reading something filling out the form
you really need not to interrupt them
they are working they're concentrated so
don't bother them with something at
least do it with some code so in the app
cache you can listen for an event called
update ready and if you receive that
event if the callback is called
you can maybe ask the user hey I have a
new version do you want to reload the
page or something the app cache is very
declarative so you can't really program
it and you can't list all the files that
are in the in the app cache you can't
add one file without redownloading
everything eat them for update and
delete and I cash it actually it's the
only technology you need to display a
page without a connection but it's not
the technology you deserve that's why
you can read a really really good
article about app cache and in the
conclusion Jake Archibald as advisors to
use it at its strict minimum and to rely
on other storage API is for the rest and
it's exactly what deaf dogs does someone
here uses dead dogs it's a great website
instantly fast documentation but a lot
of stuff get HTML Express angular go etc
so it uses the app cache for the website
shell and then the local storage for the
list of the different documentation and
the index DB for the contents of the
documentation so with that you have an
an offline first web app website that
displays documentation at the moment you
need it without waiting whether you have
a good connection a bad connection or no
connection at all confute Confucius here
said
okay it's exactly what happened to app
cache the spec was written at the time
we're writing api's api's were written
with a high-level aspect so they try to
resolve one problem with a simple
solution and right now since the
extensible web manifesto a few years ago
we start to see more low-level API and
it's like take the fish take the word
you'll have to work to to get your fish
but you'll be able to do more I to
accomplish some some more stuff so
that's exactly how the serviceworker
spec was written and started it's
actually this it actually describes an
API a really low-level API that answers
bad connection and offline situation but
it also opens doors to reduce the gap
between mobile and web native and web on
mobile a lot of people are working on
that specification mozilla google
samsung etc and actually a service
worker it's basically a programmable
proxy inside your navigator that
intercept all the requests between your
page and the network and it as is on
cash okay so let's do this again you
have your pages okay they come from the
network classic you add a proxy which is
on the client side ooh scary and you
program it with JavaScript super scary
with this you intercept all the requests
that goes to the network stylesheets
scripts images ajax requests etc you can
answer from the server you can create
your
responses but you also can response from
a dedicated cash and you're in control
you can put whatever you want in it and
read when you want so
it only works with HTTPS oh it actually
it's actually good news because you
control all the pages of your origin so
an Origin subdomain same subdomain same
domain whoa sorry same port and you can
intercept any requests that goes from
your ranging to anywhere else to your
own origin but to some Syrians etc so
anything that goes from your page is
intercepted so if someone can do a
man-in-the-middle attack I would really
be scared to have something installed in
my web browsers I could intercept
everything so yeah it's GDPs and
actually sorry there's a new initiative
that should come out of beta before the
end of the year that's good let's
encrypt and I tried the better and it
which is closed right now so sorry and
but you can't say no to a common line
that generates and win use ssl
certificate valid one everywhere for
free I mean how awesome is that so how
does it work service worker so first in
a script that is on your page you check
that the API is supported it's really
important and then on navigator service
worker you call register and that's your
way of saying to the browser this file
is wgs is my service worker script so
your brother execute the script in a
thread that is independent from your
page it's really important so it doesn't
have Dom access and it's a synchronous
so it returns a promise and if
everything goes great you have a
registration object if anything goes
wrong you have a
were like you you know so everyone is
familiar with JavaScript premises yeah
it's a really right moment to learn
about it there's lots of good articles
it it helps a lot with dealing with
asynchronous stuff and composing a
synchronous goals chaining them etc it's
now part of the JavaScript standard es6
and it's supported in modern web browser
like edge and node.js etc so no need to
add some libraries and it's really
awesome and you won't be able to skip
the train because they are everywhere in
the service worker and cash api's so on
the service worker thread you have to
you have no access to the dome so the
global window object it doesn't exist
but you have a global object called self
and with it you can listen to Evans and
the more interesting one is fetch so
with that you see all the requests that
are made by your pages script images as
Jax goals etc and you can respond with
anything you want you can create your
own with responses it's not really
useful every day what's really great it
would be to answer with something stored
in the browser so there is a new
starring API which is called the cash
and it describes in the second part it's
described in the second part of the
service workers back and basically it's
a map that matches request and response
object and it has nothing to do with the
the HTTP cache but the matching between
a request and response regarding headers
etc pretty much follows the same rules
so when I intercept a request I just
have to find in one of my caches
a response that matches with caches that
match and I can I don't need the network
to do that and because it's programmable
I can decide well everything that goes
to the API will come from the server fo
and for anything else I will try in the
cash so how will I do some HTTP requests
to the server in the IDS know you're
probably think thinking about xhr well
you can't first the name is complete
crap there's lower case Piper case we've
been using it with a JSON for ages so
well the way on reason is that despite
the asynchronous in Ajax if you have a
URL and in an xhr you can do synchronous
calls and you can't have blocking calls
in a service workers thread everything
is a synchronous and welcome to the
boring whole school boiler placed API I
need to put a type I have some boring
old bags etc so we have a new API the
fetch API so it's a separated spec it's
maintained by someone at Mozilla and it
describes everything for fetching stuff
over the network it also describe the
interfaces of risk request and response
that are used in service workers so
let's use the same example I have a URL
and I just do fetch URL it's that simple
it works with strings I can also put
some request object and it returns a
promise obviously if you have a response
because it could be streamed if you want
the whole JSON content you have to call
dad Jason which also returns a promise
and then you have the adjacent body you
really want it and if you have errors
don't don't forget to to do something
else than logging it by default this API
passes do some get but you can pass
another argument just here and you can
do some post and any other method say as
I specify some others etc so it's a good
idea so now I can reuse my example and
just call fetch with a request object or
using the cash so for now we've been
intercepting request with a few slap for
for few slides now and it worked without
a connection so we executed a JavaScript
script without connection so the browser
browser as toward the script that is
used for the serviceworker somewhere
kind of sounds like the app cache in its
manifest so how can we update something
you have to understand the life cycle of
a service worker so on each page where
you have a registration while you do
that what you call register in the back
the service of the browser is trying
tries to install your service worker and
in the script it executes sit and send
an install event that means I'm trying
to install it it's not done yet and here
we'll be able to do some really
interesting stuff so I can name a cache
and lists some URLs I always need for my
app and then I just have to say okay
just wait a little I'll give you a
promise and if it resolves correctly you
will consider the installation process
success
so I I'll give just my my service worker
i just opened the cash i named and then
once it's open with that promise again i
will just add all the urls in the array
above so my brother tag take all the the
URLs do some requests fetches the
response and store them in the cache
with the matching between request and
response here that just returns a
promise again so that's used by the
browser to know if the installation is a
success if it's a success we go to the
activation phase and the first load the
first time you use service workers you
don't really have to do anything here
it's it comes useful when you update
update the behavior of your worker so a
bit like add cash while your bro's a
page and the browser sometimes try to
verify if there's a new service worker
so if there's something new it downloads
it he executes sit and triggers the
install event that's where you add files
don't delete files from the cache and
don't update replace files in the cache
because while you install a version two
of your serviceworker maybe some pages
are opened and with the previous version
the user may be using this so don't
remove stuff and that's when once it's
activated you'll be able to to do some
cleaning so before the activation the
browser waits for all pages controlled
by the previous version of the
serviceworker to be closed you have a
Mac as a mechanism to frost it there's
some good reason but in most cases you
will have to wait so once you activate
you can clean up please have some mercy
for for your users memory okay so once
once the activation is okay the service
worker will take control of the next
open pages and as I were as I was saying
enlarge app cache which has added a
dedicated event for update here you need
to catch the fish yourself so yeah sorry
if you've installed a new service worker
version it's up to you to to check in to
check the new update and to notify all
the open pages that there's a
modification and actually it's really
more powerful than that you can send
messages between your service worker
it's a separate straight and your pages
so maybe from you you send the message
uses using the past message API and on
the registration objects you can access
the active service worker and send
messages so for example I can decide to
force an update once the user clicks
somewhere and I'm sending a message to
matt to my service worker to maybe
update the cache on the service worker
side I just have to verify the object is
what i want and update the cache so i
can also you pass use past message in
very interesting ways when I intercept a
call to the logout URL I just know the
user is trying to log out obviously so I
can notify all the other opened tabs hey
the user just want to shut down so read
redirect to the login page or the home
page i don't know i just have to to list
the open tabs with the clients that
match on it's again a promise and on
each client I just iterate and pass the
message hey
the guys just want to log out so let's
let's do something and on the page side
you have to listen from messages and
again if the object from the message is
what you want you maybe have to clear
some caches to remove the avatar in the
upper right I don't know and I don't
have to execute code on the page I'm not
forced to do that I can also make pages
navigate to something else in my service
worker so here I'm just saying well all
the open tabs navigate to / logon so I
will with debug all this crap with
firefox it's very early you're more or
less cutting blindly but you have you
can see the logs and you have a page
listing all the serviceworker that are
registered in chrome the support is
really really good so again you can see
the logs great you can have a page that
lists all the registered service worker
the really important information is the
status is it activated installed stop
etc but you you have now a really good
devtools this page was at the beginning
but now we have something in the
resources panel so I'll use a demo
website I've built that shows some
conference schedules so once I load the
website on the right I can see that my
service worker is trying to install so
the status is new and it's just starting
and if I go see the network panel like
any other website the website loads like
it always does so you can see the normal
pages requested but you can also see
some duplicates because my page wanted /
or next weekend I oh but my service
worker all also does so you can see a
small gear on the left some requests it
just means that these requests were made
from the service worker and here you see
a single page app so if I browse the
conferences and the talks on tuesday
thursday sorry it's the same page so
it's still a proper navigation and in
the network panel I still see request
done from going from the network I went
through an empty activation here nothing
new so it it really goes fast and from
now on all new pages will be controlled
with the service worker and one very
important thing is that your browser can
decide to stop the service worker any
time it feels so not during some execute
some code execution but if you want to
remind some bitcoins on your user's
machine well you won't be able to do
that so if my page wants something new
that's when my brother will will want to
wake up my serve a smoker and tell them
hey we have a fetch what do we do cash
network etc so here it's just activated
again if I you can verify a service
worker control the page or not because
on the size column you have you don't
have the size in kilobytes anymore you
have from service worker it just means
that this page is controlled by service
worker
you also you also have the ability to
list what's in your different caches you
don't see the content of the response so
it's a bit it's a bit complicated and
you can debug step by step in the worker
and that's really really nice okay so
who needs this feels like a bit
complicated to implement do we really
need that and I'm convinced that it will
be something really used in the next few
years and its really useful for any kind
of website and web app you take a single
page app desktop or mobile I I don't
care it's the pattern I used for for my
demo I cash the app shell all the CSS
images HTML for the menus etc I cash the
schedule api's and avatars once the user
visit them so I don't download
everything it's just as I as I need it
and because the avatars depends on the
schedule API you know like devoxx you
sent me okay today there's well John
Peter so they avatar this URLs it's
really dynamic and with appcache it
would be a complete mess to try I either
to use the app cache and trying to list
the avatars in it are trying to use
something like index DB to store the
binary images it's really too much
complicated and it's really hear that a
serviceworker helps a lot if you do some
transformation on your JSON responses
you can store them in maybe index DB and
not use the cash for that parlays is was
a single page app rest in peace and this
summer they added enough flying feature
that uses service worker
users can download talks to watch them
later and they also use some ApS that
only works on Chrome but there's good or
explainable reasons for that you can
also it's also very good for classic
good websites doing some server side
rendering and whether you have
javascript in your pages or not think
about Wikipedia imagine that the last 10
pages you visited are cached you can
then answer directly from the cash when
someone visited again and if if is it
some page you don't have in the cash and
the the network takes too much time to
to load you can generate a response
containing the list of the 10 pins you
have and some message like i am sorry i
don't have page foo but i have this are
you interested you know that's almost
what Jake Archibald did as an experiment
I really encourage you to try this demo
there's also video explaining all the
optimization that it did using service
worker and it basically does what I
explained but there's no list of 10 last
article either you cash everything that
is visited or you cash it one by one
with the little button recently I think
two or three weeks ago the guardian'
this decided to ships something with a
service worker so if you navigate to a
page and you really have no connection
at all they are saying unable to connect
to the internet in the meantime how
about a quick cross world nice now this
technology also opens doors to crazy
 buzzwords like this one and
that's exactly what I'm excited about
right now we're in the make face
you know we'll decide what
but best practice and what's really a
bad idea along the discoveries so we are
trying ideas and its really interesting
for devix france i tried an experiment i
did a quickie about CSS and it was 15
minutes of life coding everyone here
loves CSS I hope yeah so it's basically
a really dumb version of JS being orkut
been a really really simple one and on
the left side you have occurred the
editor on the right you have a live
preview of what's credit and I don't
rely on conference Wi-Fi because you
shouldn't and each time I type a letter
a character in the card editor I
generate a fake response in the cash I
store it and then I tell the iframe the
live preview iframe on the right to just
refresh itself it does get to fetch the
HTML and then some CSS in it and it all
comes from the cash I don't have any
network and its really the quickest way
to do some real feedback quick feedback
without trying to build the page inside
the page and because it's too I frames I
also put the code editor in an iframe I
can open them separately and move them
on two different screens and now I have
some multi-screen web experience Mozilla
tried some experiments regarding
templating so you do get in a page to an
article may be all your articles on your
blog look the same so why wouldn't you
only get the contents and do the
templating in the proxy the service
worker and it they find some improvement
in performance and we are still trying
ideas I really like the
the diff one think about it when when
you have CSS you barely change a few
characters each time you change the
color or the size of something but on a
100k file you just change a few
characters you could do a simple just a
link tag with a style sheet in your page
so it does a basic get but because it's
intercepted by your service worker you
could just tell the server hey I have
this version do you have a new version
and can you send me only the changes and
it said of redownloading 100k you can
only download a few bites the the
problem is what's the good recipe should
I do network first cache first then
network or I don't know and its really a
difficult problem there are many
strategies it depends on your data and
your users there's a really really
really good article about the subject
and the oven cookbook I really like the
idea of doing a race is there anyone
using windows here okay do you have do
you have an antivirus yeah and a view
none SSD Drive okay the network can be
faster than your hard drive and there's
many other ideas I think I mean you
could let the server one second to
answer and if it doesn't maybe you you
just use the cash you can try anything
you want and it's pretty interesting so
now ladies and gentlemen the question of
browser support
for now it only works in stable version
of Chrome and opera and mother Mozilla
has done a really tremendous tremendous
job on their implementation it's a
little bit better than Oprah and chrome
or more advanced but it's not in safe
stable yet it's in the dev edition
release that you can try today microsoft
says and across the consideration so it
means we don't don't care you know and
if you follow some some microsoft
employees on twitter they are interested
but it's not the priority and because
it's something complicated to implement
i think it will take time but i'm pretty
optimistic safari we have no news
silence it's not unusual because they
never comment on their word map so let's
wait and see but i'm not really
optimistic regarding their their
platform and that their business needs
so you can learn more about what's about
it in which border on this website it's
really good you know that promises veg
the cash can you post some messages or
all the stuff that are supported in with
the service worker there's no polyphen
oh there's not anything it's a great
news its greatness because if someone
could act with just simple javascript
and do that how would we really be
scared so it's okay and there's a lot of
helpers on github new ones are coming
every day really interesting ideas
there's a good one by google they used
it on the
I your website and like other libraries
they bring a router the router so
instead of making some crazy reg X's on
your URLs you can have some pretty
decent stuff and they are also
implementing ready to use recipes like
cash first network only fastest etc so
it's okay if it doesn't work in Safari
or edge think about progressive
enhancement and the service workers has
been written the spec with that in mind
so I like the good metaphor good old
metaphor of the escalator don't worry
you you've never seen someone stuck in
an elevator when it when it fails it's
just becoming stairs and it's the same
for website in a browser without service
workers port it's just a regular
jurassic website it works like it always
has been since the beginning of the web
i would like to end with the traditional
debate native versus web there's a turn
coming up since a few months that's
called progressive apps and the idea is
to say you know on the ps4 you can
download the game but why while it's
downloading you can already play 11 1
it's the same why do I need to download
I don't know a five or 10 megabytes app
on the App Store and I have to wait just
to find out that the app is total crap
so if it were website the loading would
be instant I would not depend on
someone's app store or market or
anything it's just a URL it's just the
web so it's really an interesting
pattern to to follow so people want
icons on the home screen Apple started
with a crazy specific meta tag with
Apple Apple WebKit I don't remember to
do that so once you had the good tag you
can add something on the home screen
Google followed with some less specific
tag there wasn't google in the name that
it was still non-standard and once you
had that on chrome you have to click on
a menu no one clicks on and then you
have to look at the bottom just to to
click on add to homescreen so nobody
does that and on firefox its its worst
it's in a second menu anyway once you
have that you can have a web app that
was loaded in a brother add it to
homescreen and that can be displayed in
full screen and we really have to think
about it if we want real people I'm into
to install web app like that because
they won't click on that menu so there's
a last interesting spec to know about is
the web app manifest it's basically a
JSON file where you can describe about
your website and you put a name you put
a huge list of icons because SVG seems
too hard and you put the start URL that
will be browsed when you click on the
icon you can force the orientation the
display if you don't want browser chrome
and bars and you can specify a
background and a theme color so your url
bar is blue so now you have that chrome
as an interesting ID someone had it a
manifest and he has a service worker
hmm it kind of looks like a web app so
I'm gonna display a banner on at the
bottom saying hey do you want to add
this to the home screen that's how we
are going to make normal people trying
to view the web ad as another app store
and I am really looking forward to
Mozilla trying some other ideas
regarding that so what's next with
service worker you have an independent
thread in your browser so you could even
if you have no pages open on your
website receive notification and wake up
a service worker do some code maybe open
a notification and if someone clicks on
the notification you could again execute
some code that is in the service worker
and it works actually right now it works
in chrome the spec is really moving a
lot so try it don't ship it but it's
really interesting facebook implemented
this a few months ago so you can get rid
of their native app the web app is
pretty great response streaming it's
really really interesting as you saw i
was i was forced to download the jason
in the serviceworker before going and
sending it to the page but with response
dreaming i will be able to do streaming
like I do in any proxy any platform so I
take a little bit of data I transform it
I template it I don't know and I give it
to the page so if I'm reading the
documentation of hibernating you know
the full the one document version it's a
pretty pretty long document I can really
just be a proxy on a relay to to the
page and
don't wait in the service worker you'll
also be able to do some synchronization
imagine a crown like syntax and maybe I
want to to wake up my service worker
every 15 minutes to to make some updates
on the cash don't be too smart browsers
are already thinking about abuses so
it's also for that that it's not really
yet matter it's really interesting too
and the last one is geofencing so if i
enter an area local to my house to my
work i could do some cod and could
notify someone and then could open a
webpage so we'll soon have no longer
technical excuses we'll just have
problems with user experience because
it's really difficult to display
something to someone on the web and
hoping they will understand that this is
not the more fresh version of the page
will have a lot of problems with data
synchronization and conflict resolution
it's not a new problem in computer
science but it's not a solved problem
for any case anywhere so there are still
some stuff to to do I hope you're
convinced that the app cache is a
douchebag that service worker are very
promising it really helps to bring the
offline first web and to close the
native versus web and I hope you'll help
your trainee foreigners plans users to
avoid the Jurassic Park effect thank you
very much
I have five minutes for questions yes
so the question is can you use the fetch
API in in a web page outside a service
worker the answer is yes and it already
works in firefox and chrome and opera
and it's a really good api to replace
xhr so yes if you have twitter should
follow these guys any other questions
yes yes I I will if you want there's
there will be the video on youtube but
if you want the slides yeah I can't with
them
okay thank you very much</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>