<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>The ISS position in real time on my mobile in less than 15mn ? Yes, we can. by Audrey Neveu | Coder Coacher - Coaching Coders</title><meta content="The ISS position in real time on my mobile in less than 15mn ? Yes, we can. by Audrey Neveu - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Devoxx/">Devoxx</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>The ISS position in real time on my mobile in less than 15mn ? Yes, we can. by Audrey Neveu</b></h2><h5 class="post__date">2017-05-17</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/-ZG_0np8gd0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">furgus inflated do it make sure hello
everyone welcome to this session called
the SS position in real time on my
mobile in less than 50 minutes as I'm a
French prints person I would like to say
Bon Appetit to you so quickly to
introduce myself my name is all day I'm
developer relations at trim dalitai oh
we got a booth just over there so feel
free to come and tell oh and I'm also
the co-leader in Friends of deluxe for
kids
so my challenge today will be to
LiveCode mobile application which gives
us the ESS position the internal space
ship station position in real time which
is the iOS and Android compatible in
less than 15 minutes to win my bet I'm
going to use this API which is open
source available on github you can have
a look on the on the code real nice one
so my solution to win the challenge is
to use for the mobile hybrid part of the
application ionic which is a mobile
hybrid framework and for the real-time
part of the application I'm going to use
our production data which is a proxy
available a success which turns energies
in API into a stream of data quickly to
introduce ionic anak is based on both
angularjs and Apache Cordova in this
session I'm going to angularjs even if a
new version has been released of ionic
annex 3 I think last week has been
raised which is based on angular but at
the moment on cloud does not really
plays well with service interval to get
to make some kind of hacks so it will
not be nice I really hope they will work
on it quickly so an ionic applications
look like this as it's an hybrid mobile
applications it means that it's based on
a webview which is basically a browser
bundled into a native application so it
means that on the front part of our
application we're going to use
technologies we are familiar with we're
going to use HTML CSS if you want to
make self and less you can it's already
included
and obviously we're going to make
JavaScript we're also going to use ionic
framework which will provide our
services and component really cool so
for example they got a nice Pinner wheel
that we can use with only two methods
you know you're putting the metal to
open the spinner and on the other class
you put the method call to close the
spinner and you can easily customize it
if you need so it's very nice on the
business logic part of our application
it will be completely angular so for
example the wood the router we are going
to use is the angular rotor and then
we're going to use Cordova for two very
important things
the first one is each time we would like
to access to some devices of the ice so
for example if you want to use the
Bluetooth of the camera or to access
contact we're going to use Cordova and
the single big task of Cordova is to
compile the application towards platform
your targeting so it's kind of always
going to make the completion to Webb's
high OS and Android so when talking
about real-time usually a few solution
solutions are mentioned the first one is
polling which is probably the most
simple one the nave solution I would say
supporting is this you're making a
request waiting for the answer making
simple quest waiting for the answer and
so on and so forth okay obviously it
works but it's not really a proper
solution it's much more closed than a
hack the program who is polling is that
you will make a lot of useless code you
will retrieve the same answer a lot of
time basically when you're making
pulling 98.5 percent of tools are just
wasted another problem is that if the
connection is break for any reason you
will not be able to retrieve that that
you've been missing in our use case the
API use refers to every second so as you
can imagine having a mobile application
which is going to make one call per
second that's not possible
I'm pretty sure the user will kill us
when he sees that a consumption so let's
forget about it yeah so polling quickly
and total pulling madness
web circuit so I'm pretty sure almost
everything has heard about WebSockets
it's a very cool post technologies it's
a bi-directional and it's about binary
and text the only problem is it it has
its own TCP based protocol so it does
not rely energy n HTTP which means that
you have to reconfigure proxies and load
balancers to use it
so at certs we don't really need we
don't need to send data from the
customer side to the server we are not
going to need binaries and most of all I
don't have time to reconfigure proxies
are not balanced so in 15 minutes
so forget about the WebSockets - yeah
I'm from I forgot my animations Silla
sentiments so $0.07 events is the other
post technologies which is under w3c
specification it's uni-directional which
means that only the server is able to
push that out to the clients but it
completely fits our use case it's about
text only
ok fine for us - and best of all it's
completely HTML base to use it to use
service entrance you just have to add a
little header except text event stream
and it works so the other reason why we
will stream that at i/o which so as I
previously is a proxy available on staff
it works with any G's in API and
basically so you're going to start a
streaming session by asking the proxy to
pull the API you were previously pulling
on the side at the moment when you
support polling but we are working on
push connectors and the big advantage of
polling is that it was making it
completely transparent for a TI provider
who have the big winners by using the
proxy so obviously we're going to we're
gonna send changes on server sent events
with service into memory and we'll it
added a dynamic catchy so it means that
if you get customers joining the session
between two poles instead of waiting for
the next one they can reach refresh
setup from the catchy and we also we are
making incremental updates which is very
important because it makes
it allows to even reduce even more the
amount of data exams so for example
let's imagine that we open our streaming
session we are making surf pull and
retrieve from snapshot of data on the
second poll if nothing has changed we
will not send you any data there is no
point to just send you back the whole
document again okay and if we can
imagine that it's a big document we get
that only two or three fields of this
document are changing frequently on the
third poll only those changes will be
sent and we are doing this with the jism
patch format so didn't touch basically
defines a set operation that could be
applied to a JSON document so for
example it could be add we move that
kind of things so if we imagine that
this is the first snapshot the third
document will received on the South Pole
we will retrieve this and then you just
have to use a gin in patch library to
apply it to your initial document so
it's pretty fine okay eight minute left
let's move to the demo so first of all
I'm going to create a new ionic
application so I'm going to say ionic
start ESS snaps so stop command as you
can guess is used to create a new
application the ESS is the name of my
application and maths is a template I'm
calling because the real icing with our
neck is that it came with a few
templates to help you somebody else
yourself with hygienic works how you're
making application we are with a Linux
so you can have applications with for
example side menus or header with
buttons that kind of things if it's too
slow perhaps I will just switch to by
bucket okay fine don't only a lot of
things does okay so here as you can see
ionic is adding woo native plugins and
an ionic application is application by
default this is because I'm working on
OS 6 the wrong news is the bad news
story is that if you're not working
six you will not be able to compile your
application for iOS but you can make it
online well they get solutions online so
it's always good
ok so let's give in to the application
let's run it so I'm going to run it with
ionic serve dot minus L which is going
to lunch
so it's an emulator which is very nice
because we have both version of iOS and
Android but keep in mind it's an evil
attorney so it means that you can't
emulate everything for example we won't
be able to emulate Bluetooth so here my
map is focused on ionic headquarters in
Wisconsin so that's nice but not exactly
what we want so let's go to see how it
looks like our application so if you
have already worked with called eval you
will be very familiar with the structure
of the application because it's complete
Cordova it's a complete code of
architecture you get hooks for your pre
completion tasks and post completion
tasks and that kind of things you get
your node modules platforms here we will
find out us ok fine
plugins in case you need to add plugins
they will be installed there here it
comes with a few of them like for
example splash screen which is the
screen you're saying at the loading of
the application and which can very
easily customize with ionic the folder
which is going to interest us today is
the three double view that the one where
we are going to work so I'm going to
open this index.html page first of all
I'm going to just install differences I
will need letter doing some time ok
great so now looking at our index.html
page so if you've worked with angularjs
I'm pretty sure you recognize everything
we got an NG our prayer got an energy
controller and here we got a map object
and actually this map object is just a
directive which I can see here that's we
are going to customize first to make a
web petition looks a little bit more
relevant for our use case so first of
all I'm going to
declare new coordinates which are kept
Canaveral coordinates and I'm going to
really clear my map options and to put
them up in satellite view and to remove
through the control which is not very
useful in our use case if we go back to
our application it should reload okay
fine
now we are going to add a little marker
so it's another object in the JavaScript
library and I'm going to give my marker
a little image as an icon so I can
finally find it on the map okay nice
here you can see that we got a scope
that on create method which take the map
as parameter actually this method is
used to pass the map object as parameter
to the controller class so as you can
guess not sorry we're going to need to
pass the marker too so we're going to
make it right now so that we don't
forget about it okay we're going to pass
it there
okay and here so once we've done we have
done that we can switch to do to the
real-time part of our application
okay have no idea I opened that sign so
let's move back to there so this is the
total the developer total of some the
proxy you can create an account for free
and you can make tests until 1 million
messages and 10 connections in parallel
for 10 months for the rest of your life
basically for free so I'm going to
create a new application which I'm going
to call ESS obviously and so here a
token has been generated fine so these
two can make sure that my data will not
be seen by everyone here I can
copy/paste the API I would like to to
stream so I'm going to just take my idea
which looks like this and paste it there
ok and now I'm going to copy paste just
this here and what's on the deficient
cells interesting I'm going to try in
the terminal perhaps I screw up my
copy/paste okay look fine okay so here
my streaming session
Isabelle I received the first snapshot
of data so here it's a very simple
document and then I start to receive in
touch so I know my application is my
appetite is refreshed every second I'll
go back to my API section here I can see
that the API has been automatically
provided by Michael Kamen so I'm going
to configure it and change the putting
second c21 so I was having HTTP error or
query parameters I can put them there
too
and obviously I can add manually
duplicate all that counseling's and if
I'm going back to my streaming session
so depending frequency has automatically
been updated without closing and
reopening the stream ok so now let's
move back to the code so it works in
real life so first of all I'm going to
import the two libraries I've been
installing super well so it's the tree
stream data that I own javascript is the
case
and Jesus patch library to apply patches
okay once I get this I can go back to
the controller so first of all I'm going
to declare my API and I'm going to
declare my token okay so my VI is this
my token could be sign on the Settings
Security section okay and from this
point I'm going to create an event
source object by calling term da da da
da oh that creates Evan sauce with the
API and the token and then I'm going to
listen to the UM data method which is
going to send me a snapshot here I'm
going to attach coordinate to an object
called ESS position fine then I'm going
to create an on to call the unpatch
method to listen to patches and okay I'm
going to call my Jason touch library and
apply my patches to my ESS position
object like this so here I just need a
refresh method to refresh the map which
I'm going to call there and there and
then I'm just opening my Evan sauce up
and if you are moving back to the
application
oh thank you and so I think there is
more on that thank you laughs and I
think this one is nice let's move back
to this and let's cross our fingers so
it's not about the C Eltham that IO is
not defined so something I screwed up in
my into installation
Wow
I'm real sorry pregnant no no no juice
yeah it's not installed and I don't know
why I run it from there actually I work
my boy this morning doing the same it
was just an install it's an NPM seizure
and I launched and that should be moving
yes it is so it's quite slow that is
moving and here it is thanks for your
attention</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>