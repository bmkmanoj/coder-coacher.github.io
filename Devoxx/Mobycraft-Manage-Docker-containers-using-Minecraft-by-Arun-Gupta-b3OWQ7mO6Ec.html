<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Mobycraft: Manage Docker containers using Minecraft by Arun Gupta | Coder Coacher - Coaching Coders</title><meta content="Mobycraft: Manage Docker containers using Minecraft by Arun Gupta - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Devoxx/">Devoxx</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Mobycraft: Manage Docker containers using Minecraft by Arun Gupta</b></h2><h5 class="post__date">2016-11-11</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/b3OWQ7mO6Ec" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">alright I think I'll get started this is
35 past hour so good afternoon my name
is arun gupta and i'm giving this talk
on my son's behalf who actually some
read that my twitter handle is on
the top and my son's handle is on the
bottom this is mostly a fun project that
we did earlier this year on how to
manage your docker container is using
minecraft my while I've been I'm Adama
docker captain what that means is I know
a few things about darker and I help
people educated about knocker my son is
the avid minecraft player he has written
a book on minecraft modding so you know
you know a few things about Minecraft
this particular project really gave us
an opportunity where we could spend a
little bit more bonding quality time
talking about geeks as we do so again as
I said this is a presentation that he
presented at docker conerly ER this year
so his level is pretty good at minecraft
you know his java level is sort of ok
but his darker level was pretty minimal
and his darker level pretty much darker
experience pretty much comes from
watching me you know splitting up
containers creating images where he's
sitting right next to me and i'll see
that what is this docker file what is
this compost what is this some swarm so
that's sort of his darker experience and
then i will share towards the end of the
project how the whole experience helped
him improve his darker knowledge so what
is movie craft movie graph is the name
that is named of the project essentially
but essentially it's a client-side
darker mod client-side minecraft mod
actually now minecraft is a game is a
multiplayer game where you have a
launcher that you download and you
typically connect to a server and then
you know you run the game over there
other players can join the game so some
multiplayer game and is the biggest
craze these days now there is a
server-side mod in the game of minecraft
you can have a server-side mod and a
client-side mod server-side mode of
course is shared by all the players
client-side mod is in your environment
but client-side mod has a lot more
capabilities now
now for server-side mod there is a mod
already written called as darker craft
which is written by gate and an Adrian
so many thanks to them because when I
was talking to my son he exploded on
this he looked at darker craft he liked
it but that was written in lure and go
and all of the languages language was
not an issue but the issue for him was
know what Dad I can only do only so many
things in a server-side mod for
minecraft so he said okay I'm going to
have a make a client-side mod please
because it can have lot more
capabilities but essentially what it
does is it gives you the ability if you
are a minecrafter on how you can
visually see my docker containers you
know starting up going down you know
heat maps and stuff like that in a
minecraft you I from within minecraft
you can run all sorts of dr. commands
you can start a container you can scale
a container you can shut down a
container command is just one part of it
but the visual aspect is the more fun
part of it and I'll get to that in a
second we added new minecraft blocks new
items so container is starting up so
that is represented as a Minecraft block
and now a new ass ward is there with the
sword you can kill a block well that's
what kids do in a Minecraft it'll
actually container so those were the new
commands and the new virtual
representations that were added to the
game itself and the way this was built
as you know me are my son and I we wrote
a book last year on minecraft modding
with folds it was really built upon that
experience so we were using Eclipse
primarily as our IDE so we were building
using Eclipse IDE you know debugging
testing all of that was done from within
that itself so in the game of Minecraft
this is how a docker container would
look like this is a custom block and
also we took the darker logo slapped it
on a Minecraft blog and this is a custom
container that he built essentially well
what do you do in this so you can see
your Minecraft containers docker
containers in Minecraft each container
essentially if you look closely it has
is a box with buttons and signs so if
you look at it on the tie right on the
very top itself for example if there is
a dock or logo over there on the left
side you will see two
to information button in the information
it will tell you what is a container
name what is the container ID now if you
go into the room essentially in the room
there is a start and stop button so you
can start the container from there
itself stop the container from there
itself the big focus really was not
about teaching darker commands but
rather teaching docker way of doing
things using minecraft the container
this is a great container what that
means is the container is running if the
container stops now it becomes dark gray
or if actually if the container is stop
it becomes red so there were different
variations of the Minecraft block
essentially which was changing based
upon the state of the container we also
created a new container one but I say we
he did all the coding I helped him with
the thought process only but essentially
a new minecraft item was created which
is a container one and today you know
what you do is if you take the container
one which is sort of what people kids do
in Minecraft and you hit it on a
Minecraft block it will kill the
container but that's sort of what the
idea was but then the idea was that we
could add other molds to it as well the
Minecraft was constantly pulling the
docker host where the containers are
running and it was refreshing the
display that was another feature as part
of this effort several commands in the
game itself let's say you are not a
Minecraft kind of player but you like
the visual representation but you want
to run the Minecraft darker commands in
Minecraft so dr. PS dr. run docker
images I won't go into the detail of
those commands but essentially those
commands were exposed and essentially
they were written as minecraft commands
for you certain convenience commands
let's say you fire up 10 containers you
want to kill all of them so you just say
darker kill all and we'll kill all the
containers and again the visual
representation will be refreshed
accordingly so you can remove the stop
containers the fun one was you know dr.
heat map well I work for couchbase so my
son was firing up a few couchbase
containers couchbase being a database
takes up a little bit more memory than a
web server so he fired up a few bunch of
engine X containers saying I want to see
which container is taking more
memory more CPU and so on so forth so he
fired up a whole bunch of energetics
containers and a whole bunch of garbage
containers and then he was generating
heat map now as admin you can stand back
and say okay you know what if a
container is on fire actually turn on
the fire on that in Minecraft game there
was a darker health command which would
allow you to going to learn more about
the darker commands on the left what you
see is what he created was a 3d model
you know of Moby which is the basket for
darker essentially and this is a custom
3d model and texture so essentially well
we couldn't figure out the animal in
Minecraft which could actually swim and
has some other properties so we we
created this model but this model you
know if you drop this model which is a
veil basically if you drop this model in
water it will pop around but if you drop
this in a land it will walk around as
well on the right side one of those two
things that we work with actually for
this particular project we also worked
with Netflix and I'll show you a sample
of how Netflix was using this in their
production servers but essentially what
you see on the right side is a net fixed
chaos monkey so now imagine you have
hundreds of containers running around
you spin a bunch of chaos monkey is you
know as minecraft now that chaos monkey
is literally going around randomly and
killing containers and you're seeing
your application live in production
reacting to those chaos monkeys the best
part about this is this is a 100-percent
open source so you can go to bitly link
as a movie craft it's on my son's github
repo so you can see the code over there
so what he learned as part of the
process essentially well the basic
darker terminology you know I mean as we
started getting into it I know what is
really a container so his point was
container is an application packaged up
and wrapped in a nice bow so that it can
be easy to download and run now that's
sort of how middle school kid would
understand what a docker container is
weather is oci compliant weather is
running on multiple holes whether it is
running on cuban it is that's too much
details for them at that point of time
he understood the flow between darker
client host
hub how they do how do they interact
because we were using the default hub so
he understood that concept how does it
really talk to each other he also
understood the aspect that they're
actually talking to each other using
REST API because what we were using was
the darker Java API which is sort of a
Java abstraction on top of the rest he
also understood now that there could be
client and server version mismatch
because we actually face some problems
ourselves in the initial versions we
were using docker machine primarily
because that's how where we were running
up all our containers and that's where
we were seeing the visual representation
docker PS command you know how do you
see the containers so the basic concepts
was were well understood dash dash
helped was very very helpful for him I
mean as it is for me because anytime he
would stalk he would say dr. dash dash
help show me the list of options that
are available he'll pick those options
that make sense from minecraft
perspective and put them into the game
dr. swarm we talked about it we didn't
implement it yet because primarily the
darker Java API is still missing those
abstractions some more learnings you
know in terms of a Java skill as I said
he's comfortable you know he can play
around now he's a freshman but he
learned more about access modifiers
break and continue statements there were
several places where the code was being
repeated so he kind of dried the code
and essentially put them into a class we
also learned the concept and he learned
the concept primarily using painful how
you shade jars and Gradle this was
important because end of the day we
wanted to give a jar take this jar drop
it into your minecraft launcher and now
you can start managing containers
asynchronous callbacks and how we were
used for results you know because you
are constantly pulling you know the
server if the new container has been run
or not what is Netflix Titus well
Netflix Titus is a container cloud at
Netflix i highly recommend this talk by
andrew spyker on which is a talk given
at q con but essentially what with what
we work with netflix is they took moby
craft and then they ran moby craft on
their Titus cloud and then they created
a time-lapse video for us so thank and
you spyker for that and in the video
thought you'll see is how the container
starting up going down and you will see
the entire show over there but
essentially the cluster on which movie
craft ran it had about 130 are 38 excels
as a pretty kick-ass machine and also it
is equivalent to almost 4,000 virtual
CPUs 31 terabytes of memory and 325
containers at peak that were running so
quite a few containers were visualized
let's take a look and of course you see
a netflix commercial to begin with this
was done for darker con so this was done
about June timeframe so you'll see some
ads from July August ember
okay so the very first thing that you do
in the game by itself is you will state
the start pause that okay I mean
minecraft set me the start position that
means you not rendered the containers
over here and once that is done this is
a blue container now what Netflix did
was they manipulated the game where and
they wanted they were running a whole
bunch of different applications and the
game of Minecraft you have this concept
of a sheep full so they took the sheep
fool based upon the application the
container belongs to they actually
colored the container with that color so
here if you can see on the screen there
is a purple there is a brown there's a
green there's orange red different kind
of containers so now you can step back
and take a look at the application and
say hey and what I know what all kind of
containers are running over here because
here is my legend green means this red
means this so you can see the containers
as they are starting up or they're going
down
this is the time lapse essentially now
on the right side of the screen what you
see is a bunch of blue containers these
are algorithms that run every night on
Netflix cloud essentially they look at
you are machine learning algorithms they
look at your patterns what did you law
when did you log in what movies did you
click on and then based upon that it
generates your low LUMO which is the
main page of your netflix.com your
profile page or a lot of noise a full
form for lists of lists of movies so it
creates a list of list of movies on your
main netflix page so these are the
machine learning algorithms that are
running and then again running as
containers so you can see as the
containers are going up and down they
are being represented over here again
blue and a red so depending upon the
time of the day those containers are
rendered accordingly there are no chaos
monkeys in this one particularly
there you go so it's a quick demo now
one of the things that we also did was
and we wanted to run this across
multiple darker providers well so we
could run this you honor dr. machine
Netflix has the tightest cloud and the
tightest cloud they have they use docker
containers but the orchestration the
rest api builds on top of darker API but
it's not exactly the darker API so they
build a different darker provider for it
which can talk to that rest api and then
for testing purposes we also built a
mock provider where I don't have to run
a docker container or a bunch of docker
containers I can just grab the data from
a JSON and then using rest api i can
read it so there was a provision that
was made in Moby crafts where we could
have multiple darker providers so one of
the things that we are looking at is
possibly you know be able to plug in a
mesos provider here or a kuba net is
provided for that sake how you can help
well there's code review of course he's
a he just became a high schooler like
not just but about a couple of months
back before he became in high schooler
so if you try it out if it doesn't work
file issues you know send pull requests
test in your environment you know see if
you can take mobic rash and use it to
manage your set of docker containers see
what works what doesn't work filey
issues the github repository of course
is open source and here is a message
that my son wanted to say if Netflix can
use mobile craft to manage their
containers you can too I think my time
is up but I will be around and if you
have any questions thank you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>