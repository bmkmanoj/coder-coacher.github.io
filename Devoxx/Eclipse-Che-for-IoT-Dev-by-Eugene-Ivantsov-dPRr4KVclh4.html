<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Eclipse Che for IoT Dev by Eugene Ivantsov | Coder Coacher - Coaching Coders</title><meta content="Eclipse Che for IoT Dev by Eugene Ivantsov - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Devoxx/">Devoxx</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Eclipse Che for IoT Dev by Eugene Ivantsov</b></h2><h5 class="post__date">2017-04-11</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/dPRr4KVclh4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello everyone my name is Eugene I work
for code Envy and code Envy provides
cloud work spaces that are on demand it
is based on Eclipse chain which is an
open source project with contributors
from Red Hat Samsung microsoft and other
companies I hope you have heard about
eclipse che at this conference if not
it's easy to check it out it get help
calm /a clips / chain and the topic of
today's presentation is how a
browser-based ID can be actually used
for IOT development I've got this little
guy here with me it's a device from
Samsung Arctic 720 I guess with one gig
of ram so not very powerful they've got
a lot of models and at some point of
time we started doing a project and
making a special build of a cliche that
is well well suited for IOT development
so today I'll give you a short overview
of Eclipse check if you haven't had a
chance to do check it out yourself then
there will be some bullet lists why why
a cliff che have been chosen as a
platform to build an io TI de which is
browser-based i'll speak a little bit
about packaging nid powered by docker
into an electron client to give a
desktop experience for users there will
be a demo of course the most interesting
part
and a few words about IOT development in
in a cloud so really quick Eclipse che
is a workspace server that provides
on-demand work spaces which are scalable
and replicable there are three four
component parts which is a chase server
that creates and orchestrates the
workspaces and the browser that a user
actually uses to connect to a workspace
Eclipse che is pluggable it's a
different it's a different architecture
than the traditional desktop ID but it's
still possible to to extend the platform
which we did with the special build of
Eclipse che for IOT so actually why a
cliche is good for IOT or at least why
we think it is so first off it's easy to
get started and I will demo this in a
couple of minutes secondly it's
replicable environment that basically
works everywhere with our oet and
cross-compilation tools it's quite a bit
of pain to to get it installed on
different platforms we've implemented
device discovery in the network using
avahi publish service we provide a shell
into a into the device so there is no
need to use any tools on windows like
putty or terminal on Mac OS the IDE
comes with with a set of sample projects
to help users actually easily get
started and get themselves familiar with
with the platform so these are hello
world's equivalents for iit eclipse she
provides support for C C++ JavaScript
and Python that includes C and C++
debugger it is possible to connect to a
remote device which i will also demo and
we've implemented SDK update and
management API Docs and well basically
vendor specific features that the
manufacturer provides with the device
before i get started i will show you so
this is a Arctic documentation for foot
for eclipse for the traditional desktop
ID and these are all the steps that a
user actually has to go through in order
to run a hello world and the last thing
is like getting a shell into the device
and whatnot so with a cliche we're
trying to eliminate this pain and trying
to to do as much as we can for a user
for easier onboarding okay
a few words about cloud ID as an electro
nap and why why we decided to pursue
this idea some users really like web
application for example those of you who
use slack some of you use it only in a
browser but others like desktop like
experience so we decided if it's a good
option to to provide users with this
sort of experience this electronic
client and I will demo it in a second
does not only open a web page just like
any other clients like slack or or skype
for for linux alpha version do so we we
perform certain checks like we we check
for for the set of dependencies that are
required to run the application like is
dr. running on your machine is it ok
with the connectivity is the IDE
actually running as a docker container
it's not the electron client will will
attempt to do that and of course with
electron is possible to implement all
sorts of on clothes actions for example
when you close the application we
perform certain actions ok so in this
demo I will create an import a sample
project so a hello world so will
simulate the first time experience of a
user who tries to get his hands on such
a device or a similar device it could be
a raspberry pi or whatever else device
is out there we will connect to a device
we will go through all of the major
features
the Eclipse chip provides of course
we'll build run compile the application
and we'll demo the debugger ok so I have
already installed Arctic ID here so this
is the electron client that before
launching the service it performed
certain checks like is dr. ok if
connectivity okay if if not then I'd get
a set of wardens like hey it looks like
you're offline or anything else so
everything is good right now so we are
now in a user dashboard I've already got
a workspace running here so just for the
sake of time I've ran it before and
let's open it so I could have opened
that in my browser on localhost 8080 but
here it's it's an electron windows so
all right I've got a set of Arctic
sample projects these sample projects
are provided by Sampson team and they
are basically there are simple programs
to to test various modules of of this
board like Wi-Fi Bluetooth Network
serial time and whatnot so my device is
already connected when when we connect
to the device with the IDE we launch a
web based terminal right there it's it's
pretty lightweight written and go just a
small binary and then we use web sockets
to display this terminal in the ID so I
contrary to the traditional desktop
approach when you have a separate shell
into your device using putty or whatever
terminal program you're using its
everything is here so if you want to
connect several devices you can do so we
also implement device discovery so when
when the device is up it advertises
itself in a particular way in the
network and in the IDE we know how to to
tell this device from for example my
mobile phone also when a device is
connected to the IDE we immediately run
our sync against the device and
replicate everything I've got here in
the project tree we replicate everything
on the device I'll explain a bit later
why we do that so the the ultimate goal
here is to let's let's pick a a project
it's time delete that binary
ok so the traditional way to to compile
a project would be to to do that with a
makefile if you have one if not here is
a compile button here that runs a
particular command in a workspace so
compilation takes place in a workspace
which is basically a docker container
Fedora based with cross compilation
tools installed in there so that the
compiled binary can run on a rm7 base
personal devices so compilation
succeeded you can see the binary pop out
here the the command that that Iran can
be can be changed so which each project
may have its own compilation objects you
may change binary name or you may link
other libraries include different header
files so it's all configurable here ok
and let's let's run the D binary I
cannot run binary in a workspace in a
docker container because it requires
this guy it requires their metal it
requires modules that are on this board
all right there is some latency because
I'm using the mobile network because
wickedly fast Wi-Fi won't let me use any
internal ports to association to the
device this is what I've discovered
yesterday ok so as you can see we we run
this program so it gave us some time
it's 11 um just it's out of the box I
haven't configured time
server time there so the de binary was
actually running on the device and as
soon as I compiled it our sync service
make sure that everything that's
happening in my workspace is actually on
the device so if I go to art examples
time right here are my files and if I
create a new file here okay
give it some time and you can see that
it's almost immediately replicated on
the device this way we make sure that
whatever changes you are doing in your
workspace you've got it actually on your
device
what was implemented for for this
particular device is API documentation
so if I select something okay Arctic
time module and I need some information
on what it is press ctrl cute and we
open api docs api docs are bundled with
their Arctic SDK so each time I update
the SDK and the device new docks are
coming and there is a way to display
them in the Indy ID I can also check
what SDK version I'm running in the
workspace and on the device and I can
update downgrade remove or change SDK
versions that are installed SDK in this
particular case is is downloaded as a
fedora package from a custom custom
repository looks like connectivity
issues here so you gotta believe me all
right
ok
what if I want to do debug by program
the debugger here with eclipse shade
we're using gdb and I guess it's better
to to show it let's set a breakpoint
somewhere yeah again when i press run a
debug i select the device so the binary
will actually be running in a debug mode
on the device okay what happens now is
we have launched g DB server on the
device and connected with the debugger
from the ID to that device so if you
look at the output here so we started g
DB server and port 1 2 3 4 and you can
see a local connection to ggb server
this is the IDE debugger so the
breakpoint set it had stopped here so
looking for for value let's let's mess
it up so I've changed the value that
that the program got and click with him
as you can see my input has failed the
test right otherwise if I just run it
just succeeded yeah it's just a short
demo of a debugger of course you can do
more you can evaluate expressions step
in step in to step over stop debugger
resume basically this debugger is pretty
much what what users see in in Eclipse
okay another feature that has been
implemented is a resource monitor so you
can you can actually see what's what's
happening with your device how much
memory it consumes and is it busy right
now or not so from the ID we run certain
commands on the device parts the output
and build those graphs accordingly okay
api docs you can view them as as a
standalone application here there is a
package installer for example if you if
you want to install some package but do
not want to go to the to the terminal
and install it from command line like
dnf install dash y and then package name
package installer will do that for you
okay this is uh this is it for for the
local demo and I've mentioned that it is
possible to to run xha not only locally
but in the cloud and for for IOT it
brings some goodies but at the same time
there are certain disadvantages of that
i'm going to show you
I'm running the same built on digital
ocean node so it's somewhere quite far
from here and from that node I will
connect to a device that is not here but
located in our office right now so which
means if you if your device has a public
IP you may use a cloud ID to connect to
it but there are some other approaches
which I'll talk about a bit later I'm
going to see how the connection goes so
the device is actually in in Ukraine and
the digital ocean node is i guess it was
San Francisco so it's quite a quite a
big distance
okay let it connect okay so we're there
it's a different Arctic let's see to
prove that I'm not lying yes ARM arm
seven so and with the with eclipse Chi
running in the cloud basically every one
of you may may just go right now to to
that IP address and if you're IOT device
has a public IP address you can connect
connect to it and start using which
means there is no installation there are
no prerequisites anything it's just your
device have any public IP and a browser
that supports web sockets so this brings
me to to the next point
we've done like it proof of concept for
a local device that does not have a
public IP address because there are a
few users want to actually mess with a
home router and make sure that they've
got a public IP address that doesn't
change any time you reboot it so we
started thinking about how would one
connect a local device into a cloud ID
and make sure that they can communicate
so VPN was one of our first steps and it
actually worked pretty well from from
the device a VPN connection is initiated
into the cloud with VPN running in front
of it when a device connects to the VPN
it acquires a local IP address and that
AP address is local relative to the
cloud and when when you're in the ID
you're connecting to to the local local
AP of course that that brings some
disadvantages with it because latency
can be quite huge and that's especially
noticeable when when debugging since gdb
is quite picky when when it started
losing packets it doesn't work properly
but that's that's a very good way as we
believe it's a very good way to do on
board new users because basically in
Doc's you can you can publish a URL like
go connect your device explore like
basic features explore our SDK play
around with it and if you like it you
may do the same thing
locally so yeah just to summarize it
pros and cons of heaven a cloud a truly
cloud ID for for you I et devices is no
downloads instant 21 boarding and easy
third-party integrations like in our
case there was integration with the
Arctic cloud where the devices are
registered and pulling different
information from there and while instant
onboarding and no downloads you
basically skip the six-page tutorial on
how to get a hello world run on this
device so I've done it like in in two
minutes without having to install
anything but the Arctic ID I didn't show
the installation procedure again for the
sake of time but the right installers
for windows and mac which provides
similar experience for windows and mac
users another another pro is a control
centralized and replicable environment
cross-compilation tools are quite picky
and if your if your program compiles ok
on ubuntu it doesn't mean that the same
hello world will compile ok on windows
on on different version of windows with
with eclipse j and this particular build
avec lipsky we we guarantee that that
your program will compile ok because its
environment that we control in we update
i said basically docker image where we
install all of the tools that that
Arctic programs may need and the ID you
may need to the cons I'd refer the
network issues and I've run into the
network issue here with with the local
local network blocking all of the
internal ports so we ended up using
mobile hotspot and using our own network
to connect to your device firewall and
security policies may also mess with
with communication to the device so
eclipse Shh reads Arctic as an SSH
machine so it's like an Amazon node or
any any virtual machine you ssh into and
of course latency are may also play a
better role here especially with the
with a debugging so I think I'm done
here so if you have questions you're
definitely welcome you can check out
source code at github com / code Envy /
Arctic and see how exactly this
extension has been made and yeah check
out github com / Eclipse leche which is
a basis for the for the IAT ID thank you
Oh
and is the sea editor and CD Parker
based on CDT or is it something and you
develop yourself ah sorry once again the
the the the editor and the toga is it
based on CDT now yeah a good question so
feature wise the editor is it's it's a
Ryan editor so and syntax coloring it's
something that comes with a Ryan editor
that we use a little wave wrap it and
use it is there is no code
auto-completion or quad code analysis in
the editor right now at this moment but
eclipsed che supports language server
protocol and there is a community effort
that has already started for write in C
C++ language server that will provide
CDT like features in terms of other
completion code analysis refactoring the
debugger is its gdb its gtb server
running on the device and GD be running
in a workspace and in the IDE we kind of
wrap these commands and display the UI
so there are no estimates on on when C
C++ auto completion code refactoring
code analysis features are available
another option that we that we
investigated but never started is using
si lang library that can also provide
these editor features
okay then thanks for exam</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>