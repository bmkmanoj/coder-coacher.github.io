<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>How to test your awesome iOS mobile application ? by Maxime David | Coder Coacher - Coaching Coders</title><meta content="How to test your awesome iOS mobile application ? by Maxime David - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Devoxx/">Devoxx</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>How to test your awesome iOS mobile application ? by Maxime David</b></h2><h5 class="post__date">2016-11-08</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/mx4ISpaOjPo" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">okay so welcome to this tour in action
session I have 30 minutes to talk about
how to test you awesome iOS mobile
application and Maxim David so let's go
threat to to the agenda so first I will
try to explain why this is a good idea
to test you mobile application and then
we will see a demo application since we
are going to to writes a unit test and
UI test we need to have a sample
application to run our test against it
then we will have a live coding session
about unit tests both synchronous and
asynchronous then we will see a UI test
for user interface test it's loving here
is a live coding session too and we will
conclude by your question so why this is
a good idea to test your application and
well everything you already know about
testing your back-end application for
example is valid so you just have to
make it's exactly the same plus some
mobile specific constraints for example
the Apple review process is long so if
you have a bug into your application you
have to fix it you have to build your
application you have to upload a new
bill to iTunes Connect you have to wait
for this bill to get validated you have
to create a new version you have to
submit it to Apple review you have to
wait for one or today depends and then
you have to release it and you again to
wait like one or two hours to get your
bit propagated to all other Apple stores
and then the user has to install these
updates so it's quite a long journey
between them then the time you detect
the bag and the time that it will be
fixed in production
another important thing is a bag for
example you tap on a button and up get
shut downs immediately it's not very
nice for them for the user and for
example if you are onto a website and
you have a dead link the browser does
not shut down so there is different
between a mobile application and another
application another thing is that UI
elements can overlap to each other for
example if you are tapping into text
field if a keyboard is appearing and you
cannot dismiss it if you have like a tab
bar on underneath the keyboard behind
the keyboard you can't access to other
tabs so the user is aware of all the
other feature in your application but it
can't access it because the keyboard is
not dismissed so this will be fixed with
some UI tests and if the user is not
super happy
it can delete your application in an
easy way
so this for these four constraints will
will I hope it will encourage you to to
make some UI tests and unit tests so
since we are going to write some unit
and UI tests we need to have demo
application to run our tests against it
so its name hash - color and the aim is
to generate a unique color scheme from a
string via hash for example I take LOD
bucks i compute the hash and we get as a
result a color scheme I would explain
later how to to get this color scheme so
let's time for let's go for a demo so
this is had ash to color the application
so you have a text field here so he
fight up hello
telex the sha-1 is computed in a real
time so if I add letters the sha-1
changes and the color scheme changes to
here you can you have the color
breakdown so you can have a quick look
at the color detail and if you are happy
with
is hash you can save it so this is the
first view and the second tab is just
the list of previously saved hash so
very simple app just to make sure that
the unit testing and UI testing will be
efficient so let's start with unit
testing it's a built-in feature directly
in Xcode you will run those tests
through a new target and it's based on
the EXCI test framework and it's like
more like more or less like G units so
you have the same kind of API so as a
true asset force asset equal and so it's
gonna be easy to to to to try and the
main goal of unit test of course you
know it it's to validate the business
logic so given an input does my function
output the right value so this is what
we are going to to try on the on teaser
app so we'll check that the we will
check whether or not the transformation
from the string to a color scheme is is
correct
so let's good so the first thing to do
is to other new targets so file new
targets here I have iOS unit testing
bundle so okay let's make sure that the
language is Swift and target to be
tested is the name of application here a
hash to color as you noticed a new
folder has just happier here is hash to
color test with a new file here and it's
a sample test case but one thing you
have to do before is to go to product
skin edit scheme test and make sure that
gather coverage data is check because
it's not checked we we we won't have the
details of the coverage testing so since
it's a different target we have to
include our main target so let's test
able imports
hash to colors and make sure that the
first step example will run so X that's
a true true and as you notice there is a
little checkbox just here if you can if
you click on it it just runs this this
test so of course the test is a success
this is since it's just an assertion so
we are going to test our main business
object with this ash color item it takes
a hash and its will transform this ash
into colors and the in its method can
throw two kind of errors if the hash is
nil there is a hash error that Neal
exception and if the number of Charles
is not 40 it will throw an inchoate
length so we will make sure that this
method are tested because as you can see
the test coverage is working but it
indicates that this method in nuts is
not tested so let's go and let's test it
as you noticed every method should begin
with tests otherwise it's won't be
considered as as a test so test in its
nail
all right so let's try to instantiate a
newish item with the hash to nil it
should throw an error so let's eat pass
hash color item that Ash error and the
catch let's make sure that the error
thrown is of the right type
so X asset equal e should be of type
hash color item that hash error dots
near okay to be complete we need to
catch all other error and make sure that
if this kind of error are thrown it will
fail and of course we should fail just
after this because it should fail in
issue that go to the to the catch so
let's let's run it the build succeed and
this test succeed so now we can go back
to our test here you see that testing it
nil has been a success and the coverage
should have changed so if we go here
okay so this is green but this other
condition is not tested yet so let's
make it let's make it tested so just
have to copy and paste this testing it's
inchoate length - not valid hash and
this time it should throw an error of
type incorrect length so let's run all
the tests you can run just one test by
clinking just in front of the test or
all the test suit test case if you if
you click on the web on the very top of
the class so let's go back to our
coverage and we are three tests
our passing and this time
this is correctly tested here here here
okay so now we know that if I in it this
ash color item everything is okay but
what is important is to check whether or
not the dedicated color from this ash
are correct so let's take this hash for
example test corals let hash string we
are going to take this hash because it's
a simple one since the six first is a a
a b b b b c CC DD d ee its it will be
easy to to get the color so let's try to
to get some catch let's let hash equal
try hash chlorides m har string string
and if it's fail it should if it's if it
catch an arrow it should fail so for
every catch it should fail so let's
check the errors the color sorry let's
make sure that hash that gets color of
zero is a a a a a
and let's do that for the five colors
that's when the tests
oh yeah thank you
okay so test succeed so doing that we
know that if I constrict ash to color
item I know that the color will be
correct we can do the exact same test
with to check whether or not the size in
the color scheme are correct but we
won't have the time so let's let's stick
to this one other zoos are a synchronous
test it means that every line is
executed but we do not wait for a
callback or something so let's make an a
synchronous test for example we are
going to test if she had method had a
hash method is is okay so I have a
network class here so these are strict
resources which take two parameters URL
and a processing method so the web
service here will call we take a
resource as a parameter and it will
fetch the result that URL a method and
it will execute the resource that
parsing JSON method to get the value so
I have already a method to create versus
for adding a hash let's make sure that
we are not fetching our real back-end
because it's a it's a unit test but it
will actually call the URL so we don't
want to add in we don't want to add a
hash into our protection so let's make
it local and we can take the exact same
hash string
and we can call our web service method
and the results let's say for example we
just want to fail okay so let's run this
test the build succeed and the test
succeed so there is a problem because I
asked for fetching a URL I asked for
hiding your hash and when it came back I
want it I want the make I want to make
the test as a failure but since our test
is not waiting for the callback it just
ignores this line so fortunately xct XE
test as a built-in mechanism to to to
fix this
it's called expect so let's create an
expectation for example had hash and the
test will wait until this expectation is
not fulfilled so we can call three waits
for expectation with the timeout for
example 10 SEC and hence we get the
result we can do expect that fulfill and
if I run it again
okay this time is this the test is a
failure because we have an expectation
we wait for it but until it's fulfilled
we want to to make the test fail so let
met it let make it pass so we just want
to check what the precision method do it
just returns a hash key for the reason
let's have a look at the reason it just
success through hash directly the hash
so if we are going back to the test case
we can assert that the result is
directly the hash
yep thank you
okay so with this life cutting session
we have seen both synchronous and
asynchronous testing so UI test is
another kind of tests which is also
built in into Xcode as a new target and
it's using the same framework XE tests
with an another framework which is
called accessibility and the main goal
of the U is a UI test is to interact
with UI elements for example we want to
check whether or not a button is a table
or not is it enabled can I click on it
and of course we can validate scenario
for example in our demo app we can add a
hash see if the hash is on the list or
we can add a hash and see the color
detail so we are going to do that so
file new target UI testing bundle a new
folder just appear hash - color test so
it's importing the exact same framework
I have a test example here and the
nothing about UI test is the little
recode button here so I can press on it
and this will launch the app as a in a
recording mode so for example I can
click on color and go back here and I
stopped the test so let's have a look at
this test first it creates a variable a
poppy a PP which is an application then
is looking for the color 0 text and we
tap on it then is looking at the
navigation bar for color detail which is
the name of the second view and which is
a button there is a button named add a
hash and we tap on it so if I replace it
so it click on scholars ero and back to
back to the menu so this is cool
I would like to click on the color for
for example so of course I'm not I'm not
it's not compulsory to click on the
record button I can edit my I can edit
the test as as text of course I can
click on the color for and do exactly
the same thing so let's make a vibe for
it let's back button go to this back
button the tap then I go to color 4 and
back button the top okay let's go
as you can see the color for cannot be
shown but the framework will scroll down
automatically and to click on it and it
will fail okay so we will see why but of
course we are not here it's a demo so I
can have a look at my simulator but if
it if it's an Xcode server which runs
the test automatically you we you won't
see what happened so if you go to a test
here test example as fail tap a hash
button as fail and here there is a nice
icon and there is a screenshot of what
happened so this is super convenient so
for example here we tried to find the
add a hash button and thank you and the
hot button at the hash button is not
present because the seg has not been
performed so let's see what happened in
my hash tag stable should perform sag it
it will perform the seg if the current
color is not nil and if the identifier
is view color detail so I may have an
idea of what happened let's go to the
storyboard so this is the transition
name let's see okay
it's not view color detail it's awesome
drunk after so let's make it save what's
this and if we rerun the test
it should bus so here in our test
example there is no explicit assertion
we are not using asset or asset force
assertequals but it's implicit because
if it doesn't find the element it will
fail so ok color fries ok we can do
another test and a final one for example
we can check if the Save button is
enabled or not because if the hash is
empty we could not save an empty hash so
let's check for that test hash or use
the record button
so as you can see here I cannot save the
button the hash so let's try to save one
with oh this mess so the Save button is
here let's make a wire for this save BTN
and we will assert that the Save button
that is enabled is false so at first it
it's false and then once you have just
one char in it it should be true and of
course we can tap in it
so it's it's possible to make specific
assertion in this kind of test for here
it's it's it's it's a nice idea to check
if whether or not it's it's a neighbor
or not but for example asserting if it's
enabled and then tapping into it it will
fail if it's not another so maybe this
line is useless okay so this test
succeed so here we have seen a to kind
of test UI and unit test so now you can
test you your application if you have
any question I'd be glad to do to try to
answer
that's a good question I'm not try and
not tried this but I think there is I
may assume that there is something to do
so the question was how to handle push
notification or outer handle push
notification directly in the app how to
check whether or not it has been
correctly received and I've not tested
it ah
the question was for example if I want
to take a picture you have a permission
question like would you me would you
allow me to access to your photo this is
something I have not tried but I will
check in if you tweet me I will answer
with pleasure yes
well the nice thing with XE test it's
directly built in the Xcode so it will
evolve I think it will evolve constantly
with the future release of Xcode and we
are not sure that the third-party
framework will will will be sustainable
for a long time so I would welcome out
the XE test by the way this code is
available on my github I've made three
different branches one with no test one
with unit tests and why with both unit
and UI tests so if you want to play with
it you can go and the application is on
the Apple Store but it's that's a big
feature but if you want to play with it
feel free okay thank you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>