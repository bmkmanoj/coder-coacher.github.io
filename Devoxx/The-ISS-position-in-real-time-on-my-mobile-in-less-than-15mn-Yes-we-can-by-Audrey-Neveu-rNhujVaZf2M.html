<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>The ISS position in real time on my mobile in less than 15mn ? Yes, we can. by Audrey Neveu | Coder Coacher - Coaching Coders</title><meta content="The ISS position in real time on my mobile in less than 15mn ? Yes, we can. by Audrey Neveu - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Devoxx/">Devoxx</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>The ISS position in real time on my mobile in less than 15mn ? Yes, we can. by Audrey Neveu</b></h2><h5 class="post__date">2017-04-18</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/rNhujVaZf2M" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">I guess himself so welcome to this
session called the assist position in
real-time online mobile in less than 15
minutes to quickly introduce myself my
name is Audrey and the populations at
Stradella taio i'm also the corridor in
France of the works of kids the coolest
initiative in the world and you can find
me on Twitter with this angle so my
channels today will great life called
mobile application which give us the USS
position in real time this application
has to be iOS and Android compatible and
I got less than 15 minutes make it and
so first of all to retrieve this as
position I'm going to use this API which
is an open source of you I really cool
one and which is refreshed every second
so to win the bet I'm going to use two
very cool solutions on the mobile plus
i'm going to use ionic which is a mobile
i braid framework and on the real-time
part i'm going to use stream data i/o
which is a proxy available a success
which turns original PR into a stream of
data so quickly about eric ionic is
based on angular and Apache Cordova so
we're going to make this demo with the
salvation of our neck which is based on
angularjs but a few a second session as
be released in a few weeks ago which is
based obviously I'm Angela but the
logics remain the same so it's no
problem so what does it looks like to
have an ionic application so an ionic
application as it's a mobile i braid
application it relies on a web view
which is basically a browser embedded in
a native application which means that
you will have separated bills for each
platforms you're going to deploy your
application on so as its web you so
browser we are going to use languages we
are very familiar with on the interfaces
side so we are going to use HTML CSS
JavaScript if you want to make some sort
or less you can do it no problem it's
already integrated and then we are going
to rely on some ionic components so
Hynek provides us some
services and components which are ready
to use like for example along the loader
component which has all the logic and
all the presentations already included
so you just have to import it and
declared method on the right place in
your code to open the loader and close
its letter and it works and you can
easily customize it if you want it to
look more like the rest of your app on
the business logic side we are going to
rely on angularjs so for example for the
router we are going to use angular
return and then we will just call us out
to very important tasks the first one is
that each time we would like to access
some devices API so for example if you
would like to use the camera or the
Wi-Fi it's going to be through code of
archives and the second big task for
kodava is to go to compile the
application to this nation platform
destination so it's called value is
going to compile our application for
Android Android and for iOS so now
looking at real time problem usually
when we are speaking about real-time
people suggest to make polling so
pulling is that I'm making a request
waiting for the answer making similar
quest game waiting for the answer and so
on and so forth yeah obviously it can
work the problem is that let's imagine
that the application became very popular
and that each person each attendees of
the conference are going to use it and
pull the API at the same time I'm not
sure the API provider will be very happy
adding his API pulled by seven on droid
devices at the same time so pulling is
not really scalable solution and quickly
enter into the polling magnets because
most of the time so that will not be the
case with the ESS API because it's
refreshed every second but if you
transpose it to a more general use case
most of the time you are going to make a
lot of useless code you don't really
know when you are p is refresh so
probably you will make your retrieve the
same data a lot of times so putting is
that solution so now let's have a look
at web sockets I guess you probably
move out what circuits at least you
heard of it so what forget are really
cool their RB direction also it means
that dialogue does the server and the
client to send that to each other the
support text and binary which is very
cool but when you want to make a
transportation for example and and they
got their own protocol which is a TCP
based protocol but it's a special one
it's protocol with support which
basically open a session which about
binary video regional exchanges it means
that to use it we will have to
reconfigure proxies and not balancer to
deal with what forgets properly
obviously in 15 minutes that's going to
be a little bit hard so what's the gate
is not sufficient for us neither so now
let's look at service went events I
don't know if you have ever heard of
service insurance look okay so if you
don't I get a session tomorrow a tooth
in action when I compare and details
those technologies to racial went to use
which one forward so service and events
are unidirectional it means that only
the server can send data through to the
client and the second thing is that
server sent events only support text so
basically it just completely feel the
need to get forward this application as
we are just going to send text data from
the server to the client and last but
not least it's only conceptually based
on HTML which means that we don't have
to modify anything on our happy ie to
make it work great so now that's the
reason why we will trim that our tire
which is a proxy available of the sauce
so basically you will obtain a streaming
session with the proxy and the proxy
will make the pulling for you so it's
completely transparent phone API
provider that makes big change because
it's not every device is pulling the API
is just the proxy which is going to pull
the API and then send the data to every
devices through service events so that
makes a big change we are did the
dynamic catchy so it means that if you
have your application becomes very
popular and you have new customer
joining the sessions that don't have to
wait until the next pole to retrieve
data again
we try them from the last one and
probably the most important we also
reduced the amount of data exchange by
adding incremental updates so basically
it means that if we're looking at this
kima let's imagine that on the first
goal we retrieve a big document okay
with south and south field and on the
second pole nothing exchange well when
we're going to sing to send anything to
you there is no point to send you the
whole document again so we are just
sending nothing and let's imagine that
on the South Pole only two or three of
those fields of change instead of saying
the whole document again we're going to
send you only what has changed thanks to
G's in touch so decent patch describe a
set of operation that can be applied on
G's and documents so you get for example
remove replace our etc and so if we
imagine that this is the documentary
retreat on the first pole and that on
the third pole only two fields exchange
we will received this instead which
previously described what else changing
a word document and from this point we
can use a decent patch library to apply
it to our initial G's in document so
let's move to the demo and see how it
looks like in real so first of all I'm
going to create my ionic application so
I'm going to tell I onyx Scott ESS maps
so the start key word is here to say
create a new project called ESS and maps
tell him to use the map from plate
because the very cool thing with ionic
is that it tames with a few templates to
help you when it stops oh you're for
example one with a tab menu with the
side inner thigh 06 so here it's a maxim
plate very simple one which is going to
display a map as you can guess ok so
it's installing out all its differences
but it will not be too long it's
initializing the cultivar project so as
we talked before we are based on the
code of the application and it has a
date as well an ionized and I us
application because I'm on OS X so the
problem is
you're not working at all ethics you
will not be able to add an iOS
application to your project but you can
do it with remote tool to get so it's
very nice so let's give in to the
application and run it directly to see
what it looks like so here I'm running
it in lab load the really cool thing
with the lab mode is that it gives us
another view of what our application
looks like in both iOS iOS and Android
so it's really nice for debugging CSS
not very for the rest because it's a
kind of emulator so keep in mind that
you can simulate anything everything you
can simulate for example the location I
think or something like that well some
device is the P I cannot could not be a
belated okay so here we get our
application which is sometimes on ionic
headquarters let's go to see the code so
the first thing my application is there
I'm going to declare to cook you pies my
voyages in there to install differences
i need so i get one difference e to the
stream de lado tuyo GS library which is
a JavaScript ed car with the polyfill
that you can use in every web front end
or mobile application and another one
who the g's in touch library so going
studied in background and so our
application looks like this so if you
are coming at last that's really video
yet a Oaks folder which is coming to all
code of application it's where you're
going to put all your pre and post
computation task you get a plug-in
folder where all your plugins will be
installed so here for example it comes
with a few plugins from ionic like
console or flash green screen is the
screen that you can see when the
application is loading you can easily
customize your customized yours is very
nice resources well you're going to put
all your icons and imagine stuff but the
one that is going to impress us there is
the 3w folder which are which are
several and
director is so CSS image yes and live so
every libery i installed with Power are
going to be put in the lib folder and we
are going to have to look to look at the
index HTML page which are going to
increase and so as you can see there if
you have made some uncle are you should
be familiar with this code we got an NG
app and an NG controller and we got here
a map component and actually this map
component is a simple directive so so it
just basically declares am a person
subject and a map object with our which
are object from the Google Maps
JavaScript API where the first replace
them and to make the map looks a little
bit more relieved incur while you skate
so first we are going to declare a new
position which is a captain of a roll
coordinates and then we are going to
really clear our mouth options and tell
the map to be instantly satellite mode
and deactivates review control which
will not be very useful and here it is
it looks like this okay so now that we
get this we would like to add marker to
follow the SS on our map so it's another
matter object from the google maps api
you just take the position and the map
as parameters and an image so i'm going
to put the image just here ok and if you
are coming back to our application great
so now you can see we get an uncreated
method there which is taking the map as
parameters this on crane method is used
to pass the map to the controller which
was in there so obviously the controller
will need to know the ESS marker to to
make it move so we're going to decorate
now ok
to put it in the index HTML and to pass
it to this method there ok so that's for
the presentation part now we will see
we're going to see how we are making
real time in our application so here I'm
all connected on the developer portal
where I can create a new application
let's call it ESS once my application
has been created a token has been
generated to be sure that only
authorized devices are allowed to see
the data and so I'm going to take my API
here and to put it there to test it so
we're going to see by cutting pad copy
paste this command into a terminal how
it looks like the trimming station with
this API so let's face it there so my
streaming session is opened i received
the first event called data so that's my
initial snapshot of document and then i
received patch in the design page format
where synchronously and the really cool
thing here is that once i get that i can
go back to the mighty I section and so
here my appeal has been automatically
provision eyes by my calculus but
obviously you can just manually provide
call them and oh by API 2 i'm going to
change my pulling frequency have they
did to one if I was having a TP arrows
or query parameters I can put them there
and if I'm coming back to my streaming
session I can see that the following
frequency has been automatically updated
without closing and reopening the screen
great so now let's go back to where
application so we are going to first
import our two libraries that we've
previously installed so the trim data
library and the g's in touch one and
then in the controller we are going to
create an even force so first of all we
are going to declare a token
vapi we would like to stream and yeah I
should out there ok and that's my FB I
okay then I'm going to create an
eventful subject by calling Trimble ha
create even sauce with dapi as
parameters and then the token and once I
get this subject I can register to
several callbacks the two who are really
interesting to register to our first on
data which is a function that is going
to which is going to send us the
snapshot the initial snapshot so then we
can say is curved at ESS position equal
snapshot then we can register to the on
patch call back to receive sketches and
here we are going to use that word is in
patch library so we are going to set it
in touch that apply first we pass the
original didn't document as parameters
and then we pass the patch once we get
this we need obviously a method to
refresh the map which we are going to
call there and there and once this is
done to restart the streaming session
we're going seven souls dot open and
let's go back to our application and see
what it looks like ok so it does not
sound stream de Rio so let's see ok I
guess I was not in the correct directory
correct directory terraria in the
correct directory sorry to install my
differences so it should be fine now and
I crossover finger and it's above the
sea I fear that the problem with with
earth you know there is a lot of C so
most of the time it's above the sea
we should see it moving come on yeah so
it's moving but very slow 30 so thank
you very much coal resources are in LA
online you gotta get up with all the
code and a blog post to explain every
step if you want to try it by yourself
and we got a boost so you can come and
visit us we get postcards and stickers
and nerves and we should buy some candy
soon to feel free to come and say hello
and if you have any questions will be a
defensive thank you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>