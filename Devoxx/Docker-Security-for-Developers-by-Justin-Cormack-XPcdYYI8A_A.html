<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Docker Security for Developers by Justin Cormack | Coder Coacher - Coaching Coders</title><meta content="Docker Security for Developers by Justin Cormack - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Devoxx/">Devoxx</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Docker Security for Developers by Justin Cormack</b></h2><h5 class="post__date">2016-11-11</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/XPcdYYI8A_A" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello good morning everyone I'm here to
talk about docker security for
developers just to give you background
this picture background is actually a
picture I found last year it always
reminds me that we haven't been making
large complicated systems just recently
though we've been making them for a long
time this pictures about from an advert
about a hundred years ago from a steam
engine components manufacturing plant
and and so I kind of complicated systems
are not new we're not there's a lot of
history we can link to it but I'm not
going to talk about that too much today
um I work for dr. in Cambridge in the UK
and I'm a maintainer on the docker
engine so feel free to ask me all sorts
of general docker questions later on as
well as security related questions I
work quite a bit on security related
things but also other other bits and
pieces I've worked on docker for Mac
duck of Windows and products like that
as well so have you got any questions
about them you can come and harangue me
later where the Cambridge office is
actually the one of our two European
office we also have Paris office so
Dockers quite a is a European company in
origin it was originally found in France
and so we it's nice to be part of part
of Europe and they've got a lot of
people based here before I went to
doctor I wrote of ebook helped
contribute to an e-book on docker or
particularly writing that security it's
kind of old now dr. moves quickly so
it's not the most up-to-date book on
docker but
if you're interested check it out so I'm
going to talk about security for
developers because sometimes security
seems aimed at production people and i
think that there's a lot of reasons why
developers should be concerned about
security things things have really
changed in the last few years in
particular production and development
are not really silos anymore you know we
don't you don't just write some code
throw it over to your operations people
and say run that and never hear hear
anything back again you know we have we
have DevOps which is originally from you
know created in Belgium and we have dev
check ups which is development and
security and operations all working
together that the aim you know to have
teams of people working to create
quality software and understanding that
some people might be more expert in one
domain or another but we're all trying
to build something that's as good as
possible and it meets the objectives of
the project and is and security is an
important objective lots of you know
there are there are people trying to
hack yourself we're all over the place
for all sorts of different reasons they
might be doing it for money or for
vanity offer just as a way to hack
someone else or whatever it might be
there's lots of there's lots of reasons
and no one's no one's immune from
hacking attempts and often the severity
of these is pretty severe is pretty bad
that that isn't um you know you want to
try and not be the person who causes
these problems and as developer it's
that that's your responsibility to and
part of this is security as a process
rather than just a kind of em you know
we built the product and
and at the end someone asks is it secure
and you say yes and that's the end of it
you need to be constantly thinking about
security as part of your development
process and learn from mistakes as well
rather than you know when something does
go wrong rather than blaming someone for
it and just saying I your code was
terribly with someone hacked it just
learn how you can improve in the future
and there's a lot of things in security
that a good practice that not it aren't
everywhere not everyone does them and we
can you one of the things that are going
to talk about later is just how we can
actually spread good practice across
software we're developing and although
this talks kind of about docker many of
the important you know the important
things are not actually about products
at all they're about processing people
so the first thing to think about when
you think about security is how is your
organization set up to do security
effectively one of the key things is
trying if if if your organization is if
that's possible in the organization try
and embed security people in your teams
at for example that docker internally we
every every product that we build has a
security person assigned to it who comes
to the meetings and tries to understand
what the security issues are with each
product they spend more or less time at
different stages and the product some
parts of the process they're not needed
much but some parts they feeding really
important and crucial design decisions
about how things should be done how
authentication should be done look at
the whole structure of your code and and
understand where the security issues
might be and it's it's incredibly
valuable to have those people available
and
not just sitting in a inner department
of security people who you don't talk to
sew em try and try and get a security
person on your team for your project
even if you just get a little bit of
their time it's better than nothing and
then try and make that a kind of the way
things work make sure everyone
understand you know once you have a
security person or someone who's
responsible as it is make sure that
everyone else in the team understands
you know what what they're thinking
about this project is where you know
what what they see is the risks and what
the what the threats are and so on and
so that everyone has that in the back of
their mind when you're developing any
carriage that I'm touching something
that's we thought about that is
important for security and post mortems
as well if something does go wrong don't
just blame someone for it but sit down
have a meeting discuss what happened how
you're going to change not just the
product but the process so that you
don't end up where you did understand
what kind of testing you were missing
that what it could have caught that you
know come out of that come out of a post
mortem with actionable items that that
you can really that you can implement
and make sure that you do implement them
and that every you know that every every
problem is a part of a learning process
and a way to improve so the
organizational bits really think about
these long before you actually am you
know think about any code or any tools
people often start with tools and tools
of the wrong place to start it's also
kind of way you go to after you fixed
organization security tools can be kind
of terrible one one particular thing
that comes up with some tools is that
they automatically generate hundred page
PDF documents it they think you've gotta
read which is incredibly unhelpful
because no one ever reads 200 page PDF
documents and automatically generated
ones are even more boring than
anything else that you've ever read you
actually want actionable test cases and
things like that you know that you you
know tests that are passing or failing
or you know why they're failing and not
not things to read testing testing for
security is something that people often
don't do it don't do nearly enough of
but like any other kind of testing
testing gives you the confidence to make
changes and know that you're going to
break something and knowing that you're
not going to break some security thing
is they you know kind of really really
relaxing that you can just not worry
about it because you know that the tests
are there and they're going to test that
the important security properties if
your code run Joe and so you know it
even basic things like making you know
tests that make sure that you're running
ssl on your connections and so unlike
you know just you didn't accidentally
change an option that turned SSL off
somewhere you know it just even basic
things like that it doesn't have to be
complicated testing but just having
tests as you know it's just one of those
relaxing things as a developer I highly
recommend this book it's just come out
if you've read the Phoenix project it's
written by the same people as they
they're really nice people and very good
they've spent five years writing this
book so it's worth spending a few hours
reading it it's got a whole section on
security which I recommend you read it
it's a really good book just out a few
weeks ago and slightly hard slightly
just just about available i think my
copy arrived a couple of days ago how
does docker help in all this I mean it
doctors are you know it's at all like
any other tool but I think it is not
going to help your organizational
process necessarily but I think what
I'll talk about in this talk is is some
of the things that we try and do and
part of this comes from the philosophy
we have
at darker which is to try and make
security usable because security is one
of these things that if it's it can be a
really complicated option you can have
incredibly if it's incredibly
complicated to use basically then no one
will actually do anything so we we
really have this aim to try and try and
make the security options usable I think
I mean this is difficult because a lot
of the stuff we're dealing with this
kind of quite low level and technical
and I think there's a load more work we
can do if you're interested in helping
out remote dock as an open source
project and contributions and security
are incredibly valuable and a lot of a
lot of the important developments have
been from contributors from you know all
over the place and they've helped make
it a better product so if you want to
work on on this and you're interested in
usability of security there's there's
loads more work we can do and there's
more stuff that is going on come talk to
me if you want to if you want if you
have things you've you're interested in
and want to work on um this is from
there's a really excellent report on
security for containers that I
accidentally haven't referenced here but
which one of which compares darker
against other container runtimes and as
you can see the the particular bit I'm
probably we're probably most proud of
I'd say is the bit sang strong defaults
or default you know these are these are
areas where out of the box it does the
right thing and we really try and make
those things work for users completely
just as you in so that you just get
these things and you
to really try hard to not do the right
thing and graduate over time we hope to
change some of the things that are
optional or coming soon to also being
strong defaults we'll get there we'll
get there soon I know that this is stuck
a 1041 11 which still we're still
working on these things getting them
getting them to be better but but yeah
strong defaults is what we were stronger
folds and ways to tweak it to make it
even stronger of you if you if you can
so we kind of like to divide doctrine to
build ship and run so in terms of
security i'll talk about the the three
phases so um as developed when you're
building things the we spend a lot of
time on the doctor official images for
different for different things these are
there's a there's a whole team of people
who work on official images and they
spend a lot of time making sure that
these are a really good point to start
from if you're if you're a developer so
if there's an official image available
for what you're using your you know I
strongly recommend use it the first
thing than with the visual images is
that they get updated for security
issues really really fast there's a team
that sits there and basically looks at
every security issue that comes out so
for example the containers based on
debut and they'll look at every security
issue in debian and make sure that it's
fixed usually within hours you know as
in in the official images so you can be
absolutely sure that that the security
you know that any base image security
issues are fixed or anything you know
what
that I'm if there's an issue with the
Java Runtime using of the my sequel
database reason whatever the security
issue in that that will be fixed really
really fast and or there's an issue in
some dependency that the thing drags
along you know there was a you know curl
the curl tool for example had 12 serious
security vulnerabilities few days ago
you know it's a bit curls bundled into
all sorts of tools as dependency of all
sorts of things so those get updated
really fast and it's them so you know
that as long as you as long as you
rebuild your your images from the
official images as soon as they get
updated that you'll have security
updates they also try and have sensible
security defaults built in and they try
and normally try they try to be as
configurable as possible so you can you
can override any of the things in as you
use them so even if you don't use them
it they're worth actually looking at you
know if there's some reason why you you
need to do something differently for
your content at least see see what's
there look at the guidelines and have a
look and but also make sure that if you
build images yourself that you
understand how to do you know that
you've got timely security updates and
so on the the guidelines are kind of
really helpful and it's there's a
there's actually a huge amount of work
which is kind of invisible that goes on
there making sure that those are as good
as possible they're also all open source
you can go and if you've got a problem
with them the docker library is the
github repo where everything is and feel
free to raise issues complain about the
fact that it doesn't do exactly what you
want or whatever and contribute fixes
that if things are not how you need them
to be for java there's a lot of fish
images both for OpenJDK and for IBM Java
there are currently no Oracle Java
official images because of the
redistribution things that may well
change at some point but I'm not sure
about that but generally there were lots
of unofficial Oracle Java images on
docker hub but I for legal reasons I
wouldn't recommend you use them there
are generally forgot official images
there are two sets there's the ones
based on debian or a bun two and the
ones based on our part in Linux which
are generally much smaller and light
more lightweight if you can use the
Alpine the next ones by all means do
save hundreds of megabytes of downloads
every time it's a boy or always makes
life easier of the things are smaller
and generally the Alpine ones as well as
our planets is a smaller also tend to
have a more minimal config so if that
works fee that's great if you need
absolutely everything you might need to
use the other ones um then so you've
built your you've built your software
kind of in darker you have a they next
thing you want to ship it doc has spent
a lot of time working on docker content
trust and the notary tool which is
basically an image signing tool that you
can use for all sorts of image signing
it's based on a a specification called
the update framework which was
originally designed for updating tour
clients so basically the tor browser
bundle basically looked at the the way
that image signing work for things like
package management and which generally
things like gpg keys and decided there
were a bunch of problems with it one of
those problems for example is that once
you've signed something it remains of a
package its remain signed forever and so
someone can give you a an old image
maybe change its name and so pretend
it's the latest version and say this is
it's a sign package run this it's fine
but actually it's a sign package with a
security vulnerability in it from bill
that's what's fixed long time okay but
this is not version it was signed at the
time but there's no way to undo
signatures so dr. Conte entrusted and
tough basically have a have a time stamp
on the signatures and you can basically
invalidate them and so that there's a
window of time after which basically you
can be sure that old old packages are
invalidated so it's kind of the
specifications kind of complicated if
you're interested there's a there's a
website the up in court the update
framework dot org I think which goes
through the specification but it's um
it's relatively easier to use there's a
home there's not a we've been kind of
rolling out support gradually that the
next stage of it is that at the moment
all the official images are signed and
the next stage which will be turned on
is that ducker will always check the
signatures for the official images but a
lot of people are starting to use
signing for their own images and there's
a whole set of things you can do so you
can for example have multiple signatures
on the package that signify that various
different stages have happened so you
can have you can have the CI system sign
the package to say that it's actually
passed its tests and then you can have
different peoples on it and then you can
have your release price
let's check that all the right
signatures are there and rejects reject
gage production if it hasn't been
through all these processes so you can
desert you can build process around
validating that that that the code
you're running has gone through the
right processes and you can have that
I've got a Yubikey here you can use your
keys to do hardware taken signing for
example and so you can be make sure that
your keys are not compromised and
there's a hole there's a whole growing
set of process and tooling around this
to come on if you if you're kind of
interested to come and you know do talk
to people who are working on this week
and get in touch and and look at tooling
but so it's part of our default security
thing that the next stage is that
official images will only be downloaded
if the signature matches at the moment
you have to turn it on and explicitly
yourself to check but that's going to be
automatic soon as part of the whole
let's do default security correctly idea
and then gradually we're going to you
know encourage people to enable it by
default for their production systems and
so on so as a developer think about
image sign excited and the process and
how you might want to incorporate this
in your processes image scanning is also
this incredibly useful tool is still in
free trial on docker clouds so if you
create account you can sign up for the
free trial and try it out on your own
images basically it's a there's a few
other there's a few other products to do
this as well um but the the service on
dr. crowd i recommend you look at just
to try out how it works and see what
what this tooling can give you here's an
example
of an image I picked out which is an I
can't remember it was actually um I can
but if you go into Tokra this is the
interface you get it it'll show you
basically if if the image you've
uploaded it has any problems and it'll
tell you exactly what they are written
and what they are so this image had
problems with pearl G lipsy and you tell
linux and no problems with the other
things and so it's got this critical
critical vulnerability from 2013 which
hasn't been fixed in pearl and some
critical vulnerabilities on 2013 and
2014 which haven't been fixed um and you
can upload basically any any docker
image you like and have it scanned and
just how you get an output like this and
it's basically incredibly useful in
order just to see what's going on what's
it what often you don't even realize all
the things that are inside your image
because they are dependencies of some
other tool and to have did great you
know clickable detailed information on
on what the actual things that are
inside you're in a jar it also gives you
as a bonus it gives you the licenses the
components so you can see if you're
respecting the license terms of the
things you're using as well which is
kind of useful and these are images of
rescanned on a regular basis so new
vulnerabilities are found it'll
highlight them later on there isn't yet
an API but hopefully there will be one
soon so you could incorporate this into
your CI flow and make it check to see if
those vulnerabilities in your images and
I'm only sir it's a manual thing I think
they're they're working on an API known
issues are a huge problem a report in
2014 said that looking at data breaches
i found that
ninety-seven percent of them were
accounted for by already known about
issues and 88 of the issues that were
because the ninety-seven percent of
exploits were over ten years old so
these are things you know even older
than these ones and also organizations
use a huge number of components I mean
the average organization you insist I
used eighteen thousand different
components at which only seven and a
half percent had known vulnerabilities
but that's an awful lot of different
components and so this kind of tooling
really gives you something that you can
actually just look at and go okay I this
is the seven and a half percent of
things and these vulnerabilities are ten
years old and I can fix them I can just
update these components that we're using
it can find things it can find
components however they are actually
they get into the image it can find
things that are statically linked it can
find things that are dynamically then
you know it can find things that are
embedded in inside another binary so it
actually scans the binaries and looks
the signatures things so they don't have
to be things that you think you've
installed they can be things that
accidentally got installed by dependency
that you didn't even know about so
because lots of components turn out to
maybe use embedded sequel aight for
example is a common one which has had a
bunch of vulnerabilities so you can that
this stuff is actually not that hard to
fix it's really just a matter of being
able to be knowing knowing there's a
problem and being able to just rebuild
that and then that actually gives you a
huge sort of peace of mind that there
aren't known problems that are caused by
other people's software making your
software exploitable and then so that
kind of it's it's just in having these
tools just easily available just click
on have a look it's here really useful
the API would be even better
i'm kind of drunk push them tests so
that the api scenes because i really
want to use it for a month for my stuff
then run time the number one thing
probably is don't commit secret keys for
your services and things into your
source code repository and don't commit
them into your image at runtime either
if at all possible make sure that
they're there is well hidden as possible
try not with them environment variables
because you can read environment
variables from for other processes quite
easily if you've got any kind of root
access arises that user you can read
other processes environment variables
there's a bunch of key storage
mechanisms hasha cops vault is probably
the most widely used and what these do
is basically give applications an API
that they can call to get to get hold of
secrets that they need and the secrets
are stored encrypted the applications
are time limited on the access they have
their api's for all those languages
that's really easy to implement and it
also deals with things like key
rotations so for example you can you can
make sure that all your SSL key keys are
rotated automatically and the
application can get new ones without
having to build all that into the
application the next release of docker
is going to include a built-in secrets
management because we'd like to make
things even easier for you I think it I
think it got merged last night but on
one hundred percent sure but it was kind
of we're just in the future just about
to insert the feature phrase for
documentation boost the initial part of
this is definitely getting in there's
more bits to come which
we still need to work on this is secrets
at runtime for daca sworn services
initially but it will be expanded to
cover ducky run and docker build because
lots people need to do things like add
keys for accessing things at build time
as well we know that we know that you
need that this is what the interface is
going to look like you're going to do
soccer secret create say to add your ssh
key and then you can create service
using with that secret and then the the
surface can find it in run secrets in
the file system so it can find that key
and use it and then you can the keys are
any stored in a read-only memory file
system so they never committed to disk
they're stored encrypted inside darker
and distributed using the built in dhaka
swarm ssl encryption that it uses for
everything a distributed to all the word
all the different nodes in the cluster
and you can also update them later if
you need to rotate your keys or anything
like that so the idea is to try and make
it as as simple as possible to use and
you know it's you you still may be used
you can still maybe you may want to use
external turning like full but you don't
have to potentially you can use the
built-in tooling as well so there's
there's something built in you can use
um um you still might want to use walk
because it's got extra features awesome
but at least there's an option that's
better than sticking it environment
variables or committing into your image
or any of those kind of mustard mistakes
that you that people tend to like well
if people don't have any options and
it's difficult people okay with easy
option so we want to provide an easy an
option that's so easy that you don't
have to
do the insecure things the kind of
guiding principle that you think about
when you're thinking about security is
least privilege don't give any program
more access than it absolutely requires
and this is something you always need to
think about is you know what if you if
you give a program more access than it
really needs then any when anything goes
wrong people can escalate privileged
through that component you know so if if
for example you're you're using AWS
there's a whole access control thing but
you you know if your program just needs
to write to an s3 bucket just give it
access to that one s3 bucket don't let
it be able to create and create more ec2
machines on ec2 and you know things like
that so um we always try and think about
a way to just just give us something
component the access it actually needs
because then it basically means that
when when things go wrong it can't do
anything that it or if someone gets
access to it or you can use it to do
something else it can do can't do
anything but obviously to do this you
need to understand exactly what what
what your application requires and these
access to and I think that one of the
one of the nice things about micro
services and some small services is that
it makes them it makes a code actually
understandable as a whole thing so you
can sit there and you can actually
understand everything your component
does because your component isn't doing
apps you know it's not a huge monolithic
thing that's doing what what does this
do well it does everything it accesses
this it creates these it talks to these
three hundred different services and
these be able to do everything
generally a monolithic service does need
to do everything we talked to everything
and have all the privileges because it's
monolithic and it does everything
microservice is a great from this point
of view because you can look at them and
you can say this component sits in
between these other components it gets
input from this one it talks to these
three it authentic this is how it
authenticates to these these processes
so they know it's it it's the right one
and this is um what it is to connect to
on the network and you can probably
write down you know if you can write
down on a page everything it needs to do
then it's much easier to understand how
to do least privileged bekhoon so I
think that it's Michael service is
really really beneficial from from this
point of view as a kind of i can
understand what things do i can write it
down on the on a short piece of paper we
can all look at it and say well this is
how we make sure that it can only do
these things that are on this list and
how we can add tests that is only doing
those things and how you know gradually
over time it might these things might
change because we modify our code but
the change process is manageable because
it's not really doing doing too much it
being able to in your head now when
you're working on one thing the full
collection of things it actually does
also most tooling easier you can kind of
or use automated tools to understand
this so you can create the sort of check
fist where you know you can list every
other service that your service connects
to whether it's you know whether it's
inbound or outbound you can look at what
authentication and encryption is used on
these connections where the keys come
from where the access tokens come from
you can say which untrusted user data
are we getting in these things you know
when because a lot of Filner abilities
come from accidentally trusting what
should be untrusted data that comes from
potentially an attacker so is your
service exposed to the outside world or
somewhere where there might be some
degree of some amount you might not
trust it or some way that some user
could put taser in you know it's maybe
it's it was got a public HTTP m point
and you're talking to it then you must
be extra careful about those requests
because they the user could change them
so they've got unexpected items in what
kind of secrets what secrets does this
particular part of the service need what
you know as I said on AWS what cut what
does it need to be able to do is it need
to you know just access one s3 bucket or
does it need to write two other ones if
if your if your service needs to do lots
of different things you know if you look
at this and it's and and this is
complicating it doesn't fit on one page
then maybe it should be more than one
service maybe it's a good opportunity to
break it down and some smaller if you
don't know the answers to these
questions again you know it could be a
good time to do you know do code review
try and understand a bit better what
your what this code that you've
inherited is maybe maybe it's a some
code that's been around for a long time
and you don't really when you go to work
on it you don't if you don't immediately
know the answers to these questions when
they're not in the there's no
documentation in the repo maybe it's a
good time to write some documentation
and sit down look at the flow look at
the connections of the kind trying to
understand what what it's doing and see
and then look at in you know look at
what secrets it's actually getting
versus what it needs and see if they're
too broad I would see if there's cases
where there's untrusted data coming in
not being careful enough you know so I'm
so basically he spent some time
reviewing the khaid understanding what's
going on and then containers are a great
way of implementing least privilege and
I think that sim is kind of important
the first thing containers do is they
restrict access to files to just the
ones inside the container and not
everything on the host which is you know
just a simple example of least privilege
it doesn't need to access service s
files on the host and it you know you
have volumes and you have the local
files and they have everything that the
container has so containers containers
are in many ways a good kind of
automatically implement some parts of
least privilege you have to explicitly
publish network ports with docker
otherwise it doesn't have external
network access so you've got that point
where you can look and see which ports
are being published and you say oh well
those that those are are those are the
inbound connections and you know these
are points that we have to look at from
a security point of view that's review
what these connections are there not a
magic thing that will solve all your
problems about security at all but they
their help they will help you along
understanding understanding how this
process works how your software's
working what it's actually doing if you
if you're not using docker and you're
thinking about it that process of
actually putting things into a container
and and working out you know which which
ports to publish and things will help
you along with with this process a
little bit and looking at you know
what's in the container does it have
stuff that it doesn't need why you know
why is everything why are we building so
much stuff into it into this container
you know it should will also help you do
this another thing we spend a lot of
time doing is
thinking of is working out some
intelligent defaults for containers and
ways to customize it if the defaults
don't work for you so we have a whole
bunch of tools which I'm happy to talk
about in loads more detail if you've got
questions so we filter some system calls
if you don't say that you explicitly
that you need them to make sure that
your container can't do things which are
for example normally only used by this
kernel exploits ah and so if someone's
managed to hack into your container and
is trying to do these things we will
often norway's but often have protected
you through through this we have a list
somewhere of the type of known exploits
where we either have or haven't
mitigated it through our security to
faults and we kind of look at every time
there's a there's a new kernel issued to
see if what we were doing helped you or
not more and and well again how we could
it in we have discussions about how
whether we could have done something
about this that we didn't you know you
know have a we try to have a little mini
retrospective around the major security
issues in the in the linux kernel and
whether whether we there was something
we could do there's nothing whatever
something we could do longer term to
miss get this kind of exploit and um
sometimes there is sometimes there isn't
but you know it so again it's part of
this ongoing process of trying to make
things work for the user we apply
apparmor selinux profiles if you're
those days reason you're using supports
them generally open to users are Palmer
and Red Hat's users selinux so it's kind
of a bit fragmented so I'm uniquely we
have two different things for different
distress and those protecting in
slightly different ways which is not
ideal would be also try and protect you
even if your distro doesn't
use either of these we restrict the
looks capabilities which are basically
kind of different aspects of privilege
that lurks gives you you can add you can
add more of you absolutely need them but
you know try and avoid requiring
anything that's non-default because the
defaults are are there to help you to
help your security and they have kind of
subtle ways in which you can escalate
privileged quite easily with that with
some of the things if you change them so
if you use the mocha run- most
privileged that basically lets you do
anything but it really shouldn't be
doing that in production it's useful
development tool but it's really not
helpful in production at all there's
also user name spaces which I think I
don't know phil was a race around
somewhere he worked on these Oh swm
these basically let your container think
it's running as root but it is not
really running his route so again it's
um reduces the amount of privilege but
still kind of lets it do a certain
amount of stuff that that's that's amore
privileged but while actually reducing
its privilege the report from gartner
said there's an application deploying
containers are more secure than
applications deployed in a barrel
prating system I think all these
defaults and the actual structure of
containers they don't a complete you
know they didn't solve all security
problems as I said most of the security
problems are about process and things
that you need to solve as a developer
and as an organization but um containers
definitely help companies like IBM are
deploying container based public clouds
which is probably the most hostile
environment where anyone can run any
code and they're happy to do this in and
containerized in very
with the right configuration and set up
so I'm there are always you know there
are always problems security problems
but containers really can help you can
help you along on the on the kind of
security journey and they're probably
the easiest way to um you know kind of
get started and think of and start
thinking about this process because of
all the things that we've tried to we've
tried to build in then but but never
forget that it's you know it's all about
your development process you the
problems that your particular
application has the risks that are the
you know lots of security issues are
completely unrelated to anything a
container can fix if you know if people
can I you know talk directly to your
database through your website and access
things through you know um sequel
injection attacks or something like that
then nothing nothing is going to help
you and you need to spend time thinking
about you know as I said before about
what's untrusted day so what's coming
from the user where you um what kind of
access does your website have to the
database howhow restrictors it can it do
anything can it you know do i it doesn't
compare then just need to be able to
read and read stuff from the database or
does it have to have write access can I
can you restrict the right access can
you there you can you a runtime check
the tote that the sequel queries that
you're sending is a database is the kind
of things that you expect to be sending
and you can you can do runtime checks to
make sure that they're that they're not
the not they're not completely
unexpected queries you can do monitoring
of things and just see if things that
are out of the ordinary happen
and just kind of be alerted and have a
look and see if something peculiar is
going on um there's a developer you need
to be thinking about how you you know
how when you're building something you
know how do I tell if someone's try the
trying or succeeding in escalating their
privileges or doing something that I
your service didn't do that you you know
view them if you try and do least
privilege but you can't always
completely control exactly what things
can do because it's complicated at least
you can modest you can monitor rather
than just assuming that the world is a
perfect place and everything's running
exactly as expected time for questions
do what this my presentation will be
available on with Daka pool as soon as
I've uploaded after after this feel free
to email me if you have security
questions or issues feel free to either
email me or if it's a real security from
you can well security at TOCOM it's a
vulnerability if you feel free just open
issues on the docker github issue
tracker and if their security related
are quite likely being me who answers
them if you just got feel free to ask
questions and things like that as well
because we know that it's getting
security right as hard and we're happy
to help people out and it's noting it's
really important to try and help
everyone along and this kind of journey
of making making every application more
secure and trying to not be the person
who uses software with old security
vulnerabilities and makes the kind of
obvious errors at least let's try and
you know at least try and stop the basic
things that account for most of the
vulnerabilities and try and try and
improve our processes to deal with the
more difficult things as well over time
but yeah if you want to contribute and
that's really really good as I said a
lot of the security changes in Dhaka
come from outside people and there's
loads more that can be done and if
you're interested in working on things
like that but check out some of this
stuff and try and try and improve your
um security processes and and I'll be
around if you want to ask some questions
afterwards or if you've got questions
time for questions now as well any any
questions yeah yeah I hopefully I think
we're planning to add support to it for
daca for mac and windows as as soon as
possible that the only the reason we
hadn't done it before was the docker
compose didn't support the keychain
properly in all the 1.9 release of Dhaka
combos which is out next week does so
that was the kind of blocking thing so
hopefully yeah hopefully everyone can
switch to doing that because it yeah
it's a much more much more useful and
see here yep the out of the box yeah
yeah so yeah the linux on on linux yeah
we do probably need to i know that
someone is working on linux integration
for making things kind of work well for
red hat initially so i'll make sure that
there that that's one of the things they
pay work on i think and then I think
they will
be working on taking it for a bun to as
well which hopefully will be and and
debian and so on because yeah but i
think it was kind of delayed because
component because dr. Campos didn't
support it lots of people couldn't use
it anyway so we couldn't really force it
to be the default so it's kind of
annoying but now that's fixed yes
absolutely is basically yeah it's yeah
the the current the non keychain
solution is as you say is it's a
trivially it is it's just a base64
encoding of the username and password
which is not at all what you want but
yeah feel free to open an issue on on
dakka dakka and say it's two
difficulties on linux and and we can
work out how we how we can get that
fixed because it is yeah absolutely I'm
important yeah I think a lot of the
inherited things turned out to be kind
of not that greater design and I think
that probably less things should have
been inherited or things should have
been explicitly marked as inherited
rather than just inheriting by default
and I think that the I mean my advice
would be to generally to if most things
is not to use exposing images that
you're inheriting from and just use them
in the final image
but again you feel do raisin if there
might be an issue already for having a
way of turning it off but if there's not
it's definitely something that's been
discussed with reference to one
definitely something else in the
dockerfile that is really inconvenient
of it and and I think we've added some
ways for some of the things if a
disabling inheritance but I not sure
what the current status with expose is
but yeah I mean for the moment I think
it try not to put it in the base image
at all as but some of the I mean some of
the things like the engine X base image
do have expose which again means you
might if you do once change that
behavior you might you might have to
fork the base image to change that my
which is kind of annoying so yeah it
definitely should be improved it's also
probably quite a fun if if you want to
contribute a docker that's something he
could work guys not it's it's actually
quite probably quite a fun begin a
project because it's not um I think we
could probably work out a design quite
easily and then actually implementing
it's not it's not that difficult it's an
and it's everyone yeah everyone knows
that it should be done ok well we're
almost half time feel free to come and
ask me questions any time I'm around or
remotely or whatever um yeah thanks
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>