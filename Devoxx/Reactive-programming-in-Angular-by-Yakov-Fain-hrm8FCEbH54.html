<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Reactive programming in Angular by Yakov Fain | Coder Coacher - Coaching Coders</title><meta content="Reactive programming in Angular by Yakov Fain - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Devoxx/">Devoxx</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Reactive programming in Angular by Yakov Fain</b></h2><h5 class="post__date">2017-04-18</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/hrm8FCEbH54" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello everybody my name is Ayaka Payne
and today we will talk about angular
first of all couple of words about
myself actually I'm a Java developer for
many years and always last two years I
work with angular 2 in particular it
started when we wanted to migrate our
projects mmm from Adobe flex if anybody
knows to JavaScript and we couldn't find
anything that is even close in terms of
productivity to Adobe flex so finally it
seems like we found a framework which is
angular 2 and typescript recently we
published a book and down there there's
a promo code if you want to get it at
manning at the discount of 40% so what
are we talking about today
today I'll start with explaining is the
basic of reactive programming an RX RX
javascript and then we'll switch to
angular and see how angular is using
these constructs so rxjs in particular
rxjs 5 the latest version of reactive
extensions library by the way it's
written in typescript as well is
integrated into angular 2 when I say
integrated I mean it comes with it and
it angered two users this uses it
everywhere it's a library in general
there are multiple versions of reactive
extensions libraries for different
languages it started back in 2011 I
believe in Microsoft and they created rx
net and it became popular and it was
migrated to all languages including Java
and Python and PHP and you name it Swift
everywhere so the good part about rx
extensions libraries that you don't have
to change the way you program if you
think that you want to use some reactive
construct at this particular place you
use it here and only in this place No
it's not changing the way you program
you add library and you use it let's
talk about the main players so to speak
or main classes main functions in our X
and the good part is that if you are if
you learn our X principles in any
language you can easily switch to a
different language and our X will be
very very similar over there
the names of the classes may be a little
different but the principles are the
same
so observable what is observable it's
the it's a data string that comes at you
the data that are pushed to you over
time time is important part over here
one element next element next element
and your program reacts to it so
observable is the class or a function
depending on the language that will set
push data to you observer is a class or
a function that knows what to do with
the data
observers sends the data sorry
observable sensor data and observer
handles the data subscriber subscriber
is something that brings together
observable and Observer so until
somebody subscribes to to the data you
may not get any data subject subject
it's a combination I know this is a job
a conference so I'm sure many of you
used to work with JMS for example
pops-up concept right so you can have a
topic over here and you can publish the
data to the topic and subscribe at the
same time so subject is a similar
construct you can publish as well as
subscribe to operator this is where the
power of rx libraries is as the data is
moving to you you can handle the data
and route you can write a bunch of
separate functions and you can change
them together and
the data is moving and it goes through
these functions which are called
operator until it will reach a
subscriber and we'll see how this works
let me show you a simple example so you
can relate to it
say you have a some machine a printing
machine that prints magazines and
somebody delivers to you these magazines
who is this somebody it's an observable
every item delivered to you by an
observable in this case let's say it's a
women's magazine so one item next item
next item observable is pushing data to
you and there is this couple Brad Pitt
and Angelina Jolie Brad Pitt has money
to subscribe to magazines right but Brad
Pitt doesn't need women's magazines on
the other hand Angelina Jolie has no
money to subscribe right but she knows
what to do with this magazine so Brad
Pitt in this case is a subscriber who
brings together observable and observer
when observable delivers you the next
item it can invoke one of three methods
on the observer next when the next item
comes in error if something happened or
complete when the stream is over very
simple API so verbal can emit the next
item signal the error or signal the
industry and also absorb allows to
subscribe unsubscribe to its data
whatever it is accordingly an observer
needs to know how to do three things
what to do when the data comes in what
to do if an error happens and what to do
if the end of stream is coming in how to
create observables there is a whole
bunch of api's and you can read
documentation but on this slide I put a
bunch of
a method that you can use I want to
remind you at this point I am talking
about JavaScript JavaScript if you
interested in Javas rxjava and your
version rx Java 2 you will find they're
similar constructs so you can say
observable dot create and provide an
observer an object that knows what to do
with the data or you can say I have an
array or an iterable turn it into
observable so it start pushing the data
because if you're if you just work with
an array or as iterable you would need
to pull the date right you'll need to do
further four for each for example but in
this case we want the data to be pushed
at you from your event when we develop
UI there are different events that may
be happening in the browser in your app
you click on the button you can
subscribe to these clicks a click is the
next item you drag the button over the
screen each coordinates of the mouse
pointer is the next item it's a stream
so you need to start thinking that
everything technically is a stream even
one click it's a stream of one item if
you've all passed promises you can turn
you can have a promise and turn it into
observable if you want to just generate
the data stream of some numbers from 1
to 10 for example you'd use observable
dot range and specify the range so there
are different ways of creating
observables now let's talk about
operators as I said when the data moving
in you can attach a bunch of operators
to it so these they will transform the
data so the subscriber will not get the
source data but transform data or maybe
filtered data are you guys Java
developers you know who knows yo please
raise your hand
all right everybody pretty much so if
you know Java you know Java streams you
know the concept right when you work
with the stream you have all these
intermediate functions that you can
change one after the other but if we
talk about Javas 3
you have very very limited number of
functions at you that comes with it like
map filter of course but in rx libraries
there is like more than 100 operators
available to you already out of the box
so what is an operator it's a function
and important part is how it handles the
data very simple API it takes an
observable in as an argument it does its
transformation and its returns another
observable out so since every operator
has this API you can change them
together like pieces of a pipe let's
take an example with beers say you have
an array of beers over here beer objects
several of them and you want to turn it
into observable and push it to the
consumer so on this slide you see an
example of observable beers say we turn
it already into the stream like I can do
observable from and specify an array
right so I'm gonna get an observable
after that I can start attaching
different operators in this example I'm
using the filter operator filter I don't
want to see all beers I want to see only
those beers that have price less than $8
so how filter works in this case if you
look at it in in green color you see a
function so like like a lambda eggman
script six supports LOM the typescript
supports lambdas and so it's anonymous
anonymous function I'm talking about
this Green Park we are saying take the
next element I decided to call it beer
then it goes fat error arrow in Java you
would put - and greater than in
JavaScript or typescript equal sign and
it'll basically say predicate the green
line you're saying return me true or
false depending
on if this expression is true or false
so every element will go through this
filter and only those objects that the
means the criteria meaning less than $1
will be passed forward
subscriber will go after if it's more
than 8 subscriber will not even get this
subject so it's like lazily lazily and
we handle it'll easily filter so filter
is a function right and the Green lambda
is a function so what do we say we say
it's an example of higher-order function
filter is a higher-order function why
because high order function are those
that can take another function is an
argument and can return the function so
green is also a function typically we
use pure functions what is a pure
function a function that always gives
you the same result if you provide the
same argument always like in this
example first of all we are just
checking the price we don't try to
evaluate any external parameters it's
not like an object with some member
variables which may be changing no
everything is inside we don't change the
environment either we don't reach out to
get some data from the environment pure
function now let's take a look at this
example so I create an observable beers
are X dot observable from and I provide
an array then I attach the filter
function and then I attach the map
function all of them are from this rx
library of course filter as I said is
filtering and then map is always
converting an object from one type to
the other maybe you had an object with
twenty properties you want only two of
them or you want to convert it into a
string whatever map is about conversion
in this case I am taking an object of
type beer and I concatenate the name of
the beer with a dollar sign and with a
price I turn it into a string
the next line says subscribe remember I
said in the beginning what do we provide
to a subscriber an observer right
something that knows what to do with the
data and what observer can do it can
provide the handling for the data it can
provide the handling for the error it
can provide the handling for the end of
stream and we have three lambdas source
function is what to do if the data comes
in second what to do is the error comes
in by the way you're gonna get an error
error object in this case and third what
to do if the end of stream comes in what
is very important in this code it is
important that when you declare an
observable the first part no data is
moving at all it's your intention you
are saying I am declaring that I'm gonna
get an observable from an area of beers
and I am planning to filter it out and
map the object but nothing is happening
yet till when till a subscriber exists
till there is some something that is
interested in data so until you do
subscribe no data will be moving there
is a concept called cold observables and
for the most part of this presentation
I'm using cold observables cold means
until there is a subscriber no data is
produced so in this case but the minute
you said subscribe you start getting
data from that array pushed at the
subscriber in some slides in air X I
have clunkers with the links by the way
the last slide will have a link to this
presentation so you can you can download
it later and try it out it's just a
short presentation usually I spend like
hour and a half for this so I can't run
these plonkers but you will be able to
do this when you will be reading
documentation about rx you will run into
some situations when documentation is
not that great especially for the latest
versions
so what you can do you can do two things
one you can read documentation on rx in
any other language the concepts are the
same and two you can use so-called
marble diagrams the diagrams in some
cases is more explanatory than the text
this is an example all the Rex libraries
will have this marble diagrams so when
you look at something like this this is
how they describe a map function as a
marble diagram always you will have a
stream incoming stream and outgoing
stream so the line on top represents a
time moving from left to right so let's
say you have a stream of circles every
circle comes one after the other over
some interval and we have a function map
what does it mean this picture this
diagram I see that they inside the map
they take a circle and they turn it into
a diamond right so for me it tells that
I'm going to get a stream of circles and
as an output I will produce down there
another stream of diamonds when you see
a vertical bar on this diagram
it means end of stream if they want to
represent what to do it in case of error
they you will see a little red cross on
the on the line so from this I can
understand that every element from the
stream will be converted and I will get
another element is an out stream filter
function this is a marble diagram for
the filter function how it works let's
try to guess what do we get on top we
get a stream of different shapes right
when I look at the filter I see a circle
over there which tells me I am probably
filtering circles I want to get only
circles so how many circles are there on
the incoming stream only two right so as
an output I will get two circles only if
you look at the brewery brewery process
you will I can relate to it too to this
idea of taking the data and moving
through your algorithm of your program
so if you look at the beer brewery
process there are multiple stations and
the beer is flowing over each of the
stations right so in our terminology you
can think of it this way so the beer
isn't observable flowing through the
algorithm and you have multiple
operators every operators will do
something to the stream of data to the
beer if you decide to unplug one of the
functions it'll still work you know you
can sometimes you can buy you can buy
unfiltered beer right so take out the
filtering operation and you get if the
process is still going on but you have
one operation less the whole idea is
that you build composable small
functions small operators and you can
compose the whole thing using these
function it chained with each other what
do you lose and it was an error if
you'll go to reactive programming there
is something called reactive manifesto
you will read there all these
declarations and one of them says that
the user reactive system should be
resilient meaning what meaning if an
error happened it should be able to
recover so the user can keep using the
system so how to do this we want to be
able to intercept an error handle it and
move on instead of just saying that
error happened it's not about throwing
exceptions especially in distributed
system you don't know where it's being
thrown how to send it over you always
have a dedicated dedicated channel for
sending errors but if an observer if a
subscriber will receive an error the
stream is over any stream can be
finished in two in one of two cases one
and there are happened to an end of
stream arrived but it's too late we
substitute the subscriber is dead
so what we can do we can intercept it
there is a for example there is an
operator catch if you will again you
change them up if you will put chain a
sorry catch before the SUBSCRIBE the
error will jump right in the catch
statement and inside that catch you can
check oh if it's an error 500 let me try
to resub scribe to a different data
source alternative on failover or if
it's an error for for do something else
so you have a chance to intercept an
error and do something so the data flow
of continuous or retry you try to get
the data from a stream a stream is not
ready yet maybe you want to retry two
seconds later you can do that or retry
when you can write a function that
describe your logic your business logic
saying why you want when you want to
retry and here's an example of a
failover
with catch look at this say I have three
functions three data sources the primary
data source the function get data
returns an observable if something goes
wrong with this data source I have
another one get cached deed maybe have
data in the cache if or I may have
another function get data from another
source each of these sources will return
me and absorb ideally if everything is
great I want to get data from the first
function so what do I say get data dot
catch C catch operator and then map
operator and only after subscribe
so if error happens in the function get
data for some reason then I I'll go into
this function catch and I can take this
error in my hands and decide what to do
is it like in this case if an error
status is 500 I printed on the console
and I return get cash deed get cash data
all also return in Loserville right so I
still have an observable a different one
but I'm alive I am not dead or in this
case or otherwise I will return get data
from another source get data from
another source maybe it'll connect to a
different
server and get the data from there so
the point is I will note this the
subscriber will keep receiving the data
why because I intercept them before they
reach subscribe subscriber will see the
data it may not know that they are
coming from cache or they are coming
from another data source but the whole
point is that the system stays alive so
that map it's a very powerful operator
not so much in JavaScript I'd say but in
Java it's super powerful but let me
explain it first in JavaScript so flat
map is for cases when every item that
you are getting is an observable is in
turn an observable so you may have an
IKE an items the data piece coming in
but internally it has some other data so
you want to subscribe to that one as
well
so instead of writing nested subscribe
subscribe you say subscribe give me a
big piece and flat map will
automatically subscribe for the internal
of the items and will flatten it up like
in this case I'm getting a circle but
actually it's not just a circle inside
that circle we have something else
another observable as an output you will
get every item from the internal
observable as if it's only one as if
it's only one I will show you an example
again it's JavaScript in this case say
we have one observable beer and the
other observable soft drinks these two
are different arrays and I want to push
to the subscriber first beer is the one
item which internally has three beers
right and second I want to push soft
drinks so what do we get
so what I say return observable create
and I'm saying give to the observer one
time I call next I am pushing the data
in this case I am pushing beers
and then I'm pushing soft drinks to whom
to the observer
whenever somebody will subscribe to my
observable stream they will give me an
observer they will give me an object
that knows what to do with the data
right so observable always calls next
function on the observer next next next
an observer knows what to do with the
data so what I do here I am pushing one
observable in another observable
one and the other so inside the so what
can I do
since get drink returns observable what
can I say I can say get drink dot
flatmap I'm saying flatten out
everything that you're getting every
item will have inside some other eyes
every subscriber you subscribe and just
give me single items so I just sing
flatmap and then subscribe so in the
console if you will run this plunker you
will see Stella Sam Adams Bud Light Coca
Cola Fanta lemonade single items why
it's super powerful in Java for example
Java has additional feature which allows
you to say you so called schedulers you
can assign a thread to each item so you
can do multi-threading so you can say
flatmap and assign a separate thread for
each item boom and goes in parallel very
powerful thing again in JavaScript is
not so powerful but it's very convenient
because you don't need to write nested
subscriptions look at this so many
operators are there many many many of
them it's out of the box of course you
can write your own operators but there
is tons of them coming with rx libraries
any elixir library and now let's switch
to the angular framework observables in
angular from the very beginning they
decided angular creators that we will be
using observable in multiple places
first of all forms when even the user
fill out the form you want to know if
the form is valid or if it's
not valid when there's a usual types in
the data in it in the input field you
want to get the data all the things are
created in angular is observable for
example every field on the form so
called for control object he has a
property called value changes it's a
radiant observable angular did it for
you so what you can do subscribe you
have an observable subscribe to it so
the user will be typing and you'll be
getting items as as a he type or she
types the form is not valid you may
attach a bunch of other data to a form
in angular some of them are gives you
gives a problem saying for example
Social Security number fields supposed
to have nine digits but it doesn't so
the form is invalid there's a property
called mmm status change and you can
subscribe to to it what does it mean it
means whenever it changed you're gonna
get a new item
initially it was it was invalid now it
is valid so you can catch all these
moments and you can react to it reactor
and let now let's make let me show you a
little demo say we have a simple code
this is a component in angular I assume
that you know some basics of finger so
every component is a class with an
annotation at component the annotation
at component describes the UI in this
case we are using HTML header to
observable events and input field HTML
input field where I'm saying enter stock
and I am binding these brackets means
binding in angular is this form control
directive to the variable search in what
is search input it's a variable that I
declared in my class it's of type form
control and I created an instance of it
so now the instance of form control
object is mapped to the input field this
particular one and since if for when you
if you read documentation you will see
that form control has a property value
changes which is an
observable if it's an observable what
you can do subscribe to it what else you
can do you can attach a bunch of
operators before the subscriber gets a
deed so what do I do here I'm saying
this does search input dot value changes
observable and I could write subscribe
right there but now I'm attaching an
operator in this case the name of the
operator is the bounced I'm one of the
hundred operators that comes with our X
what is the bounce time imagine the
situation when you type something in
Google Field in the text field and as
you type it brings you some data right
what if you don't want this to happen
what if you don't want to initiate an
HTTP request for every little character
that you typed in so you can use the
bounce the bounce type time
it means unless in this case 500 unless
the user will not type anything for 500
milliseconds don't even push the deed
only if there is an interval for 500
milliseconds only then pull the data
certainly so we will not be sending too
many for example it should you be
requests and then you say subscribe when
the data comes in what is the data
whatever is a user type in that input
field right what do I do
I say get stock quote from the server
and I pass this value whatever user
enter on the UI in this case I'm just
using random number generator so I don't
go to any server but the point is that
subscriber will initiate the call for
get stock watch from the server for
every item that is pushed by observable
from the UI let's run this example let's
run this example I'm using webstorm
again being a Java developer IntelliJ
IDEA you can use you can use webstorm
there is an excellent three editor from
Microsoft called visual Visual Studio
code all of them have great support of
typescript so I do recommend you use
whatever you like I'm using the latest
version of angular by the way on
Thursdays they're releasing
four so I'm using it using it it's not a
major rewrite it just improvements here
and there so what do I do now I want to
run this example to run this example I
have couple application in this project
so what do I do I need to say inside
this project inside this angular CLI dot
Jason's best special property what do I
want to run actually new this is not the
right project let me do this one what do
I want to run I want to run the example
called main from control or form control
yes I I prefer to make the font larger
like this alright so I want to run this
example and I have this mean for form
control and over here I have this code
very simple code that you saw on the
slide basically if I will open it up you
will see the same exact code that you
saw in the slide now what I will do I
will build the bundles I will build the
bundles in memory I was in here I
generated this project using special
tool called angular CLI and it comes
with web pack and for deployment it
generates the application into bundles
so you have less files to deploy right
now I am in dev mode so I'm generating
the bundles in memory so this part is
ready so if I'll go to localhost 2200
default port I will see my app up and
running let me open up the let me open
up the chrome dev tools down there to
the console so if I will start typing
see I was typing pretty fast if I will
make a mmm pour in the pause for 500
milliseconds you will see how how it's
gonna work
see
it was pushing the data twice in this
case why because I put the bounce time
500 milliseconds I was typing slow so
that's why it gave me a a and then
another item again if behind the scenes
I would be making a request to the
server I I'll be making two requests and
you will see that in a moment now let's
take a look at another example HTTP of
course we want to handle HTTP requests
HTTPS in anger by default return and
observable every HTTP request if you if
you are more familiar with promises you
can stick to promises and take the
verbal and do two promise but I don't
see a reason for that so let's take a
look at this example say I have a server
somewhere in this case I have an app
component and in the constructor I
specify that I need an HTTP object in
anger there is something called
dependency injection as a matter of fact
if if there are if there's somebody in
the audience who who is not familiar
this angle - who wanted an overview
tomorrow afternoon I will be doing a
presentation angle - for Java developers
over there I will give like a big
picture of finger so in this case so
this is dependency injection I just
declared an argument of type HTTP
angular really inject for me an object
HTTP so HTTP supports all these get post
put delete all that so let's say I have
somewhere and then point product so I'm
saying this HTTP GET product so what is
interesting if I will forget to write
subscribe no data is moving it looks to
you like as if I'm making HTTP GET but I
am NOT if so if there wouldn't be
subscribers the data would be moving but
in this case I'm saying go and get for
me the data map to the endpoint product
and then when the result comes back what
comes back HTTP response extracts from
Zaire JSON
this is my map function and give me back
the JavaScript object and subscribe I
provide three things remember for
observe
what to do when the data comes in what
to do when the error comes in and what
to do if the end of stream comes in now
in the previous slide I was using
subscribe subscribe right but angular
has something called pipes and if you
will look at this one this vertical bar
is a pipe and there is a special pipe
called async async' Pike pipe is smart
enough to automatically subscribe for
you a sink pipe you can use in templates
in HTML so what I'm saying here let me
explain into this example real quick
basically the same thing that I did on
the previous slide gave the product give
me the jason and what do I do with a
Jason mmm what I want to do with a Jason
I am saying I have product right so this
gate will extract Jason turn it into
JavaScript object assign it to product
inside the template angular has a
special directive ng for it's like a
loop I'm saying declare a variable
product and loop through the array of
products right there and since I put
pipe async
I already subscribe to it so what
happens is this Li element it's another
list right HTML this Li element will be
repeated as many times as I have in the
product observable so I'm gonna get all
the pro in this case I care to show only
the product Idol pretty simple but it's
a subscription and now a really really
really powerful operator switch map you
don't think about it unless you have it
switch map operator when you make a
request to the server your app makes a
request what if the connection is slow
say is a user standing with the mobile
phone on a slow area connection the
types amps again I want to find the
price for this talk or maybe something
else click on the button the request
goes out the connection is slow I am
noid I don't want to wait so much I keep
typing something else another request
goes out right question what happened
was the first request it still is up and
running at some point it is gonna come
back you have the low bandwidth already
on the network and by sending more and
more requests you are you making yet yo
the situation even worse right so what
what happens is since the switch map
allows you to automatically kill um
handled responses so the user type
something in moment goes out it didn't
come back yet but the user produces
something else if that guy didn't return
it was going to be killed automatically
this is super powerful thing especially
if you care about performance of your
web apps if you think that this diagram
is not easy to understand believe me if
you'll read the documentation on switch
map it's even worse so let me explain
you what it means they are saying there
is a stream right red circle green
circle and some time later this blue
circle comes in switch map is in a way
similar to flat map it knows that there
is something inside every element and
let's see there is a red circle right
switch map operator knows how to convert
this red circle into this sequence
diamond and square so it produced red
diamond and red square fine
the next element comes in it needs to
produce diamond and green square green
diamond green square but all of a sudden
this processing is not finished yet with
the green right but the blue item comes
in so you will never see in the output
the green square it's going to be killed
so switch map is switching over to the
in internal observable if the new
element comes from outside so this the
top line we can say it's an outer
observable and these little guys are
inner observable it's still like Chinese
I'm sure whatever I said but I will show
the code and you will understand and I
proceed look at this code and I will run
this example this entire example is
about getting the weather in a
particular city there I found somewhere
a public server that reports a weather
public API this is a this is a URL of
that server you just need to take this
URL attach the name of the city and
attach the application ID you apply for
it like it takes you like a miniature or
not more that's my app ID that I got so
what I have here I have a an HTML with
an input type right and I can type the
placeholders enter city I can enter the
name of the city and what do i do again
same story I said that this is the form
control I created a variable search
input and I bound it to the form control
so immediately I get this value change
this property which is an observable and
I can subscribe to it so in this case
what as I say the bounce time 200 unless
the user is typing fast if there is an
interval of 200 milliseconds send it out
send out what whatever I manage to type
in the field and then I say switch map
switch map means switch over from an
outer observable in my case typing in
the input field to the inner one what is
an inner one in this case so see what
I'm doing I say this dot get weather and
I'm passing city city is whatever I
enter in the input field and I'm giving
it a function get weather get weather is
right there
get weather supposed to not supposed
little it returns HTTP GET I concatenate
the URL of the server plus the cities
that I had typed in plus the suffix and
then I say I want to map it response I
want to extract Jason from it and also I
am applying cage right so what if I want
to get the weather in San Jose and I
manage to
yes it goes out there is no such a city
yes right so I'm gonna get four or four
if I if I wouldn't be doing processing
error processing if I wouldn't intercept
it and my stream would be over it would
be killed but what I'm saying no if we
got four or four just return me an
observable of nothing empty so I'm still
getting an observable
so the subscriber is happy you didn't
get anything but it's not an error so
now what do we say again I want to
stress they when you look at the
function get whether you may get an
impression based on your experience with
other programming languages that this
function makes an HTTP response a
request sorry it makes it only when I
hit when I write subscribe if I wouldn't
drive subscribe it's just a declaration
of intention this HTTP GET is not yet
I'm just saying when every subscriber
comes in I will do get right so what do
I say here get the data from the UI pass
it over to the ghetto Ezzor inner
observable right and then subscribe but
what happens is if the connection is
slow if switch may have started get
weather get weather didn't return me
anything back yet but the new things
comes in user keeps typing the previous
request will be killed and I'll show it
to you in action so you'll go back to
the to the IDE let me let me kill this
guy and in the angles like that Jason I
want to say that I want to run another
application now in this case it's called
main HTTP
safe I'll show you the code but it's
basically the same as you saw on the
slide I'm rebuilding bundles in memory
again the code is located here in the
HTTP as you can see the same thing I
have this get weather and I have switch
map everything is like that so as a
bundles are built and let me go here so
localhost 4200 inner city so I will
start typing the name of the city
and what I want you to see I click on
the network tab let me clean it up for
you
and you as I type you will see how many
requests will go out for that weather
server let me do this look at this I
just entered San Jose right and since I
was a slow typer I had this interval of
200 milliseconds remember the bounce
time it went out and it's look at this
it this request was for si I got four
four then si n maybe there is something
si en si n space Jo and so on so it went
out and it returns me tons of data which
I don't need actually I need only the
last one luckily I am on the fast
connection now right but think about it
what if I would be on the slow
connection how many requests would go
out now let me show you this
I will emulate a slow connection now in
chrome dev tools there is this little
thing called short link I click over
here and I say emulate for me a slow
connection 50 kilobit per second let me
let me do it and I will do it now I will
enter a different city in New York for
example look at that
she's also cancelled as I was typing
request we are going out but connection
is slow they were not handled yet so now
look at this it's much better right zero
bytes return so it didn't take my
bandwidth automatically killed just for
that you need to use rx and switch map
in particular okay let's let me let me
wrap it up
you don't have much time in the router
angular is about single page application
right so you have an area inside the
application and you have routes you will
click on this or that link and certain
fragment of the page is changing we are
rendering different components router
does
when you pass from one route when you go
from one route to the other your pet you
may need to pass data say you show
product you click on the products you
want to show product detail which is a
different route different component you
want to pass the product ID right which
one you want to see the details for so
router has also observables internally
and when even the router object
activated router actually is given to
you you can subscribe for changes
it's like master detail situation a list
of products click click click on
different products and the details
components show you different things
detail components subscribes to the data
coming in from the router and finally
types of observable there are cold
observable and they're hot observable so
far what you saw was cold observable
until there is a subscriber the data is
not produced so but versus hot
observable hot observables pushes the
data regardless if there is a subscriber
or no think about it you may have a
phone with accelerometer you're you're
moving with the phone an accelerometer
is sending like 50 signals the second
with information regardless if you're on
an application that handles it or not
it's it pushes it or Wall Street server
pushes the stock prices it'll push the
stock prices regardless if there is
anyone who subscribes to it or not it's
like a broadcasting you turn on the
radio I mean the radio station broadcast
stuff regardless it doesn't know if
everybody if anybody's listening to it
or no where's cold soup observables
needs to need to get miss to have a
somebody needs to have a subscriber so
in this on this slide I show you how
easy it is to have an observable in
angular actually in rx as well and they
share an observable with multiple
subscribers subject remember I said
subject is at the same time observer and
observable if you will create this
object and say share you're saying I
want to have the same stream but I want
to have different process or different
subscribers which may be doing different
things
or with a data like in this case I want
to handle I have an input field I want
to handle input event and keyup
events right so key up in ki aapki event
I want you to print the gig the symbol
that usual type king of the keyboard on
the on the input event I want to display
the data so I have I say I want to
create a new subject I want to share it
share with whom with as many subscribers
as need be the first subscriber is here
it'll be handling the keyboard event the
second one will be handling input events
and they both use the same streams the
same producer so to speak all right I
don't have much time but in English a
Vivint emitter that is a subject
technically and the final slide that I
show you is how do we how you can easily
maintain state in angular application
imagine is that you have multiple
components and you have some important
information that reads it stores the
state of your application so as you can
do you can inject this service in
angular inject into multiple components
for example component number five needs
can change the state variable and
component number six and eight needs to
know about it so you can create a
service inject it into five six and
eight and five and six and eight will
subscribe to changes in the object so I
don't have much time left
so let me wrap it up right down the URL
the top URL has all these slides that
you just saw the presentation now the
code samples of the book where the book
was published like three month ago but
we maintain github site with a bunch of
example and we keep adding new new new
examples and as the new new versions of
engel comes in we keep adding stuff
there and updating it and that's about
it thank you very much</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>