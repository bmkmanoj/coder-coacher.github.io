<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>What can you learn from thousands of source files in Github?  by Guillaume Laforge | Coder Coacher - Coaching Coders</title><meta content="What can you learn from thousands of source files in Github?  by Guillaume Laforge - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Devoxx/">Devoxx</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>What can you learn from thousands of source files in Github?  by Guillaume Laforge</b></h2><h5 class="post__date">2017-04-11</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Aw4sgZ8kIeg" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello everybody and for joining me for
this talk it's a very nice and big room
and it's difficult to you know fill in
the this room but don't hesitate to
interrupt me with questions etc i'll be
happy to answer them and don't be
intimidated by the size of the room even
if you're far away in the in the back
okay so what can you learn from
thousands of source files on github this
is what we're going to cover today why
am i speaking about that i have two
halves I'm a developer advocate for the
Google cloud platform and I'm going to
use to service called bigquery for
analyzing that source code and in
bigquery we have the data coming from
github so we've got all the sources and
we can learn some interesting things
there and my other hats is to be part of
the Apache groovy programming language
project I've been working on that
project for a big number of years 13
years so that's why so I'm gonna focus
on blue resource files so you'll see
lots of groovy a bit of Gradle and
grails in this presentation but the
point here is more let's say for you to
understand that you can use the same
tool and approach for analyzing the code
you're interested in or other datasets
but my sample data I'm going to use that
source files in github in particular
groovy griddle kind of files and using
bigquery I'll come back to that so when
was that last year in two thousand
16 jun know it's interesting that was
the following day after my birthday I
never noticed the day to the fortune
anyway so get him actually released so
we were partnering with github on that
they release the whole data set of the
data that's stored on github so it's
really a big I archive of data because
you can easily imaging the numbers and
we all will say a few things about those
numbers they are three terabytes of data
over 2.8 million repertories with 145
million unique comets that's quite a lot
oh yeah one little remark I wanted to
make so I haven't updated the numbers
because I did that presentation before
at devoxx Belgium so I didn't update the
numbers of it might be a little bit
higher than this but you get the you
know the ballpark kind of figures that's
really big figures obviously big numbers
over those source file they've got two
billion file path and the content of the
latest revision of 163 million files so
you don't have when I say the whole get
up data said you don't have all the
revisions of each and every files but at
least you've got the latest ribbon and
that's what you want to analyze artist
that's what I want to analyze in this
presentation so it's pretty big all
right speaking of bigquery bigquery is
google solution for the it's a big data
warehouse solution for analysis what's
interesting with bigquery is that it's a
service so there's no infrastructure to
set up to manage to provision or
anything like this and to analyze which
what's stored in bigquery you can use
sequel and usually pretty much
everybody's familiar with sequel
yeah the sole thing i would say perhaps
a disadvantage i don't know is that i
suck at sequel so I always paint spend a
lot of time preparing my queries because
I'm I don't know why but sequel myself
we've never really been friends you can
go through terabytes of data in minutes
or seconds even that that's pretty
impressive so imaging the database and
you do a full table scan that across
millions and billions of rows sicko you
can use sequel such pretty simple to use
you can go even it scales from bites to
petabytes so that's really huge data
stored there and it's been used also
internally by by Google itself for for
its data where I was seeing needs no
capex here because it's always on it's
it's a service you can use there are
some interesting interactions you can do
with other tools like tableau our Python
etc and you also have as part of the the
free tier you also have one terabyte
which is free so you can use that that
free tier to play with the this this
system bigquery is actually internally
called dremel and this was also the name
of the paper that was published in 2012
no one was the date yeah I guess that's
2012 and its really used internally to
process exabyte every month I don't even
remember how many zeros dareen exabytes
that's pretty impressive I'm going to
look at the groovy source code who's
familiar with groovy ok nice let's say
half a half of you so just a few words
so Groovy's a JVM language
that we say it's multifaceted language
in the sense that you can use it in a
dynamic fashion or in a statically typed
fashion it supports optional typing as
well as when you use the the static
compiler you can use you can take
advantage of type inferencing and in
terms of syntax it's pretty close to
Java and we kind of so called round Java
to add more shortcuts etc to make
developers more productive and it's
great fit for things like
domain-specific languages so that's why
it's used in things like gradall to
define the the structure declare
declaratively for for your bills and
other interesting features for
functional programming and so on so if I
want to analyze the groovy source code
what kind of question I could ask so how
many gree files are there on github or
what are the most popular imports or
packages used etc so that's the kind of
questions I'm going to ask so let's dive
into the demo yeah or perhaps Ian before
the demo and just going to show you
something yeah I know what I'm going to
do so here's the the interface of google
bigquery so let me try so I'd like to
show you they are various big data and
data sets which are available on things
like baseball so the git repository news
from hacker news and also something but
I'm not going to show that in action but
you can't even do joins across different
data sets so you could look at let's say
what people are saying on hacker news on
a particular project on github and you
could even do joins across those big
data sets and the 1 i'm using
yeah it's the the ones from the the
github repositories so you've got comets
the list of coming the contents of the
file the list of files the different
programming languages as well the
license is being used etc and also if
you want to play with that data set
notice that there are samples of those
other tables these are the tables in
that in that data set so these are the
clones which are available because as
the data set is pretty big if you don't
want to run out of your free quote on
your one terabyte per month you can test
on the sample data rather than the the
big data set the full data set so what I
did in order so I'm using my own google
account I don't really pay for the time
that's being spent by the servers behind
the scenes but in order to make my
queries even faster I did an extract of
just the files that are that I was
interested in so that's what I was going
to show here so i used the bigquery the
bigquery data set and then I only took
the dot groovy files and I've put that
in my own personal data sets so I did
the same with the Gradle build files and
I think that's worth yeah and also as I
wanted to have a look at the great old
versions being used in the wild I also
looked at some particular properties
files so let's start so as I said the
figures are perhaps not up to date
because they are at least six months old
but how many groovy files are there in
in github so it's a very simple select
count star from the list of fine from
the tables of oak trees so when I switch
you so the answer already you can
something interesting you can
I've queries so these are the passwords
that Iran and here are some of the
queries that I'm going to run so here I
can do and is it visible and readable
enough in the in the back yeah little
bit bigger no perfect okay good yeah
it's difficult to hear from from here ok
so here tonight count over the list of
files and if I run that so it's pretty
quickly and so I ran the clarity that's
perhaps because it's too big good
where's that run perhaps because I
increase the size yeah it's here so here
you've got the result bill so they are
less than a little less than a million
files groovy files on Geeta groovy songs
all right what else could I ask them
what are the most frequent groovy file
names sometimes you know you use
different I mean there are at our common
class names that come up are there some
particular ones which are really used
way more than others and for this one
that was a bit surprising actually so
this is query history saved queries I'm
going to run my second query which is
here i'm going to edit it so i just took
the 24 biggest ones a file name and then
again i count the ones i sign so this
time i use the nested query so i select
from all the all the files i look at the
the last part of the path to extract
just the file name and then I'm
I'm looking at the biggest one and
counts per very those file names and
when I ran that I was a bit surprised
because if you look at the results a
groovy is a very common fine filename
verify the groovy configure groovy so
let me show you the table there a dobrze
V be the boovie verify or even a
lowercase as well and I was a bit
surprised so I look a little bit closer
and sometimes so groovy is great for
scripting as well so you can just you
know write some small scripts here and
there and sometimes you need to
obviously name those files those script
files and if they don't really make
sense it seems that people just use
letters so you know I would have
expected you know a test or full bar or
something like this but it seems so they
are dummy that's dumb in there or test
that seems like a and B are quite
frequently used we're also seeing
classes from the ground framework like
build config data source bootstrap etc
which are URL mappings or user groovy
most of these are coming from Grails
projects and sings like verify config
invalid yeah those ones I've seen them
wyd of fun on on some build pipelines
build tools etc where people make some
assertions at the end of a bill to
ensure that the build went fine so but
the a degree was really surprising to me
all right next the queries
nope or is what am I yes kind of close
that right saved queries the third one
so how many lines of code does that
actually represent so a little different
there compared to what i was doing i'm
actually looking at the contents so the
file contents and then i'm splitting the
contents of those files / lines and then
i can count over all those lines if i
run the query they are up they are how
many 16 16 million lines of groovy code
that i thought that it wasn't very
interesting because it's I think it's
more interesting to look at the number
of six square is the number of what
basically what's the distribution so are
there big file small files etc so i used
something else so this is a triple
nested select so i did pretty much the
same as before except that i grouped by
I goodbye yeah bye-bye i ed what's the
ID yeah the the file ID and then I use a
function called quantiles which allow
you to group by you know quantiles and i
split into 10 buckets so if i run that
ok so is the result it's their Hut I'm
going to close that so they are some so
how to look at this it's like an
histogram basically so you've got those
10 buckets so if you say when you're you
know in the middle there's like how
of the files fifty percent of the files
which are small script files like 37
lines of thought that's met not much but
for example we've got the upper bound
here so they are or what is the maximum
number so sorry that's really in the top
10% the biggest one contains nine
thousand lines of code which is I think
a bit too much for a single class or a
script but otherwise like the 90 persons
percentile that's below 148 line so
quite small classes of scripts all right
what are so what is over how much yeah I
don't have that much time so I'm not
going to do all of them there's this pop
up over there so what are let me see
perhaps I can look at yeah so focus who
know Ruby we've got a poor powerful
feature which is the 80 transformations
which allow you to implement certain
patterns etc or let the groovy compiler
implement certain patterns for you
certain things so if you want to make a
class immutable you just use an ad
immutable interface annotation on your
class and then it generates all the
right equals and hashcode or make
private final field etc on your class
automatically so here I'm still
splitting the content of my files with
that split method but then i'm going to
use a new function regex extract to look
at the the class names in the imports
because I've been filtering on imports
you can write that differently I could
have put the import in the the extract
line as well and then i'm using top that
I used also earlier to see what's the
top 10 the top 10 transformations and as
you can see compiled
I think that's actually an annotation to
tell the compiler I want to statically
compile my groovy code in order to have
nice you know type inferencing nice
compiler errors and also make your code
faster compared to dynamic dispatch but
there are also things like to string to
add automatic to string or equals and
hashcode etc so you can see ya some more
like in your table I was expecting it to
be used a bit more but that's
interesting at least for me as a gue
video / wed other interesting functions
I could show you to prove so that's the
HT transforms things like imports alias
import here this one is pretty much the
same i'm looking for one with new
functions that you've not seen reg
extract we used it yeah well let's look
at some other ones like the things like
Nathan one of the most interesting ones
ok for example which a similar similar
one to one I did with the groovy ones
like what are the most frequent Gradle
file names that was interesting as well
to see how so we would readily can split
the Grail bill till we can split your
bill five across several PL files so the
most common one is revealed that gretel
but there's also settings Gradle to
contain but color settings for your
project but you can see things like
really Gradle or push to maven central
the all the
let's say or tube entry or there are
some specific ones for things like
publishing and you release or I think
that we're those ones I was looking for
like quality door Gradle licensed Gradle
to check or check style jacopo to the
pod coverage etc so we see that it's a
common concern for developers to
separate things nicely into different
grade OBO files okay so I think I'm
probably used most of the interesting
functions yeah there was a you could
also compare things like the number of
maven build file versus Gradle build
files so for example if you use that if
you look at the navin build files at is
the day I run the exports and my data
set so there were 1,000,000 nathan Deal
file vs vs this one there were terram
yeah only a hundred thousand oh no
that's a settings no that's not this one
sorry that's the one query I'd come back
to this how many maven build files how
many great bill fights so 1 million
versus let's say close to 500 k so maven
still seem to be but actually what's
interesting is that rail was coaching up
it's like one-third for a griddle two
thirds for maven okay but there weren't
any new interesting operators that I
could show you there is there not one
that I could show you
we have the distribution that using
quantiles yeah count database drivers
would you do that yeah because you have
to look at what what dependency so for
example I had so this one is it getting
the Grail real friend so for example the
compiled dependencies but then how you
you know you don't necessarily know that
the dependencies is a driver or not and
database driver sorry say it again do I
have that that was the I did one let me
see I missed it I forget I didn't rerun
all of them because I i knew i would
would not show all of them was it below
where what was that this one yeah so so
this one that's oh yeah of course with
oops I went too far 40 yes this one is
the up saved query 40 let me reload it
yes delete query yeah so yeah that's
that's a good point so it's in the
context of Grails projects because I'm
looking at the data source GUI files
which are it a configuration file for
Grails web application so if i run that
so this one again I'm using the I'm
splitting per line i'm using a regular
expression matching and i'm using
grouping etc so let's see that in action
it's running takes a bit longer oh no is
interesting why is there a no driver
perhaps there's something wrong in my in
my query somehow or this one is empty so
h2 for testing basicly locally my sequel
postgres and
Oh server and not not done many you know
c4 or server oracle server so purpose
breaston bicycle seems to be the most
frequent ones all right did you see any
other query briefly that you would like
to have a look at before wrapping up so
number of controllers yeah there were
some surprising results like in the the
number of of controllers which was
pretty big okay let's switch back to the
slides I'm just going to go through them
rapidly grew so suave the distribution
the imported packages like we use spoke
a lot for testing the transformations
showed that one either in Greek and do
import some class as another name you
can give another name to a class to
avoid class name classes but it's not
used very much like the zero dot for
persons the trades how many the most
frequent exceptions well you can learn
quite a lot of things and so I hope I
showed the power of the sequel queries
the capability you can you can do so I'm
going to wrap up here so basically so i
use groovy and Gradle and grails because
that's my favorite tools of trade but
it's your turn so they are very
interesting data sets which are
available you can also as I said make
joins across different data sets so
sometimes you have to figure out what's
the correct correct way to join two data
sets because they don't necessarily use
the same keys but you can certainly
learn lots of interesting things they
are so you can programmatically push
data to bigquery so if you want to push
all your log
or older interesting information into
bigquery you can do that and then you
can run your own analytics etcetera on
top of that and do your usual data
warehousing analysis and then for
reporting purpose you can use
integrations like tableau or etcetera to
do more statistical analysis and things
like that so some references I'll put
the the slides online if you want to
have a look at these ones so the first
links were about the the data set the
get up data sets one of my colleagues
did something pretty interesting it was
analyzing the you know the famous war
tabs versus spaces and he actually
looked at the source code to see what
was there I published a few blog posts
on analyzing groovy code gretel code etc
little bit of file and some more
interesting analysis made on github on
another colleague of mine did analysis
on the on the go link source code and
spoiler spaces win except for C and go
which means to favor tabs but otherwise
all these languages went with spaces
that's about it thanks a lot for your
attention
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>