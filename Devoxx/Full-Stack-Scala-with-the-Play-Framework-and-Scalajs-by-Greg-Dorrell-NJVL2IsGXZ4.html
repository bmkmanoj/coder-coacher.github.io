<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Full Stack Scala with the Play Framework and Scala.js by Greg Dorrell | Coder Coacher - Coaching Coders</title><meta content="Full Stack Scala with the Play Framework and Scala.js by Greg Dorrell - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Devoxx/">Devoxx</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Full Stack Scala with the Play Framework and Scala.js by Greg Dorrell</b></h2><h5 class="post__date">2017-05-17</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/NJVL2IsGXZ4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">forgive you play it do it make sure so
welcome to full-stack start a scholar
with play and scars yes it about me so
i'm greg draw i'm back end scala
developer hotels.com we are hiring most
most of us are doing java there's a few
teams in scala I'm trying to kind of get
more of us on Scala
yeah it's a good place to work so Dee
come talk to me interested I started
using Scala in 2009 didn't get to using
production till about 2012 and about two
years ago now I start playing around
with Scott yes and those really nice so
that's kind of where this talk come from
yeah and I actually got into programming
originally by doing like what doesn't so
I hacking together pieces of PHP in
JavaScript yeah so today we'll start
with an introduction to play and then
we'll have a Likert scale yes and then
at the end we'll have a look at a little
project which combines the two together
and try and explain to you I think
that's really nice and this point like
how many of you use in Scala okay
almost half yeah I like for the other
was like have you looked at scarlet
maybe done the course here of course
okay okay so a few people have done to
any scholar that's cool
so I started to play very much I'm so
who's use plate okay good chunk good
room and okay cool so for those that
don't know players their traditional MVC
style web framework for Java and Scala
so play one came out in like 2008 and
that was a Java framework and I remember
I was learning scholar at the time so I
remember trying to use that with Scala I
was quite painful
luckily for me they rewrote it in Scala
in Scala in 2012 so play to tame our
2012 written in Scala but still very
much targets Java and Scala and it's
maintained by light Bend so the people
know light bends come before me know in
this type safe okay so they're they're
the company the commercial company
behind Scala basically so they're
they're developing Scotland
acha and play and the good thing about
play being maintained by like bowmen
means the docs are really good as a good
community around it and you like on
stackoverflow and finds lots of helps to
play plays a high-velocity framework and
so in the same vein is something like
Ruby on Rails it tries to make it really
quick and easy to get up and running it
has everything you need out of the box
like you don't have to go away and
evaluate five different JSON libraries
and three different like restful clients
tries to have everything you need so you
don't have to go and get up so how do
you get started to the play so for those
that don't know in scala we often don't
use maven we like SBT Scala built all
and you can use play with SBT or Gradle
so here's how you can this is the
command you can run to create a new play
project and I've gone ahead and check
that up and check that out so if we go
to here this is the place Collard seeds
and I can do SPT run and this will study
up
so if I go to localhost 1000 here we can
see that stuff it so yeah it's very easy
to just get up and running and get it
started and the really cool thing about
players this it has a really fast really
quick feedback loop just to refresh so
this was what got me into play the
beginning like it was a Java framework
but it had this really good development
cycle and so let me show you why me so
if you but if it gets IntelliJ now so
this is a project we have so the first
things you see if you're from Java world
is that we don't use the traditional
maven project structure like rather than
having like main source Scala
we just have app and inside here we have
our controllers of use so let's add a
new endpoint in here so we have this
routes file where they can figure our
endpoints and I want to add a new
endpoint called hello world so I'm going
to call it paste this one slash hello
and we're going to call this hello
method on our home controller so if I go
to this controller I can create an even
point hello and this is an action or an
endpoint and we get access to the
request so it's like pull cookies off or
headers and stuff like this and you just
want to turn an HTTP 200 ok and which
deep hello Aden
so now if I go back to here and I go to
slash hello it should come up with hello
ah if the demo gods are looking down me
and we can see unless you see in here
like it it's just compiling the files to
change so that took a while but when we
start making equal to changes this gets
really fast so if I change this like
hello devoxx and go back just hit
refresh
hello devoxx so we all know the compiler
compiler is quite slow has come a lot of
complaints but you can see that play
will just recompile the files are
changed so in this case I've changed one
file so I guess we compiled it's really
quick and this is what kind of really
got me into play and I really like that
so if I go back to slides I mentioned
that it has everything you need at the
box so there's a good template in might
be in there JSON library dependency
injection library uses Google juice and
it's all kind of configured and works
all together you can swap out things so
you're not like force to use plays JSON
library and they've also made an effort
to pull these out so you can use them
outside of play
so like the templating library 12 it's
quite good give it a go we'll take a
look at that now actually so if I go
back to our app if we look at this index
endpoint we can see what we're doing
here is we're rendering the index view
so if we go over here to the views index
and this happens is actually just cool
another view called main and this is
like a normal kind of template hopefully
not too scary but the interesting thing
here is that we can actually see the
info parameters to our template and
they're typed so our templates actually
get compiled down to Scala and that type
safe at compile time so like and that
means a few things so if I like change
this to Java util date then down here on
that that parameter I can like now I can
also complete and I can like call the
methods on Java util date but if I go
back and refresh then that that's
actually not valid right so if you
remember in index we called me but we've
now said in Maine that we want to
receive a date that we're passing in a
piece of HTML so
this gets caught compile-time so in this
case like if you were developing it you
see it anyway one time it's using
something else but this idea that
everything is in Scala we want to try
make everything compile times this and
even the templates dealer so I just undo
that to give them not valid will you go
back to my slides so we'll have a look
at some other pieces later on and the
other thing is if scalable so currently
player is powered by Metis under the
hood and and the upcoming 2.6 release
will be powered by a co HTTP and if
you're if you can implement your
endpoints in a synchronous way return
scholar features then you can actually
move away from this one thread per
request model and this is what allows
plate to handle a lot more requests than
a traditional circular base web
application so let's take a look at what
I mean so if we go back to our index
endpoint we're just going to take the
cinder some point and make a tigress and
change what it does so the action to
async and it now complains because they
wants me to return the future and I'll
just get rid of the red for now
and I'm going to make call to a remote
HTTP endpoint so I need to use the web
service client so I have that dependency
injected and now I can do W else dot URL
I'm going to use a if config dot me
which is basically just gives you the
your public IP address and because I
just wanted the IP address without any
HTML I'm just going to pretend to be
curl
and now I just want to do a get request
and you can see that um you actually get
back a future of web service response so
I want to work on the thing inside the
future so I have to map over it and
inside I have access to the response and
I just want to pull out the body so this
will be my IP address and I need to wrap
that inside an HTTP 200 as we did for
the hello world so now if I go back and
go to my index page it takes me the time
I have to then remove the novel ends and
refresh cool so take a bit of time
because it's calling this if config and
that's actually quite slow sometimes and
the cool thing here is that like whilst
we're waiting we weren't blocking a
threat right so this ws client is backed
by async HTTP client driver library and
it's using non-blocking i/o so we don't
block a thread and play won't block a
thread whilst it's waiting you to
service that request and this is this is
our place can like scale quite well on
one machine okay
so so although players traditional MVC
style web framework where you kind of
you know generate HTML statically on
general HTML and server it is easy to
create a richer front-end experience so
you can easily add like CoffeeScript or
use a CSS preprocessor to write like
less or sass and you don't have to go
away and learn like you can do this from
SPT or I think Gradle as well and so you
don't have slight learn NPM and another
front-end
build tool so if you're just adding a
little bit of interactivity to your site
this is actually really nice if you like
unification of JavaScript and stuff just
from the same build tool but that said
play is aimed a traditional web apps
right so it's better or worse I think
the way the web is headed towards like
richer more complicated front-end and
play doesn't really cover these richer
front ends right and that's where
college s comes in but play is gears
just really messed with the eyes so I've
used been a number of projects where I
just want restful a guys so I ignore the
templating stuff and still really good
just because of this really quick
development cycle and also the user
deployment so let's take a look at
deployment and point is very simple so
if you're using additionally like a
hobby project then you can use Heroku
and you can just get pushed to Heroku
and harass or detect the play it will
detect its play out and it will just
work and another method which I've been
using quite a lot recently is docker
deployment so let's have a look at how
you do that so if I just kill the app a
little bit bigger for you do you see
that
and so now after the SBT docker publish
local so this will build my project and
publish it to light local docker cool
okay so now the document adult and I can
run it so can the doctor on it to expose
it
I suppose that for one thousand and then
by four eases the name of your project
place Carla seed and the version you
have inside your bit Gradle or SPT far
let's wondered area - snapshot okay so
I've actually failed if you look at
while at failed so the reason this
failed is because I didn't attend
cryptographic secret so clay will
actually encrypt your session cookies or
it will cross site request forgery
tokens and for that in these are up to
privacy for it and it won't actually let
you deploy it without specifying that in
production so we go back to the project
and we go to our configuration file here
very similar to driver properties files
but we can also do a JSON style config
as well and in here I just need to
define my play crypto secret and it
seems to be a nice random string and now
I can rebuild my docker image
and hopefully I'll be able to run it
this time
so if I get back
I can just refresh killed math and
running with docker and hopefully it's
going to work
that's Tralee hello and bling okay yeah
so we can see that's working yeah so
that's how you deploy to docker there's
other ways you can deploy as well and
the docks are really good check them out
and that's kind of advantage everything
backed by the company is that they have
really good documentation
it isn't using service so you can't you
can't one things you can do
it's like deploy this inside Tomcat or
something like that okay so that's it
for play maybe at this point does anyone
have any questions about play yeah so
the question is given like we have
spring blue yeah yeah yeah so the
question is like spring swing five and
swim do they're coming up and offering
the same features so is there a future
to play yeah I think so
so kind of answers you play let's go
play will be back spar echo HTTP and if
you're just running restful services at
least be as a great option the reason
you'd use plays elevator HTTP is that it
kind of is bundling all this like stuff
together you go this really quick
development cycle easy deployment and
just you don't have to evaluate a bunch
of different libraries so in the past
I've got I was kind of against these
monolithic frameworks and I kind of
referred micro frameworks so I could
compose it myself but then eventually I
got sick of like re-evaluating the
latest JSON library all the time and
yeah so I do think our future and I
don't think anyone's using is going to
come off it nothing else okay cool let's
move on to Scott yes
so who's you Scala Jess no one thought
who's like heard of it cool okay cool so
what is scars yes it's a scholar to
JavaScript compiler and Hills the bots
started by a guy called Sebastian at
EPFL which is the University of
Switzerland where Scala was first
developed and it started about four
years ago now and it hooks into the
Scala compiler and instead of the
missing genuine bytecode of young women
judgment and like a big use case for
this of course is writing web front-ends
in scala and that's where most of the
community effort is going but there's
nothing that limits it to just web
content so there are people using play
to write services place ecology s sorry
to write node applications on the server
side there's someone the wrote like an
AutoCAD plugin because also plug AutoCAD
uses JavaScript first plugins taking you
Scala Jess for that easy is it so Chrome
extensions one interesting is cases like
a DOS lambda so native with a slander
you can run Java lambdas I think Jane
iam starter was like 400 milliseconds
and you're paying per hundred
milliseconds so you're paying your
accused Java your kind of lambdas are
not very responsive than mode and you're
paying more if you could use squad yes
compile each node and run that in Evo
slander so how do you use star Jess and
it does require use SBT take on use
Gradle facade yes and what you do is you
add a plug-in SVT and you enable their
plug-in on one of your scholar projects
and there's two modes you can enable it
so you can have a pure JavaScript
project which is where that Scala code
will get compiled into JavaScript and
you'll just be one like JavaScript file
and then the other mode is cross project
so you can have this Scala codes we
compiled into both JVM bytecode and
JavaScript and we'll see why that's
useful later on and
so here's a good point as well to
mention that obviously there are
differences between the platforms so
just as it doesn't make sense on the
server to be able to access the Dom API
it doesn't really make sense on the
front-end to be able to access like Java
over file so so you can't like take your
existing twenty thousand line scholar
app and just compile it to JavaScript
but um we can do instead is a take one
scheduled projects that's out there if
you go to the sky zs website they've got
a whole list describe some projects but
here's a few so there's a pure Scala
Jess projects so this is if you just
want to make a front-end only you can
use this one that we're interested in is
play with Scala jets and that has like
example of what end-to-end tests were
way through and there's no other
skeleton for squad yes toggling nodes
there's also ones like a crow HTTP where
discard yes stuff I that's something you
very want to point out is that our this
isn't like GWT
so who's used GWT or like heard of it
yeah
okay so Google web toolkit was an
attempt to let back-end developers write
web front-ends without really
understanding the web or the JavaScript
ecosystem and that's very tempting idea
but uh awesome needs and really work the
scala jess is been trying to hide the
web from you is trying to let you use it
right so we're not we're not hiding
things like react we're letting you
actually use react from squads yes
so why you scared yes nowadays were
quite used to having the front-end and
back-end often be separate code bases
often separate dev teams and that works
quite well but has advantages but there
are some advantages to having one code
base with your front-end and back-end in
Scala
so let's have little ears so a big one
is that you can share your domain model
and business logic across the client
server so I mentioned earlier you can
have cross projects which compiled to
JavaScript and JVM bytecode and that
means you can you can have a class
both on the front end on the back end so
they were like with hotels.com
so you can have like a hotel and you can
you can like get a hotel from database
on the back end send it to the front end
and use that same class since I'd like
your template on the front end business
budget a good use case there is
violation logic so you want to have
validation on the client side to write a
rich user into a user experience but
then you also wanna run it on the back
end because otherwise don't use bypasses
on front end right and it seems a shame
to to write that code twice because
you've got to coordinate with two teams
and implement the same code twice and
also because you could have like subtle
bugs in one rate so you don't want to
have the possibility or the validation
being different on front-end on the
backend yeah we can even get to stage
where like we swordsplay templates
they're being compiled right so we can
actually like how obscure Jeff's
templates running on the front ends
where we affect something in our Dao
they get something from database you
send that all the way through to the
template and it's your factor and it's
just done across all but the funnel in
the backend without coordinating between
two teams another reason is that like
you don't know JavaScript and you want
something more typesafe you want to
catch more errors at compile time that's
a good use case I guess look for me
personally I don't anything get
JavaScript I've written maps in angular
it's quite nice there's no I don't hate
garbage script I just I would I like to
Scala and I want to point out that this
type safety really goes further than
five scripts and so fundamentally
typescript you take your dynamic code
and you kind of optionally add in pipes
and make parts to the new based type
safe but with scarred yes your code is
like strict and type safe and you can
optionally go dynamic so there's a
feature in Scala that not many people
use and dynamic trait and you can cause
something to dynamic and then cool like
I'll retrieve fill the methods and they
may not exist
and we can use this with solid yes so if
we're using for using existing Java
libraries and there's no like type safe
way of doing it you can just go dynamic
and do that but generally can avoid this
and you want to avoid that because as
soon as you go dynamic then you're
you're losing with compile time safety
um yeah and I mentioned dealing the
templates of type safe so please
templating library as far as I know
still doesn't support scarred yes but
there are other ones so let's take a
look at this wrapped HTML kind of it
you see that cool so this looks a bit
weird but hopefully you can see us going
on here so I'm creating an HTML document
and log ahead to the title and then in
the body I've got this unordered list of
fruits for starters like if I put in
like an invalid element present name q1
then this doesn't compile because that's
not valid HTML element but this
particular we actually goes further
so in HTML a list element has to be
inside an unordered list or an ordered
list if we take the list element and put
it through it click inside the body tag
this isn't actually valid HTML really
and we can catch that at the bottom so
that she will actually validate that the
structure of your HTML this is correct
so there's really going a lot further
than just stream bass string based
templating and although this looks a bit
weird with like recording functions that
will generate HTML this is what react
does as well right and that stinko wha
so other thing that's actually too
strange anymore
okay it is more mature on
production-ready they might think so
it's no longer experimental I haven't
been for about two years but haven't got
much adoption and I think there's kind
of a chicken and egg problem I think a
lot of people are hesitant to adopt
skyed yes because they don't see many
big companies have adopted it but this
is coming from like a university like
like Scala did it's not coming from like
the googles or Facebook's of the world
they can't just like do their latest
social network on Taurus college yes so
something needs to give right someone
you said someone a few people need to
like have faith maybe I like try it
because it's pretty good and until we
see more people using it it's just no
one no one else is using it yeah it also
has a really rich ecosystem so there's a
small community but it's quite an active
community so a lot of authors of popular
scholar libraries have made their
projects cross-compile to both JBL - god
yes and Scala nate is now for some of
these so these like first three scholars
dead cats which a list these are
libraries for doing strong function
programming in Scala Searcy is for doing
like Jason serialization deserialization
so you can like see relate something on
the server send it to the browser
deserialize it that's quite nice and a
lot of the standard library works as are
so I said the like there's platform
differences but it's not like nothing
like so I used to have collections and
you can have futures so in Scala we have
features and you can have like a thread
pool and you can run like you can have
like 10-feet gets run like ten things at
once in JavaScript we learn your own
wanting to entrees a single very
environment but futures actually map
really well to JavaScript promises so in
JavaScript
whenever you do i oh it's asynchronous
and you have a callback and javascript
can realize that was you get callback
hell and the solution was promises and
that's semantically really close to
features also there's a lot of types a
facades for existing libraries so out of
the box those are really good you can
you can access the Dom in a type safe
way we'll see that a bit in a minute
there's also types emphasized for jQuery
so you can like get all to complete and
all that good stuff and react as well so
there's a really good Skaar Jeff's react
library and that recently came out at
version 1 and you can even do things
like take a react component for
JavaScript and use them so I just glad
yes code and even define a react
component in jobs Scala GS and use that
from JavaScript and also there's a bunch
of libraries and they've just been built
for scars yes so Scala tags is a
templating library similar to a Bachelor
which we just saw and auto wire is
another one which I'll highlight which
we're gonna see in a bit and that was
really cool you'll see one of it the
other thing is that like it's not create
it's not as crazy as you might think so
scholars yes actually it's really
similar to es6 which is likely up the
upcoming version of javascript so if you
have a look at
okay so here is some code over here I
have a destination info box I have a
button and when I click that button it's
logging something to the console let me
zoom in a bit so every time I click the
button it just loves noir and what I
want to do is be able to type in a
destination and see it logged in the
console so if I was writing JavaScript I
would write this site a got document dot
get element by ID and get that input box
and then from that I want to pull the
value unfortunately it doesn't work
inside yes the problem is that document
dot get element by ID can return any
type of HTML element so input boxes and
probably a few other types of elements
have this value property but why a div
doesn't have a value property so we
can't do this so the first way we can do
this is we can cost it to an input
element so this you know if it's not a
new element will blow up at this point
but we're kind of being explicit about
it and we see we think this quite
obvious that we're doing a cost and then
we can we can pull out the value so now
if I type in London we can see that I'm
logging London and that's what we're
doing another way is to go dynamic so we
can get the input element and just cost
it an instant suggest dynamic and then I
can just call anything on that I want so
now I can call that value field and so
up to that's fine problem with this and
the reason I want to do it is because if
I type in some random field name it
still compiles just doesn't work so then
we get like undefined right and if
you've done much JavaScript you've
seemed like prophecy la is not on
undefined and like we want to avoid that
so please if we cast the types like we
do types a cast and obviously it still
didn't exist it would compile so that's
kind of what what we're trying to leave
as ecology astray we want to add the
edges you what this kind of you need to
cast but then once you have it in this
type safe way then you can do all your
work with it and then yeah the idea is
you just push these potential failures
to the edge and also we see that failure
a lot sooner right we don't like get
undefined and pass it on somewhere else
and realize later on so yeah it was
really nice
okay so that is scarred yes yeah I'll
take questions here says anyone yeah a
disaster yeah so I guess like how would
you test any JavaScript application like
in general it's harder writer than than
back-end so you could use stuff like
selenium I think the playlist guard yes
scouts and I think I have early on the
slides you can get slides online that
has a slim iam based test and because
play has are built-in also like it Scala
code right so you can have your domain
classes and business logic in share code
and then you can just write unit tests
with that right so and that's really
what I wanna do is you want to move as
much as you can into like functional
type safe codes and just have a little
bit of the edge where like you manually
test it or he's like expensive like more
expensive acceptance testing like
selenium cool anything else yeah
yeah that's a good question so the
question is like how is the angular
support that's called yes honestly I
don't know I haven't used it there is a
title exercise for angular go and give
it a try I haven't used it nothing else
cool okay so now let's have a look play
Ansgar's yes
so finally gets a touch of the talk yeah
this is something I started doing like a
year and a half ago I studied for besson
projects just using play squad yes and I
found to be really productive so this is
the skies of projects I mentioned
earlier the vincent's maintaining this
is a great way to get started you can
just check this out
SBT run the same way we do the play and
then hack around on today I actually
want to have a look at this little
project I bill with it so this is
actually a project I use at work so I
teach a course of work to Java Java
developers to teach them playing squad
yes and this is the app we built so I
will just change it to that project will
kill this and then it is sparkles so if
I run now so we get an idea of what the
app does first before we have a look at
the code
so if I go to this so our hotels calm so
it's a listing site so yeah we can
search by like destinations and given a
distance we can like see hotels and
Paris is not good example the London so
if I change the distance we can see like
the pages live updating so you can see
like there's a bit more to this than
just the server-side templating right so
actually have a bit of an interactive
front-end yeah so let's have a look at
how this works I switch projects
so the first thing to notice compared to
the play pocket bullet earlier is that
we have three sub projects in here so we
have this client so this is the scholars
yes code that we compiled down to
JavaScript
this is the server code so this will
just this is if we have a look inside
there this is our normal play up you can
see this app folder and the config at
our routes file and then we also have
this share code so this contains our
shared domain and business logic so if
we have a look inside here we have some
model and there's hotels so very simple
version of hotel so you just have an ID
name that long so I mentioned that I we
can react to things and we'll do it
cross the front in the back end so let's
let's do that right so in my idea can
just rename this coordinates and this is
referenced in the front end and back end
then I'll just updated right
I don't coordinate course T teams I need
some way of getting hotels so on the
back end when you first load the page
the JavaScript do anything like it's
very common that you want to render
initially at least on the back end so
there's good to the SEO you don't yeah
you want to force users to you
JavaScript and but then when these are
changes and input promises I want to
regenerate the search results so this is
the service I need to be able to access
on the front end and the back end I also
have a share template so this is the
table that actually displays the hotels
so you can see I have like a name
location images and here like I'm going
through all the hotels and creating a
road for my table nice thing about this
being Scala code is that I don't have to
learn how to do like looking other
things in my template language I can
just use Scala code also when I like
have like this good creating a Google
Maps link I thought it would be cleaner
if I pull it out into a separate
function so I can just I can just put
out functions using my IDE I don't
to learn how to do into temptation
language so if I extract this I can just
call this like render oh and I don't
need to like know how to use some
technical language and so I kind of had
the full power of Scala and I don't have
to learn as much you use initially oh
that's weird
it actually ends up being quite nice to
work with okay so let's I look at the
server and let's start by looking at the
endpoints that I've added
so the one we just saw was this hotel
search endpoint which you give it a
destination and a distance let's have a
look at that so in here we have an
action like we saw before and we're
fetching the search results so given
that destination a distance give me the
hotels and then I render this search
results play template so let's have a
look at that over here in views search
results so this is like normal play
template but then down here I'm actually
listening out that hotels with the
images I can I can use the che code
right this is using that share code that
we sort of min ago and then I can reuse
on the client side to re-render whenever
the user changes in the parameters the
other thing to note here is like how
does that we're compiling the client
down to JavaScript have the Gilad in the
page there's a plug-in and we basically
just add this line and then it will be
added in whilst run the server something
else on to look at so we see this search
in point the page that we saw I've also
got this API endpoint so here is where
I'm using Ottawa which is like I
mentioned earlier so auto wire is a
lowly for basically doing RPC so from
the client sides we can call services
which implemented any on the backend and
can call them over HTTP as if they were
available locally so like one of the
problems with like RPC back in the day
the reason kind of fell out of favor was
because
you didn't really know if you're calling
something local or remote and if you're
calling something remote in a block can
take a long time but in Scala we have
futures right save what order saw wire
will do is whenever you call a method on
this hotel service you'll get back a
future and you kind of know that this
might take a long time and this Maps
very well it's like the gasket promises
okay so let's have a quick look at how
this works so I'm using what's a wire
and it's basically a bit of boilerplate
I have to like create a server also a
server and also a is agnostic how you
want to serialize your data over the
wire so we're using a library called you
pickle to do Jason station
depolarization we could use Searcy which
I mentioned there's also ways of
sterilizing it - despite arrays that we
send over the wire and then down here I
have kind of got two adapts between play
handle to wire like at the end you see
I'm converting it back into Jason and
writing I'll just a string and then
laughing in the 200 but once I have this
boilerplate and I've exposed my hotel
service here in future whenever I had
methods to hotel service I don't have to
do anything I don't have to update I
know to add a new employee and it will
just be handled for me so my important
point if you're if you're writing
restful api is and you have mortal
clients quite econ users right so you
want to have that that's your contract
right if you're exposing to mortal
clients you have that clearly defined
contracts which you manage but if you
have a front end of the background which
was deployed together then this actually
kind of removes a whole bunch of work
you can just let expose a service and
use it and not worry about doing it in
two places and having typos or figuring
out when you deploy deploy order or
something say who's going to you don't
worry about backwards compatibility
things like this okay so that's women's
work on the server side
let's have a look at the client so here
I have app so this is the Scala code
that's going to be compiled down to
JavaScript and we have a main method
here so much like any Scala class you
write this is the entry point so when
the script gets loaded on the page the
body of main is what will be run so
we're setting up it's all to complete
dialogue that we saw like this thing so
we can switch between locations we are
writing these methods to get hold of the
distance and destination input boxes so
that's these and then I have this method
to refresh the search results we have a
look at in a minute and then what I'm
doing is just adding event listeners so
whenever you change the destination or
the distance i refresh the socials so
this actually looks quite similar to
Java switching my right so this is the
Dom API we cost it so that we can pull
out the value and then it's nice and
type safe yeah and then here like we're
adding event listeners this again
standard Dom API we can this you can use
any of the listeners on any soil event
that's on here I'm using progressive
enhancement as well some like there is a
search one but I'm hiding it if the user
has Josh what enables and let's um look
at this refresh so every time you change
the input I capture those values and
called reload so what's really doing
this syntax is like very scarce specific
so there's a talk in here earlier about
should we show this in tax but basically
we get some hotels and then then we're
transforming it into a string using this
shared template we saw and then once
that's finished we are replacing the
hotels table with the new version I just
rendered so hopefully that makes sense
there's a lot of magic here so this is
Ottawa and there's a few things
happening this I'm saying I want a
distance of hotel service using my alter
wife I'm and once I do that I get access
to all the methods on hotel service
which is only search that I can link or
search and search would normally return
a sequence of hotels but I'm calling it
like two server so that could be really
slow so Ulta wire and we have to add
this like cool on the end and at that
point it will wrap I response at the
future so you might not get this for a
while yeah and that's kind of equivalent
to doing it under the hood it will be
doing an age at school and managing
callbacks and JavaScript's of stuff and
you don't have to worry about that you
can use a nice color syntax and if you
have a look at that client it is again
we have a little bit of oil in plate
it's kind of similar to what we had on
the server side and so I have to match
at the end point I've in my routes file
and I have to like take this object and
serialize it's JSON and then D
sterilizers are yeah
so yeah that's one see on client side as
well so any questions about any of the
codes you saw we appreciate it I kind of
went through it and I don't he'll use of
that was to follow sir cool the
questions yeah gun demo so that's it say
we take a look at play what it offers
we've taken over the scars yes we've
kind of seen the status of the project
and show you my like my new item to use
it and then we take a look at play and
scars yes and hopefully I've shown you
why that's quite a good combination any
questions that's the end
okay</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>