<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Tools of the Trade by Sebastiano Poggi | Coder Coacher - Coaching Coders</title><meta content="Tools of the Trade by Sebastiano Poggi - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Devoxx/">Devoxx</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Tools of the Trade by Sebastiano Poggi</b></h2><h5 class="post__date">2015-11-11</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/1MjcTy2FSVQ" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello everyone and welcome to tools of
the trade I am Sebastiano podgy i work
at nevada and london and i'm a google
developer expert for android so before
venturing into the main topic i just
want to tell to take a short trip down
memory lane so back in the day of early
android days we still we still had to as
developers to complete applications to
ship stuff because in the end what we
needed to do was to bring food home
right but as everything the ways of
doing that have changed over time so we
are different tools what we used to have
might seem ready Montori today but it
still did the trick some stuff has
evolved into more modern and beautiful
and useful tools others have kind of
faded away like it enough actually is
there anyone in the audience that are
still using eclipse I cannot see no one
person two three that's fine okay I
thought worse stop using eclipse because
now you should use Andrus to do so
android studio is as you might know the
now official ID for android that Google
is producing and is based on the
excellent IntelliJ ID from JetBrains
there has been the latest stable version
is 1.4 and understood a 1.4 has
introduced a few new features that are
actually quite interesting but I'm not
going to go through them now because
they're out of a scope of the
presentation so now i don't know if that
ever happened to you but i found myself
thinking these quotes over and over and
over and over when
was doing my development well no I love
Eclipse I've never done that rather
something more like like that so these
are not something you should be proud of
but that happens if your reaction has
ever been something like that when you
were developing because of any of those
reasons or or rather then I have good
news we can fix all of them well not all
of them there's one we kind of fix which
is if you still use Eclipse sorry not
much we can do for that but yeah we can
use XML attributes and annotations in
Java in our code to make our lives
easier and to fix many of the annoyances
that we would otherwise have so now
quick question who does know about lint
show hands few people not enough not
enough so lint is a static analysis tool
that was born in 1979 for see what it
does it analyzes your code at Build time
and checks for common mistakes this is
any lean tools but Android has got its
own specific link to that not only
checks for code issues but also for
resources and other things that are
specific to the Android platform now
lint should be part of all of your CI
builds now you should have a CI build
and you should do static analysis on
your code this is if you're not doing it
please do it because it will save you a
lot of time and headaches and pain this
was a question that I want to trust
because you see now we're going to talk
about the tools namespace so the tools
namespace it's something you use in your
XML in your layouts in your XML
resources in your application that is
built into the SDK and
and is also natively supported by
Android studio and still to some extent
by eclipse it is you it's composed of
attributes that are usually usually safe
to commit enter under version control
and it's got one main headline feature
that I would say is worth knowing about
which is design time overrides so what
does that mean basically design time
override means that you can take any
attribute that has the android namespace
change that namespace from android to
tools by just adding in the namespace
declaration and that attribute will
never ship into production it will only
be shown in the layout preview in the ID
this is useful because for example what
you might want to have is showing some
text in your some dummy text in your
text views in the layout preview while
you're developing it but you don't want
to have that text into the application
so what you can do is simply swapping in
tools Colin text and then magically you
will see some some preview of the of the
text in inside of the text view and this
is just one of the many you can use
background or any other attribute that
you can think of now tools attributes
are actually not just limited to design
time overrides there's actually two main
categories the first of which i like to
call lint attributes this is my own name
it's not official and the other one is
the design attributes now i'm going to
focus on the lint attributes first and
this is why i asked you before about
lint because there's a few things that
you can do with it with the tool tool
namespace so for example there is the
ignore attribute the ignorant attribute
allows you to explicitly suppress a
warning it's basically the same that the
correspondent to the suppress warning
annotation in Java
but just setting that this is a really
bad example this is not something you
should really do in your application but
if you will ever wear to need to
suppress some some kind of lint warning
then you would use the ignore attribute
and just specify the name of the links
linting inspection that you want to
suppress now the next one again it's
basically the same thing as the
counterpart in in jela which is the
target API attribute what this what this
means is what i'm showing what i'm
writing here is meant to be run on a
specific platform version and newer so
in here for example we had the elevation
this elevation would on if the minimum
SDK version is earlier than nollie pop
will show up in red unless you put it in
the v21 folder well if you put if you
put the target API a notation means okay
I know this is not going to work before
lollipop I don't care it's fine so in
this case this would just do the trick
next one kind of not super useful but is
there is the locale the local attribute
the local attribute specifies which is
the locale of the string resources that
you're including in a given file the
only real use I could find for it is to
disable spell checker if you have your
default strings to be in a language
there is no English so for me I might
have an application that is in Italian
and all the resources all the string
resources in the default in the default
values are in Italian so the the spell
checker will light up like a Christmas
tree this way we're just adding it local
something else you would say okay don't
don't consider those errors now we have
seen the the lint attributes let's just
quickly move to the design attributes
the first one is
context is actually i think the oldest
attribute in the whole namespace besides
the the override and this used to be
called activity i think they changed it
to context because it does not only
apply to a layout that is used in an
activity but it might be for a fragment
or an included or something like that so
what this attribute does is it links
your layout with a specific context
which means it helps the ID looking up
for an item in the in the manifest and
figuring out what is the theme for
example that you're using there or if
it's meant to be used in landscape
rather than in in portrait stuff like
that so you can see that by just adding
that simple context then the prey the
preview can show you the the UI with the
correct theme so you don't have for
example duplicate toolbars and stuff
like that now next one is called showing
this is actually quite interesting this
means probably all of you i hope i've
used the mechanism of merge and includes
so what merge does is basically saying
this stuff that I'm sure that I'm
putting inside of this XML file is going
to be inflated inside something else but
I don't want to create another useless
parent hbu group so the problem with
this is that by default this is shown
this is the preview is shown in an empty
screen and the the merged layout is
considered to be a frame layout now what
you can do is if you have a
corresponding include in another layout
you can say show in and instead of
showing you a boring preview and kind of
useless it will show you the proper
preview with all like if the the include
were inflated in the right place next
one is menu so if you have an activity
that it has a menu by default that many
will not show up now what you can do is
you can use the menu attribute to
specify the name or the names the comma
separated list of name names of menu
resources so for example you might have
settings Colin Coleman something like
that so you can have more more than one
menu inflated for you at design time
there's one Cavett here this does not
work when you use an app compat theme
probably because there is no real action
bar because it's kind of a hacky way of
doing it when you use an app compat
thing next up is the action bar nav mode
action bar nav mode is as the name says
it's supposed to preview the navigation
mode that you're using for your action
bar now action bar should tell you holo
because now in material the action bar
is called app bar so you think hollow
mmm does it work on on newer versions no
it doesn't it only works on themes that
are based on holo so it's kind of
irrelevant and it doesn't really do much
if you're using anything else up comfort
or a material themes as base it will not
work now layout layout is kind of a it's
a it's an easy-to-understand attribute
but there might be some confusion
because at the layout attribute is seen
as Android Colin layout tools Colin
layout or unbound layout as well
depending on the context we're just
looking at tools Colin layout this is
used by the IDE to preview the content
the layout that is going to be inflated
inside of a fragment so if you add tools
Colin layout and
specify a layout then the ID will be
able to show you a decent preview of the
of the actual you are you're going to
see the minim onyx I usually use to come
to understand why this is tools call and
layout and not something else is that in
an include for example the layout will
be bound at compile time but in a
fragment the fragment does not by
definition have a view until it's
inflated and you can inflate something
completely different because it's under
your control so I suppose that is the
reason why they are using tools instead
of the unbound layout or something else
next in the list is the list attributes
so if you have a list view and only a
list view you can specify a header and a
footer layout for your for your preview
might be of limited usefulness
especially the footer considering that
the footer is always going to be at the
bottom of course because it's a footer
but the list is never going to be able
to show all the elements down to the
footer and you cannot scroll it in a
preview so it's completely pointless one
thing has to be set as you might see in
the slides there is an ID on the list if
you don't specify the ID on the list
view it will not work because reasons I
don't know but ya don't do like me don't
spend half an hour trying to understand
what you have done wrong and then
realizing that it only works with an ID
it's not documented but it's a thing you
need to do that and you can specify the
layout for the items as well so in this
case let's just add a few things and you
can see we have a header we have a
custom item view but just for the first
one because for the others this there's
the preview still using the system
default item layout but a different one
that it was before because again reasons
this is just to finish our
round up of the of the XML attributes
that you can use I've written a couple
of blog posts and if you were wondering
yes I recycle the title for this talk
you can find them on medium the QR code
is for the first one but there's links
in between the two and if you don't like
me you can still go and look up the
official documentation which is kind of
okay but it's not super complete so you
might want to have some more information
now this was for XML but I've said that
there are annotations that we can use in
Java code as well so let's move on to
that and see the magic world of the
support annotations so the support
annotation much like much unlike the XML
attributes are actually part of the
support library they're not shipped
inside of this decay in and by itself
but the fact that they are shipped
inside of the support before dependency
it means that you probably have it
already in your classpath because if
you're using appcompat which you should
then you have support before in your
classpath and in in turn you have the
support annotations that come as a
dependency of support before so you most
likely already have them in your class
pass at this point now the first type
and the probably the most relevant kind
of support annotations support a
notation that we have is the null
ability annotations so there is two of
them null sorry nullable and no no what
no null means is quite easy to
understand so let's start from nullable
so in my code I have added at nullable
annotation into the tool to a parameter
of a method I can do it two fields I can
do it to return types too
values of methods as well that still
does the same but here you can see that
the IDE will actually complain about the
fact that I'm explicitly saying I can
take a null and I'm not doing anything
about it and I'm just most likely going
to run into a null pointer now let's
take one step back and pretend we have a
different kind of logic again really
simple examples just to make you
understand the point but in this case we
have annotated the parameter with a
non-null annotation which is not the not
null a notation from JetBrains and the
jsr it's a different one that is
specific to Android but they are
completely interoperable so Android
studio is smart enough to be an IntelliJ
are smart enough to be able to basically
mix and match the two and it will still
work so in this case I have added the
non null annotation and the ID will be
smart enough to tell me well it there's
no point in doing that check because
really that will never happen because
you said this is not going to happen so
you can simplify your code another thing
another of the quotes that we at the
beginning was yeah resources ID are all
playing integers they don't mean
anything in and I in them by themselves
they don't have any kind of type safety
so where they where the support
annotations come to help here is with
the resource ID annotations this one's
there's basically one per each type of
of resource and what they allow you to
do so for example in this case assume
this is a custom view and we have our
own set main text color method and we're
passing a resource ID for a color what
the ID wouldn't know about it and
actually by default is going to complain
because it will assume that when you
request the color is going to be
the actual color not the resource ID for
it well what we can do instead is just
adding the color s annotation to the
parameter and at that point the ID will
know that okay it's fine you're
requesting a color ID and not the actual
color as I said there is one of these
annotations for each kind of resource
there's actually one more which is the
at any resource at any rest which means
any resource ID I don't know how many
users you can find for that but he's
still there and you can still use it now
we have a staying on the color side of
things the misunderstanding before was
that the IDE was thinking that we were
passing a row color but we were actually
passing in the caller ID but the saying
goes on the other side the could be a
misunderstanding that I actually want a
row color and someone is passing in a
resource ID now in this case nothing and
no one would be able to help us
understand what is the problem so what
we can do in our method in the parameter
we can annotate it with a colorant this
will tell the ID and lint that it should
expect a row color and then at that
point the ID will warn you that you're
passing in the wrong kind of content so
you should do get resources get color on
that before passing there in now similar
kind of annoyance you can have when you
have integers floats or arrays there is
no way of binding them to a certain
range right unless you wrap them inside
of classes that do this validation at at
creation time actually if you use the
support annotations there is one way
which is quite intelligent of doing that
you can use for four values you can use
the
the range annotations there is entrained
and float range they allow both to
specify the start the minimum and the
end or the maximum with the with the
float one you can actually see inclusive
you can actually set inclusive or
exclusive out of the bounds and in this
in this case if you just apply that when
the ID will be able to tell you this is
the wrong this is outside of the
expected value and I mentioned the Rays
as well well you can use the size a
notation for array you can say these are
ready supposed to have two elements or
multiple of two or at least two
something like that you two is any
number so you can you can have a
stronger contract in your in your
methods by just using the the few
annotations that we've seen so far next
up so I don't know if you've heard about
the Intel vers versus enums debate it's
been going on in the last few months
basically there's good reasons to use
enums and there's good reasons not to
use enums if you don't use enums and you
don't want to lose the type safety you
can use a typedef annotation which
basically allows you to just define
another annotation that is then going to
be used inside of your main of your main
code to say oh this integral is actually
supposed to be of that kind and can have
those values and this also works for
strings and in that in that case if you
use a value that is not correct then the
ID will be able to warn you next up
really quickly threading can be a
problem and if you want to specify that
a method has to be called on a specific
thread then you can use the threading
annotations so for example in this case
if you say this method is going to be
called on a worker thread because it's
called from a service or something like
that or a background thread
then the ID will be able to tell you
that you shouldn't touch views in there
and the other way around of course
there's four of them UI thread main
thread binded thread and workers right
well worker thread is intuitive UI
thread is intuitive main thread is the
main UI thread but you can use you can
have a different UI thread for each
window you will never have to do that
most likely in your life but you can and
bind the thread is the thread that does
the inter process binding which again
most likely never going going to use it
three other annotations oops sorry three
other notations that you might have are
the co super that means you have to call
the super of this method the check
result which means you have to take the
result the value I return you and do
something with it is not just men
because of bad API design it's there for
a reason you can even suggest do this
with it and then there is the visible
for testing annotation that means these
field or whatever it's got a wider scope
than it should because I'm using it for
testing now that should never happen but
you never know next up is permissions so
with marshmallow especially you might
need to be very careful with the with
the permissions that you call because
you might have or not have permissions
that right runtime and things like that
so what you might want to do for example
in here I'm trying I have a method that
will start a Bluetooth scan you want to
undertake that method to say this method
is actually going to require these
permission and if you try to call it
from an application that doesn't have
that permission and the manifest then
the ID will tell you before you run the
application look this is not going to
work because you don't have that
permission and last one which is really
interesting but unfortunately not really
working yet is the ProGuard one last
time I checked
last week you were still not implemented
there's a pending change list but it's
not merged yet so what these are
notation is supposed to do is once you
annotate classes or methods and whatnot
it's supposed to generate the ProGuard
rules for you at build time which is
quite convenient so you don't have to go
in there and change stuff when you
refactor and when you maintain you don't
have to keep it in sync which is quite
nice now if you want to have more
informations about the support
annotations there's two places you can
look at one is on on the Android
developers website which is this one and
then there is another one which is the
tools website now the tools website and
the Android developers web pages kind of
have the same content but not really and
there's still a few dots that need to be
linked together so you might want to
read both in case you have doubts
because there's there might be some bit
of information is not available on one
that is on the other one so yeah that
was it for for the session and now if
you have any questions just uh yeah just
ask the questions good</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>