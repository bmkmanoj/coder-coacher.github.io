<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Devoxx Registration: Creating our own Android Printer Driver by Alex Van Boxel | Coder Coacher - Coaching Coders</title><meta content="Devoxx Registration: Creating our own Android Printer Driver by Alex Van Boxel - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Devoxx/">Devoxx</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Devoxx Registration: Creating our own Android Printer Driver by Alex Van Boxel</b></h2><h5 class="post__date">2015-11-13</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/fk-cAfnEGVk" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">all right welcome to the cookie creating
our own printer driver for the diversity
registration I'm happy that there are a
few people interested in such a niche
topic so I thought to rim brandy tube
behind the scenes of devix it's bitter
behind the scenes though so a bit of a
history so like four years ago we
decided to write around software for the
registration instead of depending on
external firms to do the registration it
was with the NFC the last three years so
this year the first time we switched
from technology so this was our first
set up a lot of devices a lot of devices
because the boot partners they need ya
to scan your tack and not all the phones
had NFC readers today even though today
every NFC and every Android phone as and
I've seen their iOS doesn't a fantasy
but isn't exposed locally so we also
always have to have to neck with
partners can we borrow dis from device
so we're lucky that we had some devices
from from google but ya des which every
year so last year were pixels so we had
an external reader so it was a bit of a
pain and also the technology the tax
that we used they were not always
reliable so the first one you see here
is the first ways from 2012 and 13 and
14 and then 10 it gets smaller and
smaller and you always notice too late
when the batch of the 44 Thailand texts
were delivered that's oh man this is a
bit it will be a pain on the conference
for people that were here last year
probably noticed that it was a real pain
to tag him vote at the entrances so we
decided this year to do something
completely different also there didn't
have a very high throughput in the
entrance so last year we still had a cue
from the beginning of the cannibals
business center till the decathlon and
it was quite cold
and over with 28 people and with 4q so
you know their interactions you read the
e-ticket you do you collect the correct
wristband because everything every the
combi has another color than a uni you
wrote a tack you you put a wristband on
you look locked it that was a real pain
so that combines we turn in roble apple
and a seat F technology and the need of
extra NFC enabled devices was a real
pace so we decided this year to go
classic so going classic means we are
just printing just the typical lanyards
so so yeah be in conference
community-driven conference we didn't
want to put a drive up the price of each
look for cheap solutions so we found one
this one like hundred and fifty euros
not going to make advertising of it the
one we use now under 50 years and 75 for
the battery so it's quite okay it's not
a regular device though because it'll
record device the i cost thousands of
euros 4000 weekend by six or seven of
them and we save anyway but problem okay
they have software with baked in
software for android iOS but no sdk so
let's contact them they promised in sdk
by summer mm-hmm it's now winter no sdk
so we decided just not a trust did this
email and just go and go and write our
own software so bought a printer order
50 euro that was okay and then using our
software write some create some stupid
test patterns like horizontal line
vertical lines circles crosses whatever
and see what goes over the wire people
never done any wire tracking that is a
very good software for it for doing that
well good it works fantastically but the
user interface not
okay but yeah it's back at sniffing here
so user interface that's not the main
concern and it's Wireshark it's
available for mac linux windows or
whatever but it works so we do the dumps
a typical dump for a package something
like this you can save it a desk luckily
itself some some nicer formats so can
you use to to to read it more human
readable but this one this is more
better to to read from a computer sir so
we started to do the real test driven
development because we have the dumps so
we have our upfront data the our test
data no code typical a good use case for
test-driven development so wrote a
simple utility that research dumped make
a byte array out of it and then yeah
let's write our own code seeing what so
goes over the wire we see that was
already internet printer protocol we can
get some specs of that so we started
creating our own classes and we toast
ddd approach it was a very very idea we
had a very quick release cycle so hey
for ddd and then before the next
steering committee we had to prove it
and so I my best user interfaces skills
and created a very nice android app to
to print one of those so hey it was
approved that's good this year for
printing done over a android fair mark i
wanted to do a nice approach instead of
doing everything in the app i wanted to
be a nice citizen and use the android
framework because it has a built-in
frameworks not very popular so why but
it's that lets use it so i investigated
there it's a API level 19 so it's very
good
our device from last year they were
android for at four so it's within the
spec so let's see in the documentation
what you have to do there you have to
create a document adapter very easy you
can get a document adapter in that
adapter you say what's on the label you
you get a normal right and there you
have a PDF so PDF that's that will be
tricky I don't want to learn any PDF
specs devoxx is in November so it was
like April May or something I want don't
want to concern but luckily there is
support for PDF to write PDF from you
get a canvas that and just write like
any other regular bitmap you just write
on the canvas and you have your PDF page
so that was very good news that was that
an inside of your app but let's now
write our own android service still okay
right a service whenever a nap write
something we will get a print shop in
with that PDF job that was written in
the other one only within our app so
that's okay now we need to get a bitmap
out there good news there's something
like a PDF renderer you see it's a lot
of overhead but still I will we would
select have tried it and see if the over
it was not too big so but there was a
big problem and it was API level 21 and
we don't want to throw away our devices
from last year so we just skip this this
step maybe for next year because we are
getting more and more kid get level
devices or higher of marshmallow so so
that we can go that route and give the
old devices to sponsors if they need one
so plan B die matters so typically we
did what we already had before the
research in the android framework and
just printed our stuff good news is that
all those things if you want to play
with it and i have printed like that or
maybe something similar just fetch it
this is the URL and it has the nice
interface that i had with them button so
you can play print you just have to
pretend your IP address of your printer
all those things are I didn't know if I
mentioned it but it's all wireless so
all things you have to connect it to the
beefy your phone to the beefy and and
you're good to go so a bit the post at
FC years we're not thursday so we've
been working with this printed from
sunday we already have a bit of
experience now so what our lessons
learned now it has a very good high
throughput so by wednesday what is a big
day when we have like an extra doesn't
attend this coming on top of the uni or
compete tickets we already in and we
could with 6 q's and all these six
persons get the cue down to that people
were almost never outside if people were
queuing to look till the decathlon
please let me know because we think it
wasn't so that's also very good+ there
are also a lot lot less posts
registration stuff to do because there
were no tags that were not written
anymore or broken or empty or something
so that was less through a stress for me
and i also partners can use their own
phones because which phone couldn't
three a QR code yeah i don't want me to
without a camera but of smartphones have
one
so that was a positive there are still
some negatives though we had some
outages of the wiffy so when that
happens we're really screwed you have
like 6 q's and they stop all
simultaneously so that's still a thing
we took the risk we had a contingency
plan but yeah luckily we didn't need it
and the brains are also not I not always
that I quality and so also due to the
with you if there were packaged losses
or slow downs or repeats we had some
empty lines could look at your badge if
you have empty lines that was due to the
network and it are not ready devices so
we had like already one that is
completely total loss so luckily they
are quite cheap so it's still okay next
year we're certainly if we go still to
the print print truth we are going to
try to wire them up VI USB and make sure
that we do are not rely on relying on
the right we see anymore and also
real-time Diagnostics because the
scanner cartridges they run out of paper
it's 22 metres per cartridge and I
calculated it it's like if there were no
reprints we needed 150 metres of tape
for everybody but you had a reprint so I
think in total we have 250 meters of
tape you so so I will see next year
probably will go that route because it's
it's okay so still some time left for
questions so and then you have anybody
any questions ok that's it thank you
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>