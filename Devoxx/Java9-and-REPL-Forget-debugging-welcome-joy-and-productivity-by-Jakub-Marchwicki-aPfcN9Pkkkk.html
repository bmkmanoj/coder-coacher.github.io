<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Java9 and REPL  Forget debugging, welcome joy and productivity by Jakub Marchwicki | Coder Coacher - Coaching Coders</title><meta content="Java9 and REPL  Forget debugging, welcome joy and productivity by Jakub Marchwicki - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Devoxx/">Devoxx</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Java9 and REPL  Forget debugging, welcome joy and productivity by Jakub Marchwicki</b></h2><h5 class="post__date">2017-11-07</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/aPfcN9Pkkkk" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">okay welcome to the next block of devoxx
tools in action we had those deep
depressions so now it's a matter of
bite-sized learning and exploring
certain tools and certain actions and
how they perform and how things might
work so I have the first session and
this block which is purely dedicated to
Jason to one of the Java nine features I
will not talk about multiple Java 9
features neither about modules just
focus on one certain one single things
Jay show and try try to explore how we
can how we can use it in our in our
daily daily activities and in general
what's what's it for
so there were few slides but I will just
skip them because we have just half an
hour and it's a tools and action so
smiles are cheap and Cody's course is
good who of you has already tried Java 9
like played with that ok few hands
I'm not asking the naughty question of
who is having that on production then
who has played a bit with John Jaso like
run it ok that's probably those with try
Java 9 and who is in general familiar
with the concept of rebels no see ok so
that'll me that'll make it slightly
slightly easier what I'll do in terms of
slides yes that's just one notice yeah
we will be talking about Jai show which
is a read evaluate print loop in Java
finally so we can run it it's not
something that hasn't been ever with
Java
it's just embedded in the JDK which is a
little bit and helpful and handy and we
can use it to explore Java Oracle says
it's primarily for learning Java which
is a good thing because if you've ever
tried
to teach anybody Java you just had this
public static void main method between
you and somebody who has no idea what
language you are talking about and now
try to try to explain somebody why are
you building publics class with this
funny method just to show me how to add
two digits and in Java so now you don't
have to do it and then that's that's
that's how Oracle looks at it but how I
look at it is a tool that allows me to
get into the middle maybe not get into
the middle but into part of my
application and explore how things are
working with my with my app just not in
a way I used to do it for all the time
so not in like running a simple test or
building a main method and fiddling with
my classes but do it interactively
within within shop so I'll skip
everything leave it blank and open the
terminal yes that's the terminal so now
I'm having the Java 8 so what I do is I
switch to Java 9 I'm using a giant think
which is like environment Java
environment so now I have Java version
which is version 9 so I can run JSON so
if I type in jeschill it pops up with a
sleek little editor it is jeschill
stands for Java shell not JavaScript
hell just to be sure that we are talking
about the same thing so I can I can
explore with my java with my java code
so i can do 4 plus 4 and it gives me 8
and it refers it to a variable called
dollar one i can also name it so i can
do and i which is ok that's very simple
and that's how most of people start to
show Jaso
which is ok that's that's their idea you
might think what we can use it like
sensibly for so
a friend of mine just told me that he
found his first use case for Jay show
which was that he was being actually he
was being called by the doctor and
telling and the doctor was telling her
that she has to reschedule the
appointment by 44 days so what day is it
like in 44 days so what she did is she
she just started facial and did like
employed Java time and said local local
date now and then plus days 4444 so we
know it's close to Christmas so so we
can do we can interactively do whatever
we would like to do and we can import
everything we have imagined from our
Java Java environment actually if we
list all the imports we see that we call
it quite a few standard library quite a
big chunk of sidled standard library
already imported we can also use JCL to
explore new features new api's within
java 9 and that's actually how i started
working with facial i didn't wanted to
install to install environmental ID or
to have java 9 as my primary environment
it was so early early release candidate
so what i did i installed java 9 and
round ratio to see how I can what's new
in Java 9 so for example you might have
heard that what we used to have in Java
so we have because let's build an are a
small list of numbers which is a new
label and it's a list of integer
and that's my list okay okay so I have a
list and what we have in genre we have
the streams which is great so I can do
lists of stream and then I can map it to
optional of nullable so I have and then
doing for each system friend life so I
have this list of this list with an
optional empty head at the end and in
Java IDE was one of the big issues and
people were not happy with the streams
API because there wasn't an easy way to
get a way well to flat mob this is
optional because optional didn't have a
method like didn't have an a nice and
easy way to get from an optional which
is to be honest with a stream of one
zero or one element to an infinite
stream so stream of zero to n so there
was no there was no way to get from from
optional to empty people start to do it
with the flat map which was a little bit
cumbersome because what they did is they
flat map this optional using either
optional map of stream off if it wasn't
empty stream off or else stream empty
I was the that was the way to do it okay
so I can for each that was very
cumbersome people didn't like it so as
you can see I could have tried out I can
try it out and the in the rebel directly
without running my ID that was very
handy for me because I could just
explore new things
explore new ideas so that was the syntax
for Java Java 8 and Java 9 we have this
nice little thing of optional hope you
know I'm making a lot of typos optional
stream and the result is exactly the
same so I have okay I have a new API a
new method an optional and I can try it
out in the end ripple that's that's very
that's very mmm handy for example there
are other things other small
improvements in the API which we can
look into and see how it's how it's
working when we are not sure for example
what exact arguments are we are we
supposed to use gentle comes up with a
very simple yet yet quite quite powerful
either syntax completion as you can
obscene or the small Java doc snippet
that just shows you what arguments are
being and what can you use if you double
top there's a there's a more more
verbose information about about what
parameter is what interfaces and so on
so and so forth so you don't run in
fully flange IDE you just have a small
little tool to to explore it now what
you can do is orkap you can I can always
list I can always list everything I've
typed in so far and my in my in my jfo I
can I can save it somewhere for example
to my um directory and I can later on
open it which is handy I will show it a
little bit later and later on but what I
can always also do is I can I can edit a
snippet so I have a snippet number 10
and I would like to eat it so I type in
I did and I type in tan and you cannot
see it but J still comes with a very
powerful editorial which looks like this
not very helpful so let's get away with
but what I can do is I can set up an
editor which is VI and then if I redo my
edit then it pops up a VI and I can I
can fiddle with it
and the way I would like to I would like
to do it then I can save it and evaluate
okay I made a mistake so I can save it
and if it's if it's correct then it gets
then it gets evaluated okay so can I do
and I think more sensible with yeah of
course I can so I can add some
additional I can add up I can add some
additional classes or others you know
libraries to my tomorrow I'll do a
little bit of cheating and here I'll do
the copy and pasting so I can do I can
add some more classes to my transpose
now by hand by but I'll show later later
on how we can use it directly from maven
which is again very very helpful so I've
added a bunch of classes what I actually
did is I imported the small web
framework called spark Java which is a
Skeletor Sinatra framework by some jetty
to just quickly write a few bunch of of
HTTP endpoints very very handy very
helpful for the for the presentation so
I can import this part which is a spark
API and I can do a service service
called HTTP which is service so I have
an HCP and I set a port to four rights
and do I do a CP initialize and it
starts a web server I can actually show
it to you if you switch to another yes
if I do Carl ICP local host 8080 I got
404 error there is nothing there yet
well but we'll build a small a small
endpoint
so let's get back to show so spark Java
works like this that we define handlers
handler is a wrapper between request and
response and we build a response that we
returns back to our to our well which
returns back it's based on an interface
called route which takes a request and
response and returns something it can be
an strength for example if I define the
route like this okay now I can edit it
because it will be more it will be more
let's say challenging to write it in
line so I can edit it and it can be it
might look like this so I would like to
have a response that will that will
return a map full bar and a content type
called application application JSON I
save it and I quit
so now if my list I see that my route
which is the snippet number six is
already added it and it's it's changed
so now I can add it to my HCP so I do
HP cat this HTTP GET fool and it should
take root as an argument and now I have
a food which I can show it to you
and it's working it actually returned a
string representation of the map that's
exactly what I expected
pretty much I would like to have okay
that's I would like to have something
better I can import for example our comb
Google Jason like this under Jason Jason
Jason okay and now I do another end
point without cold Jason and I'll do
this
Jason - Jason so a little bit of our API
fiddling I have another hand point which
is working so if I go to Jason now I
have Jason representation with the
proper content type and so on and so
forth nothing without moving well moving
away from Y from my show so I can
actually tag a Holly fully fledged
library and start fiddling with with
Jason now with with my new with my new
framework not getting from my java java
so the thing is that when we try those
new libraries very often how how I used
to start it I build myself a small
application a small Java snippet that
had this
java application and has this public
starting roy method where I explored how
I actually can can use the framework how
I can test the different method just
learn the API and here I just
implemented again with spark Java a very
small to do to do to do application that
allows me to add that to do and then
remove it to do so it's a it's a Java
Java app I can I can run it I can leave
it like this I will be able to to
compile it with Java C or what I can do
is I can try to run it directly from J
phone so I can do facial and Java Java
actually jschmuldt takes arguments I can
pass any file to Jessel and it will try
to evaluate is as a full as a Java file
just taking one line as just taking this
in the line as a snippet if I do it like
this it will just goes ballistic because
there is nothing called my class path
just to show you it will yeah it will
start being very upset that he doesn't
know anything about imports Park this
because I haven't provided racial and
the any touch path as I did in the show
so I can do J show and I can add classes
to my to my class that's one way to do
it or the other is tank pretty much
exactly the same snippets snippet but
add something on the top like like this
so I can within my snippet that I pass
over to Today Show I can either have
Java code which is like a normal cold
and everything that starts with a - what
with the Buddha / that's directive to
the shell to the J shell itself so I can
do like set up an editor all which is VI
and and then add a class path
to my to my script and then evaluate the
whole school as you can see I have a mix
of imports declarations and defining a
clash and then some again imports and
it's all mixed up from jeschill
perspective it doesn't really it doesn't
really count so if I leave I've closed
it and I will run genital snippets
application Jason it will pops up a new
joyful okay and if we get to the API to
do there's a new endpoint it's an empty
it's an empty list there are no no there
are no to do the point but there is I
have this small I have a small list and
here in my shell which is storage and I
can add for example I need to do to my
to my storage to my lists it will be
number 10 let's say and it's we to do
from shelf will be first and completed
like this so I added something to my
storage and then I go get to the
application called the endpoint and I
have something working it's like there
is shell on one hand running application
and I can fit a little bit which is
really nice I can I I have even a UI for
that okay which is like
localhost there's an API and as you can
see something has been something has
been edit if I room if I add another one
yet another to do so I have to to do i
refresh it just to show you that it's
not cached in the in the browser and if
I get back to shell and yes go for
storage I have to to do this in my in my
list so I have full interactivity
between my shell running application
which I can fiddle with and the actual
something that it's something that is
actually deployed and something that is
working so this is something that I've
been missing throughout quite a lot of
time from Java that if I'd run it I did
my test and I had very little way to
fiddle with the actually running
application you could have done it with
a whole bunch of hockey waves but now
there is a kind of a blast wave coming
from Java that allows me to explore this
this concept of of life of changing my
application life which is which is nice
and which is which is great which is
also very powerful and with great power
comes great responsibility so I can
imagine taking it up to my production
environment and fiddling with the shell
through my production application there
are people who are doing it with the
closure ripple Java ripple is not there
yet but I I see people to people trying
to trying to do that so ok so if I get
this application running a web
application that's that's the nice thing
I can clear the storage storage clear
which is actually released so now it's
empty and if I go for my hand point it
will show they actually I'm to leave so
it's all working I come I can I can
remove it I can close it but that's what
that's what shell and a little bit
cumbersome passing over the passing over
the
the classpath directly to my no
atmosphere so environment we can do it
better we can do it differently in fact
most of us or a vast majority of us is
using maven for the project so I would
like to have this ability that if I run
my maven project I would like to get
into the middle of the build or when we
get the build stuff done we can get with
the whole class part of the whole
generated classes with the compiled
classes directly to the shell and start
start exploring to give you a good
example there was a spring five session
in the morning not one so you say you
might think that the spring five think
is a nice nice one I would like to
explore it further I've heard for
example good think about spring five
that you don't need any annotations
anymore you can do everything
programmatically from the API just you
know create beans remove beans
whatsoever so I'd like to explore it
further but what I don't know is I don't
know the dependency for the Spring
Framework and everything around it so I
would like to just added my maven
project my dependency which will be more
or less more spring which should be
spring five context earn one of the
release candidates and take it from that
what I also have in here is a JSON JSON
plugin for maven so what I would like to
do is I'd like to have an ability to do
agile compile so to run something like
like this so I would like and we focus
on that part I would like to run the my
whole application or package my
application and jump with JSON into the
middle of what I've already created so
if I do that are the maven kicks in and
I'll do the old all the building and so
on and so forth and then as you can see
it starts Jessel with my complete with
all the dependencies of my
which are on my clasp oh that's that's
very this very handy but if my can do
that I can imagine and that's pretty
much my use case for for some of the
projects besides tasks I always had with
my project a bunch of small test classes
or public static void main classes that
allowed me to bootstrap part of my
application just to see and explore how
I can refactor or how can I change
things so why can't we do something like
this and here so in my project in my
spring 5 project and my source test
script and directory I have this little
snippet which is a very simple one I
created two classes at class is foo and
the class is Rafa and I import two to
spring Spring Framework packages as
create a generic application context
just to save me save me typing so I
would like to run it with arguments so
that's a bit of key well to make it
faster but I run the exact same target
which is just just to show you a short
compile this is my profile just to make
it easier for me and I have this
directive Jessel arcs where I tell the
the Java J so to evaluate this script
after it's after it's done so I do this
spring quiet and with arguments
arguments so I'm running again my my
even I can build that's evaluating the
project lost the cursor okay and it's
there so if I list what I've available
that's exactly the script that I have
prepared and - no it's no it's loaded so
if it's loaded I can do with exactly I
wanted to do so I would like to reduce
that to a few bins and see how they
interact with each other I can send the
edit all
the film I can edit the wrapper class
because I don't exactly like how it's
done so I will say I will add it hello
diverge from the wrapper class just to
show you that it's actually working and
it's not something that it's just no
plate over here so now it's now it's
edited so I would like to do context
register register just being and I would
like to register bean called for class
and what spring comes with is I don't
have to use annotations I don't have to
do class bar scanning I just can't
register bean after being in a way that
I'll provide a supplier coming from the
Java a so I do a new foo which is called
so I've registered a first bean and then
I'll do a wrapper class which has a
dependency which you might reach you
might see which has a dependency on the
bean food so I create another bean and
then I will run the context and spring
should figure out what all the
dependencies and just created the class
so I do the register on the wrapper
class okay and then I'll do something
else I do bean definition I'll do set
scope so for you for those of you who
are not familiar with Spring Framework
it's just to whenever I look up the
context for the wrapper class I'll get
another bean and I'll get another bean
and so on and so forth so that's
registered
I love the context refresh okay and then
if I do get in I called foo class I've
got my food my food has a text
which is born that's exactly how I
implemented it and I do I can do wrapper
class which had a constructor this
message and has hello Devils from the
class bar yeah okay that's it means the
spring word spring is working on this
it's all good so I can change the the
few plus I do divorce 2017
I really just stir the bean and then I
do it again the wrapper so I have a new
class you so oh it's working so it's
spring five two beans talking to each
other without the notation without even
leaving this I can explore the newest
ideas as we are running up to the end
well getting closer to the end of the
session the many other ways which we can
use is we can do which we can explore
the show there are some ideas to connect
Jay Chou with the working environment
there are some tooling already that for
example allows me to talk from my from
my from my shell to my application
server through the JMX that's okay java
management extensions so that's our many
more ideas if you would like to go
further with the concept of gesso and
see on your own all these slides and the
snippets and the code bits and pieces
that I've been showing you and also
slightly more it's available on the
github you can thank me or you can catch
up with me and were and here I'll be
here for the next few days and that's
from the trash off I hope you will use
it in the future and hope you enjoy it
and enjoy the restaurants conference
thank you very much and don't forget to
do this</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>