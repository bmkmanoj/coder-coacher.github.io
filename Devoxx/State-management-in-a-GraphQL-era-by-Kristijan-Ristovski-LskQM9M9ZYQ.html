<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>State management in a GraphQL era by Kristijan Ristovski | Coder Coacher - Coaching Coders</title><meta content="State management in a GraphQL era by Kristijan Ristovski - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Devoxx/">Devoxx</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>State management in a GraphQL era by Kristijan Ristovski</b></h2><h5 class="post__date">2018-04-27</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/LskQM9M9ZYQ" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">we got some jokes I want to talk about
something before I talk about my talk
it's about turn that I hate and we see a
lot of like the ads and job job postings
and if you're speaking at a conference
you will see this term that someone is a
rock star so I have probably disturbance
playfully so this is a rock star
and this is everything but a boxer so in
this case this is us we're giving talks
to the coding so when someone says he
rock the stage after you stop it's more
like he readies knows who made her
playing slice to 30 minutes pretending
that we don't something so it's the term
rock star is not applicable and that's
where the world schools in front of 1.5
million people we are not rock star so
why am I telling you this because I
wanna encourage everyone to give a talk
at a conference I've given this same
talk in like 10 minutes ISM in front of
thousands of people but I think that
everyone can do in a to do it twice
peaking at meet ups try speaking at
conferences it's not special because at
the end of the day which is code monkeys
family we're in library school together
right she acts so that being said kids I
try to pronounce this sorry hello
fountain our open source and making
products maybe you've heard a lot of my
stuff I have customer experience
the ballpark's this might be interesting
if you're a front-end developer I made
it to where you can eat call it small
CCC's otaku and you can preview a bunch
of devices at once so you can test
responsive design and instead of tes
together one device if you just look how
does it look like lately for last year
I'm focusing on giving reactive
JavaScript workshops for companies and
conferences so if your company or a
conference is interested in one of these
technologies you can just drop me a line
and yeah today we're going to talk about
state management in a graphical error
and one ask you who is working with
react alright who is working with
director and who's working with meetings
alright interesting mix so if you don't
know what is graph close don't think
that's eventually going to replace rest
but you keep telling yourself that
you're going to learn it one day but to
tell you what we'll graph here is is we
need to see an example or a REST API so
this is a REST API if I want to fetch
the activity from the current user the
friends from the current user and a
bunch of other things I need to do
multiple calls to the backend or I need
to make one method call and call it on
the back and like grab me activity and
friends and bullets and likes and then
just fetch that one call it in gradual
how do you fetch all of this data is
just you can find everything that you
need and you combine it into a period so
this is a graphical query and we're
saying given a current user with all his
activity office posts his friends all
the activity from his friends the light
posts and so Hans we can just ask the
backup to give us budget data and then
go back and tell resolvers it means time
how do we resolve all this data in my
opinion single page apps ruined
everything
so we were aiming for a faster car but
somehow we ended up
it's not a car it's a terrible car
so why degree why do I think that single
page apps ruined everything because we
put everything on the client and the
complicated state management so when we
talk about speed management what are we
talking about we have forged routing
input standstill Thursday Victor Spanish
checkboxes medication yeah all of the
small stuff but the biggest problem with
Steve management team no matter my
freedom its react its angular if it's
view whatever the biggest problem is
stable so everything else can be easily
solved with different libraries
different methodologies and so on the
data is the biggest problem so when I
say data what I mean
and why is David a number one reason
that state management ask are we have
data fetching we have data caching we
have reading and then the most
complicated thing is invalidating on the
cache
so these are the four problems that
we're dealing with a new blame again on
statement
so just to throw you back a little bit
this is me writing my single page a
particular into spaghetti code it was it
was a one main J's file in 3,000 lines
there was no back back but all gulp
nothing like that and I had a bunch of
code then I have a comment like calendar
starts here and then you have a calendar
plumbing and then you continue on so
everything it was it was one file and I
was looking for solution and I simply by
my state management because right now I
have everything in this one freaking
file and
for solution that's where angle or one
came on and we decided to want to
triangular or angular tour just angle or
whatever they call it now I lost track
on other versions and I liked anger
because it's it separated things for me
so I knew okay so this is how we can do
state management and it's way better
than doing jQuery and editors want
started finding my head until I explain
it to my roommate so he said all right
we've been talking about this angle they
can we sit down and explain it to be
like look it's really simple so you only
have controllers and factories and
services you just put service in your
factory in your controller and
everything goes in the template so when
I explain them the concept of all these
buzzwords that angular one has it became
completely to my head like why do we
have all these things just to single my
statement and that I was deciding should
be used shall move on regular to learn
time script or should I try something
else and that's been reacting along
about well how good it is and running
between react sorry is the best solve
all of my problems but when I started
working with react I was trying to be
too smart so when I first catch my data
I have this three API calls like the
posts and when I click from the post I
went to post number one or a special
user info but I hated the moving
spinners that I was getting all the time
actually you click something there's a
loading spinner you go to the same page
again there's that voting spinner
against was like how can I catch this so
when I go to that page the data doesn't
refresh but actually just read it from
the cache so I made my own caching
mechanism is which is giant object where
the keys were the names of the API calls
and the values were the values for the
you care cost and it was fine I got rid
of the loading spinner but then the
problem was how do i navigate this cache
how do i normalize data how do i connect
this piece of data with that piece of
data so it turned out i cannot do it
wrong i needed something else they can
just grab a bunch of data simplify
and at that point the most popular
solution for doing this was - what's
Redux so everyone was talking about
Venus blah blah blah like people are
connecting reacting readers together
like it's one thing you got other in it
so it's like okay I'm going to take a
month off and just I'm gonna work on
learning Felix and in my opinion if you
ask me a lot of readers and I hate
readers at the same time I love it
because it's a genius concept even if
you're not working with react whichever
framework you're using just go to
equatorial and look at the tutorial of
how Redux is created from scratch
because it's a pretty simple library you
can watch this video series where the
creator of freedoms just creates it from
scratch over empty file and it's really
really powerful an interesting concept
but I hate it because it's redundant to
the time it's complicated and it's
adding a lot of boilerplate so it's not
the perfect solution if you don't trust
me on this one you can trust D the
author of the library
he's reading no hard feelings it's
definitely over five full level and
often used unnecessarily and he wrote an
article you might not so he created with
us and he wrote an article you might not
eat with us that's like a band released
album and telling you don't listen to me
Colorado maybe you won't like it so I
respect him because he can he can be
critical about his own library because
what it says here
people choose Redux before they need it
and that's really true there was a post
on Reddit you can find it on the react
Jas
there was a glass key but I just started
to read what should I do choose to do
network requests and of course I lose
this so the first time we were just used
to read at struggling this is if you're
not familiar with reactor the reactor
this is such a noble work you like if
you if your friend calls you then
there's a spider in their house and
you're like I'm gonna be right over with
my pasta so it's that much look on over
okay
you see we got saga recommending it to a
beginner I hate that about our community
like it's like everyone is recommending
the most complex stuff to do the most
simple things so right now there's a
poor soul trying to connect to libraries
we have saga and we'd explore just make
a login form I can make a login for
maybe five lines of jQuery but if you
google Redux form and real soccer
there's tons of questions on Stack
Overflow how do we connect this to just
don't usually have the cities don't use
this if you're using a simple login form
so we're waiting
usually I explained all this to all of
the new technologies to my roommates we
were sitting in a restaurant it was like
look I have this idea for a simple app
we have a lot of employees in my company
and someone is doing the coffee every
day it was like I want to create an app
we're going to press the button it's
gonna randomize all the dates and just
say that this person is going to make
the coffee for the entire company this
day and it was like we need index.html
file and jQuery will be done in
we need readers we're gonna sit down in
this restaurant I'm going to teach you
react under the theory like why is like
similar snapper Arabic I wanted to
introduce you to this concept of readers
of bla bla bla
when we entered the restaurant it was
day when we went out it was night so
until they taught him how to push
something into array in in Redux it took
us a couple of hours so at that point I
was like holy this is too
complicated like state management
shouldn't be like this it's a lot of
bloggers play to do something really
simple and until them I'm gonna look
into this our solution that I reading a
lot about markets and I'm gonna explain
you why back tomorrow when I'm at home I
open the documentation through Bombyx it
was so easy with observables and
observers and everything like it's way
simple concept and then Redux it's not
the perfect solution but it was way
simpler so I kept time even to implement
a face recognition API I grabbed like
make a randomizer so he takes a picture
of a bunch of people and then it
randomizes their faces so instead of
spending my time on writing Redux
probably I need something even better
and I was I mean I still use my box
but the problems with every state
management library arise when you start
messing with Dane so I can use markets
with face recognition and randomizing
things yet really simple but when you
through digging into it we got the same
problems as as we discussed so we have
this problem it's not something new
we have jQuery versus angular assembler
graph key reversal as Redux mr. Slovaks
backed wishes to you Apollo vs. really
and so on and so forth we have this
conflicts it's always and the mistake
that we're doing right here
asking what's better instead of what's
real from an app works with my team what
is suitable for our new cities so these
are the questions that you should be
asking when you're evaluating should be
used this or the other library for for
my thing I think people usually are
asking this what's better I just started
what's that it really depends on your
situation and the contents because you
asked me to drop this bill golf course
is a president is terrible like it's all
about the contents if I tell him he's
good or bad I'm not telling you in which
context I'm talking about this so yeah
you know people should evaluate things a
bit more in our community lately if
you're made to react you will see this
pavement
how did once up and then you have
something on the other side whether
props are the best and as community we
cannot find something in the middle
which is like how about healthy
vegetable so if you think you should use
a higher component use that if you think
you should use rather drug use that but
don't be one of your we have the same
thing with redux previously it was like
we need readers for everything and
nowadays you can read articles relax is
dead so the library has like forty
thousand stars and people are writing
articles comedians is dead
we're gonna replace it with a new
context adi and the irony is redux is
openly using a context api and people
are like or reactants a new context if
you're gonna replace readers and it's
not as simple as that so I think we
should find something in the middle and
just use redux redismo clickable and
don't use it but it's not now I'll show
you some examples about how if you
picking a stack that includes we have
readers and so on the crafter how you
can
so I'm going to give you an example of
fetching data multiple weights so we
have the fetch API and we're saying
fetch or what reduce and do something
with them then we're going to do the
same thing with redux so in order to
fetch much to lose with readers we need
to dispatch effectually using it then
after we fashioned to do super API we
need to dispatch that it was success
then we need to dispatch that if it
failed within the spatula we feel so
this is one slide and another slide we
need to intercept these actions to do
something based on these actions so if
it was successful we could return you
state it is the when it's needed we've
said loading you true if it's successful
with the new state fails returning
different state
it's like the entire slide to handle
pushing something in Paree instead
saying the loading to true or false
with Morris is a bit simpler we got only
one slide we have a class we have a
bunch of observable decorators who is
saying that - deucer observable loading
is observable errors observable and then
we have an action in fashion introduce
and do something here really simple can
we make it even simpler yes this is
where graphical comes into play like
this is too much boat to fetch one piece
of data and how can we do it with
graphical in one slide we can feed the
graph field theory and the react
component is gonna render the data so I
have this reactor boy which is just a
class with a render method and a bonnet
I'm just going to decorate it with
graphically I'm just gonna pass the data
than we need here that's amazing because
now I have everything coupled in one
file and I my component knows what it
needs to someone what somebody's reading
this would morning he's gonna be like oh
this is pretty simple because this
component this is data we're gonna fetch
it from the server next time we're going
to visit this page it's not gonna fetch
it to the server
so you don't have to worry anymore about
the cash about do I need to evaluate the
cash and so on because this is what I do
the magic for you and here we just read
the data if it's loading or not we read
them to do some be displayed in Toulouse
the problem here with state manager is
if we were fixing the sink
instead of fixing the well and the sink
was state management like everyone is
family with receive management the
problem right here that needs to be
solved is resting yes
the crest is the new soul you know back
to the Iranian college and they were
telling me about super dragster the
reverse linear slope is that well
nothing that rest is there should be any
replacement vector because it
automatically solves state management
for you so now if you look at this
previous slide about state management we
have all these things - the most
complicated thing and now this is really
easy to tackle if we're using angular
infuse using reacting doesn't matter
when you put your data then you put it
in a library that's going to take care
of your like a library now we will have
an assumed stage so you can put in a
router or you don't include any library
at all you build all these things for
yourself you relieve the global state
management to solve all these things
this is an example of a pull request
when they moved away to read us to grab
them to Apollo do you move around 5,000
lines of code so everything that was
tied to data fetching
then catch me validating and so on
because around 5,000 line so there are
5,000 life they added around thousand
which still they need to add code fetch
me data but still it's a major main
because now the entire have different
code bases way simpler so if you ask
between the nearest ignite the library
when using graphical master it's always
gonna be this character I don't know it
really depends on your context so in
order to help you if you need to use
where you don't
give you examples or a few few sample
stacks that you can use and then you
will see if you need so the first one is
video you can use Apollo which is the
most popular graphical client library
right now there are - regular for react
review for everything and you can use a
router library if you want you can write
your own router if you want and then in
reactor you can just use testing so you
don't need readers from others or
anything else the second one is any heat
forms so if you have really complicated
forms where you have nesting and all
these crazy things we're not you can
include a form library like for me or
something else but you don't need to
include feeders or mud baths or
something maybe more complicated just so
you can handle forms third one is my
users live in tunnels so terms they use
is where you would like to optimize your
app or offline usage and if you're using
a koala you can just plug in this thing
called a polo cache persist and it's
automatically going to catch everybody
including into the local storage next
time the user opens the app it's just
gonna read it from the local storage
until the network is on and then when
the network is on is just really
fascinating so this is a pretty simple
like you to NPM install polish resistive
plugging in and you're getting an
offline app out of the box so that's
really awesome
the only problem here is with mutations
when you click on a light we want to do
an action or sense immune to the server
so this is they haven't solved this yet
and I think that they're gonna solve a
work out of the box so just imagine a
situation where the user must be quite
cool but the network is not there so
that entire action of clicking the like
it's gonna be sealed into local storage
and then we're going to have a listener
when the network is back just grab every
action that is pending
just send them one by one to them but
the thing is might now that's possible
there is a library 12 minutes of life
use redux and you can schedule
this action but I really wanted to work
out of the box because this is a
developer all I wanted to is here's a
picture the user clicks like with a
picture you handle everything like
handle the optimistic response if
there's a network send it to the network
if there's small network put it in a
local storage I don't need to write all
this cool manual because this is what it
looks like now record is pretty but when
you wrap everything in two minutes of
wine you have people the better and
offline in fact it's one and add this
for every mutation that you have your
group you're going to complicate
everything to really company the level
so I think they're going to solve this
but for now is good with pinpoint if you
have offline apps you want to do
mutations right now it's a bit tricky
because you need to store them you need
to grab them in exception and it's a lot
of manual work the next morning I like
this tweet from the creator of Marburg
she said because people are little
bobberts it's beautiful I don't like it
and he said Marcus doesn't trying to
prove any academic point it just wants
you to go forward and it's really like
that when you start this you always hear
like holy this is so easy now
but if you're paid by the hour if you
stick with us because right and the next
one is next level
who is Harold next jazz here alright
so that's just a server-side render
frame you for reactor it reminds me a
bit of WordPress and PHP because you
literally open a file open a folder
called pages and inside these pages you
have files like hope that you asked
about the GS postage as usual of GS
which are your pages you're still
running the app but everything's gonna
be server render render to the client
and then the client is gonna pick it up
and you can steal the client side things
of it on the client side so it's really
amazing because it combines two worlds
of server-side rendering and client-side
apps and what I like is to try to
experiment it with this next well 2.0 I
call a stack use full page reloads when
navigating between routes and every
route should be a mini
and people usually wrap the coolship I
must write a single page right I told
you that a hit single page app have you
been lately to Amazon Aryan be all these
popular websites is one of them a single
picture though it's not quite as their
spot and we think we're smart because we
like no I have a single page but they
usually click 7 but yeah and you have is
one of the thing and it's huge because
it's a single page app but the big
companies are doing is usually they have
this they have mini apps so when you go
to the homepage you'll be served one
entire app then when you go to products
then full page refresh you can serve an
entire before that and that maybe you'll
split everything but how that everything
is its own app then you're making state
management even simpler but what we want
is we want a single page app so I think
that's what we're doing wrong can use
only Apollo for everything for data
actually for client-side scheme and so
on
yeah when they released the wall to
point out there were three ducks so Paul
was using videos underhood non-stop and
it's faster it's smaller and it's more
flexible so this is what you have the
port and this is what you
so the magnet is human you're
initializing the new Apollo plan you can
add your custom cash so you can write
your own caching mechanism if you don't
like if it's not fast enough you can
write your own cash mechanism which is
faster than that and people have already
done this like literally when they
released Apollo link someone wrote
Apollo cash service which is a faster
cash than the Apollo cash so they
increase the flexibility and one thing
they had is a follow links T so now you
can have client-side state management
with Apollo so remember the other query
that we have for our to use component
now we can also manage like client side
things like which tab is selected what
router we are and when this component
this if you get anything from the server
or from the client it can just describe
it in one huge graph to help clear so
this component you say okay from the
server I made this but from the client I
need the counter just imagine what a
stupid contour one two three four five
and now everything is in one period so
we don't have to do grab me the store
inject something from the store blah
blah just describe all the mini theatres
I think it's really powerful because
every one moment is tightly coupled with
the data it needs no matter if it's from
the server or from the client it's all
the data that it needs like you can use
only react for everything we're gonna
tell you a live demo about state
management like global state management
can everyone read this or is it too
small yeah you can
you can't ok it's ok cool so let's see
right
Oh
so I have this report
to 415 writers service one point and
it's just rendering one each one deck
with children box and what I wanna do is
I wanna add global speed management in
my reverence for all were to do
authentication if I have a user if they
don't have a user and so on so there is
a new context API in react which is
really powerful previously a keyword
like if you went to the context dogs you
can see don't use this it's not stable
moving on advise you to use this in your
own code so now there the refactor is
API a little bit and they are advising
you to use contexts so we're gonna
explain how does the new context work in
there so I'm gonna create a context and
I'm going to call it any context so
think context because react create
context and I will provide a default
value so that before failure would be an
empty object you now I do people now all
my components they just consume from
this context because what this does
recon this beauty to new components so
why is Tim context our provider and -
who's human what provider can do is you
can set a new value so let's say that my
default context right here is background
color black and color white so this
would be the object that other
components are gonna consume and if I
want I can have a theme context top
provider which is going to overwrite
this values and it's just gonna say
having more yellow and color pink so
that's what the provider windows we can
also have a consumer group or team
context of consumer which will allow us
to read these values so let's say I'm
going to create a header so I'm gonna
say gather this component I'm gonna make
it a tip but instead of just okay I'm
gonna say
he'll answer style I'm not gonna have
background color I'm see the fights 100
the witness this imbalance 25 and now
I'm going to use my header component
above this h1 tab and this is the header
but right now this header doesn't have
any stars right so I want to consume
this theme this is just imagine this is
a really complex that my header is
Matthew it is nested somewhere that's
nested like this never ready school
trees and now this header wants to have
access to my to the green team we can
even move it to a separate file because
right now you think oh but it's already
in the file why don't you just read it
from there so I'm just going to carry
doc yes and when exported who's I have
this header it's completely different
file and now it needs to know about the
current background color and the current
color of Iraq what why is the theme of
the app so I can export this context
water files chameleon and instead of my
header component I can see import in
context from map and now I can just wrap
everything in the consumers I can see it
in context of consumer
and what I need to do is this needs to
be a function so here number 16 and this
is what I'm going to have my background
color my color and everything else okay
so now this can see my background color
is in the background color and my color
is steamed up color feathers on the fine
we need to go in a wrap and just say
import header from better just put it
about this and our header is black if I
change this video let's make it
beautiful material design there it is
now I have I can consume this context
without being in the same file or what
you usually need to do in react if you
need to pass a team like let's say this
is something I'm gonna call this a theme
and I don't have context if I want to
pass the theme to your head right here
and these are components not tears I
would have to do something like this I
don't need to pass back into every
component every until it gets to your
head
so just imagine if these were components
they're not there so I do need to pass
them down
it's called prompt drilling and
previously there wasn't a simpler way
for this is a component to communicate
to this header component so you either
need to use Redux warwick's or something
like global state management put
something in the global store and then
components read from the Google store
and now this context is changed so now I
can wrap my car up here a little bit
alright now we like this to be here to
read the Green Team because we don't
have a provider anywhere right so this
is the default palette so you're gonna
if you don't have a provider that
if I remove this the color will be white
again so we would need to add provider
so let's grab our entire wrap it in
context our provider right here and here
we make it passing the value so I can
see background color is red then color
is yellow and now it's gonna be together
so this team context provider can
provide context to all the children
components okay no matter where they are
if they're in a different file in turn
that's the economic component if this
header component and another child
component it can still call the consumer
and just grab something from the
consumer is this big so can we write a
global solution like a global sports
solution that's going to store all of
our data and instead of including
meetups or bombers or something else
we're gonna have like a component called
global sport this component will only
take care about storing all of our
global state in Iraq so if the user is
authenticated or what's the current team
or what are the produced and so on so
let me first do something else I'm going
to create teams here so I'm going to say
dark in would be background color black
and color white and I'm going to create
a light theme which is going to be a
background called white and color black
right here and I'm gonna add a function
called Pagal team which is going to set
the state and it's gonna say give me the
state so the new over their statements
so the state we will keep team name and
it's gonna be talked so its first we're
gonna have a state of this popcorn and
then the team name is gonna be dark I'm
going to remove the total team so now
instead of giving this value I can just
say team and team is gonna be equal
there's no teams this not state the
evening and the current team name is doc
so this should be our current values for
the fragran team so they go here I'll
get a black hat what I wanna do is am I
our user from anywhere can click and
change the team to sub to the opposite
thing so I can create a function called
double team and right here I'm going to
do this obsessed state and I'm going to
grab the corn State I'm going to say
team name equals state that team name
equals dark if it's dark make it light
if it's like make a dark and this is
this is gonna be a total team function
and if I want I can just have a bottle
here and I can say I think is what if we
have another political sidebar or footer
or something like that that that
component must do wants to call double
team right because total team right now
is a function so what if somewhere else
I have this footer that that wants to
change the team so let's create I'm just
gonna be lazy and copy right here and
this footer will do nothing special if
you choose gonna be 5 toggle team right
here so unclick it would need to call
total team how can agree double team
it needs to read it from the context
right our context is just providing us a
team so it's not providing us any
functions that we can work with so what
we can do in our app component right
here we're providing a value instead of
a value we could just provide instead of
a deep we can provide an entire object
so we I can say team will steam or we
can remove this six and I can say total
team because this total team or even
have multiple actions I can just say
actions
I can pass whatever I'm off here and
then that'd be consumer can read from
this object so now the basket actions
normal thing
so right now on the footer I will have
the entire object here like this will be
entire object but instead of really like
this I'm just gonna deconstruct from it
and I'm gonna say I don't need the team
but I need the actions and action is not
totally now I need to import the footer
right here all right
so let's see the problem here other than
actions and footer have the consumer and
wearing the actions and on actions and
reactions
okay okay so function is gonna call but
maybe my state that team name is dark my
speaking right oh yeah
now my header because we're providing an
entire object so now my camera doesn't
know about this so we need to
deconstruct skill and grab the team
because previously I was reading the
entire object here and our object
doesn't have background color it has
entire object top team that background
color so instead of doing that I can
just deconstruct here gravity and
parachute so many turbulent so now we
have these two components I'm not
passing them anything explicitly so I'm
not passing toggle team here and I'm not
passing in here but I'm just providing
it to them through this value pickup
time so I'm gonna write a global tour
right now and you can use it as a
replacement for we got small X whatever
it is really simple so I'm gonna create
a folder right here called a global
sport global school and I'm gonna create
an index just about global sport it's
going to be a react component we're
going to seek global score for right now
he's just gonna run your dip and it's
gonna grab the children so whatever we
put inside of it
rather any trip would react from we have
an export of default I'm going to delete
the image so everything will go away we
gonna have this context h1 now what do
we need to do we need to import the
global score from Doc global store and I
can just wrap my entire app into my
newly created global sport everything
should work the same component is not
defined so right so what will this
Google store do so it's not confusing
for now it's just rendering a dip and
it's putting or whatever it has these
children currently the children
okay so now everything works because of
our global stories pretty stupid right
so what do we need in our global store
is I would like to score something in it
so I wanna have some state like to deuce
and maybe team name again and maybe I
want to keep the users so right now I've
got a user so I can say user install
team name is doc and I want all these
mark important to read from this thing
so what we can do is we can kind of
recreate our own version of of readers
so I'm going to pull here and create
something called user and just export it
to constitute user equals this is gonna
grab state and an action so it's gonna
our switch and based on the action type
is going to say if case is apt to do you
should return to deuce the current
reduce right here plus AB action up to
do and it's going to have another case
of what should we have here after new
and poverty
so it should return team name equals
State team name because dark just give
me light always so this is a completely
separate file look at my desk for this
is not like for component it's looking
like like this is a real reducer
community plug isn't with us
so now exporting quiet my reducer but I
should also export my initial stick so
I'm going to say export cost initial
state and from this component I'm going
to grab everything right here and put it
into a newspaper right here so this is
describing this is describing the global
state for my entire app so here I can
sort everything and here I can handle
all the actions that are going to happen
in my app but somehow I'm going to
profile in this state and we need to
provide a way for our header and footer
to read through the state and to call
this actions right so what I'm going to
do with this component is I'm going port
brick producer and initial state from
producer and I'm going to say that stage
1 equals initial state and I'm going to
create a method called dispatch
so what dispatch is gonna do it's gonna
say this necessity grab module state but
instead of deciding what what I wanted
to hear which is called the reducer that
we written in the sauropod and pass it
the state and his action
so we need all our components need to
know about two things state and dispatch
so if they have access to state and
spatch then they can use it to read the
state or to dispatch to do something
else so first I'm gonna go in my head of
the pool and then do this the same thing
that happy really so I should I should
first create some context so here I'm
gonna bring context and I'm going to say
import react react and export cause
global spore context people's we have to
create context at first it's gonna be an
empty object now I might have a
component I will import this context
from global sport context and now I can
consume the stick in there so I grab
this and this is gonna be my entire
store right here right so now I can read
from it
I can dispatch something to it and so on
so instead of using it like this
I'm gonna grab state and dispatch and
this will be my global stick so I can
read from and this will be my dispatcher
the head of the woman doesn't need that
this battery just needs to read about
the team so here we're gonna say
background-color equals 15 I'm sorry
state up team people start then use
black always use white and the same
thing for the color but the other way
around if it's darkness his wife
otherwise use black so this the kind of
component only needs to read from the
state and our further component if you
remember it needs to do the same thing
so it needs to grab the context from the
host world it needs to wrap this
and now we can also read from the entire
walls for here but if you leave the
dispatcher and right here is going to
see on click dispatch type quality
that's it actually
yeah so what's gonna happen here The
Dispatch function is going to inspect
this object in a global store right here
our dispatch function is going to grab
this action is going to set the state
and it's gonna pull to a reducer and our
reducers will do like okay which
actually came here or it was the total
team action so for a double team action
this is what I need to do so not know
any place in our app we can just
dispatch this kind of actions and in our
reducer we can decide what we're gonna
do with the state for that action so the
last thing that we need to do is we
don't have a provider here so right now
I have to do import Volos for context
from dot context and I need to change
this provider and as a value I'm gonna
say state it was distinct and spatch
because this Delta dispatcher and now
every component in my appear he has
access to my state right here which is
to dues in name and user and it also has
access to dispatch so if I create
completely new component call that
sidebar or something see sidebar
and I want to decided from this one
morning that when I add in you to do so
I can say button onclick equals new
function dispatch and what do I need to
type out to do and we need to add it to
do here like ID is 1 and title is ok
and how this work we need to grab the we
need to grab the context of training
every one of our components when we need
local state which is grab the context we
see import contacts from global sport
context and we just grab our component
with this we say Google store context of
consumer close it here and then we have
game tires or right here so I could say
entire store duck duck dispatch or I can
reach values from the store so just
imagine if you using craft wheel for all
of the data and you have this simple
file that's going to take care of
everything in our apps so if we have a
user if you don't have a user what is
the team name is like I don't know
sidebar collapse true or false so this
is gonna be this single source of truth
for our entire app and all the all the
other components are just gonna consume
it through the context so we kind of
created our mini version of readers
right here with this but if you did this
previously like before react 16s will
not be performative would not be good
anomaly the new context API you can
really do this you can use this and it's
gonna be okay if you're handling small
things like if you're handling all this
data and you do it in this component
open you better off using readers but if
you're using the poll if you just quite
up with this it'll be fine ten is one
slice
so if you grab fairly nice some of the
cases you're not gonna read Xbox and so
on if you use it you're like more into
giving yeah
now I'm gonna like after the entire day
of listening to people telling you about
new technologies well blockchain and
graph QL and yak readers who probably
feel overwhelmed right you're like
now I'm going to go home and everything
is obsolete and my goood sucks and I
hate to rewrite everything in angular 7
because that what I do so that's why I
have this portion of the talk like Who
am I to tell me what to do or who is a
speaker to tell you what to do like you
should gather a little bit of context
about the speaker before you judge if
you should listen to him or not
so here's the context about me I work
alone I don't work for clients another
what I'm doing I'm experimenting with a
new library every week like this is a
foster taking on go and I'm gonna need a
Christmas tree on this like so would you
believe what that does this is a talk
you should always evaluate the context
and the situation before before before
you follow anyone's of us if someone
tells you stuff you should evaluate or
see future can we move to grab your own
a client project project story so we
gotta find he wanted an MVP we decided
to do it graph QL look graph kill can
also get through the complex if you need
to invalidate the caches like Jesus
Christ we need to do fast we validate
the cache so I decided how about after
every mutation someone clicks are like
discrete factual today what that's a lot
of data but it's not it's like 300 bytes
or we have a kilobyte or something so
instead of over interviewing our entire
app and following best practices about
how you should validate
you catch and so on when the user added
something we just researched all the
data for that page so if that page had
like five queries even fresh factories
all in our it could we want to tell
device for all the queries but it saved
us so much time because I didn't need to
order engineer my algorithm all get
along so don't be scared of the network
sometimes it's better to refetch things
instead of your entire team spending
weeks on over interviewing the perfect
solution and that your clients like
another we need to change everything you
are moving another direction so when you
have a fast-changing project just go for
the minimum minimal solutions of
over-engineering everything because i
used to an engineer also everything and
then I decided I wanna make where search
snapping and focus on that instead of
making my code perfect and making
everything like make myself happy
because at the end of the day what it
matters is like you really like oh we
spent the entire day we learned to rxjs
or whatever and our login form is not
amazing because spend eight hours of
using rxjs to create an order form and
abuser is going to be public employee so
after you just evaluate what's gonna be
done for the use of that what can be
done for us the QR you're calling you
can be coffee to develop your also to
learn dracula to debug what are you
delivering to the end-user that's the
most important question so raise your
hand if this is you like insecurity is a
huge problem in developers and made
something in force and I think it's also
but I'm not sure if it's right right
you're never sure if this is rhykker is
wrong but nobody knows what is fine you
seen webassembly people are doing
freaking c++ for the web and the one is
asking is that right or wrong so just do
whatever you doing it just feel
confident so I think I know browser
examples have a friend
awesome react carbonite costs so the
user instead of see the black page is
going to see the next round also there's
a man I did this it works for us it
works for our use case but I'm not sure
if it's right or wrong and when many
works who are you waiting to tell you
this right around right if it works for
ya just keep doing it and it's fine
until you get some performance problem
or something like that
you don't need to seek evaluation all
the time this designer example do not
decide wrong on this the guys wanna hit
on PHP we have a framework and Jacob so
here we'll have no using readers he's
running in a PHP cheaper
he has a couple of websites all of them
together he has open revenue make fifty
thousand dollars per month and he's not
a good developer you wouldn't want to
write you would have not work with him
his food must be a mess because it's
just one time.hp file and when he
started to back develop and his brother
was like this guy was like I'm gonna do
something awesome I'm gonna deliver
something to the users because I wanna
know what's a lot of traffic so I'm
going to deliver something awesome and
I'm gonna learn probably make monkey
patch my code until I deliver a cloud
his brother started at the same time and
his brother was like I'm gonna learn
meteor Jess and you know what happened
after a couple of months
this guy have like 20k in the bank and
he's brought a new media so his brother
is now expert in everything in video but
he never delivered something valuable to
users so he founded also without pockets
I think this is the last example and I
have I'm having a coffee with his friend
and he's explaining me what we did with
graph clubs is that man you should see a
stack or graphical staff we have a
casually there a mechanism so the all
the responses are couple of milliseconds
he went crazy fans we optimize for weeks
and I'm like really we are you like
why did you do all this crazy things doc
because you gotta say no no we're just
doing a website for a hospital but
there's no situation where the nurse is
going to be doctor he's dying because
our landing page is not fast enough then
why did you spend so much time doing
something not important to the end user
right so you shouldn't feel bad if
you're not using the latest and greatest
in this case you would hear about
blockchain or whatever some Democrat
clear you shouldn't feel bad
who here has never used the
serviceworker
right like it calls by default I know
what it does but I never cared to learn
about it and do something with it I have
a friend who was building a website for
a conference and she built the website
and the first thing she did she and the
spirits were totally uneven then she
couldn't remove the serviceworker from
people's machine so she'd have to buy
another domain just so they'd consider a
new website know that you can be domain
and resurrect to it so it doesn't mean
you're using something hipster and and
pleading actually it's gonna be good for
your users so yeah summary of everything
stop seeking external stop seeking as we
always in all other people's products
stop feeling insecure about your cool
because nobody actually knows what
they're doing and diligently account
if you like what you're doing in the
books preview for your team for your
company you should just forget about the
stock everything I told you just forget
about it now if you like what you've
heard you can and kids everywhere or
every social network except on Twitter
some asshole like Twitter once and took
my account and deep itself in and you
can find more between their questions
I'll be around so I think you should
take down</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>