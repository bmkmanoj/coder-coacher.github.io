<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Docker for developers and ops: what's new and what's next by Patrick Chanezon | Coder Coacher - Coaching Coders</title><meta content="Docker for developers and ops: what's new and what's next by Patrick Chanezon - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Devoxx/">Devoxx</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Docker for developers and ops: what's new and what's next by Patrick Chanezon</b></h2><h5 class="post__date">2016-11-11</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/3OohD03k-y0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">alright so let's get started hi
everybody thanks for coming so today
we're going to talk about docker for
developers and ops and i'm going to give
you an update on the what's new and
what's next so a little bit about myself
so I'm Patrick Shanna so I'm French but
I've been living in the US for more than
10 years I spent 10 years in my career
building platforms at Netscape AOL and
sun and then 10 years evangelizing them
at Google VMware microsoft and i joined
docker a year and a half ago while I was
at Google I created the developer
relations team for cloud when it started
with Google App Engine then I moved to
vmware to do cloud foundry in spring and
that Microsoft I was focused on driving
linux and Java workloads to Azure so as
I told you I've been in the US for 10
years and so I'm American American
citizen now and I've been pretty
depressed that yesterday and what
happened it seems like we're living in a
Simpsons cartoon dystopia from 2000 or
bad back to the future wrong timeline
story but I hope as a nation will heal
the the motto of the u.s. is a pluribus
unum which means together we make one so
I hope the next four years are going to
be better than this election let's let's
us yes so why did I join docker in 1995
I started using a browser and at that
time I was building client server
applications so i tried netscape and
there I really realized there's a new
way of building applications with HTML
pages rendered on the server side and
instead of building client server and
when I discovered docker in 2015 while i
was at microsoft i just realized this is
the kind of tool it's as revolutionary
as the browser
and it really helps me build my
applications in a different way and dr.
is the kind of tool that grows on you
the more you use it the more you start
thinking about different ways of doing
the things you were doing before so
that's what drove me to darker on the
other hand one thing I wanted to say for
for those of you who are old enough to
have been through several technology
cycles I've been I think I've been
working for 20 years in software now so
I've seen at least two or three of these
cycles I definitely think technology is
moving in cycle and I feel like that
hamster in that spinning wheel like
every 7 to 10 years we have a complete
change of architecture and then we're
going back to the after two cycles we
just go back to the old IDs but it's a
it's a growing spiral where the number
of machines and the size of the data
that we're manipulating our are bigger
all the time so in the 60s everything
was centralizing mainframes in the 80s
we went to client server typically
Windows operating system or os/2 on the
client and then a big Oracle database on
on solaris on the on the back end in da
in the 90s with the web I think we
really went back to the mainframe
architecture where if you think about it
the browser at that time was as dumb as
a vt100 terminal and everything was
happening on the server and right now
with a cloud and mobile on one side and
and new html5 web browsers both mobile
and modern web browsers are as powerful
in terms of the primitives that you can
use to build applications as kind server
desktop swear so I think we're really
going back to a client-server
architecture on the between the client
and the server but here the server is a
distributed horizontally scalable cloud
based microservice architectures so why
did why was darker so successful that's
my view on the market and i'm using
movie analogies
to explain the position of the different
players switch media there are two areas
here on the left you can see a private
or data center based workloads that's
where people were in the past ten years
and it's mostly virtualized on vmware is
dominating in there and then on the
right you have three big cloud providers
who are duking it out right now for
market share with Amazon Microsoft and
Google and in terms of and on what's
been happening in the past three years
is that after dragging their feet for
many years enterprises start to move to
public cloud and to build hybrid
architectures and I think that's one of
the reason that explains the success of
darker so in terms of movie analogies
for the different players i would say
vmware is like the movie 300 i don't
know if you saw it it's a the story of
300 Spartans that are resisting an army
of 10,000 persons they're very
courageous they shout Spada but then at
the end they all die and to me that's
kind of where vmware is today I don't
know if you saw they did an agreement
with Amazon to try to milk the cow for a
little bit longer but I don't give them
much long to live in that transformation
then you have Amazon and to me they're
like independent independence day too
it's a really bad movie but there's one
great line in there there's a spaceship
that the size of the Atlantic who who
lands on the Atlantic and one of the
generals called the President of the
United States and he says all they
landed on the Atlantic and he says where
and he says everywhere because the the
spaceship is as big as the Atlantic and
to me that's exactly the effect that
amazon had on the enterprise market
where they are studied to land in the
enterprises with a massive cloud that
nobody can match Google to me is like
back to the future so my friend Alec see
who is working at Google says I
exaggerated a little bit maybe a little
bit but just a little bit i would say so
why is it back to the future while i was
at Google I was trying to sell a
version of App Engine which is a task
App Engine for business two companies
and when I started talking to to them
about that i think it was around two
thousand ten or eleven they just laughed
at me they said we want we want
possibility we want to have hybrid
architectures we certainly don't want to
put all our data at Google and we don't
want to use a pass and to me google is
like Marty McFly the hero of back to the
future in the first movie he goes back
in time in the 50s and there in an
evening he starts playing rock and roll
to them and they don't know rock and
roll yet but they're ready for it so
everybody is dancing and they're very
happy about it but at the end of it he
starts playing hard rock which is music
from the future and then there's a big
silence and nobody understands that and
to me that's pretty much the attitude of
most enterprises when they see Google
technologies its technology that's
coming from the future by people are not
ready to use yet they have some really
interesting stuff like bigquery and
things like that but they don't run
inside the firewall and so people are
very wary of putting all their data in
there so to me Google needs to like
create a better transition from where
people are today to using their tools to
their to their benefit i have to say
that what I've seen in the past two
years that they've been doing especially
with things like cubana des I think
they're going in the right direction but
there's still a lot of work to do so to
me Microsoft is like Terminator 2 in the
second movie Terminator comes back but
he's the good guy this time and the
microphone frontal that would make
people laugh when you see the Microsoft
as Satya Nadella so actually Satya was
the first guy who interviewed me when I
joined Microsoft and after the interview
with him I call my wife and I said yeah
I'm probably going to join these guys he
knows what what what he's doing so Satya
is coming from Sun and well he used to
be a member of technical staff at son
joining microsoft and one of the things
that you have seen at microsoft in the
past few years is a broad adoption of
java linux and marginally all the open
source technologies so the microsoft of
today is very different to me microsoft
has a very interesting strategy where
they're really bet on hybrid from the
from the start so with azure they have
they're trying to catch up with amazon
with lots of different data centers
around the world and a pretty powerful
and fully featured cloud and they have a
parallel on-premise story with i think i
think it's called azure stack so
something that you can that you can buy
run internally and has the same API as a
sure and then on top of that in the
middle of all that transformation you
have darker and darker is a technology
that's being used both by devs and apps
it helps people adopt a DevOps workflow
and Annie it provides that level of
portability between the different clouds
and on premise that enterprises are
looking at when they want to not be
completely locked into one of the cloud
providers so I think that explains a lot
of the success that doctor had and the
movie i'm using is a charlie and the
chocolate factory because we're we're
building red chocolate than everybody
loves okay so what does the stack look
like nowadays at the bottom you have
your virtualization or cloud provider
sometimes bare metal so the big ones of
him were as your amazon and cloud google
cloud platform then at the operating
system level there's been a very
interesting transformation in the past
three years i actually caused by docker
it started with core OS where they
realize that in the data center when
people want to run microservices the
only thing they need is a linux kernel
and darker and so koro i started with a
very reduced linux distribution that has
very little things in it and just the
darker engine to run all your workload
so you're putting all the dependencies
of your application and your micro
services inside
of containers very quickly the whole
industry followed suite so Red Hat has
atomic Ubuntu has ubuntu core rancher OS
is one of my favorite because they went
darker all the way with a they're even
running system services in a special
second instance of darker for system
dapper photon by VMware and the most
interesting one is a Microsoft so
Microsoft is known for Windows Server a
lot of enterprises are running that and
last last month microsoft announced
docker with windows containers so what
they've done is that day the isolation
features that docker relies on in the
linux kernel they created similar
isolation features in in the windows
kernel for windows 2016 and they were
implemented a darker back end for
windows containers so they announced
that last week at our last month at the
ignite conference and in addition to
Windows Server 2016 they have another
version of it that's called nano server
that's a shrunk down version of windows
server without any UI you manage it with
a PowerShell and its really designed to
run workloads with high density at scale
in data centers so then on top of that
you have darker engine our philosophies
batteries included but removable so we
have a set of plugins for things like
volumes and networking and then what you
see on the right is orchestration and
over the last year there's been a big
battle between many orchestrators I'd
say the three main ones are darker
itself so with darker 112 and swam mode
dr. Anna house orchestration built in
the Cabana test project that was started
by Google and has a very big community
behind it and the Apache mezzos project
which is a older and was kind of well
established for people using big data
and and was kind of revamped for
scheduling containers as well but you
have a whole host of others like Cloud
Foundry who's reinventing itself as a
container orchestrator so why why do
people a why do people a dub ducker to
me there are two main drivers the first
one is agility for developers and a GD t
has been around for quite a while now
the extreme programming book is from
1999 and i'd say today in most
enterprises that I meet developers have
adopted agile and it's not for the for
the sake of developers it's really about
the business and there are some business
drivers to adopting an agile methodology
I think I doing cockcroft summarizes
summarize did the best when he he talked
about lowering the what he called the
MTB Amish the mean time between ID and
making stuff happen gdt is really about
having developers iterating faster and
creating features as opposed to a
building infrastructure and so it's
really about about dollars and making
developers more productive the second
trend is DevOps it's a younger trend
it's like five year old now and it was
actually created in Belgium initially
and since the mainframe ear our devs an
ops had let's say a very conflicted
relationship in the client-server era it
wasn't much better typically your
developer wouldn't talk to the Oracle
sysadmin who was managing the Oracle
database in the 90s it was even worse I
remember at Netscape we were using Java
and C++ to create our applications and
the apps were only using Perl so they
didn't understand anything about the
workloads we asked them to run and with
a with a cloud era devs on up started to
work together using the same
methodologies and tools and it's called
DevOps so DevOps is more a cultural
movement than anything it's about people
processes and tools so no it's not only
about tools people and processes are
very important there and it's about
teams adopting common practices like
continuous delivery infrastructure as
code collaborating between silos doing
small iteration and doing
out of measurement in order to improve
the product so it's about that feedback
loop but DevOps like agile it's not
about singing Kumbaya it's at the end of
the day it's about the dollars and where
are the dollars here if you look at that
these numbers in 1999 a Windows sysadmin
would manage five machines Linux aside
min Linux was always better at
automation with managed 50 of these
machines in 2015 in large companies that
are fully automated like Facebook or
Google a single sysadmin typically
manages ten to 20,000 machines so we
were growing the ratio of machines
managed by a sysadmin by 2000 and that
goes with a lot of automation you're
obliged to work at a high level of
abstraction if you want to do that and
you need to standardize your
infrastructure so as I as I said DevOps
is also about people and processes I
highly advise you to watch the talk by
hancock who's a an IT manager at ING and
he explained in this darker come talk in
Dhaka Connie you 2014 he explains how
ing adopted the DevOps approached by
starting to reorganize their department
completely they had to fire a lot of
people they mandated that everybody
becomes a developer so in order for to
building France tractor you needed to
build that as code and so infrastructure
was checked into the github repository
and all that but that started with a
reorganization so if you want to adopt
DevOps in your enterprise start to take
a look at people and processes it's not
only about tools so let's talk about the
darker platform a darker our goal is to
build tools of mass innovation that's
our mission statement and what we mean
by that is that we identify technologies
that are useful for people to start
innovating and we make them easy and
accessible to use and very often when
people are talking about containers they
just realized if you're looking at the
history of containers they've been
existing for a long time from vs details
to solaris zones but what
what Solomon succeeded in two doing in
creating darker is to make them easy and
accessible and that's when they became
useful for everybody so what kind of
tools of mass innovation are we building
the first one with darker is we're
trying to make the internet programmable
what we mean by that is that there are
lots of devices coming online with
different capabilities and in order to
program them today you need to run in
different silos whether you're
programming for your drone or for an
industrial control system or for a robot
or for a big cloud platform or
internally inside the firewall typically
your development models need to be
different you're using different tools
and ati's the goal of darker is to build
that distributed OS that that would run
the same way everywhere so that you can
build your your applications in a single
way so how we going about it we we we
program we create what we call that
stack that starts at the bottom we
standard so here I'm talking about the
open container initiative that darker
started with 40 different companies
pretty much everybody in the industry so
oci is really about standardizing the
runtime and image format for containers
and then on top of that we have what we
call infrastructure so infrastructure
are components that you can use that are
very low level and that you can use to
assemble your own systems so here we
have things like run c which is a the
reference implementation of oci and
that's the piece that's running
containers in darker but you also have
container d VPN kit data kit and hyper
kit that are components that were used
to build a car for mac we have swamp kit
that's the basis for swamp mode in
darker and more recently we released in
frack it that's about a building
self-healing infrastructure i'm going to
talk a little bit more about this one so
as you see when when docker evolved
at dr we're building a full platform
solomon hikes gave a keynote at a linux
con last month where he explained our
approach where it's it's like linux but
with a twist where instead of building
the colonel we studied by building the
district the full product for developers
and ops with very open opinion a DUI and
then out of it we extract these plumbing
components that compose the colonel so a
docker we started with the distro and
then we're going towards the colonel so
on top of that we build that development
platform that's darker and then on top
of it we have commercial products and
i'll talk a little bit more about that
but this is what keeps the lights on a
docker so doctor is based on the eyes
Elysian eyes Elysian primitives in the
linux kernel namespaces and see groups
the same kind of primitives existing
windows and so dr. runs both on the
linux and windows another innovation
that really made darker successful is
that notion of image layers so in darker
we're using a union file system where
you can create images with a certain
base and then on top of it you just put
the diffs of the things that are
different from the base image which
means that if you're on a server and you
run 15 different applications that are
based on ubuntu the ubuntu layer will be
downloaded only once and then the layers
on top of it are pretty thin and then on
top of it you have a copy on write file
system for your container itself so dr.
for developers what does it look like
typically you would inherit from one of
the images that comes from dhaka store
or so it can come from docker hub which
is for community images and then docker
stories for validated images coming from
either commercial providers or official
projects so you inherit with a from
directive so that's what the dhaka file
looks like here i'm inheriting from java
7 then you have directives like copy
that lets you copy files from your file
system inside of the container image
then you can set a work
directory for the next command and you
can run commands here I'm compiling my
code and then the CMD directive says
which command is going to be executive
when you run your container once you've
done that you do a dot polka build- t
lets you specify a tag for it and that
is like in the current directory is
going to look at the daka file on the
context once you've done that you can
run your image with darker run- IT lets
me specify a terminal that i want a
terminal minus RM i want to destroy the
container when it's done I can assign it
a name and so that's what running a java
application in darker requires just
writing a docker file compiling your
code and putting it inside of the
container and specifying the arguments
to launch your your service then there's
one aspect which is a eating one for
developers one of the important thing is
that you could use doctor as well to
compile your application so here is an
example by mounting the current path
inside of the container and then
compiling my code in there so this is a
more realistic example using maven so if
I do a darker run of the maven container
here I can compile my whole application
by mounting the the current directory
where my code is and my pom.xml inside
of the container of the maven container
one trick to form a van that is pretty
useful to know is for maven you don't
want maven to redownload the whole
internet every time you compile your
your code and since containers just
disappear after you run them the dot m
to local cache local maven cash you want
to mount it inside of a darker volume so
before you use maven you do a darker
volume create maven and that will be a
volume that you use for all your maven
runs so that your your maven cash will
be in that volume and then you write
that out
to that directory and you do a maven
package in there if you want to analyze
images you can do docker images Java to
amount to analyze all the to see all the
Java images you have on your darker
engine and then dr. history shows you
how the image was built in order to
build an image it's darker blood- see
with the tag of the image and dot for
the current directory or the directory
path so this is an example of a docker
file for application that i'm going to
show you where it's a simple spring boot
application that using MongoDB so here
what I'm doing that I exposed spot 8080
to run it I copy the job that I have
compiled using an even a command that I
showed you before inside of my container
then I said the work the work working
directory to that directory and then I
do a Java minus jar of my jar and
passing it some arguments like the
server pot to expose and then the
MongoDB URI that I need to pass as an
environment variable now for that I will
need to have a MongoDB database running
and I need to pass to my container the
MongoDB URI to it so how do I do that so
typically I would run it like that dr.
Ron I pass a nun variable with the IP
address of the MongoDB database and I
can map some external port to the
internal 8080 port now when I want to
run that I don't want to have to install
MongoDB on my development machine
especially with microservice beta
applications typically you may have from
three to ten different microservices for
a single application so you use a
compose fight for that compose files let
you define the set of services that your
app is composed of so here i have the
web service it's my Shanna's on spring
those image I explained the port's that
I'm exposing here and I have a second
service for Mongo
Here I am just using the Mongo image so
that would be a development version for
production version of it i would add
some volume mapping for the Mongo dead
data so that the Mongo data is a story
either on the host or on a remote file
system and hear what you can see the
links links allow me to to link one
service to another so here because I
link the web service to Mongo when I'm
inside of the web container if I if I
curl or connect to the Mongo host is
going to connect me to the to the Mongol
service and you can see that now I can
pass my environment variable MongoDB URI
with a Mongo name there so that's pretty
portable so let's see a demo of that so
i'm going to show you that spring good
application app using MongoDB and i'm
going to show you another app that i'm
going to i just want to show you how you
can debug your application inside of
eclipse debugging a an application so
let's take a look at first the spring
Doge application I'm just going to open
this guy just to show you the the file
structure so here i have a few dhaka
campos file i have a docker file that i
showed you before yeah I think that's
big enough so in that docker file I just
copy also that docker file actually is
doing the compilation is doing the maven
install and copying the the and copying
the the jar inside of the inside of the
container in in a single shot I'm using
that dhaka file for continuous
integration so on continuous integration
I want the cic d system to be able to
compile all my code but for development
I'm using this one where I use the maven
container you
in order to compile my code into a jar
file and then I do a darker build of
that docker death file to to copy the
jar in the right place and run that
service when I've done that I can use
that darker compose file that i showed
you before and let's try it here so if I
do a darker compose minus f dr. Campos
run the TMO up so it's just going to
start my spring Dozier is going to
create my spring Dozier Mongo service
and then it's going to launch my spring
application my spring boot application
and it's going to connect to the MongoDB
database and because I'm on dakka for
Mac so here dhaka for mac to install it
you just download it from darker it's a
dmg would you just drag and drop darker
into your application path and when it
starts you get this little whale icon
here where you can see about docker you
can set some preferences in there so
here I can restart my daugher engine I
can set some advanced things like
insecure registries or mirrors or proxy
settings I can map files in there but
basically once I install it just works
and one of the benefits of Dhaka for Mac
is that it's deeply integrated with a
mac system with the underlying Mac
system and so for example for networking
all the network calls on the Linux VM
are translated using a tcp/ip stack
that's coming from the Mirage OS project
back into a mac call so that the mac
thinks that these calls are coming from
itself and that allows dr. for mac to
work well with a VPN the the filesystem
mapping also is much more efficient than
the
one in virtualbox virtualbox sheet for
shared folders were very slow so when I
mount a volume in Dhaka for mac it's the
performance is much better than that
then with virtualbox and so the the
teeming cambridge that's working on uni
colonel has been very active into
creating dhaka for mac justin who was
giving a talk and we sitting there who
was giving the talk on docker security
has been pretty involved in that so
because the networking is integrated now
I can go on localhost 18 19 and my
application will be running there so
it's a simple spring application where I
can drag and drop an image into it and
it's going to call a rest service as
that is going to add some stuff to the
image and then store it into MongoDB via
Mungo FS and spring data and so it's
adding some gobbledygook like that so
it's an application from Philip Webb and
Josh long from from pivotal with whom I
used to work before ok so that
application is running now I just wanted
to show you an example of how to do
debugging of a darker application so
here I'm going to use a different
application that i have set up in
eclipse but let me show you the let me
show you the structure of the
application so here i have i have a
simple java application that lets me
register a user and login to a server
and so the source code is in there so i
have a have a user class user signup
controller a model and all that and so
it's a web app so i have the source code
for the app in that directory and then i
have the registration database which is
uh I think it's let's take a look at the
daka file yet so my sequel database so i
have a darker file for my sequel and
forfeiting the my sequel database with
sample data
and then I have a registration web
server which is a tomcat seven on on
Java 8 server that is so the important
piece here is that so I said GP de up
options to let another process debug
applications in that Tomcat instance on
port 8000 and then I expose port 8080
which is the part where the application
is running so that's the Tomcat setup
and I have a darker compose file that
puts all these together so here I have a
database service with my my sequel
bicycle instance running on pot 36 3306
then i have the web server which is the
one I told you about and this guy is
important the volume here I'm just
mounting my app directory where the code
is going to be compiled by eclipse
inside of the Tomcat container in the
web apps directory so the result of that
is that my user signup application is
just going to be served from the
directory where I compile it and I do a
link to the registration database and I
open this time the pot 8000 which I'm
going to use to debug my container from
inside it so here what i can do is i can
do a darker compose up oops so that
should start that should start tomcat as
well as the my sequel database and then
once I've done that I can go into
eclipse so I've set up a project there
and what I want to show you is the run
config for all the debug configurations
so here i have created the debug
configuration for a project called user
signup i do a standard socket attached
to it on localhost on pot 8000 and
because my compose file is starting tom
cat and opening the gpda port to 8000 i
should be able to start debugging that
application right away
let's try that oops
so it felt connect to them so let's see
this guy started yeah they started
now stop this guy should be hmm
I'm s open web sorry also I did open
port 8000 here in my compost file I open
port 8000 there I see yeah I see what
you mean so here I should expose port
8000 oops
White's where'd it used to work
yesterday so let's try
I know it doesn't want to run it let me
check if I don't have anything yeah so
8,000 is actually exposed here on the
registration web server so that
shouldn't be the issue okay
closed circuit connection that's weird
yeah we have 21 minutes so I'll i won't
debug that for you right now i think
because I have other demos I wanted to
show you but all that so all that
tutorial is available on on github so
it's a github / com github / darker /
labs so if you go there you'll see some
tutorials for java development and this
one is in developer tools java debugging
and so there you have instructions for
how to set up a clip saw debugging in TD
GA and netbeans yeah i just want we try
once more now sorry
Oh actually your oh thanks all right oh
yeah yeah actually I prepared that demo
before so that's it it's already
connected so let's try to go to
localhost 8080 alright so there I should
see my application yeah let's go there
yeah I think it's manager ah ok what's
the password in that I think it's
somewhere in there oh it's should be my
compost file actually blah blah blah I
don't know it's in my compost file sorry
yes when I'm starting that it's uh I
have my sequel route oh no i don't know
i know i think it was different maybe
it's in that guy
oh oh I see so there's a yeah thank you
also it's admin admin how original all
right so if I get there oh no existing I
know what I'll just go to a user sign up
I just go directly to the application
okay so here i have my application and
there i can create a user like food or
or 1230 bar it's born yesterday football
calm and then when i submit do you want
to do this yes and here my break point
is is set up and i can look at variables
and I can start debugging my stuff so I
just won't go through the whole demo of
showing you the bug and all that I'll
just switch to another demo but
essentially you can use eclipse to set
up debugging to debug your your
container directly so let's talk about
so yeah if you want to do some labs in
the lab section that I told you about
arun gupta created a great tutorial for
how to use a so the example I showed you
is a spring boot application arun
created a gte application with while fly
and couch base and it's all detailed
into that darker labs tutorial so now
let's talk about what's new so first on
the developer experience side we think a
darker that the best tools get out of
the way adapt to you and make the
powerful simple that means dhaka for mac
and dr. for windows and
in terms of orchestration we added we
added swarm mode in darker one dot 12
where orchestration is built in and what
that means is that when you do a darker
swarm in it on your doctor engine it
switches into swarm mode and then you
can do a darker swamp join from from
another node to join that swarm it has
cryptographic node identity so by
default secure and TLS enabled on both
sides or on any communication and each
no that is not owned certificates that
are Auto generated by the system and you
can set up a policy to determine how
often they are rotated there is a new
service API so you can do a doctor
service create it's a declarative API
you just declare what your services
should look like what container is
running how many instances you want and
swarm is going to continue continuously
reconcile the state across the cluster
to make sure that the constraints that
you asked for our are in effect and then
the last thing in swamp mode is that
built in routing mesh where when you
publish reports on a service and you you
so when you create a service and you
publish report what swarm is going to do
is that it's using a I PDS on the nodes
on each of the nodes of the cluster a
port will be chosen for exposing and it
will be load balanced automatically
which means that if I created my
services my service there and I expose
port 8080 my pin to 80 80 port 8080
would actually be open on all the nodes
in my cluster and then when I reach any
of the nodes I PVS will load balance me
to one of the two one of the services
running in the swarm and then what you
can do is that an additional level you
can add a layer 7 load balancer that
just talks to these nodes but it's much
easier to set up so if you're using
docker 112 it's already in there so we
can do a darker swarm in it and darker
service create the last thing we
enhances the developer the ops
experience so lots of seaside mins are
setting up ducker on a cloud
infrastructure either amazon or roger
doger for amazon and dr. Fraiser are in
beta right now it's a private beta so
you need to go to bellator.com / dogs
and you sign up to get access to it and
once you get access to it you can deploy
it on either amazon or roger and what
these additions are they are deeply
integrated darker set up deeply
integrated with the underlying platform
so for amazon for example it's
integrated with ELB for load balancing
it's integrated with a cloud watch for
the container logs it's integrated with
your ssh keys your access control your
auto scanning groups and I'm just going
to show you how it works the last thing
I wanted to talk about is that new
distributed application bundle so that's
a portable artifact that you can
generate from a compose file it's a it's
an experimental format for now it's not
complete but basically when you have a
darker compost file that describes
several services you can do a darker
compose bundle and it will generate that
JSON file that has the shower image of
the shower signatures of your images and
the pot that you need to open and then
you do a darker deploy talking to a
swamp mode cluster and it will just
deploy and create your services I'll
show you how that works so let's do a
demo of darker for iws but before I do
that demo I want it to actually while
doing that demo I wanted to show you so
what I'm showing you there it's a kind
of an idea of where darker is going with
all this this is a prototype it's not
available outside yet and I don't know
which form it will take and when it will
ship but in that prototype we have a
version of Dhaka for Mac that's
integrated with Daka fry WS through dark
cloud so here you can see I'm logged in
with my daughter ID so my doctor IDs the
idea i'm using when I'm connected to
dark cloud or docker hub so dr. for Mac
knows who I am in terms of a docker ID
and here i have a new menu create
swarm and i'm going to create a swarm on
AWS so that redirects me to AWS console
where I have a CloudFormation template
that corresponds to dhaka fri WS when I
click Next I can specify a stack name so
let's take Pat darker devoxx three
because i have created two already i'm
going to create a swamp with one manager
two nodes i'm going to use a small
instance for the manager and a micro for
the nodes its integrated with my amazon
key so here I can choose my favorite SSH
keys and this is the new option there
here I can assign a swamp name which is
a is going to be the namespace swarm
name that I want doc a cloud to serve me
so I'm going to use that as shiny zonda
bug three here I can put my my daughter
my daughter ID user name and then an API
key then I'm getting from the darker
console so if i go to dark cloud on to
my account I'll see an API key I'm not
just not going to do that here because
I've done that a little bit before it
takes five to ten minutes to deploy but
once it's deployed what's happening is
that my whole so the CloudFormation
template is going to deploy an auto
scaling group on amazon so if you the
number of manager that I want the number
of workers in at auto scanning group is
going to set up I to Delhi let me show
you where it sets up so that's the one
that I created before so the create is
complete here and what you can see in
terms of resources so I have yeah so I
have a load balancer that set up for ssh
a load balancer that set up form from
for outside resources and it's using
cloud watch for follow the logs I need
to integrate it with my ssh
geez and the last thing that's really
special about this template that's not
in the in the current version is that in
addition to that if I have filled these
three forms giving it my daugher ID is
going to register the keys for that
swarm on 22 dark cloud and then when i
go there i can say my swarms and i'm
going to see the swarm i created before
and if i click there it's just going to
to create a terminal window that has all
my credentials all set up so i don't
need to like sauce some environment
files if I do a darker node LS oops dr.
and load LS in there you can see that
i'm i'm talking to a swarm on amazon
with the three note that i have created
so that's really super powerful to to
interact with darker let's take a look
at if I do actually let me I'm just
going to do a darker service create and
create a simple yeah oops
oh yeah it's here so I'm going to do a
darker service create for a simple
service that shows the load balancing
power of of dark arena of darker in
action so here I'm doing a darker
service create I call that demo one I
want n replicas I publish spot 8081 map
it to a TD of a has led darker demo so
if I do a darker service LS I'm going to
see okay so I so here I can see my demo
one it has ten replicas and it's running
so now when I go back to that
CloudFormation template i have the
outputs here and as part of the outputs
i have the default dns target so that's
the target for services that are going
to be exposed and what's happening when
i do that is that its publishing pot 80
81 on each of the nodes in my swarm and
because it's dhaka for i WS and it's
integrated with AWS there's a container
in there that's part of the addition
that's listening to swarm events and
when it sees that i publish port 8081 is
going to configure the elastic load
balancer that cluster to just expose 80
81 and map it to 80 81 on each of the
nodes and so when i run that it should
serve the application corresponding to
this container so that the even has let
one and what this container is doing is
that it is doing a xml httprequest back
to the same URL so that you can see the
different container IDs that form that
have been generated for that for that
service so that's the that's a soccer
for AWS demo after that I want to talk
about what we call Cass container as a
service so that's our commercial
offerings that we build on top of dr.
open source so I goals they are a GD key
for developers possibility for devs and
apps
control4 ups and the goal is to create
an offering that enterprises can use to
manage their global supply change for
software so the gas workflow is you're
using Dhaka for Mac or doctor for
Windows or or on Linux to build your
application then you ship them into a
registry so our commercial product is
dr. trusted registry and we have a whole
security workflow for signing your
images and then you deploy them on a
universal control plane which is our
commercial product that adds role based
access control Active Directory
Integration and things like that so
that's why it looks like the current
versions ucp1 that one has a high
availability a unified authentication
between dakid trusted registry and
universal control plane the ability to
do deployment from compose files and a
new UI to add nodes the current version
i'm going to show you is the current
beta for ucp2 oh that's based on darker
wonder 12 we swam mode enabled it has
full a pretty rich permission model from
no access to view only in our in our
demo at Dhaka con we just gave our CEO
because we don't trust him with our
containers just view-only access on on a
swamp cluster restricted control is what
you would give to a developer team they
can create their own containers and
manage them but they cannot see the
containers of any other teams then you
have full control so that's for admins
of the whole system and the admin has a
has additional access where they can
manage users and permissions there's an
address additional security service
that's only in dark cloud for now but
that's going to be on premise in a
darker data center pretty soon it's
called security scanning where when you
push an image to help you can elect to
have this service continually scan your
images for a well-known database of
vulnerabilities and this database is
constantly updated so if your images
have a
ability you will be notified about it
and then you can just fix it and rebuild
your images and deploy them
automatically so let's do a demo of UCP
so that's that's what Universal control
plane looks like that's the latest
version where I can see the nodes in my
cluster the services on the containers
that are running can see the resources
there so if i go to resources i'm going
to i'm able to create a service directly
there instead of doing a darker service
create i can create that from the UI i
can look at the various containers that
are running in there or i can look at
volumes networks and applications so
what happens there is that if you go to
your profile you can create a client
bundle and that client bundle is going
to download a set of certificates that
then you'll use to authenticate with the
darker client with that instance so I've
done that here in that terminal window
I'm just going to stop that I think this
guy I don't remember so if i do a GM
uucp that's a little if I do a darker no
del s so here i just typed a quick elias
that source the files that i download it
from there and here you can see that i'm
talking to my UCP cluster and if I do a
darker service LS oops I can see all the
services that are running on there and
if i go to actually fun i'm just going
to go back to my spring dodge
application and here i'm going to do a
generator to compose a DAT file already
so that's my dad file i did a darker
compose
I did a darker compost bundle to create
that DAT file so that's what it looks
like i have the shower of MongoDB image
default Network the Mongo link and then
the pot that I want to expose if I do a
DM uucp I'm just going to talk to you CP
the current node LS to just double check
and once I've done that I'm able to do a
darker deploy of the name of the DAT
file and what is going to do is that is
going to do a darker network create for
a network that's called default in there
that's an overlay network that is going
to create a service spring dos Mongo and
spindles web and if I do dr. service LS
I will see these services exposed so you
have this one and this one whoever was
starting so that's a UCP universal
control plane and darker data center
I'll talk briefly about our times up so
just talking briefly about plumbing runs
Ian container d which are the base of
darker running containers inside of
darker one dot 11 dhaka for mac we
exposed a lot of plumbing hi pocket VPN
key data kit I just wanted to talk
briefly about infracted that we open
source last month I highly advise you to
take a look at it it will be at the base
of darker for Asher and dr. fry WS and
it's a tool kit to build declarative
self-healing infrastructure essentially
you build adjacent file and you submit
it to one of these demons and it will
just create the resources and monitor
them and the JSON file so that's kind of
how the architecture looks like it it
allows for two types of resources
kettles and pets pets have specific
names and can be stateful cattle are
stateless and our can be replaced and in
frak it is hosting itself inside of the
its monitoring itself inside of a swarm
and that's what the Jason looks like so
here it's an example
and if you go to github darker slashing
racket you can see this example and
follow it and compile it on your machine
this is an example with an instance
using vagrant and a zookeeper flavor to
install a zookeeper cluster running with
vagrant on your machine in the future
there will be there will be instance
plugins for AWS and Azure and other
cloud providers and it's something that
you could use for other projects than
docker a darker we're going to integrate
it as a set of darker plugins to add an
infrastructure API to docker I think I
run over so it's a time to stop I'm
going to be available outside for QA
exact I run out of time thank you very
much</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>