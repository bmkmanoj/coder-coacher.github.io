<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Data Visualization with R by Matthew Renze | Coder Coacher - Coaching Coders</title><meta content="Data Visualization with R by Matthew Renze - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Devoxx/">Devoxx</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Data Visualization with R by Matthew Renze</b></h2><h5 class="post__date">2017-05-17</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/xOLH9GwDrcY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">Birgit you play kids do it thanks s they
weren't doing anything with like machine
learning at work right now
a couple people very cool awesome I
spent a lot of time studying machine
learning at Iowa State University
where I went to college and I found it
tremendously interesting back then and
I've tried to do as much of it as
possible in my career but at the time
when I went down as an independent
consultant there just wasn't a whole lot
of machine learning stuff available so
now that the industry is all caught up
I'm not doing anywhere near as much
consulting as I used to I'm spending
more time teaching people things like
machine learning and like artificial
intelligence so I'm really hoping to
find some really good machine learning
projects to continue working on in the
near future so alright I think we've got
a few minutes here maybe a minute or two
before we start so trying to think if
there's anything else that I should ask
you guys before we begin are you guys
having a good time today having fun
excellent are you excited for the party
tonight I am so how does that work do
you guys have to go and get tickets for
it or do you just do we just show up to
it get tickets gotcha I heard that
there's some confusion as to where
people go in order to take care of that
as well so well I know I'm excited for
him so I've been in the UK now for about
two weeks I spent I spent a few days up
north
started out in in York then I spoke at
Newcastle University and then we went up
to Edinburgh and now we're back here in
London my girlfriend and I that is and
so we're getting ready to kick off it's
about a month and a half long public
speaking presentation and this is my
first like like conference conference to
speak at so I'm very excited to be here
today and I hope you guys are excited to
have me here as well alright quick show
of hands how many of you currently use
data to make decisions at work every day
okay that's most everybody so I think
we're all pretty much in the right room
and does anyone create data
visualizations in order to help make
these decisions okay a few people and is
anyone using statistical programming
languages like SAS SPI
says Stata or are in order to create
these data visualizations okay I think
one two three maybe three hands so I
think we're all in the right place then
I think we will hopefully learn a lot
about data visualization and learn quite
a bit about the statistical programming
language are as well we're going to
start by looking at data visualization
kind of conceptually
and looking at programming in R as an
introduction and then were going to
merge them together and see how to
create data visualizations with this
programming language R but first I'd
like to begin with a quick story
so in 1869 a French engineer named
Charles Joseph Minard created a
multivariate data visualization to
capture a tell the story of Napoleon's
devastating losses suffering during the
Russian campaign of 1812 this data
visualization was divided into two main
parts on the top we have a spatial map
with a cumulative flow diagram overlaid
on top of the map
and on the bottom we have a line graph
that shows temperature over time in the
map portion we have a spatial map of
Russia starting from the Polish Russian
border on the left-hand side and ending
with Moscow here in the right upper
right-hand corner superimposed on this
map we have this cumulative flow diagram
that shows Napoleon's march across the
the Russian planes up to Moscow in pan
and subsequent retreats back to Poland
in black the width of the band
represents the size of Napoleon's arch
army as he's marching along and this
temperature scale this line graph is
linked to the retreat time R the retreat
flow band here and is mapped with time
as well as we can see from his data
visualization Napoleon suffered heavy
losses even before he reached Moscow and
his marched back through the brutal
Russian winter reduced his army by a
factor of it was a reduced by 90% beyond
that as well - so this is why rule
number one of the book of war is
essentially to never march on Moscow and
rule number two is to never engage in a
land war in Asia because they're
essentially no victory can be had
essentially it's only a degree
loss is what's measured now the stand of
visualization tells a very interesting
and compelling story and we can imagine
what this would look like if we were to
replace this data visualization with
just a simple table of data instead but
clearly this would lose a tremendous
amount of communicative and explanatory
power but by creating data
visualizations we can communicate
information more effectively and the
brilliance of this multivariate data
visualization is its ability to
communicate six different variables in a
single two-dimensional projection it's
communicating the size of the army the
location of the army in both latitude
and longitude the direction of the
armies movement the temperature during
the armies retreat and the dates at
various points along the retreat as well
down here now this is truly a very
powerful and expressive data
visualization in the world words of data
visualization expert ever Tufte this may
very well be the best statistical
graphic ever drawn now while we won't be
creating as complex of data
visualizations as the one from Charles
Minard there we will be creating a
series of multi standard of multivariate
and univariate and bivariate data
visualizations using our and now data
visualization is a very important skill
to possess because in an information
economy essentially being able to answer
questions using data and to communicate
information from data is a very
important skill to possess and this is
necessary because if we often need to be
able to see patterns and correlations in
data and data visualizations make it
really easy for the human brain to see
these patterns in addition communicating
information using data is often best
done by telling a story with data and
data visualizations make it really easy
to tell stories with data in fact now
that we live in an information economy
these skills are actually even more
important now than they were in the time
of Charles Minard which brings us to the
purpose of our presentation today so
today we're going to learn a little bit
about the programming language our out
of curiosity who has heard of our before
today okay so everyone had actually
already heard of it and we saw that only
a few people were using it though
did anyone use it in college but now
you're not currently using it okay cool
so a few people in addition we're going
to learn how to create
and visualizations using our then we're
going to go through a series of
different types of data visualizations
that we can create first starting with
visualizing one categorical or numeric
variable then we'll look at visualizing
two variables three variables and then
an arbitrary number of variables and
then finally we'll start looking at how
to visualize other tape types of data
things like graphs networks spatial data
and textual data as well too and we'll
end with a few topics I just kind of go
beyond the basics of data visualization
and show you what other things are can
really do that are quite impressive
alright and before we get into the the
meat of the presentation I think it's
important I tell you a bit about me Who
I am where I come from and why I'm
interested in this topic I'm an
independent data science consultant with
over 17 years of professional experience
building large-scale data-driven desktop
server and cloud-based applications I
have double degrees in computer science
and philosophy with a minor in economics
and my focus was on artificial
intelligence and machine learning in
addition I'm an international public
speaker an author for Pluralsight
Microsoft MVP and ASP insider and I've
worked on some pretty cool open source
software projects over the years a lot
of stuff involving data visualization
and just kind of transforming data into
actionable insight alright so let's
start with an introduction to R so the
first question you might have is well
what is R in essence our is an open
source implementation of the statistical
programming language s now some of you
are probably wondering that some kind of
like recursive joke but it really isn't
S was a statistical language invented at
Bell Labs back in 1976 and R is
essentially the open source equivalent
of that language which came out in about
I think 1993
it's a it's both a programming language
and an environment within which to
program in addition it allows us to do
both numerical and graphical analysis
and it's cross-platform so it runs on
Mac Windows and UNIX systems in addition
R is actively under development it has a
very large and vibrant user community
it's very modular and extensible and it
has over 9,000 extension packages as of
the last time I checked interestingly
when I started giving talks on are
probably four years ago there was less
than 3,000 packages so you can see that
this space is really growing
and at a very rapid rate as well - best
of all our is free open-source software
meaning it's free as in beer meaning
anyone can use a software free of charge
and free as in speech meaning anyone can
view the source code learn from it
modify it or redistribute it as you wish
under the GPL license and as I mentioned
our is a very popular programming
language so to provide a bit of context
in terms of where it lies a relative to
other programming languages on the
x-axis we have a popularity rank on
github by a number of projects and on
the y-axis we have popularity rank on
stackoverflow by number of tags in the
upper right hand corner you see this
first cluster of the programming
languages these are the very popular
general-purpose programming languages
things you'd expect to see like c-sharp
Java Python and JavaScript in addition
we have the second cluster down here
these are the more specialized our
popular specialised languages things
like MATLAB sequel Lisp stuff like that
and then down here we've got the less
popular languages like like Nimrod and
memoral I've never even used that one
before
and prawn pirate stuff that you've
probably never heard of but right here
in red is our and you can see it's at
the top of the specialized programming
languages it's probably important to
point out that it will most likely never
be in this cluster here with the
general-purpose programming languages
it's really good at slicing and dicing
data but it's not really designed for
general-purpose computing or that's not
a specific intention you can do it with
our but that's not what it was designed
for so you probably won't be using it to
build your next ecommerce website
anytime soon but you will likely be
using it to analyze the data being
stored in the e-commerce system and this
is what our looks like as you can see we
have both a programming language and an
environment within which to program and
we can also do we can do numeric
analysis and you can see that we can
also do a graphical analysis as well
however rather than working with the
out-of-the-box our IDE today we're going
to be using a more powerful IDE or
integrated development environment
called our studio it's still running are
under the hood however it's just a more
powerful ID in order to
just more powerful and it will make
doing the demos quite a bit easier I
generally use our studio as opposed to
our out-of-the-box myself so we'll walk
through the various windows here in our
studio when we get to our upcoming demo
which is coming up in about a slider -
in addition I think it's important to
point out that our has been implemented
in other IDs as well - for example we
have are available now in Visual Studio
using our tools for visual studio so if
you use Visual Studio is your primary
IDE which senses the Java conference I'm
guessing those people probably don't use
Visual Studio you can actually just use
are right inside a visual studio now and
there's pros and cons to each of these
IDE s so it's probably best I just point
them out and let you decide which one
you want to use rather than running
through all the pros and cons all right
so enough talking let's see some code to
begin as a card-carrying programmer
I have to begin every code demo in a new
language that I do with HelloWorld
otherwise they take away my programmer
card so I'm just getting there's not
really such a thing as a programmer
cards okay you guys can laugh - these
jokes I know they're not great but you
know it's all I got to work with all
right
so we're going to start here by typing
into the interactive console X and then
set equal with the right arrow
assignment operator to a character
string surrounded double quotes hello
world exclamation mark and smiley face
because we're having a great time and I
hit Enter
and what that did was it took this line
of code executed it and then stored the
very early value hello world into the
variable X now if I want to print this
variable to the console I just type
print and X and then we get hello world
return simple enough pretty easy to
program in our it acts pretty much like
you would expect now to keep the demos
moving along fast because there's a lot
of stuff I want to show you today I'm
not going to be typing everything out by
hand I just I'll make too many mistakes
and you guys will laugh at me and then
it'll be kind of embarrassing so what
I'm going to do is I'm going to put my
cursor on the line of code I want to
execute in the script pane here up in
the upper left hand corner
I'll hit control enter and that's going
to push that line of code right here
down into the interactive console window
then I can do the same thing with the I
can do it with comments as well which
I'll just show and then the print
command as well and so when I execute
the print command from the cut the
script pane into the console window it
produces the results down here so as you
can see most of the interesting stuff is
going to be happening down here but the
stuff I'm doing to make that interesting
stuff happen occurs up there and then
we're also going to have variables are
going to be stored here in the
environment window and then
miscellaneous pane over here will
contain things like our data
visualizations there's you can see
packages help files various stuff in
that lower right-hand corner ok so
that's essentially are the hello world
demo and the our Studio IDE alright so
let's switch back over to our
presentations alright so now we're going
to look at data visualization alright so
data visualization is the visual
representation of data are the
representation of data by a visual means
and we do this because the human brain
is exceptionally good at visual pattern
recognition so the idea is we want to
map the dimensions of the data up to
visual characteristics things like
location size shape and color for
example if we look at this table it'd be
a bit difficult for us to determine
whether we sold more pizzas or more
salad quickly by scanning through a long
list of tabular data however if we
create a simple data visualization it
becomes immediately obvious to us that
we sold way more pizzas than we sold
salads on the days in question here so
data visualization can take tabular data
and convert it into very easy to see
patterns for human beings which is why
data visualization is so important
especially when it's so cost effective
now to create data visualizations it's
really easy with the tools that we have
to spit out data visualizations for just
about anything that we might need to
inspect now I don't want to go too deep
into statistics for this presentation
however there are a few terms that we
need to understand so that we're all
speaking the same language
the first is observations and
observations are essentially the rows in
the table and we refer to them as
observations because in statistics we're
typically interested in observations of
some kind of physical phenomena like the
average temperature each day or the
number of pizzas that we sold second we
have variables and variables are
essentially the columns in the table and
we call them variables because the
values vary across each observation we
have two different types of variables
categorical variables and numeric
variables so categorical variables are
these named things these qualitative
things like customer and product and
numeric variables are the quantitative
things things like the quantity of
products sold there are other subtypes
of variables but we're not going to get
into them for the purposes of our
presentation today so now based upon the
number of variables that you have and
the types of those variables there's a
series of different data visualizations
that we can create and this little table
is going to help kind of act as a guide
to to keep to keep us anchored in where
we are in the presentation the different
types of variables that we're working
with so we'll go through those each in
more detail as we get into the different
sections all right so there are three
main plotting systems in the our
programming language right now there's
the base graphic system which is
essentially comes pre-installed with R
and you can kind of use it out of the
box there's lattice which is the package
that you can download and install which
it's formula based and it's designed to
make working with multivariate our
multiple variable data very easy and
ggplot2 which is based on a concept
called the grammar of graphics which
allows you it's a really flexible
consistent yet flexible language for
describing data visualizations it's
actually really powerful as based on a
thesis by Leland Wilkinson from several
years ago that's it's really kind of
taken over the the world of data
visualization so each of these planning
systems have various pros and cons which
is why I'm going to try showing you a
bit of each of them throughout this demo
of this presentation so in our next demo
I'm sorry the the third demo which is
coming up after the next one will look
at all the data visualizations using the
base graphic system then the demo after
that we'll use
at us and then the demo after that we'll
use ggplot2 so you can kind of see each
of them in action for the the various
things that they're good at all right so
let's switch back into code demo mode
and take a look at how to create basic
data visualizations with our alright so
the first thing that we need to do is
create some data we're going to store
data in something called a data frame
which is essentially a table it's going
to contain a columns with the rows of
observations we'll do that using the
data frame constructor and we'll create
two columns name and value
we'll set name to the values ABC and
we'll set value equal to the values 1 2
and 3 and then we're going to store this
in a variable called DF which is going
to stand for data frame so now I'll
print this data frame so we can see what
it looks like and it's pretty much what
we'd expect it's a table of data
containing two columns name and value
and it has the values a 1 a b c and 1 2
3 populated in column or fashion just
out of curiosity everyone can see the
bottom of the screen right yeah okay
anyone cannot see it ok so the people in
the back I can try flipping this around
so that that's on the top and the other
stuffs on the bottom if you think that
would be better
show of hands who would prefer me to
flip this ok so just the people in the
back um I don't know what would you do
we're going to flip it and hopefully
this is going to be better for everyone
I only time I ever have to find how to
flip this is when I'm giving
presentations so it might take me a
second or two to find it back pain
layout so I switch this to console and
for the record this is most likely going
to screw me up every time I try going to
the console pane because I'm just not
used to it being here ok so now we've
got it up here we've got our table with
name and value and if we want to get
access just a single column of this data
frame we type a print and then DF our
data frame a dollar sign which is kind
of our it would be like a dot operator
in in are the equivalent and then the
name of the column which is value and we
can see that that prints just a single
vector of values the single cow
our single variable with the values one
two and three so that's all I'm really
going to teach you about how to work
with data in R everything else is going
to be creating a data visualization
using one of these three plotting
systems there might be a little extras
in there as well too but that's the bulk
of it so if we want to create a bar
chart using this this these data
essentially we use the bar plot command
will set names equals to our data frames
name column we'll set the height
parameter equal to our data frames value
we'll set the color to light blue we'll
set a main chart title and x-axis label
and a y-axis label as we can see this
creates a data visualization with name
on the x-axis and the value on the
y-axis so we can quickly see that we
have one A two B's and three C's
obviously these data are just arbitrary
I probably could have come up with
something a bit more interesting but I
wanted to keep it as simple as possible
so that's the base graphic system in our
that comes out of the box however we can
install more powerful data visualization
systems like this lattice by using the
install that packages command and then
lattice I'm going to skip over
installing this it took a while to
download over the Wi-Fi and I don't want
you to have to sit there and wait so I'm
just going to skip this step just
imagine pop up a window and it's out
downloading and oh now it's installed I
already did it though so once we have it
downloaded and installed we can
essentially load the library into memory
using the library command and then we
can create we can use all the functions
in lattice like creating a bar chart
using the bar chart command now rather
than bar plot setting X which is our
formula to value as a function or sorry
a value as a function of name and then
we'll set our data to our data frame
we'll set the color a main chart title x
axis label a y-axis label and because
lattice likes to kind of shrink the the
y axis down as much as possible we're
going to force the y axis to be limited
to the value the range of values zero
and three point one using the vector
constructor operator here which is a
concatenation operator which is just the
letter C so that created the same data
visualization we saw before but you can
see it has slightly different aesthetics
the fonts are different the colors
should be the same but I think like the
border thickness and stuff it's just a
slightly different representation but
you'll see later Landis is quite
powerful when you've got multiple
variables that you're trying to
visualize at the same time that's where
it's real power comes in we can do the
same with ggplot2 we typically call
install that packages and download
ggplot2 and then load it into memory and
then once we have ggplot2
we create all of the data visualizations
in ggplot2 using the ggplot command we
set the data to our data frame we set
the aesthetics which are essentially the
the mappings of data to dimensions our
two visual characteristics with X set to
the name column and Y set to the value
column and then we're going to use
what's called a genome or geometry
object or just geometry in general which
in this case will be a bar GM because
we're creating a bar chart so we'll set
the bar GM with the statistical
transform set to identity which
essentially means just pass the data
through don't average it don't use
standard deviation don't do any
statistical transformation to the data
coming through we'll set the fill color
to light blue
we'll set a main chart title an x-axis
label and a y-axis label as you can see
that created the same data visualization
but with slightly different aesthetics
again the fonts are a little bit
different
there's no borders around the box the
titles shifted over that's actually a
recent change in ggplot2 just within
like the last year and then we've got
this a slight grey background with
gridlines as well so you can do the same
thing with all three of these plotting
systems but like I said lattice and
ggplot2 are really going to shine when
we get to the more complex data
visualizations coming up shortly all
right so let's switch back into our demo
mode and we will learn about creating a
data visualizations for a single
variable all right
teleported ourselves to the rest of the
presentation what we're going to be
working with right now is a single
categorical variable so that's a single
qualitative variable and a single
numeric variable or single quantitative
variable and the fancy statistical terms
for these these types of analysis are
you know very are yeah
qualitative univariate analysis and
quantitative univariate analysis but
we're just I'm going to try referring to
things in less statistical speak so that
it just doesn't confuse people but for
those of you that have done some
statistics these are the types of
analyses we're going to be doing all
right so when we're interested when
we're visualizing a single categorical
variable we're typically interested in
the the frequency of observations of
some qualitative value so for example if
we've got a data set that's movies by
these genre the genre is the qualitative
value and the frequency of observations
is the number of occurrences within that
specific category of values so for
example if we're interested in seeing
how many g-rated no sorry if we're
interested in seeing how many comedies
there are we can quickly see that
there's a thousand two hundred and
eighty one comedies and that represents
roughly 18% of the data so we can look
at either the frequency of observations
which is the count or we can look at the
percentages which is essentially the
part of hole representatives either
percentages or as a value ranging from
zero to one if we're interested in
visualizing a single numeric variable we
can create data visualizations that
focus on measures of location that is
the where the data are located like the
the minimum the maximum the median they
mean and in different quantiles the
spread of the data or how the the data
is distributed or dispersed and the
shape of the data for example seeing
things like the skewness like whether
it's skewed to the positive or negative
direction and kurtosis which is the
peakedness or non peakedness or flatness
of the distribution for a single numeric
variable so we're looking at the
distribution of values for a numeric
variable for the remainder of the demos
today we're going to be looking at data
contained in the open movies database
which is a collection of movies that I
kind of a
policy as anyone familiar with the
internet movies database IMDB okay so
this is the open source kind of
equivalent to that you can download the
entire data set which is what I did and
then I process the data to make them
usable for analysis so this contains the
values or movies from the year 2000 to
the summer of 2015 but it's only movies
that have a rating of G okay so in the
u.s. we use the MPA MPAA rating system
so it's G PG pg-13 and are so like
children are G PG s like for teenagers
pg-13 for older teenagers and then
r-rated movies for adults I forgot to
explain that one time I give this
presentation nobody had any idea what I
was referring to so we also have a movie
run time in minutes we've got the genre
the year the movie was released the
movie critic score which is the
percentage of critics that gave the
movie a favorable review box-office
revenue in millions of US dollars
whether the movie has won one or more
Awards and whether the movie was
distributed in the United States only
which is domestic or if it is an
international distribution so to keep
things interesting we're just going to
imagine that we're trying to answer
questions for our co-workers at a
fictitious company that we work at
called net films just imagine that we're
a software developer and we get asked by
our co-workers on a semi-regular basis
to answer some of these questions
involving the movies contained in our
database so we'll be having a series of
co-workers like our coworker natalia
asking us questions and then we're going
to attempt to answer these questions
using data visualizations so let's
switch back into demo mode and we will
try to answer Natalia's questions easily
with our data visualizations there you
go all right so the first thing we need
to do when working with data in R is
tulo the data into memory we can either
pull it from a database or from the file
system or scrape it from the web if we
load it from a file in the file system
we start by setting our working
directory to the directory containing
the files that we're going to work with
so we use a set WD command to set that
working directory and now I'm going to
load the movies data from the movies dot
CSV which is comma separated values file
into memory using the read dot CSV
and so that is a sign of the values
contained in this file into a data frame
called movies which we'll take a quick
peek at so we can see that it contains
pretty much what we'd expect the tabular
data from the Stata file which includes
the title of the movie the year the
movie was released the movie rating
runtime critic score box-office revenue
award status and distribution type so
now that we've got that data into memory
loaded into memory we can essentially
visualize a single categorical variable
for example to answer a question like
how does the count of movies compare by
reading category to do this we're going
to first just take a look at a simple
frequency table which shows the numeric
values so we can see that there's 96
g-rated movies in a thousand 423 r-rated
movies but numerically it's a bit tough
for us to quantify especially if there's
a large number of values however we can
create a frequency bar chart of ratings
to quickly visualize these data as you
can see we've got XR on the x-axis we
have movie rating categories and on the
y-axis we have the count of movies we
have very few g-rated movies but we have
quite a bit more r-rated movies quickly
compare these values or the frequency of
values across these categories we can
also look at things like what proportion
of movies have won awards now most data
visualization experts will tell you in
general you shouldn't use pie charts
because because the human brain is
actually not very good at using the
interior angle of sectors in order to
make comparisons of quantitative values
however if you have a very small number
of categories say for example -
sometimes these pie charts aren't
overwhelming essentially so we can
quickly see that the we have way more
movies that have won awards than movies
that have not won orange which actually
I thought when I first analyzed the
status that that seemed a bit odd that
so many movies would actually win awards
you'd think that only a few would win
but maybe there's something going on in
Hollywood that has been yet to be
explained we can also visualize a single
numeric variable so for example we can
answer questions like what does the
distribution of movie runtimes look like
to do that we can create a simple dot
plot which most people wouldn't use
anymore but was much more widely used in
olden days this is going to create a one
dimensional representation of the
distribution of values along a single
variable which in this case on our
x-axis we have movie run time in minutes
however you can see the rough shape of
the data but it's kind of difficult to
see in these overlapping points where
the the median and mean values lie and
kind of what the overall shape is so we
can use more powerful data
visualizations like a box plot in order
to see what's referred to as the five
number summary statistics of these data
so we still have movie run time in
minutes on the x-axis but now we have
the five number summary statistics in a
visual representation for example we
have the minimum value excluding any
outliers the first quartile the median
the third quartile the upper are sorry
that the maximum value excluding any
outliers and then any outliers either
above or below the minimum and the
maximum and the way that you determine
whether it's an outlier or not with a
box plot is you take the distance
between the first and the third quartile
multiply it by one point 5 and then
either subtract from the first or from
the first quartile or add it to the
upper quartile and then essentially any
values outside of that range we just
assumed are outliers as John Tukey came
up with that arbitrary kind of
calculation so we can also create more
powerful data visualizations like a
histogram which is essentially going to
show us the shape of the distribution
now on the x-axis we have movie run time
in minutes and on the y-axis we have the
frequency of observations within each of
these equidistant bins so it's a lot
easier for us now to see the general
shape of the data because these bins
essentially show us an approximation of
the distribution of values but since we
have powerful computers now we can do
even more advanced things like create
density plots which in the old day was
quite a bit more calculation but
nowadays we can simply just run a the
density command and then plot that
density function that's return as you
can see we now have the smooth curve
representation of the distribution of
values more specifically this is
referred to as a kernel density
estimation but people just usually call
them a density plot and if you notice on
the y-axis we now have the density
rather than the frequency of values and
density is essentially the likelihood
that a value will be found on
or that area of the curve with without
going into calculus all right so that's
visualizing a single numeric variable in
R so let's flip back here to our
presentation all right so we answered
Natalia's questions very easy with their
data visualizations and everyone's super
happy now all right so next we'll take a
look at how to visualize the
relationship between two variables so
we're going to be focusing on this kind
of middle section in our little diagram
two categorical variables two numeric
variables and then a numeric variable
group by a categorical variable so when
we're visualizing two categorical
variables we're typically interested in
the joint frequency of occurrence for
values at the intersection of two or
more care two categories so for example
if we're interested in seeing how many
g-rated action movies there are we start
with the action genre column and then we
move over to the gr8 or sorry action row
and move over to the G rated column as
we can see there's only two G rated
action movies which should match your
intuition since most kids aren't
interested in arnold schwarzenegger
blowing things up and we can look at the
comedies and see how many r-rated
comedies there are now we can see that
there's 506 which once again probably
matches our intuition in addition on the
at the end of the rows and the bottom
sorry the bottom row and the end column
we can see the row totals as well which
we refer to as the marginal frequencies
since they're on the margin and we can
also visualize this as relative
frequencies as well so instead of
looking at the count of observations we
can look at the distribution or sorry
the part of whole or proportion either
represented as percentages again or as a
values between zero and one so the grand
total should sum up to the value one
here at the bottom we can also visualize
two numeric variables and when we do
that we're typically interested in
looking at the relationship between two
variables so typically we'll put the
first variable which is our explanatory
variable on the x-axis and then we'll
put our predicted variable or the
outcome variable on the y-axis and
visualize the relationship between these
two values
is the aspect of this relationship we're
typically most interested in is the
correlation between these two values
that is the degree to which two
variables vary with one another in
addition we might also be interested in
looking at things like the distribution
of values so we can quickly see things
with data visualizations like whether
it's a a you know mobile distribution
where there's just one center to the
data or a bimodal distribution where
there's two centers to the data now if
one of these variables in our in our two
numeric variable data set is a value is
the value of our sorry is a time value
we can essentially create a time series
data visualizations like a line chart
here that shows both the values as
they're changing over time and the rate
of change from one time period to the
next so essentially it's capturing two
different variables otherwise if we did
a step chart that would just be
capturing the one variable so the third
type of bivariate analysis that we can
do is the analysis of a numeric variable
group by a categorical variable and when
we're doing that we're typically looking
at some kind of aggregation of values
within categories so for example on the
x-axis we have our movie rating
categories and on our y-axis we have
box-office revenue and millions of US
dollars so in this case we're actually
summing the values for that group or we
could be looking at average a--'s or
some other aggregated value grouped by
categories all right so our co-worker
Natalia showed our debt analysis to a
Tony who's the director sales and
marketing and he's got some questions
that he would like us to answer as well
too so we're going to see if we can help
Tony answer his questions by creating
some data visualizations involving two
whoops
oops I could exit involving two
variables still didn't get that here
okay
alright alright by the way how are we
doing in my speaking too fast going too
slow just right is anyone am I going too
fast for you okay good good alright
because I always get concerned about
that it's a lot of information to digest
but my favorite presentations always the
ones that give me a lot of information
and just kind of let me absorb it at the
rate that I can all right so visualizing
two categorical variables the first
question we're going to answer is how
many award-winning movie categories are
there by rating category so to do this
we're going to create a contingency
table which is a two-dimensional
frequency table showing the the number
of observations at the intersection of
the movie rating category and the movie
award category I'm going to do a simple
rename of the columns just to make it
easier for us to understand what's going
on and as you can see so we've got this
contingency table with movie ratings on
the rows and it's got the award status
on the columns and that the intersection
is the number of observations that exist
at the intersection of those categories
so with that contingency table we can
now create a grouped frequency bar chart
using the bar chart command and keep in
mind this is now using the lattice
package in order to create these data
visualizations the last demo was all at
the base plotting system so we'll create
stacked sorry group frequency bar chart
we'll add a legend as well as you can
see we can now compare we've got ratings
on the x-axis and count of movies on the
y-axis so the award status is now
represented by stacking the bars
side-by-side so we can compare within a
category and compare across categories
which is really useful for doing certain
types of comparisons or in some cases it
might be better to stack these bars
instead which will do same command I'm
just changing the stack parameter here
to true instead of false and so now
we've stacked these bars so that we can
really easily compare within sorry
across the rating categories but we can
also compare the marginal frequencies as
well to very easily but at the expense
of being able to compare the individual
inter category values is easily so once
again different data visualizations for
different
so that that question you're trying to
answer and there's also other data
visualizations like a spine plot that we
can use which is the same kind of data
visualization as the stacked but it's
now proportional they refer to this as a
100% stacked bar but now we're using the
area in order to represent the number of
observations so just different ways of
looking at the same kind of data or
answered those questions we can also
visualize two numeric variables for
example how our runtime and box office
revenue related and to do this we
typically create a scatterplot which
we'll do with the XY plot command and we
now have on the x-axis of the movie run
time in minutes and on the y-axis the
box-office revenue in millions of US
dollars each of these points represents
a movie and where it falls in this
two-dimensional projection of our data
set and as we can see there's a general
trend to the data but to make that more
obvious we can create a linear
regression line simply by changing the
type and just adding an R for the
regression and that now draws this
linear regression line showing us a
visual representation of the
relationship between these two variables
and I've done a more thorough analysis
on these data and the correlation is
relatively low so don't just assume that
the longer the movie is the more money
you're going to make it doesn't work
that way
but some people may think that
especially after Lord of the Rings did
so well at the box-office
the third question is they're sorry
next we can visualize time series data
to answer questions like has the average
box-office revenue changed over time and
now to do that I'm going to load a time
series data set that I pre processed and
we'll just take a quick look so you can
see what it contains we've got the year
in the first column and the average
box-office revenue for that year in the
second column so if we want to create a
time series or a line chart to visualize
this time series we can do that in
lattice and that's going to create on
the x-axis the year and on the y axis of
box-office revenue and millions of US
dollars and this line now is
representing the average box-office
revenue for each year so we can see both
the value for that year and the rate of
change between each year as well we can
visualize a numeric variable group by a
categorical variable and to do that
it's going to look kind of like what we
we saw earlier but without frequencies
with aggregated values now instead so to
do this I'm going to load a package
called deep liar which I'm mostly
spilling this because I think it's
really important that you see how
powerful our is at slicing and dicing
data and this is just a little teaser
for it so within our we can do what
looks like a language integrated query
or a method piping there's various names
for what's being done here where we take
our movies data frame we're going to
select the rating in the box-office
columns from the data frame grouped by
reading and then create a summary
statistic where we're going to be
looking at the average box-office
revenue and then just save this back as
a data frame so if I print this table we
can see that it essentially just took
their data set and it converted it into
a new table of ratings and box office
our average box office revenue for each
rating category and then we can just
feed that through a bar chart just like
we saw before and we can now very
quickly see that the r-rated movies
perform significantly worse at the
box-office than the G PG and pg-13
movies which is why there's so many
r-rated movies in general because
audiences adults preferences for movies
are very picky kids you don't animate a
truck on the screen and they're like
happy for hours so we don't really have
to invest a whole lot of time coming up
with great G rated movies they just do
well in addition we can also visualize
more than just a single aggregated value
by doing things like creating a
bivariate notched box plot and this is
starting to get into what's called small
multiples representation where we're
faceting and essentially showing
multiple small visualization
side-by-side and this tells us the five
number summary statistics for each of
these variables across the box-office
dimension and so we can see once again
that the r-rated movies performed worse
and these little notches here these are
actually very important from a
statistical significant standpoint if
the notches essentially do not overlap
then the difference between the medians
is not statistically significant however
if they are sorry if they do overlap
then it is not statistically significant
if they do not overlap then it is a
statistically significant difference
which that might have been worth
attending the presentation alone for
those of you that are looking for quick
ways to verify data visually all right
so let's put back in to our presentation
all right so we help Tony answer his
questions and we are now ready to move
on to visualizing many variables I'm
going to go through this section a bit
quicker just for the sake of time and
because I want to show a lot of the more
advanced data visualizations before the
end of this presentation so essentially
what's most important to note is that we
have this ability to do something called
faceting this ability to put small debts
that are sorry data visualization
side-by-side to represent things like
different categories of values and we
can facet in several different ways for
example we can facet horizontally which
makes comparing things along the y-axis
very easily we can facet vertically
which makes comparing things along the
x-axis much very easy and we can also
fast it in a rap sense which is useful
for just maximizing your screen real
estate quite often so faceting is the
general kind of architecture for how we
visualize data in more than when we have
more than two variables at a time we can
also go into 3d data visualizations as
well to which I'll show one or two of
those but lattice and ggplot2
were designed essentially with faceting
in mind so they work really well when
you're dealing with more than two
variables whereas the base plotting
system was really just designed to work
with two variables you can do faceting
in it but it requires quite a bit of
extra work in order to get the data
visualizations to look nice so we're
going to be working a ggplot2 for our
next demo to try answering a series of
questions for our Jill who is the
director of content at net films
all right and so our first question here
is how many movies are there based on
rating award and distribution type and
so we can create a 2d faceted frequency
bar chart that will visualize these data
and obviously I'm moving through the
code pretty fast mostly because you've
seen kind of the basics of how to do
ggplot2 and lattice and partially
because I mean this is all available
like on my website like you can just
download the entire presentation run
through the code if you want this is
mostly just to show you the different
types of data visualizations and how
they're applied to solve certain or to
answer certain questions so that gives
us a wraps facet with ratings on the x
axis count of movies on the y axis and
then in on the columns we have the
distribution type and on the rows we
have the award status so now we're
looking at three different variables and
the quantity are the frequency of
observations for those three different
variables or the intersection of those
three different variables we can
visualize two categorical and one
numeric variable to answer questions
like how does box-office revenue compare
cross award and ratings and to do that
will create a faceted bar chart which
essentially you can really quickly see
that
well once again on the x-axis we have
ratings and on the y-axis we have movie
box-office revenue in millions of US
dollars we can quickly see that the
movies that have not won any awards
don't do anywhere near as well as the
movies that have won at least one or
more Awards we can answer questions
involving visitor involving one
categorical and two numeric variables
like how does critic score relate to
box-office by rating category in 2016
and our 2014 and to do that I'm going to
subset the data just to slice out just
the year 2014 and then create a data
visualization a faceted scatterplot with
just that years worth of data and oops I
forgot to turn something off so ignore
the no ignore the warnings here was my
mistake so for example we can and I was
going to do linear regression here too
once again my mistake so we can see that
we've got critic score on the x-axis
box-office revenue on the y axis and
then facets for each of these movie
rating categories and then we can also
add other thing
like what should be a linear regression
line for each of these data
visualizations as well so that we can
compare the relationship between these
various categories of data very easily
side by side we can also answer
questions involving one categorical
variable in a time series like how has
box office revenue changed over time by
rating and that will produce a faceted
line chart so on the x axis we have year
on the y axis we have box office revenue
and then each of these facets represents
a movie rating category now and one last
one we can do a critic score and how
it's related to our sorry how runtime
and critic score related to box office
and so this is going to create what's
referred to as a bubble chart on the x
axis we have run time in minutes on the
y-axis we have critic score as a
percentage and then the size of each of
these bubbles is the box-office revenue
in millions of dollars and we can also
do 3d data visualizations of the same
type of data so exact same data exact
same kind of information but just a
different way to visualize it with run
time on the x axis critic score on the y
axis in box-office revenue is now rather
than the size of the circle is the
height of the dot in a three-dimensional
space we can also visualize many
variables like an arbitrary number of
variables if we're just interested in
seeing if there's any patterns in the
data set so for example this creates
what's called a scatter plot matrix
which I'm going to walk through this
here real quick just so you can see
exactly what it is let me zoom in so a
scatter plot matrix essentially allows
you to see patterns in an arbitrary
number of variables at the same time for
your data set so on the diagonal we have
the column names and at the intersection
of each of these is a two-dimensional
projection of this five dimensional data
space so for example if we want to look
at the box office revenue and runtime
and how they're related we can find run
time on the x-axis and box office
revenue on the y-axis so now we've got
run time down here and we've got box
office here and we can see that data
visualization that pattern that we saw
earlier with the slight correlation
between the data so this is really easy
to just take a data set and look at
try finding patterns provided then it's
a relatively low dimensional data set
once we get into these high dimensional
data spaces we need more powerful tools
like machine learning and data mining
tools all right so we're going to skip
over the advanced data visualization
types just due to limited time but I
just kind of want to show you that
there's all sorts of other things we can
do with our in terms of more advanced
data visualizations we can do spatial
data visualizations hierarchical data
visualizations graph a network we can
also work with other more advanced forms
of things like bubble charts cumulative
flow diagrams and even turn off faces
like this right here I have to skip real
quick in addition we can also we can
also create a both animated data
visualizations and interactive data
visualizations as well too so this was
only I think it's less than 20 lines of
code to create that animated data
visualization and interactive data
visualization probably less than 40
lines of code this is now available on
the web so that you can use it and slide
the sliders check the check boxes and
change the data visualization as a
result all right so we're going to skip
through that advanced data visualization
part and so where do we go next
essentially we've got a whole bunch of
resources available like the websites
our website the our studio website
revolution data flowing data our blogger
and our seek as well and my website
contains a wide variety of information
articles presentations and more and
Pluralsight courses as well too so in
conclusion I hope we learned a bit about
data visualization with our starting
with an introduction how to visualize
data and then the various types of data
visualizations that we can do so thank
you very much feedback is very important
to me so if you have other than running
out of time a feedback is very important
to me so if you have any feedback you'd
like to give me I'd really appreciate it
and this is my contact information in
case you'd like to talk to me about
anything that we discussed today thank
you very much</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>