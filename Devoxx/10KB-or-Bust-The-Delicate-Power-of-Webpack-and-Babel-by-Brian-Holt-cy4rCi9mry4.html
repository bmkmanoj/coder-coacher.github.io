<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>10KB or Bust: The Delicate Power of Webpack and Babel by Brian Holt | Coder Coacher - Coaching Coders</title><meta content="10KB or Bust: The Delicate Power of Webpack and Babel by Brian Holt - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Devoxx/">Devoxx</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>10KB or Bust: The Delicate Power of Webpack and Babel by Brian Holt</b></h2><h5 class="post__date">2018-04-27</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/cy4rCi9mry4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hi i'm brian microsoft worked my ass off
for a couple of months now they really
happy to be here
blue dress so yeah Microsoft
that's his bit the raccoon which is a
mascot for the part of Microsoft that I
work for which is a shirt a lot of
podcasts call for the Papio never - that
is a bunch of JavaScript developers
getting drunk and talking about
JavaScript it's pretty fun that you
should have a call from masters it's
usually what people read has been from a
bunch of courses on past pretty you
stored the LinkedIn for a couple fun
date months just fun to be an ember and
Java developer at LinkedIn before that I
was at Netflix I was there for about two
and a half years worth of the non-member
website TV the Xbox the Roku all sorts
of stuff I swear get reddit which was an
adventure here use reddit get somebody
the recipe was admitted which is okay
I just moved to see all right rather in
the process of moving to Seattle from
San Francisco I you salute
Salt Lake City and I used to be known as
well which is why the huge event this
event but there's a different event is
here Lou Perez
but the one from Italy that's the one
but and usually get people's attention
up there
okay so how many of you in here are
front-end developers its JavaScript CSS
HTML know how many of you back-end
developers so you have no idea we do
designers any designers what am I
missing
who didn't racer okay well I I have been
a front-end developer for most of my
career I was a PHP developer once upon a
time and then I wrote a lot of them as
well as opposed to what I do these days
is write more noted reactions to things
about specialized so someone at a
company that I'm not going to name the
toy black that was me and was able to
like to put this
I don't really like this quote I agree
with the sentiment that not everyone is
as fortunate as us that live in the
developed world that we get to have fast
internet connections right there you go
to some of these other places like thank
you if you go to like other places like
India travels of these places you have
really really really slow internet
connections right and so that's I think
that's become a point that this this
person is trying to make is that we as
web developers are not necessarily
catering to these developing countries
where I'm kind of catering to our own
comforts right we're on in offices with
fastest Wi-Fi on him fast telephone
connections of all that kind of stuff so
we're trying their best in its like got
some slack like I'm trying I'm trying to
put out a product right
in fact most of us are just trying to
survive right we're trying to just get
our product out the door because if you
don't have a product you don't make me
money if you don't make any money then
you don't get paid so most of us are
just trying to make money and do the
right thing so not every app needs to
work to G on a low powered phone you
need to know what your audience is like
so for every one of your applications
every one of you should be very very
familiar with either do analytics charge
or they not mature and links or whatever
you need to be known you need to know
how your users are looking at your
websites right how they're usually you
didn't Internet Explorer 6 which I'm
sorry if they are we're going for
something to take that are musician
plays version of Chrome or are they
using old Android how are people
internet activity website so that's why
I think I have a problem with that done
reviews tweet this one here because not
every website is to work
2g networks right that being said I'm
just going to talk about 2g networks
today so sorry
so if you've never seen this chart
before I think this kind of blows
people's minds is to G's 14 kilobits per
second right 3G which is I think what
most of us are used to that I've been on
3G must have been here in Bucharest 144
kilobits 4G is about a hundred thousand
fluids per second and then David which
is why at my house in San Francisco is a
million kilobits per second right so it
doesn't matter how about Housley website
is if I'm loading it at home in San
Francisco it's gonna look pretty fast
right hopefully your websites like
gigabyte if you do eat up bigger
problems so how many of you would have
one of these I did yeah an old-school
56k modem right does he have this
dimension this 156 but yeah they had
like an older version I was 28 and they
had an older version of that was 14
right so I have one of these Rona might
not work Friday oh that's why I grew up
around computers 2g connections are
slower than this right so imagine kind
of browse the Internet today using one
of these measuring stream Netflix with
one of these distances not going you're
not have a good time what about it it's
gonna be pretty boring because it's just
gonna be buffering the entire time so
that's how you kind of have to Frankie
seems like a how is my website
it's on dial-up so yeah
tutitu slower than if Jesus came on
which is crazy it's just this is for me
it's just crazy to think about because
I've never on 2g and back then on the
web was when heaven was on that speed
websites for designed to be loaded on
these really really slow connections now
that you know a lot of the world has
much faster internet connections
websites like Netflix like you know
LinkedIn like these these bigger company
websites are designed to be run of these
really really fast internet connections
which means that you know India so these
are the places are being left behind
which is not fair and it's also you
weren't limiting how much money you can
make right if people in media can't
access your website I'm taking anything
anywhere rights could be Indonesia this
could be this could be in Alabama the
United States read like their place in
the u.s. that don't have very fast
internet connection as well I'm sure
around Romania as well there are places
that don't have great pastor of a
connection it's better
so these websites have designed we
loaded on fast internet connections and
then people from other parts of the
world try and access it they just they
just can't they can't access it so this
is the website nice work on which is
linkedin.com I'm going to show you what
it's like to load LinkedIn calm on 2g
and I'm going to make you watch the
whole thing
boom it's working you can see the little
things spinning the top so grab a drink
make yourself comfortable maybe take a
nap and I'll see you back in about ten
minutes sounds good it's not that bad
but it's pretty close so how far we're
20 seconds into this
still nothing on the screen nothing
nothing on the screen whatsoever 20 20
seconds oh now we got something coming
right
like I take credit on this credit this
is my shame this is what I used to work
on and this is how it's loaded so we're
about 38 seconds in and we're finally
starting to see something on the page
how many do you would have just clipped
like gossamer rounds at this point yeah
we definitely beat right this is insane
we're about a minute now
still not still not totally loaded one
point two minutes
and there now this took about a minute
and 20 seconds to load everything which
just basically means like no one has to
be right you're gonna have like a 95%
drop off at this point it's absolutely
ridiculous so this is a huge company
it's part of Microsoft right as I still
work with Microsoft this is a huge
company with five hundred engineers and
this is the best of its good now to be
honest with you most people are not
browsing on their desktop on to eg right
like that those usually don't go get
there usually oh my god
Android app or there's like a lite
version of the website that you can use
as well so this is I'm showing you this
for effect right most people don't
actually see this but what do I do want
to show you is this is a different
website Trego calm which i've never used
it before but it's a website india to
book hotels right so let's see how fast
this flows with the exact same internet
speed
so we saw in three seconds if it had
audience first paint and within ten
twelve seconds and stuff like that is
the same right that's a crazy right like
this is a company idea and they just can
make twenty attacks just pop it down
right it's not even close unbelievable
this is fantastic fantastic engineer so
this is a competition
Bangalore is definitely kicking Silicon
Valley's ass just just how the park
which is just unbelievable unbelievable
me okay so now hopefully you feel
sufficiently bad about your website
that's that's what I'm going to do is
just try to make computing inside of
yourself just like I do so what do I do
right I have no idea what I'm good
that's how I feel most of the time it's
just like I'm floating through space
having no idea what
so what I'm gonna do here is I'm gonna
give you a bunch of tips and tricks and
ideas you can take home to your to your
applications and your side projects to
help you find ways to be of course that
because there's 10,000 ways that you can
do it and most of them are not so
difficult
so just by raising hands who here is
using webpack to build their JavaScript
application okay about 30 that will come
if you're using the Babel
just - okay 3:03 okay well maybe this
might not be so slick will do but these
are amazing technologies so there's
things that you should consider using so
the first thing I wanted to bring up
here is you need to question your
framework now many of you are probably
already working on large projects
migrating new frameworks is probably not
in the cards today but would you start a
new project I want you to think about
everything that you're asking for right
so here I have five of the most popular
frameworks right so all of them submit
to be all of them but I wanted to show
you that
pre-act which is my favorites for
probably reasons that are obvious that
you can see in front of you this three
and a half kilo bytes which means that
it takes 0.1 second on 2g to load just
framework nothing else it's just the
framework - it takes point one seconds
to load that
congrat that to you ember which just a
low number and not your application or
anything else but just a love forever I
check this this morning takes four point
eight one seconds so just by using ember
you're already adopting four point eight
one seconds into your tier payload now
for most people that should be
unacceptable right let's adjust
be a non-starter but it depends on your
doing principle sometimes you don't need
your website to learn bloating idiots
whatever is okay thing and so if you
react and angular kind of you know in
between all those now what I will say is
they're getting better react used to be
44 and with react 16 they're down to 30
and it's getting better the brand new
angular angular IV which I'll talk about
later is actually down about Bolivia
it's about three Tula bytes to load the
new version of thank you which is really
really cool
they spoil it like I'll talk about that
in just a second so most people they
started doing that one will use this
please this battle preset es2015 that's
really confident in what it does is it
takes all of your JavaScript we can
write futuristic JavaScript using camera
functions and all like the read new
syntax with JavaScript and you can
transpile that to something that'll work
in ie6 right Internet Explorer and
Beyond so most people don't even think
about it they just drop in Babel preset
yes 2015 that's what they did four years
last year they came out this thing
called Babel preset that this one down
here and what this one does is you just
give it a target you say transpile this
so this works for 95% of my users right
and you just kind of identify which
users you want to work for and what
preset em is it'll keep transpiling less
and less of your
occasion as more morning.you of every
uses are adopting newer to our browsers
right so the most of your users are
using bread and chrome or brand and
Firefox
you don't need to transpile your code to
work in Internet Explorer right likewise
as browser starts supporting more and
more of these features like arrow
functions and generators all these kind
of things you can stop transpiling your
code to work for these smaller browsers
and so increase that then just does that
three automatically you want to change
anything just as time goes on it'll
transpile less and less of your code so
that's why pre send is preferred to use
2015 2015 will always transpile
everything all the time you get this
large chunk of code which is not
necessarily ideal right you want just
the bare minimum because that's going to
be faster and it's going to be smaller
which is what we're going for it smaller
and faster
so this is a really really new technique
this maybe started maybe two months ago
three months ago there's this script tag
this one right here script titles module
you see this before you can basically
include es modules so it imports
something from something right and you
don't have to actually bundle your code
together using webpack the browser
actually can understand modules natively
so if your browser supports the title
equals honor that means it supports a
lot of other functionality in JavaScript
right so what you can do is you can put
this script tag first time equals module
and if the browser understands typing
lamont equals module you'll download
this one right which is really cool
because that means you don't have to
transpile very much but you can leave
most of it just on transpile now for
browsers that don't support modules you
put this underneath it this one right
here and compile with all the
transformations and this will get
downloaded for older browsers right so
yeah actually but you bundle your code
twice once what this model is true this
is what you give to preset head one that
we were talking about previously and you
give this es models false to transpile
both of these right so the browser's
won't get a download with the one that
understands so it's either going to
understand this type of module one go
download the smaller one or if it
doesn't it will download this one
there's a cool blog post from Google on
how to do just this so this is another
really cool technique to make it really
fast from people with modern browsers
and make still work for people old
browsers
appreciate so this is a really really
cool technique the tree shaking is also
known as LiveCode inclusion which is
different from dead code elimination
that seems kind of counter to this that
sounds like the same thing right
but with live conclusion you're only
including code that could potentially
ever be run right and with debt
elimination you're going through another
vague example never run so life code
solution will always be smaller to the
dead code elimination so that's why tree
shaking which I don't understand why
they call fusion that makes no sense to
me but something computer science is
sometimes called a path it's going to go
through your code it's going to analyze
all your packages that you're including
and it's going to eliminate all the
things that you never call so let me
give an example that how many of you
have used load action before or
underscore and most of us right it's
like the standard library for JavaScript
pretty much so if you do this just this
code by itself that is 73.3 kilobytes
looking at just a pretty big pipe right
there's just there's like 200 or 300
methods in it right how many do you
think that you're using every method in
lo - literally no one I don't think even
the creator's know all of the benefits
there no that's it's just there's just
too much there so it makes no sense for
us to be including everything right so
when you come across a require
everything are you just getting
everything for the whole package so
enter it the new type of modules so this
is actually how you configure 10 which
is one that you're talking about you say
field or trance file as this works in
you know the last two versions of Chrome
the last two versions of Safari the last
two years
of Firefox etcetera Tech Center right
and they tell don't count all the
modules let them web pack take care of
that so now that will leave us alone and
that's what's important with the modules
false so now I can go up here is I can
import from low - - yes which is the
heck of a script version right the one
that can be tree shook and you get just
the one method that you need right so
here I'm going to call it get where it's
exactly the same way but now this is
11.1 kilobytes it's a study 3.3 right
because you're eliminating all of that
dead code that you didn't meet right
which is it might not be quite cool so
just to show you what that looks like
this is called the web hack module
digitizer so you can actually see all
the things that are getting included so
if you look over there at this part
right here this is all code that I wrote
and this is everything that you need to
import mo - just the can't function
right so this is the smaller what the 11
kilobyte one it's still a lot of stuff
but you can still that's only like maybe
10 kilobytes worth of stuff if you
include everything it looks like this
which is crazy right you can't even read
it because there's just so many methods
included here right so like you look
there like the object wants the whole
map the street ones like there's just a
bunch of stuff that you'll never have
so this is why tree shaking is really
good for you it's going to go through
all of your modules and eliminate all
the stuff that you're not using which is
pretty cool but again just to highlight
for you you have to use the new type of
modules right the import something from
something right that's the new way of
doing modules the old way is this one
right here so they require - this is
called Tom and Jas and we're trying to
move away from that bound to get into
the new heck muskoka modulus it's still
kind of hard to do with note notes kind
of pinching up we're not exactly sure
how it'll work so uh good luck I guess
so the tree shaking is no silver bullet
no okay I thought was funny but I think
I'm funny just kidding
so it's not it's not going to work on
every package so first of all the author
has to write it specifically so it works
for them to model so for example react
you can't appreciate anything every act
there's two reasons for that one that it
in velocity the trees take anything out
of it and to the react library actually
uses everything right so if you call
react to render something out it's going
to use every piece of code in there so
you can limp in anything because
everything is being used right so that's
why tree shaking is used to put they go
- right to the library for various
functions but it's not useful for react
so that's why it might work for your
application it might help
it might not the other thing is that
you're probably using all of your own
app code right that's hopefully you're
not writing code that you're not using
so it's not gonna really help your code
it's typically just going to help with
the libraries that you include just be
careful if you cheat in the sense that
it's not you might do a ton of work or
not a lot of game you also might save 60
kilobytes so it depends on what your
application looks like use built-ins so
this was quite excited about it
so they use built-ins
this is YouTube battles 7 which is the
latest version of power I think it's
just been released officially so I think
use this today so what I want to talk
about is let's say we have this code
right here Bar n equals new promise ok
Babel wants to include what's called a
polyfill right so that it can run
promises in old browsers right because
all browsers don't understand promises
it's a relatively new thing as of 2015
so new is if you're including es2015
translations that means it's going to
include that promise probably but even
if you don't need it which is a problem
right we want if we don't have to do the
polyfill we don't you won't so what this
will do this right here is if the
environment doesn't support promises
that it's going to include just that
polyfill right just one four promises
it's not going to include all of the
polyfills which is only what you would
get previous to this point so you get
all the probably those four generators
promises
perhaps the stats for all these various
different things that you don't need
however if your environment does support
promises then you're just going to get
this and you're not going to get any of
the additional polyfills right sets of
this use built-in flag does for you it's
almost always a good idea to use this
use built-ins and you just put that in
your battle to make that top line use
built-ins usage right so only include
the polyfills that they actually need
please don't include anything else so a
really really cool feature would
definitely suggest using it you can see
what's the same
this again so what loose move is this
battle transformation so let's take a
look at this code you you don't have to
understand the code that's up there
obviously there's a lot of code it
doesn't particularly matter this is for
transpiling classes right we got the
classes with es2015 as well which are
like bastardization of how many classes
did we like them but they're there it's
um how they use them it's okay I thought
upset just okay so classless interact
with everything in JavaScript right
everything has to know now understand
how to interact with classes and various
different capacities the problem with
this that means there's a lot of edge
cases of how classes can kind of go
wrong right so that's what this code on
the Left does this handles all of the
edge cases and most of those edge cases
you are never going to hit 99.9 percent
of us don't write code in such a way
that most of this code actually is
important right like we don't have to
carry about some of these prototype
properties etc that kind of stuff right
so that's what this is over here this is
called the loose flow transyl
transpilation which means that make it
work for almost everyone and don't food
all of the crazy catch based stuff right
so most the time you're okay to just say
use loose mode and just go ahead and get
the smaller bundles message from for
battle if you're doing really crazy
stuff with classes want to stop and
please stop doing that and to use
so yeah
that's the one that you want I think
this is a kind of a one that I hope
you're already doing but I just want to
give you a gentle reminder when you're
building your code for production using
webpack please set the note environment
to be production a lot of libraries
depend on this flag to understand my
transpiling for development mode so I'm
going to do nice error messages and
source maps all these kind of things and
if you switch it to production mode then
you're going to get no error messages go
to bugging tools you'd like the very
smallest package right so infamously
slack was including the development mode
of react the development motor of react
is like ten times larger right because
I'd like really nice error messages has
a bunch of tools for us as developers to
be able to write react more effectively
so please please PLEASE bundle your code
use in production mode you get the
smaller bundles sizes and it's it's free
right like all you have to do is set
know that because production and you
just get free performance but that's my
favorite kind of optimization is what I
have to do don't work for so know that
equals support counseling
this one is a little bit more involved
in requires more thought and it also
makes your application more complicated
okay so the idea of the United cosplay
is that when you are loading your
website you don't need everything all at
once right you need some bare minimum
amount of code to get your app up and
running and then you'll load everything
else later right so basically you have
your critical code loaded first it you
know shows the user something and it
downloads everything else it means right
so for example that tree most hyped that
we were looking at is making very
effective use of kool-aid right because
what emotes first is the bare minimum
here's the search bar here's a couple
buttons that you as a user can start
thinking about how you want to interact
with the website then in the background
is blowing all the code actually you
know do animations to load the next page
to everything that's below the fold
right and those all of that second
that's what code splitting is so for
example when I land on the homepage for
LinkedIn I don't need to love all the
code for the profile page which is
exactly what it does that's why it's so
goddamn slow it's because it's
absolutely the entire website all the
profile pages all the search pages all
the job pages that's all under than your
very first page level which is
unnecessary so code splitting allows you
to load all that code later right so the
name of this talk is ten gilt kilobytes
are bosses right the only way you're
going to do everything underneath 10
kilobytes is by doing code split now
what's hard about this is it just it
makes your application more complicated
right now you have to worry about is
like have I loaded this code before you
kind of runt which is always less
right it's fun to just assume that
everything works so the way that you get
code splitting is to use a function
called import or dynamic import this
used to be called required I'm sure if
you did the old way but now the new way
of doing is important what the import
will do is it will go out it'll download
all that code and return this gives you
a promise and then what's the promise
completes then that person loaded and
that you're welcome to go ahead and
continue doing whatever you're doing
right so it's not too bad that when pack
makes it videos any way that you call
import it just automatically splits the
code right there
so there are several places you can
split codes the most obvious one is
various routes right so if I'm on the
home page I don't need to load the
profile page right you can see you can
load those every single time they want
to use it clicks around you can just
quickly load all the code the background
and then navigate to the new page but
there are other things that you could
spit on as well you can code things that
are full of baby purple right you can
load that factory easy on mobiles right
so if there's some sort of you know
warning model you know you click the
wrong theme or your validation didn't go
through you can cause a little bear as
well so there there are several places
that you can codes but that's not just
about anything that can be a little bit
later it doesn't have to learn enough
from source maps this is one that I know
a lot of websites that think through all
their source maps when they ship into
production which is a terrible very very
bad idea like feel shame kind of bad
source maps are really useful tool so if
you're using something like Babel or
CoffeeScript
or hell or any one of these compiles to
JavaScript libraries source maps are
really useable on trade maybe use the
sass
as well that it will tell you we have a
bug you can actually call the Pats the
CoffeeScript that generated or the
JavaScript or that help or whatever and
you can actually see that and the
console as opposed to just seeing the
compiled JavaScript which no one
understands so that they're really
useful for debugging but if you shift
them to production that they're huge
it's going to make your bundle size like
five or six times larger like literally
if your Bibles like a minor kilobyte
that's going to make it like six hundred
kilobytes to include all the source pass
so don't introduction make sure that if
you are using source maps that when you
do know that because production right
with what I was talking about before
make sure you turn on source maps like
this is the biggest optimization you can
make for your bottle right now if you're
a best into something so just go make
sure the Janell shaping source master
production i made you spill poisoning so
this was relatively new as well that's
the logo for a library called roll up
most of you probably don't have to use
roll up but a lot of the libraries that
you used to use roll up so for example
react is bundled for you using roll up
which just takes all the dependencies
for reacting puts them together for you
so you don't have to do it yourself is
written by a really smart guy named rich
harris whose father
stuff and pioneered this technique
called scope waste which I think it has
some code here to show you how it works
so the scope poisoning does on the left
you see show you right there this code
right here this is how historically how
web pack has worked so I require some
code this helper function right and web
pack puts that inside of a what we'll
call a closure scope right and it will
invoke that function it will return you
know whatever this helper function right
here then I can use it down here this is
internally how web pack works right it
creates this global registry of all the
various modules that you have and then
it puts them together in one file and
that just blows them as you need them
it's fine because if it's finally of
doing it but we have 10,000 modules
which some of us do have yet billeted
your node modules directory there's a
lot of modules in there
this gets slow and you have a lot of
modules and it's a lot of unnecessary
code right this rep web pack requirement
is everywhere so this library called
roll-up pioneered this idea of like what
happens if we just quit we just inline
that function right there so rather than
having to do this requirement you create
all these closure scopes which can be
expensive especially we do it a lot we
just have these available methods kind
of in a global registry and you can just
call it right there turns out it's a lot
faster and a lot smaller I think I have
yet right here so web pack got skull boy
stick as well in version 3 and you can
see here this I want to say this is the
New York Times don't quote me on that
but I think that's what this
sad words they will certainly kill
Avesta 37 kilobytes without doing
anything just for free using scope
boosting it got that much smaller as
well as their page load got like a half
a second on top of it really cool right
and then do any additional work it just
worked so you use a plugin called model
concatenation so that's what you have to
have to include into web pack to make it
do this optimization for skull poisoning
model of cavitation
so that's another advanced technique
that's worth looking into if you if you
have a web-based build cool stuff yeah
you can see there they went from 306
kilobytes on minified right to 176 they
cut almost half of their bundle off
that's not going to happen for everyone
it depends on how your code is
structured but it can be pretty
significant you can see down at the
bottom there vendor one didn't get lost
while they went from 676 to 63 so they
didn't really see a lot and all of their
various JavaScript packages but they did
with their app code
inish skeletons so this is more received
performance ready because for what
performance is half science and half
heart like you want your user to think
that your websites fast even if it's not
fast which sounds kind of tricky and
kind of this but it's also pretty cool
so I want to show you this gatsby
actually does this for free which is a
react based blog so you have this image
here on the right so like this is the
Golden Gate Bridge in San Francisco this
is a woman of the sunset and what this
will do is it takes these images and it
makes these these are SPG's right so
this is a full-size let's say it's you
know 500 kilobytes it's a nice large
photo this one right here is going to be
like and at most and this one here on
the Left which is even smaller it's
going to be like one kilobyte something
like that so what you'll do is you'll
load this one first right wing is a very
fast penis in line that you only have to
have as a separate file and so the group
immediately sees something there like
they see is like okay this has a good
big shade that's you know filling up
space and so it makes your website feel
really snappy because these are
immediately put in front of the user if
you remember when we were looking at the
tree boat website immediately it shows -
a blurred background
so right up there see the background is
blurred right this is exactly the same
technique except they're using a really
really low quality JPEG right there
right so that's gonna be like a kilobyte
JPEG that where everything's just really
blurry and it just make it really big
right and then compress this really well
because it compresses really well
because it doesn't have very many colors
so this is called an image skeleton and
you know if you think about it who you
are loading more code right because now
you have to load the skeleton and bend
the whole image right so you actually
are making your website larger in terms
of kilobytes being loaded but just that
makes it feel really fast because
something is there right if you have to
wait until now below the image it makes
that website go a lot slower and if you
go back to the LinkedIn site I mean you
have to sit here with 30 seconds to see
which sucks I don't watch it again so
come back here this is really cool yeah
you can see here so this one is using
ten shapes this
shapes to generate that like this looks
like a bridge right but people can see
that and I can see right away is like
okay there's a bridge here or like this
this looks like a woman standing in
front of a sunset right so you can start
kind of visually processing your website
and start making decisions about what
they wanted to do by the time they had
actually like looked at the picture and
read the text and they'll have decided
is like okay I want to click on this by
that point hopefully your entire website
will be interactive and you can start
you know doing things so that there are
libraries that will do this for you
automatically like you don't have to
like write these by hand but I will show
you there's several ideas of how you can
do this right like I think this one's
really really cool so this one they
actually did by hand go and write draw
SPG's but all of these SVG's are like
maybe 10 kilobytes 8 kilobytes and then
they load later those you know the real
pictures but that feels really snappy
right like it you can see that like
there's a view there there's mountains
there's someone standing on the sand
dune right this one might be my favorite
though
right so you can use SPG's together with
animations to have it have this like
really cool drawing effect and these
SVG's that they loved before the whole
like album art those again maybe 10
kilobytes County produces set CSS
animation on drawing the paths and you
just get that so image skeletons it's
something that I feel like we have from
the best from the developers haven't
really explored enough yet so definitely
something to look into
so here's a couple other options at the
very very least you should be drawing at
least a box right where something is
there something I've done a lot of my
career personally is just putting a
placeholder image there like that this
is supposed to be a user avatar you just
throw up there like something that just
people understands like okay that's a
place where the avatar goes it's gonna
eventually load the avatar when
something gets there solid colors work
as well you can just sample the image
and see what the dominant colors of that
they're touring in the pleura which is
what we were just talking about so you
can see down here a lot post my slides
online but this medium free code can org
go to this URL my took all this from
that one particle is really really good
it teaches you how to do all of these
things so you can do it yourself so you
can see here using these SPG's this
initial page book and give up a lot
smaller which is really cool this is
before where's all the images
all together so your initial pagelet you
can shave make it bites off though which
is pretty damn cool so your initial
payload page you should really try to
eat under 10 kilobytes now this isn't
always possible depending on your
framework right if you're using angular
react you start at 30 kilobytes of s
that's just the way it is right only if
we using reactors spelled at one of
these like micro frameworks are you able
to get over time but 10 is a good place
to aim for or at the very very least 10
more kilobytes than your framework just
enough of the skeleton to get your app
up and loaded and load the rest of the
website progressively so the best time
ever to your build what I showed you
right here most this can be done in you
know a week sprint I'm just sitting
there interview though so time
investment into your build usually pays
2 minutes so invite all of you to go
back and look at your products and you
know spend some time looking into your
building load no scripts and just the
Bears house give everything about the
full flow that's what that treat most
site does really well it loads a bunch
of code if you go back and look it ends
up loading 500 or 400 kilobytes worth of
stuff eventually but it's at the tail
end it's not out front
using mr. elton's
use code salute to get the only code you
know front delay the rest of the later
those are some suggestions for you how
many of you work with surrealists okay
I'm gonna give you some tips and tricks
with surplice but this also just employ
applies to many things ago if you want
to check out syphilis I'm a big fan
that's part of my job to work on
this if you go down here to this website
pain not a message box you'll see how to
get like a free trial with Microsoft
Azure which is a really cool way they
use a service of them so when we start
talking more towards the server side now
we want to reduce time to first byte
right so with front-end performance you
really care about time if there's pain
to the first that you see something and
the time to interact is so the time to
use it has to wait you click on anything
so now that we've I call the server
we're going to talk about reducing time
to first byte so the server time is API
is really really cool we use this a
little bit at Netflix so you can see
here this is in Chrome right inside of
chrome dev tools I can see here how much
CPU and GPU time I can see how long the
- cue ball queries took I can see how
long the file system looks like it felt
like if there was a cache hit how long
it took to read from the cache right so
you can send all this information down
all of your API requests so that instead
of chrome dev tools you can go look at
it and say hey you know back-end
developer it looks like the CAPTCHA felt
is taking twice as long as it shits like
what's wrong with the cache right or
we're getting a cache this every single
time why is that happening so this is
called the server time the big guy this
is more or less it looks like it's just
a header that you send out with your
request with your API request through
your front
or whatever and that's just included and
then you can see inside of Chrome I also
made Firefox beats from it now as well
so server timing same guy definitely
something we should look into
again make sure you only do it in the
development you know when we sending
these down because these headers you
know it just makes your requests larger
which you don't have to do the
production so you also know all the
people know the juries - crew all if you
don't have to write or those sorts of
information compressor responses this is
a kind of embarrassing story when I
started at LinkedIn I went in and I saw
all the API responses were huge they
were like 75 kilobytes and things like
that was just the senior who ate carrots
monster should never ever be that big so
I went in started poking around I've
actually found out that they were not
gzipping their API responses which is
insane right for three years this
product that people that are working on
have never compressed their API
responses
you always impress your API responses
there's literally no reason to inept
like about two so you should definitely
go check that so this is an extreme
example nobody sent me to be kilobytes
of - to 241 bytes but you can if the API
response is it's really well get really
really small so definitely look into
that
thirty minutes bravi how many of you
have heard of Brawley before it's a
pretty new technology so I'm surprised
many I'm not surprised that you haven't
heard of it so most of us are unable to
cheese it which is exactly what I was
just talking right
it takes your you know large text and it
compresses it down to a very small size
you see sitting technology rather than
to be how goodness there's a brand new
way of doing and I think probably was
invented at Google I've ever heard
correctly now every browser supports it
except these days almost every browser
supports it but it's a more efficient
way to big your website so here you can
see LinkedIn when they switched broadly
this is this much better load of time to
a desktop desktop and mobile so feed
initial know times yeah
just message me broadly so like free web
performance again just message you to
probably the page goes faster if we go
back to this this is the support chart
for Rafi so you can see here I eleven
none of the Internet Explorer to support
broadly that's unsurprising because we
don't work on Internet Explorer at all
anymore but now an entrance of it
Safari even understands broadly which is
really cool that's brand-new brand-new
for the iOS Safari which is okay to the
ass my opinion also supports it so it's
it's pretty well supported now so you
should definitely go check out and see
it brought me a little work for whatever
you're working on
holster so how many of your node
applications have this kind of
dependency graph
hopefully not many so the problem
particularly Surrealism surplus has is
the idea that you have functions that
run right so I just ran a function then
I helped load it to Microsoft cloud and
that whenever someone hits this API
endpoint it just runs the function
that's several this is just a dumb word
for someone else's server like that's
really what it is right just like the
cloud is some computer service is
someone else's server so when you do
server list it's loading these functions
but it will dynamically spin up more and
more functions if you can start having a
lot of traffic right that's what's
really nice about service is that it
scales for you you don't have to manage
the auto balancing or anything like that
you just upload your functions who just
hopefully works right the problem is
that as you spend more and more servers
that has to start up with these views
servers right so that's why this whole
starter
kind of sucks it sucks on AWS it sucks
on Azure it sucks on all of the cloud
providers so what you can do is use a
thing called hazard function pack which
in reality is just web pack with like a
couple tiny modifications but you can
pre pack your starless functions so that
doesn't have to resolve these crazy
dependency graphs so that's really cool
if you're going to do serve lists
particularly among the hazard functions
you should use as your function packets
it's it's pretty cool
cool so that's that those are my tips
and tricks for surplice and for a server
stuff they got a couple of minutes left
here I just want to talk about
futuristic cool stuff that's coming so
computers I talked to Henry Zhu he's the
core maintainer of babble and I was like
what kind of cool stuff is coming so we
talking about loose about before right
what they're gonna build it to vowel
well hopefully is they're going to
detect if you need to move on and on and
just automatically turn it on and off
for you which is pretty cool because
then you don't have to experiments they
can just throw them the thing that were
most for you that's pretty cool ahead of
time compilation any of you developers
in here oh well that's more than I
expected how many of you read react less
than I expected okay that explains any
Android developers oh cool like all
over everyone else just anything view
how many views view views really cool
too
one of my co-workers is on the core team
Sarah Jasmine so thank you the
developers work so it's changed a lot
since I've worked out but I have a sink
called äôt right which is really cool
but it also is kind of difficult I'm
sure I see some body cuts yeah but what
it does is it does some ahead of time
population for you so it just
reorganizes your application to be more
effective and you don't really have to
do too much to get to do that
so a OT is definitely something that's
cool and getting cooler with make either
partial evaluation this one just still
blows my mind probably one of the
coolest is it's something that the big
blue's network is working on and it's
called a pre pack really cool stuff so
what it actually does is that partially
evaluates your code for you in advance
so if you see here and returns hello and
a function that says the world and then
set a variable to be called hello +
space in this world what it will do
these would go a value weight that so
that it just says s equals this is amol
again sitting down like mind-blowing
right like super cool same thing not
shaking right so what it will call them
fibonacci 23 it will actually don't
evaluate that that's all i can send
another to user it's crazy right
so they're working on that they're
actually cutting this into facebook it
works with the reacts will actually
evaluate a lot of your reactive
components goes just insane
it's pre pack that I know of in which I
go disappearing frameworks I think we're
gonna see more and more of this this is
something angular is really feeding into
the IV IV before it's now again you
angular developers
check it out Heidi is going to change
the way that ain't angular's could be
written so there's two frameworks that
kind of pioneered this approach one is
called spelt who's written by the same
person that wrote roll-up which we
talked about previously so the basic
idea is that you're gonna read some
component right and it's going to ship
down just the markup and like the bare
minimum of JavaScript to make that
component work right now why that's cool
is that you know we don't ship the
framework at all right it's the frame
rate it actually just becomes a compiler
as we cover framework and so you're only
shipping the markup and the JavaScript
needed to make that markup interactive
so that's the point is spelled spelt has
no framework has no runtime whatsoever
it actually just shipped us a series of
components so angular's working on this
as well it's called the ivy project and
eventually what I use with angular and
ideas will to do is going to generate
web components for you that you just
want to ship a bunch of web components
out and it's just gonna work it sounds
magical I think it is actually some
sorcery of some sort of not actually
sure so very cool is something to keep
your my own as well
binary bytecode so the one bear on the
right this one this is liver which is
the rendering engine for ember there is
number one out right now which you can
use but is out something necessary that
is going to be the same as collaborative
literature was about to come out
which is why I love it and rather than
shipping you JavaScript code what they
actually shipped you is minor so it's
just just zeros at once which as you
might imagine compresses really really
well so all your templates are going to
be binary so it makes the point you
actually send out the wire very very
very small so it's just a very tiny
JavaScript virtual machine that can read
my code so it's almost done it's more or
less working at this point and it's
spelt which is this was 11 they're
investing into that right now to be
expelled even smaller so that's so
there's a hacker news folks so I just
wanted to show you some of these typed
Interactive's based on these newer
things that I'll talk about soap react
is still the fastest you can get
preemptively time to interactive for a
hacker entire complete hundreds team in
192 seconds which is insanely fast
spells 2.5 reacts react on
and glitter and a - they're still
catching up but they're going to be
smaller and smaller as time goes on so
that's the future hopefully you know
future king comes up every finger books
that says faster
so you get into too much I've got some
of these things that I put I'll put
these slides out later it will be here
my twitter it won't be team and then
this akms box that's all the server the
stuff we want to check that out as well
thank you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>