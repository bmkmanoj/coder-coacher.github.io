<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Ask the JDK Architects by Mark Reinhold/Alan Bateman/Robert Field/Stuart Marks | Coder Coacher - Coaching Coders</title><meta content="Ask the JDK Architects by Mark Reinhold/Alan Bateman/Robert Field/Stuart Marks - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Devoxx/">Devoxx</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Ask the JDK Architects by Mark Reinhold/Alan Bateman/Robert Field/Stuart Marks</b></h2><h5 class="post__date">2015-11-13</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/7vvx505mu3s" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">good afternoon this is asked the JDK
architects we have some JDK architects
here and you get to ask some questions
click introductions there's a hand like
go ahead Alan or Robert whoever's first
is this um yes Allen Bateman here not an
architect just happened to be at devoxx
good you're not gonna I'm a doctor not
an architect damn it I'm Stuart marks
otherwise known as dr. deprecated er I'm
Robert field currently working on Jay
Chou okay um so the the AL girl right so
sorry i'm going to show you the shortest
possible shirt as possible presentation
you will ever see from an oracle
employee this is slide number one whoops
good to go back stop that's slide number
two alright we've got that out of the
way go back to slide number one so Kate
QA here there's a mite there's a
microphone up there there's a microphone
that we can pass around also you can
also ask questions on twitter by using
the hashtag jdk arc or arch of your
printer prefer to pronounce it and
assuming that the Wi-Fi stays up this
will work so who's first Kirk
Kirk doesn't have a question which
collection form while we're waiting here
we were deciding what collection type we
would actually use to exclude certain
rose I was proposing a bit set and Row 3
was set and given the number of people
we want to exclude questions from that
is all the hecklers in the audience I
was proposing using jumbo Enuma set
Richard white why don't you want to use
one of you do it because I have a mic
please take the microphone to dr. Werber
sometimes doctors are just here hi
thanks um yeah since no one else asking
questions there was a serialization
vulnerability that cropped up last week
there are any plans to change anything
JDK wise in responses vulnerability
obviously the vulnerability itself
relies on a whole part of third-party
code also doing stupid things it's not
necessarily a jdk specific vulnerability
but there are some things that could
happen that could be changed in the jdk
that mean that if people do have stupid
code it wouldn't be a massive security
vulnerability excellent question so
we've decided we're just going to remove
serialization from nine and eight and
seven
what's the jet number just yeah what's
the jump number just kidding I wish he's
not kidding there is a gym I know
there's a job both but you withdrew it I
would release was filed on what I
believe April first a couple years ago
as much as we would like to remove
serialization that doesn't really seem
to be very practical we have looked at
ways to make it more difficult to make
stupid mistakes and some of those
enhancements my might be a 9 or might be
on the way to nine Allen part is
probably yes so there has been an effort
if anyone's on the OpenJDK core libs dev
you'll see several effects of it if
anyone's encore lips that you'll seen
over the last year many efforts to try
to improve serialization some of those
efforts have come to a halt for
compatibility reasons this is the big
problem with serialization is it it ties
your hands and feet and it's really
really hard to make progress but there
has been a couple of things that
particularly the work that Chris Hegarty
and purely vaart have done to put in
things like a final fence and a few
other things that have improved the
reliability of civilization and on
Richard specific question as to whether
there's anything in the JDK vulnerable
or other related products we're not
allowed to talk about any of that kind
of stuff and as to whether there's other
things that can be done to serialization
that would make it easier or sorry make
libraries less prone to some of these
then if you have specific proposal bring
them up there is a bucket of
serialization issues on the on the on
the table to be looked at they're just
really really hard because any time we
attempt to change anything serialization
it breaks something it's a quiet
question up there it would be more
efficient if you could walk up to the
microphone that's back there on the
aisle and bear in mind that it's very
difficult for us to see you
she put them up there they could really
do a Manford man blinded by the light
yeah um our jigsaw related questions
allowed no okay come on of course
they're allowed one month one of the
most annoying things about osgi is the
need to specify imports and exports in
the manifest making it impossible for
normal jars to be used in osgi I was
hoping that jigsaw would resolve that
but now it seemed that the version range
will not be supported in the module info
and I was wondering if it was considered
to support the definition of the
required version range without doing the
whole resolution of the modules I'm not
sure if that question is clearable so
III think you're asking yet another
version so to speak of the most
frequently asked question about jigsaw
which is why there aren't version
constraints in modulus but not java
files would that be roughly right yeah
okay so the answer is we did we did a
first prototype of jigsaw that had
version constraints in module and
footage avah files and we implemented a
bunch of the usual heuristics for doing
version selection interpreting the
constraints dealing with conflicts and
so forth it wasn't very satisfactory we
were on the verge of integrating thing
called a Sat solver boolean
satisfiability solver which is a very
sophisticated set of heuristics for
solving problems above that form that
can often generate optimal or near
optimal results but then we stepped back
and looked at the complexity of the
thing we were we were about to build we
considered well how is that going to fit
in with existing build tools like natal
and maven and great
IV and we realized well we would be
doing one kind of resolution and version
selection maven would be doing another
kind the great would be doing another
kind it doesn't really make sense for
the module system to be doing versions
version selection dependency conflict
management and all of all that really
hard stuff that build tools have already
attacked so we decided and this was this
I realize this is counterintuitive to
many people was countered to intuitive
to us at first but we eventually became
comfortable with it we decided well
let's just not do version selection in
the module system it's the
responsibility of build tools and
container apps and the things around the
platform to put the right artifacts on
the module path so that what the module
system sees is at most one version of
any particular module and that that way
it's just very simple algorithm in a
jigsaw is almost trivial terrifically
it's up it's a transitive closure
computer yeah but that was actually the
question and so I'm not asking to do the
selection but to verify that those
modules that are available magic matched
the constraints given so that is so that
is a middle ground that we have
considered but I think our view is that
so one part part a part of our view is
that version constraints just really
don't belong in source code they're more
properly the domain of build systems I
think they're there is the possibility
and you're not the first person to to
suggest this and we have thought of it
before well perhaps the model system the
resolution algorithm algorithm itself
shouldn't change but if there are
constraints in a module some expressed
somehow it should at least check them
and if they if they don't hold true then
it would just fail I think that that may
be worth exploring but the version
constraints they wouldn't be in the
source code they would say as version
strings can be added when you package up
a module you know perhaps you could add
the constraints that
time to and then the model system could
could validate them later on so that's
that's something worth considering and
and we'll think about it here there is a
microphone just a couple of rows back it
would make it more efficient yes you
could use about Alan to lose some weight
now running up and down well we've
already done several chicks are talks
and mark run run with the microphone
he's looking very fishy yeah it's the
stuff on yawns and weight loss plan
right so um we are still on Java 7 so
you know could be worse yeah okay so
fact is we are you know we would love to
be at eight at the moment but we are not
and one of the main initiatives we are
doing right now is trying to split up
our monolithic applications into modules
we're familiar with this problem yeah
and how we are doing this is by creating
you know two separate modules like an
API module which exposes the interface
and then the module which has the code
and it's exactly what you're doing in
nine in a way in the jigsaw trying to
solve the jigsaw puzzle not exactly but
something on those lines my question is
we have one of our tasks or priorities
next year is to shift to java 8 do you
think we should do that or skip that and
consider adopting java 9 when it is
released I don't know when but do you
think it would be somewhat of a wasted
effort to continue our modular ization
initiative on Java 7 and move to java 8
in the short term or just wait for java
9 personally I would get off seven as
fast as I can I mean 88 has so much good
stuff in Atlanta and streams and
everything else it's just it's it's a
good place to be oh and it's faster too
so yeah I would I would move forward
independently of
any kind of free modular ization cleanup
effort but you know I understand it's it
can be a difficult thing to do in a
large production environment Twitter
questions or my search go and he use on
value types will we see them anytime
soon though they're in eight you didn't
see them oh sorry no they're not in a
tub and they will not be a nine so value
types are being worked on by barring
Brian gets and and many other people in
project Valhalla and openjdk it's it's a
it's a pretty tough problem they've
produced a couple rounds of prototypes
they've dug into a lots of really
complex issues so that that work is is
ongoing it is not slated for nine i
would say bye i hope to see it in a
release after nine so no earlier than 10
but beyond that you know it's software
there's a question are there any plans
to remove the current way of working
with the last pots in the future do like
yeah we're going to take the classpath
out completely by when I'm kidding sorry
it's been a long couple of days no so if
you if you have an application today
that runs on you know seven or eight and
it only uses standard or supported api's
then it must run on nine that's not a
goal that's a constraint if it uses some
unsupported internal api's well it might
run a nine and it might not but you're
already playing with fire on seven and
eight if you're doing that so no click
the classpath will be with java probably
forever so there it is
Carrie you're here wherever we've got
the version selection problem yeah
questions about Jay shell for Robert
questions about deprecation for the
doctor yeah I got a totally different
kind of question I can notice in a
company that more and more we are
putting JavaScript frameworks instead of
j2ee frameworks are that's kind of
things I also here in the conference
there's more and more into our script
frameworks what's your as experts
opinion about javascript is it the
dreadful yama and if not why not
actually this is JavaScript a threat to
java i really have no opinion might well
just ask you know you know javascript as
is the java as cars to carpet it's it's
a it's a different language it has a few
advantages my view it has a lots of
disadvantages for some scenarios it's a
better tool that's okay I'm that's one
reason why we invested in putting nas
horn into into jdk 8 so you know they
they can work well together is
JavaScript a threat to Java I don't know
that's our stuff okay yep you know if if
you can if you can replace a big Java EE
you know application with a couple
thousand lines of JavaScript running on
node on a smaller machine well yeah go
for it but does that mean the chÃ¡vez
you know is on the way to becoming COBOL
no I don't think so there's still plenty
of other areas where where job is going
to do way better I mean in general you
know one of the things I hear from from
people who work in production
environments a lot is his note note gets
to be pretty painful to deploy a scale
because you basically need one instance
or you're perfect for thread on the core
because that's just how it works it's
not yeah it's it's not multi-threaded
and sure you can you there's this little
holy thing I think programming model but
you know that's burdensome to with you
know basically every statement having to
do a continuation passed to the next one
and you know you need a very wide screen
because you're indenting and indenting
and denting all these functions that are
calling back to each other you know
anyway thanks for and random riff do you
would you like to deprecate JavaScript
hello I'm I didn't have a look into
jigsaw so maybe it's a very basic
question but what's the when you build
some artifact that you want to deliver
will it then be an executable or still a
jar file that runs into an external JVM
or big is it I don't know that to do the
executables contain the JVM and it our
chest X Files or what how will it look
like so what we're planning to provide
is is this linking tool so you can link
about bunch of models together and get a
custom a custom runtime image it looks
like a jdk but with a bunch of stuff
taken out so it has a native code in it
it has a launcher in it even a Lunger
specific to your app so you can do it
that way but once you've got this it's
not just one executable file it's a
directory with opinion if the directory
with a bin subdirectory in a lib
subdirectory and so on and so forth you
can then if you want package that up
into something that you for example ship
off to the the mac app store or a
windows app repository and perhaps it's
delivered as one executable but that's
beyond the scope of what we're doing we
have there there's a related tool in the
jdk called the java packager which is it
already exists in jdk a in nine that's
going to be enhanced so it will
essentially it'll be a front-end forge a
link it will use jailing to make a
custom image and that it also handles
the additional work
bundling bundling the result of that up
so the so that you can deploy to an app
store but yeah one could imagine other
kinds of dilute the Liberals in fact
j-link has a plug-in API one could in
theory right a J link back end that took
everything and magically put it into one
eggsy file that you could then deploy we
we don't plan to write that but someone
could well the pet the packager will do
some form of that I'm not familiar with
the details it's all changed now to work
as a jailing plugin and does all the
stripping that the kids you the package
application as it was before but to the
person s ask the question I think party
are part of your question might not have
been about Jay link it might have been
just about just converting libraries
into into modules and how they might be
packaged so if you download the jigsaw
bills and you can you can actually try
out everything everything there there's
a quick start diet you get your going
including some basic instructions with
jailing to try that as well I have a
somewhat specific question and with all
the dependency control between modules
also depend seems within a module
between the packages sometimes very
interesting and we try to build a tool
that checks dependencies between
packages using j depend and we try to do
that with annotation on the package info
and we can't provide a literal for the
package that we depend on we have to
pick a class within a package it would
just be nice to have the possibility to
use a package literal something like foo
bar dot package and have that in an
annotation so i can scan
the dependencies that are allowed or not
allowed that's request I've never heard
before I thought so so so this isn't so
this would be akin to being able to say
foo dot class you can say food bar dot
package hmm and you need this for so
that annotations can mention other
packages okay and you need to yeah and
annotations need to mention other
packages so that you can track how
packages depend upon one another okay
and strings won't cut it for you know
refactoring yeah I did I I can see the
need you that you have I think before
putting something like that in the
language we wouldn't need a lot more use
cases you know a tool that interpreted
your your annotations and treated
strings as package names appropriately
wouldn't be that hard to write I realize
it's not as clean and yes you would
guess you would have to load the
packages that's true i think the word
niche is relevant here um you can do
static analysis of everything that's in
the in the library of the jar file
without actually using any annotations
right yeah well the jdubs tool will also
will also analyze cross package
connections ah there is some ones Oh
excellent is it on apparently actually
sorry I don't think it is on and since
our now at our sound person left
um I have a question about asynchronous
callbacks and the nested callbacks that
you get with heavily asynchronous code
um there is a syntax that originally
came from C sharp and it's now in a
couple of languages including Atma
script 64 asynchronous code which is a
sinking a weight and I'm wondering if
something like that would be considered
for Java as well long term perhaps one
of the things I think is important to
look at post nine is better support for
asynchronous programming in particular
some form of continuations built into
the vm would be a pretty powerful tool
with lettuce too much lighter weight
threads and in fact would allow well
that would allow you to write straight
line code that int that would have the
same efficiency as code that does
explicitly asynchronous operations you
know if we get that far than having an
async weight is not necessarily that
useful but if we decide that
continuations are just a non-starter
than maybe we should look at a synced
out of weight so yeah maybe but not not
a 9 and yeah maybe not maybe not in 10
probably not intent but don't know don't
click member thinking about it at least
oh yeah now the whole asynchronous thing
is really important let me do a couple
questions on Twitter so that some of the
rest of us can answer questions Alan
could you bring the mic back down here
sorry
can you add external jars to the
classpath of a Jay show and use them in
a snippet yes there's a slash classpath
command that allows you to specify any
external jars class files anything you
put on the class footpath you can
reference from the gym shell Robert flew
thousands of miles to answer that one
question well I actually leave it here
for a moment a question for dr.
deprecated er which he actually answered
yesterday in a different session will
the old date and time API be deprecated
in jdk nine and eventually hopefully
removed in jdk 11 or later okay well now
that we have the job of time API
introduced in eight then it's probably
time to deprecate all the rest of
java.util.date and calendar but removing
is quite a different deal right so
deprecation the way I think if
deprecation is it's it's it's a way to
signal to programmers that they need to
migrate their code away or that they
ought to migrate their code away from
what's being deprecated and so in this
case there's a clear replacement if you
have some code that uses date or
calendar then you should migrate to Java
time but what we don't want to do is
take that stuff away too soon because
then that makes that that forces its
it's a little easy for us to say oh it
forces people to migrate their code but
actually it doesn't what it does is it
stops them from migrating to jdk s so
what we want to do is enable people to
migrate the code from the new ape from
the old api's to the new AP is on their
own terms so the only things that we are
seriously considering removing are
things that are that are so dangerous
that there's no possible way you can use
them correctly or things that that
really are just
just useless and simply don't belong in
the platform anymore that nobody's using
anyway and so there there are relatively
few examples of that but but but things
that are old and outdated and have been
superseded generally we're not going to
leave we're not going to take them away
after one release or something like that
because there's too much too much
existing code that depends on them and
it would just cause too much of a
disruption to remove them on uneven
fairly you know even on a couple JDK
release notices or notice of a couple
JDK releases and what java.io.file you
want to add so we looked at deprecating
this some time ago but decided it wasn't
sufficiently evil to deprecated there's
there are many many many things broken
in java.io.file and there's many many of
the methods you you remember we put in a
whole bunch of Java doc into forward
them to the new nao file system to the
where the methods and the api's do the
right thing but we we have not haven't I
have not had any discussion recently
anyway about deprecating anything in
java.io.file there certainly things are
really really broken but what most
certainly wouldn't get to removing them
and like like the double date and time
API yeah probably probably ever but
speaking speaking of that if we had
multiple ways to deprecate things ah we
might we might deprecated java.io.file
in in a gentler way than just saying
don't use this perhaps dr. deprecated er
would care to elaborate right yeah so so
one of the things about the there's a
there's a deprecation Jeff currently
currently posted Jeff 277 if I recall
correctly but basically it proposes
number of enhancements to the
deprecation mechanism and one of the
problems with the existing deprecation
mechanism as it were it's just it's a
single annotation that says deprecated
and there's a lot of confusion about
what that means and so earlier our
moment ago I said well to me deprecation
means programmers should migrate their
code away but one of the problems with
the existing deprecation our deprecated
annotation is it's not clear I mean
that's one possible interpretation or
another possible interpretation is that
this is really going to be removed and
so the deprecation enhancement will
provide finer grained information about
why something has been deprecated and
what action programmers should take in
response to something being deprecated
as well as a disposition of yes we
really do intend to remove something or
no this is merely an advisory that
causes warnings to be issued to tell
programmers to migrate their code away
but not a threat of imminent removal yes
all right what Remy says he wants a
warning at runtime yes that's an
excellent idea and that's something
we're looking at adding because the
current duck vacation mechanism only
issues warnings a compile-time and so if
you have an old binary and so since we
have binary compatibility if you have an
old binary and you run it on a new JDK
that has deprecated some things you
don't see warning so that is an issue
and so yeah so having a runtime warning
mechanism for deprecation is definitely
in the cards just one little thing about
runtime warnings is they can be
disruptive to anywhere that does logging
or does parses the output of some some
program often gets confused by warning
messages so we have to really really
care about doing warnings at runtime it
can't always be something that's enabled
by default yeah we've done that very
rarely yeah definitely be opt-in it
wouldn't be it wouldn't have deprecation
warnings by default
the deprecated annotation is is
preserved at runtime so any tool can
look at it right interceptors whatever
yet that's true but if but if you want
the if you want the vm to issue warnings
when a deprecated method is invoked then
the vm needs to interpret the annotation
right because a static analysis of
deborah kev deprecated annotations will
not discover all uses of the deprecated
method right there are always limits to
what you can do with static analysis I
think if I understand what roomies
suggesting is you you run Java with some
mode and if it loads something that is
is deprecated with a middle morning that
you can even then use that in to bug
whoever owns that code to move it to
whatever the newer API is if I
understand what you're asking Remi ok
another another question from Twitter
reporting an issue on OpenJDK jury is
hard because getting an account is
difficult are there any plans to make
that easier yes we've been thinking
about this for a while when we when we
established the the JDK bug system in
OpenJDK we made it explicit the decision
not to have it open to the world and I
will not not open to the world for
writing this is based in part on fairly
expand full experience we had its son
anybody remember the old son bug parade
you could go to bug son calm and and and
and and anybody could add comments to a
bug report and let's just say the
signal-to-noise ratio was extremely
drawer and if you look at other
open-source bug systems you know for
example mozilla you see the similar
thing there is just tons and tons of
noise because people coming in doing you
know drive-by shootings of you know this
bug is stupid or that fix was wrong but
not telling you why you know just
whining and when a lot of your life as a
developer working on the JDK has
centered around the bug system that this
just makes things harder so I I doubt we
will ever open it up for you know just
arbitrary people to come in and does it
you know sign up get an account so that
they can add their own particular value
or pollution to the book database but we
we've heard this request before we've
been pondering well me of it maybe there
should be a way for for people who
submit submit bugs through you in
through the slow path through its now
bugs Java com do that through the slow
path a few times and establish yourself
as yes you actually have a reputation
for so many good bug reports then we'll
give you a juror account and you
create them directly and comment on
other ones you know and it's kind of the
usual sort of sort of community model
where you where you demonstrate that you
can do well and then we give you more
more privileges accordingly so you know
that's something that the openjdk
governing board has discussed and I I
can't promise when will do it but I
imagine we'll get there and in some
reasonable time frame so on the subject
of bugs Java calm that is the that is
the supported way for the general public
to file bugs against Java and there are
some problems with it people have tried
that experience issues I think the main
issue is once you submit it you get some
number that you can't do anything with
and basically your bug drops into a
black hole and so we are working on some
things we have an internal workflow
where we have some staff who are who are
vetting those incoming bug reports and
then transferring them into the mangy
rat database and so once another thing
we're working on is once that process is
streamlined then the original submitter
should get notified okay your bug has
been processed and now has this bug ID
in JIRA jdk you know 8 19 2 3 4 5 and so
that I think would close the loop for a
lot of things so people would see oh yes
I submitted a bug report and there it is
in the database and then there are also
ways even if you don't have an account
to get like an RSS feed of changes to a
bug so we're slowly working on improving
that so even if you don't eventually get
a jira account there's still ways you
can get better visibility into bug
reporting and we're still working on
those thank you question here
thank you so in the in the context of
project jigsaw does it make sense to
still talk about JC GM eg since you can
build a Java EE and drama any yeah and
the second question sorry one at a time
ok sure totally it totally makes sense
to keep talking about about Java ME and
Java EE as separate things are our hope
and expectation and we've already been
working with some of the e spec leads is
that a future version of EE perhaps the
version number nine will integrate the
the modules feature and you'll be able
to have you know a war file that's a
module or war file that contains module
and ear file that contains modules and
and apt app servers that have modules
and do all the right thing with them and
get all get all the benefits of modules
but II itself you know will will I
expect will continue to be an assemblage
of the web and enterprise technologies
that aren't appropriate for SE the
constitute a larger platform built on
top of it Java ME is becoming more
specialized for smaller devices at Java
ME CDC is essentially being replaced by
SE and that is one of the one of those
sort of seeing the second level goals of
all this modular zation work so that you
can use you can use a subset of se9 or
jdk nine where today you would use cdc
it is not in the cards to replace cldc
the smaller variant of Java ME with any
of what we're doing with jigsaw that was
something we pondered in the very early
days when we started this work in 2008
but it's it's it's just infeasible to
slice and dice the JDK down to the size
is required for cldc applications when
are talking about you know a couple
hundred kilobytes we we can't we can't
go that far if you know if we were
starting over from scratch and perhaps
we could design a system whose smallest
you know where the java dot based model
really was a couple hundred kilobytes
and you have some you know tiny vm that
would work in that environment but you
know for better for worse emmy forked
from SE you'll see a long time ago and
cldc has remained for very very small
application scenarios and i don't see
how to how to unify them at this late
stage thank you and i had a second one
second question in the context of
deprecation understand that you will not
remove features from java very soon but
doing a vision a a time where the
technical debt is too much and then you
have to have a version of java there's
not backwards compatible say version 15
you say you're still using vectors tough
luck yeah that's an interesting question
and i don't know i mean vector vector is
sort of a whipping boy because i gave a
talk which at javaone which talked a lot
about vector and did some poking of fun
ad and stuff but i don't know whether
well so you raise an interesting
question of technical debt and as far as
i can see vector is its own thing it has
its own issues but it doesn't actually
affect the rest of the system and there
are a bunch of things that fall into
that category and so it doesn't it
doesn't benefit the platform enough to
offset the costs and disruption of
removing them so probably fine grain
things like that we'll probably just sit
there but there are other things that we
would like to turn our Oh eye to eye
towards that would simplify the JDK and
so the first thing that comes to mind is
korba so korba is as part of every JDK
right now
and only a probably a decreasing Lee an
increasingly small subset of of
applications use korba and so at some
point we'd like to make that optional
and kind of detach it from the core JDK
and and maybe even when we get to the
point of being able to deprecate modules
deprecated that and say okay time to
migrate to something else this is going
to be removed from the JDK it is not a
coincidence that a veteran jigsaw korba
is its own module and nothing depends on
it yes yeah so so anyway so they're
there they're larger scale things like
that in the JDK where we can if we split
things across module boundaries in a
reasonable way then we can we can
deprecated deprecated them and detach
them and then simplify the system that
way whereas you know things like vector
and hash table and observer observable
it's like yeah they're probably just
going to sit there but but it still
might be put it be worth putting a a
week deprecation tag on them you know
deprecated inadvisable or denigrate it
or you know something like that well i
think the word i've been using for that
is superseded so clearly those things
have been superseded by newer api's so
the Advisory there is for for
applications are for developers to
migrate their applications to use newer
api's but but that's different from the
other word we've been using is condemned
to mean this is going to be removed and
so I doubt that those finer grained ap
is as obsolete as they are will actually
be removed this last part of the
conversation actually has just ruined my
plan to add system don't get orb another
question for Stuart any progress toward
programmatically created immutable
collections
programmatically created immutable
collections okay so quick recap I gave a
talk yesterday on new set of collection
api's which are static factory methods
that produce immutable collections for
list set and map so those are currently
aimed at solving the collection literal
problem so the primary use case is
listing a set of values that are known
at compile time so you can just type
those directly into your into your
source code now there is a a certainly a
use case for some the result of some
computation to result in an aggregation
of values that you eventually want to
put into a into an immutable collection
and so we support that only kind of
indirectly and not very well which is
you have to accumulate them into an
array and then call one of the array or
varargs consuming factory methods to do
that and I realize that's inconvenient
but if you look at the number of
different use cases where you might be
computing something well should you you
know then it opens up the problem quite
a bit more so you might say well should
take a collection should take an array
should you you take you know something
with a functional transform or something
and well really what you want to do i
think is create a collector that you can
put on the end of stream that will
collect into an immutable collection and
i think that's a fine idea but just sort
of in terms of keeping the proposal
minimal we've decided to factor that out
initially one of the issues is that in
in that collector the collector
interface is not actually rich enough to
do that efficiently because size
information does not get propagated to
the collector so that's something we've
talked about on and off internally when
we enhance the I think it's something
we'll continue to look at but that's not
going to be it's probably not going to
be in the initial initial version of the
the collections API is in 9i i do think
longer term you know and is again again
longer term peering into the future post
nine or well post nine
I wouldn't be surprised eventually to
see an immutable collections API in in
Java we've been following the work done
in systems like closure and and and and
some of the Scala work on immutable
collections some of those algorithms are
really interesting there do they don't
seem quite advanced enough yet in terms
of performance and ease of use to fold
into Java but I think they're there
probably is a case to be made in a few
years time for true true immutable
collections in Java with you know in in
the style that you find in enclosure but
that's it again that's a that's looking
at a crystal ball it's certainly not a
promise well hang on hang on that Mike
is not on sorry just sorry just wait
please that microphone is off and we
don't know how to turn it on yes why not
just accept a collection instead of an
airy as an additional API method well
basically we wanted to keep the API
simple and focused on solving the
collection literal problem I think you
know taking a collection is kind of an
obvious extension but if you do that
then so why did you do this instead well
we could add this we should add that
instead I think I can you know I think
you you can you probably have a bunch of
good ideas I have a bunch of good ideas
about things i could add but in order to
get something into the jdk successfully
we just have to cut it off at some point
and say okay here's here's a minimal API
that satisfies a certain set of use
cases fairly well and and then run with
that I think that's quite a quite a
likely possibility for a future
extension is to have something that
takes a collection instead of an array
question from Twitter any progress
towards operator notation for numeric
operations on non primitive numeric
types so we're kind of running up
against against this in valhalla if if
you can define a value class that could
be used for say a 128-bit integer or
some you know if it's um bigdecimal type
that's represented in a very compact
fashion gosh wouldn't it be nice to be
able to write x + y and instead of X dot
add of why you know a Java is famous for
avoiding operator overloading
intentionally in the very early days and
we've and we've stuck with that I mean
it sorry avoiding custom custom operator
definitions but yeah maybe user-defined
operators are something that that are
worth looking at in the context of value
types but if we do that I suspect they
will be limited we do not want to see
the kind of abuse of random symbols that
you find in languages like C++ or i
should say the library is associated
with c++ c++ itself as a language
doesn't necessarily abuse them the
questions in the room gentlemen there
thank you java lucas being quite stable
over time and i find it quite useful to
have documentation close to the java
source at least some technical
documentation but it's not very well it
doesn't have a lot of features and
because of that for example now company
we more creating the commendation
outside of source code and I have a
question whether you gonna evolve some
hell javadoc or are we going to evolve
Javadoc well it's it's certainly
evolving in nine so
javadoc is becoming aware of modules and
and its output is now structured so that
you can look at just the packages in a
module and select that way and the page
for any given class tells you not only
what package that classes input module
it's in Thank You Javed I the javadoc
search we've implemented a a JavaScript
search function so if you if you
download the pileup Javadoc HTML for a
release under your local machine view it
in your browser there's a search box and
so you can search around using that deep
deeper enhancements so I have a patch on
my laptop that allows me to write Java
doc comments not in HTML combined with
with these funny add tags but in
markdown markdown ask a doc whatever
yeah it would it would be nice to have a
more modern markup language than the
HTML and and in line at tags there's
just a patch on my laptop you know it
was mostly a proof-of-concept I you know
it it works kind of okay it's it's it's
certainly not slated for any particular
reason to release at the moment but as
someone who writes a lot of de lot of
Java doc I would dearly love to see a
better markup language I think that
would be a huge improvement I don't know
if you had other kinds of improvements
in mind or
the current state of javadoc is just not
enough to write our technical
documentation in the source code I know
maybe maybe to have the possibility to
collect the documentation not only on
the method level but inside the source
code is well maybe to have additional
files I don't know javadoc can already
support additional files so they'll get
copied over and if you know it doesn't
take much to create links to them going
into the source code that seems kind of
outside the domain of Java doc as as its
presently conceived but you know when
one could hack the standard doclet to
make it do that why not imple note sure
thing come back to it thank you can you
tell me how the modules for the UI
toolkit sanjana the cut it yes there's
one module it's called Java desktop
there's another collection of modules
whose names begin with javafx I think
there are seven of them and and yes
WebKit is in its own module so for swing
awt and 2d as we were you know slicing
through the bowl of spaghetti trying to
clean things up over the years it proved
just too difficult to try to disentangle
them they they really are one large
subsystem so Java desktop is all of
Swing an ADA a WT plus some some beans
utilities things and data transfer sure
no data transfers its own module data
transfer is fine yeah refactor you know
FX being a a newer system with a better
fundamentally better architecture was
less difficult to modularized and
modular eyes and we worked with the FX
team to create a nice set of FX models
so depending on what you need you can
choose you know all of them are just a
couple of them and if you want to leave
out WebKit which is gargantuan
then you can do that and if you tried
the jigsaw early access build the DFCS
modules mr already linked into that yeah
and i think we want to come back to the
Javadoc and just talk about the tags
sure yeah so yeah back to the Javadoc
topic so there there's a small feature
that crept into Java 8 which is you may
have noticed if you look carefully that
there's these new sections in in method
documentation like API note
implementation specification and
implementation note so so well they
without going into too many details
there was this problem in the previous
Javadoc version which was if you had
subclasses they could either inherit the
entire an overriding method could either
inherit all of the documentation of the
method of its superclass or none of it
and so since often a subclass would want
to implement arat part of the
specification like the contract part but
separately talk about a different
implementation that it had this ended up
causing the documentation to be copied
all over the place and so these tags are
first attempt at trying to separate that
out in particular separating
implementation documentation or actually
the implementation specification from
api specification and I think the
forcing function for this was the
addition of default methods where we
needed to specify that this default
method actually had this behavior that
subclasses can rely on but that would
not be inherited by things that overrode
it so I don't know if that counts as a
javadoc enhancement but it's something
that that in looking at the existing way
that javadoc interacted with the object
system and inheritance of java the
programming language there was this
mismatch and so we that's that's what we
added to try to solve that I think it
helps a little bit
from Twitter is it possible in the
future that the module Java base will be
split itself into modules well that
would be awkward what would we name them
is it possible yeah it's possible is it
likely probably not if you start in
java.lang.object and you do all the
transitive closure you actually end up
with and do not do any splitting of
packages then you end up with almost
exactly what you have a basis now yeah
it's it's we think it's pretty much as
small as as it can be on a practical
basis the further change would be a
different platform right the only thing
that can be taken out without splitting
packages is actually the API is related
to TLS but they're so useful and so tied
to go to applications that that's the
reason that's in and the base module
yeah
so mark I think you mentioned in the
session on Tuesday that part of the
module in system was to improve uptime
improve the store the startup time for
uh for JVMs and I didn't really get how
how this happens is because there are
fewer dependencies now or if you could
elaborate on that please so startup time
in jigsaws actually worse at the moment
but we're working on it you know when
you have to do resolution and read in
you know module info class files and and
and all that there there's more work to
do but we have we have some some work in
progress that will get us back closer to
jdk a level startup times in terms of
improving startup performance there
there a couple things there are things
that we will do as part of jigsaw in
nine that will help or we are already
done for example moving away from RT dot
jar you know is in so far as an
application can move away from the slow
linear search of the classpath we have
this very efficient internal format for
modules that has replaced RTR it does
not involve linear search it's it's it's
very fast and that that's helpful some
implement a some some optimization
plugins that we expect not necessarily
promised to ship in nine ours are for
example a pre verification plugin that
would run the run the bytecode verifier
on your class files as part of making a
custom image so that the bytecode
verifier would not have to run at
startup and you know the bytecode
verification for a large application you
can actually be quite significant when
you're looking at something like
NetBeans that's going to load thousands
and thousands of classes just to paint
paint the first you ice cream that that
can be a significant improvement
longer-term we are we're attempting to
enable other kinds
optimizations that will either be
additional kinds of plugins to the
linker or or perhaps entirely other
other tools things like ahead of time
compilation application specific class
data sharing which is a feature of
hotspot that lets you load up a bunch of
classes and then persist the in-memory
data structures to a file and then
memory map that file and later for
faster startup so jigsaw we hope jigsaw
will bring some modest performance
improvements in terms of startup time in
jdk 9 and also that it will it will
enable some more significant
improvements you know perhaps a 9
perhaps in 9 updates or future releases
or even you know products created
outside of the jdk ecosystem actually
just connect yeah just coming back to
start up being a little bit slower with
the jigsaw bills yes it's a couple of
milliseconds slower for things like
hello world but if you even try it even
if you try the early access bills now
with a long class back put 500 jar files
on your class pipe versus 500 modules
versus linkedin you'll actually see the
difference in start up pretty quickly
because we've done quite a bit of
benchmarking to to understand that
problem we have a minute and a half left
but that in doubt the diabolical
developer thought he was on the banned
list here hello this is hopefully an
easy one I notice there's a gyp where
the new graphics renderer might be
coming in the java 2d to replace Pisces
yep there's a really interesting little
note which said Oracle may consider
having this replacement also be Oracle's
the Oracle JDK is replacement for the 2d
rendering which would get OpenJDK even
closer to being one hundred percent of
Oracle's JDK that's essentially you can
comment on um it's it's work in progress
I don't know where we are
with a state of evaluating it just as
background for those who don't know when
Sun open sourced the JDK we made the
decision at that time to retain the
proprietary renderer which you know son
had bought from from some other other
company for use in in the JDK in the
early days we made the decision to keep
that because its quality was much higher
than Pisces which was the open-source
renderer that some some Sun engineers
and some and some people outside put
together based on some open source code
you know and partly because we have
there there are customers who are
extremely picky about how things are
laid out and how fonts are rendered you
know how pixels appear and and and we
knew they would be upset if if we just
switch them over to pisces this this new
render Marlin it does look a lot better
I i know that some some engineers and
Oracle's graphics team are looking at it
they're helping with the integration I
don't know if and where the evaluation
is I do agree it's it would it would be
a good thing you know for for Oracle to
just not have this weird proprietary
renderer anymore so all right the
monitor says times up thank you very
much</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>