<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Continuous delivery @ Axians with gitlab and openshift by Frédéric Pape | Coder Coacher - Coaching Coders</title><meta content="Continuous delivery @ Axians with gitlab and openshift by Frédéric Pape - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Devoxx/">Devoxx</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>Continuous delivery @ Axians with gitlab and openshift by Frédéric Pape</b></h2><h5 class="post__date">2017-11-09</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/ONZqRIn640Q" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello everybody welcome to our session
on open shift and since we are talking
about open shift I thought it would be
cool to have spring booth application
deployed and OpenShift which is serving
our application but it's not available
yet so let's fix that first readable
so what I will do now is just process a
runtime complete from OpenShift it will
create the necessary things to get to
the person presentation up and running
just to prove I'm not cheating so
there's nothing else no services no
deployment conflicts no bill convicts
also in the UI of openshift nothing to
see at the moment so let's start sorry
ok
okay in the same UI we see it's
refreshed and the service is started it
should be hosted on a port we can dig
down into the teapot and just see the
output and we see that here in the
button the application started just to
be sure the application starts so now we
can do save to the presentation refresh
okay here we go
screen load okay so we will be talking
about CI CD with lead lap and OpenShift
attack scenes how we are doing it the
presentation I will push it to my github
account which is just my name you will
find me on github so that it's available
for everybody okay demo time we had that
ooh Thank You Murphy I'm saying week so
in the if OpenShift stated in the rest
of the presentation or mentioned we
actually mean opposite container
platform because that's the official
name all right and since this is a call
it a partner talk I'm going to do the
commercial stuff yeah just to introduce
me quickly and so I'm already for 13
years at Auctions well at zoom that's
the longest time I could be because I'm
not old enough I started as a Java
developer yeah just some technical eat
and then doing some solution
architecture and currently I'm lead for
our industrial software solutions which
is a core activity for for Russians and
Belgium yeah and of course if I'm doing
and I'm doing an history I really like
industrial IOT
and yeah we are really a company that is
doing industrial IOT all the time so we
are doing real projects and real cool
stuff with IOT how to apply it
see you back okay about myself
I'm since 2001 in the software industry
I am since 2006 a taxi ins I also
started as Java defiles a but then I
fell in love with groovy and currently
I'm exploring cotton in a bit okay
I'm just overall passionate about
creating software but also delivering it
and that's what will be shift and
continuous integration delivery is all
about so why do we use CI CD ataxias
because we don't like bugs everybody
does like this so a commit should be
properly tested every commit should be
tested but also in automated manner okay
on the other hand we want to automate
the deployments to minimize human errors
everybody made mistakes during the
points so if it's automated you run out
another important thing is that you can
keep track of what is deployed where and
when
then our customers they want fast
results okay but they still want to stay
in control of when something is get
deployed in production so you should be
able for certain customers that you
don't do it fully automate the whole way
- until in production okay so the tools
that we are using at accion's the basic
tools that we are using for this topic
or get lab OpenShift and artifactory
from j-rock okay let's start with
artifactory for the guys who don't know
it's it's an internal proxy it's not a
factor forestry we serve it as an
internal proxy for all the Gradle and
ampion artifacts
so it's an artifact approach if I
mentioned that already it's also over
internal reports before the project that
we deliver build artifacts from NPM or
Gradle
okay it's also serving our Duggar images
for spring boots on the other hand and
for the gate lap runner the premises on
your hands
okay let's move on to pit lap github is
mainly used no company of course as a
version control system it has nice merge
requests or pull requests if you're
familiar with the github or bitbucket
tools is the same thing it has a really
nice integrated CIN CD pipelines and
integrated with the merge of guests and
all the rest of the system and it has a
nice support for pipeline as a code also
so you can do it in the mo configuration
in your bit repository and if for
certain branch additional steps jobs are
needed you can do that easily okay and
of course we have slack integration okay
let's go for the demo sorry
so this is the actual presentation also
that is hosted on our gets all of the
basic things that you have everywhere so
you can see the overview of the project
its can parse asciidoctor and so on and
see some activity calm it's not that
interesting but if we go to see ICD and
we had four pipelines
you can see when I was creating this
presentation so it's also gone to the CI
CD pipeline so over here you see the
different steps on the pipeline the
different stages they are hold and then
each stage you have jobs that can be can
be done so compiling performing unit
tests I didn't write unit tests for a
presentation sorry the property of
integration for example okay for demo
purposes I just prepared a simple merge
request who isn't doing a lot if you see
if you started with the work-in-progress
name you see it isn't possible to merge
it into the master branch in this case
because it's still marked as work in
progress but what you can see is that
over here it has already been into the
CI pipeline and it has been completely
successfully completed the compilation
and verification phase okay
so how is this down in the pit lap yam
oh wow
I will just take snippets present
snippets from from that file over here
so you define an easy way your different
stations stages sir
and then you define different jobs that
need to be done a job is attached to a
certain stage and then you can just like
you would do on any Linux machine
machine execute some oak sorry execute
some commands and we don't want it to
fail of course but it is possible to set
it to true if you want it to be
available
okay so in the verification phase we'd
perform the unit test just the same
thing but what's also interesting is
that you can record artifacts for
example we know that the J unit tests
will be in that directory so if it felt
it will record the artifacts produced
that that you can review it in the admin
tool okay that was forget lab let's go
for shift
time for a commercial break okay guys
let let me take five minutes of your
college you're at this interesting time
I have I want to show you is a number of
college things we are doing at the
attractions and one of the first things
I want to show you is my stuff it is a
product which is being developed at our
as a project at our premise in essence
it's basically a planning tool for
medical soft things so as you might know
a hospital is a very busy very cozy
environment due to run there are a lot
of people that are involved and guiding
or serving the medical treatment and
proper planning is a very essential to
them so my stuff really helps and
planning all this medical stuff and in a
correct way now what is my stuff it is
it's not a traditional planning tool
it's not like a excel and in which you
include a number of people and then just
put them on our online calendar
no my staff goes a number of steps
further it includes like parameters in
which you can say okay these are like
for a roster for a planning roster these
are like the minimum things I really
would like to do include for example I
really want to always have like a doctor
with a certain level of expertise
available during night shift I want to
have like a minimum of nurses available
for specific needs for for for my
patients so these are are really
parameters you can specify up front
before doing your planning secondly is
also look at your team we include like
the feeling or order the requirements of
the team when people would like to have
all the days when people want already
working in shifts for example doing a
night shift well that's that really is
yeah harder than doing a day shift
you're just making sure that when you
have done a night shift you're not have
to do a day shift
directly after it so and again including
this kind of extra variable second or
third one is the non-intrusive part for
the planner so basically a planner and a
traditional way of working issued like
think and all these kind of variables
including okay yeah but I have to make
sure that this doctor is there and I
have to make sure that this guy is in
holiday and secondly this shift for this
planner for this medical stuff well
that's hard for the parameter so we want
to make the tool my stuff to be as easy
as possible for for the planner as well
yeah and last but not least of course we
need to find like the optimal planning
respecting all these variables all this
disease rather to find you of course EDD
optimal planning so my stuff again is
not a traditional planning to as a
planning tool that wants to find the
optimal planning for the medical staff
teams so they have like the best the
best planning that is available giving
in with it with respect to the
parameters that were set up front and of
course things can happen last-minute
things like illness things like peak
loads that happen due to an external
these are so that for example happens
well last-minute planning or at least
finding the impact on your planning is
important as well so my staff really
includes this kind of features to cope
with this last-minute changes and
respect again to decide route to all the
variables how does it look
just some screenshots I want to share so
this screen really includes like all
your team members so basically the
people the members of your hospital and
on the right side of the screen you can
see all the call it requirements or
requests from the member or from the
people itself say okay I have a holiday
on that one I have this I would like to
work on my chest I would like to work on
on day shift so basically this is the
one part of the input
then you have like a proposal of the
planning saying okay this is like the
planning roster so including all the
variables this is the results of saying
okay at yeah the the at the first ship
Lilly on Sunday has to work and then and
so on and so on and the third one is
like having the personal calendar and
because you got planned by a planner but
secondly you also want to have this
available on your mobile so having a
personal work calendar available this is
also a functionality which is available
within my staff so always your medical
staff is always up to date on the latest
way how he has plans
we're or at least how he is expected to
want to be expected at work so let's
continue to you the interesting part
again thank you
okay back to OB shift at accion's we
have roughly 15 projects and Counting in
powell for each project we have four
environments this is quite
time-consuming for system admins to set
up and maintain all these environments
and their databases etc so OpenShift
makes it easy for the seasons to add
extra notes if the capacity isn't enough
with the current notes an important part
for the customers and for our us
developers is that there's environment
isolation so that's within a certain
project an application cannot connect to
a database over production database if
he's not allowed to do
of course for the customers need it's
interesting that it allowed load is high
on on your application that's some kind
of auto scaling is provided and if a new
version will be back fix or a new
feature comes that it's rolling
operating that there is no time for the
end user in the case so of course Red
Hat is supporting open source and
enterprise support for hope and shift it
has a cool weapon trace as you have seen
and evening Lucy Ally this is a bit of a
skew art it's a lot but mainly what we
how we do it in in action in actions is
that we have a development project on
the left side and then a runtime project
as we know call it or right side one for
integration one for queuing in one for
production ok in the runtime project you
have the pot the pot is a kubernetes
term for a docker container who is
running or not running could be their
own guilt a pot contains a spring good
application a database server everything
that you want to put in it can be
deployed to a docker container or a pot
and for example exposure sports for the
spring with applications this is
commonly 8080 or ATV 81 ok and pots are
steered down and spin up at the will of
openshift so if on one note the load is
getting too high or the memory is Shawon
shorts it will tear down parts from one
nodes and spin them up on other nodes
and this happens without the notice of
going having any downtime ok that's what
the next one is the service ok services
are in fact little balancing the traffic
to the underlying paths so you can say I
want to have four of my spring good
parts
two of my database parts and above that
parts you will have a service with the
abstraction and it was dividing the load
to the different than the line notes
they are also used by the pots to
communicate to other services so you
will not never have have one pot
communicating directly to another pot
you communicate via the service so you
don't have to know the exact IP address
of the pot because it can change all the
time and service can be exposed to the
outside world via routes that's what you
see and how's this demo is presented at
the movement okay the key part now is
the deployment config for the runtime
project the hardest one to understand
also okay so the deployment config
basically is the configuration and the
gatekeeper for the paths so that the
pots are correctly started the number he
knows all about the pod configuration so
he knows which ports are exposed and so
on you know how many replications there
should be done how the update strategy
should be done rolling or not rolling
what the resource limits are I'm an
American each pot half and so forth and
of course very important also he has
notice of howtechs he will know the pot
is not behaving correctly he will shut
it down
and spin up a new one and it also links
to an image stream and an image stream
is I will get it links to a new string
tag that's also visible in the handle
link over here I will get to that in a
second what the image stream tags are
okay let's go to image streams
image streams I are kind of hard to
explain but the best thing I came up
with yesterday was a goodish thing for
docker containers so on each new build a
new comet is created and attached to the
image stream and commits are taggable
you can for a certain build tag that
commits and say this is my version right
now and that's how we are deploying
different versions okay and in this demo
I just want to show you some key parts
of the open ship template I processed to
create this application to get life okay
so in a template is the ammo
configuration you say we have a template
over here and then you define different
blocks so we have one from deployment
config you see also that you can use
variables or parameters in this section
and these parameters are then resolved
and you can specify them so you can
create in fact what we are doing is we
have 110 template who is used by and
it's kind of like this one for all our
runtime projects okay so we have one for
services also on a root for example and
then fill the variables you can say okay
I want this to be available on that URL
okay let me just show you open shift
in the beginning of the presentation I
did this by the command line but you can
also just paste it over here and just
create this process the template this
template and then you see the parameters
I have listed I can change them you can
specify default values for its and then
if you push create it will be created
but I will cancel it otherwise my
presentation will becomes okay back to
get lap the pipeline's code now the CD
port to continue the live report exactly
the same again
yeah it's attached to a certain stage we
are over here building our spring boot
application sorry
I think it's terminal for some strange
reason and then what we are doing is
over here starting your segment with
start builds we just push the produced
char from the Gradle to our image stream
okay the result of that is that a new
commit is added to our image stream and
on the next line on the next line we go
tagging the latest version of that image
stream with something that we can use in
the in the future what is not even good
applet is that you can say I only want
this to happen when attack is pushed for
example to get the system in this in
this way we make a difference between
countries delivery and content
integration so attack is a trigger in
our repositories for release and then it
will go into the release pipeline also
otherwise it will only be the contents
integration part of the pipeline
okay deploying to integration it's very
simple it has nothing to do with Gradle
anymore it's just the you say or say
command to attack our commit tech with
the tag and the moment that happens the
deployment config
my in tech has another as link to
another image I need to change my
deployment and my pots will be pinned up
until down QA exactly the same as ants
but what is worth mentioning is that in
some cases you don't want this to happen
automatically you want this this duel
and then in dy you need to push your
button to say okay deployed this one to
QA plays exactly the same for production
all right time again for a commercial
one the second reference I want to make
is in the area of in our industrial
space so the company is called salt
orange bar she basically what is the
company it's it's a company that is
doing heavy foundation workings and we
got in contact with with this company I
think more than more than a year ago and
they asked us yeah okay cool we are
doing a lot of big projects but we have
a challenge to really follow up the
progress on site so okay doing progress
and size length sounds like project
management don't you have any tools
threat yeah but we're in construction we
are not the area where a lot of call
advanced tooling currently our tool is
called Excel to do the project flows
like okay yeah why not
now they also said to us yeah but really
we would like to have like some software
that helps us to do the project
follow-up because we have like rather
big project in Hong Kong
to to follow up and also the level of
quality required is a it's quite high
also according to to our standards and I
said okay let's let's see what what we
can do now the challenge was for them
and so in Hong Kong you know there's an
airport fairly close to the to DC border
but they want to expand it and the
company sold - will expand one of the
runways but the challenges the runway is
actually in to the sea so there call it
mission is to create a foundation for
the runway into the sea and to give you
a visual look the drawing you see over
there so that's just a part I think this
is 25% of the total work to be done and
every orange block you see is really a
pile so piece of foundation they have to
make now when total they have to make
like 63 thousand or 67 thousands of this
kind of drilldowns and they really want
to have like a tool to say okay where
are we in this level of and in doing the
entire project and for each file we want
to have like a level of details so this
was our call it first challenge we got
saying okay how can we do the follow-up
how can we call it visual also make it
clear to the to the team leaders or to
the project manager on site but also and
the office in France how what the
project of their status is so as you can
see in the drawing some parts of most of
the parts are still orange but some of
them in the upper upper right corner are
already done are already green so this
is really a life well it's not real life
but it's a screenshot from a live
application as well so this is to do
they're like the project follow-up form
for each pile a day you have to drill
secondly they really have to show or
proof how the pile the foundation was
being done and this is yeah this is very
specific to
to their business of course but they
need it for each pile they needed to
supply some kind of certificate okay to
these days they or in previous project
they just used Excel and they used some
kind of advanced were words which macros
and stuff like that to have like AHA
this is the measurement this is like
your quality report of the job being
done but for doing this for more than 63
thousand files well it's not very
scalable so we developed an application
which can really integrate with the
machine itself read out how how the
operation was done and make a report
from it so this is one of the results
you see I don't know how to interpret
this kind of values but at least this is
really what the Hong Kong Airport
Authority expects say ok for each pile
for each piece of foundation how was it
drilled and secondly they or turtley
they also want to have like more
aggregated dashboarding functionalities
to see how how the machine was
performing how really the soil is
performing because the soil is very
important for them because oil
foundations they give you stability if
you have a runway you don't want to have
like bumps into it of course and these
kind of insights this kind of dashboards
really help them and to call it
exploring the foundations or the
stability of the the foundation themself
even if the dayal order already on site
so this was a second example I will now
give back the word to Fredrik
okay back to develop and OpenShift
attack science so what was the trick to
make it that easy to deploy
automatically applications from the trap
to overshift one of the tricks is that
the github runner service is deployed in
the openshift environment itself and the
runner service can spin up recruits who
is who are doing these jobs in the
different stages on demand so if I
commit new version automatically a pot
must spin that we up we spin up with
doing the task release my or build or
test my my application and the second
important thing was that the runner
docker images have the open shift
command many tools installed so it's
possible that in your get up here on
file you see oh see a tag or also a star
build and then the rest is piece of cake
in fact non-commercial break from the
Audis so Frederick's really showed you
and the in the previous slides how you
can be basically start from code to
deployable but also make sure that this
deployable is like quality guaranteed
because we started saying we don't like
bugs at least we want to know if there's
a book if there is a test that is
failing we can stop it before we enter
into production but also secondly this
is a CD parser continuous deployment
part that we can like have automatically
set up this kind of environments so we
spent quite a lot of time in
investigating this kind of two links yet
they may might sound simple having just
three tools and OpenShift artifactory
and get lap just combining them but yet
we believe that
we have at customers we see that it's
still a challenge and therefore we
created what do we call the actions
cloud it's an open cloud in which we
really want to share the insights we got
to do CI and CD and we make it available
for anyone for any customer for any
developer who really wants to have like
a managed a hybrid cloud solution so it
means that yes it can run on on our
premise as you as was demonstrated on
the presentation today so it runs on a
public cloud offers infrastructure from
a technical point of view but yet we can
manage this for you just to make sure
that the application that are running in
a containerized manner or in a
virtualized manner that are managed and
really up to date as well it's dedicated
to container platforms so also dedicated
means that it's it's isolated for your
kind of projects so that means that yeah
if for example our projects while we are
not interfering with with with your
projects that are doing that now these
days quite important definitely coming
with new legislations and third one is
yeah you saw a lot of jumbled files and
a lot of coding well for some for some
it might be like a challenge to say okay
how is how is this is really
interconnected while we can manage we
can help you and and there's one as well
in and making like DevOps real how and
making DevOps realistic for for for you
guys
we like open source but yet we love to
have like enterprise stability and
that's really why we chose to go forward
with a partner from us called Red Hat
Red Hat up with shift container platform
is really like the engine for us to
build on and this is also why we have
like artifactory and get lap as well
which shells are which are also
supported by commercial commercial
companies do you really provide this
enterprise great support as well at the
end we believe that the actions cloud
will be more cost effective really
really if we compared to like Tim Turing
is like scalability if we see like the
projects we are shown today the two
reference cases I will show today they
really like are dynamically scalable I
know it sounds like hocus-pocus
oh yeah auto-scaling it really works it
was like the first platform in which we
saw that it really works it scales out
and an effective manner and us kind of
effective manner you also see this
reflected too at the end there is a bill
you also see it on the bill and L like
is a certification nowadays for the guys
that know the 27001
is a norm well that's basically a
quality level for IT systems focused on
security the actions cloud is really
ready for this definitely coming with
the upcoming gtp gtp our latest
legislation it's important to also be
aware that the cloud you put your you
put your data your information and that
it is really secured and can be kept
secure along the way definitely coming
with upcoming hacks so as a closer so
who is actions as a summary first of all
you should know that we are part of a
group group finchy some of my you might
know it as a Vinci parkings well that's
one one part as well
but we are part of the Vinci energies
department we are an international group
so we are if you are talking about
headcount well we're rather big but yet
in Belgium we are like a normal company
I guess 35 developers that are really
focusing on doing tailor-made software
solutions like the two cases you saw
before and doing consultancy like
Fredrik is doing for opf truly helping
customers and implementing the CIC CD
strategy
we embrace open source we always used
Java open-source technology but yet we
see the benefits of using enterprise
open source stability and that's why we
are using a lot of Retta technology and
building our solutions but nowadays we
are also focusing on like asier
microsoft azure IOT because we believe
that they are also following the same
technology we are a premier partner so
that means that well it's a strategic
investment we use a lot of Microsoft IOT
and like the project you saw before from
solo tache
it runs on Microsoft IOT and the data
platform Cortana behind the scenes and
like Fredrik mentioned we use a lot of
spring a lot of Gradle technologies so a
lot of great technologies so nearby I
would like to conclude our presentation
if you would like have questions please
shoot we have a booth downstairs we have
like this Lego minifigs actions
brownette so just just come over to grab
one for the kids or for yourself it
doesn't matter so thank you for your
present thank you for your time
and questions</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>