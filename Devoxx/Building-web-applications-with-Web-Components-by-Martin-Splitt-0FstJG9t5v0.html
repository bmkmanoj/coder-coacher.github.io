<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Building web applications with Web Components by Martin Splitt | Coder Coacher - Coaching Coders</title><meta content="Building web applications with Web Components by Martin Splitt - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Devoxx/">Devoxx</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Building web applications with Web Components by Martin Splitt</b></h2><h5 class="post__date">2017-05-12</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/0FstJG9t5v0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hi good all right wonderful let's get
started so that we are not running over
time so today I'd like to talk to you
about web components and if you have
been here two years ago you have
probably maybe possibly also heard me
talking about web components and so it's
interesting that I'm coming back to talk
about the same topic kinda but it's kind
of not the same topic because a these
standards have changed a bit and B I'm
gonna not only give you a quick
introduction into what web components
are and how the latest standards work
but also we're going to build a small
application with it to show you how it
actually like looks like when you do not
just a component but an actual example
of using the component so to start with
we're going to look at the web
architecture in 2017 what's kind of like
state of the art and what do we get when
we look at applications from well today
and then we're going to have a look at
the web component standards and this is
going to be the updated version of what
I did two years ago because two years
ago it was version zero of the
specification so back then Microsoft s
are not Microsoft Mozilla and Google
agreed on how they think it should look
like but there was still disagreement
with Apple and Microsoft these
disagreements have been resolved in July
last year and since then we have that
components version 1 which is the ready
specification implemented in most
browsers or going to land in the others
soon then we're going to build a
component together a really small one
not a very fancy thing but just to show
you how the standards play together and
then we're going to have a look at how
components kind of intersexual e I
change the order but doesn't matter so
we're going to also look at how
component interfaces would like each
component interfaces with other
components and then we use that
knowledge to build a small application
from different components one of them is
the component that we build the other
ones are basically things from the
internet so we don't have to build these
ourselves and then I'm just going to
summarize it so um yeah right the state
of web applications in 2017 is
different from what it was ten years ago
and two years ago and one year ago but
it's still depending on how you look at
the web applications that you're
building it is more or less a mess it's
just that's not necessarily a bad thing
because the web is a very resilient
platform so depending on what your goals
are being messy is okay if that does not
break fundamental principles of what the
web is about however if we are looking
at markup these days which is what the
web is who knows what application this
is it's a web application I'm sure
everyone here has seen before right who
here uses Gmail hands up that is Gmail
obvious right I mean I can tell from I
mean DK obviously I class decay that's
obviously something from Gmail so I
think it should be more like this that
would be nice that you have like okay ha
this is the Google Mail app and it has a
sidebar with some stuff in and then it
has the email list and in each in this
list each item is the email threads with
some ID that doesn't matter to me as a
human and then we have emails in the
email thread and they come from
somewhere and go to someone and they
have like a subject and then they have
some content and I think this is nice
because it is readable it is
understandable it is semantic so if I'm
parsing this as a Google bot my okay
hopefully Google BOTS will not like scan
my email inbox but let's face it Gmail
does um but but I mean if this is a
website if it's a web application and
this is a forum it would be really nice
to have like a possibility to express
this in a semantic way that this is a
thread with different postings and the
topic and also sorts of things so I
think the semantic markup here is
actually much better and it is easier
for a lot of users also composing
applications like this so for instance
if I'm building a different application
but we have a general I
doing this to something-something thread
and something-something list then I can
take it for other applications as well
and also yes I like JavaScript I've been
using angular and react and what else
like I didn't actually use it a lot of
Muji as recently so javascript is nice
is great for us web developers but we
are forgetting a gigantic amount of
people the web authors a lot of people
have started on the web by literally
just using HTML and putting some content
together and I think this is a beautiful
thing because you can not just the
documents as it could do it ten years
ago with HTML but you can a use app use
it to build applications it's a gigantic
application platform and we should not
limit it to like having people learn to
like write intentional or I'm actually
missing the word imperative code I think
the declarative model of building
applications is really nice as well so
to do that whoops what was what was that
I think the battery is dying so that's
going to be fun umm good so to do that
what we need is we need semantic
building blocks and the interesting
thing in 2016 15 ish we started to see
that a bunch of frameworks independently
of each other have an epiphany
a Eureka moment where they went
components that's nice react has
components and angular 2 has come
angular 4 as well as components and
probably angular 10 as well um I think
we are at 12 now aren't we um angular
has them ember has them few has them or
really a Jas has them pretty much
everyone said you know what they
probably a good idea is to step back and
say we have components that are isolated
more or less and they communicate to
each other with a certain interface and
one of the things would react for
instance was that they had this other
breakthrough weather and this entire
like event thing is actually bit messy
over time so how about we have like a
unidirectional flow
and that also works really well with
components because components basically
change the state through actions and
then you feed that back and that's
really nice
so components is a concept as a concept
as a general concept is something that
is larger than all of our frameworks
however the components have not
necessarily been interoperable with each
other I have a hard time getting an
angular application working with react
nicely there is possibilities but it is
like how do I put it if I need to have a
45 when I talk about how I make these to
work together that's a bit it should be
easier and we also basically ignoring
all the Dom API and all the things that
HTML partners do for us already so how
about we use the platform rather than
try to put ourselves as far away from
the platform as we can and that's what
web components are about and web
components when we talk about it is
actually a set of four standards and
we're going to look into the standards
the first one is actually really well
supported down to it an extra 12 I think
which is the first edge the template
element allows us to say I have this
part of markup that I do not want in my
application right away but I want to use
it as a kind of as a template to then
fill in with data so you can do things
like I can prepare a complex Dom
fragment for a list item and then easily
copy it into my actual list and fill it
with data so what we have been doing
with handlebars and mustache and all
these libraries can now be done in the
Dom why is that great it is great
because it is using the platform so we
are basically having away the template
element is a way into the browser that
allows us to say I want a part of HTML
that I want to use multiple times and at
random times in my application lifecycle
so you don't have to kind of hack around
the platform and use inner HTML and
something like that
so you're basically skipping ahead in
the parsing steps which makes it much
much faster and if you compare using
inner HTML verses template elements
versus create element you'll see that
basically 10-date element is on the
winner side it's much much faster and
it's easy to use because it is
decorative
some people say the API is a bit
contrived and a bit complicated that's
maybe true that I think it's not a
problem if we create a certain wrapper
around it such as polymer has done for
instance and then we have custom
elements they are not as well supported
Firefox supports them but has them
behind a slag and etch does not support
them yet but they are working on
implementing it so it's going to lend at
some point soon Safari and chrome
already do support them and we have
shadow Dom it's the same situation
Firefox has implemented it and oh sorry
I should go back custom elements what
that is is it allows us to say I have my
own HTML tag and it does this so instead
of having to go okay I'm using a I don't
know if I'm using it disk and give it a
class of tab to have a tab bar like I
have this class tab box this class tab
and then you nest them and then you have
a bunch of disk because if I'm doing the
diff soup thing then I'm basically
ending up Jesus I'm ending up here right
so this is what they did obviously they
had a mini fire going over the class
names and shortening them but this might
have been like this class list and was
like why is it list if it this is not a
list this is a dish idiot and then and
then this might have been like a card or
a item or something so we have been
abusing classes to do what we should
have done instead to do what we should
have done with okay the clicker is dead
I'll put it away because it just
confuses me as well well we should have
done instead is we should have done this
where we create our own HTML elements
that basically can capsulate semantic
meaning for instance this could be like
forum threads and forum posts instead of
email thread and email content and then
we know that it encapsulates a certain
piece of look and feel and a certain
functionality and that is what it's not
the clicker is it's my computer nice
that's what custom element is about so
we can tell the browser I have this
piece of functionality here and I have
this piece this content
and this template content and I want to
use that to have my own HTML tag so you
can have a tag like a modal - dialog
well do I always say like something
something - something something that is
because the browser needs a way to
figure out is this an actual HTML
element or is this something that's
someone program is a custom element
custom elements has to contain a - in
their name so that's how the browser
basically figures aha
this is something that the user has done
sweet
so that's custom element that allows us
to write our own HTML tags then we have
shadow DOM shadow Dom is an interesting
thing that is not a security feature
people mistake it for a security feature
sometimes it is not a security feature
what it does is if you have your Dom
tree and let's say I have a style that
says everything on this page should be
red and then I have a component in the
component I say all the text in this
component should be blue what does CSS
do the last one wins everything on the
page turns blue
that's not cool right and I like CSS
it's terrible I want to use it I want to
do it in JavaScript as well which is
fine but you know you could also
alternatively figure out to use the
platform because what shadow Dom allows
you is to say you know what from this
point on from this component element on
you are in your own little world so
whatever you do is limit it on this one
and also it isolates to the outside so
for instance if your component has a
button and then someone on the outside
of your component in the application
runs the JavaScript and removes all
buttons it would be unlike for me as web
developer it would be surprising if I
delete buttons that are inside some
component imagine you have a video
player and then you say okay I have two
buttons on my website and then I have a
video player and the video player
obviously has buttons play pause skip
forwards get backwards and I say okay
I'm now running like document query
selector all button and then remove all
these buttons from my document and then
the video player loses their buttons
that would be
weird and unlike what so to prevent that
from happening shadow Dom allows me to
say no this component lives in its own
little world and when I ask for all the
buttons on the page I ask for everything
outside of that little world there is
ways of actually reaching in to the
shatterdome that's why it's also not a
security feature you can go in and
remove the buttons from the video player
but you have to make a deliberate effort
you can't accidentally do it and that's
what shadow DOM is about we will see all
of this in play in a second and last but
not least we have HTML imports mmm it's
lovely one about the tricky one as the
browser support chart tells us there's a
few browsers missing all but Chrome and
that is because HTML imports are
disputed HTML imports is basically you
you know how you import an external
stylesheet link rel stylesheet and now
we have link rel import something
something called HTML and in HTML we
define a component and then we can use
that component
hoora it's like Lego basically you're
putting things together from the
internet and putting things together
from the internet can be really bad if
you're not taking care of where you take
it from and anyway so and the problem is
these links are synchronous so they
block rendering until they have resolved
and the other thing is that Mozilla
Microsoft and Apple have said we are not
sure if this is the right thing and if
we need it because we gonna have es6
modules so javascript modules and the
browser's are coming soon and maybe we
can use that instead I don't know we
will find out who knows hmm so they are
experimenting with es6 modules and then
we will see what happens to HTML imports
so take that as not very granted and all
of these all of these four standards are
polished syllable down to IE 10 so you
can use them in the wild unless you have
to support asian markets which are
broadly on IE 7 or 6 but then again
asian markets one kilobyte downstream a
downstream tried download you can angle
with that so we have these four
standards and the interesting thing that
we I've seen in the past is that a bunch
of frameworks went hah that's
interesting and because it is from the
outside perspective is if your component
is written with web component standards
it is an HTML element so everything
single one of them can interact with
HTML elements so every single single one
of them can actually interact with your
web component but also some frameworks
have turned it around for instance
angular as far as I'm aware correct me
if I'm wrong is using shadows or can you
use shadow DOM and I think custom
elements as well right yeah so angular
is looking into that ember is looking
into that view is using templates and I
think plans on doing some of the others
as well or really as far as I can tell
is using shadow Dom and template and
plan or times on doing that somehow
polymer the last one the list is
actually using all of that and just
wraps it releasing the in version two it
wraps up element more heavier in version
one so we are getting somewhere we're
getting really interesting because we
are now learning to build components
that are not framework specific and that
is interesting in my opinion also they
are using possibilities that the
browser's give us the platform the web
platform gives us and I think that's a
win so let's look into building a
component we don't know the component by
starting with a class yes it's es6 if
you have not seen is six before hi this
is 2017 you have a bit of catch-up to do
I think so we are basically creating a
class that extends from the HTML element
constructor then we can theoretically
use the Constructors well override it
and called original and then we have a
connected callback a disconnected
callback and a few other callbacks these
are life cycle callbacks that tell us
something has happened connected
callback is important because that's the
moment when our component comes alive
the constructor runs when someone
creates it
but it's not in the Dom yet the
connected car deck is run after we have
been inserted into the Dom so that's
when someone is actually starting to
display us and that's when we can do
things like set up event listeners put
things into the dawn and the
disconnected koubek is the opposite we
have been removed from the document
again so we can for instance remove the
event listeners again and clean up
ourselves basically and then we have to
it's my computer holy crap we have to
not very if you can't do it with es6
there's an es5 version of that so es6
classes are basically just a sugar on
top of the prototype system that
javascript has had for ages but really
you probably want to start using es6 and
if you really have to support older
browsers which you do yes you do have to
support older browsers please then use
something like babel to transpile it
into older code and if for some reason
you can't or you don't want to you can
also write web components using it's
fine it's just a little more writing so
once we have that we can do things like
this attached shadow what the hell is
that but what this is so this is our
HTML tag in the Dom so this is our
element and then we say everything that
starts like inside everything that is
inside of everything that I'll put into
my own element here will be excluded
from the rest of the document we'll have
a little sandbox that we are in that's
the shadow Dom that I'm speaking about
why do we I say mode open then we'll see
in a second why open is not a bad thing
this has been added relatively late you
could also have a closed model basically
the difference is here I'm allowing
someone who inherits from my component
to override my internal like Dom or even
the application could if they really
wanted to go into my demand change like
the structure of my component if I don't
do that I'm literally excluding that
possibility to accidentally or to
deliberately go into my document that's
a possibility I don't think it's a good
thing to do because you want to keep it
open for extensibility
right you want to give the power
the possibility that the web offers the
possibility to do something with your
component that you might not have
intended in my opinion so we do that and
then we register our component and I
saying custom elements dot define and
the first thing is the tack name that
we're going to use and I said it has to
have a dash so in this case I just go
like my dash comp and then I give it the
class and now I can use it either by
using document dot create element my -
comp or I literally write in angle
brackets my dash comp somewhere in the
document so that's the possibility and I
can use my component now my component is
now ready to be used
how does my component interact with
other components and how do i configure
it and all that kind of stuff
well first things first
let's have a look at this wonderful disk
tag this has a class attribute and the
value is highlighted and it has some
property that is the text that it
contains some properties and attributes
exist with the same name so for instance
dot H ref and H ref in a link are both
the properties the properties I'm using
it in the HTML like that and sorry an
attribute if I'm using it in the HTML
like that and a property if I'm using
dot H ref so properties and attributes
are not the same but they can be like I
can have the same name right so text
content for instance I can't go into
this and type text content hello and
then it shows up it doesn't work it
doesn't have that attribute but it has
that property good so basically what
this is it's two different api's right
one is the HTML way I can also do it via
JavaScript using setattribute has
attribute get attribute and but I can
also just use the property API in
JavaScript feels more natural because
we're not using the Dom we were using
the object as it is any object really
it's not a special object so if we look
at the kind of reason why that is this
is the properties are a imperative API I
can use them in code in JavaScript code
but if I want to get two web authors
that do not
I'd like to write code but actually a
fine writing markup for a website or web
application I give them a declarative
API with the attributes and that also
can often be used for the intern initial
values to kind of initialize your
component with values and we can sync
the two so I would highly recommend you
always have if you have attributes you
also have same named properties and you
can sync them by using getters and
setters so if I if I do my component dot
mode I basically got just get whatever
is in the component if I do mode equal
to low then what I do is I set the
attribute as well and also if we change
the attributes someone literally calls
dot set attribute on our element we can
tell the class that we want to observe a
certain attribute to be give it a list
of the attribute names that we want it
to observe and then when that happens we
call or the browser calls a function
called the attribute changed call back
gives us the name of the attribute that
has been changed the old value and the
value after the change so we can do that
as well but how do we communicate back
so that is like the application gives us
input into a component but how do we do
it like the other way around well think
about how do HTML elements do it how
does an image tell you that it has
finished loading or that it couldn't
load it uses an event right so you can
say like image store unload or image dot
it happy Bend listen or load and we can
do the same thing in our component so we
can say has our weather elements
finished loading and then maybe has some
detailed information on the weather as
well and inside our component we can use
this dispatch event new custom event and
we can give it any name that we want and
any details to pass along with it so we
have like a payload for instance if this
is the weather component the details
could contain the temperature the
description of the weather or something
like that or the location that we have
loaded so events are basically the way
up and now we build a component let's do
that so we're going to build a component
it's called weather info it does is
there's an open weather Maps API that we
can call to get weather information so
it fetches this data from the API
I load a little icon that I get from the
API as well so that we have the little
rainy icon there 11 degrees in rain that
sounds great
um it allows to use Imperial or metric
units and as everyone in the world
really uses metric that would be the
default and we can only switch it over
to through using imperial units if we
really want to and it allows us to
change the city so we can configure the
city and we can configure the unit if
its Imperial or metric and it should
also have a method for us to an
imperative Li say update this good so I
have created a scaffold and that is far
too tiny
mm-hmm-hmm let's make this larger hmm
okay how do I get back better or is it
still too looks too small good ok people
in the last row go yes so if you can't
read it there's plenty spots available
in the first and second row and I highly
encourage you to take that opportunity
okay so here I'm starting with a
template it doesn't have to have an ID I
just give it an ID here I have an image
I have a piece of text a span that is a
placeholder for where the city will go
and a span for where the temperature
will go with the unit and then a span
Ford where the description is going to
go so that's my template it is a
placeholder of Dom that I can use then I
would just on my component it is pretty
empty and pretty boring and it doesn't
really do anything but I could go
console.log hello and then I could rise
in epic CAPTCHA that was not what I
wanted to do I could write a little
application that is a HTML document
surprise
we're in web development track here
does he do HTML the web is all
JavaScript today so outdated but hey I'm
a mythical creature from fairytale land
so go screw yourself so I want to load
my weather
- info HTML so I'm importing the
elements and then in the body I can use
the element like this weather info and I
can save this as oh I have to save it
into ant doesn't matter I'll do it here
and then I'll navigate I'll change this
to be weather info slash weather info
and now if I open a new tab and go to
localhost a thousand not and that is
obvious because our component doesn't do
anything really except it logs hello so
it has done that so yay ok we have we
have achieved the thing we can now
congratulate ourselves and have a beer
or maybe not who knows maybe our boss
would not like to see that so let's
actually go back and and build the thing
out from here so I think the first thing
would that would be good is to get the
the template there's an interesting
quirk and this is this is part of why
the HTML import spec is not very famous
and well well liked to get to the
template hmm we can't just do document
or create selector because document is
the main document which is our
application if our application runs
document is the document that the
application is in and this comes from a
different document which is our
component document so how the hell do I
get there well what we can do is we can
say document dot current script which is
the script that is being evaluated right
now and then we can ask for its owner
document and that is the document that
the script lives in and that's our
component document now because life's
hard and rough
and someone said you know what we have a
have a polyfill as well but for reasons
that I won't disclose yeah don't you
know don't don't question me on this
okay and then I can create a selector
into my template this is funny because
the line gets really long so I'll just
I'll just leave it like that it's fine
and the template itself then has a
Content property when the content
property is a document segment if you've
never heard that it's fine it's
basically just a Dom node that isn't
really a Dom node and can be cloned
really easily and fast and now we have
it here great so what we can do now is
we can we can say this attach shadow
sorry mode open good and now what we can
do is we can say this shadow root
because we have created the shadow root
as our kind of shadow Dom main node or
parent node and I can append a child to
it because it's a Dom node as everyone
else is as well and now I import my
template and I wanted not just to use
the top level I want to use the entire
tree of that and I have attached the
template to my shadow root so now we
should be starting to see something ah
amazing
okay fine back to the code um now
actually let's let's have one more look
into the dev tools because I kind of
find this is worth mentioning so what we
see here is there's the shadow root and
it says open and in here is an h1
element and the paragraph and all that
kind of stuff is in here and and it is
hidden away as I can demonstrate to you
you know that dev tools has this lovely
shorthand property that allows me to
write document crazy lector way I don't
have to write document query selector I
just get dollar if you didn't know that
it has it and it's amazing
because I would like
and you don't have to do that it just so
dollar like you don't have to use jQuery
in Chrome apparently and so I can ask
for h1 elements nothing
oh wait there is an h1 element but it's
in the shadow Dom so no shadow Dom for
you and I can ask my weather info and I
get the weather in one and I can ask for
its children and I get nothing because
it's in the shadow Dom but but oh and
here I have to touch reflectors those
like oh I can do right so um that's what
open means we have the dot shadow root
property and we can access it from the
outside but it still prevents me from
accidentally changing something in the
component okay now that's the still not
like super exciting because it looks
like and then it's very nice so
let's have a style thing here and let's
say for instance
so host is the element itself basically
all that whatever hosts our shadow root
and I can say I want to border one pick
flow solids Rebekah purple whoa it isn't
good our new code and display block
because my definition is in-line block
and then we give it a padding of 1 a.m.
for instance and and it ignored me
that's amazing I have seen this coming
and I'm like yeah right why even worry
is it done : : host nope
it has outdated selectors so that's
always a fun one
isn't it host I think it is host yes for
this house so why doesn't it evaluate it
I don't think it's cached it it might
but I don't think so because if I know
it hmm I did catch it love no it should
not have cached it why does it cache it
or because I know you know why because
on my work computer I have auto safe and
here I don't um yeah that was that was
clever so there we go we now have a box
and it has a padding and has a you know
it has all the things the text also
looks terrible so I'm just going to do
like font family Sam is Jesus yeah
whatever whatever you suggest I'm not a
designer I just go boom sure good
slightly better but now we also want to
allow people to configure it to actually
display any real data right so what we
can do then is I can give it well
properties right and as we have said we
want to sync the properties with the
attributes so what I can do is I can do
get city and city shall be whatever this
gets attributes city returns so this
will give us if we have an attribute in
the HTML this will return us the the the
actual value
and I say just value because I'm a lazy
bum and I go this atributes city it's a
bit of typing really and I can maybe
save some lines here just for for
brevity reasons okay so now we have our
attribute but we're not really using it
but what we can totally do is we can for
instance say content here and then I
import the con that the template here
and then I append content and then I can
go content dot query selector colon City
equals this city so this is going to
call the getter function for city and
what no that was that was just you have
no freaking idea how hard it is in this
onesie I mean I look hard as well I know
but it's also like physically hot
doesn't work surprise the price but what
we can do is we can obviously go into I
don't know why it doesn't allow me to
easily switch to the application suite
we can do CD equals Lugano for instance
right and then I go back and then it
does not what invalid left-hand line 31
and none of you caught that one
everyone's like haha how is putting
getters and setters other graphs but no
one actually saw this one huh
very selector equals this sip why is
this not why how is that a problem
oh because yes no text content no
but but nice try let's fly that let's
not ask it so yo hi what's your city
undefined that's interesting why is it
undefined this guy you see should do the
thing doesn't do the thing it's very sad
nice calling always fails son like yeah
whatever
I'm through there what's my next tag the
next tag is get checkout to template I'm
having none of this um tada
it has a we have new things here we
might had it checked out actually or has
given me an error
it gave me an error because of that okay
get stash get check out to template get
stash pop because I didn't have the
index.html merge conflict it gets better
this is what happens this is what I get
for it updated upstream so I basically
want this and not this I guess or do I
want this I probably do not want this
because this has broken on me but yeah
actually that's the wrong tax I don't
even have to undo my merge conflicts so
I'm just going to go get check out I
actually get results probably first I
love it this is this is why I don't want
to do live coding normally but you know
that's fine that's alright I can take it
no do not save it I just want to reload
it so here it's in my opinion it should
be the frickin same code but okay if
it's different and whatever so the
difference really here is that I'm not
even filling in the template yet so I'm
like yeah whatever but but but but if
things go as planned which they probably
want that's okay they don't just say it
because I haven't updated the content
but city is updated ha ok so this part
works
what I can now do is I can say content
query selector - City text content
equals this city and I should save it
because I don't have autosave enables
remember that Martin there we go okay so
now we have like the city in great I
guess
what is nice is that I can also say City
equals service it doesn't update in the
template but what it does is it updates
it in the attribute so it has changed
the attribute it doesn't update in the
template because we have to do this
somewhere and probably the easiest thing
is I can just have an update function in
my element update map what am I writing
even was like I forgot everything but on
the other hand I'm a unicorn so doesn't
really matter and then I can just query
this shadow root and I can do the same
thing and then I call this function in
it I call the function initially after I
save the component and then we have the
same here but if I now whoop query
selector of null then shadow root should
exist no yes interesting I'll just move
on and pretend I have not seen that and
it doesn't go away that's amazing but it
updates Christ lecture of null you know
I can't stand the error message right
now and whatever moving swiftly on so I
can now dynamically update the the city
I'm looking for I can also I can also
ask for Imperial which is if it's
Imperial or not if we want metrics and I
can say true and what happens there is
that it actually changed in the
attribute as well so you can also set
boolean attributes as well and good all
fine or great I won't bore you with me
typing in the code
for the freakin open weather API so I
will just go get stash yeah get stash
get started and go straight to the
completed components five completed
comprise Jesus no for four that's a fun
game of what that hack the completed
component looks like this let me just
make sure that we have the latest code
it's pretty much still the same template
it is still the same code for this we
are observing the two properties
attributes if they change our callback
is being fired here's how you set a
boolean attribute or unset a boolean
attribute by the way and then in the
update function all we basically do is
we do the API actually let me let me get
that we do an API call we do a fetch
call to this API with the properties
that we are interested in and then yeah
we fill in the actual template and and
then we also dispatched an event okay
fair enough
I should now be able to I don't even
care but here we see that we have our
weather data has been fetched I can also
add an event listener to the load event
so I ask for load and then we're just
going to pipe it into console log
because I can't be bothered and what we
can then do is we can ask for the city
of Zurich instead and as you can see
here this is our event and that has
fired and in details I have a
description and the temperature as well
so theoretically any angular of UJS or
whatever application can react to these
events and set the properties as well
and then you'll get weather in Zurich is
actually clear and twelve point six
degrees
what was it in Lugano again it's warmer
but it's cloudy I'm not sure if this is
better and all right
so that's how you build your component
with web components that is a lot of
code for such a small component so
that's really annoying but if you're
interested and you speak German someone
that is me wrote a book on polymer
polymer is a library that allows you to
not write as much code and basically
just takes away all the painful writing
all that stuff and wiring up your
templates so it would be much smaller
smaller and shorter but I think I
believe I should not teach you a
framework I should teach you how to work
with the platform if I'm talking about
web components being amazing for working
with a platform and then I introduce a
library that is a bit stupid so take
that but if you go like all the web
components are so much work then pick a
framework or library that you like that
basically hides that away but that's the
low level components and low level parts
in the web platform that we can use and
now I'm running a little behind of time
I think the next thing that we're going
to do with that is just to wrap it up if
your application talks to the components
you can use attributes and properties
the other way around events are the
thing that you probably want to do and
now let's build an application and
that's the best slide ever because we've
seen it before go back to code and what
did I have here oh yeah
I'll just go to fun no not six why do I
type the wrong buttons all the time now
right let's go back to the editor we are
now having an additional directory
that's called app and I have installed
some things from the network because
never trust the network during a
presentation in a conference and what I
have been doing here is I am loading a
bunch of components that someone else
wrote in this case Google's polymer team
for layouts and stuff and I'm styling
them a bit I make them like this is as
if it is a normal HTML tag right so I'm
giving them a color and a background
color and I'm making them in a certain
size and all that kind of stuff
and then I say I have a header layout
and I want a
a nap hammer that has a toolbar that has
a name VESA of my application my weather
application is called weather because
I'm super creative and I have an icon
button with a wonderful Add icon and
then I have a paper card that shows the
weather info for Lugano
I actually forgot to load the weather
components I should probably do that so
let's do that real quick there we go
and if I'm now going out of my
presentation and enter the application
there we go ok I have forgot to import
the squall effect as well so here we
have a little button and as you can it's
not that easy to see but it has like the
material bubbly ripley's thing around it
and it looks kind of nice and clean it
doesn't display the weather for Lugano
because I also forgot to load the paper
card as I noticed now because it's on a
paper card so let's do that real quick
link rel import href power component
paper cards it's a common convention to
name the file the same as your component
is named so you have a directory and an
inside that's an interesting one so
paper card is loaded but it goes I don't
think so but that's actually it is here
it just doesn't display anything I might
have forgotten to say if I did forget to
say thank you very much I'm forgetful
unicorn oh and now the network has
failed me amazing ha ok isn't it is it
getting warmer or is it am i
hallucinating it should get sunnier not
just warm how does it get warmer when
it's not sunny anyway maybe people fart
too much I don't know um cool so what I
can now do is this application is a
really simple application I want to have
a list of things that I can display and
as I'm not really having enough time I
have to unfortunately do like it
a stash I stash all the things six
storage because I wanted to show you
basically there's another component that
I can use I didn't didn't actually
reload did it
oops and now my file viewer has gone
bonkers
so there's a component called iron a
local storage I give it a key in the
local storage and then where I want to
bind it this property tools and now I'm
using polymer things basically because
I'm a lazy bum this is a data binding
and polymer so that means that whatever
value is in this it's being saved to
local storage and whatever is pasted in
local storage when I load the
application comes out and is available
and it does like JSON parsing
automatically and what I can do with
that is I can have another polymer
component that is called the Dom repeat
and I repeat over this array of
locations and then for each of them I
display in this case just the name of
the item the content of the item when I
load this it will not show me a nice
weather but it gives me like I have
these two locations already in my in my
in my local storage and then I can go on
I know that I have no time so I'm just
going to skip ahead and I can reload and
basically what the code now does is
there's a bit of JavaScript here I get
the icon local storage if it's empty and
make sure that I'm always having and at
least an empty array in here if you use
a actual polymer app it's easier than
that but I have to do it manually
because I'm avoiding polymer except for
using their component if it loads I'm
reloading the list and I'm making sure
that I lock that out and then here I
have a button a button has a click
listener and I click it and it asked me
for the name of the city and now I can
go burn and then we get the weather and
burn but the network has died so we
don't get it so I reload and if Walla
right the network died on the image
that's amazing
I love it the network is really good on
my computer today ah there we go
so and we have a weather app code is
online I will share the link later on
because I'm basically being like nudged
at me love running late let me quickly
wrap up
component should be self-contained
building blocks and the good thing is if
you're using web components or polymer
or anything that produces web components
they are interoperable you should also
document the interface and it should
always have like the things between
attributes and you know properties and
please make sure that they are actually
you know working properly and then
they're sinking in both directions and
run accessibility tests on it because
it's really important make your shadow
Dom open so that people can extend it
there's libraries that have to do that
for instance polymer web component
tester is an amazing thing to test two
components vulcanize this documentation
elements slides our online I'll be
around at the day you find me really
easily I'm the unicorn I'm on Twitter if
you're like talking to people especially
when they're in onesies is uncomfortable
and I blog thank you very much enjoy the
day my time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>