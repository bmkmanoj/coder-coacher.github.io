<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Automate your docs automate yourself by Chris Ward | Coder Coacher - Coaching Coders</title><meta content="Automate your docs automate yourself by Chris Ward - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Devoxx/">Devoxx</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Automate your docs automate yourself by Chris Ward</b></h2><h5 class="post__date">2017-08-11</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/hDXw8vibdoM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">thank you for coming I know I am keeping
you from free beer and I keep myself
from free beer so I'm going to get a bit
of a move on I've got a lot of want to
show you okay so first I'm going to
start out with a quick question what is
one of the first things you would tend
to look at with a new project you can
try to shout if you're like what's one
of the first things you'll tend to look
at I could barely hear you but I heard
one word I was looking for yeah I guess
it is documentation and I'm one of these
crazy people that likes doing
documentation I come to dev conferences
trying to convince developers
interesting ways of doing documentation
better and this is one of my
presentations I'm going to start with a
couple little quotes to set the ground
it's actually an interesting quote from
Ken Williams one of the creators of Perl
and this is an old quote it's not a new
quote at all but we know that this isn't
ideal not a reality the reality is
actually often more like this this is
another quote from someone I met from
Wikimedia yes documentation is something
that we all know we should do but don't
really want to apart from people like me
so in this presentation I have a couple
of different presentation this one it's
going to be about how to automate a lot
of this just a hotchpotch crazy bunch of
ideas of things to try to automate some
of your documentation or if you like
automate your housework this is kind of
an ongoing project that I've been
working with a few people and there's
some github repositories that are in
progress with some of the examples where
can encourage people to try them add
support for your languages of choice
your systems of choice basically I'm
learning this is a learning process this
presentation in itself this is a
chinchilla by the way I was about to say
there's too many cats on screen so it's
actually a cat on this screen but the
chinchillas are the main animal in this
picture it's a learning process these
ideas I've
trade with the languages that I use in
processes that I use I'm very much open
to you telling me some ideas of things
you tried to let's get started I'm going
to jump backwards and forwards between
lots of demos so we'll see how they go
first spelling things like spelling and
grammar okay for me it's more about
professionalism if someone reads
documentation in your project and this
spelling errors and typos and things
like that it puts them off every little
thing that you get wrong puts someone
off thinking that this is something they
want to try so how can we automate some
spelling here's a couple of ideas hum
spell is pretty well-established it's
nothing new it's actually the spell
checker in libreoffice OpenOffice
firefox thunderbird
apparently chrome and a lot of other
things as well but it's actually an open
source project and you can kind of use
it for other things
it's a linux package so if you have a
Linux distribution it's just in package
repositories or homebrew if you're a Mac
user and this is kind of an example of
the command we could run and here's one
going to try to start jumping into some
examples and we're having three screens
gets even more confusing right there we
go is that readable no not quite
okay so I'm actually using the docker
documentation to work on some examples
here it seemed like a good reasonably
large documentation set to use so here's
our script and this is setting things
like the dictionary we want to use we're
going to use English US and some other
options and we're going to check
markdown files and let's see what
happens
oops it's a good start this is it oh
yeah
I actually was smarter than this I
prepared script already that's why so
this is very useful you can read all
these spelling errors you know exactly
what it's saying to you and it's
extremely helpful to you there's a lot
of documents here a lot of potential
spelling mistakes and it's completely
unreadable you could of course do all
sorts of logging with this to get some
ideas but this isn't very useful and
this is basically because hung spell is
not meant for checking code so there's a
lot of things here that are code or file
names and many other examples are not
very useful to us so there's actually
though a sort of a wrapper around humm
spell that's great for markdown and
there's other equivalents for
restructured texts and ASCII ducks
called
MD spell or markdown spell check the
module is different from the actual
command and it respects the markdown so
this is a little more useful let's have
a look let's remember the name of my
script okay so this is firstly more
readable it's actually giving us line
numbers and it's giving it's not giving
us suggestions though there are flags we
can turn on for suggestions but it's
easier to use you might notice of course
here that it's marking things that are
spelling errors that aren't spelling
errors they're brand names they're
project names they're technical terms
which effectively in proper English are
wrong but they're not wrong and so how
can we change that sort of aspects of
things I have an example here yeah so
with the MD spell it's actually quite
easy you can just create a dot spelling
file in the location of your repository
and add some of the words that you don't
want to be considered as spelling errors
and this is I've just started here so
you can see some examples of some of the
words I've put in that docker uses quite
often that
correct and and that's just a file you
can obviously share in a repository
share with what makes things like that
and train the spelling errors so it's
still not great but it's semi useful so
what's some of the next steps you could
look at actually here this blog post is
a very old blog post but hum spell is
also very old and this is actually quite
an interesting one where not only can
you have that shared text file of
spelling errors you of words that are
not spelling errors you can actually
convert it into a proper dictionary and
then use it in the other applications
also use Hanceville so you could have a
shared dictionary of all the acceptable
words not only if your technical
documentation but also for marketing
documentation and things like that too
so it's actually quite a cool way to
have that resource shared amongst the
whole company you can hook these things
up to CI whether you want to consider a
spelling error breaking a build on up is
up to you I make no judgement and
editors as well so for example here I'm
using Adam and Adam has a lot of
different packages but if I make an
arrow here I actually have to set some
right in multiple different languages
you can see here it's flagging this as a
spelling er and it's using exactly the
same package and I can share the same
dictionary file and all these sorts of
things
okay what about grammar spelling is one
thing but what about actually writing
better without having to understand all
the rules of vague English there's a
great module that I like to use here
called write good another NPM module you
can again check markdown but also other
plain text and structured text files and
it has a bunch of different tests and
you can just run all the tests or you
could run selective tests or you could
run all tests excluding certain tests
and what these tests are is I won't go
into too much detail but for example
something like a weasel word is a word
that doesn't really serve any purpose
and this happens a lot in technical
documentation or so so is another
classic example of a word in English
that everyone uses all the time and you
don't really need it it doesn't really
serve any purpose so let's have a look
at a quick example there I'm going to
just change branch
so this again I've wrapped the here so
we can again see that this is
highlighting potential grammar errors
and what it suggests to correct them and
this gets a little bit more up to you on
how you want to write things and maybe
if you want to spend a bit more time
polishing documentation but it starts to
give you some quite nice guidance which
again you could pipe out into CI systems
and logging systems and things like that
and again in a lot of text editors this
is also available so it's the same set
of problems and suggestions
there's also another one in the Java
well which is language tool which is
used in a lot of Java based applications
actually it's a big issue with it much
like some of the earlier examples it
doesn't really understand code doesn't
really understand plain text files links
things like that so it's semi useful but
there might be some ways to customize it
as a lot of Java developers here so try
it if you like and again I showed one
particular tool but there's a lot of
these around there's a lot of open
source ones there's a lot of commercial
ones I also in quite a big fan of a tool
called grammarly which is a sort of web
based application but unfortunately a
lot of these don't have anything like ap
is so you can't connect them up to
continuous integration tools and things
like that so it's not particularly
automated and I don't think they ever
will have API is because they're not
really designed for us they're kind of
designed for normal writers I suppose
but still if you want a manual step they
add some extra bits of advice there and
there's also a lot of commercial tools
very expensive commercial tools for
helping with this too ok let's get onto
some of the more interesting things
screenshots a picture does indeed say a
thousand words and screenshots are very
useful especially if you have a GUI
based application of explaining ideas
and concepts to people without writing
paragraphs of text but generating
screenshots is very very tedious and
also when you change a font or you
change a style you have to replace all
the screenshots so surely we can
automate them of course we can again
this is one example and this example of
course is web browser-based so it's a
this is a web application but there are
similar tools for other sorts of
applications I'm just kind of showing
the principles here so for my example
I've already installed phantom Jas which
is kind of a headless browser and then
I've used a combination of tools related
to selenium and this robot framework
that will we can define and basically
test step
and we can then use those screenshots
generated and include them in
documentation I'm going to show you an
example first and then I'll sort of talk
about some of the positives and
negatives of this so so this is actually
a very simple example I'm going to hope
the internet works because I'm going to
use a website here it goes to a
particular webpage it's attempts to
login it takes a screenshot of the login
box
annotates it and it continues testing so
I actually know this test is going to
fail but we'll still get the screenshot
so you're already starting to see here
that you can actually get a lot of these
things part of your existing automation
workflows this is basically using
automated tests to generate screenshots
for documentation so it's already part
of an existing workflow you have the
let's and this up okay so once we've
defined all those files it's actually a
very simple command it runs it attempts
to connect to the server we've specified
and depending on the internet see how
long it takes it also unfortunately uses
jQuery to do all this so it's a little
slow but it started to try to log in and
actually I noticed that the website I
was using to test this they changed a
lot of their structure so the test is
failing but we still should have a
screenshot here with an annotation
saying log in here and it's also got a
dotted box around it so again we've
automatically generated the screenshot
quite easily and quickly and if you have
tooling like this already part of your
existing continuous integration system
then it's not too hard to take it
further now the what some of the issues
with this like Python for example and
restructuredtext supports this very very
nicely you can actually embed it all
inline in the documentation other
languages and markup languages
not so well supported unfortunately so
often is more of a case of generating
the screenshots and just making sure
that the file path in the documentation
is correct but I think it's worth the
effort actually I've sort of spoken to
this with a lot of people and it's one
of those sorts of tasks that once you've
got it working it saves you a lot of
time in the long run and people rely on
screenshots so yeah it's kind of some of
the questions to think about how do you
want to set this up is it part of your
existing testing workflow is it separate
etc etc testing now this is again
already feeding into some existing
workflows you have how many times if
you've gone to documentation read a code
example it doesn't work and it has given
up or try to find another way this
happens quite a lot again because things
change or there were dependencies or
things like that that the developer or
the writer assumed you had and you don't
and etc etc so in theory we should test
all our code examples - let's have a
look at a couple of ways of doing that
so if you're just testing API s then
there's a couple of ways of doing this
again this is just one example that I've
used in the past and depending on the
language background you come from
there's lots of ways of doing this and
again of course testing API s is
probably part of your existing workflow
and if you're generating documentation
out of that then hopefully it's already
being tested but sometimes documentation
is kept separate so you might need to
test it in two different places which is
odd but again it depends on the company
so this is a tool called thread from a
company called a pari and they kind of
actually I'm using the Marvel API here
just because it's fun to use it's
actually a terrible API but it's fun for
examples this
so in this case it's using a format
chord API blueprint which is an API
definition file
it also supports swagger which is
another one and I think another one
that's name is completely escapes me it
tests that against the API URL and you
have hook file so you can actually
inject your own logic which I'll show
you in a minute
for example the Marvel API always wants
a generated token hash token attached to
every request so I actually use the hook
file to generate that I tell look at
this again this will fail this will fail
but I just want to kind of give you an
idea of how it works I'm yeah it's going
to start failing for various reasons
mostly because of the Marvel API but and
I don't know who even made this API
blueprint file but you get the idea I
will probably just let it continue there
but how that looks and read consists of
a configuration file which has a bunch
of different settings and and here's the
hooks file for example so saying before
each request generate this hash key
because it wants things with a with a
random hash each time it's a slightly
strange API but yeah
and that's just one example there's a
lot of this is a very busy space testing
ap is and also integrating the
documentation of them is a very busy
space actually lots of commercial and
open source options Jetman is one
postman I don't if you've used postman
it's actually added a lot of new
features that are quite good for sort of
mocking api's and collaborating on that
and the documentation and also the
testing now and yeah but a lot of
commercial options it's a very very busy
space API is our one thing but what
about those code snippets those code
examples it is actually probably the
more interesting one and the more useful
one and the harder one to do so again
I'm going to show you a Python and
Sphinx example just because it supports
it the best so thinks is a documentation
renderer for Python and restructure text
and it has built into it quite a useful
tool I'm going to show you what this
looks like in the code so here is a very
simple restructured text file it
actually has this concept of test setup
so we can say the dependencies we need
to make the example work but the reader
doesn't need to know about them so
they're hidden the example and then the
expected result is a very simple example
but the only thing that's actually going
to display is some - - and everything
else will be tested so
this runs it passed the test and if we
look inside the build
I've lost the file somewhere but if we
if we generated the actual restructured
text the the output the HTML we would
just see that um too many things going
on in we would just see this line here
so this is fantastic this is great this
is super super useful super super cool
but not very useful if you're not doing
Python are there any other options and I
will say at the moment this is kind of
the area where there's not that many
concrete options I started working with
a QA team the last company I was working
at on two different ways of looking at
this one is extracting all the code
snippets from the documentation building
them into an application and testing
that the other way around was creating
the example as like Java Script files or
Python files or Java files or whatever
they happen to be so it's a separate
application itself and referencing the
bits of the code in the documentation
instead this is easier in some say for
example markdown can't really handle
bringing in snippets of code other
markup languages can in the kind of more
old-school enterprise world of technical
documentation with with XML based
languages like DITA
and dot book you can actually do this
much better so it kind of depends what
setup you have and how important the
examples are to you as well it kind of
depends from language to language so
this is kind of one of the areas where
the the my community is quite excited
about trying to find ways of making this
work better but no one has ideal
solutions yet okay I have seven minutes
I'm going to run through some bonus
material
but I'm just going to break that up very
very quickly by showing some very stupid
pictures of some animals that's a one
bat just to kind of have a quick breathe
I would forget to the bonus material
because with all this time I'm hopefully
saving you you have time to look at
pictures of wombats or chinchillas or is
it to jello rolling in a dust bath great
okay right let's keep moving that works
better in my head so what about
generating different formats again if
you're using some of the XML based
setups this actually does it for you or
if you're not if you're using plain text
to generate things like epubs PDFs help
systems pan doc is one of my favorite
tools in the world it's actually it can
even generate Word documents from
markdown which is very very useful and
vice versa which is even more useful
this is an example I probably won't run
through generating it right now so this
is just a bash script and there's
obviously other ways you could do it
it's just an example I ran through all
the markdown files I use pan doc with
yeah more front matter so does metadata
about the text and some other parameters
when I'm generating the PDF you have to
use logic which is a whole other
conversation but let's just ignore it
for now and down here I'm doing HTML
although I've just noticed that I'm also
using logic which it wouldn't be that's
a flag that shouldn't be set but anyway
it's copying and pasting and from the
markdown files it will generate HTML
PDFs
I could also do epubs it has lots of
support for setting up things like
chapters tables of contents how you want
to define links images all sorts of
things it's actually a very very cool
tool for creating multiple formats okay
this is all been very useful but what
about actually in the writing process so
I'm going to encourage the use of things
like snippets I've got an example here
from Adam of me setting a shortcut for
DFM and it also completes through docker
for Mac and most decent text editors and
ideas should have support for this and I
kind of encourage you to use it I've
actually set up entire paragraphs of
text like marketing copy that I have to
remember should be in every document I
don't want to write it each time so just
set up a snippet so you can
automatically include it each time so
it's worth actually setting up some of
these in your first steps if there's
things you repeat a lot on the subject
of repetition here's a kind of going a
little bit further this is a process
called transclusion and again some
markup languages support this better
than others and so things like
restructure text have this built in by
default so there's data and XML but if
you're a markdown fan which I kind of am
there's actually a nice little NPM
module called hercule and if you're
familiar with markdown you'll notice
that this bit of syntax looks pretty
similar to a link but it's a bit
different it's got a colon instead
obviously this won't work if you don't
have Hercule installed but basically
it's a reference to another file you
have the input and the output file and
this can be scripted of course and it
will transclude that it's called the
external files all into one file so I
found this very very useful for having
repeated bits of text that I only want
to update in one place and it gets kind
of weird because you start having
documentation with build processes which
makes documentation all of a sudden much
more complicated and sometimes it needs
to be but as things become more
complicated it can save you a lot of
time in the long run because you only
have to change things in one place
another example of this might be things
like placeholders so here and this is an
API kind of
application we have two different
environments a preview environment and a
production environment for the API and
we've got placeholder tokens in the
documentation that at Build time we want
to replace with real keys so people can
actually try the examples and this is
just using said to do a similar thing
have a build process that when you
generate the documentation it replaces
all those placeholders with real codes
that can be auto-generated told from
systems pulled from logins and user
accounts things like that so again
another nice idea of having one sort of
source of truth that can be updated okay
as kind of my run through some very very
crazy ideas and some experiments if
you're interested in trying some more
I've actually written some blog posts
around some of these that you can find
on that link koala is a quite a cool
tool that tries to bundle a lot of these
sort of linting type efforts together so
you can actually have a linter that will
lint your markdown your file names your
links all in kind of one command it's
still early days but it was a google
Summer of Code project and it's quite
promising test the docs is kind of me
and a group of people who try to get
some of these ideas a bit more
solidified and we have a repository with
a lot of these examples that you can
play around with if you're more
interested in the writing side then the
write the docs community has a flag down
of courses everyone else does and I
guess one of the things I kind of like
to do close this is why bother in the
first place why bother with good
documentation I mean I have a whole
other talk about this but I would say
that documentation is interest for
developers and it's actually a way of
people finding your product or project
understanding what it is it's a way of
business people saying yeah you've been
working with this tool for six months
it's awesome you say it's great okay
they want how much money let me have a
read about it and see if I understand
why it's useful so not everyone
who is a technical person reads
documentation so make it as good as it
can be and in conclusion thank you very
much you can find all my sorts of work
on these websites or on Twitter and I
would say let's go and have a drink so
thank you very much</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>