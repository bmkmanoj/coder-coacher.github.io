<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Counters in Mapreduce | Counting with Counters | MapReduce Tutorial | Edureka | Coder Coacher - Coaching Coders</title><meta content="Counters in Mapreduce | Counting with Counters | MapReduce Tutorial | Edureka - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/edureka/">edureka!</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Counters in Mapreduce | Counting with Counters | MapReduce Tutorial | Edureka</b></h2><h5 class="post__date">2015-03-27</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/HHpzrkGJZe8" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">counting of the countess okay here we
use so I guess if folks who have already
involved with Hadoop definitely know
about the counters so this is another
kind of design pattern where we use just
the counters to accomplish things which
otherwise you actually would have
reducers and transferred a lot of data
across the network to get accomplished
so the benefit of using these counters
is that everything happens entirely on
the map side no reducers or or explicit
code for summing is required you don't
have to do any summing yourself the
framework takes care of that you you
will define your own custom counters for
these to work and and it's the Hadoop
framework itself keeps track of those
counters there's this caveat to using
these counters that is you you cannot
have cannot be using too many counters
in your program because it's being
masked for example if you are talking
about MapReduce version one so in those
cases the job tracker is responsible for
keeping track of those counters and it
has got other jobs to perform so if you
if you increase the number of counters
to a lot then the performance of your
whole system gets start starts to get
affected so your make sure that if
you're using this this pattern limit
your counters two tens maybe 20 maybe 25
not more than that maximum 100 you
should not be reaching those those those
limits but generally it should be
somewhere around 20s or 30s not more
than that one of the users could be how
many times top 20 users posted to a
stack overflow last month so so so you
could use it for this purpose so you
know there are 20 different users or to
any different it users for whom you
actually want to figure out how many
posts were there so you will end up
creating 20 different counters
and in your program when when when on
the map aside whenever you find that
user you increment that counter and
restore rest of the things will actually
be taken care of by the framework this
is the structure for counting with the
countess so you start with the mapper
here all the the tasks
whichever is is to be performed happens
in the mapper only this is no reducer
here so incrementing counter C D and V
over here a and C over here
counter D and V over here and then these
actually go are tracked by the class
tracker and ultimately these things go
to job tracker and that's already we'll
see your output coming from back to the
client from the job tracker
this is the mappa which I just explained
to you and the benefit is there is no
combiner no partitioner no reducers so
you're saving a lot of effort on that
side and the thing to keep in mind is
there's no output file as such written
but you need to have an out so in terms
of performance because most of the task
is being taken care of by the framework
so the counters are generally very fast
because you're not doing any network
traffic here by transferring data to the
reducer side so from that perspective
also these this this pattern is very
fast so mostly on the number of map
tasks being executed and the complexity
of the mapper code the use cases are
quite self-explanatory count the number
of records for over a given time period
so for example in 24 hours you want to
count the hits to your website for
example then you could use because here
you will acquire 24 counters for doing
that then the size not increasing too
much but for free but if you if you
remember the word counting problem right
there there you could not have used the
counters simply because the the number
of terms which are dealing with over
there is this is this much for larger
let's
one of the examples for counting the
countess problem and the data which
we'll use for this is votes not xml
again part of the stack overflow data so
some of the fields and this is post ID
both type ID creation date and user ID
and we are going to create two counters
three different varieties of voter ID
type so we will create counters and
favorite offensive and spam okay so the
program in the mapper is very simple
what you do is you read your records and
if you if you see that you have one of
these values in the voter ID type then
you increment the corresponding counter
framework will do rest of the things for
you let's see the code for this
so this I have this counter one second
okay so here is where you actually
define your custom counter which got the
votes counter and it's got three
different values favorite oven seven
spam and depending on your record in the
code over here you increment these
counters by one okay when you program
finishes over here so you have a code
which is zero successful completion then
you visit is each of these counters and
print their values that's that's what it
is let me run this example give me a
second
okay so I'm running that code not for
you
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>