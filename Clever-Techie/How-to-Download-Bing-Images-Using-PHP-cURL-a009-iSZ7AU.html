<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>How to Download Bing Images Using PHP &amp; cURL | Coder Coacher - Coaching Coders</title><meta content="How to Download Bing Images Using PHP &amp; cURL - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Clever-Techie/">Clever Techie</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>How to Download Bing Images Using PHP &amp; cURL</b></h2><h5 class="post__date">2017-02-28</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/a009-iSZ7AU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys what's going on it's clever
tikki and in this video we're going to
be creating a script to download images
automatically from Bing search engine
let's go ahead and go to Bing calm and
click on the images I'm going to enter
make sure for the keywords but you guys
can enter anything you like so these are
all the images I'm going to be
downloading to my computer I already
have the script created so I'm just
going to demonstrate what it's going to
do I'm going to copy the script name and
I'm going to open up the command window
here so I PHP to run the script enter
and then check the images folder and as
you can see all the images are being
downloaded automatically and I can
double click on one of them and it's
going to show the full resolution off
the image so that's what we're going to
be creating let's go ahead and get
started on the script okay so I have an
empty created empty files called it
download Bing images that PHP so the
first thing we're going to do here is
we're going to copy this URL here but
before we do that let's go ahead and
click on filter go to image size and
click on extra-large
and for the type I want to select
photograph now we can copy this URL up
here into our file and just comment it
out for now and we will like that so for
the keyword next I'm just going to use
nature and as you can see being created
the keyword twice in the URL for some
reason so you want to replace that with
our keyword and let's say that whole
thing in a variable called URL and put
it inside double quote and replace the
nature with our keyword now we also want
to replace the space with a plus sign
because that's how the structure of URL
works so I'm going to use a concatenate
and use the STR replace function to
replace the space with a plus sign and
close it here and I'm just going to copy
the whole thing including it
double quote and replace this part as
well okay so now our URL is ready to be
loaded inside curl which is what we're
going to be using to get all the data
from the page and we're also going to be
using curl to download the actual images
so I'm going to go to new line here and
and let's create our curl resource by
using a function called curl initialize
then I'm going to set some curl options
the first one is going to be for loading
up our URL so I'm going to provide the
curl resource comma Carol opt URL and
then provide the URL that we're going to
be loading which is up here next up I
want to return the whole thing as data
and store it inside the variable so I'm
going to use this constant called return
transfer and set it to true then I'm
going to store the output inside the
variable called output using curl
execute function and then what we want
to do is curl close to close the curl
resource and that's it let's go ahead
and test to see what the output looks
like
run the script and perfect it's loading
the search page where we're ready to be
where we're ready to match all the image
names and along with that URLs so we can
download them but before we move on
let's actually create a quick function
out of this curl so that we don't have
to repeat ourselves later on so let's
write a function and let me get and oh
it's going to have is a URL for the
argument name and I'm going to enclose
everything inside the curly brackets and
then I'm going to return the output as
I'm going to return the output from the
function
so now if I wanted to use this I would
just and if I wanted to stir everything
inside the output variable I would just
type output equals get and then URLs so
that we don't have to type all this over
again when we're going to be loading
another URL for image downloading and
now I'm just going to test it out again
actual output everything still works
just the same so okay so the next step
is to we want to identify which parts of
images URLs that we're going to be
matching so here I'm going to open up
the developer tools and click on
inspector actually first I'm going to
click on one of these images and then
I'm going to open up the inspector and
click on the inspector and then click on
the image itself and then what I want to
do here is I want to edit this HTML so I
can copy the image URL and just go ahead
and copy the image URL and save it
inside of your file for now now we're
going to go back to the output so go
ahead and run the file again and make
sure the output is then printed out then
you can click you can quote right click
on the window and go to view page source
and then go ahead and search press
control find and search for that exact
URL that you just copied so inside of
this HTML source code it's going to show
this URL and this is the URL that we
want to match if you're right if you
just click on it it's going to show the
full size resolution of the image which
is exactly what we want so for the
matching we're going to copy this part
which is how we're going to be which is
how we're going to know that this is the
image URL that we want to match so we
want to grab all of this HTML here and
copy it inside of our file
okay so I'm just going to enclose all of
that inside a comment okay now we're
ready to match all the image names using
regular expression so fragment all I'm
going to go ahead and grab this HTML
here and for the actual URL we don't
need to be copying the whole thing which
is going to say match anything and
capture it inside the regular expression
group and I'm going to actually use
single quotes so what I have to escape
double quotes and don't forget the
exclamation marks then I'm going to
provide the output which is what we're
going to be matching from and store
everything inside URL matches then it
can print our URL matches one and one is
a group where everything is being
captured just to test out to see if
everything works and let's go ahead and
test this out oops
close the by accident let's go ahead and
run it again okay so it's printing out
the output so I'm going to comment this
out you use source and perfect or all of
the URLs all the images are being
matched okay so now now that this works
we are ready to use curl to download all
the images but before we do that we
actually need the image names so we got
to capture this last part of the URL so
that when we're saving those images we
can we can have all the image names
without the actual long URL because it's
not going to be valid if we're saving
these images on a Windows computer
and this part is actually a little bit
tricky because if we're going to be
matching this last part from the forward
slash to the last part let me just show
you something I'm going to go to a site
called rag X 101.com
and I'm going to paste that image URL
for the source code so here's what would
happen if I would try to match this last
part so if I just did that and I was
expecting to match this last part from
the forward slash to the JPEG it
actually grabbed this first the very
first forward slash from the beginning
and captured the whole URL we don't want
that we don't want we just want this
last part where it says green wall
nature wall dot jpg which is the image
name so in order to do that we're going
to match all the matches which have
anything and end with a forward slash
and then we're going to use a function
called n to grab the last match of the
array which is going to be this part
here and then we're going to use another
regular expression to match this part
until jpg which is going to give us the
image name okay this will make more
sense as we code this so let's go ahead
and do that now so first of all we're
going to do is we want to look through
all of our image URLs so let's go ahead
and create a loop for that set the
counter and we're going to be counting
until the end of our URL matches okay
here's the part where we're going to be
matching all of all of those all of the
content which ends with a forward slash
so we're going to use a function called
preg match all and for the regular
expression is going to be very simple
match anything with a forward slash in
it which ends with a forward slash and
the content that we're going to be
imagine is the URL underscore matches
which is our URL of course provide the
eye as well and then let's store
everything inside the matches and let's
test it out let's see what the first one
looks like and going to use guys so it
doesn't continue running okay so down
here you can see that I'd print from the
first URL which is the blogspot one with
green nature wallpapers it matched all
the all the content with a Forbes flash
in it and this is our last part which is
what we want so we're going to use a
function called end to grab that last
part and we're going to name this we're
going to save that in a lost part
variable which makes sense matches zero
and now let's echo out the last part I'm
going to comment this line out oops I
need to die here okay so that's the last
part and that's exactly what we're going
to be using to match the image name okay
so now that we have the last parts we're
ready to match the image name so let's
use a frag match function put the last
part inside of it and the last part is
going to be followed by the image name
which is which can be anything and then
it's going to end with a jpg and we're
capturing everything inside the round
brackets which is going to be our
capture so for the content we're
matching the actual URL again and we can
store everything inside the match okay
let's see if print our match one died
okay so it's in fact matching the image
name and now now that we have the image
URLs and we have their the image names
we're ready to save them
so go ahead and do that first of all I'm
going to actually going to replace the
plus sign from the image name with a
dash which is going to be a lot more
friendly when saving files to the
computer so that's how we replace the
plus for the dash using the nester our
Stra place function next up let's say
the image URL in a variable as well
which is going to be our REO rel matches
one I so that's going to be our image
URL now now that we have the image URL
we actually want to load up the curl to
get the image data so for that which is
going to store that inside image data
and here that's what's beautiful about
the functions we're just going to use
our function get and we're just going to
provide that image URL and we'll have
our image data which is ready to be
saved on the computer now so now we have
all information we have all we have the
image data we have the image name and we
have all that and now we're ready to
save everything onto our computers so
we're going to create a path where to
say that my path is going to be C local
host PHP images so if I go to this
folder here this is my folder C local
host PHP I'm going to create a folder
called images as well and this is the
folder word is going to be saving all
images make sure to provide your own
folder for that okay so now we're ready
to save our images finally let's create
a resource with a F open function and
provide the local path along with an
image name which is going to concatenate
the image links to the source
destination and we're going to use W to
write the image names
then we're going to use fwrite function
to write the actual image data which
takes in the parameter resource which is
our file and then the image data which
we got from curl here and that will save
the image and then we're just going to
close the resource with app close okay
so now everything should be working so
let's go ahead and run the script and
check the folder and in fact everything
is working it's downloading all the
image names automatically from bing and
if you check the image it's in fact the
full resolution size and it's
downloading all these beautiful images
automatically and that's it if you guys
found this video useful please like
share and subscribe and I'll see you
next time clever take you out</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>