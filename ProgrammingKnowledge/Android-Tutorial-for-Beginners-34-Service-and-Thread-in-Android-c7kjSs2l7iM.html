<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Android Tutorial for Beginners 34 # Service and Thread in Android | Coder Coacher - Coaching Coders</title><meta content="Android Tutorial for Beginners 34 # Service and Thread in Android - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/ProgrammingKnowledge/">ProgrammingKnowledge</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Android Tutorial for Beginners 34 # Service and Thread in Android</b></h2><h5 class="post__date">2015-07-26</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/c7kjSs2l7iM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello guys welcome to the next video
tutorial on android app development for
beginners in the last video we have seen
what are services in android and how we
can create a started service in android
now in this video we will talk about
using services with threads so in the
last video I have told you that service
is a background task which will run in
the background and which has nothing to
do with your UI but still it's the part
of your process it's not a different
process so it will run inside your mean
process now for example if your service
has some blocking action for example you
wait for some time
in a synchronized manner then it will
block your user interface actions for
this time because it's the part of your
process and it's not running in the
different thread so let's see what this
error is which I am talking about and
then we will see how we can solve this
problem using threads with services so
first of all I will start with my last
project which I have created in the last
video for starting services and stopping
surfaces so I will take this same
project so first of all what I'm going
to do is I'm going to take our text add
it in my activity and I will change the
layout width of this text as fill parent
for example and this text edit I will
use to give some input from the user
side while my service is running ok now
what I'm going to do is I'm going to go
to my service class so this was the
class which I created in the last video
which extends from the service and I
have shown you how to create this on
start command and on destroy method and
this I binder and on
create method so first of all I will go
inside my on start command and in here
what I'm going to do is I'm going to
create some code which takes some time
or it will block my service for some
time so I will take a synchronized and I
will pass this context to it and inside
my synchronize I will wait for sometimes
I will call a method called wait and it
takes time in milliseconds so for
example you want to give time for 10
seconds you can just give ten thousands
okay so for us I think 20 second will be
enough to wait and whenever you add this
wait method you need to include a
try-catch block to handle this method so
just surround this by try-catch block
and everything will be okay so what this
code will do is it will wait for 20
second in a synchronized manner so it
will block your service for 20 second
and it will not allow your user
interface to do anything so let's run
this app and let's see what happens so
my app is running now and for example
now I can input some text here right and
I can delete some text from here but
observe when I click this start button I
will click the start button and then my
service will start and when my service
will start I cannot enter anything
inside this added text because the code
is waiting for 20 second and it will
give this message something like this
that your app isn't responding you want
to wait or you want to close the app for
example I will wait for some time
because I know my service will run for
20 second and after 20 second this
service will be destroyed and I
once again give this input once again
okay so I think you understand the
problem when I click or when I start the
service which is blocking I cannot
perform any task in my UI this is the
problem and you will get this message
called your app is not responding do you
want to close or you want to wait so now
to solve this problem what we can do is
we can create our service or we can
start our service inside a different
thread okay
so when we use or when we start our
service in a thread its independent from
our main process and this will solve our
problem so let's see how we can solve it
so I will go to my the service class
once again and inside my the service
class I will create a class which will
handle my thread so final class and this
will be the thread class or the thread
and this class will contain one variable
which I will call it as start our ID or
service ID better
okay so service ID and this we will see
why I am doing this and now I will
create our constructor so the thread
this is my constructor and I will pass
one argument here and this will be same
as service ID and what I want to do is
whatever I pass as a constructor
argument I want to pass it to this
variable so I will just write this dot
service ID is equal to service ID okay
now what I'm going to do is because I
want to create a thread out of it
I will implement the runnable method
okay so implements runnable
and when you implement runnable to your
class you need to implement a method
called run so just click this bulb here
and implement this run method okay and
inside my run method what I'm going to
do is I'm going to just cut this code
which I have written in my own start
command and paste it here inside my run
method okay now there is one more thing
that there can be multiple services
running in your app right and how will
you know that which service you want to
end or close so what we can do here is
just after this try-catch block inside
my synchronized I can call a method
called stop self okay and this will stop
the service okay and it can take on an
argument which is the service ID so
whenever you create a service your
Android system will create a service ID
for this and using the service ID we can
close this service okay
so just add this code here now this
service ID where can you find it you see
in your on start command there is a
parameter called start ID and this will
be your service ID so now we have
created the code for our thread now we
can create a thread and start it and
then try to run our program so I will
create a thread object thread is equal
to new thread and I will call my custom
thread class so the thread and it takes
one argument which is the service ID so
I'm going to provide the start ID here
okay and now I just simply need to use
this thread object to start the spread
thread dot start we'll start the thread
right now I'm going to run my program
once again and my app is running once
again now so you can observe I can enter
some text without starting the service
and when I start the service and still I
can enter this text here ok so because
this service is running in different
thread I can perform actions in the UI
and my service is running in the
background in different threads so both
action can be done at the same time and
after 20 second you will see this
service destroyed method which is coming
from this code which is this top self
method right so you can perform your
actions in UI and you can start the
service and you can still perform your
actions in the UI so in this way you can
use threads with your services in
Android I hope you enjoyed this video
please rate comment subscribe and bye
for now</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>