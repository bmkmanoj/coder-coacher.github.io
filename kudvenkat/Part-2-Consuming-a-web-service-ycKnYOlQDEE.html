<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Part 2   Consuming a web service | Coder Coacher - Coaching Coders</title><meta content="Part 2   Consuming a web service - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/kudvenkat/">kudvenkat</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Part 2   Consuming a web service</b></h2><h5 class="post__date">2013-11-07</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/ycKnYOlQDEE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">this is part 2 of a speedor net web
services in this video well discus
consuming a web service from a client
application this is continuation 2 part
1 so please watch part 1 before
proceeding to consumer web servers all
we need to do is generate a proxy class
using the web service they still
document Vistal stands for web service
description language if you recollect
from the previous session this is the
calculator web service that we have
built and to get the Vistal document of
this web service all we need to do is
click on the service description link
that takes us to the vestal document as
you can see here in the URL so what is
this Vistal document Vistal document
formally defines a web service and what
does this Vistal document contain it
contains lots of things
it contains lists of all the methods
that are exposed by a web service if you
look at the web service that we have
built it only exposes one method called
add and if you look at this Vistal
document look at that add method is
listed here and not only that along with
the list of method names Bristol
document also specifies the parameters
that this method expects so basically if
you look at this add method it expects
two parameters and their names our first
number and second number you can see the
parameter names here our first number
and second number along with the
parameter names it also specifies the
data types for both of these parameters
data type is integer and we can see the
type here integer not only that Bristol
document also specifies the return type
of that method
so basically when we call this method
it's going to do something in our case
it's going to add these two numbers
together and it's going to return their
sum which is an integer so the return
type of this add method is an integer
and if you look at this section here
look at the return type it's an integer
and look at the name here it says add
result basically that means the result
of this add method what is its type it's
an integer so using the
information that is present in this
versatile document visual studio can
generate a proxy class for us and let's
now see how to generate a proxy class
using this Vistal document so now let's
flip to visual studio so first of all
let's add a web application to the
solution and to do that right click on
the solution add new project now we can
invoke web service from any application
you can invoke it from a web application
or Windows application or even from a
console application not only a dotnet
application any type of application are
you know built on any platform for
example a java web application also can
invoke an asp.net web service ok all
right now let's go ahead and add an
asp.net web application let's call this
calculator web application let's click
OK so here we have the web application
now let's generate a proxy class and to
generate a proxy class right click on
the references folder and select this
option add service reference if you
select this option add a reference you
can add references to the assemblies
either in your project or to the dotnet
assemblies now we want to add a
reference to a service that is to a web
service so select this option add
service reference and within this window
add service reference window we need to
type the address of the vestal document
and here we have the address of the
Vistal document so let's copy it and
paste it within the address bar and then
click this Go button look at that
you know the calculator web service is
detected now is it mandatory to specify
question mark visto not really you can
even get rid of that and then when you
click go
it still discovers that so it's not
mandatory that you specify question mark
visto at the end of the URL of your web
service and then if you expand this
arrow
and select this option here look at that
this web service exposes one method
called add and then give a meaningful
namespace for your service reference
let's call this maybe calculator service
and then click ok so once we click ok
what's going to happen now
visual studio based on the Vestal
document it's going to generate a proxy
class for us look at this there's a
folder called service references and
under that we have the namespace that we
have provided which is calculator
service and if you want to look at the
generated proxy class click this button
within the solution Explorer which says
show all files and then if you click
this arrow there is references dot SVC
map and if you expand that we have this
reference dot CS file so if you open
that file here we have a class called
calculate a web service soap client so
this is the proxy class and if you
scroll down look at this this class has
got this add method and it's both two
parameters first number second number
and their types are integers so this is
very much similar to what we have in our
web service now the client application
that is our web application is going to
communicate with this proxy class and
then that proxy class is going to invoke
the web service method so let's now add
a web form to this web application let's
click Add and then within this wave form
let's create a table and let's set the
style attribute
and within this table let's include a PR
tag and then let's specify two TDs so
within the first TD we'll just say you
know we'll use a bull tag and then say
first number so this is the prompt for
the user to enter the first number into
the text box that we are going to add
and maybe let's call it t XD first
number let's make a copy of this table
row and let's name this second number
and let's call this D XD second number
and then we need a label control to
display the sum of the two numbers so
let's make another copy of this TR and
let's call it result instead of a text
box let's drag and drop a label control
and let's give it an ID of LBL result
and let's get rid of this text property
and then finally we need a button so
let's include another TR and let's
specify the column span for this TD to
two and within this TD let's drag and
drop your button control and let's
change the ID of the button to button
add and text on that to add and let's
flip this to the design mode
double-click on the button control to
generate the click event handler and
here we are going to interact with the
proxy class that we have generated and
if you remember the name of the proxy
class is web service soap I mean
calculate a web service soap line so
let's go ahead and create an instance of
this class and if you remember this
class is present in calculator service
namespace so here the namespaces
calculate a service the fully qualified
name space
calculator web applications or calculate
the service but within our web form
we are already within that calculator
web application namespace so when we say
calculator look at that we can see
calculate a service namespace there dot
what is the class that we are interested
in calculate the web service so client
so let's create an instance of that is
equal to new so client and we know that
this client object has got add method so
we are going to invoke the add method of
the proxy class and look at that it
expects two parameters to be passed so
where are we going to get the first
number and second number from from the
web form you user interface elements so
we have the textbox called a txt first
number use the text property but we need
to convert that to an integer so let's
use the converter class and convert a
tree integer in a similar fashion let's
also retrieve the second number from the
other textbox so the other text box is
txt second number now obviously when we
call this method what is this going to
do this is going to call the web service
add method and then it's going to add
those two numbers and we are going to
get the sum back
so let's store that result in a variable
of type integer and let's call it result
finally let's go to and display that
result within the label control so
result dot to string all right now let's
actually run this and see if it works as
expected so now if I press control f5
you know web services demo is actually
set as the starter project you know so
in order for us to run this waveform as
the startup page first we need to set
this project as our startup project and
then set this platform as the startup
page ok or you can simply right click on
the page and select this option view in
browser
okay so it's asking for the first number
and second number let's say 1020 and
click Add look at that you know 30 is
displayed now if you look at you know
the web application itself we don't have
the logic of adding two numbers here
where is the addition done that is done
by the web service now if you recollect
from the previous video session we
access web services using HTTP protocol
and the message is with web services are
exchanged in soap format but are we
sending a soap message to the web
service no so who is doing the
conversion for us so if you recollect
from the previous session so if you go
back to the web service when we click on
add look at that we have here a soap
request and response messages this is
how a request must be sent for a web
service method but we are not doing that
here so who is converting this method
call into a soap request message to the
web service that's being done for us by
this proxy class you know this
calculator web server is soap client so
basically when this application that is
the dotnet client application invokes
the add method of the proxy class this
proxy class is going to take these
dotnet types you know the integers and
then it's going to prepare a soap
request message for us and then it's
going to automatically call the web
service method the web service will then
execute that method you know add those
two numbers together and then it's going
to send a soup response back to the
proxy class not directly to the client
application the proxy class is then
going to deserialize that soap message
back into dotnet integer type and then
hands it to the dotnet application which
is in our case displaying that number
within the label control okay so
basically the process of serialization
that is converting dotnet stipes to a
soap request message and then once that
response is received
the webservice converting that soup
response back into dotnet types that is
d serialization again it's done by the
proxy class okay so all the hard work is
done by the proxy class we consume the
web service just like we would any other
class in a class library so it's no
different all the hard work here is done
by the proxy class for us so it's that
simple even if you have a Windows
application it's very much simpler you
will have references folder within
Windows application you simply right
click on that and select add Service
reference and you invoke the web service
in a similar fashion all right now in an
interview the interviewer may ask you
the following questions related to
consuming a web service he may ask you
what is we still and what is its purpose
how is a proxy class generated what is
the use of proxy class what actually
happens when a web service reference is
added the answer for all these questions
is present in these two paragraphs so
basically Visual Studio generates a
proxy class using the Vistal document
Vistal stands for web service
description language vegetal document
formally defines a web service and what
does this Vistal document contains it
contains the list of all methods that
are exposed by the web service the
parameters and their types and the
return types of the method we have in
fact inspected the Vistal document as
well this information is then used by
visual studio to create the proxy class
the client application calls the proxy
class method the proxy class will then
serialize the parameters that is the
dotnet types and then prepares a soap
request message and sends it to the web
service the web service executes the
method and then it returns a soap
response message back to the proxy class
the proxy class will then take the
responsibility of DS utilizing the soap
response message and then handing it
back to the client application that is
in our case the asp.net web application
so we don't have to
Manuel is here Eliezer deserialized
dotnet sealer objects to and from soap
format all this hard work is taken care
of that by the proxy class so the
serialization and deserialization is
done by the proxy class and and it makes
the life of developer much easier
alright that's it for today thank you
for listening have a great day</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>