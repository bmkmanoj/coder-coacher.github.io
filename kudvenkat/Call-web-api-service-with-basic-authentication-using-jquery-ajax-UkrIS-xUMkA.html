<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Call web api service with basic authentication using jquery ajax | Coder Coacher - Coaching Coders</title><meta content="Call web api service with basic authentication using jquery ajax - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/kudvenkat/">kudvenkat</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Call web api service with basic authentication using jquery ajax</b></h2><h5 class="post__date">2016-10-04</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/UkrIS-xUMkA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">this is part 19 of asp.net Web API
tutorial in this video we'll discuss how
to pass basic authentication credentials
to the asp.net Web API servers using
jQuery AJAX at the moment when we issue
an ajax request from our employees door
HTML page we don't get any data and if
we inspect this in Fidler we get four
zero one unauthorized this is basically
because the web api service expects
basic authentication credentials which
we have not supplied so here is what we
want to achieve we want to include two
text boxes for username and password on
our HTML page and depending on the
credentials provided the web api service
should authenticate and return the
correct results for example if we use
female username and password this
service should return only female
employees and if we use male username
and password it should return only male
employees on the other hand if we supply
a username and password that does not
exist the server should deny access and
return for zero one unauthorized so
let's see how to achieve this let's flip
to visual studio now in our employees
dot HTML page let's include two text
boxes to capture user name and password
so the text here is user name let's
include a text box input type equals
text ID equals txt user name let's
include another text box for capturing
password so the text here is password
and the ID of the password text box is
txt password let's also include two HTML
break elements and let's change the text
on this button get all employees to
authenticate and get employees and when
we click this button authenticate and
get employees the first thing that we
want to do is retrieve the username and
password from the respective text boxes
so let's create a variable username
equals let's use the jQuery ID
selector and find the username text box
using its ID and on this let's call the
jQuery Val function to retrieve the
value from the text box let's do the
same thing for password so the password
text box ID is txt password so we have
username and password in these two
variables now when we issue the Ajax
request we also need to specify the
authorization header so let's include
its section 4 headers and the name of
the header is authorization remember the
value for the authorization header
should start the district basic and then
to that we will have to append
base64-encoded colon separated username
and password we have user name in this
variable username and to that lets
append colon and to that we will have to
up end password which is present in this
password variable now we need to encode
this string to base64 to do that we are
going to use b2 or a function so this
function converts the specified string
to base64 so we have our authorization
header and if you look at what's
happening within our success function we
are simply displaying the full name now
in addition to full name let's also
display gender so we know whether we are
retrieving male or female employees so
to the full name I am also going to
append a bracket and within that let's
display gender to get the gender let's
use the gender property on the valve
object and then let's close the bracket
and we are closing the list item let's
also specify complete callback function
so this function will be called whenever
the Ajax request completes this is also
called when the request completes
successfully now we don't want to do
anything special when the requests
complete successfully because when the
request completes successfully it's
going to retrieve the employees and it's
going to display them within the
unordered list but when it fails with
status code for zero one that's when we
want to display this text for zero one
unauthorized in red color so we are
using this function for displaying that
error message so this function is going
to have a parameter and that is going to
be jQuery XML HTTP request object now we
are going to use that object jQuery XML
HTTP request object and then check the
status so if the status is for 0 1 that
means the request is unauthorized so if
the request is unauthorized this is the
message that we want to display for 0 1
unauthorized so first of all we want to
empty out whatever we have in the
unordered list so let's use the empty
function and to the unordered list
let's append a list item so unordered
list employees dot append so we want to
append a list item and within the list
item we want to display the status which
is for 0 1 and the status code so let's
separate them with a colon and then they
status text so let's use the jQuery
xmlhttprequest object again and then use
this status text property and then we
also need to close the list item all
right so let's give our solution a build
build succeeded now let's go ahead and
reload our page let's specify a username
and password that does not exist look at
the password in the password text box
it's in clear text and when we click
this button the error message is also
not in red color so let's fix those two
issues now we don't want the password to
be in clear text so let's set the type
of the textbox
and let's change the color of the list
item here so let's set the style
attribute and set color to red let's say
what changes reload our page one more
time
now let's provide a username and
password that does not exist and when we
click this button notice we get the
error message and red color is expected
now let's specify a username and
password that exists in the database so
we have specified mail username and
password we get mail employees if we use
female as the username and female as the
password we only get female employees
this employees dot HTML page is present
in employee service project which also
contains our asp.net Web API service so
in this case the Ajax request is being
issued from the same domain so the
question here is if request is issued
from a cross domain will there be any
change in the way we send this
authorization header the answer is no
whether we issue the Ajax request from
the same domain or from a cross domain
the way we send the authorization header
remains the same let's actually prove
this in one of our previous videos in
this series we've created this client
application project within this project
we've got this HTML page one dot HTML
and from here we are issuing a cross
domain Ajax request what I'm going to do
here is copy the HTML and the jQuery
code that we have in our employees dot
HTML page and paste it within our HTML
page one dot HTML the only change that
is required on this page is to the URL
of the web api service since the web api
service is present in a different domain
we have to specify the complete URL so
the web api service is present at this
port number two three to five eight so
instead of using a relative URL let's
use the complete URL so that's the only
change that is required now let's view
this HTML page
in the browser so now if you're viewing
HTML page one dot HTML if we specify an
invalid username and password we get
four zero one unauthorized as expected
and if we specify a username and
password that exists in the users table
we get the data as expected here is the
HTML and jQuery code that we just
discussed thank you for listening and
have a great day</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>