<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Part 32   Message Exchange Patterns in WCF | Coder Coacher - Coaching Coders</title><meta content="Part 32   Message Exchange Patterns in WCF - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/kudvenkat/">kudvenkat</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Part 32   Message Exchange Patterns in WCF</b></h2><h5 class="post__date">2014-02-17</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/pCh7_pN5Z1Y" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">this part 32 of wucf video series in
this video we'll discuss the different
message exchange patterns that are
available in WCF message exchange
pattern describes how the client and the
WCF service exchange messages between
them here is the list request reply
one-way duplex the default message
exchange pattern is request reply let's
understand this message exchange
patterns with an example let's flip to
visual studio so here I have a simple
WCF service project and if you look at
the service contract we've got two
operation contracts here and if you look
at this operation contract here you know
notice that we haven't used any
parameters but if you look at this
operation contract we are saying is
one-way equals false okay now what is
the message exchange pattern for this
operation contract
it's request reply because the default
message exchange pattern is request
reply and what is the message exchange
pattern here here also
it's request reply so basically we use
this parameter that is each one way
parameter of the operation contract
attribute to specify the message
exchange pattern and when we say 'yes
one-way equals false then the message
exchange pattern is request reply the
default is also false for this parameter
which means that respect you of whether
we specify this parameter or not in both
of these cases the default message
exchange pattern is request reply if you
want it to be one way then simply set it
to true well this is one way message
exchange pattern in our next video so
what is this request to apply you know
message exchange pattern going to do you
know as the name suggests the client
makes a call to the service and then it
simply waits for the service to return a
response back okay so during that wait
period the client stops processing and
it is blocked okay so the client makes a
call waits for the response to come back
from the WCF service so there is a
request and there is a reply so that's
why it's called request reply message
exchange pattern let's see how this
operation contracts are implemented so
within this file sample service dot see
as if you notice this request to apply
operation it's straightforward you know
the first line as we are capturing the
start
I mean date and time at that point when
this line executes and then we are
making this thread that's executing you
know the request sleep for two seconds
and then after that we are again
capturing the current date and time at
that point and then ultimately we are
subtracting the start date from the end
date and computing the time I mean
basically the difference between the two
dates in seconds and then converting
that to a string so that number is then
appended to this text right here and
then that's what is returned to the
client and look at the return type here
at string and what are we doing with in
this operation contract we are simply
throwing and not implemented exception
so straightforward WCF service here and
we have hosted the stub you see of
service in a console application and
here is the configuration of the WCF
service and if you look at the binding
at the moment we are using net tcp
binding okay so we have discussed
hosting WCF service in the previous
sessions of this video series so if
you're new to hosting please watch those
videos so let's go ahead and run our
host so the host is running and I have
also we implemented a client application
for this WCF service and it's a Windows
application so basically I have added a
service reference to the WCF service and
then if we look at the form we have got
a list box control and then three button
controls here and if you look at you
know the Clear button it should be
straightforward all we are doing here is
clearing the items within the list box
and if you look at this request apply
operation click event handler what is
this doing this is basically invoking
the request to apply operation of the
WCF service and where is this client
created so if you look at this at the
class level you know we have specified a
reference variable for our sample
service client and within the
constructor of this form so basically
when the form is loaded we are creating
an instance of the proxy class
okay so what are we doing with the click
event handler straightforward to the
listbox we are adding this string so
basically they start in date time
immediately when the user clicks the
button we are adding that string to the
list box and then look at this we are
disabling the button control itself just
before we are invoking the WCF service
method and then once we get a response
from the WCF service wheel we are
enabling it immediately and then we are
appending a basically adding this line
of text you know with the date and time
stating that request reply operation is
completed to the list box and finally an
empty string so straightforward code
there and if at all if there is any
exception we are displaying that
exception message within MSH box let's
quickly look at in a request replay
operation throws exception again you
know straightforward it's very much
similar but here we are invoking the
request to play operation throws
exception method ok all right let's go
ahead and run the client so now if you
look at this request reply operation
within the WCF service what is it doing
it is basically blocking for two seconds
so when we click this button what is
going to happen the client is going to
make a call to this WCF service method
and then it is going to wait so the
client is basically going to wait until
a response is received from the WCF
service so there is a request from the
client and the client waits for the WCF
service call to complete and then return
so there is a request
there is a reply and hence the message
exchange pattern is called as request
reply message exchange pattern so look
at this when we click this button look
at that the button is disabled and it's
waiting the you know the client
processing stopped and it's waiting for
the response to come back from the WCF
service okay and one very important
thing we have to keep in mind is that
look at this this WCF service method
return type here is string
okay means you know the method is going
to return something back so we are going
to use that in the client application
some way or the other
okay so there's something for the WCF
service method to return okay but just
imagine what's going to happen if you
think you know the return type is void
and if this method is not going to
return anything even then okay you know
the message exchange pattern here is
request reply so even if the return type
is void that line still waits for the
response to come back and empty response
will be returned so until then the
client is waiting you know the
processing is suspended on the client
and it's waiting for the call to return
upon you know the call when it returns
from the WCF service that's when it will
resume processing that the rest of the
lines okay so basically what happened
when we click that button you know just
before calling that request reply
operation we are disabling the button
control that's why you saw it as disable
and it got enabled only after the call
returned from the WCF service all right
now let's go ahead and click this button
and see what's going to happen so when
we click this button it's going to call
a request reply through operation
exception which is going to throw an
exception so now there is an exception
so in request reply message exchange
pattern if at all if there are so falls
or exceptions you know when WC service
methods are invoked those will get
returned immediately on the same call to
the client okay
the reason it's very important we
understand that is because in one-way
message exchange pattern the falls and
exceptions doesn't get reported
straightaway to the client we'll discuss
that in our next video session but for
now understand that within request reply
operation you know message exchange
pattern the faults and exceptions get
reported to the client you know on the
same call right away if there are any
okay so let's click this and see what's
going to happen look at that the method
or operation is not implemented that's
the actual exception that has occurred
on the WCF service
and that's a dotnet exception so if you
look at the WCF service so throw not
implemented exception so this is a
dotnet exception it's not handle and
that there is an unhandled exception
what's going to happen you know it's
going to fault the channel communication
channel between the client and the WCF
service we discuss this in our falls and
exceptions video series in the previous
sessions of this video series okay so
when the communication channel is
faulted we cannot use the same instance
of the proxy class for communication
between the client and the WCF service
anymore so now when we click this button
we are going to get you know that
exception the communication object
cannot be used for communication because
it's in faulted state okay and this
happens especially when there are
sessions involved okay so if there are
sessions the the channel gets faulted
and as a result we cannot use the same
instance of the proxy class anymore for
communication between the client and the
WCF service so here are the points that
we need to keep in mind about West reply
message exchange pattern this is the
default message exchange pattern client
sends a message to a WCF service and
then waits for a reply during this time
the client stops processing until a
response is received from the WCF
service the client is going to wait for
the service call to complete even if the
operation return type is wide
irrespective of whether it is wide or if
the WCF service is actually returning
anything if the message exchange pattern
is request reply declined you know it's
going to make a call and wait for a
response to come back all WCF bindings
except the MSN queue based bindings
support the request reply message
exchange pattern in a request to play
message exchange pattern falls and
exceptions get reported to the client
immediately there are any and we use
this parameter of the operation contract
attribute to specify the message
exchange pattern basically if we set it
to false that means it's request reply
irrespective of whether you set it on
art you know the default value for that
parameter is false so both of these
declarations here are equivalent if we
want the operation contract to be one
way then you simply set that parameter
to true
we'll discuss one-way message exchange
pattern in our next video
that's it today thank you for listening
have a great day</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>