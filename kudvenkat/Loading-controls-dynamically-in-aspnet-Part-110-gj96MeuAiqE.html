<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Loading controls dynamically in asp.net   Part 110 | Coder Coacher - Coaching Coders</title><meta content="Loading controls dynamically in asp.net   Part 110 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/kudvenkat/">kudvenkat</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Loading controls dynamically in asp.net   Part 110</b></h2><h5 class="post__date">2013-01-06</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/gj96MeuAiqE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello welcome to idiom Technologies I am
venket this is part 10 of asp.net video
series in this video we'll discuss about
loading standard asp.net controls
dynamically we'll also discuss about
simple tips and tricks to maintain the
state of these dynamically added
controls across a postback in a previous
session of this video series we have
discussed about loading user controls
dynamically in this video we'll discuss
about loading the standard asp.net
controls dynamically what we actually
want to achieve is you know a user will
be presented with with a drop-down list
here this drop-down list is present on
the waveform at design-time with two
choices the user can choose to select a
city in which case a drop-down list will
be displayed and this drop-down lists
the city drop-down list is dynamically
added to the waveform and then from this
dynamically added control the user can
select a city and then when I click the
button look at this upon postbag this
drop-down list is able to maintain its
state and at the same time I am able to
also retrieve the value from that
drop-down list but on the other hand if
the user chooses to enter postcode
instead of the drop-down list a text box
is displayed where the user can enter a
postcode and when I click the button
look at this upon post pad the text box
is able to retain its state and at the
same time I am also able to retrieve the
value from the text box you know upon
postbag okay the text box and the drop
down list are dynamically added to this
waveform so let's see how to achieve
this so I have a webform here before
mate dot aspx on this for webform at the
moment I only have this drop-down list
and the list items within the drop down
list so if you look at this drop down
list it it has got three list items
please select this the first option with
a value of minus one and then select a
city where we have specified the value
is TTL because for the user to select a
city we want to display a drop down list
and for enter post word we have
specified the value as TB for text box
okay so and then we have also set the
auto post back property to true for this
drop down list so obviously when I run
this and when the user you know cell
a city now what we want to do when the
drop-down list post back to the server
automatically we want to add a drop-down
list okay so let's see how to do that so
this is the drop-down list double click
to generate the event handler drop-down
list one underscore selected and
exchanged now F in drop-down list one
the selected value if the selected value
look at that in the source if the
selected value is DDR then we want to
you know dynamically add a drop-down
list okay so if drop-down list dot
selected value is TDL what we want to do
we want to create a drop-down list
object so DDL drop-down list EDL is
equal to new drop-down list give it a
meaningful ID so that later we can
retrieve the values from the drop-down
list selected values from the drop-down
list using that ID so I'm going to
specify the IDS let's say DDL one for
example and then we want to add items
you know list items to this drop-down
list examples of some cities so I'm
going to say DD l dot items dot ad now
if you're new to drop-down list we have
we have a video recorded on the basics
of drop-down list in the previous
sessions in this video series I would
strongly recommend to watch those videos
first but look at this I want to add a
list item here but there is another
method where we can simply add the list
item as a string so I'm going to specify
New York is one of the city and along
the same lines let's add two more cities
and I'm going to say New Jersey and
maybe Washington DC okay so I have three
cities added as list items to the
drop-down list finally we want to add
this drop-down list to this waveform
okay now on this waveform I want the
drop-down list to be added after this
drop down list so I'm going to have a
break element after the initial drop
down list and then another drop down
list here so let me
now we want to add this drop-down list
dynamically to the webform and I want to
add the city drop-down list at this
location so obviously we need a
placeholder control there so let me drag
and drop the placeholder control so the
idea of the placeholder control is
placeholder one and then after that we
want a pattern control which the user
can click to retrieve the value from
that drop-down list so let me go ahead
and add a button control okay so now
let's flip to the design mode and then
to this placeholder control we want to
add our drop-down list so I'm going to
say placeholder one dot controls
collection dot add what do we want to
add we want to add the drop-down list
object okay so done on the other hand
else if the drop-down list in the drop
down list if the selected value is equal
to text box if the user has chosen to
enter the post code then the selected
value will be text box in which case if
you want to add a text box dynamically
so text box DB is equal to new text box
and then we want to give it an ID so TB
ID is equal to I'm going to say TB one
maybe and then I don't want any kind of
text within that and I simply want to
add that to the waveform so placeholder
one dot controls dot add and we want to
add text box that's it okay so let's go
ahead and run this at this point and
then see what's the behavior okay so the
webform should load up now let me go
ahead and select city look at that I'm
able to select I have the drop-down list
here on the other hand if I enter
postcode look at that you know text box
is rendered so very fine but there are
problems with this waveform as it stands
right now look at this I select city
city drop-down list is rendered and then
I can select the city from the drop-down
list let's say I select Washington DC
now when I click this button what should
happen I should retain the values in
this dynamically generated text box
across
but let me click that and see what's
going to happen look at that as soon as
I click the button the dynamically
generated control is vanished and it
makes sense
that's because look at this when are you
actually adding these controls
dynamically when the selected index
changed is raised for the drop-down list
one control now look at this when the
selected index changes here it's adding
them finally I'm fine
but then when I click this button when I
click this button what's going to happen
the webform will post back to the server
and within the button click event look
at this let's double click that to
generate the event handler within the
button click event we are not doing
anything and within the page load even
nothing is happening
the controls are added dynamically only
when this event is raised when I click
the button obviously drop-down list one
selected index changed event is not
raised so obviously these controls will
not be their present on the webform and
another thing to keep in mind the reason
why these controls are not persisted
across a postback is because now web
forms work on a stateless protocol we
have discussed about this in in part two
or three I don't remember the part
number but we have discussed this in the
previous sessions of this asp.net video
series you know web applications work on
a stateless protocol so every request is
kind of like a new request to the web
server and then the web server is going
to recreate an instance of this webform
and all the controls on that platform
from the scratch once again okay
so obviously when I click this button it
does not know anything about that the
web server doesn't know anything about
this platform 8 until a new request goes
to the web server on the web server it's
going to recreate an instance of this
platform 8 class so this platform 8
class will be created page load event
will be processed and then in the page
where we don't have any code so nothing
is going to happen but then within the
button click event again we don't have
any code so it just you know renders the
web form with that drop-down list you
know the drop-down list that we had at
design time which is this specific
drop-down list okay
but then when I select you know any item
within this drop-down list that I have
here
at this point what happens another
request was request for waveform 8 so
it's going to create an instance of this
waveform again and then within the page
load event we don't have any code so
nothing happens but then after that the
selected index change the event of the
drop-down list 1 is executed in which
case if you have selected
you know enter postcode the selected
value is textbox so it's going to create
that instance of the textbox specify an
ID and add it to the webform and that's
how we have these controls properly
generated when the selected index change
the event of drop-down list 1 is fired
but then when I click this button look
at that they get managed ok so let us
see how to you know a simple sub tips
and tricks to basically retain the state
of these dynamically generated controls
across postback so that we can retrieve
values from them and then save it to the
database ok so the trick I am going to
follow here is I'm going to add these
controls I'm going to move this piece of
code from drop-down list 1 underscore
selected index change the event to the
page load event ok so that's the first
thing that we'll do and then you know
I'm going to knock off these conditions
because I want these controls to be
generated every time okay and then this
is not properly formatted to properly
format that I'm going to select the
entire code and then press control K and
D that's going to format that
automatically for us so that's formatted
properly now but what what I'm going to
do right now is look at this on the page
load event of the waveform these
controls are added dynamically but we
don't want them to be visible when the
web page loads up so I'm going to set
the visibility of both the controls to
false so DDR dot visible is equal to
false and along the same lines I'm going
to set the visibility of the textbox
also to false ok so we have set the
visibility of these controls to false
but then let me run this as it stands
right now look at that at the moment
within the drop-down list one selected
in exchange we don't have any code all
the code we have moved it to the page
load event and what's the modification
we made
we made both the controls invisible by
setting the visible property to fall so
when I select city here nothing
basically happens why is that because
there is no code within the selected
next changed event of the drop-down list
one but what I want to do right now is
to change the visibility of these
controls within the page load event okay
so what I'm going to do here is F
drop-down list 1 dot selected value is
equal to the selected value is drop-down
list then what we want to do we want to
turn the visibility on for that
drop-down list so DD l dot visible is
equal to true else if the drop-down list
1 selected value is textbox then we want
to turn the visibility of that textbox
OT b dot visible is equal to true okay
so now let's go ahead and run this and
as you might expect only the visibility
of that selected control will be changed
look at this now if I select city the
drop-down list is shown here and then if
I select text box you know if I enter
pool if I choose enter postcode then the
text box is shown now the most important
thing to keep in mind here is look at
that I'm going to enter a postcode there
and then click the button look at that
on the post back on post back it's
actually retaining its state which is
very important okay and if I select city
I'm going to select Washington DC I
clicked it but this button look at that
I cross post back it's still retaining
its it's it's state now finally what we
want to do on this button click we want
to retrieve the selected value within
the drop-down list and the selected
value within the textbox let's see how
to do that now so within the button
click event what I'm going to do look at
look at the IDs of these controls the
IDs RT b1 and for the drop-down list
it's DD l1 ok so I'm going to copy this
piece of code from here and then when
the button click event happens if the
selected value is DDL which means if
it's drop-down
then what we want to do we want to
retrieve the value from that drop-down
list control so how do I do that now
another important thing to keep in mind
this drop-down list the drop-down list
and the textbox controls that we are
adding dynamically we are adding them to
placeholder control okay so obviously
within the placeholder control we have
to look for the drop-down list and the
textbox controls so what I'm going to do
here if the selected value is drop-down
list I'm going to say placeholder one
control within that find the control
with ID what's the ID of the drop-down
list if you remember it's DDL one so DDL
one so this fine control method will
return the drop-down list asset control
but we know that we are getting a
drop-down list back so I'm going to
typecast that to drop-down list type and
then finally retrieve the selected items
text from that drop-down list
so how do I do that so from the
drop-down list selected dot selected
item dot text and then once we have that
value all we want to do is print that
out onto the web form but in reality we
may save it to a database table okay so
along the same lines if the selected
value within the drop-down list is the
text box then what do I want to do let
me copy this piece of code and then
paste that here but if the selected
value is text box we know that we are
looking for it controlled within the
placeholder with an ID of TB one but
that's going to be a text box so we have
to typecast that to be of type text box
and then retrieve the value that the
user has typed into the text box using
the text property and then print that on
the web form that's it we are done let
me go ahead and run this at this moment
and we should be able to you know select
City so that's the drop-down list let me
select New Jersey and click the button
look at that I'm able to retrieve the
value across postbag and the control is
still maintaining its state along the
same lines and a postcode let me say 2 0
4 1 1 I click the button and it should
retain its state across and we should be
able to retrieve the value as well
okay and we let's do a little bit of
cleanup here there's no reason why we
need this specific drop-down list one
selected changed even handler so I'm
going to get rid of that from there and
then also let's remove the event handler
hooking within the aspx page so I can
get rid of this event okay
so now the behavior will be exactly same
except that we have cleaned it up a
little bit and if you look at the code
it's very simple code all you are doing
is within the page load you're adding
the controls dynamically and you are
setting the visibility to calls and
depending on the drop-down list
selection you turn the visibility on for
those respective controls but then in
reality in some of your projects if you
don't have you know here for the
drop-down list you know for this
drop-down list one the viewstate is
preserved automatically for us because
this control is present at the design
time okay so it's it's view status
maintained for us across that webform
across a postback okay but in reality if
you don't have a UI control which is
going to maintain the state for you
which is going to remember what control
the user wants then probably you can
store that in a view state variable on
that page okay and then later when the
webform loads up on a post back you can
retrieve that value from that view state
variable and then decide which control
you want to dynamically show whose
properties you want to dynamically
change so to maintain the state of
controls across postback add the
controls in the page load event ID set
their visibility to false based on the
drop-down list selection here we are
showing or hiding the visibility of that
control dynamically okay so on this
slide you can find resources for asp.net
c-sharp and sequel server interview
questions that's it for today thank you
for listening have a great</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>