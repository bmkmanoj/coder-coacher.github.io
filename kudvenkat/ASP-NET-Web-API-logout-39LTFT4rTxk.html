<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>ASP NET Web API logout | Coder Coacher - Coaching Coders</title><meta content="ASP NET Web API logout - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/kudvenkat/">kudvenkat</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>ASP NET Web API logout</b></h2><h5 class="post__date">2016-12-12</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/39LTFT4rTxk" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">this is part 26 of asp.net Web API
tutorial in this video we'll discuss
implementing lockout functionality for
our asp.net web api service so here is
what we want to do we want to include
this log of button on our data dot HTML
page and when we click this log of
button we want to log the user out of
the application and redirect him to the
login page to log the user out of the
application all we have to do is remove
the access token from the client browser
session storage remember the first thing
that we are doing when we login the user
is we are storing the access token in
the browser session storage so to log
the user out all we have to do is remove
that access token from the browser
session storage so let's slip to visual
studio the first thing that I'm going to
do here is increase the access token
expiry time so let's increase this to 10
hours instead of 10 seconds we have set
this to 10 seconds in our previous video
for testing purpose the let's queue our
solution a build and navigate to login
page let's log in with the user that we
have already registered notice at the
moment on our data dot HTML page we
don't have log of pattern so let's
include the HTML required for the log of
pattern let's flip to visual studio so
let's make a copy of the slewed
employees button and then change the
bits that are required let's change the
ID of the button to BTN log off and the
value on the button is log off and we
want this log of button on the
right-hand side so in addition to BTN
and BTN success classes let's also use
pulled write class and then now we want
to wire up click even handler for the
button so let's use the button ID and
within our script section let's use the
jQuery ID selector find the button and
then wire up the click event handler
when we click the button we want to do
two things first we want to remove the
access token
from sessions to rate and then redirect
the user to login page so when we click
the button from the sessions to rage
remove the access token
remember the tea that we have used to
store the access token is access token
so using the same key we are going to
remove it from session storage once we
have removed it from the session storage
we want to redirect the user to the
login page let's save our changes and
reload our webpage notice now we have
the log of button
we are still locked and then that's the
reason why we get employees when we
click load employees button and now when
we click to log off look at that we are
redirected to login dot HTML page now if
I try to navigate to data dot HTML look
at that we are automatically redirected
back to login dot HTML here is the log
of button HTML and the click event
handler at the moment there are two ways
to log the user out of the application
by closing the browser window since we
are storing access token in browser
session storage and browser session
storage data is lost when we close the
browser window the user is automatically
logged out another way to log over the
user is by clicking the log off button
when we click the log off button
we are explicitly removing the access
token from browser session storage so
the user is logged out now if you do not
want to lose the access token when the
browser window is closed then store the
access token in browser local storage
instead of browser session storage the
difference between local storage and
session storage is that this session
storage data is lost when the browser
window is closed but whereas the local
storage data is not lost when we close
the browser window the way we store
retrieve and delete items from local
storage is exactly the same as storing
retrieving delimiting items from session
storage the only difference is instead
of using session storage object we will
be using local storage object so let's
use local storage now notice on our
login dot HTML page we are using session
storage object to store
the access token so instead of session
storage let's use local storage
let's do similar changes on our data dot
HTML so we want to check local storage
instead of session storage we want to
remove access to again from local
storage and when we click load employees
button we want to read access token from
local storage let's say all our changes
reload our login page let's log in with
a user
we are logged in when we click load
employees we get the list of employees
now let's copy this URL date dot HTML
let's close the browser since we are
storing access token in browser local
storage we should not have lost it
so when we relaunch the browser and when
we try to directly go to data dot HTML
we should be allowed notice we are still
logged in and we can get the list of
employees and now when we click log off
button we are removing the access token
from browser local storage and at this
point if I try to navigate to data dot
HTML look at that we are automatically
redirected to the login page
one obvious question that comes to our
mind at this point is we are only
deleting the access to again on the
client we are not invalidating or
deleting the access token from the
server side if someone can intercept the
access token will they not be able to
use that access token and gain access to
the system the straight answer to the
question is yes if someone is able to
intercept the access token they will be
able to impersonate and gain access to
the system however most of the systems
that use access tokens work over SSL
secure socket layer which inhibits
intercepting access tokens another
question that we may get at this point
is should we really invalidate or delete
access tokens from the server no there
is no need to invalidate our delete
access tokens from the server access
token lives on the client and it is
enough if we remove it from the client
another good practice is to set the
expiry of the access token to as short
time as practically possible depending
on the nature of your application thank
you for listening and have a great day</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>