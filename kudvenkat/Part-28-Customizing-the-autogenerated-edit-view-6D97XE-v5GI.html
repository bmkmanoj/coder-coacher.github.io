<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Part 28   Customizing the autogenerated edit view | Coder Coacher - Coaching Coders</title><meta content="Part 28   Customizing the autogenerated edit view - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/kudvenkat/">kudvenkat</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Part 28   Customizing the autogenerated edit view</b></h2><h5 class="post__date">2013-05-30</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/6D97XE-v5GI" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">spar 28 of asp.net MVC tutorial in this
video we'll discuss customizing the
auto-generated edit view please watch
part 27 before proceeding with this
video if you recollect from part 25 this
edit view is auto-generated for us let's
navigate to the sighted view at the
moment there are several issues with
this edit view first of all let's
replace this gender textbox control with
a drop-down list control we discuss
doing exactly the same thing in the
previous session as well so at the
moment if you look at this edit view
this is the line which is actually
rendering the textbox control for gender
notice that we are using editor for HTML
helper that needs to be replaced with
the drop-down list HTML helper to speed
things up I have this already
implemented so let's copy and paste this
right here and then let's format this
properly and there is another issue with
this edit view you know basically within
this department drop-down list I want
select Department as the first item
within that list and we have discussed
doing similar thing in the previous
session as well so let's replace this
empty string with select Department now
notice that at the moment we are able to
change the name of the employee let's
say our business requirements are such
that once an employee is created we
don't want to allow the users to change
the name of the employee so obviously
here we are rendering a textbox control
so the user will be able to change it so
let's not have render a textbox control
so if you look at this edit view at the
moment we are actually using this editor
for HTML helper which is rendering the
textbox control for name so instead of
using editor for I'm going to use
display for HTML helper and while we are
here let's also change the font family
to area let's use a div tag and set the
style attribute
okay let's go ahead and run this with
all these changes and let's navigate to
edit view okay notice that we have a
drop-down list for gender and within the
department drop-down list we have select
department as the first list item and
notice that name is rendered without a
text box control but then when I click
Save we are going to have an issue look
at that it says the name field is
required why is that because you know
the name value is just displayed on the
form okay so when I click Save you know
it's not retaining that value so to
retain that value let's use a hidden
fear just like how we are using a hidden
field to store employee ID let's use a
hidden field to store the name of the
employee so I'm going to use hidden for
HTML helper to achieve that okay let's
run this once again and let's navigate
to edit for you and let's click on Save
button notice that now I don't get that
error okay so here we have made the name
field read-only but then it's possible
to use tools like fiddler change name
property generate a post request and
then submit it to the server because of
the way we have implemented edit action
within this employee controller look at
that this is the Edit action method
which is going to respond to the post
operation and notice that we have an
employee object coming into this method
as a parameter so obviously this
employee object is going to receive
those posted form values the default
asp.net MVC model binder is going to
harvest all those posted form values and
then populate these this employee object
with those values now so obviously with
tools like FID love and we post a value
for name property then the default model
binder will simply take that and stick
into this employee object which is then
saved the day
so obviously we'll be able to still
change the name of the employee and we
discuss doing exactly the same thing in
part 19 of this video series so if you
want to know how to use fiddler and
generate a post request please watch
part 19 and prevent that from happening
there are several ways and we discussed
that as well we've discussed using
update model function and pass you know
include and exclude list as a parameter
we discussed that in part 20 and in part
21 we discussed using bind attribute and
in part 22 we discussed using interfaces
to achieve exactly the same thing in
this video well discuss using bind
attribute along the way I want to
demonstrate adding model validation
errors dynamically so I'm going to make
a few changes to our edit controller
action method first of all you know I'm
going to exclude name property from
default model binding so I can use bind
attribute for that so let's go ahead and
use the bind attribute and specify our
exclude list so I'm going to use the
other overload way we can specify the
exclude list and then I'm going to
exclude the name of property okay so
since we exclude name property you know
the name property of the employee object
will be now okay but then if you look at
the employee class that we have
implemented you know we have set name
property is required so what I'm going
to do is you know I'm going to retrieve
the name property from the database and
then set that to this employee object so
we'll have the existing name of the
employee as it is now within the
database and also look at that if we
don't set the name property of the
employee object on this object when we
hand this over to save to be saved in
the database
you know employee name will be now and
then we will update name of the employee
with now but we want to retain the
existing name of the employee so we need
to set the employee object with that
property so what I'm going to do
I'm actually going to load the employee
and let's call this employee from D Bay
so we are going to get the employee
object from the deep database and to do
that we already have this database
constant context object so let's use
that object and it has got employees
property which is going to list all the
employees out of that we want a single
employee where the employee ID must be
equal to the employee ID within the
object that's coming into this method as
a parameter so this is the employee that
we are changing okay so we have you know
employee from the database okay so we
can use that object now so just to speed
things up let me copy paste this code
and it's very straightforward all we are
doing here is you know we are copying
the properties from this employee object
into this object employee from DB object
so we are setting the employee ID gender
city and department ID okay now we don't
have to really set the employee ID
because we are retrieving the employee
from the database using the employee ID
so we can safely get rid of that line
and then we are going to pass this
employee object to be saved into the
database now we can get rid of this line
as well because within the DB context we
already have this employee object so we
can safely get rid of this line and then
we are changing that you know we are
passing it to this method where we set
the state as modified and then we save
the changes and finally redirect to the
index action okay so with these changes
let's actually run this and see what's
going to happen
it's taking a while to run so let's
click on edit let's click on save and
see what's going to happen look at that
it still says the name field is required
ok and look at what happens to the name
it's gone why is that because if you
notice what we are doing here we have
retrieved this employee I mean we have
this object the default asp.net MVC
model binder is going to exclude the
name property from model binding so on
this object name property will be now
and what we are doing here we are
retrieving you know using the ID from
this object we are retrieving the
existing employee details from the
database and storing in this object and
then we are copying gender city
department ID to this employee from DB
object but keep in mind name property is
marked as it is marked with required
attribute meaning that property is
required so by the time the control gets
to this line it checks model state dot
is valid within this object name is now
so this property is going to return
false in which case this piece of code
will not be executed it will return the
view passing this employee object and
this employee object we have name
property as now that's why name is
becoming now if there is any validation
error okay so to retain that name you
know if there are validation errors what
we need to do is we need to set the name
property the existing name of the
employee from the database so i'm going
to set name property on the employee
object by retrieving the value from this
employee from DB object ok so with these
changes let's run this once again and
see you know if it's going to retain
name if there are motor validation
errors so let's click on edit click save
now look at this the good thing is it's
retaining the name but then it still
shows this error the name field is
required why is that that's basically
because you marked you know this
property with required attribute so let
me get rid of that required attribute
there
and then let's run this once again so
let's click on edit let's click Save
notice that now I am able to post a form
and then because of the way we have
implemented this edit controller action
method now it's not possible for
end-users to use tools like fiddler
change name property within a post
request and then submit that to the
server okay because we are specifically
excluding the name property from binding
now is it required actually to use this
bind attribute here not necessarily
still the application is going to work
as expected even if we don't use this
bind attribute you know users will not
be able to change the name property by
you know posting a request using fiddler
that's because look at what we are doing
we are not using this employee object to
save the employee details to the raise
instead we are using this employee from
dbo objects which we have retrieved from
the database and if you look at this
object we are only populating the fields
that we need gender city department ID
and we we already have the employee ID
but not the department you know the name
of the employee okay that's why even
without this bind attributed spoon of
work okay but then since I want to
demonstrate adding model validation
errors dynamically let's leave that bind
attribute there for the time being okay
so obviously at the moment we can change
the details of the employees when I'm
changing the degenerative female from
London to London one and Department to
HR let's save that and see if the
changes are pasted look at that this
that all its changes are saved to the
database okay now all right so we fix it
the issue with edit view so we made name
field read-only and then you know it's
working as expected but then look at
this at the moment you know with this
employee class we remove that required
attribute okay so now employee name is
no longer required so obviously this is
going to be a problem for the create
views if I get to create view I don't
enter name
name I only enter name and maybe city
and then a department and then click
create look at that I am able to create
an employee without the name okay and
why is how is it possible because we
remove that required attribute okay so
now in order to correct this we can add
validation errors dynamically okay so
within create controller action method
of this employee controller so this is
the create controller action method
which responds to HTTP POST operation so
what I'm going to do is I'm going to
check the name of the employee object if
that is empty then we can dynamically
add so I'm going to use string dot is
null are empty and then we are going to
check the name of the employee so if the
name property of the employee object
that is coming into this function is
null or empty then we want to add a
model validation error so to the model
state object you know look at this I'm
invoking this add model error function
on this model state object and we are
saying you know this name field is
required that's the property for which
we are adding a validation error and
this is the error message that we want
so for name property you know if it's
null or empty show this error message so
let's go ahead and run this with these
changes
let's click Edit now this edit view
works as expected but then if we go to
the create view look at that the name
field is required unless and until we
provide a value for the name may not
will not be able to save the changes to
the database on this slide you can find
resources face p.net c-sharp and
sequence of interview questions that's
it for today thank you for listening
have a great day</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>