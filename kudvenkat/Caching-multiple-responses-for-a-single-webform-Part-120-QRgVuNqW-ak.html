<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Caching multiple responses for a single webform   Part 120 | Coder Coacher - Coaching Coders</title><meta content="Caching multiple responses for a single webform   Part 120 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/kudvenkat/">kudvenkat</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Caching multiple responses for a single webform   Part 120</b></h2><h5 class="post__date">2013-01-27</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/QRgVuNqW-ak" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello welcome to premium technologies I
am venket this is part 120 of asp.net
video tutorial in this video we'll
discuss about caching multiple responses
for a single waveform please watch part
1 1 9 from asp.net video tutorial before
proceeding with this video as this is a
continuation to part 1 1 9 let's
understand caching multiple responses
with an example let's flip the sequel
server management studio and if you
remember in the previous session we
discussed about creating the stable TBL
products and populating it with some
sample data if you need the sequel
script to do that I have that on my blog
which can be found at this URL that you
can see on the slide so on this blog on
the right hand side you can find link
for pre free asp.net video tutorial when
you click on this link you should land
on this page free asp.net video tutorial
and on this page you have caching an
asp.net part 1 1 9 on this page we can
find the sequel script to create and
populate TBL products table ok so we
have some sample data within that table
now let's write a simple stored
procedure which retrieves the products
by their name so I have the stored
procedure here SP get products by name
and then this stored procedure has this
parameter at product name if the name of
the product I mean if we supply a value
of all for this product name parameter
then what we are doing here simply
retrieving ID name and description from
TBL products table all the products ok
on the other hand if I supply any other
name and you know apart from all then we
are retrieving ID name and description
from TBL products where name is equal to
whatever we supply so the only
difference is if the product name is all
we retrieve all the products otherwise
we filter the product by name using the
where clause here simple stored
procedure so let's go ahead and create
that now execute and command completed
successfully let's test the stored
procedure so obviously if I supply a
value of all we should be able to
retrieve all the products from TBL
products table so that's what we get on
the other hand if I
supply a value of laptops for the
product name parameter then I should
only be able to retrieve the products
which match that map name laptops in
this case we have only one row and
that's what we get here all right now
let's see how to invoke the stored
procedure from an asp.net web
application and display the data that's
retrieved by this stored procedure so
let's flip to visual studio and I'm
going to have a simple text here select
a product and then let's drag and drop a
drop down list onto this waveform and in
this drop down list we want to list all
the products that are available for
selection so we have around four
products here so I want to display all
these four products so the user can
select them from the drop down list and
just to speed things up I have you know
basically the products that we that the
user can select already typed so let's
go to visual studio and then let's
specify the list items okay and if you
look at the list items here you know
laptops iPhone LCD TV desktop you know
the text and value are the same things
here and look at that along with all the
products that we have I am also using
another list item all just in case if
the user want to see all the products
then he uses that text all okay so we
have that drop-down list there and then
we want a grid view control where the
user can actually see the data so let's
drag and drop the grid view control onto
the waveform and then let's quickly auto
format this okay all right so we have
the grid view control and then finally I
also want to display this server-side
time and the client time so server time
and to display the server-side time
let's drag and drop a label control onto
the waveform and also I want to display
the client time so client time and let's
remove the default text label from the
label one control all right so we have
all the HTML that's required now let's
flip to the code-behind file of this
waveform so obviously now we need to
invoke this two
procedure SP get products by name from
our asp.net web application and to do
that I already have written a method a
simple private method here okay so this
is simple ad or dotnet code okay so what
we are doing here we are using the
configuration manager class to read the
connection string from web config file
so in web config file we have DB
connection string we are reading the
connection string value into this
variable CS and we are using that
variable to actually create a sequel
connection object and then we have
sequel data adapter which is invoking
the stored procedure SP get a product by
name okay and look at this this stored
procedure expects a parameter to be
passed in so obviously we have to
prepare a sequel parameter object as
well so sequel parameter and then the
parameter name is that product name and
the value for that is coming look at
this this method has a parameter product
name parameter so that's what we are
using actually when we call this method
that's when we will supply the actual
value okay and finally we are adding
that parameter to the parameters
collection of the Select command of data
adapter object and we are creating a new
data set filling that with the data that
we get after we execute the stored
procedure SP get product by name finally
we are setting the data set as the data
source for the gridview control and
invoking data bind simple private method
now let us see how to actually use this
method and look at this in the page load
if it is not a postback meaning if it is
the initial get request of the waveform
then what do I want to do I want to
basically show all the products to the
end-user okay
so in that case I am going to call this
method get product by name and then look
at this I am going to pass a value of
all to that parameter so obviously when
we pass all what is going to happen the
stored procedure is going to return all
the products so I want to basically
retrieve all the products and display
them in the grid view control that's
what is going to happen now okay and
what else I want to do I also want to
set the server-side time
if you remember on this platform we have
this label one control which displays
the server-side time and to retrieve the
server time I'm going to set the text
property of this label control to
date/time that now dot to string so
daytime dot now should give us the
current date and time on the web server
where this code gets executed okay and
another thing is we have displayed the
server-side time using date/time dot now
but to display the client time we can
make use of the JavaScript so let's flip
to the source so this is where I want to
display the client time so let's use the
script tag and specify the type as text
slash JavaScript and to print the client
time we can use the document objects
write method and to retrieve the client
time we can use the date function the
JavaScript date function that's it so
this piece of code should retrieve the
time on the client machine whereas this
piece of code should retrieve the date
and time on the web server all right now
another thing that we have to do
obviously VIN the selection in the
drop-down list of changes we want to
display only the product that the user
has selected so the first thing is I
want to set the auto postback property
to true so whenever the selection
changes we want to immediately post back
to the web server so I've set the auto
post back property to true double click
the drop-down list control
so whenever the selection changes what
should happen we want to invoke this
method and then pass in the name of the
product that we want to display to the
user so obviously within the drop-down
list the user will select a product and
that selected value we want to pass to
this method which in turn is going to
call the stored procedure and pass the
product name as a parameter value for
that product name attribute so let's go
ahead and invoke that method now within
the drop-down list one underscore
selected and exchange the event
so get product by name and look at this
it expects a product name and where do
we get the product name from from the
drop-down list and from drop down list
which property to be used selected value
because if you remember on the waveform
we have set the value also as the name
of the product okay all right so that's
all ok let's save everything let's go
ahead and run this as it stands right
now now we don't have caching enabled at
all so now the webform you know the
application is going to work normally
without caching so let's run this by
pressing ctrl f5 when the wave form
loads as you might expect you know it
should first display all the products
here okay look at the silver time 16:45
at 16 16 45 16 both the server side and
client time are the same now I select
laptops
look at that 1645 27 1645 27 both the
server and clients time are the same and
I see laptops and if I select desktops I
get desktops and notice the server side
time and that line side time they are
the same things okay now let's go ahead
and enable caching in the previous
session too you know we discussed about
enabling caching to enable caching all
we do is set the output cache attribute
okay so let's go to the web form so
let's go ahead and set at output cache
attribute so output cache and there are
two mandatory attributes the first one
is the duration which controls how long
the waveform should be cast in this case
I'm going to set that to 60 meaning this
platform is going to be cached for the
next 60 seconds and then we have vary by
param attribute as well in the previous
session we discussed that this parameter
can be used to cache multiple responses
for a single waveform in a previous
session we have said that to nan meaning
cache only one response to the waveform
let's go ahead and set that to none for
now and let's see what's going to happen
so we have enabled the caching set the
duration to 60 seconds and vary by param
to none so now only one response of this
waveform will be cached so as a result
of this
let's see how the behavior of this
platform is going to be let's run this
project by pressing ctrl f5 and look at
this when the waveform loads I get all
the products which is good let me select
for example here iPhone look at that I
get iPhones so look at this oversee time
16 46 57 that's when this waveform is
you know sent back to the user and
that's the client time suicide time and
client side time are the same now look
at this I'm selecting all here look at
that I only get iPhone and I'm trying to
select LCD TV ok notice that since this
webform is cached and since only one
response for this waveform is cached no
matter what you select here you know you
only get that cached response for the
waveform and this doesn't make any sense
to the end-user
right because you know I'm making a
different selection but ultimately turns
out that I I get that single response
that is cached for the single selection
of dropdownlist iPhone ok no matter what
your selection is within the drop-down
list you get whatever is cached on the
web server so how do we connect this
problem to correct this problem all you
need to do is set this very by param you
know to drop-down list 1 so obviously if
you said vary by param to none only one
response of f11 is cached and that's
what the you know every user will get
when they try to access that webform
before that duration has expired
okay but on the other hand to solve the
problem all we have to do is set that
vary by param to drop-down list 1 so in
this case what's going to happen it's
going to catch up to 5 different
responses you know for that webform and
obviously one for each possible
selection from the drop-down list
control now look at this in this
drop-down list control I have 5
different values so 5 responses for this
waveform will be cached one for each
possible selection from this drop-down
list 1 so let's see how to solve that
problem so I'm going to set vary by
param to drop-down list 1 ok let's save
that let's go ahead and run that now so
let's close that initial so now all is
retrieved at 16 4
the 856 now look at this I get left off
1649 Oh - that's when it is cash 1649 o
- I select iPhone look at that 1649 oh
nine that's when it is cash look at that
when I go back to laptops I get that
same cached version but look at the
tight clients item it keeps changing
because on the client side the
JavaScript code keeps running on the
other hand if I go to desktops now this
waveform will be reprocessed and look at
this at this time this wave form is
reprocess and a response for this
desktop is cached so if I go back to
laptops look at that I still get that
version which which was cached at 16
4902
okay so now for each possible selection
you know a response will be cached okay
so if I select all look at that 1649
maybe that 60-minute 60 seconds duration
has expired
so this platform is reprocessed so let's
go for laptops so this is not
reprocessed yet this waveform was cached
at 16 4902 now it is 16 4958 okay so in
in the next 3 or 4 seconds it's going to
be reprocessed now if I select if I go
back to iPhone and come back to laptops
look at that will be reprocessed Andry
cached okay
so now since we have set vary by param -
drop-down list one for each possible
selection from the drop-down list we
will have a response of the webform
cached on this slide you can find
resources waste Bharat net c-sharp and
sequel server interview questions that's
it for today thank you for listening
have a great day</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>