<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Part 46   Accessing model metadata from custom templated helpers | Coder Coacher - Coaching Coders</title><meta content="Part 46   Accessing model metadata from custom templated helpers - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/kudvenkat/">kudvenkat</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Part 46   Accessing model metadata from custom templated helpers</b></h2><h5 class="post__date">2013-06-30</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/ih_o2aolf4Q" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">this part 46 of asp.net MVC tutorial in
this video we'll discuss accessing model
metadata from custom templated helpers
please watch but 45 before proceeding
we'll be using the same example that we
worked with in part 45 now in part 45 we
have customized the date/time editor
template to use the jQuery calendar the
problem with this template is that we
have hard-coded the date format string
to ddmm yyy as you can see here so from
this point on any date/time property
that uses this template will always
format the date using that hard-coded
string so the dates are always going to
be in DD / mm / YY by format for example
let's say we have customer model class
within our project and this class has
got date of birth property which is of
type date time again now since it is of
type D time it is going to make use of
this template and it's going to render
that date also in ddmm of ayy now let's
say our requirement is such that we want
to render the date of birth in customer
class in mmddyy format instead of ddmm
yyy in that case this template cannot be
used because it's not generate we have
this hard-coded date format string there
which is making it useless with our
customer class so let's make this
date/time editor template you know as
generic as possible and if we want to do
that we have to remove this hard-coded
string and we want our attributes on
these properties of the model classes to
drive the format of the date rather than
this hard-coded string so first of all
let's remove that hard-coded string from
our date time editor template so let's
flip to visual studio so this is the day
time editor template that we have been
working with so let's get rid of this
hard-coded string from this editor
template so we no longer have the
hard-coded string and then within our
employee class we have this hire date
property so let's set display format
attribute and the data format string
here is going to be DD
/mm /yy boy okay so we want this display
format attribute to drive the format for
the dates so here this is our employee
class but then if you have your customer
class there if you want the customers
date of birth to be in mmddyy all you do
is you know use that data format string
on that customer class okay all right so
now we have this the next change that we
have to do is within our date/time
editor
so obviously this hire date has to be
formatted using this date time format
string okay and then if you want to
retrieve the formatted value the
formatted date/time value then you need
to use another property here you can't
simply say model dot value model that
value is always going to return the
unformatted value so at view data dot
template info dot formatted model value
so this property is going to apply the
format string that we have specified on
this property
so using this format string it's going
to format the date and then return that
in that format so we use that formatted
model model value property for that so
let's build the solution and then let's
refresh this view and see if it's going
to work so it should apply that format
and then display behind it but then look
at this it didn't respect that attribute
at all look at that first of all it's
displaying the date and so also
displaying the time we don't want the
time we just want the date part and that
date should be in this format ddmm bye
bye why okay so we didn't get the
expected output that's basically because
you know if you want this is the editor
templates meaning we're actually editing
the employee details if we want this
date format data format string to be
applied in edit mode then there is a
flag that we need to turn on so there's
another parameter that we need to pass
to this display format attribute which
is apply format in edit mode we need to
turn that on let's build a solution and
then let's refresh this so now when the
page refreshes it should respect that
look at that we have that date month and
here ddmm 5iy so in your customer class
if you have date of birth property and
if you want that date of birth in to be
in ddmm Y by Y format simply use data
format string specify the format there
on that class on that property so from
now on this date time editor template is
going to use the attributes on date/time
properties to determine the format in
which the date has to be rendered okay
so we have used template info dot
formatted model value property to
retrieve the formatted or date value all
right and to access model metadata in
templates you know basically to retrieve
the formatted model value we used
template info dot formatted model value
not only that you can access all sorts
of rich metadata using a you know model
metadata object okay so for example if I
want to retrieve the display format
string that's applied on hire date
property I simply use that view data
that model metadata dot display format
string for example here I want to print
the display format shrink that's there
on the clasp you can simply say view
data the template model metadata dot
display format string notice that you
have that there so let's actually
retrieve that and put an HTML break and
also let's say we want you know the
containing class name so this hire date
property is actually present within our
employee class you know that hire date
is for the employee class so we need to
know the type of the containing class so
how do we get that again you can use
model metadata class for that purpose so
view data
dot model metadata dot containing type
is going to let you know that convert
that to string okay similarly when you
use this model metadata object you know
as discussed will have access to all
sorts of rich metadata look at you know
that when I press dot the intelligence
shows you what are all the properties
that are available so these properties
will give you access to all you know
metadata all right let's actually save
this bill the solution let's go back to
our view and refresh that so notice that
this is the format string that we have
applied on the hided property of the
employee class and MVC demo dot models
dot employee class is the containing
type of this property hire date all
right and let's quickly try to save this
data and see if everything works as
expected so at the moment we don't have
Save button so let's go back to our edit
view and I mean then let's actually get
rid of these attributes from there okay
in the Edit view after the form we need
a Save button so let's put an HTML break
there and let's include included button
input type is equal to submit and the
value on that you know maybe you want it
a save alright let's build a solution
and let's refresh this now we should get
the Save button and notice that at the
moment for John Smith whose ID is one
date of birth is 11:25 that's number 25
2007 let's change it to something else
number 30th 2007 let's save that now
look at this I get this message the
value 30 11 2007 is not valid for higher
date
why is that that is because within my
web config file I think we have said you
know the globalization culture - English
- United States so US has got
format by default which is mm DD yyy but
here it is a DD mm v YY so that's why
you know it reads that as an error so to
get rid of this error I'm going to
change the culture to en - GB and let's
refresh this now let's try to you know
enter 30 save that and notice that it
gets saved and then let's quickly check
within the database so number 38 2007
alright
on this slide you can find resources for
a speed or net c-sharp and sequence of
interview questions that's it for today
thank you for listening have a great day</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>