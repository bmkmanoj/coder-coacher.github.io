<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Part 164   Displaying organization employee chart using treeview control in asp net | Coder Coacher - Coaching Coders</title><meta content="Part 164   Displaying organization employee chart using treeview control in asp net - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/kudvenkat/">kudvenkat</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Part 164   Displaying organization employee chart using treeview control in asp net</b></h2><h5 class="post__date">2013-11-01</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/ycrsl7WARNI" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">this is part 164 of asp.net tutorial in
this video we'll discuss displaying
organization employee chart using tree
view control this is continuation to
part 163 so please watch what 163 from
the asp.net tutorial before proceeding
with this video we'll be using this
employee table in this demo first let's
understand this data for Sam Pam and
Mike manager is number one that is David
for John and Thera manager is number two
that is Sam for Todd manager is number
four that's Mike if you look at the tree
view control on the right hand side we
have Sam Pam and Mike displayed on the
David John and Thora under Sam Todd
under my the interesting thing here is
that there's a checkbox displayed next
to every employee with the tree view
control once we click this button we
want all the selected employee names
along with their IDs to be displayed in
the list box let's see have to implement
this the first step here is to create
this table in the interest of time I
have already created this table here is
the sequence clip to create and populate
it with some sample data
I'll have the script available on my
blog in case you need it I also have
implemented the stored procedure SP get
employees which is very straightforward
all the stored procedure is doing is
returning ID name and manager ID columns
from TBL employee table we'll be
modifying the three view control that we
implemented in the previous session so
that we don't have to write the same
code again so at the moment this tree
view control is bound to the data that
is returned by this stored procedure so
that's why the TV control looks like
this but instead we want this tree view
control to be bound to the data that is
going to be returned by this stored
procedure so let's copy the stored
procedure name and paste it right here
so within the data set now we have
employee data and we need to add the
relationships as well so the
relationship name is child rows so the
parent column is going to be ID column
so within this table we have that ID
column but the child column is going to
be manager ID
problem so let's copy the name of the
column manager ID and change it here
similarly we need to change the column
name here as well so here we are
creating the parent 3 node object we are
setting the text so where are we going
to get the text for the tree node object
we are going to get it from the name
column so we need to change the column
name here to name and we don't want to
have navigate URL for the tree node
object instead we are going to set the
value property and we want to set the
value as the ID of the employee because
remember of a requirement is to display
the ID also along with the employee name
so for the tree view node object we are
setting the value property so value is
going to be from the ID column okay and
then we have this recursive function
here get a child rules and to that
function we are passing the level one
data rule that is the parent root node
row and then the parent tree node object
we discuss this recursive function in
our previous video session and what we
are doing here we are basically looping
through each child row and we are
building the child a tree node object
and we are again setting the text and
navigate URL but we don't want navigate
URL instead we want value property and
here the name of the column is going to
be name and we are going to get the ID I
mean the value for the tail tree node
from ID column and then we are adding
that child tree node to the passed in
tree node object and we are again
checking if the child row has got any
other child rows and if that is the case
we are recursively calling that function
alright so at this point if we go ahead
and run this the data from the employee
table should be bound to the tree view
control
look at that so we have the employees
displayed as expected so under David we
have Sam Pam and Mike under Sam we have
John and theta and the Micra have Todd
okay but we need a checkbox control next
to every employee so how are we going to
get that it's very simple
all you need to do is there is an
attribute called show checkboxes and we
need to set it to all so that it's going
to display a checkbox next to every
employee so with this change let's learn
at once more and look at that we get
check boxes now let's go to InDesign or
web form so that it looks like this at
the moment we only have a treeview
control but let's also include a button
and a list box
so let's include a table here and inside
this table let's have a table row let's
have a TD and within this TD we are
going to have this tree view control so
let's cut that from there and then paste
it within this TD and for this TD let's
set a border so style equals border
colon one pixel solid black let's
include another TD and within this TD we
are going to have a button control so
let's drag and drop a button control and
let's set the text as to angle brackets
and then let's have another TD and then
we need a list box here so let's drag
and drop a list box and for this list
box let's set height in width let's set
height to may be 145 and width
to 100 so let's flip this to the design
mode and see if we get the design that
we expect all right so we have the
design there so let's double click on
this button to generate the click event
handler all right so here we're going to
write code to retrieve the selected
items from the treeview control so for
that I'm going to write a recursive
function private void and let's call
this get selected three nodes and to
this function we are going to pass the
parent tree node object so the type is
going to be tree node and let's call it
parent tree node so if the past in
parent tree node is checked meaning if
somebody has selected that then this
checked property of the tree node object
is going to return true if that is the
case then what we need to do we need to
add the text and the ID value of that
tree node object to the list box so list
box 1 dot items dot add so we need the
text from the parent node so parent node
dot text and we want a dash and then the
ID so parent 3 node how are we going to
get the ID use the value property of the
tree node object because if you remember
in our code we are setting the text and
value properties of the tree node object
all right now if the past in parent tree
node has got children then we need to
check if the children of that tree node
are selected as well so if parent tree
node dot child nodes dot count if that
is greater than 0 then we know the past
entry node object has got children
in that case we are going to loop
through each child three node within the
parent tree node and then call this
function recursively so for each tree
node let's call it child 3 node n parent
3 node dot child nodes all we are going
to do here is call this function get
selected tree nodes and we are going to
pass child
tree node object now we are going to
invoke this function within the button
click event handler and we need to pass
the parent tree node so we are going to
pass the root tree node which is present
at index position 0 so 3 V 1 dot nodes
of 0 is going to pass you know the root
3 node and then this function is going
to recursively check every tree node if
that node is selected then it's going to
add that nodes text and value to the
list box and if it has got children it's
going to loop through each children each
child and then call this function again
all right so with these changes let's
run this and see if it works as expected
ok so we have the list box with check
boxes let's select David John tarah and
my look at that we got David John
Theurer and Mike and their respective
IDs and if you select Pam and Sam and
let's add them look at that it's adding
a lot of people that's basically because
it's retaining the old values within the
list box in order to get rid of the old
items within the list box when we click
the button let's clear the items so list
box 1 dot items dot clear
alright let's run it once more
so let's select John antara so we get
them let's also select David's and Pam
select them look at that now we only
have the selected employees alright
that's it for today thanks for listening
have a great day</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>