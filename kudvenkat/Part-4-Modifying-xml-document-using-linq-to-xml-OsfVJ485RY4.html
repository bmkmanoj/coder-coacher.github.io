<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Part 4   Modifying xml document using linq to xml | Coder Coacher - Coaching Coders</title><meta content="Part 4   Modifying xml document using linq to xml - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/kudvenkat/">kudvenkat</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Part 4   Modifying xml document using linq to xml</b></h2><h5 class="post__date">2014-08-27</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/OsfVJ485RY4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">this part for fling to xml tutorial in
part three of this video series we
discussed querying XML document using
link to XML in this video we'll discuss
modifying the XML document using link to
XML that is adding updating and deleting
XML elements and comments from the XML
document in part 2 of this video series
we discussed creating this data or XML
file at the moment we've got four
student elements directly underneath
this route students element what we want
to do is add a new student element to
this XML file so here we're loading the
entire XML tree from data or XML file
into this local variable XML document
from there we are getting to the root
element the root element within the XML
file is students so to that at root
element we want to add a new student
element so we are using add method and
then we are constructing our new student
element now every student element should
have this ID attribute and there should
be a value and directly underneath this
student element we should have name
gender and total marks elements so here
this piece of code is going to do
exactly that so it's going to add a
student element with ID attribute value
of one zero five and directly underneath
that student element we are going to
have name gender and total marks and
then finally we are calling the save
method to save this XML to that data dot
XML file I have this exact same code
already typed within the main method so
let's run this but before we do that
notice we don't have any student element
with ID 1 0 5 so let's go ahead and run
this now the XML file is changed outside
of the source editor so it's asking us
if we want to reload it click yes and
then once we get to this data or XML
file notice student element is added ok
now notice the student element with ID 1
0 5 by default it is added as the last
element underneath this root element now
what in case if we want that element to
be added as the first element directly
underneath
fruit element if that's the case use add
first method so the moment here we using
add method instead of that use add first
method and before we run this code let's
actually delete the student element with
ID 1 0 5 let's run this now reload it
and once we scroll back up notice now
the student element is added directly
underneath the root as the first element
now what in case if we want to add the
student element in a specific location
in the XML document if that's the case
you have two choices add before self or
add after self let's say for example we
want to add this student element with ID
1 0 5 directly before this student
element with ID 1 0 3 meaning we want
the student element to be present there
so if that's the case we can use add
before self or add after self so what
are we doing here we are getting to the
root element that is students root
element and then from there we are
getting all the elements with named
student and then we are using the where
method to filter and retrieve with the
student element with the ID value of 1 0
3 okay and then we are using this add
before self so we want to add this
student element before the student
element which has caught an ID value of
1 0 3 ok so let's look at that in action
so now within our main method so instead
of calling the add first method so first
this will give us the root element from
there
we want all the elements
with named student and we are going to
filter so elements method here is going
to return I enumerable of X element okay
from that list we are interested in the
student element which has caught this ID
attribute and the value of that must be
equal to one zero three
now you may be wondering why are we
using double quotes to compare an
integer that's because if we look at
this value method it returns the
attribute value as a string so we are
comparing the value that this method
returns against your string if you want
to treat that as an integer simply
typecast it as an integer okay now we
are going to get the first or default so
this is going to make sure to give one x
element and just before this XML element
we want to add this new student XML
element so for that I am going to use
add before self okay so let's go ahead
and run this so at the moment we don't
have student element with ID 1 0 5 so
now when we run this that student
element should be added just before the
student element with ID 1 0 3 now if we
want this after this student element
then use add after self now at the
moment notice this XML is nicely
formatted with line breaks new line
characters white spaces okay so it looks
very good now let's say for example we
are sending this XML over Network okay
now when we are sending this over
network we don't want that you know
formatting that newline character is
carriage returns and white spaces that's
the case you can disable formatting so
to disable formatting you can specify
save options so when we are saving this
XML you can specify the save options
dot disable formatting now let's run
this so we want to reload it and notice
that when we get to the XML you know
it's the entire XML is present in a
single line
there's no formatting there all right so
let's actually format this properly by
pressing ctrl K and D simultaneously and
at the moment we have student element
with ID 1 zero five two times that's
because we have run that code two times
so let's get rid of one of them and
let's remove this you options as well
okay now let's see how to update XML
elements in the XML document okay now
this piece of code here is changing the
total marks value of the student you
know who has got an ID value of one zero
six two nine nine nine now let's say for
example we want to change the total
marks of the student to 999 if that's
the case so we are going to get the
student element okay which has got an ID
value of 1 0 6 and from there what we
can do is set element value function now
here we have to specify the name of the
element so now if you look at this XML
that we have underneath student element
we also have this total marks elements
so we are getting to the student element
which has got I do value of 1 0 6 and
then we are saying set the element value
that is set the element you know total
marks value to 999 okay so at the moment
it's 984 one zero five so we are saying
four one zero five set total marks to
999
so look at that it changes it to nine
nine nine now you can either do it this
way or you can do it this way so what's
the difference between these two so here
from the student element we are saying
set this element value to 999 here what
we are doing is retrieving that student
element and then we are selecting again
the total marks element and then using
set value function instead of set
element value function so in either case
it's going to do the same thing set
total marks you know for the student
with this ID to 999 now how to update an
XML comment in the XML document that's
very straightforward so we call the
nodes method and then we are interested
in nodes of type X comment and then we
are getting the first comment and
changing its value to comment update it
so see here we have XML document dot
nodes that's going to give us all the
XML nodes but here we are interested in
nodes of type X comment and we want just
the first comment and then we want to
set the value of that one to something
like updated comment let's run this and
if you look at the comment at the moment
it's something different they're
creating an XML tree using a link to XML
let's run this and now once we go back
notice that the comment value is changed
deleting XML elements from the XML
document so what are we doing here from
the root you know we are getting all the
elements and then we are filtering so we
are getting the XML element with ID
value of 1 0 6 and we are calling remove
method so that's going to remove the XML
element with that ID value so XML
document
dot root dot elements is going to give
us all elements directly underneath root
and we can use the ver method and filter
X such that X dot value X dot attribute
of ID dot value equals one zero three
first or default and then we are we want
to remove that so at the moment
let's actually remove the element with
ID value of 1:05 so we have the element
with 90 value of 1:05 so once we run
this and let's reload it let's go to
data that XML notice that 1:05 element
is removed okay and if you want to
remove all the elements directly
underneath the root element call
elements and then the remove method so
here we are filtering the element that
we want to remove here we are removing
all the elements that are underneath the
root element so if we remove this piece
of code
now every student element should be
removed and notice that we are left just
with that fruit student element now how
to delete a comment you know you get the
ex comment and then when you say remove
all XML comments from the XML document
will be removed so ex document dot nodes
dot of type X comment dot remove and
once we go to the XML file notice that
the comment is removed that's it thank
you for listening have a great day</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>