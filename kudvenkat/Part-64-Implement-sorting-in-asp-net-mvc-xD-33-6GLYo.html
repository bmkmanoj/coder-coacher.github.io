<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Part 64   Implement sorting in asp net mvc | Coder Coacher - Coaching Coders</title><meta content="Part 64   Implement sorting in asp net mvc - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/kudvenkat/">kudvenkat</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>Part 64   Implement sorting in asp net mvc</b></h2><h5 class="post__date">2013-07-29</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/xD-33-6GLYo" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">this part sixty-four of asp.net MVC
tutorial in this video we'll discuss
implementing SWAT functionality in an
MVC application we'll be working with
the example that we started in part 62
so please watch part 62 and 63 before
proceeding with this video we want to
support bi-directional sort both on the
name and gender columns so what do we
mean by bi-directional so on when I
click on the name column the first time
we want to sort the data based on that
name column in the ascending order if I
click on the name column once again then
we want to sort the data in the
descending order so basically we want to
be able to sort in both the directions
this is what is called as Phi direction
and so on notice that at the moment when
we navigate to this index view name and
gender columns are not rendered as
hyperlinks so it's not possible to sort
the data let's see what are the changes
that we need to make in order to support
sorting functionality first we need to
make changes to the index action method
within the home controller itself so
here is the index action method within
the home controller the first thing that
we need to do is to introduce that sort
by parameter this is going to be of type
string and we're going to make use of
view bag object so view bag dot and
let's use a dynamic expression short
name parameter you can give it any
meaningful name you want and this one is
going to be equal to string dot is null
or empty so if this sort by expression
is null are empty if that is true then
I'm going to store name de sá in this
dynamic expression else I am going to
store an empty string now this code may
not be clear at this moment but don't
worry in a bit you will understand how
we are going to make use of this sort
name parameter okay similarly
sort gender parameter now if sort by is
equal to gender then you know store a
value of gender descending within that
else store gender now this may not be
clear this moment don't worry we're
going to talk about this in just a bit
all right
the next change that we want to do is
basically we want to change this code as
well okay so what I'm going to do here
I'm going to create a variable called
employees and this is going to get all
the employees but then I'm going to use
this ask variable extension method now
what is the advantage of using this
extension method that Vantage is that we
can apply several filters like for
example I can apply a ver clause on this
employees I can order the employees
there okay so I can apply all these
operators on this object and then when
we call to list you know it's going to
go execute that query all at once on the
database okay now what is going to
happen if I don't use this ask variable
let's actually look at that in action so
if I don't use ask variable and then if
I look at this the change I'm going to
do here is I'm going to get rid of all
this code okay I'm going to get rid of
this code as well and
we're going to say employees is equal to
employees dot fare so we are basically
applying that where clause okay
now look at this since I am not using
ask variable here it's not possible to
use that we're on extension method if I
want to be able to use the trade
extension method let's use ask variable
now that error should go away okay
similarly we are going to do the same
thing here as well so I'm going to get
rid of all that okay so what did we do
until now you know we have applied the
wave filter depending on what is our
search by parameter we have discussed
about this parameter in our previous
sessions of this video series so please
watch part 62 and 63 before proceeding
with this session alright the next thing
is to implement the sort functionality
itself and to do that I'm going to make
use of the switch statement switch we
are going to switch on this sort by
parameter that's going to come into this
index action method okay so if sort by
is let's say name descending if that's
what is being passed into this action
method then we want to sort the data
based on the name column and in the
descending order okay so
employees is equal to employees dot
order by descending X such that X dot
name so we are sorting in the descending
order of the name column and then break
okay
similarly if that order by is gender
descending then we want to order by
descending but based on the gender
column on the other hand if it contains
simply gender then what should happen we
want to order the data based on the
gender column but in the ascending order
so simply get rid of this descending
keyword okay now the default behavior
should be that you know when we first
navigate to this view obviously there
wouldn't be any value for that order by
parameter in that case by default we
want to sort the data based on the name
column in the ascending order so that
should be the default behavior so in the
default case that's what we are going to
have so this is going to be default and
we want to order by name okay all right
so what did we do until now we have
applied the vert extension method and we
have applied the order by depending on
the value that is contained and sort by
and finally we need to return page the
list back because remember in the
previous session we discussed
implementing this paging so to retain
that paging we need to return a page
that lists back so I'm going to take
this employee object and then let's
convert that to page list using this two
page list function if you remember this
function expects two parameters that is
the page number and the page size where
are we going to get the page number from
using this parameter page and remember
that can be
so if Paige is now then use one as the
page number and then the page size is
going to be three if it's not now then
whatever value that's contained within
this page parameter will be used okay
and we need to pass this to our view so
let's simply return a view from here
okay so that is the change that we have
to do to the index action method now
this play this piece is still a little
unclear but in a bit you will understand
how we are going to use this short name
parameter and sort gender parameter so
let's flip to the index view notice that
at the moment name and gender you know
when we navigate to that view they are
not rendered as hyperlinks so we need to
convert them into hyperlinks and in our
index view this is the piece of code
that's rendering those columns okay so
now to render hyperlinks we can use
action link HTML helper so at HTML dot
action link and the first parameter to
this extent on to this method is that we
need to pass the name of the link so
what's the name of the link that you
want we want named as the link text and
then the second parameter is the action
name that we want to invoke then I click
on that link so when we click on this
name column which action method do we
want to invoke we want to invoke the
index action within the home controller
and the next parameter is the route
values and this is very important so
what are the route values that we need
to pass okay
so we need to first of all pass this
sort by parameter okay so sort by and
where are we going to get the value for
this sort by look at this the first time
when the data gets when we navigate to
this index view what's going to happen
is they're sort by here no sort is not
there so since sort by is not there
what's going to happen
it's going to check okay is sort by
Nullah empty
yes it is another empty so what are we
going to store in the view back object
for the sort name parameter name
descending okay this expression returns
true so this is what we are going to
store in this sort name parameter okay
and then what happens it checks okay it
comes here sort by what is sort by at
the moment it's null so if it's null
what happens it's going to sort the data
in the ascending order of the name
column and that gets returned okay so
the data will be sorted in the ascending
order of the name column but then in the
view bag object what will be stored you
know for short name parameter name
descending okay
so within the index view what's going to
happen it's going to pull that value so
within this sort name parameter we will
have a name descending so that is what
will be passed into the sort by
parameter so it will be named descending
so the link that it is going to generate
will have something like you know
navigate to MVC demo slash home slash
index question mark sort by is equal to
name descending so when we click on that
link what is going to happen named
descending will be passed as the value
for the sword by parameter and if that
is the case what's going to happen is if
null are empty no so in that case it's
going to store an empty string and then
what happens down the line so it checks
sort by its name descending so it's
going to order the data in the
descending order of the name column so
that's how these sort name parameter and
sargent gender parameter are used okay
so along with this sort by if you
remember we are also supporting paging
and um you know search functionality so
in order to retain we need to retain
those as well so basically we need to
have
search by and where are we going to get
the value first search by parameter
we're going to get it from the query
string so request dot query string and
we discussed about this in the previous
session so please watch that video all
right so what's the name of the query
string it's going to be search by and
that's what we are going to pass here
and similarly we also need to retrieve
search parameter value so where are we
going to get that from again from the
query string so we can either use
request or query string of the query
string parameter you can simply say
request of the query string name okay so
that is going to generate you know the
name column as a hyperlink and we need
to do the same thing for gender as well
so let's copy and paste this but we need
to make slight modification here the
column name has to be gender and here
the sort by is going to get its value
from sort gender parameter so let's pass
that right here
all right let's build a solution and
let's refresh this view now once the
view is refreshed we should have name
and gender columns rendered as
hyperlinks and notice that they are
rendered as hyperlinks I can click on
them so notice that the data when the
view first loads it's sorted in the
ascending order now if I click on the
name column look at that I don't I don't
want to click on the name column but
when we view the page source look at
what's going to happen MVC demo for
slash look at the sort by parameter sort
by is equal to name descending
percentage 20 stands for space so name
space descending so now that's what is
contained in sort by so when I click on
that name once again look at what is
passed sort by name descending and
that's what gets passed to the
controller action method so short name
parameter you know sort by is not null
or empty so it's going to store an empty
string okay and then at the moment
Swatt pie contains name descending so
it's going to sort the data based on
name column in the descending order okay
so that's how you know at this point it
should be clear on how we're using these
two parameters okay but then there is a
slight problem with this at the moment
look at that
you know now the data is sorted in the
descending order which is fine so if we
go to second page you know all is well
but then look at this when I sort for
example by gender okay
so the data is sorted by gender now look
at this when I go to the second page
it's mixed up again we lost the sorting
why is that that's because when we look
on when we click on these page numbers
we will have to retain look at that when
we click on sort
we have that sort by the moment I click
on any of the page numbers we will lose
that sort we are losing that sort by our
query string so we need to retain that
in order to retain that we have to pass
it you know in our view where we are
rendering those pager links so this is
the code which generates those pager
links and here we need to pass you know
that parameter as well so what is the
parameter name sort by that one is going
to get its value from again you know URL
so request what is the name of the
parameter sort by so let's pass it there
and let's see if it works as expected
now let's go ahead and let's save
everything and refresh this view
so let's navigate to the home view
and see if it's going to work as
expected okay so let's sort by gender
okay so it's sorted by gender
now I navigate to page two look at that
you know we have all males and all males
there so we are not losing that sorting
even when we page through all right on
this slide you can find it so she's face
be dotnet c-sharp and sequels of
interview questions that's it for today
thank you for listening have a great day</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>