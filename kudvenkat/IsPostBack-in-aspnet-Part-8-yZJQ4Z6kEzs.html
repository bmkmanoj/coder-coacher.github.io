<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>IsPostBack in asp.net Part 8 | Coder Coacher - Coaching Coders</title><meta content="IsPostBack in asp.net Part 8 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/kudvenkat/">kudvenkat</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>IsPostBack in asp.net Part 8</b></h2><h5 class="post__date">2012-10-20</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/yZJQ4Z6kEzs" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so welcome to presume technologies I am
venket this is part 8 of asp.net video
series in this session we learn about
what is this ease postback property all
about we'll also look at a real time
practical use of using this property but
before continuing with a session I
strongly recommend to watch parts three
six and seven of this video series so
what is this ease postback property is
postback is actually a page-level
property that can be used to determine
whether if the page is being loaded in
response to a client postback event or
if it is being loaded and accessed for
the first time let's understand what we
mean by this with an example here I have
a webform with this with a button
control on that I double click that to
have the even handler generated now look
at this when I go ahead and run this now
obviously we don't see anything you know
on the webform just the button control
and when the webform first gets loaded
you know this is the first time we are
loading this waveform but when I click
the button control you know we are
loading it in response to a postback
event right now let's say on the page
load I want this message in orissa first
time the page is loaded okay
page loaded for the first time and I
want this message to be appearing only
when we request this webform for the
first time so let me run this again so
obviously when the webform is first
loaded okay it will display that message
so we see that message now when I click
the button you know it posts the page
back to the server so this is not and
then the page reloads so this is not the
first time the page is being loaded but
look at what's going to happen this
message is still displayed and why is
that happening because this page load
event gets fired you know whether if
whether if you are accessing the web
form for the first time or if you are
accessing that in response to a postback
event irrespective of that it's going to
execute this page float event so within
the page load event you want to
differentiate whether if it's a post
back or the initial first
at request how do we do that we can make
use of the ease postback property and if
you look at the definition is postback
is actually a page level property
meaning is post back is post back is
defined as part of this webform class
okay so if I right click on the page
class and when I say go to definition
you should see a property there is post
back somewhere and it's a boolean
property meaning it is going to return a
true or false so if I search for each
post back you should see the property
and if you look at that it's a boolean
property which returns true or false and
it is defined in the page class so it's
a page level property ok so I can use
the property and to use the property
since you are your web form is actually
inheriting from the page you get that
access to that property so you can
either simply say if is post back or you
can prefix start with the page name so
page dot is post back okay you can it
you can either do it that way or you can
just say is post back now you're saying
okay if page dot east post back if the
page is you know if the request is a
postback request then display this
message but we don't want to do that we
want to do we want to display this
message if it's not a post back so I can
say if not is post back and this page is
optional here let's get rid of that just
to be a little simpler so now when we
close this and let's run the application
once again when the webform first loads
you should see that message and then
when I click this button the message
will not appear because it's a postback
request is post back returns true
negation of true is false so it wouldn't
get into this block and that's why you
know this message wilmot will not be
shown so east post back is a page level
property that can be used to determine
whether if the page is being loaded in
response to a client post back here and
or if it's being loaded in access for
the first time okay now let's look at a
real time practical use of using this
property now I have another webform here
and I have already designed that and
it's a very simple design if you look at
the I mean if you look at the form
itself I have a table within which I
have you know TRS and TDs and you know
employee details form is the heading for
this form and then first name a text box
for that last name a text box for that
city and a drop down list and register
employee button and if you look at the
HTML it's very simple to understand so
you have a table and within the table
you have TR and then at TD and if you
look at this this TD is panning across
two columns what do we mean by that look
at this
in every TR we have two TDS here in the
first name to display the label and the
text box itself but for the employee
details form we want that to span across
both the TDS so what we have done
instead of having two TDs
we have just one TD and we said the call
span is equal to two meaning this TD
will span across two TDs okay so that's
the simple HTML there and then if you
look at the code behind what we are
doing within the code behind it's again
a very simple code here so and we have
that on the slide as well so that's the
this is the design of the form okay and
then on the page load look at this on
the page load I am calling a function
called load city drop-down list and if
you look at that function what is this
function doing it's it's having a very
simple code there we are creating an
instance of list item object and then we
are passing in London to the constructor
of that list item class and then we are
adding that list item object to the
items collection of the drop-down list
basically what we are trying to do is in
the drop-down list I want to display
London Sydney and Mumbai and drop-down
list if you look at that will be talking
about drop-down list in a great detail
in later session so don't worry about
you know if you don't understand this
code at the
moment because we will be talking about
dropdownlist in in a very great detail
later so but drop-down list is a
collection of list item objects okay so
every item that you see in a drop-down
list is actually an instance of a list
item object so if I want London Sydney
and Mumbai to be displayed in the
drop-down list I need to create an
instance of list item object and add it
to the items collection of the drop-down
list and that's what we are doing here
again as it will you don't worry if you
don't understand this code that's not
the aim of this video session the aim of
this video session is basically to
understand the real-time use of this
exposed back property so all you can do
right now is you can you can just think
that there is a method called you know
load a city drop-down list which will
populate the drop-down list that you can
see on the web form with the names with
the city names basically so what we are
doing we are calling this function we
are calling this function in the page
load event and let's get rid of that
code there so we are calling that
function within the page load event so
when the page gets loaded in the
webserver memory these city names are
added to the drop-down list that's it so
let's run this and see what happens so
web form 2 should get loaded and if you
look at this London City and Mumbai gets
loaded as expected but then look at
what's going to happen when I click this
button when I click this button look at
this the these city names are duplicated
when I click that again look at that
it gets duplicated and if I click like
10 20 times what's going to happen every
time you click that the city names are
duplicated now let's understand what why
is this happening what's the cause for
this to be duplicated so the cause is
very simple we know that all asp.net
server controls retain their state
across postback so obviously when we
requested this webform initially what
happened you know the page load events
get the page load even gets fired it
so all the city names to this drop-down
list on the webform and then the
response is sent back to the client so
on the client we will be looking at
let's close this let's run this again so
first time when we load it shows the
city names correctly okay now when I
click this button what's going to happen
we know that all these asp.net server
controls maintain their state across
postback so it's going to remember this
drop-down list is going to remember all
these cities in its collection okay what
it's doing with those city names is
basically base64 encoding them and then
it will store them in that hidden
underscore view state fear and then that
is sent back with the request back to
the server for processing and at the
server you know we know that there are
several events that happen at the page
level page initialization Priya net load
etc and we know that view state
restoration happens during page
initialization process at that stage
from this base64 you know encoded hidden
field called underscore view state the
drop-down list data is retrieved and
then this control is populated so during
the page initialization this drop-down
list on the server has already got one
set of these city names and what is
happening during the page load during
the page load we are again calling this
method which is going to add another set
of these three cities so we get two sets
on one post back so when I click this
button once what's going to happen you
know one set is duplicated two times
it's duplicated two times now if I click
the button once again in the view state
you already have two sets of cities and
in the page load you're going to add one
more set so obviously it becomes three
now so that is the reason why we have
these duplicated city names because of
the view state maintaining its state and
then on the page load you are again
adding to it so just to brief we know
that all asp.net server controls retain
their state across post bacc these
controls make use of view states so the
first time in the waveform load you know
the cities get correctly added to the
drop-down list and send
to the client now when the when when the
client clicks the button control and the
webform is posted back to the server for
processing during the page
initialization view state restoration
happens during this stage the city names
are read to you from the view state and
add it to the drop down list and then
page to the event which happens later in
the life cycle of the webform and during
that load event we are again adding
another set of cities hence the
duplication and how to solve this
actually there are several ways to solve
this and one of the best ways to do this
is to use you know the east post bacc
property as shown in the code here so on
the page load call this method only if
it is not a post bacc meaning if it is
the initial get request only then load
the city drop down list call that method
so how do we solve it just say if not is
post back and that should solve our
problem alright so let's close this
let's read on the application and the
first time as expected it will show
correctly the set of city names okay
only once now I click the button once
twice thrice four times no matter how
many times you click it will only show
it once why because you are telling to
load these city names only if it's not a
postback and that makes sense and that's
the best way to solve this problem
obviously there are other ways as well
another way to solve this problem is to
simply disable the view state of the
drop-down list and to disable the view
state of the drop-down list it's very
simple so because we know that the view
state is causing the problem because
view state is remembering the previous
set of city names and in the page load
we were adding them again that's why
they were being duplicated so if I
disable the view state view state will
not remember them and in the page load I
just keep adding them okay so I go to
the properties of the drop-down list and
there is a property called enable view
state all we have to do it you know is
to turn that off so false now but before
we do that we also have to get rid of
this property otherwise it gets loaded
only once any
so I am putting it back to what it was
we are calling it every time on the page
load okay so let's run that so since we
disabled the viewstate now let's
actually cancel this reload once again
so since we disabled the viewstate it
loads correctly and I click the button
no matter how many times you click you
go to the drop-down list it shows only
ones very good the problem is solved but
since you disabled viewstate you know
there are there are slight problems with
this approach the first problem is
obviously what is the purpose of the
viewstate the purpose of the viewstate
is to remember the state of these
controls across postback so obviously if
you disable that view state the controls
are not going to remember their state so
obviously look at this
I selected Mumbai and when I select this
button look at this it flips back to
London so obviously it's not remembering
its state that's the first problem and
the second problem is you remember
drop-down list has a selected index
changed event so when I double-click
this in our drop-down list selected
changed selected in the exchanged event
event handler is generated and all I am
doing here is writing a method called
selected index changed okay
so obviously when we run this now and
when we change the selection of the
drop-down list and when we submit the
page back to the server for processing
it should execute that drop down list
selected index changed event but look at
what's going to happen it doesn't
execute that anymore
because why if you remember control
level you know controls basically have
three types of events postback events
cached events and validation events what
are cached events drop-down list
selected index changed event by default
is a cached event meaning it will be
cached you know when you change
selection and then upon post back that
events will be fired but here since view
state is disabled these cached events
are no longer going to work as expected
so obviously what are the problems
drop-down list does not remember your
selection across post back if you
disable the
you state and another problem as the
events may not work correctly as
expected and we have seen that
practically and another final way to
solve this problem is to simply clear
the drop-down list items before calling
this load a city drop-down list method
in the page load event but this is not
efficient from a performance perspective
okay why because all the processing
happens okay
all you are doing is you are just
deleting you know the items from the
drop-down list let's see what we mean by
that actually so let's enable the
viewstate pack so enable view state then
turn that to true and get rid of this
drop down less selection and in the HTML
remove the event handler for the drop
down list as well otherwise we will get
a compiler error okay cool
so now let's run that and reproduce the
problem first
so correctly tune I click the button and
duplicate it alright so what is the last
way of solving the problem you know when
you are loading clear the items from the
drop-down list and then call this method
okay so view code so on the page load
DDL city is the name of the control
items dot clear so every time the page
loads clear the items and then add them
once again which is an unnecessary
processing and from a performance
standpoint it's not efficient so no
matter how many times we click the
button it loads only once all right
that's it for today thank you for
listening have a great day</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>