<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Part 13  FormCollection in mvc | Coder Coacher - Coaching Coders</title><meta content="Part 13  FormCollection in mvc - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/kudvenkat/">kudvenkat</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Part 13  FormCollection in mvc</b></h2><h5 class="post__date">2013-05-12</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/IAQ4u_JRk0E" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">welcome to Beijing technologies I am
venket this is part 13 of asp.net MVC
tutorial in this video well discuss
using form collection object in MVC and
its purpose please watch part 12 before
proceeding with this video in part well
if you remember we have implemented this
create employee view notice the URL here
employee controller create action so
within the employee controller do we
have create action method yes we do and
notice that this controller action
method is decorated with HTTP GET
attribute meaning this controller action
method will only ever respond to the get
request of this URL on the other hand if
I fill this form with some data and then
if I post this form okay do we really
have a create action method within the
employee controller which is going to
respond to the post action we don't so
obviously what is going to happen when I
click this button we get an error
stating the resource cannot be found and
look at the HTTP status code 404 okay
which is nothing but the resource cannot
be found and it makes sense let's see
how to fix this so what do we actually
want to do when we click on this button
create we want to take this employee
data from this form and then save it to
this database table TBL employee okay so
obviously the first thing to do is to
create a stored procedure so here I am
creating a stored procedure the name of
the stored procedure is SP add employee
and obviously to add employee data to
this table we have to have the input
parameters you know for name gender city
and date of birth but notice that we are
not having an in Parramatta for ID
because ID is an identity column which
is going to be Auto computed and the
body of the stored procedure is very
straightforward all we are doing is we
are inserting data into the stable TBL
employee into these columns and where
are the values for those columns coming
from in the form of parameters okay so
that's the stored procedure that's the
first step and the next step is with an
employee business layer at the moment we
only have this employee's property which
is going to return all the employees
that are present in TBL employee table
we also need a method
you know to save the employee data to
that database table and to do that let's
add a method so I'm going to call this
public the return type is going to be
void and let's say add employee so we
give it the employee object and this
method is going to take care of saving
that employee object to the database
table and to speed things up I have the
ad or dotnet code already implemented
here so let me copy and paste that into
our function and if you look at the
implementation it's very straightforward
all we are doing here is reading the
connection string from web config file
using that connection string to be a
building of sequel connection object we
are then preparing our sequel command
object so here we have the stored
procedure that we just created SP add
employee and then we are specifying the
command type a stored procedure the next
step is to obviously create the input
parameters and add them to the command
object so here we have the name
parameter and then gender set a date of
birth finally we open the connection
execute the query which should insert
the given employee object to the
database table okay so that's the second
cheese that we have to do you know in
our project employee business layer all
right so the next thing is obviously you
know when I click this button we need a
create action within the employee
controller okay which responds to the
post operation so let's go to the
employee controller and I'm going to
make copy of this create action and I'm
going to decorate this method with HTTP
POST attribute meaning this controller
action method is going to respond to the
post operation ok so obviously when we
click this button what should happen
we should harvest the values that are
present in this form ok and then pass
them on to our add employee method
within the business layer so add
employee method is going to take the
business object you know the employee
business object ok and to do that
obviously you know this method needs to
receive you know
form values and to do that I'm going to
introduce a parameter here form
collection so we have the form
collection there so what is this form
collection going to contain so when I
click this button you know whatever data
that is present on this form you know
this form collection object is going to
receive them in the form of key value
pairs okay so if I want to retrieve for
example let's say I want to print all
the keys and their values you know that
are present on this form how do I do
that you can simply use a for each loop
so for each string key in form
collection object dot there is a
property called all keys and look at
what is the property returning it is
returning a string array so we are
looping through all keys
actually let's write the key there so
key is equalto and then let's add a
space as well and then we want the value
for that key so response torque right so
we have the form collection object and
let's look at that to retrieve the
values from the form collection we can
either use an integral index ax or the
name of the key okay I'm going to use
the key name there so I'm going to pass
the key name which is going to return
the value okay and then let's put an
HTML break there so that every keep a
value will be returned in its own line
all right let us change let's go ahead
and run this and see what we get as the
output so what we are basically doing we
are looping through each key within that
form collection object and then we are
printing then the key name itself and
the value from the key so let me run
this and navigate to the employee index
view create new let's populate that with
some sample data and let's click on this
create button look at that I get the key
s name and the value is wankered within
that key is gender value is male key
city values London and keys date of
birth and the value is whatever we have
entered into that form okay so basically
we are using this form collection object
to retrieve the keys and the values okay
so now if we have to persist the entered
employee data to a database table all we
need to do is retrieve data from this
form collection object pop create an
employee object and then pass it on to
add employee method of this employee
business layer and that's it let's do
that
so within this create employee method
I mean action method I am going to
create a new employee object let's call
it employee and let's specify the
employee name so where do we get the
employee object I mean employee name
from from form collection and just to
speed things up I have this code already
typed here so let me copy this code and
paste that right here so we we are
taking the name from the employee object
I mean from the form collection and then
populating the name property of the
employee object similarly gender city
and date of birth
now form collection returns you know if
I specify the key it returns the data or
the value within that key in the form of
a string now here date of birth is the
time so we need to convert that to date
time okay so we have the employee object
and all we need to do now is create an
instance of your employee business layer
so employee business layer let's call it
employee business layer is equal to new
employee business layer and then this
employee business layer has got add
employee method okay so we need to pass
the employee object and this method will
then take care of you know persisting
the data that's present in that employee
object to the database table okay and
once that is done what we need to do we
need to redirect the user back to the
index view I mean index action method so
that we can see the newly added employee
and to do that I'm going to use you know
a function redirect to action and to
which action we want to redirect the
user specify the name it's the index
action that is present in the employee
controller which is going to list all
the employees that's it let's go ahead
and run this
so let's navigate to employee create
view and then let's populate with some
data and let's click on create look at
that the new employee is added okay now
look at this code this looks quite
redundant and boring code so do we
really have to write this code every
time you know let's say here if you look
at this form it's a very simple form I
have four fields let's say there's a
huge form is like or 10 15 or 20 fields
now this is monotonous and redundant
code so do we really have to do this you
know code of retrieving data from the
form and then populating the business
object and then sending it over to to
our you know business layer do we really
have to do that in MBC no that's the job
of model binders in MVC will discuss
about model binders in our next video
session on this slide you can find
resources for asp.net c-sharp and
sequence of interview questions that's
it for today thank you for listening
have a great day</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>