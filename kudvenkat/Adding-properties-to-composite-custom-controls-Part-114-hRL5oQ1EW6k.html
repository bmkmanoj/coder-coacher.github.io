<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Adding properties to composite custom controls   Part 114 | Coder Coacher - Coaching Coders</title><meta content="Adding properties to composite custom controls   Part 114 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/kudvenkat/">kudvenkat</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Adding properties to composite custom controls   Part 114</b></h2><h5 class="post__date">2013-01-20</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/hRL5oQ1EW6k" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello welcome to prism technologies I am
Venkat this is part 1 100 of asp.net
video series in this video we'll discuss
about adding properties to composite
custom controls in part 1 1 2 of this
video series we have discussed the
basics of asp.net composite custom
controls and in part 1 1 3 we have
discussed about adding these controls to
visual studio toolbox in this video
we'll discuss about adding properties to
the composite custom controls if you
haven't watched part 1 1 2 and 1 1 3 I
strongly recommend to watch those videos
first before proceeding with this video
at the moment the calendar composite
control does not have an image
associated with the image button so if
you look at the state of our composite
custom calendar control it looks like
this we have an image button here but
look at this there is no image
associated with this image button now I
want to associate the image that you can
see here calendar dot jpg I want to
associate this image with the image
button you know with this custom
calendar control let's see how to do
that obviously if you have to do that we
have to have a property defined on this
composite calendar control ok so where
is this calendar control defined if you
remember we have created that in the
custom controls project you know the
custom calendar control is in its own
project custom controls ok so to this
class custom calendar class we need to
add a property which the end-users can
use to set the image of their choice for
the image pattern ok so we need to
expose a property on this control
ok so let's call the property as image
button image URL property so we have an
image button within this custom calendar
control we have an image button and we
want to associate an image with that
image button so I'm going to call my
property as image button image URL
property look at that that's going to be
the name of the property image put an
image URL and it's a string type
obviously the part of the image is a
string so the type of the property is
string and it's a public property so
it's available outside of that control
as well and look at this I'm using two
attributes here
category attribute and description
attribute so what are these attributes
and why are we using them to understand
the need of these attributes actually
look at any of the control let me drag
and drop another button control maybe
from the toolbox onto the webform so I
have this button control now if I flip
to the design mode selected button and
press f4 to get to the properties of the
button look at this when we are in the
properties mode you know look at this I
have sorted these properties by category
they're not in alphabetical order they
are categorized so we have different
categories here now that's the category
appearance for example is the category
and within that we have the property
displayed here and look at this when I
select a property the property
description appears here okay so
basically it's for the property that we
are going to set for this custom
calendar control I am specifying the
category under which this property
should appear and the description for
that property so I'm saying this must
appear under appearance category and the
description is sets the image akin for
the calendar control okay so that's the
category and description attributes this
is an image but an image URL property of
type string with public access modifier
because we want users to use this
property to set the image of their
choice for the image button okay and
then it's going to have both get and set
accessors now here within the get axis
of what we are doing now this image
button image URL whatever image they set
to this property what we need to do with
that property that image will be used to
set the image URL property of the image
button that we have so we have this
image button object so this image button
object has got an image URL property so
anytime they set a value okay that value
we are setting that to the image URL
property of the image button in the set
accessor okay but look at this before we
actually set the value we are making a
call to ensure child controls method so
what is this insured child controls
method now this NGO child controls
method you know basically this
we'll ensure or you know this this
method will check if the child controls
are created if the change controls are
not created then this method will
trigger a call to create child controls
method so if you remember we have this
create child controls method which
actually creates the child control
object so this custom calendar control
is actually actually composed of three
change controls the text box image
button and calendar control okay so this
ensure child controls look at this what
we are trying to do here using this
property we will either try to get a
property of the of one of the child
controls which is the image URL property
of the image button we will try to
retrieve that using the get accessor or
we will try to set the value for that
property for the child control but in
order for us to be able to do that that
child controls must be created in the
first place
so if the controls are not already
created and if somebody is trying to set
or get the value of that property from
the child control
we don't want null reference exceptions
so that's why we call this method and
short child controls any time we try to
retrieve or you know set a property of a
child control just to make sure that
this method is going to ensure there are
going to be child controls because this
will check if the child controls are
already created if not this method is
going to trigger a call to create a
child controls method which will make
sure the child controls are created and
then we will either set the value or get
the value so within the get axis of what
we are doing we are checking if the
image URL is not null if it is not now
then return the image URL else return
string dot empty it's as simple as that
so a simple image but an image URL
property let me build the solution with
that change so all we have done so far
for this custom calendar control is that
we have added this property and I have
built the solution build succeeded but
what I'm going to do I'm going to go
back to the web application project
where we are testing this and I'm going
to get rid of this register directive
and the control declaration because we
since we have changed the code let's
remove those references and riad them
also if you remember in the solution we
have a reference to custom
trolls project let's go ahead and remove
that as well and then from the tool box
let's remove this custom calendar and to
remove that simply right-click choose
items and from the choose items tell our
tool box all we have to do is get rid of
that custom calendar control so custom
calendar let's get rid of that click OK
now let's clean the solution and then
let's riad the composite calendar
control so choose items and we know that
the project is created in the C Drive so
I'm going to browse to C Drive custom
controls bin-debug and then the assembly
that we add the custom calendar now we
have this custom calendar control let me
drag and drop onto this waveform and now
remember we have added that image button
image URL property so let me go to this
ctrl + + f4 to get to the properties
window and look at this now you have to
make sure that you are in categorized
View mode of the properties window if
you are in alphabetic order it will
still show the property but it will not
show the category under which it has to
appear but if I saw that by category
then look at that category the image but
an image URL property is present and
their appearance category and also
notice in the properties window at the
bottom here it's showing the description
that we have specified when we are
actually building that control so sets
the image icon for the calendar control
and look at that's the same description
that we have here and look at the
category it is appearing under
appearance category ok now I need to set
you know any major I need to associate
an image to this image button within
this calendar control and we have this
property to do that so if you look at
this within the images folder I have
this calendar JPD
I have already copied and pasted that
image into images directory so within
this project I have images directory and
within that I have calendar dot jpg so I
want to associate this image button now
to that particular image so let
see you have to do that so image button
URL so I'm going to set that to images
four slash Cal lambda dot jpg okay now
look at this as soon as I said that
property there it's not actually look at
that if I go to the source it has said
that property
oh it's actually calendar dot jpg okay
look at that it's not actually showing
that image immediately there I save that
but still it's not showing that image
but let me go ahead and run this now but
at runtime
it actually shows that look at this at
the design at design time it's not
picking up that change to that property
in fact it's not retaining that value
but look at this at runtime it's
actually showing that image to me so how
do we correct that at design time I
still want as and when I change my
properties I want the control you know
the designer to update the control
immediately because if you remember you
know if I drag and drop a button control
if I change the text for the example on
the button it will be the change will be
immediately reflected on the design
surface at a design time okay but look
at this at runtime it it correctly shows
the image that is associated with this
image button as expected but at design
time it's not picking up that a property
change so what what do I need to do to
correct this problem it turns out that
it's very simple to correct that problem
all you have to do is within the control
within the custom control we have to
override another method called a
recreate child controls method okay so
we have this recreate child controls
method this is called by visual design a
visual studio designer to create the
child controls at design time so
basically what should happen is when we
change this property at design time the
image but an image URL property at
design time you know the child control
need to be recreated and then assign
this property so that the change will be
shown immediately at design time to the
end-user whoever is changing this
property and to do that we have to
override this recreate change controls
method and thus recreate child controls
method is actually
coming from the base composite control
class so if you look at this custom
calendar class it inherits from
composite control and within composite
control we have this virtual method
recreate child control so all we have to
do is override that method so if I type
override and then plus space and then
type recreate chill controls look at
that that method is coming from
composite control class okay plus tab
and it should automatically generate the
skeleton structure for that method and
all I have to do here is call entry or
child control method okay and if you
remember what does this enter your child
controls method will do it will check if
the child controls are already created
if they are not created it's going to
trigger a call to create child controls
method which will actually create the
child controls for us okay so that's the
second change that we have to do let me
rebuild this project here so rebuild the
solution and let me go to the web
application project where we are testing
this let me remove the control from the
toolbox so right click choose items and
then let me remove the control from the
toolbox so custom calendar that should
remove that reference and let me go
ahead and get rid of the control
declaration and the control itself also
remove it from the references folder
okay and let me rebuild this okay that's
fine now let me go ahead and add at the
control back to the toolbox choose items
and navigate to C Drive so C Drive
custom controls custom controls then
debug and the custom controls assembly
click OK let's drag and drop that now on
to the designer surface which should add
the custom calendar control and let's
flip the waveform to design mode go to
the properties window now let me change
again this one to image is for slash
calendar oops let's change this to
images
four slash images folder okay let me
copy the name let's get to the calendar
control and images four slash calendar
dot jpg look at that the moment I have
changed that property it's actually
reflected within that control now for us
at design time itself and all we have
done until now is to override that
method recreate child controls method
okay so we have corrected the problem
but then there is still an issue with
this look at the alignment of the text
box and the image button there you know
they're not properly aligned so
basically what way what I want to do is
I want to resolve this cosmetic issue as
well
and to resolve this cosmetic issue if we
put this text box control and this image
pattern control inside the table then
they're going to up here or properly you
know basically I want this to be you
know aligned in center with the text box
okay so let's go ahead and put these
controls in the table control okay and
to do that I'm going to go back to the
custom calendar control and change this
render method now all we are doing at
the moment is we are rendering the text
box control and the image button and
calendar okay now what I'm going to do
I'm going to put these text box and
image button inside a table okay I'm
going to put both the controls in the
same table drawer okay so I am I going
to render a table using this text writer
object it's very easy to do so I have
some code already typed for that so
let's go ahead and change that method
and then let me copy and paste a method
here it's the same render method all I
am doing at the moment is in addition to
rendering the text box image button and
calendar control I'm also rendering a
table okay so basically we have this
HTML text writer object I'm calling this
method add attributes to render
because we need to call this method
because I'm adding a cellpadding
attribute as well okay so that's an
attribute for a table so cell padding of
one okay I'm I'm adding that using add
attribute method and look at this I'm
using the lender begin tag of the writer
object to render an HTML table okay an
opening tag for the HTML table and after
the table is rendered we know that a
table is a collection of table rows and
each table row is a collection of table
data that is table cells okay so I am
first rendering a begin tag for table
and then within the table will have at
TR so a begin tag foot here and within
the TR we need a TD so we have a TD here
and then within the TD I'm adding a text
box control and then I am closing the TD
and after that again open another TD and
then render the image button within that
TD and then close the TD okay so
basically the text box and image button
are present in the same row but in
different T DS okay so this should
properly align them and then finally
what we need to do we need to close the
TR this will close the TD the end tag
for daily this will close the TR and
this will close the table and finally
render the calendar control outside of
that table so it's as simple as that
so it's it's simple a repetition of good
this method looks a little vague but
it's it's all simple and straightforward
code just to render the image button n
text box inside the table that's it
so let me rebuild this and this should
correct that cosmetic issue as well so
build solution let's go back to visual
studio let's remove this custom calendar
from the toolbox so let me go to the
toolbox and get rid of that custom
calendar and let's go to the solution
Explorer remove the reference for that
and remove the control declaration
itself and the control itself so at this
point we should have
you know the alignment issue also fixed
so let me riad the control so choose
items browse to see dry so computer
should be in C Drive custom controls and
within that custom controls bin-debug
and then custom control store dll so I
have that custom calendar let me drag
and drop that so we have they control
their flip to the design mode let's set
the image but an image URL so images for
slash Cal in the dot jpg oops
calendar
images force lash curl in the dot JPJ so
that should pick up that image and look
at that even a design time it's properly
aligned there so if I go ahead and run
this at this time as you might expect it
should be properly aligned okay so look
at that it's probably aligned there now
this calendar control the custom
calendar control still has some issues
for example when the calendar control
renders we don't want this calendar to
be immediately visible to the user
initially only the text box and the
image button should appear when I click
this image button that's when this
calendar should appear and then as soon
as I select the date the selected date
should be populated within this text box
control will we'll see how to solve
these issues in our next video session
on this slide you can find resources for
asp.net c-sharp and sequel server
interview questions that's it for today
thank you for listening have a great day</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>