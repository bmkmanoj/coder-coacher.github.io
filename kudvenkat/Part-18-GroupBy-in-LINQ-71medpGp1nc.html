<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Part 18   GroupBy in LINQ | Coder Coacher - Coaching Coders</title><meta content="Part 18   GroupBy in LINQ - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/kudvenkat/">kudvenkat</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Part 18   GroupBy in LINQ</b></h2><h5 class="post__date">2014-07-26</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/71medpGp1nc" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">this is part 18 of link tutorial in this
video we'll discuss group by and length
grew by operator belong to grouping
operators category this is the only
operator within the grouping operators
category grew by operator takes a flat
sequence of items organized that
sequence into groups based on a specific
key and returned groups of sequences in
short group by creates and returns a
sequence of I grouping K comma V where K
is the key and V is the value let's
understand group I with examples let's
flip to visual studio so here I have a
new console application all I have done
so far is added this employee dot C S
Class file to this project within which
we have the employee class with five
different properties ID name gender
department in salary in addition we also
have this get all employee static method
which returns a list of employee objects
at the moment this method returns ten
employee objects out of it six of them
belong to IT department and four of them
belong to HR department and what we want
to do is get employee count by
department ID has got six HR has got
four and display that on the console so
let's see how to achieve this so within
the main method we are going to make use
of this employee class and then in work
the get all employees static method this
method gives us that flat list of
employee objects and what we want to do
with these employee objects is group
them by department so we are going to
make use of this group by extension
method now notice that there are eight
overloaded versions of this method we
are going to make use of this
first-order overloaded version which
expects key selector so what is this
parameter all about now then we say we
want to group employees we'll have to
say what is the key by which we want to
group these employees we want to group
them by Department so we specify that
using a lambda expression and if you
notice what this method is returning
it's returning ienumerable of a grouping
of string comma employee so we are
getting a sequence of I grouping string
comma employee so what is that string
there that's the key for the group now
as you look at this department prop
it's data type is string so we are
grouping employees by department so
within the group the key is going to be
string department name and the value is
going to be employee object so let's
store these groups in a variable called
employee groups so what is this employee
groups variable going to contain now
it's going to contain two groups of
employees one of the groups key will be
HR and all of the employees belonging to
the HR department will be in that group
the other group key is going to be IT
and all the employees belonging to IT
department will be in that group so we
have two groups now in this variable so
all that is left is to use a for each
loop loop through each group print the
department name and the total number of
employees within that group so let's use
for each let's call the variable group
in employee groups so first we want to
print the name of the department so
let's use a placeholder there for the
department name and then the total
number of employees so we use the key
property of the group because that is
what is the key by which we are grouping
employees so key property is going to
return as the name of the department and
then we want the total employees within
that group so simply use the count
aggregate function so let's go ahead and
run this now notice that we get the
total number of employees by department
now let's say we want to find the total
male employees within each department so
we want to exclude female employees from
the count now to achieve that we can use
the other overloaded version where we
specify that we only want to count male
employees so when we run this now notice
that this count only shows the number of
male employees within each department
and if you look at the syntax here at
the moment they using the extension
method syntax
now let's rewrite this query using
sequel like syntax so for that we'll
start the creative it from let's call
the variable employee in employee class
or get all employees what we want to do
is group the employee by Department
that's it let's run this now we should
get the identical output now since this
is a group you can use any aggregate
function so far we have just use the
account aggregate function now if you
look at the employee object that we have
taught here we also have salary property
now let's say we want to find what is
the maximum salary that is paid to an
employee within each department now to
find that we can use the max aggregate
function so we use the max aggregate
function and then we say we want the
maximum salary so X such that X dot
salary so when we run this we should see
the maximum salary that is paid within
each department similarly if you want
min salary simply use the min aggregate
function or if you want the total amount
of salaries paid to all employees use
the sum aggregate function if you want
to find the average salary then use
average aggregate function all right
let's look at another example now what
we want to do is not even the name of
the department and the count of the
employees we also want you know each
employee name and then the department to
which they belong as you can see here so
let's see how to achieve this first of
all we want the dashed line so the query
itself is not going to change so here
what we are going to do is print out a
dashed line and we want the total count
of employees so let's actually use the
count extension method and now notice
this what is this group going to contain
this group contains the department key
as well as the employees belonging to
that group and we just print the key
which is the department name
we now want each employee object that is
present within the group so what we need
to do is
use another for each loop let's call the
variable employee n group so this group
now contains all the employees as well
belonging to that specific group so all
that is left is to plant the employee
name and then let's print a tab space
and then the name of the department to
which they belong
let's also plant two
blank lines
let's run this notice that department
name and the employees belonging to each
department alright now let's look at
another example so in addition to
printing you know the department name
and the employees belonging to each
department at the moment if you look at
this data it's not sorted in any way
first here look at this
IT department is being shown then HR and
then the employees within the department
I've sorted are not sorted in any
fashion and what we want to do is sort
the department names first in ascending
order and then employees within each
departments must be sorted in ascending
order as well so let's see how to
achieve that so at the moment you know
we are just grouping the employees not
what we want to do is we are going to
group them and store them in this
variable called a group ok so now what
we want to do is first sort by
department name so I'm going to use here
order by and then specify we want to
chart by the key property so what is the
key going to contain department name so
the groups will be sorted by the key so
they will be in ascending order and then
what we want to do is sort the employees
within each group in ascending order as
well so for this process for this
purpose what I'm going to do is project
a new anonymous type here and this
anonymous type is going to contain a
property called key and in this property
we are going to store the group key and
it's going to contain another property
called employees and this is going to
contain the employees that are present
within the group ok so now we are
getting an anonymous type back and
obviously because now we are projecting
anonymous type so this groups now is
going to contain you know two objects or
two groups with these two properties ok
so now this employee groups is going to
have a property called employees and and
on that we need to call the
so let's call employees count so this
should fix that compliation error and
then again here employee is not present
in the group variable employees are
present in this employees variable
because that's what we are projecting
the employees into right now when we run
this now notice that the department
names are sorted but not the employees
within each department so we want to
sort them and the way we are going to do
that is by using the order by extension
on this group and then say we want to
sort them by name so we want to sort
them in ascending order so we are using
order by alright so let's go ahead and
run this now notice that the departments
are sorted in ascending order and the
employees within each department or
sorted in ascending order as well that's
it for today thank you for listening
have a great day</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>