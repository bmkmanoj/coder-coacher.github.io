<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Part 50   Authentication in WCF | Coder Coacher - Coaching Coders</title><meta content="Part 50   Authentication in WCF - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/kudvenkat/">kudvenkat</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Part 50   Authentication in WCF</b></h2><h5 class="post__date">2014-04-18</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/EWBgqfhAT9U" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">this part 50 of wucf video series in
this video we'll discuss authentication
in WCF in part 47 of this video series
we discussed how bindings provide
confidentiality and integrity security
features out of the box without any
additional configuration in this video
we'll discuss authentication and in a
later video we'll discuss authorization
over the box
most bindings provide authentication
without any additional configuration for
example out of the box both WS HTTP
binding and net DCP binding provides
Windows authentication let's understand
this with an example
let's flip to visual studio let's create
a new project and let's call this
project simple service let's delete this
class 1 dot CS well that's
auto-generated and to this project let's
add a new item and we want to add a WCF
service so let's search for the template
select abusive service and let's name or
WCF service simple service let's change
the name of this operation contract
let's call it get user name so what is
this operation contract going to do it's
going to return they logged in user name
and since we want to return the logged
in user name the return type of the
operation contract is going to be string
now let's go ahead and implement this
operation contract in simple service
file so click on I symbol service plus
control dot and it will get an option to
implement the interface method in this
case get user name so here we need to
write code to return the logged in user
name so how are we going to get the
logged in user name so obviously whd be
binding and a tcp binding out-of-the-box
provide windows authentication meaning
whoever is logged into the computer you
know we are going to return that logged
in user name so how are we going to get
the logged in user name to get that we
use service security context
class so service security context dot
current dot primary identity and if you
look at this object it has got three
different properties is authenticated
you know this is a boolean property okay
so this is going to return true if the
user is authenticated
so let's actually print that as well so
console dot write line so within the
console window of our WCF service will
print our you know a message saying
whether if the user is authenticated or
not so is authenticated and that we are
going to concatenate whatever you know
this method is going to written is
authenticated and let's convert that to
a string okay similarly if the user is
authenticated then we also want to know
what is the authentication type used so
authentication type and how do we get to
know what authentication type is used
again this primary identity object has
got authentication type property and
that it returns string so there's no
need to convert that again into a string
and then finally so we know whether the
user is authenticated or not
what authentication type is used and
finally we want to know the username
that is the authenticated user name so
console dot readline username
and to get the username again we use the
same object service security context or
current or primary identity dot name
should give us the logged in user name
okay so basically all these lines are
going to print you know the message
within the console window but this
method needs to return the logged in
user name so let's go ahead and return
that string so return let's just say
authenticated user name and we can
simply copy and paste this same code
right here okay so basically this line
is going to return the authenticated
user name and these three lines are
going to print whether if the user is
authenticated if the user is
authenticated what what authentication
type is used and the username of the
authenticated user okay alright so there
we have our WCF service now we need to
host this WCF service and to do that
let's go ahead and add a console project
to this solution and let's call it host
project ok and to this project we need
to add a reference to our simple service
and we also need to add a reference to
system dot service model assembly so
let's go ahead and do that as well
and we need to add an application
configuration file to a host project and
here we need to specify the
configuration to host the WCF service to
speed things up I already have the
configuration type so if you look at the
end point here notice that at the moment
we're using WS HTTP binding and if you
recollect you know WS h DB binding
provides windows authentication
out-of-the-box okay
and then within program dot C s file we
need to write code to start our WCF
service so first of all let's bring in
system dot service model namespace and
copy and paste the code to start this
service host all right so let's set up a
host project as the startup project and
run our WCF service so who started now
let's create a client for our WCF
service so here I already have a new
windows forms application all i have
done so far is drag and drop this button
control onto the form and then i have
changed the name of the button to bt and
call service and the text on the button
to call service so the first thing that
we need to do here is to add a reference
to our WCF service so add a service
reference and if you look at the base
address where our WCF service is
available this the base address so let's
copy that go back to our client project
and paste the address here click go so
this should discover a simple service
let's specify the namespace as simple
service click OK and let's double click
the button control which should generate
a click event handler so now let's go
Dan invoke of a simple service
so first let's create a client
and we have get user name function which
is going to return a string and let's
display that string within a message box
so message box talk show
alright so let's go and run this now now
at the moment I am logged in into this
computer using ten username so when I
click call service so the name of the
computer here is wankered - pc so that's
what is the message we should get look
at this authenticated user name when get
- pc that's the name of my computer and
on in this computer we have a user
called tan and that's what I have used
to login to this computer so you know it
it has identified that ok now if you
look at the service host console window
look at that is authenticated true and
authentication type is ntlm and username
is winged cat - PC it's backslash tan
now I have another user you know on this
computer configured and the username is
venket so let's actually run this client
application you know with a different
user account and to do that open this
client project in Windows Explorer
navigate to the bin directory and then
to the debug directory so here we have
client exe now you know hold down the
shift key and then right-click on client
or txa so you will get an option to run
that application as a different user so
select that option so now it is asking
you the credential of the different user
you know using whose account you want to
run this client application now we want
to run this using a venkat account
that's configured on this benkard PC so
let's go to n type venket username and
we also need to type his password so
let's go ahead and do that and then
click OK
so now this application is running using
venket user count okay so when I click
call service look at that Bank at - PC
slash rancor and if you look at the
console window again look at that is
authenticated true authentication type
is ntlm and username is Wingert - pc
blanket okay so out of the box you know
WS HTTP binding is providing you know
windows authentication let's actually
change the binding to net tcp binding
and see if it works the same way so
instead of WS HTTP binding let's change
that to net TCP binding
let's close the client as well as the
WCF service host and let's go ahead and
run our WCF service host since we have
specified the binding its net tcp
binding we need to add a base address
for TCP binding so let's go and do that
as well net dot TCP colon four slash
four slash local host :
89 t so that is going to be the base
address for the TCP protocol alright
let's go ahead and run our WCF service
so host started now let's go ahead and
update our service reference within the
client application so if you look at the
app dot config file at the moment it's
using WS HTTP binding
okay so let's update the service
reference
so now it is using net TCP binding right
let's go ahead and run this click call
service look at that Bank it - peasy
backslash 10 and within the service host
window is authenticated true ntlm and
tan is the logged in user
so to customize the security mode for a
binding you know we use mod attribute of
security element within the respective
binding we discussed this in part 47 and
now if we want to configure or customize
the authentication mode for a given
binding then we use client credential
type attribute of ADA the message
element or transport element now let's
say for example you know at the moment
here we are using net TCP binding and
then you know we know that we have
different modes of security we can
either use transport security or message
security or mixed mode security so to
configure the security mode we usually
use the bindings element and then let's
say for example we want to customize the
binding for net TCP binding so we'll
specify the binding name as net TCP
binding I mean the binding type and then
we give the binding a name maybe let's
say net TCP and then here we specify the
security mode so what security mode do
you want you want message or transport
on transport with message credential or
you don't want any security at all so
let's say for example when I choose
transport as the security mode then we
select transport element within the
security element and then here client
credential type is what we can use to
customize the authentication that we
want to use with this security mode so
do you want to use Windows or do you
want to use certificate or not okay
similarly if you set the security mode
as
message then you use message element and
then specify the client credential type
so the message you know security mode we
have court we have actually a lot more
options than you know with transport
mode so here we can either use Windows
or username authentication certificate
or issued tokens we'll discuss all these
in detail in a later video session okay
the point that we need to understand
here is that to customize the
authentication scheme for this given
binding we use client credential time
that's it for today thank you for
listening have a great day</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>