<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Data bind asp.net dropdownlist with data from the database   Part 17 | Coder Coacher - Coaching Coders</title><meta content="Data bind asp.net dropdownlist with data from the database   Part 17 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/kudvenkat/">kudvenkat</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Data bind asp.net dropdownlist with data from the database   Part 17</b></h2><h5 class="post__date">2012-11-03</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/wf9WceS1lFo" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello welcome to presume technologies I
am venket this is part 17 of asp.net
video series in this session we'll learn
about binding data from a database table
to a drop-down list control as part of
this example I have TBL city table
within the sample database and I want
the data that's available in this table
to be displayed within a drop-down list
control in an asp.net web application
specifically I want the city name to be
displayed within the drop-down list and
obviously to do that the asp.net web
application should be capable of
retrieving data from a database and we
have discussed about retrieving data
from a database in a great detail in ad
or net video series if you haven't
watched that I would strongly encourage
you to do so before continuing with this
session okay
so let's drag and drop the drop-down
list control so I have this drop-down
list control now obviously we need to
write the ADA dotnet code to connect to
the database and retrieve data from that
table and obviously to do that I have a
connection string in our web config file
the name of the connection string is DB
CS and if you look at the data source
its dot which means the local sequel
server installation and the databases
sample we are using windows
authentication okay
so let's read that connection string
from web config file and obviously to do
that we make use of the configuration
manager class so configuration manager
dot connection strings property and we
need to specify the name of the
connection string which in our case is
DB CS dot get the connection string okay
so let's do that in a variable called CS
standing for connection string so let's
create the connection object and to do
that we can make use of the sequel
connection class so sequel connection
con is equal to new sequel connection
and obviously to establish a sequel
connection you need a connection string
so copy the connection string and use
that variable okay if you want the
connection to be automatically closed
then use the using block so if we use
the using block we don't have to
explicitly close the connection as
soon as the scope of this connection
object is lost it will be automatically
closed for us so now let's prepare the
sequel command that we want to execute
so sequel command CMD is equal to new
sequel command now if you look at the
query this is what is the query here now
let's execute that query and then we
need to pass another parameter which is
the connection object because the
command object needs to know on which
database it has to execute this specific
command okay so the next thing is
obviously we execute the command but
then the most important thing before
that is to actually open the connection
so let's open the connection connection
dot open and now look at this the
execute reader method of the command
object returns a sequel data reader
object and we can set that as the data
source for the drop-down list control if
you remember in the previous sessions of
this video series we have seen how to
add you know list items to a drop-down
list at the design time so if you
haven't watched those videos first I
would strongly encourage you to do so
before continuing with the session okay
so I can now say drop-down list dot data
source so the data source for the
drop-down list is going to be the you
know the result of you know executing
this query whatever result that you get
back set that as the data source for
your drop-down list which means you're
technically saying okay set this table
as the data source for this drop-down
list one and all you have to do is
called the drop-down list data bind
method okay cool so now let's go ahead
and run this and see what's going to
happen so our intention is basically to
display the city name within that
drop-down list control so when the
drop-down list actually renders look at
this it's actually showing first of all
look at this how many rows we have we
have got four rows here and within the
drop-down list there are four list item
objects which is good but then the
problem is instead of showing the city
name it's showing an object name system
the data the common dot data record
internal
and that's obvious because look at this
what you are doing here you are saying
you know when you execute this command
you get a reader object and you are
setting that reader as the data source
for the drop-down list one control and
if you look at the reader what does the
reader have in it it has got these three
columns okay and you are saying okay
this is the table which is going to act
as the data source for this drop-down
list control but then how will the
drop-down list know which column in this
table it should use to display that okay
so we have to tell that so should is
true de tu city ID or city name of
country okay how will the drop-down let
us know that we have to tell that and
how do we tell that there are two
properties for the drop-down list which
are nothing but the data text field and
data value field data text field is
something that gets displayed to the
user and data value field is the value
you know that the list item object has
which we can use to actually store in
the database which doesn't really make
sense to the user you know if you look
at this table I want the city ID to be
the drop-down list list item object
value and the city name to be the you
know the text that we actually display
within the drop-down list
so this this will be the text property
of the list item object and this will be
city ID will be the value property of
the list item object and you have to
specify that to the drop-down list okay
and how do we do that
using the data text and data value
properties okay so let's see how do we
do that now look at this drop-down list
one dot data text field so what is the
text field that we want to use city name
column so let's copy that city name
column and use that as the data text
fail and along the same lines let's set
the data value fill so I want the data
value field to be the city ID so copy
that paste it here okay so now let's
close this browser window read on the
application and see if that's going to
fix our issue unfortunately it's not
going to fix our issue
and look at this we have the same output
now if you look at the code we have set
the data text field data value fill but
then the reason why it is still showing
this data record internal is because you
are doing your setting these properties
after you have actually bound the data
base
you know the drop-down list control to
the data source you will have to specify
this properties before you call the data
bind method because if the drop-down
list has already been bound to the data
there's no way you can change it
afterwards okay so do it before you call
data bind I mean it's enough if you do
it just before you call the data bind
okay so if I run that now it should
display the city name as expected and
city ID will be the value for that list
item object look at this okay now is it
mandatory that I have to do this in code
no if you want you can do that in the
HTML as well so within the source I can
set the data text field and data value
field here so let's get rid of these two
properties from there and I want to use
city name as the data text field so I
can go to the web I mean the source of
the HTML and I can specify data text
field which is going to be city name and
data value field is going to be city ID
copy that use that as the data value
field so now if you look at this within
the code we don't really have the
properties we are setting them in the
HTML but that should still be fine so
when the page renders you should see the
city names as expected cool
so specify the data text field and data
value field properties of the drop-down
list control if you want you know
depending on what you want to display in
that drop-down list data text feel and
data value field properties can be set
either in the code or in the HTML and we
have just seen that and make sure these
properties if you're setting them in
code you set them before a call to the
data bind method
and another simple improvement that you
can do for this call look at this one
let's drag and drop a button control on
to the webform okay and this button it's
not going to do anything okay it's just
going to post the page back so now let's
run this so when the page renders
obviously it loads the data from the
database and displays that within the
drop-down list control and where is it
happening it's happening within the page
load event of this webform now when I
click this button look at that it's it
shows the values as expected but let's
say you know no matter how many times
you click it it shows them only once as
expected which is good but then you know
you know that asp.net controls retain
their view straight across post bacc
okay but then the way you have written
this code is that you know this piece of
code gets executed every time you post
the page back okay and we don't really
have to load this data for the drop-down
list you know every time when you post a
page back you know I want to load this
data only the first time then the
webform loads after that if for any
reason I have to if I have to post the
page back I don't have to reload this
data from the database because drop-down
list is an asp.net control which is
capable of retaining a state state so to
slightly improve the performance of your
application you can wrap this entire
code within this is not not post back
property which means this piece of code
is going to be executed only the first
time this web page gets loaded which
means if it's only a get request if it's
a postback request this code will not be
executed and the view state of the
drop-down list control is going to
remember the items that we have loaded
into that control the first time when
the webform loaded okay so if we run
this application now it's going to
display the you know this is the initial
get request so it executed this code and
displays this data within the drop-down
list but then if I post the page back by
clicking the button control you know
look at that the values are still retain
but it's now slightly better than the
previous time because you know the
values are loaded from the viewstate we
are not really making another database
call to load this data for this
drop-down list on this slide you can
find resources for asp.net c-sharp and
sequel server interview questions that's
it for today thank you for listening
have a great day</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>