<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Part 25  Insert update delete in mvc using entity framework | Coder Coacher - Coaching Coders</title><meta content="Part 25  Insert update delete in mvc using entity framework - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/kudvenkat/">kudvenkat</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Part 25  Insert update delete in mvc using entity framework</b></h2><h5 class="post__date">2013-05-27</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/8f4P8U1a2TI" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">it's part 25 of asp.net MVC tutorial in
this video we'll discuss selecting
inserting updating and deleting data in
MVC using entity framework please watch
part 24 before proceeding with this
video we'll be using these two tables
TBL department and TBL employee for this
demo the sequel script to create these
two tables is already implemented I will
have the script available on my blog
just in case if you need it let's select
the script and execute it at this point
we should have the required tables
created so there they are now we want to
implement an index view as you can see
here it's going to list all the
employees here and then we need a link
here to create a new employee and then I
should be able to edit the existing
employee details as well view their full
details and delete the employee as well
and I want to achieve this using entity
framework let's flip to visual studio
now the first thing to do is to add a do
dotnet entity data more data model and
to do that I'm going to right click on
this models folder add a new item and
make sure you have the status select
inner and install the templates and I'm
going to add a do dotnet entity data
model I'm going to name this employee
data model click Add now we want to
generate our more in a model from the
database because we have you know the
tables already existing in the database
using these existing tables we want to
generate our models we want to generate
an employee model and a department model
using these two tables so I'm going to
select generate from database option
click Next now click on this new
connection and then here you can specify
the name of the server in my case a
sequel server is installed on my local
machine so I'm going to specify a looker
just in case if you have your sequel
server installed on a different machine
and that's and if that's present in a
network then you can either specify the
name of that computer or its IP address
here now instead of saying local you can
also use dot I'm going to use a Windows
authentication and then select the
database now our tables are present in
sample database so I'm going
select sample as the database we can
test our connection so test connection
succeeded click OK now click OK and then
here you can specify the name for your
connection string so this is the name
that will be used to store this
connection string in web config file I'm
going to call my connection string as
employee context click Next now here
this result is going to connect to
sequel server and list all the tables
views and stored procedures that are
present in the sample database now you
can select your tables from you know by
expanding the stables option here I'm
going to select TBL department in TBL
employee tables and then you can also
specify the namespace for your models
now I want my models to be residing in a
namespace called models ok so I'm going
to name that and then click finish so at
this point this facade should
automatically generate two entities for
us TBL employee and TBL department and
these entities are generated using these
two tables now the table names are the
name of the entities and D columns
within the table or the properties
within that entity ok and then here look
at this we don't want the entities to be
you know like tape TBL employee or TBL
department instead we want them as
employee and department ok so I'm going
to rename them so I'm going to call this
employee and then look at this every
employee has a department associated
with them ok so if you want that
specific department details then we can
do so by using department property so
that's implemented as a navigation
property because that is present in a
different table and then look at this
that is again named as TBL department
but we want that property as department
name s department and then again along
the same lines I'm going to change the
entity name from TBL department to
Department and every department can have
multiple employees and to retrieve the
employees belonging to a specific
department we again have you know this
navigation property TBL employees again
instead of TBL M
I'm going to call this employees let's
rename that all right now let's change
all the save all the changes and let's
build our solution the next step is to
actually add the controller so I'm going
to right click on my controllers folder
add a new controller I'm going to call
this employee controller and then from
the staff holding options I'm going to
choose my template as MVC controller
with read / write actions and views
using entity framework that's going to
be my scaffolding template and my model
class is going to be employee and my
data context class is going to be
employee context remember the name of
the connection string you know we named
it employee context so I'm going to
select my context class as employee
context you know this class is
auto-generated for us and this is
residing in MVC demo dot models
namespace ok and then my view engine is
going to be Razer click Add so this
should add employee controller dot CS
and along with that it should also
automatically generate the views you
know to list employee that is the index
view create you delete the details and
edit views as well look at that these
views are automatically added to
employees folder and this folder is
present in the views folder and we also
have the employee controller there ok so
now let's go ahead and run this
application so I have plus control f5 to
run the application so look at this it's
a look at the URL localhost MVC demo now
it says the resource cannot be found why
is that
because by default when I run this
application you know if you look at the
route config file
you know if here we are not specifying
the controller and action name so if we
don't specify the controller and action
name it's going to navigate to home
controller index action but we have the
home controller no we don't that's why
we get this error the resource cannot be
fun
now we don't want the application to be
navigating to home controller and index
action instead we want that to navigate
to employee controller and index action
so I'm going to change my default
controller employee now if I go ahead
and run this as you might expect it's
going to navigate to employee controller
and index action and then within the
index action what's going to do it's
going to retrieve all the employees and
list them for me there okay now this one
more change that we have to do by
default you know the views that are
generated here if you look at the Edit
view for example at the bottom there is
a section called a scripts section now
I'm going to get rid of the script
section we'll discuss more about them in
a later video session again in the
create view also we have the script
section so let's get rid of that as well
whereas delete details and index our
views doesn't have that section section
alright so with these changes let me go
ahead and rerun this and now look at
this I have the index view which is
listing all the employees I can create a
new employee if I want by clicking on
this one look at that I am on the create
view I can add a new employee for
example test gender test City test and
department maybe ID click create so it
has added that new employee I can edit
the employee details change the
department to HR gender to maybe test
one two three save that look at that the
changes are persisted to the database I
can view their full details by clicking
on the details link back to list I can
even delete an employee look at this in
the previous sessions we discussed you
know deleting an employee using get
request is bad ok that's why when I
click on this delete link it will
actually redirect me to another page
which is going to show the full details
of the employee and then it's asking me
the question are you sure you want to
delete this if that's the case when I
click this delete button the form will
be posted to the server and as part of
that post process the employee details
will be deleted look at that I click
delete and the employee details are
deleted ok so that's good all this is
auto-generated for us and if you look at
the employee controller here it has got
quite a
of code okay so here we have employee
context class and then look at this
index in the index action we are
creating I mean we are using that
employee context object and using
employees properties we employee's
property we are able to retrieve all the
employees now I'm going to discuss about
all the code that is auto-generated in a
later video session okay but then if you
look at this view these views that are
auto-generated for us there are a few
problems here the first problems look at
this you know the formatting I don't
really like this I want to format this
properly and again if you look at the
department name you know it just says
name I want that to be as department
name for example okay and again if I
click on this create new look at this
without filling any of these details if
I click create I am able to create that
employee again if I edit any of the
existing employee look at that I want
this gender to be implemented as a
drop-down list but I have a text box
there and then maybe I want here a
default text saying in our default
options select the department so we will
see how to implement all this in our
upcoming videos again if I click on
delete you know you can see the delete
details here and when I click this
delete button if you really want a
confirmation dialog box you know we can
do that as well in fact we have
discussed how to do that in the previous
sessions however we'll talk about the
code that is auto-generated and to solve
this little UI issues in our upcoming
videos on this slide you can find
resources for asp.net c-sharp and
sequence of interview questions that's
it for today thank you for listening
have a great day</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>