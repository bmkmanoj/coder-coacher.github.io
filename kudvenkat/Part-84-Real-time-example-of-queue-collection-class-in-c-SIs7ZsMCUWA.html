<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Part 84   Real time example of queue collection class in c# | Coder Coacher - Coaching Coders</title><meta content="Part 84   Real time example of queue collection class in c# - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/kudvenkat/">kudvenkat</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Part 84   Real time example of queue collection class in c#</b></h2><h5 class="post__date">2013-09-07</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/SIs7ZsMCUWA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">this is part 84 of c-sharp tutorial in
this video we'll discuss a simple
real-time example where a queue
collection class can be effectively used
in part 82 we discuss the basics of the
queue collection class so please watch
part eighty two before proceeding with
this video when you walk into a bank or
a passport office you will collect a
token from the token machine and wait in
the queue for your token number to be
called
and let's assume in this office we've
got three counters available to serve
customers and notice that at the moment
counter one is serving token number two
counter to two in number one and counter
three talk number three and at the
moment within the queue we have three
tokens waiting to be served and let's
assume at this point the representative
at counter two has become available and
then when he pushes this next button we
want the token number that is present at
the beginning of the queue to be served
by that representative at counter 2 so
basically when this person hits the next
button three things should happen first
we want to DQ the item that is present
at the beginning of the queue and then
that token number should be displayed
within the green box here our for
example the message should be something
like token number four please go to
counter two and within this text box on
the counter - we want to display that
token number you know in this case token
number four so that basically indicates
the representative at counter - he's
serving token number four and in a
meantime when new customers walk into
the office they walk up to this token
machine and they click this printer kin
button at that point we want to print
the next token number and we want to end
give that out to this tokens queue so
basically as representatives at these
counters become available and when they
click the their respective next buttons
we want to DQ tokens from the token
queue and as new customers walk into the
office and when they click on the
Sprinter token button we want to compute
the next token number and then we want
to NQ that so this is one example where
a queue collection class can be very
effectively
used let's look at this in action first
of all we need to design this form so
let's flip the visual studio so let's
use that table and then I'm going to set
this style attribute first of all I'm
going to set font family to area and I'm
also going to set border and I'm going
to set border to one pixel solid black
and then I'm going to align the text in
the stable you know I'm going to
basically Center align the text in the
table all right and let's close this
table let's include a TR a table row and
within this table row I'm going to have
five TDs in a bit you will understand
how we are going to make use of these
TDs and let's make three copies of this
TR so one two and three so in the first
TR and in the first TD within the TR I
want to display text counter one and I'm
going to leave the second TD blank
because you know we want a space between
counter one and counter 2 and similarly
between counter to encounter three and
look at this everything within this
table is aligned in center that's why we
have include that text align Center
there okay so let me copy this and then
put inside third TD and let's call it
counter two and counter three in the
fifth the TD so that should give us you
know something like this alright the
next thing is in the next TR we need
text boxes so a text box in the counter
one counter two and count to three
so let's include those text boxes so let
me drag and drop a text box
and let's make a copy of this one let's
actually flip to the design mode I want
to set back color of this text box to
blue and for color to white and we want
to set font size to large okay and let's
change the IDs and one more thing that I
want to do is set the width of these
text boxes to 150 pixels okay
and let's change the IDs to meaningful
name something like txt count to 1 and
similarly the second text box to txt
count to 2 and the third text box to txt
counter 3 all right one of those text
boxes we need a button controls as you
can see here so let's go ahead drag and
drop 3 button controls so let me copy
that
so let's call this BTN counter one BTN
counter two and BT and counter three
and let's flip to the design mode let's
say there is some error rendering the
control that's basically because we have
the same ID so let's change that to
counter to count to three all right and
let's set the width of these buttons
also to 150 pixels and let's change the
text on them to next all right now after
the button controls what do we need we
need you know a textbox control so what
I'm going to do is have another TV TR
and then I'm going to set TD call span
equals 5 but then I'm going to have
nothing in this TR that TR is basically
going to give us that space between that
TD and that one there actually we don't
need that so let's get rid of that one
and within this TD I'm going to include
a textbox control and maybe let's call
this txt display basically this textbox
is this one the green text box so let's
flip to the design mode and let's set
the width of this textbox
to 500 pixels and let's set background
color to green and full color
to white and then font size to large
okay now after the text box we need a
list box apart and and the label
okay so let's include another TR and
let's include a TD set call span to five
and let's make two more copies of this
TR okay so in this TR we are going to
have a list box so let's drag and drop a
list box maybe let's call this list
tokens because this list box is going to
store the token numbers and let's set
phone size of this list box to large and
then we need a button so let's drag and
drop a button control and let's call
this button print token and the text on
this button to print the token okay and
finally we need a label control so let's
drag and drop a label control and maybe
let's call this lvl status let's get rid
of that default text which says label
and let's set font size to large okay so
we have the required a design now
alright so at this point when I click
this print token button what should
happen we should be able to compute the
next token number and then add that to
this list box and behind the scenes
we'll be using the queue collection
class okay so the first thing here is
I'm going to create a queue class and
token numbers are of type integer so I'm
going to create a queue of integers and
I'm going to call this Q tokens
and then I'm going to store this in a
session variable because remember web
applications work on a stateless
protocol so if you want to remember the
state of the queue you have to store it
somewhere either in the session variable
or in the database or somewhere else or
an XML file so let's use session
variable so I'm going to use you know
the key called token queue you can give
it any meaningful key so session of
token Q equals Q tokens and I'm going to
do this only if there is nothing in the
session variable so if session of to can
Q equals now only then create a new Q
and store it in that session variable
all right so when we click this button
what would happen
we should retrieve that Q tokens Q from
the session variable and then compute
the next token number to be issued and
add it to the list box
okay so let's retrieve it from the
session variable so Q of integer give it
any meaningful name let's call it token
Q and we need to typecast that whatever
we are returning out of the session
variable we need to typecast that to be
of type Q of integer okay
now the first thing is look at this when
you know a new customer clicks on print
token button what should happen you know
we should first tell him how many
customers are there in the queue before
him so and how do we get the total
number of items that are present in a
queue we can use the count property and
we want to display that in the label
control so basically I'm going to say
lvl status dot text equals you know this
text there are so how are we going to
get the count of tokens that are present
within the queue token Q dot count
property is going to give us that but we
need to convert that to string so that
can be a
appended with this string there are how
many other customers before you in the
queue okay and after this what we need
to do we need to compute the next token
number to be issued but how are we going
to compute that look at this let's
assume if there are no items in the
queue at the moment then we need to
start at token number one okay so to
remember the last token number that was
issued I'm going to use another session
variable so let's say session of give it
any meaningful name but I'm going to
call that last token number issued so
obviously this will be null the first
time so if session of last token number
issued if that is equal to null that
means we haven't issued any token number
at so at that point what we are going to
do we are going to store 0 inside that
session variable and then we are going
to retrieve the value that is stored
within the session variable increment it
by 1 and that will be our token number
that we want to issue next so let's say
end next token number to be issued
equals whatever is there in that session
variable increment 1
so that's our next token number so what
should we do at this point of time let's
store this next token number in this
session variable so that next time you
know we can compute the next token
number to be issued correctly so we are
storing this back incremented value back
in the session variable and then what we
are going to do now we are going to NQ
that next token number to be issued into
this tokens Q so we are going to use
this NQ method and then pass that next
token number to be issued okay so we
stored that within the talking view but
what is the most important thing to do
we need to display the items that are
present within the token Q within the
list box control so what I'm going to do
is so the ID of the list box is listed
tokens if there are any items within
that list box clear them out and then
loop through the items that are present
within the stroke in queue and add those
items to the list box for that purpose
I'm going to use for each loop for each
end let's call it a token in token Q so
we are going to loop through each token
number that is present within the token
Q and then we are going to add that to
the list box so list box that items dot
ad enter this function we are going to
pass the token number I'm going to use
this overloaded version where we can
pass the item as a string so let's
convert the token to string okay
now this piece of code is going to add
the items that are present in the Q to
the list box now we'll be using this
piece of code elsewhere so I'm going to
move that into its own method and to do
that I'm going to right click on that
code and then I'm going to select
refactor so let's do that first of all
we select the code that we want to
encapsulate into your function refactor
and then select extract method and give
it a meaningful name let's call this add
tokens
to listbox and look at that it expects
you know a parameter of type you know
queue int because you give it a token
queue and you know whatever items that
are present within that queue you know
all those items will be added to the
list box okay all right so let's run
this at this point we should be able to
add items to the queue look at that
when I click print to again look at that
there are zero customers before you in
the queue
there was nobody so that's why it said
there are zero customers I'm the first
customer to be served so if I click it
again that is what there are one
customers before you in the queue there
are two customers before you in the
queue and then that token number gets
added so when a representative at the
counter becomes available and when they
click this next button we want to you
know DQ the token numbers that are
present at the beginning of the queue
and then give it to the representative
at that counter so let's see how to
achieve that let's flip to visual studio
so when we click this button so when I
represented you at the counter clicks
the next button what should happen we
should be able to retrieve the token
number that is present at the beginning
of the queue and then within the text
box the screen text box we want to
display this message token number four
please go to counter one or counter two
depending on which representative has
clicked the button and then we want to
display that number within that within
the respective counter text box okay so
but for anything to do we first need to
retrieve that cue from the session
variable so let's go ahead and do that
and we have already that code here so
let's copy that and paste it right here
so we are getting the token cue from the
session variable and then I'm checking
if token queue
dot count if that is less than zero what
does that mean that means there are no
token numbers within the cube meaning
there are no customers waiting to be
served so at that point we should
display a message in the text box maybe
something like no customers in the queue
something like that
so within so when I click this the
button at counter one so when I click
this button within the text box okay txt
counter one dot text we should display a
message stating no customers in the
queue okay
now actually this condition should be
less than or equal to zero now on the
other hand if it's not a zero or we can
simply say zero because you know if
there are no items in the queue the
count will be zero so if it is zero we
want to display this message no
customers in the queue with in the
textbox control else if there are items
in the queue then what should happen the
first thing is to DQ the token number
from the queue so end token number to be
served equals took in Q dot DQ and what
is this method going to do it's going to
remove the item that is present at the
beginning of the queue and that will be
stored in this variable okay so once we
have DQ'd that first thing we want to
display that token number within that
text box so txt count 1 dot text equals
token number to be served dot 2 string
and the next thing is in this text box
we want to display message stating token
number whatever is that our token number
please go to whichever counter okay so
let's go ahead and display that and the
ID of that text box is display
so txt displayed or text equals
something like token number and where is
the token number that is token number to
be served that variable contains it
convert that to string so token number
four or five whatever token number five
please go to count one because you know
this is the button next to count to one
so that's what is the message that we
want to display and finally what we want
to do we want to look at that we have
DQ'd the token number from the queue so
at that point we should also remove that
item from the list box okay so I'm going
to call now this method add tokens to
list box and then we give it the token Q
so let's pass the token Q and that
method will take the responsibility of
looping through each item within the
token and then adding it to the list box
okay now similarly we need to write the
same kind of code in button to button
three as well so let's go to button two
and button three alright look at this
now I need to have a similar kind of
code here in button to click and button
three click so what we basically can do
here is there's only a you know two
things that are differing in this code
that's the countin number and what else
is changing the text box in which we
want to display the message so when I
click this button we want to display the
count on you know the token number
within this text box okay when I click
this this text box when I click this
button this text box so the variable
factor is the text box where we want to
display the token number and here the
number of the counter within this text
box to be displayed so what I'm going to
do is extract this into its own
and then pass those variable pieces as
parameters so that we can reuse this
code so what I'm going to do is I'm
going to cut that and then probably have
a private function here so let's call it
private wired and something like so next
customer
give it any meaningful name you want and
the first thing here is I'm going to
have a textbox control maybe let's call
it text box and then the next thing is
the counter number and counter number
and then I'm going to paste that code
here okay and then look at this we have
hard-coded the textbox name here instead
of that I'm going to pass the parameter
so textbox dot text and here also text
box store text okay the next thing is
again we don't want to hard-code the
counter number so what I'm going to do
is get rid of that hard-coded value
there and then append this counter
number to that string so now we can
reuse this function so I'm going to
invoke this function inside of a button
click events so button one underscore
click let's call this so next customer
and which textbox we want to pass we
want to pass DX D count to one and what
is the counter number here counter
number one so similarly let's invoke
this function here and let's specify the
counter number s2 and the text box
number SD XD counter 2 and similarly
here alright so with these changes let's
go ahead and run this and see if it
works as expected
and one more thing is let's set the
width of this list box control so that
it looks a little neat if you already
have set the width now we have it so
let's set it to 100 pixels maybe okay so
let's go ahead and run this now and look
at this there are no items within the
queue now when I click this next button
look at that it displays this message no
customers in the queue so when I click
print the token so it starts at one and
look at this there are no customers
before this token number that's why it
says there are zero customers before you
okay so we get the respective message
there so we have four tokens here now
when this representative clicks the next
button look at that token number one
please go to counter to there's no space
here between token number one and the
word please to achieve that so where are
we doing that right here so let's give a
space let's run that again so there are
zero customers let's print the token
numbers so when we click this look at
that token number one please go to
counter to okay and similarly when this
representative clicks the button token
number two please go to counter three
and token number two is displayed there
similarly when we click this and this
person clicks that look at that talking
about four please go to count of four
and we don't have any token numbers
within the queue when this person clicks
set no customers in the queue similarly
when this person clicks get the same
message there in the meantime if there
are new customers coming into our office
that click this printer can look at that
it remembers the last token number that
was issued the last token number was
four now it is five so as I click
clicking that button look at that new
token numbers are issued and then
they're added to this queue okay so when
I click here next we should get token
number five and when I click this token
number six token number seven all right
that's it for today thank you for
listening have a great day</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>