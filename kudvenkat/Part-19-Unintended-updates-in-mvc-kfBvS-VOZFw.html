<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Part 19  Unintended updates in mvc | Coder Coacher - Coaching Coders</title><meta content="Part 19  Unintended updates in mvc - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/kudvenkat/">kudvenkat</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Part 19  Unintended updates in mvc</b></h2><h5 class="post__date">2013-05-20</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/kfBvS-VOZFw" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so welcome to prism technologies I am
venket this is part 19 of asp.net MVC
tutorial in this video we'll discuss
unintended updates in MVC please watch
part 18 before proceeding with this
video at the moment if you look at this
edit employee view all the fields of the
employee name gender City and date of
birth are editable let's say we want to
make name field read-only so that users
will not be able to change the name of
the employee let's see how to achieve
that let's flip to visual studio and
notice that at the moment we are using
this HTML helper editor for this HTML
helper is what rendering this textbox
control for us so if we right-click on
this and view page source notice that we
have an input control here and its type
is text and look at the value mark which
is what is the name of the employee
that's rendered in this text box control
right here so instead of using this
editor for HTML helper which is
rendering the text box control I'm going
to use dot display for HTML helper but
this change let's go ahead and run this
and let's navigate to the index action
of the employee controller click Edit
and notice that now we have the name
rendered without that xbox control let's
now right-click and view page source and
look at the name how its rendered now
it's not rendered using any of the input
controls instead it's rendered as plain
text wrapped inside a div tag because of
the way the name of the employee is now
rendered here you know we're going to
have a slight problem let me click on
the Save button see what's going to
happen look at that the name field is
required and why is that that's because
if you remember in the previous session
we have marked name property of the
employee class with required attribute
meaning when we post this data back to
the server the posted form values that
are received at the server should have
name posted as well but since it's not
present in any of the input controls
it's not posted back to the server so to
solve this problem we can use a hidden
field on the view
just like how look at this we are
already using a hidden field to store
the ID of the employee just like that I
can use another hidden field to store
the name of the employee so that when we
click the Save button from that hidden
field name of the employee will be
retrieved and posted to the server okay
so let's go ahead and use a hidden field
here okay so with this change let's run
this now and let's navigate to the index
action of the employee controller click
Edit and let's change for example gender
of mark from male to female click Save
so we don't get that validation error
anymore and look at the update it
happens as expected all right now at the
moment we may think it's impossible to
change the name of the employee using
this edit view because we mark this
field read-only so users will not be
able to change the name of the employee
but that's not true we can very easily
hack into this application and change
the name of the employee ok let's see
how to do that to do that I'm going to
use a tool called a fiddler fiddler is a
very useful debugging tool we'll talk
you know about fiddler in a great detail
in the later video session but in this
video we'll see how to generate a post
request and execute it on the server
using this fiddler tool to download
fiddler you can visit this URL failure
to calm slash get - fiddler and the
installation is very straightforward all
we need to do is download the executable
and follow the prompts once you have
fiddler installed click on start go to
all programs and then click on fiddler -
so this will track all the requests okay
so this web sessions window will show
you the URLs that you have visited for
example now let's go back to the list
let's click Edit once again so if we go
back to the fiddler look at that I have
visited this URL MVC demo employee edit
so I am on that URL looking the details
of that employee with ID is equal to 1
and look at fiddler has captured that
look at this Here I am on the inspectors
tab on the headers I can see the request
header here and then if I want to
actually see the data I mean the
response look at this I can click on
this button here it says responses
encoded and may need to be decoded so I
click on that and then if I go to web
view
I should see the data on the as I see it
on this page right here ok now what I'm
going to do here is click Save let's
actually change the gender of mark from
female to male and let's click Save so
the data is posted back to the server so
that should have been captured as well
the post request ok after we have posted
the data it is automatically redirected
to index action of the employee that's
the URL there you know it just says MVC
demo slash employee you know so we can
see that URL there as well so this is
the post request and then if you want to
see the post data so this is the post
request so what I'm going to do is I'm
going to use this request that that
fiddler has captured and generate
another post request and to generate a
post request using fiddler click on this
composer tab and then this is the post
request I'm going to take this post
request and drag and drop onto the
composer tab and see this is the request
header and this is the request party and
notice what we have in request for a ID
name gender City and date of birth I
have all the posted form values here
what I'm going to do here is change the
name of the employee now if you remember
and I click edit we can't change name
here but I can change it right here so I
am going to change name of mark from
mark to something like X Y said now
let's quickly go back to database
execute look at that at the moment
employee ID is equal to 1
may still mark let's go back to fiddler
so we have changed the request body and
let me click execute and see what's
going to happen so request executed
let's go back to sequel server execute
that query look at the name of the
employee XYZ let's actually go back to
the list look at that name of that
employee is XYZ so in spite of V making
this field at read-only we are still
able to you know hack into the
application using fiddler and then
generate the post request change
whatever values we want to change and we
are able to post that data back and how
is this possible
because of the way we have implemented
this code look at this controller action
method this controller action method is
receiving this employee object and the
default model binder with an MVC what it
does is whatever data that we pose it's
going to take the data out of that
request and bind that with this employee
object so it has got ID employee you
know ID name gender City date of birth
all of the fields in this request that
we have posted it's going to slim play
the default model binder will retrieve
that values bind that data with this
object this employee objects which is
then handed over to save employee so
that data is making in to the database
table in our next video session we will
see how to solve this problem using that
update model and try update model
functions that we discussed in the
previous sessions of this video series
on this slide you can find resources for
a spirit and c-sharp and signal so
interview questions that's it for today
thank you for listening have a great day</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>