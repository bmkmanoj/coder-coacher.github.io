<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>What is SQL Injection Attack | Coder Coacher - Coaching Coders</title><meta content="What is SQL Injection Attack - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/kudvenkat/">kudvenkat</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>What is SQL Injection Attack</b></h2><h5 class="post__date">2011-11-29</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/uSw0IoSr3Hk" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello this is Prasad welcome to bridging
technologies today we will discuss about
one of the very important asp.net
interview question what is sequel
injection attack or how can you avoid a
sequel injection attack sequel injection
attack is very common form of hacking in
web application and the sequel injection
attack can happen because most of the
users build sequel statements
dynamically by concatenating strings and
how do we avoid sequel injection attack
they're basically two ways use
parameterize queries I use tor
procedures let's look at a demo on how
we can actually make sequel injection
attack happen and then we will see how
to solve that using stew procedures or
using parameterised queries now in order
to understand sequel injection attack
let's build a quick demo data-driven
asp.net web application to do that I
have already done some preparation work
I've created it an asp.net web form with
this UI I have a grid view control I
have two buttons get all products get
product by name and a textbox now when
the user clicks this button called get
all products we have a table in the
database called TBL product so we have
around ten products here we want to get
all these products and show it in this
grid view control when the user clicks
this bottom on the other hand when the
user enters a particular product name
and then when he clicks get product by
name we want to get just that product a
simple data-driven asp.net web
application let's go ahead and build
this and then we will see how to
actually inject sequel now to do that
let's write simple ad or net code in
order to interact with the database we
have to import certain namespaces
using system dot data is one and the
other one is system data dot signal
client and finally in order to read the
web config file we need to import system
configuration namespace
now in web.config file i already have a
connection string called the DB
connection string setup to interact with
my local database I am using integrated
security let's read the value of this
connection string in our application
code to do that string connection string
equals configuration manager but
connection strings of our DB connection
strained dot connection string so let's
go ahead and build our sequel connection
object sequel connection con equals new
sequel connection and in order to build
a connection object we need the
connection string and we need to build a
sequel command so sequel + CMD equals
new sequel command and the command that
we want to execute is basically to
select all the products from the
database so select star from TBL product
and we want to use this connection
object to execute this command so open
the connection object and execute the
command once we execute the command set
the result of this command as the data
source to a gridview one control so grid
v1 dot data source equal to the result
of that command execution and then data
bind on the grid view control and this
is simple area dot net code and close
the connection so if you look at this
code this pretty simple code all we are
doing is we are reading the connection
string value building a connection
object and then building a sequel
command and then opening the connection
executing the command taking the output
and setting that as a data source to the
grid view control calling data bind and
closing the connection now let's go
ahead and run this and see if it works
as expected
so now when we say get all products it
should give us all the products that are
there in the database okay now we have
to implement this I type in let's say
for example pants and then when I say
get product by name I should be able to
get that product alone so let's go ahead
and see how to build that now we have
another button which does that get
product by name so let's implement that
button like so when I click that button
what should happen it should get a
product from the table where the name of
the product equals whatever the user has
typed into this text box so let's write
this code so obviously this code will
exactly look the same except the command
will vary here we'll say select star
from TBL product where name of the
product equals whatever the user has
typed into that particular text box
so since name is a ver care field and
when we send this command to sequel
server where Capps needs to be within
single quotes that's why we are building
that sequel sorry that single code into
the sequel command dynamically so what
we are saying select star from TBL
product wear name of the product equal
to whatever the user has typed into the
textbox now this is the statement that
will actually invite sequel injection
attack since we are building our sequel
statements dynamically into the text box
the users can type C for and then get it
executed against the database if a
values user type something you know a
sequel code into the text box it can get
executed against the database and we may
lose our data let's look at that in
action actually now let's go ahead and
run this so if the user types you know
just the name of the product there is no
problem it works fine as expected okay
so when we say get all products we get
all the products let's say for example
if they want books I type in books and I
say get product by name
you know what happens and I click this
button this
Bigler piece of code gets executed okay
so since we typed books into the text
box what happens select star from TBL
product we'll name equals books and that
particular statement gets executed here
okay
now just imagine what's going to happen
so this is the command which gets
executed so let's get rid of all the
sequel so select star from TBL product
where name equals whatever the user has
typed into the text box so let's
schedule of this now in our example
until now the user has typed into the
text box
something like books and now when we
executed that we get that one no issues
everybody is happy but just imagine if
the user look at this the user has typed
just books into the text box now just
imagine if the user has typed something
like this for example let's say pens and
a single quote and then a semicolon and
then delete from TBL product and then in
order to escape this single quote a
comment now if the user types something
like this into the text box what's going
to happen now this one will be treated
as one statement semicolon this one will
be treated as another statement when
this statement gets executed the entire
data in TBL product gets wiped out now
here the user is a little considerate
he's just deleting the data from the
table what if in case he has type drop
database and then database name the
database itself will have gone and then
to escape this single this to comment
and then he just typed this comment here
too to ignore the execution of the
single code okay so we can actually do
that now let's say for example and
saying fans closed a single code
semicolon to indicate the end of the
fastest equal statement and then maybe
something like delete from t-bo product
and then two comments so now if we go
ahead and say get product by name we get
our product which is pants but if you go
ahead and say select star products your
table is basically empty so when I say
get all products we don't get anything
back because the table is empty we have
just injected sequel into this text box
which wiped out our data okay and why
did this happen because we are
dynamically building sequel may
concatenate in strings that the end user
is providing us with so this is
extremely dangerous now how to solve
this problem just use parameterize
queries astral procedures okay let's see
how to use parameterize queries and
solve this to use parameter aged queries
I just need to change the sellers limit
okay so I'm saying select star from TBL
product where name equals at name this
is the parameter now we need to supply a
value for this so this concatenation
will no longer be there so let's go
ahead and get rid of this so a sequel
statement is select star from TBL
product with name equals at name and
then since our sequel command right now
is expecting a parameter we have to
supply a value for that so in order to
do that we can say command dot
parameters dot add this expects a new
sequel parameter object so a new sequel
parameter object and we need to specify
the name of the parameter and a value
for that so in our case the name of the
parameter is at name and the value for
that is basically coming from textbox
one that's a
so this simple change can avoid the
sequel injection attack from happening
so let's see how actually it works
before we do that since our table is
empty right now we need to put some data
there I already have some sequel
statements which will inject data so we
have all our 10 rules back now let's go
ahead and run the application so when I
run the application now and when we
click get all products we get all the 10
products back and let's say I want books
for example I get books now let's say
I'm trying to inject sequel something
like pens whatever we have typed before
ok now when I say get product name look
at what's going to happen when I say get
product name it basically will not show
anything because whatever the user has
typed into this text box even the sequel
the malicious code that the user has
typed in this entire stuff right now is
treated as a value for this parameter
called
add name now whatever contain the user
has typed in is not treated to form our
sequel command
sequel command is already formed this is
the sequel command now after building
this we just need a value for this
parameter and where is the value coming
from here whatever the user types in
here will be completely treated as a
value for this parameter so the
possibility of sequel injection attack
is negligible is almost not there so we
are capable of voiding sequel injection
attack simply by using parametric
queries and now if you want we can have
a look at the table our tendrils are
still there and when I say get all
products we still get back all our
products so using stored procedure using
parameterize queries can solve sequel
injection attack another way is to use
tool procedures stored procedures are
better for several reasons number one
they can avoid sequel injection just
like parameters queries number two they
can reduce network traffic between the
web server and the database server
if you have your statements inside a
stool procedure from the database server
I'm sorry from the web server to the
database server you just need to send
the name of the stored procedure you
don't have to send they lend these equal
statements for example in reality a
stored procedure can span hundreds of
lines so if it is there inside its
stored procedure you know from your
application code you just specify the
name of the stored procedure the
definition all the lines will be there
within that stored procedure on the
database server so it can reduce network
traffic drastically another advantage of
using stored procedures is you know they
can be reused since the code is there in
the form of a stored procedure you can
reuse that stored procedure on multiple
pages without having to duplicate
maintenance will be much easier and
another advantage from a performance
standpoint because you know stored
procedures can have execution plans
cached for a certain period of time and
your stored procedures can benefit from
performance you know when compared with
ad-hoc sequel queries because for ad-hoc
sequel queries execution plans needs to
be generated every time you execute them
but for stored procedures they can be
cached and hence stored procedures tend
to execute much faster than your ad-hoc
sequel queries so keeping all these in
mind it's always better to actually use
two procedures rather than ad-hoc sequel
queries let's look at a quick demo of
how to use a stored procedure now in
order to use the stored procedure we
first need to have that stored procedure
created so let's create a simple store
procedure so let's say create proc SP
get product by name at name of the
product and let's say we're care of 30
maybe as Big M and and what do we want
we want to select a product from the
table where name equals
at name so this is a stored procedure so
let's go ahead and run that and to
quickly test if it is working as
expected
let's pass and pens for example and
execute the stored procedure all right
it's working so we can use the stored
procedure now if you look at the stored
procedure it expects one parameter so to
call the stored procedure so in the
command object instead of this we'll
specify the name of the stored procedure
and another thing is we need to tell the
stood procedure that we are executing
it's tool procedure the command object
so the command object or command type
equals anti-venom dot stored
procedure so this will tell the command
object all right
you're not executing a sequel statement
instead you're executing xtour procedure
and the parameters for that stored
procedure is the same thing at name so
this will remain as it is so now when we
go ahead and run we will have the same
kind of an output the sequel injection
attack cannot happen now so when I say
get all products we should get all
products when I say get product by name
let's say for example books in this case
it we should be able to get books on the
other hand if somebody tries to inject
sequel you know just like how we have
done before you know nothing will happen
because the entire value the user has
typed into this text box will now be
treated as a value for that parameter at
name and hence there is no product which
matches this name and we don't get
anything that but the data is still
there no sequel injection attack so to
sum up sequel injection attack basically
can happen if users try to build sequel
statements dynamically by concatenating
strings together and how to avoid sequel
injection attack there are two ways use
parameterize queries or use tool
procedures but always prefer stored
procedures over anything because of the
various advantages that we have
discussed till now thank you very much
for this for watching this video see you
next time bye bye</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>