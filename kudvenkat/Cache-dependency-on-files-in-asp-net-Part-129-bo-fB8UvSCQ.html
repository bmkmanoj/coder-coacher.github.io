<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Cache dependency on files in asp net   Part 129 | Coder Coacher - Coaching Coders</title><meta content="Cache dependency on files in asp net   Part 129 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/kudvenkat/">kudvenkat</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Cache dependency on files in asp net   Part 129</b></h2><h5 class="post__date">2013-02-12</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/bo-fB8UvSCQ" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello welcome to freedom technologies I
am Frank ed this is part 129 of asp.net
video tutorial in this video we'll
discuss about cash dependency on files
in asp.net if you haven't watched part
128 of this video series I strongly
encourage you to do so before continuing
with the session let's understand cash
dependency on files with an example I
have this XML file countries dot XML
where I have a list of countries where
each country has got ID name and
continent now let's say I want to cache
this XML data for 24 hours but then
within that 24 hours if this XML data
changes for any reason then I want the
data from the cache to be removed
immediately is that possible absolutely
that's what cache dependency is all
about ok
let's understand this with an example
let's flip to visual studio first let's
add that XML file so in this project I'm
going to add a new folder and then let's
call that data and let's add an XML file
to this data folder so right click on
that add new item click on data tab and
select XML file give it a meaningful
name I'm going to call this country's
dot XML click Add I have the XML data
here already so let's copy and paste
that here and this XML data is pretty
straightforward we have countries root
node and within that I have several
countries ok where we have ID name and
continent now I'll have this XML data
available on my blog just in case if you
need it ok so we have the XML file now
on this waveform I have a button control
a grid view and a label control so if
you look at the source the HTML source I
have this button grid view and label
control so obviously when I click this
button get countries that's when we want
to read this data from the XML file
cache that and then set that data set as
the data source for the grid view
control data bind and after we cache the
data anytime I click that button get
countries button we want to retrieve
this XML data from cache rather than
from the XML file directly so let's see
how to do that
so I need to read the XML data and the
easiest way to do that is by using a
data set so let's create a data set
object data set D s is equal to new data
set and to read the XML data we have
read xml method and to this method we
need to specify the path of the file and
we can do that using server dot map path
now we discussed about the significance
of server dot map path in the previous
sessions of this asp.net video series so
if you are new to this method I would
strongly encourage you to watch that
video so the XML file is present in data
folder so tilde indicates the current
I'm in the root directory of the web
application which in our case is demo so
within demo within data folder I have
this country store XML file so copy the
name and specify it there so we have the
data set ready now what we need to do we
need to cache this and obviously to
cache a data set there are several ways
we can use a direct assignment or we can
use insert method or we can use add
method we discussed about different ways
to cache you know data in the previous
sessions of this video series if you
haven't watched them at strongly
encourage you to do so in this session
let's use the insert method so cache
objects insert method so I'm going to
use that and obviously we have to
specify the key for the cache so I'm
going to call this country's data and
then obviously the data itself in this
case data set and now look at this the
next parameter is the dependency
parameter for now let me pass now and
then we can specify absolute expiration
so I'm going to specify the absolute
expiration date time dot now dot let's
say I want to cache this for now for 20
seconds and then sliding expiration
since we have specified absolute
expiration we don't have to specify
sliding exploration so I'm going to
specify system dot fab caching dot no
sliding expiration sorry cache dot
caching dot cache
. no sliding expiration okay all right
so we have cashed the data set as well
now we need to set this data set as the
data source for the grid view control so
we have the grid view control whose ID
is TV country's dot data source is equal
to data set and GB country's dot data
bind all right so we have done this so
this is happening on the button click so
every time we click the button it's
going to read that from XML file and
then it's going to catch that we don't
want that if the data set is already
there in the cache we want to read it
from cache so we have to first check
okay if in the cache we already have
data with this key country's data key
then retrieve that from the cache so if
that is not equal to now then we know
that the data is already present in the
cache in which case we want to retrieve
it from there so cache of countries we
know that that's going to return a data
set back so I'm going to say data set D
s is equal to whatever we retrieve from
the cache okay and then I want to set
this as the data source for the grid
view control so I'm just going to copy
that and paste it there okay
and probably I want to display a message
in the label saying that we have caught
this you know rows from cache so label
message to a text is equal to D s dot
tables of zero dot dot count which will
give us the total number of rows so
whatever as the rows are retrieved
from cache okay
so let's copy that and put that in the
else block so if the cache is now if we
don't have data in cache then we want to
read it from the XML file cache it and
then set that as the data source okay
and then finally we want to display a
message in the label saying that these
rules are retrieved from XML file okay
so this label I mean the message in the
label will let us know whether we have
retrieved it from cache or from Country
Store XML file directly okay now look at
this at the moment we are passing null
as the argument for cache dependency
parameter so there is no dependency
whatsoever on the file so let's go ahead
and run this now so we are caching this
for 20 seconds so first time when I
click this button it's going to read the
data directly from the XML file so
that's what is the message five rows are
retrieved from XML file now I click this
again five rows retrieved from cache
now look at this within 20 seconds if I
go ahead and change for example let's
say Asia to Asia 1 save the XML file I
come and click get countries look at
that five rows retrieved from cache
though the XML file is changed now you
know maybe 20 seconds have passed
that's why the data set is removed from
the cache tag and I got the data from
the XML file but within those 20 seconds
you know after I have changed the file
when I click this get countries the
change it didn't reflect in the grid
view control that's because we are
reading that data which is cached ok but
on the other hand let's say when I went
to the XML file whenever the data in the
XML file changes I want to you know
remove the data from cache immediately
okay so for us that to happen
we need to establish a dependency on
that XML file and we do that using this
dependency parameter okay so that's the
cache dependency parameter so how do we
establish that dependency all we need to
do is new
cash dependency and then look at that
all we need to specify there is one
constructor you know which takes just
the phylum so we want to establish a
dependency on this country stored XML
file so we just need to specify the part
of that XML file so when that changes
immediately the data that is cash will
be removed
okay so let's establish the dependency
so server dot map but actually let's
copy that from here and specify that
here so what are we doing along with
specifying the you know that this is the
file after we read that and then we are
caching that we are saying okay there is
a dependency on this file whenever data
in this file changes you know we want to
remove this data set from cache
immediately okay let's see if that
happens actually let's specify this 60
seconds so that we'll have some time to
test okay so now we are caching it for
60 seconds but then there's a dependency
on that XML file now so let's go and run
this so first time when we click the
button obviously it has to read from the
XML file and then it will cache that
with a dependency on that file okay so
get countries now look at this SEO one
and I click on that again look at that
five rows retrieved from cache within 60
minutes 60 seconds no matter how many
times you click we get the same data but
then look at this as soon as I change
that Asia 1/2 back to Asia and I click
this button I get that and look at the
message five rules retrieved from XML
file so it's very simple to establish a
dependency on files in asp.net cache
dependency on the slide you can find
resources for asp.net c-sharp and
sequence of interview questions that's
it for today thank you for listening
have a great day</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>