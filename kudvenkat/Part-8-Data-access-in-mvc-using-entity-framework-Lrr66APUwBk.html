<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Part 8  Data access in mvc using entity framework | Coder Coacher - Coaching Coders</title><meta content="Part 8  Data access in mvc using entity framework - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/kudvenkat/">kudvenkat</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Part 8  Data access in mvc using entity framework</b></h2><h5 class="post__date">2013-05-06</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Lrr66APUwBk" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so welcome to presume technologies I am
venket this is part 8 of asp.net MVC
tutorial in this video we'll discuss
data access in MVC using entity
framework please watch part 7 before
proceeding with this video now the
controller responds to a URL request
gets data from a model and then Hance
the data over to the view the view will
then render the data model can be a the
entities or business objects and if you
remember in part 7 of this video series
we have built this employee entity which
is going to act as the model in our MVC
application and if you remember this
employee entity is actually residing
within the models folder of our MVC
application so here we have this
employee class with this for auto
implemented properties and within the
employee controller class look at this
we're actually creating an instance of
this employee object and notice that the
employee data is actually hard-coded
within this controller action method and
then we are passing this employee object
to the view for rendering okay
but in reality we actually retrieve the
employee data from a database table so
here I have this table TBL employee so
we want to retrieve data from this table
and then build our employee model object
and then hand that employee model object
to the view which will then render that
employee okay so let's see how to
retrieve employee data using entity
framework now if you remember your
models can be either entities or
business objects in this video we are
going to use this employee entity and we
are going to retrieve data using entity
framework in a later video session we
are going to discuss using Business
Objects as our models if you remember
business objects contain both state and
behavior okay so obviously in this video
we are going to use entity framework to
retrieve data from this table TBL
employee obviously to do that the first
step is to install the entity framework
and the easiest way to do that is by
using a new get package manager so let's
flip to visual studio click on tools
select library package manager manage
NuGet packages for solution so this
should open up new get package manager
and look at this at the moment it's
doing it showing all the packages that's
away that setup that are available for
installation now on my machine
I have entity framework already
installed and that's why I have this
green tick mark here if I don't have
this installed on my machine then I get
a button like this install okay so at
the moment I don't have jQuery installed
so I have this button with install once
you click that it should automatically
install that package and then it should
add a reference to that assembly so
since I have entity framework already
installed on my machine look at that
there is a reference added to entity
framework okay so that's the first step
and the second step is to add employee
context towards es class file to the
models folder let me add this class file
and then we'll discuss the purpose of it
so let's flip to visual studio so right
click on the models folder add a class
file and let's call this employee
context so employee context dot CS so
let me actually copy a bit of code here
and then we'll discuss the purpose of
this employee context class so if you
look at this class employee context
class its inheriting from another class
called DB context so where is this DB
context class present first of all we
are getting a compilation error let's
flick fix the compilation errors and to
do that let me plus control dot and look
at this this DB context class is
actually present in systems or data or
entity namespace so let's go ahead and
use that using declaration so using
systems or data dot n today and this DB
context is present within that namespace
all right so this employee context class
inheriting from DB context so what is
the purpose of this employee context
class the purpose of this class is to
actually establish a connection to our
database so this table TBL employee is
actually present within the sample
database so this employee context
is going to establish a connection to
our database okay since it's deriving
from dbcontext
this base class is going to do all that
for us and if you look at this employee
context class itself it has got this
property employees a public property
which is returning a DB set of employees
so I'm going to get all the employees
that are present in this table TBL
employee and how am I going to get them
using this property employees of this
employee context class okay so that's
the second step what's the third step
obviously if this employee context class
has to create a connection it needs to
know about the connection string
information and what is the perfect
place for connection strings web config
file so the next step is to actually add
a connection string to our web config
file and to the web config file that's
presented within the root directory of
our MVC application so let me open this
web config file look at this I already
have a connection string here and look
at the name of the connection string
it's employee context the name of this
connection string matches with the name
of our class employee context okay so
when I create an instance of this class
it's going to look for a connection
string with that name within web config
file so we have a connection string
there with that name and then it's going
to use this connection string so
obviously if you look at the connection
string itself the server is start
meaning the local installation of
sequence server and then the database
name is sample I am using Windows
authentication the provider name is
systems or data or sequel client meaning
its sequel server okay
so that's this third step add a
connection string to the web config file
that's present in the root directory of
your MVC application and the fourth step
which is very important look at this by
default the MVC framework look at the
name of our entity it's employee so by
default that the entity framework is
going to look for a table with that name
employee but then what's the name of our
table it's actually TBL employee so we
warned this entity class to map to our
table TBL employee so how do we do that
mapping using table attribute okay so
let's go ahead and use the table
attribute on this class and how do we
use attributes by using square brackets
so table and then what's the table to
which this class needs to be mapped TBL
employee okay and obviously we have a
compilation arrow because we need to
import the namespace that that this
attribute is present in and to do that
just simply press control dot and look
at that this table attribute is present
in system dot component model dot data
annotations dot schema namespace okay so
we have that using declaration there so
that's of a fourth step and the fifth
step make the required changes to our
controller action method so at the
moment if you look at our controller
employee controller action method we
have the employee data hard-coded there
and we don't want to do that we actually
want to retrieve the data from this
table TBL employee so obviously to do
that the first thing to do is to
establish a connection to the database
and how are we going to do that remember
we added this employee context class so
just create an instance of this class
which is going to automatically use the
connection string that's present in the
web.config file create a connection for
us so let's do that so employee context
is equal to new employee context and
then remember this class this employee
context class has got this property
employees so employee context dot
employees property which is going to
return list of employees all the
employees that the DB set of employees
that's present in this table but
remember what I want to do is I don't
want all employee details I just want
one employee detail okay so how am I
going to get a specific employee details
what I'm going to do at the moment is to
this controller action method I'm going
to pass in a parameter with name ID
which is going to be the employee ID for
whom I need the information so I'm going
to filter the employees based on the ID
that comes into this controller action
method so I have the list of employees
here from this list I'm going to get a
single employee look at that I'm
actually using a link query here so I'm
going to get a single employee so EMP
such that employee object dot employee
ID is equal to whatever ID that we are
passing into this function so this is
going to return the single method is
going to return look at the return type
it's going to return a single employee
object so I am going to store that
within this object reference variable
let's call it employee and then what I
do I hand that employee object to the
sphere now we will discuss about entity
framework in a very great detail in a
later video series and similarly we'll
also talk about link in a later video
session so here we are trying to
understand how to populate our model
with data from a database table using
entity framework ok the specifics of
entity framework or beyond the scope of
this video but we'll be discussing about
them in detail in a later video session
all right so we handle with the employee
object to the view the view will take
the responsibility of rendering that as
required all right so that's the fifth
step and the final step is to actually
in
use this method you know set initializer
let me actually paste this method you
know in global dot a ax file and then
we'll discuss what is the purpose of
that method call so the final step is
within global dot a si X file so this is
this application underscore start event
handler which gets executed at the
beginning you know when when your
application first starts and then here
I'm going to invoke this our you know
set initializer method of database class
again this database class is present in
system door data dot entity namespace so
let's go ahead and import that so what
is the set initializer function going to
do for us now look at this the we are
actually using this database sample
database is an existing database it's
not a new database that we are creating
we have an existing database and written
that we have this table TBL employee
which has got already some sample data
now what is the purpose of this set in
each initializer function look at the
intelligence it's basically used to
initialize our database okay if you
don't have the database already created
it's going to create a database for you
create tables for you and populate them
with some sample data but then we
already have you know the database the
tables and the data so we don't want any
initialization strategy so for our
employee context object I am passing
nulls specifying that I don't want to
have any database initialization
strategy so that's the importance of
this line okay so that's it these are
all the changes that are required so let
me now go ahead and run this application
so obviously when we first find this
application it's going to make use of
the home controller and the index action
method but we actually want to go into
employees controller details action
method with an employee's controller and
if you remember this employees details
action method C employee controller it
has got detailed section method and
notice this this has got an ID parameter
so now if you look at the URL here I am
passing ID of one so that will be passed
into this control
action method and then this employees
property is going to return the database
set of employees but then out of them I
only want the employee whose ID is 1
because we are filtering here using the
single link method ok which is going to
return the employee with ID 1 which is
then passed to this view so now let me
actually plus enter there we should get
the employee ID with 1 so employee with
ID 1 is MA and we have his information
there so similarly if I want Mary record
all you need to do is pass an ID of
three look at that
I get Mary's record all right on this
slide you can find resources for a speed
or Leticia bands sequel server interview
questions that's it for today thank you
for listening have a great day</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>