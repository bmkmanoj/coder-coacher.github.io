<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>jquery tooltip from database | Coder Coacher - Coaching Coders</title><meta content="jquery tooltip from database - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/kudvenkat/">kudvenkat</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>jquery tooltip from database</b></h2><h5 class="post__date">2015-07-01</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/BzFIMmt514s" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">this is part 82 of jQuery tutorial in
this video we'll discuss how to retrieve
tooltip tags from a database table and
this lady was in jQuery tool to fidget
so here is what we want to achieve
notice we have caught a database table
here with two columns the first column
contains the field names and the second
column contains the tooltip text
associated with that field on the right
hand side we have a webform with three
fields first name last name and
department now we want to retrieve the
tooltip text associated with these
fields from this database table and
display that using jQuery tooltip widget
so the first step here is to create this
database table which I have already done
and here is the create table scrap this
script is going to insert the test data
I have already executed this script so
the next step is to create a stored
procedure which is going to retrieve the
tooltip text by field name so let's go
ahead and create that stored procedure
so let's call this SP get tooltip and
this stored procedure is going to have
an input parameter let's call that field
name and the data type is going to be
and we're care of 15 so we give the
stored procedure a field name and the
procedure should return us you know the
respective tooltip text for that field
so what do we want to do we want to
retrieve both the columns from TBL
tooltip table where field name equals at
field name so whatever value we pass for
this input parameter so pretty
straightforward stored procedure there
let's quickly test the stored procedure
for example let's pass first name as the
feel so now when we execute the stored
procedure it should return as the
tooltip text associated that first name
feel so stored procedure is working so
that's those are the two steps from the
database side now let's flip to our web
application so within the web
application the first thing that we need
to do is add a connection string to our
sample DB database which I have already
done the next step is to create a class
that's going to
represent this database table so let me
go ahead and add a class file to a
project and let's call this tooltip dot
CS and this class is going to have to
automate are implemented properties both
of them of type string so let's call the
first one feel named get and set
excerpts similarly another property and
let's call this tooltip text okay a very
simple class with two auto implemented
properties the next step is to add a web
service and this web service is going to
retrieve the database data from our
tooltip table and let's name our web
service tooltip service all right so we
want this web service to be called from
script so I am going to uncomment this
attribute right here and let's change
the name of this function let's call
this function get tooltip and this
function is actually not going to return
anything okay so I'm going to change the
return type to white and within the body
of the function we're going to write
some ad or net code to retrieve the
tooltip data from the database table for
that first let's bring in the required
ad or dotnet namespaces we need system
dot configuration we need system dot
data and we also need a system dot theta
dot sequel client in the interest of
time I have already typed the required a
do dotnet code so let's go ahead and
copy that from this notepad and paste
that inside our get tooltip function and
if you look at this code this is
straightforward ad or dotnet code and
one important thing here is that this
method needs a parameter so we give this
function a field name and this function
is going to return us the tooltip text
associated with that field name so
let's go ahead and include a parameter
let's call that field name all right so
what are we doing here we are reading
the connection string from web.config
file and then we are creating an
instance of the tooltip class so we have
created this tooltip class here with two
properties field name and tooltip text
so here we are creating an instance of
that class and then we are creating a
sequel connection object using the
connection string that we read from the
web config file and then we are creating
a sequel command object so using this
command object they are actually
executing the stored procedure that we
have just written which is sp get
tooltip so since this command object is
executing its stored procedure we have
to tell that to the command object and
we are doing that by using the command
type property of the command object
since this stored procedure has got a
parameter we need to send you know a
value for the parameter so we are
creating a sequel promoter object here
specifying its name and value so where
is the value coming from the value is
coming from this parameter and then here
we are associating the parameter with a
command object using the parameters
collection property and then we are
opening the connection executing the
command whatever result we get back we
are storing in this reader object and
while we are looping through we are
retrieving the you know field name and
tooltip text from the reader and
populating the respective properties of
the tooltip object that we have created
here so now we have to write that object
to the output stream so let's write it
in JSON format so we need to serialize
this object to JSON format and to do
that I'm going to use JavaScript
serialize a class that Clause is present
in a different namespace which he system
dot web dot script dot serialization so
now let's go ahead and create an
instance of JavaScript serialize at Los
so javascript serializer
let's call that j s equals new
javascript serializer now what do we
want to we want to serialize
this tooltip object that we have created
right so let's pass that to this
function and whatever JSON string this
function is going to return we want to
write it to the response stream so I'm
going to use context dot response dot
right all right so that's our web
service let's go ahead and quickly test
our web service so we give this web
service the field name and it should
return as the tooltip text in JSON
format so for example let's pass first
name and let's invoke that and look at
that we get the field name back which is
first name and tooltip text your first
name as shown and passport so our web
service is working now all that is left
is to write the required jQuery code so
let's go and do that so within web form
one dot aspx I already have you know the
required HTML to produce this layout so
basically I have a table here and within
the table I've got three table rows and
each table row has got two TDs the first
TD contains the literal text and the
second TD contains a text box the same
is the case for all the TRS okay
and the important thing to keep in mind
here is that notice we have a class
attribute set to display tooltip in a
bit we'll understand the purpose of that
class and again another important thing
is we need to set the title attribute
otherwise it will not work so basically
we have the title attribute set but it
is initialized to an empty string okay
so that's the HTML this HTML when we
view the page in the browser this is how
it looks like now you know when we hover
the mouse over their respective text
boxes we want the tooltip you know to be
retrieved from the database and display
it all right so now within the script
section we have the ready function wired
up so here I'm actually going to write a
JavaScript function okay and let's call
this function get tooltip
so what is this function going to do
it's going to make an AJAX call and
retrieve tooltip text from the database
okay by calling the web service so I'm
going to use the Ajax function and let's
go ahead and specify our options before
that let's actually create a variable
let's call it return value the value
that we want to return and I'm going to
initialize that to an empty string okay
so let's configure our Ajax request so
the first thing that we need to specify
is the URL that we want to make the
request to so basically we want to call
our tooltip service dot SMX so let's
copy the name of the service and within
that service we've got a function the
name of the function is get tooltip so
that's what we want to call so let's
copy the function name and to that URL
we want to issue a post request so I'm
going to specify the method as post and
obviously this function expects a
parameter right we need to pass some
data to this function in the name of the
parameter is field name so let's copy
that and the data that we want to pass
is you know we have to pass a value for
field name and where is that going to
come from now I'm going to use here
dollar this in a bit you will understand
you know what this means
dollar this and on that I'm going to
call the attr function dot attr and i
want the ID attribute value okay so now
this is going to represent one of these
three text boxes first name last name
our department and if you look at the ID
of these fields look at them first name
last name department which match with
what we have as the field name in this
database table so you know whenever we
want to display the tooltip of the first
name textbox then you know this here is
going to represent that first name
textbox and we are retrieving the ID
attribute value so that is going to give
was the field name and for that field
name we want to retrieve the field name
text from the database table so this is
going to represent in a one of these
three text boxes in a bed that will be
clear if it's not at the moment
okay so that's the data that we want to
pass to the server and the data type
that we are expecting back from the
server is Jason and when the request
completes successfully we want to
associate a callback function this
function is going to receive the tooltip
object in a JSON format okay so now what
do we want to do we want to initialize
the string with tooltip text so return
value equals data dot and if you look at
our tooltip object that's what will be
serialized to a decent format and that
object has got two properties field name
and tooltip text and we are interested
in tooltip text property value so I am
going to copy that property and retrieve
its value from the data object and
initialize this variable okay so after
that what we want to do is simply return
the variable that contains the tooltip
text okay so this function is
straightforward it's making an ajax call
you know passing it a field name
retrieving the field you know respect to
field tooltip text populating in this
variable return value and returning that
back okay so now we have to call the
tooltip function right so now if you
look at these text boxes all of them
have the same CSS class which is
displayed tooltip okay so for selecting
all these text boxes I have given that
CSS class okay so let's copy that class
name let's use the CSS jQuery selector
to find all those text boxes so dollar
and I want to find all the elements that
have caught this display tooltip class
and on that I am going to call tooltip
function and remember in the previous
video session we discussed this tooltip
function has got several options and one
of the options is content using which we
can specify the content for our tooltip
and this content can be a string you
know something like ABC or it can be a
function which returns a string so I
have a function here get tooltip so that
is the function okay so this is the
function that we are calling and this is
going to represent the textbox for which
we want to display the tooltip and we
are reading its high D meaning we'll get
the field name and it's this function is
going to return the tooltip text of that
respective fear all right so let's save
these changes and run this one more time
now look at this this is not going to
work and the reason for that is very
simple the reason is from an ajax
request you cannot return a value like
this okay because what happens is this
request will be executed asynchronously
meaning this is a database call that we
are making right so obviously this is
going to take a bit longer right so this
code will not be executed in a
synchronous fashion so it will issue an
ajax request and then it will continue
its execution because it's an ajax
request so it will come to this line and
return the return value variable so here
we are returned we are initializing this
variable with an empty string we are
making an asynchronous request to the
database so the request is sent to the
database while the database is
processing the code will not wait for
that request to come back it will
continue to the next line and written
whatever it has at that point in time so
at the moment it is it is initialized to
an empty string so it's going to return
an empty string that's why we don't get
any tooltip value okay now to fix this
make this request synchronous and to
make the request synchronous all you
need to do is set the async option to
Falls okay so basically we are making
this a synchronous request meaning you
know after issuing the request it will
wait until the request completes and
then initialize this variable and then
execute this last line which returns the
value okay so let's see if those changes
let's run it one more time now look at
this your first name as shown in
passport your last name Ashwin and
passport and your full department name
so now it's working as expected so here
we have the web service code here we've
got the HTML and the take3 code thank
you for listening and have a great day</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>