<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Controlling asp net caching in code   Part 121 | Coder Coacher - Coaching Coders</title><meta content="Controlling asp net caching in code   Part 121 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/kudvenkat/">kudvenkat</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Controlling asp net caching in code   Part 121</b></h2><h5 class="post__date">2013-01-30</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/h1joo4n89gU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello welcome to prism technologies I am
venket this is part one to one of
asp.net video tutorial in this video
we'll discuss about controlling asp.net
cashing in code in part 1 1:9 we
discussed about the basics of caching
and in part 120 we discussed about
caching multiple responses for a single
waveform in both of these videos we
discussed about controlling caching
within the waveform HTML using the
output cache directive in this video
we'll discuss about controlling caching
in code let's flip to visual studio
let's quickly see how we have used the
output cache directive to cache the
waveform so obviously I'm going to print
this server time and to display the
server side time I'm going to use a
server side label control and let's use
to HTML breaks and then print the client
time so client time and to retrieve the
client side time we need to use
JavaScript code so I'm going to specify
the script tag and specify the type as
text slash JavaScript so to retrieve the
line side time we can use the date
function that's available in JavaScript
and then to print the date the date and
time that's returned by the date
function we use the document objects
write method ok so this piece of
JavaScript code that we have here should
retrieve the client-side time and print
it on the web browser whereas if we
wanted the date and time on the server
we can retrieve that using c-sharp code
I mean that's the date and time class
using now property that's going to
return the current date and time on the
server let's go ahead and convert that
to string since we want to display that
within the label control so I'm going to
set the text property of the label
control to that but then I'm going to
append you know some static text to that
as well just to specify you know that
the statics text this page is cash
by the server at whatever date and time
that it is going to be cashed all right
so now let's see how to use the output
cache directory in fact we have used
this in the previous sessions as well so
quickly let's specify the output cache
directive so output cache director has
got two mandatory attributes the first
one is the duration which controls how
long this waveform is going to be cached
for example let's say I want to catch
this waveform for the next 30 seconds
I'm going to specify 30 there and then I
want to cache only one response of this
waveform so I'm going to use vary by
pattern attribute for that and I'm going
to set that to none so I basically want
to cache only one response of this
waveform and then we haven't discussed
about this location attribute so we're
going to use that as well basically what
is the significance of this location
attribute now you know whenever we
request a waveform obviously that gets
processed on the server since we are
using the output cache directive that
response is going to be cached okay so
that cached response where does that get
stored okay
this basically there are three locations
where we can store the cached responses
it could be on the web server or on the
client or in between these two there are
also proxy servers so we can also store
that cache response on a proxy server
okay so basically these are the three
locations where we can store a cached
response on the web server client or on
the proxy servers okay so to control by
default
basically asp.net is going to store the
cached response at any available
location but if you want to control that
we can make use of this location
attribute of the output cache directive
so let's say for example I want to store
the cache - response on the server and
the client I can specify the location as
server and client ok so now let's go
ahead and run this so obviously this
waveform is going to be cached for the
next 30 seconds so look at this it's
actually cached at 19:30 121 so look at
that the client time
but not the server-side time so 1931 29
so this is going to be cached for the
next 30 seconds and after 30 seconds its
elapsed you know the wave form will get
reprocessed and that response is going
to be cached for another 30 seconds so
at the most this waveform will be
reprocessed every 30 seconds and we have
seen how to catch the waveform using the
output cache directive now let's see how
to achieve exactly the same thing using
code okay so let me delete that from
there let's flip to the waveform and I
want to programmatically control caching
okay let me paste this directive there
so that we have a reference of it just
to compare okay now if I want to
programmatically cache this I can use
the response objects cache property okay
so when I'm sending the response back to
the client you know what do I want to do
I want to cache okay so I'm using the
cache property the most important thing
to notice here is look at this when I
hover my mouse over the cache property
look at what it's returning back it's
returning an HTTP cache policy object
back so that's the object that we use to
control caching in code this HTTP cache
policy object that's returned by the
cache property of the HTTP response
class contains all the property I mean
members which are similar to the
attributes you know of this output cache
directive for example let's say I want
to set the duration to 30 seconds so how
do I do that programmatically so respond
store cache which is going to return
that HTTP cache policy object it has got
the set expires property so I can
basically said you know at what time is
the cache going to expire
programmatically using this method now
look at this this method is expecting at
the time to be passed so how do i
specify 30 seconds I'm going to use the
day time object so date time dot now is
going to give us the current date and
time so to the current date and time add
seconds how many seconds I want to cache
it for 30 seconds so this line here is
similar to setting duration is equal to
thirty on the output cache they're
active okay so we have specified the
duration then how do i specify vary by
pattern very straightforward it's
exactly the same thing so response dot
cache which is going to again return the
HTTP cache policy object and then it has
got this property vary by params and
look at this vary by params of none we
are setting vary by params to none how
do we do that programmatically so I can
specify vary by params of none and we
will set that to true so this line here
is equivalent to vary by param is equal
to none and finally we want to specify
the location okay and to do that the
response dot cache dot there is a method
called set cache ability and if you look
at this method this method takes a
parameter of type HTTP cache ability so
what is HTTP cache ability it's an enum
which is going to list us so when we
were using this location attribute it
was actually listing all the locations
that are available
similarly this HTTP cache ability enum
is going to list all the locations that
are available so basically we want to
cache the response on server and client
so I'm going to choose server and
private ok
which means server and client so
indicates that the response is cached
look at their help there indicates that
the response is cached at the server and
at the client ok so obviously now these
three lines of code are actually similar
to using these three attributes on the
output cache directive
ok so let's save that let's go ahead and
run that plus control f5 and the
waveform renders you should see that it
should be cached so this waveform is
cached 1935 31 so look at that the
server side time doesn't change but the
client side time keeps changing so how
long this waveform is going to be cached
it's going to be cached for the next 30
seconds okay so 1935 31 if we add 30
seconds at around 1936
this should be castle 1935 55:59 so in
the next two seconds
look at that 1930 603 1930 603 so since
the duration has expired the cache note
the the cache response is removed from
the cache when we send the request to
the web server at that point of time
it's going to reprocess that waveform
send that back to the client
and then it's going to also cache a
response you know on the web server and
on the client okay so obviously we have
seen how to you know control caching and
code using the response objects cache
property which is going to return us
that HTTP cache policy object obviously
these three lines of code are similar to
the you know output cache declaration
that we have here so obviously output
cache attribute has got duration
attribute which is similar to the set
expires property of the HTTP cache
policy object along the same lines vary
by pattern here and on HTTP cache policy
it's again vary by param their location
on the output cache directive is
equivalent to set cache ability method
on HTTP cache policy object and remember
the response doc cache property returns
this HTTP cache policy object on the
slide you can find resources for asp.net
c-sharp and sequel server interview
questions that's it for today thank you
for listening have a great day</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>