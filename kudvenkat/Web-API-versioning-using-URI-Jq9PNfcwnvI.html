<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Web API versioning using URI | Coder Coacher - Coaching Coders</title><meta content="Web API versioning using URI - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/kudvenkat/">kudvenkat</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Web API versioning using URI</b></h2><h5 class="post__date">2017-02-27</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Jq9PNfcwnvI" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">this is about 35 of asp.net Web API -
dual shell in this video well discuss
why is worsening required in web api
different options available to version
there big gays services and finally how
to version of a bb-8 service using you
arise
so first let's understand why is
versioning required in web api once web
api services made public different
client applications start using and
relying on that service as the business
grows and requirements change we may
have to change these services as well
but the changes to the services should
be done in a way that does not break any
existing client applications this is
when web ad abling helps me keep the
existing services as ease so we are not
breaking the existing client
applications and develop a new version
of the service that new client
applications can start using there are
different options available to version
web api services versioning can be
implemented using your eyes query string
version header accept header and media
type in this video we'll discuss version
using your eyes in our upcoming videos
we'll discuss the rest of the versioning
options let's understand version using
your eyes with an example let's select
visual studio now at the moment with
animal models folder we've got this file
student v1 dot PS we want and conversion
one within this file we have a student
version 1 + which has got these two
properties ID and name within our
controllers folder we have students
version 1 controller within this
controller we have a static list of
students version 1 objects and we also
have these two methods this method
returns ienumerable
of student version 1 objects whereas
this method returns student by ID again
that it can type here a student version
1 object now here is what we want to be
able to do if we navigate to this URI
API /v 1 / students then we want the
service to return the list of all
version 1 student object
if we specify the ID in the doubt then
we want that specific student the reason
we are using versioning here is because
tomorrow if our requirements change and
we want to develop a new version of
student then we would simply change that
out like this API slash p2 then the
service should return list of all
version to student objects if a client
issues a request using API slash v1 then
it should return v1 students so let's
see how to achieve this now we have got
our version one student object we have
got our version one controller the next
thing that we have to do is in Web API
config dot CS let's give our route a
name we can give it any name we want but
I'm going to call it version 1 and then
I'm going to change this out so we want
to go to API for / v1 and then the
controller name I'm going to hard-code
the controller name I'm going to call it
students but if you look at our
controllers folder we don't have
students controller we have students v1
controller so when someone specifies in
the route students has the controller
then we want students be one controller
to be instantiated
okay so let's specify that name here and
this ID parameter here is going to be
optional so let's run our application by
pressing ctrl f5 and when we navigate to
API for / b14 slash students we get the
list of student version 1 objects if we
specify an ID in the URI we get that
specific student as well now if we try
to navigate to API / b2 at the moment we
get four zero four because we don't have
set it out in our application now let's
say our business requirements have
changed and the new clients that we got
they want first name and last name for
the
student instead of just a name property
now if we change this existing version
of the service then all the existing
clients are going to break so there is
definitely a need to develop a new
version of our service so let's first of
all create student v2 object to do that
I'm going to make a copy of this student
version 1 let's change the name of the
file to student v2 and within this let's
change the class names through student
we do and instead of just name let's
include first-name and let's also
include last name now let's create our
student version 2 controller so let's
make a copy of student version 1
controller and let's change the file
name to students v2 controller and let's
change the class name as well so this
one is going to be students v2
controller and we want a list of student
v2 objects and in the interest of time I
have already typed the required code so
let me copy the list from here and paste
it right here so here we have caught
list of student version 2 objects
version 2 object has got ID first name
and last name properties and we want
this method to return student version 2
objects and this method also to return
student version 2 object and then the
next change is fit in our web api
conflicts so we need to create another
route here so let's make it copy of this
and let's give it person 2 as the name
and when we navigate to API slash V 2
slash students then we want students V 2
controller to be instantiated so these
are all the changes required let's give
our solution a build one more time and
when we navigate to
API / version 1 / students we get
version 1 student objects if we navigate
to API / v 2 / students we get version 2
student objects similarly if we specify
an ID in the URI we get that specific
version and that specific student as
expected at the moment we are using
convention based routing to implement
versioning we can also use attribute
routing to implement versioning since we
are going to use their to build routing
to implement versioning we can comment
these two convention routes within our
Web API config dot CSV file and within
our students version 1 controller we
want this method to be mapped to this
route so let's use attribute routing so
we want this get method in our version 1
students controller to be mapped to API
v1 4 slash students and we want this
method to be mapped to the same URI with
an ID parameter and within our students
version 2 controller we want this method
to be mapped to API slash v2 / students
and this one is going to have an ID as
well so let's include ID in the route at
the end let's give our solution a build
and test our application the application
should work exactly the same way as
before so if we navigate to API /v 1
slash students we get version 1 list of
students and if we change D URI to API
slash V 2 slash students we get version
2 list of students and if we specify an
ID in the URI we get that specific
student and version as expected so here
is our first example implementing
versioning using convention based
routing these are the two routes that we
had in our Web API config dot CS file to
implement versioning and here is our
second example implementing versioning
with attribute routing and
of convention based routing thank you
for listening and have a great day</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>