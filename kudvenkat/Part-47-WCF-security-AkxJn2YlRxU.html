<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Part 47   WCF security | Coder Coacher - Coaching Coders</title><meta content="Part 47   WCF security - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/kudvenkat/">kudvenkat</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Part 47   WCF security</b></h2><h5 class="post__date">2014-04-09</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/AkxJn2YlRxU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">sparked 47 of wucf TV series in this
video well this is the basic septa BC of
security first let's understand some of
the fundamental security terms with
respect to WCF authentication the
process of identifying the sender and
recipient of the message authorization
the process of determining what rights
the authenticated user has
confidentiality the process of ensuring
that only the intended recipient of the
message can view the message as it is
being transmitted from the sender to the
receiver we achieve confidentiality by
encrypting the message if you are not
encrypting the message and if it's being
transmitted in plain text format and if
we have a malicious user sniffing the
network he could very easily look at the
contents of your message they by
compromising its confidentiality
integrity the process of ensuring that
the message is not tampered with by
malicious user as it is being
transmitted from the sender to the
receiver we achieve integrity by signing
the message the sender of the message is
going to digitally sign the message upon
that message arriving at the recipient
the recipient is going to check the
digital signature if there is a mismatch
obviously the message is tampered with
as it was being transmitted from the
sender to the receiver out of the box
most of the bindings in WCF with one
exception that is the basic HTTP binding
provides all of these security features
the basic HTTP binding is the only
binding which does not provide you know
any of these security features by
default the binding end WCF obviously
determine the security scheme that you
get the MSDN link right here lists all
the system provided bindings and the
respective security defaults let's
actually navigate to that link so here I
have that URL
I'll have this link available on my blog
in case you need it so these are the
system provided bindings and here is the
mode of security that is available with
each of you know these bindings so if
you look at basic HTTP binding look at
that
the default is none so the default is
present within the bracket
default is none but we can configure the
basic HTTP binding to provide transport
security or message security or a mixed
security mode let's look at WS HTTP
binding the default is message security
and if you look at net PCP binding the
default is transport security now let's
understand the difference between
message and transport security in a
later video session we'll understand
what we mean by mixed security mode now
from a security perspective when sending
a message between a client and the WCF
service there are two things that we
need to consider the WCF message itself
and the medium of protocol over which
the message is sent in the previous
video sessions we discussed that we can
use protocols like HTTP TCP m sm q etc
to send messages so we have a protocol
and the WCF message itself now let's
understand what we mean by transport
security securing the transport channel
is call Transpo security each of the
protocols for example HTTP TCP m sm q
etc they have their own way of providing
transport security for example TCP
provides transport security by
implementing TLS that is transport layer
security the TLS implementation is
provided by the operating system HTTP on
the other hand provides transport
security by using SSL over HTTP that is
secure socket layer over HTTP a common
example that we encounter in our daily
lives is when we buy a product and then
we are about to make a payment you know
notice the change in the URL changes
from HTTP to HTTPS to protect the you
know credit card details that is being
transmitted over HTTP so we are using
their SSL over HTTP to to secure our
messages at the transport level but one
thing to keep in mind as far as
transport security is concerned is that
it only provides point-to-point channel
security it means if there is an
intermediary like a load balancer or a
proxy in between the sender and the
recipient then that intermediary is
going to have direct access to the
content of
that's because transport security
provide security at the transport layer
so when the message reaches the
intermediary the message itself is not
protected which means that intermediary
has access to the contents of the
message before it is ultimately sent to
the ultimate recipient okay so keep in
mind Transpo security only provides
point-to-point channel security on the
other hand message security is securing
the message itself by encapsulating the
security credentials into every supe
message as a message itself is protected
it provides end-to-end security no
matter how many intermediaries it's
going to traverse you know as the
message itself is protected we will get
end-to-end security and the MSDN link
right here explains all the differences
between message security and transport
security and when to use one over the
other that's actually navigate to that
URL so here are the benefits of using
message security so it provides
end-to-end security and it provides
increased flexibility as well because we
are now including the security details
within the message so you have
flexibility on what parts of the message
you want to encrypt and what you don't
want to encrypt and sign so let's
increase flexibility there and support
for multiple transports as well you can
send sacred messages over many different
transport protocols okay and support for
wide set of credentials and claims again
within the message you can use any type
of claims that you want and here are the
pros and cons of transport level
security so what are the advantages
using transport security it does not
require the communicated parties to
understand XML level security concepts
because if you look at message security
we're including the security credentials
within the message but with transport
the security is provided with the
transport layer so there's no need to
understand those XML level security
concepts with transport security which
means this also improves the
interoperability and generally the
transport we get improved before
and hardware accelerators are also
available and streaming is possible and
what are the downsides of using
transport it only provides hop to home
that is point-to-point
you know security only limited an
extensible set of credentials because
that's limited by the transport protocol
that we use and if you look at the
message level security these are the
disadvantage is the main one is the
performance because now since we are
using the security clearance with the
message itself or the message size is
cluded obviously that's going to
contribute to the performance and we
cannot use message streaming and
obviously to use message security we
need to understand the implementation of
XML level security mechanisms and
support for WS security specifications
which means it's going to affect the
interoperability as well right let's
actually look at an example of using
message based security so let's flip to
visual studio let's create a new project
let's say we want to create a class
library project and let's call this
hello service and let's delete this
class 1 dot CS file that is generated
and to this project let's add a new item
and we want to add a WCF service and
let's actually call our WCF service
hello service and let's change the
operation contract signature to return a
string and let's actually call this get
message and we want to pass a message to
this contract
let's get to the implementation file and
we want to implement hi hello service so
let's provide the implementation forget
message operation contract all this
method is going to do is concatenate
this word hello with whatever message we
are going to receive and then return
that okay so a very simple WCF service
there
now let's host our WCF services in the
console application so let's add a new
project of type console application
let's call this host and to this project
we need to add a reference to system dot
service model assembly and we also need
to add a reference to hello service
project so let's go to that that alright
now let's add an application
configuration file where we can specify
the configuration for our WCF service
and to speed things up I already have
the config here so let me copy and paste
it right here again this is the same
configuration that we have been
discussing in the previous sessions of
this video series if you look at the end
point right here that is the address and
look at the binding we are using we are
using WS HTTP binding and what is the
default security mode where WS HTTP
binding message security message based
security so the message is going to be
encrypted and signed encryption provides
confidentiality signing the message
provides integrity meaning nobody can
tamper that as it's being transmitted
and confidentiality ensures that nobody
can view the message okay so message
security by default is going to encrypt
and assign the message let's actually
prove that with this example so we're
using WS HTTP binding right here and
within program dot C s file
let's bring in system dot service model
namespace and then here we need to write
code to have the service up and running
so let's copy and paste this code in the
interest of time
all right so now let's set our host
project as well start a project and
let's go ahead and run this by pressing
control f5 so our host is started now
let's create a client for this WCF
service let's actually create a new
windows forms application and let's call
this Windows client and all we are going
to do is drag and drop a button and the
textbox control on to this web form so
we have the button here we have the text
box here so let's quickly change the
text on the button to something like get
message all right
and then let's double click on the
button to generate a click event handler
let's add a service reference so the
service reference is going to be to 8080
localhost 8080 that's where our WCF
service is available so let's give the
namespace as hello service click OK and
let's create an instance of the hello
service client let's call it client
equals new client and let's invoke get
message and pass whatever we type into
the textbox and whatever we get back we
are going to display that within message
box all right now while we are here
let's actually close the WCF service
that's running let's enable message
logging for this WCF service so that we
can view that encrypted and signed
message and to enable message log in go
to WCF service configuration editor
click on file open config file and we
want to open the app dot config file
click on diagnostics enable log Auto
flash and we want to enable message
logging then expand diagnostics go to
message logging
then log n time essayed so we discussed
to discuss enabling message logging in
part 9 of this video series so I am NOT
going to go into the details of that so
basically we have enabled message login
okay so it has placed a file with dot
SVC log extension within the host
project folder so let's go ahead and run
our WCF service now let's run the client
and let's pass for example presume as
the message click get message we should
get a response back
hello proceed now let's go to our hosts
project open the folder in Windows
Explorer and we have this app underscore
messages dot SVC log and if you look at
the log and if you look at the last
message here notice that here we have
this soup envelope which has got the
soup header and if you look at the soup
body right here look at that the
contents of the body is encrypted and it
is signed as well it's not in plain text
now quickly
let's close the WCF service let's also
close the client let's change the
security mode look at this now we just
specify the binding SW as HTTP binding
we didn't customize it now let's go
ahead and customize the binding so let's
say bindings we want to customize WS
HTTP binding and let's give that binding
a name let's call it WS HTTP and here we
can specify the security mode look at
that we have different modes here now
let's set nan meaning we don't want any
security in spite of using WS HTTP
binding and the last thing that we need
to do is associate the binding
configuration that we have specified
here with the end point using binding
configuration attribute so let's go
ahead and run the WCF service let's go
to the client let's delete the service
reference
and let's add the service reference once
again let's say the namespaces hello
service so now we specify that we don't
want any security let's see how the
message is going to be now that is the
logged message so let's say presume
click on get message so we should get a
response back now let's go back to the
host project and open the service log
and if we scroll all the way down look
at that
it's in plain text right now it's not
encrypted it's not signed which means we
don't get confidentiality and
integrating alright so that's it for
today thanks for listening have a great
day</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>