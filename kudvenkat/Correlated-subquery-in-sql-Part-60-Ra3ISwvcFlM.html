<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Correlated subquery in sql   Part 60 | Coder Coacher - Coaching Coders</title><meta content="Correlated subquery in sql   Part 60 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/kudvenkat/">kudvenkat</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Correlated subquery in sql   Part 60</b></h2><h5 class="post__date">2013-01-10</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Ra3ISwvcFlM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello welcome to prism technologies I am
venket this is part 60 of sequel server
video series in this video we'll discuss
about correlated sub-query sin sequel
server in part 59 of this video series
we have discussed the basics of sequel
server we also discussed about how sub
queries can be replaced using joins if
you haven't watched that I would
strongly encourage you to do so before
continuing with the session in this
session we'll discuss about correlated
subqueries correlated subqueries are
very simple and easy to understand
now if the sub query depends on the
outer query for its values then that sub
query is called as a correlated
sub-query let's look at an example let's
flip to a sequence of a management
studio now before we look at a
correlated sub-query let's look at a non
correlated sub-query we'll be using the
same tables that we have used in the
previous session of this video series
TBL products and TBL product sales TBL
products table contains the product data
and TBL product sales table contains
sales related data so every time we sell
a product and entry will be made into
this table now let's say I want to
retrieve all the products that has not
been sold at least once how do I write
that query obviously whenever we make a
sale an entry is made into TBL product
sales table now if you look at the
sample data that we have we have sold
product with ID 2 and 3 meaning laptops
and desktops we haven't sold a TV at
least one so I want to retrieve the
products that we have not sold at least
one so how do I do that
so select I want the ID name and
description we'll we'll write those
columns later first let's write it from
clause
so TBL products select from TBL products
now I have written the from class first
because I will get intellisense for the
column name so it'd be easier to write
type so select ID name and description
ok so we want these three columns from
this table where the ID column in TBL
products table not n
in this table okay product ID not in
this table so what I will do basically
select product ID from TBL product sales
and since there are duplicate product
IDs I am going to use the distinct
keyword okay this is the same query that
we have discussed about in the previous
video session now look at this you know
how does this query gets executed now
the sub query gets executed fast so if
you look at this query this sub query
can be executed independently so when I
execute that query I get 2 &amp;amp; 3 now we
are saying select ID name description
from TBL products where ID naught then 2
comma 3 which should give us the product
with ID is equal to 1 okay this is an
example of a non correlated sub-query in
a non correlated sub-query this sub
query is not a dependent on this outer
query for its values the sub query can
be executed independently on its own
okay once the scepter is executed the
results of this sub query is then
substituted within those parentheses for
use by the outer query ok so in a non
correlated sub queries sub queries
usually gets executed only once ok now
let's look at an example of a non
correlated sub-query again will be using
the same examples that we have discussed
about in the previous session let's say
for example I want to find out you know
all the products that we have sold and
the total quantity okay so basically we
have three products and I want to find
out all the three product names and the
total quantity to ttle you know quantity
that we have sold so how do we do that
so basically I want the name and then
the total quantity now to retrieve the
total quantity I want to use let's say
sub query ok so I'm going to open and
close parentheses select now we want you
know the total quantity that we have
sold so I am going to use some aggregate
function and some off I want to
aggregate this quantity sold column so
quantity soul from TBL product sales
table
okay we're product ID is equal to now
for now let's substitute question mark
there from TBL products table so various
name column coming from the name column
is coming from TBL products table and I
want to sum of this quantity sold for
each product so the product ID is going
to come from TBL products table okay so
every rule that we select from the outer
query so first TV is selected let's say
for example then what is the sub-query
look at the sub-query that we have here
select sum of quantity sold sum of
quantity is sold from TBL products where
product ID is equal to look at this we
are looking up the product ID in TBL
products table so every time we select a
row from the outer query now this up
query gets executed low so when I select
this row fast it then executes this sub
query when that row is being selected
okay where product ID is equal to T
build products dot ID here the ID is one
it looks up that here we don't have an
ID so some four TVs will be null and
then when I take when the query executes
the second row what happens it comes to
the sub query looks up in TBL product
sales table is there an entry is there a
product with ID - yes there is it tries
to sum up that there is only one row so
we only get seven and then finally when
it comes to three okay product ID is
three so there are three rows so it's
going to add five four and nine so 18
will be the sum so if you look at this
now can I execute this sub query
independently out of you know
independently of the outer query no I
can't look at this when I try to execute
that I get an error because the
multi-part identifier TBL products dot
ID cannot be bound now a correlated
sub-query will get executed for every
row you know for the outer query in the
outer query for every row
you know this sub query gets executed
okay so look at this when I execute this
query together
I get TV laptop and desktop and I get
their some as well okay now I don't have
a column name here but let's go ahead
and give a meaningful column name using
alias so let's say quantity sold now we
get a column name okay so that's a
correlated sub-query because this sub
query is dependent on this outer query
for its value for the value for this
column product ID okay so that's a
correlated sub-query so if the sub query
depends on the outer query for its
values then the sub query is called as
correlated sub-query in a weight loss
look at this in the weight loss of the
sub query this product ID column gets
its value from TBL products table and
TBL products table is not present within
the sub query okay it's present only
within the outer query so this sub query
is dependent on the outer query for its
value in this case for product ID so
here the sub query is dependent on the
outer query for its value hence the sub
queries a correlated sub-query
correlated subqueries get executed once
for every row that is selected by the
outer query correlated sub-query cannot
be executed independently of of the
outer query but whereas a non-correlated
sub query can be executed independently
of the outer query on this slide you can
find resources for asp.net c-sharp and
sequel server interview questions that's
it for today thank you for listening
have a great day</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>