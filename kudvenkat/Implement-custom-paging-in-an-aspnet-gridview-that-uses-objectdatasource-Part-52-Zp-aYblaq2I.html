<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Implement custom paging in an asp.net gridview that uses objectdatasource - Part 52 | Coder Coacher - Coaching Coders</title><meta content="Implement custom paging in an asp.net gridview that uses objectdatasource - Part 52 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/kudvenkat/">kudvenkat</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Implement custom paging in an asp.net gridview that uses objectdatasource - Part 52</b></h2><h5 class="post__date">2013-04-09</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Zp-aYblaq2I" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello welcome to precision technologies
I am Frankie this is part 52 of asp.net
free tutorial in this video we'll
discuss about implementing custom paging
in accurate we control that uses object
data source control with object data
source control it's possible to
implement both default paging and custom
paging in part 51 of this video series
we discussed about implementing default
paging so what's the difference between
default paging and custom paging this is
a very common asp.net interview question
as well with default paging all the
rules are retrieved from the database
every time we navigate to a different
page within the grid we control for
example let's say there are 10,000 rows
in the database table and then let's say
for example on the grid we control we
have set the page size to 3 when the
grid view control loads it's going to
load all the 10,000 records from the
database table and then the grid view
control will display the correct set of
those 3 records so if I navigate to a
different page number then again when
the webform post back it's still going
to load all the 10,000 records from
which the grid we control will display
the correct set of 3 records for that
page so just imagine the amount of
network traffic that goes on between the
database server and the web server with
default paging but whereas with custom
paging we don't have this problem with
custom paging we only retrieve this
subset of rows that will be displayed in
the grid we control for example when we
set the page size to 3 with custom
paging we only load the correct set of
those 3 records even if the underlying
database table has got 100,000 records
so obviously with custom paging we get
much better performance over default
paging however when compared with
default paging custom paging is
relatively complex to implement in this
video we'll discuss about implementing
custom paging so obviously to implement
custom paging the first thing to
basically do is to write a stored
procedure which is going to return us
the correct set of records so for
example if we have a grid we control
whose page size is set to 3 and if I am
on the first page of the grid we control
then you know we need a store
procedure which is going to return the
records from 1:00 to 3:00 and when we
navigate to the second page it should
return records from 4:00 to 6:00 so
basically if we have to design a stored
procedure you know which can do that
what are the two things that we need to
provide to the stood procedure obviously
the starting row in the X and then the
maximum number of rows that we need so
if we set the page size to three then
you know and we are on the first page
the start row index will be one and
maximum rows is three so we get three
rows when I am on the second page you
know the start row index will be four
and the page size is again three so I
get four five and six
so first let's you have to design the
stored procedure so for this demo we'll
be using this table TBL employee within
this table I have got these eight rows I
have the stored procedure already
implemented and if you look at the
stored procedure it has got two input
parameters the start index and the
maximum number of rows so obviously if I
am on the first page the start index is
going to be one the start row index and
I need three rows so if I pass in one
comma three
so start index is 1 maximum rows is 3 I
execute this look at that I get the
first set of 3 records now when I am on
the second page the start row index will
be 4 and obviously the maximum growth
will again be 3 because the page size is
always going to be 3 within the grid we
control okay so when I set this to 4
look at that I get the correct set of
you know 3 records 4 5 6 and when I
navigate to the third page the start
index is going to be 7 and the page size
will still remain 3 but then remember
this table has got only 8 records so the
last phase will only get 2 records
7 &amp;amp; 8 okay so let's now you know inspect
the stored procedure whoa you know how
did we implement this so if you look at
this this very straightforward all we
are doing here is we are using a drone
number function to achieve this okay if
you are new to row number function we
discussed about this in sequence of a
video tutorial so please watch that
video so select row number over
we are ordering it by employee ID and
then for the room number we are giving
an alias as row number and an employee
ID name gender and city are the columns
from TBL employee table so if you look
at this inner query it's very
straightforward
I execute this I get all the rows
employee ID name gender in city I also
have a row number so this inner query
results you know we give it a name this
is the derived table employees so if you
look at this employees will have you
know the sraw number and then the rest
of the TBL employee table columns and
look at the outer query we are saying
select employee ID name gender and city
we are only selecting one two and three
you know employee ID name gender and
city because these are the columns that
belong to TBL employee table and which
we want to show to the end user we don't
want to be showing row number that's why
I am only selecting the required columns
from this derive the table employees
which will also contained row number
okay and then look at what I am doing I
am filtering based on that row number
where row number is greater than or
equal to start index so I free pass you
know start row index s1 so row number
greater than or equal to 1 and then row
number is less than start index plus
maximum rows so what is the sum of start
index plus maximum rows one plus three
is four and row number should be less
than four meaning I get records from one
to three and similarly if we pass you
know start row index is 4 and the page
size as 3 that's the maximum rows you
know so obviously row number is greater
than or equal to 4 so it's going to
start at 4 and then row number is less
than start index plus maximum rows which
is going to be 4 plus 3 so less than 7
so I get 4 5 6 the correct set of you
know records for the second page ok so
pretty simple and straightforward now
you may be wondering why are we
computing row number why can't I use
employee ID to do this check ok
just imagine if an employee resigns are
for some reason we have deleted an
employee record from this table you know
we will not have employee IDs and secret
so that's the reason why we can't use
employee ID you know for this we're
close that's the reason why we are
computing this phone number and using it
alright so obviously we are done with
designing the stored procedure now let's
do visual studio since we want to use
object data source control obviously we
need to build our employee data access
layer so let me add a class file to this
project add class and let's call this
employee data access layer dot CS and
then to encapsulate employee information
we obviously need to design an employee
class I have this already implemented
and if you look at this class it's a
straightforward class with four auto
implemented properties employee ID name
gender and city and then with an
employee data access layer class we need
to write a method which is going to
retrieve that you know basically execute
that stool procedure and retrieve the
correct set of records that we need so
obviously we need to write some radio
dotnet code so first let's go ahead and
import the required area or namespaces
and then let's write a method which is
going to invoke the stored procedure SP
get employees and again just to speed
things up I have this method already
implemented so let me copy and paste
this method within our employee data
access layer so if you look at this
method that's very straightforward the
name of the method get employees and
notice the signature of the method it
has got two input parameters start row
index and maximum roles these two input
parameters of this method will be passed
as values for these stored procedure
parameters so let's inspect this method
so what are we doing this method is
actually returning a list of employees
and then it has got two input parameters
start row index and maximum rows the
first thing we are doing we are creating
a variable of type list employee using
the configuration manager class we are
reading the connection string using that
connection string preparing the signal
connection object and then we are
preparing the sequel command here notice
the command it's SP get employees it's
nothing but the name of the stored
procedure that we have just implemented
and since that is a stored procedure yes
the command type to store procedure and
since this stored procedure has two
input parameters we are specifying those
two parameters here so we are creating a
parameter object and then we are
specifying the parameter name as at
start index that's what is the name of
the parameter and then we are specifying
the parameter value so what is the
parameter value start row index so where
is this coming from this is coming as an
input parameter into this method okay
and then finally we are adding that
parameter object to the command object
similarly we are doing you know adding
the maximum ros parameter which the
destroyed procedure has okay so we have
added the parameters open the connection
execute the command loop through each
row create an employee object add that
object to the Employee List and then
finally return the list
so obviously this employee data access
player now has a method which is going
to return the correct set of records
that the grid we control needs but then
you know this method will only return
three records okay to the grid we
control now the grid we control somehow
should determine you know the page
numbers here so how many page numbers
should the grid we control show how does
it know that unless and until it knows
the total number of pages and the page
size it really can't compute the number
of page numbers to display within this
pager area of the grid we control so
obviously somehow we have to tell the
grid we control how many total rows are
there in TV land flow a table and
obviously to do that we need another
method which is going to return just the
count of the total number of rows in TBL
employee table I have this method again
already implemented so let me copy this
and paste that into this employee data
access layer and if you look at this
method look at the return type it's an
integer because we just need the count
of total employees and using the
configuration manager class we are
reading the connection string we are
building the sequel connection object
using that connection string and look at
the sequel command select count of star
from TBL employee
and this command will return a scalar
value that's why we are executing scale
a vehicle invoking you execute scalar
method and if you look at the return
type it's an object so we need to
typecast it to be of type integer and we
are returning that back okay so our
employee data access layer has got two
methods that require two methods the
first method is going to return the
correct set of employee records
the second method will return us the
total number of records in TBL employee
table all right at this point let's
build a solution so that the employee
data access layer is compiled and then
let's get to this waveform one dot aspx
let's drag and drop a grid view control
let's auto format this let's choose
brown sugar as the scheme let's drag and
drop object at a source control onto the
waveform let's configure this let's
select our business object which is
going to be employee data access layer
that's present in demo namespace click
next choose your select method which is
going to be get employees and notice
this this method has got two input
parameters start row index and maximum
rows now when I click Next it's going to
ask me to define the parameter values
okay at this point I'm not going to
define the parameters I'm just going to
click finish
and then let me associate this object
data source control with this grid we
control and then let's enable paging and
we get the default page size of 10 let's
set that to 3 okay at this point let's
flip the webform to the source mode and
then notice the configuration of this
object data source control ok so here
you know the type is employee data
access layer and if this employee data
access layer has caught yet employees
that's what is going to be our select
method and that this get employees
method has got two input parameters
right start row index and maximum rows
and you know those are specified as
select parameters now I'm going to get
rid of them from here the Select
parameters and instead of those two
selector emitters
I need to specify you know what is the
first parameter it start ruh index so
start a row index parameter name so what
is the name of the parameter that
contains the start row index it's
nothing but start row index in this
method so we need to specify that here
and then the next parameter is the
maximum rows okay and we need to define
that specify that to the object a data
source control so maximum rows parameter
name what is that that is maximum rows
so let's copy and paste that here okay
and then look at this within the grid we
control we have enabled paging but we
need to enable paging with an object
data source control as well so even
object data source control has got this
attribute enable paging so let's set
that to true and finally you know the
object data source control you know this
is what will serve the data to the grid
view control so what is the method which
is going to return the total counter to
the grid view control you know obviously
we have this method get total count so
we need to specify the name of this
method to our object data source control
and to do that we have another attribute
called select count method so what's the
name of that method it is get total
count that's it we are done
so let me run this now and see if our
custom paging works as expected so when
the grid we control loads it has to show
three records on the first page but
notice this we have a problem here it's
only displaying two records on the page
now if you remember on what grid we
control we have set the page size to
three so it should actually display
three records within the grid we control
okay but it's displaying two records why
is that that's because you know
look at the stool procedure if we send
start index s1 and then when I execute
this procedure I get the correct set of
records but for some reason if I pass
zero as they start index and then
execute that stewed procedure what's
going to happen
it returns two records and that's what
is exactly happening because this object
data source control is sending zero as
the start index by default okay so to
correct this there are several ways and
the easiest way is basically within the
stored procedure so all I'm going to do
here is I'm going to increment start
index by one so set start index is equal
to at start index plus one let's alter
the stored procedure
alright let's reload this page now look
at that now I am page number one and it
shows me the correct
I know set of records I go to page
number two I get records from four to
six I go to page number three I get
seven and eight records now when I am on
page number one though there are eight
records within the database table it's
going to retrieve only these three three
records from one two three so obviously
this is much better than default paging
alright on this slide you can find
resources for a speed ordinance in
Japan's exclusive interview questions
that's it so today thank you for
listening have a great day</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>