<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Formatting gridview using rowdatabound event   Part 8 | Coder Coacher - Coaching Coders</title><meta content="Formatting gridview using rowdatabound event   Part 8 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/kudvenkat/">kudvenkat</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Formatting gridview using rowdatabound event   Part 8</b></h2><h5 class="post__date">2013-02-24</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/gl8H7_rjINE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so welcome to presume technologies I am
venket this is part 8 of asp.net video
tutorial in this video we'll discuss
about formatting grid view using raw
data bound event this video is actually
in response to one of my YouTube
subscribers question here is the
subscribers question how can we have
multiple cultures for a single page for
example each row of the grid view
displays a record for a person belonging
to a different country let's understand
what we mean by this question I have a
table in the database as you can see on
the left hand side here which has got
employee ID first name annual salary and
country columns now depending on the
country to which the employee belong I
want to display a currency symbol next
to their annual salary column when we
display that data in a grid view control
on the right hand side you can see that
John belong to us country so we are
displaying a US dollar symbol next to
his annual salary column where as spam
belong to India's we have an Indian
rupee symbol whereas David belong to UK
so we have a great British Pound symbol
displayed we can very easily achieve
this using true data bound event of the
grid view control so when is this row
data bound event raised this row data
bound event is raised
whenever a record from the data source
is bound to a row in the grid view
control so for every record that we have
in this data source you know whenever
that row is bound to a row in the grid
we control the event is raised so if I
have like 100 rows in a database table
then rotate around event is raised you
know 100 times for all those data rows
not only for data rows even for header
and footer
you know the row data bound event is
raised okay so let's actually look at
this in action let's flip to visual
studio so the easiest way to retrieve
data and display that in a grid view
control is by using sequel data source
control so let's drag and drop that
configure data source let's select the
you know connection string that's
present in my web config file click Next
and select the table in our case it's
going to be TBL employee and we want to
select all the rows from the table so
select star from TBL employee click Next
test your query click finish we are done
configuring our sequel data source
control now let's drag and drop a grid
view control onto the waveform and let's
configure that so choose
data source equal data source one and we
have the data displayed in the grid view
control now we want to format the annual
salary to use the currency symbol and
the easiest way to do that is by using
data format strings we have discussed
about data format string in a previous
session of this video series so please
watch part 7 of the asp.net grid-view
tutorial before proceeding with this
video so let's go ahead and set the data
format string for annual salary so data
format string is equal to we have to
specify data format strings and you know
these brackets so 0 : C for currency
alright so let's go ahead and run this
on my machine the default culture is
English - Great Britain so a pound a
symbol will be displayed next to every
employee salary okay but we want that
currency symbol to be based on the
country to which the employee belong and
we can very easily achieve that using
row data bound event so let's flip to
visual studio now let's go to the
properties of this Calibri control by
right-clicking on that and then click on
the lightning bolt symbol to get to the
events of the grid we control and here
you should see row data bound event and
look at the help here this even fires
after a row has been data bound okay so
double click there to generate the event
handler so basically what we want to do
here is you know look at the even
handler here we are receiving a gridview
true event arc so object into this event
handler so we can make use of that event
that object properties to determine the
type of row in the first place now
remember you know this Roo data bound
event is also raised for the header and
footer this grid view control does not
have a footer it it has only the header
so this event is also raised for header
we don't want to do anything when the
header is there only when it is a data
row we want to check the country the
user belong to and then based on that we
want to change you know the culture
information for this row okay so we
basically need to identify to which
country the user belong okay and to do
that first we need to check the row type
so e dot this this grid-view row even
two arguments object has got a property
called row which also has a
got another property called row type so
check if the row type is header I mean
sorry is data row because we don't we
don't have any data in the header it's
only column names so data rows will have
data so if the row is data row then what
we want to do we want to check the
country of that employee so where is the
country column present it's the fourth
column one two three four since the
index starts with zero it's technically
third column so this row object again
has caught you know each row if you look
at this it's a collection of cells and
which cell is this one it's the fourth
the cell since the index starts at zero
it's going to be third cell so e dot
rule dot cells of three and the text in
that one if that is equal to us okay so
basically let's use an if condition so
if the country is us then what we want
to do we want to set the current threads
current culture to English - United
States it's as simple as that so system
dot threading dot thread dot current
thread dot current culture is equal to
new culture info which is present in
system globalisation information and to
the constructor we need to specify the
culture string which is English - United
States okay so we have just done that
for country us but we need to do it for
other countries as well and just to
speed things up I have this already
typed so let me copy and paste that in
visual studio so if the country is us we
are setting the culture to English -
United States at the countries UK we are
setting it to English - Great Britain at
the countries India we are setting it to
English - India and similarly for other
countries as well okay so with this
change let's go and run this now now
there's going to be a slight issue with
the way the data is going to be
displayed now keep in mind look at this
the first thing to notice here if the
country is us it's actually displaying a
Great British Pound symbol if the
country is India it is displaying a USD
whereas the country is UK it is
displaying an Indian rupee which it
doesn't make sense at all let's
understand
we have this behavior now keep in mind
first the default you know culture
setting on my machine is English - GB
which is what is displayed for the first
row because when the first row is
rendered look at that when the first row
is rendered the first row has got us so
it comes here and keep in mind when this
event is raised this event is raised
after the rule is data-bound
after always bound to the grid we
control at that point we are setting the
current threads culture to us so this
row is bound to the grid we control this
row is already processed by the Turin
thread at that point when it is
processing the culture you know the
default culture was used which is
English - Great Britain so that's why
pound a symbol is displayed and after
this row is data bound we are setting
the current the threads culture -
English - United States which then will
be used when it comes to you know
binding this one so that's when it is
setting that culture to this row that's
why you know US dollar is displayed here
and look at this here the country is
India and that culture now is set to the
next row that's why an Indian rupee is
displayed here and look at this here we
have country in the country is UK in the
third row you know that culture is
applied to the fourth row where a South
African Rand now culture is applied to
the fifth row that's why we have this
disconnect because we are setting the
culture you know four threads culture
you know for the next row basically when
we do that in there draw data bound so
it's not a simplest you know setting the
thread culture there is more to it let's
see how to solve this problem so this
code we know for sure it's not going to
work so I'm going to retrieve all that
else--if blocks there so what we
basically need to do is you know I want
to check the country so it's us if it's
us then what we want to do we also want
to retrieve the salary and then change
that salary using this culture and then
you know use that formatted salary and
then set that back as the text for this
column so let's see that in action
so first you know we know that if the
country is going to be us then what do I
want I want to retrieve the sale for
salary and to do that I'm going to say
end let's call the salary is equal to a
very salary column present its present
in 0 1 &amp;amp; 2 second column technically so
e dot rows row dot cells of two dot text
that's going to give us the salary text
and we want to convert that into India
so I'm going to use convert dot two in
thirty two and then once we have convert
dot two in third once we convert that to
integer then what I'm going to do I'm
going to format that you know using this
US culture so I'm going to use a string
variable and let's call that as format
it celery for example formatted string
okay and to format that string I'm going
to use the format class I mean format
method of the string class and then this
method has got several overloads I'm
going to use an overloaded version you
know the third overloaded version which
takes a format provider the format
itself and the string that we want to
format now look at this here we want to
pass the culture specific information
now we know that the culture is going to
be United States so I'm going to copy
that as the pattern as as the first
parameter so I want to format this using
US culture and the next thing is what is
your look at this we are using the third
overloaded version of you know the
format method we need to specify the
format so what is the format I want to
format the currencies of 0 colon C and
then finally what is your salary that
you want to a format it's nothing but
the salary that I retrieved so I'm going
to pass that there so this method is
going to format the salary for us using
US culture and then what we basically
want to do display that you know set
that as text
this car I mean for this column in that
row so what I'm going to do a dot
through dot cells of salaries displayed
in the second column so dot txt is equal
to that formatted string very simple and
straightforward retrieve the salary
format that using the current country's
culture and then set that back as text
for that column okay and we have to
repeat that for every country and again
just to speed things up I have this
already typed here so let me go ahead
and copy that and paste it there so we
are doing it for other countries it's UK
you know we are returning the salary
formatting that using English - Great
Britain and then setting that back a
salary so on and so forth for the rest
of the countries now let's run this and
see if the data you know is displayed as
expected we may get a runtime error look
at this when it is trying to convert the
salary we are getting a runtime error
that's basically because we have
hard-coded the format string here you
know 0 : C so when this annual salary is
rendered you know that is rendered along
with this pound symbol so obviously this
string now cannot be converted into an
integer because of the presence of that
pound symbol so we need to get rid of
that data format string from annual
salary column in the grid we control
okay so now let's go and run that we
shouldn't get that runtime error because
salary should be converted so look at
that
you know Indian rupee pound you know
South African Rand but for some reason
us symbol is not being displayed
correctly let's see the reason why and
correct that so here what are we doing
oh we need to use those flower brackets
there that's the reason why it's not
working as expected so let's run this
now even for us it should display the
correct currency symbol which is taller
so US dollar Indian rupee UK Great
British Pound etc okay now if you're
wondering okay how do I get the list of
all supported cultures in asp.net as it
I mean look at the screen it's very easy
all you need to do is you know using
current pipes enumerator get all
cultures and then there's method called
get cultures which is going to return
all supported cultures okay so I have
this code actually so if you're
wondering how to get all the cultures
that are supported in asp.net copy this
code paste that in your page load event
and you should be able to say you know
all the events basically so if you look
at this get culture it's actually
cultured in for method is present in
systems or globalization namespace so
let's go ahead and import that okay now
the reason why this is helpful this this
piece of code is helpful because if
you're wondering okay what do I use you
know for you know how do I know I have
to use English - ca for South Africa
okay do I have to remember all these
countries specific cultures on top of my
head no you don't have to this piece of
code that we have just written is going
to give all those cultures and from
there you can actually find out what is
the culture specific string of a
specific country so if you look at this
get cultures it's going to return an
array of culture info objects through
which we are looping through retrieving
the name of that culture and then the
display name okay
let me run this and you will see what
the output is so on the page load it's
going to display the list of all these
cultures basically and then we can
search for a specific country and then
find out what is it it's in a culture
string for example let's say India so so
if you look at this India there are 17
culture settings so in DHI and then if
you look at the other ones if you want
Hindi hii n on the other hand there are
other region languages as well okay and
there is English as well somewhere there
should be English - India as well so you
can see that English - India so
basically this helps you to identify the
culture specific string of a specific
country alright and you know at this URL
you can all you know
find you know the countries and they're
supported currencies today so that's the
URL this is the Wikipedia article where
you have all the currencies by country
okay for example for India it's Indian
rupee for us it's US dollar so based on
the country you have those that currency
name and then the symbol as well alright
on this slide you can find this was face
B dotnet C sharp and sequel so interview
questions that's it for today thank you
for listening have a great day</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>