<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Deleting data from gridview using objectdatasource control - Part 15 | Coder Coacher - Coaching Coders</title><meta content="Deleting data from gridview using objectdatasource control - Part 15 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/kudvenkat/">kudvenkat</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Deleting data from gridview using objectdatasource control - Part 15</b></h2><h5 class="post__date">2013-03-05</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/JeuxmvFK4N0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello welcome to prism technologies I am
Frank it this is part 15 of asp.net
create view tutorial in this video we'll
discuss about deleting data from grid
view using object data source control
let's understand this with an example in
sequel server I have this table TBL
employee with some sample data we want
to display this data within a grid view
control and we should be able to delete
it from there using object data source
control so since we want to achieve this
using object data source control
obviously we need you know the
respective data access layer which is
going to return this data back to the
application so obviously the first step
is to create employee data access layer
remember the table is you know the
tables containing employee related
information so let's go ahead and build
employee data access layer okay
so let's add this class file employee
data access layer see as to a project so
to visual studio let's go ahead and add
a class file and I'm going to call this
class file as employee data access layer
dot CS now look at this since we want to
display employee related information
look at the table we have employee name
gender and City columns so to represent
each employee we need a class with these
properties in the column names as
properties so let's go ahead and create
that employee class so I'm going to
create a class here public class and
let's call it employee and this class is
going to have the following properties
employee ID name gender and city I have
this already type just to save some time
and typing so all these are Auto
implemented properties so I have this
employee class now obviously to retrieve
that data and display it in the grid
view control using object data source
control we need a method which is going
to return list of employees so I'm going
to have this method public and I want
this method to return a list of employee
objects and I'm going to call this get
all employees so what is this method
going to do it's going
connect to the database you know execute
a query you know select star from TBL
employees against this table to retrieve
all the rows and then for each row
create an employee object and then add
it to a list and return it back to
whoever is going to call this okay so
pretty simple ad or dotnet code so let
me copy this and paste it there and then
we'll go over it so if you look at this
function what it is doing first of all
let's get rid of these compilation
errors we need to import some ad or
dotnet namespaces so system dot data and
we also need a system door data dot
secret alkaline and system dot
configuration now all these are ad or
dotnet namespaces so if you're new to ad
or net we already have a video series
recorded on ad or dotnet videos please
watch that tutorial alright so what does
this method doing pretty simple we are
creating you know a list of employee
object and then we are reading the
connection string from web config file
using that connection string we are
creating a sequel connection object and
then we are preparing a sequel command
object all we are doing here is select
star from TBL employee so we are going
to retrieve all the rows from that table
using and we are executed we are going
to execute this command using this
connection object open the connection
execute the command
and then whatever rules we get back we
loop through each row look at what we
are doing we are creating an employee
object and then we are retrieving the
employee ID and populating that with the
employee ID property of the employee
object singularly named gender and city
and then we are adding that employee
object to that list so finally what we
are doing after we finished looping
through each row we are returning that
list back to the caller so if you look
at the return type of this method its
list of employees and list employees is
of type list of employee and finally
this method is returning a list of
employees back so simple straightforward
static method get all employees so let's
actually
can with this into staticmethod alright
so with this object we should be able to
retrieve and display data in the grid
view control which is going to be pretty
straightforward so let's drag and drop a
grid view control and an object data
source control onto the waveform so
that's the grid view control let's auto
format that let's choose brown sugar as
the scheme let's drag and drop an object
data source control and configure that
as well
so object data source control configure
that choose your business object now
look at this for some reason it doesn't
show the employee data access layer
class here
that's because after we have coded that
class we haven't compiled the solution
so you need to compile your project once
so control shift B to build the project
on the status bar you can see build
succeeded now let me go back to webform
1 or aspx and click on configure data
source now we should see our business
object here so demo dot employee data
access layer demo is the namespace the
class is employee data access layer
click Next on the selected tab we should
see our method get all employees which
is going to return a list of employees
and I'm going to click finish now
okay so let's associate this object data
source control with this grid view
control so object data source one now
look at this we only have a select
method that's why I don't have an able
deleting option you know in this grid
view tasks pane okay now let's go ahead
so obviously now with this if we run the
project it's going to show that employee
related data within the grid view
control so object reference that's
because I have a different connection
string and web config file so let's
change the connection string so within
web config file the connection string is
DB connection string let me copy that
and paste that in our employee data
access layer alright
so now if we run we should be able to
display the employee related data within
the grid we control ok so it's still
trying to connect so there we go we have
the employee data there now let's go
ahead and add since we want to enable
the grid view to delete data we should
have
a method that can delete data you know
we give it an employee ID and that
should be able to delete a record with
that employee ID because look at this
when I run this you know it's going to
list all the employees actually let's go
to the webform and then run it now it's
going to list all the employees and then
we are going to have a delete button
next to this employee ID if with another
column when I click the delete button
you know we should delete the employee
with ID is equal to one so obviously
here employee ID is the primary key so
we need a method which is going to take
an employee ID as the parameter and
delete that row okay so let's go to the
employee data access layer now I'm going
to have another method here and that's
also going to be a static method public
static since this is going to be you
know a method which is going to delete a
row and it's not going to return
anything the return type is going to be
wired I'm going to call this delete
employee and obviously we need to pass
in a parameter I'm going to pass in
employee ID as the parameter so what
should this method do this method should
connect to the database and then execute
a command delete from TBL employee where
employee ID is equal to whatever we are
passing in okay so obviously we need a
you know the area dotnet code which is
capable of doing that so let me copy and
paste this there and then we'll go that
code so if you look at this code what we
are doing again the same idea we are
reading the connection string preparing
the sequel connection object and
preparing the sequel command look at
signal command what are we doing here we
are saying delete from TBL employee
where employee ID is equal to add
employee ID instead of dynamically
concatenated you know strings to build
our queries we are using parameterised
queries here which is going to avoid a
sequel injection attack so if you're new
to sequel injection attack please watch
the video on sequel injection attack so
this kind of parameterize queries are
going to prevent a sequel injection
attack so what are we doing delete from
TBL employee where employee ID is equal
to at the employee ID that's of a
parameter so
we'll have to supply a value for that
parameter and where do we get that value
from for this parameter whatever is
being passed into this method the
employee ID that's going to contain the
value okay so we have we are passing
that as a value to this parameter and
then finally adding the parameter to the
command object open the connection
execute nan query since this is a delete
operation obviously we will call execute
nan query okay so that's a simple static
method to delete employee all right now
let's rebuild our project once more and
then let's go back to our web form and
then reconfigure this object data source
control configure data source and then
that's our business object I click Next
so that's the select method but look at
this we have delete tab here so when I
click on the delete tab we should see a
method here delete employee okay and
it's taking a parameter into employee ID
so all you need to do is select that
method click finish you're done now when
we come to the grid view control look at
that I have this option enable deleting
so the moment I select that I see the
delete button there now we are done so
if I go ahead and run this now you know
it will display the employee related
data but then when I click the delete
button look at what's going to happen I
click delete button now again that's the
connection string problem it should have
changed that so let's go ahead and
change the connection string here the
connection string and web config file is
DB connection string not DB CS so let me
paste it there let's run it once again
so now when I actually click the delete
button you know it won't to delete the
row look at that I clicked on delete
button it's not deleting any row why is
that
that's because look at this the you know
when you click that delete button
you know the grid view is going to take
the grid view has to take the employee
ID of that row and pass it to this you
know delete employee method but it's not
doing that at the moment because we have
not told the grid view control which is
the primary key okay so basically the
way we specify that is by using data key
names property so this grid view control
has got an attribute called data key
names we have to specify that so we have
to set data key names is equal to
whatever is the primary key what is the
primary key of for our table employee ID
so I need to specify that so let me copy
that and paste it right there now if
your table has a composite primary key
then you can also separate that the
comma so for example in in some tables
you might have maybe first-name and
lastname the combination of them all
going to act as a primary key that's the
case then you separate them with a comma
if you have a composite primary key but
here we have just one column as the
primary key so I think that as employee
ID so now let me run this and see what's
going to happen so now since the visitor
gridcontrol knows of employee ID is the
primary key I click delete button look
at that it gets deleted as expected okay
now there are actually two ways to
specify this data key names property can
specify that in the HTML declaratively
here or you can also do that in code if
you wish to so look at that the data key
names property is the gridview level so
I can actually go into the code on the
page load I can say grid v1 dot data key
names property is equal to look at this
when I hover my mouse over this it's
actually a string array the data key
names so we need to create a new string
array of size 1
and I am going to specify that as
employee ID so here we are doing that in
code programmatically and again the
behavior should be the same except that
we are specifying data key names in code
rather than declaratively in the HTML so
I click delete button and gets deleted
all right on the slide you can find
resources phase B dotnet c-sharp and
sequence of interview questions that's
it for today thank you for listening
have a great day</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>