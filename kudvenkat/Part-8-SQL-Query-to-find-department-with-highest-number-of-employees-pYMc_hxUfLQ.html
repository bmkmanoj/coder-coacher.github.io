<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Part 8   SQL Query to find department with highest number of employees | Coder Coacher - Coaching Coders</title><meta content="Part 8   SQL Query to find department with highest number of employees - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/kudvenkat/">kudvenkat</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>Part 8   SQL Query to find department with highest number of employees</b></h2><h5 class="post__date">2014-06-14</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/pYMc_hxUfLQ" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">this is part 8 of sequence of interview
questions and answers video series in
this video we'll discuss writing a
sequel query to get the department name
that has got the highest number of
employees let me explain what I mean we
have two tables here departments and
employees departments table has
Department ID and Department name
columns in the employees table we have
employee ID employee name and department
ID columns Department ID column here is
the foreign key column referencing
department ID from departments table now
we need to write a query based on these
two tables which is going to give us the
name of the department that has got
highest number of employees if you look
at the sample data that we have at the
moment IT department is the one which
has got highest number of employees mark
John Mike all of them belong to
Department one which is IT department so
there are three employees with an IT
department at the moment and HR and
payroll departments have got one
employee each so the query that we are
going to write should return the IT
department name to write this query it
will be extremely helpful if you have
the knowledge of group I and joints in
sequel server we discuss these concepts
in detail in sequel server tutorial for
beginners video series so if you're new
to those concepts I strongly recommend
to watch those videos first now let's
flip to sequence of a management studio
I have already created the required
tables here is the sequel script that
can do it I'll have the script available
on my block in case you need it now
let's fire up another query editor
vendor so we want to select department
name from employees table and we need to
join employees table with departments
table and we need to specify the join
condition so what's the common column
between the two tables Department ID so
take the department ID in employees
table and join that with departments
table Department ID column so what do we
want from those two tables we want the
department name so department name is
going to come from departments table and
let's also print out the number of
employees that we have got within each
department so let's use the aggregate
function
point of star and let's give this column
an alias let's call this maybe employee
count so now since we are using the
aggregate function here we need to group
the employees by Department so let's go
in group by department name okay so now
when we execute this query as you might
expect we will get the department name
and the total number of employees that
each department has got so here HR has
got one employee ID with three employees
and payroll with one employee now this
query should only return as ID
Department name so for that purpose what
I'm going to do is apply the order by
clause and then we are going to order by
this column employee count in descending
order so now if we execute this query
the department that has got the highest
number of employees is the first row so
what I'm going to do now is select top
one department name and count of star so
when we execute that look at that we get
the first row so that is only the IT
department but here we also have the
employee count let's say that
interviewer is saying I don't want
employee count I just want the
department name so how we are going to
achieve that let's get rid of this count
of star from the Select list but the
moment we do that and then when we try
to execute this query we will get a
compilation error it says invalid column
name employee count so you don't have
employee count here so instead what you
can do is just use the aggregate
function here count of star de sá let's
execute that look at that we get the
department which has got the highest
number of employees that's it for today
thank you for listening have a great day</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>