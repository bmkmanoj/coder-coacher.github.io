<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Drilldown and display hierarchical data in gridview without using datasource controls - Part 36 | Coder Coacher - Coaching Coders</title><meta content="Drilldown and display hierarchical data in gridview without using datasource controls - Part 36 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/kudvenkat/">kudvenkat</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Drilldown and display hierarchical data in gridview without using datasource controls - Part 36</b></h2><h5 class="post__date">2013-03-29</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/1YXfdPHWkLM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello welcome to precision technologies
I am venket this is part 36 of asp.net
grid-view tutorial in this video we'll
discuss about drilling down and
displaying hierarchical data in grid
view without using any data source
controls in part 34 we discussed about
doing exactly the same thing using
sequel data source control and in part
30 if I we discussed about using object
data source control please watch part 34
and 35 before proceeding with this video
now to display continents countries and
cities data we need three grid view
controls so let's flip to visual studio
let's drag and drop three grid view
controls onto this waveform so one two
and three now let's set the scheme for
these three grid view controls to brown
sugar let's do that for the second grid
view control and finally for the third
one all right now if you look at the
cities I mean the continents could be
controlled it has got three columns
within that now I'm going to use two
template columns and one bound column
for this credly control so let's flip to
visual studio click on edit columns and
then we want to template fields so one
template for your second template view
and then one bound fear okay now since
we are specifying what fields we want
within the grid view control you know we
don't want the fields to be
auto-generated so I'm going to uncheck
this auto generate fuels okay now the
first template real doesn't have any
header text but the second one has got
continent ID as the header text so I'm
going to go to the template reel and set
that to continent ID and the Third Field
has we had a text as continent name and
that's the bound field so let's set the
header text to continent name and we
want this bound field you know to bind
to continent a name property of the
continent object that comes out of
continent data access layer now we
discussed about building these data
access layer classes in the previous
session so please watch part 3 5
you know if you want to know about those
data access layer fly in all classes all
right so we want to bind to continent
name property okay so this bound fill
let's click OK now at this point if you
look at this we have you know two
template fields here for which we'll
have to specify the templates so click
on edit templates now obviously look at
this the first column should display a
link button on which the user can click
to select a row so we need link button
you know in the first template Rio so if
you look at this now we are specifying
the item template for the first template
real and we want a link button there so
let me drag and drop a link button and
we want the text on that link button to
be select so I'm going to change that so
go to the properties of that link button
and change the text to select and
another thing important thing that we
need to set here is the command name so
I'm going to set this command name look
at this when I click this link button we
want to select the countries so I'm
going to set you know the command name
to select countries for that link button
ok later we'll see how we will actually
use that property so for now let's set
it this to select countries okay now and
then in the second template field we
need a label control which can display
the continent ID so let's go ahead and
select the second template field which
is continent ID and I want to change the
item template so select item template
and we want a label there ok
so let's edit data bindings for this
label and we want to set the text
property to basically we want to bind
you know this label to continent ID
property of the continent object so
that's what I'm going to do here so text
property of this label should bind to
continent ID property that's it click ok
now we can end the template editing so
we are done configuring the grid view
control okay so now when the wave form
loads okay if it is not you know a
postback meaning if it is the initial
get request what we want to do we want
to display the continents grid view you
know so to retrieve the data for
continents grid B we have continent data
access layer so let's call that so grid
b1 dot data source is a equal to
continent data access layer and it has
got a method get all continents which is
going to return a list of continent
objects which is going to act as the
data source for our grid view one
control so finally call grid v1 dot data
bind ok that's it at this point if we
run the application as you might expect
when the webform initially loads it
should show all the grid view I mean all
the continents within the first grid we
control alright so now let's actually
configure the second grid view control
now if you look at the second grid view
control we need four columns there you
know the first two columns I'm going to
convert them to template fields and the
second two columns will be bound fields
so let's go ahead and add you know to
template fields and to bound fields for
this green tree control and to do that
click on the grid View tasks pane click
on edit columns and again we don't want
the fields to be auto-generated so I'm
going to uncheck this checkbox add to
template fields and to bound fields and
obviously the first template field just
like you know continents grid view
control we need a link button and we
don't have a header text there okay so
we loaded the templates in just a bit
and then the second column in the second
grid view control should display a
header text of country ID so I'm going
to set the header text here to country
ID and the third column within the grid
we control should by you know have a
header text of country name and the
fourth one continent ID so let's set the
header text to
country name and since this is a bound
field we want to bind this to country
name property okay and then finally
continent ID and this should bind the
continent ID property of the country
object so let's specify that as the data
field okay so we are done let's click OK
now we need to edit templates because
you know the first one should have a
link button and the second template
field should have a label to display the
country ID so let's flip to visual
studio let's set it templates so
obviously the first one should be a link
button so this is the first template
reel so let's drag and drop a link
button and look at this when I select
arrow within the second grid we control
we want to select all the cities
belonging to that so
let's specify a command name for this
link button so right click on the link
button go to the properties and let's
specify the command name and I'm going
to call this select cities okay and
again we want the text on that link
button to be select so let's change the
text property as well okay and then we
need to edit the temp item template for
in a country ad column so let's drag and
drop a label control there and we want
to edit data bindings we want you know
the label control within the item
template of the second template field to
be binding to country ad property of the
country or object so to do that so we
are binding the text property to country
ID property
that's it click okay
let's end template editing so we are
done configuring the second grid we
control now for the third grid view
control we don't have to do any
configuration because we don't want you
know select buttons or anything in that
we just want the fields to be
auto-generated and we display them in
the third grade view control okay so at
this point now obviously whenever you
know look at this as we run this right
now and when I click you know the select
button in the first country control
nothing is going to happen because we
haven't told the grid we control what to
do when we click on that row so
obviously to do that we need to generate
the event handlers so let's go to the
properties of good v1 control click on
the event haikon now whenever we select
a row you know obviously an event is
raised row command event is raised okay
so I'm going to generate an email
handler for that so here I have the
event let's double click that so rou
command event you know is generated for
could be one let's do the same thing for
grid view too so route command alright
so what should happen when we select a
row within the first grid we control
okay when I select a continent we need
to invoke these countries data access
layer and retrieve all the countries
belonging to that continent obviously we
will do that with in grid v1 underscore
row command event handler okay and to
speed things up I have already typed
this so let me copy that and paste it
here so now if you look at this code
it's pretty straightforward what are we
doing so when I select this row remember
we have set the command name a property
of the link button to select the
countries so in webform one for grid
view one control the link button that we
have in the template field look at the
command name property we have set it to
select countries and here are we are
checking if you dot command name is
equal to select countries then what we
need to do okay on whatever row we have
clicked we need to find out the
continent ID take that content
tidy and then pass it to countries data
access layer to retrieve countries
belonging to that continent and then
bind that list to the second grid view
control which is what we are exactly
doing here so we are finding you know
the row index upon which the user has
clicked the Select link button ok and to
do that we are using the you know this
grid view command event arguments object
so e dot command source what is he
command so is going to be the link
button where did the user click on the
link button so ye dot command source
will return as a link button and then
obviously look at this command source is
returning it as an object but we know
it's a link button so we are typecasting
it to the link button and then on that
we're using this naming container
property which is going to return the
grid view row and then out of because
the link button here is present in this
grid view row of that which we control
ok and we want the row index of that row
in which the user has clicked the select
button and to do that we are actually
using the row index property which is
straightforward ok so this line is
basically to retrieve you know the row
index in which the user has clicked the
select button and once we have the row
index things are pretty easy ok in that
row in which the user has clicked the
select button
we need to retrieve the continent ID and
to do that I am simply saying grid v1
dot rows and then I'm using that row
index within the rows collection use the
row index to find out which row he has
clicked and within that row find the
control with label continent ID look at
this this is the reason together I am
using a find control method to find the
label which has got an idea of label
continent ID and if you remember within
the first grid we control this continent
ID column is a template real and we have
specified you know a label here and it
has got an ID it's label 1 ok
so let's actually use label 1 instead of
lvl continent ID so I
going to put that label one there so
from that label one retrieve the
continent you know basically here we are
retrieving that label and then we are
using the text property of that label
control okay and then converting that to
integer and then retrieving the
continent ID so these three lines here
are basically used to retrieve the
continent ID of the row on which the
user has clicked the select button and
once we have that it's pretty
straightforward
you know invoke the country's data
access layer it has got a method called
get countries by continent and we are
passing that continent ID okay and then
whatever is returned we are binding that
to grid view to control and calling you
know data bind finally okay pretty
simple and straightforward now if I run
this at this time when I select a row
within the first grid view control we
should have you know the countries
populated which makes sense okay now we
need to do the same thing for the third
grid view control and again the code is
going to be pretty much straightforward
so let me copy this and paste that here
so again it's it's it's the same piece
of code but it's a different degree be
controlled when I select a row in the
countries grid view control all we need
to do is retrieve the country ID and
then pass it to cities data access layer
okay and that's what we are exactly
doing here so if u dot command name is
equal to select cities you know the
first line is retrieving the row index
and the second line is retrieving the
control which displays the country ID
now if you remember in the second grid
we control okay within the second
template view the label ID is labeled
two so let's use that ID so we are
finding that label control and then we
are using the text property of the label
control to retrieve the text which is
going to be the country ID since text is
a string property
I mean string type we need to convert
that to an integer so we have the
country ID we pass that to get cities by
a country ID method retrieve all the
cities and then bind that to third grid
view control pretty simple let me run
this now so
everything should be functional as we
expect it to be you know all the three
grid we control should work so I select
a continent all the countries are
displayed I select a country and look at
this in India that cities are displayed
but there is a slight problem here the
first problem is look at this the row is
not selected meaning it doesn't show me
any visual indication of which row is
selected in the grid we control but look
at the slide here when I click the
select button the robe gets you know the
selected row gets a different color so
how do I make that row get that color
it's pretty simple all you need to do is
sew in grid b1 when I select a row I
know the row index upon which the user
has clicked the select button to achieve
that all you need to do is increase v1
dot select row you know call this method
and pass it the row index on which the
user has clicked you know the select
button and we know we want to select
that row so let me pass that row index
there and now and let's do the same
thing for the second grid view control
as well so whenever somebody clicks the
select button on the second grid we
control we want that row and on which
they have clicked to be selected by
default
okay so grid view - dot selective row so
now that problem should have gone so I
select Europe look at that it gets
selected
I select France in France selectively so
I have a visual indication now ok so
Paris etc but there's another slight
problem here look at this at the moment
in the continents I have Europe selected
and in countries I have France selected
ok and obviously cities are the cities
in the France country now let me change
the continent to Asia ok so I selected
Asia continent the country's grid view
is displaying it correctly India Japan
and Malaysia but look at this in the
countries Japan is selected but look at
what is being displayed in cities its
Paris you know all the cities that are
present in France because France was
previously selected this grid view
control the third grid view control dint
flourish itself when I have changed the
continent okay so how do we solve this
problem again it's pretty
straightforward to do that it may
actually copy this code and paste it
here
so when the selection and the continent
changes you know what should we do when
the selection in the continent changes
I'm checking okay is there any row
selected in grid view to at all if it is
selected in a look at this
if grid view two dots selected value if
that is not equal to now then what we
want to do basically we want to retrieve
that selected value from the grid view
control in this case Japan and then
obviously selected value is going to
return that as an object so we need to
convert that to integer so convert that
integer and pass it to this method get'
cities by country ID which is going to
return all the cities belonging to that
country and what we want to do with them
we want to bind them to the grid view
three control so basically what we are
doing is when I select a continent Here
I am refreshing this grip you know the
city's grid we control if at all if
there is any country selected within the
countries could be control that's our
second grid we control okay so now let's
go ahead and run this
we are going to have slight problem here
we'll fix that so I selected this one
look at this data Keys must be specified
on Crede v2 before selected keys can be
retrieved since I am using selected keys
property here are ok selected value
property we need to specify the data key
names property ok so what is the data
key name going to be it's going to be
you know for the first grid view
controller is going to be continent ID
because that's the primary key in TBL
continent stable and for the second grid
view control it's going to be country ID
so I mean it's enough if we specify it
just for the second grid we control at
this time so data key names is equal
to-- it's going to be country ID all
right let's run this now so I have
Europe selected I have France selected
let's let me change the continent look
at that France is selected all the
cities and plants are displayed I am
refreshing this to Asia and look at this
Japan is selected but I have the cities
now within Japan okay on this slide you
can find resources phase B dotnet C
sharp and single silver interview
questions that's it for today thank you
for listening have a great day</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>