<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Part 24  Deleting database records using post request in mvc | Coder Coacher - Coaching Coders</title><meta content="Part 24  Deleting database records using post request in mvc - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/kudvenkat/">kudvenkat</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Part 24  Deleting database records using post request in mvc</b></h2><h5 class="post__date">2013-05-26</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/G4i3-87cavk" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">this part 24 of asp.net MVC tutorial in
this video we'll discuss deleting
database records using post requests and
showing the client-side JavaScript
confirmation dialog box before deleting
data please watch part 23 before
proceeding with this video at the moment
when we click on this delete length we
issue a get request and that employees
row will be deleted in the previous
session we discussed why it's bad to
delete data are using get requests in
this video we're going to replace this
delete link with this delete button and
once I click on that delete button we
want to display a client-side
confirmation dialog box to the user
asking if he really wants to delete data
once he clicks on the ok button then
we'll post the form to the server and as
part of the post process we will delete
that employees row on the other hand
when I click cancer we don't want the
form to be posted and we don't want to
delete employees data let's see how to
implement that at the moment if you look
at the delete action method which is
actually deleting employee's data it's
not decorated either with HTTP GET or
HTTP POST attribute so by default this
action method is going to respond to the
get request and we don't want that to
happen we want to prevent this
controller action method from responding
to a get request and to do that I'm
going to decorate this with HTTP POST
attribute with this change let's go
ahead and run this and navigate to index
action and then once I click on that
delete link you know we get this error
the resource cannot be found and that's
understandable because we don't have a
controller action method with named le
that's going to respond to HTTP GET
request we get that error because we
have a delete action method here but
this only responds to an HTTP POST
request ok now the second step is to
actually replace this delete length with
this delete button so let's flip to the
index view and then with an index view
this is the piece of code that's
actually rendering these links here edit
details in Delhi
so instead of details lead and detail
delete links there I just want a delete
button
so let's actually get rid of these two
action links from here and then I'm
going to use an HTML helper begin form
now if you are wondering why we need
this HTML helper this helper is going to
generate a form tag for us now look at
this when I click this delete button we
want to post this form so I need a form
and to generate the form tag I can use
this HTML helper begin form and then
this helper has got several overloaded
versions I'm going to use this
overloaded version where we can specify
the action name that we want to invoke
and the controller within which that
action is present and if at all if that
action method has got any parameters we
can pass them there okay so I'm going to
specify the action method as delete and
this action method is present within
employee controller and if you look at
this delete action it has got some
parameters so within employee controller
this delete action has got an ID
parameter and we need to supply a value
for that and where is that value going
to come from look at that I'm using this
property of this item object what is
this item object that is nothing but our
model object so what is our model for
this view nothing but our employee
object okay so this employee object has
got ID which is going to be the ID of
the employee so I'm going to pass that
to this delete action method so I'm just
going to copy that and then specify it
here okay so within this form tag we
need that button so I'm going to use
that using here so within this form we
need this button delete button there and
to get the delete button I'm going to
use this input
type is equal to we want that submit
button and the value on that submit
button is going to be delete okay so
with this change let's go ahead and run
this and navigate to employee controller
index action and look at that we get our
delete button now if I right-click on
that and view page source notice that
after the edit link okay so after the
edit link we have this delete button
okay
so input type is equal to submit value
is equal to that so a delete button and
notice that that delete button is
actually present inside this form tag
okay and why did we get that form tag
that's because we use this HTML helper
begin form and one drawback at the
moment is that it's not properly aligned
okay I want the alignment like this and
to fix that I'm going to move this code
around a bit so I'm going to take this
piece of code I'm going to get rid of
that add symbol there and then I'm going
to move that code just after the for
each loop okay and then I'm going to
take this closing bracket and then move
it after the closing tag of TR okay and
to properly format all this HTML I'm
going to select all the HTML by pressing
ctrl a and then + ctrl K D so this will
properly format it for us okay so with
this change let's actually go ahead and
run this and let's navigate to employee
controller index action look at that now
it's properly formatted now at the
moment when I click on this delete
button we're not going to get this
client-side confirmation okay let's see
if it actually gets deleted so John's
record there I click on delete
so John's record is deleted but we also
want the client-side confirmation and to
get client-side confirmation it's very
easy all we need to do is inject some
JavaScript on
that button click so I have this input
type is equal to submit values equal to
delete already all I need to do is
associate this javascript code with
onclick attribute so on click is equal
to by using the JavaScript confirm
function and this confirm function inner
returns true or false depending on
whether you clicked on ok or cancel
button when I click on OK this function
is going to return true so when it
returns true on click return true on
click is equal to return true it's going
to post the form to the server and then
whatever that button has to do it and do
that ok now on the other hand when I
click cancer this function is going to
return false
ok on click is equal to return false so
it's not going to post that form to the
server and nothing will happen but then
look at this here we are also having a
message are you sure you want to delete
record with ID is equal to one two or
three depending on the employee record
where you click the delete button so how
are we getting the employee ID again by
using that item object what is item
object nothing but the employee object
okay and this employee object has called
properties like ID name gender etc so
you can either use ID or name depending
on what message you want within that
client side confirmation box okay so
let's go ahead and associate that on
click attribute to our button so here
I'm going to specify on click so I'm
going to be used return confirm
JavaScript function and we can pass it
any message that we want are you sure
you want to delete
record with ID is equal to whatever is
the ID how do I get access to ID I can
use this item object right here okay so
I'm going to take that item object and
then obviously now I have to flip to C
sharp mode and to do that I can use that
@ symbol
item dot ID so it's as simple as that if
you want name of the employee there
simply say name item dot name but let's
use item dot ID and let's go ahead and
run this now and let's navigate to
employee controller index action and
let's click on delete look at that are
you sure you want to delete record with
ID is equal to three I click cancel the
form is not posted nothing happens on
the other hand I click on delete click
OK the form will be posted to the server
and we are deleting that employees
record as part of the post to process on
this slide you can find resources face
be dotnet c-sharp and sequence of
interview questions that's it for today
thank you for listening have a great day</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>