<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Part 13   Table splitting in entity framework with code first approach | Coder Coacher - Coaching Coders</title><meta content="Part 13   Table splitting in entity framework with code first approach - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/kudvenkat/">kudvenkat</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Part 13   Table splitting in entity framework with code first approach</b></h2><h5 class="post__date">2014-05-27</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/l9QXArMPyHc" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">this is part 13 of entity framework
tutorial in this video we'll discuss the
concept of table splitting and entity
framework with code first approach we
discuss table splitting with database
first approach in part well in this
video we'll be working with the same
example that we worked with in part 12
so please watch part well before
proceeding in general mapping multiple
entities to a single table is called
table splitting in this video we'll disk
is mapping these two entities that is
employee and employee contact detail
entities to this employees table let's
see how to achieve this using the code
first approach let's flip to visual
studio so this is the same project that
we worked with in the previous session
so far what I have done is deleted the
area dot net entity data model that we
have generated using the designer and I
have also removed the connection string
from web config file so first to this
project let's add a class file but
before that I should mention this
platform one dot aspx file and its code
behind have not changed in any way this
is the same thing as what we have in the
previous session so let's add to this
project a new class file
let's call this employee dot cs and this
class is going to have these four
properties so let's copy and paste them
within the employee class employee ID
first name last name gender and let's
add another class file to this project
let's call this employee contact detail
dot cs and this class is going to have
these properties employee ID email
mobile landline another thing that we
need to do here is establish in
navigation property from the employee
entity to employee contact detail entity
and let's name the property employee
contact detail along the same lines
employee contact detail entity is going
to have a navigation property to
employee entity
all right the next step is to add a
dbcontext class and for that purpose
let's add a new class file and let's
call this employee DB context dot CS and
this class needs to inherit from the DB
context class which is present in
systems or data entity namespace so
let's go and bring that in first and
then make this class inherit from DB
context class and this employee
dbcontext class is going to have a
public property which is going to return
DB set of employee instances and let's
call this employees so this employee
dbcontext class is going to override a
method that is present in the base class
that is on model creating method and
this is where we tell you know what we
want to map to what so we want to map
both employee and today and the employee
contact detail entity to a table called
employees ok so let's see how to do that
and this is how we do it
notice that we are mapping employee
entity to employees table and the key
being employee ID property
similarly here up you're mapping
employee contact detail entity to
employees table employee ID property
being the K okay and the last line here
is establishing the referential
constraint in part well we have seen how
to do that using the designer notice
that we have specified the principal is
employee and the dependent is employee
contact detail okay and the same thing
if we have to do it in code we are use
has required and with required principal
properties notice that here you know the
principal is employee okay an employee
contact detail is dependent let's copy
and paste this code with an on model
creating method so let's copy this code
from here
let's format this a little okay it's the
same code that we had on the slide the
next step is to include the connection
string within the web config file so
let's go ahead and copy this connection
string and paste that within the
connection string section and if you
notice here we have specified the name
of the databases sample and if you
already have the sample database so
let's go and delete the database first
and then when we run this webform one
dot aspx you know it should
automatically create the sample database
create employee's table you know both
employee and employee contact media
should be mapped to that table
so first let's build this project to
make sure we don't have any compilation
errors so bill succeeded let's go ahead
and run this webform and we don't have
any code in page load so nothing will
happen so let me check this box and then
click this button the web form itself is
not going to display any data because
the employee's table that is going to be
created will be empty basically so now
let's flip to sequel server management
studio refresh this and there we go we
have this sample database and if we
expand this we should have the
employee's table there now let's execute
this insert script here to populate the
table with some test data so we have
some test data right now so let's go
ahead and click this button but before
we do that let's actually fire up sequel
profiler and then look at the queries
that are generated so let's use windows
authentication
okay the trace is running now let's go
and click this button let's go back to
sequel profiler look at the query that
is generated now since we mentioned I
mean since we have checked that checkbox
include contact details all the columns
are retrieved employee ID first name
last name gender email mobile and
landline from employees table let's
actually uncheck the checkbox and then
click this get employee data notice that
we only have first name last name gender
displayed but let's look at the query
look at the query you know only employee
ID first name last name and gender
column values are retrieved from the
database alright that's it for today
thank you for listening have a great day</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>