<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Warn user before leaving web page with unsaved changes | Coder Coacher - Coaching Coders</title><meta content="Warn user before leaving web page with unsaved changes - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/kudvenkat/">kudvenkat</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Warn user before leaving web page with unsaved changes</b></h2><h5 class="post__date">2015-03-12</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/BYUbDMHP3TU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">this is part well of JavaScript with
asp.net tutorial in this video we'll
discuss how to warn the user before
leaving web page with unsaved changes
let's understand this with an example
here is what we want to do we want to
have a webform with the textbox control
and a Save button when this waveform is
first loaded the Save button must be
disabled as there is nothing to save on
this form as we start to type in the
textbox control the Save button must be
enable because now there is some data to
be saved within the textbox control so
at this point if we try to close the
browser or refresh the page by hitting
f5 key or if we try to navigate to
another page by changing the URL in the
address bar then we should get a warning
message similar to this stating that we
have unsaved the data on the page if we
have some data to save in the textbox
control and when we hit the Save button
the data should be saved and when the
page reloads the textbox should be empty
and the Save button must be disabled if
there is nothing to save within the
textbox control and when we try to close
or refresh or navigate to a different
URL no warning message should be
displayed because there is nothing to
save so this functionality is very
similar to what we have in facebook when
you login to Facebook and when you type
something into the post textbox and if
you try to close the browser without
posting that message you will get a
warning message similar to this so let's
see how to implement this functionality
within asp.net webforms application so
let's flip to visual studio let's drag
and drop a text box control first we
want this textbox control to be
multi-line text box so I'm going to set
text mode to multi-line let's set rows
equals 5 and columns equals 30
let's include two brake elements and a
button control we want the text on the
button to be saved and when the webform
is first loaded we want the button to be
disabled so let's set disabled attribute
to true and then let's flip this
waveform to the design mode let's double
click on this button control to generate
the server-side click event handler so
within this click event handler we
usually will have our ad or dotnet code
to save the data to the DB and then once
we have saved our data to the database
we want to empty the textbox so I'm
going to set the text box to an empty
string now when this waveform reloads
you know after we save the data to the
database and when the waveform reloads
since we have said this disabled
attribute to true the button will be
automatically disabled anyway let's
include a section for script let's
create a variable let's name this
changes saved and let's initialize this
to true let's write a function now let's
name this has pending changes and inside
this function changes saved equals
document dot get element by ID and we
want the ID of the textbox control dot
value dot length double equals zero well
this is what this code is doing in just
a bit
so document dot get element by ID we
want the button control as well button
one don't disabled equals whatever value
we have in changes saved variable so
what's going on here so this is
basically a boolean expression this is
going to rip you a that
Falls depending on whether we have
characters or not within the textbox
control if the length property returns
zero then this expression is going to
return true that means we don't have
anything within the textbox control to
save so change is saved will be true
there's nothing to save right so if
change is saved is true then we want the
button to be disabled so that's why we
are setting disabled equals change is
saved so if the button I mean if change
is saved is true then the button remains
disabled because there is nothing to
save on the other hand if length is
greater than zero then that means there
is something with no textbox control so
this expression is going to return false
if it returns false this variable will
have that value false and disabled
equals false meaning the button will be
enabled okay and we want to call this
function on key up event of the textbox
control so on key up equals has pending
changes now when we try to close the
browser there is an even that is fired
window dot on before unload we want to
write some code to respond to that event
so when the dot on before unload equals
we want to execute a function so inside
this function if not change is saved
that means if we have something to
change then we want to return this
message to the user you haven't saved
your changes right so let's go ahead and
test this let's view the page in the
browser so look at this when the webform
first loads the text box is empty the
button is disabled and since we don't
have anything to save when we close the
browser what's going to happen this
event will be fired right so when this
even fires this variable is checked and
if you look at this variable we have
true
if not of true that expression will be
false that means it's not going to
return this message and the browser will
silently close look at that when I close
the browser it silently closes without
any confirmation let's reload the page
now look at this as we start to type
into the text box the button is enabled
now okay so since we have typed some
characters within the textbox control
this variable will now be false because
we have some data within the textbox
control and we haven't saved it yet now
if this is false and when we try to
close the browser this event is fired so
it comes here it checks okay if not
false that will be true and when that is
true we get this message look at that so
when I close the browser we get the
message are you sure you want to leave
this page and we have two options leave
this page or stay on this page when I
select stay on this page we are going to
stay on the page and we don't lose our
changes similarly when I try to refresh
this page you can refresh this browser
either by pressing f5 key or simply by
you know clicking in the address bar and
then hitting the enter key look at that
we get the same message again and when
will select stay on this page we stay on
this page similarly when we try to
navigate to a different site I again get
the same message when I select leave
this page you know we will be redirected
to delcom now let's reload this page now
when we have some data within the
textbox control to save and then when we
click this Save button what should
happen that data should be saved to the
database but look at what is going to
happen we are actually getting this
message again are you sure you want to
leave this page actually when we click
this Save button we don't want this
message to show up and the reason this
message is showing up because
technically we are leaving the page when
the page post back and at that point
this even is raised and since we have
data in the textbox control this
variable will be false and
that returns true so it's going to
return that message but what we want to
do is when we click the Save button we
want to suppress this message so how are
we going to do that using a JavaScript
function again now when we click this
Save button there are two click events
client-side click event and the server
side click event on the client side
click event what we are going to do is
simply set this variable to true so
let's write that function function on
submit client click so inside this
function we are going to set changes
saved equals true and then we will call
this function on client click of this
button on client click else that
function alright so let's go ahead close
this page and look at this when we type
something and then when we click Save
button now we don't get the warning
message the page post back reloads the
text box it's empty the button is
disabled and here is the code that we
have just discussed thank you for
listening and have a great day</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>