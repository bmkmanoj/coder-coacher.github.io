<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Check if username exists in database with ajax | Coder Coacher - Coaching Coders</title><meta content="Check if username exists in database with ajax - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/kudvenkat/">kudvenkat</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Check if username exists in database with ajax</b></h2><h5 class="post__date">2015-06-10</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/5XYXVYoqWAo" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">this is part 65 of jQuery tutorial in
this video we'll discuss how to check if
user name access in database using
asp.net web service and jQuery AJAX here
is what we want to achieve as we start
to type in this username text box and
when the number of characters in the
user name is equal to a greater than
three then we want to issue an ajax call
to check in the database table if that
user name is already in use if the user
name is already taken then we want to
display a message stating user name
already in use if the user name is not
yet taken then we want to display a
message stating user name available so
let's see how to achieve this using
asp.net web services and jQuery AJAX so
the first step here is to create the
database table which I have already done
so here is the create table script the
name of the table is TBL registration
this table has got two columns ID and
username i've also inserted two user
names pamela and Sarah Baker so at the
moment within this table TBL
registration we've got two user names so
the next step here is to create a stored
procedure that's going to return 1 if
the username exists otherwise 0 so 1 for
true and 0 for false so let's go ahead
and hear that stored procedure create
procedure let's call this SP username
exists and we want to pass the username
that we want to check as a parameter and
the data type of this is going to be in
we're care of 100 characters as begin
and end and here within the body I'm
going to create a variable I'm going to
name it count anybody will understand
the purpose of this variable now I'm
going to issue a select query select
count of ID from TBL registration is the
name of the table where username equals
@ username
okay and I'm actually going to store
that count in this variable at account
so I'm going to say select at count
equals count of Heidi from TBL
registration where username equals at
user name and if app count is greater
than zero what does that mean that means
the username already exists in the
database it's already in use in that
case we want to return true so let's go
ahead and select one and let's give this
a column name let's actually call this
as username exists okay
else if the count is not greater than
zero then we know that the user name
does not exist so in that case let's
select zero okay
so let's go and create the stored
procedure now in the database table we
have a user name called Pamela so let's
go ahead and pass this to the stoop
seizure so what should this stored
procedure do it should return true the
username exists that is one let's see if
that's what we get look at that username
exists we get one on the other hand we
don't have a user called Pamela a so
when we execute this we should get zero
indicating that the username does not
exist all right now let's go ahead and
create an asp.net web service which is
going to call this stored procedure so
let's flip to visual studio here I have
an empty asp.net web application project
in the web config file
I have already included a connection
string to our sample DB database which
is called that table TBL registration
and to this project let's go ahead and
add a DEP service and let's call this
web service registration service
and we want the SEP service to be called
from script so I'm going to uncomment
this attribute system dot web dot script
dot services start script service and
this method is not going to return
anything and I'm going to call this
function username exists and what is
this function going to do it's going to
call of a store procedure ok so now we
need to write some ad or dotnet code so
we need to bring in some ad or
namespaces so we need system dot data we
need system dot data dot sequel client
and we need system dot configuration so
let's go ahead and read the connection
string from web config file so within
our web method I'm going to create a
variable and let's use the configuration
manager class and read the connection
string so the name of the connection
string in web config is BBC s we want
the connection string okay so let's go
ahead and create a sequel connection
object sequel connection con equals new
sequel connection and let's pass our
connection string let's go ahead and
create a sequel command object sequel
command equals new sequel command and
what we want to do is actually execute
the stored procedure SP username exists
so let's go ahead and pass the name of
the stored procedure and we want to
execute this command using the
connection object that we have just
created and since this is a stored
procedure we have to specify that using
the command type property and this
stored procedure has got a parameter
user name at user name so we need to you
know pass the parameter to the stored
procedure so let's go ahead and
associate a parameter to the command
object so command or 3 meters dot add
I am going to add a new sequel parameter
object and we need to populate two
properties parameter name and the value
so parameter name equals the name of the
parameter is at username and value equal
so where is the username going to come
for this method we are going to pass the
username from our HTML page to this web
method and in the form of a parameter so
I'm going to call this username okay
so let's pass this as the value all
right so we associated the parameter
with the command object now let's go
ahead and open the connection and let's
execute the command so what value are we
expecting we're expecting a single value
from the stored procedure either 0 or 1
right so command dot execute I'm going
to use scalar method execute scalar and
what does this method returns it returns
an object but we know that we are
expecting a boolean so we can safely
convert you know whatever result we get
back to a boolean one to true zero to
false because that's what the stored
procedure is going to return so now to
store our result I'm actually going to
create a variable here so let's call it
and username in use and let's initialize
that to false and I'm going to populate
this variable with the result that we
are going to get after executing the
stored procedure but what does this
function return it returns an object we
want to convert this to a boolean so I'm
going to use the convert class and
convert that to boolean right ok so now
what we want to do is actually we want
to return two things back to the you
know script which is going to call this
a web service method actually I'm going
to add a class in a bit you will
understand the purpose of this class so
let's go to an addict class
let's name this registration dot CS okay
and this class is actually going to
contain two properties two public
properties so the first one is going to
be of type string and that's going to be
username and let's have the default get
and set accesses and the other property
is going to be user name in use so this
property is going to be boolean it
returns true if the user name is in use
otherwise false so what I'm going to do
is make this the return type you know
from this web service so we're going to
return an object of this type which will
contain username and whether if the
username is in use or not all right so
here I'm actually going to create an
instance of that class registration
let's call the object registration
equals new registration and registration
dot user name equals whatever user name
this method is receiving as a parameter
and registration object dot username in
use the value of this is going to be
whatever we get back from the database
and what do we want to do with this
object we want to see realize that to
Jason and then write it to the response
stream so I'm going to use JavaScript
serialize a class and where is that
class present that is present in system
dot v dot script dot serialization
namespace so the name of the class is
JavaScript serializer let's call it J s
equals new JavaScript C divisor and this
object has God serialize function to
this we are going to pass our
registration object and what do we want
to do with that serialized string we
want to write it to the current response
stream so context dot response dot write
whatever JSON string that we get back so
pretty straight for
would webservice method here so let's go
and build the solution and let's view
this web service in the browser so at
the moment we should be able to you know
invoke this web service and get a JSON
string back and that Jason strain should
contain two properties the username and
whether if that username is in use or
not if you look at this table this user
per meal is already in use so let's copy
that username and paste it right here
and let's invoke the web service
look at that username is Pamela and that
username in use is true on the other
hand if we try to pass let's say Pamela
a which does not exist you know Pamela a
username in use false okay so we have
the web service ready now let's go ahead
and add an HTML page I have in fact
already added the HTML page and I have
also included the HTML to get this UI so
we have that little text username a text
box so we have that little text and a
text box and then a div element to
display you know the result that is
whether the user name is in use or not
and all of this up is present in a table
I'll have all this HTML and code
available on my blog in case you need it
alright so within our script section we
have the ready function wired up so now
when should all this happen this should
happen whenever we start to type within
the text box and then the number of
characters is greater than or equal to 3
so we want to make use of the key up
event of this textbox so let's go ahead
and find this text box the ID of the
text box is txt username so I'm going to
use the jQuery ID selector find the text
box and I'm going to wire up key up
event handler so when the key up event
is raised we want to execute some code
which is going to be part of this
anonymous function so the first thing
that we want to do is retrieve the user
name from this particular text box and
we are already in the context of that
text box so I can you
use this keyword here to reference the
text box and what we want to do is get
the value of that out of that text box
I'm going to store that in a variable
let's call it user name so whatever
value the user typed into the text box
we have that in this variable now we
don't want to issue you know Ajax call
to the database as soon as he starts now
to type the first character instead
let's wait you know to type at least
three characters let's assume the user
name should contain at least three
characters for example and that's when
we should start to check but if that
username exists in the database or not
if you know in your application if the
username length is five or seven
depending on that at that point you want
to issue an ajax call to start checking
you know whether of that user name
exists you know after that for every
character you want to issue an ajax call
and check if that username exists so
let's see how to do that now so if
username dot length if that is greater
than or equal to three that's when i
want to do all the stuff that's when we
want to issue the ajax call so i'm going
to use the Ajax function and we're going
to use the javascript object and specify
the options so the first thing that we
need to specify is the URL so what is
the URL that we want to call we want to
call this registration service dot ASM x
and within that registration service
they've got a function and the name of
that function is username XS okay so we
want to call that function all right so
that's the URL that we want to call and
how do you want to issue that request we
want to issue a post request so I'm
going to specify that using the method
option and then you know this function
that is username exists expect some data
to be passed so let's go ahead and
specify the data so if you look at the
name of the parameter for this method
its username so here the name of the
parameter is username
and where is the value going to come for
that it's going to come from this
variable and again the name of that
variable is also user name okay and what
is the data type that we are expecting
from the server
we are expecting JSON data so let's go
to and specify that and then if the
function successfully completes then we
want to associate a callback function
and this function is going to receive
the data from the web service okay and
finally if there is an error again we
want a callback function and whatever
error we get back we want to display
that using a JavaScript alert alright so
if it is successful you know this is the
callback function that gets called so
what do we want to do at that point at
that point we want to display the result
within this development and this
development has got an ID div output so
let's go and find that development so
within this success function I am going
to create a variable let's call this div
element equals dollar let's use the ID
selector okay now so this object this is
a JSON object and the properties of this
object will be very similar to the
properties of the object that we are
returning here so this registration
object that we are returning it is
actually having two properties user name
and user name in use right and this user
name in use is a boolean property true
or false so what I'm going to do here is
I'm going to check if data dot what is
the name of that property user name in
use so if data dot user name in use
that's a boolean property by itself if
it returns true then what we want to do
is within this development we want to
use the text function and say user name
you know whatever username you have
typed into the textbox
is already in use okay
and at that point let's set the color of
the development to red
I mean the font color I mean let's do
that using CSS function so color is red
alright else if this property returns
false then we know that user name is
available in that case to the
development we want to associate a
different text so user name is available
okay and let's change the color in that
case to green all right so that's all
there to it okay so let's go ahead save
all these changes and reload our HTML
page 1 and look at this as we start
typing look at that as soon as we start
you know type the third character and it
calls the web service and it says Pam is
available and look at that every time we
type a character it says that's
available but remember Pamela username
is already you know taken and look at
this the moment I type a it is Pamela
it's already in use now if I type
another character like Pamela one for
example it is Pamela one is available so
here is the stored procedure is the web
service code and here is the jQuery code
and HTML thank you for listening and
have a great day</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>