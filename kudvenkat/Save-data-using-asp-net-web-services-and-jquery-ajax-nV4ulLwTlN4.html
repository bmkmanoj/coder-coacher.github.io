<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Save data using asp net web services and jquery ajax | Coder Coacher - Coaching Coders</title><meta content="Save data using asp net web services and jquery ajax - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/kudvenkat/">kudvenkat</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Save data using asp net web services and jquery ajax</b></h2><h5 class="post__date">2015-06-09</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/nV4ulLwTlN4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">this is part 64 of tech 3 tutorial in
this video we'll discuss how to save
data using asp.net web services and
jQuery AJAX so here is what we want to
achieve so using this form we are going
to enter employee's data and then when
we click this add employee button we
want to post this form data to the
asp.net web service using jQuery AJAX
and then we want that asp.net web
service to save this data to the
database table and once the data is
saved to the database table we want to
display the records you know all the
records basically that are available in
the employee table in a table as you can
see here so as soon as we add an
employee we want to display that newly
added employee record in this table so
let's see how to achieve this we will be
working with the same example that we
worked with in the previous video
session so let's flip to visual studio
so this is the same example that we
worked with in the last video session so
this is how the form looks like at the
moment so at the moment we are
retrieving all the employees from the
database table using jQuery AJAX now the
first thing that we'll have to do is
create a stored procedure which is going
to insert employee data to the database
table and in the interest of time I have
already created that stored procedure so
this stored procedure here has got three
parameters and the implementation is
straightforward insert into the
employee's table and the values you know
that we want to insert a coming as
parameter so name gender and salary so
straightforward insert stored procedure
there the next step is to write the web
service method which is going to add the
employee data to this database table by
calling this insert employee stored
procedure so at the moment within the
table we have got four rows and that's
what are displayed here and that this
stored procedure is going to insert the
employee data into that table all right
so now let's go ahead and add that web
service method so here I'm actually
going to make a copy of this get all
employees method so we don't have to
type all this ad or net code again so
let's make a copy of this
so let's call this method ad employee
and to this function we are going to
pass employee object let's call it EMP
and we don't need to create a list so
let's get rid of that so we read the
connection string from web config file
create a new sequel connection object
and next create a signal command object
and we want to call the stored procedure
using that sequel command object so
since this command is executing a stored
procedure we have to tell that to the
command object using the command type
property so command type equals store
procedure and if you look at the stored
procedure it has got three parameters so
we need to add those three parameters to
the command object so I'm going to
create a new so to the command object to
the parameters collection add a new
signal parameter object so there are
four overloaded versions here we are
going to use this overloaded version
where we create a new sequel parameter
object and then specify the properties
that we need so basically we need to
specify the parameter name so parameter
name equals so the first parameter is
name at name and where is the parameter
value going to come from it's going to
come from this employee object so value
for this parameter is going to come from
the employee object that is coming into
this function and we are going to use
the name property similarly we need to
add parameters for gender and salary and
in the interest of time I have already
typed that code so let's go ahead and
copy this and paste it right there so
this third procedure has got three
parameters and we are associating all
those three parameters to the command
object the next step is to open the
connection now we are going to insert
data so we don't require a sequel data
reader so I'm
actually going to get rid of all this
code from here we are not going to send
anything back to the client so I'm going
to remove this as well so we want to
open the connection and execute the
command so command dot since this is an
insert command I'm going to call execute
nan query okay so very straightforward
add employee method which is going to
insert the employee data into the
database table now all that is left is
we want to post the form data using
jQuery to this asp.net web service
method so let's see how to do that so
that's of a web service method now let's
go back to our HTML page one dot HTML at
the moment the page looks like this now
we want to first design the page so the
UI looks like this so we need the table
which displays the employee records but
we don't need get all employees button
so I'm going to actually delete this get
employees button and you know one of the
break elements and now we need to design
a table which looks like this to capture
employee data and again in the interest
of time I have already typed that HTML
so let's copy that and paste it just
above this break element ok so again
this is straightforward HTML we've got a
table element and it has got one two
three and four
PRS so we are capturing name gender
salary and then we have a button which
says add employee and the ID of the
button is BTN add employee so let's save
the changes and let's reload this page
so at this point this is how the form
looks like the moment we click add
employee we want to post this form data
to the database you know basically to
the web service and we want the web
service to post the data to the database
table and upon inserting we want to
again retrieve all the records that are
there in the table and display them in
this table below this form ok so let's
see how to do that so when we click add
employee button that's when everything
should happen and dot add employee
button has gotten a ID BTN add employee
so let's grab that ID
so here we are associating the click
event handler to add employee button all
right so now another thing that I'm
going to do is I am going to actually
move this Ajax function call so
basically this is going to retrieve all
the employees from the database table so
and here is the closing of that Ajax
function call so I'm actually going to
move all this code into its own function
so I'm going to cut that and you know
within our ready function I'm going to
create another function let's call this
get all employees and I am going to
paste that Ajax function call within
this and we are going to use this
function get all employees wherever we
need it all right okay
so when we click add employee button
what should happen we want to issue an
ajax call and post the form data right
and before that we need to you know
basically capture whatever details the
user has entered on this form so I'm
actually going to create a variable here
and I'm going to call this employee you
can give it any name you want but I'm
going to call it employee I'm going to
create an MT JavaScript object here and
this to this object I am going to add
some dynamic properties so first I want
name so this is going to contain the
name of the employee and where are we
going to get the name from we are going
to get that from this text box and this
text box has got an ID
txt name so let's use that ID find the
text box and then retrieve the value
that the user has typed so find the text
box by the jQuery ID selector and get
the value out of it similarly we need to
do the same thing for gender and salary
so here property name is going to be
gender and gender value is present in
txt gender text box
similarly salary is present in salary
text box so copy that and the text box
name is going to be txt salary all right
so here we have the employee object and
the respective properties of that object
has got the values that we want to send
to the asp.net web service method now we
are going to issue an ajax call so i'm
actually going to make a copy of this
code right here and change it as we need
it okay so let's go ahead and paste that
code here so we are making a call to the
Ajax function so the URL that we want
this data to be posted to is employee
service dot ASM X that's our web service
and within that web service we've got
this add employee method so that's the
function to which we want to post the
data so post the data to that add
employee function and if you look at
that add employee function it is
expecting an employee object to be
passed and EMP is the name of the
parameter all right so now that's the
URL to which we want to post the data
and we are not going to get any data
back from that function so I'm going to
remove this data type option so we want
to issue a post request so the method is
going to be post and I'm going to
specify the content type that we will be
sending to the server we are going to
actually send a JSON string so I'm going
to set content type to application for
slash JSON and I am also going to
specify character set equals UTF - 8
okay so using this content type option
we are specifying that we will be
sending a JSON string so that means the
data that we are sending to the server
should be converted to a JSON string
okay so I'm going to send adjacent
strings I'm going to use you know open
and close curly braces and here we are
the name of the parameter that the
employee web service add employee web
service method expects is EMP so to that
we want to append you know this employee
object this is an object so we need to
convert that to a JSON string so I'm
going to use JSON dot stringify method
so Jason
dot stringify and to this we are going
to pass the employee objects so that's
going to convert that employee object to
a JSON string here we have the opening
brace that's the name of the parameter
which add employee web service method
expects and then we want to close the
closing brace so plus let's close that
so basically that is the data that we
want to send to the server so that
entire thing forms a JSON string okay
and on success we want to call this
function they're not going to get any
data back so I'm going to remove that
parameter it's of no use to us and I'm
going to remove all this implementation
here and on success what do we want to
do we want to retrieve all the employees
that are already there in the database
table including the new record that we
have added and display them in the table
on the form okay
so let's call this get all employees
function to retrieve all the employees
from the DB and if there is an error we
want to alert that error so pretty
straightforward Ajax requests there to
post the data to the server so let's go
ahead save the changes and let's
actually build this because we have
changed the web service head method as
well so build succeeded let's go ahead
and reload this page now let's go ahead
and enter an employee named Sarah let's
say female is the gender and let's say
75,000 is her salary let's go to nad
employee look at that sarah is added
okay so look at how fast it adds and
reloads data so all this is done through
Ajax it is the web service method and
here's the jQuery code thank you for
listening and have a great day</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>