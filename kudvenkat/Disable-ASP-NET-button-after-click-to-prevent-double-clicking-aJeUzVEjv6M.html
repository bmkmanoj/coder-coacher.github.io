<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Disable ASP NET button after click to prevent double clicking | Coder Coacher - Coaching Coders</title><meta content="Disable ASP NET button after click to prevent double clicking - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/kudvenkat/">kudvenkat</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Disable ASP NET button after click to prevent double clicking</b></h2><h5 class="post__date">2015-03-05</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/aJeUzVEjv6M" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">this is part seven of JavaScript at
asp.net tutorial in this video we'll
discuss how to disable asp.net button
after first click to prevent accidental
double clicking preventing accidental
double clicks on a submit button is very
important for applications if double
clicks are not prevented you may end up
executing the same submit button code
twice this means if you are inserting
data duplicate rows may be inserted in
the database table we have an example
here this form captures the name and
gender of an employee if we double click
the submit button we end up inserting
the same employee's record twice in the
employees table as you can see on the
right here what we want to do is upon
the first click we want to disable the
submit button immediately and then
display this message saying please wait
which is an indicator for the user you
know basically saying that the
application is still processing so
please wait and when this button is
disabled at that point if you click on
the button nothing is going to happen
and we want to keep this button disabled
until the request completes processing
once the request has completed
processing that's when we want to enable
this button back so that we can enter in
new employees details and then click the
submit button once again so that the new
employee details are stored in the
employees table so let's see how to
achieve this the first step here is to
obviously create this employees table
which I have already done and here is
the sequel script to create the sample
DB database and the employees table and
at the moment this employees table is
empty I have also designed the web form
so if you look at this web form we've
got the textbox to capture named
drop-down list to capture gender and the
submit button when we click the submit
button we are calling this function save
data to database and this function is
also already implemented all this
function is going to do is save the data
to the database table so here we have
the regular ad or or net code the first
line right here is reading the
connection string from web config file
and if you look at the web config file
we have a connection string that is
pointing to sample DB database
and within the sample DB database if we
of Cour the employees table after we
have read the connection strain we are
using that connection strain to build
this equal connection object and then we
are building the sequel command object
this sequel command object is going to
execute a stored procedure SP insert
employee which I have already created
and here is that stored procedure the
stored procedure has got two parameters
name and gender which we are inserting
into employee stable since the command
object is executing a stored procedure
we have to tell that to the command
object and then we are building the two
parameter objects the name parameter is
getting its value from the textbox the
gender parameter is getting its value
from the gender drop-down list and then
we are associating name and gender
parameters with the command object and
then we are opening the connection and
executing the command so straightforward
ad or 10 code and if you look at this ad
or dotnet code it's going to execute in
no time so to introduce some artificial
late and say I am making this thread
that's currently executing this request
to sleep for 3,000 milliseconds that is
3 seconds so let's go ahead and run this
page now and let's an turn mark as the
name gender male now at the moment the
table is empty so we don't have any
records now let me double click the
submit button
I actually double click the submit
button and look at this you know we have
the same employee's record stored twice
and we don't want that to happen as soon
as we click the submit button you know
the first time immediately we want to
disable that button so accidental double
clicks cannot happen ok and to disable
the button we are going to make use of
two attributes you submit behavior and
onclientclick so let's flip this
waveform to the source mode and I'm
going to use you submit behavior and I'm
to set this to false in a bit will
understand why we will have to set this
attribute to false and then I'm going to
use on client clear attribute so
basically I'm going to use some script
to disable the button so this dot
disable equals true and this dot value
equals please wait okay so with this
change let's go ahead and run the
waveform once again and look at this now
let's go to and truncate this table so
at the moment we don't have any records
now let's enter mark as the name again
look at this as soon as I click the
button the first time the button is
immediately disabled and while the
button is disabled
you know even when we click nothing is
going to happen so now look at this we
have only one record stored now I click
the button look at that I click so many
times but nothing is happening because
the button is disabled and until the
request has completed processing the
button was disabled as soon as the
request has completed processing that's
when it is enabled so now you know ok
that we get another mark record because
we clicked it the second time now let's
understand why we will have to use this
use submit behavior attribute now let's
inspect the code that is generated by
asp.net look at this the button that we
have used here is an asp.net button
control when the asp.net processed this
request
it's actually going to generate an input
you know type equals button ok and look
at this on click attribute you know this
door disabled equals true this dot value
equals please wait that is something
that we have specified using this on
client
a tribute in addition to those two
things that is this store disable and
distort value we also have another piece
of code here look at that there is a
function called underscore underscore do
post back okay so what is this function
this is the function that is
automatically injected by asp.net okay
and this is the function which is going
to cause the post back to occur when we
click this submit button
if that piece of JavaScript is not there
that is this underscore underscore do
post back function if that function is
not there then the page will not be
posted to the server and the reason that
underscores could do post back function
is generated is because we have used
this attribute you submit behavior
equals false if we don't use this
attribute let's look at what's going to
happen so I removed that attribute now
if we remove that attribute the default
behavior is you know you submit behavior
equals true that will be true by default
okay and since that will be true by
default asp.net is not going to generate
that method and squads could do post
back which is going to cause the post
back to a occur when we click that
button so when we view the page source
notice that now we only have this door
disabled equals true this store value
equals please wait but we don't have
that underscore underscore do post back
and because of that when I click this
button look at that nothing is going to
happen it is not going to cause the page
to post back to the server okay that's
why we will have to use you submit
behavior and said that attribute to
false now let's see how to disable an
image button because that's slightly
different okay so instead of using the
regular button I am going to now use an
image button so let's drag and drop an
image button control from the toolbox
and I'm going to make use of these two
images okay
so let's copy these two images
and within our web application project
let's add a new folder and let's name
this images and paste the images that we
have just copied okay and we're going to
set image URL attribute of the image
button to images for slash submit dot
PNG and and this is how the submit
button looks like okay and now let's go
ahead and double click the submit button
to generate it click even handler now
when we click the submit button we want
to do the same thing that is save data
to the database and make the thread
sleep for 3,000 milliseconds so let's
copy that and paste it here all right
now let's flip this form to the source
mode now just like the button you know
if we try to use that attribute you
submit behavior we can't because the
image button control does not have that
attribute okay but if we don't use that
attribute what's the problem it's not
going to generate that underscore
underscore do post back JavaScript
function which is going to cause the
page to be posted to the server when we
click that image button so since we
don't have that use submit behavior
attribute we can actually use another
function a server-side function so
within the page load event image button
1 dot attributes dot add and we want to
add on click attribute so this is
basically the client-side click event so
to the client-side click event here is
what we want to associate we want to
disable the button this dot disabled
equals true semicolon and to that
I want to append underscore underscore
do post bacc method and to generate that
method I'm going to use a different
class client script and this math class
has got get postback event reference
function okay so what is this function
going to do this is going to generate
that underscore underscore do post back
function which is going to cause the
post back to occur when we click this
image button okay and this function you
know requires two parameters the control
our reference so the control is image
button one image button one and then
using the second parameter you can
specify any optional arguments that you
want to pass to the control that is
going to cause the post back to occur we
don't have any parameters that we want
to pass so I am going to specify a null
for that parameter okay and to that I
want to append semicolon now what we
want to do is after the button is
disabled we want to display this image
within that image button control which
is basically a visual indicator for the
user to wait okay because these server
is still processing so please wait so
and the name of this image is weight dot
PNG which is present in the images
folder so I'm going to say this dot SRC
equals images four slash weight dot PNG
and then a semicolon
alright so let's save these changes
let's go ahead and run this page one
more time
and let's enter John and click the
submit button look at that we get please
wait and that at that point when we
click nothing is going to happen and
John record is inserted only once thank
you for listening and have a great day</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>