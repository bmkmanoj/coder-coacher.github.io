<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Part 6   WCF DataContract and DataMember | Coder Coacher - Coaching Coders</title><meta content="Part 6   WCF DataContract and DataMember - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/kudvenkat/">kudvenkat</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Part 6   WCF DataContract and DataMember</b></h2><h5 class="post__date">2013-11-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/RPgTKzSGcKY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">this part six of wucf video series in
this video we'll discuss water data
contracts and data members with an
example this is continuation to potpie
so please watch part 5 from the WCF
video series before proceeding with this
video let's understand data contracts
and data members with an example let's
implement an employee WCF service this
service should have two operations the
first operation should be get employee
if we give it an employee ID it should
query the database table retrieve the
respective employee and return that
employee back the second operation
should be save employee if we give it an
employee object it should save that
employee object to the database table we
also want a client application that is
going to interact with this employee WCF
service the user interface of the client
application should be this if we enter
an employee ID and when we click this
button get employee this client
application should send that employee ID
to the WCF service which is going to
retrieve that employees from the
database table give that to the client
application and the client application
should display those employee details in
the user interface if we enter a new
employee details and then once we click
the Save button the client application
should hand that employee object to the
WCF service which is going to persist
that employer object to the database
table so the first step here is to
actually create the employee table so
let's flip to sequel server management
studio I have already created this table
and here is the sequel script to create
that table and this script will insert
some sample data into that table and
here I have two stored procedures as
well sb get employee and this stored
procedure is going to get an employee by
ID so if we give it an ID then this
stored procedure is going to retrieve ID
name gender and date of birth from table
employee wear ID equal to whatever we
are going to pass to the stored
procedure and the second stored
procedure is sp save employee and it has
got ID name gender and date of birth
parameters so we are going to pass value
values for those parameters and this
tool procedure is simply going to insert
the values of these parameters into this
table TBL employee so very simple
stored procedures I'll have this entire
script available on my blog in case you
need it
alright now let's flip to visual studio
and implement the employee WCF service
so let's create a new project let's
create a class library project and let's
call this employee service and let's
rename this class one or CS file to the
employee dot CS and this will ask us if
we also want to rename the class name
from class 1 dot CS + 1 to employee
click yes
so that should rename the name of the
employee now we need to have 4 private
fields and 4 public properties basically
these properties are used to encapsulate
ID name gender and date of birth columns
from this table TBL employee and in
order to speed things up I have already
implemented the code for the private
fields and the public properties so
let's copy that from the notepad and
paste that into the employee class so
here we have caught the four private
fields and the respective public
properties which are going to expose
those private fields so very simple
employee class here now let's go ahead
and add a WCF service search for WCF
select WCF service and let's call our
WCF service as employee service now
within the AI employee service dot CS
file we want to have two operations the
first operation is going to be get
employee and this is going to take ID
that is the employee ID and what should
this method do it should return an
employee object so the return type is
going to be employee and we want another
operation contract that is save employee
and to this method we are going to pass
an employee object let's call the
employee object as employee and save
employee is not going to return anything
so the return type is going to be wired
now let's implement these two methods
within the implementation file which is
employee service dot CS so to implement
this interface simply select this option
implement interface AI employee service
and that should generate the method
stubs for us let's get rid of this to
work method alright now here we are
going to write some media dotnet code to
retrieve data from the database table at
TBL employee and to speed things up I
have already implemented the code I mean
the ad or dotnet code for this get
employee so let's copy that from the
notepad and paste that within get
employee and if you look at this code
it's straightforward ato dotnet code and
we have some compliation errors here
that's basically because we need to
import some of the required area dotnet
namespaces so let's go ahead and do that
we need system dot data system dot data
dot sequel client and system dot
configuration all right now if you look
at the implementation it's pretty
straight for and again look at this here
configuration manager is showing a
compilation error it basically says it
doesn't exist but if you notice we have
included that namespace system that
configuration that's basically because
this class library project doesn't have
a reference to system configuration
assembly so let's go ahead and add that
reference so system dot configuration
and that should get rid of that
compilation error and if you look at
this ad about net code it's very
straightforward if you are new to ad or
dotnet I have recorded some videos in
order to cover the basics of radio
dotnet so please watch them from the
your dotnet tutorial all right so what
are we doing here within this get our
employee method we are creating an
instance of employee object and then we
are reading the connection string DBC s
you know from a configuration file now
at the moment if you look at this class
library project we have app config file
but we are not going to include
connection string within this app config
file let's delete that app load config
file will actually host this employee
service in a console application and
that console application is going to
have an app config file and within the
adapter config file we are going to have
this connection string okay so basically
we are going to read the connection
string from that application
configuration file and using that
connection string we are building the
signal connection object and next we are
building signal command object and
notice the command name SP get employee
which is nothing but the name of the
stored procedure and since it's a stored
procedure we have to tell that to the
command object and we do that by
specifying the command type of property
and then this stored procedure expects
an ID parameter because we want to get
an employee by ID so here we are
creating a sequel parameter object the
name of the parameter is ID and the
value is nothing but the value that is
going to be coming into this method
parameter okay and then finally we are
adding the parameter object to the
command object opening the connection
execute in the command ok and then we
are retrieving the values that we
retrieve from the database and then
assigning them to the properties of the
employee object that we have created on
this line and then finally we are
returning the Templar your object tag so
straightforward get employee method
there ok and then similarly for the save
employee method if we give it an
employee object we should save that
employee object to the database table
again we need to write ad or dotnet code
to speed things up I have already
implemented the quiet area dotnet code
so let's go ahead and copy this and
paste it in
that function in Visual Studio right so
if you look at this area dot encode
again and this is straightforward here
we have a compliation error that's
basically because the employee object
has got a small e here but the parameter
itself is with capital e so let's change
it to small e now again we are reading
the connection string from the
application configuration file of
building the signal connection and then
the C fill command look at the sequel
command SP save employee and the stored
procedure has got several parameters we
need to pass the ID name gender and date
of birth parameters and to create those
parameters here we have the code so we
are creating single parameter object
specifying the name and the value and
look at where the value is coming from
the value is coming from the property of
the employee object that's coming into
the same employee function okay and we
are adding the parameter object to the
command so that's for the ID parameter
that's for name gender and then date of
birth and then we are opening the
connection executing the query alright
so we are done implementing our employee
WCF service the next step is to host
this service and we are going to make
use of a console application to do that
so let's add a new project to the
solution let's add a console application
and let's call this employee service
host and the first step here is to add
an application configuration file so
let's add an application configuration
file and we discussed the configuration
that is required to host a WCF service
in the previous sessions of this video
series so I'm not going to get the
basics arm of that configuration and
again to speed things up I have that
configuration already implemented so let
me go ahead and copy that configuration
and paste that into the apt or config
file and the first thing that you will
notice here is the connection strings
section
remember within our employee service we
are trying to read a connection string
okay so this DBC is connection string is
present in this app dot config file here
which is basically pointing to the
sequel server installation that is
running on my machine and then here we
have system dot service model section
which is basically the configuration to
host this employee WCF service ok now
I'm not going to get into the details of
this configuration we discuss the basics
of that in the previous sessions
I'll have this configuration available
on my blog in case you need it
alright so with all these changes you
know we should be up and running
before that let's set this employee
service host as they start a project and
then let's run this actually we need to
write code to host the service so within
our program dot C s file now first of
all to host a WCF service we need to add
references to two things the first thing
is to the employee service itself so
let's go ahead and do that first so
employee service and the second thing is
to add a reference to system dot service
model assembly which is the main WCF
assembly all right and then within this
program dot CS file we need to import
system dot service model assembly sorry
namespace so system dot service model
and within the main method let's create
an instance of service host let's call
it host equals new service host and we
need to specify that type of our service
and in order to do that we use the type
of keyword and the name of our time is
employee service which is present in
employee service namespace and we are
going to open the host let's print the
date and time that the host has started
and in order to do that
let's simply say host started at
whatever is the date in time that the
host has started and in order to keep
this alive the console application let's
use console dot readline all right
but these changes let's go ahead and run
this so the host has started the next
step is to create the client application
so let's fire up another instance of
Visual Studio and then let's create a
new project and here we want to create
an empty asp.net web application and
let's call it client and the first thing
that we have to do here is to add a
reference to our WCF service and if you
look at the configuration of our WCF
service the base address for the service
is this one localhost colon 8080 so
let's copy that URL let's go back to the
console application right click on the
references folder add a service
reference and then specify the base URL
of your service click go button this
should discover the employee service
let's give it a meaningful name space
let's call it employee service and click
OK so this should generate a proxy class
now let's go ahead and add a web form to
this project and we need to design this
Web form in such a way that it looks
like this and to speed things up I have
implemented the required HTML so let's
go ahead copy this HTML and paste that
into a web form
and if I flip it to the design mode you
can see the same design that we have on
the slide okay and we have a label
control here basically to display the
status a message okay all right now
let's double click on this get employee
button to generate the click event
handler similarly click even handler for
save employee all right now here we need
to create an instance of the proxy class
and if you remember the namespace that
we have used this employee service so
employees service dot employee service
client so let's create an instance of
that and then all we do is get employee
we invoke the get employee method and to
this method we need to pass the ID the
ID is going to come from this particular
text box and the ID of this text box is
DX d ID so let's retrieve the text from
at and we need to convert that to an
integer all right and if you look at
this get employee method what is it
returning back it's returning look at
the intelligence it's returning an
employee object and that employee object
is present an employee's service
namespace so with an employee service we
have called this employee class and
let's call it employee so we have the
employee object back from the service
what we need to do we need to display
name gender and data of birth properties
within the respective text box controls
and to speed things up I have written
that code as well so let's copy that
so if you look at this code it's again
straightforward we are saying txt name
textbox equals name gender equals gender
date of birth equals date of birth okay
date of birth returns date time so we
need to convert that to a string
basically we are converting that to a
short date string so that we don't get
the time part of it if there is any okay
and finally within the label control
which has got an ID of LDL message we
are displaying this message employee
retrieved alright now we need to
implement save employee now again we
need to create an instance of the proxy
class so let's copy that code and paste
it right here and then invoke save
employee method and this method expects
an employee object to be passed so we
need to pass the employee object so
let's go ahead and construct our
employee object populate its properties
with the values from the controls on the
UI and in order to do that again I have
implemented the required code so let's
copy and paste that right here
so first let's create an employee object
and where is the employee object present
with an employee service namespace and
let's call the instance employee so we
are setting its properties and we should
hand that employee object to save
employee method and finally within the
label control we should display the
message so let's say employee saved
alright with all these changes let's go
ahead run the application and see if it
works as expected alright so now let's
enter an employee ID one and click get
employee look at that we get the
employee is expected and let's save a
new employee let's say for let's say Tod
as the name of the employee mail and
let's say date of birth is 1010 1981 and
let's save this employee says employee
saved let's quickly check the database
table
if you have caught a new record there
all right so the service the client
application everything is working as
expected so now the point is where does
this WC of data contract and data member
comes into play now first of all in
order to understand them first let's
understand what we mean by serialization
with respect to WCF so with respect to
WCF serialization is the process of
converting a dotnet object into an XML
representation okay so basically the
employee object ok needs to be converted
into an XML format okay and that process
is known as serialization and the
reverse process that is reconstructing
the same object from XML back into
dotnet employee object is called as D
serialization and in order to do the
serialization the default in WCF is data
contract serializer so there's a
component called data contract
serializer which will serialize data for
us into XML and into dotnet
representations so let's go ahead and
look at how this data contract
serializer is going to serialize you
know objects like employee student
customer etc ok now if you look at the
employee class within our employee
servers look at this at the moment we
haven't done anything special in order
to have this employee class serialized
now for a complex type like customer
employees to them to be serialized that
complex type can either be decorated
with serializable attribute or data
contract attribute but if you look at
our employee class it's not decorated
with any of them but still you know
everything is working is expected so how
is that possible that's basically
because with dotnet 3.5 Service Pack 1
and above we don't have to explicitly
use data contract or data member
attributes the data contract serializer
that is the component which does
serialization for us
in WCF you know is going to
automatically see the lies all public
properties of the complex type and it
will do that in an alphabetical order
and by default private fields and
properties are not see realized
so if you look at our employee class it
has got four private fields and four
public properties by default the data
contract serializer is going to
serialize all these public properties
that is ID name gender and date of birth
okay now in order to prove that let's
actually get to the Vistal document that
the service generates okay and to get to
the Vistal document we give it the base
address of the service and the base
address is basically HTTP : 4 /
localhost colon 8080 so let's get to
that URL and click on this and basically
here on this file we don't see the
employee object but then if you look at
you know this line right here we've got
something called data contract ok we'll
come to the data contract in just a bit
but this is the schema location for the
employee object so let's copy that URL
and then let's paste it another instance
of the browser and look at this we've
got you know the type as employee and
look at the property names date of birth
gender ID name and notice the order in
which they are present they are present
in alphabetical order okay so the data
contract serializer has serialized the
employee object into its xml
representation okay so by default if you
don't decorate you know the employee
class the data contract serializer
is going to serialize all the public
properties of that class in an
alphabetical order into its ex
representation right if we decorate a
complex types with serializable
attribute remember to serialize a
complex type you know there are two ways
you can either decorate it with
serializable attribute or data contract
attribute now the preferred way is to
actually decorate it the data contract
attribute in a bit we'll discuss the
reasons why but then we can also
decorate it with serializable attribute
if we decorate it with a serializable
attribute then the data contract
serializer serializes all fields and the
de serializable attribute we will not
have any explicit control on what fields
we want to include and exclude from
serialized data let's actually look at
that in action now if you look at this
serialized data look at this the public
properties are serialized for us by
default all the public properties but
then let's go ahead and decorate this
employee class with serializable
attribute and by the way the
serializable attribute I mean the data
contract attribute is present in system
runtime not serialization namespace so
let's go to and include the serializable
attribute and let's close the service
which is already running and then let's
free run it right now let's refresh this
page and look at this instead of you
know utilizing the public properties
when we have decorated the complex type
that is our employee class with
serializable attribute it has utilized
all the private fields and now let's say
for example for some reason we don't
want date of birth to be returned to the
client I know we don't want that to be
serialized if you want to achieve that
you know if you want to exclude the
state of birth from serialized data and
if you are using serializable attribute
you cannot really do anything about it
at the moment you know but the default
behavior you don't have any explicit
control on which fields to include and
exclude from
the serialized data when you use
serializable attribute on the other hand
when we use data contract attribute so
basically this data contract attribute
is present in systems or runtime dot
serialization namespace so let's go
ahead and bring that in so when we
decorate this employee class with data
contract attribute then we will have
explicit control on which properties or
fields that we want to include and
exclude from this utilized data and the
way we achieve that is by decorating you
know these fields and properties with
data member attribute so for example
let's say I want this public properties
all of the public properties to be
included in serialization then decorate
each of them with data member attribute
okay for now let's just decorate ID and
name let's close the host that's already
running rerun the project let's get to
the schema refresh the page and look at
that
since we have decorated only ID and name
properties they are only included in the
serialized data so now with data
contract and data member attributes we
have got an explicit control on what
properties and fields as well so for
example if I include the data member
attribute on this field the feet this
field will also be serialized so
irrespective of whether it is a private
field or a public property as long as
you apply it data member attribute it is
going to be serialized and if you want
to exclude them from serialize data
don't apply that attribute it's as
simple as that
so using data contract and data member
attributes you've got a lot of
flexibility on what to include and not
to include from serialize data so if we
decorate a complex time with data
contract attribute the data contracts he
realizes he realizes the fields as well
as properties that are marked with data
member attribute the fields that are not
marked with data member attribute are
excluded from serialization the data
member attribute can be applied either
on the private fields or public
properties but I prefer applying them to
public properties that's basically
because if you look at our public
properties they've got you know
meaningful names without an underscore
usually the convention is private fields
you know we'll have an underscore in
them so now let's go and apply this data
contract attribute to all of the members
all of the public properties I mean so
now you know all public properties
should be civilized okay so obviously to
serialize it type we have two ways you
can either decorate that with
serializable attribute or data contract
attribute you know there are other ways
as well we'll discuss them in a later
video session but keep in mind in WCF
the preferred and the most common way of
serialization is to mark the type with a
data contract attribute and mark each
member that needs to be serialized with
data member attribute and that is
basically because we have several
advantages of using data contract and
data member attributes first of all
using data contract attribute you can
define an XML namespace for your data at
the moment actually let's close this
let's feed on our employee service and
let's refresh the schema and look at
that we get date of birth gender ID all
public properties basically and look at
that they are again in alphabetical
order and if you look at the ID
somewhere in the middle name is in the
end you know it doesn't really make
sense to have ID somewhere in the middle
I expect that to be you know the first
item to be serialized and then name and
then maybe date of birth and gender now
is it possible to control you know the
order of these properties you know in
which they are serialized absolutely
that's the advantage of using data
member attribute okay first let's look
at this using data contract attribute we
can define an XML namespace for our data
so if you look at the target namespace
here you know it is using the default
URL which is key master data contract
and something there now you can specify
you know something like your domain name
for slash and you can give it like
employee or whatever you want okay
basically you can give it your own
unique namespace where you know that
serialized data of 11
and in order to do that you specify
namespace property on the data contract
attribute so data contract is applied on
the type itself and it has got name
space property and then for example here
let's say HTTP colon four slash four
slash localhost let's actually give it a
meaningful domain name which is prism
techcom four slash you can give it
something like 2013 and you know a year
and a month and then maybe something
like 0 7 0 7 and then employee you know
basically because giving it month year
month date and year allows you actually
to version that will discuss versioning
in a later video session but the distain
let's actually run this and let's
refresh this and notice the target
namespace at the moment it's the default
one
but once we refresh we should get the
namespace that we have given it all
right now the other advantage is you can
specify name order and whether if a
property or field is required or not
okay and we do that using data member
attribute so if we go to the employee
servers so these are the members that we
want to include in serialization and
this data member attribute has got
several parameters so name for example
so let's say for some reason we want you
know the ID to be serialized you know
with capital letters as ID if that's the
case use name property and you can also
use order property at the moment if you
notice the order is alphabetical but
let's say I want ID as number one name
as number two date of birth 3 and gender
4 if that's the case use order order
expects an integer value so we want ID
to be number one
so we specify the order as
and similarly for name I want that to be
two and gender to be three and date of
birth to be four all right so let's
close our host and run it once more
let's refresh this
notice that the ID name is in capital
letters now and look at the order it has
changed okay so that's the benefit of
using data contract and data member have
got a lot of flexibility there and it
will also allow view to serialize
private fields and properties as well if
you want to include them in
serialization simply apply the data
member attribute okay so service
contract operation contract data
contract three very important things to
keep in mind as far as WCF services are
concerned so if you want to implement
something WCF service you decorate that
with the W's service contract attribute
if you want to expose methods to the
clients then you decorate those methods
with operation contract attribute and
then within a type if you want to have
certain properties and fields to be
serialized you know you decorate that
type of data contract attribute and the
fields and properties that you want to
include and exclude in serialization you
know you either include or exclude data
member attribute from those respective
fields or properties all right and keep
in mind the preferred way of
serialization n WCF is to use data
contract serializer and to decorate the
type with data contract and members with
data member attribute that's it for
today thank you for listening have a
great day</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>