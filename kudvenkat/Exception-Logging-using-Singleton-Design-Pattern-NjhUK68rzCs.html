<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Exception Logging using Singleton Design Pattern | Coder Coacher - Coaching Coders</title><meta content="Exception Logging using Singleton Design Pattern - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/kudvenkat/">kudvenkat</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Exception Logging using Singleton Design Pattern</b></h2><h5 class="post__date">2017-06-26</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/NjhUK68rzCs" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello everyone welcome back this is part
seven of the design patterns tutorial in
this session we will learn how to create
a simple employee web application using
asp.net MVC and will create a custom
logger library using singleton design
pattern which logs exceptions to an
external file please refer to the
previous parts of the tutorial before
proceeding let's switch to visual studio
let's create a new project and choose
other project types and select a blank
solution let's name it as employee
portal let's add a new project and
choose web is P dot into a publication
and let's say it as web let's add a new
item and choose sequel server database
and name this database is employee
portal now that we have created employee
portal database let's open that let's
add a table called employee let's add
columns to this employee table such as
name which is a very card let's add job
description let's add a column called
number also let's add department let's
click update update completed
successfully let's change this ID by
giving a identification to true let's
also make named job description and
number as mandatory let's update it back
update database look at that
update completed let's generate a model
out of this database table right click
on models add new item and choose ad
whoa dotnet entry data model let's name
this as employee model let's press add
look at that it has given multiple
options to generate the model let's
choose the first one say next
by default it has selected the employee
portal MDF file let's click Next
let's choose entity framework 6 dot X
let's say next look at that it has
presented with the tables
let's choose employee table and click
finish look at that employee model
generation is completed now let's switch
to solution Explorer and add an employee
controller right click on the
controller's click add choose controller
look at that by default MBC five
controller with views using entity
framework is selected let's select that
and click on add let's choose the model
class as employee and choose the data
context classes employee portal entities
let's click on add look at that the
visual studio has generated an employee
controller as well as its corresponding
views under the views and employees
folder let's compile this application
the compilation succeeded let's run this
application and see the output let's
type the controller name employees here
have Center look at that we are able to
create a new employee let's name the
employers John job description as
manager member as a zero one two three
and department as HR let's create an
employee look at that employee creation
successful and we are able to perform
the operation such as edit and we can
view the delay details as well as we can
delete this employee for now let's
switch back to the visual studio
and stop the application with this we
have successfully created a simple
employee portal that handles all the
crud operations such as create edit and
delete this portal works very well in
the happy path scenarios now imagine the
situation when some exceptions occur
while adding or editing an employee to
handle those exceptions let's create our
own custom exception logger library
let's right-click on the solution and
click on add new project let's choose
class library named it as logger let's
add an interface choose interface let's
name this interface as iLok let's create
an interface method called log exception
which accepts message as input parameter
as scheme this interface as public lets
choose class 1 let's bring the singleton
code which we have created in our
previous examples into this class 1 look
at that this is the singleton instance
which we have created in our earlier
examples let's change this singleton
class name as log let's remove the
counter values here as we don't need
them in this example let's also remove
the print details let's inherit the I
log interface that we have created and
let's implement the interface which is a
log exception to save some time I have
already written the code to implement
the log exception let's bring the code
from the notepad let's also rename this
class to log dot CS now if you inspect
the code we are creating a stream writer
to log the exceptions to an external
file path and we are choosing the
current domains base directory as the
file path
we are assigning the file name as
current dates short date string as well
we will skip further discussion of this
code as this is not part of the scope
now it's not mandatory that we need to
log exceptions to an external file we
can also log the exceptions to a
database table or to an event source or
to any other external sources for our
convenience we have chosen to log the
exceptions to a flat file let's switch
to the employee controller and handle
the potential exceptions that may arise
in the create and update and other trade
operations let's create a public
employee controller constructor and
let's create a private I log using
logger underscore I log and let's
initialize this I log using log dot get
instance now there singleton get
instance will get instantiated into I
log there are many ways to handle
exceptions in the MVC applications for
this example let's choose the virtual
all exception method of the base
controller and overwrite the same let's
go to the definition of the base
controller and look at that there is an
on exception method which is defined as
a virtual method so let's flip back to
this employees controller and overwrite
this virtual method let's a protector
overwrite white and say on exception
look at that let's invoke I log dot log
exception and pass the filter context
dot exception dot to string now the I
log dot log exception will take care of
the logging the exception so let's mark
the
contacts dot exception handle to true
pose the exception is handle let's
return the error view this dot view and
that say error dot execute result of the
start controller context the on
exception method will take care of
handling any known and unknown
exceptions that are thrown in this
employees controller we don't need to
explicitly add any try-catch in each of
these methods are in each of these
controller methods now let's compile
this application look at that
compilation succeeded now in order to
simulate error logging let's change the
employee tables open table destination
and let's make the department as
mandatory and update it let's update the
database as well update completed
successfully now let's run this
application now in employee creation if
I don't pass the department it should
throw me an error let's create an
employee let's say Smith's job
description let's say click and let's
give us employ number as a one two three
four let's leave the reitman empty and
let's click on create look at that it
has thrown an error let's specify forget
that it has redirect to an error page
let's see what is logged in the error
log file let's go to the web and look at
that there is an exception block the
date 25 June 17 is created let's just
open that and look at that it has thrown
an error stating that it cannot insert
the null value into column Department
with this
we have proved that singleton design
pattern comes handy in the situations
where we need to have a single instance
of the object like how we have now
implemented the exception logging now to
consider another example imagine a
situation where we need to implement
cash management in the application in
that case we can use an leverage on
singleton design pattern as we can
handle reads and writes to external
caches using the single cache instance
object with this we hope you are now
familiar with the singleton
implementation please feel free to post
your comments if you are looking for
more examples with singleton design
pattern thank you for listening have a
great day</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>