<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Part 8   XML validation against XSD | Coder Coacher - Coaching Coders</title><meta content="Part 8   XML validation against XSD - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/kudvenkat/">kudvenkat</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Part 8   XML validation against XSD</b></h2><h5 class="post__date">2014-09-02</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/SGVL_SIYIGA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">this is part 8 of Link to XML tutorial
in this video we'll discuss validating
an XML file against an xst file access T
stands for XML schema definition
language first let's understand what's
an access T file an existing file
defines the structure of the XML file
that is what element should be present
in the XML file in what order should
these elements be present how many times
these elements should be present what
attributes the elements have and how
should these elements be nested all
these rules are defined in the XS T file
without an Associated access T file an
XML file is a relatively free set of
elements and attributes meaning if an
XML file does not have any existing file
associated with it
then such XML file can have any XML
elements those XML elements can have any
attributes and the XML elements can be
present in any order the xst that we
have here specifies that within a given
XML file the root element should be
named students and directly underneath
that root students element we should
have a student element
notice that minoccurs is set to one max
occurs is set four meaning we should
have at least one student elements
directly underneath the root students
element and we should not have more than
four such student elements and each
student element should have name gender
and total marks elements and these
elements should be present in that order
now let's see how to validate a given
XML document against this X stay let's
flip to visual studio now here I have a
new console application we need four
different namespaces so first let's
bring them in we need system door link
system dot XML dot link and finally we
need system dot XML dot schema
first to this project let's add a schema
file so right-click on the project
add a new item make sure data is
selected under install templates select
XML schema notice that the schema files
have got dot xst extension and let's
name this student dot X stain now to get
to the XML editor within the schema file
select this second option
use the XML editor to view and edit the
underlying XML schema file so here we
are in the source mode now to speed
things up I have already typed the
required xst so let's paste that here so
this is the same schema definition that
we have seen on the slide now to this
project let's also add an XML file so
add new item and this time we want to
add an XML file let's call this data or
XML and this file is going to contain
our student XML data so again I have
this student XML data typed already I
have this xst and XML data available on
my blog in case you need it
now what we want to do is validate this
XML document against this access rain
okay now if you look at the data that we
have caught here notice that the root
element is students that's what the xst
States root element should be named
students and directly underneath the
students element we should have student
element you know maximum of four such
student elements should be present so
here notice that we have four student
elements and each student element has
got name gender and total marks elements
and that's what the xst state's
name gender and total marks so at the
moment this XML confirms to the rules
specified by this excess name so within
our main method
let's write code to validate the XML
document against the xst so the first
thing that we need to do is create an
instance of XML schema set and let's
call this schema equals new XML schema
set and now we actually need to read the
XML schema from this student dot xst
file and this file is present within
this project folder so let's get the
part of the
folder and the schema method has go I
mean the XML schema set object has got
this add method there are four different
overloads we are going to use this
overloaded version okay at the moment we
don't have any namespace so let's
specify that as a an empty string and
the second option here is to specify the
schema URI so this schema is present in
this file C colon backslash demo
backslash demo backslash student dot xst
now we also need to load the XML data
from this data dot XML file so let's
make use of this ex document class let's
call it dark equals x document dot load
so we are going to load the XML data
from data dot XML file also present in
the project folder so let's change the
name to data dot XML okay so now we have
the XML data we have the XML schema so
how to validate the ex document class
has also got validate method okay and
notice the parameters that this validate
method expects first we need to pass the
schema so we have this schema already
present in this object so what is this
method going to do it's going to
validate this XML document against this
XML schema okay now once it validates
and if there are validation errors then
we can specify a function to call so
look at this validation event handler
this is nothing but a delegate okay so
let's actually look at that so
validation even handler so right click
on that go to the definition notice that
it's actually a delegate what's a
delegated delegate is a function pointer
meaning now we can pass a function as a
parameter to this validate method now
when the validation fails that function
gets called okay so and if you look at
what are the parameters that this
delegate has two parameters one is of
type
object the other one is of type
validation eventargs okay so what I'm
going to do here is create another
variable of type boolean let's call it
validation errors and we are
initializing that to false okay and here
the second parameter is a function that
we want to call when validation fails
okay now there are several ways to
specify a function now we can create a
separate function which confirms to this
delegate and then create an instance of
this delegate pass that function that we
have created as an argument and then
pass the delegate instance as an
argument in order to the validate method
instead of that the shorthand notation
is to use a lambda expression so we know
that the function that is going to be
called is going to receive two arguments
one is of type object which is nothing
but the sender the other one is of type
validation eventargs okay so let's call
it e so now here we are going to define
what we want that function to do so
console dot write line now this object
right here this e it's nothing but
validation event arguments or object and
this object has got the message property
so if there is a validation error you
know the message property will be
populated okay so we want that message
to be printed and then we are going to
set this variable to true meaning you
know the validation has failed there our
validation errors and then what we will
do here is we'll check if validation
errors
and sold out right line validation fail
else validation succeeded alright so
with all these changes let's go ahead
and run our code now at the moment
validations should succeed that's
because this XML confirms to the rules
of this xst so let's run this and it
should print this message validation
succeeded let's do this let's change the
XML that we have caught in this data
that XML file now let's actually remove
this gender element and put that before
name element okay now what does the XS t
say is XS t says name gender and total
mark element should be present directly
underneath the student element in that
order but then if you look at the XML
here for this student element we have
changed the order let's see if the
validation succeeds look at that the
element student has invalid child
element gender list of possible elements
expected name so it was expecting name
element underneath the student element
but instead it encountered this gender
element okay so if we move that back and
we run this notice that validation
succeeded but let's do one more thing
let's actually change this schema let's
say we wanted gender first and then name
okay and if you look at the XML here
none of the XML elements that is student
elements you know confirm to that rule
so we should have at least four messages
because we have four elements look at
that as invalid we have four error
messages and it says as invalid child
element name list of possible elements
expected gender so the first element
within the XML
underneath student should be gender
that's it for today thank you for
listening have a great day</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>