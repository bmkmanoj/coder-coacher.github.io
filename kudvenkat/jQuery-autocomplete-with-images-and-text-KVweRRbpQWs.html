<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>jQuery autocomplete with images and text | Coder Coacher - Coaching Coders</title><meta content="jQuery autocomplete with images and text - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/kudvenkat/">kudvenkat</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>jQuery autocomplete with images and text</b></h2><h5 class="post__date">2015-07-28</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/KVweRRbpQWs" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">this is part one zero three of techie
tutorials in this video we'll discuss
how to display both images and tags in
the suggestions menu of jQuery
autocomplete widget let me explain what
I mean on the web page right here I've
got a text box where we can type the
name of the country as soon as we start
to type the first character of a country
name then we want to retrieve all the
country names that start with that
letter and then display the respective
country flag and the country name in the
suggestions menu as you can see here we
want all this data to be coming from a
database table so on the left hand side
here we have a database table with three
columns so the first column is the ID of
the country the name of the country and
the third column contains the path to
the respective country flag so let's see
how to achieve this the first step here
is to create this database table itself
which I have already done and here we
have the create table scrap another
thing that I have done is created the
stored procedure notice the stored
procedure has got a single input
parameter name for example if we pass
letter C as the value for this name
parameter then this stored procedure is
going to retrieve all the country names
that start with letter C notice here we
are using the sequel server like
operator along with the wild-card at
symbol so for example if we pass letter
C as the value and if we execute the
stored procedure notice that we get all
the countries that start with letters
saying so now let's flip to visual
studio here I have an asp.net web
application project within the web tour
config file I have included a connection
string to our sample DB database so the
next step is to add a folder to this
project and this folder is going to
store all the respective country flags
so I'm going to name it flags and on my
local machine here within the images
folder I have four different country
flags so I'm going to copy these flags
and paste them into this Flags folder
within our project okay so we have got
four country flags so if you look at the
data right here look at the flag path so
this Flags folder this actually plays
within the root directory of a web
application project and the part is like
flags for /flags 4 /fontbbox right here
so these parts should match you know the
data that we have here right the next
step is to add a class file to a project
and let's name this country dot CS and
this class is going to have three
properties and the first one is going to
be of type integer and this is going to
be the ID of the country and the next
property is going to be of type string
and let's name it name so this is going
to represent the name of the country and
finally flag apart okay so these three
properties within this class represent
these three columns in this table so we
have our country class here the next
step is to add a web service to our
project and this web service is going to
talk to the database and retrieve the
country data from our countries table so
let's go ahead and add our web service
and let's name this country service dot
ASM ax and we want this web service to
be callable from scripts so I'm going to
uncomment this attribute right here so
we're going to write some Adia dotnet
code and in the interest of time I have
already typed the required ad or dotnet
namespaces here so we need system
configuration systems or data system dot
data dot cql client and system dot web
dot script or serialization namespaces
let's go ahead and change the name of
this function to make it meaningful so
we want to retrieve country so I'm going
to call this get countries and we don't
want this function to be returning a
string they're not going to return
anything and we don't want to retrieve
all the countries we only want to
retrieve those countries which match the
characters that the user has typed so we
are going to pass a parameter which is
going to contain those characters and
name this term and within the function
we're going to write some ad or dotnet
cord again in the interest of time I
have typed all the required ato dotnet
code so I'm going to copy and paste that
here and if you look at this this is
straightforward ATO dot encode so we are
reading the connection string from web
config file and then we are creating a
list of country object we named it
countries so this object is going to
store the countries that we want to
return back and then we are creating a
sequel connection object and then
creating a sequel command object using
this sequel command object we want to
execute the stored procedure SP get
countries that we have here and since
that is a stored procedure we are
telling that the command object using
the command type property and this
stored procedure has got a single input
parameter name so we have to create a
sequel parameter object the name of the
parameter is name and the value is
coming from this term parameter okay and
then we are associating this parameter
object with the command object opening
the connection executing the command and
then we are looping through each row
that we retrieved from the dabei
creating a country object populating all
its three properties that is ID name and
flag path and adding that country object
to the country's collection object that
we have created here once we are done
looping through and adding all the
country objects to the countries then we
are passing that to this he realized
method of the JavaScript serialize a
class which is going to serialize the
countries object to a JSON string and
write it to the current response strain
so let's go ahead and quickly test over
web service so now to this web service
we should be able to pass you know the
country name characters like letter C
for example and we should get back all
the countries that start with letter C
all right so a web service is working
now let's go on to the web page itself
so we need some text to prompt the user
to enter country name and then a text
box let's give an ID to the text box
let's call it txt name
and the type is going to be text okay
and let know a jQuery ready function
let's find the textbox using its ID so
the idea is txt name and on that I'm
going to call jQuery autocomplete widget
function and we need to specify our
options just like any other jQuery UI
widget so the first option here is going
to be min length so as soon as we type
one character we want this addition so
the minimum length is going to be 1 and
the source for the data so what is the
source going to be the source is
actually going to be a function and this
function is going to have two parameters
the request object and the response
function now what we want to do we want
this function to actually issue an ajax
call and retrieve data from the web
service so let's use the jquery ajax
function and we have to specify the
options for this Ajax function the first
option is going to be the URL that we
want to call so the URL is going to be
our country web service or country
service dot a SMX so that's the web
service that we want to call and within
that web service we have a function and
the name of the function is get
countries so let's copy that
so that's the URL we want to call and we
want to issue a post request so method
is going to be post and the data that we
want to send to the server is so if you
look at this gate country's function it
has got a parameter and the name of the
parameter is Tom so we want to send the
data to that parameter so term is the
parameter and where is the value going
to come from now the value the user will
type it in the text box so there are
several ways you can retrieve it from
the text box and one simple way is by
using this request object so this
request object is going to have term
property and that property will have the
value that the user has typed in the
text box okay and so that's the data we
want to
and to the server and what is the data
type that we are expecting back from the
server
we are expecting JSON data once the
request completes successfully then we
want to receive that so let's associate
a callback function so this is the
function that will be called when the
request completes successfully and this
data parameter is going to receive that
data from the web service what are we
going to do with the data we are going
to pass that to this response function
so we have a response function here
let's pass that to that function now
what we are passing to this response
function so this is going to determine
what to do with that data it will be
displayed as such since within the text
box but then this object it's actually a
JSON array that contains you know
country objects and country object is a
complex property complex object and we
have not specified which properties of
that a complex object should be
displayed as suggestions right so in
order to do that and in order to control
what is displayed as suggestions within
the citations menu we are going to
extend one of the extensibility points
that are available within this
autocomplete widget one of the
extensively point is underscore render
item method so basically this method
controls the creation of items that are
displayed in the suggestions menu so
let's go ahead and extend that function
and the way we do that is look at this
this autocomplete call you know the
function is ending here so I'm going to
remove that semicolon there and then
press dot and call autocomplete function
once again and we want to extend the
current instance so this instance of the
autocomplete widget and the function
that we want to extend is underscore
render item so that is going to be a
function and this function is going to
have two parameters the unordered list
and the item so what is this item
parameter now what is the data that you
are passing to this the JSON array which
contain complex country object right and
this item is going to represent each of
that country object
now from this item property we can
retrieve the ID of the country the name
of the country the flag part as well so
this item represents each of that
country object and what is this
unordered list now this is going to
represent each item in the citations
menu so what we are going to do here is
we have to create a list item and that
list item will contain whatever HTML
that we want to display a suggestion and
you want to append that to this
unordered list and return that so we
have to create an unordered list so for
that first we need to create a list item
so I'm going to create a list item li
and what do you want within this list
item now what do we want to display we
want to display the country flag and you
know the name of the country so to this
honored list item I'm actually going to
append an image element so let's create
an image element and an image should
have a source so image source equals and
where are we going to get the source now
if you look at this flag path property
of the country object that has the image
source right so it has the image path so
what I'm going to do is use this
property and retrieve the respective
country image path so we have this item
object which is representing each
country object the data that we received
from the server and we know that it will
have this flag path property and that
will be the source for the image ok and
to that let's also say for example if
the image is not found then we want to
display the alternate text for the image
and if you want what you can do is you
can have another column in the table and
specify what you want as the alternate
text here but to keep this example
simple I'm going to use the name of the
image as the alternate text which will
be displayed in case if the image is not
found for some reason so alternate text
equals item dot name okay so we have the
image element source attribute is set
alternate attribute is set all that is
left is now is to close that image
element
okay so within the list item at the
moment we've got an image element so we
need a plus symbol here and to this next
to the image what do we want we want the
name of the country right so I'm going
to append an anchor element so let's
create an anchor element and inside that
I enter element I want to display the
name of the country and then let's close
the anchor element okay so what do we
want to do with all this HTML so within
the list item we have the image which
will display the country flag and then
we have the name of the country we want
to append this to this unordered list
and return that so we have the return
keyword here on the front
so all this HTML I am going to append to
the unordered list and we will return
all that HTML so this is what now is
controlling what will be displayed in
the citation menu so we are extending
underscore render item function so with
all this let's go ahead and run our page
now look at this as soon as we type
letter C now we are getting the country
flag and the name of the country right
now the images are of different sizes so
it's not pretty so what we want is
something like this you know a
consistent image size so to control the
height and width what I'm going to do
here is specify a style class with no
page so let's include a style section
and I'm going to include a class let's
call this image class you can give it
any meaningful name you want and what do
we want to do we want to set the width
so let's set the width to 16 pixels
maybe and height also to 16 pixels and
now between the image and the name of
the country we want some space so for
the image I'm going to set padding right
to 3 pixels maybe so padding right 3
pixels
all right and I'm going to apply this
image class to our image element right
here so I'm going to set the class
attribute and the class is going to be
image class so let's save our changes
reload this page and look at this when
we type letter C now we have consistent
size but there is a shortcoming here now
look at this as the items in the
suggestions menu receive Brokers the
text of the country you know whatever
item you have selected it's not updated
within the textbox we want that to be
updated now when an item in the
solutions menu receive focus it raises a
name and then that's called the focus
event let's go ahead and handle that
focus event so I'm going to handle the
focus event and this is going to be a
function and again this function is
going to have two parameters the event
object and the UI element that triggered
the event so what do we want to do you
know when an element receives focus now
the textbox so this is going to
reference the textbox on which we are
calling autocomplete that is our txt
name textbox so we want to set a value
for that and the value is going to be so
we are going to make use of this UI so
basically that's the element that
triggered the event and this is going to
have item property and the item here
again represents our complex country
object and that has name property so we
want to display the name you know in the
text box as the items in the suggestions
menu receive focus and final thing that
you want to do here is return false from
this function okay so let's save our
changes reload this page and look at
this as we type and as we scroll now
look at this as the item receives focus
that's updated within the textbox now
look at this when I select an item you
know the selected item is not populated
here so we have to handle another event
to make that happen so there is another
event called select so this is triggered
whenever you know we select an item from
the suggestions menu so the even handler
is going to be very similar all right so
let's save the changes reload this page
and look at this when we type letter C
you know when we select a knight 'm that
item is populated in the text box now
this is a bit of a redundant code we can
actually move it to a common function if
we weren't so within our jQuery ready
function let's create another function
let's call this update text box and
within this function so this function is
going to have these two parameters
you've earned and the UI object so let's
pass those two parameters and then we
will you know copy this common code
right here and then we can specify this
function you know as an event handler so
now you know that duplication is removed
all right so let's save our changes
let's run this page one more time and it
should behave exactly the same way okay
now for some reason you know in the
suggestions menu at the moment look at
this we have an image and the country
name for some reason if you also want
the country ID along with the country
name you know you can very easily change
you know the code within this function
let's say I want I term dot ID so to
that we want to append maybe a dash and
then the country name okay
so now what is this going to do this is
going to display the country ID as well
as country name and the flag okay and
within the text box if you want country
ID - country name then you can update
that right here within the function so
here we are just populating a UI dot
item dot name if you want the ID as well
you can do you.why dot item dot ID + you
know let's up in the - and then the name
of the country so now the text box
should
we've both the country ID and the
country name so here we have the
webservice code here we have the jQuery
code HTML and CSS thank you for
listening and have a great day</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>