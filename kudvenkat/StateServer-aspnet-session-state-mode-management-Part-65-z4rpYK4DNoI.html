<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>StateServer asp.net session state mode management   Part 65 | Coder Coacher - Coaching Coders</title><meta content="StateServer asp.net session state mode management   Part 65 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/kudvenkat/">kudvenkat</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>StateServer asp.net session state mode management   Part 65</b></h2><h5 class="post__date">2012-12-01</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/z4rpYK4DNoI" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">welcome to prism technologies I am
venket this is part 65 of asp.net video
series in this session we'll discuss
about the state server session state
mode before continuing with the session
I strongly recommend to watch part 62 63
and 64 of this video series now in the
previous session of this video series we
have discussed about the in proc session
state mode when we use in proc section
state mode the session state variables
are stored on the web server memory
inside the asp.net worker process the
main disadvantage of using in proc
section state mode is that when the
worker process recycles the session
state variables are lost now let us see
how to use state server as the session
state mode and the advantages and
disadvantages of using state server when
the session state mode is set to state
server the session state variables are
stored in a process called asp.net state
service this process is different from
the asp.net worker process now let's see
what is this asp.net state service this
asp.net state service is actually a
vendor service okay the first step in
configuring this session state mode S
state server is to actually start this
asp.net state service by default when we
install in order to frame work this to a
speed or net state service also gets
installed on the machine all we have to
do is we have to start the service and
to start the service click on start
button type run hit enter in the run
window type services dot MSE click OK
that's going to open the services
management window and within the service
look for asp.net state service ok by
default this service will be stopped you
know start the service that's the first
thing so click on start that should
start the asp.net service now when we
set this session state mode to asp.net
state server then all the session
variables are going to be stored in this
service instead of the asp.net worker
process okay so that's the first step
and the next step is within the web dot
config file so we set the sessions to
mode two state server instead of intro
and then okay now on my machine on this
look and machine you know the web server
is on the same machine the state server
is also running on the same machine I
mean the state service is also running
on the same machine so but in reality
you might have a dedicated machine as a
state server okay in that case you have
to specify the state connection string
okay now if you look at this on my on my
machine the state server and the web
server are the same okay the same
computer so what I'm going to do is I'm
going to set the state connection string
is equal to tcp/ip and which is equal to
state server on my machine it is
localhost colon and this port number the
specific port number four two four two
four okay so I'm going to set that TCP
IP is equal to you can give ADA the name
or the IP address of the machine that is
going to act as your asp.net state
server in my case it's going to be
localhost so I'm going to say localhost
but in reality it could be a dedicated
server in which case you give the name
or IP address of that dedicated server
localhost colon four - four - four
that's the port okay so that's all there
to it so we have configured this asp.net
web application to use state server as
this session state mode the first step
is to start the service itself set the
mode to state server set the state
connection string so where is the state
server running on localhost at this port
number if it's a different computer
that's present in a network you give the
name or IP address of that computer and
that port number that's it now let's go
ahead and run this application as it
stands so when the wave form loads we
can enter the name and email so let me
enter the name as presume an email as
presume a pledge I'm dead calm I click
on this go to their form - on webform -
we can see the name and email now
obviously on the button click as you
know you know the name and email are
stored in the session variable so where
are the session variables stored now
since the session state mode is state
server
they will be stored in the asp.net state
service so inside this service their
store now not in the asp.net worker
process so if I go to task manager show
processes from all users there is this
w3 w p dot exe which is the asp.net
worker process that is used to run a
speed or net web applications if I set
the session state mode to in proc then
the session variables are stored here so
if this process recycles we have seen
that in the previous session what
happened the session state variables are
lost but now the application is using
States over a secession state mode so in
this case the session variables are
stored in this service so even if the
worker process recycles so I'm going to
stop this so I'm going to end this
process so that's killed
now I go to I go back to the application
and I press enter look at that I still
retain my session variables why because
they are present in a different process
okay in this service that's why you know
the it's a it's a little reliable now
okay so it it survives the asp.net
worker process recycling the session
variable survives that okay so when the
session state mode is set to States over
the session state variables are stored
in a process called asp.net state
service this process is different from
the asp.net worker process the asp.net
state service is actually a vendor
service and this asp.net service can be
present on a web server or it can have
its own dedicated machine now we
discussed about web form and web card
and in the previous sessions web garden
is a situation where the web application
is deployed in a silver with multiple
processors whereas web form is you know
a web application that is deployed on
multiple servers okay so this is well
how we configure asp.net web application
to use asp.net States over first we have
to start the asp.net state service in
asp.net web config set session state
mode to State so
and set the state connection strength to
tcp/ip the name or IP address of the
asp.net state server : port number 4 - 4
- 4 ok what are the advantages of using
state server session state mode asp.net
worker process independent ok so when we
use this state server as the session
state mode its independent of the worker
process it survives worker process
restart and we have just seen that and
it can be used with web farms and web
gardens we will have no problem with web
forms in web gardens because why let's
assume this is our state server and
let's say this is a web form situation
because the web application is deployed
on three different web servers now let's
say we have a client here he requests
web form 1 so we're from 1 comes back
you know the request goes to the web
server 1 that's the first request so
this user doesn't have a session so it
establishes a session a session ID you
know gets sent back to the client
which is stored as a cookie on the
client computer and then on webform 1 he
enters the name and email and then he
submits the client submits and the
request goes to the same server let's
say the network load balancer sends the
request to the same web server and then
you know he presses f5 ok now when the
request goes to the same web server look
at that on on the click of waveform 1
button we are storing the name and email
in the session variables so that gets
stored this web server will store 2
session variables in the state server
here
okay it's not stored on the web server
now ok so when the request you know when
this client now refreshes waveform 2 in
the browser
you know the request goes to let's say
web server 2 here now this also this web
server 2 also has the web config file in
which we it knows to which server to
contact to to get you know the session
state variables because in web config
file no web config file like this will
be present on all these servers and
within that web config file you have the
state connection string which will tell
the name of the machine you know which
has got the asp.net States of
joining in this case it's going to be
this one so this web server will contact
that state server get the state
variables and return them back to the
client even if the request goes to the
third web server it's going to be the
same thing that's why if we choose you
know state server which is an out of
process session state mode you know it's
going to be available in a web form or a
web garden situation as well state
server offers more scalability than in
proc and that makes sense because you
know we have a dedicated state server
now so obviously if if there are more
users more session variables are created
you know the web server is relatively
free this the memory and the web server
is not affected it's only the state
servers memory that grows up in size but
web server memory is there to serve you
know to process the request so it's
definitely state server offers
definitely more scalability than in proc
session state mode what are the
disadvantages of using state server
state server is slower than in proc okay
because in proc is the best in terms of
performance but since now we have a
different server to communicate with you
know state service is a relatively
slower than in Prague and complex
objects needs to be serialized in
deserialized
within proc we don't have to you know
serialize and deserialize even the
complex objects but with state server we
have to do that with states over and
sequel server and another important
problem here is you know the state
service on a dedicated machine for some
reason if the state service itself
recycles look at that I'm going to
restart the service if I restart the
state service look at what's going to
happen when I request this the variables
will be lost now look at this all the
web servers will be affected all session
variables will be lost and all the web
servers will be affected we have a
single point of failure there okay so
that's another disadvantage if the state
service on a dedicated machine and if
the server goes down all the sessions
are lost
on this slide you can find resources for
asp.net c-sharp and sequel server
interview questions that's it for today
thank you for listening have a great day</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>