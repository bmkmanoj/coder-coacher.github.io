<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Application pools in IIS Security   Part 84 | Coder Coacher - Coaching Coders</title><meta content="Application pools in IIS Security   Part 84 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/kudvenkat/">kudvenkat</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Application pools in IIS Security   Part 84</b></h2><h5 class="post__date">2012-12-16</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/O-ATIKcu0ME" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello welcome to presume technologies I
am venket this is part 84 of asp.net
video series in part 82 of this video
series we discuss the basics of
application pools and in part 83 we
discussed about achieving applications
isolation using application pools in
this session we're going to discuss
about configuring different levels of
security for different application pools
let's understand that with an example
first you know I'm going to create
within C Drive I have this data folder
and within this folder I am going to
create a new text document let's change
the name of this one to application one
data I'm going to change the extension
from txt to dot XML okay change that
open that with notepad so open with
notepad and let's copy the XML that I
have if you look at this it's some
countries data where we have country ID
name and the continent to which it
belongs I have four countries there so
I'm going to copy that and paste that
into that application one data dot XML
save it close the file and then let's go
back to this data folder make a copy of
this file and rename that to application
to data dot XML so if you look at this
both of the files has got the same data
it's just that I have two files you know
the table keishon one data dot XML an
application to data dot XML okay
now let's flip to visual studio now here
I have an asp.net web application
project with named web application one
and on this Web form I have a grid view
control it takes a file upload control
and a button control the text on the
button is read data and label control
here okay
so let me double click this button
control now look at this on the page
load what we are doing we are printing
the name of the windows identity that is
used to execute this application code
okay and to do that we are using the
windows identity class that's present in
systems or security dot principle
namespace ok alright so now what we want
to do now when we run this application I
will be able to select a file you
in this file upload control you know
either this file or this file and then
when we actually click the read data
button we should read the data from the
respective XML files and display that
within the grid view control let's see
how to do that okay
so if so the idea of the file upload
control is file upload one if that has
file that's going to return true this
has file is a boolean property it will
return true if it has a file else if we
don't have a file then in the label
control we want to show a message to the
user saying please select a file first
please select a file first okay and then
if you know the user has selected a file
then what we want to do we want to
create a data set and by the way the
data set is present in systems or data
namespace so we have imported that so
let's say data set D s is equal to new
data set and let's use the read XML
method to read the XML data from that
folder so d s dot read XML and I'm going
to give the absolute path here C colon
backslash backslash and the folder name
is data so backslash backslash and to
that path we are going going to append
at the file name so file upload one dot
file name so we will get the file name
from the file upload control so after we
read the data into the data set we are
going to set that as the data source for
the grid view control so grid view one
that data source is equal to data set
and finally invoke the data bind method
okay and then we are going to set the
label one dot txt to empty just in case
if there is anything within the label we
want to wipe that out okay so very
simple code let's go ahead and run that
but before that let's configure a
virtual directory within I ass okay and
the easiest way to do that is to go to
this web application project go to the
properties and then within the web tab
instead of using the visual studio built
in development server I am going to use
a localize up so
and then click create virtual directory
so within is they should create a
virtual directory with name web
application 1 ok open is and to do that
click on start type run and within the
run window type I net MGR and then click
ok so that should open up is and within
is you know within this default web
sites folder refresh that we should see
an application created ok now let's go
ahead and create an application pool
first okay so these are the built-in
application pools let me add an
application pool and I'm going to call
this application one pool and let's
select the dotnet framework version as
4.0 click ok so we have application 1
pool there and it doesn't have any
applications at the moment so we want to
associate this application with that
application pool and how do we do that
right click on the application manage
application advance it settings and here
you know you have the application pool
click on the ellipsis button and from
the drop-down list select the
application one pool so that's it so we
have associated now this web application
one with application 1 pool ok now let's
go to web application 2 so I have
another web application to project
created here on this web form I have the
same set of controls and when I click
this button control you know let's
change the text basically to plus f4 and
change the text to read data and then
empty the text property of this label
control ok so this application is also
going to do essentially the same thing
so I'm I'm actually going to copy the
code from here and paste it in web
application 2 so we have two
applications doing the same thing okay
so data set is in its present in systems
or data a namespace so let's go ahead
and import that so system dot data ok so
i have web application - and web
application 1
doing exactly the same thing okay and we
have two files here application one data
or XML and application two data XML now
within is let's go ahead and create
another application pool with name
application to pool so ad application
pool and I'm going to call this
application to pool and let's select
dotnet framework version 4.0 okay so we
have two application pools and let's
create a you know an application within
is and to do that we can do that
directly from visual studio as well so
let's go to the properties of the web
application project and within the
properties go to the web tab I'm going
to select use local I as web server
click on create virtual directory this
should automatically create the virtual
directory with an IAS refresh the
default website folder there and we
should see web application too and we
want to associate this to this
application to pool at the moment there
are no applications you can see that's
zero at the moment but we want to
associate web application to with
application to pool and to do that right
click on that select manage application
go to advance it settings and we can
change the application pool by clicking
on this ellipsis button from there
select application to pool okay so I
hope you understand the setup at the
moment at the moment we have two web
application projects web application one
and web application two and these two
web applications are deployed to iis and
within IIST
i have two virtual directories here and
these two applications are mapped to the
application pools here so web
application one which is pointing to web
application one on the hard disk is now
mapped to application one pole and web
application to is map to application to
pool now let's run one of the
applications okay let's run web
application one so when we run this we
should be able to select the file from
the file upload control so no file
chosen at the moment choose file and
from C data I'm going to select
application one data click on read XML
so it's using okay by the way look at
what's this doing this is still running
of the building
in Visual Studio we don't want that we
wanted to use the local is so save the
settings we haven't saved that's why it
was using the visual studio built-in so
plus a control f5 so the application
should run and once it loads up let's
select the file application one data dot
XML read data so we have read the data
and displayed it and look at the
identity it's using application one pool
is a pull back slash application one
pool now let me select application two
data file and click on read data look at
that I again get you know I basically
web application one is able to select
both application one data tour XML as
well as application two data edit XML
and along the same lines if I run web
application to it is also going to be
able to select both of the files you
know it it also reads data from both of
the files now I don't want that web
application one should be able to access
only application one dot data
application one data dot XML and web
application two should be able to access
only application 2.2 data XMR you know
web application one shouldn't be able to
access application two data XML okay so
look at that application to it's able to
read data from application one data and
I can do that with two data as well okay
so basically I want to prevent that web
application one access only this file
web application to access only this file
web application two tries to access this
file we should throw an exception let's
see how to do that okay now the most
important thing to notice here look at
that web application - is running using
the application to pool identity and web
application one is running using
application one pool identity so that's
that's the key to solving this problem
so obviously what we do we will set
security to this windows identity
account so I go to the file system here
I select application one data dot XML at
the moment
by default this file is accessible by
both the accounts so what I'm going to
do I'm going to right click on that
okay let's go here copy the name of the
account from here so that's the name of
the account or the Windows identity that
is used to execute the application code
so what I'm going to do so that is is
application one pool so web application
one should have access only to
application one data that XML shouldn't
be able to access application two data
dot XML so I right click on that go to
properties and within the Security tab
I'm going to edit that ad and within
this window paste the account name and
click on check names look at that there
is that name click OK now here in the
permissions list I'm going to deny
permissions for application one identity
to this application to data dot XML
click OK it gives you a warning because
deny permissions will have will take
precedence over any of the permissions
that are already there so I click OK
ok so we are explicitly denying access
to application one identity ok along the
same lines what I'm going to do for
application one we will deny access to
application to identity so I'm going to
select that go to properties security
click on the edit button and click Add
paste the name there but this time it's
going to be application to pool check
names click OK and deny access click
apply s on the security 1 and click OK
and ok so that's it now let me go ahead
and run let me close this window let me
run the application web application 1
once again so when we run this let me
select the file I'm going to select
application 1 data so this is
application 1 accessing application 1
data that XML I click read data very
good it should read that but then let me
select application 2 data dot XML click
read data look at that I get an error
system dot unauthorized exception
because we have explicitly denied access
to you know application to identity for
this file that's why we get that manner
message look at that we are able to
control security based on the
account that is used to execute the
application code okay now showing the
seller screen of death to the end-users
is bad we can easily catch this
exception and show a meaningful error
message to the user and how do we do
that within the code and we'll wrap this
code in a try-catch block so i'm going
to put that in a try block and a catch
block okay actually I have that typed
just to save some time here so obviously
the exception that we have seen on that
ello screen is system dot unauthorized
exception if that's the case catch that
and in the label display message saying
you do not have access to this file if
it is any other exception apart from
that we just display a message saying an
unexpected error has occurred please
contact administrator so let's save that
and run it now so this is application
one this will be able to access only
application one data that XML so reading
fine let me select application two dot
XML read data we get that message you do
not have access to this file along the
same lines if we run web application two
as you might expect this application now
look at that that's the identity that is
used to execute this application code
and we said you know for for that
identity deny access to application one
data dot XML file okay so choose file if
I select application one data dot XML
click that I straightaway get the error
okay and again to hide this error you
know we can use the try catch block look
at the exception system dot unauthorized
exception on the other hand if I select
application to data dot XML read data
it reads fine okay so in this session we
have discussed about configuring
different levels of security for
different application pools on this
slide you can find resources for asp.net
c-sharp and sequence of interview
questions that's it for today thank you
for listening
have a great day</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>