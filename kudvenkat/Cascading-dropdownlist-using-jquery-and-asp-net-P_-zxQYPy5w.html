<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Cascading dropdownlist using jquery and asp net | Coder Coacher - Coaching Coders</title><meta content="Cascading dropdownlist using jquery and asp net - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/kudvenkat/">kudvenkat</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>Cascading dropdownlist using jquery and asp net</b></h2><h5 class="post__date">2015-07-29</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/P_-zxQYPy5w" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">this is part one zero four of jQuery
tutorial in this video we'll discuss how
to create a cascading drop-down list
using jQuery and asp.net so here is what
we want to achieve on the web page right
here notice that we've got three-door
boundless continent country and city
when the webform initially loads only
the continents drop-down list should be
populated and enabled countries and
cities drop-down lists should be
disabled and they should not allow the
user to make any selections from those
two drop-down lists once I make a
selection within the continent at that
point the country drop-down list should
be enabled and it should be populated
with the countries that belong to the
selected continent the same logic
applies to the city drop-down list so
let's see how to achieve this the first
step here is to create the required
database tables to store continent
country and city data I have already
done that and here we have three tables
TBL continents countries and cities so
if you look at the continents table here
we've got the continent ID and the name
of the continent and here is the
countries table if the country ID
country name and the continent ID to
which that country belong to so this
continent ID is a foreign key
referencing the ID column in TBL
continents table similarly we have the
city's table so CD ID city name and the
country ID to which that city belong to
so this country ID is a foreign key
referencing the ID column in countries
table and here is the sequel script to
create those tables and populate them
with test data
I'll have this entire sequel script
available on my blog and another thing
that I have done is created these three
stored procedures look at the first
stored procedure it is SP get continent
so it's going to get all the continents
from TBL continents table so if we
execute that we get all the three
continents and we have the second stored
procedure here SP get countries by
continent ID so we give the stored
procedure a continent ID and the stored
procedure is going to return ID name and
continent ID from TBL countries where
continent ID equals at the continent ID
whatever value a power
for example if we pass continent ID 2
then we should get all the con trees
belonging to that continent ID so
similarly we have another stored
procedure as we get cities by country ID
you give it a country ID and this tour
procedure is going to return all the
country I mean city is belonging to a
given country ID so for example I pass
country ID 5 5 and we get all the cities
belonging to country ID 5 so that's it
from the database I'd create the
database tables and create those 3
stored procedures now let's flip to
visual studio so here I have an asp.net
web application project within the web
config file I have a connection string
that points to our database and the next
thing that we want to do is add three
classes so let's add a first class and
let's name this continent so this class
is going to contain two properties so
the first property is going to be of
type integer and this is going to
reference the ID of the continent and
this will remain an auto implemented
property and the second property is
going to be of type string and this is
going to represent the name of the
continent okay now I'm actually going to
copy these two properties because our
country class also require these two
properties so let's add another class
and let's name this country dot CS and
this class is also going to have country
ID country name and we need another
integer property and that is going to be
the continent to which that country
belong to so the continent ID and we
need similar properties in the city
class so let's go ahead and add our city
class so add you want to add a class and
this is going to be city dot c s and
again city class will have CD ID city
name and the country ID to which the
city belong to the next step is to add a
web server
so let's go ahead and add a web service
and let's name our web service data
service so first of all we are going to
write some ad or dotnet code and in the
interest of time I have already typed
the required area dotnet namespaces so
we need a system configuration system
door data system door data dot sequel
client and system dot web dot script of
serialization and we also want this web
service to be called from the script so
I'm going to uncomment this attribute
right here and let's change the name of
the function first of all this function
is not going to return anything so let's
change the return type to void and let's
rename this function to get continents
so this is going to return us all the
continents and within the function we
want to write ad or dotnet code it has
got nothing to do with jQuery so I have
already typed that in the interest of
time and if you look at the code right
here its straightforward we are reading
the connection string from web config
file we are creating a list of continent
object we named it continents and then
we are creating a sequel connection
object using the connection string that
we read from the web that config file
and then we are creating a sequel
command object and using this command
object we want to execute SP cap
continents stored procedure which is
going to return us all the continents
okay and since that is a stored
procedure we have to tell that to the
command object and we are opening the
connection executing the command while
we are looping through each row we are
creating a brand new continent object
populating its ID and name properties
and adding that a continent object to
the continents collection property that
we have created here and then we are
passing that continents collection
object to the serialized method of the
JavaScript serialize class which is
going to serialize that object to a JSON
array and write it to the current
response stream okay so pretty
straightforward web method there now we
need two more methods like this that is
to retrieve countries by continent ID
and cities by
country ID so let's make a copy of that
function and I'm going to change the
name of this one to get countries by
continent ID and to this we have to pass
the continent ID and the same idea this
time distort procedure that we want to
execute is a different stored procedure
and that is sp get countries by
continent ID and if you look at the
stored procedure it has got a parameter
so we need to create a sequel parameter
object as well so let's go ahead and do
that
so I'm going to create a sequel
parameter object let's call this Bram
equals new sequel parameter and let's
specify the parameter name so parameter
name equals was the name of the
parameter it's at continent ID and where
is the value for this parameter going to
come from it's going to come from the
method parameter that we are going to
pass to right so continent ID so let's
pass that here that's it we have the
parameter object we need to associate
that with the command object using the
parameters collection property so
commander parameters dot add and what is
the parameter that we want to add Aram
okay and then we are opening the
connection executing the reader and
another important thing that we need to
do here is here we have a list of
continent object but that's not what we
want we want to return the list of
countries belonging to a given continent
so this has to be a list of country so
let's change the name of this variable
to countries okay and I want to change
all instances of continents to countries
so I can actually plus control dot now
and I get you know the prompt to rename
the instances so I'm going to select
this rename continents two countries so
list of country countries equals new
list of country and then as we are
looping through what do we want to do we
don't want to create a continent object
instead we want to create a country
object so country equals new country and
let's change the name of the variable to
country okay and look at that red that
rectangle underneath why now that means
I can press control dot now to get that
prompt to change the name of that
variable - you know from continent to
country in all the places so that's
going to flip the name for me
automatically so I don't have to type
that manually all right so we are
populating the country ID country name
and we have one more property that is
the continent to which the country
belong to so country dot continent ID
equals now the name of the column is
also continent ID okay so we have the
country object we populated its
properties added to the countries
collection and then we are passing that
to the serialized method same idea now
we need one more such method so let's
make one more copy of this function and
paste it right here and let's change the
name of this function to get cities by
country ID okay and what do we need to
pass we need to give it country ID okay
so very similar method so here we need
list of City objects and we want a list
of City here and let's change the name
of the variable to cities and let's
change all the instances okay and this
time the stored procedure that we want
to call is a different one and that is
sp get cities by country ID so let's
pass that here and again this is a
stored procedure and this stored
procedure also has a parameter and the
name of the parameter is at country ID
so let's specify that here and the value
is going to come from the method
parameter country ID
okay and we are adding that to the
command object opening the connection
executing the reader and here what do we
want to do we want to create a city
object okay and we want a new city let's
change the name of the variable to city
and rename all the instances of that to
city okay
and we're adding the city object here
the property is country ID so city dot
country ID equals the name of the column
is country ID so we are adding it to the
city's collection and we are passing
that to the serialized method so pretty
straightforward so at the moment within
the web service we've got three methods
that are going to give us continents
data country data and cities data let's
quickly test them to make sure they work
as expected so first get continents look
at that when I click on that we should
get all the continents now let's go back
and test the other methods so we tested
get continents let's test get countries
by continent ID so this function has a
parameter let's pass a value let's pass
five for example I mean we don't have
five as the continent let's pass two and
we get the continents I mean the
countries that belong to continent ID -
finally let's test get cities by country
ID so let's pass now four as the city ID
country ID and look at that we get all
the cities belonging to country ID four
so a web service now is working as
expected let's flip to a web form so on
the web form right here I already have
got some HTML let me quickly run this
and see what we have on the UI and we
will discuss the HTML so we have got
this little text continent and a
drop-down list similarly country
drop-down the city and drop-down list
and all this text and these drop-down
lists are actually present inside a
table and this table has got as you can
see here three rows and each row has got
two TDs so in the first TD we have the
literal text and the second TD we have
the Select element and look at the IDS
of the Select elements continents
countries and cities okay so that's the
HTML and the moment if you look at the
width
it's the minimum because we have no data
now let's actually set a common with for
all these select elements so what I'm
going to do here is within the head
section let's include a section for
styles and I'm going to specify the
width for all the select elements so
let's set the width to 150 pixels so
let's save those changes and reload our
page and all of them have the same width
now with no jQuery ready function so
what's the first thing that we want to
do so here we have three drop-down lists
three select elements now I'm going to
cash these elements in a variable
because we will be referring them
referring to them multiple times there's
no point in looking them up in the Dom
every time so let's catch them in a
variable so I'm going to call the first
one countenance diría and the ID of the
countenance DDL is countenance
similarly let's find the countries and
cities DDR so countries DDR and the ID
of the countries element is countries
and for cities it is cities all right so
we have the Select elements cache now so
what do we want to do when the document
initially loads we actually want to load
the continent data and populate the
continents drop-down list so let's go
ahead and issue an AJAX request okay so
we are going to make an AJAX request and
the URL that we want to call is our data
service dot SMX so that's the name of
the service so let's copy that data
service dot ASM X and inside that
service we have got a function and the
name of the function is get continents
that's what we want to call and if you
look at the function it doesn't have any
parameters that means we don't have to
send any data to the server we want to
issue a post request so the method is
going to be posed and the data type that
we are X
acting from this server is Jason when
the request successfully completes this
is the callback function that is going
to be called and the data that we get
back from the web service will be stored
in this variable and we can process it
the way we want so what do we want to do
we want to you know loop through each
object that we get back and you know
convert that to an option and add it to
the countenance drop-down list right so
I'm going to use the jQuery each
function so dollar data dot each and
let's specify a function here so to this
each function we are going to pass the
index of the element and the element
itself so what are we going to get back
we are going to get back the continent
object right and notice this continent
object has got ID that is the continent
ID and name so now what we want to do is
we already have this continents
you know select elements or continents
DDL drop-down list dot I'm going to use
the append function here and what do we
want to append we actually want to
append an option element right so I want
to append a self-closing option element
okay
and what is the data for that going to
be so the data is going to be an object
so this object is going to have the
value property so that specifies the
value for the option the value is going
to come from this item object so as we
are looping through each item the
country on the continent object will be
passed and the continent object has got
the ID so we want that as the value for
the select option and what is the text
we want we want the item name that is
the name of the continent all right so
let's save our changes and run over
webpage now when the web page loads look
at that we get all the continents now
one thing that's missing here is look at
this within the continent the first
option is select content so we want that
to be the first option so what I'm going
to do
here is continents ddr dot append
actually let's make a copy of it to
speed things up so I'm going to use the
append function again you know outside
of the each loop and this time the first
option you know the value I want is
minus one and text is going to be select
continent okay
so let's save our changes and reload
this page now look at that we get select
continent as the first option and
another thing that we need here is
within the country and city drop-down
list we want select country select city
and both of them should be disabled so
we want to do a similar thing with the
countries and cities drop-down list
right so let's change the name here two
countries DDR and let's change this to
city Styria and for countries the prompt
should say select country and for cities
it should say select city and another
thing that we want we want those
drop-down lists to be disabled so cities
our country is DDR dot I'm going to use
the prop function and the property that
we want to set is disabled and let's set
it to true and we want to do the same
thing with this cities drop-down list
okay
so let's save our changes reload this
page and look at this now and the page
initially loads we have the continent
data country and city drop-down list are
disabled
whenever the selection in the drop-down
list changes so for example if I select
a continent then we want the country
drop-down list to be enabled we want to
display all the countries belonging to
that continent but if I select select
continent what should happen
we should empty the country drop-down
list and we should have only select
country and that should be selected and
the drop-down list should be disabled
okay so let's see how to achieve that so
we need to wire up change event with
the continent drop-down list so let's go
ahead and do that so here we have our
Ajax function which is retrieving us the
data for continents drop-down list so
now I'm going to wire up change event
with continents drop-down list so let's
go and handle that so what do we want to
do when the selection in the continents
drop-down list changes now first of all
we want to check the selected value and
how do we get the selected value we can
use dollar this dot Val function that's
going to give us the selected value in
from the continents drop-down list so if
that is equal to minus 1 that means the
user has selected the first option that
is select continent so what do we want
to do at that point so if somebody
selects select continent let's say I
select Europe and then I go back to
select continent what should we do we
should have both of them disabled and
the first option should be selected
country and select city respectively so
if they have you know if we have
populated any data within those
drop-down lists we want to wipe that out
and we want to kind of add that one
option select country or select city and
then set that as the selected value and
disable those selections I mean B
elements so first of all I am going to
find the country's DDL I'm going to
empty that ok and what do we want to do
we want to empty the cities TDL as well
and for the countries and cities DDL
so let's actually copy these lines
instead of typing them again so we want
you know select country and select city
options to be added because we cleared
all the options that we had in those two
drop-down lists and we want to set them
as the selected values so country is DDR
dot value I am going to select the first
option you know as the selected value I
am going to do the same thing with
city's DDR and we want them to be
disabled so again let's go ahead and
copy the code from here okay so that's
what we want to do if the selected value
is minus one LS what do we want to do we
want to issue an AJAX request retrieve
the country's belonging to the given
continent and display them in the
countries drop-down list so we're going
to make another Ajax request and in the
interest of time I'm actually going to
copy this code right here and paste it
within our else block right here okay so
this time the URL that we want to call
is a different one so the function is
going to be get countries by continent
ID so that's the function we want to
call and we still want to issue a post
request and this time that function
expects some data to be passed and that
is continent ID so let's go ahead and
pass the data so we're going to pass a
JavaScript object so the parameter name
is continent ID and to get the continent
ID we can use this dot Val so that
should written as the Select value right
and the type of data that we expecting
back from the server is Jason if the
request successfully completes so we get
the country's data so when we get
countries data what do we want to do we
want you now to empty the countries DDL
drop-down list let's go to an empty that
if there is already any existing data we
want to empty that and we want so we
don't want to do anything to the
continents drop-down list I'm going to
delete that line and we want to append
that select country as the first option
okay now we'll come back to the cities
drop-down list in just a bit let's
delete that for now and we don't want
countries drop-down list to be disabled
so I'm going to change the
- Falls because I made a selection in
the continent that means countries
should be enabled and it should be
populated with data and again just for
the time being let's get rid of this
cities drop-down list and now what we
are looping through we are looping
through each object that we get back and
the same idea to the countries drop-down
list we want to append the option the ID
of the country and the name of the
country all right so let's save these
changes now and reload our webpage and
look at this when I select it continent
look at that country drop-down list is
enabled and I see the countries
belonging to the given continent
similarly if I select another continent
look at that I have France now let's
select South America look at that it
goes back to select country and we have
a gen Dana you know the countries
belonging to South America alright now
we need to do the same thing for the
country drop-down list so let's wire up
change event handler when the selection
of the country drop-down list changes we
want to populate the cities belonging to
the given country in the cities
drop-down list okay so what we want to
do here is wire up change event handler
with the cities country's drop-down list
so let's make a copy of this and I am
actually going to change the name here
so this has to be countries drop-down
list so when the selection in the
country changes and if the selected
value within the countries drop-down
list if it is minus 1 right at that
point what do we want to do don't want
to do anything to the countries
drop-down list itself we want to empty
the cities drop-down list so we can get
rid of this you know anything to do with
countries you know we don't want to do
here so we want to empty the cities drop
down list we want to append select City
as the first option we want that to be
you know the first option to be selected
so the selector value should be minus 1
and we want
this city's dropdownlist to be disabled
because within the country drop-down
list
they selected select country okay on the
other hand if it is not minus 1 that
means they have selected you know any of
the countries a valued country at that
point we want to issue an AJAX request
and we want to call a different method
in our web service and that method is
get cities by country ID so that's the
one we want to call and we we still want
to issue a post request and the data
that we want to send to the server is
you know country ID so that's the name
of the parameter and we retrieve the
value the country ID from the drop-down
list they expect JSON data back and we
are getting you know data into this
callback function so what do we want to
do at this point we want to empty the
city's drop-down list and to the city's
drop-down list we want to append select
city as the first option and we don't
want cities drop down list to be
disabled so I'm going to set that to
false and we are going to loop through
each object and we want to append the
options to the city's drop-down list ok
all right so let's go ahead save our
changes and reload our page look at that
I select the continent and I have all
the countries belonging to that
continent so I select the country and
look at the cities drop-down list
I have the cities belonging to the given
country now if I go back and select
select country from the country
drop-down let's look at that cities
drop-down list is disabled and it's a
select city similarly if I go ahead and
select select continent from here look
at that
select country is disabled the moment I
select another country continent look at
that
it's enable and I see you know the
countries belonging to the selected
continent so I selected a country here
cities enabled let's go
add and change for example select
continent to select continent look at
that everything falls back
all right
thank you for listening and have a great
day</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>