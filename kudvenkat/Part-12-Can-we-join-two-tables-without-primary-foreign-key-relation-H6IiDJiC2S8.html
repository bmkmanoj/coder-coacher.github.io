<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Part 12   Can we join two tables without primary foreign key relation | Coder Coacher - Coaching Coders</title><meta content="Part 12   Can we join two tables without primary foreign key relation - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/kudvenkat/">kudvenkat</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Part 12   Can we join two tables without primary foreign key relation</b></h2><h5 class="post__date">2014-09-20</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/H6IiDJiC2S8" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">this is part well of sequence of
interview questions and answers video
series in this video well discuss if
it's possible to join two tables without
primary foreign key relationship let's
understand this with an example here
we've got two tables departments and
employees I've already created these two
tables here is the sequence clip to
create these tables
I'll have the script on my blog in case
you need it now if you look at the
department's table ID column within this
table notice that it is not marked as a
primary key column and look at the
employees table Department ID column is
not marked as a foreign key column now
in spite of not having that primary
foreign key relationship between these
two tables is it still possible to join
these two tables based on those columns
that is ID from departments and
department ID from employees the answer
is yes we can join tables without
primary foreign key relationship as long
as the column values involved in the
joint can be converted to one data type
now in this case my ID column data type
is integer and Department ID column data
type is integer so there is no need to
convert the values of these columns you
know they're already of the same data
type so join in this case it's still
going to succeed in spite of not having
that primary foreign key relationship
now if you look at the joint query here
notice that we are joining employee's
table with departments and a joint
column is ID column from departments and
Department ID from employees table and
the query is going to give us employee
names and their respective department
names now look at this when we execute
this joint query we get the output that
we expect in spite of not having that
primary foreign key relationship between
the two tables involved in join now the
columns involved in the joint that is ID
and Department ID the data type is same
that is integer now if the data type is
different is it still possible to join
these two tables the answer is yes now
let's actually prove that so here I have
got some sequel so let's copy this and
let's paste that within sequel server
management studio so basically here
two tables t1 and t2 t1 table has got
two columns the first column is ID which
is a data type is integer and the other
column is T one column one data type is
NV cap and similarly t2 data type I mean
T two table has got two columns ID
column
notice that the data type is decima and
then there is another column of type and
we're cap now what we want to do is join
these two tables based on the ID column
in both the tables okay so if you look
at the data type of ID column in this
table one it's India and in table two it
is decima okay let's see if the joint
succeeds and what we want to do is join
those two tables and retrieve T one
column one value from T one and T two
column one value from Table two so what
we want to do is select T 1 dot T 1
column 1 and T 2 dot T 2 column 1 from T
1 table join that with T 2 on T 1 dot ID
equals T 2 dot ID now the data type of
these two columns is different one
column data type is integer the other
column data type is decimal let's
execute this query and see if the joint
succeeds notice that we have a runtime
error let's look at that it says invalid
object name that's because we have not
executed this clip so let's actually
execute that script to create the tables
and now let's execute this joint we look
at this we get the output as expected
okay so in spite of the columns having
different data types is still able to
join them because you know this by D
column in T one can be very easily
typecasted to decimal data type okay so
the joint in this case also succeeds now
in this case both of the data types or
at least numerical data types now what
do you think is going to happen if one
of the data type is a text data type for
example let's change the ID data type in
table
- 2n we're care and try to execute this
joint currency if it succeeds now to
change the ID column data type to end
where care I already have this clip so
let's actually copy this and let's
execute it so now the key to ID column
data type is n where care now let's try
to execute this joint variant see if we
get the output look at that the joint
still succeeds in spite of having one
column data type as integer the other
column data type as n where care now
since ID column in table 2 is n where
care we can insert some text data into
that column so insert into T two values
so what we want to do is let's say we
want to insert xx for ID column and
maybe t2 value 3 so let's execute that
so the ruins inserted let's actually
select the data that we have so select
star from t2 table so look at that the
first two rows have got integer value
and the third row has got a text value
in spite of these two values being
integer they're still stored as text
data within the sequence of a database
table now look at this let's execute
this joint query and see if it succeeds
look at that we get an error it simply
says conversion failed when converting
the n-back high value xx to data type
integer so in this case it's not able to
convert the column values involved in
the join to one data type that is
integer right so that's why the joint
fails so is it possible to join two
tables without primary foreign key
relationship the answer is yes we can
join two tables with our primary foreign
key relationship as long as the column
values involved in the join can be
converted to one data type and we have
proved that with a few examples now the
immediate next question that comes to
our mind is if primary four
one key relationship is not mandatory
between two tables you know for a joint
to work then what is the use of these
keys primary key enforces uniqueness of
values over one or more columns in a
given table since ID is not marked as a
primary key in department's table
two or more departments may end up
having the same ID value which makes it
impossible to distinguish between them
based on the ID column value that's why
primary key is important to uniquely
identify a given row in a given table
now what is the use of foreign key then
foreign key enforces referential
integrity without foreign key constraint
on Department ID column within this
employees table it's possible to insert
a new row into this table you know with
a value for this department ID column
that does not exist in department's
table for example let's say John
Department ID is 100 now when I ask you
what is the department to which John
belong to no we wouldn't have an answer
because there is no row within the
department's table with ID of 100 which
effectively makes this employee record
and ours and record and as a result of
that notice that we will lose that
referential integrity right so that's
why foreign key is very important let's
actually prove that now look at this
within the implore employees table
Department ID column it's not marked as
a foreign key column so there is nothing
stopping us to enter any value for a
given Department so let me execute this
query so what are we doing here we are
inserting Meili record into employee's
table the department ID of 100 so when
we say select star from employees now
mary has got department ID of 100 so to
which Department does Mary belong we
don't have an answer so effectively this
rule has become an orphan row with an
employee's table so the referential
integrity of our database is lost okay
but if we had that you know foreign key
constraint on department ID column
when we try to execute this insert
statement it would have raised an error
stating that there is a violation of
foreign key constraint right and let's
also prove that
so let's first delete this row which
violates that foreign key constraint so
delete from employees wear ID equals 8
all right now let's mark the ID column
in Department's table as primary key for
that table and to do that I already have
the code so let's copy it so what are we
doing here we are marking ID column and
departments as primary key column and
the next step is to mark Department ID
column in employees table as 4nk so we
are making department ID with an
employee's table a foreign key and that
is going to reference ID column in
department's table all right now let's
try to execute this insert statement and
see if it succeeds look at that you know
we are not able to execute it says the
insert statement conflicted with the
foreign key constraint right so that is
the use of foreign key it enforces a
referential integrity constraint thank
you for listening and have a great day</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>