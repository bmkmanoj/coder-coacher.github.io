<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Caching multiple versions of user control using VaryByParam   Part 125 | Coder Coacher - Coaching Coders</title><meta content="Caching multiple versions of user control using VaryByParam   Part 125 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/kudvenkat/">kudvenkat</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Caching multiple versions of user control using VaryByParam   Part 125</b></h2><h5 class="post__date">2013-02-06</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/yWMrgmHJZWY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello welcome to freedom technologies I
am fainted this is part 125 of asp.net
video tutorial in this video we'll
discuss about caching multiple versions
of the user control using vary by
parameter of the output cache directive
in part 124 of the asp.net video
tutorial we discussed about caching
multiple versions with the user control
using vary weight control attribute of
the output cache directive if you
haven't watched that video I would
strongly encourage you to do so before
continuing with the session in this part
of the video we'll discuss about caching
multiple versions of the user control
based on the vary by parameter build of
the output cache directive let's quickly
recap what we have discussed in part 124
so on this platform one dot aspx you
know this entire section is coming from
the products user control and what
products that are displayed in the grid
view control is controlled by the
selection within the drop-down list at
the moment in the drop-down list we have
all selected so all the products are
displayed in the grid view control on
the other hand if I select iPhone as the
product within the drop-down list then
only that product details are displayed
in the grid view control okay now since
this drop-down list is controlling what
products have displayed in this grid
view control and since we want to
control you know caching of this user
control based on the selection in the
drop-down list
we used vary by control attribute so if
we want to cache multiple responses of a
user control based on a control value
within that user control then we use
vary by control attribute okay now what
will actually happen
if we use vary by param a tribute
instead of vary by control let's see
what's going to happen so now let's go
ahead at the moment you know we have
used the partial caching attribute to
enable caching so let me comment that
and then within the user control we can
specify caching using the output cache
director so output cache and let's set
the duration to 60 seconds
and let's use very by para em and then
let's set that to drop down list 1 so if
you remember in the previous session we
have used very byte control and we have
said that to drop down list 1 because we
want to cache multiple versions of this
user control based on the varying values
within the drop-down list ok but now
instead of using vary by control I'm
using vary by param you know as the
attribute and I'm I'm setting its value
to drop down list 1 now let us see how
the behavior of this user control is
going to be on that webform okay so I
run the application so instead of using
very weight control we are using very by
param and then we are specifying
drop-down list 1 as the value now look
at this if I change my selection in the
drop-down list you know look at this
every time I try to change my selection
it is reverting back to all and then it
is giving me that one cached response ok
so the user control caching is part
working as expected so if you really
want to cache you know multiple versions
of this user control based on a control
value within the user control then we
have to use vary by control attribute
not vary by param attribute ok and we
have discussed about that in the
previous session ok so the obvious next
question is when do we use vary by param
attribute with a user control ok the
answer is this actually this question
can be asked in another way when should
we use vary by / am a very big control
and vice versa or what is the difference
between vary by param and vary by
control in fact this is a very common
interview question as well now if you
want to cache multiple responses of a
user control based on a query string
value or a forum post parameter then we
use vary by param on the other hand if
we want to cache multiple responses of a
user control based on a control value
within the user control then we use very
big control and we have discussed about
how to do this in the previous session
now in this session we'll discuss about
how to cache multiple versions of the
user control based on a varying query
string value
okay so let's modify our user control to
actually load you know products into the
grid view control based on a query
string value now if you look at the
moment at the moment the products that
are displayed in the grid view control
is controlled by what product you select
in the drop-down list but instead of
that I want to control what products you
know are displayed in the grid view
control based on a query string that I
pass to this page so let's see how to do
that so since I'm going to rely on the
query string parameter I can get rid of
this drop-down list control from the
user control so let's go back to the
product you see products control and
then I can get rid of this entire at PR
where we are displaying you know this
drop-down list okay so that's the first
thing that I need to do and then within
the code-behind file actually let's get
rid of this partial caching attribute as
well and I don't need to have this not
East postback condition
and I can directly call this method get'
product by name since we don't have the
drop-down list at all
so I can get rid of this one but then
look at this this get product by name we
discussed about this method in the
previous session so what is this method
doing it simply calls the stood
procedure which loads all the products
from the I mean which loads the products
by name from the database okay so if
you're not sure what the stored
procedure is what this method is trying
to do please watch the previous session
of this video series okay so now we want
to get products you know you know we
want to call this method and pass in the
product name but where from where am I
going to get the product name from the
product name will get it from the query
string okay so I'm going to use request
dot query string basically to request
the query string from the URL so request
dot query string and let's say the name
of the query string as product name okay
so this request dot query string returns
a string so and that's what is being
passed to this method this method will
execute that stored procedure get that
get the product matching that product
name and display that product within the
gridview control okay so that's the
simple modification and the next scene
that we want to do is we can get rid of
this drop-down list one selected index
change because we don't have the
drop-down list anymore we can get rid of
that okay so this is the modification
that I have done to our product control
okay
now let's get rid of this you know let's
comment this output cache directive here
let's save everything and let's see if
our application is working in you know
properly in the first place and then we
will see how to cache multiple versions
of this user control the waveform
waveform one dot aspx and waveform one
dot aspx dot CS the code doesn't change
here in any way okay so let's go ahead
and run this now waveform 11.8 SPF so
obviously now it requests the query
string you know look at that expects a
parameter at product name which was not
supplied because there is no query
string value
so basically we need to pass in a query
string value so let's go ahead and pass
the query string how do we pass a query
string value using a question mark so I
want to pass product name is equal to
let's say if I say all then we are going
to display all the products in the grid
we control so we are displaying all the
products and look at that we don't have
the drop-down list anymore there and
look at the timings here page server
time and client time user control server
and Kline times they're all the same
because every time we request this
waveform it is reprocess hence the page
and user control server and client times
are the same okay
on the other hand if I just want I
phones you know I can just copy that
name pass that to the query string okay
look at that only iPhone is displayed
all right now let us see how to cache
multiple versions of this user control
based on the varying values of this
query string and obviously to do that
all we need to do is use the output
cache attribute specifies the duration
and vary by per am is equal to whatever
is the name of the query string
parameter so what is the name of the
query string parameter it's called
product name so I'm going to use that so
if you remember in the user control we
are using the query string as product
name so that's what we want to vary
caching by so for differing values of
this product name query string we are
going to cache multiple responses so
let's save all that and let's run this
now now let's build this first and then
instead of running it directly I'm going
to open a browser and then use this URL
so paste that placenta you know when the
web form process it should load look at
this all the timings are almost same
there's one second difference between
the server and client I'm because that's
basically the time it takes to process
the page but then look at this if I go
ahead and try to access that page again
look at the user control server time
21:09 58 that's when this response of
the user control is cached for this
query string value
name is equal to all now as i refresh
this look at this the client time
changes but not the server time look at
this the page server and client time
changes because we don't have any
caching enable at the page level
whatsoever that's why the paid server
time changes every time this page is
refreshed but the user control is cached
for a minute that's why we get that cash
to date and time okay now let's say if I
want a version of this user control to
be cached for iPhone so I need to pass
iPhone so now this user control response
should have been cached at 21 11 okay
now let me refresh this once again look
at that all the times changes except the
user control server time this proves
that you know we have different versions
of this user control cache based on the
varying values of this query string
parameter and obviously to achieve that
we have used vary by pram attribute of
the output cache directive okay so we
have seen how to use this output cache
director you know declaratively in the
HTML in the aspx of the user control now
if I want to do it programmatically is
it possible absolutely we can use the
partial caching attribute in a previous
session if you remember we used partial
caching attribute and specified vary
weight control attribute similarly we
use vary by params attribute and specify
the name of the query string by which we
want to vary the caching so let's see
how to do that so basically I can
comment this out because I'm going to do
that programmatically this time so
within the user control class all I need
to do is I can make use of that partial
caching attribute so partial caching and
there are several lower loaded
constructors we have discussed about
this in the previous session as well so
I'm going to use the constructor that
takes name the parameters so I'm going
to specify the duration at 60 seconds
and I'm going to use vary by params
you know name the parameter and then buy
what would do we want to you know vary
the caching here we want to vary the
caching based on product name query
string so I'm going to copy that and
then specify that as the value for value
by params that's it so now obviously if
we run this let's build a solution and
then within the browser let's use this
URL okay so the waveform is reprocess
look at this it's reprocessed at 21
13:09
let's request that once again now look
at this
all the times changes whereas the user
control server time is the same 21 1309
let's refreshed once again look at that
everything changes this time is still
the same so this webform I mean this
response of the user control will be
cached for the next 30 seconds on this
slide you can find resources for asp.net
c-sharp and sequel server interview
questions that's it for today thank you
for listening have a great day</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>