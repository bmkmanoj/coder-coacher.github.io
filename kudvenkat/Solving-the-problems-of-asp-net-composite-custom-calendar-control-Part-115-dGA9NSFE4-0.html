<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Solving the problems of asp net composite custom calendar control   Part 115 | Coder Coacher - Coaching Coders</title><meta content="Solving the problems of asp net composite custom calendar control   Part 115 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/kudvenkat/">kudvenkat</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Solving the problems of asp net composite custom calendar control   Part 115</b></h2><h5 class="post__date">2013-01-21</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/dGA9NSFE4-0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello welcome to prism technologies I am
venket this is part 1 1/5 of a speed or
net video series in this video we'll
discuss about solving the problems of
the asp.net composite custom calendar
control that we have been working with
from parts 112 to 114 if you haven't
watched these videos I would strongly
encourage you to do so before continuing
with a session so if you remember the
composite custom calendar control that
we have developed has several issues for
example look at this when the control
first lenders we don't want this
calendar to be visible if we want to
hide this ok that's one of the problems
so let's see how to hide the calendar
when the custom calendar control is
first loaded and to do that it's pretty
simple so let's slip to our custom
controls project
so within custom controls project if you
remember we have this create child
controls method which is actually
responsible for creating the child
controls you know the text box the image
button and the calendar so within that
method we actually need to hide the
calendar when we are creating it so here
we have the calendar object we are
assigning the ID to that and all I have
to do here is when I render that I want
to turn the visibility to false so
calendar dot visible is equal to false
so this should hide the calendar okay
when it initially renders so that's the
first problem so solving the first
problem is pretty much easy hiding the
calendar control when the custom
calendar control is first loaded how do
we do that all we have to do is set the
visible property of the calendar object
to false and create child controls
method all right so watch the second
problem we have displaying and hiding
the calendar when the image button is
clicked so at the moment if you look at
the behavior of this custom calendar
control now the calendar is already
shown and then clicking on this button
has no effect it simply posts back to
the server but really doesn't do
anything ok so initially when this
control loads of the calendar should be
been visible when I click this image
button then the calendar should become
visible if I click the image button
again then the calendar should become
invisible so basically on the click of
this image button the visibility of the
calendar should be tall
if it is displayed you have to hide it
if it's hidden
you have to display it okay to do that
the first step is to actually generate
the even handle for that image button so
again back to the custom controls
project and if you look at create child
controls method okay here we are
rendering the image button I mean we are
creating the image button so now we
basically want to associate an even
handle a method to the click event of
the image button so image button dot
click so when I click you know when this
click event is raised on this image
button we want to associate an even
handler method and how do we do that we
hook up the event handlers to the events
of a control using delegates we have
discussed about events and delegates in
the previous sessions of this asp.net
video series if you haven't watched them
I would strongly encourage you to do so
before continuing with the same video
alright so to hook up the event handler
I use plus equals and then look at that
Visual Studio will show you the
intellisense now if you plus tab it will
automatically generate you know the code
snippet for us and look at that we are
using image click even handler delegate
to hook up image button underscore click
method with a click event of the image
button so I press tab again the even
handler should be generated so image
button click let's do that again
so dot click plus equals and now when I
press tab look at that I press tab two
times the event handler method gets
generated okay so now we need to you
know control the visibility of the
calendar within the click of this button
so all you need to do is if the calendar
object if it is visible what we want to
do we want to turn off the visibility so
set the visibility of the calendar so
visible properties itself a boolean
property so if it is true then we know
that the calendar is visible in that
case we want to turn off the visibility
else we want to turn on the visibility
so calendar dot visible is equal to true
so that should solve our second problem
displaying and hiding the calendar when
the image button is clicked so if it's
displayed it will be hidden otherwise
it'll be displayed back okay so what's
the third problem populating the textbox
control with a date that is selected
from the calendar so at the moment you
look at this I have the calendar control
visible here but when I select a date
basically nothing happens but what
should happen in reality
whatever did they use is LX here that
selected date should be populated with
in the textbox control let's see how to
do that again if we have to do that then
we have to first associate an even
handler for the selection change the
event of the calendar control we do it
the same way as we have done it for the
image button control so I have the
calendar control here so calendar dot
selection changed that's the event and
to do and to that let's associate an
even handler method calendar underscore
selection changed even handler method
and in this method what we need to do
basically when the date is selected
within the calendar control we need to
populate that you know into the textbox
control and to do that I already have
some code typed here so let's copy and
paste that code there so what are we
doing here we are retrieving the
selected date property of the calendar
object and then converting that to you
know short date string and then setting
that as the text for the textbox control
it's as simple as that and finally we
also need to turn off the visibility
okay so when I select the date from the
calendar control that they should be
populated with in the textbox control
and this calendar should become
invisible that's what is done by these
two lines here so that should solve our
third problem as well and what is the
final problem we should be able to
retrieve the selected date from the
custom calendar control when we use that
on a web form now at the moment if you
look at this
you know calendar control you know we
are using this calendar control on this
platform nine dot aspx now let's say for
example
I have a button control so let's drag
and drop a button control from the you
know tool box onto the webform now when
I double click this button control we
have the even handler generated if you
look at this this calendar control the
custom calendar control the ID of that
one is custom calendar one control now
if I go into the code-behind page and if
I try to retrieve you know let's say for
example when I select the date in the
calendar its populated in the textbox
control now let's say I want to retrieve
that selected date from this calendar
control on a webform okay so now does
this calendar control has any property
which exposes the selected date it
doesn't have it so in the button when I
say calendar one dot you know I don't
have a property that can return the
selected value from the control so we
need to expose a property that returns
the selected date so wherever we are
using we can use that property to
retrieve the selected date from that
particular control so let's go ahead and
add select the date property to the
calendar control so let's copy this and
if you remember in the previous session
we discussed about image button image
URL property so it's very much similar
you know to that property so let me
paste this property here and then we'll
go through the code so if you look at
this property the name of the property
is selected date now we know that a date
is a date time data type so the data
type is date time so it returns date
time data type and look at this we have
this category attribute and description
attribute you know what this attributes
are for we discussed about them when we
are discussing about image with an image
URL property the type category will be
the category under which this property
will be displayed whereas description
will be the description you know
basically which appears when that
property is selected in the properties
window alright so this property has got
gettin set accessors now what should
this property do basically this property
should be able to return the value that
the user
selected so if you look at this
obviously we have to call this entry or
trail controls method we have discussed
about the significance of this method in
the previous sessions of this video
series if you don't know what the
purpose of this method I strongly
recommend to watch those videos first
all right
so NHL controls a call to that method
and then what are we doing here
basically we are checking if there is
any text at all in the text box if there
is it you know text in the text box if
it's not null are empty then you know if
it is basically null are empty look at
that we are using a conditional operator
here so if this expression evaluates to
true that means we know that in the text
box we don't have any text there in
which case return the minimum date/time
value if somebody tries to retrieve you
know the property of that text box of
that control okay otherwise if there is
something within the text box then what
are we doing we are converting that text
into a date/time and returning that back
to the user okay so basically that's the
get accessor and what should the set
accessor to do so when somebody sets you
know this value the selected date a
property what should happen we should
take that value and populate that into
the textbox control so if value is not
equal to null meaning if somebody has
set a value then ensure there are child
controls and then set the text to you
know we are converting the value to a
short date string and then setting it to
the text property of the textbox control
and then look at this we are also
setting actually instead of select a
date I will say visible date and this is
very important because when you set a
value within the textbox control and
then when I click the image button when
the image button displays the calendar
you know the calendar should show the
date that we have currently typed into
the textbox okay which is very much user
friendly because if in the textbox let's
say I have one one 1940 and then when I
click on the image button when the
calendar shows today's date let's say
for example 10 10 2013 and if the user
has to navigate back to 1940 just
imagine how many
clicks he has to take okay that's why
whatever did that he types into the
textbox control if the calendar you know
if you make the calendar visible at that
point of time make sure the calendars
visible date is the date that the user
has typed into the textbox control
that's why we have this here okay on the
other hand if the you know if the value
is null meaning eight I didn't set
anything I have sent an empty value or
an empty string in that case look at
that we are setting it to empty string
but I am setting the visible date to
current date in pattern that is today's
date and time so a very simple property
with simple get and set excesses okay so
we have this control let's go ahead and
rebuild the solution so rebuild the
custom control calendar project now
let's go back to the demo asp.net web
application project where we are testing
this so first thing I'm going to remove
the reference to this assembly and I am
also going to get rid of that calendar
control from there and then from the
toolbox let's go ahead and remove that
so choose items they should bring up the
choose items with dialog box from this
let's go ahead and remove the custom
calendar control alright so that should
remove that and also just to be safe let
me remove this from the project
references build solution and let's
ensure we don't have this you know in
the bin folder let's go to the bin
folder look at that that's still there
let me go ahead and remove the custom
controls assembly from there okay
so let's build the solution once and
then let's go back to toolbox and re add
the assembly so choose items from the
choose items dialog box you know click
the Browse button navigate to C Drive
and within C Drive we have custom
controls project from the select pin
debug and the assembly itself click ok
so we have our custom calendar there
let's drag and drop it onto the webform
so I want the calendar to be visible
there
and if you remember within the solution
Explorer we have this images folder
which has got this calendar dot jpg so
let's go ahead and set that property so
that properties image but an image URL
that is present in images four slash
calendar dot jpg so that should show the
image immediately and look at this we
have the selected date property as well
okay now if I select a day to look at
that you know since the date selected
date is date time data type you know
Visual Studio is smart enough to show a
calendar for the user to actually select
a date rather than him typing it you
know manually here so I click on the
drop down list I get a calendar here and
I select so 1501 20 2013 and look at
this as soon as I have selected that
value there look at what happened today
control on the designer surface it's
immediately updated because we have a
call to ensure I mean we have that
recreate change controls method we have
overridden that so recreate child
controls method this method updates the
designer surface okay so let's select a
date let's go ahead and run this now so
look at this at the moment as soon as we
have you know added that control look at
that here the first problem is solved
you know when the control initially
loads up the calendar is not visible now
when the user clicks this image button
that's when the calendar is visible okay
if I click the image button again look
at that the calendar becomes invisible
okay and another thing to notice is that
when I select look at this at the moment
we have 15 of January 2013 and if I
select 16 the date is properly selected
and the calendar becomes invisible as
well so that problem is also solved you
know populating the text box control
with the date that we have selected in
the calendar and how to retrieve the
selected date from the custom calendar
on on a web form again it's pretty much
easy now we have selected date property
so I can say
what's the ID of this one the ID I think
is custom calendar one so that's the ID
so let's take that and within the button
click event all we need to do is custom
calendar one and if you remember the
property it's selected date dot two
string so let's go ahead and say that
spawns dot right in reality we may save
it to the database or or do whatever you
want to with that property so let's run
this now and look at this
I have 1501 2013 selected I click that
button I get that date okay basically I
haven't converted it to short date
string if you scan with it too short
date string you'll only get the date
part of that okay so if I select 26
click the button 2601 2013 now there's
one problem with this you know calendar
controls still at the moment now look at
this in the image button click you know
when we click the image button at the
moment if the calendar is not visible we
are making it visible if it's already
visible then we are turning off the
visibility okay but then one thing that
we need to do is let's say let me run
this project once again now let's say I
have the date as 0 1 0 1 1940 and then I
click this image button look at this
it's currently showing January 2013 now
instead of that I actually want to show
you know whatever date that I have typed
in here because let's say if I want to
change the date from 0 1 0 1 1940 to 0 1
0 to 1940 maybe January 2nd 1940s Tim
ajan how many clicks would it take to
navigate back to the year 1940 ok so to
solve the problem I have a code snippet
here so what are we doing now the
calendar is
turn the visibility to false that's fine
but on the other hand if it's not
visible then we need to turn the
visibility on but when I'm turning the
visibility on so look at the Sun setting
the visibility to true but then I am
also checking if there if the if the
textbox is not null or empty then set
the visible date of the calendar to I
mean if it is empty set the visible day
to today else if it's not empty then we
know there is something within the
textbox so first I am declaring a
variable of date of type date/time as
output and I am initializing that to
today and then look at what am I doing
here I'm using this tryparse method to
convert whatever text that I have in the
textbox to daytime if that conversion is
sex successful I am using this variable
to you know to convert that whatever
text that we have in the textbox to a
date/time datatype and then put that
within this output variable okay output
variable so today's date will be changed
into whatever date that we have in the
textbox control on the other hand if the
conversion is not successful what
happens this try parts method will
return false okay if it's not successful
then we know you know output has today's
date okay so basically two things will
happen if there is text within the
textbox control meaning somebody has
entered some date within the text box
what the cells part will try to do it
will try to convert that date time if
the conversion is successful them in the
sense if I have entered a valid date and
time then the conversion will be
successful and that will that date will
be stored in this output variable which
is then assigned you know to the visible
date property of the calendar okay so
basically let's change the image button
click event handler to have this code
instead of that straightforward code at
the moment if you look at that image
button click it's pretty simple and
straightforward all we are doing here is
if the calendar is visible turn the
visibility to false otherwise
you know if it's not visible turn the
visibility on instead of that I'm going
to paste this piece of code here okay so
let's rebuild this and let's go to the
web project where we are testing this
let me remove the reference to the
registry directive and then the custom
control itself let's remove the assembly
from the toolbox so right click choose
items and uncheck custom calendar click
OK just to be safe
remove the reference from the references
folder and clean the solution rebuild
the solution just to make sure let's
actually check you know if we still have
that particular custom controls
awesomely I don't want that to be there
and then obviously we get an error now
because custom calendar is not there
let's comment that line for the time
being
okay let's go ahead and re add the
custom calendar control so choose items
and before we do that let's actually
rebuild custom controls project so this
is the custom controls project rebuild
all succeeded let's flip back to the
asp.net project click the Browse button
and within the C Drive navigate to
custom controls bin-debug select the
assembly click OK that should add the
custom
calendar so let's drag and drop that
onto the waveform so we have that let's
also set the image button image URL
property that's going to be let's copy
the image name which is calendar dot jpg
and within the properties let's set
image button image URL to images for
slash calendar dot jpg which should pick
that up and let's go ahead and run this
as it stands now now I'm going to change
the date within the text box directly by
hand to something in 1940 so 1 / 1 /
1914 okay now look at this if I click
the image button when the calendar shows
up it should check the content of this
text box now this is not empty okay look
at this if it's going to be empty if I
click the image button it's going to
show us today's date and time okay so
January 2013 now on the other hand if I
have text there okay or let me actually
turn off the visibility
let's have today's date so there is some
text within that so I click that button
look at that it's now showing January
1940 okay
so the user if he wants to select second
of you know January of 1940 it's simple
and straightforward okay so that's what
this property is actually doing here you
know the else part here all right so in
this video we discussed about solving
all these problems in our next video
we'll discuss about adding an event or
custom control it's actually very
similar to adding events to user
controls we have discussed about user
controls in the previous sessions of
this video series so you can check those
videos as well so in our next video
we'll discuss about adding events to a
custom control on the slides you can
find it resources for asp.net c-sharp
and signal server interview questions
that's it for today thank you for
listening have a great day</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>