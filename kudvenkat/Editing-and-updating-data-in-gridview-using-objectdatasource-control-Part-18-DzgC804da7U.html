<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Editing and updating data in gridview using objectdatasource control - Part 18 | Coder Coacher - Coaching Coders</title><meta content="Editing and updating data in gridview using objectdatasource control - Part 18 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/kudvenkat/">kudvenkat</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Editing and updating data in gridview using objectdatasource control - Part 18</b></h2><h5 class="post__date">2013-03-09</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/DzgC804da7U" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello welcome to prism technologies I am
frankerd this is part eighteen of
asp.net grid-view tutorial in this video
we'll discuss about editing and updating
data in grid view using the object data
source control let's look at the steps
that are involved so obviously the first
step is to create employee data access
layer look at this in the grid view
control we are retrieving and displaying
employee related information so
obviously to retrieve and update that
employee related information we need
employee data access layer so let's go
ahead and add that to our project so
right click on the project add and then
I want to add a class file and let's
call this class file as employee data
access layer dot CS click Add and look
at this since we are representing
employee related information to
encapsulate that information we need a
business object employee business object
so create employee business object in
employee data access layer so that's
going to be our second step and
obviously this employee object is going
to contain employee ID name gender and
city properties because if we look at
the table those are what are the columns
and to represent those column values we
need properties in employee class so
let's go ahead and add them in employee
data access layer dot CS file so I'm
going to call my class public class and
let's call this employee and just to
speed things up I have typed all the
properties already so let's copy them
and then paste in the employee class so
if you look at this class it's pretty
straightforward it has got an integer
employee ID property and then name
gender and city which are all of type
string and all of these are auto
implemented properties so that's our
second step so what's our third step add
a static method to select all employees
in employee data access layer so
basically now we need a method which is
going to connect to the database
retrieve these employees and then return
them back to whoever is going to call
that method so let's go ahead and add a
method to employee data access layer so
public it's got to be a static method
and this method should return a list of
employees back so that it enter by my
method is going to be
employ a and I'm going to call this get
all employees and this method is not
going to take any parameters because we
want to select all the employees all
right and again to speed things up I
have that ad or net code already typed
so let me copy and paste that and
obviously we need some ad or dotnet
namespaces to get rid of these
compliation errors so we need system
data so let's import that using systems
or data we also need a system dot data
dot sequel offline and finally system
configuration namespace ok now let's
look at the code within this kit all
employees method if you look at this the
return type is list of employees meaning
it's going to return a list of employees
back so what are we doing the first line
creates a variable of type list employee
because we want to return list employees
back and the and this line here is
reading the connection string from web
config file using that connection string
we are building the sequel connection
object and then look at the sequel
command that we are preparing select
star from TBL employee we are going to
retrieve all the records from TBL
employee table and then open the
connection execute the command
ok and then look at that we are looping
through each row that's retrieved and
then converting the database row into an
employee object and then finally adding
that employee object to the list that we
have once we are done looping through
each row and creating and adding that
employee object to the list finally we
return that list employees back to
whoever is going to call this method so
that's our third step fourth step we
need now look at this when we actually
edit a row you know we can change name
gender and city and once I click update
we need a method which is going to
update you know employee details by
passing in all these four parameters
employee ID name gender and city ok so
we need a method which is going to
update employee details you know by
passing in this four parameters
okay so let's add that static update
method to our employee data access layer
so it's going to be again another static
method so public static and the written
type is going to be worried update
employee and obviously we need to pass
four parameters that is the employee ID
name gender and city and just to speed
things up I have this again type so let
me copy and paste it there we'll go with
that code in a bit okay so I think we
have the method outside the class so let
me copy that and paste inside the class
so that's our class so that's the get
all employees and this is the update
employee method so if you look at this
obviously this method has got four
parameters employee ID name gender and
say day and then obviously here the
first line is reading the connection
string the second line is creating this
equal connection object using that
connection string the important thing to
notice here is the update query update
TBL employee set name is equal to add
name gender is equal to add gender City
is equal to add city where employee ID
is equal to at employee ID so obviously
this is a parameterised sequel query so
to avoid sequel injections they using
parameterised queries rather than
building the sequel queries dynamically
by concatenating strings which is very
dangerous which could open doors for
sequel injection attack okay so
obviously now since this is a
parameterised query we need to supply
values for those sequel parameters and
that's what we are doing in these lines
here so we're preparing the sequel
command object using that string update
query and then we need to since we need
to supply values for those parameters we
are actually creating the parameters
look at this this is the sequel
parameter and this is the value for that
sequel parameter so where is this value
coming from it's coming into this method
as a parameter so obviously when we
click this update method these values
these four values will be passed into
this update employee method which in
turn will be associated
- these sequel parameters and that's
what these two lines are doing here so
the first line creates the parameter
object the next line adds the parameter
object to the parameters collection of
the command object and we do the same
thing for gender CT and the name and
finally open the connection execute the
non query so simple ad or dotnet code
here so we are done with the four steps
the final step is to basically configure
object data source and grid view control
so let's flip to visual studio so let's
flip to waveform now first let's compile
the project and then let's drag and drop
a grid view control onto the waveform
let's auto format that let's choose
brown sugar scheme and now let's drag
and drop object data source control
let's configure data source so choose
your business object or business object
is employee data access layer present in
a demo namespace so demo dot employee
data access layer click next select your
select method which is going to be get
all employees that returns a list of
employees back and then we also need to
specify the update method so let's click
on the update tab and select your update
method look at the parameters it has got
those four parameters that we specified
that's it click finish we are done
configuring object datasource
now let's associate this to the grid
view control and look at this the moment
I also slid this object data source
control to the grid view the grid view
has detected that this object data
source control has got update command
okay as a result of which you know it
shows this enable editing method you
know check box so let's check that so
you have the edit button next to every
employee data row let's run this when
you know the webform render surface it
has to display the employee data with an
edit button next to every employee data
row now let's click Edit look at that
you know employee ID is also editable
but look in the slide we don't want
employee ID to be editable because
that's the primary key and it's unusual
to change primary key values we don't
want users to be editing that employee
ID so we want to render it and read-only
mode using the label control so how do
we achieve that it's very simple all we
need to do
is set the employee-id bound column
read-only attribute to true so within
the grid we control you have these bound
fields which are displaying you know
basically the employee ID name gender
and city all we want to do is the bound
field which is displaying employee ID
set it's read-only attribute to true so
if this is the case then when we edit
that employee row it's going to render
employee ID using a label control okay
look at that employee ID rendered using
label control now let's change the name
of mark from mark 1 back to mark and
then let me update look at that is it
updating the data no it's not why is
that that's because you know when I
click this Update button what's
happening is you know the employee ID is
actually passed as zero to this update
query and then we don't have any row
with employee ID is zero so no row gets
updated and we don't get an exception as
well okay so to understand that properly
actually you can put a breakpoint in
update employee method and then debug
that and then watch the value of this
employee ID it shows that as zero so how
do we correct that all we need to do is
set the data key names property so data
key names is equal to employee ID all
right
so with this change let's go ahead and
run this now so edit and then let's
change mark one back to mark update that
look at that that's updated properly
let's select the data from table just to
make sure alright another thing here if
you notice if I click Edit look at this
gender it's actually you know male
female instead of displaying a text box
there don't you think it's better if we
actually display a drop-down list
we'll see how to enhance this editing
interface in a later video session on
this slide you can find resources for
asp.net c-sharp and sequence of
interview question that's it for today
thank you for listening have a great day</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>