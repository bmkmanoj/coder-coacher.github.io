<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Calling live json web service using jquery ajax | Coder Coacher - Coaching Coders</title><meta content="Calling live json web service using jquery ajax - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/kudvenkat/">kudvenkat</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Calling live json web service using jquery ajax</b></h2><h5 class="post__date">2015-06-17</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/SjLJ8Dyuywg" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">this is part 71 of jQuery tutorial in
this video well discuss how to call a
live weather web service that returns
JSON data using jQuery AJAX here is what
we want to achieve we are going to
provide the name of the city and the
country within which that city is
present once we click this button get
weather data we want to call this live
weather web service and display the
weather information as you can see here
so let's see how to achieve this using
jQuery AJAX so first let's inspect this
live weather web service if we navigate
to that link we will land on this page
and notice we have got two URLs here
which is going to return our city
weather so we provide the city name and
the country within which that city is
present we are going to get the weather
information we have two URLs here one is
going to return the weather data in JSON
format and the other will return in XML
format let's inspect the service which
returns JSON data so what we are getting
back here is a JSON object first let's
look at the URL notice the data that we
are sending to the server we have a
query string and the name of the query
string is Q equals the name of the city
and the country within which that city
is present and what we get back is a
JSON object here we've got a lot of
weather information but the purpose of
this demo let's just display the main
weather so at the moment the main
weather in London is rain and the
description is light rain as you can see
here and if you look at where this data
is present the JSON object that we will
get back is having a property called
weather and that property has the data
and if you look at what we have you know
in that property it's actually a JSON
array notice the square brackets at the
beginning and at the end that's an array
so if we want to retrieve the main
weather information then we will have to
use weather of 0 dot main similarly if
we want to get the description of the
weather then we will have to use weather
of 0 dot the scription so let's go ahead
and call this web server
using jQuery AJAX let's flip to visual
studio here I have already typed the
required HTML which is going to produce
this UI that you see on the slide so the
HTML that we have here is
straightforward we have got a table
which contains two TRS and each TR has
got two TDs the first TD here contains
the little text CD and then we have a
textbox to capture the city in the
second TD similarly within the second TR
in the first TD we have the literal text
country and then a text box to capture
the country and then we have got a
button and which says get weather data
when we click that button that's when we
want to call that web service and
retrieve the weather information and we
want to display the weather information
in this result div so within our scripts
section we already have the ready
function wider so when we click this
button BT and get weather that's when we
want to issue an ajax request
so let's find the button using the
jQuery ID selector when we click that we
want to execute some code so what do we
need to do first we need to retrieve the
name of the city and the country so I'm
going to use a variable let's call this
request data equals now city text box
has got an ID and the ID is txt city and
to retrieve the value from that let's
use the valve function and similarly so
to the city name we want to append comma
and to that we want to append the name
of the country and the country name
text-box ID is txt country so that's the
data that we want to send to the web
service so now let's go ahead and use
the jQuery AJAX function and let's
specify the options so the first option
that I am going to specify is the URL
that we want to call so the URL that we
want to call is this okay so that's the
water so let's copy that and paste it
right here
and we want to issue a get request so
I'm going to use the method option and
specify that at west type is going to be
cat and now let's specify the data that
we want to send to the server so if you
look at the URL right here the name of
the query string is Q okay so here the
property name is going to be Q and the
data that we want to send to the server
is present in this variable request data
and the type of data that we are
expecting back from the server is Jason
and when the request successfully
completes we want to associate a
callback function now the JSON object
that we are going to get back from the
web service will be received by this
data parameter okay so that will contain
all the weather information we want to
display the main weather information
within this result that div so let's
copy the ID of the result a div and here
I'm actually going to create another
variable I'm going to call this result
element equals let's use the jQuery ID
selector again and find the development
okay so this is the development within
which we want to display the weather
information so result element dot HTML
so what do you want to display we want
to display that literal string which
says weather : and we have the data
parameter which is going to receive that
JSON object and this is going to have
this weather property okay so data dot
weather of zero because that's an array
dot main and to that lets append an HTML
break and to that lets append this
literal text description and we want to
retrieve the description of the weather
so let's copy this
and here the name of the property is
going to be description okay so that's
all there to it let's save the changes
and load this waveform let's provide the
name of the city as London and the
country as UK and when we click get
weather data look at that whether it's
rain and the description is light rain
now look at what's going to happen if we
provide an invalid name of the city so
for example let's say X Y Z is the name
of the city and ABC is the name of the
country and when we hit enter look at
what we get back they're actually
getting a JSON object again here and
this JSON object contains a property
called message and it says error not
found city so similarly if we type any
invalid city and country name you know
we want to display that error
information okay so what I'm going to do
for that is here I'm going to use a
simple if condition if this data
parameter if it contains message
property okay if that is not equal to
null then what does that mean that means
we've got this error message information
right so in that case we want to display
this string within the development so we
have the result development result
element dot HTML and what I want to
display there is whatever we have got in
the message property okay else
you know we want to call the web service
so let's go ahead and save those changes
reload our web form and let's provide
XYZ as the name of the city and ABC is
the name of the country get weather and
look at this error not Sound City if we
give it a valid city name for example
Bristol in UK click get by the data you
know it's still tossing the request so
weather drizzle light intensity drizzle
so here we have the HTML here we have
the jQuery code thank you for listening
and have a great day</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>