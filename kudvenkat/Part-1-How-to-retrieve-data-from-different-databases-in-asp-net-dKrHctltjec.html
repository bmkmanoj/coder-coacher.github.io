<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Part 1   How to retrieve data from different databases in asp net | Coder Coacher - Coaching Coders</title><meta content="Part 1   How to retrieve data from different databases in asp net - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/kudvenkat/">kudvenkat</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Part 1   How to retrieve data from different databases in asp net</b></h2><h5 class="post__date">2014-05-03</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/dKrHctltjec" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">welcome to prism technologies I am Venky
this is a new video series I'm going to
call it dotnet return test questions and
answers video series all the questions
that you will see in this video series
are the questions that many of our
YouTube channel subscribers have faced
in the return test that they have
attended so if you have attended a
dotnet return test and if you want some
questions to be answered please feel
free to leave those questions as
comments on this YouTube channel and
then I shall go ahead and record and
upload a video answering those questions
as soon as I can
so this is part 1 of dotnet return test
questions and answers video tutorial in
this video we'll discuss how to retrieve
data from different databases in an
asp.net webforms the application let's
understand this with an example let's
say we have got two different databases
USA DB and UK DV USA dB let's say for
example it is going to store US employee
data and UK DB is going to store UK
employee data so let's say within both
of these databases we have got this
employees table and here this table is
going to store us employees data and
this table is going to store you can
employ is data notice the country column
and then what we want to do is implement
an asp.net webforms application and
probably we want to use a grid view
control which is going to display data
from both of these databases so we want
this asp.net webforms application to
retrieve data from us a DB UK d bay
merge it and then display within the
grid view control notice that the first
four columns look at the country column
USA meaning those four rows are coming
from this DB and the last three rows
look at the country column it's UK so
those three rows are coming from this DB
so let's see how to retrieve data from
different databases within this asp.net
webforms application so the first thing
that we need to do is create these two
databases create the employees table and
populate the tables with some sample
data and to speed things up I have
already implemented the required a
sequel script so here if you look at
this script right here these lines are
going to create us a DB
and you kdv databases and then you know
the script right here is going to create
employees table within us a DB database
and then this script right here is going
to populate this employees table within
us a DB database with sample data and
then this script right here is going to
create employees table within the UK
database and then this script is going
to populate the employees table with
sample data all right so I'll have the
script available on my blog in case you
need it
I have already executed the script so I
have the UK DB and USA DB and within
both the databases we have called this
employees table okay
let's execute these two select
statements to make sure that you know we
get the data that we expect so this data
is from the USA DB database and this
data is from the UK DB database so let's
flip to visual studio so here all I have
done so far is created a new MT asp.net
webforms application and then I have
added this platform one dot aspx okay
first within the web config file let's
go ahead and include connection strings
for us a DB and UK DB databases okay so
let's go ahead and include connection
strings section and then we want to add
a connection string and let's specify a
name for our connection string first and
let's call this as UA us a DB and you
know within the connection string we
need to have the server in this case in
my case the service running on my local
machine so I'm going to specify dot as
the server and database is going to be
us a DB that's what is the name of the
database and then I'm going to use
Windows authentication so I'm going to
say integrated security is equal to true
alright so we need to do the same thing
for UK DB so we are adding another
connection string and let's call this UK
DB
and here the name of the database is
going to be UK dB okay so we have got
two connection strings within the web
config file now let's go to webform one
dot aspx and then first of all let's you
know set the style attribute here let's
specify font family style and let's set
that to area and then within the div tag
let's drag and drop a grid view control
grid view control must be under the data
tab so let's go ahead drag and drop it
and now let's flip to the design mode
and then just to make it look nice let's
auto format it and let's select this
colorful scheme all right
so within the code-behind file within
the page load event now we need to write
ATO dotnet code to connect to these two
databases and retrieved it and then
display that within a single grid view
control so we need some of the area
dotnet namespaces the first one a system
dot configuration namespace so this
namespace contains configuration manager
class which helps us read the connection
strings from web config file and the
next namespace that we need is system
dot data and system dot theta dot sequel
client all right so now the first thing
is to read the connection strings from
web config file so I'm going to call
this variable as us a DB CS c s stands
for connection string so this variable
is us a DB connection string and how do
we read the connection string we use
configuration manager class dot
connection strings property and then if
you recollect the name of the us a DB
connection string is us a DB so let's
copy that and paste it right here and
retreat the connection string out of it
okay and we also need to retrieve the UK
DB connection string so let's go ahead
and do that so UK DB connection string
and the name of the database is going to
be I'm sorry the name of the connection
string within our web config file is
going to be UK DB
okay so at this point we have the two
connection strings now the next step is
to create a sequel connection to one of
the databases so let's go and create a
connection object so sequel connection
con equals new sequel connection and the
first thing that we need to specify here
to create a connection object is to use
the connection string so let's go ahead
and establish a connection to the USA
database okay and then we are going to
make use of sequel data adapter so that
we don't have to explicitly open and
close connections so sequel data adapter
da equals new sequel data adapter and we
are going to make use of this overloaded
constructor way we can specify the
Select command a string and D and we can
pass the sequel connection object as
well so the Select command is simply
going to be select star from employees
okay so we are going to retrieve all the
rules that are there in the employees
table and the next parameter is the
sequel connection object so we are going
to pass this sequel connection object at
the moment this connection object is
pointing to us a DB meaning we are going
to retrieve data from the USA DB okay so
now what we are going to do is create a
data set object so let's call it ds1 and
then let's invoke the fill method of the
data adapter and fill this data set one
with the data from USA dB so by the time
the code has reached this point within
the data set we have us employee's data
within the data set now what we need to
do let's go ahead and reuse the same
connection object so we want to connect
to euclid a database and written you can
employee's data so what I'm going to do
is I'm going to create again a new
connection object here so basically to
the same connection object we are
assigning a new instance and this time
I'm going to make use of this UK DB
connection string so now this connection
object is actually going to open a
connection to UK DB because that's what
is the connection string we are using
and then what we need to do is we need
to tell this data adapter object to use
this connection object which which is a
new connection object that is pointing
to you know
UK database and to do that I'm going to
say data adapter dot select command and
the Select command has caught the
connection property where we can specify
the connection that we want to use to
execute the Select command what is our
Select command the Select command is not
going to change because within both of
the databases the table name is
employees and exactly we want the same
command to be executed so there's no
point in changing the Select command
itself but in your case if you have
different tables and if you want to
retrieve you know table data from
department our table and employees table
then you would change the Select command
as well but in our case we don't have to
do that so I'm going to set here this
connection object okay so we are done
now this connection object is the point
into you clear database and this data
adapter is using that connection object
so obviously this command will be
executed against the UK dB so we will
get UK employees data so what I'm going
to do here is create another data set
and let's call it ds2 equals new data
set and then we are going to invoke the
fill method and then fill data set to
with UK employees data so at this point
with in ds1 we have got us employees
data and within ds2 we have got you can
employees data now we want to merge them
together and it's very easy to merge
data sets all you need to do is on the
data set instance invoke the merge
method and then pass the second data set
so what is going to happen here the data
that is present within data set 2 will
be merged into data set 1 and then all
that is left is set the data set 1 as
the data source for the grid view
control and then invoke the data bind
method
okay so data set one contains now both
US and UK employees are details that's
what we have set us the data source and
move the data bind method so let's go
ahead and run this and see if it works
as expected
there we go so the first four rows what
is that countries USA last three rows UK
so we got data from different databases
this exactly the same code that we have
written right now that's it for today
thank you for listening have a great day</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>