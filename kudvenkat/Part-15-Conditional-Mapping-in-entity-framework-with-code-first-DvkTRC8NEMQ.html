<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Part 15   Conditional Mapping in entity framework with code first | Coder Coacher - Coaching Coders</title><meta content="Part 15   Conditional Mapping in entity framework with code first - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/kudvenkat/">kudvenkat</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Part 15   Conditional Mapping in entity framework with code first</b></h2><h5 class="post__date">2014-05-31</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/DvkTRC8NEMQ" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">this is part 15 of entity framework
tutorial in this video we'll discuss
conditional mapping an entity framework
with code first approach this is
continuation to part 14 may be discussed
condition mapping with database first
approach please watch part 14 before
proceeding because we'll be working with
the same example that we worked with in
part 14 implementing condition mapping
with code first approach is
straightforward all we need to do is
override on model creating method in
employee DB context class now the idea
here is to apply a permanent filter on
employee entity so that only the
employees who are not terminated are
always returned and to achieve that we
are making use of requires and has value
functions basically we are telling here
you know we need to return employee
entities where is terminated has a value
of false so that's going to do the
conditional mapping for us now what is
the use of the signal method now
remember a database column can only be
used once in mapping since we are using
in terminated column and conditional
mapping we cannot use the same column
again in property mapping so with this
ignore method here we are saying ignore
the column from property binding okay so
it's that straightforward now let's flip
to visual studio so this is the same
example that we worked with in the
previous session all I have done so far
is deleted the employee model that we
generated from the database and from web
config file I have deleted that
connection string which was also
automatically generated for us now the
first thing that we need to do here is
add a class file to this project and
then let's specify the name as employee
dot CS for this file and this class is
going to have these four properties
employee ID first name last name gender
and is terminated and let's add another
class file and let's call this employee
DB context dot CS and we need to import
system door data entity namespace
and make this employee dbcontext inherit
from dbcontext class this class is going
to have a public property which is going
to return DB set of employee objects and
let's call this property employees and
we need to override on model creating
method which is present in DB context
base class and that this is where we
specify your condition mapping and I'm
going to copy and paste this exact same
code that we have seen on the slide
alright and if you look at where from
one dot aspx the code on this web form
has not changed in any way
now I'm going to convert this employees
to list and the reason for this is if we
don't do it we get an error at runtime
because when the database is first
created the table is going to be empty
and then when we bind DB set of
employees directly to the grid view when
we don't have rows we get an error at
runtime so I'm just converting it to the
list so that we don't get that runtime
error and now what I'm going to do is
delete the sample database which we have
generated using database first approach
in the previous session and now let's go
ahead and run this project but before
that let's make sure we have the
connection string and web config file so
I'm going to copy the connection string
and paste that right there so employee
DB context is the name of the connection
string which should match with the name
of our DB context class so now with all
these changes let's go and run this so
now the sample database should be
automatically created employee's table
should be created so it's still loading
here all right now let's go here and
refresh this databases
notice that the sample database is
created and we have employees table as
well but it will not have any data
within that let's execute this insert
script R insert test data so there we go
now before we reload this let's also
fire up sequel profiler so that we can
examine the query that is generated
let's connect to it using windows
authentication run a new trace and then
let's reload this waveform so now notice
that we only have the employees who are
not terminated loaded and if you look at
sequel profiler they should be a ver
clause as well so where is terminated
equals zero so implementing conditional
mapping with code first approaches that
straightforward that's it for today
thank you for listening have a great day</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>