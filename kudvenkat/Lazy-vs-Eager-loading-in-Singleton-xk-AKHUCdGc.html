<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Lazy vs Eager loading in Singleton | Coder Coacher - Coaching Coders</title><meta content="Lazy vs Eager loading in Singleton - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/kudvenkat/">kudvenkat</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Lazy vs Eager loading in Singleton</b></h2><h5 class="post__date">2017-06-12</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/xk-AKHUCdGc" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello everyone welcome back this is part
five of the design patterns tutorial in
this session we will discuss differences
between lazy and eager initialization
single done with eager loading and how
to use VZ keyword with singleton design
pattern please refer to the previous
parts of the singleton tutorial before
proceeding in the previous session we
have discussed about three safety issues
that may occur with the lazy
initialization we have also discussed
how to overcome them by adding double
check locking mechanism in the get
instance property after these changes we
have created a new thread safe lazy
initialization from our base singleton
version basically the lazy
initialization of an object improves the
performance and avoid unnecessary
computation in the point the object is
accessed further it also reduces the
memory footprint during the startup of
the program reducing the memory
footprint will help the application to
load faster now you may be wondering why
and when we need to use lazy
initialization now let us assume a
situation where we need to assign some
static properties in the singleton class
and those properties need to be
retrieved from the database in those
situations we tend to use lazy
initialization as we do not need to
retrieve these values till the singleton
object is accessed that means using lazy
initialization depends on how heavy is
the singleton instantiation and what are
the dependence properties or methods
that need to be loaded or assigned along
with the singleton instantiation if this
is not very clear at this moment don't
worry we are going to take a deep dive
into those situations with real-world
examples that we are going to demo in
the next sessions now after all of this
you may have a question going in your
mind what if I do not need to use the
lazy initialization
depending on the situation we can
enhance the current version of the
singleton pattern to a non lazy loading
pattern or to simplify let's call it as
eager loading pattern what is your
loading pattern eager loading is nothing
but to initialize the required object
before it's being accessed which means
we instantiate the object and keep it
ready and use it when we need it let's
see how we can do that let's switch to
visual studio let's see how we can
convert the singleton class from the
lazy initialization to non lazy
initialization in order to achieve lazy
or eager loading we need to follow three
simple steps in step one we need to
change this null initialization to new
singleton instance in step two we need
to change this instance property to
read-only now let's compile this
application look at that compilation
saying stating that the static read-only
field cannot be assigned again now that
we have already initialized the
singleton instance we do not need to
instantiate it again in the gate
instance property so in the step three
we have let's remove the double check
locking code and just return the
instance let's also remove the this
static object that we have created
earlier now let's run this application
now look at that
the runtime has hit the get instance
property twice due to parallel invoke
let's run the application again if you
observe the output the counter value is
still at one this proves that the eager
loading has created only one singleton
instance now after all these changes you
may be thinking how it is thread safe to
answer that
the common language runtime takes care
of the variable initialization and it's
spread safety hence we don't need to
write any explicit coding for thread
safety the slobs obligation and switch
back to our main code now that we
understand the eager loading very well
let's see how we can modify this eager
loading to lazy initialization using
lazy keyword which is available in
dotted framework for auto and abbo lazy
keyword provides support for lazy
initialization in order to make a
property as lazy we need to pass the
type of object to this lazy keyword
which is being lazily initialized now
let's add the singleton with the lazy
keyword new lazy singleton the
highlighted code will just wrap the
singleton object in a lazy manner in
order to create the singleton instance
we need to create a new singleton
instance using a lambda expression as a
delegate this is all we need to do that
now let's compile the application look
at that there is a compilation error
stating that we cannot implicitly
convert till the I please Z to singleton
now in order to access the singleton
object we need to use instance dot value
let's run this application look at that
the counter value is at 1 proving the
lazy keyword has created only one
instance of the singleton object by
default lazy objects are correct safe in
multi-threaded and scenarios the first
thread which tries to access this value
property will take care of trig safety
when multiple threads are trying to
access the get instance at the same
point of time therefore it does not
matter which thread tries to initialize
the object or if there are any thread
race conditions that are trying to
access this get instance property
we hope you are familiar with eager
loading and lazy loading with lazy
keywords in the next session we will
understand the differences between
singleton and static classes and also
will try to create one real-world
example last case study using this
singleton design pattern thank you for
listening have a great day</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>