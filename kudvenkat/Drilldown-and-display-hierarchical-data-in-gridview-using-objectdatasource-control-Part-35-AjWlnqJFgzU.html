<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Drilldown and display hierarchical data in gridview using objectdatasource control - Part 35 | Coder Coacher - Coaching Coders</title><meta content="Drilldown and display hierarchical data in gridview using objectdatasource control - Part 35 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/kudvenkat/">kudvenkat</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Drilldown and display hierarchical data in gridview using objectdatasource control - Part 35</b></h2><h5 class="post__date">2013-03-27</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/AjWlnqJFgzU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello welcome Presidium technologies I
am venket this is part 35 of asp.net
grid-view tutorial in this video we'll
discuss about drilling down and
displaying hierarchical data in an
asp.net grid view using object data
source control in part 34 we discussed
about doing exactly the same thing using
sequel data source control please watch
part 34 before proceeding with this
video my sequel server database I have
got three tables TBL continents TBL
countries and TBL cities now the data
that is present in these three tables we
want to retrieve that and display with
in grid view controls in an asp.net web
application project when the webform
initially loads we only want to display
continents grid view once I select a
continent then all the countries
belonging to that continent should be
displayed in second grid view once I
select a country then all the cities
belonging to that country should then be
displayed within the third grid view
control obviously we need three grid
view controls to achieve this so let's
flip to visual studio let's drag and
drop three grid view controls onto our
waveform one two and three let's set the
scheme to brown sugar let's do that for
the second grid view control as well and
finally for the third one and we need
three object data source controls as
well so one two and three now to use
object data source controls to retrieve
continents countries and cities data we
need to create respective data access
layers okay so let's go ahead and do
that let's flip to visual studio right
click on your project add a class file
and let's call this continents data
access layer dot CS and obviously here
we will be writing some ad or dotnet
code so let's use our you know the ad or
net namespaces system door data system
dot data dot sequel client and system
configuration all right now to
encapsulate continent information we
need a continent class so let me
actually copy and paste that code here
and then I'll explain what I mean
so here I have this continent class why
do we need this class basically to
encapsulate the information that
present in the steel continent table I
need that class so which has got two
properties continent ID and continent
name both of them simple auto
implemented properties and then within
this continent data access layer class I
have the static method we just get all
continents look at the return type it is
list of continents so this method is
going to return a list of continent
objects okay so what is this method
doing pretty simple and straightforward
area or net code here you know we have a
an object of type list continent we are
using the configuration manager class to
read the connection string from web
config file and then we are using that
connection string to create the sequel
connection object and then we are
preparing our sequel command object
notice the Select command select star
from T build continents we are going to
retrieve all the rows from female
continents and then loop through each
row and then you know convert know the
column values into the properties of
that object and then finally add that
object to the list and return the list
okay so pretty simple and
straightforward ato dotnet code so
continent data access layer is done
along the same lines now we need to
create country data access layer so
let's call the class file as country
data access layer so right click on your
project add the class and let's name it
country data access layer dot CS and
obviously plan capsulate you know the
country you know country ID country name
and continent ID columns we need a
respective class and obviously within
this country data access layer we need a
method to retrieve the data and return
it back and to speed things up I have
the type so let me copy and paste that
here and then I will explain the code
okay
so within here obviously we need a do
dot in namespaces as well so let's copy
the namespace a system data system dot
data dot sequel client and system
configuration ok so within our country
data access layer we have a country
class which is used to encapsulate
country information
so we have three properties here country
ID country name and continent ID because
that's what we want to display within
the second grid we control in the
countries grid view control and then
within country data access layer again
you know the same kind of video dotnet
code here here look at the method it's
going to return
you know list of a list of country
objects alright now if you look at this
method it's taking in a parameter
continent ID why is that required
because when I select a continent you
know for the Select account for the
selected continent we want to retrieve
the draw you know the countries that's
why you know I have included a method
which is going to take in a continent ID
and then return countries that match
that continent ID so if you look at this
code again here it's pretty
straightforward area dotnet code so
reading your connection string preparing
your sequel connection object the
important thing is the sequel command
select star from TBL countries where
content ID is equal to at continent ID
so we are using a parameter is query
there we need to supply a value for the
sequel parameter and to do that we are
creating a parameter object here and
look at the value the value is nothing
but the parameter that is coming into
this method okay we later see how to
actually use this method so we are
adding the parameter to this command
object opening the connection executing
the command and then you know we are
creating the country object populating
respective properties and then adding
that to the list finally returning the
list back okay so we are done creating
country data access layer finally we
need to create a city data access layer
so let's name the file as city data
access layer dot C s so let's add that
to a project so CT data access layer dot
C s click Add and again to encapsulate
city information we need C D class and a
static method to return the list of
cities so let me copy this code paste it
into the city data access layer file and
obviously again if you look at the city
data access layer first let's get rid of
these compilation errors by copying
those namespaces that are required
it okay so if you look at this class
again pretty straightforward you have
city ID city name and country ID Auto
implemented properties within that city
class and then look at the you know get
cities by country ID methods so
obviously when I select the country then
I want to get the cities by country ID
so obviously we need a parameter of
country ID there which we are passing in
into this method so whatever is the
country ID that you pass in the rows
that match that country ID will then be
returned so the important thing to note
here is the query select star from TBL
cities where country ID is equal to at
country ID you know sequel parameter for
this sequel parameter we need to supply
a value which is nothing but this method
parameter okay and then we are adding
that parameter to the command object
open the connection execute the command
loop through each row and then you know
populate the city object properties add
that to the list of cities and then
finally return that list back okay
so pretty straightforward three data
access layer our class files all right
so now we need to build our project so
that these classes are compiled and then
let's flip to our web form so now we
need to configure these object data
source controls to use those you know
methods that we have just written so
object data source one control we want
this to talk to our you know continent
data access layer class and if you
remember this continent dot I mean
continent data access layer this
actually present in namespace demo okay
so let's flip to our waveform let's
configure this so what so a business
object demo dot continent data access
layer okay I click Next
and then we need to specify our select
method which is nothing but get all
continents click finish and now we need
to associate this with our in a grid
view one control so choose your data
source which is object data source one
and we want to enable selection so that
shows the Select
button there alright so we are done
configuring first gravy control now
let's go ahead and configure second
object data source control so configure
data source now in the second I mean we
want to use the second object data
source control to retrieve countries
information so let's choose our business
object which is going to be demoed
country data access layer and within
this country data access layer we have
got a method look at this get countries
by continent and notice this this method
has got a parameter continent ID of type
integer so obviously if you have to call
that method you will need to supply a
value for that continent ID so where is
that going to come from let me click
Next and and see what's going to happen
okay so now you know the wizard has
detected that this method has got a
parameter for which we need to supply a
value so where is that value going to
come from it's going to come from the
first grid view control so a control on
this waveform is going to supply a value
for that parameter so what is our
parameter source is going to be a
control so select your control and then
your control ID which is grid v1 so
continent ID you know the value for that
parameter is going to come you know from
this grid v1 dot selected value property
click finish now let's associate object
data source to with our grid view to
control okay and we want to enable
selection there as well and finally we
want to configure our object data source
three control to talk to our city data
access layer so demo dot city data
access layer click Next again this
method has got a country ID parameter
for which we need to supply a value so
where is the value going to come from
from another control on this waveform
whose ID is grid view 2 so country ID is
equal to grid view 2 dot selected value
click finish finally associate your
would be control with object data source
3 control and we are done
now when we run this we get a runtime
error but we'll see how to solve that ok
so when the waveform initially loads you
know we expect the countries to be
continents to be displayed but we
actually
at antimatter look at that data Keys
must be safe specified on grid view one
before the selected data Keys can be
retrieved now we have discussed about
this in the previous session as well so
you know basically what it means is if
you look at country data access layer
for example you know this has got a
method called get countries by continent
and we are passing in a continent ID and
where is the you know the value for this
parameter coming from it's coming from
the grid we wandered selected value
property now if you want to use that
property obviously you need to set the
data key names property okay within the
grid we control so for grid v1 we need
to set data key names property to
continent ID column and similarly we
need to do the same thing for grid view
too so for grid view to the data key is
going to be country ID I mean at the
moment we don't have to do it for the
third credit control because we are not
at we have not enabled selection but
it's always a good practice to set your
keys
so I'm going to set that as well for the
third retrieve control as well the
turkey names is equal to in this case
it's going to be city ID all right so
with this change it should work as
expected when the waveform initially
nodes it should show the continents only
once I select a continent then it should
show the respective countries within
that continent once I select a country
then it should show the cities alright
on this slide you can find resources for
a speed ordinate C sharp and sequence of
interview questions that's it for today
thank you for listening have a great day</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>