<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Part 2   Entity Framework Model First Approach | Coder Coacher - Coaching Coders</title><meta content="Part 2   Entity Framework Model First Approach - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/kudvenkat/">kudvenkat</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Part 2   Entity Framework Model First Approach</b></h2><h5 class="post__date">2014-05-05</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/UNt3uWqMdMU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">this part too of entity framework
tutorial in this video we'll discuss the
model first approach of entity framework
entity framework supports all these
three approaches schema first model
first and code first we discuss the
schema first approach in part 1 of this
video series in this video we'll discuss
the model first approach and in our next
video we'll discuss the code first
approach with a schema first approach
based on the underlying database tables
that is based on the department's and
employs tables we were able to generate
the department and employee entities in
this video we are going to make use of
the model first approach so in a model
first approach we first create the
entities that is the department and
employee entities establish the
relationship between them and then based
on these entities we are going to
generate the sequel that is required to
create the underlying database tables
that is the departments and employees
database tables let's see have to
achieve that now we will be working with
the same example that we worked with in
the previous session of this video
series so let's flip to visual studio at
the moment we already have this employee
model EDM X file the area dot entity
data model file now we have generated
this area dot with the entity data model
based on this schema first approach so
let's go ahead and delete that
EDM X file let's add a new item and we
want to add ad or net entity data model
and let's call this employee model click
Add
now with this schema first approach we
would select this option generate from
database because based on the underlying
database objects we want to generate our
entities okay but now we are going to
make use of the model first approach so
we are going to select empty model so we
are going to create our entities first
and then based on those entities we are
going to liberate the entity framework
to generate the required a sequel for us
to create the underlying database
objects okay so select empty model and
click finish so this should generate
employee model dot E DMX file for us and
on the design surface we don't have any
entities at the moment so what we want
is an employee first we want the
department entity so right click on the
design surface add entity and specify
the name for the entity let's call it
Department and today okay there is no
base type for this ok we are not using
any inheritance here so let's leave that
none for now and look at that entity set
is departments ok it's pluralized there
and this is we want a key property for
this that is the ID Department ID is
going to be the primary key within the
database table and the type of that
column should be int32 okay basically in
dija so let's go ahead and click OK so
this should generate department entity
for us and then notice that we already
have a scalar property there the ID
property and notice that there is a key
symbol on that meaning that is the
primary key okay now for the department
entity we also need name and location
scalar properties so to get them right
click on the department entity and then
select add scalar property and then
let's specify the name as the property
name and then when I right click on this
and then select properties so within the
properties window notice that the name
of this property is name is it nullable
no it's set to false and look at the
getter and setter properties in a both
of them should be public properties ok
and then maximum length look at this we
haven't set any maximum length at the
moment it is none and the type of this
property is string so you know the
sequel that is going to be generated to
create the department's underlying
database table now it is going to make
that column in the table as n we can and
then the size is going to be Max and
we're care of max because we haven't set
any maximum length here now for example
if you want the maximum length of this
column to be maybe 50 characters you
would specify the maximum length there
and is this an entity key no this
not the key column so that's why it is
false there by default okay and then if
you look at this ID property here so let
get let's get to the properties window
and if you look at you know store
generated ID pattern if you look at this
notice that this ID set as identity so
this will be created as an identity
column within the department's table
which means you know the value for this
will be automatically generated we don't
have to supply a value for the identity
column when we insert a row into the
database table but then if you let's
actually pin this down if you look at
name property look at that it's um store
generated pattern property set to none
so this is not an identity property okay
which means we all have to supply a
value for this when we insert a row into
the database table all right so that's
the name property let's go and add
another property this is going to be
location and again look at this by
default the type is going to be string
and here are max length again let's set
that to 15 if you don't set the maximum
length by default it will be and we're
care of max because the type is string
okay all right so that is our department
entity now we need to add another entity
that is the employee in today so let's
go ahead and add that so the name of the
entity will be employee entity set will
be employees and again there is an ID
property generated that is going to be
our key property of type in 32 and for
employee what scaler properties we need
we need first name this is going to be
of type string and and another scalar
property last name again that should be
string add another scalar property
gender again that will be of type string
now we need another scalar property
called salary and this one is going to
be of type integer so let's go ahead and
change salary to end
- all right so we are done creating the
department and employee entities now the
most important thing is we need to
create the navigation properties now
this department is going to have one or
more employees within it so ultimately
what we want to display we want to
display the data like this so every
department has got certain number of
employees okay so department dot
employees property should give us the
list of employees belonging to the
specific department so we need the
employees navigation property here and
similarly for the employee object we
need department navigation property so
employee dot department is going to give
the department details to which the
employee belong to ok so it's going to
be one to many relationship between
department and employees so a given
department is going to have one or more
employees ok
now how to add a navigation property
very simple right click on the design
surface add and then select this option
Association and look at this the moment
I select that option the fact that we
only have two entities that is the
department and employee entities so it
has already selected you know an
association name by default which is
Department employee Association and how
is this association going to be every
department you know one department is
going to have many instances of
employees so one department can have
many employees and each employee is
going to have one department ok so the
navigation property will be employees
within the department entity and within
employee entity the name of the
navigation property is going to be
department
okay so department is going to return an
employee sorry department property
within the employee object is going to
return a department object and employees
is going to return maybe list of
employees ok
so let's click OK and it's also going to
add foreign key properties to the
employee entity
and look at this the moment we click OK
it's going to create those two
navigation properties employees and
Department and then within the employee
entity it also added this foreign key
property department ID look at that a
department can have one one department
can have many employees represented by
star here ok and if you select this
department notice that you know the name
of the navigation properties Department
and multiplicity is 1 and what is the
return type going to be instance of a
department and for employees it is going
to be collection of employee object
because you know employees navigation
property is going to return many
employee objects ok all right so now
let's go and build our solution just to
make sure that everything still compiles
alright now we have these entities based
on these entities we want to generate
the sequel to create the underlying
database tables so how do we do that
simply right-click on the design surface
and then look at this option generate
database from model so based on this
model we are going to generate a
database now we need to have the
database created already so we already
have the sample database right here and
we also have these tables already
departments and employees let's leave
them there for now and then let's click
OK here look at the name of the
connection that is going to be stored in
web.config file it's called as employee
model container and we don't have the
option to change that at the moment so
let's leave it there like that and if
you recollect from the previous session
in the previous session we stored the
connection string and web config file s
employee dbcontext
ok and that is very important to keep in
mind you know because there is a
specific reason for that we'll discuss
that in our upcoming video for now keep
in mind that the name of the connection
string is going to be employee modal
container now let's click Next now look
at this
we have the DDL that is the data
definition language now this is the
sequel that is going to help us
eight the database objects that are
required so first of all look at this we
have the sequel to create department
stable and employee stable and further
down we have sequel to create the
primary key on departments and employee
tables and then sequel to create foreign
key constraint and then since there is a
foreign key constraint it is also going
to add a non-clustered index on that
foreign key constraint to help the
queries okay so we have all the script
that is required to create the you know
database objects so now let's click
finish so now this has actually
generated a file called employee model
dot e d MX dot SQL so this file contains
the sequel ok now notice that within the
file it says it's not connected so now
if you right click on the design surface
and then select execute sequel option so
it's going to provide a SKU for the
credentials to connect to the underlying
database table since it's a local
database I'm going to specify a dot as
the server name click connect I'm going
I'm using windows authentication and
look at this when it has executed the
sequel let's come back with errors so
there is already an object named
departments and there is already an
object named employees so obviously it
failed to run this script so let's go
ahead and delete those objects from
there let's delete the employee entities
as well so we can't delete the
departments table first why because in
our employees table is dependent on that
one there is a foreign key constraint
there so let's go ahead and delete the
employees table first and then let's
delete the department's table all right
now let's come back to visual studio and
then execute the sequel this time we
shouldn't get any errors so it says
command completed successfully now we
come back here and then refresh this we
should get the departments and employees
entities back but then if you look at
these two tables they'll not have any
data within them why because we have
just created the tables so we need to
populate these tables with Sam
data and to speed things up I have
already the required sequel here so
let's go ahead and execute the sequel so
this is going to insert the required
data let's execute these select
statements again to make sure we have
the data and then let's go ahead and run
our web forms application and this
webform 1 is already configured ok so
let's go ahead and run this one so on
this web form 1 we have a grid view
control and we also have an entity data
source control which is going to talk to
the entity model to retrieve data now
look at this we have an error here the
error says the specified default entity
container named employee DB context
could not be found in the mapping and
metadata information if you recollect
from the previous video session you know
with this name there is an entity
container class created as well ok
behind the scenes we'll discuss in
detail about the auto generated code in
a later video session but keep in mind
the name that we be used to store the
connection string in web config file
it's very important ok and be used
employee dbcontext in the previous
session but in this session it used a
different name so if we get to the
web.com fig file notice that it used
this name employee model container as
the name for the connection string now
this connection string right here is
useless we are not using it in anywhere
so let's go ahead and delete that and
then copy this connection string and
then within our web form 1 dot aspx we
have this entity data source control and
if we look at the connection string
right here it is still making use of
that employee dbcontext
so let's replace that that employee
model container and then the default
container name that is also going to be
employee your model container let's save
all these changes let's go ahead and run
the application now and notice that we
get the output that we expect so in this
video we have discussed using model
first approach of the entity framework
in our next video we'll discuss the code
first approach that's it for today thank
you for listening
have a great day</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>