<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Logging exceptions as information entry type in windows eventviewer   Part 74 | Coder Coacher - Coaching Coders</title><meta content="Logging exceptions as information entry type in windows eventviewer   Part 74 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/kudvenkat/">kudvenkat</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Logging exceptions as information entry type in windows eventviewer   Part 74</b></h2><h5 class="post__date">2012-12-08</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/cmGnBj9BiS0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello welcome to regime technologies I
am venket this is part 74 of asp.net
video series in this session we'll
discuss about logging exceptions as
information entry type in the Windows
Event Viewer in part 72 of this video
series we have discussed the basics of
Windows Event Viewer and in part 73 we
have seen how to log exceptions to the
Windows Event Viewer as errors in this
session we are going to log exceptions
as information entry type in the Windows
Event Viewer let's look at that with an
example I have an asp.net web
application project here on this web
form 1 I have two text box controls
where the user can enter their first
number and second number and then once
they click this divide button we divide
the first number with the second number
and display the result in this label
control let's look at the code that we
have on this button click event so
within the button click event it's a
pretty simple code we are retrieving the
text from the first number text box
converting that to an integer and
assigning that to a first number
variable and along the same lines we are
retrieving the second number from the
second number text box converting that
to integer assigning that to second
number variable and we are dividing the
first number by second number whatever
result we get we are storing that in a
result variable which in turn is then
assigned as the text for the label
control and finally we are setting the
full color of that label to Navi so
whenever we are dividing these two
numbers if there is any exception we are
handling those exceptions using the
respect to catch blocks that you can see
here now the first catch block is
catching the format exception again it's
always a good practice to catch specific
exceptions before catching the general
parent exception and we have discussed
about the basics of exception handling
in the previous sessions in this asp.net
video series so we are catching the
format exception so when do we get the
format exception so let's look at that
when we when I run this application you
should say the calculator load up now
it's expecting a number to be entered
but then instead of numbers if we enter
alphabets or special characters then you
know this alphabets cannot be converted
to integer so
obviously when it tries to do that we
get a format exception so whenever I am
getting a format exception what we are
doing we are logging that format
exception now if you remember we have
discussed about this logger class this
is a custom class that we have written
to log the exception to the Windows
Event Viewer
so we have the logger class here which
has got the log method and this log
method takes in an exception and logs
that to the Windows Event Viewer now
again we have discussed about this
logger class that we have written in the
previous session if you haven't watched
that I would strongly encourage you to
do so before continuing with the session
so if you look at this method itself
what it's doing it's taking the
exception object retrieving the
exception type exception message and
exception stacktrace okay and then we
are appending you know the type name the
message and stacktrace
to the stringbuilder object okay and
then what we are doing after that we are
retrieving the inner exception out of
the exception object and assigning that
to this inner exception variable and
then we are looping through that inner
exception because an exception can be
wrapped inside another exception so if
we have an exception inside another
exception we want to loop through every
exception that's available and then
retrieve the exception type exception
message and exception stacktrace
that's why we have this while loop here
so while inner exception is not now this
piece of code is exactly a copy of this
code okay so we are retrieving the
exception type message and stacktrace
and then again assigning the inner
exception to another exception and we do
this as long as the inner exception is
not now and finally what we are doing
here is we are checking if the source
exists presume techcom and then we are
logging we are creating an event log
object here setting the source to
presume tag and finally logging the
exception and look at that here we are
specifying the exception type as error
type but let's say I want to log that as
an information how do we do that that's
what we are going to discuss in this
video session and
look at what we are doing here we are
logging the format exception using that
log method that we have written and then
we are setting the faux color to red and
the text message only numbers are loved
that's the message that will be shown to
the end-user okay and then we have
overflow exception when can a no slow
exception occur whenever you enter a
very big number that an integer can hold
look at that that's a very big number an
integer cannot hold that when I click
the divide button so I get that message
so what are we doing here whenever
overflow exception occurs we are logging
that overflow exception we are setting
the for color to red and then we display
this message number must be between you
know minimum value of an integer and
maximum value of an integer and that's
what is the message that we display to
the end-user but then before that we are
logging that exception and once we log
that exception you can see that within
the Windows Event Viewer so presume that
this is the custom windows lock to which
we are logging that exception so if i
refresh this here you should see that
log there and if you look at that this
is logged as an error and look at that
value was either too large or too small
and what's the type of exception we have
got overflow exception and at which line
did I get that at line number 23 on wave
form 1 dot aspx dot CS okay so that's
the idea we are logging all these armed
entries as errors within the event log
ok but how do I log them as information
entry type because if you look at the
windows locks that we have some of them
are logged as information warning etc so
I want to do that how do we do that
that's what we'll be looking at in this
session so let's go back to pledge mtech
logs ok let's look at this code further
and I have divided by 0 exception
obviously if the user attempts to divide
a number by 0 we get infinitely we
cannot divide a number by 0 so an
exception will be drawn on divided by 0
exception again we are logging that
exception setting the foe color to red
and then displaying a message to the
user denominator cannot be zero okay if
there is any other
Shin apart from these three exceptions
then we have the general base exception
catch block here which catches any other
type of exception and locks that to the
event viewer and then display this an
unknown problem has occurred please try
later okay
and our logger class is doing all the
hard work here logging the exception
today even to our but then I want to
correct this this log method can be
simplified further instead of you know
look at this this piece of code here is
an exact copy of this code here so we
can simplify this further using a
do-while loop so what I'm going to do
here is I'm going to get rid of this
entire stuff here and then I'm going to
copy this piece of code okay so if you
look at this code all it's doing here is
it's risked retrieving the exception
type message and stack trace and then
appending that to this string builder
object okay so we have the string
builder object so we can get rid of this
line okay so what I want to basically do
here I'm going to get rid of this entire
while loop I'm going to put that there
and then I'm going to say do this okay
so we have the exception object the
exception object comes in we are
creating a string builder object
instance and then we are retrieving the
exception type exception message and an
exception stacktrace
and then what we will do here is we'll
create instead of that inner exception
object I'm going to just say exception
is equal to exception dot inner
exception so we are retrieving the inner
exception out of that exception object
and then assigning that back to the
exception variable and then here we will
check if exception is not equal to now
okay so what is this going to do this is
going to loop through this while loop as
long as we have an inner exception
and then it retrieves the exception type
message and stacktrace happens that to
the stringbuilder object and then
finally we are using that stringbuilder
object to log you know to the event
viewer
okay so now this is a lot better
we just have do-while loop here and the
single loop is doing everything if you
have just one exception you know one
exception without an exception this loop
will be executed only once but if you
have multiple inner exceptions it's
going to loop through those inner
exceptions as long as there is an
another exception retrieve the exception
type message and stack tress and then
finally log that to the event viewer but
if you look at this it's logging that as
an error event entry type within the
event log let's see how to do this not
to log as information entry type and to
do that what I'm going to do is look at
this right now I am going to pass in
this method currently it's hard coding
the event log entry type so what we will
do is we'll actually pass in a parameter
an additional parameter to this method
I'm going to pass it as event log entry
type that's the type of day parameter
that we want to pass and the variable is
going to be that one the parameter name
okay so but then if I just leave it here
like this what happens to my existing
application it breaks because within
your logger you have a log method
initially it was just taking one
parameter but now you have changed it to
take two parameters so obviously the
existing client code client code meaning
the code which is using this class will
break so here webform one is actually
using that class logger class and lower
class doesn't have a log method which
takes one argument look at the message
there okay because why we changed that
to take two parameters okay so in order
to make the existing applications work
as they are I need to provide another
method but before we do that let's
remove this hard coding here so what I'm
going to do since I have a parameter
that I'm passing into this method I
going to remove this hard-coding here
and then i'm going to say let's remove
this hard coating so event log entry
type that's the parameter that's coming
in so all we are doing is we are passing
in that here that's it we are done okay
but then we have to fix the breaking
client hold the breaking code in webform
one so what I'm going to do here is I'm
going to provide another log method so
by default so let's copy this method
signature I'm going to copy that
and I'm going to get rid of this one the
additional parameter look at that so now
I have this log method okay so if we
look at where from one dot aspx now this
code is not breaking anymore because why
the logger class has that one method
which takes one parameter now what we
are going to do is we are going to in
this method we are going to invoke this
log method okay this is okay we are
going to invoke that method and if you
look at that method it expects two
parameters so it requires an exception
object I'm going to pass that exception
object and the second parameter I'm
going to hard-code
the event entry type as error so what we
are basically doing here is if somebody
calls your log method without passing in
this parameter that we are going then we
are going to lock that exception by
default as an error but in case if they
pass the event log entry type they can
specify how they they want to lock that
exception do they want to log that as an
error or information warning etc okay so
now look at this we have two methods
here so in our web form let's say for
example I want to log maybe format
exception as an information entry type
to do that all I have to do is use the
other overloaded version so the moment I
open the parentheses here look at that
it's showing I have two versions of log
method available one version which takes
just the exception object and the other
version which takes the event log entry
type enum as well
so I'm going to use that parameter so
event log entry type dot I'm going to
log that as information okay on along
the same lines let's say if I get an
overflow exception I want to do the same
thing as well I want to log it as
information but on the other hand let's
say when I went when a user tries to
divide a number by zero then I want to
log it as an exception I mean an error
as well an error okay so I'm going to
leave that as it is okay so now let's go
ahead and run this so now obviously
overflow exception format exception both
of these should be logged as information
so when I when do I get a format
exception if I enter alphabets instead
of numbers you know this cannot be
converted into numbers so we get a
format exception so only numbers that
are loved and if we go back to the in
the Event Viewer refresh that look at
that I get a format exception but look
at how it is logged it is logged as an
information entry type and similarly if
I try to maybe enter a very big number
again this will be logged as an
information entry type so let's refresh
that so that's logged as overflow
exception as an information entry type
but on the other hand if I attempt to
divide a number by 0 maybe I want to
divide 3 by 0 and click divide you
cannot divide a number by 0 but then if
you remember we are logging that as an
error entry type okay so in this video
we have seen how to log exceptions to
the Event Viewer as information entry
type rather than as error entry type
along the same lines all you have to do
is use this enumerator to control how
you want to log you know the entry
within the Event Viewer on this slide
you can find resources for asp.net
c-sharp and sequel server interview
questions that's it for today
thank you for listening have a
day</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>