<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Part 10   Entity splitting in entity framework | Coder Coacher - Coaching Coders</title><meta content="Part 10   Entity splitting in entity framework - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/kudvenkat/">kudvenkat</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Part 10   Entity splitting in entity framework</b></h2><h5 class="post__date">2014-05-20</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/B5BQo-5xdxE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">this is part 10 of entity framework
tutorial in this video we'll discuss the
concept of entity splitting with
database first approach energy splitting
refers to mapping an entity to two or
more tables when the tables share a
common K let's understand what we mean
by this statement with an example let's
assume we have got these two tables
employees employee contact details if
you notice both of these tables have the
same key column which is employee ID
this employees table contain their first
name last name and gender employee
contact details table contain their
contact details like email mobile and
landline numbers now let's say if we
were to generate an ad or net entity
data model based on these two tables and
the framework is automatically going to
generate two entities employee entity
based on this employee's table employee
contact detail entity based on this
employee contact details table let's
actually look at that in action let's
flip to sequence of management studio I
have already created these two tables
here is the sequel script that can do it
I'll have the sequel script available on
my blog in case you need it now let's
flip to visual studio so here I have a
new MT asp.net web application project
to this project let's add a new item and
we want to add a do dotnet entry data
model and let's give this a meaningful
name let's call this employee model we
want to generate our model from the
database so select that option click
Next give the connection string a
meaningful name let's call this employee
dbcontext and click Next so this is
going to connect to the database and
retrieve all the tables views in store
procedures let's select these two tables
and let's give the model namespace a
meaningful name let's call this employee
model click finish notice that it has
generated two entities now since the
underlying tables share the common key
column which is employee ID now we can
map a single entity to both of these two
tables okay let's see what we mean by
that so now look at this this employee
entity contains first-name lastname
gender
employee ID which comes from the
employees table and the employee contact
details contain you know employee ID and
the contact information email mobile and
landline now let's say we want all these
properties of the employee to be present
in a single entity let's say we want all
of those properties in this employee
entity so how to achieve that
so select these three properties email
mobile landline we don't have to you
know remove the employee ID because the
employee entity has already caught that
so I'm going to select these three
properties and then plus control legs to
cut them right click on the employee
entity and paste them so now all the
properties are present in this employee
entity now right-click on this employee
contact details and three and delete
that because we don't no longer need it
there's all our employee properties are
now going to be present in the employee
entity now on this prompt this is very
important make sure you click no because
if you click yes this employee contact
details table will be removed from the
store model as well and we don't want
that and in a bit we'll understand the
reason why so on this prompt make sure
you click now all right now let's
right-click on this employee entity and
select this table mapping option now if
you'll notice this you know mapping
details here look at this at the moment
this employee entity is mapped to
employees table and look at this
employee ID column is mapped to employee
ID property first name column is mapped
the first name property so on and so
forth last name and gender as well now
in addition to these properties this
employee entity also contain email
mobile and landline properties so if you
look at the table mappings you know they
are not mapped at the moment ok this
entity at the moment it's only mapped to
employees entity so we need to map that
to employee contact details table as
well and how do we do that so here if
you drop this list down notice that we
have that employee contact details table
there now if you have selected yes
on the prompt you know that has prompted
when we were deleting employee contact
details if you have selected yes there
then this option wouldn't have been
available so select map you know
employee contact details table so this
entity at the moment is now mapped to
two underlying database tables and
that's what is called as entity
splitting okay and look at this the
designer is smart enough to map the
properties to the respective columns
based on their names so employee ID map
to employee ID email the email mobile to
mobile and landline to landline alright
so let's go ahead and build a solution
just to make sure everything still
compiles all right now let's quickly add
a webform to this project and then test
our split our entity so let's add a wave
form and this wave form
first of all let's set the style
attribute let's use font family of idea
then let's actually flip this to the
design mode let's drag and drop a grid
view control a details view control and
an entity data source control okay and
let's first configure our entity data
source control
so in the named connection let's select
employee dbcontext click Next and here
we should have our employees so we want
to select all the properties and we also
want to enable insert update and delete
click finish and let's configure our
grid view control let's actually auto
format this answer this colorful scheme
and now let's choose entity datasource
one and let's enable editing and
deleting okay and similarly let's
configure our details view control
let's select colourful scheme and then
let's select entity datasource and we
want to enable inserting and noting that
we want to do on the details view is set
the default mode just to insert because
we're going to use details view only for
inserting a record and we don't want
this employee ID to be editable so let's
go ahead and change the employee ID
bound field so let's set insert visible
attribute to true we discussed all these
steps in detail in our previous video
session so I'm not going to go into the
details we actually need to set that to
false so insert visible also that
alright so with all these changes let's
go ahead and run this so when the
webform loads it should display the
employee information so now we have got
a single entity which is employees has
got the information from both the tables
and let's even be edited if it updates
the tables correctly so let's put a 1
next to their first name last name
gender and maybe their email and
landline number as well then let's click
update ok so it seems to have updated
let's quickly go to the table and
retrieve data and see if it has updated
the tables correctly look at that every
framework is smart enough to update the
underline
tables correctly look at that has
updated employees table as well as the
employee contact details tables as
expected let's quickly delete a row and
see if it gets deleted from both the
tables so we deleted that
so let's come here and check if they're
always deleted look at that Row one is
deleted and let's insert a new row let's
say we want the insert test that's
everything so e last name is going to be
test gender test and let's insert this
okay so the record should have been
inserted so let's quickly execute that
look at that we get the inserted record
and notice in both the tables employee
ID is 6 so it's working as expected now
the reason why it's not refreshing the
grid view control here is basically
because we need to add you know an even
handler and then refresh the grid view
control so for the details view control
click on the events icon and double
click on item inserted event here so
that it's going to generate the even
handler and within the event handler we
are simply going to invoke the data bind
method of the 20 control so now when we
insert data so X let's say X everywhere
or test for email gender mobile and
landline and then let's sensor this and
notice that now it gets refreshed and
within the database it should answer
that record as well so this is the table
mappings option where we have mapped the
entity to the underlying tables so this
is one of the very important steps
that's it for today thank you for
listening
have a great day</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>