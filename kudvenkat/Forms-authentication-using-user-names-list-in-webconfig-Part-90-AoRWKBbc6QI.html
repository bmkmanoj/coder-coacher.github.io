<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Forms authentication using user names list in web.config   Part 90 | Coder Coacher - Coaching Coders</title><meta content="Forms authentication using user names list in web.config   Part 90 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/kudvenkat/">kudvenkat</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Forms authentication using user names list in web.config   Part 90</b></h2><h5 class="post__date">2012-12-20</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/AoRWKBbc6QI" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so welcome to prism technologies I am
venket this is part 90 of asp.net video
series in this session well discus about
when to use forms authentication and how
to enable forms authentication anonymous
authentication is fine for websites that
contain public information that everyone
can see we discussed about anonymous on
that negation in parts 85 and 86 windows
authentication is best suited for
intranet web applications where uses a
part of a windows-based domain network
we discussed about windows
authentication in parts 87 88 and 89 of
this video series if you haven't watched
these videos I would strongly encourage
you to do so before continuing with the
session in this session we are going to
discuss about forms authentication so
obviously the first question is when to
use forms authentication forms
authentication is best suited for
internet web applications so obvious
advantage of using forms authentication
is that users doesn't have to be a
member of any domain based network to
access the application for example look
at the applications like Gmail Amazon
and Facebook we are not part of their
domain based network but I am still able
to access their application using forms
authentication let's see how to enable
forms authentication for an asp.net web
application so let's flip to visual
studio I have a very simple asp.net web
application here and if you look at this
web application has got this login page
login dot aspx and it's only the HTML
very simple HTML you know I have some
login you know that static text username
and then a text box to capture user name
password to capture the password of the
user and then I have this check box
remember me we will talk about the
significance of this check box in just a
bit and then I have a button control so
obviously when the user clicks this
button we want to allow him to login
okay and then a label make a label
control here to display any error
messages and then here I have some
static text and then an anchor tag here
so if the user has a username and
password he can provide them and click
the login button to log into the
application if they don't have a user
name then they can click this hyperlink
and navigate to the Regis
raishin page so if I flip to the source
here if you look at the registration
page look at the hyperlink reference
here it's pointing to registration and
then register dot aspx page
so obviously this register dot aspx page
is present in a different folder
registration folder register dot aspx
and if you look at the way we you know
this register page is not implemented at
the moment at the moment all it has is
an h1 tag saying registration page we
will see how to implement this page in
the next video session okay so that's
the login page and the registration page
apart from these two pages I have
another page Welcome dot aspx again this
Welcome dot aspx page it just has an h1
tag saying welcome page okay now let's
see how to enable forms authentication
for this asp.net web application now as
the application stands if I try to
access this application navigate to any
page I will be able to do that currently
I am on login dot aspx page but I can
type the URL of the welcome page and
navigate to welcome page okay so we have
not yet using forms authentication so if
i am using forms authentication unless
and until the user provides the username
and password and logs in he should not
be allowed to access the other areas of
the application but at the moment i am
able to do that let's see how to enable
forms authentication to enable forms
authentication within the web config
file we use the authentication element
so authentication mode is equal to forms
so I am using forms authentication
obviously so when you are using forms
authentication you will have to tell the
application which is the page that
you're going to use to collect the
username and password so you have to
specify the URL of the page that's going
to contain the username and password
fields so that can be specified using
login URL property so login URL
attribute of the forms element so which
is the login page for us the login page
is going to be login dot aspx so i'm
going to use that
okay and then here okay so at the moment
we have specified we want to use forms
authentication this is the page way we
want to capture the username and
password and then we can actually store
the usernames and passwords within web
config file itself and to do that I can
use credentials element and here you can
specify how you are storing the
passwords for the users so password
format at the moment I'm going to use
clear but you can also use encrypted
passwords like using the algorithms md5
or sha-1 but at the moment I'm going to
use clear and then I can specify the
username so username is equal to let's
say for example when card and then maybe
the password is equal to venket now you
might be thinking okay in reality do we
actually store usernames and passwords
in web config file that's not true we
don't really save these usernames and
password in web config file instead
these are actually stored in a database
table and then we will actually
authenticate against those values but
then we will quickly see how to store
these usernames and passwords in web
config file and then authenticate
against them so one user is frankerd and
the other user is going to be prism so
username and password are same here okay
so we enabled forms authentication okay
let me go ahead and run the application
as it stands right now so I'm able to
access the login page but then let me
try to type in welcome dot aspx and see
if i will be able to navigate to that
way look at that i am still able to
navigate to that page
okay that's because we have only enabled
that forms authentication here but then
we haven't told the application not to
disallow anonymous authentication again
we can do that either in IAS or in web
config file so how do we do that in web
config file by using you know deny
element within the authorization element
so I use the authorization element I'm
going to say deny users is equal to
question mark meaning anonymous users so
we are denying access to n animus users
okay so all right now let's go ahead and
run this application
and try to navigate to the welcome page
look at that
look at the URL it's redirecting me back
to the login page so I'm not able to
navigate to welcome page why is that
because I'm not logged in so once I log
in then I will be able to navigate to
that page so let me try to navigate in
or login so when Kurt and a wanker and I
click the login button okay look at this
I'm not able to you know login why
because we only stored the usernames and
passwords in web config file we haven't
really returned the returned the code to
navigate the user against those stored
credentials so how do we do that get to
the login page
double click the button control to
generate the event handler and we have
to write the code here and by the way
all the classes related to forms
authentication are present in system dot
web dot security namespace so we will
have to import that and how are we going
to authenticate now there's a class
called forms authentication class I can
make use of that class so when I click
that button what should we do we should
retrieve the username and password from
these text boxes and compare them
against the usernames and passwords that
I have in web config file and if they
match login the user and redirect him to
welcome dot aspx page so that's exactly
what we are going to do right now so
forms authentication class has got a
method called authenticate and if you
look at this method this method is
expecting a username and password to be
passed in once we pass in and username
and password this method will take those
values compared them with the values
that we have in web config file and if
they match look at the return type of
this method it's it's a boolean return
type so it's going to return a true so
if the username and passwords match it
returns true otherwise it returns false
so where is the username present txt
username that's the ID of the textbox
and the password is present in txt
password so that's the password ok so
basically what we are doing here F forms
authentication dot authenticate so if
that method returns true we know that
the user has supplied the correct user
name and password that match up with
what we have in web dot config file
otherwise else what we want to do we
have a label control on the login page
just like how we have the text box to
capture user name and password so here
are the text box to capture the username
and password similarly I have a label
control which will display any error
messages login error messages okay so
that's this label so if the username and
password doesn't match then what we want
to do LBL message dot text is equal to
we want to display a message stating so
so invalid username and/or password now
one thing to keep in mind as far as
security is concerned you know when
validation when login fairs do not tell
him which is right and which is wrong
you know some applications today also
show that you know username is correct
but password is incorrect and or don't
ever give the details of that because if
if the hacker knows okay the username is
right it's only the password I'm
guessing wrong he can use dictionary
attack to crack the password that's why
as far as security is concerned only
give the minimum amount of details that
are required to the end user okay so I'm
here saying invalid username and
password it could be any of them that is
invalid okay so on the other hand if
it's a valid username and password then
what we want to do we want to redirect
the user from the login page and how do
we do that the forms authentication
class itself has got a method called
redirect from login page and if you look
at the parameters that it is expecting
it's expecting a username parameter and
then another parameter create persistent
cookie of type boolean okay so what is
this redirect from login page method
going to do so it's going to redirect
the user to you know to any of the pages
within your application and then before
that it will actually create an
authentication okay so to create the
authentication cookie it requires the
username of the user okay so where is
the username present it is present in
txt username so let's retrieve that and
then there is another parameter here
here
will create persistent cookie so the cui
that this method is going to create do
you want that to be persistent on the
client computer meaning even if we close
the browser do we want that cookie to be
present on the client computer if that's
the case specified true otherwise
specified false so if you specify false
as soon as you close the browser the
cookie will be you know deleted okay so
for at the moment let's say it's false
okay so that's it so we authenticate the
user and we redirected that user so let
me go ahead and run this now as it
stands so I am on the login page so let
me type in a username and password I'm
intentionally typing your wrong password
look at that I get that message invalid
username and password on the other hand
let me go ahead and type the correct
password and click login look at that it
still says invalid password let me see
what's the password
its capital way okay let me type that
click login okay now I'm logged in but
then look at this the resource cannot be
found I got an HTTP 404 page cannot be
found now why is this because you know
when you click this login button after
the user is authenticated it redirects
from login page now look at this here
you're not specifying where do you want
to redirect the user so the application
is going to assume there's going to be a
page with name default or dot aspx look
at that it's trying to navigate the user
to default dot aspx
but in our application do we really have
default dot aspx no that's why it says
the resource cannot be found and
obviously to correct this there are two
ways one is add a page with default dot
aspx let's say in my application I don't
need to have a page with default dot
aspx then how do I solve this problem to
solve this problem in web config file
the login URL I mean the forms element
has got another attribute called default
URL so this is the name or URL of the
page where you want to redirect the user
upon successful law
again so I want to redirect the user to
welcome aspx page so let me copy the
name of that and then specify that here
okay so now let's go ahead and run this
once again so on the login page press
ctrl f5 once we are on the login page
let's go ahead and enter the username
and the password and click login look at
that now it redirects me to the Welcome
page because the application knows the
default URL upon successful login is in
a welcome dot aspx page okay now there
are other attributes you know that we
need to understand ok there is another
thing that we need to understand here
now let me close this browser let me
copy this URL ok and close this browser
let me open another instance of the
browser and then paste the URL there and
click enter look at that it's
redirecting me because I am not logged
in ok so as soon as I close the vendor
what's going to happen to the
authentication cookie that is written to
the client computer it's immediately
destroyed so when I make a request to
welcome dot aspx page the web server
identifies that there is no you know
authentication cookie present so it is
redirecting me to the login page now
let's say you know for example if you
take Gmail or any other website if you
click you know remember me and then it's
and then close the browser later you
come in open gmail.com you are
automatically logged in because the
cookie is a persistent cookie meaning
it's saved permanently on to your
computer so is it possible to do that in
asp.net absolutely and we have seen you
know the method in the log in you know
redirect from log in at the moment if
you look at the second parameter a bool
create persistent cookie that's false if
V hard code that to true then every time
it's going to create a persistent cookie
instead of that what I'm going to do
right now is use the value of this check
box so remember me checkbox so the idea
of that is check box remember main dot
check so this property that checked
properties again true or false if the
user has checked that check box it will
return true otherwise false so
if it is checked then we want to create
a persistent cookie otherwise you know a
cookie that expires immediately all
right so let's go ahead and run this
right now
so let me enter the user name and
password and look at this I'm going to
select this remember me login okay I am
logged in right now let me copy the URL
close the browser so even after closing
the browser the cookie is going to be
present on my computer so if I come
maybe later open the browser window type
in the URL there and press ENTER look at
this I am able to navigate to that page
directly okay why because the
authentication cookie is present on my
computer because I have told to create a
persistent cookie okay
now when when will this cookie be
deleted there are two ways one is the
user can delete the cookie so I can go
to history in google chrome and then
clear all browsing data and here you can
see that delete cookies is selected
so when you say clear browsing data its
going to delete the cookies on my
computer so obviously now the cookie is
deleted so if I close this browser
window open another browser window and
try to navigate to the Welcome page now
since the cookie is deleted I'll be
redirected to the login page okay so if
the user doesn't delete the cookie then
is the cookie going to be present on the
client computer you know indefinitely
now again we have control on how long
it's going to remain on the client
computer so where do I specify that
again in web config file so within web
config file you know for the forms
element there is another attribute
called timeout
the default is 30 minutes but you can
specify it you know for how many ever
minutes you want so once you make this a
persistent cookie to the client computer
then you can specify the time limit at
what point in time is it going to expire
and that's going to be in minutes
okay so another important attribute this
forms element has caught its protection
and if you look at this it has got all
encryption non validation the default
value is all meaning basically this
action attribute specifies the
protection that is provided for the
authentication cookie that is returned
to the client computer the default is
all meaning it performs both encryption
and data validation obviously the other
choices as you can see here you can
either select only encryption or
validation or not in which case it will
store it in a plain text format which is
not you know recommended okay
so the default is all if you don't
specify it it's going to encrypt and
perform data validation as well okay but
at the moment there are two problems
with this application what are those two
problems now it's not a good practice to
store usernames and passwords in web
config file why because if we want to
create the usernames and passwords
dynamically we need to change the web
config file now changing web config file
on an application that is deployed at
runtime is not suggested because you
know all the session variables will be
lost
if those session variables are stored
inside the worker process why because
when web config file is changed at
runtime the web application restarts so
the worker processes recycle because of
which if the session state provided is
the end process all the session data is
lost that's why if you really want to
create if you really want to have the
capability of creating users at runtime
then it is best to store those usernames
and passwords in a database table okay
and at the moment there is another
problem if you look at this one if I am
not logged in look at us let me run this
application now so at the moment I am
not logged in and let me click this
button click here to register so when I
try to you know go to the registration
page look at that
I am not able to navigate even to the
registration page but in reality if you
are not registered I mean obviously will
not have a user name and password to
login so users will click on this
register page and they should be able to
navigate to date that page provide the
registration information and then able
to register but here I am NOT even able
to navigate to that page in the next
video session we will discuss about how
to solve this problem how to navigate to
the registration page in spite of being
not logged then and then how to actually
create
the users you know in a database table
and in the next video session after that
we will see how to actually use those
stored credentials to validate and login
the user instead of storing the
usernames and passwords in web config
file on this slide you can find
resources for asp.net c-sharp and sequel
server interview questions that's it for
today thank you for listening have a
great day</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>