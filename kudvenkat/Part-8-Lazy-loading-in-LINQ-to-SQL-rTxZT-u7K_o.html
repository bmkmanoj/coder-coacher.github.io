<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Part 8   Lazy loading in LINQ to SQL | Coder Coacher - Coaching Coders</title><meta content="Part 8   Lazy loading in LINQ to SQL - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/kudvenkat/">kudvenkat</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Part 8   Lazy loading in LINQ to SQL</b></h2><h5 class="post__date">2014-09-10</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/rTxZT-u7K_o" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">this is part 8 of link to sequel
tutorial in this video we'll discuss the
concept of lazy loading and Link to seed
file
so what's lazy loading lazy loading
means the related entities are not
loaded until we iterate through them or
data bind them by default link to sequel
loads related entities by using lazy
loading in the example here there is a
one to many relationship between
department and employee entities a
department can have one or more
employees when departments are loaded
the related entities that is the
employee entities are not loaded
employee entities are only loaded when
we iterate through the employee objects
belonging to each given department let's
prove this with an example let's first
prove this with a console application so
what we want to do is print the
department name followed by all the
employee names belonging to each
department so let's flip to sequel so
management studio here we've got the two
tables departments and employees let's
flip to visual studio so here I have a
new console application to this project
let's add a new item and we want to add
a link to sequel classes let's name this
sample dot DB ml let's go to server
Explorer drag and drop these two tables
onto the design surface so here we have
got the entities let's go to program dot
cs5 let's create an instance of the
sample data context let's call it
dbcontext
now let's use a for each loop look
through each department and then print
the department name
now in addition to printing the
department name we also want to log the
sequel query that is generated on to the
console screen and in order to do that
we are going to make use of the log
property of the data context object all
right let's run this and inspect the
output notice we have all the department
names printed look at this you know
there is only one query which loads all
the departments now we don't have any
queries to load the related entities
that is the employee entities at the
moment within the code we are not
looping through the employees belonging
to each department that's why the
related entities that is the employee
entities are not loaded now let's try to
loop through the employee objects
belonging to each department and then
print the first and last name of each
employee so let's use another for each
loop so for each employee in department
dot employees so first let's print a tab
space and then let's print the employee
first-name give a space and then print
the employee last name
alright now let's go ahead and run this
now look at the output so there's one
query to load all the departments and
look at this we have the IT department
name printed and when we try to iterate
through the employee objects belonging
to IT department that's when another
query is issued and all the related
employee entities are loaded look at the
value for the parameter it is one so the
IT department ID is one and then it
prints the HR department and then there
is another query to load the employees
belonging to the HR department and then
we have the payroll department printed
and then another query to load the
employees belonging to the payroll
department so overall we have one query
to load the departments and then three
more queries to load the employees
belonging to each department so this is
lazy loading only when we need
the related entities that's when you
know those entities are loaded so they
are loaded on a demand so now here we
have looked at an example of a console
application where we are iterating
through the items and on demand the
related entities are loaded let's look
at another example of web application so
here we are doing data binding and the
same will be the case when we data bind
the related entities only then they will
be loaded otherwise they won't be loaded
and let's prove this with a web
application so let's flip to visual
studio so here I have a new empty
asp.net web application project to this
project let's add a new item and we want
to add a link to sequel classes let's
name the sample dot DB ml and let's drag
and drop the tables onto the designer
surface to this project let's add a web
form and on the web form we need agreed
we control so let's drag and drop that
from the toolbox so the first thing that
we want to do is specify the columns
that we want to display within the grid
we control so we want a bound field
which is going to display the department
name so header text equals let's specify
that as department and data field is
going to be the name of the department
and we are also going to have another
template field here and template field
is going to have an item template and
inside this item template we are going
to have another grid we control so this
grid we control is going to display the
first and last name of employees
belonging to each department first of
all on the outer grid we control we also
need to turn off auto generate columns
and we need to do the same thing for
this inner grid control as well right
now let's specify the columns so we want
to bound columns here so let's copy and
paste that
so in the first column we are going to
display first name data field is going
to be first name and in the second bone
column we are going to display last name
alright let's go to the code-behind file
with the page load event let's create an
instance of sample data context let's
call this dbcontext dbcontext dot
department is going to give us all the
departments which we want to bind with
the gridview one control and let's call
data bind method alright now let's go
back to the aspx page and let's flip to
the design mode and let's actually auto
format this and then choose this brown
sugar color screen so that it looks a
little nice now one more thing that you
need to do is for the second column
let's specify employees as the header
text so for the template field let's
specify a header text
all right and one more thing that we
need to specify is for the second
grid-view control we need to set the
data source so the data source for the
second grid we control is going to be
angle bracket percentage hash eval so
there's going to be employees property
the Department object is going to have
employees property so that's what is
going to serve the data for this grid
view control alright alright so with all
these changes let's run the webform and
one more thing that we need to do is we
want to log the queries on to the
webform and in order to do that we are
going to use the log property so DB
context dot log equals response dot
output alright with these changes let's
run this now so we should get both the
department and employees belonging to
each department printed so we have the
department that employees belonging to
each department and look at the query
that is generated so this first query
right here is going to load all the
departments and then notice that we have
got three more select queries you know
which are going to load the employees
belonging to each department so that's
going to load for the IT department and
this is the select statement for HR
department and the final select
statement for payroll department right
now let's turn off the second grid view
control binding so let's go to the
project and then let's remove this data
source so when we don't have this data
source then you know the second grid we
control will not be bound to data now
let us look at what's going to happen
look at this now only departments are
you know displayed within the grid we
control and look at the query there is
only one query which loads the
departments now since we are not data
binding the related entities there are
no queries you know the related entities
are not loaded so this is lazy loading
by default you know the related entities
are not loaded they are only loaded on
demand
when we iterate through the items or
when we data bind those related items in
our next video we'll see how to change
this default behavior and then eager
load related entities that's it for
today thank you for listening have a
great day</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>