<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Part 61    How to get value from a gridview templatefield | Coder Coacher - Coaching Coders</title><meta content="Part 61    How to get value from a gridview templatefield - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/kudvenkat/">kudvenkat</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Part 61    How to get value from a gridview templatefield</b></h2><h5 class="post__date">2014-09-25</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/kCoGwiolmH4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">this is part 61 of kitview tutorial in
this video we'll discuss how to get
value from a control that is present
inside an item template of a gridview
template filled column let's understand
what we mean by this with an example
we'll be using these two tables in this
demo products and product details
products table contain the basic
information about products that is their
ID name and price and product details
table contain the detailed information
about products product ID in this table
is a foreign K referencing ID column
from products table so based on these
two tables we want to design an asp.net
web application project with two web
forms the first wave form is going to be
products dot aspx page which is going to
display all these products inside a grid
view control and the first column the
grid we control should be a template
here and within that template field we
want to have a link button control which
is going to be clickable and then the
link button should display product IDs
now for example when I click on a
product ID 1 then the user should be
redirected to another page which is
product details
aspx passing the ID of the product on
which the user has clicked and on
product details dot aspx page we should
then display the detailed information
about that specific product so let's see
how to achieve this so obviously the
first step here is to create these two
tables which i have already done and
here is the sequel script to create
those tables and the next thing that we
need to do is write the required stored
procedures to retrieve data from
products table and product details table
which also I have already done so here
we have the stored procedure so the
first stored procedure here is going to
retrieve ID name price columns from
products table so that is pretty
straightforward and then this stored
procedure right here is going to
retrieve product details by ID
so basically when we pass the product ID
to the product details page we should
get the detailed information about that
product by ID so this is what is the
stored procedure which is going to
return that data so notice this stored
procedure has got ID parameter and then
within the stored procedure we are
joining products table with product
details table and then selecting all the
columns
from both the tables and then finally we
are filtering based on the product ID
that gets passed to the stored procedure
so we have those two stored procedures
as well so let's actually go and create
these procedures now and now let's flip
to visual studio so here I have an empty
asp.net web application project all I
have done so far is included the
connection string to our sample database
so that this project let's add a new
platform and let's name it products dot
aspx and on this platform we need a
creepy control so let's drag and drop a
gridview control so that should be
present under the data tab and then the
first thing that we are going to do is
what we are going to turn off auto
generate columns okay so now within this
grid view control you know the first
field should be a template field so
let's include the columns element and
inside that we are going to have a
template field and for this template
field the header text is going to be ID
and within the template field we are
going to have item template and inside
that we want the link button because
that's what is going to display the
product ID so let's drag and drop link
button there okay and then we also want
two more bound fields so to display the
name and price so let's go ahead and
include bound fields and we need to
specify header text so header text is
going to be named and another thing that
we need to specify is the data field so
data field is also going to be named so
basically this is the stored procedure
which is going to return the data for
the first grid view control and if you
look at the column name it's
name and for price its price and for ID
this ID so we are going to have another
bound feel and header text here is going
to be price and for this one data field
is going to be price now if you look at
the template field right here we need to
bind this link button to the value that
is present in this column right so here
the text of this link button is going to
be bound to so angle brackets percentage
hash so we are going to use this eval
method and then say we want the ID
I mean text property to be bound to the
value that is present in the ID column
of the data source okay and then once we
click this link button what should
happen we should rewrite the user to
product details dot aspx page so first
of all let's go ahead and include
product details toward aspx page so
let's name this product details dot aspx
alright so we have the destination page
now now you know we need an email
handler method associated with this link
button so on click of this link button
we want a method to be executed in the
only server so we need to have an even
handler method so within the code-behind
file of this product store aspx page we
are going to have a given handler method
so let's make a copy of this one and
then lets me change the name of this one
to link button one underscore click so
this is going to be the method which
will be called on click of this link
button so let's suppose here that so on
click equals link button one underscore
click alright so now let's actually
write some idiot or net code to retrieve
data from sequel server so that
import the area or namespaces we need
systems or data systems or data or
sequel client and finally system load
configuration all right so on the page
load if not is post back so if it's not
a post back if it is the initial get
request first read the connection string
and for that we are going to make user's
configuration manager class and that's
the name of the connection string within
the web config file next we want to
create an instance or sequel connection
class so let's call that con equals new
sequel connection and we are going to
pass the connection string that we have
just read from the web.com vic trial and
next we need our sequel command object
and this sequel command object is going
to execute this root procedure as we get
basic product details and then this
sequel command is going to use that
connection object to execute now this is
a stored procedure so command dot
command type equals command type dot
stored procedure and this stored
procedure doesn't expect any parameters
to be passed so now all that is left is
to execute the command so command dot
execute reader but before that we need
to open the connections let's go ahead
and do that so connection dot open and
whatever results are this command
execution returns we are going to set
that as the data source for the grid we
control and then call the data bind
method all right now you know this is
going to display the data within the
grid view control so let's go ahead and
run this and let's make sure it displays
the data
okay all right we have our data there so
when we click on this at the moment
nothing is going to happen because we
have not written code to respond to that
click event so we will do that in just a
bit first of all look at that why does
it display ID name price ID name price
twice let's actually look at that let's
see what the stood procedure is
returning so that stored procedure is
returning just one set of ID name and
price but here we have that displayed
twice let's look at the products dot
aspx page so we actually want to turn
that to false we have set that to true
that's the reason so we have the data as
expected now let's quickly auto format
this grid view control so that it looks
a little nice so let's auto format this
and choose maybe colorful scheme all
right now within the code-behind file
when we click that link button we want
to redirect the user to this page that
is product details dot aspx page so
let's copy that name and we are simply
going to use response tort redirect and
we want to redirect the user to product
details dot aspx page and we want to
pass the ID of the product as part of
the query string so question mark ID
equals and we need to get the ID of the
product on which the user has clicked so
how are we going to get that so that's
the tricky bit so here the ID value is
displayed at you know inside the link
button so if we can get hold of that
link button inside that template field
our problem is solved we can simply use
the text property of the link button and
then retrieve the Product ID so now you
know when we click that link button
which method gets executed this is the
method that gets executed and if you
look at this even handler method there
are two parameters one parameter says
you know object sender so what is the
sender parameter so basically this is
going to contain a reference to the
control that has raised this
event okay so which is the control that
has raised this event
it's the link button so whatever we are
going to receive as part of this
parameter is going to be a reference to
the link pattern okay which means we can
typecast that
safely to a link button because we know
that the control will ever go we'll come
into this even handler method only when
the user clicks you know that link
button so what we can do here is
typecast the sender to be of type link
button and then retrieve the text
property it's as simple as that so now
this should redirect us to the
destination page so let's quickly look
at that in action so let's go ahead and
run this now and once we click on
product ID one look at that we are now
redirected to product details - aspx
page and the ID of the product is passed
you know as part of the query string now
all that is left is to use the product
ID call the other stored procedure as we
get product details by ID and then
display that data within label controls
so let's quickly do that so first of all
let's go to product details dot aspx
page and we need to design this page now
to speed things up what I have done is I
already have the HTML which is going to
lay out some labels so if you look at
this HTML it's pretty straightforward we
have a table here and then this table
has got several TRS and within each di
you have got a TD so it says I D there
and then there's a label to display that
ID value so if you look at the design
it's going to be pretty straightforward
and basically we get that background
color because I have said that as the
light golden you know yellow color as
the background color okay
so pretty straightforward HTML there
I'll have this HTML on my blog in case
you need it ok so now in the code-behind
file so if not is post back so if we
land on this page then we know that we
are going to get that query string that
is product ID so
we need to retrieve that a product ID so
string product ID equals request dot
query string off what is the name of the
query string it is ID okay so all that
is left now is to write the ad or dotnet
Koran to speed things up let's actually
make a copy of the code that we have
already written first of all we need
these three namespaces so let's copy
them and let's paste them right here and
let's go back to products dot aspx page
and then let's copy this piece of code
and within product details so we want
the connection string we created the
sequel connection object and we want to
execute this stored procedure SP get
product details by ID and that is a
stored procedure but that stored
procedure expects a parameter to be
passed right and at ID is the name of
the parameter so we need to create a
sequel parameter as well so sequel
parameter let's call this parameter and
we need to specify the name of the
parameter and the value so the name of
the parameter is going to be at ID and
where is the value for ID we are getting
that from the query string so let's pass
that and finally we need to associate
this parameter object with this command
object so command dot parameters don't
add we want to pass the parameter all
right and we open the connection execute
the command here we don't have a grid we
control so what we can do instead is
store those results in a sequel data
reader object and then
so while we are reading the data from
the reader so while our dia dot read
what we want to do is set the label
values within product details page so
notice that the labels are named LVL ID
LVL named LVL price so we need to simply
set their text properties so lb l dot lb
elided or text equals RDR of ID dot two
strings so we need to do this for all
the columns that are returned and to
speed things up I have typed that code
as well already so instead of making you
see me type let's copy and paste that
there so the same code alright so let's
go ahead and run this now and another
thing that we need to keep in mind look
at this one when a user directly
navigates to product details dot aspx
page it throws this error SP get product
details by ID expects a parameter app ID
which was not supplied that's basically
because when the user lands on this page
notice that there is no query string
passed there if there is no query string
passed what do you think is going to
happen it's actually you know this
product ID will be now right so nothing
gets passed to the database and that's
why we are getting that message so you
know if a user lands on this page and if
there is no ID query string you know you
want to redirect that user back to
product details page if that's the case
you simply do a check here so if the
product ID is equal to now then we will
simply redirect the user back to
products page
all right so let's read on this page now
product ID will be now look at that we
get back to the products page now when I
click on Product ID one notice that we
land on this page and we have that ID
passed thank you for listening and have
a great day</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>