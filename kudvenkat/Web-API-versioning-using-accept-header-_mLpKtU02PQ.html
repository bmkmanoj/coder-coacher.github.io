<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Web API versioning using accept header | Coder Coacher - Coaching Coders</title><meta content="Web API versioning using accept header - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/kudvenkat/">kudvenkat</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Web API versioning using accept header</b></h2><h5 class="post__date">2017-03-06</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/_mLpKtU02PQ" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">this is part 3/8 of asp.net Web API
tutorial in this video we'll discuss
what is except header and versioning of
a BPH service using the accept header so
what is accept header the exit header
tells the server in what file format the
browser wants the data these file
formats are more commonly called as mime
types mind stands for multi-purpose
internet mail extensions in part 5 of
this video series we have used this
accept header to specify the format of
data that we want from the server for
example if we want the data from the
server in XML format we set the accept
header to application for slash XML so
if we execute this request notice we get
the data in XML format if you want the
data in JSON format we set the accept
header to application for slash Jason
and now we get the data in JSON format
so basically we use this accept header
to tell the server in what file format
we want the data in a previous video
we've created a custom header to
implement versioning for our web api
service now instead of creating a custom
header just for versioning purpose we
can make use of this accept header to
this exit header we can add additional
parameters we use these additional
parameters to specify any data that we
want to send to the server along with
the request for example we can add an
additional parameter called version to
the accept header and depending on this
version that I meet a value we select
the controller that we want so all that
is left now to do is to read this
version parameter value and then select
the controller so let's see how to
achieve this let's slip to Visual Studio
now this is the same example that we
worked with in a previous video let's
comment this piece of code that reads
the version numbers in the custom header
now let's create another variable here
let's call it accept header to read the
accept header we use the request object
since the exit head
is a standard header notice we also have
got except property which is going to
get in as the accept header remember
just like any other header users can
specify this accept header multiple
times in the request so what we want to
do is find all the exit headers that has
caught this parameter version to do that
we make use of links wave method so give
me all except headers where the accept
headers parameters count is greater than
zero so what is this wave method going
to do it's going to written as all the
accept headers which has got at least
one parameter but that's not what we
want we want that parameter name to be
version so let's check if the diameter
nil is equal to version and to make the
name compassion case insensitive let's
convert the name to lowercase so let's
check if we have caught at least one
such except header if that's the case
what do we want to do we want to
retrieve the version parameter value and
store it in this variable so version
number variable equals they've caught
our accept header so take the first
accept header which has got a parameter
with name version and then look at its
parameters look at the first parameter
the quick check if the parameter name is
equal to version again let's convert
that to lowercase and then we want that
parameter value so at this point in this
variable we should have the value that
we have specified using this version 10
a meter so let's give our solution a
build and quickly test with fiddler
notice at the moment we have set version
number to 1 so when we execute this we
get version 1 student
check if we set the version number to
two we get version two student objects
if we remove the version parameter
altogether the service falls back to
version 1 and we get version 1 student
objects and here is that code which we
just discussed thank you for listening
and have a great day</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>