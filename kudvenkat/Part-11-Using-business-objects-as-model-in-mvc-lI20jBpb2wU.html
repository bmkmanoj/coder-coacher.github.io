<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Part 11  Using business objects as model in mvc | Coder Coacher - Coaching Coders</title><meta content="Part 11  Using business objects as model in mvc - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/kudvenkat/">kudvenkat</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Part 11  Using business objects as model in mvc</b></h2><h5 class="post__date">2013-05-09</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/lI20jBpb2wU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so welcome to prism technologies I am
venket this is part 11 of asp.net MVC
tutorial in this video we'll discuss
using Business Objects as models in our
MVC application until now we have been
using entity framework and entities
entities are mapped to database tables
and object relational mapping tools like
entity framework and hibernate link to
sequel etc I used to retrieve and save
data Business Objects contain both state
and behavior that is logic specific to
the business in MVC there are several
conventions that needs to be followed
for example controllers need to have the
word controller in them and they should
implement a controller interface either
directly or indirectly for example if
you look at the home controller here
look at the name you know home
controller it has the word controller at
the end of it and look at this this home
controller is actually inheriting from
the controller class ok but what did we
say here it has to implement a
controller interface ok now here the
home controller is actually indirectly
inheriting from the controller I mean I
controller interface let's actually
inspect that let's flip to visual studio
so here the home controller class is
inheriting from the controller class but
then if I right click on that and select
go to definition look at that it
inherits from controller based class
let's right click on that and go to
definition look at this controller base
class is inheriting from eye controller
interface meaning our home controller
classes actually indirectly inheriting
from eye controller interface now when
it comes to views we also have some
conventions you know the names of the
views are important you know how we name
them and the location where they are
placed is also important ok
let's actually understand that
practically with an example so here in
our MVC application we have this home
controller within which we have this
index action method now this index
action method is invoked when we visit
this URL look at this I am visiting this
URL localhost is the name of the server
so the application is on my local
machine and MVC demo is the name of our
MVC project so here it's MVC demo
and within that we have the home
controller and index action method okay
so obviously it's going to invoke this
index action method and look at what we
are doing here we are returning a view
within that endo controller action
method now we are not specifying the
name or the location of the view so how
does the MVC application know which a
view it has to return okay that's where
the conventions come into play okay so
the MVC application is going to look in
certain folders for views with certain
names okay let's actually understand
that practically with an example so here
at the moment I have a view called index
dot C sh t ml which is present within
the home folder of the views folder now
let's actually run this application
right now and see what's the output that
we get so by default it's going to
invoke the home and index action you
know that's the URL so we get the view
as expected that's fine now let's go
ahead and change the name of this view
and see what's going to happen so I'm
changing the name to index 1 and now
let's go ahead and rerun this
application and see what's going to
happen
so now let's visit home and index you
know action look at that we get an
exception so what is this a you know MVC
application doing it's actually looking
for index dot aspx or index dot ASC X
okay in the home folder and it's also
looking for either indexed or CS HTML or
index dot V bead
I mean index dot PB HTML so it's
basically looking for a view file with
name index a dot aspx or dot a CX dot CS
HTML or dot VB HTML in the home folder
and in the shade folder okay so if it
doesn't find a view in those locations
with those names then obviously it's
going to throw this exception okay so
that's why the conventions are very
important as far as controllers and
views are concerned but when it comes to
models you know we don't have any strict
rules to follow in fact we can get rid
of this models
altogether it's actually optional it's
not required to be present within your
MVC application your models can reside
anywhere okay
in fact in this video we'll discuss you
know using Business Objects as our
models and our business objects can even
reside in a separate assembly okay so
let's actually add a class library
project to our solution and to do that
right click on the solution add a new
project and we are going to add a class
library project and I'm going to name
this maybe business layer you can give
it any meaningful name so I'm just
calling it business layer okay and then
we are going to make use of this table
employee so I have this table employee
with these columns ID name gender city
and date of birth now we want to
retrieve and display this data within
our MVC application so obviously to
encapsulate this employee information
I'm going to have this employee class so
first let's go ahead and change this
class name to employee so I have this
employee class here let's have some
properties you know to encapsulate ID
name you know the rest of the columns
that we have in the database table so
let me copy these properties
so ID name gender City date of birth all
of them are Auto implemented properties
now I'm going to add another class file
and let's actually call this you know
employee business layer a employee
business layer now this class file is
going to contain all the logic related
to employee you know all the business
logic let's make this class public okay
so in reality you know this layer is
going to have the business rules and
validations you know whatever you know
the business specific logic basically
but for the purposes of our demo we are
not going to have any business logic
here I'm going to simply have some data
access code which is going to retrieve
the data from the database table but in
reality you know your business layer
will actually call your data access
layer which will actually do the data
access operation for us but to keep this
example simple you know I'm going to
include the data access code within the
business layer okay and just to speed
things up I have this code already typed
because this is straightforward ad or
dotnet code if you're new to ad or
dotnet we discussed about this in a very
great detail in our ad or dotnet video
tutorial so please watch videos from
that video series so let me go ahead and
paste this code right here so what is
this code doing obviously we will have
several compilation errors that's
because we need to import some of the
namespaces first of all configuration
manager class this configuration manager
class is present in system dot
configuration namespace but then here we
don't have a reference to system that
configuration assembly so let's go ahead
and add that assembly so add reference I
am going to look for system
configuration assembly so there we go
system dot configuration and then let's
use the namespace system dot
configuration and since we are I no need
to enter a write a do dotnet code I'm
going to import some idiotic namespaces
as well so system dot data system dot
data dot sequel client and we have
system configuration so that should get
rid of all the compilation errors
oh so here this class you know I just
pasted this inside the class directly
let's have a property you know maybe I
want to have something like public eye
enumerable of employees okay so this
property here employees I'm just going
to have a property here called employees
which is going to return the list of
employees back ok so within this I have
the serial code so if you look at this
it's pretty straightforward so let's
have a get accessor and within that
we'll have this code I'm not going to
have any set access here you know this
is a cat only property read-only
property it's simply going to return the
list of employees that are present in
our table TBL employee and if you look
at the code it's straightforward we are
using the configuration manager class to
read the connection string from a web
config file so within web config file we
have this connection stranger DBC s
which points to in a local installation
of sequel server so we are reading the
connection string and we are creating a
you know a list of employee object here
and look at this we are building our
sequel connection object we have the
sequel command and notice this we are
using the stored procedure as we get all
employees and this is straightforward
stored procedure no logic it's simply a
select statement wrapped inside
destroyed procedure okay so obviously
let's execute the stored procedure just
to make sure we get the data as expected
so we are getting ID name gender city
and date of birth columns so and then we
are specifying the command type a stored
procedure open the connection
execute the command and loop through
each row that we get back and we are
converting the row into an employee
object adding that employee object to
the list and finally we are returning
the list back okay now if you need the
sequel script to create the stable and
populated with the sample data
I'll have this available on my blog so
you can get it from there alright so at
this point we have you know
of a employee business layer implemented
okay in a separate project so let me go
and build this just to make sure
everything is fine so build succeeded as
you can see on the status bar now we
want to consume this business layer in
our MVC application and to do that
obviously the first thing to do is to
add a reference to our employee business
layer and to do that right click on the
references folder add reference click on
the project's folder and add a reference
to the business layer project that
should add you know a reference to the
business layer assembly now we should be
able to use that within our MVC
application okay so now I'm going to
right click on the controllers folder
add a controller and I'm going to call
this employee controller okay and I'm
going to click Add which should add the
employee controller and I have the index
action method here and then look at this
I want to now use you know the employee
business layer as our model which is
going to return a list of employees to
us ok and to do that what is the
namespace of our employee business layer
its business layer so within our MVC
application within the controller I'm
going to use the using keyword and
specify business layer okay so here I'm
going to create an instance of our
employee business layer let's call it
employee business layer object is equal
to new employee business layer and then
this has got a property employees and
this is going to return an INT
imeem a list of employees which I am
going to store in a variable of type
list employee
let's call employees let's convert that
to lists okay and then I'm going to hand
this employees to overview okay so
obviously now at this point we need a
view which can render this list of
employees and to add a view you know we
have done this several times in the
previous sessions right click on the
index action method select add view from
the context menu look at this index is
going to be the view name we are using
razor view engine and I want to create a
strongly typed view and I want the
employee object to be the model for our
view and another important thing here
and I'm going to select this careful the
template as list which is going to write
the code for us automatically okay so
I'm going to click Add and look at this
it should add you know a view with name
index dot CSS HTML as you might expect
look at this within the views folder it
has created a folder with named employee
and added the CEO index view index dot C
sh t ml and look at this the model is
set to ienumerable business layer dot
employee and the only change that I'm
going to do for this one is to use some
styles here so all this HTML I'm going
to wrap this inside a div tag so Dave
style is equal to font family area okay
all right so those are all the changes
that are required now you know don't
worry about all this code you know that
this careful template has you know
generated for us will be discussing
about these HTML helpers in detail in a
later video session I mean if you look
at this code it's pretty straightforward
all it's doing is it's creating a table
for the header I mean a tabled row for
the header here where we have the
employee model name gender City and date
of birth okay and then within each and
then we have you know the respective
roles here displaying the actual data
let me run this and then we'll go
through that code and a bit so obviously
now it should list all the employees
okay
by default it will go to the home
controller index action method but we
want to go to the employee controller
index action method so look at this I
get the name gender City and date of
birth of each employee okay so we also
have the headers now you if you want to
modify this HTML you can do so in your
view let's say for example I want to
include a border for the table
I can simply set table border is equal
to 1 and then I also want to include a
word you know for these actions edit
details and delete I want to include a
header saying actions now obviously when
we click Edit details or delete at this
point we will get exceptions because we
don't have you know respect to action
methods implemented yet we'll be doing
that in a later video session ok so let
me also specify because this is the last
table header cell way we want you know
some text like action there alright so
now let me actually go ahead and refresh
this and look at that I get the borders
and that word action there but when I
click on any of these links here or this
link you know I get an exception look at
that too which action method it tried to
navigate create action method but within
the home controller I mean within the
employee controller do we have a create
action method
no obviously that's why we get an HTTP
status code 404 in our future videos
we'll see how to implement you know all
these links edit details delete and you
know adding a new employee
alright on this slide you can find
resources face be dotnet c-sharp and
sequence of interview questions that's
it for today thank you for listening
have a great day</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>