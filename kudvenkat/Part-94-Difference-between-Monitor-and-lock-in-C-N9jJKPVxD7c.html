<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Part 94   Difference between Monitor and lock in C# | Coder Coacher - Coaching Coders</title><meta content="Part 94   Difference between Monitor and lock in C# - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/kudvenkat/">kudvenkat</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Part 94   Difference between Monitor and lock in C#</b></h2><h5 class="post__date">2014-03-17</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/N9jJKPVxD7c" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">part 94 of c-sharp tutorial in this
video we'll discuss the difference
between monitor class and lock keyword
in c-sharp this is continuation to part
93 so please watch for 93 before
proceeding in the previous video session
we have used this lock keyword to ensure
that only one thread can enter and
execute this piece of code right here
now what's the difference between this
lock keyword and this monitored last it
turns out that both monitor class and
lock keyword provides a mechanism that
synchronizes access to objects by
acquiring exclusive locks lock is just a
shortcut for monitor dot enter with try
and finally blocks so the code on the
right hand side is equivalent to what we
have on the left hand side so this piece
of code right here is going to acquire
an exclusive lock so that only one
thread can execute this piece of code at
any given point of time the same is the
case with the code on the right hand
side so when this piece of code right
here is executed so with that enter
method you know it's going to acquire an
exclusive lock and ensure that only a
single thread can execute this piece of
code while that thread is executing this
code no other thread can enter this
block so they are queued up there once
you know the thread has finished you
know it's going to come to the finally
block and once we invoke the exit method
the exclusive lock is released and then
the next thread can get in and then
acquire an exclusive lock again so the
process continues okay but basically
this enter method is going to acquire an
exclusive lock whereas the exit method
is going to release that lock okay but
basically this code is equivalent to
this piece of code right here all right
let's quickly make this change to our
program and see if it works in the same
manner alright so we are going to use
the monitor class so monitor dot enter
so this piece of code is going to
acquire the exclusive lock
so within the try block we are now
trying to execute this piece of core now
if at all when we are executing this
piece of code if there is an exception
and if you want to handle that exception
then you can include the cache block as
well but in case if you don't want to
handle the exception and if you want to
allow that to be thrown then you can
omit the catch block and just implement
the finally block where we are going to
release the exclusive lock by calling
the exit method on the monitor class so
both of these are static methods alright
let's go ahead and build the solution so
bill succeeded now let's flip to visual
studio command prompt and execute look
at that we get the same output all right
in c-sharp for its implemented slightly
differently so we have another
overloaded version of this intimate that
baby can pass a boolean parameter and we
are passing that as a reference
parameter so here I notice that we have
created a boolean field called lock
taken and we have initialized that to
false so at this point an exclusive lock
is not you know acquired so when we
execute this piece of code notice that
we are passing that as a reference
parameter to this method in case if the
lock is successfully acquired this
parameter will be updated to true so it
continues to execute this code and then
once it's done it will come to the
finally block and it's going to check
that variable if lock taken if that is
true then go ahead and release the lock
otherwise there is no point in in
working the exit method so in short LOC
is a shortcut and it's the option for
the basic usage if you need more control
to implement advanced multi-threading
solutions using try and await pulse and
pulse all methods then the monitor class
is your option that's it for today thank
you for listening have a great day</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>