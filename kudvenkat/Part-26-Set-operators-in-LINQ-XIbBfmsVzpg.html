<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Part 26   Set operators in LINQ | Coder Coacher - Coaching Coders</title><meta content="Part 26   Set operators in LINQ - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/kudvenkat/">kudvenkat</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Part 26   Set operators in LINQ</b></h2><h5 class="post__date">2014-08-09</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/XIbBfmsVzpg" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">this is part 26 of link tutorial in this
video we'll discuss set operators and
length all of these standard query
operators belong to set operators
category in this video we'll discuss the
distinct operator distinct operator
returns distinct elements from a given
collection let's look at an example here
we have got countries string array
notice that we've got USA twice and UK
twice now when we invoke a distinct
method on this countries array we get
this output notice that within the
output UK is retrieved only once but USA
is present twice why is that that's
because in this case the default compare
is being used and the comparison here is
case sensetive as a result of that you
know it's going to see USA n capital
letters as a different entry from USA
that's present in small letters now if
we want this comparison to be case
insensitive then what we can do is use
the other overloaded version of this
distinct method to which we can pass a
class that implements ie quality compare
as an argument so notice the example
here it's very identical to what we have
here but we are using the other
overloaded version of the distinct
method to which we are passing string
compare as an argument to this distinct
method let's actually look at this in
action so I have this exact same code
already typed within the main method
so now first of all notice that we have
two overloaded versions of this distinct
method
at the moment we're using the one which
does not take any parameters so here the
default comparer will be used to compare
the strings and the default compare you
know when it compares strings you know
it's going to be taking into
consideration the case sensitiveness
that's why it treats these two strings
differently okay so when we run this
look at that USA is printed twice now we
don't want that default compare to be
used so what I'm going to do is I'm
going to use this distinct overloaded
version to which we can pass a type that
implements ie quality compare
so this class string compare actually
implements I equality compare interface
so if I right-click on that and then go
to the definition notice that this class
implements ie quality compare if you
look at this ie quality compare with in
this there are two methods that we need
to override you know equals and cat hash
code so this class you know implements
those two methods so now the comparison
in this case is going to be case
insensitive and as a result of that
within the output notice that we get USA
also only wants now when comparing the
elements distinct works in a slightly
different manner with complex types like
employee customer invoice orders etc
let's actually look at an example so at
the moment within our control
application we also have a class called
employee class and this class at the
moment contain two properties ID and
name so what we're going to do here is
notice that we are creating a list of
employees at the moment we have got
three employees and within the list
notice that Mike is repeated twice and
then on the list we are invoking the
distinct extension method and when we
run this notice that what we get in the
output Mike is actually printed two
times okay so it's not retrieving the
distinct elements why is that again here
the default comparative being used and
this default comparer you know when it's
comparing reference types all it does is
check whether if the reference of this
object is equal to the reference of this
object now in this case the references
are different why there are two new
employee objects throw though the
individual property values are the same
the object references are different
that's why it reads those objects
differently so to speed things up I have
actually typed this code in the notepad
all today so let's copy that and then
let's paste that within our main method
so again here we have you know those
three employees and we are invoking the
distinct method and then we are using a
for each loop and then printing the ID
and the name of each employee so when we
run this look at that
Mike is repeated twice and we don't want
that okay
so how to correct this problem actually
there are three ways to correct this
problem you know one of the ways is to
use the other overloaded version of the
distinct method to which we can pass a
custom class that implements ie quality
compare okay
so what we can do here is create another
class you know we can call it employee
comparer or give it any meaningful name
and then make that class implement ie
quality compare interface and then we
have just seen that with an equality
compare interface there are two methods
that we need to implement one is equals
and get hash code methods so let's go
and do that so to this project let's add
a new class and let's call this employee
compare
and we are going to make this class
inherit I mean implement ie equality
compare interface ie quality compare of
employee okay and I'm going to click on
this and then plus control dot so it
will give us the option to implement the
interface ie quality compare so the
moment I select that option notice that
you know we have to implement these two
methods that are present within this
interface so first of all we need to
tell when to employee objects are
considered to be equal now whenever the
ID and the name property of one object
equal to you know the other object
properties then we know you know those
objects are said to be equal so what I'm
going to do is return X dot ID equals y
dot ID and X dot name equals y dot name
so if these two conditions are equal
then those two objects are equal now if
we override equals method we also need
to override cat hash code otherwise when
we use these objects within a dictionary
they wouldn't work as expected
okay so always make sure when you
override equals you are also overriding
get hashcode method and what we are
going to do here is return object dot ID
dot get hash code and then we use this
symbol and then object dot name dot get
hash code
okay so that's the first step so we
implement I mean we rewrite a class that
implements a equality compare interface
and then in provide implementation for
these two methods once that is done the
next step is to actually pass that as an
argument to the distinct method okay so
since we have two overloaded versions of
this distinct method we are now going to
use the other overloaded version and we
are going to pass an instance of our
employee compare our class now let's run
this and notice that within the output
we get Mike only once okay so that's our
first option the second way to solve
this problem is you know to override
equals and get hash code methods in
employee class now first of all let's
get it off you know
this parameter here now when we run this
you know we'll have the same problem now
the other way to solve that is within
the employee class you know we override
equals and get hash code methods so now
the distinct method knows when to
employee objects are said to be equal
and when they are not said to be equal
right so first let's override the equals
method so override equals so when do we
consider you know two objects of this
type employee or set to be equal
whenever they turn this dot ID equals
two whatever object that's that we are
passing to this method now employee so
if the ID of the incoming object is
equal to the ID of an instance of this
class and similarly named property of
this instance equal to the name property
of the incoming employee object so
that's when we consider two employee
objects to be equal
now since we are overriding equals
method we also need to override get
hashcode method so written this dot ID
dot ket hash code and this dot name dot
get hash code okay now notice that we
are using um you know diversion of the
distinct method that doesn't take any
parameters but now since we have
overridden equals and get hash code now
distinct method knows how to compare to
employee objects for equality so when we
run this look at in the output you know
we get what we expect okay so that's the
second way to solve the problem the
third way is to actually project the
properties of the employee object into a
new anonymous type and behind-the-scenes
anonymous types override equals and get
hash code methods so we get the output
that we expect so I mean the simple way
to solve that problem is we don't have
to override these two methods here or we
don't even have to provide you know this
custom class that tells how to compare
to employee objects the simplest way is
to simply project the properties of the
employee object into a new anonymous
type so new
X dot ID and X dot name now look at this
so we have commented this one but then
you know the overridden methods within
the employee class and here we are
projecting each employee object into an
anonymous type and anonymous types
automatically override the equals and
get hash code methods so when we run
this we should get Mike only once okay
so this is the easiest way to solve the
problem that's it for today thank you
for listening have a great day</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>