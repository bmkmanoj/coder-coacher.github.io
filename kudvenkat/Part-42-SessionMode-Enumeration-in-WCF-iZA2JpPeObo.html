<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Part 42   SessionMode Enumeration in WCF | Coder Coacher - Coaching Coders</title><meta content="Part 42   SessionMode Enumeration in WCF - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/kudvenkat/">kudvenkat</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Part 42   SessionMode Enumeration in WCF</b></h2><h5 class="post__date">2014-03-05</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/iZA2JpPeObo" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">part 42 of wucf video series in this
video we'll discuss the significance of
session mode enumeration in WCF this is
continuation to part 41 so please watch
but 41 before proceeding use session
mode enumeration with the service
contract to require allow or prohibit
bindings to use sessions the session
mode enumeration has got three members
allowed not allowed
required a loved service contract
supports sessions if the binding
supports them this is the default if we
have not explicitly specified the
session mode on service contract not
allowed service contract does not
support bindings that initiate sessions
required service contract requires a
binding that supports session if we use
a binding that does not support session
an exception will be thrown if all this
doesn't make sense at the moment don't
worry we'll be looking at two examples
which would make all this clear
we'll be working with the same example
that we worked with in the previous
session so for example one let's set the
service instance context mode to single
and session mode to allow let's flick to
visual studio so this is the simple
service that we worked with in the
previous session and if you notice our
service the instance context mode is
already set to single let's go ahead and
set the session mode to allow on the
service contract so session mode equals
session mode dot aloud so session mode
dot allowed is the default so
irrespective of whether we set the
session mode or not the behavior is
going to be the same to be explicit it's
always better to you know specify the
session mode alright so now we have done
that setup we have set the service
instance context motor single and
session mode to allowed now if we use
basic HTTP binding that does not support
sessions the service still works as a
singleton service but without session
let's actually prove that so
let's verify what binding we are using
at the moment host the service notice at
the moment we are using WH DB binding
let's actually change that to basic HTTP
binding and since it's basic HTTP
binding and we don't have any specific
configuration for that so we can
actually get rid of that binding
configuration attribute altogether
let's go ahead and run our service host
let's flip to a Windows client
application let's actually update the
service reference and let's open that's
actually build our solution and let's
open the project folder in Windows
Explorer and let's open two instances of
our client all right so from client one
let's initiate a call ok look at that
number one and we don't have a session
ID okay look at that both on the host
and on the client and woke again look at
that the number is being incremented so
number one to number two and we don't
have a session ID so from client to look
at that so the service is still working
as a singleton service you know both of
these clients are using the same service
instance you know the service is still
working as a singleton service but
without a session alright let's now set
the bind Internet TCP binding so if we
use net TCP binding that supports
sessions the service gets a session and
it will continue to work as a singleton
service let's quickly prove that so
instead of basic HTTP binding let's use
net TCP binding so the binding is going
to be net TCP binding
and let's call this net TCP and we want
to enable reliable sessions so let's set
that to true and let's specify the
binding name within the endpoint and we
want to use this binding configuration
so let's specify the binding
configuration attribute and what is the
name of the binding net TCP all right so
let's close this service host that's
running
let's also close both the clients and
let's run our service host so the host
has started now let's get to our client
application let's actually delete the
service reference let's add a service
reference to our simple service
click okay alright let's go ahead and
run our client in work service look at
that number one and we get a session ID
click it again number two we get a
session ID and on the server again we
have the same session ID all right so if
we use basic HTTP binding that does not
support sessions the service still works
as singleton service but without a
session on the other hand if we use net
TCP binding that support sessions the
service gets a session and continue to
work as a singleton service because
they've set the service instance context
mode to single and session mode to a lab
let's look at another example
so now let's change just the session
mode to required so let's do that so on
the service contract instead of loud
let's change it to required and our
service instance context mode is still
single meaning it's going to behave as a
single time service and we have set the
session mode to required if we use net
TCP binding that supports sessions you
know the behavior is going to be the
same the service gets a session and
continue to work as a singleton service
that's actually quickly proved that
let's run our service host first so this
service host is running let's go ahead
and update our service reference
let's go ahead and run the client and
work service so you get number and
there's a session okay so now let's
change the binding to basic HTTP binding
you know and we know basic HTTP binding
does not support session so what's the
behavior going to be an exception will
be thrown let's actually prove that so
let's go to our servers and then change
the binding to basic HTTP binding and we
don't want this binding configuration
attribute because we haven't explicitly
specified any custom configuration let's
close the service host look at that
unhandled exception in valid operation
exception contract requires session but
binding basic HTTP binding doesn't
support it or isn't configured properly
to support it
okay so straightforward okay so
basically we have different instance
context modes and different session mode
enumeration values okay and then
different bindings that we can use with
the service that support sessions and
that does not support sessions so the
MSDN link right here it shows all the
possible combinations of service
instance context mode values and session
mode enumeration values and the end
result of using each of those
combinations with bindings that does and
does not support sessions that's it for
today thank you for listening have a
great day</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>