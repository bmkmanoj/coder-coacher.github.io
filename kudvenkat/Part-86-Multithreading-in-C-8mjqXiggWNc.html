<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Part 86   Multithreading in C# | Coder Coacher - Coaching Coders</title><meta content="Part 86   Multithreading in C# - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/kudvenkat/">kudvenkat</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Part 86   Multithreading in C#</b></h2><h5 class="post__date">2014-03-06</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/8mjqXiggWNc" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">it's part 86 of c-sharp tutorial in this
video we'll discuss multi-threading in
c-sharp before that let's understand
what is the process and a thread and
then we'll write a simple
multi-threading example so what is a
process processes what the operating
system uses to facilitate the execution
of a program by providing the resources
that are required each process has a
unique process ID associated with it you
can view the process within which a
program is being executed using windows
task manager and to get to the windows
task manager simply right-click anywhere
on the task bar and then select this
option start task manager so on my
machine at the moment Visual Studio
program is already running so obviously
to run this Visual Studio program in
order to facilitate this program
execution we need a process so with
which processes actually facilitating
the execution of this Visual Studio
program it is dev a and B dot exa look
at that that's the process name and this
look at that it says Microsoft Visual
Studio 2010 ok so that's the process
which is facilitating the execution of
this Visual Studio program let's say we
run this calculator program obviously
another process is required you know to
facilitate the execution of this program
and what is that process cualquier C now
what do you think is going to happen
when we click this button and the
process you know we have a warning here
but then when we click the end process
button there look at that the program is
terminated ok because the process which
facilitates the execution of that
program has been ended so as a result
the program also terminates so then what
is it thread a thread can be considered
as a lightweight process a process has
at least one thread which is commonly
called as main thread and that is what
is responsible for executing the
application code so when the program
starts you know it gets by default one
thread and that's called the main thread
and that is responsible for executing
the application code so a thread is
inside
process executing the actual application
code and a process can have multiple
threads if the application that we are
executing you know is a multi-threaded
application then obviously there are
multiple threads executing that
application code within a given single
process so a thread in simple terms is a
lightweight process and it processes
what the operating system uses to
facilitate the execution of the program
by providing all the resources that are
required to develop a dotnet program we
have to use threading classes that are
present in system daughter threading
namespace let's now write a simple
multi-threaded example okay so what we
are going to do is design a form like
this now I have already created a
windows forms application and all I have
done so far is dragged and dropped these
buttons on the form and then change the
text on them you know do time consuming
work and print numbers and then I have a
list box here okay so now what are we
going to do now in this method look at
this do time consuming work you know
let's say for example there is some
method which is going to do take a long
time to execute maybe it's trying to
save something to a database and it's
going to take let's say maybe five or
ten seconds so obviously that is time
consuming stuff and to keep things
simple you know just to simulate that
artificial eight and say I have used
this thread dot sleep statement I have
passed five thousand milliseconds
meaning the current thread that is
executing the application code will be
you know suspended for five seconds
basically so it's going to sleep for
five seconds so this is going to
simulate that artificial late and say
and then look at this on when we click
this button do time consuming work what
are we doing here you know the first two
lines of code are pretty straightforward
you know we are basically disabling both
of the buttons by setting the enabled
property to false and then we are
invoking do time consuming work function
and then once that is complete
are enabling the buttons back okay so
that's what is happening when we click
that button meaty and time-consuming
work okay now we have another button
here print numbers and what is it doing
it simply loops through one to ten and
then add those numbers to this list box
yeah okay so let's actually write that
code now this is not a multi-threaded
program you know when obviously this
program loads up okay into the memory
you know we get one thread and that's
called as the main thread and people
call that as UI thread as well that is
user interface thread as well and that
is what is responsible for executing the
application code as well as you know
taking the response from the users you
know making these controls interactive
okay so it has to do all the work
basically that single thread so as a
result what's going to happen when we
click this to time consuming work button
you know obviously these two lines here
to disable the button will execute much
faster they are not going to take much
time but then this method is going to
take at least five seconds so at that
point you know the UI thread that's the
main thread is busy you know executing
this function at that point the user
interface is blocked it basically can't
do anything okay why because you know
the UI thread is busy doing you know
basically processing this method code
okay so the application remains
unresponsive once you know it completes
that method that's when it's going to
complete execute these two lines and at
that point the application becomes
responsive okay so let's actually write
this code and to speed things up I have
implemented the exact same code within
these form 1 dot CS file so let's go
ahead and run the application so let's
click this button do time consuming work
look at that the buttons are disabled
and they don't get enabled until you
know that time is complete so now the
buttons are enabled when I click this
button look at that it works now print
numbers because basically the UI is free
I mean the main thread is available and
when we click that button it is respond
so it's going to execute the click
function but then when we click this
button look at that it's it's basically
disabled I can't do anything ok now you
may be thinking okay you have explicitly
disabled those buttons and that's why
you are not able to click it now let's
say if we comment these lines of code so
all we have at the moment within this
button click event is you know a call to
this function so let's go ahead and run
this once again look at that and I click
this button you know now I'm clicking on
the sprint numbers I've clicked almost
10 times now but look at that the
response you know came only after you
know it has completed executing this
function ok during that point you know
the application was basically
unresponsive now let's see how to make
this application more responsive by you
know using another thread to call this
function which is taking a long time ok
and then see how the application becomes
more responsive okay so let's uncomment
these lines and then what we're going to
do here is comment out this line we are
not going to call that from the main
thread instead what the main thread is
going to do is create a thread and let's
call this maybe worker thread give it
any meaningful name and to this thread
I'm going to pass in a function name so
do time consuming work so what we
basically want to do is we want this
thread to go and execute this function
so that the main thread which is
executing this piece of code you know is
freed after that ok and then the
application remains responsive and you
know all this is doing here is you're
creating a thread you know it's not
going to start executing that function
until
we call start method on the thread so
once we invoke this function that's when
this thread is going to execute the
application code so remember what is a
threaded thread is a lightweight process
that is responsible for executing
application code by default when we run
the program we get one thread for free
and that's called as main thread or UI
thread that's responsible for executing
the application code but then that main
thread can create you know worker
threads like this and offload the
responsibility of executing you know
time-consuming functions so that the
main thread becomes free and then the
application is responsible at that time
let's actually run this and say if it is
responsive look at that do time
consuming work and then immediately when
I click print numbers it is still
working and the buttons are not disabled
okay immediately the buttons are enabled
why is that because you know the job of
executing this time consuming functions
now offloaded to this worker thread
right so in this video we have discussed
you know one of the advantages of
multi-threading is that it can make your
application more responsive you know by
offloading the work of executing time
consuming functions to a background
thread but there are other advantages
and there are disadvantages as well
which we will discuss in our next video
session that's it for today thank you
for listening have a great day</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>