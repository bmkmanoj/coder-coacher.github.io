<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>asp.net gridview paging using a dropdownlist - Part 56 | Coder Coacher - Coaching Coders</title><meta content="asp.net gridview paging using a dropdownlist - Part 56 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/kudvenkat/">kudvenkat</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>asp.net gridview paging using a dropdownlist - Part 56</b></h2><h5 class="post__date">2013-04-14</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/U-MqkhyjYyM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so welcome to presume technologies I am
venket this is part 56 of asp.net
grid-view tutorial in this video we'll
discuss about implementing paging in a
grid view control and then controlling
the page sides and page numbers using a
drop-down list let me explain what I
mean in part 55 of the asp.net preview
tutorial we discussed about implementing
custom sorting and paging in a grid view
control now in that part when we were
designing the webform we have set the
page size of the grid view control to be
3 and then after that when the
application is running the end user
doesn't have any option of changing the
page size at run time you know we have
set the page size to 3 so the page size
is always going to be 3 but then what I
want to do right now is I want to make
that page size configurable we want to
display different page sizes within the
drop-down list for example like 5 10 15
20 etc and then when the user selects 10
as the page size then within the grid we
control we want to display 10 rows so
the page size should be configurable so
depending on the page size we should be
able to compute the number of pages
available for the end user to navigate
and then we should display those page
numbers in another drop-down list so he
can select the page that he want to
navigate to using that drop-down list so
obviously the first thing to do is to
redesign the web form now we will be
modifying the example that we used in
part 55 so please watch part 55 before
proceeding with this video all right now
let's flip to the asp.net web
application project and now on this web
form 1 I'm going to include a table so
the best way to align these elements all
these user interface elements properly
is by using a table so I'm going to
create a table and this table is going
to contain two rows the first row will
have 4 TDs to include this text page
size the drop-down list and then this
text again page number and then another
drop-down list and then the second TR
will contain only one TD so let's design
the table first so table and this table
is going to contain two table rows
that's the first table row and there's
the second table row now the first table
row should contain you know how many TDS
for TDs because we have four user
interface elements they're the text page
size drop-down list the text page number
and then another drop-down list so let's
include full TDs and just to speed
things up I have these TDs already typed
so let me copy them and paste that into
the first TR so let me properly format
this HTML by pressing ctrl K and D and
look at what we are doing here we are
essentially including four TDs there and
then if you look at the first TD we have
that text page size 2nd TD we need to
have a drop-down list so let me drag and
drop it drop down list onto this web
form and let's call this D DL page size
because we are going to use this drop
down list to display the page sizes five
10 15 20 etc alright and then in the
third TD I have set this text page
number and this is encapsulated inside a
strong HTML tag meaning we want that to
be bolded and then we have set the color
to you know something like a 5 5 1 to 9
which will basically display something
like this so I have paid sized page
number and then in the last TD we need a
drop-down list so let's drag and drop a
drop-down list into the last TD of the
first row and then I'm going to call
this drop-down list as DD our page
numbers okay so that's the first TR and
in the second TR what should we have we
should have the digi control itself so
the grid we control itself and then look
at this if you remember in part 55 we
used a repeater control to display the
page numbers at the bottom of the grid
we control now we are displaying the
page numbers in another drop-down list
so we can get rid of that repeater
control altogether
so on our web form what I am going to do
is I'm going to get rid of this repeater
control because we no longer require
that
and then I'm going to cut the HTML of
the grid we control and then we are
going to put that inside the TD of the
second row so in the second row how many
TDs we need we need only one TD okay and
the width of that TD should span across
the bit of the four TDs in the first row
and to specify that I'm going to include
a TD here and then I'm going to set
column span is equal to four
all right now let me go ahead and paste
the HTML of the grid view control within
this TD
okay let's select everything press ctrl
K and D to format the HTML properly so
now if I flip this waveform to the
design mode look at this the design of
this waveform is like how we wanted it
so we have paid size drop-down list page
number and then another drop-down list
as you can see here but then the page
size I want to set this at design-time
you know for example I want to display 5
10 15 and 20 as the page sizes and to do
that click on the drop down list
tasks button click on edit items and
then I want to add you know the first
item as five and the second item as 10
third item as 15 and finally the last
one 20 okay and then I'm also going to
set the auto post back property of this
drop-down list to true because we want
the wave form to be posted automatically
and then display the correct number of
selected rows within the grid view
control okay and then page numbers we
cannot set that at design time because
depending on the rules the number of
rows that we have in the database table
and the page size that we have selected
within the drop-down list we need to
compute the number of pages available
and then bind them to this drop-down
list so we can do that only at run time
and then another thing I am going to set
for this grid view control is set the
page size of the grid we control to five
as well
so at the moment it's three let's change
that to five so we are almost done you
know designing this waveform now let's
flip to the code-behind file and then
obviously we have got red let's save
everything now we have got rid of the
repeater control and then if you look at
a method here data buying the repeater
if you remember what we have been doing
in this method we were computing the
number of pages available and then we
were binding the page numbers to this
repeater but then at the moment we don't
have the repeater control itself so I'm
going to get rid of this code from here
and then now instead of using the
repeater control to display page numbers
we are going to use a drop-down list
control okay so now in the previous
sessions of the asp.net video tutorial
we discussed add a drop-down list is a
collection of list item objects and then
if you remember if you look at this
method data bind repeater we are
actually creating list item objects here
but then the first thing to do here is
let's change this name of the method
instead of calling data bind repeater
I'm going to call this data bind DDL
page numbers because we want to bind the
page numbers to the drop-down list page
numbers okay and then what I'm going to
do I'm going to get rid of this list
item objects because I'm going to add
them in line to the drop-down list and
look at that if the total pages is
greater than one meaning if there are
more than one pages then what I'm going
to do I am going to add that page
remember a drop-down list is a
collection of list item objects and on
our web form one dot aspx this drop-down
list which is basically which we are
basically using to display page numbers
the ID of that is TDL page numbers so to
this drop-down list i want to add those
list items so I'm going to say DDL page
numbers dot I terms dot add so what we
are going to add we are going to add a
new list item now if you look at the
constructor of the list item that we are
using here
it takes in I mean a constant it uses
the constructor that takes in three
parameters the text value and whether if
that list item should be enabled or not
now since we are going to display all
the lit all the pages available within
the drop-down list we don't want this
enabled in or the boolean property to be
used so I'm going to get rid of that in
our last property there so I'm just
going to use the text and the value of
the list item object and add that to our
drop-down list
okay and another thing that I want to do
is look at that if the total pages are
greater than one then what we are doing
we are adding the items to the drop-down
list if on the other hand if the items
are you know is equal to one or you know
there's only one page then there's no
point in having the drop-down list
enabled let's say for example I have
only five rows within the database table
then we display that all the five rows
on the first page so at that point uses
you know the there is no point in
showing this drop-down list we want this
drop-down list to be disabled because
there's only one page and that's
displayed okay so if the total pages is
only one then what I want to do I want
to set DDL page numbers dot enabled is
equal to false and another thing that I
want to do that say for example I was on
the second page when the page size was
three for example and then now when I
change the page size to five you know
there are let's say four rows then all
the four rows will be displayed on the
first page and then I should
automatically flip this page number back
to one because there is only one page in
order to be shown so that's why we want
to set the selected item to the first
item within the drop-down list and to do
that I'm going to say DDL page numbers
dot select the index is equal to zero
which will be the first page within the
drop-down list now if the items if the
total pages is you know equal to 1 then
we are disabling the drop-down list on
the other hand if it's
- then one we should enable it back so
what I'm going to do is if the total
pages is greater than one then we should
enable that
so set enable is equal to true and then
look at that we are adding the items to
this drop-down list every time the page
the total pages is greater than one so
obviously before we do that we should
clear any of the existing list items
that the drop-down list has so I'm going
to say DDL page numbers dot I times dot
clear which is going to clear the list
items okay so those are the changes that
we need to do for DDL you know data bind
DDL page numbers function now obviously
we need to invoke this function wherever
required now another thing remember we
have got rid of the pager I mean the
repeater control from this webform and
then this repeater control was actually
using you know link buttons to display
page numbers at the bottom of the grid
we control and when I click on that link
button this even handler method was
called link button underscore click now
we are not using that link button
anymore
and the repeater so I can get rid of
this even handler method all together so
let's delete that away and you know we
renamed data bind repeater method to
data binding deal page numbers so the
first thing to do we have to you know
update the references wherever that
method is being called so here I am
going to call it data bind DDL page
numbers and look at this if not is post
back and the page limit meaning if it's
the initial get request when the bed
form loads I want the page size of the
grid we control to be 5 which we have
set a design time anyway and then the
page number should be the first page
number okay so what I'm going to do here
you remember this employee data access
layer which is invoking this get
employees method and if you look at the
parameters of this method the first
parameter is going to be the page index
you know you can either say grid view 1
dot page index or I can simply hard-code
the value as 0 because we want the first
page to be displayed when it is the
initial cat request of the
by form and then the page size again I
can hard code that or we can use grid v1
dot page size so I'm going to hard code
that for now and then similarly when I
call this data bind DDL page numbers
method look at that what parameters are
it is it expecting page index speed sets
and total rules so for the page index in
the page load if it is the initial get
request it's going to be zero and the
page size is going to be five okay so
that's the change within the page load
event and then we have seen we have
modified the DDL page numbers function
now sort a grid view function this is
not going to change in any way but then
grid v1 underscore sorting function will
be changed now the first thing is
obviously we don't have data bind a
repeater function instead it is data
bind underscore DDL page numbers
function and we need to pass the page
index and page size to this function as
well as get employees method of employee
data access layer so what I'm going to
do here is I'm going to compute the page
size and page index remember when I am
sorting the grid we control so when I
click on these you know the hyperlinks
to solve the data then way should I be
getting the page size and page numbers
from the respect to drop-down list
on this web waveform and the drop down
list for the page sizes DDL page size
and for page numbers it's DDL page
numbers so I'm going to say int page
size I'm going to get that from DDL page
size drop down list and how am I going
to get that using selected value
property but selected value returns it
string back as you can see in the
intelligence here we need to convert
that to an integer so I'm going to use
int dot parse to do that all right the
next thing that we need to do we need to
compute the page number so page number
is equal to where do we get that from
there's a drop-down list called
page numbers DDL page numbers and dot
selected value again we get a string
back we need to convert
to an integer so int dot parts and the
most important thing to keep in mind
here is look at this within the
drop-down list will display page numbers
as 1 2 3 etc but then remember the grid
we control page index starts at 0 its 0
index pays so we need to subtract 1 from
the page number that we retrieve from
the drop-down list
ok so I'm going to subtract 1 from that
and then we'll use these variables and
pass them to get employees method and
DDL data bind DDL page numbers method so
here the page index is going to be page
number and page size is obviously going
to be page size let's do the same thing
for DDL page numbers as well so page
index is going to be page number and
page size is going to be page size
alright okay these changes let's go
ahead and run this and see how far have
we got that's more to do but at this
point let's see what actually is
happening so now look at this when the
wave form loads the page size is 5 now
when I select the page size a stand is
the grid we control refreshing and
showing the correct pages know why
because we haven't implemented
you know the selected and exchange the
event of this drop-down list control so
let's go do that so obviously now you
know we have this drop-down list when I
double click on the drop-down list we
should have the event handler method
generated DDL page size selected in the
exchange
now just to speed things up I have the
implementation of this method already
you know type let me copy and paste that
now again it's going to be
straightforward now when I select a page
size from the drop-down list
what should happen the web form should
post back and we should pass the page
size and the page number to get
employees method of the employees data
access layer and then retrieve the data
binded to the grid we control and then
obviously
or populate the page numbers as well
because once you change a page size the
number of pages will have to change in
it you know so let's look at the
implementation so if you look at this
implementation so we are creating a
variable of type integer total rows and
then look at that page size we are
retrieving the page size from DDL page
size drop-down list using the selected
value property and then page index I am
setting that to 0 remember when we
change the page size of the drop-down
list the number of pages will change
okay so that's why I am initializing the
page index to 0
and then you know whatever is the page
size that we have selected within the
drop-down list we are setting that as
the page size for the grid we control
and then what we are doing we are
passing in the page index and page size
to get employees method of employee data
access layer and then invoking the data
bind method and data bind DDL page
numbers function to this we need to pass
page index page size and total rows okay
so that should fix that problem you know
whenever I change selection within the
page size drop-down list you know the
correct number of rows should be
displayed within the grid we control the
next thing is obviously when I change
the page number in the page number
drop-down list then we need to be able
to navigate to correct page which in the
grid we control so let's go ahead and
implement that drop-down list selected
change selected index changed even this
far so let's go to our form 1 so there
is the drop-down list let's first set
the auto post back property to true for
this drop-down list because we want the
wave form to be posted back
automatically and then let's double
click that to generate the even handler
method again I have the code already
implemented for this one so let's copy
and paste that within this even handler
method so again what we are doing here
we are creating a variable of type
integer total rows and look at that and
getting the page size from the drop-down
list page size using the selected value
property converting that to integer
similarly I'm getting the page
from the drop-down list and remember
page numbers within the drop-down list
starts at 1 that grid view page number
is 0 index based so we need to subtract
1 from the drop-down list page number
value and then we are setting the page
size to the grid view page size and
finally we are passing the page index
and page sizes to get employees method
in working the data by in method of the
grid view control ok all right so let's
go ahead and run this now you may be
wondering so if you look at this even
handler method you know when the
selected page size changes we are
calling data buying the DDL page numbers
which computes the total number of pages
and binds that to this drop-down list so
when the page size changes we are
computing the page numbers but then when
I select a page number within the
drop-down list why are we not calling
this DDL I mean data bind this data bind
DDL page numbers function within this
even handler method that's because here
I am only changing the page that I am on
so the page numbers is not going to
change in any way so that's why there is
no need to invoke this data bind DDL
page numbers in this even handler method
DDL page numbers selected and exchanged
even handler method that's why we are
not calling that so with these changes
and we run this it should all work as
expected so when the webform renders it
should row display 5 records and should
be on the first page now if you look at
the number of rows that I have in this
table at the moment I have 11 rows in
TBL employee table and the page size is
5 so obviously there should be 3 pages
and if I navigate to the third page I
should have only one row on the second
page I should have 5 rows and notice
that by default it's sorted by employee
ID in ascending order now let's set the
page size to 10 now I should get 10 pay
10 records within the grid we control
and you can see that and then I navigate
when I look at the page number drop now
let's look at that I have only two pages
and in the second page they should be
only one row
okay now look at this when I said the
page size to 20 look at what happens to
page number drop-down list look at that
all rules are shown on the first page
because there are only 11 rows we see
all the eleven rows and look at the page
number drop down this this is disabled
now because there's only one page I am
looking at that I have no option of you
know navigating to another any other
page because there's only one page okay
but on the other hand now if I flip it
back to five look at that the drop down
this is re-enable and then I got all the
three pages okay so let's change it back
to maybe 15 and look at that the sorting
works as usual right and if I put it
back to 5 I thought by name look at that
it's sorted in ascending order and if I
go to the last page I have Valerie which
starts with V because the name is in
ascending order if I click on descending
order
look at that Dave you know um is the
name and then it's sorted then basically
descending order okay and one more thing
here look at that the page number you
know I'm on the third page but look at
this one you know it's actually showing
page one okay now I want to have the
page number three selected within this
drop-down list so is there a way of
doing that absolutely you know within
when we sort the data
so we get the page number here and we
are passing that page number to this
data bind DDL page numbers drop-down
list okay so which is going to bind you
know based on that page number page size
it's going to do it's in a basically a
compute the number of pages available
and bind it to this drop-down list and
at that point what we can basically do
is DDL page numbers that selected value
is equal to that page number so let me
go ahead and run this up selected value
is a string so we need to convert this
to string so let's run this now and see
if it's going to work okay so we are on
page three so it's sorted by in our
employee ID in ascending order let me
actually sort in descending order look
at that name sorted in descending order
and okay so we have a problem here
instead of showing the last page number
it's actually showing page two why is
that because I gain the same concept
within the drop-down list you know the
page numbers is starts from one but in
the grid we control the page sorry not
the paid size it's the page indexed
within the drop-down list it starts at
one but within the grid we control it
starts at zero so obviously when we are
setting the page number you know within
the drop-down list the selected value
within the drop-down list then we need
to increment that by one before we
actually set it as the selected value
now this should correct that problem so
let me run this now
so the data is displayed by employee ID
in ascending order let's go to page
number three and then let's sort it by
name look at that it's sorted by name in
descending order and I'm still on third
page I can go to the first page I get
the names in you know the names that I
expect to be there all right on this
slide you can find resources for asp.net
c-sharp and sequence of interview
questions that's it for today thank you
for listening have a great day</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>