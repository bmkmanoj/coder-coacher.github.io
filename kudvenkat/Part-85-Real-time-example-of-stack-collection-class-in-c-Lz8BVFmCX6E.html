<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Part 85   Real time example of stack collection class in c# | Coder Coacher - Coaching Coders</title><meta content="Part 85   Real time example of stack collection class in c# - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/kudvenkat/">kudvenkat</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Part 85   Real time example of stack collection class in c#</b></h2><h5 class="post__date">2013-09-08</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Lz8BVFmCX6E" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">this is part 85 of c-sharp tutorial in
this video we'll discuss a simple
real-time example where they stack a
collection class can be used we discuss
the basics of stack collection class in
part 83 of this video tutorial so please
watch part 83 before proceeding these
are the two common scenarios that I can
think of where a stack at class can be
used implementing undo functionality in
an application and implementing browser
back button let's say for some reason we
don't want to use the back button that
is provided by a browser instead we want
to have a custom back button within our
asp.net web application let's see how to
implement that using a stack a class
let's flip to visual studio so here I
have a blank asp.net web application
first of all let me add a class filer to
this project and let's call it base page
dot CS and I'm going to make this class
inherit from system dot web dot u i dot
page and in a bit you will understand
why we are doing that okay now as this
class is inheriting from system dot web
dot u i dot page class you know the page
class has onload event so i'm going to
override the onload even handler so
override onload okay so what do i want
to do within this onload event now in a
bit we are going to make this base page
class the base class for all over the
forms within our application ok so you
know before the page load event of the
respective web formats and work since
this is the base class for all of the
web forms you know the onload event of
this base page will be executed ok and
here we are going to write the logic to
create a stack and then add
the history of the URLs the user has
visited to that stack so first of all
let's go ahead and create a stack so
URLs are strings so I'm going to create
a stack of strings and maybe let's call
this URL stack and then I'm going to
store this URL stack in a session
variable so session of let's call this
URL stack okay and I want to do this
only if session of URL stack is now so
if the stack is not present in the
session only then go ahead and create a
new stack otherwise you know do not
create it if it's already there okay so
that's the first step we created the URL
stack now I'm going to write some code
here this may not make sense at the
moment but don't worry well it will make
much more sense in just a bit so if
requests so if there is a request for a
web form if the request URL referrer
is not now okay what does this condition
mean you know if it doesn't make sense
to worry we're going to talk about that
in just a bit and if this dot page dot
is postback so if it's not a postback
request and session off back a button
click
equal to now okay if these three
conditions you know if we have met these
t these three conditions then what we
basically want to do is you know pull
out the URL stack that is present in the
session variable and then add the URL
refer to that stack okay let me write
that code and then I'll explain that so
from the session pull the stack and the
stack that is present in the session is
of type string and let's call it URL
stack and let's make a copy of this okay
so we pulled the URL stack that is
present in the session variable now what
I want to do is I want to push the URL
referrer
absolute URI into this tag okay now what
is this URL referrer if that doesn't
make sense let me explain let's say for
example in my application we have four
web forms now let's say I'm on wave form
one and then once I click on web form -
so we will be navigated to wave form to
the word referrer for wave form - is
platform one because we came to the form
- from platform one
similarly from web form - you know if I
click the link on web form three then
the URL referrer for web form three is
wave form - okay so at the moment let's
say I am on wave form three and then if
I click this platform for link that is
present on wave form 3 we will be
navigated to web form 4 so the URL refer
for wave form for is perform 3 ok so
basically what we are saying here is if
the URL referrer is not equal to null
and if it's not a postback request and
then if the back button is not clicked
in that case you now get the absolute
URI of the
referre absolute uri means you know we
are going to get everything starting
from HTTP : four slash four slash to the
entire URL basically okay and push that
into the stack in a bit we will see how
we are going to use the stack to
implement the back functionality within
our application okay and then I'm going
to write one more condition here so if
the session of back button clicked not
equal to now then let's set sessional
back button clicked to now okay now
there are quite a bit of moving pieces
here if T if this code doesn't make much
sense at the moment don't worry it's
going to be much clearer in just a bit
okay so this is the base page okay now
next I'm going to add a master page for
our application now master page will
give a consistent look and feel for all
our web forms in the entire application
we will discuss master pages in a later
video session but let me go ahead and
add a master page to this application so
let's add a new item and let me select
master page and let's call this site dot
master okay so we have a master page
here now I want to design a master page
that looks like this so first of all I
need a table so let me go ahead and
include a table within let's get rid of
that do tag and then let's use a table
here and let's use this style attribute
and set first of all border to one pixel
solid black
and then I'm going to hard-code the
width to 500 pixels and then I'm also
going to set font family to area all
right so let's close the table and
within the table I'm going to have a TR
and then a TD and for this TD I'm going
to set call span to two and here I'm
going to use a label control we will see
in just a bit how we are going to use
this label let's call this lvl message
and let's get rid of this text right
there and let's set the full color of
this label to red okay so we have a
label control there and then let's use
another TR and then first the TD for the
first TD within that TR I'm going to use
the style attribute and then set the
width of this TD to 100 pixels let's
close that TD and within this TD I'm
going to have these links I'm going to
do this in the masturbate so that every
content page that has subscribed to the
master page will have all these links
otherwise we'll have to repeat these
links on each and every content page so
that's the reason why we are including
them in the master page so within this
TD here I'm going to have another table
and let's use a TR and then I'm going to
have a TD here
let's actually make a copy of this one
so I'm going to have 1 2 3 4 okay so in
the first TD of the first TR we need
this text which says links so whatever
you can see here and then we want these
links so I'm going to have an anchor tag
here so anchor tag
Hof equals I'm going to have the
complete URL starting from HTTP so HTTP
localhost four slash and if you look at
the name of our web project that is web
forms a demo so let me copy the name of
the project so localhost waveforms demo
four slash let's say web form one dot
aspx and then let's give it some text
which says like the phone one okay so
let me copy this and then paste it in
the other TDS
so this is going to be a form - and the
text say is waveform - and let's do that
for waveform three and waveform 4 so
this is going to be web form three and F
on three and finally waveform 4 and this
one is going to be web form for alright
so we have designed this TD which
contains these links next I want the
content placeholder where each content
page can can plug in their specific
content and then I need a back button
again we need back button on each and
every waveform so I'm going to include
that back button within the master page
so I'm going to have another TD here and
then within this TD I'm going to have a
back button so let me drag and drop a
button maybe let's name change the ID of
the button - BTN back and let's set the
text on this - back ok and then along
with the back button
we need the content placeholder ok so
I'm going to take this content
placeholder so basically this is the
location where each content page will
plug in their page specific content ok
so at this point we should have a master
page that looks like this
okay so let's actually flip that to the
design mode and you can see it okay so
this is where the content you know the
the content page specific content will
be plugged in so let me double click
this button to generate the event
handler okay so when I click the back
button on the master page what should
happen that's what we are going to write
here so obviously you know if I have
navigated let's say for example from
webform 1 to webform to and from there
to bed from 3 and from there to bed 4
and then once I am on web form 4 if I
click the back button
I should be navigating to webform 3 and
then if I click the back button I should
go back to web form 2 and then
subsequently to webform 1 okay so let's
write that code okay so if basically
when I click this back button what I'm
going to do here is if you remember in
the master page I mean sorry in the base
page we have the session of back button
click so when I click the back button
I'm going to set this to yes
so session of back button click is yes
okay meaning we have clicked the back
button and then what I'm going to do
here is what's the name of our stack its
URL stack within the session variable so
if session of URL stack if that is not
equal to now that means that is
something within the session so in that
case what do we want to do we want to
retrieve that URL stack out of the
session variable and then pick the first
URL and redirect the user to that URL
okay so URL is of type string so string
URL is equal to we need to retrieve that
from the stack that is present in that
session variable first of all we need to
pull it out from the session variable so
I am going to copy this
so stacked off string let's call it URL
stack equals that and we need to
typecast that to be whatever we are
retrieving out of session you know it
comes out as an object so we need to
typecast it to be of this type stack of
string and then we are going to use the
pop method to retrieve the item that is
present at the top of the stack so we
are going to get the recent most URL
that the end user has visited okay and
then what we are going to do we are
going to redirect the user to that URL
response to redirect to that URL okay
now another thing that I'm going to do
here so once we get this URL stack I'm
going to check if URL stack dot count is
greater than zero okay meaning there are
some URLs that user has visited so it's
okay to pull the most recent URL from
the stack and then redirect the user to
that URL but then if the count is zero
if you invoke pop method what's going to
happen it's going to throw an exception
and we don't want that to happen and
again if the count is zero we know that
there are no pages in the history and we
want to display status message the user
stating there are no pages in the
history so in that case what I'm going
to do and if you remember in the master
page in the first TR we have this label
and the ID of the label is lvl method so
what I'm going to do here is set the
text of that label to there are no pages
in the astray or you can give any
meaningful message that you want okay so
at this point we have implemented our
base page we have implemented our master
page now the next step is to add content
pages let's go ahead and add four
content pages so let click on the master
page add content page
and by default we are going to get the
name as well form one dot aspx and then
what I'm going to do here is on the aspx
page itself I'm going to include an h1
and just say this is web form one okay
and in the code behind for I look at
this by default every web form is going
to inherit from system dot web dot u Y
dot page okay but we don't want our web
forms in our application to be
inheriting from that page instead we
want to look at this this is the base
class system that web dot u Y dot page
is the base class for every web form but
I'm going to make this inherit from base
page class and if you look at our base
page class that is inheriting from
system dot web dot u Y dot page so in
between we have introduced the space
page class because we want to overwrite
the onload event and we want to include
our custom logic here to add the URLs
the user has visited to a stack so that
you know we can implement the back
functionality back button functionality
all right
so let's repeat the step to add you know
wave form two three and four so let me
right click on the master page add a
content page and that's going to add web
form to and here let me actually copy
this and paste that on web form to let's
call it the sis wave form to so that we
know on which web form BR and then
within the code-behind file I'm going to
make this wave form to inherit from base
page so let's do that for wave form 3 so
add content page so that's going to be
bad form 3 and here we are going to say
this is perform 3 and within the
code-behind file platform 3 is going to
inherit from base page class and finally
let's add back form for
so let's change the text to this is five
form four and within the code-behind
file let's make this inherit from base
page all right so all is in place now so
let's go to a base page put a breakpoint
there and see how it actually works and
similarly let's go to a master page and
within the code-behind file of the
master page let's put a breakpoint in
this button back click event handler
okay so let's go ahead and run this now
so I am on waveform 1 so by default we
should land on waveform 1 but then since
we have breakpoints here before the
webform one page load event has executed
it's going to invoke the base page load
event and look at this this is the first
time we are landing on this application
so if I step through by pressing f10
session of URL stack will be null so
when I + f2 it gets inside it creates a
new URL stack and it's going to store
that in the session variable okay and
then when I press f10 so URL referrer
here is going to be null why because you
know we directly came to this URL we
didn't come from any other page so
that's why here URL referrer is now and
it's not a postback okay so since URL
referrer is now it's not going to come
inside this condition so when I press
f10 again it's going to come here at
session of back button click we didn't
click the back button so it's not going
to go inside so when I press f5 what's
going to happen we will land on webform
1 okay now I am on webform 1 look at the
URL I'm on waveform 1 when I click this
link waveform to look at what's going to
happen the onload event will get
executed again and then session of URL
stack is this equal to null know we have
already created a stack and put that
into the session variable so this
condition is false so it will not go
inside that and it will come here and
check this URL refer you get the URL
refer what is that it's waveform 1 dot
aspx so webform 1
is referring us to webform - and is this
a postback falls and we have not
condition here false and false is true
and we didn't click you know back button
so this will be null so it's going to
come inside this block and look at
what's happening here we are retrieving
that URL stack out of the session and at
the moment in URL stack how many items
we have zero items there's nothing in
the URLs tag now when I say push look at
this request dot URL referrer that is
the URL referrer and what is the
absolute URI the full URL okay so that
URL now will be pushed into the stack so
once I press f10 and if you look at this
URL stack there's going to be one item
and that is where from one URL okay so
when I press f10 we didn't click the
back button so I mean it will be now so
it will not go inside
f5 now let me click on waveform 3 now
what's going to happen the same thing so
if I come here if you look at the URL
stack already we have but from one dot
aspx now we came to webform 3 but from
where did we come from webform to so the
URL refer is web form too so we're going
to push that into the stack so when I
press f10 and then if you look at this
URL
stack look at that waveform to is on top
of web form 1 so let me press f5 here
and then let's go to web form 4 okay so
same idea let's press f10 come to the
URL stack here so within the URL stack
we already have web form one waveform -
now we are on web form 4 and to web form
for we came from web form 3 so here URL
refer is going to be perform 3 and that
will be pushed into the stack so f10 and
if you look at this URL stack they're
going to have web form 3 there okay so
let me plus a 5 and we are on web form
for now when I click back button what's
going to happen let's look at that so I
click the back pad
so when I am on waveform 4 and when I
click on back button - which waveforms
should be navigate - we should go back
to webform 3 ok so we should go back to
the recent item within the history so
that's why we need to pull the item that
we have added last to the stack ok
so that's why we are using stack here so
when I click back button look at that
the onload event is executed
so if session of URL stack it's not null
so it's not going to go inside URL refer
it's not going to be now okay but then
is this a post back true so we are
saying if not is post back only then
come inside so it's not going to come
here inside this block and when I press
f10 and session off back button click
you know we click the back button now
but that even hasn't been executed yet
because page load event will be fired
even before the postback event ok so
when I press f10 session of back button
clicked will still be now and because of
that it's not going to go inside now
when I press f5 it's going to go to that
back button click even handler with in
our master page and then look at this we
are setting that session variable back
button clicked to s so f10 and session
of URL stack is it not no so it's going
to go inside let leave the URL stack
from the session and URL stack dot count
is definitely greater than 0 and then
look at this URL stack what is the item
that is present on top of the stack web
form 3 and when we use pop method it's
going to retrieve the item that is
present at the beginning of the stack
which is nothing but waveform 3 so when
I press f10 it's going to come here
retrieve the top URL from the stack
which is perform 3 and we are going to
redirect the user to that webform and
when we do a redirection what's going to
happen the page load event of webform 3
is going to be fired again okay so let
me press f5 look at that it is going to
come to the onload event again now I
press f10 session of URL stack you know
it is not null so it's not going to go
there and then URL refer
is waveform for but then this is not a
postback request so it's going to be
false so these two conditions are true
but this condition is false because we
have clicked session I mean back button
so session of back or back button click
will not be equal to now okay look at
that session of back button click if I
take this and then go into the immediate
window look at that we have s in there
so it's not going to go inside but here
you know since it is not equal to null
it's going to come here and set that to
now and now when I press a5 what should
happen we should land on webform 3 ok so
let me disable all the breakpoints here
and now when I click back button from
webform 3 where should we go to webform
to look at that and from there we should
go to their form 1 look at the URL as
well and now at this point all the items
would have to been removed from the
stack so when I click back here
what's going to happen there are no
pages in the history so we get the
output that we expect all right so this
is a very simple example of using stack
class to implement our custom back
button within an asp.net web application
that's up to today thank you for
listening have a great day</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>