<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Part 65   Deleting multiple rows in mvc | Coder Coacher - Coaching Coders</title><meta content="Part 65   Deleting multiple rows in mvc - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/kudvenkat/">kudvenkat</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Part 65   Deleting multiple rows in mvc</b></h2><h5 class="post__date">2013-07-30</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/8LKFZDeoJT0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">this is part 65 of asp.net MVC tutorial
in this video we'll discuss deleting
multiple roles in an MVC application we
want to provide a checkbox control next
to every row this enables us to select
multiple rows once we have multiple rows
selected and then once I click this
button we want to delete all the
selected rows we'll be using this table
TBL employee for this demo so the first
step here is to add an 8 or 10 to entity
data model based on this table so let's
flip to visual studio here I have a
blank asp.net MVC for application the
first step is to add ad a dot into
entity data model so let's right click
on the models folder add a new item
select data under install templates
area dot and entity data model and let's
name it sample data model click add we
want to generate our model from the
database click Next and let's name our
connection string as sample DB context
click Next this is going to connect to
the database and retrieve all the tables
views and stored procedures expand
tables select table TBL employee and we
want our models to live in models
namespace click finish this should
generate an entity with named TBL
employee let's rename that to employ
save all the changes and let's build a
solution so that this employee entity is
compiled the next step is to add a
controller so let's right-click on the
controller's folder add controller and
let's name it home controller and let's
use this empty MVC controller as the
template click Add this should add home
controller all right now within the
sample data model that is generated for
us
notice that we have called a context
class and an entity class the context
class is actually called sample DB
context class and the entity is nothing
but employee entity class that we have
ok now we want to use both of these
classes within our home controller and
notice that these classes are
siding in this MVC demo dot models
namespace so let's use that within our
home controller all right now we need to
pass list of employees to our index view
basically we want to display all the
employees here so we need to pass the
list of employees and to retrieve that
list of employees we need to connect to
the database and to do that we have the
sample dbcontext class that is generated
by ad wrote in the entry data model so
let's create an instance of that and
this object has called this employees
property which is going to give us the
list of employees and we are going to
pass that to this view in a bit we will
create index view ok now another
function that we need here is the delete
function look at this when we select
multiple employees and when we click
this delete selected employees we are
going to delete those employees so
obviously we need an action method which
is capable of deleting those employees
from the database so let's go ahead and
add a delete method so let's make a copy
of this index action and let's call it a
delete now to delete employees let's say
I selected three employees here and then
once I click delete selected employees
we need to pass their IDs to the delete
action method and the ID of an employee
is of type integer so basically when you
select multiple employees we're going to
pass lists of the employee IDs okay so
we need list of integers basically
ienumerable of integers so let's go
ahead and include that i enumerable of
integers and let's name it employee id's
to delete ok so how are we going to
delete these employees so DB dot
employees that's going to give us all
the employees but then out of them let's
apply a where clause so ex
that if this list employee IDs to delete
if this list contains the employee ID
then all such employees no let's convert
them to another less so all such
employees loop through each one of them
using this for each loop and then delete
them and how are we going to delete them
DB dot employees dot delete object so
basically what is the space of code
doing you know it's checking if the ID
that is present here you know that's
that ID match with the employees that we
have in the database if true add them to
a list all such employees and loop
through each employee and then delete
them that's what this code is doing and
once that is done save the changes to
the database so debate or save changes
and once we have deleted the employees
what we need to do we need to redirect
the user back to the index action so
that we can you know view the rest of
the employees after deletion okay and
how do we redirect the user to the index
action using redirect to action method
and which action we want to redirect
index all right so this this is the
implementation within the controller the
next step is to add this index view
itself but before we do that to render
this interface for each employee
you know the checkbox control the name
gender and email
we need an editor template so let's go
ahead and add an editor template for
employee object now we discussed about
display templates and editor templates
in the previous sessions of this video
series so please watch them if you are
new to these concepts so let's flip to
visual studio so editor templates and
display templates you know they they can
either reside in shared folder or in a
specific views folder so let's actually
add them to shared folder so first let's
create a shared folder
and then within shared let's add editor
templates folder all right and then
let's go ahead and add and edit the
template for employee object let's call
it employee we're going to make use of
phrase of view engine and we're going to
create a strongly typed view against
employee model class and let's select
empty as the scaffold template click Add
so here the model for this view is the
employee object now what is the
responsibility of this editor template
it's going to generate a checkbox
control name gender and email and all of
these need to be part of a table drawer
okay so we need to have a TR tag and
within that PR we need four TDs so let's
go ahead and include that HTML here so
one TR there and then for TDs so let's
make a copy of this okay and in the
first two TD what should we display a
checkbox control so the first TD should
display this checkbox and to display
checkbox we can use input type equals
checkbox and then the name of this one
I'm going to give it this name and there
is a reason behind doing that so the
name of this checkbox control is
matching the name of the parameter that
is coming into this delete action method
okay that's because when we click this
delete selected employees button okay we
are going to post this form and then you
know the ID that is associated with this
checkbox control all the you know if I
select multiple checkboxes then all the
IDS that are associated with the with
each checkbox you know they will be
automatically passed into this delete
action method you know that's going to
be done by the default model binder in
asp.net MVC for us so that's the reason
behind naming you know the name of this
checkbox control the same as this
parameter
and then another thing that we forgot to
do here is now when we click this button
delete selected employees we're actually
posting the form you know we want to
delete the selected employees as part of
the post operation okay so we need to
decorate that with HTTP POST attribute
so let's do that before we forget all
right so let's go back to this editor
template so the name is going to be
employee IDs to delete and similarly ID
is also going to be employee IDs to
delete and then the value is going to be
employee ID and how do I get access to
employee ID look at this the model for
this view is employee object and this
employee object has got ID name gender
and email properties so all we need to
do is at model dot ID so that should
give us a checkbox control ok and what
are the next things that we need to
display name gender and email and how am
I going to get them at model dot name
similarly let model dot gender
and finally email all right so that's
the editor template the next step is to
actually add the index view itself so
let's go back to the home controller
right click on the index view add view
the name of the view is going to be
index we're going to make use of laser
view engine the model is going to be
employee and let's use empty as the
scaffold template because we are going
to write the required HTML click Add so
this should generate index view for us
so the model here is actually you know
just an employee object one employee
object but what do we want on index view
we want to display the list of employees
so basically the model for this view is
going to be a enumerable of employees
all right now we need a form tag because
once we click this delete selected
employees we are going to post this data
back to the server so we need a form tag
and how do we generate form that we can
use begin form HTML helper and let's
wrap that inside and using statement so
that we'll have the closing tag
automatically generated for us so let's
use the using statement so I add using
HTML dot taken form so this is going to
generate the you know opening and
closing tag or you know form tag for us
now when I post this form when I click
this delete selected employees what
should actually happen we should post
this form to delete action within the
home controller that's when the
employees will be deleted so we have to
tell that to the form tag so there is an
overloaded version of this form that way
we can specify that look at that we can
specify the action name that controller
name and what is the form method is it a
get or a post request ok so the action
name is going to be delete and there is
this action present within the home
controller and how do you want
to perform this do you want to do that
as part of catalyst or a post request I
want to do that as part of post request
okay so what's the next step the next
step is to actually you know create a
table tag and then within the table we
need our headers in a select name gender
and email so let's create a table first
so table and let's set a border for
table and then within the table we need
table head and within table head we need
a table row and within the table row we
need for table heads select name gender
and email so table head so let's make
four copies of this so in the first
table head we want this text select next
name gender and finally email okay so
next after the table head is displayed
what we need we need tables row as part
of table body so let's go ahead and
include table body and within the table
body we should display each employee now
if you remember we have created an
editor template which is capable of
displaying the checkbox control name of
the employee the gender and the email so
we're going to make use of this editor
template okay
so within this table body I'm simply
going to say at HTML dot editor for
model since the model I mean this since
this edited template name matches with
the type name so the type name here
that's the class name is employee and
the editor template name is employee so
when we say editor for model you know
this view is going to make use of that
template to render each employee like
this okay so now let's go ahead and
specify a span tag a div tag here and
set the style attribute
so let's set font family to area
all right so with all these changes
let's build a solution and let's
navigate to the index fear so now the
index view should list the employees
with checkboxes next to each one of them
and finally we forgot to do this we need
you know look at this we need a button
control to post the form so let's go
ahead and include that as well so after
the table we need a button control input
type is equal to submit and the value 1
that should be equal to the lead
selected employees all right let's save
this and that's good and refresh this
view now we should get the delete button
as well look at this let's select two of
the employees click delete selected
employees and look at that they get
deleted let's quickly check that in the
database look at that those are gone
okay
now in our next video we'll actually
discuss having another checkbox here on
the header and then if I select that
checkbox all the row check boxes should
be selected and if I deselect that you
know the rest of the check boxes should
be automatically D selected we'll
discuss that in our next video session
on this slide you can find the sources
phase B dotnet C sharp end sequence of
interview questions that's it for today
thank you for listening have a great day</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>