<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Part 82   Creating custom validation attribute in asp net mvc | Coder Coacher - Coaching Coders</title><meta content="Part 82   Creating custom validation attribute in asp net mvc - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/kudvenkat/">kudvenkat</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Part 82   Creating custom validation attribute in asp net mvc</b></h2><h5 class="post__date">2013-08-21</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/vcX8WW4fL1s" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">this part 82 of asp.net MVC tutorial in
this video we'll discuss creating custom
validation attribute we'll be working
with the example that we started in part
80 so please watch parts 80 and 81
before proceeding with this video now
any value outside the range of 1 1 2001
1 2010 we'll throw a validation error
message for this hire date property
let's say we want to keep this minimum
value restriction as it is but we want
to change the maximum value we want the
maximum value to be today state instead
of this hard-coded date and to achieve
that we'll be tempted to use something
like this so obviously within dotnet to
get current date we can use daytime dot
now dot 2 short date string now look at
this when we compile this we will get a
compilation error so obviously we cannot
use date/time dot now as the argument
for attributes let's see how to fix this
using a custom validation attribute
first of all let's add a folder and
let's name it common and let's add a
class file to this folder and let's call
it date range attribute so this is going
to be the name of our custom attribute
that we are going to create so the file
name is also date range attribute dot CS
so here we have this class date range
and view now first of all let's get rid
of the namespaces that we don't need to
keep things simple now this class is
going to inherit from range attribute
class and this range attribute class is
present in system dot component models
of data annotations namespace so let's
go ahead and bring that in
so this class is going to inherit from
range attribute class now let's include
a constructor for our date range
attribute class and then keep in mind we
want to keep our minimum value
restriction as it is so let's pass that
as a parameter to the constructor and
then this constructor of the straight
range attribute class is going to invoke
the base class constructor what's the
base class for this class range
attribute and if we go to the definition
on range attribute class look at this it
has got several overloaded constructors
we are going to invoke this overloaded
constructor that takes three parameters
so let's flip to our date range
attribute so to invoke the base class
constructor we use base keyword and then
the moment I open the bracket notice
that it shows us all the constructor
versions that are available on our base
class which is strange attribute class
so we're going to make use of this
overloaded version to get the type we
use type of keyword so get the type of
date time and minimum value we are going
to pass this parameter as the argument
for minimum value to the base class and
how are we going to get the maximum
value so obviously we want the maximum
value to be today's date and to get the
current and date and time
we use date/time dot now and since we
are only interested in date part let's
convert that to short date string and
then this constructor is going to have
an empty body look at that all we are
doing here is we created a constructor
and this constructor is going to invoke
the base class constructor that's it we
are done creating your custom validation
attribute now all that is left is to use
this validation attribute with the hire
date property within our employee class
so instead of using the arrange
attribute let's use the arrange
attribute
and the state range attribute is present
in MVC demo'd a common namespace
so let's include that within our
employee class and now let's decorate
this hydrate property with date range
attribute and we need to specify the
minimum value and we want to keep that
minimum value restriction to one 120 -
I'm in two thousand so let's go and pass
that all right so let's build our
solution let's fire up a browser let's
navigate to the index view then let's
click Edit to navigate to the Edit view
and look at that
today the data is the current date is
2108 2013 let's try
22:08 2013 which is day after tomorrow
so we should get a validation error
message look at that the field hire date
must be between 1 1 2020 108 2000 2013
so if I change that to 21 which is
today's date it should accept that value
and save it to the database as expected
alright very good now let's look at
another example of creating a custom
validation attribute now let's say our
business rules have changed and we don't
want any restriction on minimum value
okay so we want to accept any value for
this height property as long as that
date is less than or equal to today's
date so to enforce that let's create
another custom validation attribute okay
so let's add a class file to this common
folder and let's call this current date
and then again let's get rid of the
namespaces that we don't need so now
this current date class actually let's
rename that current date attribute
okay so this current date attribute
class is going to inherit from
validation attribute now if you remember
this date range attribute is inheriting
from range attribute class and if you
look at this range attribute class is
that's inheriting from validation
attribute class so if you want to create
a custom validation attribute then we
either directly or indirectly inherit
from validation attribute class okay now
since I don't want to make you know use
of any of the methods and constructors
and properties that are available in
range attribute I'm going to inherit
directly from validation attribute class
so this current date attribute class is
going to inherit from validation
attribute class but that class is again
present in system that competent models
of data annotations namespace so let's
go ahead and bring that in as well all
right so let's make this class inherit
from validation attribute class and if
we go to the definition on this
validation attribute class this class
contains one virtual method called is
valid so this is the method that we are
interested in we need to override this
method okay so let's go ahead and do the
add so look at this the moment we type
override and once I press space then it
will show me all the methods that can be
overridden and the method that we are
interested in is this is valid method
okay let's get rid of this call to the
base class is valid method and let's
provide the implementation for this is
valid function and look at this the date
time value that that we are going to
provide this attribute is going to come
into this function as an object type
okay so first of all let's go ahead and
convert that to date/time so date time
and let's name the object reference
variable as date time and we need to
convert the value that is coming into
this function to date time and to do
that let's use to date time
function and then pass the value okay so
if the date time is less than or equal
to date time dot now then we want to
return true because we want the date
value to be less than or equal to today
state in which case we'll return true
else we will return false so instead of
having all this lines of code what we
can do is we can achieve all this in a
single line all we want to do is return
whatever this expression returns so this
expression is either going to return a
true or a false okay so let's return
simply the expression result you know if
it's less than the current date in time
it's going to return true otherwise it's
going to return false so we can get rid
of all this lines all together all right
so we are done creating another custom
validation attribute all that is left is
to use this attribute with our hydrate
property in the employee class okay so
instead of using date range attribute I
want to use current data attribute look
at that and then this attribute doesn't
expect any parameters to be passed in so
I'm not going to pass any parameters so
let's build a solution and let's
navigate to the Edit view so at this
point it should accept any date you know
there is no restriction on minimum value
as long as it is less than the current
date in time it should accept it so 21
is today's date let's try 22 which is
definitely not the current day so the
field hire date is invalid and then
let's try you know something 21 which is
the value that it should accept look at
that it saves as expected
on the other hand if I try Oh 101 2010
or let's try 2009 we shouldn't have any
restriction on the minimum daytime value
look at that that gets saved as well on
the other hand if we try something like
this and click Save
look at that the value is not valued for
higher date that's it for today thank
you for listening have a great day</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>