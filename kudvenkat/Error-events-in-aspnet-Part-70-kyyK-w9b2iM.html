<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Error events in asp.net   Part 70 | Coder Coacher - Coaching Coders</title><meta content="Error events in asp.net   Part 70 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/kudvenkat/">kudvenkat</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Error events in asp.net   Part 70</b></h2><h5 class="post__date">2012-12-04</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/kyyK-w9b2iM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello welcome to prism technologies I am
venket this is part 70 of asp.net video
series in this session we'll discuss
about error events in asp.net before
continuing with the session I strongly
recommend to watch part 67 68 and 69 of
this video series handling exceptions
using try-catch blocks is commonly
termed as structured exception handling
and we have seen how to do structured
exception handling in a previous session
of this video series now in addition to
the structured exception handling
asp.net also provides two error events
one at the page level and the other one
at the application level let's actually
look at an example here I have a simple
asp.net web application project on
webform 1 I've got a gridview control
and the label control and then within
this project I have called this country
stored XML file which has got a list of
countries and I want to display these
countries within that grid view control
and we have seen how to do exactly the
same thing in the previous session of
this video series the easiest way to
display an XML data in a grid view
control is to you know by using a data
set object so here we are creating an
instance of data set object and then we
are invoking the read XML method of the
data set object to read the XML data and
and load that into the data set once we
have the data in the data set we can
then use the data set as the data source
for the grid view control and finally
invoke the data bind method as you might
expect if we run this application as it
stands right now it's going to retrieve
the data from the XML file and display
within the grid view control okay so all
is fine but just imagine what's going to
happen if somebody is going to delete
that XML file so this XML file is
present somewhere within the file system
so if I navigate there and if I delete
that XML file from that folder and if I
try to navigate to this page once again
as you might expect we get an exception
and system dot IO dot file not found
exception and why are we getting this
exception because the file is not found
and you are not handling that exception
so it gets propagated all the way to the
application level and it gets shown to
the user using this hello screen of
death ok and how do we solve this the
easiest way to solve
this is via having the try-catch blocks
and we have seen how to do that in the
previous session of this video series
now if we forget to handle the exception
or if the you know in reality there
could be hundreds and hundreds of lines
of code within a page in a real-time
application and let's assume we have
missed handling exceptions at at one you
know at at a specific section within the
page so if there is an exception in that
section of the page it's gonna you know
propagate till the page level okay and
at the page level we have another chance
to handle that exception using page
underscore error event handler now page
underscore error event is only raised
whenever there is an unhandled exception
on that page okay so to handle that
event we have the page underscore error
event handler so instead of page load
let's change it to page underscore error
and then the interesting thing here is
how do we get the exception that that
has occurred the easiest way to get the
exception is by using the server object
and it has got a method called get last
error and if you look at the
intelligence of the method look at what
it's returning back it's returning an
exception object back so let's create an
instance of exception plus so exception
e X so we have the exception now the
exception object now once you have the
exception object we can log it to a
database table or to an XML file or to
the event viewer on that system we will
see how to do you know exception logging
in a later video session okay so we have
the exception now now once we have the
exception now I want to redirect the
user to you know a generic error page
now I have also created this error page
here errors dot aspx and if you look at
the space itself it's a very simple page
it has got this plain HTML all it says
is an application error that's an h2 and
then I have h3 element and h3 element
here just to display a message to the
user stating an unknown error has
occurred we are aware of it and the ID
team is currently working on this issue
sorry for the
cause you know any kind of custom
message that you want to show to the
user letting him know that there is an
application error okay so I want to
redirect the user to this page so all I
do is I redirect the user using response
dot redirect and then I specify the page
here its errors dot s aspx I'm going to
redirect the user to that page okay but
before we react the user to that page I
have to do one more thing that is clear
the exception now what happens if I
don't clear this exception we'll talk
about that just in a bit okay so
basically if you want to handle error
within page underscore error event there
are three things that you do you you get
the exception and how do you get the
exception by using the get last error
method of the server object the return
type of that method is exception so we
are using a variable of type exception
and then in reality we will actually log
it somewhere so that we have a record of
that exception so that a development
team can work on that exception and fix
it but here we are not doing it we are
going to look at that in a later part of
the video series and then the next thing
is we clear the error what happens if we
don't clear the error we'll look at that
in just a bit and then finally redirect
the user to that custom error page that
we have here okay so obviously now if I
go ahead and run this as you might
expect you know the page gets it gets
tried to loaded and then look at that it
is getting now redirected to errors to
aspx because why there is an unhandled
exception on the page so this page
underscore error even handler gets
executed we are retrieving the exception
clearing the error and redirecting the
user to the errors page okay now in an
application there could be you know
hundreds and hundreds of pages as well
now if I have forgot to have an error
event like this on a page what happens
okay
let's assume if I comment this out now
what's going to happen you know the
exception will be propagated to the page
level at the page level I don't have the
error handler so it's going to propagate
till the application level and there is
another event at the application level
called application underscore error that
gets raised okay and to handle that
error at an application level within
global dot ASX file I have this
application underscore error event
handler so this gets invoked and then
what we can do basically we can handle
the exception there just like how we
have handled it in page underscore error
okay so global application underscore
error even handler event gets raised at
an application level so basically the
first line of defense is within the
event procedure itself so page load
event we try to handle the exception
there using try catch block okay if we
fail it to do there then we we have a
second line of defense that is at the
page level using page underscore error
and even if we fail it failed to do it
there then finally it gets propagated
till the application level and at the
application level we have application
underscore error event handler if you
fail it to handle the error here as well
then you will get you know an ello
screen of death like this which displays
you know the exception information on
that page okay all right now on webform
one dot aspx so here we are handling the
error and we are clearing the error as
well and why are we clearing the error
let us understand that a bit so there
are two error events page underscore
error this event is phrased at the page
level when there is an unhandled
exception on the page the even handler
resides on the page itself whereas
application underscore error this event
is phrased at the application level just
in case if the error event is not
handled at the page level it gets
propagated to the application level and
an application level application
underscore error event is raised when
there is an unhandled exception at an
application level the even handler
raised resides in global dot ASX while
we have seen that as well and these
error events can be used as a substitute
or supplemental to structured exception
handling now look at this if you are not
doing the structured exception handling
anywhere within your application at all
if you have the
then global dot aasa x-file you know
error-handling routine here then it's
going to handle all the exceptions for
us so it's going to act as a centralized
you know exceptional handling technique
in fact in real time applications that's
what we do you know we don't really
handle exceptions in everywhere on the
page okay actually it also depends on
from situation to situation from project
to project okay but definitely
application underscore edit event
handler can act as a centralized you
know routine to handle exceptions within
an asp.net web application and please
note if the exception is not cleared in
the page underscore error event so if I
don't clear the exception look at that
let's go here let's say I'm not clearing
the exception and we are not redirecting
the user let's put a break break point
there and let's also put a break point
within the application underscore error
even handler so we have page underscore
error event handlers we know that this
even gets raised when there is an
unhandled exception on this page okay so
it hits that break point and then since
we are not clearing the error within the
page underscore error event handler it's
going to propagate till the application
level and because of which application
underscore error event handler is also
going to be invoked so it first hits the
page underscore error so there is an
exception here could not find that file
now while I press f5 look at that it
comes to the page underscore error I
press f10 and if you look at that you
get that exception information there
could not find file and if I you know
point my mouse over that plus sign you
can actually see the exception there and
look at this I press f5 now look at
what's going to happen it goes to global
dot a SAS and this is your second chance
to handle that exception if you don't
handle it there as you might expect what
what's going to happen it's going to
show that ello screen of death and
that's what if the exception is not
cleared in the page underscore error
event it gets propagated to the
application level and application
underscore even handler gets executed if
you are not clearing the exception at
the application level
well then the application crashes with a
telescreen of death okay if the
exception is cleared and redirection to
errors dot aspx is not them then a blank
pages display let's look at that as well
now let's go to webform 1 dot aspx look
at that I am clearing the error okay
let's stop debugging so I am clearing
that error but I am not redirecting the
user to the errors dot aspx page so
what's going to happen you know when
this piece of code gets executed we have
an exception so it comes to page
underscore error you are retrieving the
exception you are clearing the exception
but you are not doing anything there so
it tries to process this line it tries
to get to this read XML line there is an
exception so when there is an exception
immediately the page processing is
stopped and the control goes to page
underscore error because there is an
unhandled exception so you are coming
here you're getting the error you're
clearing the error and not doing
anything so that's why the entire page
processing is stopped and and it
displays basically a blank page like
this so if the exception is cleared and
redirection to errors toward aspx is not
done then a blank page is displayed this
is because webform processing is
immediately stopped when an exception
occurs and you're not doing anything so
it shows the blank page if an exception
is not handled at the page level using
page underscore error event it gets to
the application level and can be handled
using the application and score error
even handler and global dot ASX and can
be used as a single centralized location
for error handling on this slide you can
find resources for asp.net c-sharp and
sequel server interview questions that's
it for today thank you for listening
have a great day</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>