<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Raising custom events from user controls   Part 106 | Coder Coacher - Coaching Coders</title><meta content="Raising custom events from user controls   Part 106 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/kudvenkat/">kudvenkat</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Raising custom events from user controls   Part 106</b></h2><h5 class="post__date">2013-01-03</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/1-asqv-LRp8" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so welcome to William technologies I am
venket this is part 106 of asp.net video
series in this video we'll discuss about
adding custom events to user controls
this will enable us to understand even
send delegates much better to get the
most out of this video I would strongly
recommend to watch parts 104 and 105
from the asp.net video series and parts
36 to 39 from the c-sharp video series I
have included the links for the asp.net
and C sharp video series here for your
convenience
now most people actually feel even send
delegates or a complex subject and they
are difficult to understand I'll try my
best to make these concepts as simple as
possible but trust me if we get the
basics right even's and delegates are
not really that difficult to understand
there are two very important points to
keep in mind when designing events and
delegates now delegates of function
pointers and their syntax is very much
similar to that of a function whereas
events or variables of type delegates
with an even keyword in front of them
now if these points are not very clear
at the moment don't worry there will be
much clearer as we progress in this
video in a previous session we have
designed this calendar user control
which is a very simple user control now
as the control stands at the moment it
doesn't have any custom even so this is
the control that we have designed if you
look at this the implementation of this
control this is pretty simple and
straightforward if you haven't watched
the previous sessions I would strongly
encourage you to do so before continuing
with the session all this user control
has at the moment is you know this
customer property and we have seen how
to retrieve that custom property on the
web form where we are using this cuz you
know calendar user control so when I
click this button within the button
click event what we are doing we are
retrieving the selected date and that's
the custom property that we have created
within the calendar user control and
then printing the date that the user has
selected okay now in this video we want
to create an event for the calendar user
control okay now what even do we want to
create now look at this whenever I click
on this image button the visibility of
the calendar changes if it's visible it
becomes hidden it
it becomes visible and along the same
lines when I select a date now the
calendar is visible when I select the
date as soon as I select the date the
calendar becomes invisible so the
calendar visibility is changing within
this user control
so whenever the calendar visibility is
changing within the user control I want
to raise a calendar visibility changed
event okay now this is in line with the
stat the standard asp.net drop-down list
control for example now within the
drop-down list whenever you change a
selection drop-down list selection
changed event is raised so along the
same lines whenever the visibility of
the calendar changes within the calendar
user control we want to raise calendar
visibility changed event let's see how
to do that now there are five simple
steps to raise a custom event from a
control obviously the first step is to
create this class calendar visibility
changed event arguments class for short
we are calling it args now this class is
going to contain the even data okay
now this may not be very clear at the
moment but don't worry as we progress
again in this video you're going to
understand the purpose of this class
this is going to be a very simple class
okay so this is called the calendar
visibility changed event args class and
we'll also understand the reason for
this naming convention calendar
visibility change to event arguments
okay we will understand why we are
naming it in such a way okay now let's
go ahead and create this class now I'm
going to create this class you know
usually in real reality we will have a
separate file for that class but for
simplicity sake I'm going to create this
class within the user control file
itself so I already have this class so
I'm going to minimize that and then
create this class so public class
calendar visibility changed eventargs
now this class is going to contain the
calendar visibility changed event data
now what data will this event going to
contain you know the calendar visibility
changed event okay it will contain true
or false if the calendar is visible you
know it returns true
otherwise it returns false obviously to
hold that visibility data we need a
boolean feel so I'm going to have a
boolean field within this class so
private boolean I'm going to call that
is calendar visible okay so that's the
private field now to expose this private
fielder to the external world we need a
public property so I'm going to create
that so public boolean I'm going to call
that is calendar visible and this is
only going to be you know a read-only
property so it's going to have only the
cat accessor so whatever is the value
that is going to be present in this
private field that will be returned by
this property so return this dot is
calendar visible okay a private field
and to expose that private field to the
external world they have a public
property and then obviously we need to
initialize this private field somehow so
I'm going to have a constructor for the
class which will initialize that field
so I'm going to say public a constructor
will have the same name of the class so
I'm going to copy that and then into the
constructor we will pass you know
whether if the calendar is visible or
not so is calendar visible now we will
use that incoming parameter into the
constructor to initialize our class
private real so this dot underscore is
calendar visible is equal to whatever
field that's coming into the constructor
so a very simple class this class is
going to contain our even data whether
if the calendar is visible or not so
this property will return true if the
calendar is visible otherwise it will
return false and this constructor is
used to initialize whenever the event
occurs we will we will create an
instance of this class and pass that you
know wherever it has to be passed you
will understand that in a bit so a very
simple class which is going to contain
our
and data that's step one okay now let's
look at what step to step to create
calendar visibility change the event
handler delegate so we are coming to
delegates now so what's a delegate now
from this point if you look at these
delegates of function pointers and their
syntax is very much similar to that of a
function and why do we use delegates now
let's see the one of the main purposes
of delegates okay now on this platform
if you look at this I have at the
standard asp.net button control now this
button control has this button click
event now one of the main purposes of
delegates is to hook up even handlers
with events of controls now there are
three things here to understand you have
the control itself which is the button
and the button has a click event and
then obviously when that event occurs
there is a method which is handling the
payment which is nothing but button one
underscore click okay now how do we hook
up this even handler but in one
underscore click one with button click
event that is done with the help of a
delegate so button one dot click look at
that
that's the click event you can see the
symbol as well the lightning bolt Simba
so button dot click and then to hook up
this event handler look at this to hook
up the button one this event handler
with the click event of the button one
control we are using this even handler
delegate this is actually the delegate
look at this you know the way via
hooking it up using plus equals here so
we are registering this method with the
click event of the button one control
using this event handler so what is this
event handler let me write right click
on that and go to definition now look at
this this is actually a delegate okay so
this delegate now look at look at what
we are passing to the constructor of
this delegate we are passing the name of
the function so this delegate will be
pointing to this function whenever this
event occurs this method is
automatically invoked ok and how are we
doing that using plus equals and a
delegate and now if you actually look at
that event handler delegate look at that
that's the event handler and if you look
at the even handler delegate look at the
signature it looks very much similar to
that of a method a method will have a
return type in this case it's void and
then it is taking two parameters one is
of type object India and the other one
is of type event arguments okay and then
look at that it has a delegate keyword
in front of it so a delegate or function
pointers and their syntax is very much
similar to that of a function the only
difference between the function syntax
and delegate syntax is that a delegate
will have a delegate keyword and it ends
with a semicolon whereas a function will
have a function body and it will not
have a delegate now since delegates or
function pointers you know the delegate
will have a signature and the function
will have a signature if this delegate
has to point to a function then the
delegate signature has to you know match
or the function signature has to match
that of the delegate so look at this
function it has void and it takes these
two parameters object and eventargs okay
and the delegate signature matches with
that okay so similarly we need a
delegate you know basically to point to
hook up our event to you know ever even
handler method so that's the reason why
we need to create a delegate so the next
step is to create you know a delegate
and and look at the name that we are
using calendar visibility changed event
handler now if you look at this here it
says generic I mean even handle it just
even handler now if we use this delegate
then our event cannot have any data
within that so if you un doesn't have
any data then we can use this generic
event handler but then the even that we
are going to raise is going to contain a
boolean flag a boolean data true or
false true if the color is visible
otherwise false so we need to have that
even data so if that's the case we need
to have our own delegate and then just
to match up with you know MSDN naming
convention I'm going to call this
calendar visibility changed event
handler okay so let's go ahead and
create that so let's create a delegate
calendar visibility changed even handler
so again a delegate is a function
pointer it's signature is very much
similar to that of a function so a
function will have an access modifier a
delegate will have an access modifier so
public and it's going to be worried and
I'm going to call this calendar
visibility change event in LA and then
this needs to have two parameters now
look at the delegate of they you know
the event the Microsoft even handler
delegate it's having object sender and
event args I'm going to copy that and
paste that here but then we I don't want
to use this eventargs class that's
because my event is going to contain
some additional event data so I'm going
to use my class that we have created
here calendar visibility changed
eventargs and another thing that I have
forgot to mention is you know since this
is going to contain even data it's a
very good practice to make it inherit
from event arguments class okay because
this is the common you know the the base
class which provides all that
functionality to this class and then now
so to capture that even data I'm going
to use this object instead of the
generic event args okay and then I'm
going to call this I'm going to put it a
delegate keyword here so this makes it
as a delegate so I have a delegate now
so that's the second step now what's the
third step create calendar visibility
changed event so this is most important
now what are events even's are nothing
but they're variables of type delegates
with an event keyword in front of them
now just imagine if we want to create an
integer variable how would we do that
all we
do s int I is equal to whatever so I is
a variable of type integer so if I say
int I is equal to 10 then I is a
variable of type integer okay so now we
are saying an event is a variable of
type delegate with an event keyword in
front of it so we already have a
delegate here now I want to create an
event okay now this event we want that
to be raised from this calendar user
control so you have to create that event
inside the calendar user control but you
know look at this this plus is created
outside of that calendar user control
because this is a class by itself okay
and then this is a delegate again
delegates are types just like classes
and interface they are reference types
okay so they exist on their own did you
know you don't have to create them
inside the calendar user control class
but then an event belongs to a class so
the event has to be inside that calendar
user control class so let me expand this
calendar user control class and then
create our event so what is an event an
event is a variable of type delegate so
how do we create a variable of type
delegate so I'm going to create public
and you know if you are creating an
integer variable you will say public
into I but I am NOT going to create a
variable of type integer instead I am
going to create a variable of type
calendar visibility changed even handler
delegate so I'm going to call that
calendar visibility changed even Handler
and I'm going to call the event -
calendar visibility changed so this is a
variable of type this delegate now if
you want to make that an event what all
you do is prefix an event keyword there
that's it so we have the even created
that's the third step create calendar
visibility changed event and what's the
fourth step now I'm going to I'm not
going to talk about the fourth step
right now we'll come back to that in
just a bit now the final step is to
actually raise the event so how do we
raise the event that's another important
thing to keep in mind and when do we
raise the important
we raise this cement whenever the
visibility of the calendar is change and
when does the visibility of the calendar
changes there are two ways in which the
calendar visibility changes whenever we
click the image button or whenever we
select the date within the calendar ok
so during both the cases we want to
raise this particular event so how do we
raise that event so where is the
calendar visibility changing whenever
the user clicks the image button within
that calendar user control and how do we
raise the Seawind to raise the event
look at this whenever the calendar
visibility is changed to false
now the first thing to raise the event
is we have to create an instance of this
class because this class is going to
contain the event data now look at this
when we raise the event to the even
handler method we have to pass the event
data whether the calendar is visible or
invisible and this class is capable of
holding the data
okay so let's create an instance of this
class before we raise that event
calendar visibility changed eventargs
and I'm going to call that a visibility
visibility changed even data just trying
to give it a meaningful name and then
look at the constructor it takes a
boolean parrot parameter with you know
stating whether the calendar is visible
or not we have just turned the
visibility of the calendar false so I am
going to fall pass falls into that
constructor so what's going to happen
now this object is created and all we
need to do right now is to raise the
event so how do we raise the event what
is the name of the even that we have
created calendar visibility changed
event to raise the event all you do is
you call that calendar visibility
changed even look at the symbol because
the lightning bolt symbol indicating
that it's an event and we are raising
the who is raising this event this user
control is raising calendar user control
is raising this event so
that's descender so that's why I use
this keyword here because this class an
instance of this class will raise the
image for example when I drag and drop
this calendar user control on a web form
we get calendar user control 1 so that's
an instance of this class so basically
this class is raising day you know this
event calendar visibility changed event
so sender will be this class and then
what is the next parameter that we have
to pass the calendar visibility changed
event arguments data even data and we
have a class of that type now it should
be clear now why we have created this
class in step one because when we raise
the event we want to pass the even data
to that event okay so that's the reason
why we have created this class so I'm
going to pass that object to that event
that's it we are actually done okay
but then you know an important thing
there are two things you know to make
this class look much better that we have
to do the first thing is you know you
have to really check if before we raise
the event we have to check if the event
is null or not now now why do we have to
do this null check don't worry about
this we are going to talk about this in
the next video session when we will
discuss about actually consuming this
event on a web form later okay so about
this condition don't really worry so
that's the first change we have to do
another changes we don't want to be
raising events directly like this okay
another better way of raising this event
is actually by using fourth step create
a protected virtual method to raise the
event and I will tell you in a minute
why we have to do that using a method
you know indirectly rather than doing it
directly like this now doing it directly
like this is not wrong but then it will
be much better if we actually created a
create a protected virtual method to
raise that event okay so let's do that
so instead of raising the event like
this directly I'm going to create one
simple protected virtual method within
this calendar user control
so I'm going to call this protected
virtual and it's going to be void and
I'm going to call this method you know
just to be so calendar visibility
changed is the event so I'm going to
call this method on calendar visibility
changed method so that's the name of the
method and this method you know since we
have to pass when we are raising the
event we will pass this event data so
that will be the argument I mean a
parameter that's coming into this method
and you can simply say I see okay so now
this method will take the responsibility
of raising the event so if calendar
visibility changed that's the name of
the event so let me copy that it's a
long name if calendar visibility changed
it's not equal to null okay now again
don't worry why are we checking for this
not as I told you we'll be talking about
that in the next video session when we
actually consume this event and then
what will this do this will just raise
that event so this class is raising the
event so I use this keyword and then we
passed an instance of this whatever
parameter that is coming into this
method okay so I'm going to use this
protected method to raise the event I'll
explain why we are using this method and
not going to do it directly like this in
just a bit okay first let me complete
the implementation so instead of this
line I am just going to call that method
now on calendar visibility changed so
let's go ahead and call that so on
calendar visibility changed all we have
to pass to this now is that if it
visibility changed even data so I'm
going to pass that there and along the
same lines let's copy these lines
whenever the visibility is changed to
true at that point of time
we want to change that to true okay so
whenever the image button is clicked you
know we are raising that event and there
is another case when we have to raise
the image whenever the selection and the
calendar changes you know we retrieve
the selected date populate the textbox
and we are immediately turning the
visibility to false so even in this case
I want to raise that event so I am going
to copy that there and then raise that
event paste it here and as soon as we
turn the visibility to false what we are
doing we are also raising that event so
you're passing in false so that's it we
are done okay now let's understand why
we are doing this why didn't we you know
actually directly raise the event itself
that's because notice the signature of
this method the on calendar visibility
changed method it's a protected virtual
method meaning protected meaning this
method is going to be available for any
class that's going to derive from this
calendar user control and also this
method is marked virtual meaning the
derived class can actually override the
implementation of this method and why is
it important and useful for the derived
classes because let's say I have a class
I'm going to have maybe special calendar
user control class or something like
this public let's call it us let me show
you practically so public class let's
call the special calendar control or
something like that and this one is
going to inherit from that calendar user
control class okay if that's the case
now since this method is a protected
virtual method now this method can be
overridden in this derived class right
so if I just type over right keyword and
then if I select you know whatever is
the method on we should see our method
on calendar visibility change look at
that okay so I'm overriding on calendar
visibility changed method now here look
at this the event in this if I'm using
this
calendar control class anywhere else you
know instead of using calendar user
control now in this class I can you know
the event the visibility calendar
visibility changed event will be raised
only when this line is executed now
before that I can actually do whatever I
want before raising the event I can do
some additional work so that's the
advantage of using a protected virtual
method to raise the event rather than
raising it directly
it makes your derived classes you know
more flexible you can change them the
way you want you can create specialized
versions of this calendar user control
so we are just kind of keeping future in
mind and designing our events that's why
always whenever we raise events we
create a protected virtual method so
that the child classes can do some
additional work before they actually
raise the event okay so that's those are
all the changes that we need to do so
quickly if we quickly recap create this
class which is going to contain our
event data okay and create this delegate
because we hook up even handlers to
events using delegates and what are
events in the first place
events are variables of type delegates
with an email keyword so we need a
delegate to create an email so create
the delegate then create the event and
then use a protected virtual method to
raise the event rather than directly
raising it and we have understood the
reason why we have to do it that way and
finally raise the event itself and how
are we raising that even using that
protected virtual method on calendar
visibility changed so we are calling
that method passing in the event of the
object that's going to contain the event
data with all this let's go ahead and
compile the solution so bill solution
bill succeeded now on my web form I
already have you know the calendar user
control so at this point I should be
able to you know what is the ID of the
calendar user control calendar 1 and
look at this when I put in there and
plus dot we should see the even their
calendar visibility changed even look at
the symbol lightning bolts
well in the next video session we'll
actually discuss about two things you
know what is how to consume this
calendar visibility changed event and
then we'll also understand the reason of
checking for null before raising the
event so if you remember you know
calendar user control in this virtual
method which we are using we are
actually checking if calendar visibility
changed not equal to null only then we
are raising this event okay what would
happen if we don't check for null and
directly raise the event we'll talk
about this in our next video session on
this slide you can find resources for
asp.net c-sharp and sequel server
interview questions that's it for today
thank you for listening have a great day</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>