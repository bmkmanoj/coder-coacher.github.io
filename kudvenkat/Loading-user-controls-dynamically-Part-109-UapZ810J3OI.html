<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Loading user controls dynamically   Part 109 | Coder Coacher - Coaching Coders</title><meta content="Loading user controls dynamically   Part 109 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/kudvenkat/">kudvenkat</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Loading user controls dynamically   Part 109</b></h2><h5 class="post__date">2013-01-05</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/UapZ810J3OI" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello welcome to prism technologies I am
venket this is part one on ion phase
speed or net video series in this video
we'll discuss about loading user
controls dynamic Lane generally we drag
and drop user controls on the waveform
at design time however there could be
several reasons in reality for loading
user controls dynamically for example
depending on the logged in user
preferences like H and the location etc
we may want to load different user
controls and along the same lines based
on admin or non admin users or the rule
they belong to we may want to load
different user controls let's see how to
do that so within this web application
project we have this calendar user
control that we have been working with
in the in the previous sessions of this
video series if you have if you haven't
watched them I'd strongly encourage you
to do so before continuing with the
session so let's see how to load this
user control dynamically okay to load
the user control dynamically there's a
method called load control method which
we can make use of and if you look at
what this method expects it expects but
the path of the control that we want to
load we want to load this calendar user
control which is present in this user
controls folder so let me copy the name
of the control and then the calendar
user control is present in the user
controls folder which is present in the
root directory so I use the till symbol
to indicate the root directory of the
web application project and within that
we have this user controls folder and
within that we have this calendar user
control dot asex
that's what I want to load and then look
at the return type of this load control
it's actually returning a control bag
and that makes sense because this load
control method can be used to load any
type of control okay so now once we get
the control back you know once this
method loads the control what we want to
do we want to add that to this page and
to do that I'm going to use this page
dot controls collection property to the
controls ad and what do we want look at
this it expects a control and this
method is returning a control back so it
gets added now okay now if I run this
application as it stands right now it's
going to throw a runtime exception and
we will see how to solve that a runtime
exception in just a bit look at this it
says control txt date of type text box
must be placed inside a form tag with
run it is equal to server now look at
what's happening what's basically
happening is if you look at this
calendar user control it has a text box
inside that which is an asp.net server
control and it's ID is txt day so it's
trying to add this calendar user control
and within that calendar user control
the first control is the text box and
look at the add this this control of
type text box must be placed inside a
form tag with run at is equal to server
what does that mean so when this control
is now being added to this web form okay
so this Web form for the web form for
door aspx now any asp.net server side
control that must be placed inside this
form tag which has got this attribute
term that is equal to server now for
some reason what happens is when this
you know page load control start add
method is used you know it tries to add
the control to the web form outside of
this form tag and that's the reason why
we get this runtime error okay and to
solve that we can use either a panel
control or a place holder control that
we have now it's also helpful to use
these controls because in reality on
this platform you might have other other
things like maybe you are asking the
person to enter their name age gender
etc and then maybe you're selecting
their date of birth so you'll have other
fields here and after that you want this
calendar user user control to select
their date of birth so if you want to
specify okay at this specific location I
want to load this user control
dynamically then you use a place holder
control there and then to the place
holder control you add that user control
okay so it's going to solve the Trentham
exception that we have just got and it
is also going to tell us where exactly
we want the user control to be laid
loaded okay so let me drag and drop the
place holder control from the tool box
so that's the place holder control that
we want and all I want to do right now
is instead of saying page that control
start add I'm going to say place holder
1 that's the idea of the place holder
so to that add this user control okay so
now let me go ahead and run this and
look at what's going to happen it will
add the control to the web form look at
that I have the user control loaded
dynamically so all you need to do is one
line of code to add the user control
dynamically and look at this I'm able to
select the date okay everything is fine
now let me turn tracing on to this
waveform because if you notice we
haven't assigned an ID to that user
control okay when we drag and drop it at
design time on the waveform you know we
get an ID for that user control calendar
a user control one or something like
that but then since we are generating
this control dynamically let's see what
is the ID that's automatically generated
for that so what I'm going to do is I'm
going to turn tracing on so that we can
see the control tree so I'm going to set
tracing is equal to true now let's go
ahead and run this page and then when
the waveform loads up we should see the
entire control tree collection and we
should see our user control there look
at that inside you know this is the
waveform and inside waveform we have a
placeholder one control and within
placeholder one control look at the ID
that is coming it's saying CTLs zero -
that's the ID which is given to my
calendar user control and let's say it
doesn't make any sense to me I want to
assign my own ID can I do that
absolutely we can do that as well so let
me go ahead and change you know before I
add this control I'm going to take that
and then maybe we can create a control
object reference or because we are
expecting a calendar user control I'm
going to specify you know a variable of
type calendar user control so I'm going
to call this calendar user control C UC
is equal to load the control but then
here we get a type conversion error so I
am going to typecast that to calendar
user control because we are loading this
calendar user control we know that it's
a calendar user control so I am doing
the typecasting and then what will we do
we will assign an ID for this object so
user control dot ID is equal to let's
call this calendar user control one Cu
one for example okay now I want to add
this calendar user control to this
placeholder now let's go ahead and run
this and see the tracing and it should
have given the ID that we have assigned
okay so the meaningful ID see you see
you one okay now let's do one thing
let's say I want to retrieve the value
and print that or maybe on the click of
a button
you know whatever date that you have
selected within that calendar user
control okay
so let's first go ahead drag and drop a
button control onto the webform so I
have an HTML break there and let me drag
and drop a button control or to the
webform and whenever I click this button
control what do I want to do whenever
the user selects like you know date from
the calendar user control I want to
retrieve that date from the calendar
user control now when I select the date
and click this button I want to retrieve
that value and print that on the web
form in reality maybe will retrieve that
and then send it back to the database
you know maybe to a stored procedure to
save it in the database and let me first
turn this trade tracing off because it's
a little annoying there so let me set
that to false and now we want to do that
we want to retrieve the value from that
calendar user control now if we had at
this calendar user control on the
webform at design-time it's very pretty
easy all you do is it will have an ID
maybe calendar use control one dot
selected date property is going to
return as the selected date within that
user control but then now at the design
time on this web form we don't have that
calendar user control that's going to be
generated at run time in the page load
event okay so I want to programmatically
retrieve the value from that calendar
user control so how do I do that now if
you look at this on this web form I have
this placeholder control and to the
placeholder control we are actually
adding this calendar user control so
within the placeholder control whose ID
is one a placeholder one find their
control and what is the ID that we are
expecting see you one
so find a control with ID cu1 okay and
look at this fine control method again
this method is going to return a control
back but what are we expecting back
we are expecting a calendar user control
back so I'm going to typecast that to be
of type calendar user control and then
all we need to do is we know that
calendar user control has got select a
date property we want to retrieve that
selected date property which is of type
string and print that on the web form so
response dot write whatever date we are
retrieving out of the calendar I mean
that the user has selected we are
retrieving that and printing it okay so
let me go ahead and run this and we
should be able to select the date print
it on the web form and we click that
button so I have this 15th of January
selected I click this button look at
that and look at this you know the the
control is retaining it its value on
post back as well I click the button I
am able to retain the value on post back
as well because this is a dynamically
loaded control and that when I am
loading that within the page load event
okay
now most of the internet article states
that for the dynamically created
controls to maintain their view state
across post back you know the control
should be loaded in page initialization
event of the waveform but however we
have just seen that we have loaded this
user control dynamically in the page
load but I am still able to retain its
state across post back and you have just
seen that look at that I have selected
that value I click this button and it's
still retaining its value okay now we
know that this user control also
supports events if you also want to wire
up programmatically the events of this
control you know you can do that as well
before actually adding the control okay
so if you remember from the previous
sessions of this video series this user
control supports you know date selected
event so see you see so let's say I want
to fire up you know associated and even
handler to this event how do we do that
we use plus equals and we are going to
generate that even handler and let's say
whenever a date is selected I want to
print that date out so response to try
it so we have that e
select a date and we want to convert
that to a short date string I am able to
do that there okay and similarly if I
want to wire up maybe calendar
visibility changed event again that's a
custom even that we have created in the
previous session how do we do that see
you see dot what is the name of the
event calendar visibility changed plus
equals and that's going to generate
another even handler method and let's go
ahead and hook that up as well so
protected okay so I want to print a
message here saying response dot right
calendar visible is equal to if it's
visible you know maybe it prints true
otherwise it will print false okay so we
have the events also associated with
this calendar user control so let's go
ahead and run this and look at this as
soon as I change the visibility of the
calendar you see that the visibility is
true visibility is false and as soon as
I select a date that date is also
printed and if you want this output in
separate lines properly formatted just
append and HTML break but in reality
what we will actually do will actually
retrieve those values and send it to
extrude procedure maybe to save it in
the database or to a printer to print
them
okay so now look we should have actually
done that here I selected the date look
at that date and whether the calendar is
visible or not so in this session we
have seen how to load dynamically the
user controls and how to preserve the
state I mean the dev state is also
preserved at cross-post bad okay in the
next video session we'll discuss about
loading the standard asp.net controls
dynamically in fact we'll discuss about
adding these controls in a postback
event you know maybe we'll discuss about
a simple real time example because there
a lot of people has asked me if I add
control dynamically on the click of a
button then how do I retain its state
and how do I make it properly visible
upon a postback we're going to discuss
about that in the next video session on
this slide you can find resources for
asp.net c-sharp and sequel server
interview questions that's it for today
thank you for listening have a great day</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>