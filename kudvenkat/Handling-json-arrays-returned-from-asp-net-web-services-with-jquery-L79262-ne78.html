<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Handling json arrays returned from asp net web services with jquery | Coder Coacher - Coaching Coders</title><meta content="Handling json arrays returned from asp net web services with jquery - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/kudvenkat/">kudvenkat</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Handling json arrays returned from asp net web services with jquery</b></h2><h5 class="post__date">2015-06-08</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/L79262-ne78" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">this is part 63 of jQuery tutorial in
this video we'll discuss how to handle a
JSON array return from an asp.net web
service using jQuery here is what we
want to achieve when we click this part
and get all employees we want to
retrieve all the employees from the
database table TBL employee and display
them in a table as you can see here this
is the same example that we worked with
in the previous video session at the
moment this example retrieves a
particular employee and displays that
employee details in a table
now instead of retrieving a single
employee we want to retrieve all the
employees in order to achieve that we
need to modify both the employee web
service and the jQuery code itself so
first let's look at the changes that we
need to make to the employee web service
so this employee web service has got
this function get employee by ID to this
function we pass the ID of the employee
whose details we need so this function
is going to retrieve that employee from
the database serialize that employee to
e JSON string and write that to the
current response stream now instead of
retrieving a single employee we want to
retrieve all the employees and to do
that the first thing I am going to do
here is change the name of this function
to get all employees and since we are
going to get all the employees we don't
have to pass any specific employee ID so
we can remove this parameter and here
I'm going to create a list of employee
object and let's call this variable list
employees equals new list of employee
this list class is present in a
different namespace so let's go ahead
and bring in system dot collections dot
generic namespace and if you look at the
sequel command at the moment we are
using a stored procedure so what is the
stored procedure going to do it's going
to retrieve a specific employee but
that's not what we want we want to
retrieve all the employees so I'm going
to include a select query here select
star from TBL employee
so this query is going to retrieve all
the employees from TBL employee table
now this is a select query it's not a
stored procedure so we can get rid of
this line from here and we don't have to
pass any parameter to this query so we
can get rid of this sequel parameter
code as well so this is the command that
we want to execute which is going to
retrieve all the employees open the
connection execute the command and while
we are reading each row what we want to
do is create an employee object and
populate id name gender and salary
properties of that employee object and
once we have populated all the
properties add this employee object to
this list so list employees dot add the
employee object that we have just
initialized and finally what we want to
do is serialize that list of employees
to a JSON array and then write that JSON
array to the current response stream so
that is the modification for our web
service so let's go ahead and below our
solution so now this employee web
service should be returning a JSON array
which contains all our employees so
let's click on the scheduled employees
let's invoke that and notice what we are
getting back we are getting a JSON array
back which contains all the employees
now and the important thing to keep in
mind here is that notice that it didn't
attach that D property which by default
in asp.net web service appends to the
JSON object it returns all right so we
have the JSON array now all that is left
is to call this web service and consume
this JSON array using jQuery code so the
first thing that we have to do is change
the HTML of this page so it looks like
this and in the interest of time I have
already typed the required HTML so let's
copy this and pay
state within the body section of our
HTML page one dot HTML so what do we
have here so the first element here is a
button element the idea of the button is
PT and get all employees and then we
have a table so if we view this HTML in
the browser this is how it looks like we
have a button and a table with just a
header and if you look at the table HTML
it's straightforward we have given this
table an ID TBL employee and it has got
T head and T body sections within T body
section we don't have anything within T
had we have ID name gender and salary
columns all right
now what we want to do is call the web
service using this jQuery code and then
we want to loop through each employee
object that is presented in the JSON
array and then build a table row and
append that table row to this T body
section all right so let's look at the
change that we need to do to this jQuery
code first of all the button ID that we
have here is BTN get all employees so
when we click the button that's when we
want to call the web service so let's
change the ID of the button here to PT
and get all employees so when we click
that we want to execute this code now we
are not going to send any specific
employee ID so we can get rid of this
line from here so here we are using the
Ajax function to call the employee web
service within this employee web service
we don't have this gate employee by ID
function anymore instead we have this
function get all employees so let's
change the name of the function here to
get all employees and now we are not
passing any data to this web service so
we can get rid of this data option and
the type of data that we are expecting
back from the server is JSON data and we
are going to issue a post request and
this is the function that gets called
when the request completes successfully
and what gets passed
to the success callback function is that
JSON array that we have seen so this is
a JSON array now now what we want to do
is loop through each employee object
within that JSON array retrieve ID name
gender and celery property values and
build a table row and append that to
this tea body section of this tea bill
employee table so let's go ahead and
find this table by ID so what I'm going
to do here within the success callback
function is create a variable let's call
this employee table and that is equal to
let's use the ID selector and find the
employee table the ID of the employee
table is TBL employee and within that
employee table we've got tea body
section to which we want to append the
rules that we are going to dynamically
construct all right now we know that
this data is a JSON array so I'm going
to loop through each employee object
using jQuery each function so this each
function is going to have two parameters
the index of the employee object in the
array and the employee object itself so
as we are looping through now the next
step is to append a tabled row that we
are going to dynamically construct to
this employee table so employee table
dot append so what do we want to append
we want to append at TR and that P I is
going to contain at TD and within the
first TD what do we want to display we
want to display the ID of the employee
and to get the ID of the employee we can
use this employee object and remember
you know the JSON array that is returned
from the web service does not have that
D property so if you want to retrieve
the ID property value you can simply use
employee dot ID and we want to close
this TD and open a new TD element so
close the TD
and open another TD and now what we want
now we want to append the employee name
so EMP dot name and we want to close
that TD and open another TD that's
actually copy this and now we want the
employee gender and the same idea close
the TD open another TD and finally we
want EMP dot celery and finally close
the TD and close the TR
that's it so it's going to loop through
each employee construct a table row and
then append that to the employee table
all right so let's save the changes
let's go ahead and reload this page and
when we click get all employees notice
that we get all the employees from the
table now if we click get all employees
again look at that every time we click
get all employees it happens you know
the retrieved rows to the existing table
now we don't want that to be happening
we want to clear the table before we add
the rows again to the table and to empty
the table what you can do is we have
this empty function so simply call empty
function it's going to clear all the
existing rows so let's save the changes
reload this page and now look at this
first time you click you get all the
rows you click it again it's going to
clear the existing rows and then
retrieve them and display them again ok
so now no matter how many times you
click we only have one set of rows
appended to the table so here is the
modification that we did to the employee
web service and the modification that we
did for the jQuery code that's it for
today thank you for listening and have a
great day</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>