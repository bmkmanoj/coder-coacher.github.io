<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Part 22   Configure WCF service endpoint dynamically in code | Coder Coacher - Coaching Coders</title><meta content="Part 22   Configure WCF service endpoint dynamically in code - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/kudvenkat/">kudvenkat</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Part 22   Configure WCF service endpoint dynamically in code</b></h2><h5 class="post__date">2014-02-01</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/KPndxApILA0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">this part 22 of the VFC video series in
this video we'll discuss configuring WCF
service endpoint dynamically in code
this is continuation to part 21 so
please watch for 21 before proceeding we
can configure an endpoint for the WC of
servers in two ways we can do that
either declaratively using the
configuration file or dynamically in
code first let's look at configuring the
endpoint declaratively using the
configuration file so here is a snippet
from the configuration file we'll be
working with the same example that we
worked with in the previous session of
this video series so here we have you
know the hello service that we have been
working with and here is the
configuration file for that service so
basically first we have a service
behavior here where we are enabling
service metadata exchange so we are
enabling service metadata exchange
because we want the clients to be able
to generate proxy classes automatically
using this service metadata and then if
you notice the service itself here we
are exposing one endpoint so the service
is available at this address using this
binding and the service has implemented
this contract I holo service so
basically here we have specified the
configuration declaratively within the
config file so let's go ahead and run
this service so the service host is
running let's go ahead and run the
client and see if the service is working
as expected so let's pass a message
so we should get back hallo pledge M if
everything is working fine so there we
go
alright so we have seen you know how to
specify an end point declaratively
within the config file all right now
let's look at configuring the service
endpoint dynamically in code you know
there are two steps to do this first we
need to delete you know the
configuration from the config file
itself because we are going to do that
dynamically in code so first let's go
ahead and get rid of you know the
sections that we don't need within the
config file okay so the first thing is
get rid of this behavior because we are
going to specify that within code okay
so let's flip to the service itself so
I'm going to get rid of this behavior
and then since we have gotten rid of the
behavior you know we don't need this
behavior configuration attribute as well
so let's go and delete that and then we
are going to specify the endpoint also
programmatically within code so let's
get rid of this endpoint but we are
going to leave the base address there
okay right now let's go to the program
dot CS file and and you know both the
configuration file and this program dot
CS file they are present within this
hello service host which is a console
application so within program dot C is
file and at the moment here we are
building the service host and then we
are opening the you know the host
basically which opens up the channels to
communication with clients okay but
before that we need to add the endpoint
and the service behavior to enable
metadata exchange and in order to do
that that's going to be our second step
so they're going to create an instance
of service metadata behavior class and
we are going to set this property HTTP
GET enable to true and then we are going
to pass that object you know to this add
method which is going to add that
behavior to the behaviors collection
property okay so let's go ahead and
create an instance of service metadata
behavior so within our hollow service
let's create an instance of server
metadata behavior and this class is
present in a different namespace so
let's go ahead and bring that namespace
in system door service model door
description and let's call this this
metadata behavior and then let's set
HTTP GET enabled property so HTTP GET
enabled equals true that's a boolean
property so we're going to set that to
true and then we need to pass this to
the add method so this host object has
got description property and then which
has got behaviors collection property
and to this we are going to pass service
metadata behavior object that we have
just constructed and then we also need
to add the service endpoint so host dot
add service endpoint and obviously when
we add a service endpoint you know we
need to specify basically the contract
that the service has implemented another
binding that we want to use and the
address of the service so let's go and
do that so within the service and we are
going to make use of you know this
constructor of the add service endpoint
method basically this overloaded version
I mean so let's go ahead and specify the
implemented contract the implemented
contract is hello service dot I holo
service that's the contract and then the
next parameter is the binding so we want
to use net TCP binding and this binding
is present in a different namespace
we need to you know type in the casing
correct correct as far I mean the
uppercase or lowercase letters otherwise
Visual Studio will not be able to
suggest the namespace that this binding
is present in so we need a capital
letter n there and then when you press
control dot it will show you the
space that class is present in so it's
present in system rot service model
namespace so let's go to and bring that
in so we want to use TCP binding and the
third parameter is where is the service
available the service is going to be
available at hallow service address so
here again we are specifying just the
relative address so you know basically
this the fully qualified address of this
service is going to be you know net or
TCP colon four slash four slash
localhost colon 1890 /hello service okay
so that's all there to it now let's go
ahead and close the client which is
running let's go ahead and run our
service watch but before we do that we
need to close the service host instance
that's already running so let's run the
service host so host started now let's
go ahead and run the client and let's
pass protein that's the name get message
look at that it's working as expected so
very simple we can either add a service
endpoint declaratively within the
configuration file or dynamically within
code that's it for today thank you for
listening have a great day</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>