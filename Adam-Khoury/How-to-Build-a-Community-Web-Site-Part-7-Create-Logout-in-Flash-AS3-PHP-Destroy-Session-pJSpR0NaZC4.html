<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>How to Build a Community Web Site Part 7 - Create Logout in Flash AS3 &amp; PHP Destroy Session | Coder Coacher - Coaching Coders</title><meta content="How to Build a Community Web Site Part 7 - Create Logout in Flash AS3 &amp; PHP Destroy Session - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Adam-Khoury/">Adam Khoury</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>How to Build a Community Web Site Part 7 - Create Logout in Flash AS3 &amp; PHP Destroy Session</b></h2><h5 class="post__date">2009-03-30</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/pJSpR0NaZC4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello and welcome to part 7 of building
a dynamic web community using PHP MySQL
and flash created by flash building and
brought to you by developed PHP calm and
in part 6 we left off we had created our
our header file to be dynamic and it
snaps to different frames whether the
user according to whether the user is
logged in or not so if the users logged
in it snaps to frame three well first
frame it does a check to see if they
logged in it's a little script and runs
a split second and then if they're
logged in it snaps to frame three if
they're not logged in and snaps to frame
two shows them the login form there and
on frame 3 we have three special buttons
for them and will probably be adding a
couple more later and if we have to I'll
show you how we add them in but right
now we have to just put the
functionality for those three buttons on
frame three so all we had was a stop
action on this frame three when we last
left off so we need the functionality
for the view profile page to come up
edit profile page to come up and the
logout mechanism so the logout mechanism
will not bring up a new a new PHP or
HTML page it's just going to run a
script it's going to connect to a PHP
script and then it's going to
communicate back to flash to refresh the
browser and log the user out or log the
user out then refresh the browser so
let's look at the code for that so log
the user out we're going to set up the
URL variables a variable name for the
URL variables of log out bars we're
setting this up similar to the to call
so PHP that we made here
there's that first call and here's the
second call when they try and login and
now here's the third call I'm going to
send the call out to PHP once more and
we set add an event listener for the
complete function on that so when the
data comes back from the from the PHP
file it will communicate back to the
script and when the user presses the
logout button here's the event listener
for that see logout button you can see
our log out button has an instance name
here I've log out underscore BTN so in
the script we say log out underscore BTN
we add the event listener to it the
click function and it has a function
that is going to fire off of log user
out and that is sitting right here so up
here we just claim some variables and
event listeners then here we have one
function and here we have the complete
function so this is the first function
that runs when they press the button and
this is the function that runs after the
this script communicates with our PHP
script so when they press the button
we're going to send the variable
postcode of log out to our script and
then we're going to send these this
variable vlog out along with the
claiming the URL we're going to send it
to and the URL is going to be this file
here it's called logout PHP let's go
ahead and file save as web intersect the
root directory in our scripts folder as
logout right there with the login script
so save that PHP file here
no update on links because there's no
links in this file so first thing we do
in this PHP file so this is the PHP file
that that script in flash is going to
communicate with so first thing we do is
claim session start to access any
session variables that might be present
for that user and here we say we're
running an if conditional statement to
see if the postcode coming from flash
equals log out and if it doesn't then
this these sessions won't be destroyed
the session variables so running this
line right here so we'll say if the
postcode equals log out which it should
we destroy the session variables and
it's very simple to do that using this
one little line and you can check out
what this method and function does at
PHP net and they have some documentation
on how you should use this and it might
differ from what I'm showing you here
but you'll see in just a second I'll
prove to you that it works and the rest
of the functionality of this script is
very simple after the first if
conditional statement that will destroy
the session variables we set up another
if an else condition statement that will
check to see if the session ID the
session and ID variable is still set if
the session ID variable is still set we
print reply message of failure if
session ID variable is not set then we
replant we reply with the message of
success back to the flash file and the !
here or the ! just claims is not so if
is not session is registered ID print
reply message of success because we
don't want the session to be registered
anymore because we would have destroyed
it here and if it didn't get destroyed
and the session is still set
for the user in this login session then
we reap limp we print a reply message of
failure back to flash so here you can
see in the on complete function of the
logout mechanism we listen to the event
that target reply message of success and
if it is we refresh this page using the
JavaScript best method I showed you
which needs nothing more than this line
here nothing in your HTML page don't
worry about that this will refresh the
page that I checked in all major
browsers and it works so once they press
the logout button if all is good they
get logged out we destroy the session
variables then this page refreshes
itself to show them the site as a non
logged in user would see it whichever
page they happen to be on so say they're
on the site let's go ahead and login and
i already ftp the logout file up so Adam
and then put our password login
okay so now we're logged in says web
intersect Adam gives me my three magic
buttons for that the logged in user
would see and you can see these are not
active yet let's see if our new header
functionality works so when I press this
button it's going to call out to that
log out PHP script and then the PHP
script is going to communicate back to
the flash file and let's see if it
refreshes the page and indeed logs us
out there it is and it works you're not
allowed out sorry we're not we are now
logged out and we have the header is now
showing us the login form again because
the site senses that we are now logged
out so it's going to show us everything
as the logged out user would see it and
the login user they see different things
it's very simple the way this works and
so we have our log out that PHP script
which goes in the scripts directory of
our site and we have our new
functionality and our flash header and
this is sitting on the key frame that
corresponds to the logout button right
here's our logout script now when I in
the next set of tutorial I'll be making
the edit profile page and the view
profile page we'll just go ahead and
knock out these three these three
buttons so we can get this head or
functionality finished so once we have
the page instead of just calling out to
a script these two buttons are going to
call out to open a new URL so we're
going to send them to a new webpage
where different things are going to be
shown and they can view their profile if
they click that URL and they can edit
the profile if they click that URL it's
that simple so we'll see you in part 8
where we'll continue on down the line
not going to sting out phase by phase
and I'll update the zip package to
include this log out functionality after
I get this video up and everything so if
you guys want to get the source package
again
that has the logout function now you can
or you can just wait till I add a few
more things all right we'll see you next
lesson</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>