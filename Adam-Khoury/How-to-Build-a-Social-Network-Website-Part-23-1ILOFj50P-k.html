<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>How to Build a Social Network Website Part 23 | Coder Coacher - Coaching Coders</title><meta content="How to Build a Social Network Website Part 23 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Adam-Khoury/">Adam Khoury</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>How to Build a Social Network Website Part 23</b></h2><h5 class="post__date">2009-06-13</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/1ILOFj50P-k" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello and welcome to part 8340 to of web
intersect where we're learning how to
build a really complex social networking
website this is part 9 billion 432
million eight hundred and thirty
thousand and 452 part okay when we last
left off we had created a page called
edit settings that PHP here and that
page you're going to put all of the
things and like the private settings for
everyone's account so in my edit
settings page I'm going to have change
password and delete account just to
start off with so what's going to happen
is when they put it in their current
password and their new password and what
I'm going to show you in this lesson is
how to parse this out after they put in
the current password then they create
new password and confirm their new
password that they want to create they
press change password it will go to a
script called edit settings parse and if
you look at the code here and
dreamweaver form action edit settings
parts so when they press the submit
button down here it's going to go to
edit settings parts and send all of this
form data to edit settings parts so we
can pick it up parse it out to the
database and then give them a display
message on message to user PHP that
Universal page that just shows the user
a message that we want we'll send them a
message saying your account settings
have been updated click here and which
will send them maybe to the profile or
maybe back to the Edit settings page or
the edit profile page and on edit
profile I added the link right here
which this link has been here for a
while but I made it active now and in
the code view you can see edit account
settings that link goes to edit settings
that PHP which is this page here lets
them change their password yada yada
yada yada so that's pretty much the
summary of how
it will work and now I'm going to show
you how to do it so let's file new
create a new PHP page and go to the code
view zap all of this stuff out of here
because we don't need it this page is
going to be all PHP script and no HTML
so we'll start our PHP block or if
you're in Dreamweaver you could actually
go up to here if you're in Dreamweaver
cs4 and you can insert your PHP some
common commonly used PHP items using
these buttons up here and experiment
with them to see what it gives you
there's all kind of stuff for cookies
and session all kind of neat stuff but
I'm just going to put in a PHP block and
inside the first block we're going to
make sure they're logged in so we can go
to the Edit settings page to the code
view and just borrow that code here and
remember login check right there session
pop it right in so if they are not
logged in as a logged-in user with a
session then we exit the script send
them the message to use and tell them
only site members can do that blah blah
blah and let's go ahead and file save
this file as hmm let's save this as when
the webinar said route ok this is edit
settings parse
underscore parse well that's all messed
up edit settings parts
okay so all we have to do now is pick up
the variables when they come in so we're
going to create an if conditional here
to pick up that certain set we're going
to make this script look for certain
sets of information coming in that way
it doesn't have to parse out a huge
scripta to just parse it out in sections
like we've been doing kind of all
through the lesson and some of our
parsing scripts so we'll say if
right here could we have a hidden
variable of name is parse and the values
past change it's good we can use that
edit settings for us if post I'm a
Scorpio is T and this is going to be the
variable coming from that form that
hidden variable that we just looked at
and it's going to be named parse so
we're going to say if the posted
variable parts is equal to pass change
grab that with ctrl C pass change so if
posted variable parts coming from the
form is equals past change we're going
to run this section of code everything
that's in between this little nest here
so in this section the first thing we
want to do is gather the posted
variables from the form ok so we're
gathering the current password whatever
they typed in let me show you here in
split view this one is named current
pass this one is named new pass one this
one is named new pass to so when those
when the person clicks change password
those three variables we're going to be
sent to this edit parse and it's going
to we're going to gather them right here
perma-pass new pass one new pass to and
put them in local variables right there
to work with them easier so basically
you're just taking the posted variable
and kind of transforming it into a local
variable in PHP so you can work with a
little more easily and we're also want
to gather the session ID number for this
user who's logged in so you can say here
mem let's just
ID ID equals session ID so this will be
for this logged in member we grabbed
their session ID okay now that we have
the three pieces of data that we need
coming from that form which is their
current password their new password and
they're confirmed password confirm new
password and their session ID we also
need that we're going to pop in the
script that's going to take care of
changing their password and checking a
couple things and then I'm going to walk
you through it line by line so right
here line 17 I'm going to pop it in and
it extends to line 44 so right there 17
244 is what I just put in right there so
the first section of it is if the new
password does not equal confirm password
we give them a message to user create
new password and confirm new password
did not match let me exit the script
send them to the message to user dot PHP
page also is the link in there to edit
settings that PHP so they can try again
and so if they do match we continue on
so content after that we're going to
connect to the database because we're
going to have to run a couple of queries
we don't have to worry about cleansing
this data this input too much because
it's going to be hashed up right here
we're going to hash it up so we can
check it against what's in the database
so the hash the current pass in this
line and we hash a new paths in this
line so with the hash current pass we do
a MySQL query so we select all from my
members where ID equals this members ID
and password equals the hashed current
pass we should get a result of one from
this query so right here we put that
result in this variable so in this
condition right here we can say if that
result is not equal to one or my
condition is
if that variable is greater than zero
then we can do what we need to do
because all would be good so you can
write this a couple of different ways
but basically if this is supposed to
equal a 1 if everything is right then
this will will match this this condition
right here will be true because past
numb check will be greater than 0
because it will be a 1 so we run the
MySQL update my members set password to
the hash new pass and that's what
changes their password right there that
line that actually performs the password
change in the database and we give them
a message your password has been changed
successfully click here to go to your
profile and we exit the script and then
this last little section this else
condition part of the condition would be
given to them if this past numb check
was not greater than zero or was yeah it
was not greater than zero if it's equal
to zero if we got a result from this
line of 0 then this condition wouldn't
be met here would be false so this else
would run we say your current password
did not match what we have on file so
here when they type in their current
password if that doesn't match what
their current password actually is then
we can't change their password because
something's screwy there they don't even
know what their current password is then
they should run the forgot your password
script which I'll be showing you guys
very soon actually but that's everything
that will effectively change the
password we're going to test it out
right now let's ftp edit settings parse
edit settings
and edit profile so here I am a web
intersect at my profile I'll go to edit
profile and now we should have a new
link here says edit account settings
let's go to that type in my current
password my new password and then
confirm my new password see if it works
your password has been changed
successfully click here to go to your
profile let's go to edit profile again
edit account settings let's put a
password and that's not my current
password
see what happens
your current password did not match what
we have on file so you can see
everything's working just dandy so that
concludes this part and in the next part
we're going to show you how to on that
same script the Edit settings where are
we edit settings page right under the
change of password here we're going to
have a little form for deleting their
account so somebody can completely
delete their account and get out of
Dodge all right we'll see you in the
next lesson</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>