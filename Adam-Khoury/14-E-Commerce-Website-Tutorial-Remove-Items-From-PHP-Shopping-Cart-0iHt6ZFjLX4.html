<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>14. E - Commerce Website Tutorial - Remove Items From PHP Shopping Cart | Coder Coacher - Coaching Coders</title><meta content="14. E - Commerce Website Tutorial - Remove Items From PHP Shopping Cart - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Adam-Khoury/">Adam Khoury</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>14. E - Commerce Website Tutorial - Remove Items From PHP Shopping Cart</b></h2><h5 class="post__date">2011-01-13</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/0iHt6ZFjLX4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">how do you do everybody Adam here and
we're continuing on with our e-commerce
website building lesson series there's
no time to waste so let's get right back
to it when we last left off we were
about to put in our remove links we just
have to make sure we send this array
items variable index variable to the
card script so it knows which thing that
we want to remove so whether you use a
URL variable and a regular link or if
you make this into a little form where
that's an actual button with an X on it
or the word removed either way you can
send this cart dot PHP script the very
variable that's going to be this items
array index the index within the array
where this item is housed so once it's
clicked you send that variable to the
script the script will know exactly
which one you want to remove and then we
can program the removal so here we are
in Dreamweaver and I'm going to open up
section 3 expand that code out this is
the section that renders the card for
the user to view on page alright within
this TD make these single quotes and
actually I'm going to make all of these
single quotes just because if I happen
to put any HTML tags in there I want to
make sure that I don't have to keep
escaping double quotes within my HTML
because you know how HTML tags you have
a lot of attributes and values and many
times those attributes and values by
default are encapsulated with double
quotes so you can change all of these to
single quotes just as long as you make
sure you change all of them that way
things process correctly and even this
one where I'm escaping all that crap I
don't really like that too much but I
just wanted to show you guys different
ways you can render out your HTML
through PHP so since I've given these
all single quotes now I've just go
through here and make sure I remove all
these back slashes before those double
quotes that we were escaping before
now that we're rendering using single
quote encapsulation we don't have to
escape all of those double quotes which
i think is a much cleaner way to go the
only reason I use the double quotes and
showed you how to escape the double
quotes when we start it off was to let
you know there's different ways you can
do it now if you're going to encapsulate
with single quotes and not escape your
double quotes within your string what
you have to do is do the old single
quote space period space space period
space single quote you have to wrap up
each variable just like that if you
didn't what would show on the page is
the dollar sign and variable name it
will not render the variable instead it
will render the variable name and the
dollar sign you don't want that so you
have to do this through here to all the
variables which is I think a much
cleaner way to get your rendering if
you're using HTML single quote space dot
space right here we want dot space
single quote and that's all the
variables in that string you see all the
variables in that string we encapsulate
them in single quotes and we use the
period to append them to the string okay
so with this set up everything will
display just like it was before no
difference now I'm going to show you why
I did that
right here in the TD tag where these X's
I'm going to put in a form tag action is
going to be cart PHP it's going to be
post method okie dokie now let's just
remove this X all together because we're
going to add it using a button now so
you go up to button click that make sure
you put it inside your form type is
going to be submitted make sure you use
type submit or it might not submit your
form when they press it okay so the
input name when this can be my button or
you can make it
to leave BTN and then right there put
the variable for this item ID this way
you won't get any conflicts if you use
name or ID so what's going to happen is
it's going to be each item in the list
will have its own little form for
deleting the item and its name for the
input button in that form will be delete
BTN and whatever whatever the item ID is
for that item which is all going to be
unique because each item is unique in
the database that means we won't have
any conflicts or page errors you might
get some validation errors if you have
the same name or ID for your input
button I'm not sure about the name I
think you can have duplicate names on
the page and still get it validated but
I know the ID definitely has to be
unique but I'm just going to make the
name unique as well just to be extra
sure now we need a hidden variable in
this form this delete button needs to
have a value so let's type that in value
equals double quote double quote and
inside your double quotes I'm just going
to put X now all we need in this form to
finish it is a hidden variable which is
this guy right here
a hidden field sorry which is going to
send a hidden variable when the form is
submitted this name is going to be item
to remove all right let's make it ID to
remove that makes more sense value let's
just put a xxx right there or something
so right there with the triple X's or
wherever you put that default value
you're going to make that dynamic and
the value has to be this items index so
we can use this eye we might have to
adjust the math on the eye but we'll see
single quote space duck space variable
space duck space single quote so right
there the value will hold this items
index within the array that is the cart
and that will be unique as well each
item in the cart has a unique index in
your multi-dimensional array and each
item in the cart also has a unique
but if you really want it the easiest
way to target an array that's within
your multi-dimensional array it's best
to use the array index that's coming
through this loop now please keep in
mind I have not tested this yet so I
might need to adjust the math on this I
variable if we notice that it's not
removing the correct item if it's not
targeting the correct
array index and we want to make sure it
does actually I can see a little problem
that we're going to have already and
we're going to need to change just a
couple of things first of all see this I
plus plus in the first part of the for
each loop let's put it at the very
bottom of the for each loop right there
so now the index is going to iterate at
the bottom of the loop that means the
first item will be a zero so that means
we have to change this section one but
expand the code here in section one you
see when we started the array we force
the first index to be one make that a
zero now because at this point we don't
really need that to be a 1 it can start
at zero like a normal array would so the
reason why I'm doing that is let me
collapse that back up
okay so you see what I did I just move
the I plus plus down to the bottom of
the for each loop that way it will
iterate the indexes after they come
through the loop so the first one in the
loop will be a zero because I is equal
to zero here so in the loop this I will
represent a zero for the first item the
first pass in the loop the second item
in the cart that pass this I will become
a one because we're now running I plus
plus at the bottom of the loop when we
were running it at the top of the loop
it was making the first item have an
index of 1 instead of zero so I thought
we would be cool having our
multi-dimensional array starting with an
index of 1 but it's really best to have
it start with an index of 0 and then
process everything that way because when
we add our new code here to make the
items let's collapse this when we add
our new code here to make the item
delete or remove from the cart we're
going to use the sort function which is
in the array family of functions and
that will sort an array for you but what
happens is when you use sort even if you
start your indexes at one initially when
you create your multi-dimensional array
what happens is your indices array
pointer will start at 0 for this to keep
things simple I want to use the sort
function so in order to use the sort
function that we know will rearrange the
whole array to have a starting index of
zero we have to make sure our array
started like that originally so that's
why I went in and changed the in section
one I change the array to start with an
index of zero and I put the I plus plus
at the bottom of the for each loop now
I'm going to pop in the code right here
above section three so let's make
section three now section four and
there's no one I'm going to put in let's
pop in
section three you can see we have a new
section three now which handles deleting
or removing the item from the array and
you can see here I have that sort
function I was talking about now let me
quickly explain this code to you and how
everything's
working now this is the very exact
reason that I have not given out the
source code and I'm not going to give
out the source code until I finish all
the lessons in the series because you
can see I just went in and changed a few
things and now let me explain it but I
just wanted to let you guys know that
that's the main reason I haven't been
giving the source code as we're going
because it doesn't make any sense to do
that because I'm building this thing in
real time okay let me explain what's
going on here and I will expand this
section for again remember in the form
to remove the item we're sending the
hidden value of this array index the
only reason you see item ID there is to
make this delete BTN be unique and
that's a way you can make it to where a
forms name or ID isn't going to be
duplicated many times on the page which
might cause validation errors so
whenever when that form button gets
pushed this index array pointer is going
to be sent to this piece of code here so
the first line actually all of the code
is wrapped in this if condition and what
this if condition states is if is set
the post variable of index to remove and
post index to remove is not equal
nothing then we can process the removal
functionality and this right here is
your removal functionality now let me
explain this to you
I'll make sure i zoom when zoom in on
this code real well first thing we do is
take the posted variable from the little
button they press to remove the item
posted variable is going to hold that
array index for that item so we make a
local PHP variable called key to remove
we're going to remove that specific key
from the multi-dimensional array so what
this does this will target one of the
associative arrays that is a card item
within your multi-dimensional array this
echo you do not need that I had that
there for testing
and this echo you don't need either
alright so after we access that variable
that post variable and we put it into a
local PHP variable we then check to see
if the count of the session card array
is less than or equal to one so if it's
a one or a zero you just want to unset
the whole cart array else if there's
more than one item say you have two
items in your cart you want to unset the
cart array specific key that makes sense
so you're removing that specific index
which is a key inside of the
multi-dimensional array and that key
corresponds to that cart item now once
you unset one of the items in the cart
you have to sort the whole
multi-dimensional array because say you
have item 0 1 2 3 in your cart that
means you have 4 items in the cart 0 1 2
&amp;amp; 3 4 associative arrays the first one
starts with an index of 0 and the next
one is 1 the next one is 2 the next one
is 3 so say you delete or remove the
item that is index 2 that means your
array right when you unset it that means
your array will be 0 1 and it will skip
the 2 and it'll have the next one will
be 3 but there's only three items in the
cart and if there's only 3 items in the
cart your array should read your array
key or indexes should read 0 1 to sort
will do that for you
it will reorganize everything and start
everything from an index of 0 again and
if there happened to be a number an
index number that got removed from the
cart it will resort them all to be all
in a row again starting from 0 that way
things don't foul up for us so that's it
that's basically how that code works is
not many lines of code and it's a very
simple way to let them remove items from
the card so I can get that up let's
collapse this code back up so now you
have four sections there within your
card PHP I'm going to FTP this and
sure it works okay so I have the new
version of card PHP up I'm going to add
the black hat I'm just going to go and
add a few things to it purple shirt and
there we go
so there's all six items in there that I
currently have access to put into my
cart now let's put this purple hat in
there twice just for good measure
okie dokie now let's say I want to
remove the purple hat you see how it has
an index of three in the array I'm going
to remove the purple hat by pressing
this X button and now you see what
happens the purple hat is gone and its
index was replaced so now the purple
jeans have an array index of three if I
remove the black hat the black jeans
should be assigned array index of zero
so let me remove the black hat and we'll
see the black jeans gets an array index
of zero you see so the sort function
that we used in the delete in the remove
area in the code that removes the card
item that sort function is in the array
family of functions and it's used to
basically just sort an array that way
all of your index numbers are keeping in
a nice row and there's no skipping of
numbers there so that's pretty much it I
can go through and remove any items I
want when it's empty it says your
shopping carts empty already so let's
put this black hat back in really the
last thing we have to do for the cart
functionality is make this quantity
number a form also and I'll show you
that in part 15 and the code you can go
into section 4 and you see here where we
have cart total you can put that into a
div so right here let's just pop in a
div align it
to the right so what I'm doing now is
I'm putting this cart total I'm going to
put it right under here I'm also going
to remove that number from above the X
button the remove button because we
don't really need that anymore because
we tested everything's cool so right
there is that number I'm going to remove
that don't need it I'm also going to get
this div closed up here in the end now
let's make sure that renders right under
the cart I'm going to go into design
view I'm going to take this PHP block
the code view I'll take that PHP block
control X and I'm going to put it right
under the table see if that works okay
so you see what that did and I can
adjust the size on that very easily and
so can you
using simple HTML or CSS ok so stay
tuned for part 15 where we're going to
finish up the carts functionality by
making the quantity adjusters work for
each item and then after that what we
have to do is look into the PayPal
payment gateway a little bit talk about
the PayPal ipn script and how we're
going to send all these variables in one
go to the payment gateway all of the
items in the cart all it's going to be a
bunch of it's going to be a set of
variables that we send to the payment
gateway so part 15 will cover the
quantity adjustments here in the cart
and then part 16 we can jump straight
into the payment gateway and we're just
about done guys not too much left to do
at all</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>