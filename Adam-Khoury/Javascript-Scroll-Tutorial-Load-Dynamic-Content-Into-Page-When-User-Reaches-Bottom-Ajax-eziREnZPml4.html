<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Javascript Scroll Tutorial Load Dynamic Content Into Page When User Reaches Bottom Ajax | Coder Coacher - Coaching Coders</title><meta content="Javascript Scroll Tutorial Load Dynamic Content Into Page When User Reaches Bottom Ajax - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Adam-Khoury/">Adam Khoury</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Javascript Scroll Tutorial Load Dynamic Content Into Page When User Reaches Bottom Ajax</b></h2><h5 class="post__date">2012-08-25</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/eziREnZPml4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello in this JavaScript programming
lesson we will demonstrate how to
execute special script when the user
Scrolls to the bottom of the content on
your page you can see this effect right
now if you have a Facebook account and
you scroll down your Facebook Timeline
Facebook executes snoo Ajax requests
each time you scroll to the bottom of
the page content and what it does is
loads in more dynamic data to the page
if and only if the user happens to
scroll down to the bottom then it just
automatically sends an ajax request to
load in more dynamic content and other
large-scale dynamic websites also use
this approach to achieve efficient
database data rendering in a smart
modern way before we begin the lesson
let's take a look at the finished
product of what we will be scripting
using an html5 document in javascript
today okay this is the exact thing
you'll be learning how to build within
this tutorial now what I've done is I
created a large image just to be a
placeholder for page content and it's
about 2,000 pixels high so you can see I
have a scrollbar here that appears and I
have a lot of content that I can scroll
in that windowpane there because the
content on my page is 2,000 pixels high
now everything is activated the script
is activated when people scroll the
window so whenever I start scrolling
you're going to see these numbers come
to life this number on the Left
represents the height the vertical
height of your content in pixels and
this number represents how much you've
scrolled down into the page or how much
the user can see into the page how many
pixels now take close note when I get to
the bottom of the page now watch what
happens to the content on the page
there's going to be new dynamic content
that is popped into the page
only when I scroll to the bottom and you
can tell by this scroll bar here its
height will decrease a good amount
letting us know that there's a lot more
content on the page we can keep
scrolling down so let's go down right
when we get to the bottom and you can
notice your numbers moving so now I'll
scroll down to the bottom now keep an
eye on this scroll bar here
boom you see right when I got to the
bottom a new blue div appeared it can be
any height you want it doesn't even have
to be a set height it could just be a
whole bunch of content that makes a
dynamic height then when you get to the
bottom of that a new ajax.request would
fire off here and bam then you have a
lot more content on the page and you see
how small a little scrollbar scroller is
that means we have a lot of content
there and you'll see it's not much code
at all to achieve this effect okay fire
up your favorite code editor create a
new HTML file to work within and start
with the bare bones of an html5 web
document and then you can follow along
with me my friend okay alright let's go
okay now in the head of the document
we're going to start a script element
make its type text/javascript and go
down a couple of lines and make sure we
close our script tag now go down one
more line and let's open up a style tag
and then let's close the style tag and
in the opening style tag let's define
that type that's going to be text CSS
now before we script to some HTML
elements and style those elements let's
put them in place we're going to have
two divs the first div we're going to
give an ID of status the second div
we're going to give an ID of wrap okay
so the wrap div is going to be the main
page content that you want to scroll
down and hit bottom on in this div ID
status that's only for developer
purposes which you can remove it after
after the tutorial now inside of the
status div we're going to put some
default values we're just going to put a
zero the pipe space and another zero and
in the wrap tag as content I'm going to
put all of my webpage content and for
mine it's just a simulated image that's
going to simulate my web page content
you would have a whole bunch of HTML
markup or dynamic data rendered into
your wrap tag or your wrap div rather
now let's apply the following CSS into
our style element so what we're doing
with these two lines is retargeting the
divs
those are the two divs that we just put
in place down
here ID status an IV rep status has
position of fixed and font size 24 and
remember you can remove this after you
develop I just put that in place the
status div to give you a little bit of
indication on the mathematics that's
happening now Dave rap has styles of
width 800 pixels wide and margin is set
to 0 pixels and auto now what that does
is it sets zero pixels for the top and
bottom and then Auto for the left and
right this is the way you Center any div
within its content container so if you
want to Center a div on a webpage that's
how you do it or if you want to Center
some kind of element within another
element that's how you do it and we
specified it to be 800 pixels wide so
it'll be 800 pixels wide centered and
since our status div is position fixed
it's going to be in the top-left corner
no matter where we're scrolling on the
page at all times okay now it's fun time
we're going to apply the JavaScript and
the first thing you want to do is set up
the event handling so the object that we
want to listen for the on scroll event
is window dot on scroll so we're
targeting the window object and it's on
scroll event property and that's going
to be equal to a function that we want
to fire off every time the window is
scrolled so anytime the window is
scrolled by the user a function is going
to execute we're going to call that
function Y handler you can name it
anything you want just put a semicolon
to break that line now you can double
click that and press ctrl C to copy it
and then right above that line type in
function paste in the function name Y
handler open closed parenthesis open a
curly brace go down a couple of lines
and close off your curly brace to make
your nice function nest so here's how it
works
window dot on scroll is listening and
it's going to fire off a function called
Y handler any time that the user Scrolls
the window up or down so this Y handler
function is constantly firing off as the
window is being scrolled on the first
line in that function we want to target
the wrap div so we'll save our
is equal to document dot get element by
ID single quote single quote close
parentheses and then semicolon in
between your two single quotes you're
going to put the ID that you want to
target on the page wrap so now we have
the wrap element as an object in
JavaScript now in the next line let's
put a little comment in for ourselves it
says get page content height to get that
will create a new variable and name it
content height and that's going to be
equal to the wrap object dot offset
height property then you put a semicolon
so you just target the wrap element on
the page is offset high property to get
the content height that way you low in
your JavaScript exactly how much content
pixel wise vertically you have on the
page and it could be any dynamic number
because you can load in any type of
dynamic data and not be aware before the
page loads of how high that content will
be so this number will arrive to you
dynamically now in the next line we're
going to place another comment in for
ourselves and it says gets the vertical
scroll position now to get the vertical
scroll position we'll create a variable
and name it y offset and that's going to
be equal to window page y offset so to
get the vertical scroll position you
target the window objects page Y offset
property let's let you know where the
user is in their scrolling of your page
exactly where they are in that scroll
position okay now this next line is
really the only tricky line here we're
going to call this bar Y and that's
going to be equal to Y offset plus the
windows dot inner height property now if
you want to understand about window
inner height and actually what value it
gives you you can go to the world of web
craft and type in get window size and
search that and it'll bring you to a
article that I wrote called JavaScript
get window dimensions
of the browser and you can see here the
inner and outer dimensions it just gives
you the window height and the browser
and the one we're dealing with in the
tutorial right now is the inner
dimensions so these blue arrows are
pointing to that and this right here in
the code window that inner height that
is giving us this value from here from
this the tip of this blue arrow down to
right here the bottom of the browser
window that's the value that we're
getting just so you understand exactly
what this little piece of code is
getting it's a good way to visually
represent it so this y variable so this
Y variable is the sum of Y offset plus
the window inner height because page y
offset just shows how much they've
scrolled but you also have to account in
the windows that inner height if you
want to target the bottom of the page
which is what we're doing in this
tutorial we're targeting the bottom of
the page we want something to happen
when the bottom of the page is hit by
the user when they scroll okay it's just
a few more lines left the next thing
we're going to do is a conditional
statement and here it is we're saying if
Y the value that we attained here from
our calculations if Y is greater than or
equal to content height you know what
content height is that's the height of
all the content within your div you know
and I sang mang so if Y is greater than
or equal to content height meaning if
the user hit the bottom that's basically
what that translates to if the user
Scrolls to the very bottom and hits it
actually that means if they go over it
or they have hit it so if that occurs
then and only then do you want to put
more HTML content into your wrap div
here on the page like a Facebook when
you get to the bottom of your Timeline
they run an ajax request so we're going
to write a note right here to you guys
ajax call to get more dynamic data goes
here and if you need a tutorial about
how to run a custom ajax call without
using frame
works we have that at developed PHP in
the JavaScript video tutorial section or
you can just use jQuery or another
framework that makes JavaScript more
easy for people that don't know how to
program JavaScript yet now the very last
two lines are simple and they are just
affecting the status did which like I
said you can remove those after you
program this application you can just
comment those out but at first you might
want to have them there so you can see
what the values are as you are scrolling
so what we do here is we target the
status div just like we target the wrap
div up top earlier when run document dot
get element by ID status div so that
puts status and a little object for us
there then we can just say status that
inner HTML property is equal to the
content height number and then that pipe
and then the amount that the user has
scrolled so far towards the bottom we
have to put a class the CSS for new data
because new data is actually a new div
that's being popped into the wrap
element so that's how you're dynamically
putting new data into the wrap element
and you can put divs any kind of content
you want in there in this content would
normally be coming back from an ajax
call to get more dynamic data from the
database or whatever you don't just
stick a static div in here like i did
you put your dynamic content coming back
from PHP or whatever in your ajax
request that's what goes here you got it
each time the user hits the bottom of
the page so last thing in the CSS let's
put div class new data we're going to
target any div with a class of new data
on the page and we're going to have a
few of them as much as the user keeps
hitting the bottom that's how many are
going to appear and I'm making the
height let's just make the height 1,000
background is blue and we gave it a
little bit of margin top and bottom just
to separate them from each other when
they load in now let's run this file
preview in browser Chrome now when we
hit the bottom watch what happens boom
we got a thousand more pixels worth of
data to scroll through boom
boom boom boom boom boom boom now look
how small a little scroll is the comment
much data we have now okay so that's how
it works now mine is static yours would
be connected to an AJAX request right
here like I said you'd put your content
coming back plus equals into the rap
element plus equals compounds data into
that inner HTML of that rap element if
you just put an equal sign here it would
overwrite what's in there each time you
don't want that you want plus equals so
it keeps the data that's already in the
rap element and just adds more to it
okay so that's how it works and these
couple of lines here are basically all
of the mathematical logic that you're
using you're getting the page content
height and then you're getting the
vertical scroll position that the user
is at currently on the page and then you
use Y here to calculate the windows that
inner height to add that to the Y offset
to make sure that we're targeting the
very bottom of the page in the users
browser window no matter what their
window size is okay so I hope I
explained all of that well enough and if
you're a beginner and you were able to
grasp what we were doing here Bravo to
you because this is kind of intermediate
all right so I'll have this script
available with develop PHP comm
underneath the video I'll put a link to
that page of develop PHP in the video
description at YouTube so you guys can
get to it okay so that is how a lot of
large-scale dynamically driven websites
will program javascript scroll bottom
load dynamic content so when the user
Scrolls to the bottom the low dynamic
content and you can keep loading and
loading and loading now it's up to you
guys to tweak this and refine it maybe
you want to put more conditions in there
to stop things from loading okay that
about wraps it up I hope you guys found
that helpful and I'll see you in the
next tutorial</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>