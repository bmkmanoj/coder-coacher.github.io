<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Server-Sent Events Simple Chat Application Example | Coder Coacher - Coaching Coders</title><meta content="Server-Sent Events Simple Chat Application Example - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Adam-Khoury/">Adam Khoury</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Server-Sent Events Simple Chat Application Example</b></h2><h5 class="post__date">2015-01-17</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/ysQ2jirkHk8" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">before we take a look at how this very
basic standalone chat application works
we have to make some disclaimers so that
developers do not use something like
this the wrong way on the wrong type of
server
I built this chat application just as a
quick and dirty demonstration for the
most common type of hosting account
which is shared hosting now I'm not
going to be adding any features to it or
changing it by request I made it with as
few features as possible on purpose
now let's discuss the disclaimers okay
my first disclaimer is that shared
hosting is not ideal for server-sent
events
now the second disclaimer that I'd like
to make is that Apache server and PHP
plus MySQL are not ideal for server sent
events
now the third disclaimer I'd like to
make is consider a virtual private
server or a dedicated server with
WebSocket and a socket server technology
to put more power into your real time
instant applications such as this server
sent events just increases the
efficiency over long polling with Ajax
by cutting down on the amount of HTTP
connections that need to be made what
happens with server sent events is that
it connects over HTTP once and then it
keeps an event stream open that uses get
requests to get data from the server
Ajax polling works in a similar way is
to connect over HTTP
multiple times whereas server sent
events only connects over HTTP once and
keeps an event stream going so even
though it's slightly more efficient than
Ajax polling it's still not a magic pill
it's not it's not going to allow you to
have a whole lot of users connected all
at once giving them instant interaction
alright so disclaimer for is even high
end dedicated servers using sockets have
a surprisingly low maximum simultaneous
user limit so let's consider popular
video game makers you can go and play
video games online instantly with people
but there's going to be a limit to how
many people can be on that server
sometimes you'll see that a server is
limited to 16 simultaneous users and
then there might be 16 other users
playing simultaneously on a different
server and then 16 other users
simultaneous on a different server so
services like that have many many
different servers and they're spending a
whole lot of money to maintain all of
that for instance take Facebook
the only reason Facebook can supply us
with all this instant interaction is
that they don't have millions of people
all on one server they have it spread
out over multiple servers so for
instance Facebook or Google just uses
certain technology to tie all those
servers together so the reality is that
you if you have a shared hosting account
you can just have a few people maximum
as simultaneous users in some kind of
instant data interaction and you have to
have better technologies and server-sent
events you would use socket servers no
SQL database that can be sharted out of
your butt huh chiki chiki one threw in
the mic
okay now let's test it on a shared
hosting account so we're simulating two
users that are in different countries or
different cities or whatever and right
when we come to the application it asks
us to enter our name so this one will
put Joe okay and then it says welcome to
the chat Joe press connect when ready
okay so you can connect whenever he
wants then this user named Sarah okay
welcome to the chat Sarah press connect
when ready
okay so we'll connect Joe and we'll
connect Sarah now let's have Joe say
hello how are you
submit and then Sarah gets the message
Joe said and she can said fine our you
and Joe could say I am doing well how
are the kids Sarah say kids are great I
have to go talk to you later and then
Sarah can disconnect and Joe can
disconnect
and that's how it works let me give you
the whole application and you can
dissect it take it apart
reverse-engineer it use little pieces of
it that you want whatever so we have
chat example dot PHP and we have server
PHP chat intake PHP and then chat txt
which is the standalone database for
this example which starts out empty so
I'll have all of the code available for
you guys you can click the link in the
description of the video to access all
of the code then you can take it and run
it on your own server to see what your
server is capable of but ultimately I
would recommend WebSocket with socket
servers ok before I go let me show you
how to run the console in Firefox I'll
just pull this window down a little bit
and let's refresh the program and I
updated my database to make it empty
again and let's refresh both of these
now let's name this one mark welcome to
the chat mark ok and then this one pam
ok welcome to the chat pam press connect
when ready ok now i change the server to
retry every 5 seconds and before we do
that let's go ahead and open the console
by pressing f12 pull this down a little
bit now we'll be able to see things that
are happening so let's connect and
connect over here as well now let's type
something in hello dear submit and then
pam said hello there and then over here
it says pam said hello there to the user
I think it was mark say hi Pam so mark
said hi Pam Pam say see you later it's a
bit now you can see everything that's
happening down here in the console the
get requests are the event stream coming
in from the server the post requests are
the Ajax requests so you might find that
in handy when you're testing in Firefox
just hit f12 and your console will
toggle open and closed you can see
everything that's taking place that the
client side sees</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>