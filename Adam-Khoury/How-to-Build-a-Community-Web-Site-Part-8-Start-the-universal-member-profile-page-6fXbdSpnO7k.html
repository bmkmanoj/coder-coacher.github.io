<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>How to Build a Community Web Site Part 8 - Start the universal member profile page | Coder Coacher - Coaching Coders</title><meta content="How to Build a Community Web Site Part 8 - Start the universal member profile page - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Adam-Khoury/">Adam Khoury</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>How to Build a Community Web Site Part 8 - Start the universal member profile page</b></h2><h5 class="post__date">2009-04-02</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/6fXbdSpnO7k" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello and welcome to part 8 of building
a dynamic web community using PHP MySQL
and flash created by flash building and
brought to you by develop PHP calm in
the last lesson we created the log out
script for the user that was connected
to the flash header they press log out
it refreshes the page logs them out and
then shows them the page as a log out
user would see it so now I'm going to
show you how to create the page that is
brought up the new page that's accessed
by the browser when they click view
profile and that's just going to be
using our let's go to open this
undefined page which if you have the
source package and you if you're
following along you'll see that in the
package and I think it started as the
about page but we turned it into the
undefined page yours might say about or
whatever but you can use any of these
other pages to start this page off as
long as it's one of your site pages that
has the footer and header template and
what we want to do is make sure that we
have renaming all the things so i'm
going to rename the sum of the meta name
tags the description and keywords and
put certain things in there and then
i'll explain what I've done and I'll
change if you other things up on the
page but I'll explain there you can see
there's not much to change in the page
so but I'll explain everything I do when
I resume the video
okay here's our undefined dot PHP page
that we had opened up and we added a
couple of dynamics we're going to run
dynamic PHP variables into the maiden
name or the meta keywords and a meta
description tags here and also into the
stylesheet links and we're going to have
to set up a couple of more folders for
what we're doing in this page now and
i'm going to show you every step of that
don't worry about it and this file will
also be included into the new zip
updated zip package that you can get the
whole system source file from web
intersect com so what I did was you can
see how I'm printing PHP variables and I
have the script written up top here and
I'll show you that in just a second I
added it into the page right on top of
where the doctype tag starts there's PHP
tags up there that I added the script
for and I'm going to talk about that
just a sec so first I just wanted to
show you how I i manipulated things
inside of the head tag and it's just
simply printing PHP variables that were
claiming up top in the script and
they're going to be displayed here for
the members name city state and country
so that way that person so say my name
is Adam Corey it's going to say keywords
are going to be Adam comma Corey comma
my city comma the state i live in comma
my country so that way my name Adam
Corey could get indexed in the search
engines better and about a month maybe a
month's time I can put in Adam Corey
into the search engines and it's a very
good chance it can come up on page one
if we set up our profiles right page one
or two very close to the top but
especially if the name is unique it'll
definitely be on page one but there's a
lot of Adam Corey so I don't know if
mine would but it would definitely get
more no disability and more exposure for
that person when that name is typed into
the search engine
if you happen to have you know be a
member of a website like this that will
dynamically print keywords with your
name in it into the meta tags it's
really handy stuff and so and it also
makes each keywords and description tag
unique which you need for a good
indexable site in according to google
search engines then we have we're
printing our style sheet variable here
because what I'm going to do in our
system is on the profile edit page the
member that's logged in will have the
ability to pick a style that they want
for their profile to like pimp their
profile out and they can just pick
through a few that they can view and I'm
just going to show so show a few
examples in the system maybe six or ten
something like that maybe even less like
three if I don't feel like working too
hard I'll make three different cool
layouts for the profiles and then each
one of those layouts is going to have a
separate style sheet and it makes it
really easy for the user to pick their
profile in house so they don't have to
go to an external site to get cool
profiles you'll make the backgrounds you
make the graphics for the the bars that
separate information and all of that
stuff tables everything and we can also
maybe I'll even show you an example of
how to let the user upload their own
custom background but I can't guarantee
that in this tutorial series so I'm just
going to show example of how to let the
users pick their own style sheets and
their own style layouts with an easy
click of a button they can just view it
click a button done easy fast and they
can get on with their lives say so what
uh what we've done down in the page so
far is we haven't changed any thing in
the body section still says define me
like there before so let's save this
page file save as
root directory as view member you can
name this whatever you want really as
long as you refer all the links to it
directly so to be view underscore member
dot PHP well let's just make it profile
their profile PHP and that is going to
be this is going to be universal page
let's see let's just write that in
universal page that displays all members
to others and themselves if that makes
any sense so when the user is logged in
so say in our flash header we still have
to program in the functionality for this
button here for the logged in user they
click view profile they get sent to that
page we just made profile that PHP so we
can close this undefined page
yeah we don't even need that anymore and
let's go to profile that PHP and in the
code we're going to add the sections in
the body section here into this big 950
wide table for all of the member
information since we can access all of
these PHP variables and i'm going to
show you that now this is what the file
started as before and now i'm going to
show you the PHP script up top
okay in it in the upper section of this
file profile that PHP which like I said
we'll be in the download package it will
be updated so you can get all the source
files at web intersect com or develop
PHP com but what we're going to do here
is we're going to connect to our
database well first we run session start
to access any session variables
available for that logged in user if
they happen to be logged in because if
they click view profile when they're
logged in on the site we want to make
sure we usher them to their profile and
so they can view like another member
would see it and you can also well I'll
just show you what I'm going to show you
we'll talk about other things later when
we need to but i'm going to show you
good functionality here so what we'll do
is we claim the sessions start then we
connect to the database with our include
script and then we run a condition here
that says it's an if and else if
statement that's nested here and the
first half of it is if the get variable
that means URL variables if you don't
know what URL variables are you can just
type that into a search engine URL space
variables and you'll see how to set up
URL variables but most of you guys know
URL variables are it's the variables
that are in a an HTTP URL after the
question mark and then it gives
variables sent in that way so you access
those variables if there's any and we're
going to set up our site to have meant a
member search page or remember listing
page where anybody they're logged in or
not can just go and look at all of our
members and then if they click the
person's picture or their name and they
go to that person's profile and as a URL
variable that's going for ID and that's
how that person's profile is populated
into this Universal profile PHP page so
we acquire that variable if it comes in
from say the member search page or the
member list
page or the forums if your site has
forums and then you access or you put
that URL variable ID variable into a
local PHP variable and then that gets
shot into this MySQL query string and if
it's not present the get variable that
would mean that the member is clicking
here to view their profile because this
is going to be a post I do believe yep
nope it's not going to be a post it's
just going to go to the URL standard
like very standard just going to go to
profile that PHP and if the session
variable is set that means if the user
is logged in then it's going to show the
ID as the session ID okay that's very
important there so we acquire the
session ID into a local PHP variable and
that is the one that would get sunk into
the URL string here and not the get
variable here so that if the URL
variables present that's what we use for
this URL string right here if not we
make sure the user is logged in and if
they're logged in we use that session
variable and I might add another
conditional here to make sure that
nobody can just go to profile PHP and
see a blank page or something that would
be a very simple conditional you can add
one last else and show like a default
page or something or just write a
message and exit the script say you
didn't data for this page is missing
todd data required to run this page is
missing something like that wyd it right
here else I'll show you
else we'll print
important data to render this page is
missing and nobody should ever ever see
this message nobody should just be going
to the profile that PHP without one
being logged in or to using a search
function on our page to look at the
members to view the members profile
that's the only two times that there's
the only two scenarios where somebody
would go to this ph profile that PHP
page so if those two things aren't
occurring you want to print a message or
echo print an echo or the same same trap
and then you say exit open parenthesis
close parenthesis semi-colon that will
exit the script immediately so all
they'll see in the browser is important
data to render this page is missing
script exits they can press back and
that's it or you can put in a back link
right here with HTML print out an HTML
string for a backlink whatever you want
to do but that's good enough right there
for all the functionality you need to
run this page so after we assess which
query ID we're going to use for the
query then we can go ahead and run the
while loop on that SQL array and access
all of the field variables into local
PHP variables and here i show you how to
make an email link to out of the email
address for that user if your system
wanted to allow members to email each
other without being an inner system
functionality what that means is they
would just be using their outlook
express or their there was a thunder
thunder something email application and
but a lot of sites choose not to do that
they like to have an in-house commenting
application where the users can comment
to each other back and forth in their
profiles and things like that
but i just want to show you i'm not
going to be putting this on our pages
because i don't want anybody to see my
members email addresses but i just
wanted to put that in there for you i'm
going to comment it out if you want to
use it you can you can print this
variable right here and that whole email
string will be an active link on the
page below okay so sign up date we
access and I show you how to convert
that using this PHP function and this
PHP function to make the dates render
correctly the way we want them to
display there's many many different ways
to do that and you can check that at PHP
net and also the last login date is here
and I won't be using that either but you
can use if you want to show when the
member last logged in all the time on
their profile like YouTube does you can
do that you can use that variable there
but i'm not going to print that to the
page but you can if you like but i'm
going to use the sign up date and I'm
going to use the bio and the website and
the youtube link use all that and so
here inside of the while loop well was
still inside of it we're going to do a
mechanism to display the picture and see
if they have uploaded a picture or not
so here's we're going to have to make a
folder called zero we're going to label
it zero that folder name and it's going
to be in the members holder so let's do
that let's where are we reconnect the
members folder oh my god you guys really
did join up cool man so when I go to
make my member listing page 26 people
already joined up you guys Rock I don't
have to make any dummy members now okay
so all I have to do is create a
directory here you just create a new
folder using your ftp application it's
called a zero okay
and my permissions on it should be just
like the rest pile attributes try 755
okay okay so nobody's going to need to
upload to that folder but there's no
reason why it should have any more
security than those the net file
permission setting there okay so now we
have a folder labeled zero in our
members directory so now nobody's going
to join our database with a an ID of
zero so it's safe to put that there and
I'm going to use that as my default
member so if somebody happens to not put
up their picture or things like that
it's going to be default member
information if people happen to not put
information in certain sections or
whatever pictures and files not so much
text information but pictures mostly and
files and so let's go back here and
we're just about ready we're going to
discuss a couple more things so we made
that folder now we have to make a
picture that's the default picture if
somebody doesn't put up a picture you
know on youtube they show that little
camera guy is the default picture you
want to do something like that so let's
go ahead and make that in fireworks and
then we'll continue okay here i am in
fireworks cs4 and i created a 250 x 250
default member image and i'm going to go
to file save as a desktop web intersect
site design source files save this as
default mmm
pick and then this will be a PNG source
file that way you can manipulate it
later now we want to save it as a JPEG
as well to route the images folder let's
just pop it in there change just the
JPEG and save now we can go to FTP and
make sure we put that you'll see i have
an HT HT Access file and I'm not sure if
that's included in the source package
yet that we're going to discuss later on
in the series and so you don't even have
to worry about that file right now and
let's see and this that you see here is
just the source file download that you
guys can get to the source files for the
for the whole lesson and let's go to our
members folder that's zero default
member folder there and images default
member pic we can ftp that up let's
rename it
image 01 because I think that's what we
have in our script here yep image 01 so
it'll go into the members folder if
there and here let's talk about this if
an else statement now in the profile
that PHP page there's an infant else
statement here that will do a condition
check for if the file exists of check
pick this variable that's made right
here check pic that's a members folder
this user that was supposed to be
accessing if their image folder does not
have their image 01 jpg then we're going
to display this default pic so if the
file exists check pic we display check
pic which is their picture and if it's
not there we display the default think
that's how it works it's nothing
complicated about that so if their
picture is present we display their
picture check pic if it's not present we
display our default pic that's how that
works the user pic variables listed down
below so let's see how this works let's
go to let's give this thing a test now
all we have to do is print the let's
grab this PHP print here let's put it oh
we still have to make a folder for the
style profile so let's go ahead and do
that before we forget so here in our
root directory we have style and it
looks like we have to make a folder
called style profiles so let's go and
create that folder on the server add
create directory put that name style
underscore profiles okay and this is
going to be the spot where you're going
to store all the backgrounds and style
options and style sheets for your
members when they choose them this style
folder is for you and your site design
the the core site design and not
anything the members would deal with
this is going to be for the members
profiles so inside of that we need a
style sheet called default because you
see we claim it here and this is just as
a placeholder but eventually we're going
to we're going to get it out of the
database eventually but for now we
should use this default the PHP so we're
going to have to create that file so for
now I'm just going to use the default so
let's go to file open the style sheet
the main style sheet now file save as
into our new folder which is not on this
side yet so let's ftp it over style
profiles let's put it here now we have
that folding let's go in it style
profiles and save this as default and
it's that easy to set up but we're going
to change the look of this so where the
profiles don't look exactly like the
rest of the site or maybe the default
profile will and then the options that
we give the members later can change up
the look help them pimp it out easily
okay so let's save this here default
update links no because there are no
links in that file so let's just go
ahead and ftp it up now solve profile
style profiles default that CSS there it
is and that's it now we go back to our
HTML or PHP file for the profile and and
that takes care of it for the that for
the beginning of this file this is as
far as we're going to go for now and I'm
going to print something out here and
then we're going to test it and we'll
expand upon it later on in the series
after we knock a few other things out
but I just wanted to show you how to set
up this this call to mysql and get all
the
remember information that we need to
populate their profile correctly and
that's what this script does very nicely
for all of your members 11 script will
do it all ok let's go into design mode
make this thing look more like how we
want to remember profiles to look so
we're going to add a table I'm a table
holic and everybody else at me for being
a table a holic but i'm lazy I feel like
messing with dibs I can do anything I
want the tables just about I only use
divs when I have to do really special
things and if it messes up my search
engine indexing oh well I suck ok so
let's go to make this ninety percent
this is just going to be for started
placeholder just to hold information
let's give this a center alignment and
it's put a couple of line breaks here or
one line break let's give this table
more rows maybe like six and columns
give it to
alright so now we have two columns and
we can just add what we want now we'll
put the member picture here and we'll
put there let's see their name here so
let's say name so we pick and we'll put
their country state
city and their bio which we don't have a
form for them to even upload their bio
yet to us and that will be on the
profile edit page that's coming next
lesson and that's right here in the
header when they click that they'll be
able to edit their profile and so this
will be all we need to print out here so
let's go to the code view and right
there in all those spots let's just
replace those with print PHP print and
let's get those variables print it out
on this page pic we know what to put
there that's the user pick variable
right here so just grab that print it
out there now the name that's very
simple you just put first name and last
name they're very much like we do right
here so we can just take that whole
thing this will be first name and last
name and then their country where's that
debt to flip the right there grab that
one up first we get to print it out hey
let's just grab this and place it in all
of these so that's country state let's
not forget what those were in city so
country goes in this one state grab that
goes in this one at City
those in this one that's going to
effectively display the member data on
the page let's go test it out so we save
it let's ftp this file up now to our
root directory it's not there yet let's
get it over there now all we have to do
is add the the button code for that in
the flash here and let's go ahead and do
that right now and then we can publish
this out and ftp it up so we're going to
add it to the timeline frame code layer
frame key frame 3 that corresponds to
wear these three buttons are and we
already have our log out button
functionality here in this timeline
layer so let's go down a little bit a
couple lines put in a nice visual
separator there and this is going to be
the functionality for thee when they
click this view profile button okay and
here is the code we have I made a little
comment here it says code for the view
profile button and we claim a variable
name for the URL request we're going to
and this has to be see http www the web
intersect this would be your website
name not web intersect / profile
I think you can put profile by itself
we'll just add the whole profile that
PHP I recommend adding the PHP there
with that PHP but I think it'll work if
you just put profile so we put make sure
that's the name of that file yep okay so
that that's the name of the URL right
here that we want to connect to and
we're going to open that URL in this
other function we were just calling out
to a script this one is not calling out
to a script it's actually sending us to
a new page and that's what we want so we
claim the event listener here for the
click function of the view profile
underscore BTN so let's copy this and
make sure we have this instance name
here which we don't yet let's highlight
that view profile button go into the
properties inspector and put that
instance name in for that button now we
connect to it in the code and everything
will work so we add event listener claim
the function name then we run that
function right here right when they
click the button right when they click
the button we navigate to URL which is
this URL right here that we claimed
above that's it it's that simple and we
claim the self for the target which
could be blank if you wanted parent or
whatever the other options are okay so
let's go ahead and test this bad boy out
see if it were key okay is that now
let's go ftp our header we already have
a profile page up let's go to header swf
ftp it up go to the website let's just
use the google
google it scrimmage maybe Google will
like me more if I use their browser to
show my some tutorials in the tutorials
they'll say hey this guy's sporting
google chrome let's give them better
ratings and ranking and all kind of cool
google privileges i can eat the lunch
room at google now or soon let's see
what are we going web intersect now I
get it I already got my site indexed
type web intersect the first link aha
let's see you do that Lana think any
other sites are named intersect or
anything like that that's how it came up
so quick my sites only been up for like
a week see Google index works fast so
let's go and login Adam you know that
that good to keep people up on a log in
see if this thing works so now it's
processing and it usually goes a lot
faster than that something it's fine now
it's doing the check okay now logged us
in we have our three special buttons as
a logged-in user would see and let's go
to view profile and see what happens
it's going to send us to a new page on
my internet connection slow right now
and look at that it did not list my name
for some reason though there's my my
state country in city and here's where
my bio would display and if I had a pic
there it would display right there and
since I don't it runs the default pic
like we made it so let's make sure we'll
see why we don't have a name here last
name first name first name yes yes first
name last name okay found out what it
was like a doofus I had underscore in
between my first name and last name
variables there which made them not
display correctly it's good for you guys
to see that if you're a beginner to see
somebody with a good amount of
experience messing up and it's going to
happen to you left and right left and
right so get used to that okay alright
so that should display everything we
want now let's ftp that up profile PHP
says undefined web page at web intersect
it should not say that so the title has
to change let's change the
where's the title link up right there in
front of my face okay so website profile
for ya right there in the title it's
going to print say wave intersects
profile
for first name last name this site will
give somebody great indexing actually if
you join it'll help your cause put your
links in your name up and not everything
ok so ever in a sec profile for that
should do it
I just want to get it working before we
quit make sure it's working correctly
press the view profile as a lot of good
remember now we should see an update to
the data there it is is my name Adam
Corey now here it says web intersect
profile for Adam Corey up top and if you
look at the source file or the source
code you'll see that in the title the
web intersect profile for Adam Corey
then up here it says Picayune
Mississippi and the keywords we still
got to change that one last thing and
that's it right there in the keywords
print first-name lastname get rid of the
underscores there we go now that it's
done so this part of the lesson was to
to summarize it was to make the page
that's going to be the universal page
that displays the members whether the
member is logged in and they want to
view their own profile or another person
visitor or member alike wants to view
another members profile then this is the
same page that's going to run in both of
those scenarios and we just use some
conditionals to make that possible and
we set things up right and so we're
going to add a little security measure
here on this from the register page
remember we added our MySQL real string
right there we want to do that to the ID
variable before we to a database query
using that URL variable information
because somebody can change URL
variables so it's just real escape
string on the ID let's do our other one
to get that guy out of there too because
we don't want that character and now
this file is pretty much done and it's
going to be for download so if you're
following along you can add it now to
your system and at the rate I'm going
here you'll probably zoom in ahead of me
but you guys
if you zoom in a head that's cool but
don't go too far okay so let's see first
name ID right there okay sorry that took
so long but I had to really discuss it
pretty in depth so you guys understood
all the code that was taking place in
this top part of the profile that PHP
script and then the regular HTML section
for it as well it's a lot of dynamic
variable sinking in there so you can see
there's not much going on in that HTML
section but a lot of variables of being
placed in so that is it for part 8 and
we will see you in part 9 where we're
going to and like I said this is just a
basic holder for the profile that we're
going to wind up with just display we're
going to wind up with but the next part
of the series is going to go into
creating the edit profile page so when
the user is logged in they click edit
profile right here and then we'll bring
up another page where they can edit all
of this data to change it up okay I just
want to add this little piece in it is
in as an edit this print right here I'm
going to change to include the home page
because instead of the user is if the
user happens to be like I'm right now
logged in and I'm on the profile page
looking at my own profile and if i press
log out for let's left EP that up when
ftp this so include once indexed and
exit
this is in the top of the profile that
PHP script and now I'll show you why
because when they press log out it would
give them that error that says missing
data to render this page so we don't
want that to happen so if there's
missing data to render this page let's
just send everybody back to the homepage
so they press log out oh I supposed to
know it works ok there's the homepage
there's the register form that means the
user successfully logged out and back on
the homepage that's what that edit was
for and let's see here yep that's it
he's in a little ok so this file will be
up with the rest enjoy</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>