<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Flash Website Guestbook AS3 MySQL Tutorial and Free Editable Source Files | Coder Coacher - Coaching Coders</title><meta content="Flash Website Guestbook AS3 MySQL Tutorial and Free Editable Source Files - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Adam-Khoury/">Adam Khoury</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Flash Website Guestbook AS3 MySQL Tutorial and Free Editable Source Files</b></h2><h5 class="post__date">2010-03-01</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/9uWFV3QkBW8" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello there if you're watching this
video you're going to learn how to
create a flash actionscript 3 PHP and
MySQL guest book that you can put on
your full flash website you can even use
it on a site that's HTML just stick it
on the HTML page whatever page you want
and this will automatically talk to PHP
and MySQL when we set it up mysql will
be the storage for all these comments
that you get and PHP is the dynamic
language will use to make flash and
mysql communicate data back and forth
and we can thank branislava barrick i
hope i pronounced that correctly she's
one of my good friends on facebook and
she plays farmville and sent me a big
giant teddy bear and i thought that was
sweet so I'm going to hook her up with
her request here on how to make the
guest book in flash website and I hope
you can use PHP and MySQL Branislav work
because that's what I'm going to show
let's do it now and have no fear i'm
going to be releasing all of the source
files that run the application if you
need to get at them which you probably
will need to get at them but you'll also
need to watch the video to see how i'm
going to set up the storage mechanism if
you're not really really comfortable
with mysql yet so i'm going to go to PHP
myadmin where I've created my database
being redirected to PHP myadmin now from
within my hosting account and i'm going
to go to that database that i created
and i named mine gb2 short / guestbook
tutorial and now i'm going to name the
table that's going to store the
guestbook data i'm going to name that
table guest book and let's make it have
five fields press go
first one is ID integer length values
you don't have to put that in it'll
automatically make it 11 I believe you
can put it to auto increment and set it
to primary and that'll be that the next
one is going to be named it's going to
hold the person's name this is going to
be bartsch are you just sit all your bar
charges to 255 because that's the max
limit to take and hold 255 bites I think
it isn't and the next one is the post
date that they we've got to make sure we
record the post date so you can show the
post date of when they comment it and
that's going to be daytime that way it
will hold the timestamp nicely and you
don't have to put anything else just
daytime next one is going to be the
comment that's where you're going to
store their comments so we use text i'm
going to use text with this that way you
can be larger than 255 bytes or
characters and let's say text needs no
length or nothing else that's good the
last thing is location location is also
going to be bar chart 255 and that's it
now hit save and not go now your table
is ready to go storage mechanism is all
set and all we have to do is show you
how to flash file setup and a little PHP
script that talks between this storage
container and flash now before I
discussed the flash script and the PHP
script with you I want to test this
thing out and make sure that it actually
works online before I set up the package
to be downloadable the way you guys can
check out the code and put Adam it's my
name my location is NC guestbook entry
is hello
great info on your site submit it says
waiting for connection really quickly
there you probably missed it but it that
shows very quickly to the user in case
your connection takes a little while
they'll have some indication of what's
happening and instead and says entry has
been added successfully Adam thanks and
this message is actually from the PHP
script and all of this data here so if
like somebody else comes a new name is
Jessica the location is New York she
says hi boom it's all instant all
instant updating pretty cool stuff
alright now let's talk about these files
okay here we are back in flash cs4 now
there's just really three parts to this
whole application is the MySQL database
which is our storage container the flash
file which I'm going to discuss with you
right now and then the PHP script which
allows flash to store the data within
the database it's kind of like the
middleman that talks in between mysql
database and flash actionscript 3 so
let's talk about this flash file the
main scene you'll see that there's a
whole movie clip that contains the
entire guest book that way you can
easily pop listen to many different
flash files so double-click inside of it
and you'll see there's three layers and
they don't even have to be in that bowl
that let's take them out of there and
let's move that Boulder delete folder
okay we got three layers it's very
simple the first two or ActionScript one
on the bottom is all the stuff
everything onstage is all stacked into
this layer here you can see it when I
highlight that layer everything gets
highlighted okay so we can lock the
ActionScript layer because we don't want
to put anything on those by mistake
let's talk about the first part which is
flash requesting the entries when the
person or any people come and first
initially view the guest book you got to
populate the entries
okay so to request the entries let's
highlight that frame and press f9 all we
have to do is build the URL variables
object a URL request object with the
parse the PHP bars file named right here
and then you set up the bar send
variable here what kind of options you
want to have within it we're setting
data to be sent with that URL request of
variables and that star URL variables
object then we build the bar loader
variable which is the mechanism that
actually loads everything up to the PHP
file and hasn't a complete event
listener here and the function that runs
when all the data is sent and then
returned when the data gets sent to PHP
PHP returns data we run this function
called complete handler underscore our E
and I put underscore re on all this
stuff because it's request entries what
we do inside of the function complete
handler when all the data comes back
everything's processed in PHP we're
getting all the comments back from PHP
to show the user initially when they
first come to the guest book we run this
function completely handler and what it
does is it says if the event that
targets that data dap return body is
equal to nothing we put in the output
text field no data coming through you'll
see gb output underscore txt is the name
instance name right here of that text
field so we sink into the text field no
data coming through because there aren't
any comments just yet and you saw that
on mine when we tested it out said no
data coming through but then when I made
a comment all of them started showing up
so when you do get a comment the first
one it really won't ever show that
anymore so if the event that target the
data return body is not equal to nothing
we do this else condition we run this
here and this condenses the white space
of the
the text field and then we sink into
that text field using the HTML property
the HTML text and we do that to preserve
any if you want to preserve line breaks
and paragraphs or if you have HTML CSS
type content that's why we use that
otherwise you would just use that text
instead of that HTML text and then we
just sink in the event that target that
returned body and that's all of the
chats I mean all of the comments all
together the whole body comes in and
then here at the bottom is where you set
the variables communication type I'll
tell you one second in the PHP file
they'll be a PHP file is listening and
waiting for a calm type a communication
type and I said this one as request
entries because that same PHP file
guestbook parse is going to handle two
parts of this action script not only
this part here so we have to tell it in
this part of the action script what
communication type request initial
entries that's why it says request
entries there then this line actually
does descending all of this stuff is
what happens when the data comes back
okay that's how that works so the
ActionScript 3 that we just discussed
was for only for requesting the entries
initially when the user comes to the
page when the user wants to leave a
guestbook comment this code gets run on
this layer here it's called send entry
code let's highlight that and press f9
or go to our actions tab here we can see
what's going on here we have restrict
properties set on each one of the fields
so name location and guestbook entry all
three are set to have a restriction upon
them of only allowing a through z in
capitals a through z in lower case space
and 0 through 9 that's all I'm going to
allow let's say if you wanted to allow
everything you just don't use restrict
at all but if you wanted to allow
everything except the pound sign maybe
everything except pound star and code
brackets that's what that would do right
there that would restrict to allowing
them to type in everything except these
for special characters that you want to
deny them to be able to type in that's
how that works the way i have this set
up it's going to allow only them to only
type in 0 through 9 a space if they want
to put in spaces a through z lower case
and a through z upper case and I'm doing
this for security so that way nobody can
put in any tags any quotes any other
special characters or nothing that i use
for hack in a database but you can be
real loose with yours as tight as you
want and do research into PHP filtering
user input for security all right now
let's finish talking about this so what
we do here is we setting up formats for
the if it happens to be an ever and
because down here we're setting up
validating the form fields so that they
forget to put in their name we want to
make this field have a different color
like a red showing that it's an error
when its success I think it's a yellow
you can make those colors whatever you
want and that's why we set up this text
format variable and the values for it
and here we make sure the processing
movie clip visibility is set to false so
it cannot be seen until they press the
submit button when they press the submit
button down in here you can see I've
make processing MC is that movie clip on
the bottom this is processing it shows
up in flashes
when they press that submit button so on
the completely I'm sorry down here when
they press the submit button it says
processing movie clip visible equals
true that means it's showing on the
complete handler when the data comes
back and everything is finished
processing we again make it false so in
the beginning we set it to false because
they haven't pressed a button yet they
press the button we set it to true and
then when the data comes back from flash
we set it back two balls because there's
no more processing happening that's why
you see processing that visible equals
false and the next thing is very much
just like the one on top the code on top
to request entries it's the same thing
so I'm not going to discuss this again
this is all the same exact crap complete
handler and everything this sends
variables just like the other one the
only thing different with this code is
that there's a submit button listener
and a function it's called validate and
send and in that function you want to
make sure that the name field is not
empty the location field is not empty
and the message text is not empty
because if it is we give them an error
message which is set with our nice red
text format indicating ever else if
there's no messages when they press
submit there's no ever messages and all
the fields are filled in correctly like
we want then we can make the processing
movieclips a true to show it because now
blasters talking to PHP so we got to
show that processing movie clip then we
set the variables that are going to get
sent to PHP which is the name text the
user location which text and the user
message those three things are going to
get sent to PHP right here on this line
and status text field you want to say
waiting for server connection now the
last thing about this script here is the
on complete hand
which is very much like the one on top
so when the person chat up when the
person leaves a comment you want to make
sure that their comment is shown right
when they leave it so that's why we set
this complete handler up and we bring
the entire guest book body back in
renewed with their comment in it and the
return message is also coming back from
PHP which I'll show you right now in the
PHP file and that's pretty much all the
script for the flash side of things it's
not too bad everything has a purpose ok
now let's little bit is this PHP file
which handles the talking back and forth
between flash and mysql so now what
we're going to do is first thing is
connect to our MySQL database and this
is important for you to put your
hostname the MySQL database host name
mysql database username your username
for the minus QL database the password
which is the username password or the
database itself is password and then the
database name goes right there so those
four pieces of information is what you
need and it's usually available at your
host if you can't find it you go into
their help section and type in search to
help help section 4 connect to mysql and
they'll explain it and first thing we do
is we listen for the comm type which I
discussed when I was explaining the
ActionScript 3 we talked about the comm
type first one is parse comment so
basically this all of this code right
here inside of that parse comment if
condition this runs only if the comm
type is parse comment if it's not this
code won't run at all down here if the
comm type is requests entries remember
we request the entries initially for
display that's the section of code so if
the comp type from flash is telling us
is request entries we only run the code
inside this if conditional see if
condition there or if the comp type is
request entries and there's an if
condition here for the comp type is
parsed comment so either section of code
only runs if flash is requesting that
certain thing let's do the let's talk
about the request entry section which is
at the bottom this is for requesting the
initial entries and what we're going to
do first thing is we have to set up
initialize the body variable and the
body variable is basically all the
comments lumped into one variable that
gets sent back into flash that way you
don't have to send a million things into
flash and try to have flash actionscript
parse it when it's a lot easier just to
do it in your PHP loop and you can set
up and I set that HTML property HTML
text property of the flash feels that
way you can handle my font the font
settings that I want see I'm putting
HTML attributes on those on this text so
I can color it make it any size I want
put HTML code in there to style it up
and you can see I'm underlining certain
things making certain things bold so you
can put your HTML text right all in the
body there so the name the location the
post date all gets put into one line and
then the comment is in a break you put a
line break there in the comments under
all that stuff and then you put to break
tags right there so that's how the body
gets sent back in a flash but to attain
that body you have to query the database
select all and guestbook and order it by
the post date descending that way the
first the last latest comment will be on
top and then after your while loop where
all those MySQL results are coming in
and they're building into when you when
you put the dot equals that means you're
compounding this body variable
so not only one name location and post
date and comment will be sent in there
there could be a thousand it'll all go
in so what you do after that while loop
after all that data gets compounded into
that body variable use free the MySQL
result you close the MySQL connection
you echo the return body back to flash
and then you exit this PHP script it's
that simple okay now we're almost done
here we just have to talk about what
happens if the calm type from flash is
parse comment so that means if somebody
leaves a comment in your guest book we
take the posted data from flash which is
username usually location and user
message we put it into local PHP
variables called name location and
comment now I put some messages in here
for you guys read these comments that I
put in and you can use these lines if
need be what they'll do is preserve line
breaks and paragraphs using this nl2br
and htmlspecialchars on that post on the
comment rather let's change that post
comment and comment and right above that
you can use MySQL real escape string
since you connect it to the database
already and what mysql real escape
screen does is it filters the user input
a little bit further using PHP if you
allow more characters than i do in the
flash input text field you saw i only
allowed numbers space and a through z I
don't allow any funny characters but if
you want to you can uncomment these
lines and in the name field it will use
the MySQL real escape string function on
it which will cleanse it of a lot of SQL
injection attacks okay so what we do
after that after everything's filtered
it exactly the way you want and you've
gathered the posted data from flash then
all you do is insert it here using a
MySQL query to insert it into the guest
book table that's in your database the
name the post date that
and their location that's it and then
the values for those fields these are
the field names in the MySQL database
these are the values that you're
sticking in each one of those fields if
it happens to fail you'll see a MySQL
error on screen but it shouldn't fail if
you got everything set up right then all
we do is the same thing we did in the
bottom we set the body variable SQL the
database to select all the guestbook
entries then in the while loop we render
out all those results compound them into
the body variable once again free the
MySQL result close the MySQL connection
and then echo the data into flash this
time it says entry has been added
successfully and you put their name
gives it a nice personal touch you say
thanks and you send in the return body
which equals all these comments
compounded together and you exit the
script so each section is independent
and each calm type handles a different
thing in the flash application so that
about wraps it up now you know how to
make a guest book a flash that has auto
instant updating right when the person
leaves a comment and we've got some more
tutorials to come for asgard a couple
for some other folks that are developed
PHP members you got any problem with
this code or anything you can't
understand what's going on somewhere
maybe you wanted to do a little bit
something different but not too
different you can come to the develop
PHP forums and ask a question okay so
we'll see you in the next to where I
think we're going to cover fireworks and
Dreamweaver workflow designing a site
fully in fireworks and then making it
maintainable and Dreamweaver after you
get the whole shell design made in
fireworks you want to maintain an
expanded in Dreamweaver i'm going to
show you my little tricks for doing all
that so stay tuned buddies</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>