<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Ajax Pagination Tutorial PHP MySQL Database Results Paged With JavaScript | Coder Coacher - Coaching Coders</title><meta content="Ajax Pagination Tutorial PHP MySQL Database Results Paged With JavaScript - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Adam-Khoury/">Adam Khoury</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Ajax Pagination Tutorial PHP MySQL Database Results Paged With JavaScript</b></h2><h5 class="post__date">2013-08-19</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/14lGC4r1HKE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">in this video lesson and corresponding
code example you can learn to program
core-ajax pagination we will not be
using any third-party frameworks or code
libraries for PHP or JavaScript to
accomplish this simple task this way we
can pass along the highest level of
programming education and core code
inside on this topic to you so needless
to say after you complete this lesson
you'll possess a much greater level of
understanding than your counterparts who
might use third-party frameworks to
accomplish Ajax PHP pagination first
let's take a look at the live demo and
the finished product of the lesson and
by default when the page first loads we
ask Ajax for the first page worth of
data then the user can gain access to
all the subsequent pages just by
pressing this arrow so it says page one
of eleven pages so we're on page one of
eleven now I'm going to page two you'll
see for a second it says loading results
there's page 3 of 11 and when you're off
of page 1 we give them a back arrow let
me get back to page 1 there's no back
arrow because you can't go further
previously than 1 so we go to page 2 and
we have forward and back so when we get
all the way to page 11 10 11 then we get
no forward or next button arrow so you
see how that logic works and you can
make it to where there's a disabled
button there that doesn't work if you
don't want the button to just disappear
so if we go back to page 10 we get both
buttons once again see how that works so
when the page first loads it gets an
initial Ajax request to gather the first
page worth of data and this page never
reloads and then when the person is
clicking to go to different pages that's
when an ajax request is fired off it's a
function that has an ajax request in it
that simply asked PHP for another page
and we'll show you how that's done right
now ok we're going to start with the
bare bones of an html5 web document and
mine is named Ajax pagination example
dot PHP so I have a PHP page that's
pretty much empty I'm going to start in
the body element by putting the
few elements that we need for this
application in first I'll put a div I'm
going to give that div an ID of results
box and I'll copy that div and right on
top of it place another one and this one
I want to have an ID of pagination
controls so all we have in our body
element so far is pagination controls
div and the results box div the results
is where the whole list of data is going
to display and pagination controls is
where the forward and next buttons will
show for the user now under those two
we're going to put in a script element
make sure we close that script element
and initially when the page loads what
we're going to do is run a function
called request page and this is a custom
function that we're going to program in
just a second and we're going to send
one parameter it's going to have one
argument sent through it which is one so
by default the page is going to load
first page worth of data from the
pagination results and that first page
is going to be an ajax request and
that's all we're going to need for the
HTML of this application so those three
lines and you can expand and enhance
that later on now what we're going to do
is place PHP in the top that has some
code in it right here I'm going to
explain every bit of code and I also
commented the code out for you so what
we're going to do first is connect to
our database here and this is so that we
can load the first page worth of data
and also send some important variable
data through the Ajax request each time
that we need a new page loaded in or a
new pagination result set loaded into
the container
results box here so the first thing we
do is connect to our database here and
we're using MySQL I for the database
communication so just like the last
tutorial that we did I was using my
testimonials database to show you guys a
live example and it's the same thing
I've done in this lesson so I'm
selecting the count just to get the full
count of how many testimonials there are
in my testimonials table so in my
database I have a testimonials table and
one of the fields is approved and that's
an enum field that can be either 0 or 1
but I want to make sure approved is
equal to 1 to only get the approved
testimonials out or if you want to say
where username equals Joe Schmoe or
whatever so you can count all the roads
that you want for a specific thing then
we run the query using MySQL I query and
we set our database connection variable
here and the second parameter is our SQL
syntax which is this then we fetch the
row we have a row variable created from
that and we get the total rows variable
established by saying row and its first
and only index in its array which will
be the count because that's all we
requested from this query is the count
so now we have the total rows now we're
going to specify how many results per
page that we want and that's going to be
10 and this is a variable that's going
to be sent through the Ajax request each
time so you just establish that here
however many results you want per page
then the next variable tells us the page
number of our last page and we name that
variable last and that's equal to the
seal function which is a way to round a
number up because we don't want a
decimal number and we take the total
rows and divide that by the RPP the rows
per page results per page and that gives
you the number which is the last page in
the result set and then this next little
bit of code make sure that the last
variable cannot be less than 1 so we say
if the last page is less than 1 then
last is equal to 1 we just don't want it
to be a 0 or a negative number and
finally we close the MySQL eye database
connection here and that's all the PHP
that you're going to need in this side
of the application the rest of your PHP
is going to be in a separate parser that
I've called pagination parser and I'll
show you that file in just a moment so
the last thing we need on the client
side of our application in the Ajax page
donation example dot PHP is some
JavaScript here in the head tag so let's
go ahead and put in another script
element in the head element of our page
and make sure we close that script
element now we're going to need a
function called request page so we type
in function request page open close
parenthesis put an opening curly brace
go down a couple of lines and put in a
closing curly brace and
there's your function nest all set up
now this function is taking in one
parameter as you can see when the page
loads we're asking it to load in page 1
into the results box container but we're
running the request page function with a
parameter or an argument of 1 so we're
going to pick up that argument as the
variable PN which stands for page number
now the first thing within that function
is we're going to assign a couple of
object variables which are object
references for the results box div and
the pagination controls div which you
can see right here pagination controls
and results box so that way we can
affect their inner HTML more easily by
just using these variables instead of
saying document I get element by ID and
then the ID name we can just use this
variable here to affect their inner HTML
when we need to or do anything we want
to those objects so we're going to copy
the results box variable and we're going
to say results box dot inner HTML is
equal to the page is loading message or
whatever loading message you want to
have in there you put loading results
dot dot or you can have an animated gif
show up if you want to have a little fan
loader or something you can just put the
animated gif image tag right there in
the inner HTML of the results box and
that way while the new page worth of
data is loading into that container you
can give some kind of animation or any
words you want whatever I'm just going
to put in the words loading results dot
dot dot all right I'm just going to
collapse this PHP up because we're
finished working with that then right
under the loading results message after
the loading results message gets put
into the results box we're going to have
an HTTP request so we're going to pop
that request in here and this is the
code that I just popped into place and
you can see the HR variable that's
created is a new xmlhttprequest object
so with this instance of an HTTP request
object we can run an ajax call so this
ajax object is going to post variables
to a script called pagination parser dot
PHP which is the script that I have
right here ready to go and I'm going to
show you guys that in a moment
and what that script is designed to do
is just gather up a certain result set
from the database using the limit syntax
in the SQL query it's a very simple
script so that script is geared to just
send back pretty much ten results and
those results will be corresponding to
whatever page is being requested out of
the result set and you can name your
parser whatever you want you can also
make the actual page that you're on
right here the parser if you program it
correctly but it might be more helpful
just to have an external pagination
parser dot PHP that way you can keep
things a little more modular and we set
the content type to application slash
form URL encoded variables because we're
going to be sending three variables
through this Ajax request right here
that's why we execute the send function
or the send method on that Ajax object
very last we establish some specifics
for the HR object and then we send it
now another configuration that we need
for this a jecht object is the
onreadystatechange function
now this onreadystatechange function and
it's corresponding if condition is just
to see if the Ajax request has reached
PHP and has come back successful with
data so within this if condition is
basically where you can render your
results that Ajax acquired that Ajax got
from PHP and you can get that in the HR
dot response text property of the Ajax
instance so the HR dot response text is
all the data that PHP has echoed back to
this request now the reason why you see
me splitting that data is because I was
putting double bars between all of the
the individual items coming out of the
database that way I can just easily
split that whole string worth of data
and it's kind of formed into a custom
array that I laid out and I'll show you
that in PHP when we go to the pagination
parser in just a second so the
pagination parser script is spitting
back a long string of data and some of
that data is separated by double bars
and that's where my array of
sar so I split that response text that
long string of data that PHP is giving
me by the double bars and that will give
me a data array so once I have this data
array I can then loop over that array
and then spit out some results so before
I run this for loop over my data array
I'm just going to establish an HTML
output variable because what I'm doing
inside of the for loop is appending to
that HTML output variable using the plus
equal syntax that way I can put all of
those 10 items in the array just by
using this one line within the for loop
okay so once we have the return data
from PHP we put that into a data array
by using the split method on the
response text then we're going to
iterate over that data array with a for
loop and you'd want to study how for
loops work so you can fully understand
this script but if you already know
we're just going to establish the I
variable as 0 then we're going to say
the condition is while I is less than
the data arrays length minus 1 then
we're going to I plus plus and keep
running the loop so mine my data array
is set up to bring back ten items so we
just want this four loop to run ten
times over that array now this last
little bit here where you see this item
array for each item being derived by
each of these array items in the data
array they're being split by the single
bar so I have the single bar character
splitting up all the specific little
variables for each row of results so
basically each item array that's going
to have the item ID it's going to have
the item name or whatever title whatever
variables that you want to send over for
each item so we acquire the item array
and then finally in the HTML output we
keep compounding to that variable
whatever ID for the item that's coming
through and I also put another variable
which is the second element in the index
of that array now once I show you what
PHP is echoing back to Ajax it'll make
more sense to you alright so after that
for loop then we simply take the results
box inner HT
and we pack in all of the HTML output
into that results box now I'll show you
a written representation of what would
be in each item array so let me just put
a little comment here and it would look
like this
whatever ID of that item then it'll have
a single bar and then the title another
single bar the date and then some data
or whatever so that's what each of those
rows are coming back as is an item array
and I have bars that I'm putting in
between each of the variables that way I
can split them easily in JavaScript when
all that data that long data string gets
back so basically I'm splitting a long
data string twice using double bars the
first time and then single bar is the
second time to get to each individual
array so it's kind of like a
multi-dimensional array without any
associative identifiers and this ID
number gets accessed by using the item
array object variable here and
specifying its first element index and
we get the title of the name this
variable by using the second element
index and you can get the date by using
the two and the data or text by using
the three so this is three two one zero
alright so that's how the data arrays or
the item arrays would be set up then
finally down at the bottom we have the
hrs end method which is the send method
for the Ajax object and we're sending
three variables to PHP each time this
request page function is run the first
variable is results per page that means
how many results we want per page in our
case we made it 10 and we're sending the
last we want a variable for the last
page to be sent so we're sending the
last page variable and then the page
number itself that the user is
requesting to go to and that's how the
Ajax functionality is initiated through
the send method so nothing none of this
code is actually going to matter or
execute until you run the send method
okay so then underneath that
underneath our ajax.request here then
we're going to have to change the
pagination controls so let me go ahead
and collapse up the Ajax element or the
Ajax functionality then I put a little
comment that says changed innate
pagination controls because each time
the request page function is executed we
have to change the pagination controls
to make the buttons go to different
pages so first thing we do is establish
a pagination controls variable as empty
and the next thing we do is we set an if
condition and only if there is more than
one page worth of results we're going to
give the user pagination controls only
if there's more than one page worth of
results because if there's only one page
of results maybe you only have six
results so you'll only have the first
page then there's no reason to give them
pagination controls to go back and forth
to other pages but like I said you could
put other conditions in here to put like
disabled buttons like dead buttons that
would person can see but not click but
I'd rather just give them nothing at all
if there's no reason to go to anything
so within the condition to check to see
if there's more than one page we're
going to run another condition to see if
the page number is greater than one
because if the page number is greater
than one then we need a previous button
so that's what this button is set up to
be this is our previous button that
sends the user to the previous page only
if we're not on page one anymore we have
to be on page two or greater to get the
previous button and we get the previous
button by running the request page
function which is the Ajax mechanism and
we send the variable the numeric
variable of whatever the page number is
minus one that's how you get to the
previous page then inside of the page
nation controls variable we compound
another little bit of data that will
show in between the two buttons and that
will say page whatever the page number
is of however many pages there are and I
just put a little bit of space around
them using the nbsp but you'll style
these thing
anyway you want using CSS then the last
little bit is just to see if we need the
next button so we check to see if the
page number is not equal to the last
page that means we're not on the last
page yet so we need next button and
putting the next button in place is very
similar to the previous button but all
you do is you put the word next or I
have the bracket here the greater than
bracket and that's like a next symbol
that's kind of universal for next and we
put PN plus one to make a go to the next
page instead of PS instead of PN minus
one to go to the previous page so it's
pretty straightforward and then you take
the pagination controls element here and
you affect its inner HTML property to
pack all of those pagination controls
into that element on the page so
basically every time this request page
function runs it's going to know what
page the user wants to go to and it's
going to establish all the logic that
you need for making the request for all
that data from PHP we're going to use
Ajax for that and then you change the
pagination controls here directly after
your Ajax request so there is the whole
length of the script for the client side
of things and here I'll even open this
one up and this is the initial PHP that
we need just to gather up some variables
and run the first request alright so
that is the full extent of the client
side of that application now the last
thing we're going to do is discuss the
pagination parser dot PHP script and
this is a script that only gets accessed
by the Ajax request and what it's geared
to do is only send back one page worth
of data corresponding to the number of
the page number that's being sent in
that's being posted to this script and
that's what gets sent back to the Ajax
request from PHP so the first thing we
do is we put a comment that says make
the script run only if there's a page
number posted to the script so we can
say if is set the posted variable of
page number then all of the code in here
will execute if not none of the
code will execute so within that
condition we're going to first gather up
three posted variables remember in the
Ajax pagination example that PHP in the
Ajax request we're sending all of these
three variables to the PHP script and
here we're scooping up those variables
into local variables first one will name
results per page RPP an extra one last
that represents the last page in the
result set and PN represents the page
number and those are all posted
variables coming from the Ajax request
now this next little bit of code make
sure that the page number is not below
one or more than our last page so we say
if the page number is less than one
we're going to make the page number
variable equal to one because it can
never be zero or a negative number else
if the page number is greater than the
last page we're going to make the page
number equal to the last page because if
we only have eleven pages we don't want
a reference to a page twelve or a page
thirteen because that will give us an
empty result set it just won't exist
then the very next thing is we connect
to our database so you connect to your
database using MySQL I here and then the
very next line is we set the limit which
is the range of rows the range of items
to query from the database for the
chosen page number and if you want to
really understand how pagination works
limit is a big part of how pagination
works so research the limit syntax in
SQL and database queries to fully
understand how you can limit a result
set by a range of numbers by putting two
numbers in place you can get a certain
range of results out of the database and
not all of them so the limit
functionality can get one or two numbers
applied to it if you put one number you
just get that many results out of the
database if you give it two numbers you
get a range of results in between two
numbers okay so now this is our query
again this time it's just grabbing one
page worth of rows by applying the
so here's our query syntax so we're
going to select certain variables or
certain columns from our database table
which is named testimonials I'm
selecting the ID field first name last
name date field from my testimonials
table where approved is equal to 1 then
I'm going to order that by ID descending
and my limit syntax is then placed onto
the very end and I run that query here
and it has a while loop that loops over
this result set so this way we can pack
a whole bunch of things into this data
string and remember when I was
referencing to a long string of data
that we're going to get back to
JavaScript from PHP this is where that
long string of data is made now what you
can do is use something like JSON or XML
if you want to use that kind of code
structure to send this all this variable
data back all this array data back or
you can just use a string like I'm doing
all I'm doing is taking a string and
making it into array data in a custom
sort of way by using single pipe and
double pipe so that means I have a long
string of data that I can then easily
chop up and disassemble back into
variable form back in JavaScript
so this data string variable is
established here with nothing in it at
first then in this while loop is where
we compound into that data string each
one of the individual strings that holds
the array data for each row so I can
send each ID and then I put single pipe
first name from the database field
single pipe last name from the database
field then single pipe and you can see
how I'm separating each of the
individual variables with single pipe
then at the very end I put the double
pipe to separate it from the next row
worth of data so this will get popped in
there 10 times so basically you'll have
a long string that looks like this it'll
look like let's see that and then that
and then that
ten times in there and that will give
you your ten rows that you need and then
in JavaScript you can just break that
down using split see how I break it down
by the double pipes the first time and
then inside of the for loop I break it
down by the single pipe the next time to
get it all the individual variable data
here that's being sent so like I said if
you want to use a different approach
that will make your script a little more
bulky actually you can use JSON or XML
format or you can use a very lean method
like mine if it's possible for you and
you can just use pipes just use the pipe
symbol or whatever custom delimiter you
want you can make these say oops not and
then every time if you split by poops
knot instead of splitting by the bar
then you'll get access so it doesn't
have to be the bar symbol there it could
be any custom delimiter you want or in
this case we're we're using the double
pipes you can put something like that
and then that and then on this side put
that and that and that can be your
custom delimiter it doesn't have to be
just double pipes it could be anything
you want but in this case I'm just using
double pipes and then to split the
individual variable data I just use a
single pipe as delimiter then finally we
close the database connection using
MySQL I close on the database connection
variable and then we echo the results
back to Ajax which is the long string of
data and then JavaScript can break that
data down by using the split method you
could also probably just send all of
your HTML echo all HTML here back to
JavaScript but I find it easier to let
JavaScript do the individual parsing of
the array data that's coming back from
the database result set so you can break
it down here into HTML and then send it
back or you can do like I did and use
JavaScript to set up your HTML all right
so that's both files fully explained
okay so that wraps up Ajax and PHP
pagination core programming so we're not
using any third-party libraries and it's
all our own code
I hope I've made everything clear you
have any questions or considerations
just type a comment below if you could
take a second to rate this video up I
would appreciate that and if you're not
subscribed to my channel go ahead and
subscribe and you'll get all of the
future material that we put out thanks
for watching bye bye</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>