<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>1/3 Private Message System Tutorial for PHP MySQL Websites Web Intersect | Coder Coacher - Coaching Coders</title><meta content="1/3 Private Message System Tutorial for PHP MySQL Websites Web Intersect - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Adam-Khoury/">Adam Khoury</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>1/3 Private Message System Tutorial for PHP MySQL Websites Web Intersect</b></h2><h5 class="post__date">2010-10-05</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Y8DEOwKXimI" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">we're not going to waste any time here
we're going to go straight into private
messaging system for PHP and MySQL
member based websites whether you have a
custom community it's a little social
network going
all right the very first thing we'll
need to do is go into phpMyAdmin where
all other tables are in this database my
members table the friend request table
the blabbing table in the admin table
we're going to add one more name a
private message or PluralEyes that and
call it private messages private
messages number of fields I think 9 if
we need any more we'll add them later
and press GO then we're going to set up
this little table it's going to hold
private messages the first one is going
to be ID first field it's going to be
int so each private message that goes
into the database will have its own
unique ID
that way we can more easily deal with it
this one's going to be the good old
primary and auto increment so you want
to click Auto increment make sure that's
highlighted or selected and index
primary the next one is going to be the
two ID that's who this private message
is directed to this is going to be int
give it 11 lengths from ID this is going
to be who sent the message it's going to
be placed in this slot that's going to
be int 11 as well then times sent
date/time type subject this is going to
be bar char I guess 255 the message this
is where the message will be laid into
the database this is going to be text
that way they can put a nice healthy
message up to 10,000 characters the next
one is opened now what opened is going
to hold is a value which is going to be
a enumerated value its enumerated type
field and what we're going to do is put
0 and a 1 in between single quotes
separated by comma
this means true or false if it's zero
it's going to be false one means true so
if the person who receives the message
looks at it by clicking that subject
line and it opens up our script is going
to send to the database and update this
enumerated fields called open and that
will let us know if the person who got
the message actually viewed it or not
yet which could be a handy thing for you
for many things it's going to be a handy
thing in our system and I'll show you
why when we build it the next one is
recipient delete and this is for whether
the person who receives the message
wants to delete it or not this is going
to be enumerated as well just like this
one the same option 0 and 1 for true and
false the next one also is going to be
enumerated type field and this is going
to be sender delete so the person that
sent the message wants to remove the
message from their sent box I'm going to
give them that option send your delete
up a bad thing that's all we need we're
good to go
now let's press save and there's the
structure of your private messages table
now with our database table all ready to
go the next step is to put a form into
the profile page so that each member of
the site will have some way to send a
private message to another member on the
site and down the road we're also going
to put it in member blocking mechanism
so if you want to block somebody they
get annoying and you can't handle them
anymore you can just choose to block
them we'll make sure they can't message
a private message or email anybody that
has them blocked right now we want to
make sure a form comes down here and
shows in that message box that we've had
waiting there for a little while now and
I've already put mine in place and let
me show you what it is so you see here
where I wrote a comment code comment
that says start div that contains the
private message form then here you say
and div that contains the message form
so you can see all of the code that I
just added to this profile PHP page is
sitting right here
within these lines and no more yet this
is all I placed in and it's a form which
is sent to use it's set to use the
jQuery based Ajax function so once this
function fires off we're calling jQuery
its uses Ajax mechanisms to send data
without refreshing the page or anything
instantly to a PHP script and it's going
to send data back to this page without
the browser refreshing and it should all
happen in a split second and you can see
the values I have going here the name of
the form is p.m. form it has that ID and
name it's a post method and you can see
the action is set to run a JavaScript
function called send p.m. we're not
sending any arguments through that
function all of the variables are going
to be laid in to that function through
the actual form itself we're going to
grab all the variables from the form
itself so we'll make sure the person
typed in a message make sure they type
it in a subject and if they haven't
typed those two things we'll give them
an error message but basically here is
the HTML side of the things you want
here and there's also a close but so I'm
going to put this up and see what it
looks like I'm going to FTP it we'll
take a gander at it okay so here I am at
the home page I'm going to click on
errand and I'm going to click message
here and see that's what we have sending
private message to Aaron there's the
subject line where I can type in hey
dude and then say hi or whatever I can
put 10,000 characters it there I want
and I the way we're going to parse it
out I can also put code so if I wanted
to put a script tag in there I could do
that it's going to change those tags to
HTML entities that way they won't
actually process when he goes to read
the message he'll see thee he'll see the
tag the way they're supposed to look but
it will be an HTML representation of
that tag and not the actual tag itself
on the page so you can put malicious
script tags in there they won't perform
their action they will simply be
viewable and we can also make it to
where we can just strip the word script
altogether
if it happens to be surrounded by
brackets like that I'll show you the
parsing don't worry about it so we'll do
that in part two if you guys are
interested in fully understanding how
this private messaging system is going
to work with Ajax and jQuery and all
that regarding the inbox the sent box
and the form for sending then meet back
up with me for part two and we'll
continue I think to our tool we'll wrap
it up</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>