<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Web Intersect Friend Remove Bug Documented For Educational Reference | Coder Coacher - Coaching Coders</title><meta content="Web Intersect Friend Remove Bug Documented For Educational Reference - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Adam-Khoury/">Adam Khoury</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Web Intersect Friend Remove Bug Documented For Educational Reference</b></h2><h5 class="post__date">2010-09-19</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/_y3SsjjHaOU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello everybody this is just going to be
a quick video about the French system
that we recently programmed into web
intersect well if you're not following
that series or you're not programming
with us doing that then this video is
not going to serve you much purpose
other than the fact you might learn
something about PHP arrays now the
reason why I'm making this video is
because it's a pretty important bug that
I found in the front system that i
created and you'll see it's demonstrated
here on this page this is the best way
to show it to you and i already
programmed in the fix for it and I'm
going to re-release the source version
1.3 2 i'm going to re-apply this source
code them and delete the one that's
there and put the fixed one in version
1.3 2 so anybody that happened to have
downloaded version 1.3 2 over the last
couple of days since we put it out you
might want to go ahead and redownload
the new package or thoroughly listen to
what I'm saying and apply this new code
but in the new package that I put up by
the time you're watching this video the
new package will be up so you can go and
download it now and it will have the new
adjustments in it for the friend system
but let me tell you what I'm talking
about so you guys understand the problem
okay so we have two members and they're
both friends with each other this member
has an ID of 23 on the site the second
member has an ID of one so say he was
the first member to join and really what
their IDs are is irrelevant to the
problem but what the problem was was say
this member has this first member you
can see he has member ID one in his list
he has member ID 1 1 275 374 2 and 2 3 1
2 2 as friends so he has one two three
four friends and the second member has
one two three friends you can see that
string is too limited by commas there
and that's what signifies the separation
of commons is what signifies each
member's ID that's there
friend okay what was happening was the
way I set it up was I was just using a
string replace to pull the value for a
member of One or let's say if these
members wanted to unfriend from each
other there was a problem where remember
23s array when we plucked one out it
would also pluck this one and this one
messing up this friends ID so he would
lose that Brendan it would be replaced
by some friend he didn't even know or
whatever and the same with this one this
one would get plucked off the end of
this 2753 making this members ID wrong
so he would have after he removed this
member from his list he would have
messed up this one and this one's 742
would be unaffected because there's no
one in there you get it that was the bug
that's the problem and the same with
when this guy goes to remove 23 from his
list right here this member here with
2-3 56 that 23 was getting removed as
well and it's just because I was in a
hurry to get things done and I wasn't
really thinking and there's a better way
to pluck these ray items out of there
and so I coated it out and this is how
it works now so you'll see when the the
original arrays are listed out here
here's member ID 23 render a here's
member ID 1 its friend array you can see
these are the originals he has three
friends and he has four friends now here
we successfully plucked out each from
the others array so you can see in
member ID 23s array here remember ID of
one is gone we plucked his key out his
key was zero and we plucked it out so
you can see key is zero is not here and
the same on this one key 0 and 2 or here
but key one which was value of 23 was
removed from the other guys list so
that's a more effective way
to pluck those array items out of there
and then here down at the bottom you can
see I re-echoed out the the new adjusted
arrays and let me show you now in the
code how I achieve this and it actually
makes the code slimmer the way I was
doing before was crazy because I had to
go and remove all kind of commas and
other things it wasn't it wasn't very
effective but this is much smarter okay
so those of you who wants who really
understand the code about what's all
working now I'm going to explain it so
first in our script we're gathering the
member IDs from a posted mechanism so in
this little example I just hard coded in
the member IDs now these are actually
string values but I called the variable
buddy array member 1 but at this point
this is just a string it's not an array
yet and this is how it comes out of the
database how we check it and everything
so here I'm just echoing out the string
that holds all the buddies the limited
by commas then what we do is we run
explode on each one of those and we
explode by the delimited comma that
makes an array of each one of those
member IDs out of each person's array or
out of each member string so once we
have an official array we can check see
if each person is in fact in each
other's array and if they're not we echo
not in list and we exit the script
because both people should have the
other people as a friend if they're
going to unfriend each other or one is
going to unfriend the other all right so
now the the new way I approached it was
doing a for each loop over that array
and where I found that value to match
the one we want to remove that's where I
unset that key so I put an if condition
here to say if value in this loop is
equal to member two in member ones array
then you unset
the key that matches that value so your
unsetting you're pretty much plucking
that array item right out of the array
out of friend member ones array and then
you simply do the same thing to member
Tuesday ray but switching this remember
one and switch this remember two and
this remember to basically you just swap
it you remove remember to remember ones
array and then you remove number one
from member to the rain they're not
friends anymore and then at the end this
is where I was just repeating to show
you the new adjusted array but down at
the end after you pluck them out using
these for each loops then you can
implode using comma to add commas back
in between all of those friend IDs and
make a string out of it again and then
here is where you would put it back in
the database and update it back into the
database so those people are not friends
any longer now let me show you the way I
was doing it before I was doing all this
crazy crap so that's why we had to
change this is not going to verdict at
the oil the new programming works really
well and it's a much smarter way to
pluck the array items out of there so
I'm going to update the source package
and I just wanted to let everybody know
exactly what was going on with that and
like I said if you want to see it these
new for each loops that are plucking
members out of each other's arrays if
you want to see those are work in the
actual script well you get those
downloads no source I'm going to we're
going to do some more stuff for web
intersect pretty soon like private
messaging this whole wall thing if I go
to my profile we're going to make this
more like a wall to where I can post in
here and then people can also post on
mine say if i go to my friend already
have it halfway set up ready to do it it
says right on ryan's board i'll be able
to write and comment on his board and
eventually none of these blabs will just
be all going on the homepage will have
just showing
friends feed so only your friends
activity is what you'll see okay and
we'll also have many many many many many
more applications going into web
intersect so sit tight is a lot more to
come</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>