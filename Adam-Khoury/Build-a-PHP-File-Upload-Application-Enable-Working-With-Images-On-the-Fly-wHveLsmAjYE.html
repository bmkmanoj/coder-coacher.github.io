<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Build a PHP File Upload Application Enable Working With Images On the Fly | Coder Coacher - Coaching Coders</title><meta content="Build a PHP File Upload Application Enable Working With Images On the Fly - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Adam-Khoury/">Adam Khoury</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Build a PHP File Upload Application Enable Working With Images On the Fly</b></h2><h5 class="post__date">2011-03-16</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/wHveLsmAjYE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello neighbor and welcome back to the
mastering PHP image processing video
textbook brought to you by develop PHP
com in this lesson you will learn how to
assemble a very simple file upload
application using basic HTML and PHP now
here I have a basic HTML form that I'll
have available for you guys to copy and
paste in the description of this video
and the form is set to the action of
image upload script PHP so that is where
this form is going to send these
variables once the submit button is
pressed so naturally we have to have a
script called image upload script PHP
now the user input here is a file upload
form element with the name of uploaded
file so in our PHP script called image
upload script PHP we can simply look for
a posted variable called uploaded file
in the PHP script we're going to use a
function called move uploaded file and
that is one of the file system functions
in PHP it's not actually part of the GD
library of functions it's part of the
file system functions and it's a very
important function for PHP webmasters to
know how to use so now let's take a look
at that image upload script type PHP the
first thing that happens is we're going
to access the files global variable for
this specific file being uploaded and
create local PHP variables from the
files array of information when the
first impresses submit on that button
the files array of information is sent
to this PHP script and we can access it
by using the global variable files which
gives us access to the whole array of
information for that uploaded file like
name the temporary file name in the PHP
temp folder the file type size and the
error message for the file upload so you
can see I'm targeting uploaded file
right there in our HTML form that's the
name right there uploaded file so if you
name this poopoo just change this to
poopoo and this script will also be in
copy/paste format the Bela PHP in the
description of this video you'll find a
to it all right so we have our local PHP
variables that represent the array of
information that that uploaded file
contains so we can start some PHP image
upload error handling here the first
thing we're going to handle is if no
file was chosen so if they press the
submit button without actually browsing
for a file we're going to echo out ever
and exit else if the file size is
greater than 5 megabytes you echo out
your file was larger than 5 megabyte
size if you want to make it to where
there is no cap on the size then you can
just remove that else if statement
and carry on to this one and here we
unlink the temporary file that's in the
PHP temp folder because at that point
the upload is not going through their
image was too large so we want to make
sure it doesn't hang around in the temp
folder so you can force removal of that
image from the temp folder but just keep
in mind that anything in the temp folder
will get removed eventually all on its
own and you don't have to do anything
now the next condition is if there is no
match for a gif JPEG or PNG in the file
name that means their image was not a
dot gif or JPEG or dot PNG so if you
wanted your PHP script to do error
handling to check and see whether a file
is a gif JPEG or PNG because they might
be trying to load a dot BMP and you
might not want that kind of file if you
want it then just add it here with these
then finally else if the file error
message equals 1 that means true there
is an error with the file upload then
you can just echo out and error occurs
while processing the file try again and
then egg to the script now we end PHP
image upload error handling here that
means all the error handling is done at
that point so if everything checks out
ok at that point you can then use the
move uploaded file function to move the
file from the temporary location in the
temp folder to its new home so here I am
on my server
I have image upload script at PHP and my
file dot PHP my file has the form and
here's my uploaded script I'm just going
to create a new directory right here
call it uploads by default I think it'll
have a 0 7 5 5 2 mod setting the file
attributes that way it will
ow an image upload to go into it now
when you're using move uploaded file
there's something called a PHP any file
on your server that configures your PHP
installation and most of the time by
default it's set to two megabytes that's
the file size limit that can be uploaded
to your server you can go into your PHP
dot ini' file and change that to
whatever file size you want so you don't
have that two megabyte maximum limit on
your upload or you can use any
underscore set functions within PHP
that's a and i underscore set functions
that will help you set PHP
configurations right within your upload
scripts if you need to do that if you
don't have access to the PHP any
configuration file on your server some
people don't have access to that PHP any
configuration file so they have to use
that any underscore set functions within
PHP to set those kind of configurations
directly within their PHP scripts so I
have to talk so much but some people
might run into that problem and I don't
want a whole lot of questions from this
series so I'm trying to cover all the
bases because a lot of people will run
into that two megabyte max limit and
they'll be like well my picture go into
my folder is three megabytes because
it's three megabytes and you limit set
to two megabytes that's why so now they
won't have that question they won't have
that problem because they'll set there
any configurations if they want to
upload something bigger than two
megabytes geez alright so what we do is
we put the move uploaded file function
into a variable called move result
because the move uploaded file function
is going to return a value of either
true or false it will return true if it
actually moves that uploaded file it
will return false if it fails to
removing the uploaded file which is
temporarily living in the PHP temp
folder to its to its new destination on
the server which is in my uploads folder
and we keep its original file name if
you wanted to rename it that's where you
would rename it right there you can call
it poopoo that JPEG if you want or you
can just keep the original name that it
had upon upload and that's what we're
gonna do here so now that we know move
upload
vile returns a result of either true or
false we can make an evaluation saying
if move result is not equal to true some
kind of error happened unlink the file
from the temp folder and exit the script
now if move results is equal to true the
script will keep running so the first
thing we'll do is unlink the file from
the temporary folder because move
uploaded file already put it into its
new home here so you can force removal
of the file from the temporary folder
since it's not needed anymore and then
display some things to yourself so you
can see what's happening for testing
purposes now you have a PHP file upload
application that you've created now we
can move forward with showing people how
to resize on the fly crop on the fly
watermark and everything like that
because now we're at the point where
most webmasters are when they allow
upload they have a PHP script that uses
move uploaded file to put a file that
somebody's uploading on their server now
we can move forward with advanced topics
using the GD library in the next lesson
we're going to jump right on resizing
because that's probably the most popular
thing that a webmaster would want to
know how to do when they begin with PHP
scripting is learning how to make
somebody's huge image that they're
uploading nice and small and manageable
for the website so you just go to my
file dot PHP with your browser and
you'll see your little form sitting
there your basic HTML form you choose
the file that you want and in this case
I have a picture here called my picture
it's a JPEG file and it's really big
it's one point two four megabytes you
can see the dimensions on it's there so
I'm going to upload that one I just have
to prove to you guys that the script is
working because the line Oh a lot of
people are going to have problems
because always a lot of people have
problems I don't know why maybe they
grabbed my script and they remove a very
important semicolon or dot somewhere I
don't know what the hell is going on but
some people have problems with my
scripts and I just want to prove that
I'm on a regular PHP server but the
regular PHP installation PHP 5.0 and
everything works just fine alright I'm
going to press upload it you can see the
Chrome gives you a nice upload progress
percent down there at the bottom you see
that pretty nice huh and that nice
little round
cool thing actually that might be
Windows yeah I think that's Windows I
don't know who's doing that but anyways
alright so there you go the file name my
picture that jpg was uploaded
successfully it is 1 million three
hundred nine thousand eight hundred
twelve bytes in size it is image JPEG
type of file and the error message
output for this upload is zero means
false that means it worked now I go to
your server you look in your uploads
folder hey what do you know there's my
picture that jpg upload it all on its
own
and you can check your uploads folders
file attributes see mine set to seven
five five that's good enough to allow
upload me okey cancel that so now that
we have this laid out and everybody has
their hands on it we can all move
forward with the more advanced topics
like resizing cropping watermarking all
that good stuff</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>