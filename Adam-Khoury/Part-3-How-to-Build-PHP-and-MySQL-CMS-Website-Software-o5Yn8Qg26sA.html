<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Part 3: How to Build PHP and MySQL CMS Website Software | Coder Coacher - Coaching Coders</title><meta content="Part 3: How to Build PHP and MySQL CMS Website Software - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Adam-Khoury/">Adam Khoury</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Part 3: How to Build PHP and MySQL CMS Website Software</b></h2><h5 class="post__date">2009-09-13</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/o5Yn8Qg26sA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">welcome to part three of building custom
content management system websites using
PHP and MySQL and here we are back at
our index dot PHP page and I added a
couple of little design tweaks put
borders around all these table cells for
the menu system body and footer areas
and you can see in the code it's right
in line this style attribute or the
style property is set on this table
column and which you can also give this
just give this table column a a class
and then put the styling in the CSS up
top here and if you even want to go a
little further you take all this CSS and
you put it in a CSS file and then you
just link to that CSS file up here in
the head of the website which I have
plenty of tutorials on how to do that
web intersect was set up that way where
use the external stylesheet CSS
stylesheet but in this one I just went
the quick route route and put it in line
and if you ever get to the point to
where you're letting clients or
customers or you want yourself to adapt
these style values then you can set up
forms for that when you get more
advanced you know set up forms change
all the styling from the admin Center in
the backend let's say we go here to
common tab and we put a link in and we
want the text to say let's say we know
there's going to be a home link it's
okay
okay so now we don't want it to be that
dark blue or that standard blue link so
all we have to do is go into the page
properties down here and let's set in
the CSS appearance section know the
links CSS will go with link color maybe
a nice beige go to the color picker I
want the links to be like that and then
when you roll over them we want them to
turn white active mm-make active stay
white and visited let's make it I don't
want visited to turn color so I'm going
to leave it like that always underline
only on roll over show underline only on
roll over press ok or apply you can see
it changed press okay okay so now the
links will have underlined when they're
rolled over and the Mouse users mouse
rolls over them and they'll turn white
and so that's in the CSS now you can go
into the CSS section in the head of the
document and you can see it added these
a a identifier which is with links on
the page and it gives them all of their
styling for each instance or for each
state visited however active and regular
okay so that's how that works and now
that's all setup but whenever links are
put on the site they'll be that color so
if somebody in the WYSIWYG in the text
edit of the rich text editor that'll be
in the admin Center if they make a link
on the page it will have that
value or they can set a custom color
around it using the color picker in
features of the WYSIWYG alright so now
we have home and that's perfect
that's what we want so let's grab this
control X just take it right out of
there and then we are back to what we
had there in the code view watch how
easy it is to I don't really want to
close the connection here yet let me
show you how easy it is to render this
magic menu okay so what we'll do is link
to yeah we can just go straight to index
and we'll make it except the variable to
make all the pages use this one page to
render the whole site out basically
let's see in next time PHP and then the
search engines it would be seen as many
pages because they each have a different
URL right here like I'm about to make it
let's say PID equals this variable of
PID that we created up here put that
right in there but around that we have
to put single quote space dot space
space dot space single quote to kind of
encapsulate it there so it will render
correctly okay now over render as the
variable and not that dollar sign PID
the variable will be whichever ID for
whichever page so far in the database we
have two pages so it will be the ID one
and two coming out so in the long run
not in long run very soon here I'm going
to make these pages render upon which
variable it's looking for somebody comes
to the home page their first visiting
the site they just come to the home page
we're going to make it have the home
page displaying by default they click
any links on the side the whole site
will change up okay so let's see all
right let's explain this line by line
okay so this loop here this whole loop
from let's see there's the include so
basically what we do is from lines three
to really from 5 to 17 we're rendering
out the menu the main menu using a while
loop
and let me explain the code right now so
I claim session start because we're
going to be at this point we really
don't need that in it's not going to
hurt right now but we are going to need
it eventually so I'm just going to leave
it there we're going to be using some
session variables and possibly if not
I'll remove it and then we connect to
our scripts folder and that connect to
MySQL little script that we wrote that
connects to our database so we go into
the scripts folder and we connect to
MySQL through that file and you can make
this require once but I'm just going to
use include once maybe make a my own
custom message if there's no variable
set now let's make it require because
it's going to need it ok and or you can
make it include once and then if it
doesn't actually grab the file and
connect successfully you can make your
own custom error messages and display
but I'm just going to make it require
once so if it doesn't connect to it the
page won't run at all okay so now on
line 6 here what I did was I set up my
SQL command which is basically packing
the SQL for the query into this variable
so the SQL with my query is right here
in between these double quotes and it
gets all that that string right there
that string of text gets packed into
this variable okay and what we're doing
there is we're selecting the ID field
and the link label field that we made in
PHP myadmin here remember
bring this down some we had the page ID
right there we're grabbing that and the
page the page is link label it's all we
need for rendering out the menu is its
ID it's unique ID in the database and
its link label and so we grab those two
things we select ID link label from
pages which is the table the name of
that table is pages see and we order by
page order ascending so here we have the
page order if we browse we'll see home
is number one and page order and about
is number two that's how that works okay
so now on the next line is the actual
query executing the query and this
variable at this line actually right
here when this variable is packed with
this MySQL query function then it
executes so what we're saying in the
query is we're using my connection which
is in the connection file and then we
run the MySQL command so you need when
you're using the MySQL I family function
or function
family of functions instead of the
regular MySQL family of functions you
have to set the connection here and then
separate that with comma and then put
your MySQL query which you can just have
all of this data right here that I have
highlighted right now right here but
it's easier to just throw a variable in
there pack it all into a variable and
throw it right there so that's how that
works and if the connection fails or the
query fails rather it will die and then
minus QL error will display for you it's
good for debugging
okay so we set the query into this
variable we execute the query here now
we're going to initialize the menu
display variable which is going to be a
variable that is compounded within the
wild loop to add many many many items as
many as you have that's in the query the
result set from the query so here we
initialize that menu display variable
there and we run a while loop on the on
the MySQL query and we use MySQL I fetch
array and we claim row as the row
identifier the field identifier so all
we do is we output or we rather we
access the fields that we want and we
pack those into local PHP variables here
just for easier use in the code below
here and then that menu display variable
gets compounded here using the dot
syntax there to make sure that the
variable doesn't get overwritten but it
gets added to so each item each page
this will add a link and a break tag so
they just kind of line up in a nice row
you can also make lists unordered lists
or ordered lists HTML has lists and
order lists ordered lists and unordered
list tags set up especially for making
lists for this type of thing if you want
to use that instead I'm just going to
use a break tag so they'll be on their
own line and it'll be a nice little link
there you can use there's many many
things you can do here and you can also
add CSS buttons if you want it to have
it a CSS menu pure CSS menu you can set
those up right here all in the loop
just put one line of code and it will
render out up up to 30 of them if you
have 30 pages or whatever and that's why
these are nice magical websites because
it's minimal code and it'll handle a
really large bulk of information and
navigation okay so the page we want to
link to is going to be this page it's
going to have a variable of whichever ID
this is so what's going to happen is
this this little query this little setup
here all these lines of code is just to
set up the display and the navigation of
that main menu link so let's see if it
displays now we'll use this variable
here and we'll echo it down in the page
where it needs to go and that is right
here menu system right where it says
that let's go up to PHP sorry
right there I'm in the PHP tab and I'm
going to hit echo see
let go menu display variable right there
and now let's save that now let's go
back to the design view and we'll see we
have a little PHP block there now and
that's where our menu will render now
it's time to go online and test this bad
boy see if we're connected to our
database successfully and this menu
renders successfully and then we can
continue with the the PHP to make okay
I've got all the files for the system so
far put up on the live server online and
it connected to the MySQL database
successfully it ran the query and you'll
notice I have two labels that say home
and the reason why is because in the
code here I forgot to see where it says
home if it stays like that and all will
say home you have to render out this
variable here in that section like we're
entering out the PID the page ID so
let's just take that whole little
encapsulation press control-c with that
highlighted press ctrl-v get it right
there there are now each two link label
will come in like it should now it's FTP
this adjusted page and let's refresh and
see what we get there we go now it says
home and about just like it should and
you can see this menu is 100% magically
delicious magically rendered according
to what is in the database and you can
see as I go over if you look at the
bottom left hand of the screen as I go
over each link it has the index PID
variable it should down there at the
bottom let me move it up a little
PID one and two it switches okay so that
covers getting your menu built-in in a
dynamic way using what's in the database
as far as pages go and so let's just go
ahead and section that off real nice
visually and let's close it right you
know what are we doing here
there we go that section right there
this line connects to the database this
is used for sessions later but these
lines of code here is what renders your
menu display and this can be put into an
external file and brought in included
into this script which I might do I
might separate this out now all we need
is functionality - for this little
application here to realize which page
we need to be rendering which body and
so let's see we can put in the the
modules actually yeah let's query the
modules and then we'll worry about the
body okay let's just jump right in here
at the top of the script push that
section down that renders the menu the
main menu and right here let's make
ourselves a little comment we're going
to query the modules first so let's say
query module data for display
and I'm thinking I'm going to set a few
things into session variables that can
be set into session variables that way
we don't have to keep requiring the
database for those items and we'll make
it session based so each time the user
shuts down their browser and comes back
the session will be expired that way it
will access all the new data next time
they come back if you happen to change
your site up or your client changes the
site so let's say query the member data
let's go ahead and grab this whole thing
actually let's grab all that and let's
put it right there and we're going to
change it up a little from modules
instead of from pages we're going to
choose the before we start that I
realized I have to add a where clause
here so we're going to select where
we're building the my the main menu
display select ID link label from pages
let's add this where clause we're
showing I'm going to make sure we only
want to show the ones that are set to
show in the database we're showing
equals one in between single quotes so
showing equals true okay we're going to
add that same Clause to the modules
because the modules also have that
showing field we're showing equals one
all right now let's change this up a
little bit to be let's select module
body module body from modules table not
the pages table selecting from the
modules table now we're showing equals
one order by is not necessary
okay we got to change this query all up
really so let's say select module body
from modules we're showing equals one
and I'm just going to directly query
each one name of the module equals see I
think the top one was custom let's just
see if we can grab the footer
limit one okay queries good while now
let's grab this data module body right
here
we can just call this footer we don't
need that there because we're going to
echo out that for the variable three the
query result and I think that's good now
we should have a footer let's grab that
down where we're displaying the footer
let's just go ahead and remove that I go
for the variable now we just assemble
the bug with that query so now we'll
have a query that's going to get the
footer module and display it on page and
also a query it's going to build our
main menu let's put that up index
now let's test it out let's refresh
there we go so we have our main menu and
our remember what I wrote in the
database for the footer links go here to
various pages whatever custom pages we
want to make okay so getting this custom
module should be pretty simple now we'll
just kind of copy this query
there might be a little more efficient
way to query these together to get them
on both out with one query if you there
are ways to do it but I'm not going to
take the time to go through all that
explain it it's a little complex so
let's see but this will be good enough
it's pretty efficient the way we're
running this this next command is going
to be select module body for modules
we're showing one and name equals custom
one as I made a custom module named it
custom one in the database so here's the
query there's the body will name this
custom custom one there we go now custom
one will come out with this module body
of custom one because we queried custom
one as the name so it won't grab the
footer again it's going to grab custom
one and let's put that echoed out where
it belongs here in the custom module
section remove that echo custom one save
FileZilla replace the index online and
refreshing there it is this is my custom
module I could put any HTML data here
okay so now which we will be will put
some HTML that in there later and down
here we'll put some links I just wanted
to show you how it pulls everything out
of the MySQL database and can be
dynamically rendered over many many
pages alright now we only have two but
we'll get some more of those in there
too a few more example pages an actual
body data so that's the next step is
getting this body data to show and that
is going to take just a little more than
a little query it's going to take
figuring out which right here where we
render out the link for each menu item
you've got to figure out which PID it is
so we have the code for that and that's
what we'll set up now and then we'll
call this part of the series number
three quits and we'll go on to number
four which at this point looking at it
we're not too far off from done it's all
just simple forms HTML forms that the
user uses in the back end and it
manipulates the data in the database and
then the sites automatically refreshed
every time okay so let's go ahead and
get this last little bit of code in to
make this body section display correctly
according to which page we press in the
the menu here okay what I did was push
the first two sections we code it out
down a little bit and added a new
section here line six through 19 that
you see sitting there is new and this is
what I just added for determining which
page ID to use in our query right here
so here we're asking if we're not asking
we're running an if and else statement
here and in the condition for the if
statement is if there's no get variable
of PID from the URL string and we just
make page ID 1 to show the home page the
home page should always be number 1 in
the database you shouldn't let your
users or yourself delete page number 1
the default page because it's always the
home page and that should never be
missing okay so so when you start the
system you know you just make the first
page home page number 1 will have an ID
of 1 and you won't have any problems and
so else if there is a variable set you
know how we make all these links dynamic
if that PID variable is set which it
will be if we hit
any of these buttons so if that variable
set it's going to send that variable we
access the value of it and we put it
into the page ID variable which is used
in the query here so if there is a
variable from the URL set we use that in
the query if not we just default to one
which is the home page now we can render
out this body info right here that we
gathered from the while loop of that
query now let's see if all of this works
all three of them together and then we
have a good deal of this whole
application done the bare bones of it
anyway right there where's his body
let's go ahead and put echo body save
it's FTP it up replace what's there now
and then refresh
there it is that's text that I typed in
with the HTML remember I made it bold
and underlined welcome to my home page
this is using HTML to make my balled
style text I spelled bold wrong okay so
that shows you that's it everything is
coming in dynamic from the database and
let's see if I hit the about I'll look
at that
here is my about page info my body here
is where I list HTML or CSS style data
to render my about page let me hit home
again that's my magic MySQL website
making right there and it's all one file
one little index type PHP file you have
as many pages as you want and now all
that's left is to show you how to get
the forms in the back end the little
admin Center made to where yourself or a
client can make new pages edit existing
pages so on and so forth and a good deal
of the system is pretty much made and it
should get have your wheels whirling
right about now we'll continue on in
part I think this was part three so
we'll continue on in part four where
we'll start the backend where a few
things can be manipulated from a nice
admin Center</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>