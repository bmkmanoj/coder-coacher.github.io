<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>5. E - Commerce Website PHP Tutorial - Inventory Management Continued | Coder Coacher - Coaching Coders</title><meta content="5. E - Commerce Website PHP Tutorial - Inventory Management Continued - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Adam-Khoury/">Adam Khoury</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>5. E - Commerce Website PHP Tutorial - Inventory Management Continued</b></h2><h5 class="post__date">2010-12-24</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/dgw5fihkzg4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello welcome to part 5 of our
e-commerce website building lesson
series this one we're going to continue
inventory management because when we
last left off we were able to add
inventory items and we had these edit
and delete links added into each one in
the list so we're going to make those
active now using this items ID on each
one that way we know which one to target
for editing and deletion and Here I am
in inventory list PHP go up to the top
where it's parses the data for the new
entries or the new items right after we
have successful upload of the image and
insertion into the database I'm going to
put a header right here so we can grab
this header code and I'm doing this so
that after the forum parses in this
section of code here we want to auto
refresh the page and this is because the
store manager adds an inventory item and
the page shows that new item when they
press submit if they were to press
refresh in their browser it would try to
add the item again and we'll try to
parse the form again and you don't want
that so what you can do to alleviate
that problem is just put in this header
code and this exit you don't even really
need the exit but I'm just paranoid I
like to use it but you can put in this
header code and just go to inventory
let's type PHP that that way after they
put in a new item it goes into the
database and the image for it is
uploaded this script will header to this
inventory list type PHP that way if they
ever hit refresh after they add an item
it will just refresh the inventory list
up PHP page and it won't try to re-add
the item now let's try this out and make
sure it works as intended I'm going to
FTP this file up and Here I am my store
admin area I'm going to click manage
inventory you can see I have a black hat
and the next product I'm going to add is
black pants these are cool black pants
you must buy choose file black jeans add
this item now and you see it reduce that
header code that way if I click refresh
now I'm just on the inventory list a PHP
page if I didn't add those two lines of
code for this line of code this header
line when I clicked refresh just then
right now it would try to add that item
again and you don't want that so you add
that header code now we can collapse
that code back up this code right here
is the code responsible for rendering
out this list in each line that comes
out in each item you might want to a
higher line separation see how my lines
are kind of right on top of each other I
think if you go into your stylesheet
let's go into our stylesheet I think we
can fix that by putting a line height
attribute right here line height let's
go with 1.5 cm semicolon save and let's
refresh this page yes
see what I did that made things add a
line separations where it's not so much
stacked on top of each other each line
so even in the store admin when you look
at that now you'll have more of a line
separation in between in between your
links they're all over the site any
paragraphs you write things like that
okay so here we are in the block that
grabs the whole list for viewing and
here we have the Edit link and the
delete links so what I'm going to do
just to keep things simple for
demonstration purposes the href value
for the edit link I'm going to make a
Nitori edit.php this is a page it's
going to be in the admin section that we
have not created yet
what you have to do is let that page
know which item ID which item it is in
the system that you want to edit so you
put a question mark and put P ID which
is short for Product ID that's going to
be the variable name that gets sent over
the URL variables so you can send a
variable using the URL link and it will
be transmitted to the page called
inventory edit a PHP so you'll be
transmitting this Product ID and all you
have to do is grab ID right here and
make sure that value gets sent after the
equal sign there so PID you just say
question mark PID equals ID so what it
does is it sends this variable name of
PID and it has a value of whatever this
item is that way when it gets when the
inventory edit page opens up the
inventory edit page knows exactly which
item that is to be targeted for editing
the HR value for the for the delete will
be this page itself the one we're on now
inventory list dot PHP this one we're
going to send value of delete ID equals
ID so what's going to happen is you
press delete for any inventory item it's
going to make this same page reload
inventory list but it's going to reload
with a question this time and not this
whole page that you see and I'll show
you how we do that right now okay so in
order to make the delete functionality
possible let's collapse this code block
back down we're going to put a new PHP
code block in and we're going to put it
right above where we parse the form data
and upload the picture and all that to
the system right above that block I'm
going to put a new PHP block make myself
a note inside of this block say delete
item question to admin because basically
in this section of code we're going to
check if is set that get variable on the
URL I'll show you exactly how that works
and collapse this back if is set you
change this post to get that way it
targets the URL variable and call this
delete ID because that's the name of the
variable so we say if is set get delete
ID and we know that the store admin
press Delete on one of those inventory
items so we want to echo out a question
to them so we'll echo out a question to
them because you don't really want to
delete the item right away when they
press the leave because if they
accidentally press the delete button for
an inventory item you don't want to just
zap it out of the system so if they
press Delete we're going to give them a
question on the page and the question is
going to say do you really want to
delete this item you give them a yes and
you give them a no if they press no you
just reload the inventory list page and
don't do anything if they press yes then
you actually delete the item okay so you
set up a little question mines mine
reads do you really want to delete
product with ID of and then you list the
Product ID for them to see that they are
about to delete and here's little text
that says yes and no on the yes text I'm
going to go and add a link
and the hrf value I'm going to say
inventory list the same page dot php'
this time I'm going to give it a URL
variable of yes delete equals this
delete ID the ID of the product to be
deleted so you can just take that value
pop it right there so if they click this
yes we're definitely going to delete it
now we'll have the product ID to delete
by sending it through the URL variables
once again now if they click no you're
just pretty much using that as a cancel
function so the HRF value on that is
just going to be inventory list dot PHP
it's just going to reload the inventory
list page also put exit here that way
the script doesn't render out the whole
page you just want that one question to
show and then they can choose what to do
from there right so I FTP the new file
go ahead and reload the page and if I
hit one of these links now for delete
let's see what happens let's try to
delete the black pants listing see do
you really want to delete the product
with ID of - yes no so what I'm going to
do is click no it will just take me to
the inventory list page I hadn't put the
code in for hitting yes yet if I hit yes
we want to delete it now so right under
that code looking at this code you can
see that this will not run unless the
get variable the URL variable of delete
ID is set in the script
so now we have a new if they want to if
they want to confirm deletion we have a
new URL variable it says yes delete and
it's going to have the value of the
product ID to delete using that know how
we can just simply add another if
condition right under that one says if
is set get yes delete and right here put
ourselves a little note to remove item
from system and delete its picture so
basically all you have to do is delete
from database first and then unlink the
image from server now where these two
lines are I'll put the code in that will
allow you to do those things okay first
we delete from database or you could do
it any order you want you can unlink the
file from the server and then delete
from database or delete from database
then unlink to file doesn't matter okay
so here is the code to delete it from
the database what you do is you put the
get variable of yes delete whatever the
value of this product ID is into a local
variable called ID to delete then you
run a MySQL query that says delete from
products where ID equals ID to delete
variable limit one now to unlink the
image from the server and delete the
picture use this code here and what this
code does is it specifies the pic to
delete and that is equal to up one
folder into inventory images and then
it's going to target this ID to delete
JPEG then you just run a quick little if
condition to make sure that file
actually exists
that you're targeting for deletion you
say if the file exists pick to delete
unlink pick to delete and it's as simple
as it is now let's just send a header
like we did here in the parsing section
use the header to reload the page right
here after it gets done with deletion so
it's just going to reload inventory
let's type PHP and then exit so that is
deletion that should be everything you
need for deletion so let's keep the note
for ourselves saying delete item
question to admin and delete product if
they choose that's what that code does
let's make sure we test it out okay in
my FTP software I'm looking in my
inventory images folder and I have two
inventory items there I'm going to
delete item number two so let's go to
where your store is running online the
inventory list page is reloaded refresh
it and right where it says black pants
I'm going to click delete so do you
really want to delete product with ID of
two I'm going to hit yes you see what it
did it reloaded the inventory list of
PHP page and it removed
black pants from the MySQL database and
to remove the image from the server now
all we have to do is cover what happens
when they press edit we're going to have
a new page come up that's called
inventory edit dot PHP where this
inventory items information will be
pre-populated into a
form that looks very similar to this
form here that way they can edit that
information so that will be in part six
coming up today very soon so stay tuned</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>