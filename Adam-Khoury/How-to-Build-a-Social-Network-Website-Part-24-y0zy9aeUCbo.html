<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>How to Build a Social Network Website Part 24 | Coder Coacher - Coaching Coders</title><meta content="How to Build a Social Network Website Part 24 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Adam-Khoury/">Adam Khoury</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>How to Build a Social Network Website Part 24</b></h2><h5 class="post__date">2009-06-14</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/y0zy9aeUCbo" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">welcome to part 24 of web intersect
building social networks and communities
i am your host Adam ok so what we'll do
is on the Edit settings page will
continue on by creating the delete
account form and table so let's just put
a table in scroll up here to lay out or
common table we want it to be sixty
percent like the one above it and maybe
three robes when you change that later
on if we need to that's okay now let's
make sure we Center it and let's see
what is the padding on this one three
let's make it the same on this one
actually let's go ahead and amp that up
to about six this one as well
okay now this one we want the top to be
green just like that one so click in put
your cursor in that column click BG here
BG color then click on the same color up
here with your little pink tulle and
it'll just rep you replicate that color
for you Dreamweaver is cool like that
now here we're going to split this maybe
no maybe we'll just say please enter
please enter your current pass just for
a little extra security
to proceed with account deletion
and let's just grab one of these
passwords fields ctrl-c ctrl-v will name
this one instead of new pass this will
be del for delete pass confirm
now delete account pass
that's more like it makes more sense
delete account pass ok so this variable
will hold let's get a hidden variable in
there
we're going to put that on the bottom
row
let's make one more row so it's four
right here we're going to put a button
let's go back to the code view let's
grab this button right here same thing
put it right there go back to design
view now we have a new button the value
is going to be proceed
yep yep the name can be submit to so we
don't get any name conflicts with the
first submit button and see that's all
we need right here we're going to type
in delete your web intersect account
their seed pass and did I ever put that
hidden variable no right here I'm going
to put a hidden variable right above
that submit button of the value will be
delete account underscore account
that way our edit settings parse page
will know what we want to do when they
click that button and they put their
password there alright so back over on
the Edit settings parts page we're going
to add a new section here which will see
right under here at the bottom if parse
equals delete account which we have edit
settings here this button right above it
is a hidden field of parse its name is
parse and its value is the lead account
so if post parts equals delete account
we run what's in this nest here okay so
the first thing that will happen is of
course this first section of the script
will run to make sure they're logged in
and this second section here where we
just set up in the tutorial before that
won't run either actually let's just put
in a big ol divider here
make sure we distinguish our different
sections okay so first thing we're going
to want to do is similar to what we did
in the last tutorial where we check to
see if their num rows comes up as one
when we see if their current password
from the form is in the database put
this logged in user so we're going to
run that check again then we're going to
set up condition
there's a condition the condition will
be if impasse check actually we're going
to have to connect to the database first
we'll need this connect to the database
will need that line as well ok so we
connect to the database we hash the
current password that they set in so
we're going to need the current pass I
think it has a different variable name
so we'll check let's see edit settings
this variable name is the leet account
pass name yep ok so this one is delete
account past that's posted now that one
gets hashed right here delete account
pass hash current pass perfect now we
select my member from my members table
where ID equals this person's session ID
let's just take this and put it up top
here outside of everything that way you
can get claimed for both of those
scenarios regardless of which one runs
there we go
right there we claim the session ID so
we'll say where ID equals session ID and
password equals hash current pass and
then we do this should be a value of one
so we run that same conditional if
passed num check is greater than zero
which it should be then we can run the
the information we want so here we're
going to include message to user again
this time we're going to put a form in
the message to user page and the form is
going to just simply ask them whether
they really really really want to delete
their account and will give my yes or no
link and if they click the yes link then
their account gets deleted by this
script and i'll show you how to do that
right now so let's go to create a form
here so the message to user let's wipe
this out because we don't want that
there we're going to make a little form
to put an air okay so to create our
little it's not really a form it's going
to be just a little question we can go
to the message to user page and actually
just put it right in right in that table
see where it's printing out message to
user let's go into the design view put
in what we like first let's put a space
so we'll put in what we like and we'll
want it to say are you really really
really sure you want to delete your
account
not so many release absolutely you
absolutely sure you want to delete your
account then we're going to maybe go
down a couple line breaks by pressing
Shift + enter and then you spend out one
more let's just type in a yes all caps
then put a couple of spaces by pressing
ctrl shift space a few times put it in
one of the bars let's dig key above the
backslash and put a few more spaces but
no okay so here we have actually let's
put the no here and the yes here so yes
the link to that is going to be edit
settings parse that PHP
and we're going to put a URL variable
URL encoded variables here we're going
to have this valuable that this variable
name is going to be choice equals yes
and that's going to be on the yes link
so let's just copy that whole link their
risk control C and here we're going to
make this link wait a second looks like
we have a get that space out of there
okay so here we have no so this has to
have a choice equals no value so now we
all we have to do is go back into edit
settings parse and place this data so we
can highlight it all go into code view
and see exactly what we need to grab we
need to grab let's get rid of this space
and this break tag because that's not
needed we have to leave that print
message to user there that's very
important grab out everything else in
that table column in that TD tag to
where it's all back to just printing out
message to user control x all the other
stuff out that way it's in your
clipboard now from the clipboard right
here message to user bang put it right
there control V now this little question
with those little links will be there
and you see how it says edit settings it
the link is to edit settings parse that
PHP choice equals yes that's this page
this actual script so we're going to add
one more if condition to see if that
supposed it kind of or the requested
kind of variable okay don't let me lose
you now I know I'm bouncing around a
little bit from page to page when we're
directing the user on things that they
want but it's pretty basic when they hit
this proceed to delete their account
they get sent to edit settings parse
which then knows that they're there for
that reason and it's going to give them
a form if they happen to be the right
person with the right password is logged
in you give them a little question it
says delete your account you sure just
to make double sure so that it doesn't
delete their account right when they
click that delete account button we want
to give them a question a little buffer
zone so in case they accidentally press
something but once we give them that
question and it's going to message to
user PHP once they're on that page and
they see that question they click yes
they come back to this page where we're
going to set up another condition this
condition is going to be let's just grab
this whole bar as a divider as well and
the if statement I'm going to change up
the if statement just a little bit let's
make a new nest here and this is going
to be if you can use git or request i'm
going to use get request also works for
URL variables that's variables that are
in the actual URL address the way I set
up for that yes or no link now if get
choice that was the name of that
variable equals yes
then here we'll have else if make
another nest get choice equals know if
get choice equals no I'm just going to
send them back to their profile or
something so let's see which one click
here to go to your profile go to the DA
there we go
it
elsif get choice equals no include once
profile PHP exit script happy day we
still have a member with that person but
if they're get choice equals yes now we
run all those things that will delete
that member I wanted to quickly show you
before I showed you the delete PHP the
PHP to delete the account i'm going to
show you the form action that i said on
the form here for deleting the account
because i had no form action so and i
had no closing form tag either so within
the table i put the opening form tag in
the closing form tag very similar to the
first form on page like this guy here
where his action was edit settings
parsed at PHP so does the other form
it's sent to edit settings bar step PHP
so in edit settings parts that PHP this
is what we do if the get choice is yes
to delete the account after they have
confirmed if we ask them you're really
sure you want to delete the account they
press yes then we're just going to
delete their account so first thing we
do in that process is we claim where
there jpg is their image because we're
going to take everything or delete
everything from the folder and then
delete the folder so if you have eight
pictures you might want to make a little
loop that will iterate over deleting
eight pictures or just write it all in
delete all eight pictures but here I'm
deleting picture number one by claiming
what picture number one is and where it
is on the server and then I say if file
exists pick one unlink pick one unlink
pick one deletes it from the members
folder then the folder will be empty so
we can remove the folder using rmdir
which is short for removed
directory and as long as the directories
claimed it knows which one to remove so
it removes their folder completely then
we connect to the database because we're
going to run out SQL table one query to
delete from my members where ID equals
ID that removes them from the main my
members table then we SQL to to delete
from blabbing where member ID equals
this person's ID so we remove all of
their blabs then we session destroy we
destroy the session and we give them a
message your account has been deleted
and right here this logs them out if
they happen to be logged in and then we
include message to use the dub PHP then
we exit the script so now let's try it
out let's ftp that edit settings parse
and let's go to edit profile and i'm
logged in as my new account that i made
for testing this delete function go to
like edit account settings delete your
web intersect account let me put in my
current password and make sure it's me
press proceed then i get the little are
you absolutely sure you want to delete
the account if i say yes your account
has been deleted you can see i'm logged
out now up top automatically and if i go
to the webinar sex homepage that blab
that i just made and I Todd Ruiz is
watching the newest video part 23 okay
so everything's gone on a database you
can go and check your database and check
your your folder let's make sure
remember files
that guy's ID was 380 so let me update
this folder and see if it's still in
there let's get rid of this file delete
yes okay look for a folder 380 and you
can see 380 is now gone it's exactly
what we wanted okay so we'll see you in
the next part where we'll be digging
into so that takes care of the Edit
settings page completely now we they can
change the password then they can delete
their web intersect account and from now
that's all of the account settings that
I need to give my members and so in the
next one I think we'll do forgot your
password right here forgot password will
enable that and make the script that
makes that possible so if somebody
forgets their password so I didn't log
in for a month and happen to forget what
the password was at the site they can
just put in their current email address
or the e-mail is just a used to sign up
at the site and then they will get a new
password sent to that email address and
then they can log in no problem so
that's probably what we'll do in the
next step so sit tight have fun happy
coding</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>