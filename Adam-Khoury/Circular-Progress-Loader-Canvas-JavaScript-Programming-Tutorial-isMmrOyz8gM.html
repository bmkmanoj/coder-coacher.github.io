<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Circular Progress Loader Canvas JavaScript Programming Tutorial | Coder Coacher - Coaching Coders</title><meta content="Circular Progress Loader Canvas JavaScript Programming Tutorial - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Adam-Khoury/">Adam Khoury</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Circular Progress Loader Canvas JavaScript Programming Tutorial</b></h2><h5 class="post__date">2015-04-20</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/isMmrOyz8gM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">happy 4/20 everybody today we're going
to instruct how to program something
awesome for your file upload forms not
many websites have visual features like
the one you will learn today so it will
help you stand out from the crowd and
what we're going to do is use JavaScript
to program circular load bars
or circular loaders for progressive
events in JavaScript such as uploading
files with Ajax and we'll be using the
canvas element to render it first let's
take a look at the finished product so
you see starts at 0% runs all the way
around to 100% and then when it's done
you can put some script in place to do
whatever you want and towards the end of
the video I'll explain to you how you
can tie this to your ajax file upload
mechanisms that way you can render this
to the screen when people are uploading
files and you'll have complete control
over the visual aspects okay the first
thing we're going to do is start off
with a blank document that only has a
canvas element in it so far and just so
we can see exactly where that canvas
lives I'm going to put a style attribute
I'm going to give it a border one pixel
dashed and make it light gray now I'm
going to recommend that you put this
styling in your CSS and not directly in
the canvas element and you can also set
the width and the height through CSS so
by me putting the style attribute in the
canvas element itself I'm not
recommending that's the best approach
I'm just doing that for the to keep the
lesson light and fast but what you would
do is put this in your CSS section of
the document okay let's take a look at
what that renders and there's a little
canvas now you can see my script element
is not up in the head of the document
it's right under the canvas now what you
would want to do ideally is have the
strip
in the head of the document and I'm
going to show you when we take a look at
the Ajax file upload tutorial I'm going
to show you that the script is in the
head of the document I'm just putting it
under so I don't have to put a window
onload event but if you want to put all
this script in the head of the document
all you have to do is add eventlistener
for the load event of the window and
keep in mind that this is just a
simulation and you're going to have to
adapt it to your file upload mechanisms
but I'll explain that now the first
thing we're going to do in the script
element is establish all of our
variables that way we don't have to have
this var being called inside of our
animate function because that animate
function is going to run over and over
again so if you can establish all of
your variables outside of that function
this variable CTX represents the canvas
get context 2d VAR al that's short for
amount loaded and we start that with a
default of zero and it will travel all
the way to 100% start this represents
the start point of the circle within the
canvas and we want it to start at high
noon or perfect north so four point
seven two is perfect north or in my map
it might not be precise north but it was
north enough for me straight up in the
12 o'clock position this just makes the
loader start at the 12 o'clock position
now the next two variables are the
canvas width and the canvas height now
this VAR diff is for figuring out the
difference of the percentage to make the
amount loaded variable relative to 6.28
or math pie times 2 and you'll see how
we get that value in place and we're
going to have one more variable to
simulate the progress event so I just
called it var sim and that's equal to
set interval which is a way to repeat a
process over and over again until you
clear that interval in the function that
we're going to fire off every 50
milliseconds is progress sim so let's
copy that and let's type in function
progress sim open close parentheses
opening curly brace and closing curly
brace
now the first thing we're going to do in
that function is figure out the diff the
difference or the relative value of
amount loaded to math.pi times two or
six point two eight because math pie in
JavaScript represents 3.14 so we just
times it by two to make six point two
eight which is a full circle we take the
amount loaded we divide it by 100 and
then we multiply that by math pi which
is 3.14 times two making six point two
eight and we multiply six point two
eight times ten then we just use two
fixed to make sure it has two decimal
places and I don't even think two fixed
is necessary here but I put it in place
just to make sure that my number has two
decimal places because you might want to
use fractions on the very next line
we're going to clear rect now we're
going to clear the rectangle basically
you're just erasing the canvas when you
use clear rect and we're going to start
x0 y0 we're going to go the whole canvas
width and the whole canvas height that
pretty much just erases the whole canvas
every time this progress sim function
runs and if you don't do that you'll see
really weird visual effects that you
don't want then we're going to set the
line width now this line width is going
to be for the progress bar itself or the
circular the donut shape that's how
thick it's going to be then we're going
to set the fill style this is going to
be the color of your text remember that
little text in the middle of the
circular loader it's the color you can
set for it and here you set the color
for the actual circular loader itself
and I just made them the same color so
that it looks alright I use the light
blue then we're going to set text align
to Center and then we're going to
actually draw our text now the way you
make a dynamic is you just put the AL
variable here the amount loaded + % and
that's the text that's drawn to the
canvas then the next parameter for fill
text is where you want it to live the
and why positions and then the max width
so the exposition of where that text is
going to be drawn is the canvas width
times 0.5 basically that just means the
canvas width divided by 2 then the
canvas height divided by 2 and then I
added two pixels just to bring it down a
little bit and then we put the canvas
width variable here because that's the
max width of the text we don't want the
text to be any wider than the canvas
itself so that there will get your text
being drawn and changing as the progress
simulation rolls along now for the very
next line we're going to begin path this
is going to be for the circular loader
to draw that and I'm going to show you
guys the canvas bootcamp training series
that I put out I put out like 20 videos
all about how to program on the canvas
and it shows all of these methods and
properties in depth so really if you
really want to wrap your head around
everything I would recommend that you
take the canvas bootcamp training series
alright so the next line we're creating
an arc which draws a circle and we want
an animated circle so that's why we're
using the diff variable and to start
variable I'm going to show you guys in
depth about the arc so that way you guys
can research all of these parameters
because you see numbers here right now
you want to know what those numbers
represent canvas bootcamp maybe that's
where you learn it I'm not going to
regurgitate all of my material and the
important parts here are the start value
of the angle of the arc and then it's
ending angle for the arc which is always
going to be changing in our case until
it completes a full circle in the next
line we're just going to set the stroke
method that way it actually draws the
arc or it draws the stroke of the arc
then we're going to say I'm out loaded
plus plus so basically as this function
runs every 50 milliseconds this function
runs so every 50 milliseconds this
amount loaded variable is going to be
incremented by one it starts out at zero
and then it keeps getting incremented by
one until it reaches a hundred
so to make sure that we have a mechanism
in place to evaluate if it reaches 100
we're going to put a little if condition
we say if the amount loaded is greater
than or equal to 100 then we're going to
clear time out on this set interval
basically you're stopping the animation
and then I put a little note that says
add scripting here that will run when
progress completes this is where you put
your code when the progress is complete
anything that you want to do give the
user a message say yay it's all complete
because by that time the file will be
uploaded to the server and we're going
to be and you would be doing it through
Ajax so there's not going to be any
refresh of the page needed or anything
and the file will still get uploaded now
let's check and see if we have a working
simulator see there now that you see it
fills that little canvas exactly the way
you want and you can make it any size so
what I'm going to do is just remove the
border now or actually I'll leave the
border in place but if you guys want
that little dashed border to go away
just remove this property but I'll leave
that in place that way everybody can see
exactly the dimensions of their canvas
all right so now we have a working
simulator now all you have to do is
realize or learn how to upload files
with Ajax and I'm going to show you that
tutorial right now and I'm also going to
show you other tutorials that are very
related to this one that will help you
extend this into using it for file
upload mechanisms and all kind of
progressive type events for JavaScript
okay you just want to head over to
develop PHP comm and you click on
JavaScript video tutorials and here we
have file upload progress bar meter
tutorial Ajax and PHP you click that and
then you watch the video very closely
and all you have to do is take the
script and put it in place now you have
a progress handler function here that is
where you're going to put your canvas
animation all of that functionality
that's in that progress simulator
function that we wrote Oh
all of this functionality would go in
your progress handler and you see how we
wrote the VAR amount loaded that would
represent your let's see percent so
percent in this tutorial is equivalent
to the amount loaded in the tutorial
that we're presenting today
so that's all you would have to do is
use percent in place of amount loaded
and put all that canvas code in and
you'll be good to go you'll be uploading
files with a true circular progress bar
in this one we're using an actual
progress element the html5 progress
element which just makes a rectangular
linear bar which everybody uses if you
use a circular load bar you'll really
stand out from the crowd and there's
even the file upload parser dot PHP the
whole Ajax file upload application is
sitting right here for you to take and
adapt to your circular loader now if we
go back to the JavaScript video
tutorials keep scrolling down and you're
going to see canvas programming now this
is the canvas bootcamp series and you
can learn really in-depth all about
these properties and methods that were
using for the canvas programming with
JavaScript this lesson series will take
you really really really in-depth so if
any of you are thinking to yourself what
is this number represent and what is
this parameter represent what is this
parameter represent you can learn all of
that really in depth at the canvas
bootcamp training series so this way
nobody can say that they fail to
understand what this 35 represents what
this 30 represents because I really
discuss all the parameters in depth in
that series all right so I'm just going
to leave you to your own devices and all
the programming that you would need to
adapt the circular loader into your ajax
file upload mechanisms and another thing
to note I notice that a lot of people
they don't realize that their server has
like a 2 megabyte limit on file uploads
so if you want to let people upload a
file that's over 2 megabytes or over
megabytes or whatever your server limit
is you have to go into your PHP dot ini'
file and change the max upload size for
uploads and the max execution time
basically you want to find all the
little directives that deal with file
upload and increase their default values
because if you have if if in your PHP
dot ini' file it has a two megabyte
maximum for the upload that means any
any file that's three megabytes like an
mp3 or a really huge photo if it's over
two megabytes the upload will fail on
your server you have to increase those
limits now there are lots of things you
can do you could set a doughnut in there
that would be like the container for the
load bar there could be like maybe a a
grey doughnut that stationery that the
load bar fills in all you have to do is
learn the basics of canvas programming
which the canvas boot camp will do for
you you can change the colors you can
change the size you can make your canvas
any size you want you can size this text
so virtually every visual element is
open for adjustment now I might have to
explain this one this parameter right
here you know what this value represents
that represents four point seven two
which is twelve o'clock straight up
north so for the ending angle of the arc
we just say diff divided by ten plus
four point seven two that way your
difference for the angle will always be
relative to that four point seven to the
perfect twelve the 12 o'clock position
and it'll grow from that all the way
around back to the other side to make a
complete circle all right so I hope that
helps some of you guys get started with
creating your own cool circular loaders
and with all the other tutorials that
I've released in the past you have all
the information you need to really to be
able to manipulate it any way you want
and implement it into any projects that
you have so I'll leave you guys to your
own devices I'll talk to you next time
bye bye</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>