<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Canvas Bootcamp 14 - Mouse Coordinates JavaScript Tutorial | Coder Coacher - Coaching Coders</title><meta content="Canvas Bootcamp 14 - Mouse Coordinates JavaScript Tutorial - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Adam-Khoury/">Adam Khoury</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Canvas Bootcamp 14 - Mouse Coordinates JavaScript Tutorial</b></h2><h5 class="post__date">2013-11-15</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/8pNzjUjvNsY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">in this exercise we're going to cover
one of the most crucial aspects of
making interactive canvas applications
we will demonstrate how to read or
capture the user's mouse coordinates
upon events that we specify okay the
first thing we're going to do after we
get our CTX object reference here is
we're going to add an event listener of
onmousemove or mouse move depending on
which way you add the event listener and
we'll use the add event listener method
so we'll go CTX canvas dot add event
listener open close parenthesis
semicolon the first parameter is the
event that we want to listen for and
this one is going to be mouse move so
any time the mouse moves at all over the
canvas this event is going to fire off a
function and all we have to do to put
that function in place is put in comma
and then the second parameter can be the
function itself and we'll just put event
here for the event reference if we need
it within our function put in your
opening curly brace and your closing
curly brace now you can do is just bring
these down in between the opening and
closing curly brace you can bring those
down a couple of lines and then bring
them back here to proper indentation now
we have an event listener of mousemove
ready and any time the mouse moves in
the canvas the code that we put within
this function here going to execute so
the first thing we'll type in is bar
mouse X because we want the mouse's
exposition we're going to make that
equal to the event dot client X now
we're not done creating this value of
mouse X but I want to show you what we
get if we leave it just like this so
let's do the same thing for the mouse y
minus y is equal to event dot client why
and what client y and client X return to
you are the users mouse coordinates in
the window the whole page so what I'm
going to do is go down into the body and
I'm just going to add an h2 element this
is just going to be for testing purposes
and I'm gonna give it an ID equal to
status and by default I'll have just
zero the bar symbol and then a zero on
the other side this represents the X
this represents the Y position of the
mouse so now we can do is go up into the
mouse move function and type in document
that get out
my ID the status element and say dot
innerhtml
equal to Mouse X here actually let me
take this status control X and I'll just
make a new bar for the status equal to
that element on the page and then I'll
just say status that innerhtml is equal
to Mouse X and then I'll concatenate to
that string the mouse y-coordinates and
then I'll add the bar symbol in between
them this is what's going to show up
down in this status element down here
any time the mouse moves at all on the
canvas so now we still have to adjust
this value a little bit to create the
proper mouse X amount but I want to show
you what you get if you leave the values
just like this basically you get the
user's mouse position within the browser
now the reason why if I go over point 0
0 here or 1 1 of the canvas if I'm at X
position 1 and y position 1 with my
mouse the reason why I see 11 and 11
down there is because we haven't yet
compensated for where the canvas lies on
the page so you have to subtract the
offset left and the offset top
properties of where the canvas lies on
the webpage which is very simple to do
so we say event that client X which
returns to us where the user's mouse is
in the x position on the whole page so
all we have to do is subtract from that
the CTX canvas dot offset left and to
get the proper mouse coordinates for the
y plane as well we just say see TX dot
canvas dot offset top property so offset
left and offset top return to you how
many pixels that the canvas is sitting
offset from the left and where it's
sitting on the page offset from the top
so you can just subtract those values
from where the user's mouse position is
on the page now if we refresh our canvas
let me go back to position 1 and 1 you
see now I get the proper positioning for
my mouse and now all the time while my
mouse is moving over the canvas my
program is reading the x position
the Y position for where the mouse is if
I go down to the very corner you'll see
that I get to 499 and 299 so if I move
off of the canvas the mouse move
function stops and you can also read the
mouse coordinates in other event
handlers so when you put a listener for
the click event now just change mouse
move to click and we'll make this one an
alert that just alerts the mouse X and
mouse Y so we'll type in alert right
here press ctrl s to save and now
refresh your application and as your
mouse moves you still get the same
functionality as before but now when you
click it's going to return the exact x
and y-coordinates of where the user's
mouse is when they click so what you can
do is when the user clicks you can draw
a rectangle or a circle to that very
spot let's say I have balloons floating
up the page really fast and it's just a
game where the user has to tap the
screen to pop the balloon maybe if I'm
making a game for smartphones and the
balloons are floating up the screen and
the user just has to tap I can make a
little hit test which will be showing
you how to program for hit tests and
object collisions and I'll also be
showing you in later exercises how to
sense if the users mouse clicks on a
certain asset that you have on the
canvas so reading the user's mouse
coordinates is a very crucial important
part of making interactive applications
on the canvas or on a web page in
general you don't have to actually be
moving over the canvas to read the
user's mouse coordinates on the web page
so you can do this kind of mouse reading
mouse coordinate reading even outside of
canvas applications on a regular web
page you just put the mouse move event
over the document body of the window
itself alright so the most important
thing about the code here is that we
just have to remember that we subtract
the offset left and offset top from the
client X and client Y positions of the
mouse on the web page that way no matter
where the canvas is on the web page
you'll get proper Mouse coordinates
relative to the canvas itself just
comment out this alert and we'll do a
fill rect anywhere that the user's mouse
coordinates are so say CT x
Phil style is equal to orange and CTX
Phil wreak mouse X in the second
parameter Mouse Y and then the size that
we want it to be and we'll just make it
30 pixels by 30 pixels if we refresh and
we click down on our canvas now we get
an orange rectangle drawn every time we
click at the exact coordinates that we
specify now what if you want that little
orange rectangle to be drawn when the
user clicks and you want the very center
of the rectangle to be at the center of
their Mouse so we'll take mouse Y and
minus half the width or half the height
rather and take mouse X and minus half
the width of the size of the object
itself now when we refresh and we click
our mouse we should get the square show
up centered on the mouse see so I'm
right and I'm clicking now little
squares are showing up anywhere that I
click and dead center ok so that shows
you all about how to access the user
mouse coordinates on the canvas and
apply those values to certain aspects of
your interactive canvas applications</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>