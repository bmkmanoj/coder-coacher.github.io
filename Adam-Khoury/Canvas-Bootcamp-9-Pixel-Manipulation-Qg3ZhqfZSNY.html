<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Canvas Bootcamp 9 - Pixel Manipulation | Coder Coacher - Coaching Coders</title><meta content="Canvas Bootcamp 9 - Pixel Manipulation - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Adam-Khoury/">Adam Khoury</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Canvas Bootcamp 9 - Pixel Manipulation</b></h2><h5 class="post__date">2013-11-10</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Qg3ZhqfZSNY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello welcome back to the canvas boot
camp in this exercise you will learn to
use the pixel manipulation methods and
properties pixel manipulation is useful
for copying the pixels within a
specified rectangular region on the
canvas and for creating new image data
objects for manipulation or
transformation the first thing I'm going
to do on my canvas is add two rectangles
and each has a different fill style the
first has a magenta fill style and the
next has a blue fill style the first one
is placed at 20 X and 20 Y the second
rectangle is placed at 40 X and 40 Y so
let's see what they gives us okay now
we'll begin some pixel manipulation
using all three methods and all three
properties that are associated with
pixel manipulation on the canvas so what
we'll do is go down a couple of lines
and we'll type in VAR source and that's
equal to CT X get image data method now
get image data takes four parameters the
x position the y position the width and
the height and get image data returns an
image data object corresponding to the
rectangle that we're going to set using
these four parameters so you set your
get image data rectangle whatever x
position you want and since our first
rectangle started at x 20 and y 20
that's where we're going to start our
get image data rectangle so whatever
pixels are within that rectangle that we
specify here are going to be copied into
the resulting image data object so I'm
going to start at 2020 I'm going to go
50 pixels by 50 pixels so 50 pixels wide
50 pixels high
and I'm starting at 20 X and 20 Y now at
this point you can use the CTX dot put
image data method to put that image data
back on the canvas to draw it back to
the canvas so let's say we want to draw
the source image data at an x position
of 250 and a Y position of 20 that way
it's over here somewhere
now let's refresh our canvas you can see
that we get new image data put at the
location that we wanted and the image
data that we put corresponds to the
pixels that we copied from this area of
the canvas here
now there's another method called create
image data which creates new blank image
data objects I will show you how to use
that right now as well so we can remove
this put image data method momentarily
what we'll do is put another variable in
called copy and this is going to be
equal to CT X dot create image data open
close parenthesis semicolon what you
have to do is supply a width and height
to the create image data method so I
just want to make it equal to the width
and height of my source image object so
I can just copy source and say source
dot width and this is one of the
properties that you can access for pixel
manipulation and then source stat height
so essentially you could just put 50 and
50 here if you want to hard-code those
numbers in alright so if we refresh our
canvas we only get the two original
rectangles drawn because we haven't put
the copy back onto the canvas
now before we do that we have to access
the data property of the copy and
populated with the clamped array that is
the data property for the source
basically you want to make the copy data
equal to the source data and you can do
that through a for loop so let's open up
a for loop the first parameter of the
for loop is going to be var I is equal
to 0 in the next parameter of our for
loop is we're going to get the copy dot
data property dot length and remember
the data property is a clamped array and
what that clamped array represents is
RGB a values for every pixel and those
values can vary from 0 to 255 so for the
second parameter we're going to say
while I is less then the copies data dot
length and I think for a 50 by 50 image
that object it's going to be 20,000
pixels and then finally the last
parameter is I plus plus so this for
loop is set up to pass over all of the
data within that clamped array so within
the loop we can just say copy dot data
and put the I within the array index is
equal to source data whatever index in
the loop we are for the source data so
basically all it does is take the source
data
and puts it in the copies data so that
way this clamped array will be equal to
this clamped array and then finally we
can put CTX type put image data and this
time instead of putting the source or
drawing the source back to the canvas
we're going to draw the copy so let's
just put it in copy and then the
positioning I wanted a 250 X and 20 Y so
let's refresh and we get the same effect
now let's look at that file preview and
browser Internet Explorer okay so in
Internet Explorer we get the same
results now there's another way that you
can put this source data into the copies
data or you can set it so if I was to
comment out this for loop and we refresh
you'll see that we get no image data
placed because basically this copy is an
empty image data object now you'll
sometimes see people do something like
this instead of the for loop that I
created they'll do something like this
they'll say copy data dot set they'll
run a set method on the data and they'll
make it equal to this source data so
basically you're taking the source data
and you're setting the copy data with
that data from the source now first
let's check this in chrome when i
refresh I get the same effect so I don't
have to run the for loop for chrome but
now let's look at Internet Explorer
it seems that Internet Explorer when i
refresh you see I get no result that's
because Internet Explorer for some
reason is not respecting the set method
so in Firefox and Chrome you'll see that
you get good results if you use the set
method for the data but for Internet
Explorer I'm just going to copy out this
line here but I'll leave it in for
referencing and I'll put the for loop
back in place and Internet Explorer
you'll see we get the results we want
with a simple for loop now if you ever
need to copy the pixel data for actual
images or external resources files that
are external resources you might have
trouble viewing that locally let me show
you what I mean
I'll put in a var called pic and I'll
make it equal to a new image object so
what I'll do is say pick that source
is equal to whatever image I want to use
now before I start adding my colored
rectangles to the canvas I'm going to
say CT X dot draw image and I'm going to
put that image on the canvas by
assigning pic as my first parameter and
then where I want it to go I'll just put
it at 0 X and zero Y so now if i refresh
you'll see that I get my pink ladybug
behind those things because it was drawn
to the canvas first now it might get
image data start at 0 X 0 Y and I'm
going to gather a hundred pixels by a
hundred pixels I'm going to copy that
much data now if i refresh we'll see
that we also get actual image file data
pixels copied within that region let's
check that in chrome now I don't see any
results here in chrome and you might not
see any results in Firefox either if
you're testing locally all you have to
do is take this file whatever canvas
tutorial test you're working on and put
it on your live web server so that's
what I'm going to do now you'll see that
with Internet Explorer in the local
environment it worked but for Chrome it
doesn't so I don't want you guys testing
and Chrome with actual images and then
it not working and you're wondering why
it's not working all you have to do is
put these files online so now instead of
testing locally I'm going to go to Adam
quarry comm canvas tutorial tml and now
you see that in google chrome I also get
the working results because I'm actually
online so if we test this locally let's
go to test previewing browser and
Firefox well it's working locally in
Firefox so Firefox and Internet Explorer
are fine for working locally with
getting this image data from the pink
ladybug pic but you'll see the chrome
for some reason has an issue because
this is chrome working online on my web
server and you see it works just fine
but now if I go to file preview and
browser Chrome in my local environment I
get no results because it's not
respecting that image in my local
environment so if you're testing in
chrome you happen to see no results just
put the files online is basically all I
mean all right so in this lesson
you've learned about three properties
which are width height and data those
are the three properties that you can
access for image data objects in your
canvass pixel manipulation in the three
methods you can access or create image
data get image data and put image data
instead of using the source width and
source height two parameters within the
create image data method you can just
put one parameter equal to whatever
image object you're referencing to if
you feed it one parameter that will get
the width and the height from the source
image data object automatically and to
show it working let's file preview in
Firefox so you see we get the same
results so if you're ever in the
scenario that I'm in where you're
copying the pixel data from a certain
portion of the canvas you're creating a
new image data object from that pixel
data you can just put one parameter
there that's the source or you can
supply it with the both parameters which
is the same effect</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>