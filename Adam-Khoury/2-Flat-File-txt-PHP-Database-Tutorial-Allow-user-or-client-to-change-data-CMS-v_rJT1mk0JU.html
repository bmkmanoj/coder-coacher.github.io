<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>2. Flat File .txt + PHP Database Tutorial - Allow user or client to change data - CMS | Coder Coacher - Coaching Coders</title><meta content="2. Flat File .txt + PHP Database Tutorial - Allow user or client to change data - CMS - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Adam-Khoury/">Adam Khoury</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>2. Flat File .txt + PHP Database Tutorial - Allow user or client to change data - CMS</b></h2><h5 class="post__date">2011-04-28</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/v_rJT1mk0JU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello welcome to part 2 of working with
external text files with PHP to create
data management systems for your clients
in this lesson you will be learning how
to take your external text files and
sync the data from them into an HTML
form text area to allow the string data
in the text file to be changed through
an easy online web interface many times
you may wish to give a client the
ability to easily change website data
instead of having them open the raw text
file or xml file and change the data
from there that would be a pain in the
ass for your client so you'll have to
make it a more friendly web interface
using familiar forms what I'm going to
do is take the exact code that we left
off with at the end of part 1 since we
were bringing in the external text files
data and displaying it on page instead
of displaying it on page I'm just going
to sync that data straight into an HTML
text area so what I'm going to do is
just go down one line here and on line
eight I'm going to insert an HTML form
and if you're using Dreamweaver it makes
it all so easy so once my form is in you
can make the action to whatever you want
I'm going to use this same exact file
it's going to parse on itself so when
the form button is pressed this actual
file dot PHP will parse itself and I'll
show you how to do that now you want to
change this to post because we're going
to post the text area now within your
form we're going to place a text area so
you just go to insert form text area
I'll just name mine ta to keep it simple
columns across I don't know maybe 64 you
can also put CSS percentage with
percentage in that form element but I'm
just going to put columns to 60 for
width and the rows maybe 10 okay alright
so now you see I have a little form and
I have a little text area within it now
all you have to do is take this data
instead of echoing it here to the page
on top you simply echo it so let's take
that control X right here in the text
area let's go to insert then this is if
you're using Dreamweaver if you're not
using Dreamweaver you're going to have
to type it in code block which is a PHP
code block it's just
easy to type it in you don't need
Dreamweaver and then we echo my data
right there into the text area now let's
see what we get when we do this and
remember we have no submit button
we have no parsing script or anything
like that we're just seeing if the data
from that text file is going to sink
into that text area like we're trying to
tell it to hear okay so you can see live
when it runs on a PHP server that the
text file data is put straight into my
text area and now I can manipulate that
data if I want to put a line break here
I want to put more text whatever and I
want to submit button now and then when
the submit button is pressed I want to
have a parsing script or mechanism
within my PHP file here that's going to
handle taking the new data that I just
typed in and overwriting the old data
with the new data saving the text file
with all the new data in it that way if
you're rendering this text file
information on a web page and somebody
goes to that web page after the client
has changed the data that visitor will
see all new data ok so right under the
text area let's go ahead and put a
little break maybe two break tags and
then I'm going to insert form submit
button so when you choose button make
sure you choose submit to submit the
form and the name could be whatever my
BTN and then on top of the form you
might want to write a sentence there
it's a good sentence hello user you can
use this form to edit the writing on
your live web site and design mode and
that's what it looks like so now you
have a little sentence on top directing
the user what to do the data is going to
display within the text area that we're
gathering from the text file and then
when they press submit after they alter
that data we're simply going to save the
text file overwrite the existing one
we're simply going to overwrite the
existing text file with the new data and
before I put in the parsing mechanism
before that form text area I'm going to
display the data on the page just so you
guys have a better idea of what's going
on so under the form I'm just going to
put a couple of red tags and then the
data will display the raw data from the
text file under the form
that way when we go to change it you'll
see things change in the form and on the
page and everywhere you need to see a
change okay finally let's put in the
parsing mechanism for that form up top
and you can see here are the nine lines
that are just placed in first we have an
if condition that says if the argument
within the condition returns true then
this code will run if the argument
within this condition returns false then
this code will not run that means the
posted text area from that form has to
be posted to this file in order for this
script to run if there's no text area
posted to this file then this little bit
of code will not run and there's also
more error handling that you can look
into and research how to do maybe you
don't want the form to be processed at
all if there's less than two little
characters in it or maybe if somebody
just types of space and then submit it
will overwrite all that data within the
text file with one blank space so you
might want to do further error handling
but we're not going to be going into
that in this series we're going to keep
it very simple just to show you guys how
to get going with these text files and
manipulating them in a CMS type
environment I have a lot more tutorials
that go way in depth about ever handling
and checking for things that are
supposed to be I can't do that in every
single one of my tutorials or every one
of my tutorials would be three hours
long all right now let's explain these
few lines that execute when the form is
posted to this file first thing I did
was claimed the variable called my file
but that's equal to that text file so
really what you can do is take this
variable if your script is set up like
mine you won't need this string here you
can just use my file actually we can put
this up top let's take that out of there
let's put it at the very top my file
that way it's available to everybody in
the script or everywhere we want it
right there is my file and right there
as my file - so you can keep things nice
and tidy that way if you're going to put
it into a variable you can use it all
over the page where you're claiming that
text file okay so the next line is a new
variable called new data and what we're
doing is we're taking the posted text
area all the information that's in that
HTML text area and we're running the
HTML special chars
HP function on it but htmlspecialchars
does is it will take HTML characters
such as tag openers and things like that
and convert them to their HTML encoded
equivalent and then you run nl2br on
that data as well
this is the nl2br PHP function and all
that does is it takes new lines within
the form let's say if I had if I put a
new line right here see how I just put
two new lines in there that's going to
show up as a /n so you want to take all
slash ends and turn them into break tags
that's what I'm doing
so my file will actually hold break tags
now and I'll show you how to convert
them alright so now that you have your
new data all set up with HTML special
chars involved and adding line breaks to
it then you open your handle the handle
is a variable for F open function in PHP
and we're using the write command when
targeting my file so you see F open
takes two parameters my file is the
first one and then the second parameter
is what action you want to happen on
that file you can append you can write
you can read W means write so we're
going to overwrite the whole files data
with this new data which happens right
here on this line F right actually
executes the writing so you just target
the handle in the first parameter and
then you put in the new data into the
file in the second parameter then you
use F close to close your handle up now
let's test it out okay let's refresh
this page now what I'm going to do is
put in a couple of line breaks and type
in I just edited this file live submit
you see that look at the data down here
now you can see that you have break tags
now within your HTML form all we have to
do is use string replace on the data
that goes into the form before it goes
into the text area to remove any break
tags and then you'll have a complete
little system that will allow your
client to add many line breaks and
things like that let's go ahead and take
care of that and I'll show you exactly
what I mean so we can remove these break
tags from showing up in our text area ok
you go into your form and right here
where the PHP block is echoing my data
into that text area we can go ahead and
use string replace right here
Str underscore replace open parentheses
around my data we're going to close
parentheses that's going to be the last
argument my dad is the last argument
there's three arguments you want to
place in the string replace function and
then the third argument like I said is
the data now the first thing you want to
do is target what you want to replace I
want to replace break tags just like
that and I want to replace them with
nothing so string replace is going to
find all break tags within that data and
replace it with nothing ctrl s to save
now run your little application again
let's go back to the page really let's
go ahead and not refresh it so it will
send that data again let's just go ahead
and open the file you can see those
break tags are gone now let's make
another line I want mark I so this is
your client that will be be able to do
this in the back end of things see and
now on the front end this shows all
coming from a dynamic external text file
and you've made it dynamic in PHP now
okay so that takes care of part two
where we show you how to take the text
file use PHP to access the data in it
throw it into a text area allow you to
client or whatever user to change up the
data and then save it overwrite the file
- save it for new display on the site
and I just wanted to throw this out
there for some of you guys that might
want to know how to allow your client
say if your client was to type in an
HTTP colon forward slash forward slash
wwm Cory comm and then they press submit
you can see that that information is
going to go in there but that's not a
live link if you want to turn that into
a live link I have a class file that's
all set up to do that at web intersect
comm in the package here one of these
versions has it let me see I think it's
it's not that 11.3 - maybe there it is
version 1.3 - of the web intersex series
has OOP style auto magic active link
maker class I put in the auto magic
active link maker which will look for
any any URL strings within your clients
text and change it into an active link
to where it turn
blue and can be clicked on so you'll
have to learn how to implement that
yourself but I know this is some people
are going to ask me about that so that's
why I felt I should mention it if you
want to turn links into active links you
can use this class that I have in web
intersect version 1.3 - okay okay</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>