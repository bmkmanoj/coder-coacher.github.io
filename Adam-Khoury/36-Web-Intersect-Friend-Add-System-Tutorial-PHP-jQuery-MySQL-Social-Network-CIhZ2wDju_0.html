<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>3/6 - Web Intersect Friend Add System Tutorial PHP jQuery MySQL Social Network | Coder Coacher - Coaching Coders</title><meta content="3/6 - Web Intersect Friend Add System Tutorial PHP jQuery MySQL Social Network - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Adam-Khoury/">Adam Khoury</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>3/6 - Web Intersect Friend Add System Tutorial PHP jQuery MySQL Social Network</b></h2><h5 class="post__date">2010-09-11</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/CIhZ2wDju_0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">going to make this branches down with
you when we last left off we programmed
the website to allow members of the site
to request friendship from one another
and in programming this cool feature we
opened up a doorway to hell in which
foul beasts from the underworld can
sneak through and attack our website by
forging form submissions we're gonna
attempt to make a token that's going to
make sure that the requests are coming
from our site and everything is on the
up-and-up with security for the profiles
okay is what we're gonna do to get this
token first we're going to establish a
new session variable called whip it now
this whippet session variable is going
to have a random number put into it and
then it's going to be base64 encoded and
these are both PHP functions they 64
does a low level encryption random
number using these arguments I can get a
random number between this one and that
one which will be a pretty big random
number so first thing we do is we check
to see if is not set the session
variable of with it then we register
that session variable called whippet we
want to do that just in case somebody
comes to the page and they don't have a
session variable for whippits set yet we
set it for them if they do have it set
this line won't run and the session
variable called whippet will just get
overwritten with this value here which
is the base64 encryption like I said
very low level encryption on this random
number then we go down to the JavaScript
form where it posts to the URL we
specified that request as friend dot PHP
remember and all I did was I added a new
variable called this random number and
we're echoing out that random number
right there as a string and then I added
one more variable to go
mm one ID and mem to ID it's called this
whippet and it has a value of this
random number this way inside of
requests as rent PHP which is the parse
file where people will be trying to
attack your site through but they'll try
to post variables directly through this
part to the sparse file requests from
their server so hopefully using this and
like I said if this one doesn't work so
not strong enough we'll put a stronger
means of security in place we get the
posted value of this whippet that's
coming along with mem 2 and mem 1 from
the JavaScript post mechanism and put
that in a local variable called this
whippet then we get the session whippet
variable going which is going to have
the value of base64 decode of their
session whippet so we're decoding it now
we're unencrypted in it basically we're
decrypting it that way it winds up to be
same random number as this posted value
it should be so these should match if
people are using the site correctly ok
I'm gonna do one more thing here just to
make sure everything runs smooth and
that is I'm gonna make sure that there's
a posted value of this whippet we want
to make sure that's not empty and we
want to make sure this session is active
for this user if they happen to have sat
on the members profile maybe for 15
minutes and this session went inactive
then they tried to friends with that
person we want to give them a message
saying your session expired please
refresh the browser page and try again
and here's the code if sessions is not
set for the Whippet variable then we
echo out that means their session may
have expired we echo out your session
expired from inactivity please refresh
your browser and continue they'll see
that in the add friend box on the page
let me exit script because the session
is not set and then where I added where
we had to see if any data was missing I
just added another section for checking
to see if this whippet is empty which is
the posted variable which is that random
number so after you decode them that
random number should ranch that and like
I said there's so many ways to trick
people and usually they wouldn't
actually see the methods that you're
using to try and encrypt data but we'll
run this and we'll see how it goes all
right so I have to feed the files up I'm
gonna go to guru Singh here add his
friend and make sure everything still
works with the new programming this user
has requested you as a friend already
aha cool let's try somebody else in
let's try Joe Smith are you sure you
want to add just myth as a friend yes
this user has requested you as a friend
already
okay let's try somebody friend request
successfully everything is good okay so
we're good with the low level security
measure there that might be just high
level enough to keep things secure on
your profiles ok so there's not much
left to the Brent system and you guys
you can see that I put if you're logged
in and you're looking at your own
profile you're gonna see a link to
friend requests and that's going to be
in the next tutorial where I show you
how to load up the list of their friends
requests are they going to prove or deny
them</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>