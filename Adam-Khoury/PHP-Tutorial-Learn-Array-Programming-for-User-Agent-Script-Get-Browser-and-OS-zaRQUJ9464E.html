<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>PHP Tutorial Learn Array Programming for User Agent Script : Get Browser and OS | Coder Coacher - Coaching Coders</title><meta content="PHP Tutorial Learn Array Programming for User Agent Script : Get Browser and OS - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Adam-Khoury/">Adam Khoury</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>PHP Tutorial Learn Array Programming for User Agent Script : Get Browser and OS</b></h2><h5 class="post__date">2010-10-29</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/zaRQUJ9464E" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello everybody Adam at develop HP comm
here with another PHP website
programming tutorial in this one I'm
going to knock out two birds with one
stone by teaching you about associative
arrays and in doing that we'll learn how
to access the user agent variable for
any machine that's accessing our
webpages and just so you have a really
good idea of what we're about to learn
how to program here's what the finished
product will give you a web intersect I
allow people to post we call them blabs
anything they want when they do post you
can see here I'm gathering the users
operating system so you can see John is
using Windows XP and he's using browser
of Google Chrome this guy's using
Windows 7 there's an Internet Explorer I
whipped out my little smartphone and
then right before I made that comment on
my smartphone I made a comment from
Google Chrome using my windows 7 machine
so it's I also noticed that Facebook
sometimes will gather if you're coming
from a smartphone they'll gather that
information and then they'll list it
that you posted from Samsung Mobile or
iPhone mobile or whatever alright so
back at develop PHP we're going to go
into the learning PHP section right here
in the top near the top the variables
section global variables you'll see we
have some global variables down at the
bottom there the one we want is the user
agent actually I'll just grab all that
code and remove what I don't need I'm
going to fire up my favorite HTML text
editor make sure I save this file as a
PHP file save as get user browser and OS
make sure it's dot PHP remember if you
don't have it saved as a dot PHP file
won't process the PHP within it now
let's put that code in let me zoom out a
bit that's everything I just grabbed
from develop PHP and I'm going to remove
everything I don't need because I want
just the user agent there
now back at develop PHP in the learn PHP
section we have arrays
you can learn all about working with
arrays from very simple to
multi-dimensional if you want to go that
far but here we're going to go to
looping and iterating over array data in
PHP I'm going to grab this little bit of
code as well without the opening and
closing PHP tags I'm going to sync it
right into that script that I'm starting
on here let's get rid of all these
comments and this let's just get rid of
that for now this was going to change to
a K just remember that means key this
we're going to change to a V that one
means value and this is going to be
browser array so let's change that to
browsers remove all right this is the
one we'll use see which browser the site
visitor is using to access the page and
we're going to have another for each
loop that's going to evaluate what
operating system they have now this is a
one-dimensional actually let's make sure
that says browser array okay that's our
browser array and let's remove all of
the items from it now before I remove
those items take a look at them there's
just items in there delimited by comma
or separated by commas so you got one
two three four five items in this array
this is a one dimensional simple array
as simple as it gets in PHP so this is a
very basic one-dimensional array now we
need an associative array because in
one-dimensional arrays like this you
can't have distinct keys that you want
to set a distinct label for a key this
one's always going to be zero this one's
always going to be one two three and
four all arrays automatically by default
will start with an index of zero so the
keys for this would be zero equals milk
1 equals cheese 2 equals eggs 3 equals
cereal 4 equals jelly so you have key
and value pairs with an associative
array I can say m82 equals milk CH 4 5 6
7 8 9 equals cheese EEG
four or five two equals eggs so I can
give it like store-brand codes if I
wanted to use as the key I'm going to
show you that right now I'll stop
talking about it and let me demonstrate
it let's remove those let's bring that
down a couple of lines the parenthesis
within the parentheses here is where
we're going to put each item within our
associative array so the first one is
going to be let's make Windows Mobile
so in between single quotes I'm going to
type in Windows Mobile now I'm going to
type in an equal sign and a greater than
sign on the other side another set of
single quotes and a comma between these
single quotes I'm going to put ie Mobile
which is in the user-agent string so
basically this user-agent string let's
change this to say agent so it makes
more sense there agent string is going
to be a big string of code that's really
not human readable and it might have if
somebody's using the windows mobile
device it'll say IE mobile in that
string but we don't want it to say IE
Mobile when we output it we wanted to
say Windows Mobile so that's why we're
using this associative array that way we
can find values within that user agent
string and then use a different label
that we really want to represent that
value now we have to do is stick some
more in here for Android iPhone and all
the others okay now I have all the
values that I want to evaluate for
initially and you can take it upon
yourself to gather as many more as you
want and you'll notice that the last one
does not have a comma like the others
there's no comma on that one because
that's the last item in the array those
commas are separating the key value
pairs and all I have to do is evaluate
within this for each loop let's bring
this up into view so in each item in
this array is going to be accessed
through this loop so the first one in
the array is going to be the Windows
Mobile ie mobile key value pair so when
that
through this array Windows Mobile this
value here is going to be placed into
this K variable the key so this K is
going to hold it's going to be a
container for the value of Windows
Mobile and this V is going to be a
virtual container for where it says ie
Mobile which is the string value so each
time each one of these items passes
through this each one gets placed into
these temporary K and V values so inside
of this for each loop we can do a simple
evaluation let's say if within this if
statement next here
we're going to have preg match function
and what preg match function does is it
checks to see if the substring that
you're looking for happens to be in the
string that we're evaluating alright so
let's pop that in place and let me
explain it to you here what we're saying
is if there's a match for this value
that's coming through the loop and the
agent string which is the agent global
variable that we assigned here to this
variable named agent so basically if I
eMobile in the first pass of the loop if
I E Mobile is seen in that agent string
then we know that this person is using
Windows Mobile so at that point we break
right here we put in the break and what
that'll do is if it happens say this
person is using Android our little match
finds that this person is using Android
we don't want the the rest of the array
to keep going and checking because it's
unnecessary and it's using system
resources that you can save so once it
gets to this value and that's found or
if saved it's Firefox it gets to that's
value and it's found you break this for
each loop from running any further so
it'll stop right there and at this K
will be assigned a value of that item
found so K and V wind up being
the items that are found in the match
let me say else if it's not found at all
K is going to be browser unknown because
because it wasn't found in our list and
like I said you can scour the web go
through all kinds of lists for user
agents to see every single one you can
probably get a good list of 20 in there
if you do hard work but the way I've set
it up here all you got to do is add to
it now you can say at the bottom under
here we can start it make a new variable
called browser equals browser equals K
and then we just you can echo out for
testing right now echo this browser
variable and that's going to show you
exactly what browser you're using when
it echos to the page there you can see
that's not much script it's pretty
compact alright let's test that and mine
I'm gonna test in Google Chrome so it
should output to me that I'm using
Google Chrome because this string of
Chrome will be found and it's very
important let me mention to you guys if
you're looking for Google Chrome and
Safari users make sure chrome is before
Safari in this array if you put Safari
in front of chrome even people using
google chrome it'll show them using as
they're using Safari okay you can see we
have success here and our scripting
because I'm using Google Chrome to
access the page and it's telling me that
I'm using Google Chrome our array and
loop works just nicely I'm gonna grab
that whole URL I'm gonna open up another
browser here open firefox and then there
it is it outputs Firefox
if I was on a smart phone my little
Samsung it would tell me Android mobile
so now back to the script it's very
simple now to take this existing code
and now pluck out the operating system
so now we have the browser set into a
variable called K at the end of the
script here and we put that K into a
variable called browser so we can just
take all this code right above the echo
there the whole array and everything
right here at the bottom let's not echo
that there anymore and put a little code
comment that says so now we're going to
get the user operating system right
there let's press paste ctrl V so
there's basically a copy of what we
scripted above we're going to change
this from saying browser array so say OS
array we can change these values here
for operating systems so here let's just
change that to say oh s array KB is
going to stay the same that's the same
that's the same and let's just say
instead of browser unknown unknown os
and instead of the same browser let's
make this a OS so at the end of the
script we'll have a variable ready here
for the browser that we can use display
and store whatever and at the end of
this little set of code that runs will
have a variable called OS so you can
actually put those together have web
intersect I combined those two variables
with a colon between them and I sink it
into one database field or you can
choose to keep yours in different in two
different size database fields one for
browser one for OS so now all i have to
do is change these values and there they
are so those are the values for the OS
array and what I did was I just found
the ones that I thought would be the
most popular put them in the list like I
said with the browser's just like the
browser's there's more that you can put
in here research and fine
and all of them and get them in there
but these are the most popular ones and
I think if somebody's not using this
anything in this list it would be an
oddity very rare situation most people
are using things within this list that I
have here so basically what happens if
in their user agent string if we see
win98
or the word windows space 98 we know
that they're using Windows 98 if we find
Windows 2000 or windows NT 5.0 we know
they're using Windows 2000 and so on and
so forth and you can see here that you
can put in multiple values for the value
section of this array that way if either
one of these are found if it finds
Windows XP in the list or if it finds
Windows NT 5.1 we know that it's Windows
XP so we put it there and like all these
Windows versions might be seen in the
string if any one of those are seen in
the string we know they're using Windows
NT 4.0 so basically that's how it works
you already understand this if condition
with the preg match and everything
that's going on there
so now we can output OS and browsers
together and I never did show you the
agent so let's pop in this code here at
the end we're going to echo out agent
which is the raw line that we gathered
in the very beginning to do all these
evaluations with so what'll output to
the page is this static line saying
whatever we want there PHP tutorial then
the next line will show the actual user
agent for whoever's accessing your page
then the next line here's your two
little variables
you got OS and you got browser you can
do anything you want with those
variables at line 47 right when you
gather that OS variable up you can do
anything you want with those put them in
a database display them just leave them
in variable form to display them down in
the HTML section of your page if you
have that and basically that's how it's
done so that shows you how to use
associative arrays and using a little
bit of control flow logic
to grab the match so we can check to see
if something is in a string or not using
Prague match right when the item is
found we break the for each loop so it
doesn't process any further
unnecessarily and we know the output of
K is going to be that last match found
if no matches are found in the whole
entire array K is going to be a value of
unknown OS same for the browser okay and
here is the finished product of the
script you can see the dynamic variables
are right here Google Chrome is the
browser I'm using and Windows 7
this one says Internet Explorer windows
7 very good all right now you can see
why I said you want to put chrome before
Safari in your list you can see that I'm
clearly using Google Chrome here but if
you're in the script if you happen to
put Safari in front of Google Chrome in
this array it'll look like google chrome
users are using Safari the Safari will
find a match if somebody's using Chrome
Safari will be found in that string as
you can clearly see here I'm using
google chrome see how it says Safari
right there in the string because they
both use the Gecko type browser so
basically that's why I mentioned to put
google chrome in front or ahead of
Safari within your browser array okay I
hope that helps some of you guys out
understand arrays a little bit more and
how to access the data and loop through
all the items in your array to make
matches or if you want to output the
data into variables whatever you want to
do you can get at all that data you need
and we'll see you next lesson</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>