<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>6. E - Commerce Website PHP Tutorial - Store Inventory Continued | Coder Coacher - Coaching Coders</title><meta content="6. E - Commerce Website PHP Tutorial - Store Inventory Continued - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Adam-Khoury/">Adam Khoury</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>6. E - Commerce Website PHP Tutorial - Store Inventory Continued</b></h2><h5 class="post__date">2010-12-24</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/WrbaISEEihM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello everybody and welcome to part 6 of
our e-commerce website building lesson
series in part 6 here we're going to
deal with completing the inventory
management section where we created an
admin area for a store manager to get in
there
and deal with certain back-end processes
of the store somebody that doesn't have
HTML or code knowledge and see I told
you guys and you guys are saying the
whole time Adam you're not going to be
able to put out the six tutorials before
Christmas prep yeah I still got a whole
day and you guys in other countries
where you're like twelve hours ahead of
the US that doesn't count man get real
actually by tomorrow I said I would have
six videos out for this series and bam
here they are you can stick your doubts
up you're black and the only reason it's
going past six Parts is because some of
you guys requested inventory management
and having an admin panel in the back
where your client or yourself can easily
manage things without having to mess
with code so after part six Here I am
going to enjoy my Christmas busy with
family and friends take a few days off I
have a good time and then I'll come back
and we'll finish this but for now let's
just finish up this inventory management
stuff okay let's see where we last left
off hello store manager what would you
like to do today manage inventory and
there's all my inventory I added black
hat black jeans black shirt purple hat
purple jeans purple shirt blue hat blue
jeans and a blue shirt and when we left
off in the last lesson we were able to
click delete on any of those and it asks
us do you really want to delete this
product with the idea of one yes or no
and I'm not going to delete it right now
but this all works really well so I'm
going to press No and the only thing we
have left is to make the little edit
form so when we click Edit we want to
make a similar form like this one pop up
but this time when we pop it up we're
going to have prefilled data inside
the pre-existing data for that item and
the person can then edit it and that's
going to be a new page so to create that
new page we can go into Dreamweaver take
inventory list that PHP as it currently
is file save as inventory edit dot PHP
save now we're going to change the code
on this page the PHP especially now with
inventory edit we want to have the same
code block that we've had in the other
admin files that make sure this person
is supposed to be in the admin area
that's that first block or not an
assigned admin in the database it kicks
them out and that code block remember it
connects to MySQL and a claimed session
start ok every reporting I'm going to
keep that in this script just in case I
happen to put any code in there that
renders any little tiny errors they'll
show up now this next code block was
delete item question to admin and delete
product if they choose say what we're
just going to remove this first if
conditions from that section we're going
to put gather this products full
information for inserting automatically
into the Edit form below on page so
let's remove all this code from that if
condition and we're going to save the
parse mechanism right here let's just
collapse it for right now we're going to
manipulate it just a little bit when it
come time to parse the edit form so
let's just collapse it we're going to
hold on to it for now we can collapse
this one
now if is set get PID because that's
going to be the URL variable coming
through remember an inventory list PID
right there equals this product ID so in
inventory edit you grab the ID from the
URL and you can choose to filter that
that get variable since I already showed
examples of filtering variables I'm not
going to do redundant things if you guys
want to do it you can do it now let's go
down to where we had the block that
grabs the whole list for viewing and we
don't need that at all so we're going to
take all that code X to remove that
whole PHP block let's go up here or it
says if is set get PID that means if the
get variable is set in the URL we're
going to put this code in let's indent
all these lines so the code is very nice
and human readable
there so when we get the variable we can
put it into a local PHP variable to
remove that line there we don't need
that so let's just call it target ID
equals the get ID to get PID from the
URL then we just say select all from
products remove that order by and put
where ID equals single quote single
quote in between your single quotes
paste that variable target ID and limit
one because it's only the only one one
row to come out of that database so we
don't need the product count actually
you can keep that in there and you can
say get the product count see if it's
there if product count is greater than
zero you can get the information out
else if it's equal to 0 that means that
product doesn't exist with that ID in
the database you can echo out a message
to the admin saying sorry dude that crap
don't exist and then give them a link to
wherever you want right here you can add
a link but with if the admin is using
the admin area correctly this will never
happen you understand because they're
always going to be clicking on links
that have a definite ID in the database
now let's just grab the information we
need to make sense here we don't need
this product list output variable we can
remove that completely right here
product list just get rid of that you
don't need it so in the wild output loop
all you have to do is set the local PHP
variables and then you can use them
anywhere down on the page at that point
because this loop only has it's only
going to run one time so since this loop
is only going to run one time there's
only one result set there's only one
result in the result set
that means the loop only runs once
that means these variables will get
populated by the one row of data coming
out that means you can run the while
loop get these values into local PHP
variables here and then display them
down on the page you can just echo out
those variables into the form which is
what I'm going to do now here let's put
it exit right here after you say sorry
do that crap don't exist exit we want to
make sure we get all the data we need
which would be so in the form the form
is going to need we're going to have to
pre-populate this data so product name
you put value here and just put some X's
as a default value that will
pre-populate that form that field see
the X is sitting in there already that's
how that works so all you have to do is
put that that loop data that data they
came out in the loop and right into that
value so let's get product name control
see where those X's are let's put in
product name semicolon highlight the
whole thing go to PHP and echo and now
you have a PHP little PHP block that
echoes the product name right where it
needs to go so you can just grab that
ctrl C let's go here to price same thing
value price and you have to make sure
that you query out all this information
that you want to put in there you can
see prices not here oh yeah sir prices
there already now let's get we need sub
category and category as well
there's sub category and category so
we'll get those out of there now you can
see down here in my category options
select I only have one option of
clothing so I don't have to mess with
that but here we're going to put a new
option in so we can just copy this this
is with a sub category to render in the
existing sub category they have
this item you can do something like this
let's get this echo statement here pop
it right there
and right there and make sure it says
subcategory so you get the subcategory
variable from the MySQL query here and
you pop it in place and then all we need
is the details I guess and then you pop
that in but that's supposed to go in the
details area in the this big text area
down here put it right in between the
opening and closing tag for the text
area you put it right in between opening
and closing tag make sure that says
details in the product image they'll be
able to change that as well you have to
allow them to be able to change their
product image if they want to edit
because maybe the only reason they're
coming into the Edit form for that item
is to change the product image now we
have to be sure that we change this form
action to inventory edit.php
instead of inventory lists okay so now
when they press submit on this form
let's change the value let's say change
this item now I'll just make changes
there now when they press submit on this
it's going to do a similar thing that
the inventory list page did to parse
it's going to send it up to its parsing
section here see where it says parts to
form data and add inventory item to the
system so here we're gathering all the
details that we need out for the item
we're going to have to actually pass
this items ID so let's go down into our
form and I'll show you how to put in a
hidden form field where you can do that
right before the submit button put a
space or line break go into forms and
see the broken field right there you
click that that's hidden field press ok
and the name is going to be this ID the
value is going to be we're going to echo
out the ID that we gather from the URL
so actually you don't even have to
gather it out of the database here
because it's coming in on the URL it's
his target ID see that so let's just
grab that target ID and that goes in
your little hidden field down there this
way the form knows exactly which when
it's being parsed exactly which product
in the database we are talking about so
let's go to PHP and echo that in right
there so the value of this hidden field
is this target ID the name of this
hidden field is this ID so when we
access this ID it's going to have the
value of the target ID the product in
question so it looks like we can
collapse this section where we're
gathering the information and actually
that might want to go below the parsing
section let's see let's take that
control X put it below the parsing
section block and I think we're cool
like that so we can leave all most of
this the way it is
this time we're just going to gather up
the ID for the product post this ID
there so if is set post product name so
if they're clicking submit from the
forum all those variables going to come
in again with the same names this time
instead of select we're going to update
this my SQL query is going to be an
update query so you'll want a query that
looks more like this update products set
product name equals product name
variable coming from the form price
equals the price coming from the form
and then we're going to put few more
values to update details category and
subcategory so let's get the details
right there and right there
category goes right after details
category category variable sub category
subcategory field sub category variable
and that's how it works so let's see
after we update then we're going to
let's see and you might want to validate
that form also using Java Script like
you did the the inventory list the
inventory add form you want to make sure
all the values are there and they're not
missing any fields I'm not going to show
you guys how to do that because I linked
you to that tutorial at develop PHP in
the last lesson remember or in lesson 3
I think it was or for I think it was
lesson 4 where I showed the HTML
validation HTML form validation using
JavaScript you can apply that to any of
your pages any of your HTML forms
now we still have to change some more of
this here let's go to we don't have to
get the numbers we don't have to check
that we don't have to add this to the
database now because we are ready to the
update there we don't need the ID but we
do need to place the new uploaded image
into the folder so what you want to do
is see if files filled temp name is set
and if the files file filled temp name
is not set then you know that they
didn't browse and put a picture to
upload when editing this so you have to
have a little if condition you don't
want to put code that's going to move an
uploaded file if they haven't chose to
replace the picture for that product ok
since this says PID already let's change
let's just change this variable say PID
and right here PID
so you're updating all those fields
where ID equals PID until new name is
PID okay right before you place image in
the folder you want to have an if
condition is if condition is going to
check to see if the files file field
temp name is empty or not if it's empty
you definitely don't want to add the
image or run any of this code this one
this header and exit control X control
exit out of there put it right below
your if condition closing bracket
because after this one parses and they
successfully edit something you want to
assure them immediately to the inventory
list dot PHP page because they won't
need to be on the edit page anymore
because their editing is complete but
before you get the name of the image in
and move the uploaded file to overwrite
the existing image that's already there
for this product you want to make sure
that it's set
grab this control see put it right here
if files filled the tech name is not
equal to nothing so if it's not blank
that means this code will run I haven't
tested it yet but I'm pretty sure that
it will work using it in this way and
then press the submit button on the form
this section of code will run and it's
very similar to the first inventory list
form we have where it adds the item to
the database but this one is just
gathering up the values from the form
cleansing them and then updating the
database rather than inserting into the
database you're updating an existing
field or existing row of data and then
you just make sure that they do have a
new image that they selected they browse
their computer and they put a new image
into the form before you move any before
you overwrite the existing image for
that product and then when it's all done
you offer them back to the inventory
list a PHP page and that's pretty much
it and then remember the block under it
is the one where we gather this products
full information for inserting
automatically into the edit form below
so this code won't even run above it
unless they've already filled out the
edit form and press submit so we can
collapse this and I think that's all
done inventory edits up PHP I'm going to
FTP that up and wish you guys a Merry
Christmas we'll continue in part 7 where
we're going to get into the payment
gateway side of things - shopping cart
and the inventory display mechanisms for
displaying all your inventory products
where they need to go on the front end
ok so you guys have a Merry Merry
Christmas I hope you get a lots of big
presents under your tree maybe even get
a little kinky with your lady alright
good luck bye bye</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>