<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>6/6 - Web Intersect Friend Add System Tutorial PHP jQuery MySQL Social Network | Coder Coacher - Coaching Coders</title><meta content="6/6 - Web Intersect Friend Add System Tutorial PHP jQuery MySQL Social Network - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Adam-Khoury/">Adam Khoury</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>6/6 - Web Intersect Friend Add System Tutorial PHP jQuery MySQL Social Network</b></h2><h5 class="post__date">2010-09-12</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/zBlKujQn908" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guess what this is the last video
we're going to cover the remove friend
option when i press remove friend we
want a new window to come down here and
give us the option to remove friend if
we don't like that person anymore okay
now to get that button to say remove
friend when two people are already
friends and one person goes to another
profile you want that button to save
remove friend so they have that option
so to get that to work i initialize new
variable here called friend link and the
section on the page where I'm working on
profile dot PHP this is profile PHP in
this section is where I think in video
the friend system tutorial series video
three or four maybe maybe even two we
set up this section to evaluate what
content to place in the member
interaction box remember that yes you do
if you don't go check if I check
yourself for you wreck yourself and then
all I did was add some SQL here and then
we're echoing out friend link instead of
remember we had two links right here
that were very similar one said private
message one said add friend now we're
determining what this friend link is
going to say since we want it optional
now we don't want it to always say add
as friend we want it to now say remove
friend if they happen to be friends but
if they're not friends we wanted to say
add as friend so now let me show you
here the code I put in place and I had
SQL query the person who is logged in
and you'll notice I put it in the
section of code that's the if condition
for if the session ID is set and it does
not equal the profile owners ID that
means somebody else is logged in and
looking at somebody else's profile so
this is where this code goes and let me
show it to you now you can see it's mad
about 89 lines or 10 lines whatever and
let me explain to you and I kind of
separated with code comments here nice
orange line there the
matches up with that one there this is
the SQL query the friend array for the
login viewer of this profile if it's not
the owner so we SQL over a we select
vendor array from my members where ID
equal the session ID limit 1 then we
gather that friend array from the
database once we have access to that
string that is the friend array we can
exploit it to beam then we can check if
this person is in that array already so
if the person that they're viewing the
profile of is in this person's friend
array they're going to get removed
friend you see that very nice else
they're not the friends yet so they get
add friend the function there you see
Targo container add friend toggle
container remove friend and that's how
it work folks so that's how I got it to
display on the site remove friend when
two people are actually friends are
ready they go to the site they go to the
friends page they're going to see remove
friend link now let's go down here to
the div interaction containers here
we're going to put a new one see this
add friend let's just copy that control
C let's put it right under that one why
not remove friend very simple now let's
just go into this little bit of code
here and change the things we need to
change here to make it a remove friend
mechanism okay so you can see I just
quickly changed everything to make it to
where and even though the remove as
friend function isn't even in the
JavaScript yet changed everything in
here to work as a remove as friend
mechanism to where the session ID user
is requesting to remove this friend from
their friend array okay here's the
javascript function i just added it's
very much like this one
here I just kind of borrowed that same
one I changed a couple of things around
I just noticed that I had to change the
name of that function to remove his
friend and this had to be removed friend
loader okay here's the code that takes
care of removing both members from each
other's erase from 117 line 117 to 140
takes care of getting both arrays out of
the database we query both arrays and
then right here these two lines is where
we're removing see here which using
string replace to remove each member ID
from the others array that's string by
the end of it it removes both from each
other's array string and then it makes
sure there's no weird commas like double
commas doubled up together after you
remove an ID you want to make sure
there's no commas doubled up together
you want to make sure there's no commas
in weird places within the array that
gets thrown back into the database after
removing them that's what all this code
dozens and now we simply test I'm going
to go to my profile and I'm going to go
to my friend list here ok remove friend
let's see if it works remove John Sean
as your friend yes you are no longer
friends with this member go back to my
profile let me check yep he's gone and
somebody else is there and so that's how
that works now the last thing we need is
to show all friends I'm just going to
quickly make a page that when you go to
it you'll be able to click a link
somewhere around the front section where
the Front's display here and it'll save
you all so I'm just going to make a page
we when you press view all and it'll be
in the new version 1.3 to source package
I won't show it in video I'm just going
to make a quick little page that's going
to slice the array just like we did last
time maybe slice it down to 50 and show
up to 50 people for now until we do a
pager nation set up for the array we're
going to have to do is on that page make
sure that we paginate
array because if somebody has a thousand
friends you want that array to have
pagination and not throw out all 1000
people in the page at once okay but
pretty much that seals it up that's how
you can set up the basics of a friend
system and as we find bugs because bugs
do crop up all the time as people are
testing and using the software so as
bugs crop up for this run system we're
going to try to get the fixes in place
for and then bug fixes will be in the
later releases so once I put out version
1.3 to all the bugs we find in 1.32 are
going to be cured in 1.33 you'll get it
that's how it works okay this said this
series is over now we're going to move
on to stuff like private messaging
forums and like I said these systems
aren't one hundred percent ready to go
live they're not it is the in production
website the code isn't optimized and
there are bugs that do crop up so you
use it at your own risk peace homie</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>