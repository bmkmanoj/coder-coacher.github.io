<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Canvas Bootcamp 18 - Hit Detection Mouse Touch Over Object Arrays | Coder Coacher - Coaching Coders</title><meta content="Canvas Bootcamp 18 - Hit Detection Mouse Touch Over Object Arrays - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Adam-Khoury/">Adam Khoury</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Canvas Bootcamp 18 - Hit Detection Mouse Touch Over Object Arrays</b></h2><h5 class="post__date">2013-12-03</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/YJWv0bJDYH4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">these next two exercises are going to
deal with touch hit detection and object
collision detection we already showed
how to read the user's mouse coordinates
when they click our mouse over our
canvas in exercise number 14 now we're
going to cover hit detection for the
mouse or finger touch against an array
of objects if you're programming a game
or an application with the user taps
clicks or touches the canvas to make
things happen you'll want to understand
hit detection for the mouse against the
assets on your canvas so that you know
exactly what is being touched and we're
going to start with the same exact code
that we left off with when we were
discussing putting JSON objects and
arrays to work in our applications I
think that was exercise 17 it's the same
exact code that we left off with what
I'm gonna do is go into the body and I'm
going to add an element with an ID of
status that way I can just output some
status so as the developer of this
application I can see what's going on
now the first thing that we're going to
add is a mouse down event which also
works for fingers on the tablet so you
can think of it as finger down as well
so what we'll do is just grab this
window add event listener will pop it up
here into place make sure we indent it
correctly actually we'll just remove
that code and we've got to make sure
that we target the canvass so we'll say
CTX canvas dot add event listener of
mouse down now I tested on an Android
tablet and mouse down works for Android
tablets and probably all other tablets
and there's also just for your guys
referencing sake there's these five
events for JavaScript that are made
specific for touchscreen tablets most
touchscreen devices so instead of only
Mouse down event listener you can add a
touch start listener so the first thing
within our mouse down event handling
function is we're going to get the mouse
X and the mouse Y coordinates for where
the user's Mouse X and Mouse Y is on our
canvas we talked about the code that
gives us those values in exercise number
14 so we're not gonna really discuss
this in depth since we already did now
the next thing we're gonna do is we're
gonna run a for loop
over the buildings array again so we can
actually grab this loops structure and
put it right here make sure we put in
our closing curly brace and actually we
can get this to right there now I'm
simply going to place a condition and
then I'll explain the logic behind all
of the expressions that were using in
the condition but basically what this
code gives you is hit detection for your
touch or your mouse against objects on
your canvas and what I'm doing is
putting in the status element
you touched whatever objects ID so you
could either be the house the grocery or
the post office so let's run this in our
favorite browser and let's touch one of
these objects first I'm going to touch
all around them and you can see that
nothing's happening I get no status
output which is good now if I go and
touch on one of them it says you touched
house if I touch another one or I can
touch all around them again nothing
happens if I touch another one it says
you touched post office you touch
grocery so it's sensing exactly where
we're touching and our application knows
that the user is touching a specific
item so if I want to make this go to a
URL I can make these buttons I can
simply come here and in my buildings
array add URL property to all of these
items and then when that specific item
is clicked send the user to a URL and
that would be simple just say B dot URL
in your window dot location code you say
window dot location it's equal to B dot
URL okay now let me explain the logic
behind how we get this hit detection
condition and I'll just read it out into
plain English and hopefully you can
understand the logic of what's going on
and we're saying if the mouse's
exposition is greater than or equal to
the building's exposition and the mouse
exposition is less than the building's
exposition plus the building's width so
you have to add the building's
exposition plus the building width to
really get the horizontal dimensions for
how big the building
and where it is in space on the canvas
and we also have to add two more
expressions to evaluate to see if in the
vertical space on the canvas if the
clique is in the same coordinates as the
building or the mouse down or the
finger-touch is in the same coordinates
as the building so we say if the mouse
is Y position is greater than or equal
to the building's Y position and the
mouse is Y position is less than the
building's Y positions plus the
building's height basically all of this
logic lets you put up a bounds as an
imaginary bounds of a rectangle to where
if the user clicks anywhere in the that
rectangle we're going to handle it with
code inside of the condition and in the
next exercise exercise number 19 we're
going to talk about object collision
because you might have animated objects
all over the scene and you want to know
if any of them are hitting one another
so maybe nobody's clicking in your
application and clicks aren't the thing
that you're listening for maybe you just
want to know if one floating object
smacks into another for instance if
you're programming like a laser game
where the user is shooting a laser and
you want to know if any of your lasers
are hitting any of the enemies things
like that so we'll do collision
detection in the next exercise and this
one was all about Mouse collision
detection or Mouse hit detection</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>