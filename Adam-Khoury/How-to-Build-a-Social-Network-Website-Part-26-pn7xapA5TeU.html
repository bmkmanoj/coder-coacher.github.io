<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>How to Build a Social Network Website Part 26 | Coder Coacher - Coaching Coders</title><meta content="How to Build a Social Network Website Part 26 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Adam-Khoury/">Adam Khoury</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>How to Build a Social Network Website Part 26</b></h2><h5 class="post__date">2009-06-20</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/pn7xapA5TeU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello and welcome to web intersect part
26 and in this lesson we're going to
adjust the issue of forgot or lost your
password so in case one of your members
happens to forgotten or lost the
password then we're going to give them
the option to generate a new password we
can get it sent to them by email that
way they can log back in and once they
log back in we also we already gave them
the functionality to change their
password to whatever they want so once
they get logged in with their new
password that they get generated we can
allow them to change their password
inside of their edit profile section
which all of that programming is already
at play and this is just a very simple
method it might not be the best but it
works and let's see what I've done is
I've put together it's not even part of
our pages here it's just an untitled
page and what i've done is i put in HTML
form with an email field here with a
name of email and a button and a hidden
password or a hidden field and actually
we don't even need that hidden field I
don't think that's all we need and
here's a PHP output so this page is
looking for it's always going to print
output output for user and up top I have
the parsing mechanism all laid out so
what I'm going to do now is lay it into
our our layout or place it into one of
our pages so the layout is uniform with
the rest of the site and then I'll
explain to you line by line how the
parsing mechanism works ok so I changed
what I needed to change up top I took a
lot out because i really don't not have
no interest in this page having indexing
power that much so took out a lot of
things that were unnecessary up top and
now i'm going to save about the PHP you
that we
here as forgot pass so that way I don't
overwrite my about page forgot pass this
will have a PHP extension and then
you'll see the about page didn't get
messed with at all it's still intact
like it was let's close that about page
now on forgot that PHP let's go to the
design view right here let's zap out
that table if you happen to have
anything there and zap it out of there
and let's grab the table that I created
here well you wouldn't be doing this but
I'm just going to show you my steps so
I'm placing a table into one of our
blank template pages or whatever however
you're building your pages on so within
that table there is hey let's get rid of
this
okay so we have form action so inside of
the table is a form so in the form
action is forgot passed out PHP this is
this page so we're going to need a
parsing mechanism up top so in the form
we have and i'm going to show you that
parking parsing mechanism in just a
second so in the form we have that email
field and our button the rest is just
words and then we have a PHP block
that's output for user so now let's grab
our parsing mechanism let's go into this
page that I made earlier just for this
purpose grab the whole parsing mechanism
and let's go up top here and paste it in
now let's explain what's going on okay
the first line after our PHP opening tag
is we are initializing the output for
use a variable because the HTML section
of the page is always looking for some
output from that variable and you want
to claim that so you don't get any
errors in certain environments the
environment i happen to be programming
in if i don't if i leave that out I
don't receive any errors and neither do
any of my members okay let's see but
some people might need that so I added
so first we check to see if the form was
posted so that email field in the form
if it's coming in as a posted variable
into this script and the value is not
equal nothing that's what this is saying
here then we run this code we include
the database connection script and we
take their email that was posted to this
script and we put it into a PHP local
variable then the local variable gets
the stripped tag run on it the strip
tags function PHP and then we run the
air a geek place replace function then
the MySQL real escape function or string
function on the email variable and after
we run those functions on the email
variable to kind of clean it up and
filter it
we run an SQL query that is saying
select all from my members table in the
database where email equals this
person's email and activate it equals
one we want to make sure they're
activated then we run a MySQL num rows
function here on this email check or I'm
sorry on this SQL query that we created
here and we check to see what the value
of that is and if they are remember they
have an email in our system then that
will be a value of one so first thing we
do is run an if statement to make sure
that it is a value of one if it's not
then they're not a member so we give
them an output message it it's in red
text and it says there is no accountant
that info on our records please try
again and then none of this other else
code will run an output for user gets
sent to the HTML and it's displayed with
this red text and that's that but if
they all remember and this is equal to
one then we can or yeah if it's equal to
one then we can take the email will do a
few things to it we're going to take the
email that they've just given us and
we're going to cut it the first four
characters off the front we just want
the first four letters off the front of
the first four characters so we cut the
first four characters off using this PHP
function and then we make a random
number using this PHP function and we
set those together we kind of splice
them together so we got email cut and
random number to splice together as the
temporary password it makes good sense
to me and so what we'll do here is hash
this temporary password using md5 hash
okay so now we have their new password
that we've created in through the script
here using their email and a random
number and we hashed it up so it's ready
to go into the database that way when
they try to login with it everything
will work correctly
so we hash it up and we are going to
insert it into the database here here
we're updating their password to what we
have created in our script here that way
they can login because they've obviously
forgotten there's so they'll need
something to login with so we say update
my members table set password or
password field for this member and we
put the hash temp pass right here in the
password in their password field where
email equals this person's email and
then we going to send them an email
that's going to be HTML formatted it's
going to have an HTML format and it's
going to say your web intersect login
password and then displays it right
there you see temp pass before you hash
it up you grab that variable instead of
using the hash variable that's what you
display to them the temp pass that way
they know what to login with ok so the
first thing we do in sending this email
and set up some headers and we set the
headers in such a way so it wrecked the
person's email program will recognize it
as in HTML format email any good email
checking program program will notice
this will recognize this and display
this as an HTML formatted email some
strange ones like if you're using your
default hosting account email
application like your one and one
hosting or your godaddy hosting their
default email applications they always
are horrible let's see so this will give
the headers well the subject will be
login password generated that's what
they'll see is subject line and then we
set the body to have some HTML you can
put whatever HTML you want in there have
fun with it put your logo your images
you might not want to use images but you
have fun with HTML anyways
but I just display the password there to
them plain and simple that way they can
login then we run an if condition that
says if the mail has been sent which
right here it actually sends right there
get sent and say if mail email subject
body and headers is all successful then
we run the output for message the output
for user message of your log and
password has been emailed to you with a
nice color a success type color or if
not password not sent please contact us
it's really all you can do in that
situation this really should never run
this else should never run because this
email should always shoot out okay and
then we close off the else condition
here right here and then the first
condition here
that's it right there so if the post
email is not equal nothing and we run
all this stuff too right there but if
they posted email and it does equal
nothing if they're being jerks and they
just press submit or they happen to
accidentally just press submit without
putting anything into the form this else
condition runs and it says enter your
email address into the field below
that'll show up in the output for use a
message it's a very simple script and
like I said the I mean you can just
write yours out from what you're
watching here but you can get to the
source package after part 27 when i
update i'm going to show you guys how to
do remember me functionality for your
login scripts that way your users don't
ever have to keep logging in when they
keep coming back to your site they're
always logged in if they choose it okay
we'll see you in part 27</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>