<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>ActionScript 3.0 Tutorial - Hit Counter Flash PHP for full Flash website pages | Coder Coacher - Coaching Coders</title><meta content="ActionScript 3.0 Tutorial - Hit Counter Flash PHP for full Flash website pages - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Adam-Khoury/">Adam Khoury</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>ActionScript 3.0 Tutorial - Hit Counter Flash PHP for full Flash website pages</b></h2><h5 class="post__date">2009-02-17</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/-ZPOOdLG8_k" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hi guys in this flash in actionscript
3.0 and PHP lesson I'll show you how to
create a flash page hit counter whether
you want to track page hits site-wide on
your flash website or track your
individual flash pages separately to
really understand what content people
are most interested in your website or
what pages they're most interested in
and this is going to use PHP and a text
file the text file is going to be for
storage of the number that we're going
to be using and incrementing and PHP is
the the dynamic language that's going to
be processing that number for us within
the text file and communicating back and
forth with our flash file and that's how
it's gonna work
and this is from one of our forum
members is a Strider 23 84 he asked if
we could show him how to make an
ActionScript 3 hit counter and he was
looking at a tutorial because he found a
tutorial on Carew pecan that talks about
making one using PHP files in
ActionScript 2 I think so what we're
gonna do and then I responded I said do
you have a MySQL database set up for
your server yet and or would you like to
take an easier approach and see a PHP
and text file number storage method and
I told him I'll make it video tutorial
out of either method he requested and he
said that he would like the text file
method and I would like to mention right
now that I would I would myself I would
use the MySQL method instead of a text
file database I would use a MySQL
database because I think it would be a
little faster and a lot more stable the
text file will have stability issues
when you start getting a lot of traffic
and if there's many people accessing
that script at the same exact time I
think though that you'll run into
problems with a MySQL and PHP setup I
think it would be a little more smooth
and all of the numbers process correctly
so with that said I'm also going to say
that I'm not going to Cooper died
to reference any code there I have my
own way of doing things encoding things
and I'm I'm pretty good at coding so I
don't need to go and reference anybody
else's code at any other site and I have
learned things from other coders are
mined in the past yes but I just want
the people of the administration at
Krupa comm to know that we're not gonna
give you credit for any of this because
I didn't go and look at any of your code
okay so first thing we want to do is
let's go ahead and close that out and I
have here in flash an example file let's
say this is my website it's all kind of
cool things in here buttons and
everything and it's my home page of my
website and here's a layer it says my
page and all I have on here is static
text fields some you know just cosmetics
to make it look like something and then
what I'm gonna do is take a static text
field and I'm gonna type in let's see
number of page hits if I can type
okay so you got a number of page hits
equals
now let's select it and make it black
you can see it a little better fold it
out down there barrel darker and now
we're gonna take it make sure it's
highlighted on stage press ctrl C and
ctrl shift V to paste it in place and
let's drag it on over and double click
it actually don't double click it just
yet just highlight it turn into a
dynamic text field and give it an
instance name this is how we're gonna
connect to it in the code so it's
important call it hit count underscore
txt so now we have a hit count text
field that's gonna display that number
when we go and get it so let's just move
this over give it enough space in it to
where it'll show a number and it's
aligned to the left and it's the same
text setup as this one and if you wanted
to display really nice and correctly
without pixelating you can embed it
press embed lowercase uppercase numerals
punctuation press okay and now it will
display just like this one and if you
had a funky text you embed that funky
text and it will display to all the
users all the visitors to your site even
if they don't have that text installed
on their machine that's a good good
thing to do is embed your dynamic text
fields I always embed my dynamic text
fields every time I make a dynamic text
field on stage except for some of my
tutorials but if I'm making a site for
somebody you best believe every dynamic
text field that's running dynamic
information is embedded okay so now we
have our page all set so once you have
your Flash page yours would be already
made and everything you just put this
two things down here at the bottom
static text field and then a dynamic
text field dynamic text field needs an
instance name of hit count underscore
txt now we'll create a new layer we'll
start coding this puppy out
first thing we'll do need to do is
assign a variable name for the url's
variables object because I like to send
variables with all of my PHP requests
for security reasons and stability
reasons and accuracy reasons so we'll
call it variables : this is URL
variables equals new URL variables
object
open closed parenthesis and semicolon
okay now the next line we're going to
build the VAR send variable and now
we're going to the URL that we're going
to connect to in the PHP file and this
one you want to make sure you have the
 the correct file path referencing
or it won't connect to it on your server
so let's call this one bar bar send and
if you see in any of my other PHP and
ActionScript 3 tutorials this will all
look very familiar and this one is the
what am i doing
URL request yeah this is URL request
equals new URL requests sorry I lost my
mind there and we're going to name it
give it the file path referencing now
this is going to be hit parse file dot
PHP hit parse file type PHP close the
parentheses and oh don't close the
double quote then the parentheses and
the semicolon okay now we can build the
VAR send method or claim the bar send
method so we'll save our send that
method equals URL request method
mirtha method dot post this is all
capitals now it's sending the variables
to the PHP file using the post method
and not the get method now we'll save
our send that data equals variables so
it knows when it sends this variables
going along with it and now we're gonna
build the of our loader variable bar or
loader : URL loader equals new URL
loader okay so that's the name of our
new loader object and now we're gonna
set the data format for our loader dot
data format
having trouble typing my fingers are
cold y'all it's freezing freezing over
her North Carolina okay so uh my
daughter data format equals URL data
format URL loader data format I think it
is let's get this right dad it all turns
green I'm good I'm good ActionScript
crap okay and then dot variables this
would be all capital okay so now we have
the data format for the bar loader all
set up and now all we need is an event
listener for that thing so var loader
dot add event listener and this is for
the complete event dot complete
and we'll give it the function name
that's gonna fire off when it completes
you will create that function in just a
second
complete handler boom and closed
parentheses semicolon and that's it now
we set up the next set of things here
okay now we're just about done with the
ActionScript so all we have to do is
send a little variable request code so
variables dot request code and this is I
like to code this in for security and
stability and accuracy equals you don't
actually have to send the variable to
that PHP file you can just tell the PHP
file to activate and do its hit count
increment add one that's gonna be my
request code so in the PHP file I'm
gonna be looking for that little add one
there and if I don't see it if the PHP
file is gonna be programmed to to where
if it doesn't see that and of course it
from this flash file that won't process
anything so it's a good thing to do now
let's save our loader take that bar
loader we created and let's load the
variables in now or send variable
the bar send variable being the URL
request and the URL request has a void
loader attached to it with variables
that's what that means okay
now that's when it's going to send it at
that very moment this line here number
12 is going to send it to the PHP file
now all we need is a little function for
when the data comes back from PHP we
want to display the correct number in
the hit counter dynamic text field all
right that's what it's all about so
we'll go to function complete handler
this is the remember we name the
function here complete handler open
parenthesis this is event dot : sorry
not that this is event event or you
could put e : event however you wanted
to claim that but event : event : void
and now open our curly brace curly
brackets whatever the hell those things
are and then inside we'll do the last
two lines that'll have this thing
completing them will create the PHP file
and a little text file database and
you're good to go so let's see here we
have to put a variable and then load it
into the text field so let's say var
the account the bar let's name it count
bar
equals event we're gonna reference this
little guy right here yeah event if you
named yours e here if yours happened to
be right here if it just said E which a
lot of scripts do this would be right
here I do believe I think that's how
that works but let's just stick with the
standard there okay event dot target dot
data and this is going to be the data
that we want to bring back from the PHP
file and we'll code the PHP file to send
this exact variable back and now all we
need it do is put into our hit town text
field dot text equals this count bar
right here that's it that concludes the
ActionScript that's needed it's not very
much at all and this cell this code and
everything's gonna be available the
source code will be available the whole
flash source code and all the files the
PHP in the text file everything will be
available for download free at develop
PHP com if you really want to get to the
the actual code that I created and the
working application so now that we have
the flash intact it's going to every
time the page is accessed in somebody's
browser it's going to go and look at
that PHP file PHP file is going to talk
back to it with some numbers and that's
going to be the page hits an accurate
page hit count all right so now let's go
to I guess a Dreamweaver
and I use Dreamweaver 8 because I don't
know I don't like to cs4 for some reason
I know it's great but whatever I don't I
don't use a lot of pre-baked things so I
could really just use WordPad for what I
do so let's go into it but I do like
syntax highlighting so that's the reason
when I use something like Dreamweaver
and plus the tools the design view tools
are really cool I'm not gonna lie do use
it so let's go to create new HTML first
thing we want to do is create this text
file so let's and put a 0 in it and
let's save it as and here's my hit
counter little example directory I'm
working it and I'm gonna name it
flash hit
count and this must be a text file so
you have to go down make sure it's dot
txt extension or it's not going to
connect to it PHP file won't connect to
it so once you have that you save it and
it has a zero in it we start with the
default value of zero and it's important
to put that zero in there now let's
create a PHP parse file now which is
going to be the magic of it really of
the whole application so the new dynamic
page PHP get rid all that crap and let's
set up our PHP tags PHP and then in
close PHP tag put a bunch of space in
the middle and this is where we code our
script in between those two tags
alrighty
okay it's not gonna be very much to this
PHP script and the logic of it is what
its gonna do is it's gonna read the text
file every time it's access it's gonna
read the text file and it's going to get
the number that's in the text file
the current number then it's gonna take
that number add 1 to it put the number
back the new number back into it and
also at the same time send that new
number back into flash for display so
when the next visit comes it does the
same thing adds one Boombah Boombah boom
you see how it works
okay so the first thing we're going to
do is claim the let's see the if
statement to check and see if our
request code is correctly I'm going to
set up an if statement nest there's an
if statement nest like a skeleton for an
if statement and inside of it we're
going to look for the post variable vo
st
and in between your single quotes in
there inside the brackets you look for
add one oh sorry
this is requestcode my bad you look for
the requestcode
variable name and make sure it equals
add one there we go
if the post from flash request code
which we set up to be add 1 equals add 1
that means this file if somebody was to
go to it in the straight from the
browser straight to the URL of this file
it won't process only if the flash file
is asking for it will this file process
ok so now we have our if statement set
up there so let's put everything inside
of that now
okay now we're gonna claim a variable
for the text file database variable name
that way we can use it easily in the
code so text database equals double
quotes and then a semicolon and in
between your double quotes put the name
of that text file we just created it was
named flash hit count right flash it
count that txt that's a text file so the
now the next line is gonna be the
current number variable current number
equals and here we're going to use a PHP
method of file get contents
and you can see what this method is all
about by going to php.net
and every other PHP method for that
matter php.net is where I learned
everything where I learned everything I
know about PHP and you guys should too
if you're looking to learn some PHP the
real code core okay so that's php.net
current number equals get file contents
and this is a good clean way just to
read the contents of a file and pack it
into a current number variable here so
at this point when the PHP file is
running it takes the number from the
text file database and puts it in our
variable here so we can now use it now
the next line we're going to open a file
handler just call it F H equals I'm
going to use the F open method or the F
open function put double quote
parenthesis and then add your text file
database to that this name here let's
grab this just pop it right and down and
what we're gonna do to the text file is
write to it now so let's put single
quotes W single quote and that sets it
up to be written to and there's a lot of
different you can append two text files
you can just read them right to them and
I put the W there because we're gonna be
writing die write or die
and the or dies ever handling type
function that's native to that can't
open file now let's not put that single
quote in there cannot cannot open file
already now i'm gonna claim a new number
and the new number is going to equal our
current number plus one it's that simple
that increments the value over and over
again and then slice this little edit
right here into this spot where i claims
current number up here when i was
writing out my script i had it like this
and you'll notice that i did and that is
incorrect I'm too used to ActionScript
plus I had the variable name wrong to
begin with I didn't put the dollar sign
there on it but this is the correct PHP
file configuration the data that we're
gonna write into the file now is gonna
be the new number so let's put double
quotes semicolon in between that will
put new number
okay so the data that we're gonna write
back into the file is that new number so
let's F right and open parenthesis close
parenthesis semicolon and here we're
going to have the file handler and the
the data that new number
and now we've got to close this up so F
close the file handler so in there we
just put the file handler right look
variable that closes it all up and now
all we have to do is make ourselves a
comment here and say print the note the
new number back to flash now and to do
that it's very simple you just type
print
double quotes and semicolon inside the
double quotes let's put the in flash
we're looking for a certain variable
from this and it's called count var the
PHP count bar and it's going to equal
this new number and that's pretty much
it that's the end of the application
let's test it out
make sure we got everything correctly so
everything's closed all right now let's
save this file let's go and see what we
need to save it as what did we say it
was hid parse file now let's save it
save as our hit parse file dot PHP it's
already set as a PHP okay now we can
close out Dreamweaver and or you really
really want to test it first so let's go
online okay let's put all these files up
that we just created on the server test
it out so you guys know I'm not full of
crap and you can see a live working
example on a server that's equipped to
handle PHP parsing and your server needs
to be equipped to handle PHP parsing or
this won't work for you so we put up the
AC run active content job guess we put
the flash hit count txt the hit parse
file dot PHP the SWF which is our main
flash file and the this would be
normally index.html because it would be
your your index page of your flash
website so everything would be in the
same directory and that's how it works
now let's go online to that directory
and you can see it takes the zero from
our text file database and it made it a
1 now if somebody else came to the site
let's press refresh it's a 2 now it's a
3 press refresh it's a fool it's working
it's incrementing beautiful it ok so now
that's solid visual proof that it's
working I don't want to hear any
complaints out anybody know where and
when I won't work on my server I don't
care that your servers not equipped to
handle PHP or you have some kind of code
ever look over your stuff real good
that's all I could say make sure you
your server can handle PHP first and
then look over all your code real good
in your directory structure everything
ok and like I said before these files
will be available at develop PHP the PHP
the PHP the text file and everything you
need and the flash part all right we'll
see you guys next lesson</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>