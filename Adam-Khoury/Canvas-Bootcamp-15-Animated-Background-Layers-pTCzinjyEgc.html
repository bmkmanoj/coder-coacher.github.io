<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Canvas Bootcamp 15 - Animated Background Layers | Coder Coacher - Coaching Coders</title><meta content="Canvas Bootcamp 15 - Animated Background Layers - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Adam-Khoury/">Adam Khoury</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Canvas Bootcamp 15 - Animated Background Layers</b></h2><h5 class="post__date">2013-11-16</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/pTCzinjyEgc" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">in this exercise you can learn to
animate a background layer on your
canvas that will be animated
independently of all the other things
going on and this is the finished
product of what you'll be learning to
render keep in mind that my video
tutorial framerate might make the
animation appear choppy this is an
animation that you want to evaluate
yourself in your own computer now we're
going to start with the code structure
that we left off with from our animation
tutorial I've got this canvas in a
canvas container which is a div down
here in my HTML you can see it has an ID
of canvas container and my canvas is
nested within it and I've centered that
container in the page so you can see
what I get so if I run this in the
browser you can see that I get a
centered white canvas that's a thousand
pixels wide and 500 high now my goal is
to animate and loop a background image
within the canvas it's very important to
create a background image that tiles
correctly so I'll show you how to do
that very quickly you notice that my
canvas was 1,000 pixels wide or create a
new fireworks document or you can be in
Photoshop or whatever kind of graphics
editing tool you use just make sure you
set it to 1500 wide and 500 high okay
the first thing I'll do is set my canvas
to black then I'm going to draw out a
rectangle that's 500 by 500 and I'm
going to give it a stroke of 1 pixel
white and I'm going to remove the fill
now I'm going to grab my paintbrush and
I'll set this to somewhere around 4
pixels and I'll just start dabbing in
stars in random places
and you can change the size to make some
smaller ones in there
so once you finish drawing you're going
to be left with a bitmap so let's take
that bitmap and this rectangle that it's
in and we're going to group those I'm
going to say control C control V and I'm
going to drag this next one over to zero
Y and 500 X position then I'll press
control C control V and this next one
goes at the 1000 X position now we can
ungroup those control shift G this one
control shift G ungroup this one to
control shift G now down at the bottom
just highlight your rectangles with the
white stroke and turn them black the
reason why we put those in places so we
can evenly tile these stars through
there now once you have that all set up
you go to file export wizard continue
continue
exit and then you're going to select jpg
or whatever file type you want to select
and then export to your computer I saved
mine as stars jpg you can save this file
if you need to adjust it later so the
first thing we'll do in our script is
we're going to get a variable set up for
the background image barbg is equal to
new image object in JavaScript then we
just say BG source is equal to our stars
jpg now above and outside of our animate
function we're going to create a new
constructor for our background object so
we'll type in function background open
close parentheses
opening curly brace and closing curly
brace now we're going to set some
properties and then one method so the
first we need some properties
representing the background exposition
make that equal to zero this dot Y
position is going to be equal to zero
this dot width it's going to be equal to
our BG image object dot width and then
this dot height is equal to VG height
now we're going to create the render
method for this background object so say
this dot render is equal to function
open closed parentheses open and curly
brace and closing curly brace
now what we're going to do is say CTX
dot draw image we're using the draw
image method and the image resource is
BG that's the first parameter the second
parameter is the exposition of the image
we're going to type in this X - - that
way the exposition is always
decrementing it's going to start at 0
and then it's going to decriminalize
possession of where we want that image
drawn and that's how we get the animated
effect is we animate the background X
property and you can go either direction
you want you can increment or decrement
to specify direction now the last little
bit of logic we need within this method
is an if condition that says if this
background exposition is less than or
equal to negative 499 because eventually
we'll get there as it D chram ends down
it starts at 0 then it decriminalize
to 0 starts the position back to 0 again
so the animated background will be
seamless and the viewer won't be able to
realize exactly what's happening it'll
just seem like one continuous long
animated background and once you have
your background object all programmed
then we're going to create a new
instance of that background object we'll
say var background equal to new
background and then down in our drawing
area in our animate function we're going
to take our background instance ctrl C
put it right here and say background dot
render and we'll call the render method
for that background so let's see what
that gives us nice a beautiful animated
background and if it seems choppy that's
just because my video tutorial framerate
is set very low so what if you wanted it
to go faster you can say this dot X -
equals 3 because if we use just - -
that'll decrement it by 1 each time if
you want to
each time you can say - equals three and
now you'll see that you get a much
faster moving background so basically
the background starts at a zero X and
zero Y position and it slowly moves to
the left and once it gets to negative
499 X it just gets set back to zero now
you can draw many more things and it'll
be independent of your animated
background okay let's put that back on
decrementing by one down here in our
animate function you can draw many more
things to the canvas so I'll say CT X
dot fill style equal to orange and CT X
dot fill rect I'll put a rectangle at
100 X 100 Y and I'll make it fifty
pixels wide and 50 pixels high see what
that gives us
so you see and this object or any other
assets that you have in your canvas can
be animated or controlled in different
directions and different speeds and your
background layer will be just doing its
own thing independently behind
everything else</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>