<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>How to Build a Social Network Website Part 29 | Coder Coacher - Coaching Coders</title><meta content="How to Build a Social Network Website Part 29 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Adam-Khoury/">Adam Khoury</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>How to Build a Social Network Website Part 29</b></h2><h5 class="post__date">2009-08-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/CKzatLxKvjo" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello and welcome to our 29 of web
intersect where we're learning how to
create a PHP and MySQL based community
social networking type website from
scratch yes and we're 29 lessons deep
now so what I'm going to do is get
finished with this lesson I'm going to
wrap up the whole package that I have
just changed my connection data in my
script and really least the whole source
file and you can find it here free
source package you click that and it
will be a version 1.1 which will include
28 and 29 then next week I'm going to
create an HTML based header get rid of
this flash header and show people how to
do that because I've had a lot of
requests on a lot of people just don't
want to use flash and sometimes I don't
blame them and a lot of people have
turned away from learning the system
because of this flash header being in
place and let me just tell you now it's
a whole lot easier doing it all HTML and
CSS it's harder doing it with flash I
just want to note that because a lot of
people you know they bash the system for
what it is but i thought i would throw a
little bit of flash in it just to get
you guys a little more dynamic in the
tools that you program with okay so now
what I'm going to do in this lesson and
show you how to create a random member
display instead of showing all your
newest members which is usually very
bland those members never really have
any activity yet they don't have any
pictures usually so my script is going
to show you how to show as many random
members as you want from your database
and make sure they have a picture if
they don't have a picture and it's that
default site default member picture they
won't show up here so it's very
important you might want your site to
look a little more colorful and have
more pictures instead of all of those
default member pics laying in there so
that's what we'll show you how to do in
this lesson
okay so I made it in such a way to where
you can use either mode if you want to
use the show newest members or if you
want to use show random members that
only have picture script you can do that
so let's go ahead and open Dreamweaver
let's open the web intersect let's go to
desktop web intersect and then we have
the root and inside of the root
directory of the web intersect files
let's open the index page and let's also
open my new script it's in the scripts
folder and that's where you'll find it
in the source package and it's called
homepage random members let's open that
up first let's look at the homepage on
the index page you can see in the
programming that I commented out the
whole section that says gather all the
members for temporary display now we're
going to we limit that by 12 and we were
showing all the newest members we're
ordering by ID descending that would
effectively show all your newest members
and since I wanted to show only members
with pictures and only members and
randomize them sorry I wanted randomized
display with only members with pictures
so that's what I built a little script
to do that and the way you put it in is
you just include it into this page right
here scripts see where it's referring to
the scripts folder homepage on to score
random members that PHP so it loads all
of that code and this is very handy
showing you guys how to make things a
little more modular and a little more
separated out that way when when bad
things occur in scripts you know exactly
where to go to fix things and you know
you can just it's just a whole lot
easier to change it's a little more
object-oriented but it's not ooh it's
not exactly OOP but it's it's a little
along the lines of okay so let's look at
the homepage random member script now
and I'll explain that to you it's really
short and sweet and effective what we do
in that script is first we start the
member display list
variable oh yeah and in the home page
we're right there remember display list
you see that variable you won't find
that variable anywhere on the index page
it's on the homepage random member
script see member display list and then
you have a where to go howdy tidy
downtown remember display list right
there that's where it feeds in from this
included file so we start that variable
right here we started with the table
that we want to use in the styling on
that table and we just open the first
table row and then we close the variable
there then we run the SQL statement or
the SQL query rather that and by the way
these the script is now the whole system
is now php5 ready because I switched the
server over to PHP 5 and a few bugs
arose I squished them and I made the
whole system php5 ready so it works in
PHP for and php5 now with the remember
me system and all that I could stop okay
so what we do is we run the SQL query
and after we run the query we want we
run the while loop for the mysql fetch
array for all the data that we we read
so we're selecting ID and first name
from my members table where email
activated is one we want to make sure
they're activated order by rand you see
how you can just stick in the rand right
there in the SQL query that is SQL okay
so it gives you a randomized SQL return
and with that return you run the while
loop on it and in the while loop you'll
notice that we gather a few of the
fields that we need the ones that we
claimed in the query ID and first name
right there Ivy first name and then I
just used the substrate substring method
on the or function PHP function on the
first name variable to cut it down to 10
characters long and no more because
I didn't wanted messing up my display so
everybody's name is any more than 10
characters it just gets cut off at 10
and you might not want to do that you
can just remove this line completely and
it won't do that and then we set
condition to see if they are my favorite
kind of peeps with pics so check pic we
run the ID variable right here to go
into their folder and see if they have
this image sitting there and if they
don't then right here is the condition
that says if file exists check pic then
we put them in the display list but
before that we run an if statement that
says if I equals greater than 13
actually you can limit you can just
limit right here type in limit 12 if you
set limit 12 right there you wouldn't
even need that if condition right there
this if condition that and this closing
bracket for that if condition could go
away but i'm going to leave mine like
this or actually i might put the limit
in who knows whatever you get in the
source package I've explained both
methods so yadda yadda okay so now if
file exists check pic then and only then
all these random members that we queried
will we throw them into the display list
and what happens is in that table row
let's see where is it
yep in that table row we're setting
table columns so here we just put the
user pick like the image tag and
everything and the whole image tag with
their dynamic ID in there into this
little variable called userpic and
that's used right here see but really
this is the line that renders the magic
it renders each table column for each of
these results in the loop so I'm going
to get 12 results and each one is going
to render out a table column within this
one table row and inside of the table
column this is div that Styles the
height so somebody that uploads a
picture that's really high and
proportions to its width and it gets cut
off that way our display is an all
jumbled up and messed up and overflow is
set to hidden to hide that extra portion
of their picture and then we just set
the link to their profile close up the
div close up the table column and that
is it and then at the very end outside
of the loop close off the table row and
the table and that will give you a nice
table with one row in it with 12 just
like this 1 2 3 4 5 6 7 8 9 10 11 12 1
row 12 columns have a law so what I'm
going to do is put this into and we use
the I plus plus method here which would
not even be needed if i use my limit so
i might leave it like this which works
but it's not really optimized if you use
limit here limit 12 then it will be
optimized and then i can remove this and
the I I would need it ok so I'm going to
package up the whole system change my
connection data from my database that's
really all I need to change and get the
whole source package that I'm working
with on the site live that's running
beautifully I'm going to just package it
all up put it in part
1.2 so we'll have download version 1.2
which will cover 1 through 29 and then
next week we're going to make this an
HTML header and before I go in the
forums Valerie who is awesome
contributed a script and snippet of
friend system it's powerful you guys
want stuff like that you know myspace
Facebook YouTube friend type systems she
built one and I haven't looked at it yet
but you can you can download it she put
the link right here so if you want a
friend system for your community website
valerie has produced that for you guys
and you guys should give her a big
thanks if you use it okie dokie we'll
see you next lesson</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>