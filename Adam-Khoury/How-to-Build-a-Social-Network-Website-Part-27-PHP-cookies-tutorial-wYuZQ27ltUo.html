<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>How to Build a Social Network Website Part 27 - PHP cookies tutorial | Coder Coacher - Coaching Coders</title><meta content="How to Build a Social Network Website Part 27 - PHP cookies tutorial - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Adam-Khoury/">Adam Khoury</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>How to Build a Social Network Website Part 27 - PHP cookies tutorial</b></h2><h5 class="post__date">2009-06-20</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/wYuZQ27ltUo" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">okay welcome to web intersect part 27
where we're learning how to build custom
social networks and communities simple
based systems using PHP MySQL little
flash actionscript 3 so here we are in
our flash actionscript 3 header and what
we're going to do is make some room here
in between right here in between the
login button and the to form fields for
email and password let's move these over
to about there and let's move this login
button over a little bit and so after I
finish this lesson I'm going to update
all of the source package to have all
the new scripts and the new header here
you can see I'm working inside the goofy
header the goofy source package hitter
ok so now I'm going to put on this frame
on this key frame on key frame two of
the not logged in stuff I'm going to
place remember me box there it is let's
drag it into place let's put it about
right there
I'm going to show you how I made that in
a second i'm going to move all this over
need a little more space that forgot
password i'm going to make that into a
button in this tutorial it's going to be
much like this link here just going to
lead to the forgot password page and
let's go ahead and move this login
button over that's going to be super
simple actually we can do that right now
see this text how it says target self it
has a link on it i'm going to do the
same to this text give it a link target
self and let's go ahead and make that go
to forgot pass it's just regular text
field static text with a link on it
you don't have to put the PHP I don't
think you just put forgot pass if you
want but I'm going to stick the PHP on
there okay so there's the forgot pass
there's the login button let's move the
Remember Me button over a little bit and
these can go back over a little bit
maybe to about right there okay so when
they add their email but when they place
in their email they place their password
and then they just click this little box
here and then they login we're going to
add some new functionality now first let
me show you how the box is made so you
understand that and what it is is a
movie clip inside of flash we created a
movie clip here and it's just a simple
little rectangle and i'm going to show
you what it's comprised of in a second
it's got an instance name of remember
check box and inside of it if you
double-click inside of it you'll see on
the layer 1 i'm going to rename that box
graphics
backs
box graphics and that's just the the
actual box the rectangle just little
white rectangle with a black border and
on frame one on an actions layer we also
have a check layer here but on the
actions layer well let me show you the
check later first on the check layer
frame one keyframe one is empty I'm
keyframe to this is a little graphic
symbol i have there which you can have
any kind of i just drew it out with the
pen tool i think it's a movie clip that
has groups inside of it and I tinted it
black or you can tint yours white you
can see if mine wasn't tinted black it
would be white because when I created it
it was it was white and so I just tinted
mine black so to show up but originally
when I made this checkbox checkbox it
was on a black checkbox so I had a white
check I just wanted you guys to know
that if you looked at it and you were
like why is that black only inside of it
is all white it's because i have a tint
set on it ok before i discuss the action
script that's inside of that little
check box let's make sure we get a good
reference of where we are first here we
are looking at all the not logged in
stuff here's the check box movie clip
double-click inside of it and there's
action script on two keyframes here on
the first keyframe and I even added a
sound that I give you guys no charge so
on the first layer the ActionScript you
guys going to like this one because it
shows you how to code a button or a
movie clip symbol from inside itself but
referencing this timeline it's very
interesting the way I did it so I'm
inside of the movie clip symbol that is
a button basically and I'm referencing
the parent
but it has this instance name you see
when we clip that parent that I wonder
if I use this if that would work who
knows you might be able to use this dot
button mode equals true but I'm not even
sure but I was just fascinated that this
method worked right here the movie clip
top parent and then referred to the
actual item itself inside of it it's
just nutty the way that works but it
works nicely and it's set to have a
event listener and the button mode for
the checkbox is set to true so that way
when persons mouse goes over that checks
bak check box it shows the little hand
symbol so they know they can click that
thing and so what we do is inside of the
remember check box we say if is checked
because we set a bar abilene bar here
abilene variable of is checked and the
value is set to false so the VAR name is
in check is checked and the value is
false so here we say is if is checked
equals false will go to and stop too
that's if the person is trying to click
the button so if it is checked it's on
this keyframe and it's empty and they
happen to click it it shoots to this
keyframe where it's not empty shows to
check and then
else hey it's set to go to and stop one
so that means else it would be on frame
too so go to and stop one it's like
toggle toggle functionality it'll just
put the check on either blank or not and
then we can reference that in the code
so here on frame too we just say is
check the equals true so this this
variable of is checked this boolean
variable is what we use here in the
parent timeline in the coding and I'm
going to pop that in and discuss it with
you right now right so when they press
login remember the validate and send
function that's the one that we're going
to add this remember me checkbox coat
too so in the validate and send section
or function right inside of that bring
the existing code down a couple of lines
I'm going to pop in this code here and i
even have nice cold comment that
separates it from the rest and what it
does is it says it sets a variable for a
remember choice and that's just a stray
set as a string variable now we can use
it here and we say if remember check box
which is the instance name on this check
box see if the remember check box that
current frame inside of it equals two
then the remember choice is obviously
yes because the check mark is visible
and we're on frame to inside that movie
clip else we're on frame one inside that
movie clip
and so the remember the remember choice
would be no so that pretty much ends the
whole section that you need to add
functionality to that now where you're
going to pass a variable let's pass one
more variable here this is how easy this
is you pass a variable of remember let's
just call it remember and that's
variable that we want to use whether
it's yes or no we want to send it okay
so the variables remember equals
remember choice which this would be a
yes or no depending on if they click the
checkbox or not to be remembered so now
once this all gets sent to PHP then you
can use regular PHP coding for setting
cookies and everything like that which
i'm going to show you right now there's
three existing source scripts in the
package that we're going to manipulate
to make this happen we don't have to
create any new scripts we're just going
to manipulate existing ones that we have
already and the first one is going to be
login dot PHP and since I've already had
this remember me functionality working
on the site for a couple of weeks now
mine is already in place so I'm just
going to explain to you what we added to
the scripts okay in this login dot PHP
script we have one line here that we
added remember that remember me variable
that I just created in flash that gets
posted as well as the email and password
we scoop that up into a a local PHP
variable and so that's one line we added
and then the other one two three four
five six lines that we added to the
script or right here and I separated
those off with a nice code comment there
about what they're doing and this is
after the close the while loop that runs
the login check remember after we close
that while loop i added six lines here
that's one if condition and the if
condition is that if that remember me
variable equals yes then we set cookie
you can read up all about set cookie on
php.net you can search that function and
read up all about it the user
contributed notes are really helpful and
everything too so if you want to set a
cookie all you have to do is claim the
cookie name right there
the information that the cookie would
hold which is going to be dynamic
information we're going to hold our user
ID their first name their email and
their past and we name the cookies
accordingly okay and then you just have
to set your time ours is set to about
two months so now the second file that
we manipulated and basically the seven
lines is all I added to that script and
it works just nice so the check user log
script is a little more complicated and
I'll discuss that one with you right now
okay and this one what I had to do was
add another condition to see if the
cookie was not set here so if the
session ID is not set well first of all
if the postcode from flash equals check
log then we run these two conditions
here which you can combine them if
you're slick but I just want to show
basic functionality because this is all
about learning remember this is not
about the best optimize system because
this is not it guys this is just a basic
learning tool okay so here if we go to
look at what these if conditions are
doing here the first one is saying if is
not set the session ID then we're going
to execute this code and this code
states that if is not set the session
cookie of the ID cookie that we created
upon login now then we execute this code
return message the flash equals not
logged in and we exit like normal okay
so that's what I added for that was
another condition in there it's pretty
basic so here we connect to the database
like normal
yep this is all normal and here we have
some new functionality okay so here we
said if cookies are set but no session
ID is set we set it below and update the
last log log in date field in the
database so if is set the cookie ID that
means if it's set and they have created
a cookie by using that remember me
functionality and we know that their ID
and their first name and their email and
their password is all equal to their
cookies that are saved in their computer
and that's how cookies work cookies are
saved their little tiny package of
information that are saved on the user's
computer that way you can be referred to
locally for them and so we know what all
those things are so we just pass it
right into the local variables there
like we would session and then we set
sessions out of those variables just
basically logging them in without having
them go through all the steps of logging
in that's what remember me functionality
is all about and this is the magic of it
right here see how I'm setting the
sessions back for them if their cookies
happen to be set now we say
you have the first variable the first if
condition right above that one is the
one that is if their session happens to
be said already we don't even have to
look for their cookie to be set so
that's why this if condition runs first
but then we run that nice cookie if
condition here and we set all the
cookies we use all the cookie data if
their session happens to not be set yet
to actually set the sessions that's what
that's doing and then we can access the
value of these two session variables for
use in SQL statement below and also for
sending these two variables into the
flash header for use and display like
like we normally do so here we're going
to update the last log date field or not
so we check the visit we check the last
visit date is not equal today and this
is important functionality if you want
to retain knowing when the user last
logged in because if they have cookie
set they're not going to be logging in
continually they'll stay logged in so
you have to run this little bit of code
to set their last login date to when
they've last visited the site that's
that's what this is doing here so we
check that the last visit date is not
equal today so here we select the last
log day from my members where the ID
equals this members ID then we won't run
a while loop to actually access that
data and grab that date out so once we
grab that date we can use it in a
condition here
and first we grab today's date so here
we run the while loop we grab the date
that they last logged in and then we
create a variable for today's date and
here we make the dates the same format
that way we can compare them this line
is making those two dates the same
format makes the last log date the same
format as today's date here and then we
can run this if comparison this
condition here says if the last log date
equals or does not equal today's date
then we run a MySQL query to update
today their last log day to now or today
where ID equals ID so I hope that makes
sense to you so basically what we're
saying is if their last log date is not
equal today we're updating it to today
in case they happen to be using cookies
because they're not using the regular
login functionality that somebody
actually manually logging in would be so
that's what that means you got to make
your script you check user the log a
little bit smarter if you want to use
session sorry cookies if you want to set
cookies for your users so they don't
have to continuously log in so it just
has to be set up a little bit smarter
and that's pretty much it that's all I
added to that code and I i left the
original see here this is the original
check user log script without remember
me feature for you to reference are not
a nice guy this is what this whole
script was before I added the cookie
functionality to it
now let's look at the log out PHP so you
should have a pretty good grip on what
was added because I explained it all
pretty thoroughly and what the old one
was before we added this cookie and
remember me functionality so in logout
dot PHP this was very simple all we had
to do was add a few lines to grab the
see here I put added for remembering
feature to set the cookies to a time in
the past so that's basically all you
have to do when somebody has cookie set
and you first you want to look for if
they have cookie set so we put a
condition on it if is set the cookie ID
cookie that means all the cookies are
set for that person you set cookies like
we did before but this time we give it
the value of nothing and the time is way
in the past so that way the cookie is
expired no longer good no longer valid
so that's exactly what we do there is
pretty much just crumbling the cookie
and then we can session destroy like
normal here and print the message back
to flash or whatever HTML header you
might have and that's pretty much that
that gives you remember me functionality
and so I'm going to be updating the
source package and we're going to take a
break for a while from this tutorial
series okay so that concludes part 1
through 27 is going to conclude web
intersect version 1.0 anything else that
gets added to the system I'm going to
take a break from these tutorials from
for a little while and focus on some
other things that I'd like to focus on
but I'm going to come back to this
eventually and what I'm going to do is
archived 1 through 27 and its source
package as version 1 point 0 anything
that gets added to it will be
1.1 1.2 blah blah blah blah okie dokie
we'll see you guys soon</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>