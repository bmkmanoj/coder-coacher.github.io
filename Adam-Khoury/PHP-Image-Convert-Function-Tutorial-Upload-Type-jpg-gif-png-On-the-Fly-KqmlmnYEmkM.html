<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>PHP Image Convert Function Tutorial Upload Type jpg gif png On the Fly | Coder Coacher - Coaching Coders</title><meta content="PHP Image Convert Function Tutorial Upload Type jpg gif png On the Fly - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Adam-Khoury/">Adam Khoury</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>PHP Image Convert Function Tutorial Upload Type jpg gif png On the Fly</b></h2><h5 class="post__date">2011-03-25</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/KqmlmnYEmkM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello and welcome back to the mastering
PHP image processing video textbook
there may be some occasion to maybe some
application you working on where you
must convert from one image type to
another on the fly when users are
uploading images in this example we'll
show you how to convert all uploaded
image types to jpg if the file is
already a jpg the no conversion will
take place and this function can be
duplicated to change uploaded file types
to any type that you want not just jpg
we're going to be stemming off of our
previous lessons in this video textbook
to add another function under our resize
function so after you perform a k' image
resize over it whatever you named your
function you're going to throw in
another function here this one I labeled
start Adams convert to jpg function and
you'll notice that this function is
called to run within an if condition you
see the if condition here so the if
condition reads if the file extensions
first you turn the file extension to
lowercase using the string to lower
function you say if the file extension
is not equal to jpg then and only then
do you change it to a jpg type because
if it's jpg already you don't want to
waste the resources of making it a jpg
another copy of it when it's already a
jpg only if it's a gif or PNG type do
you want to this function to run on the
file to turn it into a jpg if it's jpg
already this whole section will get
bypassed so this custom function we have
here it's set to take on three
parameters target file new jpg and file
extension target file is the resized
file so after the file is resized that's
the one we're going to target the new
resize copy then we're going to set the
path and the file name for this new jpg
it's going to be created from a gif or a
PNG file so we're using kaboom arrays
first element which will be any set of
characters that is before a dot in the
biles name
and really you can use any method you
want to name this new vial but I just
chose to use the original uploaded files
name so that's going to be where the new
JPEG that's created from either a gif or
a PNG file that somebody uploads that's
where it's going to be housed in the
uploads folder and it's going to have
this name and it's definitely going to
be a dot JPEG this time so I can force
jpg extension on the name so you feed
the target file in the resized file and
then you set the new jpg name which I
just explained and the last one is the
file extension like we've been setting
in the other functions that just lets
this custom function know what the file
extension is for this file okay so now
we're going to add this new custom
function in for converting images to jpg
into our aka PHP image library 1.0 or
whatever you name George and it's a
little library of functions that you've
created custom to handle image
processing more advanced image
processing so I'm going to pop it in
right here
and you can see it's not many lines to
this one I'll explain it right now
first we scooped up the three parameters
with the three variables coming into the
function
the file extension the new copy of the
new JPEGs name and where it is to be
placed on the server and the target file
which in our case is to resize file you
can really target any file you want so
we list the original width and original
height like we were doing in these other
functions here for the target file when
it comes in we use get image size to
list the original width and the original
height then we use string to lower on
the extension to make it all lowercase
that way we can evaluate it here to say
if the extension is gift we're going to
use the image create from gift function
else if the extension is PNG we're going
to use the image create from PNG
function on the target file to create a
new image and here we create a new
rectangular shape using image creates
color that has the same dimensions as
the file the target file then we use
image copy resampled on the newly
created image and this image create true
color rectangle and we don't resize or
anything in here we keep all of these
coordinates
all of these numbers at default numbers
for instance all the left top corners
are zero all of the width and height or
what the original height is for the
target image so nothing's going to get
resized we're just making a copy of a
gift or a JPEG of a gift for a PNG to
then output it as a JPEG using the image
JPEG function here so you take your true
color image as the first parameter to
that function then you place your new
copy information and that's where it's
going to be placed on the server and its
new name and the quality of the output
JPEG is going to be 84 in this case you
can make this 80 or whatever
don't make it too big I think 84 is a
nice safe number doesn't make the file
too big and it looks just a little nicer
than it would at 80% this numbers the
quality of the output file and that's it
let's test it out all right let's choose
a gif this one is definitely a gift
upload it all right now let's try a PNG
file this flower is a PNG now let's
check the uploads folder okay so here
I'm going to double click in the uploads
folder on the server and I should see a
JPEG created out of this gif and there
it is there's the JPEG from the sky gift
now we should see a JPEG created from
the flower dot PNG and here it is flower
dot JPEG so I'm going to put that on my
local machine and the sky picture both
of them JPEGs let's take a look at them
okay so you see what you've got here
this one is a gift that's the one I
uploaded this one is now
a JPEG that's the one that was
transformed on the server on the fly
from this one and same thing with the
flower there's a PNG type that we
uploaded and there's the JPEG type now
let's take a look at them preview it as
the P&amp;amp;G and here's the JPEG that was
made on the fly on my server same
quality nice-looking image so this is
how you can go about converting all
images to one certain type and if you
wanted to make yours all output to gif
type you just change this to image gif
or image PNG down here to output to PNG
type and you just change up a couple of
the variables and the way your condition
reads so if you're going to change
everything to PNG type if they are
uploading a PNG you don't have to
convert that so you just change that up
a little bit you'd be good to go but
most people would use this to change
things to a JPEG because JPEG is the
most universal image handling type
alright so next we're going to tackle
watermarking so we'll create a image
watermarking function here and put it
into our imaging library so so far we
have three nice functions going on
within our custom imaging library that
we can tap into anytime we want to
convert an image thumbnail crop an image
or resize an image we're going to add a
couple of more functions to this file so
stay tuned for the next lesson where
we're going to add water marking on the
fly to protect your images from theft
online</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>