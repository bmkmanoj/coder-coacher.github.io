<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>6. Mass Email Website Newsletter Bulk Batch Send Tutorial PHP MySQL | Coder Coacher - Coaching Coders</title><meta content="6. Mass Email Website Newsletter Bulk Batch Send Tutorial PHP MySQL - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Adam-Khoury/">Adam Khoury</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>6. Mass Email Website Newsletter Bulk Batch Send Tutorial PHP MySQL</b></h2><h5 class="post__date">2010-01-03</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/ZM2uxb8gfn4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hi how you doing
Adam here at flash bill big we're doing
the last part of this series finally but
it was fun we did a lot of stupid crap
now what we're going to do is write
quick opt out script for the newsletter
application and then talk about
application expansion which once the
opt-out script is written you feel like
you've got everything you need
you can skedaddle but maybe if you're
new to this kind of thing you want to
know how this might be able to be made
more automatic or have better more
functionality you know come on let's
have some fun
here we are inside of our newsletter
folder with our little scripts that make
the application run and we're going to
go to Dreamweaver where we've got the
blast script dot PHP open and we're
going to go to file new PHP get rid of
this crap go up to the PHP tab and
Dreamweaver put in the code black go
down a few lines and I'm going to slap
in a little generic query beep okay and
very nice now we're going to say if I'm
at the very top of the script if the get
variable from the URL variable is set
because you know in the blast script
here we give them the opt-out link so if
they click that link from within their
email application they're going to be
going online to a webpage called let's
go ahead and save this now file save as
how did let me cancel that get the
correct name here opt out that PHP okay
so file save as opt-out it's already PHP
file so save okay
now let's finish this if statement
okay so here's an if nest and inside of
the place where you put the evaluation
is we're going to claim or set the
variable or see if the variable set
rather sorry the get variable which is a
URL variable that comes in on a URL
string so let's see if the get variable
of e is set because in the Blas script
that's what the URL variable is defined
as e equals this person's email so in
the opt-out script we say if get e let's
just say if is set let's use the is set
function
to make sure it's set and if it's not
set the script won't run let's grab our
art a little generic delete query there
put it in that condition inside of it so
it is set the get variable from the URL
variables then we're going to put that
in a local variable called let's just
call it email keep it easy email equals
then you can access the get variable
from the URL string just like that and
it will pack that into this local
variable here so then we can use that
here control see where email equals
email in the database there so the leap
from table where email equals email and
let's get this right table name in there
the table name is newsletter and we have
to make sure we connect to the database
voiced before we try to run that query
so let's grab our and include once
connect to MySQL control C and boom
there we go
it is set the get variable from the URL
string we include once connected
database then we put that get variable
into a local PHP variable which we could
then use more easily within our SQL
string which is saying delete from
newsletter table where email equals this
person's email limit one which what
we'll do is remove their row completely
from the database they will never get an
email from your newsletter application
again and then at the bottom you can
print out a message now right here after
the query you can simply put down
another line put another if statement
little nest there and that one's going
to say if this SQL delete is successful
or you can say it is not successful by
claiming or by placing the exclamation
mark in front of that variable so if
there is no SQL delete variable that is
set here that means if there's a problem
with this query we're going to echo to
the page show the user some text saying
sorry there seems to be trouble removing
your listing please
okay so we say please email admin
directly using this email address and
put an email address here that's used
for direct support because your query
failed sucker but now which it shouldn't
else we're going to give another message
oops let me get the right bracket in
there else we're going to echo to the
page something else here it's going to
say okay loser you will never get our
newsletter again
now you don't want to write that but I'm
going to write that because this is a
little fake tutorial application but you
would just say it is done
you will never get it or email again
okay now let's take a step back and read
the script that we've created we're
saying if that opens here and closes
here if the get variable from the URL
variable is set and it has a value then
we're going to include once connect to
MySQL database and right here I'm going
to put a little message for you saying
filter this variable like a mofo for
security
make sure there's no nothing somebody
can put in for SQL injection attack okay
I'm going to make sure that nobody can
place SQL injection attacks within your
database within any of these queries
because this email if they had the
proper characters within there the URL
variable which anybody can easily
manipulate straight through the URL
string if they put the certain
characters in there they can hack your
database make a sure you don't let that
happen hell you stupid guy okay all
right now that's the whole script that's
it we're echoing out we're saying we'll
filter that email variable first then we
use it in this SQL query then that at
this line actually line eight that's
when it deletes if everything's
successful with that query and we do an
evaluation here and if an else statement
say if they're these problem with the
SQL delete query echo sorry there seems
to be trouble removing your listing
please and put your email here and then
else it's done that's it okay so this
little file is called output that I'm
sorry opt out PHP and we're going to
have it in the folder the Applications
folder with all the rest of the files
and you can see where did I save it it
should be sitting right there file save
as
here we are save it there update links
nope okay now it should be in that
folder now yes we're good to go we have
our index file which is the form that
gathers their name and email address and
sends it to the database then we have
the blast script which is the one that
performs the actual automated emailing
to all the people in your subscription
list then we have the opt-out file which
is for people who want to opt out
receiving your newsletter further and
connect to my SQL file which is needed
to connect your database when you're
doing all the talking and all these
queries within these scripts now let's
have a discussion about how to expand
this type of application we can go ahead
put our little check mark here we finish
this and now we're talking we're done
we're pretty much done you got things to
do your busy guide takeoff but I'm going
to talk to the guys a little further now
before you go listen very carefully
because here at develop PHP in the video
tutorials in Apps section when you click
the PHP a mysql tab there this tutorial
series is going to be in this list and
on each one of the pages for the series
like this one is going to be a download
free source files package like that
that's where you can get your hands on
the free source files for this entire
lesson okay I have a lot of people
wondering where they can get the files
for the things I do and it's all sitting
here at develop PHP one directory or
another just look around alright now
they just talk Hey okay there's really
just two major things I want to touch on
as far as expansion goes with this kind
of thing and automation one is cron job
and a lot of people don't know what cron
jobs are and a lot of you guys that do
we the web needs more lessons on it
actually there's not much material out
there on showing people how to create
cron jobs from scratch what I'm going to
do is I'm going to show a tutorial my
very next tutorial video is going to be
about how to create a cron job and what
a cron job is is a it's a command that
you put at your server which what it
will do is fire off a script that you
have sitting in a folder somewhere which
in our case is our blast email script or
email blast script or blast script PHP
that's the one we want to target for our
cron job what a cron job is going to do
is target that script and make it fire
off at timed intervals that's why they
call it a cron job it means it's short
for chronological which means time and
so it's a time interval based script
execution process it'll execute the
script on a time interval based
yada-yada-yada you know what I'm saying
so say you had something like every
Christmas you wanted to send out a flash
Merry Christmas card to 20 different or
50 different people you set up a cron
job - that's throw it on your server and
it's all automated every year after that
you never have to touch it again
everybody on your list gets a nice
Christmas card from you or whatever so
that's what a cron job is for you can
set up a certain dates times down to the
seconds whatever it'll execute at those
intervals so if you're interested in
seeing how to make this application
we've spent all this time creating
automated in the way it should be
you can watch the cron job tutorial that
I'm going to put out my very next lesson
because this tutorial here completes
this whole series we're done but the
next one that I put out the next video
is going to be very relevant to this
application you know because we all know
we can go to the server and just
navigate to the blast script and
manually fire it off in a staggered way
but that's not very effective you want
to make make it all automated so where
the whole email campaign
hits everybody in the list in an
automated way and all you have to do is
really set it into motion with the cron
job okay now the next thing I'd like to
discuss is making this available to your
clients because as developers we can go
into a Dreamweaver easily enough and you
saw how we put that emails formatted
with CSS and everything that made up the
the newsletter body we were able to sync
that in because we're developers and we
can just slap it right in but if your
client was to need to have control over
this application what you have to do is
create a small CMS which is a content
management system which uses like
WYSIWYG rich text editors to allow
people to format boxes and tables and
text and colors and all that stuff to
make up their email and to make up their
newsletter and then what they do is they
press submit in that WYSIWYG and you put
that information into the database and
that information in the database you can
have a different table that holds that
information or you can put it into the
existing newsletter table but what I
would do is just have a different table
that stored that information if you're
going to do that sort of thing so you
save it and edit and when you blast out
the email all you have to do is query
here to grab that information out of
that table sync it right in there sync
that variable right in there and then
you'll pretty much have an application
that is automated at that point to a
certain degree now what you'll have to
do is check out or research how to
create cron jobs through Script which
I'll be going into in my very next
tutorial I'll be discussing what I'm
going to do is show you how to set up
cron jobs on the server like most
beginners would and then I'm going to
discuss setting it up through script
okay so that's it I hope you've enjoyed
this lesson
everything is done like I said the
source files will be available on the
page where the video plays it develop
PHP</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>