<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>JavaScript Trap User for Unsaved Work Tutorial Textarea Check | Coder Coacher - Coaching Coders</title><meta content="JavaScript Trap User for Unsaved Work Tutorial Textarea Check - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Adam-Khoury/">Adam Khoury</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>JavaScript Trap User for Unsaved Work Tutorial Textarea Check</b></h2><h5 class="post__date">2012-02-11</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/ncFnda0ji50" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello everybody in today's JavaScript
programming lesson you can learn how to
track your website users just like
Facebook does this lesson will focus on
the scenario where user has typed
something into a text area and they
forget to publish that data they type
Tim before they navigate away from the
page to demonstrate this before we get
started on the video lesson let's all go
to Facebook so they can trap us and ask
us if we want to leave if we have
unpublished data and I will just let you
guys argue amongst yourselves about the
ethics about where and why you would
apply such a script I'm just showing
what I wrote to mimic their application
of it so here I am on Facebook now let's
see if I want to navigate let's see to
the home tab
it lets me navigate just fine let's go
back to your page now let's type in a
couple of random letters into that and
then hit your home tab you see it says
you haven't finished your posts yet do
you want to leave without finishing and
then I can say stay on page or leave or
whatever it gives me that choice and
that's what I'm going to be showing you
how to program only if there's text in
that text area if there's no text you
want to let your users navigate away
just fine okay let's just start with the
basics of an HTML page and if yours
happens to be a PHP page the same thing
you can use the same kind of script and
mine is just called trap user dot HTML
just for this little quick example so
I'm going to go into the head tag of my
document and I'm going to place in an
opening and closing script tag for
JavaScript now the first thing I'm going
to write in there is window dot on
before onload equal to function and this
is the function that's going to execute
on before onload
so you open up the curly brace and close
the curly brace for the function now
within the function you simply type in
return and then whatever you want to say
to the user now you can run this and
test it out but you got to keep in mind
that you have no text area in your page
yet and this would only be for a really
annoying script like the advertisers use
so let's run this in like Chrome or
something and let's try and close the
window
you see are you sure you want to leave
and you can put any message that you
want up here let me let me put something
in that's different you're about to
leave okay then if you run that and
you'll notice that in different browsers
you get a little bit of different
message if you try and leave so you're
about to leave are you sure you want to
leave this page now that's very simple
and everybody knows that let's put in a
text area here let's give it an ID
let's give it a value of user post like
we were the Facebook programmers and
we're adding a text area to the page
where our users can type in now what you
want to do is before this return and
window.onload function executes and
gives the return to the user you want to
make sure and see if user post text area
has any text in it now what we have to
do is put this in an if evaluation so
first actually let's get the text area
into a variable let's say VAR T a is
equal to document dot get element by ID
we're going to target user underscore
post which is the ID of this text area
and then let's close that off and then
we can just simply write an if statement
right here open the curly brace go down
under this return line and then close
your curly brace under that and indent
this so you see what's going on now you
want to take this ta variable if ta dot
value is not equal to nothing
that means if there's something in the
text area then and only then do you want
to tell them that you have unsaved work
now let's run this bad boy and see what
we get so let's go to file preview in
browser and we'll preview in all the
major browsers here so you guys can see
proof that it works in all of them if I
try and close it right now
it'll just let me go which is what it
should do now if I preview in browser
chrome again and I type in even one
little letter and I try and close the
window it's going to say you have
unsaved work you sure you want to leave
so I can leave or stay or I can choose
the other option which is leave and that
would just navigate me away where I was
going or it'll close the window if my
intention was to close out the whole
window now let's file preview it in
Firefox as well let me get this one
though over here in this screen and I'm
going to do the same thing I'm just
going to close the window and it lets me
that's great
file preview and browser Firefox and
actually I'll let you guys try it out in
all the different browsers on your own I
won't waste your time but I've tried it
in all of them and it works so let me
try and close it now or navigate
somewhere else page is asking you to
confirm that you want to leave data you
have entered may not be saved so you can
leave page or stay on page all right now
let's just go and check it in I want to
make sure you guys understand that just
works in all major browsers you won't
have to worry about compatibility issues
with all the new major browsers now make
sure you click allow blocked content for
internet explorer because on your local
machine it's going to ask you that if
this is live on a live website on the
server you won't have that little allow
blocked content question alright so
let's try leaving the page without
typing anything in
and it lets us not file preview in
browser Internet Explorer allow the
block content and then let's type in a
couple of letters and see if it lets us
leave this time yep there we go
it all works just dandy okay so I have a
good time and have fun mimicking
Facebook bye bye</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>