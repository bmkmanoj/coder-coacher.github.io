<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>4. E - Commerce Website Tutorial - PHP MySQL Inventory Management | Coder Coacher - Coaching Coders</title><meta content="4. E - Commerce Website Tutorial - PHP MySQL Inventory Management - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Adam-Khoury/">Adam Khoury</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>4. E - Commerce Website Tutorial - PHP MySQL Inventory Management</b></h2><h5 class="post__date">2010-12-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/8dL0ntjl0fI" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello everybody welcome to part four of
our e-commerce website building lesson
series in this one we're going to tackle
inventory management and before we go
any further with the series I just want
to remind and reiterate that this is a
web programming lesson series and the
whole time the focus of this series is
going to be keep things basic get people
to understand the fact bones of systems
like this and then they themselves can
get creative knowledgeable and expand
upon it okay now with that said let's
continue okay here's my inventory that's
going to serve as dummy data for my
store you'll notice that each one of my
product images is the same size and
aspect ratio when we last left off we
successfully created the admin area
index page and the admin login form so
on the index page when the admin is
logged in successfully we give them a
link to a page called inventory list PHP
so let's just take this index page file
save as inventory list underscore list
dot PHP it'll have the dot PHP extension
already Save and now we have a page
called
inventory list so we can go into the
code view of inventory list now and
change the title tag to say inventory
list and in the top of the page where
the code is that was on the admin index
page you pretty much just want to keep
that there you could also take all of
this code and put it into an include
file or an external class file and use
it on multiple pages but since I'm not
going to have too many pages inside of
this lesson series I'm just going to
keep it all in the respective pages but
you can choose to externalize this code
by creating a either a PHP class file
or be creating a PHP include file where
this code would be included like I said
I'm leaving it on the page because it's
just fine let's get this down so you can
see the code more so on my inventory
list page I'm keeping all of that code
exactly how it is because I want to make
sure this person is logged in the
session manager I want to gather their
session ID manager and password
variables and I want to query the
database using those variables to make
sure that this person is allowed to be
in the system take note that we are
connected to MySQL in this section and
we also session start so I'm just going
to collapse that keep things neat now
right under that existing PHP code block
let's put a new one couple of line
breaks in there and let's create a
variable called product list and this is
the variable that will hold the whole
list after we query it out of the
database of all the products in our
store right now we're just going to
initialize the variable by claiming it
as empty but it's initialized now we
want to put an SQL query and that's
going to query the database to select
all from the products table so it's
going to select all fields from the
products table now we simply count that
SQL query output result set so the
result set of how many items it gathers
we'll put into a little variable that's
a number it will be product count now
after we gather the count we say if the
product count is greater than zero
that means there are results and there
are products in the database we're going
to output them else we're going to
output a message within the product list
variable that will make the product list
output say you have no products listed
in your store yet so here in the if the
if part of this statement we're saying
if the product count is greater than
zero then we definitely want to output a
product list from the data
so let's put in the wire loop now with
the wire loop and there we can access
all of the rows that come out and each
field in each row that we want to access
and we're going to compound that into a
product list variable which will make
each one in line you can see in each
ones output I have a line break and all
I'm outputting right now is the ID
variable coming out of each row you see
I'm accessing each rows ID so each
product ID is coming out right here and
I'm putting it into a local PHP variable
called ID and I can output that in my
product list output so basically all you
have to do is take this product list
variable and we're going to gather some
more information for each product the
title and everything the name of it but
right now we're just going to test by
getting the ID out making sure but at
this point we have no items in the store
so it's going to say you have no
products listed in your store yet
guaranteed when we run the script the
first time if there's no product in your
store but once you put the first product
in your store this part of the statement
will execute and give you output result
so down in your body section you just go
in design view find a nice spot where
you want to put it let's just make this
say inventory list and where these links
are let's remove those it's going to
code view and write between this now you
don't even need the P tags you can just
put that variable name put a semicolon
highlight all of it go up to PHP echo
and there you go you're echoing out the
product list however many products that
are in the inventory and each one will
have a line break if you don't know
about loops loops will iterate over an
array of data to make each one output if
you need to within the loop and since
when you query a MySQL database you get
an array we use MySQL fetch array so in
design view we have something says
list and then you'll have your list
output right here but on this page also
since I'm just showing the basics I'm
going to make this whole system very
very basic and maybe above this div
right here I'm going to have another div
that's aligned to the right over here
and I want it to say big plus sign and
have it say add new store item all right
so let's highlight that div since we
want one right on top of it
highlight it go into code view you can
see the div is highlighted for us let's
go right above it put in a new div okay
remove that div align right give it a
style and go to margin right 24 pixels
or maybe a little more 32 pixels now
let's look in design view and since we
have nothing in that div we can't see it
let's put some minute and there it is
now when I type into it let's put a plus
sign add new store item or add new
inventory item whatever you want to say
and that you're going to make a link
that link is going to go it's going to
be an anchor tag actually it's just
going to be an anchored link to this
same page
under this div we're going to put a form
the form is going to be for adding new
items so anytime even if this list is
very long this inventory list may be
this it gets up to be 20 50 items in
there at any time they can click this
and it'll shoot them down to the form on
the page to be able to put a new item in
but if you want to make yours a little
different you can make this a link to
another page which is all the page would
only be have a form for adding new
inventory items but since I want to keep
my system basic and lean
going to put it on the same page under
the output list and when anybody clicks
this link it will shoot them to the
forum for adding new inventory items
that's under the output list okay so
I've added a little title above my
little table so you can see all I have
is a blank table here and title above it
and I'm going to show you how to add an
anchor tag if you don't know how to put
a targeted anchor on a page link if you
happen to have a long page that might
have data that's vertically way down on
it that you want to make links to
certain target areas on that page that's
what we're going to show you real quick
so I'm going to click right here by this
h3 tag go into the code view and right
above that h3 tag I'm going to add this
which is an anchor with a name of
inventory form and an ID of inventory
form now all you have to do is go to
your link highlight it go into your code
view and the H ref give it a value of
this page inventory list up PHP with
your pound sign and then go to that
targeted anchor that we put in right
here see it so that'll make the page
snap into view for this targeted region
when the user clicks that link I'm going
to wrap an HTML form around this table
I'm going to go into code view right
here I'm going to pop in a form tag
action is going to be the same file
inventory lists top PHP ENC type
multi-part form data name could be my
form ID is also my form
methods post that should be all we need
for now
now let's go under the table the very
bottom line break the opening bracket
then forward slash and it'll
automatically close that tag for you any
tag that's open that should be closed it
will close that tag for you so you can
see my form tag is wrapped around my
table see the red line going there now
all I have to do is put my form elements
inside of this table to have a nice
organized little form and since I showed
building the form in the last one I
won't show me constructing this form
here but I'll show you the result of
what I create okay so you can see I have
my add new inventory form all set up and
it has one two three four five six
fields of information that are going to
be sent through let's go into the code
view you can see within that table are
all the fields each field has a name and
ID so when the value when the person
presses submit all of those values will
be posted to the script and we can
access them and parse all those values
to the database and here we have a file
field which this one we have to upload
this file they submit to a folder on the
website the file that they submit the
JPEG image they submit is not going to
go into the database it's going to go
into a folder and it's going to get the
ID of this product as its title and I'm
going to choose to use JavaScript to
validate the form to make sure that all
the fields are filled in rather than
using PHP to validate it because
honestly if somebody is an admin in the
store it's not like having a social
network the person whoever's admin in
the store is there to do business and do
it correctly they're not going to be
fooling around but you can still
validate it to make sure that they have
all the fields filled in before they
press submit or before you parse the
data to the database
I chose to change my form elements my
category and subcategory to select tags
that way they are option pull-downs that
way the store manager has to stay within
a set bounds of things that they can add
when it comes to category and
subcategory okay so before we placed a
little bit of PHP on top of this script
here right above where we're selecting
all from products to show the product
list to the store manager we're going to
get a few more items let's just get at
least the product name out this would be
product name accessing from the database
so let's take that variable and put it
right after ID the ID - product name
save I'm just going to take this and
you're also going to add more things to
this output this product output list but
just for testing purposes let's go ahead
collapse that down now right in between
those two PHP blocks we're going to add
one more and remember this top PHP block
was the one that checks their session
make sure they're supposed to be a store
manager just like we had on the index
type PHP page of the admin section so
right in between those two Pleet PHP
blocks and let's write a note in this
one to ourselves this block grabs the
whole list for viewing now right in
between those two PHP blocks you put
this PHP block which you don't have to
have your yours all blocked off it could
be one giant PHP block but I'm just for
demonstration purposes I'm going to keep
my block separate so what this block is
going to do is error reporting
since your scripting is getting a little
more complicated you might want to know
if anything's wrong in your script so if
you run these two lines in your script
they'll show errors no matter what you
have claimed inside of your PHP any file
on your server because some servers are
set up the PHP any vile is set up to
suppress and not show errors so this
will force errors to the page if there
are any let's go ahead and collapse that
too and you can put that on any script
that you like that you have that's a PHP
script if you want to check them now
we're going to pop one more PHP block in
here right under where we're doing every
reporting and right above the block that
grabs the whole list for viewing and
this one and it looks about let's see it
goes from line 28 to 48 so it's about 20
lines and what this does is let's go
ahead and collapse that make ourselves a
note I'll show you that code one second
parse the born data and add inventory
item to the system so this little code
block that I have here is responsible
for parsing the form once it's all
filled in it uploads the picture to a
folder that we're going to create in one
second right when I explain it I'll
create the folder and you'll want to
create the folder too alright so the
first thing that happens is we have an
if condition which all of this code is
wrapped in that if condition and what
that if condition states is if is set
post product name from the form so if
the form is the form button is pressed
we're going to parse the form this code
will not run unless that form button is
pressed to post the product name field
to this script so this if condition
makes sure that somebody has pressed
that submit form these
next one two three four five lines they
gather the posted variable from the
forum inside of that we're using the
MySQL real escape string function to
cleanse the data it's a way to filter
your data before you send it into a
database and remember in this first PHP
block up here we are connecting to the
database right there so to use that
function MySQL real escape real escape
string you have to be connected to the
database if you weren't connected to the
database and you ran this PHP function
you would notice that an error now since
we are gathering all the posted
variables from the form we cleanse them
there we have them all set up nice and
local PHP variables here at this point
then we see if that product name is an
identical match to another product in
the database so we select ID from
products where product name equals this
product name that the person is trying
to upload limit one then we can run
MySQL num rows to see if there is a
product match in that name if there's a
product match the value of this variable
is going to be a one so we just say if
product match is greater than zero so if
it's a one you echo out sorry you try to
place a duplicate product name into the
system and you give them little link
says click here to go back to the
inventory list page and start fresh and
then make sure you exit the script at
that point because further down in the
script
if product match equals zero then you
can keep processing the script but if
it's greater than zero you want to echo
out the message and exit so if the
product match is equal to zero which it
should be to successfully upload
something that means no product name has
an identical match then you can put
these items put this item into the
database into the products table so you
SQL query into insert into products
product name price details category
subcategory and the date added those are
the fields that we're going to fill with
the values of product name variable
price variable gathered from the form
details variable gathered from the form
category and subcategory that the person
typed in and now what now does is it
adds today's date to a date field in the
database and then you can claim or die
with the MySQL error as an argument in
that function and if anything goes wrong
you'll see the died function output then
the next line we can gather what that
product ID was by using the my SQL
insert ID function which will let you
know what the auto incremented ID is for
that item just placed in you can gather
that into a variable then you claim a
new variable called new name is equal to
product ID dot jpg that's going to be
but when you move the file that they
upload which is the JPEG image that's
going to be the product image the move
uploaded file and you gather the file by
using this information bio field temp
name and files is a global variable you
can read about global variables that
develop PHP com so you access the global
variable for the uploaded file and then
the next argument within this move
uploaded file function is where you want
to put that item and what the name of it
is so you go to the path really this is
the second argument and the move
uploaded file function is the path and
the name so the path is one folder up
into a folder called inventory images
and it's going to have if it's the first
item in your database it's going to be
named one jpg the second item will be
named two jpg for the picture
so inventory images we have not created
that folder yet one directory up and we
need to do that so we can just minimize
this and go to our just go new folder
with inventory images boom then you make
sure you FTP that inventory images
folder to the server I'm going to take
it drag it into my root directory
inventory images I'm going to go back
into the store admin folder here and
store admin folder on this side and
upload inventory list now into the store
admin folder now remember when I
mentioned having JavaScript in place on
this page to validate this form to make
sure that the store manager doesn't
leave any of these fields blank here's
the tutorial for that right here
validating HTML forms before processing
to a PHP script this is in the learn
JavaScript section you can click here
learn JavaScript and write here examples
in common common webmaster uses
validating HTML forms and that's how you
apply it
I have a little example script showing
you how to apply form validation using
javascript to an HTML form that you have
on your page which is what we're using
on this inventory list page that's a
simple HTML form that you can validate
using javascript and i'm not going to
put it in place because i already made a
tutorial all about validating using
javascript over here so i'm not going to
waste my time if you want to apply it
you can you could also choose to use
straight PHP to validate the form within
your parsing mechanism right here you
would add a little bit of code to see if
any of those fields are empty
if those fields are empty you echo out a
little error message and you exit the
script but using javascript they won't
have to let's say they fill in the whole
form but they forget to put the product
price in they leave that blank
press submit with JavaScript it's a
little bit easier because it'll just
throw up a little JavaScript alert and
it won't process the form that way they
can have all the other values stay in
place with PHP to take a little more
work to get all those values to stay in
place if you let the page reload so
using javascript it's a little bit
easier because the page doesn't reload
before it checks all right let's
collapse this parks parsing mechanism
for the form go to the block that grabs
the whole list for viewing and right
here where as shoots out the product
name and the ID we're going to put a
couple of spaces which you can hold ctrl
shift + space to put up that nbsp which
is a space character so it will have a
few spaces between these things and I'm
going to put edit and then another space
another space actually I'll put a bullet
there and bold that'll be a bullet
symbol and I'm gonna put delete make
them links by going up to common hit the
link symbol okay
and let's make these single quotes so we
don't have to escape them and let's not
put an e we're not going to put any
value into that link just yet okay let's
do the same thing for the Edit word make
those single quotes so we don't have to
escape them with the backslash now save
now when you're at inventory list you'll
see edit and delete now for each
inventory item that comes out of there
and you can also get the date you can
access the date here I'll put that in
right now to get the date let's just pop
this line in make sure we getting the
row date added let's remove that grab
that their row date added we use the
string to time and then the string F
time functions in PHP to format the date
to look the way we want so date added
can go right here in the output the
product list variable output and with
that period there before the equals sign
that means it will keep compounding
values it'll append to that variable so
if you have 10 items all 10 will be
there packed into this variable so the
date let's put the date and you can
order this by the date if you want
products order by date added
ascending or descending whichever way
you want
that's ascending and this is descending
so let's try that now let's get date
added variable into the string right
here somewhere wherever we want it let's
put it right before the ID date added -
ID - product name space space space edit
bullet delete that's how the string
renders now let's check it see you can
so you can configure these any way you
need to this inventory lists output line
to have any information you want in it
and this can actually be a link to the
product page and I might throw that in
but I'm not going to do it right now on
video all you have to do is go in and
put a link tag to the product page and
use this product ID but we haven't even
set up the product page yet to do that
so I'm not going to add it yet and then
part 5 I'm going to show you how to edit
and delete each of these inventory items
so when the person presses edit or they
press Delete we'll make things happen</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>