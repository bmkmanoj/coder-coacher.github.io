<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>4. Web Intersect Forum Tutorial : Programming the section.php PHP Script | Coder Coacher - Coaching Coders</title><meta content="4. Web Intersect Forum Tutorial : Programming the section.php PHP Script - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Adam-Khoury/">Adam Khoury</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>4. Web Intersect Forum Tutorial : Programming the section.php PHP Script</b></h2><h5 class="post__date">2011-02-06</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Uwl-M6tOYRY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello again we're continuing our little
series on creating custom forums for
your website using PHP and MySQL this is
part four well we've continued a program
section PHP okay inside of section PHP
we're going to start right here where
this comment says get the section ID
from the URL variable coming in so let's
type in it open and closed parenthesis
open curly brace and close curly brace a
couple of lines down so there you have a
nice if condition statement now let's
make it an if and else condition
statement by popping the else condition
on there and inside of the parentheses
for the if condition we're going to say
if is set open and closed parenthesis
for that function type in dollar sign
underscore GE t get all capital letters
open the bracket put in a single quote
type in ID another single quote close
the bracket with that saying if is set
we're using the is set function in PHP
to see if the get variable of ID is set
let's also put and get ID it's not equal
nothing that means it's safe to acquire
it at that point right there because we
would know it's set and that it has some
value it's not blanket so you can put in
this line of code so we're doing is
creating a variable container called s
ID which is short for section ID and
we're running the preg replace function
on it to strip everything but numbers
from that get variable just for security
reasons when required the database we
don't want any strange characters in
that just numbers so if the get variable
is set and it's not equal to nothing we
can put it into a local PHP variable
there after we filter it a little bit
else let's just for time sake and for
the tutorial I'm going to do it the
simple way and just echo a message to
the user saying variable to run this
script have been removed from the URL
let's just put a big error right there
and then exit I could handle that
differently and on my programs
in to handle that with a little more
class but for right now if the get ID
variable is not set or it's equal to
nothing this is what the user is going
to see and really if they're using the
forums correctly there's no way they
should ever see this unless they're
tampering with the URL now if you're in
Dreamweaver you can go ahead and
collapse that up and get it out of your
way now we can query the database for
that section ID make sure it exists and
get the section title so I'm just going
to borrow the existing query that we had
on the forums index page and the while
loop go back here pop it right into
place this display variable I don't need
that and I shouldn't need any of this
just yet actually let's hold on to those
two variables I'm going to change things
up it's just a little bit so I'm going
to select all from forum sections where
ID is equal to single quote single quote
and then we'll tune the single quotes
i'm going to put in SI d we can limit
that to one so we already have the
section ID so all we need is the title
from that while loop but before we run
that while loop we have to get the
number of rows here so let's type in num
rows give that a variable name of num
rows is equal to mysql underscore num
underscore rose open close parentheses
semicolon put in this SQL variable here
into that parameter section for that
function and that will read how many
rows are coming from this query this is
how you can check to see if it exists
now make a little if condition if open
close parenthesis curly brace down a
couple lines close curly brace if num
rows is less than one week an echo out
another message like we did here or
handle it in any way
you see fit I'm going to echo out to the
user ever that section does not exist
you have tampered with our URL it looks
good to me now I'm going to handle that
a little more smoothly but for now that
works for me and this should really this
should never output to the user unless
they're tampering with the URL alright
so if that code doesn't execute and
everything is cool this while loop will
run and we can get out the section title
and that variable we've been waiting to
get that variable to put right here in
the title output of the page title tag
whatever the forum section name is now
we've queried the forum sections table
to get at the sections title the name of
it and to make sure that that section
exists nobody's tampering with the URL
so the last thing to do here is use the
section ID which is s ID this variable
right here to query the forum posts
table query the forum post table in the
database to get all the threads for this
section and we created that table in
part three the last lesson so let's grab
this here grab this query select from
forum posts select all from forum posts
where type is equal to a because we want
to make sure we only select the threads
themselves and not all the replies so
you just want to get the threads that
have type A or the posts rather that
have a type of a in that database
because you'll know that is a a thread
starter post we have to put and section
ID equal to in between single quotes
we'll put that s ID
now the limit for now before I put any
pagination and I'm just going to set the
limit to 25 but essentially what you
want to do ultimately is put in page a
nation which I did a tutorial for how do
you can set pagination into a MySQL
query pretty easily that's for the web
intersect website as well the tutorial
for pagination if you want to add it's a
it's going to be pretty important for
you to get pagination into your forums
if it's going to be a popular forums but
i'm not going to show the pagination
tutorial again in this tutorial series
if you want to learn the pagination and
how to apply it you can just take that
lesson but at this point you don't need
it just yet because your forum is empty
there's not even the single post yet oh
and let's order by before we limit let's
order by date time descending I might
change that to ascending but I think
descending is the right one we want we
want all the newest ones to be on top so
we'll order them by date time field
descending order limit 25 that should
work it looks like a pretty clean query
to me now we also want to get the number
rose and have a while loop for this
query so let's just borrow this one all
the way up to the num rolls all the way
down to the while loop copy that text
and put it here under this SQL let's go
ahead and collapse this down get it out
of the way so if num rows is less than 1
we're going to need to display variable
here so let's go ahead right below the
query let's put in dynamic list equal to
nothing right now right here if the num
rows is less than 1 so if there's no
posts for this section in the database
yet we don't want to exit the script but
we want to put into this display
variable which is going to go down into
the HTML we're going to echo it out into
the HTML so right here we have to say
dynamic list is equal to the
there are no threads in this section yet
you can be the first to post then we
want to put a else condition little else
condition nest and take that while loop
take that whole while loop and put it in
this else condition right there because
if there's no records in the database
for this section you don't want to even
execute this while loop and only if
there are records at least one then we
can create a little listing of links so
let's take that dynamic list variable
here inside the while loop is where
we're going to echo out or rather append
to this variable so make sure you put
dot equals so you see that equals sign
what i did i put dot equals that way is
variable it keeps getting appended to
and compounded that way you won't
overwrite itself each time this while
loop executes much like we did on the
index dot PHP see that doctor for the
equal sign that compounds everything
into the display list all right so in
this while loop we want to gather out
the thread title so let's just put that
as the variable name there we also want
to gather out ID for that thread so
let's make that named thread ID it has
the row of ID in the database so if you
have the ID and the title at that point
you know you can make a link out of that
now you can use the title as the words
of the link you can use the ID as a
dynamic URL variable that will go to the
next page in the system and that page
will be called something like view topic
or viewthread PHP but before that let's
just get these things to list out so in
between these two double quotes here for
the dynamic list I'm going to put in the
thread title right here and I'm also
going to put in the thread ID I'm not
going to put that in yet I'm going to
select all that and go out to common
hyperlink
okay and you can see here that when
there's double quotes put into the
string it breaks the string output so
you can't do that let's put single
quotes around everything now it will
render correctly that way and to have
the variable display correctly you just
put in single quote space dot space go
around the other side of the variable
space dot space single quote so you
encapsulate it like that that way that
variable will display correctly within a
single quote encapsulated string so for
the href we're going to send that to a
page called view underscore thread dot
PHP this one will have ID equals this
thread ID that way that page will know
exactly which thread to pull up and
display so for that variable is to the
same thing single quote space dot space
go to the other side of the variable
space dot space single quote now on the
end of that let's just put a brake tag
there and now that will give us a list a
nice little clean list of links and with
the title as the words and the thread ID
is the dynamic variable that's going to
be going through the URL variables so
all we have to do is output dynamic list
on this page and in the code view let's
put it into the first table cell so
let's remove that space go to the PHP
tab up here echo dynamic list give it a
semicolon and that's it so if there's
nothing that dynamic list will display
there are no threads in this section yet
you can be the first to post if there
are threads in that section you'll get a
little dynamic list it's very simple the
way that works now the last thing that
we need to get on this page or the next
thing really we need to get on this page
is a button that says create new thread
or create new topic will make it say
create topic so let's run this right now
and see what it gives us ok I'm going to
click one of these and it says there are
no threads in this section yet you can
be the first to post so naturally I need
a button
on this page to say create new topic or
create new thread doesn't matter how i
phrase it just as long as the viewer
knows that they can click that to create
a new topic or new thread into that
forum section whether it's empty or not
if you have a dynamic list showing here
with a bunch of links to different
threads you still want to have that
button that says create new thread I
just happen to have a button here that I
designed in fireworks that I'm going to
use I already exported it as an
optimized jpg to the style folder of my
forums so I can go here to the section
page in design view or code view
whatever I like I'll go into code view
and right above the dynamic list I'm
going to put in go to common put in an
image right there create the button
create okay and there it is all I have
to do is put a link on that really make
sure we get a break tag in between that
button or a couple of break tags rather
in between that button and that dynamic
list there we go so this is what i get
when i run it live now right above that
create new topic button right above it i
want to have the forum name whichever
forum the user is visiting so to do that
we can get the forum name here from the
second query so let's collapse this
query up the second query here or the
second section section title right there
collapse that back up and down in the
output we're going to go right there
where that create button is right above
it give it a couple of more break tags
and right on top we're going to write
section title semicolon highlight all
that go up to the PHP tab and echo it
out now that won't be very big but we
can use CSS to enlarge it or wrap it in
h1 tag that's what I'll do instead of
these break tags here I'm just going to
wrap this output in press ctrl too and
that will wrap it in h2 tags
automatically press ctrl to while
something selected in your code okay so
you see what that gives you now so now
you have the nice title of the forum
create a new topic button which I
haven't made a link yet because i don't
have the create new topic page made yet
that's going to be a form and the create
new topic page is too
one that's going to have it's going to
have to sense whether the user is logged
in or not but when we get some posts in
here some threads going this is going to
be a nice dynamic list here of links to
view those threads and to get them going
we're just going to click the Create new
topic button so the next logical step in
all of this is to create the page that
holds the form it's going to sense
whether the user is logged in or not
that will allow them to create a new
topic into this forum which in this case
is the PHP dynamic scripting help go
back to the forum home click this one
request tutorials in script see very
simple the way it works ok so in part
five we're going to create the create
new topic page so stay tuned if you want
to carry on further</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>