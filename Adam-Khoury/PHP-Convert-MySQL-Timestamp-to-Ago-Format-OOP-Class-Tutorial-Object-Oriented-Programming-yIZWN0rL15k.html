<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>PHP Convert MySQL Timestamp to Ago Format: OOP Class Tutorial Object Oriented Programming | Coder Coacher - Coaching Coders</title><meta content="PHP Convert MySQL Timestamp to Ago Format: OOP Class Tutorial Object Oriented Programming - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Adam-Khoury/">Adam Khoury</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>PHP Convert MySQL Timestamp to Ago Format: OOP Class Tutorial Object Oriented Programming</b></h2><h5 class="post__date">2010-03-31</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/yIZWN0rL15k" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello everybody Adam a flash building
here and what we're gonna cover today in
PHP and MySQL is how to get your MySQL
timestamps to display as a go time like
10 seconds ago three years ago four
months ago three weeks ago two decades
ago and we're gonna go all the way up to
decades all the way down to the seconds
okay and just to give you an idea I'll
read off this question in the forums I
have a series of posts from each user
instead of each post giving the time and
date the post was made I would like for
it to say so many days ago
eg 4 days ago so we'll be showing you
how to do that and on the home page of
develop PHP you can see I use it all
over my site and since I do use it on
multiple pages on my site and this is
the kind of thing I also use it in my
flash chat program you can see it says a
go time in there see Garth posted this
27 seconds ago or mizzou posted this 34
seconds ago so that's how it works when
he gets to the minutes you can see it
says 1 minute ago all the way down to
the hours and everything now due to the
nature of this request this is going to
be delivered in object-oriented
programming and the only reason I'm
gonna teach object-oriented programming
here is because of the nature of this
request this is the type of script that
you might use on 20 different pages on
your site so you don't want to have
these functions on all of these 20
different pages on your site you want to
make sure that these functions are in a
separate class file that way we can
connect to them and have reusable
modular code and don't worry I'm gonna
explain everything to you and I'm also
gonna give you a free download zip
package that you can that you can snatch
up and it has the example file and the
class folder and everything in it ok so
you don't worry I give you a nice
example for you it's not the download
zip is not going to be in the YouTube
video description it's going to be on a
page of devel
PHP but I'm gonna link to that page on
develop PHP at YouTube so at YouTube you
can click the link go to develop PHP
grab the zip file and test it out for
yourself okay now before I explain the
scripts I'm going to FTP them up and
make sure that they work I have a PHP 5
server so you know that if you're
running PHP 5 that this will work for
you if you run in PHP 4 and it doesn't
seem to work for you then you'll know
why but if you run in PHP 5 this is
gonna work for you
okay so let's FTP that up and you can
see that the time right now shows 22
hours ago because it's set to yesterday
March 30th 2010 but what if I make this
February 30th put that a to make that a
to ctrl s save the file it's FTP the new
version and let's go to that page online
and refresh it so you can see it says
four weeks ago that's awesome
it's exactly what we want now if we put
this as a 1 for January file in FTP it
ok so there you go
now you know what it works without a
doubt on a PHP 5 enabled server it'll
probably work on a PHP 4 enabled server
just as well and it'll go all the way
from seconds all the way up to the
decade ok first I'm going to explain
this example file which would be the
script or file that you desire to
display the ago time on whether it be
your homepage of your site or some other
page it doesn't matter so what we'll do
is first thing we'll open up a PHP block
and you can see lines 1 through 8
there's a PHP block with a few lines of
code in it and then on line 10 we have
HTML output for the page so on line 2 we
include once from the classes folder and
once you download the zip package you're
gonna see inside the zip package a
folder called classes and inside that
folder there's going to be this develop
PHP library file here now it's going to
be a class library so we include from
the classes folder
that file called develop PHP library dot
PHP now the third line is what creates
the object and the object is needed to
access those functions inside of the
class so we create the object it's
called time ago object and it's equal to
new convert to a go so it's a new
convert to a go object called time ago
object and you'll see that in the
library
there's convert to ago class is named
convert to ago and here's the whole
class you can see that class ends right
there so what we do is establish the
object then here I just put a timestamp
it's a static variable for yours you
would query your database here and get
the time stamp from the while loop out
of the MySQL query mine is just going to
be a static version of really what would
be sitting in your database date/time
field the timestamp so I'm just using a
static example here but you would query
your database and get all these values
out of the database all the timestamps
out or if you're just gathering one you
would gather the one timestamp out and
put it in a variable called TS now these
next two lines of the real magic and
these two lines are what sends variable
values to that class file to those
functions inside of that class and then
you can also you can have all kinds of
functions run within those classes for
any string data that you want to send to
them and it's going to return data back
so what we do is we claim a variable
called converted time and that's equal
to our time ago object running the
convert date/time function on this
timestamp so you'll see in the library
there's a function in that class convert
to a go there's a function call to
convert date/time that's the one we just
targeted there convert date/time and
we're sending that timestamp to it so
the timestamp gets changed to a variable
called string and then that string can
be manipulated using all these PHP
functions through these various things
you might be looking at this saying what
the hell is all this and what the hell
is all this doing
you can go to php.net and explore what
each one of these little functions do
these are native functions in PHP that
you can easily research at php.net and
get tons of examples on how each one of
these work make time explode list array
round all that good stuff so back to it
here's the function convert daytime when
everything runs and everything gets
converted here it returns a value of
timestamp and you can see timestamp is
created with the make time variable here
so that timestamp is returned to your to
your main file that wants to display the
time once that's returned all of that
data that was processed through the
function is now sitting in a variable
called converted time so this next line
uses that converted time variable there
to make a go time and the variable is
going to be named when and that's pretty
much the end of it when is can be when
can be echoed out to your page and
that's going to be the ago time you want
so what happens to the wind variable is
we refer to the time ago object once
again to access the make a go function
within the class file and then make a go
function is running this converted time
string into it so let's go back to that
class file and here's the make a go
function and that runs all these various
things and returns the value text which
is not going to be the word text it's
going to be one week ago one month ago
one year ago or whatever it takes that
converted date/time and it turns it into
a go time for you and basically that's
all it is it's that simple so you make
sure you have your class file on server
in that folder called classes and you
make sure you have this file there and
then you can use this method on any one
of your pages so if you have 20
different pages you can see how it's
going to be handy all this code and
these two functions are not going to
have to be on all different various
pages on your site where you wanna or
any scripts
where you want to show the ago time so
that's pretty much how it works you can
get the download package this is going
to be the example file this is the
library and that's all you need to know
so pick it up scoop it up experiment
with it try it out and you'll see that
it works fine and like I said I'm on a
PHP 5 enabled server and if you're on a
PHP 4 server I do believe this function
and this whole package will still work
for you
but I recommend being on a PHP 5 enabled
server ok so we'll see you next time and
don't forget this download package is
going to be available on the youtube
description of this video
you click that link you go to the pages
develop PHP download the zip package and
have fun</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>