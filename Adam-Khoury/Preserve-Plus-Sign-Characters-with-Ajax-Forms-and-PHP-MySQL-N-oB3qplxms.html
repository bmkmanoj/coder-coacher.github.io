<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Preserve Plus Sign Characters with Ajax Forms and PHP MySQL | Coder Coacher - Coaching Coders</title><meta content="Preserve Plus Sign Characters with Ajax Forms and PHP MySQL - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Adam-Khoury/">Adam Khoury</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Preserve Plus Sign Characters with Ajax Forms and PHP MySQL</b></h2><h5 class="post__date">2013-12-22</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/N-oB3qplxms" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">welcome to Q&amp;amp;A with Adam Kay today's
question comes two hours ago
from Chris Craven Adam can you do a
quick Q&amp;amp;A on the web intersect tutorials
that you did at the end a plus sign
won't be added I'm really confused as to
why it is not being added to the
database so the problem Chris is having
is that he can't get a plus sign
inserted into his MySQL database from
his HTML forms and he's using Ajax to
post that data to PHP and PHP is
inserting the data into MySQL but he's
losing the plus sign and this is an
issue that I've run across in the past
and it's an issue that a lot of
programmers are going to run into when
they're trying to put special characters
in their database when they're
processing them from an HTML form
because what happens is that the plus
symbol is going to get converted to a
space symbol if it's not properly
encoded or if you haven't converted it
to a special string so what we'll do is
we'll throw together a simple example
that shows how the symbol gets changed
to a space and it's not being
transferred over to PHP correctly and
then we'll put a little fix into place
for it and it just takes a couple of
lines of code to fix it okay here's the
little example that I slapped together
that's going to show you how the plus
symbol gets lost when it's transferred
over to PHP from your form processing
and what it has in it is a simple Ajax
request that sends this form field value
over to PHP for processing so what
happens when the submit button is
pressed this process form function fires
off and it grabs the Google+ vanity
input data from that field and it uses
an ajax request to send that to PHP and
our PHP file is called parse file dot
PHP let's take a look at parse file dot
PHP all we're doing is seeing if the
posted variable is set and then we're
gonna echo back the data back to
JavaScript or back to our Ajax request
and you'll see that the plus sign or
some other characters that we might put
in get lost and our goal is to preserve
that plus sign or some kind of special
characters so I'm going to put these two
files on my live web server and then I'm
going to run this page with form that H
and you'll notice that all this
ajax.request does is see when the data
is returned from PHP and then it puts
that data into the status element down
on the page you can see I have a span
with an ID of status right here right
next to the submit button so that's
where the data returned from PHP is
going to display okay here's the
application on my live webserver and
what I'm gonna do is put in a Google+
vanity URL for instance mine at Google+
is Adam for e and it has a plus sign
leading it
so my plus sign has to be submitted
through the forum and saved into the
database so let's see when I submit this
to PHP and PHP sends it back let's see
what I get
you'll see that I'm missing the plus
sign and it was converted into a space
now the loss of that character came not
when I tried to put it into MySQL or
anything like that MySQL will and will
take in a plus sign or any other
characters just fine and sometimes it
has to escape certain characters but
that's not the point of this the point
of this is that the plus sign is being
lost over the transfer from Ajax to PHP
or when the form is submitted to PHP
over the URL encoded variables that's
when it's getting lost so you can fix
that whole problem before you even make
any inserts into MySQL database you can
fix that whole issue with just a couple
of lines of code so what we'll do is go
into our Ajax request and right after we
get the value for whatever the person
put into the form field right after we
get that value into this G variable
we're going to replace that string the G
whatever is in the G variable if there's
any plus signs in it we're going to
convert that plus sign to this string
this custom string and I just used like
bbcode format to throw the word plus
sign in between brackets so that string
is going to be put into place wherever
any plus signs are found in that value
so let's save that and run this on our
live server
I'm going to refresh the application I'm
going to try again
I'll put in Plus Adam Cory for my
Google+ vanity URL string submit and now
you see I get back from PHP that little
string that converted the plus sign to
my special BB code plus so now all I
have to do is replace anywhere there's
this string found in PHP when the form
processes anywhere where this string is
found convert that back to a plus sign
so let's go into our parse file and
right before we echo the data back to
the Ajax request we're going to replace
that string for the bbcode formatted
plus to an actual plus sign and then
we're going to use preg replace remove
any other characters that are in the
string and you use this before you
insert into MySQL to sanitize the data
this will make sure that there can only
be a plus sign a dot and underscore
letters and numbers there can't be any
other funky characters in that string
but it will allow plus sign to be submit
into the database along with these other
characters here specified and then we're
just going to echo back the variable G
since it's all cleaned and converted at
that point for this example we're just
gonna echo it back to our Ajax request
to show you how it everything is
preserved and converted correctly now
okay so I'll go back to my web server
refresh the application and try again
I'll put in plus adam corey submit and
now i get back at plus adam Cory and
this is what it'll go into your database
looking like with the normal plus
character and MySQL has no problem
storing that character the whole problem
comes when it's transferred from the
form to your PHP and you can see how we
put a solution for that in place and
took three extra actually it was two
lines of code one line here to replace
this string back to a plus sign and then
in your JavaScript you put this one line
here to replace the value from the form
any special characters that you want you
can convert them to anything that you
want
any special string and then when this
data gets to PHP that's when you
actually turn it to the symbol that you
want using string replace okay Chris I
hope that helps alleviate your issue and
helps you understand better where your
plus sign is getting lost and this is an
issue that a lot of programmers deal
with when their programming forms and
saving all that form data into databases
and it doesn't have anything really to
do with the web intersect tutorials this
is the general issue that everybody has
to deal with</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>