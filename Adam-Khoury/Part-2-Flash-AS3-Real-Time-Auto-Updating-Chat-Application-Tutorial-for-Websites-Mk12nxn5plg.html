<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Part 2: Flash AS3 Real Time Auto Updating Chat Application Tutorial for Websites | Coder Coacher - Coaching Coders</title><meta content="Part 2: Flash AS3 Real Time Auto Updating Chat Application Tutorial for Websites - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Adam-Khoury/">Adam Khoury</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Part 2: Flash AS3 Real Time Auto Updating Chat Application Tutorial for Websites</b></h2><h5 class="post__date">2009-11-28</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Mk12nxn5plg" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello everyone
adament develop PHP here in welcome to
part 2 of creating a flash real-time
ActionScript read chat application we
already covered part 1 now we're going
to cover part 2 kilo John McLean
okay so since this is ActionScript 3 we
can use flash cs3 or flash cs4 for this
project so I'm using cs3 because I like
it more so we'll go into new
ActionScript 3 file and once that's
created I'm going to set the stage size
to let's say for 80 wide and 360 hi
sounds good yours can be any size I'm
gonna set the framerate 30 now okay and
I'm going to put a gray background there
grab the rectangle or go to the shapes
tool hold it down you'll see that it
gives you all the shapes that you can
choose and you choose rectangle
primitive throw it out on stage really
nice okay good make sure it's the about
the size of the stage doesn't have to be
perfect alright now let's get that into
position let's make it look like we want
beautiful okay alright click convert to
symbol let's call it whole chat app
short for whole chat application and I'm
nesting the whole thing inside of a
movie clip some of you guys that have
full flash websites you might want to
use this for your full flash websites
just by syncing the movie clip and write
in any way you want okay now I'm gonna
double click inside of it we have a
movie clip here called whole chat app on
the main timeline and double click
inside of it and here's where I'm gonna
kind of build the application so here in
this layer I'm gonna name this chat
stage elements this is gonna be
everything on stage that's not in the
script layer I'm going to put a new
layer insert a new layer call this a s3
chat script
now on the stage elements later I'm
going to lock the chat script for now so
I don't put anything on it on the stage
elements layer we're gonna start adding
things now first let's make a title so
let's grab the text tool and set to
dynamic I'm gonna set it to static for
now and make its a flash a s3 real-time
chat application PHP what's MySQL okay
so that's gonna be the little title you
can okay so I have my little title in
there now I'm going to drag out some
components
let's drag out the text area place it
where we want it and let's size it to be
the size we want let's say no maybe 380
no bigger than that there we go 460
maybe to 20 not even that I 200 okay now
I'm gonna take that control C control
shift V so I selected it and then I
press control C control shift V which
put in another instance of that same
text area onto the stage so it has the
same width and I'm gonna make the height
just be about 80 or something like that
not even that high maybe 60 okay
now let's give these things instance
names this needs an instance name of
input text input underscore txt this
needs an instance name of output text
because this is where the chat is going
to display in the big one here in the
output text field the input text field
is where they're going to be able to
write in their chat and now we need a
button let's see
button let's place it right there let's
give it a label let's go into the
parameters well first let's set the
parameters for well let's set the
parameters for all three let's start
with the button parameter we'll go with
the label to say chat
okay now this one in the parameters we
want this to be editable true this one
in the parameters we want to be editable
false so the output text is non editable
input text is editable so they can write
in it of course okay so now that has an
instance name the chat button gets an
instance name of submitted underscore
BTN and now we can play some dynamic
text fields well first let's use more
static text and play some just some
labels here enter your name okay
oops
enter your name that will sit right
there so that means we need a component
which is the text input just a regular
text input field
okay now let's give this text field an
instance name of you name underscore txt
which is short for your username so you
name underscore txt this has an instance
name of submit underscore BTN input
underscore txt and output underscore txt
so now all we need is a couple more
labels here so let's grab text tool and
let's say 5 sec timer and I'm gonna put
a few things here that you don't need to
display to users but I'm gonna put them
here for the tutorial ok so these are
little items that we're going to display
to you guys but you don't really want to
display these things to your users so
let's just highlight these three press
control C control shift V move them over
just a little bit and let's change them
to dynamic text ok so this will display
the 5 seconds timer let's just put a 0
in there for default 0
let's make it a little bigger okay
this one should say
zero as well by default and then this
one
we'll hold the value that comes in at
runtime and you'll see what that is
very shortly let's put these into place
these are all dynamic text let's change
them to read so we can see a difference
there it's dark red okie dokie now all
they need is some instance names and
we're ready to go okay so this field
here this dynamic sex field we're gonna
give an instance name of timer
underscore txt and that's where our
timer count will display the ticking
this dynamic text field the stored ID
we'll just call it stored ID underscore
txt and then this one here this dynamic
text field is going to be for taking the
or displaying the status of whether or
not there is a new chat every 5 seconds
when the check goes out or when the
server call goes out this one we're
gonna call status that'll work status
underscore txt okay so everything is in
place for our chat application we have
two layers one's gonna hold the script
one holds all these elements that I just
placed here everything has an instance
name and we're all ready to go I do
believe so now I'm gonna pop in the
script and then discuss it I'm not gonna
coat it line by line because it's a
little long so what I'm going to do is
just discuss what I've created with you
that way you get a full understanding of
it okay so you hit the ActionScript 3
chat script layer there press f9 open
the actions panel and that's where your
script would go okay so this script this
ActionScript 3 code is set up into three
distinct sections the first section is
for making the initial request to simply
populate the chat window when they first
come to it second section is we're
setting up the timer that's connected to
a server call checking for new chats and
the third is parsing new chats to the
PHP file when somebody presses submit or
chat after they write something in okay
so that's how it lays out there and I'm
gonna lay the PHP file out
the same way it's going to have section
1 section 2 and section 3 you can see in
each section here there's a URL request
to a chat dot PHP file see there it is
there and there it is there I didn't
have to write it in three times I could
have used the same variable for one URL
request since it's the same but I wanted
to lay it out really the logic for you
really simply so you can understand
exactly what's happening alright so
let's talk about the first section now
first of all I'm not gonna go really in
depth with talking about how to make a
server call to way from flash to PHP to
way back and forth because I've already
done that tutorial like six times in
different applications here you go to
develop PHP comm you click the Adobe
Flash tab here you go down to working
with PHP and MySQL the first one there
is two-way flash ActionScript 3 and PHP
communication where I do a nice
comprehensive tutorial and give you an
example file of how 2-way Flash
communication works between ActionScript
3 and PHP so don't yell at me for not
going really in-depth about this code
because I've gone in depth about it
eight times before so go watch all my
other tutorials before you yell at me ok
haha let's close that we don't need it
anymore now back to the script now here
what we do is we send basically we're
sending one of those two-way requests
here in this first section this is a
two-way request that's set up into a
function it's called request entries and
right here line 32 is where the function
fires off to run all the code that's
inside of the function it's very simple
so what we do is in the output text
which is the big window here
first thing is we give a message of
populating chat window then we set a
variables variable and then we send set
up the URL request then we set up the
loader I'm not even gonna explain all
this go watch the others tutorial so
once the complete handler comes back
we run an if an else condition here to
say if the target returned body is equal
to nothing
that means if nobody's ever chatted yet
we put no data coming through or you can
just put no one has chatted yet or
brand-new application please check
whatever you want it's only gonna show
for a minute and probably only to you
okay so then we say else the we're going
to output things that we get from the
PHP control file the pH chat dot PHP
file and the stored ID the output text
is what gets populated so stored ID goes
here and then the chat output goes here
and that's really all that happens in
that first request and then we sending
to PHP a variable called requester and
its value is initial request and then we
load up the send right here is where it
actually executes and sends to the PHP
file this variable and then in the
oncomplete handler here that is where
the data comes back from PHP and gets
populated into these lines so that's
section one and it's also important to
note that section one will only run one
time when they first initially come to
the page or open the application section
two is a timer so that runs over and
over again depending on how long you set
your timer for mine is set for five
seconds here so very simply up top which
I have a tutorial for setting and making
timers at develop PHP as well you can
check that out but pretty much I just
set up a five second timer and then a
function for the ontic event and I place
in that ontic event
the tick value here in the 5 second
timer dynamic text field so that's
what's happening there you really don't
even need that you can remove that and
the event listener for the on tick but I
have it there just for you to reference
as you're building okay and but at the
end of it you can just comment that line
out and this you don't need it but here
we have so on the timer there's two
event listeners one is the on tick which
is this function I just discussed and
another function is called timer
complete or sorry the event is the timer
complete and it's called on timer
complete and here it is here function on
time are complete so every time this
hits five seconds and the timer is
complete this function will run all of
this code here all the way down to here
and so what happens is we set up a new
two way request here the only difference
this time is we're looking to see if the
event that target data status line
coming from PHP its value is new if it's
not new then we don't we're not going to
repopulate the window because there's
nothing new to repopulated with but if
it is new say this value comes back is
new from PHP then we're going to
populate the text the chat body window
again renew the stored ID variable and
put the status line whatever the status
is going to be what we set from PHP
which in tutorial number three we're
going to work in that PHP file and make
three sections for it as well okay so
down here at the very bottom inside the
own complete one-time or complete event
we're sending out the request at this
line here line 71 that sends out the
request of PHP sending up a variable of
requester with the value of chat check
this is the five-second check every five
seconds this is going to put a call out
to that PHP file to check and see if
there's a new chat or not so that's what
section two is all about and then
we repopulate the stored ID I'm sorry we
send the stored ID so we're sending a
variable called requester and then
another variable called stored ID so
these are going to be posted variables
going to a PHP file with a value of
check chat check and it's gonna have a
value of whatever's in the stored ID
text at that time and I'll tell you why
in part 3 or sending these variables
everything will be explained so then we
just send to the PHP file these
variables and when it comes back you
check here in the complete Handler and
so we at the end of this we just reset
the 5 seconds timer that way the whole
thing is Auto refreshing and everybody
if there's 10,000 people in on the
application they will see new refreshed
data as long as well as the people
typing in the chats
ok now in section 3 of the ActionScript
3 script we have parsing new chats to
the PHP file so this section is another
two-way back-and-forth communication
mechanism to PHP but this one has the
button event for the submit button here
so it has a button event that initiates
that send to PHP but basically it's just
another sending variables and waiting
for them to come back and then putting
things into the fields when that data
comes back from PHP and the only
difference here is that we have a
validate and send function when the
button is pressed and an event listener
here for that button the submit button
so when the submit button is pressed we
send we run the validate and send
function and the first thing inside the
validate and send function is if there's
no input text or if somebody doesn't put
something in their name field and the
chat text field then it won't send
anything and you can set up ever
messages here that's what I put that
there for the way mine's coded it just
won't send anything if they hit chat
this is empty or this is empty and they
hit chat it just won't do anything so
you definitely want to code in something
to give them a warning and say aunt you
forgot to put in your name back you
forgot to put in this okay so this line
here breaks down saying if the input
text length is it's not has no length
basically the input text field has no
length that means there's nothing in it
or see these two bars right here that
means or or the username text wheel has
no length then we give them this error
in my case it doesn't do anything
because I have nothing coded here but
you want to code it in maybe you want to
output to the output text field or this
text field to say please enter your name
but please or you are missing
information too in order to chat please
enter your name actually you can just
put in that text field right here if
this error comes up just put in this
text field say please enter your name
and the chat and your message and then
they'll understand that they forgot to
put some in but I'm not gonna do all the
work for you he has suckers you got to
do a little bit yourself now processing
underscore MC is not even made yet I
have to make that little movie clip
because we set it to false right there
and set it to true right here so I'm
gonna make that and that's pretty much
the end of everything this is setting
the new variables to send to the PHP
file this is the line that actually
sends it executes the load and then we
wait for everything to come back here in
the complete Handler and that's when
everything gets repopulated so that's
how it works since everything is free
I'm not going to give you a super
in-depth rundown of the code you're
gonna have to go and learn some
ActionScript 3 sukkah if you don't
understand what's going on here but it's
well laid out it works fine
and we'll continue on in part three
where we create the PHP file that's
going to handle these three calls these
three sections so basically flashes are
sending out calls saying to check the pH
have PHP check the database to MySQL
database and then give us back results
accordingly that's what's happening in
those three sections all three or
two-way slash PHP communication
mechanisms all three sections here okay
that wraps up part two and we have the
whole flash side of things done and all
we have to do is create the PHP control
file which will named chat that PHP and
that'll be the middleman between minus
QL and ActionScript 3 and I will have
these files available for download but
I'm gonna have everything in pieces
where you have to watch the videos to
put everything together or just be real
slick and intuitive on your own but in
the download file and the free download
package for this tutorial everything
will be there but it's gonna be pieced
up like the ActionScript won't be in the
flash application you'll have to place
it in yourself you'll have to place all
these elements on stage just like I did
on video for you so you can understand
it so you're gonna have to watch the
videos hahahaha check out part 3 will
we'll be finishing this thing up part 3
will be the last part it'll be all done
and then the source files will be
available</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>