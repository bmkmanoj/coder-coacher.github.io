<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>json tutorial for beginners part 5 learn Dynamic Ajax PHP Photo Gallery | Coder Coacher - Coaching Coders</title><meta content="json tutorial for beginners part 5 learn Dynamic Ajax PHP Photo Gallery - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Adam-Khoury/">Adam Khoury</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>json tutorial for beginners part 5 learn Dynamic Ajax PHP Photo Gallery</b></h2><h5 class="post__date">2012-10-03</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/H9AF_b8wSl8" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey what's up lovers welcome to JSON
programming tutorial number five in this
lesson you will learn how to make a
dynamic JSON Ajax PHP driven photo
gallery that you can tweak and enhance
to make it your own the application will
dynamically render any amount of images
from any folder that you point the
application to and it can easily be made
to render multiple photo albums which we
will demonstrate in tutorial number six
for you this is the finished product of
what you will be creating with in this
lesson we'll be using the JSON data
handling skills demonstrated in the
previous lessons to create this photo
gallery from scratch and it's all
dynamically driven any folder that you
pointed to no matter what images are in
it they'll come flying out into your
image gallery as little thumbnails and
when the user clicks on the little
thumbnails the corresponding image gets
placed into the photo frame on the right
and the user can scroll down through all
the images to the very last one see and
it's very intelligently programmed in
order to create this dynamic photo
gallery we're going to continue with the
same exact files that we left off with
in tutorial number four so let's take
JSON tutorial for that HTML file save as
JSON tutorial 5 dot HTML save you can
close tutorial for now let's take my
JSON list dot PHP that we had from
lesson 4 go to file save as let's name
this JSON underscore gallery underscore
data save so that you should have JSON
underscore gallery underscore data PHP
sitting there and you can close my JSON
list dot PHP so now you have your new
files ready to go first we're going to
tweak the JSON tutorial 5 dot HTML page
now let's change the name of this
function from Ajax
get JSON to Ajax JSON gallery so you can
copy that and make sure you put it down
here now we're going to send one
parameter through this function Ajax
JSON gallery that parameter is going to
be for the folder of the images that we
want to scoop up dynamically and put in
and I have a folder called gallery 1 and
I'll show you gallery 1 right now you
see here in my JSON test folder I have
all the JSON tutorials we've been going
through since tutorial 1 and here's the
gallery 1 folder if I double click on
that you'll see I have a bunch of JPEG
images in there so now you know what
gallery 1 is referring to
it's that folder it's going to be
sitting on my web server
so since I'm passing a parameter through
that function it has to be scooped up
here when the function runs so let's put
folder as the variable name that will be
created for whatever value is passed
through here to there and we want to
make that value available in the HR sent
method so we're going to send a value of
instead of two variables we're just
going to send one variable of the folder
name that we want so in the PHP script
it's going to be looking for a posted
variable of folder and we can put the
value for that right here which is
folder it's going to be this dynamic
variable passed through the function
when it's called and when it's called
you pass it through using single quotes
right there which is the folder name
that you want to grab all right what do
you mean now down in the HTML of your
page instead of div results we're going
to replace div results with three divs
and that is all of the HTML content that
you're going to have within the body
element of your page just those three
lines so you want to have three divs one
with the ID of page top the next one ID
of thumbnail box and the next an ID of
picture frame so here this was the page
top div this is the thumbnail box div
this whole vertical box here that's
tucked up against the left side of the
page and this is the picture frame div
you can see the picture frame div is
fixed in place and it does not scroll
all right so that's your HTML markup now
we're going to go above the script tag
here and we're going to put in some CSS
and I'll explain that to you very
quickly we affect the body element of
the page to give it margin zero pixels
background
the black whatever color you want and
the color of the text
now here this CSS rule affects the page
top div this CSS rule affects the
thumbnail box div and so on and so forth
so you can see that my CSS is set up to
affect certain elements within the page
now thumbnail box is going to contain
divs and inside of each little div
you're going to have a thumbnail and you
can clearly see that on the page the big
grey vertical box is the thumbnail box
and each thumbnail within that box is
really a div and within that div is an
image which is the thumbnail so that's
why you see the CSS it's digging into
thumbnail box affecting the div and then
the image within the div and this CSS
rule affects the actual div that holds
the image all right so you'll have to
know basic CSS to understand what I have
going on there but it's pretty basic
stuff it's nothing very complicated at
all the tricky part of what we're going
to be doing is really on the PHP side of
things and what we do when we get that
data back right here now let's go into
this Ajax JSON gallery function and
let's change what we need to here this
needs to be JSON underscore gallery
underscore data because that is our new
file which is a PHP script that's going
to do the magical digging out dynamic
digging out of images out of any folder
you won't have to know how many images
or what their names are prior to the
script running it'll just dig them out
that's the kind of script that we're
going to make in PHP but it's going to
be returning JSON encoded data so all of
this stays the same except when we get
down to bar data I'm just going to
change that to D so just keep in your
head that D now represent data and since
we have no results div we have to change
that to thumbnail box so right up here
results at the top change that the
thumbnail bar is equal to document dot
get element by ID from nail box and then
down here inside of the ready state if
condition when the data returns we put
thumbnail box that inner HTML equals
nothing we clear it before we're going
to populate the thumbnail box with all
the little thumbnail images basically
the same thing that we did in the last
tutorial where we cleared the box before
new data was populated so in the for
loop that we have for the data wouldn't
change that 2d remember because the data
the variable doesn't exist anymore I
just change that 2d change that 2d and
change this variable name to Oh
so just remember that omics object and D
means data
let's now let's inside of that for loop
erase those two lines out of there and
within the for loop you're going to
place this if condition if the variable
object within data if it's dot source
property is present so this if condition
will return true if there's a dot source
property but the data object coming
through it will return false if there's
no source property for the data object
passing through the loop so you're just
saying if there is a source attribute or
source property for the data object
passing through the loop then you're
going to stick it into the thumbnail box
using the innerhtml property and we're
going to say plus equal to append to the
data within that box if you say just
equals each one will overwrite the ones
that were put in before so you say plus
equal and they'll just all keep
compounding into the box a bunch of
little divs and with an image tag inside
of each one so remember when I was
telling you you're going to have divs
with an image tag inside for each one of
these thumbnails and that's how we're
getting that there we're packing a div
and inside of that div is an image tag
right there that has the source
attribute for the source property of the
data object coming through and I'm going
to show you in the PHP script how we
send the source file for that image
through the JSON data objects now all we
need is a function called put in frame
so you can go under your Ajax JSON
gallery function at the very bottom and
put in this function here called
function put in frame and you can see
function put in frame is fired off
on the on click event of that div so if
you go into the gallery you look see how
it the thumb when I click it that is
when that event fires off that function
so when I click each one of these divs
that is when that event fires off this
function called put in frame so what
you're doing is sending the source of
this photo which every photo is being
clicked on whichever thumbnail you're
sending that source through this
function called put in frame so here's
that variable called source so you can
easily say picture frame dot get element
by ID picture frame then you say picture
framed enter HTML and you load in to the
picture frame the main frame on the page
the image source tag so each time it's
being replaced by the new image in this
big frame here when I click a little
thumb or really when I click one of
these little divs that hold to the thumb
the main source image is placed into the
main frame here on the page so really
outside of your for loop
you really should load in the first
image in the gallery into the frame by
default which you can see that's how
mind works when the page loads this
first image was loaded in to the frame
by default nobody had to click anything
to make it be there so you have to
program that in so where we have
thumbnail box let's go ahead right under
that and put in picture frame that way
we have a reference right here for the
picture frame element down here on the
page now right here under your data
object and before your for loop begins
you can put a line that will be picture
frame that innerhtml is equal to and
then you just pop in an HTML image tag
with the source of the data objects
image one object dot source property and
you're going to see the format of the
JSON data that our little PHP script is
going to render in just a minute and
you'll see we have image 1 through 14
being set up dynamically and they'll
each have a source property that you can
tap right into so you can use image one
source to put the first picture into the
frame by default when the application
loads that's what this line is doing
right here now there is a couple more
things to change right here where it
says results that div doesn't exist
anymore now we have thumbnail box and
that's where we want to place a little
fan loader or you can even place a fan
loader into your picture frame box if
you want to let the user know in that
area visually that something's loading
or you can just load something into the
vertical thumbnail box on the left that
is in image a dot gif fan loader some
kind of animated image or you can just
have the words requesting sitting there
like I have it because that word
requesting will be replaced by all of
the image thumbnails when they come
pouring in now the very last thing we
need is since this Ajax JSON gallery
function is going to fire off right away
for the default gallery to be loaded in
right when the page loads we can put
some inner HTML into this page top div
up here in the JavaScript we'll just do
that the first line will say document
that get element by ID page top that
inner HTML and we'll put this inside of
it so that way like you see on the page
here it will say this up in that page
top div or if you want you can just
write it right in there but I wanted to
keep the HTML very light and streamline
within this video lesson that way you
can see how to manipulate everything
just through your JavaScript and I'm
pretty sure that's all we needed there's
something I forgot or whatever after we
get the PHP file written we'll just go
ahead and quickly change it up to make
it soap so basically this is going to be
your PHP script that is capable of
rendering all the dynamics that your
gallery is going to require and if you
go to develop PHP com years ago in the
PHP and MySQL video tutorial section
there's discover magic XML and we pretty
much showed the same exact thing right
here flash photo gallery app PHP loop
dynamically render files so here's that
PHP loop that dynamically goes into any
folder that you want that you specify
and grabs all the image files out of it
I just went and grabbed this script and
adapted it for our needs in JSON okay
that's all I did
so that
so what you see here at play now I'm
going to explain every line to you so
people who are new to this kind of thing
can follow along as well and what we'll
do is we'll actually render this file
without depending on this Ajax function
to make it run at first we'll just run
this page in the browser just to see
what it renders okay so the first line
is you scoop up the posted variable from
the Ajax request that was folder and
that is sent to the Ajax request in the
send method right here folder is equal
to folder whatever the dynamic gallery
is in our case it's gallery 1 so really
this will have a value of gallery 1 in
my case then we start our JSON data
object rendering just we're setting up
the string to render as JSON we just put
the opening curly brace and that's all
we put for now and we specify the
directory variable and that's going to
be equal to whatever this dynamic folder
value was with a forward slash after it
so pretty much that directory value will
be gallery 1 forward slash then you set
up a directory handle using the open dir
function in PHP which opens a directory
for reading it and you feed it whichever
path to whichever folder that you want
to open up for reading so now you have a
directory handle object ready to go then
we create the I which is the iteration
variable and set it to 0 and that's
going to be incremented using I plus
plus through our little while loop here
and our while loop reads while file
which is the variable name for each
independent file that's read inside of
the directory so within your while loop
you can target that object or that file
say it's a jpg or maybe it's a text file
you can target that file using that
variable because that variable is
created right here now let's see what
does this if condition say this if
condition says if the file is not a
directory and if the file has a dot jpg
extension so only if it is not a
directory and
if it only has a JPEG extension are we
going to scoop it out and make an object
out of it for our image gallery because
if it's a dot txt file in that folder
you don't want to scoop it out and put
it in the gallery that's with this
string position function is doing it's
looking to see that the file has a dot
jpg extension then and only then will it
be packed into a little object and you
also want to make sure that it's not a
folder so within that folder full of
images you might even have another
subfolder you don't want to scoop that
thing out and process it either so
that's what this if condition takes care
of so if it's not a folder and if it is
in fact a JPEG then we're going to scoop
it out and make it part of our JSON data
object so we I + + to make this zero
increment each time the loop passes
through all of the different vials
within the folder dynamically because we
just want to keep a count so the first
file since we increment before anything
happens this will be a 1 okay so what
we're doing here in this variable for
source is we're putting together the dir
variable and the file variable so
basically you're just saying gallery 1
forward slash unknown file that JPEG
that's what it'll look like this source
will look like that and that's what
you're going to be feeding into your
gallery that's how your gallery knows
what images to plop into the image tags
now here we simply set up our JSON data
variable to compound remember we started
it up here with just the opening curly
brace to establish that it's a JSON data
object now within that JSON data object
we're going to be packing a whole bunch
of more deeply nested objects and each
object is going to have a property of
image whatever I is dynamically so to be
image one on the first path of the loop
image two will be the second file image
3 so they'll each have that property and
on the right side of your colon which is
the value for those properties you're
going to have another little nested
object so each image has three
properties here we have
Numb source and the name numb is just a
variable that I wanted to throw into the
mix you really don't even need that
property for this image gallery to run
so the first image that passes through
the loop it'll have a value for its num
property of one its source will be
whatever the image is dynamically for
the first image being accessed and its
file name can be packed in here and
actually my application doesn't even use
this variable or this property really
I'm only using the source property but I
threw these others in here so if you
guys wanted to have extra information
come through in your objects you can do
that and you just have to make sure that
each file each image file each jpg
that's being accessed through the loop
has a comma put on the end of each inner
object and then after the loop you want
to just make sure that you close your
directory handle and then you chop the
last comma because remember there can be
no trailing comma on the last deeply
nested object only on the objects before
the last one do you have a comma so you
just make sure you use the chop function
and then that will remove the last comma
off of that string then as a final
measure you place in you compound into
that variable JSON data variable the
closing curly brace so here you open
your curly brace and here you close your
curly brace in between those two curly
braces you have a for loop it's going to
magically pop in a whole bunch of images
into JSON data format now I want you to
test this script without being passed
any posted variables from your HTML file
so what we can do is just comment this
line out press control C then one line
down this folder put the name of the
folder that you want to access for your
gallery
now FTP JSON gallery data PHP up to your
live web server and navigate to that
script and run it okay I'm going to go
and in my address bar you see I have
JSON gallery data PHP I'm going to press
enter
C
have JSON data objects and you can see
the last one has no comma the rest have
commas in between all of them the last
has no comma because we used chop you
can see the last image is number 14 it's
image 14 is its property and its value
is another nested object which holds all
the information for that image number 14
its source file you see and each one is
the same way and it's all rendered
dynamically now all you have left to do
since you have a good visual feel for
what this script is going to render to
your application let's go ahead and
remove this static variable that we had
here make it dynamic again by letting
our HTML application post the folder
variable to this and remember we have it
being posted here in the send method for
our Ajax request and make sure that when
you put this variable back in play you
press control s and FTP this file this
PHP file FTP that as well and your JSON
tutorial five that HTML so on your live
web server and your address bar type in
JSON underscore tutorial underscore five
dot HTML and booyah baby this is all
dynamic goodness and you can easily have
multiple galleries in here let's say you
wanted to have a list over here of links
that were four different galleries to
load into this bad boy right when you
click those different links a whole new
gallery of thumbnails and everything
will be loaded right into the page
without refresh and if you guys want to
see something like that just let me know
and I'll put it in tutorial number six
to show how to extend this image gallery
to make it do other cool new things like
be a multiple album image display
gallery since we're already feeding the
dynamics right here through the function
for the gallery folder it would be very
easy to make some links power which
folder that is so I hope that gives you
guys a better look at the power of JSON
JSON is not its own scripting language
it's just a way to get data from point A
to point B univer
are silly and effectively and really the
power behind it is going to be that a
lot of people are going to be learning
it you can really do the same things
that I'm doing here with custom strings
I've done all the same things that I'm
doing here
using custom strings you don't need XML
and you don't particularly need json to
do any complex things that we're doing
with this kind of work where they do
come in handy is that a lot of
developers are using them that way if I
make a gallery here pass it along to the
next guy he's going to understand the
data transfer the data interchange
between the server and the application
he'll say oh that's JavaScript object
notation I can totally work with that so
that's why it's handy to learn these
kind of things</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>