<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>10. E - Commerce Website Tutorial - Shopping Cart PHP Multidimensional Array + | Coder Coacher - Coaching Coders</title><meta content="10. E - Commerce Website Tutorial - Shopping Cart PHP Multidimensional Array + - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Adam-Khoury/">Adam Khoury</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>10. E - Commerce Website Tutorial - Shopping Cart PHP Multidimensional Array +</b></h2><h5 class="post__date">2011-01-07</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/WXqbQy9fOp8" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey how you doing everybody Zaid them
again like anybody cares now if we're
going to continue on showing you how to
build you a awesome custom PHP card
using a really dorky multi-dimensional
array help you get all the dorky tricks
all you got to do is pull them in a
corner and be like hey I know how to
program multi-dimensional arrays and
she'll be yours alright stop fooling
around open up cart PHP so let's recap
on this code if is set post PID which
that means if there's a product ID
coming from the product page persons
trying to add that item to their cart so
we're checking to see if that's set if
it is we grab that variable and then
we're checking to see if the card
session variable is not set or card
array is empty in this if condition will
pop in the first array item which is the
first card item so if the card is empty
or if the session card array is not set
pop in the first item else here's where
we pick off kick off did I say pick off
I meant pick up where we left off pick
off man up a pick off contest okay
before we can put in the code to see if
that item might already be in the cart
we have to put a couple of variables up
top here so let's put the first one
let's call it was found that's equal to
nothing for now actually let's make it
equal to false there and then we'll
change it to true in the script when we
need to it's going to be like a switch
mechanism I'll show you and this one's
going to be called I which is for index
that represents the index number of the
array items and I'll discuss that to you
with you to you with you for you as well
now what I did was I went to develop PHP
looping iterate iterating over array
data that was in the learn
PHP section with the array information
and right here is where I had a little
script that shows how to output this
multi-dimensional array right here so I
grabbed that for each and I changed it
just a little bit and you can see within
that for each loop there's a while loop
so that's how it really is effective at
accessing the full scope of the
multi-dimensional array you can get at
all those little items in the inner
arrays using this inner while loop the
for each loop will access each array
item and then or
each array and then the while loop will
make a list out of each key value pair
within the associative array so let me
show you what I mean I put some code
together and I'll pop it into place okay
so I'm going to go to the spot in the
code where it's run if the card has at
least one item in it so if there's items
in the cart we want to run this code I'm
going to pop the for each loop right
there you see what it is right here it's
not much code and you can see my for
each loop opens and closes within this
blue section that I have highlighted
here my while loop opens and closes
within that section you see I even have
nice code comments for you saying close
while loop close for each loop and this
one says close if condition so right
here you can see the inner if condition
that's within that while loop now let me
explain this code very quickly and then
I'll show you how to actually push the
items into your array this code here is
for evaluating to see whether or not the
item that they're trying to put into the
cart might happen to be already in the
cart if that's the case we want to +1 on
the quantity and I'll show you how I'm
doing that right here
alright let's discuss this for each loop
first so the for each loop has the
session card array as the array that
it's being fed so each item in the array
is going to be a variable of each item
now the I plus plus is important here
because what that does is it rates the
index of the array and this array
actually starts at one we forced it to
have an index of 1 when it starts so you
see when we pop the first item in when
there's no items in the cart we pop the
first item in you can see this
multi-dimensional array its first inner
array has an index of 1 ok so just keep
that in mind
this one doesn't start with an index of
0 like most arrays start by default
we're starting it with an index of 1 on
purpose each time any items from the
cart pass through this loop this eye is
going to iterate which is which will
represent the index so it will hold this
will hold the value of which associative
array within our multi-dimensional array
is the one passing through the loop so
make any sense this eye is going to hold
a numeric representation of which
associative array within our
multi-dimensional array is passing
through the loop and this eye becomes
very important when we use the array
splice function down here and I'll tell
you what the array splice function is
all about so after I iterates we have a
while loop you can see the while loop
right there
now this while loop will give you access
to the list of all the key value pairs
within each item that is busted out that
is busted down using this for each loop
so each associative array within your
multi-dimensional array you'll be able
to get a key value list of all the item
ID and quantity
so that's where this if condition comes
in you say if the key equals item ID and
we know we have keys of item ID and
quantity so if the key equals item ID
and the value is equal to product ID
that's how you look that's how you find
the match so this if condition right
here is how you're finding the match so
if the key equals item ID and the value
of that key is equal to product ID that
means it's already in the cart the same
item that they're trying to add again to
the card is already in the cart so you
add one to that item or you can do
whatever you like you can put a message
an output message variable that would
say that items already in the cart we
did not add it again but I'm going to up
the quantity one because I just think
that's an intuitive way for it to work
but we'll be giving them the option to
change the quantities through the form
which is going to be the cart as well
this is just going to be like a little
precaution just in case they have
something in the cart and they happen to
add it again to the cart we're going to
make the quantity 2 but they'll be able
to adjust all the quantities using a
little box that will supply but you'll
see that when we get to the actual
making the cart look like a shopping
cart listing all the items with the item
picture a little delete button because
each item is going to have to have a
delete button next to it change quantity
all that crap all right back to it if
the key equals item ID and the value
equals PID that means that is a match
for something already in the cart so you
want to run a race Pleiss and then
change was found
remember that variable was bound that we
made false to start with change that to
true and we're going to use an
evaluation to see if was found is true
or false to add items and I'll show you
that in a second but first let me
explain array splice to you okay so here
are MD php.net
online documentation for the arrays
splice function you can see it says
array splice remove a portion of the
array and replace it with something else
and that's exactly what I wanted so
that's the function that I chose for
this occasion now you can see the
parameters it gives you the array the
offset the length and your replacement
so there's four parameters and they
explain each one to you right there
input offset length and replacement so
the input is your array the offset is a
number the length is a number and the
replacement is whatever you want to
replace it with now you might want to
read these real well and you can see the
URL where I am right now and look at all
these other array functions that you
have at your disposal
so when you're working with an array
that's why I chose to use a
multi-dimensional array for the card
because you have all of these ready-made
functions that make our your programming
life a whole lot easier when it comes to
something like building a custom PHP
shopping cart so you can just go through
their research all of those array
functions and you'll be an array master
so what i'm doing here basically is
saying i minus 1 to target the exact
array element that i want to target for
this this item in the loop now let's see
if i can point out the parameters to you
so you can clearly see here's my input
my array then what do we have here's my
offset so my offset is going to be
whatever i is minus 1 my length is going
to be 1 so what I'm doing is targeting
the array the associative array that's
coming through loop in this pass just by
claiming a length of 1 I'm only going to
splice that one basically what I'm going
to do is splice that 1 element to keep
its product ID that it currently has but
we want to take the quantity and +1 on
it so that's what I did here I simply
change the quantity
to be each item and I access the
quantity index there the quantity key so
whatever the current quantity is if they
happen to have two pairs of pants in
their card already it'll just go to
three if they have three it will go to
four you see what I'm saying so if you
need to decrease or increase the
quantity of any items you know how to do
that now by splicing your array for that
item
you got to target the exact index that
this was a little bit tricky it took me
about 20 minutes to find the right index
I tried several combinations of zeros
and ones and few negative numbers there
but I finally hit on the right one by
taking this I and take away one from it
so read up on your array splice
information at the php.net manual and
you won't you can't go wrong
because you'll see this is your input
this is your offset this is your length
and this is your replacement so we'll
see how that does for us and remember
what's bound has to be set the true
because it was found in the array in the
card already now this only takes care of
if the item was in the card already and
you want to add one more to the quantity
of that item but what if the item has
not been put in the card already on this
one at least one item in the cart you
still have to push the new item in so
this code here this for each loop is
only checking to see if it's in the card
already and if it is you do this place
now if it's not found in the cart this
was found variable will remain false so
all you have to do is go down here under
your for each loop and pop in this code
if was found is equal to false array
push and we can go back to
php.net and where is that array push you
can read all about that one two all
about its parameters how it works the
user this examples and user contributed
notes so you can't go wrong with those
so the basic logic is if there's nothing
in the card you want to push the first
item in else check to see if the item
they're trying to put in the cart is
already there if it is splice that item
and +1 on the quantity if it's not found
within the arrays that means it's a new
unique item they're trying to put into
the cart so you check if was found
equals false array push and what this
does is just puts the new item that
they're trying to put into the array
into the array at the end it'll put a
new associative array into your
multi-dimensional array with the
quantity of one if they try to add that
same unique item again this quantity
will be changed to two because it will
get spliced so I hope that makes good
sense because that's how it works now
I'm going to show you some code very
quickly to show you how to render the
cart in the design view actually make
something show now a very basic form and
we're going to make this cart dot PHP
command equals empty cart we're going to
make that work I'll show you how to
unset the whole shopping cart to empty
it that's very simple okay so under that
code we just put in right above the
doctype put a line break and pop in this
little PHP code block and I named it
section two just to differentiate it if
the user chooses to empty their shopping
cart that's what I titled it little
comment there and I'll zoom in on this
you can see it real good and what we're
saying is if is set the get variable of
command or
CMD and get CMD variable is equal to
empty cart which it will be if they
press that link and we unset the whole
session card array which will basically
remove everything from the card and
unset the variable and the cart output
will say your shopping cart is empty now
let me show you some simple cart output
very quickly put another line break and
you pop in this PHP code block right
here which I'm calling section 3 render
the cart for the users to view this is
where the magic will happen I guess when
we go to style the cart to make it look
the way we want to show the product
image a delete button and different form
elements that we need for the cart and
we'll also query the database to get the
item name price and all that good junk
now you can see this is not very much
code and actually if you look at it it's
very similar to the for each and inner
while loop that's in the for each loop
that we used up here for checking to see
if the item was in the shopping cart
already so I use that simple kind of
code again to make the cart render you
can see I'm packing it all into this
cart output variable so basically you
see it's the same thing for each and
inside of it there's a while loop that
does the list of each key value pair in
each associative array and I'm using the
same exact code in this if condition as
well on top remember the initial if
condition we had here that said if the
cart session variable is not set or the
cart array is empty using that same code
if it's not set session card array or
the count session card array is less
than one week art output your shopping
cart is empty else week art output
the actual card items we do the
loop-d-loop so I'm going to zoom in on
that real good so you guys can't miss it
that's section three and you saw a
section two that's for emptying the cart
removing everything at least you got
something to play with that actually
works so you can be popping items into
your cart and I'm going to test it out
right now see if it works
let me FTP it okay I'm going to pop in
the black hat add to shopping cart
oh wait I'm missing some style go to
open the index page make sure I'm
linking to my stylesheet I don't think I
am in the cart page let's see where's
the head nope
no link then put that in right now okay
so the first items in the cart now bike
home let's put in the black jeans add to
shopping cart so now you can see we have
two items you both have a unique ID so
the different items both have quantity
of one let me put in the black shirt add
to shopping cart and then you can see I
have three items each quantity of one
now I'm going to try and put cart item
two which is item id number three I'm
going to try and add one to it to the
cart again see what happens it should
give me a quantity of two and that was
black jeans I had ID of three so I'm
going to add those again and there you
go see item ID three quantity two let's
try and add another black hat which is
ID of one quantity two so those two have
quantity two this one still has quantity
one that's good I think it's all working
just fine so far so we'll pick up in
part 11 well let's try and empty it make
sure that works let's view our cart
click here to empty yep works fine
alright so you've seen the code and you
seen the test in part 11 we'll make the
cart look the way it should and once we
get the delete buttons on it and on the
individual items because you'll want to
allow people to delete individual cart
items and adjust the quantity of each
item within the shopping cart so that's
what will be taken care of in part 11
and we might get into talking about
outputting variables for whatever
gateway we pick whether it be PayPal
Google or whatever I'm going to use
PayPal so that's definitely what I'm
going to show you but most of them work
in similar ways and accept variables in
similar ways and when you have your own
custom cart you can just give a giant
list of things to your gateway and it
will process it for you all right
gyah part 11 I think is this part 10
okay bye</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>