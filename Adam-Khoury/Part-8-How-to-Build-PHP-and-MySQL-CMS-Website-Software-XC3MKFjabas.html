<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Part 8: How to Build PHP and MySQL CMS Website Software | Coder Coacher - Coaching Coders</title><meta content="Part 8: How to Build PHP and MySQL CMS Website Software - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Adam-Khoury/">Adam Khoury</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Part 8: How to Build PHP and MySQL CMS Website Software</b></h2><h5 class="post__date">2009-09-25</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/XC3MKFjabas" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello and welcome to part 8 of creating
custom content management systems which
is like the bare bones in the basics the
fundamentals on how to create a system
sort of like Joomla or WordPress from
scratch to give you ultimate control
over design and layout of the website
all right so when we last left off we
were in Dreamweaver discussing the
create new page functionality and the
parsing script that would parse the new
pages information into the MySQL
database for us now we're going to be
discussing the edit existing page form
here and how that all works so let's
first look at this form here we have a
form it's wrapped up Rattler order the
whole point this form has like I
discussed in part 7 has the return
validate form JavaScript function going
on to where they have to submit a number
into that field or some value into that
field
before they press the edit button this
button before they press that button
they have to enter a value there or
they'll get the JavaScript alert the
same for the delete page form there okay
and now we send the values to edit page
dot PHP and let's discuss that now it
says it's that simple we just give them
a little field and a button they put the
number in the field and then that page
comes up so here where you go to edit
page dot PHP when they click the button
that's what's brought up here we check
for the the admin check again to make
sure they're logged in as admin with the
session and here we have another PHP
block that starts the parsing
not the parsing but the request to
gather the existing data for that page
out of the database to throw on to the
fields here see how we're echoing the
data into those fields first we have to
gather it from the database according to
the ID that is sent into that field or
sent to the page and what we do is we we
run the same filter that makes sure it's
nothing but a number in that ID and that
page ID because it only should be a
number and then we connect to our
database now after we connect to the
database we can then run the query in
the database according to or referring
the PID num of the page ID number once
we gather the page title we select the
page title link label and page body from
the pages table where ID equals page ID
PID limit 1 and then we run the query
and after we run the query we run a
while loop on the result set and in the
while loop we can access the rows in the
database and then put those into local
PHP variables here and for the page body
I just remove one of the break tags to
make it render correctly and you'll see
why if you comment this out and run your
system for a little while you'll notice
your system is putting extra brake tags
and things and it could be due to the
way I filter things but it's a spine
this works great for me and all my
systems and this is only really
necessary if you're not using a Java
Script WYSIWYG editor or a flash WYSIWYG
editor because you can have your users
input any kind of tags or whatever they
want and the the WYSIWYG itself will
convert all of that by default into HTML
encoded or HTML entities rather so you
really don't have to worry about it and
there
all have all those good conversion
systems for making the entities that
somebody would enter in into HTML
entities okay so after we get the all
the data we need then we free the result
set and then the HTML part of the page
runs down and displays all the page data
and that's what we be looking at let's
go to the home terminate door and if we
go to edit existing page say we put page
two then it's gives us all of that
information so this is that point we're
at in the script where things are
automatically thrown into the fields
according to which ID is set okay and
then we have a validate form function in
JavaScript here in the head once again
to make sure that they put in where is
that let's close that one to make sure
they put in all three of these fields
and so that function makes it to where
they can't remove any of the data so say
they've tried to remove the link label
or the title you see they get that
JavaScript alert okay so once they that
JavaScript alert will not run so once
they get all of the data in and they
press submit then they go to page edit
part PHP that's where this form is
posting to so we go to page edit parse
that PHP here and let's explain that to
you the first line is an eye right up
top you may want to obtain the referring
site name that this post came from for
security purposes here which I also
wrote in the page new parse for making
new pages it's on top of that one too
you may might want to make sure that the
referring script is
the actual script that it's supposed to
be and not coming from somebody else's
server because sometimes people hack
systems like that they know what your
your parsing script is which they can
see if they look in the source code then
they can post to that parsing script all
the variables that your form your form
would from another website so you
sometimes you want to make sure that
it's coming from your website posted
variables okay and I'm not going to show
you how to do that because I got things
to do busy alright so what we're gonna
do here is grab all the variables are
coming from that form and in that form
we're sending a hidden variable this
time of PID and it has a name PID so
when we get that variable here because
we access it up top remember right there
so we have it available in our page and
we just send it so we send the page
sidled link label and the page body
again and this time we send the PID with
it so we know in our script knows which
ID and the database to update all of
this data so here we run that the filter
function on it again and conversion to
HTML special chars which all this
wouldn't be necessary
if you have the WYSIWYG a JavaScript
WYSIWYG editor or a Flash WYSIWYG editor
I just I'm just gonna keep mine standard
or not apply a WYSIWYG to it but I'm
gonna show you how you can apply one to
yours or talk you through it at least
let's see so here we go - after we run
the filter functions on it all we do is
we gather the posted variables into the
local PHP variables then we run the
filter function on it again like we did
in part seven and then we connect to the
database then we use MySQL I query and
our connection to run this SQL syntax on
our database so we update the pages
table set
set is kind of like you can translate
that to field so update pages set page
title equals new page title data link
label equals the new link label data and
page body equals the new page body Tata
that the person wanted to edit and last
modified is equal to now so we can know
in the database when this page was last
modified okay so and the last thing is a
where clause that says where ID equals
this pages ID and that's how that works
and then we have the MySQL I ever ready
to go in case something's wrong in the
query and if nothing is wrong in the
query then it will act out a cow it will
act out out to the page operation
completed successfully and give them a
link back to the index of the admin
Center then you exit your script happy
day so that's how you edit pages when
they press edit existing page here it's
just those two scripts involved really
so now let's discuss the delete page
this is very simple very small okay so
when the admin is on the home page of
the admin Center and they click but they
want to use the little form here for
deleting a page works very similar to
the way this one works where they have
to put it in a number here and if they
don't think at the JavaScript alert
warning box come up and so once they put
in one they want to delete you might
want to put in a buffer page when they
press Delete you might want to make a
page that says are you sure you want to
delete this title this body you show
them the title in the body of the page
that they're about to delete and then
they can confirm deletion I'm not
showing you how to do that I'm just
showing you how to delete it out of the
database you would have to build your
little your little gateway page to the
to the deletion if you wanted to because
a lot of the times your client might put
the wrong number in there and zap out a
page he really wants to keep then he'll
get pissed at you or they'll get pissed
at you because they're stupid and put in
the
numbah so what you want to do is make
sure you get a buffer page in there
maybe and let's go into the code view
and see where we're going with this this
also runs the route turn validate like I
said the JavaScript function up top and
the action is page delete parts dot PHP
let's open that page up page delete bar
stop PHP ok here is page delete parts
dot PHP which all of this is going to be
included in the free source package the
zip download that I create and I write
up top again you may want to obtain
referring site name that this post come
came from for security purposes here
exit the script that is not if it is not
from your site end script so what we do
is we grab that posted ID that came from
the index page here when they put it in
the ID of the one they want to delete
and they send that to this page which
this might come from your gateway buffer
page but what you do is you send the ID
here to this delete script and then you
include your database connect function
there or include your database connect
file connect to your database and simply
run the query with this SQL delete from
pages table where ID equals pages ID and
then or Die MySQL I error so if
something goes wrong you get the MySQL I
ever and if nothing goes wrong you'll
get echo out page has been deleted
successfully click here for the index
and then go back to the admin home page
and that's how it works like I said in
my system here this simple demo that's
just a tutorial there's no buffer page
there's no gate wait there's no cushion
page to where once they put it in a
number into into my system here and they
press Delete it's gone no matter what it
is there's no confirmation page you
might want to put that in too good idea
you gotta have stuff like that because a
lot of times we make mistakes you know
simple mistakes alrighty I think that's
everything that shows the last little
bit yep
so now all we need to know is when we go
to create a new page next step is all we
need to know is what wizzy we get it is
we can get for free and I'll show you
exactly where to implement the WYSIWYG
editors ok that will be part 9 and we'll
see you there</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>