<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>3. E - Commerce Website Tutorial - Create the PHP Admin Log In System | Coder Coacher - Coaching Coders</title><meta content="3. E - Commerce Website Tutorial - Create the PHP Admin Log In System - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Adam-Khoury/">Adam Khoury</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>3. E - Commerce Website Tutorial - Create the PHP Admin Log In System</b></h2><h5 class="post__date">2010-12-22</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/dZrCNhp0t_w" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello everybody and welcome to part
three of our e-commerce website lesson
series in which we are demonstrating how
to construct custom online marketplaces
from the ground up using open-source
technologies in this particular lesson
we will construct our admin area for the
store owner a secure part of the website
where a person or persons without coding
knowledge can manage inventory and other
things to do with the store don't--don't
highly down me man
shoe antiparticle my shoe I'm going to
come to your channel right now shoe you
want to hold me man and I'll get my
laugh out loud say nothing that serious
okay so to create the admin area we're
going to need a new directory and an
index page to start off with inside of
that directory so let's go ahead and
open up let's go to open let's just open
the index page and we'll take this page
and we'll save it as we'll make sure we
create a folder right now while we're
saving into our store main root
directory new folder called store admin
inside of it save this as index save
update links nope put a dot dot forward
slash dot dot board slash makes it go up
one directory so that we can
successfully connect to the style sheet
with no problems even though it's in its
own separate directory and if our
template header or any of our links in
our footer happen to not work we'll make
them full path links to those website
pages instead of relative links and I'll
show you what I'm talking about if we
come up against that being an issue
we'll change the relative links in the
templates to full path you can just
change the title to say store or store
admin area and of course we have to jump
up one directory to connect to that
template header and template footer dot
dot forward slash
okay that looks good to me that's going
to feed in the stylesheet and the
templates so let's see if we go into the
design view what we have all right that
looks good now in the header you can see
we have a broken image okay let's open
the template header it's in the main
directory you see that link right there
to that file image source style you have
to put the whole full HTTP there now
that you have the full HTTP in that
source attribute it will connect to that
image file no matter where no matter
what directory this header is planted
into and you'll still see broken images
now you see one on both index pages
you'll see broken images in Dreamweaver
on your local machine when you put these
files online that'll be the logo file
sitting right there you won't see a
broken image I guarantee you put it
online make sure you have this full path
to the logo in the style folder you
can't go wrong all right let's close
that now we can close the original index
page in the main directory and now we
just have the index page of the admin
file we're going to start putting files
up onto the server now okay now we have
to make sure that this is a secure page
to where people who are not logged into
the system as the store manager they
won't be able to even access these pages
in this directory so let's go into the
code view and right above doctype there
let's put a line break and let's add PHP
block in the first line we're going to
session start and this is necessary if
you want to work with session cookies in
PHP and what sessions do is help you
have persistent data so if they're not
logged in you know there won't be a
session variable established but after
they do use the login form that we're
going to build right now they would have
their session variable established and
you know that they're allowed to be in
here so using what we know about cookies
we can pop in a little if condition
like this that says if it's not set
session manager then we send them to the
header location of admin login dot PHP
which is a page we're going to create in
just a second that's going to hold the
form that the admin would log into so if
they come into the admin directory into
the index page and they happen to not be
logged in yet they're going to be
ushered to the admin login page which
they'll have to have login credentials
in order to log into the system now what
happens is if they are already sessioned
in as the manager then this code right
here or these two lines will not execute
so the page will continue on and it will
render into the browser so you can put
any content that you want like for
instance here I'm going to put in just a
couple of questions I'm just going to
add a div here and that div I'm going to
give some padding so I'm going to put a
style padding padding left 24 pixels
actually let me make that margin left
that's better see what that does it
takes it off the side so it's not so
close up against the edge and this div
I'm going to align left so all of its
inner content will be aligned to the
left I'm going to put a couple of
questions here first I'll just put and
then I'm going to press ENTER to put a
paragraph separation between those and
this one I'm going to make h2 now here I
can just have some questions manage
I'm not questions but links manage
inventory put a brake tag manager blabla
that we haven't created yet so we'll
just put blablabla there make this one a
link to a page that will need to create
cold inventory list dot PHP and we're
going to create that one too and this
one we'll just put a pound sign for a
link holder so when the store manager
comes to this directory which you can
put links to this directory or you can
just secretly tell them where this
directory is for instance if you want to
open the footer and put full path links
to the admin directory you can do that
you can put a link called admin right
there make the navigation path for that
link to this admin area this index page
so if they're logged in they will see
this hello store manager what would you
like to do today back in the code we
know if they're not logged in their
session manager is not enabled yet we're
going to usher them send them to the
admin login page and exit this script so
it doesn't process and show them any of
that stuff you send them straight to the
admin login page where they can log in
once they login successfully we'll
header them straight back to the index
page where they'll see that they're
logged in all right so here I am in PHP
myadmin because before we can even build
the login form or anything like that we
should have an administrator or store
manager in the database already that we
can refer to so let's just add ourselves
so here we have admin table products
table transactions table I'm going to
click admin 0 results in it so there's
no rows in it yet I'm going to press
insert here on top the ID will auto
increment so I do not have to add that
the user name is going to be Adam my
password is going to be
and I'll let you guys see my password
the last log date just put the day
you're creating it if you want to add
somebody else at this point you can add
them right there but I'm just going to
add me for now go and you can choose to
so let's browse that now and you can see
that we have one admin inside the system
you can choose to hash this password
using some kind of salt hash like md5 or
something like that but that's up to you
but if you want to be extra secure you
can and we have examples of that in our
member system building tutorials for web
intersect comm okay I can close out the
browser because I know I have one admin
inserted into the system to login with
so the first thing we're going to need
according to our code now is admin login
dot PHP so let's just file save as let's
save this index page in the store admin
folder to admin login dot PHP it'll have
the PHP extension already so just admin
login now before we go let's go back to
the index page of the admin area let's
put a little comment for ourselves here
be sure to check that this manager
session value is in fact in the database
because people can use Firefox and other
tools to create cookies out of thin air
to try to forge things on login type
sites so if they're trying to forge a
cookie and they're just creating a
cookie that's named manager they could
put any value they want inside of it and
it would allow them into your index page
here to see these links and everything
and you don't want that okay so I've got
the index dot PHP page and the admin
login page all set up to where it logs
the user in and I'm going to explain
that code to you in just a second first
let's go into the template header that's
in the main directory of the site let's
make sure we have this link go to the
that way no matter what directory this
template header gets fed into whether it
be the main root directory or the admin
directory your links and your images
will be fed incorrectly and will go to
the correct places no matter where this
header template is used on the site so
now I've made sure our FTP my template
header my template footer my index page
which is my store home page product page
product list page even though those
aren't really set up yet and put the
style folder up so everything is online
now here in the store admin folder
online you have admin login and index
dot PHP so let's discuss those real
quick actually first let's test it out
so here we are on the index page of the
site this is the home page of the site
let's go to the store admin directory
and we're not logged in right now so it
should assure us to the login page see
admin login dot PHP that's how the index
page of the store admin area works if
you're not logged in it sends you to the
admin login page which is within the
store admin area so let's try to login
with some funk credentials let's just
type in person password PP login it says
that information is incorrect to try
again click here the password was pupal
the name was Adam the password is pupal
log in so you see what I made it do it
goes to the store admins index page now
the home page of the store admin area
and now that the person has logged in
they see different data than they did a
second ago when they weren't logged in
they got assured to a login page so now
I have a link that says manage inventory
and manage blah blah manage blah blah
set to nothing yet manage inventory
I said to a page called inventory list
dot php' which is with going to be
within the store admin area so now let
me explain to Jew we can close template
head of PHP I'll explain to you index
dot PHP and admin login dot PHP
both the scripts within your admin area
so don't mistake this index type PHP for
your stores home page index dot PHP it's
a different thing in the store admin you
have an index type PHP as well okay so
let's explain index type PHP to you now
which you can see lines 1 through 21 or
PHP block there and under that it's just
the regular stuff that assembled the
header and the footer from the main
directory of the site and it has its own
little body section that says hello
store manager what would you like to do
today and there's a couple links right
there you can see one link is set to go
to inventory list up PHP so and this
information only gets shown to the user
if they're happen to be logged in so now
let's discuss the important PHP block
that's lines 1 through 21 on the top of
the page first thing we do is start
session that way we can enable ourselves
to work with session variables then we
run an if condition statement that's
checking to see if is not set the
session variable manager then we send
them to header location admin login dot
PHP and then exit the script so they'll
be sent to admin login dot PHP if they
happen to not be logged in with the
session manager variable which the
session manager variable gets created
when they successfully login on admin
login dot PHP
there's actually three variables that
get created when they successfully log
in one is session ID the one is session
manager and one is session password and
like I said sessions are a way to create
variables for yourself that are
persistent data that you can carry from
page to page and they never get lost you
never have to manually transfer them
from one page to the next all you have
to do is claim session start claim the
variable grab the app the value out of
it which we're doing here we're grabbing
the value from the session ID session
manager session password we're using the
preg replace function on those values to
cleanse them to filter them for database
security reasons so all that can be sent
into this variable after it gets
cleansed all that can be in that
variable or numbers 0 through 9 all that
will be in this variable after it gets
cleansed our letters and numbers
uppercase a through Z actually this
should be - instead of underscore their
a through Z a through Z lowercase and
numbers so let's make sure admin login
we have - there a through Z uppercase a
through Z lowercase and nothing but
letters and numbers and that's all that
will be in these variables when they get
cleansed so what you do is if they are
if they do have a session manager
variable setup you don't exit the script
you'll allow the script to keep running
this will only exit the script if they
don't have the session manager variable
set it will only send them to the admin
login page and exit script if they have
no session manager variable set yet but
if they do this script will continue to
run here so what we do in these next
three lines is we're putting the values
from those session variables into local
variables and we're cleansing them
before we query our database using those
values so the next line is we include
the database connection file next line
after that is we run a MySQL query let's
select all from admin where ID equals
manager ID username equals manager and
password equals password limit one so we
want to make sure that we check the
database using these three pieces of
data to see in fact if this person
exists because some people can use
Firefox and other browsers that allow
them to create cookies out of thin air
they can create a session cookie that
has the name manager for your website
and kind of forge their way in so what
you do is you connect to your database
you run a query using those values that
they're that they've assigned in their
browser and you check the database if
somebody wanted to get in forge their
way into your system they would have to
guess their ID their username and their
password which is going to be a hard
thing to guess all three of those and
get them right so the last little bit of
code there is you make a variable called
exist account from this query here we
run MySQL num rows function on it and we
can get a count from how many rows were
returned from that query so you say if
exist count equals zero you know that
that person does not exist so you send
them you can either type in some
information here let's just put in an
echo so if somebody tries the forged a
way in that's what they'll see and then
you exit the script that's how the logic
of the index page for the admin area
works if they're not logged in if
they're not session din with the manager
variable you send them to go login and
the admin login page you exit the script
if they happen to be logged in already
you access all of their session
variables query the database to make
sure they in fact exist and then run a
little if condition on the MySQL num
rows result to tell them if they do not
exist that their login session data is
not on record in the database and then
you exit this script this really should
never happen unless people are messing
around trying to forge their way in so
that's how that works now let's explain
admin login dot PHP which is the login
script and the form see the little form
here let's take a look down at started
the dark type here this is just like the
other pages has a title of admin login
it's connected to our stylesheet it has
our template header and our template
footer being dynamically loaded in and
in the body section or the content
section of the page it has a simple form
you can see that form has an h2 tag on
top and then there's a form tag which is
that red dotted line you see there and
inside that form we have just a couple
of titles for these fields one field is
user name the other field is password
and there's a submit button we don't
need that label tag so when they click
the submit button
we parsing this form data the username
and password in admin login dot PHP
which is the page that we're on right
now so so this script self parses and
here we have in the top to PHP blocks
I'm going to close this one and explain
the first one okie-dokie so the first
PHP block within your admin login form
is saying first you start session to
make sure you can access session
variables and you have an if condition
here that says if is set the session
manager there's no reason for them to
even be on this page that because
they're already logged in with session
variables so you header them to location
index type PHP which will send them to
the store admin home page the index page
for the admin because they're already
logged in as manager so that you really
shouldn't have had a need to navigate to
this page at all so we just assure them
back to the index of the admin area all
right close that one off now the parsing
mechanism here is for only if they click
the submit button so that's what this if
condition is doing this if condition
says if is set posted variable from the
form of username and is set posted
variable from the form of password then
we're going to run this code so if they
didn't hit submit on the form this code
never runs this code only runs if they
put in some data and press submit so if
they happen to put in some data they
press submit into the form we cleanse
the manager the username and password
variables so we gather the posted
variable of username and good and the
posted variable of password and both of
those are being filtered like we were
doing the variables in the other page
now they're in local variables here then
we include once the connect to MySQL
script we run a MySQL query to make sure
they exist once again so we select ID
from admin where username equals manager
and password equals password limit to 1
and we run the same logic as we did on
the other page with the exist count if
exist this time equals 1 then we output
through the while loop what the ID is
for this user so at this point we have
accessed we have access to their ID we
know their username and their password
because they put it into the form and it
matches a row in the database so we can
create session variables at these 3
lines right here that's where your
session variables get created and
session variables are pretty much
cookies that are little files they get
created in the user's browser so your
site can remember them session variables
get destroyed
when somebody closes their browser so
say I'm online at your site and I log in
you log me in with sessions I happen to
close my browser out and go eat a
sandwich when I come back open my
browser go back to your site my session
variables won't be active anymore in
that case you have to use actual cookies
but in this case we're just using
session type cookie files because we
don't need that persistent of data we
just want somebody to log in each time
they go and they want to manage the site
they got to log in but as they go from
page to page in that in that browser
session they won't be logged out they'll
stay logged in so all you have to do now
is build a log out page which will kill
these session variables so what happens
is
after we set these session variables we
usher them to the index page of the
admin area which at that point they are
logged in so the index page lets them in
to click the links for the store manager
else you tell them that information is
incorrect try again and when they click
here that'll send them back to the index
page which will notice that they're not
logged in and then send them to the
forum again it might be a little
confusing for newcomers how this code
works but there's really no easier way
to explain it to you and this kind of
code is necessary if you want a login
system and an admin sub system for your
store else if you don't want to use this
and it's confusing or whatever you can
just keep going into phpMyAdmin and
putting your products into the product
database that way and then just FTP
images up to your server but if you want
to have an admin system for yourself for
your clients or people that don't know
HTML or how to log in to the to the
server and everything and you got to
have a little admin index page and admin
login all right so now that we have
successful login in part four let's see
we're in part three now yes in part four
we're going to create the manage
inventory page which is a page that will
show a list of all the inventory items
and what you have to do is put and what
we have to do is put edit or delete next
to each one of those inventory items and
on the very top of the page we have to
put a big button that says add new
inventory item and then you'll have your
manage inventory page all done so
that'll be part four so stay tuned
buddy's coming soon and I am going to
put out six tutorials before Christmas
Day I don't care what anybody says the
only reason we're going to have more
than six is because you guys requested
this admin crap to manage inventory so
haha I'm going to stick to my guns and
get my six tutorials out before
Christmas
the fact that you guys requested to see
an admin bargain center and all that
that you're doing and you extended the
tutorials to be more than six aha</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>