<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>JavaScript expand() retract() Animation Function Programming Tutorial Open Close Box Slide | Coder Coacher - Coaching Coders</title><meta content="JavaScript expand() retract() Animation Function Programming Tutorial Open Close Box Slide - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Adam-Khoury/">Adam Khoury</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>JavaScript expand() retract() Animation Function Programming Tutorial Open Close Box Slide</b></h2><h5 class="post__date">2012-09-16</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/byBk8z_FqTs" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey how you doing Adam Cory here I
haven't seen you in a while I heard
you're a developer now what's that all
about
okay all right say hello to your mother
for me this video lesson is another
JavaScript animation programming
tutorial that looks to help wien coders
away from requiring huge frameworks in
big giant libraries to perform simple
and slick little animations on a web
page before we get our hands dirty in
the coding part of the lesson let's take
a look at the finished product so you
guys can evaluate whether or not this
lesson would be worth your time so when
I click expand box one box one slides
into view
then when you retract box one it slides
out of view and really we're
manipulating the box's height property
in CSS but we're doing it through
JavaScript over a time loop and also we
have box two here which has a different
height of content in it so that lets you
know that any height or any amount of
content that will be in any of these
boxes it will expand it and retract it
successfully you can also change the
speeds and I'm going to talk to you guys
about how we can tweak this thing out
refine it and all that stuff towards the
end of the video okay here's the start
of our HTML document that we're going to
script to so if you would like to follow
along you just need to get to the same
point that I am here you can see I have
the basics of an html5 document and then
here I'm going to open up the body
content now explain it very quickly h3
is just a heading on top that was the
big black bold kind of heading that we
had on top this first paragraph element
that's the element that holds the top
two little links or control buttons or
control mechanisms that will expand and
retracts box 1 or div 1 in this case so
right under that paragraph here is box 1
and it has an ID of div 1 and it has a
class of my divs and you can see this
other div down here has the same class
so we want we just want to affect those
divs have the same background same CSS
settings that way we don't have to have
a whole lot of CSS rules in our styling
but you could also just remove this
class and have each one of your boxes
individually styled within your CSS
by targeting that unique div so in our
CSS up top here you're going to see some
code for this class
my dibs and just know that it affects
both of the little sliding boxes on the
page now in between the two boxes
there's another paragraph tag and that
one holds the expand box too and retract
box two little links that control
opening and closing box two you can see
inside of each box there's just
paragraph tags just to put default dummy
content in there for you so let's look
at the styling up in the CSS the first
thing we do is target all the native
paragraph tags on the page those are
going to be the ones that hold our
little control links for control buttons
that make the divs open and close and I
wanted to give that a padding of 10 on
the top and bottom edge and then 20 on
the left and right sides and I wanted
those to have a background of this color
here those are these blue areas you see
here that hold the two links those are
styled by targeting the native paragraph
tags in the page now those two divs that
slide open and closed if I click this
you see that div right there that one
slides open and closed this area that
you see here this div and actually this
div as well are styled with this rule
here okay so it has a background blue
with 500 pixels the height set it to
zero if you want it to be not showing by
default when the page loads and then
overflow:hidden and we use
overflow:hidden to make sure that the
content within that div animates down
nice and smooth with the div and it
doesn't just pop out and show if you
remove that overflow:hidden from this
little program you'll see exactly what I
mean so you have to have overflow:hidden
on those divs and the last little thing
is we target inside of those divs
there's little paragraph elements
remember in the body let's take a look
inside of both of those divs there's a
bunch of little paragraphs I put in as
dummy content and that's what this rule
is affecting they have their own padding
and their own back
on color this background happens to
match the div background color that way
it doesn't have a different color but
you can make it any color you want if
you want to have a background so that's
all the CSS I'm going to collapse the
HTML then the CSS back the way it was
when we started and now we're just going
to focus on the JavaScript because
that's really what the lesson is all
about okay before we start with our
JavaScript let's reference something in
the HTML here you'll see that each one
of these links when they are clicked
they just return false that way the
pound sign does not show up in the users
address bar but in the onmousedown event
i put our little functions to fire up
and other functions are called expand
when you want the box to expand and then
retract is the function that you run on
the element when you want the box to
retract back up okay you can see that
each one of the boxes control links are
calling those functions expand and
retract and they are sending as an
argument that particular ID that you
want to affect that's what you send as
an argument through these functions and
you can really call these functions
anytime you want throughout your HTML
and your JavaScript which is happening
to be calling them through a non
mousedown event here but it could be any
kind of event that you want on any
elements that you want okay let's
collapse the body content once again and
we can focus on the JavaScript now that
you guys are fully aware that there's
HTML elements that when they're clicked
or when they're mouse down they're going
to call these functions to run so the
first thing we do in the JavaScript is
type in function and the first one was
expand we open and close parentheses
open your little curly brace and go down
a couple of lines and put in the closing
curly brace and there's your expand
function nest and anything that you put
within that function nest that code will
execute when the little link is clicked
on Mouse down and remember we're taking
in one argument so let's just call that
element you can call that poopoo if you
want but I'm going to refer to it as
element and remember those are the IDS
that are coming through dynamically so
element represents whichever div is
being called to expansion now we're also
going to have a
the function they're going to work as a
pair together it's going to be called
retract so you can just copy that whole
first one that you wrote and then put
the second one in like that and just
change the name of the function they're
going to be geared a little bit
differently and at the end of this video
real quick I'm going to show you guys
how to externalize these two functions
that way you can use them on many pages
of your website you can universally use
these two little lean functions that
we're going to write to slide things up
and down all over your website and you
can have one external file that you call
this way you don't have to have this
script actually sitting in the documents
that might want to use it maybe you will
have for web pages that might want to
use this kind of animation you want to
externalize it at that point so let's
want to show you how to do okay the
first line in our expand function what
we're going to do is create a new
variable named target that's equal to a
document that get element by ID and
we're referencing this element dynamic
div coming through the function it could
be div one or it could be div two both
of them are going to pass through the
same function depends on what people are
clicking so target is really an object
that just refers to whichever dynamic
div is being sent through that function
now the next line we're going to use the
offset height property on the target
object to make ourselves another little
variable that represents the height of
the div and remember in our style we
have a height of zero pixels set for our
div because we don't want them showing
by default we want them to be all the
way collapsed that's why we set in the
CSS height of zero pixels so what we're
doing here in the JavaScript is we're
simply getting that value because that
value is going to be changing throughout
this expand function this expand
function is actually going to be a timed
loop function so H is going to be the
value that we're going to be changing
over time to create the animated effect
so really all this variable is doing is
evaluating on the page what height the
div is at that very millisecond
throughout the animation now in the very
next line we're going to create a new
variable called sh it's
short for scroll height and that's going
to represent the scroll height of the
content within your target element
scroll height is basically it's a way to
get the number of the height of the
content that's within those divs
remember all those dummy paragraphs I
had in there really scroll height
represents the height of all of those
and we're adding that line so that your
divs could have as much content
vertically as you want in them your box
can have as much dynamic content as you
want in it and this function will still
operate correctly no matter the height
of all the content that's within your
divs
okay now the very next line after that
we're going to create our loop timer
mechanism which is the set timeout
method in JavaScript and that gets two
arguments the first argument is the
function that you want to keep firing
off and the second argument is the speed
factor it's really milliseconds so if
you set this on 1,000 it would be every
second you'll have a little animation
take place or part of your animation
take place very slowly but I put it on
eight so it goes very fast so the higher
this number is it's on 5,000 it's going
to go slower your animation will go
slower then it would add a thousand I'm
going to put it on eight because that's
the fluidity I want I want it to look
smooth like butter we want to fire up
expand the function that the loop timer
is actually within so this function just
loops on itself by this set timeout
mechanism being within it and we're able
to pass dynamic variables through that
function and maybe towards the end of
the video I'll show you how to make this
number eight the speed at which things
will expand I'll show you how to make
that dynamic as well as this first
argument of the element being dynamic
you pass that dynamic variable through
the top you can add as many arguments as
you want to this so here you can put
poop and poop could represent the speed
and you would just keep sending poop
like that straight through and really to
complete this working all you'd have to
do is go down here into your HTML and
actually send the speed so you put a
comma and then the number that you want
for your speed I had it on eight
so you can send that 8 right there you
can make it 20 that way you can change
the speed dynamically when the function
is called onmousedown so does that make
sense
you can send more than one dynamic
variable through these expand and
retract functions but I'm going to press
ctrl Z and get back to where I had
hard-coded speed in there there we go
but now you see that you can have this
dynamic as well as the argument that's
being passed through the expand function
okay so how much JavaScript do we have
invested so far four little lines that's
not bad
all we have to do is two more things
it's not much code involved at all all
you have to do is understand the concept
of the time to loop and you can animate
all right so under our loop timer all we
need is an if-else condition statement
and then right under that in the last
line of the function we're going to
adjust the target element which would be
div 1 or div 2 whichever one is being
called to pass through this function
we're affecting its style height
property and we're changing that to the
dynamic h variable and the dynamic h
variable is changed within this if and
Nell's condition statement which I'm
going to explain right now and then
that's the last little bit of the expand
function you see you're looking at all
of the code that goes into the expand
function right now we're not going to
put anything else in here for now and it
operates really nice all right so I've
explained all of these lines except this
if else condition statement so what that
saying is if this height variable which
is the the dynamic height of the box as
it's growing through the animation
that's what this H variable represents
so if H is less than the scroll height
which remember I explained what the
scroll height is already it's the
content within that box so in essence we
can translate this into understandable
English by saying if the height of my
div is less than the scroll height of
the content within it
then I'm going to make my div grow else
that means the height of my div is
bigger than the scroll content within it
we run this code and really stop the
timer and everything because your height
of your div would be greater than
the content within it and really you
just want to stop the expansion process
when the height of your div is bigger
than the content that's within it and
you have to remember that this function
expand is running extremely fast through
its looping process and the height of
the box is growing the whole time
throughout your animation so this H is
changing so if throughout the whole
process of the animation the div is less
than the content within it then you're
going to take the target offset number
and add compound five a value of five to
it you can change this value and this
value they'll both affect your speed
this is how many pixels that through
each pass of the loop that the box is
going to grow so just remember as this
expand function loop is processing if
the height of the box is less than the
content within it then you definitely
want to keep animating it making it
bigger not the height of the box ever
becomes bigger than the content within
it then this else comes into play and
what happens there is you cleartimeout
you stop this super speedy little
function from processing and then you
can just run an alert to yourself that
says expansion complete and this wasn't
in the little demo the alert wasn't in
the little demo at the beginning of the
video I added that in just for developer
purposes you don't have to have that
alert there you can comment that out but
I would suggest that you have it there
just while you develop so you can
clearly see what's happening when this
else condition comes into play that's
really when this else condition comes
into play that's the end of your
animation and then like I said before
you simply affect the height the CSS
height which is this property here that
we set in the CSS initially when the
page loads so you're using that
dynamically changing and growing H
number to apply to the pixel value of
the height of that box that way it's
constantly changing in size and really
that's really the logic behind
JavaScript animation programming is that
you have a timed loop and you have to
adjust some values of something maybe
it's it's left
position or its top position on the page
you can animate the width so it doesn't
even have to be the height of the box
you can animate the width so it grows
horizontally but here is where you're
really applying the animation because
you're changing the height value of that
box very quickly through a time loop so
if we press ctrl s and we run this in
the browser we should see an expansion
and then it says expansion complete
right when it gets done with that
animation now let's hit box to alright
we get an expansion it says expansion
complete see how that looks again now
let's mess with these values if I make
this a 2 let's run that you'll see how
much faster it is you see it goes really
quickly and if I make this a 1 that
means it's only going to grow one pixel
each time through the loop so what
that's going to do is kind of slow it
down
you see if I put this on 10 pixels that
it's going to grow each time through the
loop it'll really speed up I'm thinking
a good speed is for this box to grow 5
pixels each pass through the loop and
this to be set at 8 or 8 10 something
like that seems to make a pretty smooth
animation but something around these
numbers you know what I mean
now to keep things really easy let's
just take all that code that we placed
inside of the function expand press
control C after we highlight it let's go
down here into function retract and
paste it and let's start at the top here
this line is going to remain exactly the
same this line is going to remain
exactly the same this scroll height is
not needed this variable is not needed
because our objective in the retract
function is to reach back to zero so
really it doesn't matter what the scroll
height is in this particular function
now the loop timer can stay exactly the
way it is but you have to just make sure
that you change the name of the function
so copy it there and change it here
because you want retract to be looping
on itself
now remember when I said we want to
reach
down back to zero to retract so just
going to put a zero here and we're going
to change this operator from less than
to greater than so if the height of our
box as the animation is taking place the
height of our box is greater than zero
then we definitely want the animation to
keep taking place so we increment
actually we're going to decrement this
has to be minus equals five we're going
to take away five pixels from the height
of that div each pass of the loop if and
only if it's not zero yet now if it
happens to get down to zero that's the
end of your animation that's when the
else condition fires off and you can
force the target dot style dot height
property for the element to be zero
pixels so that's what I would do I would
just force it to be zero pixels right
here just in case it's anywhere in
between one two three or five just force
it down to zero which it really should
be anyway by the end of the animation so
this line probably isn't even needed and
then you want to clear time out again
and then instead of saying to yourself
expansion you say retraction is complete
and like I said these alerts they're not
necessary you can comment them out and
remove them whatever you want but that
way what you'll have now let's see if
this works correctly I'm going to run
this in Google Chrome actually let me go
ahead and run it in Internet Explorer
because those are the two and really we
should evaluate in allow blocked content
so here we are an Internet Explorer
let's expand box one when it gets to the
end it says expansion complete so the
animation is over we know it and our
loop has stopped processing completely
now let's retract that box
retraction complete the box is gone now
let's try it in chrome make sure
everything is cool yep yep okay let's do
box two and retract box two
it is Internet Explorer in Chrome and it
works in Firefox as well don't worry
about that and all the other popular
modern browsers and you can actually
have that retract box link within the
box as it comes down have it here on the
bottom or up here on the top of
something this little link that says
retract box it doesn't have to be here
up next to the expand box link you know
what I'm saying
so you want to retract it expand it that
way too little make a little more sense
with toggling now you can also make this
say toggle box 1 and toggle box 2 and
remove those other two links and just
clicking this one will make the box go
up and down respectively depending on
what position it's in and you would have
to reprogram this to act that way so
what you're looking at here is a very
slim just a really the beginning of a
really cool animation pair of functions
so you have your retract and you have
your expand and they work as a pair
together so what we're going to do is
take that pair and make them universally
dynamic so all 10 or 20 or 50 500 pages
on our website can call those same two
functions from one place and we don't
have to have those same two functions on
all 50 pages now watch how easy it is to
externalize this make it modular and
really useful for all the pages on your
website you just press control X to the
things within that script tag and then
just make the script closing part of the
script tag on the same line as the
opening part and then here you're going
to put the source attribute that's going
to be equal to whatever name that we
want to give the JavaScript that we're
going to make right now I'll call it
expand underscore retract dot J s then
all you do is press ctrl s and you save
your file then you go to file new and
create a JavaScript file if you're in
Dreamweaver you can just do the method
that I did file new JavaScript if you're
in another editor you know how that
editor work so you do it the way you
know how all I'm going to do is press
control V and pop in the code that I had
within my clipboard
there's my two functions press ctrl s
and save that as expand underscore
retract and you just make sure that you
have it in the same folder if you're
going to refer to it like I am here so I
just saved that into the same folder if
you want to have yours in a js4 the
users put Jes forward slash and then
refer to that file
but since mine is in the same directory
I'm just going to refer to it like that
press ctrl s make sure both of those
files are saved and now let's preview
this in the browser if it works then we
know we have successful modularity okay
so like I said you can use this to
integrate this expand retract das script
into any webpage that you want so that
way you have this code here you only
wrote it one time but it'll work on a
million pages alright so this code and
this code both of these vials the code
for them is going to be available
underneath the video a develop PHP and I
will surely put a link to it in the
video's description at YouTube there all
right I'll talk to you guys later bye
bye</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>