<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Canvas Bootcamp 16 - Keyboard Control and Movement | Coder Coacher - Coaching Coders</title><meta content="Canvas Bootcamp 16 - Keyboard Control and Movement - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Adam-Khoury/">Adam Khoury</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Canvas Bootcamp 16 - Keyboard Control and Movement</b></h2><h5 class="post__date">2013-11-16</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/R9-1l5Scfqw" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">in this exercise you can learn to apply
custom keyboard controls to canvas
applications and games we can reference
the keydown and keyup events of the
document which returns information to us
about what keys the user is pressing on
their keyboard first before we dabble
with code let's take a look at the
finished product we'll be able to hit rd
w s and a keys to move an object around
in space we're going to resume with the
same code that we left off with in the
very last exercise where we were
animating a background and then we had
some object floating in space there now
what I want to do is I want to treat
that orange object as a player so what I
can do is just take this background
object that we created in the last
lesson and right under it I'm going to
create a player object we're going to
need the X property the Y property for
the player the width of our rectangle is
50 by 50 so that's going to be the width
here 50 by 50 now I can remove this if
condition within the render function and
I'm also going to leave this method
named render so the background object
can have a render method and the player
object as well can also have its own
render method and this one's going to be
fill rect method and we're going to put
this X then this Y then this width and
this height so you'll know it'll have a
50 height and a 50 width when it's drawn
to the canvas so let's type in CTX dot
fill style and you can set your fill
style outside of the render function is
equal to orange now we can create a new
instance of that player object we'll
name it
layer and V equal to new instance of a
player object now instead of drawing it
here to the canvas I'm just going to do
the same thing I'm doing with the
background and I'm going to say player
dot render to call the render method for
the player object now if we look at that
in our browser we see we get the player
object tucked in the zero X and 0 y
position now let's say you wanted a
different default position we can just
a player dot X is equal to 100 so it'll
be 100 pixels to the right and player
dot y make that equal to something like
225 and now it'll be somewhere set
around the the middle tucked off to the
left edge a little bit so we need a new
event listener for the document for the
onkeydown event so let's go ahead and
just grab this listener and we're going
to put it in place here underneath our
animate interval variable so pop it in
right there make sure we indent it
correctly and let's remove the init
canvas I'm going to change window to
document add event listener of key down
and then whatever code we want to
execute anytime a key is pressed down on
the keyboard is going to go right here
now within that function we're going to
create a variable called key press and
we use the event dot key code property
in order to get the string of the key so
the key code is a number but it
corresponds to a certain key on the
keyboard and you can get that whatever
key that happens to be using string dot
from car code and pass the event that
key code through it and for testing
purposes let's just alert ourselves the
key code and then concatenate to that
string the resulting key that was
pressed will put a bar in between them
now run this in your browser and then
press any key so I pressed the S key and
it's key code is 83 okay now if I press
the W its key code is 87 if I press the
a its key code is 65 so if you want to
press the spacebar see if I press the
spacebar its key code is 32 but it has
no string value and other keys are like
that to like shift I think C it just
gives you that block looking thing but
it's key code is 16 so you can still
target it if you want to by its raw key
codes but to keep it simple we're just
going to target the WASD keys by their
actual string all right so I can comment
this alert out and all we need is some
if condition logic so we'll type in if
open/close parentheses opening curly
brace and closing curly brace we want to
take this key press variable and then
right if key press is equal to w what
we're going to do in that case is take
the player dot Y position and we have to
move the player up so we're going to say
- something like 3 I got to have my
equal sign in there it's gotta be -
equals 3 now let's see what we get press
the W key and we get upward movement now
all we need is downward movement in side
to side so we can take that if condition
and say else if key press equals the S
key then we want to go in the Y position
plus equals 3 so 3 pixels down and we
can take that else if copy it else if
key press is equal to a then we want to
move on the X plane - equals 3 that will
move it to the left then one more else
condition else if key press is equal to
D key then we're going to plus equals 3
let's see what we get let's press D s so
if you just press it once it's only
going to move the three pixels but if
you hold it down it will continue to
move and you'll seem like it's kind of
animated if we put that on just regular
- - you'll see it moves slower but it
moves smoother let's just change these
all to minus minus and plus plus that
way it'll move by one pixel each time
test that see it's a little bit smoother
but it's slower so I'll put that back on
threes you can also set this as a
variable which could be way up here if
you want to set a bar up top somewhere
in your application VAR distance equal
to or just makes a dist is equal to 3
and then you can place that where all
these threes are that way you don't have
to change all of these threes if you
want to change them to a 2 or a 5 you
just change the dist variable in one
place okay you see what we get now
all right it's looking good so that's
how you can add keyboard controls to
your applications and games you can
target any keys that you want</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>