<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Ajax Tutorial : Post to PHP File XMLHttpRequest Object Return Data Javascript | Coder Coacher - Coaching Coders</title><meta content="Ajax Tutorial : Post to PHP File XMLHttpRequest Object Return Data Javascript - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Adam-Khoury/">Adam Khoury</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Ajax Tutorial : Post to PHP File XMLHttpRequest Object Return Data Javascript</b></h2><h5 class="post__date">2011-07-16</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/woNQ2MA_0XU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello everybody how you doing in this
lesson we will demonstrate how to use
Ajax to post form data to a PHP file and
then get returned data without page
refresh some people like to use jQuery
to help them post Ajax calls to PHP
without having to know what is taking
place in the code but I bet some of you
guys would love to know how the raw Ajax
mechanism is assembled and how it all
works in the guts of things and trust me
is so easy that a 12 year old kid can
manage creating their own custom Ajax
calls the PHP after watching this video
and snatching this free script from
develop PHP comm all right I'll be using
Dreamweaver cs5 as my text editor and
you can use whichever one you want
because we're not going to be in design
view at all so you can use notepad if
you want now you can see I have the
beginnings of a very simple web document
here the first thing I'll do is go into
the body section and type in Ajax post
to PHP and get returned data and I'll
just take that and wrap it in an h2 tag
by highlighting that text and pressing
ctrl 2 in Dreamweaver now I want to have
a field for your first name so this will
be like the field label and there's the
text field you can see it has it's an
input text field it's a form element in
HTML it has an ID of first name the name
is also first name for that element
I'll go one line down put in a break tag
and I'm highlight this line and copy it
and paste it here then I'm just going to
put in last name here and change these
to last and you'll notice that it's not
going to be necessary for me to put in a
form opening tag and a form closing tag
I can just have form elements where I
need them and then Ajax can do the
processing or JavaScript really can do
the processing all right let's pop
another break tag right here and let's
take two break tags put them under this
one because we're going to put a button
here now actually on the break tags I'm
going to put the forward slash because
you'll notice that those break tags if
you just have BR by itself without the
forward slash in it doesn't validate w3c
now we can just put our cursor here go
up to form hit the button right there
and we'll choose a submit button name we
can just make it my BTN and the value
can be submitted data whatever you want
that to say press ok now all you have to
do is add the on click event for this
button so on click what we're going to
do is fire up a JavaScript function
called Ajax post so you just type in
JavaScript colon and then the function
that you want to fire off on click of
this button so when somebody clicks this
button we're going to make this function
called Ajax post fire up now this
function called Ajax post just needs to
be assembled here in the head tag of
this document will send data to PHP file
ooh problem
okay now let's pop it in that javascript
function and you can see lines 4 through
25 and it's really not bad and some of
those lines are actually comments that I
put in there now let me explain the code
to you real well and also let me
reassure you that I fully tested this in
Firefox Internet Explorer Safari Chrome
Opera and all the newest versions of all
those popular browsers and it works
nicely in all of them so as you can see
here function Ajax post and that's the
one that fires off remember
on click of this button so if you go in
design mode you'll see exactly what we
have so what happens is they put their
first name they put their last name then
they click Submit data and that's the
button when they click it fires off the
Ajax post function yeah the first thing
we need to do is create our XML HTTP
request object so I just name that HR
short for HTTP request now we create
some variables we need to send to our
PHP script
the first one is URL and that's going to
be equal to whatever the name of your
PHP parsing script is the next variable
is going to be called FN and that's
going to be equal to the first name
whatever the value is in this first name
field the way I access that was through
document get element by ID and I just
claimed the
first name field to grab that ID for
that field and then dot value I use the
value property for it that way you can
get the value for what is in the field
when the person clicks that button so
it's in a variable called FN same for
the last name that's in a variable
called Ln and the last variable we need
is one called VARs and this is where you
can assemble your URL encoded variables
so you have key value pairs my first key
is first name and the value for that is
my FN variable whatever the person types
in for their first name now my next
variable key is going to be last name
and that's going to be equal to whatever
they type in for their last name those
are the variables they can be sent to my
PHP script this URL now we're going to
use the open method on the
xmlhttprequest object right here and
we're going to set its parameters we're
going to use post instead of git we're
going to set the URL that's supposed to
be in place for the parsing and we set
the last parameter to true which lets
the method know that we wanted to happen
asynchronously now the next thing we do
is set the content type header
information for sending the URL encoded
variables in the request because right
up here we're sending URL encoded
variables key value pairs that are
separated by the ampersand the next line
is we access the onreadystatechange
event with the xmlhttprequest object now
what already state changes is an event
of the HTTP request object I can't even
say it anymore the xmlhttprequest object
it's an event of that object that
triggers every time the ready state
changes and the values are 0 through 4
for the ready state and we can make a
function fire off every time the ready
state changes by listening and using
this onreadystatechange event and
there's a function that's going to fire
off every time the ready state changes
so when that ready state changes any
time throughout the document
for instance 0 means not connected yet
well I think one is establishing
connection two is establishing
communication or some crap like that
before is when it's complete and
all throughout the transaction of the
data there's going to be this on ready
state change is going to be going from 0
to 4 so when this ready state changes
this function is going to fire off and
you can see that there's a little bit of
code inside that function for lines and
it's just an if statement a conditional
and that conditional reads if our
objects ready state is equal to 4 which
means complete and the objects status is
equal to 200 which means okay then we
can go ahead and process the returned
data in our document and you just scoop
up the returned data that PHP spits back
to this file by using the response text
property on your object now the next
line is communication for some kind of
div or box that you have on the page
which I didn't even put it in place yet
let me let put that now I'll just pop it
right here on the bottom I'll put a
couple of break tags then right there on
the bottom and it's a div and you can
use span if you want you can use a
paragraph tag if you want long as you
give it the ID of status that way the
JavaScript can communicate with it so
when the data gets back from the PHP
file and all is done processing then you
can update that status field to put any
kind of data that's coming back from the
PHP file some kind of thank-you message
or whatever you want to put there and
I'm going to show you what we're going
to have in our PHP file don't worry so
now there's only really two lines left
does this whole function Ajax post
now this onreadystatechange
functionality and this function that
fires off and this conditional that we
have in here are all things that
happened after you use this send method
now the send method sends the request
off to the server and it's going to
contact a PHP file and send these
variables that we assign here so you can
put your parameter variables right there
and really this line is where we
actually execute the request and I put a
little comment here for you guys that
says send the data to the PHP now and
wait for the response to update the
status div so before your
and listening to the onreadystatechange
you want to put in the status div maybe
a little animated gift loader I just put
the word processing by using the
innerhtml property for that element
which is the status box down here
alright this Ajax post function is going
to be looking for my parse file PHP to
communicate with so that's what we got
to create right now real quick so let's
go to file new PHP let's get rid of all
that data and let's put in this data and
don't worry I'll have all this scripting
available at develop PHP under the video
where it's playing there so let me go
ahead and save this as the proper file
name which is my parse file file save as
my parse file save okay now we can test
it out and you have to make sure that
you're on a server that process is PHP
because on some people's local machines
PHP won't process so you have to throw
it up on your server that's PHP enabled
but this whole script set to work all
right so take note of what it says in
the PHP file here it says thank you it's
going to say first name last name says
the PHP file so that way if you get this
response back in your original document
that has the form on it then you know
that your Ajax post happened
successfully and everything worked out
fine all right let's show you guys that
it works I'll put in adam corey submit
data and it says processing for a split
second there and that is where you can
put an animated loader if you want so
here we have the information back from
PHP file that says thank you adam corey
says the PHP file so you know everything
worked nice and you have a nice smooth
lightweight ajax post to PHP mechanism
now or you can even externalize this you
can put this function into an external
javascript file and call on it whenever
you need to post to a PHP script using
Ajax</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>