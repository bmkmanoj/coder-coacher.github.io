<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Build a Twitter Clone with Apollo Graphql &amp; React-Native - Part: 14 | Coder Coacher - Coaching Coders</title><meta content="Build a Twitter Clone with Apollo Graphql &amp; React-Native - Part: 14 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/EQuimper/">EQuimper</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Build a Twitter Clone with Apollo Graphql &amp; React-Native - Part: 14</b></h2><h5 class="post__date">2017-08-16</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/sDCfEh6XIU0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello everyone for number 14 so what are
we going to do today is we're going to
finally create a tweet right from the
mobile app so this is what we're going
to do today and also we're going to talk
about Timmy cqy so here I record a
little video about what we can do for
the end so as you can see we can add a
twist so I'm going to add the twist
right when I'm going to ascend to the
tweet I'm gonna get that right inside my
list I'm gonna do this by a finicky why
with the Apple agree SQL so this is what
we're gonna do so I'm going to put the
link here about optimistic you are in
the photo app elope so you need to think
about optimistic UI as a pattern to like
simulate the result of a mutation
so finally you just say hey I know
what's going to be the thing I'm going
to send and receive so just show that if
I receive an error like you can like say
example if I add 1 to a 9 bar if I
receive an error just remove the one I
add so so you see so this is what the
apologia Carell asked us to do so
finally we're going to do a mutation
like we did with the sign up like that
but finally when you finish that you're
going to need to do a update of the
store so this is what we're going to
build today so for doing this first
thing we're going to need to do is we
are going to jump on the code and we're
going to first in create limitation so
go inside limitation folder and create a
new mutation we're going to call that
qv8 tweet the GS so they're going to
give us a good name to follow so here as
every mutation so I think I'm going to
just be in yet so
during project good QL from react Apollo
after that we're going to export D for
the rescue well here like that so here
we're going to create a shin so I'm
going to take me THM I'm going to say
create a tweet so it's almost like we
did in the back end so yeah I'm going to
say text and I'm going to set that need
to be a string and it's require so I put
the bank thing here so if no Texas to
put their Apple you're going to add the
error I thought I'm going to say create
to week I'm going to set X equal to my
variable tag
that's not increase here and now I can
ask what I want to receive back so I'm
going to start want to receive my
favorite con I also want to add the ID
because I need that to make sure the key
of react are going to be a unique I'm
gonna need my create app I'm gonna need
my sec - oops
and after dangle I need my user object
because I need to show the ad account of
the user the user name of the user as
you can see we checked everything we
have air first name and finally last
name this is what we need finally as I
returned from the create suite that's it
so now after that what we can do is we
can jump run into the new tweet screen
first thing we're going to import the
tool we need so one of the tools we need
is going to be the graph QL I our order
component so in with the guests ul what
I'm gonna do - if I need to import
annotation because I need to pass there
as you know I always like to put my
mutation enquiry in uppercase like that
so I know that's going to be mutation so
that came from gas to a mutation and the
create to each file but I'm going to go
to the bottom and I'm going to wrap my
I'm going to wrap my new tweet sorry I
don't know what happened with my graph
QL tag and I'm going to put right there
my create tweet mutations here this is a
really boy a really big buck I find with
with Joe's Yoko
it's when I put you ask you well I
cannot enter the three twin mutation air
with the autocomplete so I think of what
happen here but so now the first thing
we're gonna do is we're going to make
sure we can treat the tweet that's
nothing more so now we know with the
tweet button are one one I'm going to
unpress the tweet button that's going to
be that time so add the tweet so I'm
going to call that on three tweet where
it's going to be the function I want to
call I'm going to copy that and I'm
going to make it and that's going to be
an instant one because we're going to do
some thing with that you're going to see
in a moment but first thing is if I
click on that I can click on my tweet
right now and I don't want I don't want
because I have no text so we can do
another gap and I'm going to call this
get button disabled I'm going to just
say when this button is they say well
I'm going to say return these that say
that take the lamp and because as you
remember in the backend we say -5
character I'm going to get an error I'm
going to write really I'm gonna leave
this right there in the back in the
reference in I here I can say disabled
disabled once the button is disabled
within two so here I'm going to be
return true or false with the land of
the second now if I go there and I try
to click as you can see I have no
faculty but if I search type something
now I can click perfect so now it inside
the concrete twist we can do now way
there's that prop mutate so this is how
you call a mutation you're supposed to
the number that when we did that in a
sign up I'm going to say after that we
need to pass variable we take an object
and this is the variable we pass and um
the recipes that say that step so that X
going to be equal to the desserts in the
set
that's perfect this is the only thing we
need and now if I do this what's gonna
happen
I'm going to sleep you know well then
I'm going to open my server and
sometimes
very
work then
Oh Omega typo
I will create it awesome I was wife
NCI debug for now gonna set a low well
and I'm going to preach wait
boom you see what happened so here Mongo
so this is the debugger give us that
Mongo add the lol tweet right inside the
DB with the object ID and everything and
take the user that we take finally do
you that with the user we get
predictability but the thing is if I
close there
so you see first thing I need to close
this by myself and after that I just for
showing you that reward now we see lol
perfect we get one of the third thing we
need to meet today the second thing if I
want when when I create to close a
keyboard before to go back so before
doing that I'm going to do John here and
I'm going to see from right now I'm
going to pick keyboard
because you know the keyboard I'm gonna
close before the react navigation so
here we can really see the keyboard
isness and now finally we can call the
go back from shine coming from visit web
navigation that go back and we past
nerve because we are in the model and
now if I do this I'm going to create my
tweet pelo well again I'm going to
create wait now you see that close the
windows but now the three is create but
again because we didn't use open UI need
to be fresh so time to do them to meet
sticky one for make like the real time
ish fake so now what we can do is create
ready for the variable here an object
called optimi 6k respawn
just like that here we need to see stuff
like that like type name that's going to
be a musician and now I call this I'm
going to send my mutation object here
after I've dressed a type name and I'm
going to stick to it so if you don't
know from what I came I think a good
idea should be if I show you this stuff
here with the debug remote yes you can
see what I pending my state is finally
type name is almost like an honest ID
inside the inside the I follow so I can
policy tightening tweet so this sweet
Apple you know this is a tweet and you
know this thing here is a user and so
you see you can click and you're going
to see each so find any technique just
like what is this site like what is this
thing so now you think retweet going to
be a tweak and I'm going to say I'm
going to add to the user so what I can
do is I'm going to sit a text form so
I'm going to click text it's going to be
equal to this that clubs that is that
take that text so finally we need to
fake it so we need to pass at the
variable right there so because what
Apple of a graphic you're going to do
we're going to do this with update
function after that you're going to take
what you say to em a I'm going to have
that in that DM so take it like I give
you
after that I'm gonna stay cyber risk on
because we need that we know because
when we create the tweet nobody acts
average in we're going to pass zero
after that we need an ID so what I'm
going to do for an ID I'm going to map
that round and I'm going to map that
random
and I'm going to say multiple bye - like
this dish number so it's like a medium
so this is what Apollo or Jeffrey was
told to do and this is for pick an ID
and now I am going to see creative app
is going to be equal to the new data
object this is the same thing when would
you be going to do so now that we need
to do the thing for the user because if
not we don't gonna have another Tower
nothing like that
so time name is going to be equal to a
user because it's a user and ear is the
same technique we have the backend if
you did in the other work so now I need
a username but how can I get that it's
going to be pretty easy because we have
access to the user information inside
the store from redux so what we can do
it's first thing we need to compose that
and so we're going to take it and I'm
gonna need my clinic from react widows
I'm going to scroll down and I'm going
to compose why I need to compose is
because you have to L cannot match with
clinics or like I mean I cannot connect
everything I need to compose that to get
both together I'm going to do like this
and I'm going to put my connect right
there so now this connect is going to be
pretty going to just do a map stick plus
we're going to take the stage we have as
an argument
I'm going to return a user press who's
going to be equal to just take that use
or the info because I know I just need
two intros I'm going to call that user
so now we have access to everything
about the user by doing this that stops
that use our so now I can take user name
because this is the information so if
you didn't follow what I say is so
that's going to be our here but if I go
to my debugger emoji a I'm going to show
you I think I'm going to say this thing
okay
thing looks wrong
sorry about that
what I'm gonna do I'm gonna restart it
for which I have a problem with my
connection we'll just show you if you
get that - so it's for start I'm going
to just restarted project
make sure this one we run again and now
when that's going to turn I'm going to
run the echo II iOS
you
like that so now my simulator oops I
need to store my stool a table because
as something later from the iOS 1120 to
run it by myself
sorry about this I just show you like if
you get this kind of bug what you can do
it just like that circuit connection
gets like kind of confusing I don't want
to lose time to just reset TV time
so now looks like going to work
to go
when you work now
so now what I want to show you is now if
I search or I'm going to go to my new
tweet screen so now the debug make it
really slow so that's where we get this
kind of than an omission but now if I
search here so I'm going to open it
I don't know what my connection ah but
now if I search for the new tweet screen
okay let's Nam I use organize everything
because when I say users they take the
info from here you can see so now I'm
going to shut down the debugger by doing
command D so I'm going to close the
screen because now after after the
keyboard we won't make me don't see
nothing
I'm going to do is I'm going to do here
and now we can say I need a username
yeah because we need that for the
listing error
so after that what I need to is the
first name so this is that scrub that
user for saying but now I could be too
much myself and I don't like that so I'm
going to be structuring the user from
these are scrubs
against the user the user name user
first name last name equal to user the
last name and Astrid I can say edit or
equal to user the Editora because we
know like thing about like like I told
you we are the viewer so here we just
need finally we know the one we're going
to create is going to be the user here
is the one here the one large right now
the one who is inside the store but as
well we can add access to all these
things
effect don't know if I do this
going to try it I'm going to say
something like this and I'm going to
tweet mmm nothing I found wide but do
that say that ease
okay looks like your work so I just
rerun ESD iOS but now you see
the change is now there are ads refresh
my app so looks like the mystic is not
working why because you need to read
this slave adding to le s so in the
example above we just show out to
similar city simeon seamlessly it is an
existent objecting the source but now in
that case you want to integrate that
when it is existent Curie because you
need to think about that we get the
tweet when we did the gift with Curie as
you remember in the own screen so we
need final to add that to this curry
because the screen is connect to this
curry so we need to add that to the
screen so all we can do this is going to
be pretty simple its first thing we need
to import this famous curry so just for
showing you we need the same spirit QE
as that I'm going to copy that data on
the screen so I'm going to do then I'm
going to be socket is that because I'm
going to need that so this is what I'm
going to need for building my finally my
my update all we gonna do with this
going to be almost like five line of
code so inside a quick tweet right there
started between I'm going to say update
we need to talk
Apollo or to add a some in we have
access the Stork for the first things
that are going to be the full store now
slightly I'm gonna have the data and I'm
going to say create tweet why that I
need to do this is because of the way
I've did that here because wait we tear
right there so now I can do an arrow
right there now I can do some amount of
logic first thing I'm going to create a
variable called that I was going to be
equal to 1 every finally it's going to
be an average this one's going to be the
same as read query so again this require
is something you should go and take some
time to read about that but this is
really like a thing we need to read in
this place
that's using segments but it's like
we're going to read from the cache so if
I can show you it's like finally next
thing like we catch every tweet we have
before and the way we can read other
Curie did before if by doing really yeah
pretty pretty hard to describe so now
you just need to see which curry you
want to be and I'm going to say my jet
with three
we have that here we're going to get an
average of that up after that I need to
ear to make sure
then we don't going to have two times
the same value so all I can do this is
by doing currently a data that to get
week because that's going to be the same
way as I did in the home screen you know
in the home screen well we take the data
we did that I get tweets with the same
query is the same so it's um it's an
array so I can use the fine - finally
it's a it's a function we're going to
return you the first element ik define
so if you have five elements in your
original about the first one so if I can
place P for tweet so I want if the P so
if one of the three so we go over the I
look over each one so T that underscore
ID so if this t is equal to create tweet
the underscore t like that
so here we make sure so if what we say
it if I do this I'm gonna say return
true if I fund like that in area
controls so yeah
what I can do finally if I'm sure no
tweet at the same ID as the creat
Twitter ID now what I can do it for the
right Yuri so that's all you can write
inside your cache you secure it and you
need to toggle again the strain to read
data and now here we're going to say get
tweed now is going to be equal to an
array like before and a we're going to
spread the new a new address so we're
going to create a new object and I want
this at the beginning so that's what I'm
going to put that here I'm going to take
that that the create week with an object
with everything new so this one here and
now what I can say it's now come up does
that give me back Mac OH
all other element has married apparently
we merge both array with the new object
coming and now if I do this and I type
ello world hello well and I do this and
I tweet
hmmm something looks wrong right now so
what I did wrong so here like I mean it
I need Trinity to just get out of this
thing here and this thing and add the
coma so now I can do this so finally I
need to put my update outside of the
mission so because I did a lot of tech
I'm going to just clean up my Robo mango
so I'm gonna go to my new connection I'm
going to burn my as we develop man and
open my tweet and I'm gonna just remove
I'm sure this one
I'm going to remove some of them
so now I can refresh my screen
so the last one is where were worse I'm
going to sit ello well again and now if
I could tweet now it'd work magic
finally Myra was the update don't need
don't want to going to create tweet need
to be outside so that was my mistake so
I hope you enjoy again I'm going to put
the repository inside the description
just follow with the itza if you miss I
hope you enjoy it please subscribe if
you didn't and let me know in the
comment what you think about this
tutorial and sorry about my error but
actually a bit or I can debug myself so
hope you can have a good day and we
together bye</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>