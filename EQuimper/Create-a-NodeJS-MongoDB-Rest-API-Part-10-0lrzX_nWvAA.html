<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Create a NodeJS + MongoDB Rest API [Part: 10] | Coder Coacher - Coaching Coders</title><meta content="Create a NodeJS + MongoDB Rest API [Part: 10] - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/EQuimper/">EQuimper</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Create a NodeJS + MongoDB Rest API [Part: 10]</b></h2><h5 class="post__date">2017-06-01</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/0lrzX_nWvAA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello guys
410 thank you if you make everything
until here right now so today we're
going to delete a pose and we're going
to make sure the the author of the pose
is the only one who can delete this the
post annually and have some stuff - I
want to show you a tool called prettier
prettier it's an awesome tool and you're
going to love it
I'm sure and that's going to be at the
funnel of the citizen so today is the
last kind of easy-peasy
because today is I mean we just delete
something it's not crazy but for the
next one now we're going to start a job
on the front part where we're going to
need to make some stuff like we want to
cover it opposed we're going to want to
on travel with it and stuff like this so
time to draw on the code so there's
going to be pretty simple for the for
the part inside the code that's going to
be really much more about like or almost
like copy and pasting what you done
yesterday but we don't like copy and
paste that we don't want to do this so
go inside your controller inside your
controller this is why we're going to
create the function so we're going to
clean another async function we're going
to give it a good name like a Dilip owes
a really good name and we're going to
make the try-catch like before we're
going to put the error and we're going
to setup the error first and because we
want to get it fast we're going to
complicate this sign because it's the
same request we always done after that
inside a try-catch that's going to be
pretty simple the thing we want first is
to find the post so I'm going to just
type the call like that and after that
I'm going to say why we want that we
want to get the pose for make the same
thing of what we did air here what we
say is if the user of the so if the
hotel the pose is not the user ID inside
the GWT passport stuff we don't let em
doing stuff so we send him a unit
arrived so a whole one error error so
that's going to be the same stuff so
here we can copy and pasting this line
right there
I remember yesterday I didn't show you
like to make sure like this is working
so this is what we're going to do today
we're going to create a new user and try
to delete another post so after that
they're going to be pretty pretty simple
we're going to make a now wait function
with the post we get online 54 right
there and we're going to say post remove
so remove is a function inside mangu so
because the post is the command object
on Mongoose a MongoDB we can use this
function here so that was almost like
the save air but now is the remove and
after that yeah I'm going to return a
real and I'm going to just send a status
that's it nothing more we can assign a
status of okay so we just say when
someone delete something we'll just say
that's work that's nothing more I see
some people sending like the pose and
get like nil and stuff like that you
don't need to do this the front end can
just work with the status you don't care
about like if you send something like
that I mean the back end is supposed to
make the job to tell yes
this stuff is delete so I'm gonna show
you a way to see it easily by just
hitting that status so the front-end
printing developer King hitch came do
the the the delete request receive the
response from their back-end checking
the status see a 204 okay and good to go
so nothing more to send don't talk to
some other stuff just kind of status
nothing more a status can can tell it's
like an image and image do a lot of work
with this is what we say a status is the
same so that's why you see me doing a
lot of just sending a status there for
them if you know what you do be gonna
make best stuff for that that's it
so that was it just me talking so I hope
that wasn't too bad
so here we're going to just create a
round like this always
so route that delete and it's going to
be really simple we're going to put the
parent ID if you want to use it after
that we want to be at a TK so out GWT
and we want to use the controller be
folks nothing more now it's time to test
it so we're going to German postman and
now I'm going to get all folks
again that because again because you
don't need to be looking forget it on
the post now I'm gonna make I'm gonna
let my user I'm going to get the GWT and
because this user is the one who create
all the polls I'm supposed to be able to
delete so what I'm going to do is I'm
going to go to my headers I'm going to
copy and pasting my GWT value here after
that I'm going to go back here I'm going
to copy and paste this row like that I'm
going to change yet to be a delete I'm
going to go to get out both I'm going to
take the first one yeah this one here
I'm going to put it at the end so this
is the parent ID
after that I'm gonna save my stuff be
sure now I can just click on it and be a
good up it suppose delete sorry always
keep your own convention that's going to
be easier as you can see these are sign
up like Inc repos get ID and just
simpler now I'm going to send this stuff
and see if they're going to work now I
receive it okay
so this is only my status I son perfect
do I get all again my post I'm going to
send oh no Title 10 is not there I'm
going to open rebel Mongo just to be
sure because maybe some of you hood or
in the travel that so everyone goes
search your database so here make an OG
s see idea collection post and malice 1
it's post title 10 yeah so I don't have
anymore my title 11 and if you want to
see all you can find it you can find it
right there too if you want like you can
put like title and say like title 11 and
now make a make a search or you just
click enter and search your record and
now if you do you can like that now you
can get you can get it like just a title
can so here just be sure so title 11
don't exist anymore if you see how I do
the entire if you click on me and turn
that down gonna work for the Matthews
all you need to put comment enter and
for the windows I'm not sure but always
supposed to be control replace a comment
so now if I just remove all the fine
like that and now I click comment and
turn now I get everything so that was a
bit about learning rebel Mongo so now
I'm going to come back so now yes that's
work I can delete this is perfect but
now do my authorization where I do my
stuff right there work this is the time
for that so now we're going to jump back
on push man
we're going to create a new user so I'm
going to go to sign up I'm going to go
to the body I'm going to create another
user called test 5 example that's going
to be a Jane do and Janey oops sorry
Jane do like that I'm going to send sign
up a new user perfect I get my GWT now
I'm going to take this one I'm going to
go to post delete I'm going to change my
GWT value here I'm going to put the one
of Jane I'm going to go back to my
getting all the posts I go there I click
get all posts you sell Oh easy that you
send so that you see we're going to take
the first ID we know the user name will
creat that if John do so is not Jane so
let's see if we can delete take this ID
go to post delete change the ID put this
one and I'll try to delete with the
durability now you see Oh unit arise why
it's all about the code we just write
right there we just say if the user it's
not if the post is or is not equal to
user ID we donate in to go that's it so
you see we just make some kind of
authorization just to be sure
if the dad didn't show air but this is
this is the same code we remember we
copy and paste so that's going to work
so there we just make sure we don't
gonna let someone came like example you
write the best post ever is never right
and someone you don't like you can
delete that that's going to be crazy and
come with that we just make sure you
create post there is your post if you
want that's it that no one else can do
this so that was about the delete port
now that's going to be a what I really
like about it's something called
prettier I remember I've shown you like
how to use prettier with the with the
command line like using inside Visual
Studio code but now I'm going to show
you all you can use it right inside like
a you package JSON and that's going to
run on every file in one time and that
can be really easy for if you want to
make it
with a pre-comic put like a ski and
something like that well before you
commit that gonna call the prettier so
we never got a push code to get up
without pretty dad and make sure
everything looks cleaner so you're doing
this you need like a ski ending stage so
first thing we do we need to do go
inside your terminal run yarn add dash D
so their dependency we get an install
prettier
that's it like that after that I'm going
to wait that finishing because I just
want to be sure it can get a break and
because if I change some stuff here and
like this stuff finish before me I'm
going to need to restore my package.json
so now here we're going to add a command
called prettier really a good name
yeah what I'm going to do don't put a
comma here okay I'm going to say
prettier and I'm going to say I want to
use single quotes you get a C in moment
what that's going to do here I'm going
to say I want my print whip to be easy
so when I see Edie I mean the screen you
have like a whip and I want to study
Eddie I think it's like at this place
here so I don't want to have cold like
that they need to scroll my mouse to the
right and no I want to cut the code at
PD after that I want to because of my es
Lane I like to add alt reading coma so
when I see a chilean coma I say like
always at a comedy M but I want to ask
this stuff why I do this is because if
you want to add another line you can
like do shift command D and you don't
need to care about all do I forget to
put my coma no so this is just something
I like I didn't like at the beginning
when I start to use the Esalen but now
something I really like after that here
we're going to say - - right because I
want to see everything inside my
terminal and now I'm going to say which
final one so now I'm going to put quotes
here and I'm going to see sec because
it's the SRC folder here and I'm going
to say flash xx - 2 x / experience the
GA so finally all the JavaScript files
we just want to create all the jealous
jealous crip 5
so now because of a UPS Lim and we don't
want to mess up with like the kind of
like example you don't want to get them
to mess up with prettier on the style
link thing we can install something call
inside of the plane speak out es lien
config prettier if I can type but that
the only thing we need to do after
install that stuff is it's a really
small library it's to go into you I am
so if you like mine or everything else
you just put your at the top and you put
prettier after so production I just make
sure yes later you're going to remove
all the style validation of ESPN and PD
are going to make it
so now maybe you don't know what that's
going to do but I'm going to show you so
now you see because of es thing prettier
now I don't have any more than a
semicolon error because pretty are going
to make sure of that after that what I'm
going to do here I'm going to put double
quotes like that I'm going to put double
quotes and I'm going to show you like
simple all that work now I'm going to go
to my terminal and I'm going to run yarn
prettier and look what you're not
you see and now look semicolon
single quote semicolon jamika not
everything is perfect
yes okay yes that was an easy one so
maybe someone going to give you call
like that it looks really really bad
like this and stuff like that like like
this and now if I run prettier again Oh
everything climate Dave's at their place
and you see the only fire who have been
changed
it's code controller and what I like
about Visual Studio code if you use it
it's you can come out and click and run
to this file
so another stuff tools that's going to
work - inside the post round I'm going
to like make all that inside one line so
like this this so now we this is more
than the EDD I think it's up here so now
if I run PDR boom that's it so I hope
you love Twitter like I like it
something with not really old but I
think everyone now use it and that's why
I show you that so this is my plan for
the next video just showing you like
some little tool I use on every kind of
project and just to show you like how
you can grab this tool and make you work
so much better and what I like about
prettier is that work with JavaScript so
I mean that's work with your front-end
so when we going to build a friend with
this stack cause I think that's
something I really want to do we can use
it and so we just told you already know
you can just use it everywhere
so I hope you enjoyed this excel click
the like button if you liked it please
subscribe if you didn't we can have some
awesome new video communing and that's
going to be and also want to trust me on
that we're going to learn a lot about
cyber risk stuff and if you want to know
all we can make some kind of
relationship with MongoDB I think that's
going to be a good point I don't say
that I'm an expert but I think I can do
I can do stuff with that and so we talk
later have a good day but</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>