<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>M01-Part8: Fetch from the Phoenix server the feed photo with Absinthe | Coder Coacher - Coaching Coders</title><meta content="M01-Part8: Fetch from the Phoenix server the feed photo with Absinthe - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/EQuimper/">EQuimper</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>M01-Part8: Fetch from the Phoenix server the feed photo with Absinthe</b></h2><h5 class="post__date">2018-01-21</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/kJBcMk0ZZ4k" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello everyone welcome to this last part
of this first milestone so what we're
gonna do for this video it's we want to
fetch every photo we have bought inside
the server and in the first three isn't
so it's going to be pretty simple first
thing we need to move to do first it go
inside your server and do mix Phoenix
server to start its over after that I'm
gonna just run this come in here and
make sure when I run so I'm gonna run
photo and I'm gonna run I want the ID
and I wanna compare the image URL and
that's so this is almost like what we're
going to plan to do for this mode so go
inside your front-end and we're gonna
install some library here to make it
work from react Apollo we're going to
add Apollo client I follow cache in
memory Apollo Ling HTTP react Apollo SQL
tag and graph QL so you can pause the
video and just find everything we need
to install but we need that now so I'm
going to run enter also we run that in
the nothing the dev body and the real
dependency
and what we're gonna plan to do for this
one first it's we're gonna create here a
folder called graph QL inside of sohc
and we're gonna create our index @ GS so
that's going to be where everything
about graph QL gonna start gonna be
pretty simple currency like 15 line of
code for this installation for now so
we're going to import from
Apolo client Diane
import Apollo client after that we're
going to import from TTP uploading BP
we're going to import TTP
after that we're going to import what
it's going to do the cache for us so
that in memory cache yeah
it's in memory cache now we're going to
really create the cache I'm going to
create an instance of the cap right
there after that we're gonna create an
instance of the link it's gonna be a new
HTTP link this one can I pick a you re
and the Uwharrie is gonna be this stuff
right there so the local oath 4000 so
yes Phoenix run on four thousand API is
a crafty one
and finally here we're going to export a
current client
equal new Apollo dyin for it we passed
the link and I care so here we have
create the client we need so like to do
to make Apollo work with the project we
have there so Apollo I like it we create
like we would seek to Apple which link
which URL to go and fetch the graph you
would create the cache and this is what
the client need for now after that
insert the component we're gonna put a
component called with provider so this
component is the way you need to manage
your polo stop Apple provider when you
work with magnets here navigation so
it's a higher-order component so what
we're gonna do it's here we're gonna
import a react component like that and
we're gonna also import the Apollo
provider from react Apollo so this is
the wrapper around for Apollo everyone
react now we're gonna import the client
per meaning from the graph QL folder we
don't need to put index request again we
number JavaScript remember don't go and
take the index if you don't put any pie
here and then we're gonna export default
a function called with provider what
you're gonna take a rapid component so
here it's how you create our other
component this eye other component is
going to be a function will finally
return a component last call that
we found class with provider
you
oh I can pull that turn class CP like
that Q 1 X 10
component gonna be a component and now
aired only thing we're gonna do is we're
gonna render and return the apple loop
provider
we're going to be wrapped with the
client we just create and now here we
can pass the rapid component and we're
gonna pass him all the crooks pickup
like that nothing more so if you have
never seen that this is how you build
finally an IIR other component and this
is something you know you really need to
know when you work with and when you
work with react so now what we're gonna
do
it's now we're gonna jump inside the
screen pie until this one right there
inside the screen and now what are we
gonna do is we're gonna import this with
provider from component with provider
and now we're going to wrap each
component with this like that so if you
follow what I try to do it's family
finally the wit provider take the
component ear and return the component
but you wrap this component with the
Apple providers I don't need to see a
pull-up provider to provider everywhere
with the client I can keep my Maxum
instance out of the time and just do
this way so and if you don't know like
here if you know redux it's almost like
a wheel at work they do like a rapper
ear around you and all that work so now
here now so we have the the provider
it's create so now we can do the first
the first fetch for getting the photo
inside the application so you're gonna
see perfect simple it's pretty what
we're gonna go to the pitch me and
inside this one now what we're gonna do
is we're going to import the gql from
the actual tag this is all you're gonna
create you have a little graph to three
and we're also gonna need to use the
MEAC Apolo and this is yeah right there
so now here we're gonna create the first
thing we're gonna create is gonna be the
three so get photo and in this one's
gonna be just actually what we're gonna
ask for the photo so if you don't know
where I take this ID it's like that oh
no I did image but now what I'm gonna do
here I'm going to say ID and we need
also the image URL
like that and I think we have caption
yeah that's it caption and yeah like
this and now I'm gonna wrap my graft
we're gonna wrap the affair with big
screen and now I'm going to pass my get
photo career
I'm going to just remove the earth below
and I made my
and I'm going to show you something I'm
going to open getting it to debugger
right now I'm going to show you what we
what do you see
oh man still build right now
you
really don't know why you crash ear but
I'm telling you it's expelled
do whatever you want
here you're going to assume that by
doing this stuff here now again I came
with some crux code that as I'm going to
already control all the props and I say
this is perhaps I'm going to do that but
like that
okay and now I'm gonna do a debug just
remotely and although cause I'm gonna be
so this is the plot so first time the
fact this is what I got now you see I
get a dis that felt that data and inside
the data I get a loading which true and
when the loading its finish and when
you're loading its finish I get the data
and now I get a photo and every of 10ml
right there and if you do have this is
what I have asked about it
well now what I can do here it just
finally do a import from we have already
relatives okay active activity indicator
and in this one what we can do is I'm
going to create here a style sheet also
and I'm going to say right there
loading rapper that's if x1 give the
kite contain center and a line item
centaur and now here what I'm going to
do
it's if these that Club that the leather
building so if is a father that that
data that building is true I'm going to
return you
we're going to have that start of the
loading wrapper
and I'm going to show here the activity
indicator and I'm gonna see size large
like that and I'm going to need
important
now I'm gonna say no look we're gonna
get eluding and it's really fast so we
don't leave this here but now I'm gonna
change the next rule you may be now if
that list I'm gonna work it's now I'm
gonna put this flat this right there
we're going to be bit up for performance
then let's review
and a we need three lemon we need three
sing their data there's that 12 the data
at that photo after that we need a key
extractor instructor I'm going to call
this function right there so the e key
instructor it's a word or react for the
flat list to find unique and of ID to
get a key like if you came from react in
the web this is like the key but now we
told the fat lease out to extract the
key so here that's gonna be pretty
simple we construct are gonna ear
receive the first item so there's gonna
be like this LM n we have right there so
inside that a photo get one element we
get a sec take the ID so we say I 10
that ID is gonna be a unique and we're
gonna set that render item and it's a do
that render item and we're gonna do this
function for wind right n air gonna we
see an object y we have the item so we
are where we have this object right
there and what we're going to say it's
creating a photo car and we're gonna
save in the protocol that data you're
going to be equal to this item
so now what can happen when I'm gonna
close this stuff
it's we're gonna receive now 10 times
this dog yeah you see time time builder
so now we need to make to make this
value dynamically we move that here when
you see essence is that fine but never
used I'm gonna remove that and now this
is what we're gonna do
it's total card now receive some data
and the data is and the data is what we
receive now from the backend so now we
can show whatever we want so the image
here first thing gonna be anymore this
dog but now going to be equal to this
that throw that data the image URL I
know if I say and i refresh my screen
now that's gonna be the image we have
saved inside the database from the URL I
give you
in first three Pisa
after that the other thing we can
already change is going to be the
caption this is a beautiful dog you can
change that we're going to do this here
in the meta where we say caption going
equal to this that perhaps the data
detection
I'm gonna do to the meta let me tie with
you the caption now if i save and i
refresh my screen
the caption gonna overwrite this is a
beautiful dog because this is the way
this default thing work its if you have
nothing we take that else we take
whatever you give but we don't need that
anymore
so now you see we received above all to
trust me this is what we get here all
this of the above look at that and this
is what we asked the only thing I think
we forget its ear the caption I'm gonna
just say in my text to put number of
line I'm gonna say two so what that
means--it's if I get a caption with too
big nothing I'll hear but what is gonna
happen it's after that you see here
right there it's too long to be there
I'm gonna say I'm gonna refresh and now
we're gonna go to the last one
now you see he did react native take to
line number of line and you put the
three dots at the end for us we don't
need to do a trunk head for by yourself
so that was that set for getting the
element there
don't you think I'm gonna maybe add
gonna be kind of simple just I want when
I pull too to catch again I put to be
fair finally and look at all these is
that when I telephone control you fetch
request but freshmen in here to get an
Arab state buti'm we're gonna be is
refreshing but this boolean is going to
be there to know when it's refreshing
because what we will be one is we want
to show a refresh control inside the
flat list so a refresh control ear it's
gonna be it's gonna show like that the
little loading spinner when you pull the
Refresh but we're gonna say you need to
Liam when it's refreshing so that's why
we will give them the boolean and also
after that you want to get the on
refresh function and there's gonna be
the days that refresh request so if I
can show you that I'm going to take this
that set stay is refreshing
bhiku and now look what's gonna happen
if I do this and I pull to refresh
I'm gonna keep loading like this
infinitely well that's why you do an
asynchronous call you will say here it's
gonna be true when we start after that
we say we're gonna crap
sorry this is my day here I'm gonna call
this that product data that we fetch we
fetch this is an a method with already
bill inside a react Apollo so yeah so
trusting and this is a prep we get in
here is refreshing to befoul at the end
so if I anything about that we called
every fresh request first thing we say
with is refreshing it's true but we
should a refresh we do a promises here
any synchronous call well we're going to
refresh the data to the same that I will
fetch so if you have new and amend their
new and I'm gonna add here and after we
say is refreshing its fall so we say
it's done now if you see here I'm gonna
show you that with the back end I'm
gonna be fetch you see the fetching and
this is done so first thing yeah if you
didn't know and xn Phoenix is really
really fast so as you can see the first
thing it's it for sure is in there but
we get look at the time it's VD pass and
for sure it's temporal so it's not crazy
but so you see sold out that word zip
that was what we need to build for the
first milestone in the second one we're
gonna just do an infinite pagination in
the show milestone and also we're gonna
do the attacked occasion and the planets
to burn a notification with pass one
email and also notification with a
Facebook but what I mean by that it's
we're gonna install the Facebook SDK in
this project so the user can click on a
Facebook button and logo with this
Facebook from Facebook app from is
iPhone and Android phone and that's it
this is what we're gonna build in the
next video
after that it's gonna be easier for us
to start to do some action like like
bookmark or something like that so I
hope you enjoyed this first milestone
and we're gonna talk in the next one
have a good day of fun</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>