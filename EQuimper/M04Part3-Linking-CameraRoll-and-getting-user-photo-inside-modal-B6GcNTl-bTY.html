<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>M04-Part3: Linking CameraRoll and getting user photo inside modal | Coder Coacher - Coaching Coders</title><meta content="M04-Part3: Linking CameraRoll and getting user photo inside modal - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/EQuimper/">EQuimper</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>M04-Part3: Linking CameraRoll and getting user photo inside modal</b></h2><h5 class="post__date">2018-02-10</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/B6GcNTl-bTY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello everyone welcome to the part
number three of this milestone so what
we're going to do for this one it's we
want to be able to create your own image
picker so yes so what are we gonna do is
we're gonna add inside the project we
have right now so I've create an user so
you can actually need to login again if
you have followed the seed stuff we did
in the last one but after that you came
to your page one thing I've really
changed but what we're gonna add yeah
the only thing I've changed it's we have
this photo we just add finally but now
what we're gonna do it's first thing
we're gonna add a camera icon well when
we get a click that's gonna open this
model right there why a we're gonna make
use of the camera roll library and we're
gonna make we're gonna take all the
Foley we have and what we want is when
we select one of them we put some kind
of some kind of opacity onion you see
what I mean so so this is what we're
gonna do so first thing we're gonna do
is first thing we're gonna create a new
route okay so what are we gonna do it's
inside the screen screen we're gonna add
a new a new file called qe8
a new folder create food photo screen so
this one is gonna be where we're gonna
put everything about the creation of the
photo okay so we're gonna say index the
GS and now oops NetFlow here that's
gonna be component or maybe a per
component it's gonna be better and now
here what we're gonna do is we're gonna
import the stylesheet and the view and
the text from react native we're gonna
create whoops we're gonna create a
component called create photo screen and
I'm gonna change this to be a per
component and now we are we're gonna put
a view and inside that we're going to
add a text we're gonna say hello
creation something like that whatever
you want
okay and now what are we gonna do now
it's we're gonna jump inside the index
adjacent side the screen we a new shift
command D or copy/paste the the same
line we're gonna see create photo screen
here and now we're gonna just start this
company just by pasting this name right
at the to place okay okay now what we're
gonna do is we want to add this icon
right there
and from what I've seen as for the what
icon one we're gonna use is going to be
one from the Fed our stuff from the
react native vector icon again just go
inside this dairy doc and you can find
finally every icon you want shift
command the ear we're gonna get the one
with the name of camera they came from
Federer so that's going to go inside the
loop we do you while we do the promises
on it where we load all the icon and now
what we're gonna do its ear inside the
field screen now that this field screen
now we're gonna add some kind of code so
for those who came from react navigation
that react native navigation it's gonna
maybe it looks pretty strange but I mean
this is the way you need to handle that
with with finale Wix react native
navigation okay so now what we gonna do
it's we're gonna finally add inside the
component will mount of the screen so of
this feed screen right there and we're
gonna say this that prop that navigator
so you get this props navigator every
time you are a screen so every time
finally you become one of those here
okay and we have access to the set
button function this one you can create
a button to your nav bar and I'm gonna
say I want that to be in the left and
now here you can have an area button you
need to pass in and ID in vinegar that's
it kami right need to be unique I'm
gonna say icon and now for that icon
what I'm gonna do
so I'm gonna import
from my Utsu the team and I'm gonna
import my icons map okay and now I'm
gonna see icons map dot camera so they
can I would just add now if I save and i
refresh we get this new button right
there okay
but now it do nothing all can we had
access to this button and doing
something with that that's a good
question and this is what we're gonna do
first thing we're gonna do is we're
gonna create a new function here called
on navigator even why this one oops why
this one gonna receive an even and what
we're gonna do is we need to bind this
stuff inside a constructor so now we're
gonna need to change that to be a
constructor change a fit screen to be a
constructor because we're gonna need to
bind this function so I'm gonna pass to
be this that state like that we know and
now we're gonna pass the props in the
constructor in the super but now we're
gonna make use of this province a prop
is that navigator the set on navigator
event and now so finally they have a
navigation inside of props navigator the
same props here we have a set on
navigator even who finally give you
access to the even of what happened
inside the others so we're gonna set
this dot on navigator event dot bind and
now we can say that this so we're gonna
bind to this so now what I'm gonna do
it's I have my react native debugger so
now I can console lower here the even
like that okay oops and I make a typo
and now what I want you to see it's when
I'm gonna click here you see even I get
a type ID chimera in a type nav all
button press ok so now we can now make
use of that insane so saying if
even so if even that type equal and now
we want to make sure then this is a
navbar button press like that we're
going to check if eat that ID equal
camera so this is finally the same ideas
you put here we can say something so for
now I'm gonna say L oh well so now if I
click on it I get lol every time I click
on it okay so now what I can do
it's saying here this that prop that
navigator that show model I'm going to
show model on top of my screen and the
shoe model now gonna have the screen of
the Instagram clone we have create
create photo screen and where did I get
that it's from the index @ GS right
there okay and now here we're gonna see
we're gonna pass it a title of choose a
photo okay and we're gonna say an
animation tie of slide oh we want it
good from the bottom to the top okay so
now if I do this and I click so now
you're gonna see I'm going to clear you
see we get the the animation from the
bottom to the top to get that I think if
you change that to slide down now you're
gonna get that yeah looks like this way
but you see what I mean so now we have
the screen we need okay so now we can
start designing the screen but now what
we need sorry about that
what we need it's gonna be a new like a
new link add library for using the
camera roll so what I mean by that is
the react net save by default don't let
you use this so what you gonna do is
you're gonna go inside your library
inside Xcode and now you're gonna say
add file you're gonna go to your mobile
application no module you need to search
for react native after the search for
libraries
after that search for camera roll who
should be at the board
or if I solve by name I'm gonna write
there and I'm gonna put the project okay
after that what I need to do is I'm
gonna click on - mmm clone I'm gonna go
here inside the build phase link binary
with libraries I'm gonna click on the
plus I'm gonna search for camera right
there I'm gonna click Add after I go
back to you general right there the
general but open that open you
info.plist and now you need to click
here on the plus search for privacy
- thing it's camera
no it's Mosby yeah I think it's camera
camera user's description photo library
sorry photo libraries age and now here
you see whatever the name you want
whatever them the text you want showing
the alert so I'm going to say we need to
access your image so whatever you want
to put that okay and now because of this
we're gonna be run Xcode
you run the project should be good don't
know why I get it done here okay
and now inside my project you know I'm
gonna have access to camera roll okay
and now be ready to write some code cuz
we're gonna get a lot here so now what
we gonna do it's first thing I'm going
to show you what happened with this
camera rolls I'm gonna create a function
called get photo and this function is
going to be an asynchronous function why
it's because when you get the photo this
is a promises okay from the camera rules
camera roll have the gear photo here
we're gonna say first and now this first
ask you how many photo you want so I'm
gonna say max image or max photos I'm
gonna say 20 I want to get 20 photo
first
and we're gonna do some kind of
pagination so that's why so I'm gonna
pass the mass photo here and I'm gonna
see they want you to add an after okay
so we're gonna get this after from here
and because we're gonna have nothing for
now you're gonna get undefined and now
inside the component in mouth we're
gonna call this get photo right there
okay and I'm gonna control log for you
the rest
so now if I show you now on this what
we're gonna do
it's now if I open this one now I get
this as a race okay I get res it's an
object we're now have some page info in
an edge in an edge each edge I have is
node and a node at an image where you
have the file name and the you are here
so that you are is what you can show in
the file name so I was playing with that
and I found in the image the file name
it's a really good one to be like kind
of a unique so we're gonna use this one
for now to get unique but also in the
edge you have page info where you have n
cursor as next page and add a start
cursor okay so we're gonna use it for
the pagination after that okay so now
what we're gonna do it's inside the stay
we're gonna start with the image of an
empty string and now finally what we
want it's one this one it's done we're
gonna save this that said stay image
equal to dot dot does that stay that
image because we want to use it with the
pagination that's what we do this year
and now here we're gonna say we has the
edge because remember the edge it's an
array so you see okay so now I have that
I'm gonna keep it for that okay now what
I want is I want to create here my
render item I'm gonna pass inside my
flat leus okay or if you receive your
item so what I'm gonna do it's here
I'm gonna return a view or now and
inside this view I'm gonna also need the
image
so inside that I'm gonna put the image
and now the image you're gonna have a
source of you re equal to item that node
the image that you re the thing I've
just show you and we're gonna pass it a
style of email up an image and the view
another style of image wrapper okay so
now we're going to create that with the
style sheet image wrapper and image
image it's pretty easy flex off one
that's it
but for an image wrapper right now what
I'm going to do really simple for now
with off I don't know like a 100 and the
ID of 100 okay like that and now I'm
gonna ear take my flat list okay and now
I can replace replace my view here put
my flat list and now here you say data
equal to this that state that image
render item we're gonna set this that
render item key instructor forgetting
the each key unique we're gonna create a
function so key instructor I'm gonna be
right down and this one oops this one's
going to be pretty easy there's going to
be item here that node that image that
file name okay just to get something
unique
and now what I'm gonna do is I'm gonna
surely have a rant loading because this
is an asynchronous call so what I'm
gonna do it's here I'm gonna call it if
this that state that loading so we're
gonna create it
one sec this that state that loading is
gonna be felt by default and now this
one we're gonna return a view with here
an activity indicator like that okay and
all these you can add a style of loading
rather this is loading rapper when I
came inside the style she really simple
flex one just t5 contain centaur and a
line item Center okay like that and
we're gonna start it finally inside this
one instead in synchrony so we can say
set state loading true when it start and
when it's done here we say loading its
for now okay so now if I do this and I
click here I get cannot read property
image
okay I'll make a mistake somewhere in
mange did that stay that image at least
did I get my rels looks like no so what
I pan my loading here loading true if
this is the loading so no it looks like
it's okay item that no that in my this
is one is doing I tend that no that
image you worry it's cool something is
wrong right now so okay I know it's
because this is an aviary
so here what happened is we get an array
of an aviary inside that so now if I do
this now we get the element and now you
see we get all the image we have so
because of this is the u.s. one so this
is the image well before now looks all
that don't looks whatever we want here
okay so all we can do this now we're
gonna do some kind of map and we're
gonna do two variable here we're gonna
count one called padding 17 and we're
gonna have one called margin voting is
between each of them and we're gonna sit
down okay now what we're going to do
it's this image wrapper okay what are we
gonna do it's even a de Wit with the
dimensional so the dimension has you
know take a dimension of the of the the
screen so you can get that by doing cons
with equal dimension that get and now
here you get windows okay like that so
now what we're gonna say for the width
is going to be equal to the width I'm
gonna put that in parentheses
there - the padding we are multiple by
two minus the margin multiple by 2/3
because we're gonna have three
lmn each side ok ok so know what I say
pretty strange I never get this one
further before I don't know why I get
this error now with ok so for now this
one okay and for the ight we're gonna do
the same thing as this one okay so the
same thing because it's gonna have the
same side
all right if I save this one and i
refresh my screen now you see this is
the size we want but now we don't really
have margin because we need to put it
there so first thing also we're gonna
add some kind of border radius because I
want it to be a bit not square I'm gonna
say margin right margin and I'm gonna
say margin left of merging all you can
do this by saying merging or recent oh I
know you get it in one shot
no if you do this now you're gonna get
the margin okay okay and some air but
now what we need to do it here we're
gonna say none of color on and now we're
gonna put tweak so by doing this now the
Flatley is gonna take each nml and now
they gotta take the space from here okay
but now what i want i would like to have
it's from the top to the bottom so i'm
gonna say more jane vertical and for
this one I'm gonna is 2.5 percent the
screen how long if I do this this is
what was done now we get this they have
the same size for both for both plates
okay now well we need it's the thing
it's yeah I mean
okay oops sorry so now we have that we
don't need the tics anymore and no okay
now what I would like it's when I click
on one of my photo to select this photo
okay because right now I don't select
any photo so what I'm gonna do
it's ear inside that I'm gonna
console.log my state stay equal this
that stay and this one I'm going to
create a selected state who's going to
be nude by default so here I'm going to
put the image the user select because he
can just finally upload just one by
default I just want I mean that more and
more at the time so now what are we
gonna do it's we got a great ear a
function called unselect gonna see on
select finally we're gonna receive an
item and what are you gonna do you just
set state select n to be the item we
have oh you can just say select it like
that and remove it you're gonna be bit
cleaner now this function gonna get
caught and because this is a view we
cannot do nothing with that so we're
gonna need to import the library to shut
touchable Y now we can wrap new you with
that and sing feedback of opacity like
that and now we're gonna say up inside
an on press d is that on select and we
pass it the item the full item so the
item we have right there item is not
define oops I make a mistake wasn't that
ear sorry here sorry about that
touchable
feedback opacity and on press that's why
we have a yes lien okay so now here
we're gonna have this thing and now what
I'm gonna run out we have that state
here and we have select new and now when
I click on one I get the one I select
okay perfect so now we can make use of
that to check to make some opacity over
it so we're gonna make use of the
position:absolute the what we're gonna
end the lab its first thing we're gonna
create a variable called is selected so
we know if the this item is selected
we're gonna check that by doing this
that stay that select there it's not new
anymore
and this that stay that selected the
note that image that fine name equal the
item the node the image that fine name
finally just like that so what we see
it's because if you don't do this one
here you're gonna get notice undefined
because it's going to be undefined
because it's not by default so now you
need to make sure that if this that say
that select is there and note that image
that finally equal that that means this
one's gonna be true okay so now what we
can do it's also adding a disabled we
don't want a user to collect again
online image if you have already
selected okay so now if I click on this
one okay nothing I make a mistake
disable this aside know
think I'm good here I shall have it
disabled oh I know I know you know why
it's now it's because of the we pass it
per component inside the screen okay so
now what we need to do it's inside the
flat list we're gonna need to add extra
data inputting that does that state that
does that sit on it okay
in the extra data a pen finally you just
say finally the flat list you remember
when you get new data and we're gonna
say this that's the this that's it
because that can be select or new item
and now if I click and I reek lick you
see now I know it don't work okay so now
this is the extra yeah so now we can
make use of this variable to create a
new view so we're gonna see is select n
and now if we're gonna have a view and
this you're gonna have a style of image
over okay this image revolves going to
be pretty simple the way we're gonna
handle that is by saying that this image
over add a position:absolute so now you
need to understand and the
position:absolute is gonna go inside
this touchable inside esperen right
there okay so now you can say top of
zero right of zero pattern of zero and
left of zero like that okay and now
we're gonna have a border radius of
three to match up its parent because now
remember gonna take zero zero so we're
gonna go over the border and for now I'm
gonna put a background color of real
just for now to see if that work okay so
now if I do this and I click on one you
see so now we know now we select this
element okay
I think the one I read is I need to
mention two on my image because looks
like the image don't yeah
so now what I'm gonna do is I'm gonna
change that with your rgba I'm gonna say
zero zero zero and zero point five so
now when I'm gonna select one it's gonna
be just a bit more dark you see so now
we know which one the user I select now
I would like to have this this you see
the pagination working so this is what
we're gonna do we're going to create a
new function called on and very rich
okay this on any rich here what I'm
gonna do you're gonna first thing check
if the inside the res you're going to
see here inside the rest we have an
information inside the page info we have
as next page so that just me that just
mean if we take the LM n you have put
inside the rare so the first 20 do we
have another photo after 20 so example
if you say 3 we're gonna have as next
true if we have 5 photo because we still
have two other photo you see what I mean
so this aspect we're gonna need to save
it we're gonna say as next page and
we're gonna say false by default okay
and now what we're gonna do it's when we
get the rest yeah we're gonna say as
next page equal to the read that page
info that add a page in food that sorry
as next page okay and now also what we
can do it's now we're gonna save the end
cursor so the end cursor is the last
thing about it it's almost like an ID or
something like that something unique on
the photo you just say finally this is
the last photo so if I say the last one
it's for when you get a short we're
gonna search after the number four so
here we can say and cursor and by
default we're gonna have an empty string
and now we're gonna see n cursor equal
to e as that page info dot and cursor
okay and now we can add that to this on
and reach we're gonna call this function
on and reach and this function on n
which is going to be something really
simple we're gonna call the get photo
and we're gonna call that this that stay
the end cursor okay
but now looks what's gonna happen if I
do this I'm going to open that and now
you see what happened now I make my app
crashing because of what is because
first thing the anchors are worn again
and recheck again all the image you we
get before and this is not good because
the thing is we have no next page
remember if I go to the top rest pay as
next page it's false so now what we can
do
it's finally saying here if these that
state that as next page we're gonna call
it okay so now just by doing this we're
gonna change it it's gonna work now
because remember you keep it as false
and now this won't give get it to false
also okay so now we just make sure that
if we don't have any other photo we
don't gonna get it there and also what I
would like is you see have this loading
this loading area right now we don't sit
because it's pretty quick but I will not
want to see this loading after just the
first query after the first query I
don't want to other ruling anymore so
what we can do its ears set up a first
query variable called true by default so
it's gonna be true by default so I mean
the fish curry it's the first one you
get and now you will see if this that
state that first query we're gonna add
this set state loading inside that okay
and now we just say after that after we
end this that's the air saying first
query now it's false
okay so now we can select a photo and we
can after that go on the next video
where we got what we're gonna do it's
when we're gonna click Next ear to ear
we're gonna have a button up here right
there we're gonna see next we're gonna
click on it and we're gonna get into the
page where we can add in a caption and
after that we're gonna push to the to
the server the new photo of the user so
I hope you enjoyed this episode again
the codes going to be in my repo in the
description hope you have a good day
everyone bye</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>