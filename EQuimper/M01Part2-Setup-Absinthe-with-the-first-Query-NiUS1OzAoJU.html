<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>M01-Part2: Setup Absinthe with the first Query | Coder Coacher - Coaching Coders</title><meta content="M01-Part2: Setup Absinthe with the first Query - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/EQuimper/">EQuimper</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>M01-Part2: Setup Absinthe with the first Query</b></h2><h5 class="post__date">2018-01-16</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/NiUS1OzAoJU" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">welcome to this port the two of this
first milestone so like ice in the last
video we're gonna start by putting the
app sign library to to make it work with
left you well so I can show you here
inside the absent library so era as the
X dot it's almost like the NPM dark she
came from known GS they had the
installation so here they say to add the
add sign over 1.4 and we're gonna do
this so go inside you mix yeah II it's
yes so we add trend show this so the
speaker as us we're gonna add app sign
but also like they say here you want to
read the plot like some people are going
to need to add the plug to make it work
with their like the HTTP stuff and also
we're going to add another one we're
gonna make use in later in the video so
we can si AB sign to so app
sign on the scope plug and we're gonna
say again 1.4 so almost the same ear
version and we're gonna also add AB sine
T AK to because we're going to need that
later and we're gonna say it's a bigger
or equal so because I use a phone so
here at phone so that's where I get that
but I just want it to be bigger than
zero and now here what I'm gonna do is
I'm gonna just open my terminal and I'm
gonna run mix yep
yeah
when I get everything and I think I
always do it I do mix some pie so if I'm
gonna get there to complain from the
library inside my Visual Studio code if
I compile so you're gonna really help me
to type faster so we have set up we have
put the library here and now we add it
inside the depths right there so now one
thing we're going to start to do
it's we're gonna go inside the router so
the router it's right there inside the
Instagram where router and this is where
we're gonna just set up the like the end
point of the graph QL so in what we're
gonna do is we're gonna remove the
Instagram where we don't need that and
what you're gonna start right there and
we're gonna sit for word and we're gonna
say slash graph you will and we're gonna
say app sign and look at the to complain
I get because I did makes compile and
I'm gonna say plug and I'm gonna say
schema I'm gonna be equal to something I
didn't create yet but that's gonna be
Instagram that schema and after that I'm
gonna just add something I'm gonna make
huge inside a div only their environment
so you're gonna make use of the remix
and environment if it's equal to death
so to the atom there and here what we're
gonna do is we're gonna do the sour
graphic UL so just for having the
graticule tool like we did in the
twitter tutorial I'm gonna say AB sign
that plug the graphic you all right
there and I'm gonna say again the schema
it's gonna be again the same thing but
we didn't reinstall we didn't create the
schema yet so why not start right there
so inside you Instagram mode again
create a new file and call that schema
that px this one gonna be pretty simple
is going to be a module where I'm going
to call that Instagram where that's
tema and here we need to just so we're
gonna make use of the app sign that
schema
that's in that schema library by the new
library but all the packaged toolkit and
stuff like that they are and after that
year this is where everything starts
all the magic so the Curia
so like I told you again in the first
video in December you also need to know
available graph you know world without
work is we have to thing we have curry
and we have mutation three or everything
about getting stuff you can have that
for like a searching you can have that
for getting a list you can have that for
gaining I don't know like a whatever you
want in a mutation we're gonna make use
of that when we want to eat it update
create we want to mutate the data thing
about disk so this is currently all
we're gonna work with we ful ear it's
we're gonna have like to kind of block
we're gonna have the Kree block and
we're gonna have also have the mutation
block for now we're gonna just work with
a query and we're gonna make just the
like really really simple for us so all
we're gonna start with them it's finally
we need to think about all the
applications do not work what we add
first it's this application is Instagram
and the first thing in the business
logic we need let it be to showing
follow we need to show photo this is
that I mean it's showing follow you show
follow
you don't like follow people follow you
because they want to see more for you
and people come on on your photo and
stuff like this so this is all we gonna
start with this application so right
there inside my Instagram
I'm gonna run my first January
regenerator of Phoenix so for those who
came from no js' be ready to be mind
blowing I hope that do stuff so I'm
gonna run the command mix okay next the
gem context post with uppercase P so
that's going to be the name of my
contacts after that I want to create
like a table for my database a photo and
that's gonna be here with the name and
we can have an image URL is gonna be a
string and I captions gonna be a string
so the image URL is going to be the
image URL so for showing the photo and
the caption is going to be the little
text we see at the bottom of each image
in the Instagram yeah so I'm gonna run
the comment right there and dark now
look at everything we got title to my
project now and I open Instagram here
I've now my shirts contacts hopes
so now inside this pose f25 first fight
is the follow so here is the schema of
the photo so here I mean it's the I mean
it's the schema so it's a way for for
you to just module your object getting
from your D being actuator ass so here
you have your photo and now you're all
the field so think about that for those
coming again from muji like an object
and here it's you keep and you know it's
a caption in the string image or else a
string and also we can add the time stem
will give you the insert add in the
update app so why we want the text and
it's because first thing maybe we want
to like order all the photo to be
descendants so we want to get the dad s1
at the top and also maybe because we
want to show like six hours ago or
something like that and now here we add
a change set it's almost like all the
logic open before you create update
something so example we're gonna say
we're gonna cast with the attribute we
want to make to add the image URL
capture image URL in the caption come
inning and we want to make sure then we
have an image URL in the caption but
we're gonna remove the caption because
maybe someone don't want to wear a
caption so I'm gonna remove it from my
valide require remember value they'll
require so you can put your mother here
but I did that one or more fill our
present in the change set so if you
don't have this field
if Actos Pictou is the ORM I'm gonna
make sure that this thing cannot be
saved in the DB so this way you're gonna
normalize you database gonna make sure
them not normalize but I I think yes I
mean you want to make sure finally you
that abeyance is gonna loops always the
same
remember it's not like MongoDB where you
have like a schema-less stuff it's more
like you finally it's stable so but now
here as you can see in them by private
folder I have my migration
a refresh in my migration and have it
right there so if it's gonna be finally
the migration winner runs for post-grad
and now as you can see we just finally
create a migration creat photos so they
just take some really the photos and
name for the table and they just put
create in front of it
they create a table photo so that's why
we put the lower case when we did this
thing right there
and we say add image URL and caption so
right there the cap retake finally what
we've done and they just put it right
there and they put a time step that's a
liquid a table that's it pause so now I
can create my table I can run mix egg to
that my gray this is all you're gonna
run your migration and I'm gonna open a
tool called plastic oh oh inside this
one I'm gonna show you then I have my
Instagram there and now look I have my
photo we just create together I'm max
skimmer migration so I have my migration
right there we just create but also I
have my photo and all look at the ID
which by default is their image URL
capture insert app and update app and
all this feel or what I have right there
and now the last file who have been
created is this pose right now look at
all that so we have 104 line of code 9
is maybe 50 60 line of code the arm like
more like coming so like this and now we
have already something to start and why
I make use of the generator here because
first thing that creeps from a folder
that quit for me file and my migration
in one shop but also that just give you
like kind of an example all that gonna
looks all that gonna looks like when are
we going to work
and look at the code I mean it's pretty
awesome
I'll simple I can this is and I kind of
really like this folder structure
because you know then all your legit
gonna be there in there where it's gonna
be just an interface to show this stuff
here to the client so don't worry at the
end of this project you're going to
really love all Phoenix work so if they
just create the crowd operation so we
have a list of photos for getting all
the photo we have get one photo by other
ID we have also create a photo with the
attribute we add the updated photo but
we're gonna update a photo with the new
attribute and we have delete photo and
here we have the change photo pottering
for tracking photo change or you see you
have everything here who's going to be
just for helping you
all the comment I like to keep the
comment but sometime we're gonna just
add their own for us so now what do you
think about if we make the first we ask
you will request to getting stuff like
that
so this is what we're gonna do and
you're gonna see this is this is so
simple so first thing we're gonna do it
since I'm inside the Instagram watch I'm
going to set the Instagram where I'm
going to create two folder one when I be
called schemer and the second one's
going to be called visa Loire
you
inside the schema the way I like to work
it's to create the type about the
context you can see you can set codes
what eye contact and I'm going to just
put type in front of it so here we can
adjust finally create the object type of
the thing we're going to make use of in
their applications so first thing we're
gonna create when I create module here
inside Graham where that schema that
post with the s-type with the texts here
after that we're going to make use of
the app sign that schema notation with
the module contains all the macro used
to the virtual type and now everyone's
begin a 6 we're going to create an
object called photo like that and now
the way I'm gonna work it's we're gonna
start always at the top with the field
we all with you we're gonna use a lot
it's gonna be the ID
it's gonna be an owner ID so here what
I've just done again coming from node.js
here it's pretty simple what did that do
here just say finally we're gonna create
a type of photo we're gonna have a fog
feel ID it's impossible to be new so
it's not new and that's going to be type
of ID because remember in graphic you
well this is an ID card that exists so
that we're gonna say film image URL or
we're gonna say no new string and why I
say no no it's because if you remember
when I did in my photo I say validate
require so we make sure that when we
gonna save the image here the photo
we're gonna add a string image URL
string for sure so I'm going to do a
same for the caption but this one's
gonna be on a string because we don't
make sure gonna exist yes that I'm gonna
just put with a space between bow all
the time stamp stuff and they are not
new so they're gonna exist and I'm
caught on video just see they are string
I'm going to change that later for
you a UTC date but yet make use of this
string so now we just create the first
type for the application so now what I'm
going to make you what I'm gonna do it's
now we need to create the first resolver
to get the despot and the first we're
gonna work the bill it's gonna be the
getting a list of photo so we're gonna
create inside a result work folder holds
that e^x this one's gonna be the first
resolve voluminous it's gonna be like a
five minute code I think Instagram web
that resolve our the Pope and now here
we're gonna just see def photo photo and
now here its elixir and our resolver
work gonna work gonna always receive
three or you man but here for now we
don't gonna need one so we're gonna just
say underscore football for all three
because we don't need them and now look
what I'm gonna do I'm gonna open here a
to pull right there and I'm gonna say
Instagram
dot post the list photo and now this
this photo is right there it's the least
photo from my contact so I don't even
need to cut this part so the repo all
follow gave you all the photo you are
and we say just ear this is what you
have to Ernie you need to receive like
an OK and the code you need also so this
is what we've done right there nothing
more I mean it's pretty simple here so
now the only thing we need to do still
do it's inside the option a schema we're
gonna see alas Instagram the resolver
we're gonna alias the resolver right
there so we're gonna add all the poles
and everything so now we it's gonna be
just more easier for us to work with the
we don't need to say Instagram that we
solver that bloodbag after that so now
here I'm gonna say film photo I'm gonna
be a list off so I never ate off photo
and I'm gonna set Duke and now here the
only thing I need to do it's like a
result resolved are you see I get the
result autocomplete because now I is
this thing the post the photo the only
thing we have to gain and I want the
version with three argument and we have
fastened 0 argument but
and now I can also add a description by
doing this and I'm going to say get this
photo and now I run my mix Phoenix the
server will run my server
the mirror and I know why you can see
the arrow West
type must exist in reference photo don't
define in schema so no anything I need
to do is I need to import my type
by doing import type but the underscore
module the post type
so the merger gonna take schemas are you
gonna go inside the schema folder and
you're gonna take that at the post type
so finally you see instagrams chemulpo
start and then just instagram schema so
thing it sounds almost like like that
but you just put this cleaner and now if
I run it
okay
ah it's on the phone I get the mower
oops its Instagram web
you
perfect it's like this it's okay and now
I'm going to open graphic QL again I'm
gonna put the link in the description
for the story if you don't add it yeah
I'm gonna refresh go to your local old
4,000 API graph QL and now if I open the
dogs look what I've got
I get a root query and now I get feel I
have my first query with this thing
right there so photos and I get an
aerial photo and you see I have my
description here get me a photo
should I click on that now I know I can
get this stock I can get caption ID
image URL and stuff like this so you
open curly braket you run photo without
to complete you see id gentle image or
run caption example boom but we get
nothing we get an NGO because again if
we show that video we have nothing so
this is what we're gonna do in the next
video we're gonna make use of mug data
and we're gonna see the first data just
to at least seen something like that I
again I hope you enjoy it and we talk in
the next video
have a good 91 by</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>