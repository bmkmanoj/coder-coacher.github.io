<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Build a Twitter Clone with Apollo Graphql &amp; React-Native - Part: 11 | Coder Coacher - Coaching Coders</title><meta content="Build a Twitter Clone with Apollo Graphql &amp; React-Native - Part: 11 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/EQuimper/">EQuimper</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Build a Twitter Clone with Apollo Graphql &amp; React-Native - Part: 11</b></h2><h5 class="post__date">2017-08-10</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Ttvt3JhzGQ4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello if you want time to jump on logic
of the application I hope you enjoyed
the tutorial right now because what
we're going to do for the next tutorial
is going to be really important to
understand and this is our I I mean
we're going to need to use it in every
kind of application almost so because if
we kind of application as almost
application so this is what we're gonna
do and so my plan for today is first
thing we need to create the mutation so
like we did here when graphical when we
do the sign up so this thing everything
we did there after that we need to plug
that to the component we create the
signup form I'm going to show you or you
can easily plug a mutation because only
thing we've seen right now was a Curie
with pretty much with pretty much more
easy
and so yeah so we're gonna do this and
after that I'm gonna install me that
Slugger why that is because remember
that what I told you at the beginning is
Apollo use we don't be on the scene so
we can make use of without soldier we're
going to let us see the tree in the
console so I really love it Plus that's
going to help us to be ball sometimes
after that we're going to create action
on widows for the logging to change the
boolean is a tactical we create the last
time for just stop showing this
Navigator and show the real one and
after that are we going to jump on the
facing storage so this is the way to
save and look at sight order the token
inside the storage so the user can still
log and so think about eating storages
as the local storage like we did in the
web for the mobile side so time to come
on it
so what we going to do first thing be
sure then you have your server running
your application running with the expo
like that after that make sure we can
any trouble Mongo one time in this exam
and after that just open the reactive
debugger by running your debug if you
have used my code on the path
this is what we're going to do so first
thing before we're going to do it with
imitation we jump on the mutational
going to create a folder mutation right
there in the graph you'll I'm going to
call that fine up this is a mutation
sign up so here we need to use adequate
gql function here finally to to get them
patient like that so now and I remember
this is back tip because we're going to
need is variable and by that so now what
we going to need to do is when we check
out the career we did that was easy well
just actually like that but as you can
see inside recipe well we have mutations
like this and when you do a mutation
you'll have access to a three variables
and now you do this is by doing this I
put put mutation first column acacia
like we did here so will be different
sign up
this is by finality the name I give so
you're going to set the data so we did
another turn book here what to do if
this is all you can put variable so I'm
gonna but you're also full name we're
going to be a string and I need that
after that I'm going to add a variable
email
email sorry email we're going to be a
string and I'm going to need this one
too so that we're going to have password
going to be a string and we need that
I'm going to also add user name with the
string
and I need dear
and finally we're going to have another
Tower
so string and I'm going to add this like
that I know I didn't this I'm going to
do this and I'm going to show you all we
can turn that off so now we're going to
just send a cigarette oh I just show you
all together from your Twitter because
we're going to bandage that with s3
bucket later in this tutorial
so now this is are we going to begin a
designer so you just say the same stuff
for for name another angle equals the
variable for name because remember this
thing become a variable finally and now
you can do the same for everything so
email equal understand email after that
we have password dollar sign password
after that we have username dollar sign
username and suddenly we have a back our
dollar sign it that's all
and now at the end what we want to we
can eat the program only like we did
here okay
when I save it I'm going to run prettier
because it's really long so I think it's
just much cleaner to read that like that
so perfect this is the first thing we
asked so now we need to plug this
to the component so we're going to make
use of the signup form
are we plugged up by importing right
there the graphic just import it this is
something I really like it to import the
package first and after that you can
look at the library you are inside so if
I such graphical I can have it after
that you need to import use edumacation
I'm gonna call that sign a mutation like
I saw you with the Korean everything
about you I feel like you have your
properties of that make more sense for
me here
the jump at the bottom is put graphic ul
like that and you put sign up mutation
and now
you were your component with that
what I'm going to do is I'm going to
deep open the debug by doing command D
debugging mode please look at reacting
to debugger as you know I really like to
show you everything of everything so
here if we search for sign up for now
sign up for now then I came with this
props now because you we wrapped it with
graphical and inside of mutate that's
going to be all we can finally call the
one we are
so so we can do this by doing this that
serve that mutate so now what we can do
for that is we're going to create a
function call when we click on the
button
the button here comes here so what are
we going to do I'll go there and I'm
going to sit on signup breath it's going
to be an even function
like that
why because we can have premises and
place to lose money
this click here going to be called on
the on press on the button consent
is that
on finest craft
and now what we're going to do is T
we're going to solve the mutation all we
can do this if now we need to ask this
value coming in from that site so we can
add a structuring that first so I'm
going to take equality that same so now
I'm going to be structuring the full
name the email just password and the
user name after that what I'm going to
do is I'm going to go to the top right
after the color like you remember we
create a variable inside the constant
file where we put the Twitter URL just
take this one and now your what we're
going to do is begin a siscon ad vitur
equals theta that's all
now here we can create finally
the mutation and the mutation going to
give us back an object and inside this
object we can add data what we can do
for single X I'm going to crunch data
equal this that's crops
that Mutai so the thing I just show you
inside the let's eat a burger when we
look at form but because it's not open
when you open it because the
component-wise that mouth you take you
see so now what I can do it is a certain
you taste and all these things they can
object inside that and one of the object
is variable this variable is an object
so in what you can do is just put cool
name email password username and add at
all
so this is all the variable here or the
variable we passed in your finalist
and this is what
or limitations or me that's nothing more
what we can do here is that if
I'm going to fix something like that up
now if that works we can exceed the data
here after a moment longer like it on my
guitar I'm going to enter a good for
nine you see
oh maybe though I'm gonna I'm gonna say
I'm going by name is hello world yes as
a beautiful name ello
well the ear we have we see the thing I
don't want to be capitalized I'm going
to change that right after that email
left on password one two three and I'm
going to say username as a low will
three so now if I click sign up look
what's another
and now I get an error and I get
something right
because I think that work
because Michaels my company's my arrow
well result is me here so now we get on
the phone so what happens I know when
that means is because it's a promises no
no I didn't did that for you to learn
that whether permissions I just make an
error here but we don't hold it here is
a president meets a promises and because
here I didn't say awake I promise this
where I'm not finished when I put the
volleyball on here so that's where I get
on the fine so now if I say back
now I'm going to create another one I'm
going to create John no
John know that gmail.com password one
two three and I'm going to say John Snow
user as a username and now we psychic
sign up boom after I check that amount
of time we get the subject so this is a
dollar so that add that sign up and
that's token so this tool can write
there is a token we need for the GWT
portion so as you remember we need to
add that in there others so we need to
manage that because we're going to need
to use it later so first thing we're
gonna change this gmail ear I don't want
to have my email with a text alized
letter so I'm going to just copy paste
to capsulize known since I my email I'm
gonna just test it to make sure that
workers I don't think people always put
capitalized letter email yes prepare for
that work now we need to save this token
inside the data that side of the sodium
inside the reason for which what we
going to do now we're going to try a
create a try-catch why is because I
think arrays it's a promises precinct
and also you can add an error so what we
can do now is we're going to jump at the
top inside the reactors package 9 5 0
I'm going to fit these things
sorry it's a little bitty billion
and now that work almost like we do with
the web first thing we're going to do it
our way these things arrays that set
item so as you can see set value for T
and call a callback of computation hello
along with an error if they are unique
so now I'm going to click on set I
damage and you see set item they ask you
to have a key a string in a value as a
sink with a callback promises so I just
show you that because I want you to
learn how to read your code and this
Ostrow code is awesome for that it's an
awesome
almost like an IDE so this way you have
access to the setup function and other
stuff like area we have access to the
flow so prototype and this is why we get
this thing for now we know we need the
key so they see what I'm going to get as
a key name I'm going to tweet our
YouTube loan that's going to be the name
I'm gonna put you I I think if you build
an app don't go with this kind of just
put the name of your application finally
and for me I put this a I don't know all
in English you say that but this a stop
here and now so it said it's like it's
like a a map so we have a key and a key
and a value so now here we can see the
value in angular sick data that's kind
of that's token because remember we have
the direct coming from now from here so
now I'm going to put this in this is in
storage and I can make use of it
so we're going to jump on that and now
just for now I'm going to true the error
if I have a never I'm going to through
the error so now I can when I log I put
this token in time I eat some service so
this is what we're going to do after
we're going to plug it to the middleware
of apples client but now we just like
look at that I'm going to just enter
really quick something you see we had no
validation for three people at B us for
the by in our package signup you work
now we get duplicate key error okay so
I've already someone with this username
maybe with my test so one six
you
you
one cannot be
maybe don't wipe because I remove the
console of my error sorry but it must be
here yeah and I click to time that's why
we get this thing
so you see like we don't have like my
user thing about that you are other user
of your app you see again okay what
happens you see like we wait and don't
want to add that so that's why we can
add alluding so first thing is we're
going to create a component loading I'm
going to just create a component losing
going to be a really easy component
who's going to be at the center of each
screen and what it's going to do you got
a drill finally be at the middle and
show the spinner of activity indicator
so if this is the iOS is going to be the
one with like the discretion it and if
this is angular that's going to be like
kind of the material one and we're going
to make it reasonable and we're going to
make it be able to be change is it
really important reacts at the top
import from reality activity indicator
after that import touch component we're
going to import the crawlers because
you're going to need colors
coming from useful folder in some sense
so now we're going to create extra roots
like I always do
you know a flex won't take the full face
of the screen just a crack on thing go
centaur from the left the right a
line-item I know it from the top to the
right and then items go from the left to
the right and that's it so I just want
to make sure it's going to be at the
mirror that I'm going to expose you for
a fitness function we're going to cau
loading I'm going to return group
with the activity indicator right inside
like that after that here we know a
contains the guitar I see it in big so
this name sorry my English ooh
here we have a access to a side and I
think despite we type here
we are access to small or large or one
number
so small as the ID of 20 large as Araya
36 we can access small and large or we
can just put a number but what I'm going
to do because I can say large here like
that but the thing is I wanna make I
want maybe like to use the same
components inside a a little portion of
my app so what I'm going to do
if you don't that's um what I'm going to
do there about the disappearing stuff
about like out this substring a variable
who is not already there look at my
video I'm going to push in the
description it's a video about this
operon where I talk about like 20 minute
about the sticks you can deal with that
and I think you really need to learn
this if you want to go further in
JavaScript with all the es6 stuff so
what are we going to do is i'm going to
color in fact this is what you know okay
prevent that's going to came from my
property but the thing is now it's easy
I can say Oh give me sighs give me color
but the thing is if I have nothing
what's good at it it was good at
anything like I think on what we can do
in it's like that then equal to color
that's primary so on to have the blue of
Twitter and sighs I'm going to say large
the thing about that is a desktop string
by doing this means you have access to
another objects to know from where the
substring that's what we do equal to the
bracket like that and now if I don't
pass any value the color is going to be
primary and pie is large if I put the
side of small the color than a six
firmly
the top of your file in China import
loading from component loading
we need to do some stand-up logic to
enter the loading spinner when the user
sign up because we use avoid eating away
this pretty much is pretty easy for boo
inside your set at the top at loading be
false by default after that when we
click on the sign up press I want the
set stage loading to be true so once you
click on the sign up press I should a
loading spinner right now before I do
any kind of post any kind of like change
after that right there now what I'm
going to do or now I'm going to say
return is that set stage
loading Oh and now because it's firming
system now wait stop your code at the
line for what they're going to pin it
okay I get a hold a spinner and you get
a cup in the set side and now the only
thing we need to do if if these that say
that loading so if loading is true we
want to be at
to show the loading component that's and
now time to see the magic
I'm right get start - name email
password username click on sign up
and you see we get the look the little
spinner for a small amount of time the
thing is remember that the server is
really quick because we are local oh
that don't going to be as quick in other
if you thought I'm going to show you all
you can like add a set timeout in your
server side we're going to let you
adding a bigger amount of time so
example we can say 500 milliseconds so
that's going to really strike a real
service
so this thing is done but now the thing
is yeah I want to log someone say in
here thing is about the app right now
it's just say we check out that is a
lotta cases fault if your attacks kit is
all I'm going to show you the screen so
what we can do and now it's we need to
change this reducer first thing I'm
going to do this is the token I don't
need to say that again that was my
mistake
but only we need to change the oil
trafficking for what I'm going to do is
I'm going to kill it I compare not the
component but the other photos are
action inside my source and I'm going to
call that the signature and finding as
why we deserve to user I poured a
function blow game who's going to take
nothing but to return a size log in this
is what we ducked clean you need to just
add type I'm going to go and read up and
I'm going to take K logging I want to
return
product safety tested as we are right
now but is a pattycake gonna be too now
maybe some of your going to ask yeah but
now I'm going to get the enclosed is
going to be another function we're going
to just start a paralyzed but we're
going to make a synchronous with of
other functions within a call as well as
being a tactically we've got a cow the
milk URI we're going to give us the
information of the user and this thing
is going to be in the next one but not
right now
so now we have that so long here at the
top I'm going to import the neck from
your feet up I'm going to go there I'm
going to import the logging function
from the action folder user
the thing is now these are confused
about all I can connect when the fuel is
already there I cannot do connect air
and and do like that so what we can do
so if we go to Chrome and you go to
Apollo data if you search at the bottom
as a fun pose right there negative
exponent X compose function so that's
going to give us the pattern for reduce
a number of reactiveness so look at that
if the use would be IP does in the
example so do you some polls where they
are they curious the other mutation in
and now they are the fennec right there
so this is what we're going to do some
polls already billions react a follow to
go there at the top react Apollo for the
coma from post
and now this is all we brought the
bottom
krump Oh put you
think that's like that and now you need
that right there before don't wrap the
signup form just like that so now this
is supposed to look something like that
if you follow me now we're going to put
a comma
we're going to connect
we don't need to have a map stage props
but I'm going to use logging like that
why I'm going to use it again it's the
way this way don't need to do there's a
probe that they start and put the
logging this will again become with the
dispatch so you get bind to the besides
so now what I can do it's right there
I'm going to remove this as side with
the beaker now what I'm going to do is
I'm gonna return yes that drops the
logging factor so activity is working
if we became involved in
the logging but now what I'm going to do
because these things again a premises
and I can crash my app I'm going to put
that inside my Troy sketch because
remember to attach you can put a lot of
code in fact that is if one of the code
crash we're going to get that in the
error so if everything go right
we cannot be long
time to test so I'm going to add the
math start Ned Stark email at song
password as Ned Stark and now I'm going
to click on the game so what I want you
to see too is the debugger so now look
in this state here now you get that it
is fall and not when I explain a click
boom you see that one happen
is the route the deduction gets health
apple imitation you get to dialoguing
because I was done and now we are at the
cake
it's artists to the deduction here I
want the auctioneer and we can add that
in to line of code well it's going to be
to install a package called beyond as
video sugar inside them differently so
we remember that leaf
inside your store
for from
relax vulgar yep the library code create
over
you
and now in my middleware I'm going to
put my create loader we need to be a
function
like that
Jonathan again sorry if you think this
is a long video and don't like that just
want to be make sure you understand
everything and so here just because we
know that's going to work I'm going to
put Pat for like that and something like
that and now look at the action we're
gonna get the action right there
that's why I really love this package
boom we get everything remaining solid
or are you guys saying that refreshes
and I'm not anymore why I mean you put
that in there in storage why that don't
change nothing because now we need to do
sign up an if statement at the beginning
of the application and if the user is
logged with this by using the even serve
the the token so what we're going to do
for this portion is we're going to need
to do inside AB that gf
this is where the upstart
the dot import from react Nasir
he is encouraged
that
auctioneer calls
check if program is gonna be anything
function system 26 are a 10 mm around
the notorious
after that a what I'm going to do is I'm
going to come to an equal our way is in
storage the Getae TM and now here you
just need to pack the string at the same
string you put inside your signup form
so that was this one yet
oh good things right
we're going to get that as a string okay
talking any be there and now we can put
it together it's not new why I don't do
this like that because I want it to be
like if it's undefined too if I do this
like that it need to be new but if I do
this like this it can be new Laurent the
fine I'm going to now I'm going to take
my store because now I don't have access
to the Senate because the connect go
inside
after the provider but I'm going to call
my father this patch and I'm going to
dispatch the size plugins
the function we get all what we can do
is you like it much more we can import
logging from
source action user and right there we
can do load
like that so if we had a tool can we get
a power log in and out if I'm going to
stay here
don't work why because we need to call
that so I can call that inside my
company did mouth if that's checked okay
so Indian Mound is happened when the
component mouths all what we can do is
call that inside the will mouth before
the components but the thing about that
is now you can have something strange
you see again what is that what is that
you need to think about that right there
I'm going to research her for the last
time and loop
the thing is
if anything it is synchronous and the
thing is we show something before we
finish the other thing all we can manage
that is exposed make the life movie if
we go to export at i/o
man and VM
I'm going to search your uploaded react
component that'll expose people a
ballooning thing is the first and only
component renderer in your app when it's
removed a loading screen with is a brand
new app will be visible looks pretty
nice so what we can do before long panel
is that going to beat this loading scene
arcs you see this Ludington are going to
say there
until we finish off while we do import
from Expo
uploading
and now we need to other way to know if
the app is loading for all we can do
this is by PSA app is really by default
going to be false that is not really at
the beginning not really but now what we
can do is when the soda fetches done
right there
after everything here I'm going to do
the exercise app is really now become
true now like I show you before we can
do it is
but this has states that this video is
ready with false return
rap
Lodi I got
now if I say look now
you see we take a bit more time because
you need to check as the app in the
totals but now did you see awesome is
that now the app done we don't see the
flicker screen before I look boom and
now we get the own pressure but now the
thing is we have an attack ticket I mean
you can attest that go in your code go
to your server go to code open with a
visual studio code or whatever Adam was
something like that and now we put
require of be back
by faith to the screen
and all
not taking offense why
our unit to rise boom right there time
to drop on the middle wire and this is
the last thing for today don't worry
about that
it's going to be really really simple so
what happened is we don't put that in
the headers of the Apollo so we can do
this we're going to do always going to
do that out in the salt because we need
the net for interface network interface
as a middle where we can put middle word
in network interface and this is a
narrow way of object and one of the
video where we're going to put going to
be using one where I'm going to apply me
Delaware
direct and next of the requests and
finally the the comeback now you whether
unit is if we have no read that options
the others
I'm going to create a brand new read up
show the others and the object exactly
now I'm going to get an error if they
know paragraph I'm going to get some of
that because I don't want this thing
right now so just copy that put es thing
disabled at the top and paper
to that what we're going to do here
we're going to put a triceps while I'm
going to if we have an error and you
know I can only finish cooking turn next
because is going to be next
again now what I can make use it again
my famous is in storage right there now
what I can do here is see like we did on
the other one so I'm going to go back to
add that here copy face this line create
face of there
if Tolkien is not new
I'm going to direct the option the other
is that optimization
equal who can our new look okay
because open like that and if it's new
Phil I'm going to seek milk
like that
so I'm going to try again
oh my god I think my clone might buy
cocaine we have already but now I'm
you're going to say something else now
token it's not valid why because as you
remember we need to have bearer in front
of this you put back yep put so again
inside cdbrac here and now this foot
bearer and now if I do this
both
and I don't care we do this
boom now we work we add add to ten in
the other and the back end no all time
user
it'll be always do the user find one so
we know the user the real one
so that works this is what we want
and now just for showing you because now
that don't make sense it's not what we
can do it's going to do an app it's
something we're going to do when we're
going to log out
it's remove item so here whether we sit
on the app start we're going to remove
the item so now that make that so now
this this tool can don't exist anymore
nation storage oh now you're going to
see we don't edit but I'm gonna log with
a better name so I'm gonna say Jane then
do Jane do email let's calm password 1 2
3 and then that writer usually you're
all well and it won't say ideas floating
down if you want to just do this way and
put your very corner you don't do LSU
Samuel that was when they crash or just
for showing you and you sure know is
still work I'm going to just jump back
to my app I'm going to remove the item
make sure we don't load purser I'm going
to guess item
was one little mistake
and now
net charge mad stars
yeah but female comm-pass oh one two
three and then four zero three and now
I'm going to click Sign Up
book now you work and now if i refresh
my screen began sa logging
one we're going to see all you can get
the information for the user so I mean
right now it's easy let me reload we
have the token but now I want to show
like the other Zillah later I want when
I do profile we get other information
and stuff like that and this is what
we're going to do so the next one I'm
going to just do the get me for adding
this other here for the avatar and that
was going to be a good one so I hope you
will enjoy this it isn't and we're going
to talk later
have a good day bye</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>