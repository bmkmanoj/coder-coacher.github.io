<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Build a Twitter Clone with Apollo Graphql &amp; React-Native - Part: 18 | Coder Coacher - Coaching Coders</title><meta content="Build a Twitter Clone with Apollo Graphql &amp; React-Native - Part: 18 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/EQuimper/">EQuimper</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Build a Twitter Clone with Apollo Graphql &amp; React-Native - Part: 18</b></h2><h5 class="post__date">2017-09-04</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/iAxeLDaU-ms" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello if you want or number 18 so when
we finish the last one we this is the
way we finish it it's like we can
further real and we can unravel real but
like you have like no user experience at
all what we got that it's because the
front end don't receive the boolean is
favorable
so the boolean we told each tweet if the
user authority am Anya so this is what
we're gonna do today so we're gonna do
this in here inside a get tweet so the
plan is finally we need to take up the
primary tweet document and we need to
take out out of that we can SM and what
we're gonna do it's after that we're
going to need to see if the favorite
we'd have the the editor tweet in
question so one singular tweet inside
the twit array if yes that means--it's
have it if not that mean if not it's not
so this is what we're gonna do so the
first thing we need to do is we make
sure we have the favorite tweet before
so just to make sure you understand I
mean its first thing we need sorry
first thing we need its we need to see
here then we have tree tweet and then we
have access to the ID so that's this is
what we're gonna match gonna see what I
mean in a moment so the first thing
we're gonna do is we're gonna see p1 for
premises number 1 and I'm gonna do my
tweet that sign create it right there
just like that no avoid you're gonna see
why looks like this after I'm gonna see
p2 it's going to be another premises I'm
gonna say favorite tweets that fine one
you can each choose I have one I'm gonna
say user ID equal to the user that
underscore ID we get from the context
right there that's it I'm gonna delete
that for now after that what I'm gonna
do is I'm gonna make use of a promises
that I'll move from a liquid a promises
I resolve with an area Frizzle when all
of the provide promises result or reject
when any promises will be J so here
canoe we can pass an array of promises
and they're gonna came
in the same order so because we put P 1
this is 3 we can take tweets and the
second one's going to be my favorites
like that really good to go right now so
what we're gonna do here is we're gonna
say we're gonna create a new variable
called tweets to Sam who's going to be
equal to treat that reduce in ear we're
going to finally create a function we're
going to start with an empty everybody
fault I know this is surely not that
best way to do this but for now we're
gonna manage it with this way you're
gonna see what I mean so reduce all we
do is work it's reduced take an
accumulation a previous value a cure
value so like an accumulation so the
first one is going to be the array we
have here and the second one we're gonna
say that's gonna be a tweet so a
singular tweet so now what we're gonna
do here is we're gonna say first thing
we're gonna need to have the tweet as a
JSON object because it don't came by
default we're gonna say tweet tweet that
jason to jason like that after that
we're gonna say if my favorite that
tweet so I mean this array here I've
read that tweet and I'm gonna use the
sum mu finale a function attack exit up
to 3 argument the method gonna stop if
we find one so that means you're gonna
stop if example the first value if the
thing we start you're gonna stop you
don't gonna go at the end it's not like
a for loop it's just like kind of not a
guard or like I go over until I get
something if not I'm gonna go over the m
and then we're gonna say we're gonna
have a tea for tweets I'm going to
succeed equal so we're going to check if
the tweet add the same three ID then so
one of the tweet at the same idea as the
tweet we have it from the one so this is
the each Twitter meaning from this one
here and now here what I'm gonna say
it's if it's that so that means if it's
there so I mean added captors
re for this
arrey that push I'm gonna say that the
TW so I'm gonna want to have all my
objects I'm gonna merge my tweet object
and I'm gonna also Evan value copies
favorite I'm gonna see to that's it
else I'm gonna say arey that push the
same value but my ears for real no it's
gonna be fault I don't have it it's not
inside my area and now ideal don't
forget to return the array inside the
reduce make sure so this work when we
get here that become the array we just
modify and now if we can return finally
to eat that cell so now we're gonna save
and we're gonna check in the simulator
by refreshing if everything is still
working
it's still working but now how can I
test it this is really a question you
have so I'm gonna go to my mobile site
I'm gonna open the simulator and now
what I'm gonna do is I'm gonna go to my
get tweet tree when we get the all of
the tweet I'm glass is lava real so the
same value we just create right there
and now look what I'm gonna do I'm gonna
go to my feed car I'm gonna have it as a
props here because as you remember
inside the on the screen we spread out
the item we get these favorite and now
what I can do is I can say fit top
button his family is 500 real like that
and now my should Calcutta that's why we
always stay fault but now if I say yes
over it right there in a remove it now
look at the magic if everything work
you
why did that because if we have it if
its favorite true it's rare if not it's
great and now look
all real-time why air that all the value
chain is because as you remember we take
the hybrid gun and we pass it everywhere
if you want I can see zero and I'm gonna
see zero
now if I do this click and you see and
if we look at the server side
I'm going to late
when you see everything at the name so
now with the optimistic UI that's why we
get this thing so I hope you enjoy what
we just did I mean yeah that was pretty
easy because we did all the logic on
mode so we just did so I'm gonna just go
back over what we've done but this part
here you need to understand that it's
really important if you want to be
really good in JavaScript now you need
to understand the premises that what
that mean finally it's we have two
premises we know here it's two premises
you know we did that always with the
like you we return like that because
Apollo can not a global graph can
receive a premises but you see it's all
premises all the stuff coming from
Mongoose or premises yeah when we do I
avoid premises at all you just finally
we just call it premises we're gonna
just finish when all of them gonna stop
for sure I shall has put I wait and I
wait we just
I want Newt I want you to see another
kind of void and now a when we do reduce
make we just finally create a new array
and we just iterate over each of the
tweet if the tweet is already inside the
favorite tweet away we're gonna push
inside the array we want to return the
tweet as an object plus is favorite too
so we merge so everything like the title
and the tweet himself and the user
everything we push it in and we add the
value is travel real so you need to
understand then what happened here it's
almost like we have an object I'll name
you it's an code user who's going to be
user like name Emmanuel and now a I can
take current use r1 and I can say a
country Canada like that now if I seek
on new user and I say that use our and
dot the dot user 1 I'm going to get on
any this object I'm going to get name
Emmanuel and I'm gonna get country
Canada like that why the dot is because
if I don't do the dot but do just like
this but I'm gonna get it's my object
it's going to be another object what I'm
gonna have name and here I'm gonna have
another object where I'm going to add
the country but by doing the door and
you show you
this is what we got we've merged one
object with the other one it's almost
like the object a sign so I hope you
learn a bit and yeah I hope you enjoy so
what we're gonna do in the next one it's
we're gonna make it working with
subscription so if you like it inside
another like another mobile another cell
phone I'm gonna see the popups coming in
for there so this is what we we still
need to do it's to have it in a
subscription working so for the
real-time light we need air to have the
profile where we're gonna see all of the
tweet and the desktop so with some UI
that's what we're gonna need to do it's
also add the placeholder because right
now this is all that work it's that
gonna refresh and we're gonna have like
the refreshing you see here and like
that but now what I want is I want like
kind of the placeholder of Facebook like
we have the placeholder will just keep
loading and gonna receive that now so I
hope you enjoy and I'm gonna talk later
as a good day bye</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>