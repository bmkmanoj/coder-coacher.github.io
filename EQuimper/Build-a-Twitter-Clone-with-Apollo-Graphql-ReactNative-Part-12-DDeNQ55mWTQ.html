<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Build a Twitter Clone with Apollo Graphql &amp; React-Native - Part: 12 | Coder Coacher - Coaching Coders</title><meta content="Build a Twitter Clone with Apollo Graphql &amp; React-Native - Part: 12 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/EQuimper/">EQuimper</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Build a Twitter Clone with Apollo Graphql &amp; React-Native - Part: 12</b></h2><h5 class="post__date">2017-08-12</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/DDeNQ55mWTQ" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">yeah
hello if you want on 12 we're going to
jump on the others avatar like I told
you in the last season so what we need
to do for that is when the user is
logged to fetcher me
Dimitri so where we can get the
information about the resource for
example getting is avatar first name
less than this other stuff so first
thing what we're going to do is we're
going to create the fake editor for now
so we're going to just put it there just
for share with the design so first thing
we're going to do it inside the
component right there so the component
folder we're going to create another
file called headers add a tower that GS
so this one's going to be a component
while we're going to finally plug it
with Vidocq with the information from
the user communing from the state and
we're going to just change it when the
user is log so the plan for that is when
the user it when it's not finished to
log we're gonna have a spinner here and
when we have the add a double back we
can add the data from right there so
what we're going to do is we're going to
start with a import react component at
the top like we always do after that
we're going any Thai component for that
after that I'm going to create some
variable so I'm going to edit our side
and I'm going to I'm going to put 3d so
it's going to add a ID and a width of 2d
after that I'm going to kill another
variable called edit our radius and this
one
the other our size divided by two
now what we're going to do is we are not
creative at all and we're going to
create a component so for a component
which is going to be pretty easy we're
going to either add a tower right there
what we need to have a component from
react is because we're going to need to
create a function inside that for the
logout function so the avatar are we
going to do this we're going to turn
avatar equal to a style that image so
it's going to be an image here we're
going to say a I equal to the other our
size we're going to sit with equal to
that our size and we're going to take
border-radius
equal to the avatar radius variable we
create so now we have a turtle we have a
circle of 30 from the i30 from the width
and 15 from the bottom really so now
what we gonna do is we're going to
create a button to because we can click
on it to show the like the action sheet
here from the bottom so we're going to
need for that to import touchable so the
library we build for getting every
button stuff and now here what we're
going to do is we're going to sit button
equal sign that touchable like that so
we're going to wrap it after that we're
going to add some attribute and the back
to here so as the ice cube use what
we're going to do so need to be an
object I'm going to take feedback to be
opacity and it slope be top 20 button 20
right 20 and less 20 so for you if you
don't remember the feedbags going to be
when you press you can add opacity this
is on iOS in Android by default because
of the searchable library we're going to
get the Android feedback kind of
material one and for the it cloak is we
want to get a bigger radius than just
this like example 20 from here and I can
click everywhere here so this is for the
big finger so now it what we going to do
we're going to put some margin left so
we're going to take 15 justify contain
centaur and I'm going to a line-item
Sentaro so now if I if I build that in
with a fit button and I'm going to say
Avatar ad vitur like that I'm going to
import my fake avatar coming from the
youth circle darken them so you do there
you import you take a tour for now so
that should be your Twitter image and
now I'm going to copy paste this
component name I'm going to jump on the
navigation file so if we go to
navigation after that at the top I'm
going to import this component which is
creation aliy from the component folder
so what we're going to need to do after
that is we gonna jump on the own ear
inside the stack navigator app min now
we're going to navigation option and
because I know we're going to need that
later I'm going to already make a
function within an object I'm going to
edit left and I'm going to say my add a
talk so if everything is working we are
supposed to get an a data right there
- so you can see we have the battle so
this is what we want we want to be able
to click here and you see I can click a
bit a bit to the top in the left so now
that's great we have it so now when I
want to set up to it I want to add a
loading pin are when I don't have the
avatar yet and I'm going to make it for
now to make it as a default because now
we know that's going to work so I'm
going to already I'm gonna import my
loading component we have built in the
last episode in what I'm gonna say it
I'm gonna say if I'm going to see right
there current info equal salt so younger
if no info
- right they return the button with the
loading here but I'm going to put it a
size of small so now you're going to see
we're going to suppose to see the
spinner not perfect this is what we want
another thing - it's the spinner I can
click on the screen oh you don't see
because it's I mean with the opacity but
just put disable here to make sure we
cannot click on that so now we're good
for that so now we need to receive the
real avatar from the user here and
that's we're going to have a good amount
of stuff to do here because we need to
manage we need to make a career for that
and yeah so you're gonna see because the
thing it everything about react
navigation is static so that came when
the before that that's coming so that's
why I plug this component in with my
videos is because I want it to be
changed so we're going to jump on
directory we're going to just create
create the career for now so meter GS
inside the Curie folder and we're going
to import the gql library from react
Apollo and we're going to create a tree
so what we need here with that's going
to be an objection and air we're going
to add me and I'm going to say winning
the avatar
we need the username so we're going to
get that in some time again sty in
negative first name and last name so
this is the career you want that's it if
I plug that in my graphic you will app
you're going to see is going to do the
the good crew for that and because we
don't need to pass the idea of the user
because thing about that the tree gonna
work because the curricula follow with
the token so now where can i plug that
so I want to make sure my user is long
and a good place to do this it's my home
screen I cannot see the room scream if
my user is not logged so I think that
can be a really good idea to make that
here so are we going to do this is we're
going to import any Creek to the upper
case because this is all I do with
rescuer 3 let you guys to a to raise
that me and now here the thing is that
now what I need is I need to call
another another Curie and I need to to
call my Redux action you know air I can
put the compose and I'm going to need
that to the connect but I need to cream
action for the information for the
reducer because we know that I can just
told you we're gonna get at the tower
inside the store and not inside the
cache this is not right now we don't
gonna work with the cash yet so we're
going to make use of redox for that so
for doing this we're going to do John on
the action really quick going to be
really easy export function get user
info while we're gonna have an object of
info we're gonna return a type of get
user info and we're going to return the
info that's it for the reduce R so if I
search for the reduce are the only thing
we need to do here is going to be K get
user info we're going to return the old
object we have a new object with the old
object property but info is going to be
equal to the action that input that's
nothing more to do so now we can jump on
down the screen we're going to import
from react Apollo compose and we're
going to import RIA react Redux connect
so now here all we can do this is we're
going to compost here like we did on the
last it is a and we need to pass it
right like that
so now here what I can do is I can also
do my connect here I don't want to have
access to maps a to crops
I just want to plug my action-y I get my
user information so what I'm going to do
is I'm going to take from here from
action that user I'm going to say give
me my get user info function and I'm
going to pass it right here as the
struggle argument until I created
bracket so I don't need to do the
dispatcher that that structuring the
information now add the me query so how
can I create a Curie and get this thing
and put that in redux we're going to do
that inside a component in out so by
doing this we're going to need another
thing it's called with Apollo it's
another higher order component we'll
finally wrap everything you are I'm
going to give you read access to the
upper loop client you are so you're
going to see that in a moment so what
I'm going to do is I'm going to create a
function Cal get user info who's going
to be anything 1y is anything because we
call an asynchronous function in the
backend so are we going to do here is
I'm going to take current data equal
avoid and now that's going to be the
place where we make use of the wit
Apollo it disapprove that client so we
get this the project I am just because
we wrapped with with Apollo and now I'm
going to curry square bracket to the
black edge print a secret bracket and
now area security and we're going to set
me that tree like that and now because
inside they mean a cream we get that in
the me object like that I'm going to
just give me me like that so again I
destructuring
but now you see I'm going to get the
user info and now I can call this
function right inside the component in
now I'm gonna fit this that get user
info why I call an F function outside of
the comparative now just because I'll
make I one
to make it a thing I know we can do this
in Denmark but again if you use so type
or something like that you're going to
get error here and it just like just oh
I like it more to do so now the only
thing we can do finally yeah there is
that curves that get user info and I'm
going to pass it the me object so now
I'm going to show you that with the
reacted to debugger so I'm going to
refresh and now look the screen what can
happen it's a big thing is working now
they still gonna filled with everything
inside that so now you see what I can I
get lured I get my polo Cal I get my
photo call and now I get my result and
now I get my user info why I why I put
this user info right inside my state and
in time I say now have access to the
avatar so now I if you follow me right
there you start to see what we can do
now with the others at the top it's now
a we can just connect this one which we
does we're going to connect this one I'm
going to map to the props where I want
to get the info from the trade that user
the info and now yes that's it we're
going to do if this is the club that
info the true like if I have no info or
if it like it's no I'm going to show the
disabled and now right there I'm gonna
sit there that props the info the avatar
that's it come on you're gonna see right
there so when you're going to work
boom that's it and now this is the real
a baton I use Albany lot
now it's art for you maybe because it's
again the same other ties before but
trust me this is the one we just add
inside the DB when we set up the user so
this is the same URL so now I'm going to
remove the second I thought I don't need
that anymore so not good we did a good
amount of stuff right now so you see you
just pretty much easy but I didn't want
to read that from the cache I want to
make use of readers pages to have much
more control with my stuff and because I
know that more but now the only thing I
need to do before the end of this part
it I want when I click here to show the
action sheet here so that like you know
the little pop-up coming from the bottom
and I can see logout and I want to make
sure I can log on my user so for doing
this I'm going to show you a package we
can ex install it coming from Expo it's
react action react native action sheet
this thing right there so this thing is
just an action sheet is that
cross-platform reactive component that
use the relative UI action sheet but
you're going to work on iOS and Android
so finally see like the action should
iOS we have any react native but we make
them a work to in and really so we don't
need to care about design to thing so
for doing for installing that just run
this command so go inside your visual
studio code or whatever they you use and
now here what I can do is yarn and Expo
react a creep action sheet for getting
started with that first
and we're going to just open the example
folder and you can see it's really easy
we're gonna jump on the name we're gonna
just copy paste this line oh I'm going
to show you so what we do is we go to
add the GS and I'm going to take this
one but I need use the first one so we
need the provider so it's like the
provider we got env dogs so we're going
to put that inside the apple provider so
we now refer to a lot of provider but
now you see we wrap the action sheet
provider because of this now we can add
access to the function clinic action
sheet so go inside you add our avatar
and now at the top import the connect
action sheet from export react let's see
action sheet so now we ask this to think
do so now all we can wrap that is by
wrapping the other vector here like that
that's another eye order component so
now what I can do is I'm going to create
a function in where I call this open
action sheet so I'm gonna sit on open
action from the discipline the open
action sheet equal another function and
I'm going to call that on my button here
and now you get now what I'm going to do
is this action we want to call the
function give it by the connection
connect action sheet and this is show
action sheet with option that's
and for doing this option you're going
to see so here is an object if we can
pass option so that need to be an array
so finally this is just if maybe that
gonna make more sense if I show you the
react native example so you can I see
like you need action wise scenario flick
of button title after that we can add
the cancel button index so this is where
the cancel button is going to be the
index tree if you want it to be at the
top or at the bottom after that we can
have the descriptive button index so
it's going to be like it if you like
example 4 that's going to be the log out
and this is what you need and if we
aren't title off message but I don't
want so what I'm going to do it's my two
button I want so I'm going to create
here I'm going to current option with an
array of title button so here it's going
to be string I'm glad logout and cancel
so I want to add this to button so now I
think if I put that here I think that
can work just with them
you
now if I click on that much provide that
it call that okay yeah I didn't I don't
have a callback on my callback going to
be there so this is all you do but an
index and now here we're gonna open that
so finally this is periodic to know how
that's gonna work but inside the
callback this is where we're gonna have
access finally to the index of the
button us click now you see we get
legaly cancel so now if I click I get
legate cancer perfect this is what we
want but I'm going to click on because I
want my leg out to be read because right
now there are two color keep addition
color so I can take on death trick see
button index I'm going to just copy
paste this one
currently to see button index so the
index is going to be the first one so it
because it's an array it's zero so I'm
going to pass it right there so I'm
going to save so now my logout going to
be in red you see it is in the red after
that I'm going to say yeah just like
this and now here we can have access to
the button index so just for showing you
just for showing you when you click on
the button I'm going to fit button index
and I'm going to pick button index here
so inside the reactor developer now
we're going to get the index of the
button we click so now if I click and I
click on the first one I get the zero
but if I click on the cell on one now
that's going to be the first one because
remember it's on average so now what we
can do is we can see right there
if button index equal zero now we can do
an action right there so this is what we
need to do so my action for any what I
want if I want to block the log of the
user so we're going to create a function
in that for Redux like this log out in
time my action after that just go inside
your reducer and the logoff is going to
be the most easy action we're never
going to write in video you just say
return initial State
that's so now we get the logout working
and now what we going to do is we need
to pass this action inside the others
avital so this is what we're going to do
I'm going to import the level action
from
action - user and now I'm going to pass
this action right inside my stately so
I'm going to just run down and you see
state you first your first thing here is
your maxi to props so now here I'm gonna
do my curly bracket like y'all where I
can get my dispatch and now right there
I want to return these that clips that
let go that's it so if I click the
logout I want to log on my user now
we're going to see nightly my face plug
out boom that work so we did the leg out
but now the thing it what Apollo client
say is if you do a logout so if you do
the authentication reset tour on log um
we ask you because they cash everything
when you log on you need to call the
function client reset store to reset
everything because if I log again back
I'm gonna add all the other queries by
doing this we're going to make use again
of the with Apollo from react Apollo
and now all you do this you just wrap
this one you wrap and now make sure you
wrap to the bottom like that just save
and see if something crash is going to
crash that gonna crash right there
and that don't crash perfect so now what
we're going to do finally just ear when
you click on that we're going to be
reset store I think that was the
function we sit so yep
but inside client like that so now that
we know that's going to work but now you
may be asked ok yes you just allow that
what you still go log if I told you a
thing storage yeah this is a sing
storage
we just need finally to just build a
last little thing inside the action when
we log out and this is remove the ITM
where we when we do the dialogue out so
the the token because right now if I
click logout perfect everything go back
but if i refresh my users to log out
because remember or with the dollar go
we just check if the token and week out
the back end so all we can do this is go
back inside you action go to the top
import from react native is in storage
and now we're going to transform log out
as an easing function so we can have
access to dispatch from redox tone when
we move that for now and now here we're
going to cry at put a try/catch if I
have an irregular to 0 so now what I'm
going to do it's fine and I'm gonna
avoid my eating storage that remove idea
with the name of the tool can we put in
the latitude for this is Twitter YouTube
clone that's no one is done
this is done I'm going to do the
dispatch call and I'm going to call my
type
now go and now time to see that going to
work
that work air to click on the logout ok
clogged ow
perfect we are log go and now if i
refresh my screen
I still a gout that's it that was that
was it so I hope you enjoyed this it
will next one now we're gonna start to
make use of the function of I like a
tweet and I can just like a tweet so
this is what we're gonna do on the left
and the next one is going to be pretty
simple but we're gonna learn a lot so I
hope you enjoyed it please click the
like button and share if you think that
can be helpful for someone else and have
a good day bye</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>