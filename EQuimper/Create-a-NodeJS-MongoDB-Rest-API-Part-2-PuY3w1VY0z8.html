<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Create a NodeJS + MongoDB Rest API [Part: 2] | Coder Coacher - Coaching Coders</title><meta content="Create a NodeJS + MongoDB Rest API [Part: 2] - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/EQuimper/">EQuimper</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Create a NodeJS + MongoDB Rest API [Part: 2]</b></h2><h5 class="post__date">2017-05-17</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/PuY3w1VY0z8" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">lol Oh guys so we're going to continue
part two said about the minibar and
MongoDB we're going to set up all that
right now so when we end the last time
we just set up finally the basic Express
GS server so we just nothing I mean just
a lot I always working with a port
nothing more what we going to do now
plan it a mongoose mongoose data or a
ram for MongoDB you just make your life
easier to work with MongoDB after that
body parts are we want to parse the
request as a JSON so that Morgan what is
Morgan I'm going to show you is going to
be better for you to see it but you're
just finding a way to see what happening
to your server so finally which route
have been totaled after that compression
in Elm app to package we won it in
prediction we're going to add it right
now because it's so much easy to edit
compression we're going to compress
we've in a gzip with the server and
they'll match 11 library for security
nothing more to do than just reading one
line of code
why don't have this so after that we're
going to set up the config folder and
set up the content just to make the app
looking better so now we are right there
Atalla terminal we're going to add
inside the dependency mongoose body
force or compression and telnet after
that we're going to run yarn add their
dependency Morgan
perfect so we just do this stuff so
finally we're gonna add the first thing
so you see we add the first library
first
so Mongoose body force or compression
element inside the dependency among and
Morgan go to the damned apparently
they're representing Morgan and all the
rest is there perfect after that I'm
going to just store the server so there
that bill so quick back compile perfect
after that he on
perfect still running perfect so now
what are we going to do inside the
source folder we're going to create
suddenly the config folder so we're
going to create a config folder inside
this one so really yeah so this one I'm
going to create a file called con 10 the
GS why do I want this fire this is just
the place why are we going to set up all
the like the URL and everything we want
to use in the app with some kind of like
that going to change like if you are in
development that's going to be dead if
you want testing and German there's
going to be data here if you're in
production that's going to be that so
all we want to make it going to be so
much easy current def config I'm going
to be a empty object current yeah
country will be an empty object current
grub config going to be an empty object
and after that current default config is
going to be an empty object - we're
going to fill that but no worry I mean
you should just for setting up so what
we want to do so finally we're going to
replace this line of code here current
sports I'm going to copy/paste this
thing and I'm going to go inside before
something I'm gonna support what is a
default config it just a config then on
if I'm in there death or prod
configuration environment I'm gonna use
it so that's why I make it inside before
configured just so much easier me you're
going to seek after that I'm going to
cut a function here let at the end
config this thing gonna take an
environment as an argument I'm going to
do a switch statement right there we're
going to loop for the env run man I'm
going to have a case where the
environment equal develop man what I do
I return there config nothing more I
return the subject if I'm in test I'm
going to return test config and by
default so if I am NOT in dev or test
I'm going to
returned proud country perfect
so that ear what I'm going to do is I'm
going to export default an object error
and that's going to be dub the default
config dot the dot ends can say and I'm
passing my process that end that node
and what I just did
oh maybe some of you done that's what
I've just did but what we did there it
just I mean it's crazy with this new
stuff what we did is we finally straight
I'm going to take this default config
and I'm going to take the result of this
one and I'm going to just make one
object so it's not going to be an object
with an object and another object
there's going to be a one big object
with both so finally like an average
like we can't cat the both object inside
one yeah it's a hot dog I mean after
that we're going to create inside the
configuration I'm going to create not
there I'm going to do setup that first
here import content from slash config
slash content don't need that anymore
boom here I'm going to add my content
and I'm going to add my content if
everything still working boom I have
everything I need
perfect still working now here what I'm
going to do its I'm going to create a
database that Gaea so that's going to be
why I'm going to set up just my database
first thing import Mungo's from Mongoose
among those going to connect for us with
the MongoDB but I'm going to import my
content from current then after that and
what I'm going to do I'm going to just
write a comment remove the warning with
chrome assist so if you don't do this
line of code right there
MongoDB gonna send you an error with the
promises so this is what we need to do
after that year I'm going to say connect
the DB with the URL provide so the the
URL of the database we're going to do
okay I'm going to use a try-catch you're
going to see I love try I try cat so I'm
going to try to make among those that
connect with the constant depth Mongo Oh
what happening
I've known complete yeah because I
forget to add it here inside the DEF
config now what I'm going to say is I'm
going to just finally create a Mongo URL
key and the value going to be cold to my
MongoDB I want I'm gonna be localhost
make that no gear API slash death I want
it to be there
copy paste there and for now
prediction we're going to use it but
don't worry we're going to use something
else prod now just for showing you what
I'm going to do I'm going to uncomment
this line and I'm going to just
controller constant look what's gonna
happen if I can sum load constant what
I'm gonna go let's do that then too much
I'm gonna close some stuff here so this
one now I think I get you know just be
sorry server maybe he didn't see what
happening perfect so now if I
console.log my constan we're going to
try here you can see that work and send
that Mongo URL we see you oh no no well
up in England EDD and now here in time I
catch the only thing I'm going to need
to do it mongrels the create connection
constant that Mongo URL perfect so that
Mongoose that connect connect
shun owns so here inside the aunt I'm
going to see aunt open I want to log
sorry
controller Mongo DB running
oh yes Linda like that go to the top
yes then this everyone no console go
back there on a mur because now it's
only one open on error Oh bang here true
ever nothing more callback error which
whatever that now we team is still
working
yes so now I know what's happening in
the last one so sorry and we need to
import a here so I'm going to just
import we don't need to import a thing
so we're going to just import just the
fact that's it MongoDB running perfect
and now look what I'm going to do I'm
going to come so log my contacts right
here and look what can happen boom the
object Court Mongo URL that's this is
why I love the rest the speed operator
and their essence inside okay so now we
set up the database MongoDB is running
now time to set up the middleware when I
use some middleware so I'm going to just
add the most simple one to add and we're
going to add more in the route so import
Morgan from Morgan import body for
circle for the request in Giza import
compression from compression in Port for
helmet from L map right here I'm going
to do export default app like this what
did I just did why I want to do this
look at this
go there i'm going to import middleware
country from the config middle oak
middleware
now look ready after I clean my app I
can do middle country boom so now I'll
give my app right there that is there so
now what I can do is app that use body
for sir the Chasen want to pour juice on
at the youth body parser that URL
encoded I want to use postman and I want
to use the exponent Korean this is what
I need
perfect after that now we have three
library who don't be you on by default I
want like a metrical creation to being
proud and I want Morgan to be in there
so what I'm going to do I'm going to
creat two variable U is there when we go
to process then end that node n equal
their lot man
when equal another one Khan is prod
equal process then and then node an
equal production so that's very
differently prediction that going to be
finally a boolean that compression need
to go the top need to be the first
middle words here can't if is prod add
that use compression boom if you sprung
at the use ailment the 11 library of
security just go there and we have
everything setup ready so that a one I'm
going to do it if is there app that use
Morgan and I'm going to sleep more get
this because I want to use some color
already bill and the debit the one I
really like so now example if i refresh
my local oath what can happen boom which
is what happening this is Morgan right
here Morgan show the request right there
so I get a full for I don't want to get
on another for I can do app that yep
slash
red red I'm going to say red that sent a
low will boom like that so now if i
refresh my screen hello world tree at
200 from Morgan perfect we set up the
database we set up some configuration
and the middleware makes it dissolve we
started to write some authentication
code I want the user to be able to sign
up first
after that we're going to make that
application with passport GA with GWT
and locally with email and password so I
hope you enjoy let me know in the
comment if you like this new kind of
video and please like if you like and we
see later bye</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>