<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Create a NodeJS + MongoDB Rest API [Part: 8] | Coder Coacher - Coaching Coders</title><meta content="Create a NodeJS + MongoDB Rest API [Part: 8] - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/EQuimper/">EQuimper</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Create a NodeJS + MongoDB Rest API [Part: 8]</b></h2><h5 class="post__date">2017-05-23</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/PKkaVz6aMws" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">yeah
hello guys hope you're doing well
so today we're going to consume that
story off so Part A now time to get all
the polls so one of the first thing I
want to talk today it's about the the
repo just call it in your I put
everything on geta
so I put the link on the description and
all the repo work it's you're going to
get out the party and I say always what
we do in each part so I learned that by
my mistake on other tutorial but now I
really think I get my death on that and
now as you can see branch here and you
can go example you're on the you didn't
selected seven examples you can click it
and now after that you can see what
happen at this point so that can really
help you like if you get some trouble so
that was the stuff about the repo again
the repo girdling gonna be in the
description so today we're gonna get out
of the boat last time we make it able to
create and get posed by ID but now we
need to make it work with all the folks
so time to drama the code so first thing
we need to always do we're going to
create a controller so time to jump on
the post controller so what we going to
do here is going to be pretty simple the
thing we want it just get all close so
here we're going to create a async
function call get the pose lift and I'm
going to say read and read again so for
requests and response then I have a
try/catch here I'm going to copy/paste
all this line of code and I'm going to
paste it because I always do my catch
first because I don't want to get some
weird permissive error after that err
what I want to do is I'm going to get
all the boats so here current pose
Imperial because we're going to get more
than one I'm going to do a weight toad
that's fine if you put no argument gonna
get all the pose and I want the Twitter
user like I did here
so I'm
just put user right there after that
really simple return where that status
HTTP status that okay and I'm going to
send inside a JSON object I'm going to
send all my folks
that's nothing more to do here what I
want to do after that is jump on post
route go there clean another gap just do
slash and now here that's going to be
doing the beep post controller get post
list here as you can see like the other
get here what I do and with the ID I
don't put the other application GWT why
because like if you go on medium.com you
want the user who it's not log in to be
able at least to read some code but I
don't want him to do nothing else and
just reading stuff so if you want to add
some comment or something like that
I'm gonna make it the need to be at a
decade so this stuff is done here so now
I'm going to jump on the postman but
before what I want to show you it
I've already fulfilled 10 sec data so
really simple idea text online and
everything so nothing more I just like
click nineteen of my post like this here
I can create at 11:00 time so just to be
sure always remember you need to be
logging first and now I'm going to
create another post that's perfect so
now I'm going to go there I'm going to
copy paste this link here but now that's
going to be a get request
I need the others because I need to know
a description so logging unison now I
get all my folks so I get eleven post
here first thing we should do here like
I always save this thing inside postman
so here do post and I'm going to get out
post just to get a name and take your
correction here so no gsutil
perfect so now I get here so it's really
easy to if I chose that I can click here
okay don't get all both and send that's
it nothing more to do but now as you can
see we have some kind of problem it's
easy you have eleven post but if my app
maybe is going to be a big thing
it's impossible I mean to get all the
stuff and make it and get the
performance in some time so I know we
can use like Mongoose for cleaning
everything but I think in this tutorial
here the only thing I want to show you
it's a way to just make it like your own
kind of get all pose and I hope you're
going to find this one pretty simple and
easy to learn and I don't feel this is
the best way to make it but I think I
can be a good way so what are we going
to do first we're gonna jump on the push
model as you know I really like to
abstract my stuff so here I'm going to
go inside my statics because method it's
called when you have one example one
pose but static
it's called on the post-chemo yeah I'm
going to Salt Lick so I'm going to
create at least you know we have posed
that fine pose that somebody posed that
fine one it should arrive so here
finally the layers going to just be a
way to add some kind of limit and
keeping stocks I'm going to show you
what that means in one moment
so you inside my list I'm going to add
an object here where I'm going to
destructuring to thing yeah I'm going to
have the word get who by people going to
be zero after that I'm going to add the
word limit who by default gonna be five
and here I'm going to do something maybe
weird for some people who don't really
know es6 but I put an empty object so
what I do here
think about that for so I would like you
to maybe pause the video and think about
what I try to do here so I hope at least
you maybe find an ID so what I do if I
give a value here by default if I get
nothing from my controller l if I get
nothing for if I get something from my
controller now I'm going to fulfill like
this empty object I'm going to post a
link on the description if you want to
read more about that and maybe like
the worst person to explain this stuff
but this is all I feel about that so
here you're going to see what I'm going
to do I'm going to do beer because again
this is the boo schema don't forget to
put a return first because we don't we
don't if we don't know I'm good at it is
that fine
so it's almost like what we did here
this is that's fine but here I can put
now some kind of other stuff coming from
Mongoose so here I can say sort so I can
sort ym what I mean by sort is a way to
maybe sort by alphabetical numbers and
number name and I should already know
you know what I mean
but everyone I'm gonna say it's create
it up and I'm going to put minus one so
what I mean here is I want to get the
post who was the last one to be created
first so err the first one I'm going to
get in the next time I'm going to send
my request going to be the post number
11 why because here I say create that
last one in the create app is becoming
air inside the time stamp right there so
we're going to just check which one is
the last create that's it because if you
don't put that by default this is the
other side so the old one first after
that I'm going to sit that skit and as
you know here I'm going to use the skip
trying to rip so an Iraq put color on
but sorry that was equal maybe that's
why you didn't see what's happening here
but let let me a change to just show you
what they're gonna do in here I'm going
to say that limit and I'm going to put
limit and now here I'm gonna say duck
populate because of why don't do that
here I getting that gonna just be
cleaner for the controller and now here
I'm gonna put the user so area had what
I can maybe do if you don't understand
this part where you can maybe do with
something like that skip or zero limit
are zero so if no limit if it's some
define I'm gonna get zero or something
like that so here you can put like five
but
I don't know why I really love this kind
of way here so now we have made the list
edit method a static function so long
time to jump on the github slip and now
we're really really simple now the only
thing we need to do here is to remove
that because we already populate we
don't need that another fine not not to
yeah I'm gonna do that list click so now
I can get my list so example now if I
save that and I jump to postman and now
I send what done at them what do you
think at in here if you say I'm gonna
have cycles you're pretty really right
so yeah one pose to pose triples so post
five folks
so that was my limit as you here I'm
going to show you if I put two and I say
and I go back to postman a nice and
again perfect I get to this is what we
want but man he drop want you user to go
inside the controller your your model
and make that so we need to make a void
inside the get request to save which
limit we want and we all to skip and for
the skipping metal Ike what I can show
you it here example if I have my five
one and I Sen you're going to see the
first one its title 11 if I go inside
results to do now and I'm going to just
say by default example five and I save
what you think on a pen I want you again
to pause the video I hope you see thing
about what's gonna happen and now here
see title 11 I sin boom
title 6 when I fell 11 - 5 6 we just
finally say I don't want the 5 first
yeah so if you're communing for maybe a
front-end part that's going to be easy
for you to understand ok so now I can
maybe make an infinite scroll and what I
do is every time I get to the bottom of
my website
that I just increment the skip method by
example five that this is all I'm going
to do like my easy kind of pagination so
I'm going to put that for zero because I
want the user to if you don't put a no
skip I just give in the fight at first
five perfect time to jump back on the
controller oh can we send some kind of
value inside a get request again I want
you to pause the video why I do this is
because this is the best way to learn is
by asking yourself some questions
perfect so now how can we send something
inside I guess I get requests I think a
really good way to make it is by doing a
read that curry we know right that
parent here we have a parent how can we
do a query so here that was the parent
now I will get a German postman and
you're going to see all central it is to
work with curry so what I'm going to do
is since I my post get all requests I'm
going to click on parent here when I
click now I get key as value area I'm
going to put limit and I'm going to say
value three example now you see what
happens this is what they add at the at
the end if you don't like the parents
key value here with I think the most
easy way to make it put there put that
here if you want from you just by
writing so now I'm going to send my
request but before what I want to show
you it's now here I'm going to come so
long my red battery I'm going to open my
console and I want you to see what good
at it now I'm going to send now what
happened
yeah like 10 grams 3 it's an object here
I get my limit so I can maybe add
another key and say skip ok and you see
Oh
yep and you see this is all the other
end so another 3 and skip
I'm gonna see me be example - now I'm
going on SM go back to visual studio
code now you see I've my object limit
and skip so I can use it so I'm going to
go here in my lair and I need a double
check here I'm going to say linear it's
equal to read that Yuri that maybe it's
an object a what I'm going to do is I'm
going to fix kill it's equal to read
that Yuri that's kit perfect now time to
jump on postman gonna send Oh what
happening here now we need to read this
error message and I'm going to take some
time here to just show you all I read my
error message and oh I learn by my
mistake
here we see named Mongo error so we know
this is an error in time MongoDB message
sell to Poor's blah blah blah ear
projection skip field must be numeric so
Phil must be a number
Oh what happen here you see we have I
don't remember the name but I think it's
keeping stuff and ere we see we have 2 &amp;amp;
2 it's a string limit it's a string what
happened
I go to visual Sudoku oh here I see my
tree and my two came as accurate because
this is a parent's true accurate parent
string so how can we fix that it's
really easy i all if you don't know
about all to put a string to number i
really want you to post a video search
on google and come back with the nth or
because i don't want to give you three
and four and don't make you like
understand what's gonna happen here so
what we going to do first is we're gonna
create a limit variable whose going to
be read that three two three the
so now we have the limit but this is a
string so we need to parse this stuff
inside a number so I'm going to cut this
thing with kinetics I'm going to put
parse int convert a string to an integer
and I'm going to paste my limit and I'm
going to say I want a radius of zero I'm
going to copy paste this line you don't
need to do nothing here you just need to
do shift command D or shift control D
for that go aligned below after that
select email do come and D for select
the other limit and now do skip so here
I change both in same time so now I have
limited skip because we use the x6 now I
can just remove rectory willowmere and
ready to risk it and keep it like that
so now my limit in my skip so now if I
jump back to post now what's going to
add them I'm going to send Oh title 9
why
oh my skip I skip the first to 11 minus
2 9 1 2 &amp;amp; 3
oh because of my limit and my skip
coming in from that I Rams maybe I want
to limit for and I want to skip the
whole first I'm going to send a level
minus 4 7 and now I get only the fourth
search perfect now I want no parent that
out I'm going to click here I'm going to
help and I run 10 and I go down to the
first one so you see there why I got
that it because of air I get and a
default value so hope you enjoyed this
little video let me know if you like the
new format of video and if you liked the
tutorial I really appreciate all your
come in and that just made me want to
continue in the writing style and hope
you enjoy all that and we'll talk later
as I goodnight bye</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>