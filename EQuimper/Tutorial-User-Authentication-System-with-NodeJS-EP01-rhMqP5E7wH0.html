<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Tutorial User Authentication System with NodeJS - EP01 | Coder Coacher - Coaching Coders</title><meta content="Tutorial User Authentication System with NodeJS - EP01 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/EQuimper/">EQuimper</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Tutorial User Authentication System with NodeJS - EP01</b></h2><h5 class="post__date">2017-09-19</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/rhMqP5E7wH0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">welcome back everyone it is a number one
now so we've done the setup now we're
gonna just create the basic user with a
simple email pass one username nothing
more no validation almost just setup
them like oh we're gonna module
everything about the services and
everything and I'm gonna just show you
like I kind of thinking about how I'm
gonna set up the new like design of the
API so what are we gonna do for that
it's we're gonna create a module folder
so we're gonna set set up everything in
module so what is a module is going to
be like if you know a bit about macro
service or something like that it's
gonna be a mojo is gonna be it's gonna
be something we're gonna just do one
thing so here this module gonna do the
sorry my Google ohm so my mojo gonna do
only one thing and air is going to be
the authentication so as you know in the
app we're gonna do it at an
authentication stem so that is gonna be
almost don't need module we're gonna add
so we're gonna go not go too much
further so first thing we're gonna
create we're gonna create inside the
module it's another folder called out so
that's going to be the module call out a
certification after now we're going to
create a out that model that GS so we're
gonna start by building the model this
is how I like to work so first thing
we're gonna import the dependency we
need so we got any mongoose and the
schema a function here we're gonna do a
current out schema equal new schema and
now here we're gonna go really fast
nothing crazy like I told you string for
email we're gonna say password it's a
string two and we're gonna have a
username which is going to be a string
nothing crazy no unique stuff nothing we
just make the stuff work but you're also
after that import the model so we need
to be given a name for Mongoose so we're
gonna say for MongoDB I mean I'm going
to call that out and now that's going to
be the place where now this is something
like I start to do in my other
project it's to create a services so
what is a services so you know the MVC
pattern we add a model of you in a
controller but the thing it's like I did
on my other video it's my controller
what's doing too much anything it's if I
want to refactor or maybe if I want to
example change my database to be a purse
dress or like my sick or something like
that if I do everything in the
controller I'm gonna need to mess up all
my code and stuff like that it's not the
code is not abstract too much I need to
have Circuit moist if finally I want to
be able to reformat my code and make it
work
much better so this is what's going to
be so first thing we're going to import
the out model model and we're going to
create a class called out services
services and I'm gonna just put a class
at the end because you're gonna know why
here the first thing I'm gonna do is I'm
gonna create a Regis star function so
this one is gonna be the register so
this is what we're gonna do in this
video it's the we just start kind of
setup this one then I receive an object
we're going to add the email a password
in a user name so we're gonna just do
the business logic so we're gonna say if
I have no email I'm gonna sit through
new error email is require else if I
have no password I'm gonna do the same
so I'm going to just change that the
password is require and else if no
username I'm gonna also true this error
well now I'm going to see user name it's
required user name after that when this
thing is done so when we shared an email
password and user name is there what are
we gonna do it's a try-catch where if I
have an error I'm gonna chew the Iraq
and now here what I'm gonna do is I'm
going to return my out that model dot
create
and I'm gonna pass my email password and
username inside that as we know that's
going to be a promises and this is what
we want we don't want to resolve the
promises here we're gonna let the
controller resolve the premises yeah
what we're gonna do is we're gonna
create an instance of their services so
I'm gonna do that also resist the call
new all services class so this way you
know why I call that class was only
because I want to make sure that I can
have all service available for me or
what you can also do its say export
default new out service class like that
and now if you do this way you can
remove this and you remove that so now
what I'm gonna do is I'm gonna create my
controller now so my controller no it's
going to be so much simpler to write why
it's because my service is gonna do
everything for me so I'm gonna import my
out service right there and now yeah I'm
gonna create a function with the new es6
syntax error function so this function
is gonna be a nice thing one so that's
gonna be a promises base function this
one's gonna have a react and we're so
weak or a request and response we're
gonna have the try catch this try catch
a what we're gonna do its if we have an
error I'm gonna we're going to return I
read that set is Fondren the JSON and
what I'm gonna do is I'm gonna say error
is going to be the string version of the
error because it's gonna be type ever
ever here after that what I can do it's
create a user with my services with the
avoid because remember that was a crummy
insists on our can say all services that
we just start and I'm gonna pass it the
Reg that body nothing more and now here
I can return rails at status 200 the
JSON and I'm gonna just pass that user
really bad to do this here but for now
that's gonna be good and now you see
look at my controller this is I mean
that's beautiful I mean my code ear
removed me so much for my coach role of
my controller now just do what they
supposed to do to control what it came
in
we go out nothing more the illogic gonna
go to my services so I'm gonna create an
index at GS file inside my alt module
this one now is gonna be where I'm gonna
set up my route I'm going to import the
route our module coming in from Express
and I'm also going to import everything
as out controller from my out controller
right there now what I can do it's
saying current route equal new router so
I'm going to create an instance of my
router I'm gonna stick route that PO so
that's gonna be a pull request / we just
start and I'm gonna put my out
controller that sign up and finally I'm
gonna export default what we just did so
here's this thing here is really
important on this in this point we just
different everything we have here is
going to be inside one object code
controller so that's why we have access
to sign up so we alley ask this thing if
we create an instance of the router we
say router that post we just start then
we have the sign up and now we export
the folder route now I'm gonna go to my
module I'm going to talk and index that
gso make sure this is inside module not
inside out so now so if you know in
JavaScript if you import from index at
GS file you don't need to call in there
that J's file you can just call the
folder up at the top of field so now you
know it's gonna be almost the same set
up import route are from out no need to
see index because you go by default
sorry I miss this thing go there and
this thing go to experience yeah like
that now here we're going to create
another instance of the round
now I'm gonna say route that use and now
yeah I'm gonna abstract my out I'm gonna
see out right there and I'm gonna say
out that route like this sorry
and now I can say export default route I
know it's a lot of
abstraction but at the end we win in
modularity I think that's a term can say
well now we create all the routes for
the thing ok so if we go to we just how
we're gonna need to go /out slash we
just start but this is that done I mean
we need to go now to the real index J s
we're going to import the routes coming
from the module and now what we need to
do it's app that use /eto yeah
if you I V one and we're gonna say route
that's it
so now we're gonna check first thing if
everything is we can but Noah public key
so so now we can create a user we're
gonna check that by doing a post request
in postman push request
/ e PR x dash V 1 / out slash with just
our API v1 slash out slash register so
now this thing need three arguments and
click on X form URL encode n and now I'm
going to show you if everything's work
now you see email is required
mmm where they make this ever came if
you see came right from here so this
error get called
ear from ear so you see I received that
request and add my error now I can enter
email so I'm gonna say Jon Snow
gmail.com I'm gonna Sam password is
required perfectly on the word password
1 2 3 the best pathway in the world and
now we can just say the same for
username and we're gonna say Jon Snow
and I'm gonna send boom my user is
saving my DB now if you install a boom
Mongo so it's another tool I'm gonna put
the link in the description it's a tool
forcing you database inside a GUI if you
go to your database connection in out
now you're gonna see at the first
argument though the user will just
create and if this is there
that's perfect this is what we need so
now this setup is done we just set up
the basic stuff nothing crazy next video
we're going to go over the validation of
the email make sure everything is unique
and blah blah blah and also we're gonna
ask the password because if someone came
to me and say I finished my API and look
at the password here I'm gonna talk I'm
going to say it I don't want to be the
next Equifax hope I hope you it so I
hope you enjoyed this video and we're
gonna talk later on the episode number 2
now so have a good night
bye</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>