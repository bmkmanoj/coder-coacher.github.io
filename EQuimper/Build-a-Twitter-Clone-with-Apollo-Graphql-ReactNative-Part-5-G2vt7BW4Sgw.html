<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Build a Twitter Clone with Apollo Graphql &amp; React-Native - Part: 5 | Coder Coacher - Coaching Coders</title><meta content="Build a Twitter Clone with Apollo Graphql &amp; React-Native - Part: 5 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/EQuimper/">EQuimper</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Build a Twitter Clone with Apollo Graphql &amp; React-Native - Part: 5</b></h2><h5 class="post__date">2017-07-29</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/G2vt7BW4Sgw" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">you know if you want so this one's going
to be a quick video before we jump on
the mobile side so this one finally just
to add the usual belongs that to add the
tweet belongs their user so what I mean
by that if each tweet Gadhafi's Ohta
and we're gonna just manage that and do
some kind of nested query with with
graph QL so so this is what we're going
to do today so the first thing we want
to change is the tweet the schema for
the MongoDB so we want to change it and
make it we want to add a reference as to
the ootah so what are we going to do is
first thing we do Twitter so tweet our
add a limit for the text so the tags
going to be a type of string so as you
can see when you want to like extend not
just like the types of string but you
want to add other stuff you can open the
text as an object and put type string
and now you can put your stuff right
here I can put min length phot here in
here I can say like fine and I'm going
to just say text need to be longer so by
doing this if the text it's not at least
five director I'm going to send this
error message I'm going to just thing
so the the maximum I'm gonna sit 44 and
I can say take too long yeah like that
so that's going to be my text after that
what I want to do too is add the user
sorry
the user and now this one's going to be
something maybe it's very relaxing that
is we're gonna say schema that types
that objects ID like that and I'm gonna
say react to user so here it's a
reference to the user the one who has
read this text and here this ref all
eyes on this world is by here when I
create my Mongoose model rather I say
user with a perky
new so here that need to have the
uppercase you so far I hear what I'm
going to create attack I'm going to take
the user ID from the GWT and I'm going
to take the GWT to add the ID from the
user so this way I'm going to know every
time movies author of this one and I'm
going to add another thing what we're
going to need in the future it's going
to be favorite comp because we're going
to have a with a twist
there's going to be a type of number and
I'm going to set a default of 0 so this
is all you set up so now by doing this
might we gonna change inside the the
Mongo part for the when we gonna save it
so another thing we can already done for
changing that it's we're going to change
the schema so we're gonna change the
similair the tweet we just put the ID
but now we can change that here we have
this to the the text I'm gonna say also
we can add the user who is going to be a
user and for sure we're going to add one
because you cannot create a tweet if you
are not the usual so for sure I'm gonna
have a user criming back from here and
as you can see I returned their user
type who is the type from here so the
SQL gonna know which one is the author
by doing this and the dota but like all
the usual scripture and after that here
I'm going to take have a return and this
one is going to be a in and for integer
and it's going to be there for sure 100%
perfect so now here we have the tweet
and stuff like that so now for testing
this so for testing this we're going to
need to make sure first thing then we
can create a tweet and add the user to
it like a add the is ID to it so what
are we going to do is we're going to
jump on the Twitter whistle one while we
do the create tweet so a way we do the
create tweet now what we're going to do
it's air I do
avoid require out when we make sure is
authorized but now a what I'm going to
do in the tweet create I'm going to say
curly bracket here
. ours so I'm going to spread everything
from the object art if I don't do the
spread err the thing is I'm going to add
an object into another object by doing
the spread each property of the LML get
out of the curly bracket and go inside
the crease here what I'm going to say
shoes are going to be equal to the user
that underscore ID so the user who is
their own I'm gonna say so now my
service is working and now I get some
air RSA is Texas too long because
remember we have the moxx running right
there and the mocks send a paragraph and
I think the paragraph is just too long
so what I'm going to stand is I'm going
to send Lauren let's send things like
that yeah and I was working so just to
beat mixture on my tweet ear and now you
see as I returned from each tweet and
don't worry we're going to change this
this much but now what I'm going to do
is I'm going to paste it first thing is
I'm going to sign up I'm going to sign
up and get a creator users I'm going to
think my token and don't forget this is
a graphical application I'm going to add
this to the documentation so after that
what we can do is just copy paste your
token right there go inside tweet tweet
go edit HTTP header right there
change the bearer because remember with
the mocks we always logout and stuff
like that because we always create new
user so that we're going to change that
after that don't worry about this yeah
I'm going to create a mutation I'm going
to seek retweet when I say text I'm
going to say I'm going to create one
called yellow well just to be sure I'm
gonna say text and now I'm going to make
a tweet and I sent yellow well now I'm
going to go to my room woman go I'm
gonna run command / - refreshing and now
this one has seven fields so this is a
really good sign now if I open it boom
aah the user ID here who finish with six
for D so if I go to my user and I check
the one I've just screwed right there
you finished by six for D so that should
be the good one so now we have just add
the user as the reference for the the
tweet but now maybe one of your question
is okay yeah perfect understand this
phone but how can access this I mean
here
if I create a tree like that I do this
is refreshing Oh No
yeah that's okay I'm gonna sign up again
sorry because I save in that refreshing
don't don't worry we're gonna change
that I'm going to drum here then we move
this and now I'm going to secrete whit
perfect and I'm going to see use our so
I want to have the user and here you
know Jackie will know that stuff so you
can say like username on to maybe see
email but now if I do this I get
returned cannot be nil no need a bill
fill user email so what that mean it's
finally graphical don't like to find the
user so this is what happening right
there and we get this response because
we see cannot return nil because in the
schema we put this dang symbol right
there but the thing is how can we make
that working and get the user with that
we're going to be producing that we jump
inside the index of the result world
right there after the date we're gonna
send user right there that week curry so
when we get the tweet aggressor then I
came here and get I see okay so this is
like the user we we're gonna die
structuring that because here it's going
to be the parent so this is what I told
you last time it's the parent so the
firearm is the object itself so for us
that's going to be the full tweet and
what I want is I'm going to desktop
stirring the user for me who I'm going
to own the other ID and now what I can
do from here it's I can join a data here
import my user model from the models
folder and now right there
I can say user that's fine and remember
that's going to be an ID and I'm going
to just pass the user from here nothing
more to do
by doing this now look what's gonna
happen so now that we run so now I'm
going to need to real sign up again I
sign up I'm gonna take this thing
now I'm gonna jump on the creeks tweet
I'm going to pass my headers right there
let's say and now our user username
email and now look at that I get the
username email and stuff like that
coming from the user
so now I've access to all this stuff and
just for showing you if I go to a
and get tweets yeah maybe not because
the other one don't have so we're gonna
do this right after to be sure at the
end so here now this is what we did we
make sure that when we create we put the
ID of the user if the treat and after
that another stuff I want to do before
we go further is I want to change the
much because now the mark the only thing
that mug do right now is to create tweet
but now we have user so now we can make
we can create user who's gonna create
week so now I'm going to change the
tweet at all to between because it's
really a lot I'm going to change the
user I'm going to see I'm going to want
to add three user ok here what I'm gonna
do is I'm going to go here at the top
I'm going to say up wait every that's
from I'm going to set a lamp I'm going
to use our total for each I'm going to
have an async function right there what
I don't need the first argument but I'm
going to need the index for doing
something like that right there I'm
going to create one user at that time
lexicons use are equal I'll wait user
that create so this is all you create
another user I'm going to say username
so this is what we need inside the user
model like it all this field here so I'm
going to fill them so I'm gonna figure
on am going to be equal to figure that
in turn up the user name this first name
be equal to figure that name that first
name going to be the same for the last
names I'm going to just take that
command D last name I'm going to see
emails going to be cool to figure that
internet that emails I'm going to add at
are going to be equal to a website at a
lot of people know it's when the muse or
sometimes even the user than me so it's
a website will give you like
sike use our information but yeah I just
want to get like a photo and I think a
we're gonna go with like woman and I'm
going to say here I for the index to get
like everyone's gonna have it is on one
so GPG and finally I'm going to say
password and this password I want to
know which is one because if I want to
log with this user we all gonna know the
password so it will get a create a user
after that when the user is create now I
can take this thing take it out here
like that oops
and now I'm going to create a tweet here
inside the disk to it I'm going to say
tweet create with the less intense like
that but now I can say use are going to
be equal to user that underscore ID so
the user who eats create right there
so by saving that now I'm going to jump
on the I turn and see what I can and now
I get fake are different enter username
external function so I get an error with
username because username take a big end
right there and now boom now it's all
three take a little more time because
now we create user so now we have three
user by default with some add at our
stuff so here because she was there
again deck 0 that's why she get the
refer to 0 you get a photo wall etc so
this is we have a user and now if we go
inside the tweet and I refreshing this
thing between now and the user so every
user at we 3 3 3 tweet and now that's
pretty awesome for us because now what
we can do let's go there sign up create
a new user take the token and now I can
came here do get tweet I'm going to put
the HTTP for for now let's say the same
I'm going to do a get tweet where I can
get all the text perfect I get the text
but now I can say also I want to add the
Huracan I guess also 0 but now I can say
user where I can say I want their
username so now you see I got a user
name of the user so if you use I've been
creat as three three three tweets sorry
and now you see I can get the user
can get also use email or email again
get this avatar stuff like that so this
is all you doing nested and with the
mouse it's pretty awesome to just like
this all that work because with the mock
that you just make more sense to see the
stuff here so this is all I like to make
marks and I know you can do some mugs
with just plain string with SQL and
stuff like that but I think I like one
that looks more real and now what I'm
going to do is that a to always need to
sign up so I'm gonna just I'm come in
this two line of code so now the mugs
gonna stop so now when I refreshing no
mods and now I can continue to get my
tweak perfect last thing I want to do
for this it is up its now I can create
wait that's perfect I can do the stuff
on the creation of the tweet this is
what we want we want to add attack but
now because we have this thing we can do
other stuff like other other kind of
security so for us what I mean by that
is now when you we update a tweet I want
to make sure then we if we update the
twist this is the twist you as create I
don't want you to update my tweet and I
don't want me to of the you tweet I want
to be sure that we who has been updated
is the one bill by like that the author
in flux so what I'm going to do here now
I'm going to just stick on tweet equal
tweet fine by IAD I'm going to remove
the return you're gonna see why in a
moment and now what I'm going to change
to it this one dong gonna be fine by ID
now is going to be assigned one so I'm
going to find a one tweet we have ID
like that and I use our equal to user
underscore ID what that means that we
want to make sure the author is their
thing so if I say is no tweet I'm going
to true a new error will say not fun we
don't even we don't even say you know
under to rise because maybe it will just
don't make sense ear because we don't
have one fit with that and now here
thing it
now we're going to need to change the
tweet himself we don't have access to
that it's fine by fine by D and update
so what I'm going to do is I'm going to
use the object entry
who is you pass your objects I'm going
to pass the object of rep because
remember there is going to look
something like that
like an object where I'm going to have
maybe like text going to be equal to now
lol and maybe I don't know like for a
red cones going to change to one
something like that so this is an object
so yeah I'm going to put that and I'm
going to sit for each because object
entry is going to create an aviary from
your object and I'm going to add an
arrow right inside I cannot access the
key and I'll shoot the value of it so
object that Keys give you only the keys
objective values give you only values
and object entries give you both key and
value and now you look watch what we can
do it just by going here and I make a
mistake because for each need to finish
my level now anything I need to do right
there I know what because of this boom
now I'm good we're attic tweet square
bracket key so this is all you do like
the dynamic key like dynamic property of
the object and I'm going to say equal
value now so what that mean is if I have
a text here I'm going to change the text
of the tweet if not I'm going to just
like you see like first thing this loop
down gonna go go go a lot because it's a
it make an array with the key and if I
have only one T gonna just run one time
and now again here I'm going to return
to eat that cake that's it and the thing
is the parameter so this is what the SQL
want and now if I go to my I turn
perfect as you so now just for testing
that I'm gonna get I'm gonna get one of
the tweet here
so this ID I'm going to run on occasion
remember I'm not this user and a mine
than me so update tweet I'm gonna say
text I'm going to say first thing ID I'm
going to put the ID and I'm going to say
text - I want to change out to parallel
and now I want to receive like the ID in
the text
if I do this I get tweeted a tweet that
save is another function well I know why
we forget to put away to the premises
didn't work so finally we just jump back
right to the tweet say so without the
tweets so now if I do this now I send
that I'm going to get that fun I'm not
the creator of this thing so I can add
fun but now if I do a get tweet when I
want every ID in the user and user name
just to get mine so I don't have one so
I'm going to go in a credit tweet change
my just copy-paste this thing oh we can
just do the mutation right there sorry
about that
retweet I'm going to say text hello well
I want to get the ID and that's it boom
now am i well you save have it in my DB
right there and this is by me perfect
now I want to update this things up if I
say update tweet and I take this ID in
that pass it right there like that you
see now I have no error but I keep this
in tighter I do this now it will become
with 3.3 bang and now treebank so you
should we made sure then someone else
can update it so this is perfect and now
we can do the same with the DD sorry can
do the same with the daily going to be
almost the same pattern you can't tweet
equal oh wait TweetDeck fine fine one so
by oh yes I can find my ID and check if
the author ID is the same but now I can
do this in one stop and I think that
make more sense from here I can do the
same stuff is no tweet I'm going to send
the same error right there
now here I can see after that if that
doesn't mean this is the Attar can see
tweet that remove like that
and now after that I return that delete
message and this is just by doing this
can keep the same three I'm going to put
a mutation fish an BD tweet ID at this
one and I want to return the message we
get success and back isn't there anymore
we have the security that's perfect this
is what we want now we're gonna just do
a laugh lasting for now and it's going
to be a pretty simple like it just like
an applause because we're going to need
that for the app and I think we can just
do this right now
here I get the tweet I get one tweet I
get every tweet but I want to get the
user or tweet so get user tweet going to
be anything function like that
why arrow but finally we're going to do
everything we do on the other one like
that the only difference is now I can
copy/paste this thing like that
the only friends I'm going to add it see
I'm gonna see use are equal to user
that's on the Scottie like that so now
the only thing I'm going to need to do
after that if I can jump on my schema
I'm gonna create this tree yeah use your
tweets or I'm going to return an array
of tweets so now just to make sure we
have no air are now if I refreshing this
thing I'm supposed to are there it gets
your tweets perfect and now what I'm
going to do is I'm going to say get user
tweets I want to tick and maybe the ID
like that
now I have nothing because I have no
tweet about so what I can do is I'm
going to create one then I speak to
hello world one make sure is worth it oh
well - and then with what three like
that and now if I do get user tweet and
I want to get my ID in the text I get an
error about that how do you actually
make it and there are right there
I see return
don't work I think yeah right there I
need to say yes use our tweet need to
add that to my index resolver this is s
that I almost always Folger and now I
get only my three tweets so if I run get
tweet yeah I get every tweet so you just
to make sure this is the everyone as I
say username I get mine and I get
everyone else and if I change that to be
get user tweet I get only mine
perfect so that was this for this one so
what we going to do for the next one is
I've created a kind of below page setup
just the mobile side because I don't
want to lose too much time on it so this
is something we're going to do on the
next one we're going to just start with
the Expo and start with the project and
we're going to do the setup of Apollo
client on it and that's going to be that
and the second one after that we're
going to start to do some get and give
some design in the front end so I hope
you enjoyed this one and without mirror
as a good day bye</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>