<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Build a Twitter Clone with Apollo Graphql &amp; React-Native - Part: 16-Prelude | Coder Coacher - Coaching Coders</title><meta content="Build a Twitter Clone with Apollo Graphql &amp; React-Native - Part: 16-Prelude - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/EQuimper/">EQuimper</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Build a Twitter Clone with Apollo Graphql &amp; React-Native - Part: 16-Prelude</b></h2><h5 class="post__date">2017-08-26</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/h6m1gs9OjB4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello yuan in this part we're going to
start talking about how we can favorite
a tweet so this is what we need to do as
a feature so so we're gonna do this in
two parts so the first part is going to
be about talking about what are we gonna
do and the second part is gonna be about
cutting this this thing and we're gonna
do this in the server first so what I'm
gonna show you this is what we have
right now so we have a use our
collection and we have a tweet
collection this is what we have you know
it's no sequel we have no way to do kind
of join table stuff like you can do them
with sequel database like post us or
sequel picture ever
so all can we do the now we can we do
with a favorite tweet you have to kind
of voice some people are gonna say why
just don't add inside the use are maybe
a feel cowl and I don't know like
separate separate tweet maybe like that
and just put an array of object we're
here what we're gonna do
it's it's add the ref and schema type
object ID from the tweet this is a way I
think like we can see this I mean this
is a good way this is a good kind of
pattern all the second people what
they're gonna do is they're gonna do
here they're gonna make an arrow ear of
user server it or something like that
and ear that's going to be the airway of
the ID of the user so this is another
way so this way that we can have the
land of how many poverty I'll accelerate
shadow upon the thing it I don't think
that can scale the thing is I don't know
if you know but MongoDB you don't have
infinity size for the document
have a maximum size an item if this is
16 megabyte and the thing about that
it's you just need to make that a way
that's going to be easier for you to to
like to to scale what I mean by that
it's I don't think this suite is gonna
really scale why is because my user if I
start with a lot of stuff in my user and
now it's easy because we have tweet but
maybe we're gonna want use order to
follow another user actually I'm
actually we're so if the user follow
1000 people any app suffer it the 10,000
tweet what are we gonna do you're gonna
add a big user object that's gonna be
crazy we're gonna lose yourself inside
that so I think the way I'm gonna show
you it's really not the best way I mean
I'm new in programming I learn
programming in the past year so what
I've shown you always it's what I've
learned in my quest to become a web
developer I really hope you enjoy what I
can show you so I'm gonna just show you
what I use on one of my client before
and I think that it was pretty much to
do what what I want to do so what I'm
gonna show you it's this thing we're
gonna finally create another collection
called favor retweet this collection is
gonna be like a joint table so what are
we gonna do finally it's when we're
gonna create a users we're gonna add
some codes for that so we're gonna
create a user and we're gonna create is
own collection after the retweet because
we know inside this application the user
can favorite tweet so as the user create
himself in the signup request we're
gonna create a table called tsavorite
tweet this table is going to be first
thing unique for the user so the user
can have only one primary table and
you're gonna have one by default so it's
going to be an empty it's gonna be a
table with an entire area of tweet by
default after that we're gonna add an
index indexation on that so that's gonna
make the request for the get the request
for the tree a faster so MongoDB gonna
index by D for MongoDB index only the ID
but you can add another index and I'm
gonna add the index of the user ID back
because when
so I don't care about the tweet I care
about this user I search the street
follow these three so when they use
always sign up we're going to create a
favorite tweet in same time and we're
gonna put his user ID right there after
that we're gonna start that with an
empty array of tweet we're gonna have a
reference for the other tweets sorry for
the three collections so my plan about
that what we're gonna do finally it's
we're gonna tree another resolve are
this resolved are gonna react take the
ID of the tweet the user is like em1
click on that we're gonna first thing
search if the user have already the
street ID inside the highway of street
right there
why do this because some people are
gonna say oh really favorite and I unsub
a real resolve are about why I mean you
can do kind of if request because if you
don't do this if request you need to do
this if request somewhere you need to
search if you add it already so by doing
this what I want to do is my favorite
Twitter resolver gunner first thing find
the favorite recollection coming from
the user we're gonna get that coming
from the the user context
after that we first thing search if the
ID is present inside this tweet array if
it's not present we're gonna add the
tweet inside the array if it's prism
we're gonna just remove it so that's
going to be an unfavorable but this is
not this is not done here you see we
have a favorite con so what we're gonna
do it's when I further riff my tweet I'm
gonna call this tweet with the function
I'm going to create another static
function we're gonna finally increment
the number air by one if the favorite
it's true but if the favorite it's fall
so I mean we have a firmer it before and
we need to unsavory I'm gonna remove one
from the favorite so this way you need
to do you can follow like the
the number of our can what we want the
favorite gun is because we want to show
that to the UI so I hope you understand
when I just say I favor it TWIC resolve
are my twitter ID get at the bottom with
my user context I search the favorite
tweet collection from the user if the
users are gonna have one because we do
this and they sign up after that we
check if the tweet ID we just father it
is already in the tweet if not we're
going to father it and we're going to
increment the favorite gun
if is already we're gonna remove it from
the tweet array and we're gonna um
remove one from the favorite one but
this is the last thing please stay with
me we're gonna add another feature to
when we do the resolver right now so if
I go to my visual studio code if I do to
my resolve are right now and my result
my schema right now when I did my
resolve are my tweet this is what I got
I got the ID the text the user decipher
it come to create add and update that
but what I told you in the past episode
is always remember the app is for the
viewer
so only one people so what can we do
here to make this app easier for the
folder like a front-end developer to get
the data so what I mean by that it's you
know we're gonna need to show the earth
like you know the icon earth is gonna be
red if it's already like and blank if
it's not so I don't want my friend death
to like get the area of Twitter and do
the the the the legit about that I ate
when I got this time carrying of stuff
when I'm the front end and my back end
it just tool easy to make stuff I really
ate that I like when my back end gives
me access to everything and what I mean
by that it one of the thing we're gonna
add here we can all really I'm gonna be
his favorite who's going to be a boolean
this is what we're going to receive -
and that's what that for now so what I
mean it's now when my friend I'm gonna
receive the array of tweet you're gonna
have a boolean called is favor real
inside that so the east favori
gonna be true if you add it inside your
favorite tweet collection and false if
not so this way my friend don't need to
do almost nothing you show red if true
is show blank if false and when you're
gonna click the like we're gonna add
that with subscription so that's going
to always follow with the true and false
plus we can do this with optimistic UI
so you're gonna see is gonna be pretty
simple for the friend we do a lot in the
backend to my different and easier and
this is what I really want you to
understand it we we need to put this way
because we want to add the live either
in the front end now with every kind of
application we build right now it's a
lot of UI stuff we do a lot in the the
front end and adjusting some time I
already I get some back-end developer
before we give me a project and I was
like I was almost doing everything I
mean I was almost doing 85% of the job
of everything and if I was to doing this
well will I've done this with fire bags
and don't have a back-end developer
because it didn't do nothing what I mean
by that it I want you to see then you
can remove some complication just by
building a better swimmer side stuff
here and you're gonna see what the is
favorite ear the front end gonna love it
you're gonna just see that that's gonna
be out full so I hope you enjoy so I'm
gonna I'm gonna stop this video and I'm
gonna record the second one so I hope
you enjoy and we talk later bye</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>