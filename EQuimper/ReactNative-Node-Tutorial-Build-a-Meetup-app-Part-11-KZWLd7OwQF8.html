<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>React-Native &amp; Node Tutorial - Build a Meetup app [Part: 11] | Coder Coacher - Coaching Coders</title><meta content="React-Native &amp; Node Tutorial - Build a Meetup app [Part: 11] - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/EQuimper/">EQuimper</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>React-Native &amp; Node Tutorial - Build a Meetup app [Part: 11]</b></h2><h5 class="post__date">2017-04-15</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/KZWLd7OwQF8" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hey guys so this visa so we are in the
episode 11 we're going to set up the
Facebook flow attached occasion in the
server so not in the mobile the mobile
going to be in the next 50 sir but today
what I want to do is to just set up the
server to receive the facebook talkin to
make attached acacia so the plan for
today is to change the usual model
because last time we just make it really
quick and after that I want to show you
the autoxidation attached occasion flow
and we going to set up the facebook at
education and going to set up some
helper and i'm going to show you a
response we're going to receive so we're
going to jump in the model right there
in the user schema and we can have
change some stuff here because now it is
the email but we want much more so what
I want to ask you from my user is going
to be is full name so there's going to
be a string here's the email going to be
string type string but I want it to be
unique to two I don't want the user to
add more than one icon at the duck here
what I'm going to add if I'm going to
have a tour so avatar going to be
example with facebook that's going to be
this profile picture image so that here
what I want is provide our data so you
remember I told you we can have google
notifications and facebook so area just
a way for us to know which which one you
use for that occasion so here I'm gonna
say you ID so that's going to be the UID
from unique ID from the provider side
after that you're gonna have provider
here and that's going to be a string so
here that's going to be a string for
facebook and google we're going to make
an enum here in the future but not right
now any refinery we're going to add type
them to be true because i want to know
when my user I've been created and I
want to know
oh yeah ow you get updates so here
inside my youtube I'm going to clean now
a face book out the ga so that's going
to be why we're going to have the
facebook at obfuscation and solve using
this we're going to need some kind of
HTTP request library so we're going to
use the same we use in the front end so
we're going to use axial so what I'm
going to be installing an import axios
from exhales after that ear yeah we're
going to create a sinc function go
Facebook out whoo then I take a spoken
and here we're gonna have a try in a
catch in here we just going to return
the error for now so where this token is
coming so this is the little diagram I
bill and so what happened is finally
when we going to attach skate with the
mobile we're going to ask for a token
with some scope to facebook so with
exponential 800 is is that so we're
going to toggle the webpage for facebook
at acacia and if the user enter
everything like a Saturnian email we're
going to have a response inside the
double by with a token after that this
to camp we're going to send it to the
server so yours over after that we can
extend this token back to facebook to as
a credential of the user and so example
we can ask for a data it's a profile
image is email and it's everything we
want after that facebook gonna return
and user object and finally we're going
to say to the database
yet I know some people here do the
facebook credential asking right in the
mobile but I think for security propose
is better to just send a token back to
the server and the server and ask for
the user credentials if you want to see
all that looks like it's when we ask it
with the token so here example that's
going to be what we're going to ask so
the graph with the email name and
password and then we have the token and
example here I receive my email my name
here inside my picture I'm going to have
the URL of my avatar Andy Reid the UID
of the State Board of Education so this
kind of request here gonna be the same
for us so mobile as for the token when
you receive a token you send it to the
server server ask your facebook for the
credential receive the user credentials
and say to the DB so here what are we
going to do but we can add a current
data so we're going to destructuring the
response i wait exhale with that get
equal sorry Axl that gap and here that's
going to be why are we going to put the
URL for the HTTP request off HTTP a
graph the facebook.com the brush me feel
so what we ask I want to have is email
name and picture and after that i want
i'm going to add your access token and
arrow finally because we use back tip
winner equal because we use back tip i'm
gonna put the variable to go and i'm
going to add the curly bracket and at
the end i'm going to return the data so
you have to book me feel email name
picture and access token so finally is
the same of what I've asked right there
but now the tape now that's going to be
hard for you because you don't really
know maybe what Google gonna show but
the data is not model as the same way
like here we have the email name and
picture like that an ID but I think it
with Google we receive the name as a
given name and the last name so that's
why we're going to change or what I've
this is to do is to create a util five
year with user info get user info that
yes and this one that's going to be
where I'm going to module my user before
we push the database so get use our info
we see keeping data and provider just
forget the provider name here what we
going to do is I'm going to creat to
lure your ball let's full name and let
avatar why because this is the two place
where it's not the same like that object
on came as the same here what I'm going
to do it if provider equal Google yes I
know we don't have it but trust me on
that that's going to be this way in here
that's going to be facebook so if the
provider is google the full name going
to be equal to back tip dollar sign
curly bracket Bella that given name
space data the family name so if you see
my dad I going to be my user object from
the response and the provider just
forgive us an ID ear for the if so that
you the avatar in Google going to be
equal to data that picture for facebook
full name going to be equal to data that
name so this is this response right
there but now picture is inside picture
data that URL that's why I create a
variable for this one so data that
picture that data the URL and now fine
the air what we're going to do is we're
going to return an object with a full
name with avatar yes tech don't need to
have the key value email is going to be
equal to data that email both at the
same way provide our data going to be
equal to uid going to be equal to data
that ID and finally provider going to be
equal to the provider we give you so now
if we came back to the Facebook a
sophistication hear what the only thing
we're going to need to do is return i'm
going to import it first I've got to
import it first get user info from get
user info right there and hear what I'm
going to do I'm going to return get user
info data so the data we see and now
here I'm going to just say facebook now
I'm sure some people ask yeah but why
you just do with Facebook and do it if
else we are sure that going to came
today so you don't need to put facebook
it just because maybe in the future we
will have twitter or linkedin education
so in this way i can just keep my code
let you know for me so now we set up the
facebook at application so we received
the stuff and now what we can do is we
can already start to look in the
controller to model the way we're going
to make it so here i'm going to import
from my youthful folder and facebook
group please group out i'm gonna import
facebook out and now here what i'm going
to do it's going to be really easy i'm
going to add the provider coming from
the back burner in the to camp after
that here i'm gonna do i'm going to make
a big try castro i'm going to remove it
just to restart with you
try gap here whenever we're going to
just return a status fun dress with a
JSON object with error to be true an
error message to equal e that message
for the message so it's an object and
you have a message key on it so now here
what we can do is now here I'm going to
create left user info so available
userinfo anytime I try catch now what
I'm going to do is if provider equal
each provider equal google + else and so
there's going to be facebook here it's
going to be user info equal avoid and
we're going to do stuff here so do
google out here and here what we're
gonna do there's going to be user info
equal away wait facebook out and now I'm
gonna pass it the toolkit is going to
bear the facebook I'll just take the two
here and now so we get the user info
after that here that's going to be the
place where we're going to create the
user so here what i can do is I'm going
to do current user equal avoid that user
that and now this is the place why we
need to have some logic now when I'm
creating a user like yes if the email
its unique I'm going to just receive an
error but the thing is if I use our
logging to my appt with Facebook the
first time any we log in to money and
don't remember we filled up with
facebook and you're going to go with
Google's I want to give him the same
pitch a credential enough you sir
so here what I'm good I think about
making it here i'm going to create a
static function call sign or create or
find out create a user on going to be
anything function what are you going to
receive argument and ear i'm going to do
current user equal avoid this so this
mean the user schema find one with the
email and that's going to be coming from
park the email like that so finally I'm
going to just find if the user at email
like the email coming from the dealer
there's a Facebook stuff and now because
here i'm going to add it from my user
info i'm gonna have access to the full
name for you for security can say or
that full name just for saying mean to
add the same email in the same funding
just to get be sure this is there the
user and because i do this here i can do
a try catch and then i'm going to return
the key if i have an error here what i
can see if I have no use are so if they
use are donning their i'm going to hear
return I'm gonna make it I wait this
that create art with the argument we
receive elk I'm gonna return the user
because we're going to use the return
I'm gonna do return user here and now
here I am going to just return like that
so we try to find the Yuuzhan if you
have and I are we going to return it as
if we have no user I'm gonna gradient
else I'm going to return my user that's
nothing more to do so now inside my
controller now what i can do is air con
cesar going to be equal to user that's
fine or creates or the function we just
create and now i'm going to put the
userinfo and after that air we're going
to return a rare that status 200 with a
JSON object with a success of true and
the use our for now what I want to send
it the ID of the user nothing more so
idea of the user and like in the
laughter I'm going to return as token
with a GWT create so can user why I
don't send something else cuz first
thing security why I standard ID because
I'm Bella in the idea just to make some
kind of EFSA's pose I wanted to see a
button to delete else because I don't
want to decode my GWT in the front end
so in this way at least i'm going to
keep the ID but i'm going to do all my
transaction with the to turn and so now
that we're gonna be done for this it's
yeah so we just set up the logging a
subscription with Facebook just to get
ready in the next exam we're going to
finish google that's going to be really
quick and after that we're going to
start to play with the mobile and make
the request with facebook and google and
i'm going to show you how to create
other application with facebook and
google to and after that that's going to
be much more easy to start to making
some stuff on the meetup app so i hope
you enjoyed the ibiza we subscribe hit
the like button if you enjoyed this it
is a just let me know in a comment if i
make some kind of mistake and have a
good weekend bye</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>