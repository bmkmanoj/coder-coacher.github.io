<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>JavaFX Event System Walk-through | Coder Coacher - Coaching Coders</title><meta content="JavaFX Event System Walk-through - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Learning-Library/">Oracle Learning Library</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>JavaFX Event System Walk-through</b></h2><h5 class="post__date">2013-01-29</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/PNLNEzXcZE4" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">okay I think we can start good evening
my name is Eva creaky Java and I work in
Java client organization in Oracle and I
am part of the team which is responsible
for the center of implementation in Java
FX and today I'd like to talk to you
about how event system in Java FX works
so first I'll try to talk a little bit
about the classes which are used in
event system then I will talk about how
the events are delivered and how you can
handle them and in the end I will also
mention some specifics about keyboard
mouse events and about multi-touch which
is new in Java FX - okay so the most
important class in the event system is
class which is called event it's it
actually apparently represents something
which happens in the system like mostly
it's some new direction like mouse click
or TRS or when you close the window the
event is a base class
for all these events it has some common
properties like type source and target
and then just special objects they have
like key event they have their own
properties like coordinates for amongst
event and key code for given another
important class which you need to know
is event handler this is actually an
interface and you as a programmer in
Java effects implement its handle metal
and there you put what you want to do
when some event happens and you can also
consume the event a medicinal method
this means that the event propagation
will stop the event actually travels
through the singer when
it's fired so we will stop this from
happening then there is event source and
even target event source is the object
on which to handle method was called
from demon hunter and event target is
the object which is the destination of
the event this is like the note which is
under cursor or focused note for key
events and so on and then each event has
also event time which further specifies
what kind of event is this like for most
events it starts with the repressed or
clicked or move the mouse or for key
events very pressed repeating but
okay so here this picture shows how the
event hierarchy looks like this is only
subset of event her--he there are much
more events in the system but these are
the important ones so you see that the
event object is the base object for all
events in Java effects then we have
input development events announcements
and home okay so how are the events
delivered this process actually has four
steps first the node to which the event
base should be deliberately selected
this is this depends on the type of the
event like as I said before for most
events this is the node which is under
the most cursor and for key event is the
focus mode then the event or
disconnected the event basically travels
from stage to the target node and then
it was back so from this target node we
created a route up to the stage and then
there are two phases first one is even
capturing phase when the event arose
from the stage to the target node and
then there is event bubbling phase when
the event travels back to the stage so I
have here a little demo to show you this
okay so here on the right side it's a
simple scene with rectangle and circle
and triangle in panel and when I click
here it changes the color and here on
the left side you can see the scene
graph of this simple scene and when I
click here I can then reply how to event
travel solar system so first I just
click on the rectangle and I see and on
the right side you can also see which is
the current face and what kind of an
event is currently handled so I clicked
on drew all right angle of the rectangle
was started as the target and then the
route to the stage was constructed and
now the event starts traveling super
singer so first it's on the stage dance
scene not rectangle this was even
capturing face and now it turns back
from rectangle to not to scene to stage
ok this was that we actually didn't
handle an event now so I can select some
handler here you will see under hand
Louis called I can have it for example
and mouse clicking rectangle and or
stage maybe a circle here panel so I
click on the circle now circle is
selected as a target again the road is
constructed and outer event travels
okay stages inner circle this was
capturing face and then back in a green
face so first hundred for the circle is
called the right side you can see that
the event is being handled and events
versus target and event target event
sources circle and the event target is
also circle and here on panel when the
event is handled you will see that the
event source changed to panel and event
target stays the same again on stage the
event source is stage the event target a
circle so another thing what I can do is
add some filter here I have a filter for
example you will see that the filters
are called
during event capturing face so now the
folder will be called at now again
I can also consume the event and when I
do it here and I know no I see the car
doesn't change now because I stopped the
event from propagated so it actually
never gets to the circle so see the
circle was again selected as a target
they even starts traveling but here the
filter consumes it and even deliver
stops this ok so here's some summary of
the important stuff would I just
children well the most important one is
that filters are called during even
capturing face and handers are called
during event a bubbling face this
actually means that the filters are
always cold before handlers and another
important stuff is that target doesn't
change it's always the non-visual
selected at the beginning but the source
changes as even passes the scene
yes you can
okay so now a little bit about event
types so the event father specifies what
the type r specifies what kind of event
it is what I mean is you have most
events then you have Mouse breast mouse
release mouse moved event types you can
use them when you register your event
handler or event filter and they also
form a hierarchy here is picture which
shows how do her he looks like so there
is some route route event type which is
called event na or even rules that's the
same and then it has subclasses input
event any action event and so on and
then from input event na and the
subclasses are key event any and even
compress and so on so you can actually
this means that you can actually
register a handler for all for all key
events or for all input events or
events okay so event handling you can
have you can define your own event
sorry
you
that's let's see let's take it the fine
after yes
it's okay I didn't do so if for example
I do the treatment
yes yes this is the same okay so
I don't know
I don't didn't notice any time okay so
I will explain it later so I will talk
about it even had link now so to handle
an event you have three options you can
either use convenience method like here
the example is subtlety first which are
defined on a node or other genetic
subjects and you can add event handler
where you specify the event type and
then your event $10 or and very similar
metal at event filter our view can
change the event dispatcher for an hour
this is actually kind of out of scope of
this presentation presentation but you
can totally override how the event
service orders in Europe but I believe
that 99.9% of the time you wouldn't want
to do it a little bit because you
probably sufficient these first two
options
so this convenience method actually
there are some properties defined on all
like almost pressed
which have getters and setters and so
we're cetera you can set the event
handler for this property they have some
limitations they are can be used only
for handlers not for filters and you
cannot only run event handler by this by
this convenience methods and also they
are they don't exist for all the event
types but only for the event types we
considered to be the most important ones
okay I have example here I have here a
declaration of almost clicked and on key
pressed methods you will see that they
take event handler for their respective
types of events and you can actually put
their event handler for any rightful
mouse click you can put their event
handler for most event or any superclass
like input event or just event so here's
example however use it just simply
create new in Denver and then we have on
the matter
what you can also do is you can use one
event under four more of these event
types so I have here event handler which
takes input event and then I can use it
for both marks pressed or P pressed
events
like that in Katie's mom okay
well I think it's implemented in a way
when we get it from the system
I like it terrorists it's too loose in
Europe but I don't know the underlying
stuff I don't like the top layer so I
can't tell you whether this is I really
do always okay we continue with this you
can also at your event handlers or
filters with up even hundred kilometers
you can actually register more event
handlers for one event type or you can
register one event handler for all cause
of events like you can register even
hundred for all input events and so on
and when you have this kind of
when you do this kind of stuff and you
have several event handlers on a note
and then first event handlers for the
most specific event types are called and
then for the generic months and for the
event handlers on the same level it's
it's not specified to the order but what
is specified is that those set on
depressed hunters are always executed
last okay so here's the declaration of
the event handler method and I see that
it's generic so what it ensures that you
casually cannot use incorrect type of
event handler so you can add event
handler for Mouse cricket you cannot
even handle a rich text Mouse event or
you cannot even handle which takes input
event but you cannot event handler which
takes key given because this who don't
compile and I have also here some coding
practices this
okay so this is actually some something
but what I saw from some user of JavaFX
which was he was trying to do this like
at even hundred for all those events and
then check in and no matter what kind of
event type you get and he had this huge
if-else where he did some stuff so
please don't do this but what you should
do is have several event handlers and
set them for specific event types
I used to grow
yes
remember we
some kind of faith
I will be to think about this
was injured
okay well that's looks like it's offline
I won't think about what you want yeah
oh oh you are doing something else there
this is for when you want to do
something yes yes it means so this was
interplay in a on this slide to know all
of these centers are executives for if
you press the mouse then both this set
or mousepressed its executive and this
yeah yeah the bottom line is executed
soon yeah I talked about it is
no the most specific are code first and
then more it's it's not specified it's
not it's arbitrary well I don't I would
have to look at the code and I have but
it's not a guarantee I would have to
look at the code from fanciest
okay so
is
say tonight
so you can remove listeners from the
notification process while termination
process is happening go like its swing
if the mouse listener its call for
instance like remove that house was
there from the list a threat
like only the first kindest thing is
clicked about a handless the member to
Damascus because eventlistener less de
chores that the listeners will you can
form changes to the listeners but the
state which they were initially called
us reserve the entire time that
do you understand the question I think I
do people who we've met swayed poorly
and implement custom listeners do this -
Derek people's new ArrayList and
occupation exceptions because they're
constantly removing listeners list so
what happens if my remove itself from
sorcerer Department or whatever it is
Wow Wow Pet pet as the last step in
process
I
like
once that processing begins
because you're a hero that means
something you're not
yeah I think I understand what do you
want to ask about well I don't know
yeah okay so and I'd like to talk to you
about went to his handler and Windu's
filter so you're actually on a leaf node
2 will always want to use and learn
mostly but on a branch node it depends
on what do you want to achieve if you
want to provide some default response
you out and learn and if you want to
prevent the event from reaching the
child you put and filter like I have
example really really simple example
here UI I press up MIT and I won't
rewrite a spot stop responding so what I
did here is that I created simple event
filter like event handler which I will
use as a filter which only the only
think it does is that it consumes two
event and then when I press the button I
blur
I make the progress indicator visible
and then I added this event filter
I think it will not good to go
yes
okay so
he presses and so on so events are
always delivered to the node which has
focus and how do you make note focus to
be focused you can request focus on it
and you need to set focus there are
several to two and then day the events
are key events behave like older events
they bubble and so on most immense they
are but oh there's nothing like really
hard there take the site
so we sent away to lying flat but the
focus on her is just like did it felt
like
you're a mechanic at it hard for me once
let's take all this up like these
because I think I will not be able to
finish this Mouse events so most events
are delivered to a node which is baked
so it's they are also they also Trevor
surah Sameera as I told you before and
the important stuff here is how I found
which node will be picked so it's the
first node which is under cursor which
is not most transparent most transparent
is a property which is control valid by
you as a programmer and what you can
also change is a typical man's property
which controls whether the geometric
shape of the room will be used for
picking or the bounce of
the Beast for baking what this means is
when you have an image which is
transparent for example then when to
pick on bounce is false and you click on
the transparent pixels you will not get
an event but when you change pick on
bounce to true then you will the most
event is then sent to the pic no tit
travel super senior up again but what
you should not know is that JavaFX UI
controls on are implemented in a way
that they consume Mouse events so if you
use them it will seem that they do not
bubble but they actually do forced under
counts I have here an example of one
decision we had to make made when we
implemented Mouse events so this is
about mobs moved and among most entered
and exited event handlers so here I have
implementation when I
a simple scene where I change car Amanda
Knox enters the scene and enters the
circle triangle and changes the car back
when I leave the triangle so if the
event bubbled in the same way as all the
others who I would get animals entered
when I entered the rectangle and most
entered again when I enter the triangle
and now I would get most exited when I
leave the triangle but also the parent
know which is your rectangle would get
or pain would get a mouse exited so and
what we want to do with this
so how we how we did it
this is just a summary of what we wanted
to achieve so what we actually did is
that we have one still one event but we
change the event time during delivery so
for we have Ana we added another event
type
it's called mouse under target or
negative target and it's called it this
one the event has this type for all
handlers or filters which are on the
rest of the nodes except for the target
node so here is the pollination of this
so still the event type is our center
target and when it reaches the real
target it changes into mouse unturned
and when it goes up it changes again to
more Center target and mouse entered is
actually a subclass of most entered
target so this means that when you
register and even
for most Center target evil still it was
target for this mouse and 30 events so
when you in the venue a register event
handler only for off-centered you will
get it only for the leaf nodes with only
four notes on which you registered it
this is basic level two you wanted to
add she froze most of the time then I
have here something about dragon drop so
Java fix supports three kinds of drag
and drop first the simple vana its it
starts automatically when you start
dragging on an object and then all
subsequent most events are direct to
this object and you can use this when
you want to move your moves new objects
around the scene or scale it and so on
then there is something we call for
personal career gesture you started when
you call start full drag in drug
detective event handler and this one it
will use when you
to manipulate more nodes in the scene
graph by dragging and then there's a
platform supported drag-and-drop and
this is again activated by calling start
again row I have another example here
to show this I created this simple
connect the dots of the moon where when
I press ctrl I can move the image around
and then I can connect the dots like
this and I can also move the picture
other program like you
but how it is done so this case it's
very simple I only implement the hundred
four most direct even type and I change
the translate weeks and translate if so
then the second one
collecting directing the roads so first
in drug-addicted I make it online brow
I also changes through it and here is
the important one is start full drug
that's is when I set assists I tell the
system that I wanted to use this phone
where exactly is gesture okay when I am
dragging the mouse I am changing the
coordinates and and point of line and
when I enter some other circle with the
line I change the car a life and I leave
it I changed the color back green to
black and I think if when I raise the
mouse inside the circle I change the
color of the line black I change
disrobing
but from supporting their gander up here
I just call start drag and drop I get
dragged bored from this method and I
create snapshots of damage at dinner and
that's all I we do for drag and drop to
work I actually don't have the another
option like dragging the Sun picture
from another application to this I don't
have discipline in this case okay and a
little bit about multi-touch so now the
touch is you enjoy effects since 2.2 we
added support for both gestures and for
single touch events and all of the
events from from the one gesture is are
directed to know which was selected at
the beginning and we also have support
for inertia but this is what from
dependent ok
touch events touch events we will get
event every time you touch your screen
if you touch the screen with more
fingers we will get touch event for
every touch but you can also get a list
of touch points for other events also
every touch event also generates Mouse
events so if you already have some
application which handles Mouse events
it will work on also on touch enabled
devices but you need to make sure that
you don't handle it advice and you do
this by checking to what is synthesised
returns
or my house
I don't think you can create Mouse
events right now yourself because they
don't have constructors but I think it's
planned but you cannot do it right now
you call fire under event okay so and
then I will just tell you what kind of
gestures we support so there are four of
them rotate this is standard standard
gesture two or more fingers and you can
from the event you will you can get an
angle it's the angle of one event or the
total I get angle of thought of the
whole gesture and the target of this
event is the topmost node at the center
of center of all patches this means when
you do the gesture with more more
fingers it's Alex to the one in the
center this is actually true for all
other gestures
except for swipe okay then there's ooh
who's for zooming you'll get zoom factor
from it
scroll scroll it's kind of special
because you first do if you do it on a
touch enabled device you will get north
scroll started then several scroll
events and then scroll finished it's
actually the same with rotate and zoom
this one but you will also get scroll
events when you use your do wheel on
your mouse
but scroll events only no school started
and scope finished and I you will get
amount of what line or amount of pixels
you need to change from the scroll event
and the last one is like event swipe
event is different from swipe gesture is
different from all the other gestures in
that it only generates one event for the
whole gesture and there are four events
for four different directions and also
during this vibe events also suggested
also generates scroll events but
what is important here is that the
school events may have different target
because the target for my event is the
object with which is at the center of
the whole gesture while the target for
underscore events is the one which is
selected at the beginning and also if
you want to know more about multi-touch
co-worker of mine has both here in an
hour when he will present this whole
stuff in more detail so I suggest you go
there so I think that's basically it and
I actually think that we don't have much
time for questions now because people
are giving us closer than during the
presentation so we can change chin take
it off Island outside thank you for
coming here</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>