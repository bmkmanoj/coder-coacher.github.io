<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>50 Tips in 50 Minutes for GlassFish Fans | Coder Coacher - Coaching Coders</title><meta content="50 Tips in 50 Minutes for GlassFish Fans - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Learning-Library/">Oracle Learning Library</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>50 Tips in 50 Minutes for GlassFish Fans</b></h2><h5 class="post__date">2013-02-04</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/3n6jrMw405k" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">okay I think it's eleven-thirty it will
get started here this is 50 tips in 50
minutes for glassfish users will do a
quick introduction of myself and a rune
and then we'll you'll jump into the 50
tips in 15 minutes and then if we have
time left over and hopefully we will
we'll do a little Q a well ask that you
hold your questions to the very end
because as we said in the the summary
for this vegetation it's a very fast
paced presentation or try to cover tip
every minute so be moving through things
pretty quickly but at the end hopefully
we'll have some time and we'll we'll do
some Q&amp;amp;A so first a little about about
me my name is Chris caso I work on the
GlassFish project been working on it for
about two years now I mostly work in the
admin infrastructure area and today I'm
joined with arun gupta who i think many
of you probably know but you'll feel
free to say anything you like yeah hi my
name is arun gupta I've been with the
GlassFish team pretty much since his
beginning I'm also known as the
GlassFish guy so I guess we'll talk
about glassfish tips so glassfish i
guess it by raising hands how many
people are using glassfish now or
familiar with glassfish which is good
okay because this is not a this is not
an introduction to glassfish we kind of
just want to cover through cover things
that maybe if not known about glass fish
but but anyway just just in case you
know glass such is the java reference
implementation it's freely available if
you want to know more go to glassfish
java.net so the goals today as I
mentioned this is this is gonna be
fairly fast paced top fast paced
presentation we're going to cover a wide
range of topics we're prioritizing the
quantity without going too deep because
we just don't have time to go deep
hopefully this will introduce things
that you didn't know before and then
afterwards you can do a little more
research if you're interested in that or
you want to know how to how to really
use that in the end we kind of want you
to say oh I I didn't know I could do
that with some of these probably the
more seasoned use you you are probably
less likely you more likely you may
already be aware of the tip though this
presentation should be a good reference
for you but we also created a wiki so
for each of the tips that we have today
that we're presenting we go that wiki we
have a link that will take you to more
information about that tip sometimes it
takes you to the documentation sometimes
it takes you to blogs or what have you
where we gathered
we're gathered information will also
make this presentation available on that
wiki as well so that will be there too
so with that we will get started with
the first tip so as probably most of you
know if you're going to access the days
which is the domain administration
server remotely you need to authenticate
to it and if you do that often you have
to provide a username and password what
many don't know is we also provide a log
in command and so you can when you say s
admin you can use log in command to
authenticate to that server and those
credentials are maintained for you in
such that subsequent commands will react
tena Kate without you having to provide
that information what you may also know
is you can use login multiple times two
different gases so if you have multiple
dass's on the same system on different
ports or are there there are different
systems all together you can use login
multiple times it will maintain those
credentials for all of those such that
if if you subsequently you know execute
commands against that days you will not
be prompted so here's an example of
using the the AS admin login command
work prompts you for the the username
and password it gives you a little
warning because we going to store that
information in a file so that file needs
to be secured but then subsequent
execution of commands won't be prompted
for for a any authentication so that's
useful for speeding things up next on I
want to touch on is multi mode and this
is great for batch processing so for
example if you have a bunch of commands
that you'd like to send to the server
you do this often for example in this
case it's creating a cluster in the
instances to go with the cluster maybe
you have a bunch of applications you
routinely have to redeploy to the server
you can use multi mode which is very
useful in this case what I've done is
I've taken those commands I put them in
a vat in a file and then when I run the
command I give it that file name in the
subcommanders called multi mode in this
case it's going to execute all those
commands for you so so very easy if you
routinely up to repeat the same commands
over and over again throw them in a file
and you're good to go you can also type
commands into a s admin as well so folks
not may not be aware of that so in this
case if you if you're running a sad
event in a script you can put it in a
for loop and in this case we're creating
you know five local instance
is by piping that into a sm so another
way to kind of speed up you know if you
have a lot of routine tasks that you
have to do then we have a couple
environment variables i want to touch on
there's a debug environment variable and
this exposes this is great if you're if
you run into problems with the client
trying to actually to command against
the dads something going on you want to
try to get some more details you can
look in the server logs but this
actually allows you to see kind of
what's going on in the client site as
well so you said ask debugged a true you
execute the command and what you'll see
is some of the command processing
information you you'll see the URL that
we're actually using when we interact
with the day as and then the raw
response we get back to the server is
there as well and it looks something
like this I kind of cleaned it up and
reduced it just to fit on this one slide
there's more information that you'd
normally see but here I've set a s
debugger true i'm running the uptime
command here and i can't in this case
we're getting the raw response back this
is the string that you would normally
see in the output but you also see it
since back the value in milliseconds and
a few other things that are there and
this of course varies from command to
command in terms of what you see the
uptime command is pretty simple and then
we also have the a slog environment
variable which is which is useful to if
you run a lot of commands and you want
to go back and view kind of did they
exist succeed or not or if you want to
see if you have other administrators
using the system you want to see what
commands they have run and you have the
S log environment if they everybody sets
the a s log environment variable to the
same place you can go back and see what
commands have been executed in what
those that the exit status were of those
commands we use this a lot in our tests
so we have test suites that run new
thousands and thousands of commands and
if we come across a problem we want to
figure out okay well which command
triggered the problem we can go back and
look at this log file and see where
maybe the exit code started returning
one instead of 0 tell them that's where
the problem started so this is useful as
well for kind of debugging issues okay
I'm turn over to a room for the next
five that was pretty fast actually we
had a minute early we were we were
planning of having some fun here you
know switching the tips every minute or
so without that's too much you know for
us
and for the audience as well we'll give
you five tips in a sequence of five m5
me gonna take turns that way anyway so
ninety-five percent of you pretty much
are using glass fish today no yes we
have nightly builds promoted bills all
of those available for you we have
continuous integration that is available
to you but some of you want more
cutting-edge than that so for people
like you we have check out the workspace
and build yourself where you want to
debug the code where you want to play
around with it you know i'm using
glassfish version 3 11 and there's a
particular bug i'm facing over there i
want to attach my debugger to the entire
close-ish code base how many of you have
done that yeah see this is exactly what
I'm talking about like there are ten
hands in the room which have actually
attached your code to glassfish code
base so this would tell you exactly how
you can check out the workspace so it's
a simple svn check out drunk is where we
do the version on the latest edition of
java ee so java ee 7 this is where we're
working on we just need to set up maybe
10 pts and seedy glass fish and maven
and that's it so that'll build you know
the entire glass fish install you know
in a separate zip file that will be
available to you took about five minutes
on my machine if you probably built for
the very first time and a brand new
machine will download the entire
internet on your machine using maven so
may take a little longer but if you have
the internet on your machine this will
take about this much time you do need
JDK 16 you 22 plus because there are
some issues for the releases before that
in order to build it and if you are a
building trunk then you need maven 303
flus and if you're building 3 dot X or
any previous releases then you can do a
maven 221 as well now if you want to
check out a specific tag now we where we
will release we make sure we tag it
appropriately so if you want to check
out 311 or 312 then look at the last
command you know then instead of saying
svn check out which is the trunk you
could say sv and check out you can give
that URL at the bottom of the screen and
it will check out that specific version
installers well we build the workspace
when are we done with that now I want to
use something that is ready-made so
there are three flavors of installers
that we have their zip how many of you
use zip today
okay yeah I use it myself all the time
you know simple download it unzip it and
ready to roll you could also there's a
GUI installer as well you know there's a
three different flavors of GUI you know
week you could have on a Windows you
could have two flavors effect well three
actually so there's a Windows flavor
there's a linux unix mac flavor and
there is a AIX play IBM is special well
it's because some issues of the code
portability across jdk but the idea is
you can download the GUI installer we
installer walks you through different
steps you know ports directories etc zip
installer just says unzip and it creates
a top-level glassfish three directory
and you run with that and then there's a
silent installer as well which is what I
like you know which is what you need for
your headless systems for example so
look at the last two blue boxes you can
do a dry run you know with a zip
installer or with the shell installer
you can give the command dash n and you
it will create know it will pretend as
if installing but then it will store all
your answers in an install file
separately then you can say oh by the
way use this answer file now and install
it so you can actually install it for
example say glassfish 3122 unix not sure
give you an answer file and do dash S at
Lewis silent install on your headless
machine very easily yes admin so you've
installed it I want to use it so you say
a assignment what do i do you know you
say s admin by default your help appears
or we try to make the commands very
intuitive you say list dash commands and
it will list you all the command we have
local commands which can be run without
the admin tasks running or you could
have remote commands with the dads
running so you can find out what
commands are available for example
create cluster is a remote command you
cannot start instance or those are kind
of remote commands you can of course
configure between I want to see only
local command or I want to run I want to
see only remote commands by giving the
switches like local only true or remote
only true that's very much possible this
is the fun part where you say I don't
know what my command looks like so you
say as admin start so it will show you
all the commands that have start word in
them or create you know I want to create
jdbc resource so you say create JD
you see or you just say yes admin jdbc
it lists everything that has jdbc
command in that command by default the
Security Administration is disabled
because you know we expect you to use it
for development to begin with you know
and then of course you can go into
production so by default remote
administration is disabled now if you
want to remotely administered glassfish
for example glassfish is installed in a
separate machine and you want to
administer it here so you have to enable
it explicitly so for that first of all
you need to change the admin password by
default is empty for remote
administration basically securing it you
have to make it non empty so you say ass
admin change password and then all you
say is a Simon enable secure admin it
generates self-signed certificate is not
tied to any certificate authorities so
you can't use it but for that you have
to really go with you know very sign of
one of those providers which gives you
their certificates but this actually
gets you started you know remote
administration all of that is available
and of course you can disable it as well
java logging and logging on Java they
say both should be avoided now if you
don't like Java logging then of course
you can use configure log4j for the
GlassFish very simple just drop your
log4j jar file in the GlassFish lib your
properties file goes into the domains
domain one config directory so you drop
it in there and you create your jvm
options you basically tell you know
where you are logged forge a properties
file live this is a global I mean all
the applications will start using log4j
but in certain cases you may want your
log4j to be effective only for a
specific application in which case you
bundle it your log for j xml file in
your web enough classes or your module
jar file 36 in my seconds okay password
aliases so generally you're going to
configure last wish to use external
services we call those resources those
resources many times need passwords the
configuration for those resources
generally live in the domain xml so you
may end up with an entry like this in
your domain dot XML it actually contains
the password for the external services
min companies
have policies and say you can't do that
you can't keep those passwords in things
like the domain dat XML so we provide
something called password aliases that
help you work around that issue through
the create password alias command what
you do is you you give the name of the
alias in this case is DB ppw alias you
enter the password for that external
resource whatever it may be you've now
created this linkage between the
password alias and the actual password
and then that password is stored in the
domains encrypted key store okay so it's
nice and safe you then inside the domain
XML instead of actually putting the
password for that external resource you
actually put the alias and the syntax
looks something just like this so you've
eliminated putting the actual password
in the domain dove xml that's tip number
11 tip number 12 so suppose you need to
create a cluster where the instances for
this cluster are on other systems maybe
there's five separate systems you need
to install the cluster on for clustering
to work you actually have to have the
GlassFish software installed on those on
those systems one way to do is you log
in each of the systems and you install
the software we provide a command called
install node that makes that fairly easy
to do and what installed node does is it
actually copies the current install that
you're running the command from or you
can actually point it to an existing
glassfish zip file it will copy those
bits over to the hosts that you specify
and install the product there so
potentially if you'd have five and five
other nodes you need to install
glassfish on you can run one command
provide the list of the five nodes you
want to install it on and it will copy
the software over there and install and
you'll be good to go to configure your
cluster so that makes clustering setup
pretty straightforward to do I'll note
that on on Windows if you have decom you
can use install node decom to do the
same thing so tip 13 are clustering is
dynamic in nature and that means that
once a cluster is up instances can come
and go they're able to talk to each
other so they know kind of the shape of
the cluster you know and they inform
each other as that shape of the cluster
changes in order to accomplish this we
use something called the group
management service or GMS and GMS
depends on multicast so for our dynamic
clustering to work you have to you have
to make sure that multicast is working
properly and so that
something you can go to ask your network
administrators see how they have it set
up or we provide a command called
validate multicast which will verify
that the different instances the
different nodes that are going to be
within your cluster can actually see
each other through multicast and so that
looks something like this you what you
do is you run this is admin validate
multicast command on each of the
instances where you're going to have a
node in your cluster you run that was
all simultaneously they attempt to talk
to each other and as they talk to each
other they will tell you that they're
talking to each other so this is very
useful in just validating that your
cluster is going to work as you'd expect
once you have your cluster up once you
have your domains up a couple other
interesting or simple tips that might
find useful you can run list domains and
it will tell you of the domains that are
known to this instance of the dads or
sorry this instance of the install you
know which ones are up and running so
that that's useful and then you can also
within a domain check to see how long
it's been running and so so this is
running the uptime command here to show
you which how long a domains been up and
running within a cluster you may want to
see okay how long are the instances been
running are all the instance up and
running so we have something called get
help and you specify the name of the
cluster and then that will return back
simply which instances are up how long
when they actually were started or when
they were actually stopped so that will
give you kind of the health of your
cluster that's just a cluster cluster
cluster cluster do more tips and cluster
actually so glassfish provides SSH based
clustering what that means is you know
if you installed as and you say I want
to install the cluster across different
machines if you have ssh provisioning
working as i said configured between two
machines it will automatically provision
your instances issue you command all
those things but we know how painful it
is to set up ssh on a Windows machine so
that's why we provide a set a clustering
with decom so if you have become
configured properly on a Windows machine
which I don't know is probably less
painful but your leave has an
alternative so you could have your dad's
running for example on a windows box
then you have your different instances
on a windows box so the administrator
has given right privileges for decom
the first command that we recommend is
set up local decom so it allows you know
it configures decom you know checks you
know what permissions are required and
it it tells you what's important and
what what's to be careful about then you
validate decom this basically provides a
sanity check for decom required for
glassfish running this command and shows
well gives you some peaceful
satisfaction that the other command
would succeed if this this command does
not run that means other commands will
not run for sure and then from there on
word you can start creating your create
node install the delete node uninstall
all those they have their decom version
of the command for example all you do is
dash be calm at the end of it all of
this of course integrated in admin
console so validated comma validate be
calm all of those things automatically
trigger if you have that setup running
on windows box last one on clusters so
I'll SSH is good be calm is good you
don't want to deal with any of that so
we allow you to do clusters without SSH
as well little bit more manual work but
you do need yuri ku6 JDK 16 you 24 plus
because there's some security issues in
versions prior to that but effectively
you start up your desk you enable
security administration no self signed
certificate all that thing kicks in
automatically you create cluster at this
point is still a local command all
you're saying is I'm creating a cluster
then on each instance you know of each
remote machine you explicitly specify
what the host is what know you are then
you create a local instance and then you
start verifying on the dash no less my
clusters less my instances list my nodes
so instead of ssh based provisioning
you're doing sort of sneak connectivity
you know between these machines you know
now running around these machines you
may not want to deal with it but at
least there's a workaround and then you
start your instances local instances now
you may want something that should
trigger around like when your
application server is starting up
although there are lifecycle callback
events you know for application server
why so lifecycle listener the this is
the interface that exactly provides you
that so in glassfish dash api dot jar we
have this interface comms and abs or
server
second listener just one method handle
event gives you life cycle events within
that you can do a switch on the LED or
get even type and as you can see it
gives you in it event ready when
shutdown event startup event and this is
one of them is repeat it's not a good
loop anyway so you get the point though
there are different events over there on
which you can act upon it and this is
application server wide now in glassfish
we also provide application versioning
what that means is you can have multiple
versions of an application deployed to
the application server only one of them
being enabled so this really allows you
to simplify your upgrade process and
rollback process so let's say you have a
RC one you can deploy or c1 or c2 and RC
2 you find a bug you can just roll back
to rc1 so the way it works is if you
took a look at an example it says s
Edmond deploy you give it an additional
dash dash name command by default
enabled is true so whatever version you
deploy is the latest one if or you can
specify enabled false I'm deploying RC
one but I'm not enabling it then you can
enable it explicitly and then let's say
your final version is released you want
to under ploy all those previous
versions you can say is admin under ploy
and you can give sort of a regular
expression to under ploy all those
versions altogether something on the
similar lines we also have called as
application scope resources what they
give you is if you have global resources
let's say you have a JDBC connection
pool you have three jdbc resources
created from that and they are all
trying to access the application how do
you confine you know how do you make
sure that you have a set number of
connections available to you you can't
unless you create a dedicated connection
pool for a resource so that mapping has
to be that way so application scope
resources actually gives you freeze up
you from resource starvation you define
these resources not just jdbc but GMS
javamail all these resources could be
defined as part of application itself
and then basically you define them in
glassfish dash resources dot XML in web
NF and then these resources are
available only to the application they
are not accessible outside the
application or the module
whatever the scope is that automatically
created and deleted as part of
application deployment and under
ployment process back on schedule okay
how to start glasses of service so
suppose you need to integrate classes
with the operating systems native
service support so it's booted so when
the system boots the GlassFish service
you did the dash or the instances are
actually started as well so to make that
easy we provide a command called create
service it works on Windows that works
on linux that works on solaris and
essentially it integrates with the the
native service infrastructure for
whatever operating system your target
some key things about this it must be
executed as as super users root in order
to integrate with the service we have a
dry run option which makes it easy to
see what it's going to do before it
actually good does anything on the
operating system and we also have a what
says delete server here but it's
actually a delete service command that
it's undocumented that that can attempt
to reverse things so to run the command
it looks something like this so this is
actually on solaris or I run a s admin
create service domain one and
essentially it tells you what it's what
it's doing here in terms of on solaris
it uses SMS so there's manifest files
that need to be created so it in this
case it creates the appropriate manifest
file for starting the the Dazz as a
native service and then at the end it
tells you actually what commands you
could run then to enable it or disable
it once it has been integrated with the
operating system so does something very
similar on linux as well as windows so
so this is a useful command to make it
very easy to integrate with the system
services now I'm going to jump in to
talk about monitoring I have a few tips
around monitoring we have very extensive
monitoring built into glassfish and it's
available through the CLI it's available
through rest it's available through jmx
the console provides a nice UI as well
for for enabling monitoring the
monitoring we have a monitoring tree the
the shape and size of that tree varies
based on which modules are loaded
weather monitoring is enabled for those
month for those modules or not you have
fairly fine-grained control over how you
enable monitoring and then when you
enable honoring you actually have
several levels when it's turned off
there's no
formance impact at all when you enable
it you can enable it the low level which
gives you very basic sort of count
statistics around different areas
depending on you what module it is and
then you can actually go into a high
mode of monitoring where it actually
starts measuring the amount of time it's
an actual methods in recording that kind
of information back so it's not enabled
by default but you can turn it on
without restarting the server which is
nice and if you were to run it without
enabling it the output you'd get would
be something like this so i'm using the
ASM and get command with minus m for
monitoring and then we use wild card in
here so this says just returned all the
monitoring data you have and if this was
enabled it would just give me a ton of
data back since is not enabled you get
something like this package it says
there's there's nothing to report so how
do you enable it we have an enable
modern command that allows you to target
specific modules to enable monitoring
for and this first example I'm enabling
it at a high level for the web container
and like I said that happens dynamically
servers already upper running and it
basically turns on monitoring at the
high level on just the web container you
can target a cluster so this is actually
enabling it for the dash which isn't so
interesting this one here I'm actually
targeting a cluster called c1 and I'm
enabling a monitoring for the EJB
container or you can actually target an
instance as well question might come up
how do I know what modules I can enable
monitoring on we can you do something
like this as a SM and get server
monitoring service wild card that and
that will live you list the the module
names in the current associated
monitoring levels you can also go to the
console the console if you have that
available will give you these names as
well so let's take a look at how you
actually see some of the data as I
mentioned is monitored it's maintaining
a higher tree so here's an example of I
want to see the available monitoring
elements without actually seeing the
monitoring data and then I can inside a
list the key difference here between
this and the next slide you'll see as
I'm using list here in wild carding that
and so this just shows me these are
parts of the tree kind of nodes in the
tree that has some monitoring data
associated with it so that's how you get
the list and then if you actually want
to view the data
then you you actually use the get
subcommand and I said earlier this would
just dump out everything it's fun to do
you know to see what's there if you've
enabled monitoring for everything but I
can't show that here on the slide so
let's do some let's ask some specific
questions for example you know let's
find out you know who implemented the
JVM the server is running on so in this
case I do server JVM runtime you know
the in vendor current I don't know why
its current current but I think that
that is that's correct though it's not a
typo and it returns back that that Apple
actually implemented this the JVM the
server is running on give some few more
examples here I can show you if you want
to find out currently how much heap is
being used by the server you know so I
give it a monitoring element that looks
something like this and it returns back
the heap being used and then the other
one here is for specific deployed
application i can actually include the
application name as part of the this
hierarchical name and we can find out
how many active sessions are associated
with that that web app so that is how
you try to get kind of per instance
monitoring data but suppose you want to
monitor a particular thing you know and
see how it changes over time kind of how
netstat works if you're familiar with
nets debt well we have another command
called a s admin monitor you give it an
interval and the type of thing you want
to monitor and then it will using that
interval display constantly kind of
update on an updating on the base in the
interval information that's being
monitored in this case it's the the jvm
heap information we can also do like the
web module as well and you'll get a
bunch of headers here you go what what
do these all mean well you can use a s
admin help and that will that will
actually show them to you as well but
anytime all this is running you can hit
H and it will show you what the headers
are as well so that that's a way to easy
way to convert you know what what's rst
and what does that mean I don't have
time to cover here but we also support
javascript integrated JavaScript into
monitoring as well there's a run script
command so if you're interested in using
javascript to monitor glassfish as well
you can do some research on that and
you'll find some good blogs and examples
out there and then
max so you know if you ever looked at
the server log file you might have seen
kind of this odd message appearing in
there essentially this is providing you
the address if you wanted to use a jmx
based client such as jconsole or you
know Jay visualvm to attach to the
server and interact with it over jmx and
this works both for the dads and the
instances so you copy that address into
your gmx friendly client and then you
connect to the server and in this case
we're looking at the heap usage but but
you can also click on this and you'd see
all the in beans that all the monitoring
beans that are associated with with
glassfish and you can kind of walk the
tree there so this is another way to
sort of visually monitor glass for shoes
needed gmx all right Midway it refund to
keep a count of how many tips you really
learn or old or new you know they'll be
good to see a tweet around that I
learned like you know four tips from
this 50 tips that will be good feedback
for us anyway tip 76 so glassfish
supports osgi applications you know in
the sense that you know you can take our
osgi bundle raw as do i bundle not
related to java ee dump it as it that
will work because glassfish runs on
Felix uses Felix's osgi runtime or you
can also build osgi hybrid application
which is using Java EE technologies and
osgi together you know publishing an ejb
as an osgi endpoint or in working a
jax-ws to web service in an osgi bundle
all of those combinations are possible
the code sample at the bottom shows you
know how you could say for example
somebody is running an osgi endpoint you
want to just invoke that service in your
hawaii application running in glassfish
all you say is at inject at osgi service
this is a CDI portable extension that we
are built and you say dynamic true by
default no it's not true but you make it
dynamic true so every time the service
goes up and down you know the proxy
behind the actual product the end point
behind the proxy is automatically
adjusted accordingly so you can
dynamically invoke osgi service in a
java application using this CD I
portable extra
now you have deployed your osgi bundles
or your hybrid applications how do you
debug those services you know running in
glassfish well we as I said we are using
Felix as a default runtime so you can
enable Apache Felix Go Go which is a
default shell that is available for you
by default again is not enabled so you
have to enable it explicitly there is a
glassfish config osgi dot properties
file you just change the level from here
to 3 or you can also create a JVM option
you know by this way so both ways work
but once you have enabled it then you
can say telnet localhost 6666 now once
you connect it then again you see ok
show me what commands are available you
can list all the bundles that are
available to you for example lb would
show you the list of bundles you know
once you see the list of bundles and can
say give me more details about this
bundle or you can install a bundle from
a jar file you can uninstall a bundle
you can read no you can update a bundle
you can inspect a bundle there are lot
more details available around it now
glassfish comes with OSD i run time
already which is Felix but you can also
run glassfish in another osgi shower so
for example you have osgi runtime
running in your environment anyone to
run glassfish in there so a couple of
options to do that well of course you
get the bundle context somehow from
framework you tell once you get the
bundle of context then you can say
install my class face job what about
your location of your class pajar is
then you can start the bundle that will
automatically start a blast wish for you
and in between you do your processing
and effectively you can do the bundle
stop now glassfish jar also has a bundle
activator from which the location of
glassfish and the directory domain all
of those are automatically reduced the
other part is you know if you are
running more like you know nakhla fish
or some other console or some other osgi
shell then you can start up your osgi
shall install the bundle there
explicitly giving it the location of the
jar file and then start the bundle yeah
start your / ghl install the bundle
start the bundle
this is I think this is a very powerful
tip most of the questions and all not
most of the questions but one of the big
questions that we are get asked on the
forum is my server is hanged what do I
do well this is what you do this is how
he trouble your troubleshoot your jvm we
want you to send us a thread dumb how do
you get us thread down in a sad min
generated JVM report and there are
different options that are available to
you third-class memory summary is a
default or you can say just generate a
lock for it it generates a really
extensive report for you there are tons
of JVM command lines you know part of
the JDK that are available to you you
know these commands were lacking in the
mac JDK but they're now available in Mac
Jerry k as well so what for example it
could say JPS list all the instrumented
JVM so it will give you the process
number that is available for you to
debug more once you get JPS and we get
the process number then you give Jay
stack to it it will give you all the
Java threads running for that given
process so so on so forth you can
generate a lot of debug information so
if you are filing a bug like that or if
you are sending a report to the user
forum this kind of information is really
useful you can of course connect your
Jay visualvm to get a constant view of
how what is the snapshot of your glass
fish looks like so that's what's
possible and we talked about what you
know how we need to explicitly enable a
remote administration of class fish but
once you have done that now well
glassfish and netbeans they work very
well with each other you can also
configure a remote glassfish instance in
netbeans so if you are now you're
building your application locally and
you want to deploy to that remote I hope
it's not a production application server
but if the GlassFish instance is running
on a remote machine you can very easily
deploy on that now a regular operations
work like develop deployed debug but
deploy unsaved and those kind of
operations may not work but at least you
have the basic capability for that okay
I rest interfaces I can't do this
justice in just a couple minutes
unfortunately but we'll try to scratch
the surface here so we do expose a nice
rest interface with in glassfish it's
implemented on top of project Jersey
there's two main resources that you can
there's configuration and management
through that first path there and then
you can also access monitoring to the
second path here as an example here I
can use curl through the management path
to execute a view log command and I give
it an offset into the log and what this
will come back is there actual log off
set you know about 300k into the log
nice thing about this is actually
there's a header that comes back in that
response called the exits back up here
extech SAP in next which gives me this
URL with this updated so that the next
time I run it it will actually be that
farther down on the log so always you
keep executing this in a loop and just
kind of monitor the log which is very
nice you can access rest interfaces
through a browser here's a couple
examples where I'm going actually
looking at the cluster resources within
within a browser interface if I were to
click on say the list list clusters to
see what clusters exist within here I
will see that there's a c1 cluster and
it's not running so I'm basically seeing
the different information about that
resource in this case it's a cluster
below that or sorry I guess I don't have
it here below that it has other commands
that I could actually execute by by
clicking on those links related to to
the cluster if we jump over to the
monitoring side I can actually access
just like we were doing with the CLI or
through gmx I can access the same
monitoring information in this case
we're looking at JV and peep through the
monitoring resource now that rot the
response format that comes back can be
varied in this case we're getting it
back as HTML for the browser but you can
actually view that as JSON or XML as
well and that's controlled simply by the
suffix that you use when you access that
resource in for example if I were to
access the JVM memory without JSON then
it will look something like this
actually if you have a plug-in in your
browser it will look like this if you
don't it will just be a long string so
that's how you control the the output
through the suffix now with the rest
interface it's more than read only you
can actually change configuration over
rest as well through that management
tree so for example if we want if we had
an apple
called hello that had been deployed and
we wanted to change it through the rest
interface you could enter that path and
you would get something that looks look
something like this and gives you all
the different attributes of that
particular command these are the same
things that you would normally find
available on say the deploy command or
the commands that interact with
applications they would appear here as
well but you could enter say a different
context route you can update it through
the rest interface below so on this same
screen below this as I mentioned before
there are the commands that you can you
can interact with in order to to change
command we can also use rest to deploy
command to unda ploy command and I have
some examples of that here so in this
case this does the same thing as the
deployed command and we're deploying an
application called application at war it
exists at this point on my client i'm
using the post operation and i'm posting
it to this portion of the management
tree this is where applications loop
this is the the force equals true says
that if this application already exists
and go ahead and update it if you look
at the enable command it has something
very similar as a force option so that
will push the command over to the server
and essentially deploy it over rest we
can also under play it by doing a delete
HTTP operation by specifying the name of
the application to delete or if we
wanted to get the version of the server
you could you could run on a rust
command similar to this in this case
we're using yet all right so to to
change something on the server you do to
push something over there you use post
to delete you used to lead and then if
we just want to sort of read only view
we can use gift using using these rest
resources moving on to domain templates
so whenever you create a domain the
actual initial domain dot XML is based
on a template that we have in the
templates directory if you routinely
have to create domains that have
specific configuration
in them maybe say certain JVM options
you want sort of to be already preset
there's no reason you can't create your
own template and use that generally you
start by taking an existing template
copying it to a different name modifying
it however you you need to and then when
you actually create the domain you just
specify your template name and you don't
have to specify the full path there if
you put your template in the template
directory then it will find it and it
will use that template to create the
domain another nice thing to note here
is you can actually verify that your
template that you created is
syntactically correct by running
verified domain XML after you've created
the domain and it will it will let you
know if whether there was any issues
with parsing that domain dot XML yet on
the question that we get asked all the
time on the forums is okay got my
application already know Java EE 6 is
there where do I host my application
well of course you know your private
data center your public data centers all
of those are options but these are some
of the providers that actually provide
glassfish hosting today and they provide
some of them provide managed hosting
wherein they you know they don't expose
admin console to you they do all the
administration management for you some
of them provide VPS servers where you
can say you know what give me my private
server and I want access to admin
console all I want to play around with
it some of them even provide passive
hosting jail a stake for example
provides past hosting so give yourself
five seconds and take a look at this you
know I mean these are like this is
pretty extensive list and this is only
some that I could figure out by googling
it I'm sure there are more that are
available so there's a lot of glassfish
hosting options that are available for
you today you have created your domain
you know you want to make sure that all
the data configuration data and the
application data is regularly backed up
so there are two ways of doing that
first is the manual where you explicitly
backup domain it effectively takes the
zip of your domain directory and stores
it you know in a zip file you could
restore from that zip directory back and
then you can of course list how many
backups are available or the easier way
which is actually available only in
Oracle glassfish server
mercial edition but still available for
you available for evaluation so you can
create backup configuration first of all
actually you create a schedule you know
you can say i want my backups to be done
every day you know like every every
midnight I want the backups of the
config directory and every weekend for
example I want a backup of my entire
domain directory that means config and
applications so you can create multiple
schedules and then you can create
configuration and then play around with
it you know how do you want the backup
to be done and then you can also define
like after 25 backups can I start
rolling over so those kind of
configurations are possible transparent
JDBC route pool reconfiguration so let's
say you're JDBC pool you know is
pointing to a particular host or a poor
or username or password one of those
values have changed now the fact that
any of those values have changed should
not require you to restart an
application server so you can enable
jdbc pool reconfiguration for your
application so the idea is the new
request that our in-flight are served
and once they've completed then the
application is seamlessly migrated to
the nudity bc connection pool properties
it's very seamless for you you can even
define a wait time out you know like
make sure that all the applique
in-flight transactions are completed and
then do a failover like 30 seconds no
requests are coming for example we have
an hour loss of logging monitoring
information available as part of
glassfish so if you're using jpa of
course you in the persistence or XML you
can enable you know logging and it
starts dumping out lot more information
for you but if you're using jdbc
application then you can actually start
tracing SQL queries at a much lower
layer itself so well first of all you
need to set the Java X enterprise
resource SQL trace log level to find
which is a default so there is no
setting over there I'm sorry then you
can implement an API which is part of
the GlassFish API itself you know again
this is a glassfish specific feature so
you can implement SQL trace listeners is
typo over there but once you implement
the listener then you can just set the
listener to a specific property you can
say yes admin you know there's a bunch
of that's the property name over there
and you can specify your listener
so fine logging level and setting the
listener those two things are important
and then whatever you want to dump from
your listener will be dumped in the
console very easily two more things that
you can also do there is I want to see
what are my top queries you know like
what are the query is executed in the
last half an hour or the top queries so
you can start tagging them and they'll
start getting identified or you can also
say I want to cash my query so time to
keep queries in minutes so you can start
specifying them they have a default
value or you can of course change them
as well now something else that we also
provide for jdbc is the statement
connection statement and connection
leaks and reclaim so take a look at the
code on the left-hand side you know if
you are have your s is your statement
sees your connection then you are
required to explicitly close them as we
can close them but we tend to forget or
we put them in a some different finally
loop or no it's a software could miss
behave as well so that's where you can
actually set these properties in your
glassfish domain dot XML itself you can
say i want to set my statement leak
timeout in seconds in two seconds
statement time out in six seconds and
connection leak time out in 10 seconds
so the idea is if you just enable those
three values it will start printing out
log messages in your server log that oh
this leaked out is happening it's not
going to do anything about it it's a lot
message but you can of course say
statement leak reclaim and connection
leak reclaim true in which case these
connections and statements are
automatically reclaimed back now that
means they're not no longer being used
the metrics are being met so they are
reclaim okay 10 to go so glassfish comes
with a cross platform software but set
of tools for updating the product from a
network repository this stuff is based
on the image packaging system which is
in solaris 11 and there's a CLI and
there's a desktop or GUI tools as well
so what we have at oracle is a bunch of
repositories that are set up that are
fronted by servers and load balancers
and what have you so when you interact
with it through our tools you get read
it to one of the repositories and then
it will check and see whether there's
new pad
is available for you to download or
whether there's packages that you
currently have installed that need to be
updated so one of the tools that I'll
focus on here is just pkg which you'll
find in the bin directory with your
glassfish install so p KJ lists will
just show me the packages that are there
currently installed in my glassfish
installation those names may not package
names may not mean much to you here so
you can do pkg list dash S and it
actually gives you some reasonable names
for what those packages are there's also
a PKG to list you and this will show you
those packages that currently need to be
updated that means that there are newer
versions out on the repository that your
install is pointing to that you could
potentially update a few if you want to
and then to do so you just run image
update and that one little line will go
through and it will update all the
packages that need to be be updated for
your particular install so it makes
keeping current especially if you're
using the one of the developer
workspaces keep one of the developer
repository allows you to stay very
current with kind of what we're doing
within Oracle we also when you install
the product a desktop notifier will get
installed and configured and what this
does is behind the scenes that will
monitor the repositories and we'll let
you know if new updates have become
available I think out of the box this is
probably configured to to wake up every
week but you can you can turn off
obviously or change it to a different
check frequency but you just click on
this thing when it pops up and much like
any of these other updaters it will go
off and form you what needs to be
updated and allow you to choose to
update if you wish there's also a nice
more functional GUI tool that allows you
to manage multiple installs of glassfish
on your system check and see which
packages are installed and what the
state of those packages are and get some
additional information about what the
content of the package is what version
when was published things of that sort
so this is a nice tool if you're not
familiar with this called update tool
that allows you to sort of see what's
going on with your install and how it
relates to what's currently in the
repositories this next one which I can't
do justice in just a minute or two but
but we provide a very extensive
framework for adding to glassfish you
add your own containers a glassfish you
can build your own commands into glass
fishes so this kind of focuses on how to
write your own custom commands within
glass vision in just like three quick
slides the three or four quick slides
the really what we try to do here is is
make common operations and writing
commands very easy to do as you'll see
some of the code here so that you can
just focus on doing the logic we
actually have a server add-on component
development guide that i recommend if
you're interested doing this take a look
at that it walks you through the whole
the whole process so let's take an
example so we have an AS admin create my
container command that we want to write
it wants to take a has a mandatory
option called originator picked a string
optional option called the description
fix a string enabled to or false and
then the container name so to add a
command called create my container you
create a class that implements admin
command and the key here is that it has
to be have the at service annotation
with the name of the command ok so
there's how you get your command known
to the GlassFish the implementation of
this class looks something like this for
each of the parameters that you want to
expose on the for the user to use you
annotate them with at 4am so there's the
originator there's the description
there's the true and false one called
enabled and then finally the container
name and so each of these annotations
have some options that control
essentially the characteristics of this
whether it's required or optional what
values are accepted whether it's you
know parameter or an operand so that's
all controlled through this simple
program annotation and then your main
body where you actually you know do the
meat of your work is within an execute
command and you do your real work here
and then essentially set your exit code
either success or failure I think we
have a warning as well that you could
return but that's how easy it is you
know to create a command like that in
terms of managing the parameters in the
execution of it it's a pretty
straightforward last one here of two
more on JVM so one question we get off
in is ok when I start the domain what's
JVM is being used you know what the
process of glassfish uses to decide well
here's the president
that we use so first we look at the
domain dead XML to see if the Java home
attribute is yeah we see if java home
attribute is set in the Java config
element generally that's not there
unless you've added it next we look to
see if a s Java has been set in the ASD
and V dot com file or bat file generally
it's not set there either unless you've
added it and now if you have the job a
home environment variable set then we'll
use that so sometimes that's there but
most often more times not the JVM is
decided by the AS admin command when you
do start to me because AS admin is a
java client so it already knows where
Java is and so the Java home system
property is already set and so that's
generally what what the JVM that's going
to be used by the server when you start
is through that and then how do we
validate these if you if you set this
value or we get it from here well
essentially we're just making sure that
that path is valid and if that works out
then we're going to take it and then if
you want to modify the options to G the
JVM that's used when you start up the
server how's that then well again in the
domain dead xml there's a java config
element that you would add to now if you
look in there though you may find you
got multiple java config elements
there's something in the default config
area there's something in the server
config there might be something called
cluster one configure which one do I use
the server config is is the
configuration for the dance ok so if you
want to modify the configuration of the
dash you go that one the default config
is the one that's used whenever we
create a new config within within the
domain XML so for example you create a
cluster need to create a new config for
it it copies that so if any future
configs that are created you want you
know to affect that you've modified that
one if you have a cluster name cluster
one then you'd find something that looks
like that and that's where you'd find
the Java config element that's one way
to do it hand editing but we also
provide some commands that makes this
pretty easy to do there's a list JVM
options where you specify the target you
know whether it's dad's or a custom name
or whatever and it will show you the JVM
options that are currently configured
for that particular configure if you
want to add to it you can use create JVM
options if you want to remove an option
use delete JVM pretty straightforward to
use but if you're changing anything
other than system properties you're
going to have to restart the JVM
obviously to give them a take effect
but that's an easy way to control the
jvm options for the server oh and then I
actually have an example using pretty
much all right now when you're upgrading
how many of you use the upgrade tool one
okay and how many of you when you're
upgrading how many of you delete that
directory download a new zip and then
upgrade it that way okay that's what I
thought okay I mean we have been getting
that consistent feedback yeah so well I
don't know if I should give this trip
anyway but well there are two ways by
which you can upgrade using upgrade tool
using GUI you can just fire up s upgrade
and then it'll guide you the process and
then you can upgrade it that way or
there is a command line version as well
so in terms of command line you can do
us this is a side-by-side upgrade by the
way that means you have downloaded a new
directory and even upgrade from three
one one two three one two so you know
you can specify what your source domain
and target domain is then it will start
copying the directories and then once
you are in the target domain then you
explicitly say dash dash upgrade or you
can use the update to land package you
know which is in-place upgrade so within
glassfish itself now let's say you have
your domain dot XML all those
configurations figured out either want
to touch it so all you say is package
image update for example the CLI version
is and then we'll automatically figure
out what the new packages are and then
it will download it and play around with
it now if you're using open source
version and then you want to upgrade to
commercial version that's also pretty
seamless we don't of course you need to
buy the commercial license but the
upgrade is pretty simple effectively we
require you to remove the repositories
where the packages are pushed the for
the developer version the depositories
are already listed over here so we want
you to remove the repositories like dev
glassfish dot org and others for example
and then add the repositories where
oracle patches are explicitly pushed out
that's the way we also deliver patches
to our customers so you can add those
depository specifically for Oracle
GlassFish server and then you can add
the
add-on components there are certain
value adds that comes with Oracle
glassfish server and we talked about for
example automatic backup and recovery
you know we talked about that so that's
one of them Chris talked about
JavaScript monitoring tool that comes
with the class values i read features so
you can install those add-on components
again using CLI now you may want to
extend an update inside a closed Network
so let's say you know that machine where
you have glass fish or the network where
you have last page does not have access
to internet or is behind a firewall so
how do you do that well we have a
pre-installed toolkit image and a
starter repository that is available for
you so you can download them you know
then we use sneak connectivity copy them
on a USB pocket out and then put it the
USB somewhere else in that closed
Network and get started with that then
you can download the repositories from
support oracle com they're available as
a patch you can download them and then
start your local repository demon so the
idea is all the pages you can exactly
control what patches are pushed out to
your glass for instance this way because
you control what your update central
repository is effectively and you said
the publisher on each of the different
glassfish instances you set up what your
local repository is pointing to your
local deposit alright I think the
technical tips are mostly over now how
many of you use glassfish documentation
extensively well ninety-five percent of
the hand went up when you were using
glass specially should be using
glassfish documentation that is your
most authoritative source of
documentation other than blocks of
course but we have very extensive set of
documentation so what I'm saying is
getting started it's not for pages these
are for PDF guides just getting started
on glassfish so just go to class
phys.org / docs or for oracle glassfish
server you can go to that URL by the way
all of these would be valid very valid
for the open-source version as well so
you can see getting started installing
and upgrading administering and
deploying applications each category has
whole tons of guides that are available
to you they provide some really fine
tuning tips you know all those details
no nitty gritty what
happening under the wire under the hood
all that is available to you and if you
want four flights now for offline
reading you can download the entire PDF
on your version on your laptop as well
so all these guides are bundled in an
easy-to-read bundle and the best way to
reach us I would always recommend is the
forums you know we have seen stack
traces being posted on our facebook wall
that's harder to debug over there send a
stack traces in a user forum you know
seller stack traces in a user forum the
GlassFish forum which is the web
interface on java at net and the user's
alias they are mirrored with each other
that way so now you can post one place
and make sure that no that is guaranteed
that would kind of show up other places
as well we of course monitor our
glassfish twitter handle is very
actively so if you want to have a quick
question then you can always file as a
question over there facebook is good but
that's better for pictures and social
activity instead of be working traces we
have a very active glassfish videos
channel we keep pushing out videos over
there and blogs oracle com / aquarium
which is our main property where we try
to update regularly on what's happening
latest in the GlassFish community now
because ninety-five percent of you were
using glass fish I would really
recommend there's a schedule available
at the otn lounge where you can go and
share your production story and we give
you a free copy of my latest book which
is about java ee 6 pocket guide sorry
mid commercial but we really love to
hear you because people like you are the
ones who make glassfish successful so
you share your story people others learn
from it and tomorrow night at six-thirty
we also have the GlassFish community
buff where we have four customer
testimonials who are coming and talking
about why they love glass fish and how
are they using glass fish and how are
they successful with glassfish so i hope
to see you there all right I think
that's about it thank
he</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>