<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Terraform Orchestration | Coder Coacher - Coaching Coders</title><meta content="Terraform Orchestration - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Learning-Library/">Oracle Learning Library</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Terraform Orchestration</b></h2><h5 class="post__date">2017-12-20</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/lz1sBCiMDsg" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">terraform enables you to safely and
predictably create change and improve
production infrastructure it is an
open-source tool that codifies api's
into declarative configuration files
that can be shared amongst team members
treated as code edited reviewed and
versioned it is cloud agnostic
in order to demonstrate how to use
terraform to deploy MongoDB instances to
Oracle cloud infrastructure we plan to
deploy four subnets of which two are
public and to our private one of the
public subnets is used to deploy your
application servers that interact with
MongoDB the other public subnet is used
as a bastion subnet to provide
administrative access for MongoDB
MongoDB instances are deployed across to
private subnets which reside on two
different availability domains each of
these subnets are guarded by its
security list which allows only
permitted access both inbound and
outbound an Internet gateway will be
created to provide public Internet
access public subnet equals 1 0.0 0.2 4
/ 2 9 the applications in the public
subnet only listen on ports 8 0 and 443
your MongoDB is replicated across to
availability domains one private subnet
per ad private subnet in AD 1 equals 1 0
0 0 0 / 2 9 for example private subnet
in AD 2 equals 1 0 0 0 8 / 2 9 MongoDB
is listening on the default port of - 7
0 1 7
the security list acts as a firewall to
protect network access to a subnet this
is an example of a security list we can
see both the ingress and egress access
control lists in order to avoid direct
public access to MongoDB we will deploy
a bastion instance in Bastion subnet to
provide administrative access this is
also called jump Server in some
on-premise data center deployment terms
for the demo environment the user needs
to install terraform binary and Oracle
bare-metal terraform provider on the
demo system then download an unpacked
terraform package MongoDB sip before
start running terraform commands user
needs to set up a few environment
variables such as tenancy ocid API key
fingerprint etc now we can switch to our
bare metal console and our terminal
window to conduct a live demo of
terraform deployment
login to your be MCS account
go to networks
here you can see a MongoDB compartment
you can see that this is an empty
compartment no networks or subnets are
created
we will be using MongoDB to
automatically deploy the subnets and
security lists
here are the environment variables
you can see all the tenancy details like
the ocid and also the user ID once the
environment variables are set up it is
very easy to use the terraform to kick
off the deployment
first command that we will use to kick
off deployment is terraformed plan
before you do the actual deployment you
can review your plan this is a blueprint
of what will be created for the
deployment
here you can see that we plan to add 13
objects into the system
you have reviewed and checked the
details it is time for the actual
deployment
the command for that is terraform apply
you can see the subnets and the security
lists
the overall deployment time will be
roughly three to four minutes
let's head to another compartment where
it is already deployed
here you can see that a MongoDB vcn is
already created log in here and you can
see the subnets that are already created
let me take you to another environment
now to show you the MongoDB instance and
the bastion host
you can see the different hosts here the
bastion host is here
once this is done you can deploy your
application servers into the public
subnets
you can see to MongoDB instances
deployed in different subnets and also
in different availability domains 81 and
82
using terraform you write the code once
and then it can be reused to deploy the
same thing in the on-premises
environment on Oracle cloud
infrastructure or any other cloud
environment</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>