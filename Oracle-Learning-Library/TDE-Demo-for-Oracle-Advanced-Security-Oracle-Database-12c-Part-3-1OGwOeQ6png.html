<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>TDE Demo for Oracle Advanced Security (Oracle Database 12c) - Part 3 | Coder Coacher - Coaching Coders</title><meta content="TDE Demo for Oracle Advanced Security (Oracle Database 12c) - Part 3 - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Learning-Library/">Oracle Learning Library</a></li><li class="active">⤵</li></ol></div></div><h2 class="post__title"><b>TDE Demo for Oracle Advanced Security (Oracle Database 12c) - Part 3</b></h2><h5 class="post__date">2014-02-16</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/1OGwOeQ6png" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello and welcome to this presentation
on oracle advanced security in oracle
database 12c my name is todd böttger
and i'm the product manager for oracle
advanced security this is the third in a
series of short video recordings for
anyone who is looking to learn more
about oracle advanced security and
quickly get up to speed on what's new in
the current release it is often said
that one picture is worth a thousand
words so let's pick right up where the
previous presentation left off and show
another product demonstration here is a
brief summary of the topics we will
cover you will see how transparent data
encryption or TDE works here about its
benefits
observe how encryption keys are managed
and learn about new key management
functionality in Oracle Database 12c we
will start off with a brief introduction
and then walk through an end-to-end
product demonstration that will show you
TDE in action although the demo focuses
on tablespace encryption specifically
it's important to note that TDE supports
tablespace encryption and column
encryption and both approaches are
commonly used for existing TDE customers
planning their 12c upgrade towards the
end of this presentation I will describe
backward compatibility features that
will help make your upgrade a smooth
experience key management is a critical
part of any data encryption solution so
let's take a moment to describe and
summarize how tedious TDE
has a two-tier key architecture with
data encryption keys that are managed
automatically behind the scenes and a
master key that encrypts the data
encryption keys this master key is
generated by the database and directly
managed by a human user for the database
to work with TDE encrypted data it must
have access to the master key most TDE
customers store the master key using the
included Oracle wallet key management
solution each TDE wallet Maps
to one and only one running Oracle
database the wallet must be opened with
a password entry to make the master key
available to the database as the master
key is rotated over time the historical
keys remain in the wallet in case they
are needed later on to restore TDE
encrypted database backups rotating the
master key does not require re
encrypting any of your existing
encrypted data
note that the Oracle wallet secures the
master encryption keys in various ways
because the Oracle wallet resides
outside of the database it creates a
clear separation between encrypted data
and corresponding encryption keys the
wallet itself is a pkcs12 compliant key
management file which is encrypted using
a password derived key according to the
pkcs5 standard in addition wallet files
can be locked down further by setting
operating system and file system
permissions and by setting the immutable
bit while it's even can be stored on a
secure network share that you set up
where each while it resides in a per
database subdirectory within the share
as a security best practice wallet
should be backed up regularly and kept
separate from backups of the encrypted
data in addition to their security
benefits wallets can be easily copied to
support encrypted data movement database
replication and database backup and
restore the wallet basically acts as a
persistent local key cache which is
useful because when encrypted data moves
the key needs to be available on both
the origin and the destination while
it's often are used for database cluster
configurations on Oracle RAC data guard
and Golden Gate Oracle also provides an
additional special purpose type of
wallet that can be opened without human
password entry to support automatic
database restart scenarios okay now with
that general background let's change
gears and go right into the product demo
we'll be using Oracle Enterprise Manager
or
to do most of the demonstration steps so
that you can see them in the context of
Oracle's browser-based management
console before we create the wallet key
store or generate any TDE keys the first
thing we need to do is identify a
database user account to be the key
manager this approach establishes a
separation of duties delegating key
management to someone who is separate
from the DBA and who holds the
privileges necessary to manage TDE
master keys after logging into the
database as sis DBA here on the database
users screen I see an account named
InfoSec Isabel that looks like a good
fit we'll make InfoSec isabel the key
manager by granting her an
administrative privilege that is new in
Oracle Database 12c this administrative
privileged is named sis km and it
provides the user with the necessary key
management capabilities
after I log out as sis DBA we'll be
logging back into the database as Sisk
am going forward next we will use the
TDE home screen to set up a wallet key
store I select TDE from the security
drop-down at which point I'm prompted to
log into the database target as sis km
after I log in notice that eeehm detects
TDE has not yet been configured on this
database and it displays a button in the
top left panel that takes me to a
configuration wizard this wizard will
create a wallet key store and an initial
TDE master key the first wizard step
confirms the TNS admin path pointing to
the TDE configuration file named sequel
net ora and gathers a user credential
for the database host machine this
credential is needed by the wizard in
case we choose to write changes back to
the sequel net or a configuration file
such as modifying the TDE
wallet file location
the second wizard step actually reads
the current settings from sequel Nora
for demonstration purposes I have
pre-configured sequel Nora to point to
the correct directory location where I
want to store the wallet file so we'll
simply accept these settings and click
Next to proceed
the third wizard step lets us set the
wallet password and a tag attribute for
the initial TDE master key that will be
created the tag attribute is a new
feature in Oracle Database 12c
that allows you to give a descriptive
name to the TDE master key according to
your own naming conventions we are
tagging this key as q1 key to indicate
that it will be in use during the first
quarter of the calendar year tag is not
the only new key attribute available in
Oracle Database 12c there are many
others for example there are new
attributes to help you track keys across
their lifecycle
see when keys were last backed up and
managed keys for Oracle multi tenant
pluggable databases notice that in
addition to creating the standard
password based wallet we also can
generate an optional auto log-in wallet
to support automatic database restart
for the purposes of this demonstration
I'll create a standard password based
wallet only in a moment we will finish
the wizard which will execute a series
of sequel commands but before doing that
let's quickly review what is about to
happen we will be executing key and key
store management commands that are brand
new in Oracle Database 12c the new
commands serve as a one-stop shop for
all key management operations
consolidating what used to require
interaction with multiple Oracle
commands and utilities you can use these
new commands to create a key store open
and close a key store create activate
and rotate keys export and import keys
change the keystore password and much
more all of these commands are prefixed
with the same syntax
Minister key management sometimes I
refer to this as an abbreviation AKM
here you can see the AKM commands to
create the wallet key store open the
wallet and create an initial TD e master
key inside of the wallet also notice the
suffix with backup which is another new
feature in Oracle Database 12c this
automatically creates a local backup of
the wallet within the same directory to
help protect against unlikely events
such as accidentally deleting the wallet
or forgetting the wallet password prior
to Oracle Database 12c we recommend it
as a best practice to backup the wallet
whenever making a key or password change
as of 12c this practice is enforced
explicitly and automated for convenience
you must use with backup syntax
whenever making a key or password change
you optionally can set a name for the
wallet backup file or simply use the
default time stamp based name ok
everything looks good here so let's go
ahead and click finish to complete the
initial TDE configuration notice that
now the top left panel shows frequently
used operations instead of the TDE
configuration wizard button from here
you can perform common operations like
opening and closing the key store and
rotating the TDE master key below you
see a panel that gives you quick access
to all operations related to the key
store along with a view of the current
key store status we see here that the
key store is open and the underlying
wallet file is stored under the etc'
directory on the right you can see the
list of currently loaded keys notice
that the q1 key we created as part of
the wizard is shown in the list and
marked as in use meaning that it is the
active TDE master key at present you can
see other helpful key lifecycle metadata
in the list and buttons above the list
allow you to activate
key or create a new one at the bottom of
the screen you can see a list of TDE
encrypted table spaces and tables
containing TDE encrypted columns we have
not encrypted any data yet
but with a new TDE master key now
available we can go ahead and create an
encrypted tablespace to house our
sensitive data before creating an
encrypted tablespace we need to log out
of this database as sis km next we
navigate to the table spaces screen and
log into the database as an applications
DBA who is responsible for managing
application database schemas after
logging in I click on the create button
to add a new table space let's call this
new tablespace CRM Inc this is because
in an upcoming step we will move a clear
table that contains sensitive customer
cardholder information managed by our
CRM application into the encrypted
tablespace below we need to add a data
file for the new tablespace so I click
on the Add button let's call the file
CRM Inc and append the dot DBF file
extension now to make it an encrypted
tablespace we simply check the
encryption check box if you want to
change the encryption algorithm and key
length used click on the encryption
options button for this demo let's use a
EES 256 as the encryption algorithm for
the tablespace
finally I click on the ok button and
wait for a few seconds while the new TDE
encrypted tablespace is created
when the creation process is finished we
see the new tablespace show up in the
table spaces list in the next step I
will move the CRM table containing
sensitive customer cardholder
information into the new encrypted table
space the table that we must move is
called CCA underscore card info and it
resides in the CRM application schema
the act of moving it to a new table
space causes all the existing table data
to be encrypted at once in live customer
deployments waiting to encrypt all of
the existing data at once may or may not
be desirable depending on your
environment and requirements let me
point out here that the Oracle database
provides many helpful tools and
approaches to assist with moving table
data both online and offline data
movement are supported for example you
may have heard of Oracle online table
redefinition Oracle data pump alter
table move and create table is select
for the purposes of this quick
demonstration I will use EMS reorganize
objects wizard to move C CA card info
here at the beginning of the wizard I
search for the C CA card info table and
index after these two database objects
are located I set attributes to move
them into the CRM Inc tablespace
then in the next few steps I'll simply
accept the defaults presented by the
wizard
at the very end of the wizard notice the
two sequel commands that have been
generated one is ultra table move to
move the table over into the encrypted
table space and the other is alter index
rebuild to move the index after I submit
this job you'll see that it soon
finishes
and then I can go ahead and verify that
the job has succeeded that's it
now we are all done note that in real
production systems after you have moved
all of your sensitive data out of clear
table spaces and into encrypted table
spaces you can drop the clear table
spaces and securely delete the
underlying files or if you need to
maintain non sensitive data in clear
table spaces going forward then you can
leave these clear table spaces alone and
the database eventually will overwrite
the free data blocks in the course of
its normal operations this is the last
step of the interactive TDE
demonstration here is a quick review of
the demo steps we just completed first
we identified a key management database
user and granted this user sis km then
working as the key management user we
created an Oracle wallet key store and
an initial TDE master key
lastly we logged in to the database as
an applications DBA
created a new TDE encrypted tablespace
and moved existing data into this table
space to encrypt the sensitive
information the new TDE key management
functionality in Oracle Database 12c is
very powerful but if you're an existing
TDE user running a previous version of
the Oracle database you may be wondering
about backward compatibility this slide
shows a couple of important backward
compatibility points the new key
management AKM commands that we showed
in the demo work on wallet key stores
that were created by older versions of
the Oracle database note that when using
a legacy wallet with a 12c database
instance the new 12c key attributes are
not present also the legacy key
management commands that you may have
used in Oracle database 11g release 2
and prior still are supported you can
continue to use the alter system wallet
and key
operations if desired and you can
continue using existing utilities like
aura pki
that said we do recommend that you
transition to the new key management
commands soon in order to take full
advantage of the 12c functionality that
concludes this oracle advanced security
product demonstration as a next step if
you have not already viewed the previous
videos in this series then please take a
look at them to learn more about other
capabilities of oracle advanced security
thank you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>