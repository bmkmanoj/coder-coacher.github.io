<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Improving Your Groovy Kung-Fu | Coder Coacher - Coaching Coders</title><meta content="Improving Your Groovy Kung-Fu - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Learning-Library/">Oracle Learning Library</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Improving Your Groovy Kung-Fu</b></h2><h5 class="post__date">2013-02-05</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/dflNLRNEe_A" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so we can the idea is to finish off
javaone with what's a little bit of with
a little bit of groovy and this is the
the slightest talk of the day there's
not even an introductory slide not even
this light with my name on so only code
that says my name from groovy I'm
absolutely fine to code on stage
whatever you would like me to code of
course I have a plan and and if you
don't steer me otherwise I'm going to
show you something that I consider is is
important for a groovy professional but
if you would like to see anything don't
raise your hand even just scream into
the room absolutely fine for me we just
spend an hour of fun and I may do some
philosophical remarks along the way and
and if you think that's okay then that's
all fine and if not then we can be part
as friends get the we play this very low
key here it's everybody fine okay good I
see a lot of nodding who has done any
groovy before who has seen any groovy oh
that's almost everybody thank you that
is fine few years ago when I rested when
I asked this question I got like ten
percent and then few days later half of
the audience and always said we have to
work at that bit now now it kind of
finished good to see that awesome so we
since we have modeled equality more than
a quality group here and like more than
50 people I'd say and and all java oh
sorry groovy in Java enthusiasts in the
room um what would be a good place to
start so what we need to begin with is
groovy let the latest group of the
latest groovy possibly and since half an
hour ago there's a new version of groovy
it's groovy
05 and I haven't even started yet right
let's install it so I wouldn't install
Ruby without the help of dhruvi of
course I have all already some groovy in
my in my thing here go back to close the
console and say I'd like to install
groovy what do I have to do while I have
to finally write download link and I'd
like to have the binary distribution and
the source distribution and the
documentation and they need to be pet
then you'd be unzipped and I have to
change money to the the execution
modifier on the binary script maybe and
they need to be in in a certain
structure such that whenever i refer to
it from our IDE I'd like to have the
full support the source and
documentation and so on ok I have to do
this every time when there's in your
groovy so therefore I make myself a
script in groovy it's called install
converted from kill be installed I have
forgotten the parameters hmm I have
forgotten the command line arguments so
yeah if you're probably saying I'm not
even with the right directory sorry CD
here so cruelly install what does it say
it tells me hey you forgot to sudo your
your route rights right and you should
say through groovy installed and then
the version number ok thank you sudo
groovy install 205 password
that's because this will be unzipped
into a directory where I only route has
access rights that's going to get it
from from the web may take a little over
this of this online connectivity thing
here meanwhile let's let's download this
integral that takes a bit of time but I
don't have to do it manually I can do
something else in between which is all
the purpose of automation you'd like to
do this you'd like to do something else
meanwhile and what I would like to do is
of course show you the install script
what is it doing otherwise person there
is no point in doing this so the clinic
and there somewhere is installed at
groovy do I see this starts with my huh
so of text made this is my install
script well is it visible from the back
that give me some nodding or shaking
they are almost okay buh-buh-buh-buh
like so good so what is it doing first
it tells me if the vm the amount of
arguments that have been passed in is
not equals one at Princeton printings
the the usage statement and exits right
this sounds like a very small hint oast
or tip as we say in jelly um but I would
actually advice for all the groovy
scripts that you're doing for this
little automation stuff that's a very
good thing to have because it relieves
you from remembering all your command
line arguments good argument one is the
version there is an installation
directory where this goes to the
download base is 0 here and then there's
three URLs to fetch for the binary the
souls of the documentation
and and then i'm using for the actual
download the end builder who has
everything the end builder before your
show of hands like modern more than half
it gives you all the capabilities of end
with the standard groovy distribution
for example the get tasked with the
unzipped ask the delete task and the
chmod task change modification task
that's really cool so for all the URLs
that i have i've fetch them i unzip them
and after unzipping i delete the zip
file I'd like to keep things clean right
and then I'm going through the install
directory with through all the
respective ruby version bin files here
groovy it's only 11 those I go through
all the files and I picked the ones with
that do not come that do will not
contain a dot those others data files on
mac and i changed the modification to
were 775 which is gives me execution
rights for then the groovy script and so
on make sense right I haven't looked at
this file at least for over a year but
still I can very easily explained what
it does you know I can understand for
myself what it does which is a major
difference from the automation scripts
that they had before in pearl and peri
and so on you know pretty easy to do how
are we where are we deleting we're are
we here here we are good now I'd like to
set my environment for groovy execution
to the new version first I have to check
whether it's there and for checking I
have a groovy script which is called and
then then is the german word for mustard
that
anyway it's also for set and so to speak
okay usage groovy them almost it says
well if you go with the zeph over here
you ever eat they have to say java or
groovy of rails or Griffin since I'm
managing a number of different
environments so how about sin groovy so
these are my current groovy illusions
that i have installed and of course i
have a number of them since i have to
check on games all different kinds of
attacks against different versions of
groovy so let's set what happens if i
would set the environment to groovy 205
what would happen at the moment it would
it would actually execute the following
statements against my shell which is
exco export groovy home to the new one
over here and exporting a new path and
the trick is that in this path variable
the 205 version appears only once right
there is no second groovy version which
is kind of hidden because of the
sequence that you have in your path
variables it you probably know the
problems that come up with those
approaches so it means that this set
environment script first cleans the
class path before also refers cleans the
path before reconstructing it so if I
would like to execute this the
statements I put them in tactics Sam
groovy
205 pectic there we go executed which
guru v2o5 out fine groovy minus version
two or five and as you see I'm on an on
the latest java 7 early access but with
the same commands I can also change my
java version my graduation Griffin
bridge and what have you and can test
any kind of combinations where possible
Park may occur that I have to
reconstruct so how does this send the
Zen look like that environment mate then
through your this shift plus plus plus
plus plus let's see what I can
understand and explain it the allow
programs java drove across Griffin if
the argument size is not what I expect
then I print the user statement
otherwise the program is the first
argument the location that i use the
directory by i expect things to to be
what it's exactly analogous to where
i've installed in the employ the other
script and if i don't give any diversion
number then it will print in the version
numbers which are available by simply
going to the respective location listing
all the files gripping from the from the
list of files the the two string
representation of a fire for an ignore
case of the irrespective program return
finished otherwise the version number is
the second argument and if that second
argument is job others lives because of
the installation directories in
Magda's lives in a different directory I
have to go here ok so the binary path
that I'd like to say should now content
is about to contain the this location
and the bin directory below it I first
make sure that this path really exists
that's because I'm defensive and here
comes all the rest maybe this may be a
bit difficult to see from the back if
it's solo on the projector and you're
looking at the back of the head of the
one before you that's the case of the
back here ok ya llego we are exporting
which is print Lin to the to the console
that's a cool trick just Brooklyn the
eel display of the statement that is
required and then we're cleaning the
path like so from the system environment
we get the path variable we are
tokenized on the colon which is the path
delimiter character on on Mac now we
have a list of all the elements in the
path we grabbed through the list in
really for all the elements that do not
contain our program to not contain our
program in the to log his version that
means we have actually if removed the
old versions this way and then we are
joining again with a coded character
they are there is a slight duplication
of the code ok I try to remove the
duplication but it wasn't easier to read
after after theory refactoring so I left
it in again and then we print on the
export the export statement that it was
pretty easy the
the groovy kungfu trying to take away is
it makes your life much easier if you
can alternate this kind of tasks along
the way how often do I have to manually
setting this this kind of stuff so yeah
if you like it make the one yourself
that you need or send me an email and
i'll send you the code no problem email
address is easy to find all the
pharmaceutical companies on this planet
have found my email address and now that
said that is which is what is my email
address zip should be should be there
dear dot connect at canoe com if you'd
like to follow me on Twitter that is at
MITI for some reason my command line
doesn't understand my email address sir
okay so that's that's all fine sending
drop me a mail and i'll respond
immediately I've been asked to put this
on github but since it contains private
information where things are on my
machine I was a bit reluctant of doing
that and I may be a bit paranoid about
that okay now we do have this nice
groovy two of two or five and we would
like to start with let's say some real
goods groovy project as of now what we
have to do oh it should be a real
project should be something you know
maven like some of course in the groove
yet in the groovy ecosystem we would
rather prefer using gravel and to make
this possible in
cv2 desktop 12 14 this down below here
and that's construct some built Gretel
which is the out the build file for the
build automation that we're gonna need
made built rattle and here is all the
code that you have to write apply and I
have standard that I'd like to use a
default Gretel script that lives in my
root directory so I say from give it /
default don't grow command s command w
going back to the console saying gravel
tasks what tests do I have can I do
something over here is loading not
successful and then I can for example
make tears I can have the gradall rep
quiz ever used rather before we show of
hands or twenty percent maybe a little
less if you haven't looked at gradall
before give it a look it makes a lot of
sense it is like the best of end and the
best of my even combined so I'd like to
sorry what was the wrong direction I'd
like to create all the directories that
I need for my project so rattle make
dears if I'm just slow typer i can say
md it will pick up the right thing now
loading it doing it and giving some
output and now i'm open the directory to
see you the the structure that has
created here's the gretel subdirectory
that was all the old stuff that was in
there this is the file that we have we
have added which contains one line
but we have a source and there's a
source main and there's a source main
groove in sauce main java source main
resources which are at the moment empty
right but this is the structure that you
know from maven but instead of doing it
manually it would automatically do it
which is as you see the running joke the
the binding theme for the for the first
half of the top do some automation now
yeah so so what is in here one how does
default gretel look like mate / default
default rattle this looks like so all
right now I have to do this a little bit
bigger apply plugin groovy apply plugin
idea please give us if we have something
which doesn't come from made which is
not in the repository I'd like to have
two offers in the lib directory below me
you know that would be good using first
standard groovy 20 it could change that
to the groovy 205 should do that
commanders saving it I'm saving I'm
changing the default and all my gravel
strips that are that are based on the
default will in hville immediate he
leaves use it right here's a make
directories bradley has a very rich API
that it exposes to the outside not only
does it have a program project object
model it gives you an API for what is in
your project for example it has
something called source sets right it
has source heads for the main sources
and for the chest sources and this is
all the sources that we would like to
combine we go through all the sources
through all their source directories we
flatten them out because
was this than this and then we go
through all the source directories that
are required from from groovy and java
you're printing out and the sprint line
automatically issues and lock statement
it doesn't really print directly it is
intercepted and in its logging on the
info level saying making I'm making the
sauce there and then we just call the
api on the file right this is java api
make use on a farm and they also serve
rapidly between us and so on ok so
that's that's pretty much it if you want
to have the file send me an email that
has no this is actually on github if you
if you're looking on github that's
that's somewhere there it's in it what
they called kissed or just what i call
you'll find it good here we go so I'd
like to add one line to my build brand
that was it Ian and that is I'd like to
create idea files I cannot create
netbeans structures yet from here I'm
not quite sure that I can apply
ok cool absolutely fine so so there's
multiple ways of integrating what we've
done here with IDEs and thanks to get in
it netbeans when you open when you
create a new project and you point it to
a directory that contains a graphic file
it will recognize it and pull in all the
dependencies automatically and same with
some others but you can also say apply
plugin and that is idea command s and
going back to the command line I can say
Gretel idn which is what i'm going to do
for today loading building building
making idea modules making a gear
workspace cap ok ok please please Ellis
now we have a project file here job for
java and 12 which is supposed to be our
application name i guess i can open it
down
if i'm not mistaken i can directly
started like so
may open in the eye it opened in
invisible state so what we have here is
the Java one thing that we have that
with that was in ScreenFlow thing LOL we
have all our sources we have the
external libraries you see java 107 we
should actually see through me as well
isn't it in their souls main grooving
and nonpoint surprise that groovy
doesn't pee over here we don't have the
groovy to all five library yet installed
bread well okay I'll do this manually
for the moment give it some ah yeah
therefore that was not available yet we
do this differently we do this move this
for the moment and adding a different
version of groovy since I haven't
created the library yet okay fine for
the moment good here you go there we
have it and create a new groovy script
but I'll enhance the font size in the
name and the name is hmm so one okay you
go of course you would like to see
something running you deserve it
friendly hello
saw one so one control shift left em
and skewed this a little so this book
from the back okay good so this has been
an exercise in five minutes for a
setting up a new project you absolutely
full e fine to go with all the
dependence that you want that you want
to have and start Ruby hacking what
could be possibly doing groovy right
yeah Ian comes to the groovy Cowen's who
has been in the community keynote this
morning Oh a little more than half of
the other ones past we have not gone to
the keynote ok the other ones are sleek
good there was again the an introduction
of really cool project sumatra which is
I guess your graphically close to Java
somewhere and and it's all about using
the graphics pipeline and the GPU for
parallelism and so on that's all fine
now parallelism parallel computing is
really important and we wouldn't want to
to leverage all the automatic power
capabilities of our machine until maybe
then drive online or later right so with
groovy you can very easily parallel eyes
your coat that's for example but what do
we do in groovy are so but let's do some
easy task like having a list let's say
one two three four five no I don't type
that I say one until five which is a rep
which is arranged to list now I've list
right
good I'd like to compute the square
numbers from one to five so 14 9 16 25 I
hope if i'm not mistaken so how do you
do this in juvie of course you simply
say list or square equals list dot
collect I got some code completion
please no bad collect each time set for
example huh if we say if you're using
the standard it for the for the
parameter that comes in the closer or
otherwise give the name n and you then
using n times n no surprise here I guess
for most of you that's true and print
them that's crass
well see it's okay good this is a
typical task that could easily be
parallelized right so every computation
in here is could be it's totally
independent of any other selection
outside so we could easily paralyze the
computation of squares by the way doing
this for performance reason at this
point is silly because the sequential
version will always be faster for this
little piece of code you have to have
bigger chunks of code 44 are really
seeing the performance improvement but
let's say only for the sake of the
argument that has been brought before
the test being brought for work this
morning how difficult it is currently to
do this in a parallel fashion so let's
say parallel well collect program now
collect parallel is not now yeah could
split it in two declarations assignment
Thanks collect parallel is not known by
default on a list only when you're
putting that argument in in a context
where you have a thread pool where where
G part that comes with groovy can
actually draw on you threads from thread
for so we need a method that's called
with pool that
take some closure in which collect
parallel is now does it give me almost
for some reason and I normally get
support here for the four out doing the
static thing so I need the comes from
GPR spool up with me and jeepers pool is
I'd like to import it
at library to a little class path that
would be interesting yes please that
important demand with pool it has
created it yeah sorry the static method
I was somehow was mistaking on thee from
the support here something has changed
Oh Diego so the the logic of count of
computation stays pretty much the same
we only changed one method name now if
you want again it is all parallel okay
you don't believe me I see it in your
eyes right you don't now let's try so
let's say that in the collect parallel
we print lend the currents what the
current threat for example right print
them thread dot current threat
what you what you may see live it I'm
going to explain for the people in the
back so what you see is a fork joint
pool in the first four join pool which
has my co worker threads 53 4 12 with
the same priority and threaten the
threat group main so it's actually it's
using multiple threats if we wouldn't
have the collect parallel that but only
collect then this has all the same
threat in the main threat so we have
collected we can use collect parallel or
we could just change the list a little
and say the list make concurrent hurt
and then we can use the normal collect
right as we had before which is also
interesting because it means when the
code lives somewhere in a method that
simply takes a list and does something
with it we can pass it a list which
knows for itself how to make itself
concurrent friendly from currency friend
okay Cynthia here comes a very good
comment on this and I take this as
wouldn't it isn't this trivial anyway to
do with threats and then the question
comes up not quite because if I high up
new threats by the way you should also
always use a thread pool huh and most
people don't do it if they if they try
but then I have this issue that I can
easily compute the squares maybe in
parallel but then how do I put them
together correctly in the new list and
the new list doesn't it doesn't this
need to be a synchronized list because
I'm adding things concurrently and how's
the tank
rectly and how do I make sure that all
but the sequence is not vendome right
collect parallel the implementation of
collect parallel takes full care of that
it relieves you from all the work except
ma strictly speaking you cannot do it
wrong you cannot do it wrong in the
sense if you cannot mess up with the
concurrency scheme that is used here the
fixed concurrency scheme if you'd like
to do this with standard Java means i
know only few java developers with more
than 10 years of experience that would
really get it right and say from 100
people from 100 such developers maybe
one would get it right in the average as
it happens just two weeks ago I ran a
groovy calls in in London with a group
of people that the people that were
totally newbies they know they knew a
little bit of Java but no Ruby
whatsoever and we made this exercise I
explained how to use it and we made an
exercise for parallel computing with
total movies and all of them one hundred
percent of the class got the exercise
right right this is amazing simply
because the API is knows much easier to
use and doesn't give you much
opportunity to to get it wrong in the
first place yes please
pregnancy
all that's the question was if we would
do is this kind of time-dependent that
we that and by accident that we have the
right ordering if we would do a random
sleep in here now we go into a
concurrency anti petta right okay okay
but I'm gonna give you a philosophical
explanation of that okay so we do what
we don't know is what you should never
never never never never never never do
in concurrency so let's do sleep and
we're sleeping math but random what is
it isn't there next that there comes a
double and we give it x one second right
okay is that we have let then all that
that's that's for three seconds or so we
have some random value between what what
this returns this is between 0 and 1 and
we make it between zero in three seconds
that ok good so let's try
that's it did I do something wrong stop
up on sleep obviously now that this is
this would be an integer right time 3000
gifts back
a double that correct we have to you
have to put this into an eight I do it
in not so groovy way what a Java way he
ain't yes things I do with the job of a
and I do it wrong of course good one two
three four now it takes a little hmm
seems to have worked now the next
anti-pattern try again maybe we have a
different result next time this is
another anti-pattern thanks let's first
fix the code because that was really
this was ugly aqui aqui aqui well i can
i can actually spare the I going to
sleep and of course when they have a
double and I'd like to happen to integer
there's a two integer in groovy so
that's much better good now
okay leave it away so professor of
raises his finger right never never
never never here comes the enter patents
in four parallel programming throwing in
random sleeps at certain pieces in order
to evaluate whether your coats
concurrency safe or not will not give
you the right feedback mm-hmm this you
will have random results and even but
what does it tell you you may see the
error okay but even if it even if it's
not failing like in our case this may
also be random it's a random result I so
doesn't give you the right feedback
doing things again trying them again and
again and again until they work or not
work is not anti-pattern it doesn't for
the same reason it doesn't give you the
right feedback this has variations this
anti-pattern selling it works on my
machine could you please try this on
your machine could you please try this
with a different JDK could you please
try this with a different operating
system just make sure it works you will
never be sure if you go that route you
need you need to have confidence for
good reason well grounded confidence
that what you have done is correct what
you have done is correct write the code
that we have done that we have written
so far is correct there may be an error
in collect parallel what the g-power
scheme provides then sent in email and
you'll occur part of that team as well
so possibly my fault if it's wrong but
you as an application developer should
not be concerned with these details
there is tons of information that is
that is on the GPS homepage and that you
can read through their number of those
fixed coordination schemes like this one
but that we have done is fork join
there's also metric use that you can use
just as easily only with different
method names and then there's data flow
abstractions and actors and agents and
what have you this is this is all I'd
say the main abstractions are very
interesting to to read about and to play
with and GPS and groovies is a very easy
way of getting your foot into this pool
okay hmm we could go further for the
last 12 minutes or so r into parallelism
what you like to see some really cool
parallelism stuff yeah okay otherwise I
would have shown you the best piece of
code that I've ever written okay now go
well as let's try let's see how long
that takes um a really very interesting
concept that is in jeepers is the
so-called Kanban flow pattern now let's
please allow me to show you an animation
of that and it is actually it is an
animation not a simulation even though
it possibly looks like a simulation
difference is the animation this there's
a real concurrency pattern behind it and
we only visualize it it's not that we
mimics the behavior we are just
visualizing the actual behavior also has
it has a gradual starter so they're
starting to ground
what it shows is one of the classical
problems in concurrent programming the
concurrent producer-consumer scenario
you have multiple producers and multiple
consumers and they all work at the same
time producer is producing something
here it fills up a battery with energy
and the consumer consumes whatever the
producer has produced as a product
concurrently now if producer and
consumer or kind of levered in in in
their timing that's all nice and tidy
but this is normally not the case oh
that's not visible from the back now I
can squeeze this a little but not too
much it's the better you can or just
come forward and we can stand around
here the projection if we want it good
so the typical one typical problem is um
the producer is rather fast and the
consumer is directly under the other one
consumer is slow bother producers fast
so what happens is if there would only
be no throttling mechanism of the
producer the producer would start
producing like crazy consuming all of
your CPU time filling up the internal
buffer until there is no more buffer and
then stop and then the consumer would
start and would have too much to do it's
very really bad leveling of resources
instead what we are doing here is the
the Kanban approach ken van says the
producer is only allowed if he gets an
indication from the consumer that he may
produce the Toyota protection system had
like little cards that where they would
give physically back and forth here we
have like empty batteries that we give
that that means all the automatically
all the processing power is consumed
where it's needed at the bottleneck
currently the consumer is the bottleneck
consumer gets all the resources and
puzzle in terms of computing time and
whenever he wants to do something
there's always a product before him in
the queue now what happens if for some
reason producer slows down and the
consumers pre fast then the empty
batteries stack up in front of the
bottleneck again which is now the
producer whenever the producer wants to
produce he has always has the right to
do so downstream the whole system the
whole network of consumers that may
behind it empties out that means that
the whole the overall throughput of the
whole system is exactly as fast as the
bottleneck this is the best that you can
get the best possible result that you
can get you always have automatically
without any intervention from the
outside the optimal throughput of the
system now so there is no central
intelligence hear that kind of optimizes
the system it optimizes itself and by
the way they producer and the consumer
alike whenever they are finished they
can right into the next buffer in a
non-blocking fashion if you if you're
into a parallel programming and you have
a system where you can write in a non
block
fetching that fashion that's the best
that you can get the buffer cannot
possibly be any bigger than six because
there's only six batteries in the system
right therefore you can have a maximum
number and you know you can always write
into it if you dimension the buffer s6
you can always write in a non-blocking
way no synchronization needed whatsoever
for the buffer you can always write you
can always push on the stack so to speak
now if for some reason you would like to
have would like to throttle the system
because all this concurrency makes you
feel a bit paranoid and think there may
be an error in it so you can you can
remove trades from the system and by
removing trays from the system your kind
of limiting the amount of concurrency
that goes on I can even make the whole
system is sequential system by removing
the last but one tray now I have a
sequential system obviously I can even
stop the system by only removing the
train removing it I've stopped the
system not by stopping it from the
outside as such list it's still waiting
it's waiting for something to do but
waiting not is it is not consuming any
threat at this moment there is no
blocking threat that's important no
blocking threat right because if you
have no blocking threats and you have
non blocking rights the system is
deadlock free by design how cool is that
I do have goosebumps oh my so the it is
a very simple system a very simple
approach these results are really
amazing and that when i came to the idea
of approaching concurrency this way of
this very special problem this way I
felt like cannot possibly be that nobody
else has thought about this before
actually in the in the physical world
the production system and the logistics
guys and the operations research and so
on that they have all that but it wasn't
yet in software so i did my very best of
finding any prior art of this and they
couldn't find any in it i'd ask at every
conference and please if anybody's is
aware of any prior out of this please
let me know i'd like to refer some
authoritative source saying yes this is
a good way to do it but until i get
until there's more information i claim
originality on that one I've even
published in real pattern and software
pattern for this camp on flow pattern
you'll find it on the web under google
for ken man flow pattern you find it and
i'd like to see in especially this
there's some discussion going on in
academia to to really have some math
behind it for vocab finding good values
of how much concurrency can go on in
such a system and so on this it's
difficult to find good measures of
concurrency really by the way we are
talking groovy right what you see here
is groovy this is a swing application
where have overwritten pain component
and all the rendering of all the various
pieces is done in groovy 60 times a
second the pain component is grooving
right and it's not even optimized and it
pains like
almost a hundred different images on top
of each other for every pain 60 times a
second like the producer for example is
an image this label here the battery is
made of three different images for the
background for the inner fill and for
the for the lighting that you see on top
right for the shining thing the these
rounded rectangles or rectangles that
are then over painted by the by the
other images the light bulbs are also
three different images on top of each
other and all these images are pictures
but not bitmaps they are constructed
from drawing primitives right so there's
gradient in there there's there is a
path where this is painted from so that
that's about the performance of drooly
right you can do the 60 times a second
and you can have even well do it a bit
quicker if you want to write so after a
while it garbage collection sets in
every now and then this is so fast you
can get would you like to see the count
yeah I doing but you don't believe me
okay I see it so where it is the show
component the show component has let's
it's all groovy as you see this is the
component that has the various recorded
sprites that that is objects that you
can move around on an honor
on a background buffer we are creating
the labels again this is creating a
label means returning a bufferedimage
where the buffett image is made of you
know font color renderer and setting the
Cullen setting the fondant all that
stuff that you have to do in swing show
component with all the producers and
consumers in what have you and here's
paintcomponent and let me make this
little bit bigger oh I cannot for
somebody for some reason it doesn't do
it but only for the general in
impression that is about 100 lines of
code little less I have a draw
transformed and that means with the
given graphics contract context I'm
drawing some buffered image and I do a
translation to a certain point in the
system and I start with these ones for
the labels right draw transformed is a
typical groovy construction it is a
method that takes a closer that tells
how to transform we're doing this 60
times a second for every single element
in the system I'm keeping hold of the OL
transform i construct in you affin
transform I transform it I call the
transformation over here and then I I
restore the old settings for the
graphics context and so on let's thank
Ruby ok so that was kind of and then
there's for example for the tray sprites
when when they move around they have to
they have to switch around the
orientation such that that filling from
green to red for the battery the
unfeeling the consuming of energy is the
other way around if you remember so
therefore I have to at some point now
times up have to somehow switch it at
some point in the system and this is
this is a wet way it's done if it is at
a certain ex range then I simply
move it around right I have to give a
different coordinates if it's inside I'm
shift of seven out of seven if there's a
tray inside here then I have to get this
glow outside and otherwise I have to
have to do it in a different angle this
all F in transformations so i would say
um we have had we have a few minutes
left for questions yes please
our request the consumer the system here
relies on always recycling the batteries
let's environment friendly solution i
would say and that's the whole trick if
the producer would likely you'd suggest
it produce new batteries the whole
system would break that's no longer
cameron flow the ID the throttling
mechanism that is behind and it gives
all the nice properties that we have
seen only comes from the consumer
passing back some indication that the
producer may now produce you can you can
think of it as as a tray when you go
through airport security you put all
your stuff in the tray but you cannot if
there is no tray right so the trade
flows down the system and some nice
person from the TSA gives it back to you
that that's how it works I sometimes I
most often call this a tray really and
all the all the other approaches that
I've seen for throttling the producer
have subtle problems for example what
you can have is an H is a sorry a
synchronous queue in in jeepers you can
have you can queue up it helps avid
synchronized such that this it's like a
strut between the between producer and
consumer but this matrix use a traffic
traffic jam in your system so its decks
are back and back and back and back
until the beginning so you have this
kind of traffic jam in possibly in the
system whereas come on Flo you cannot
possibly have a jam
thanks a lot enjoy the conference keep
grooving and make this day count</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>