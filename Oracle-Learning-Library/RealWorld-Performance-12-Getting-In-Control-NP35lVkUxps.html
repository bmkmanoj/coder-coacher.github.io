<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Real-World Performance - 12 - Getting In Control | Coder Coacher - Coaching Coders</title><meta content="Real-World Performance - 12 - Getting In Control - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Learning-Library/">Oracle Learning Library</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Real-World Performance - 12 - Getting In Control</b></h2><h5 class="post__date">2014-05-15</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/NP35lVkUxps" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">what I'd like to talk to you about now
is this getting in control of your
database we showed in previous videos
that you can over subscribe a database
by too much connections or just by too
much work load coming on the system this
can lead to over subscription of the
system that can render the system
unstable now when if system becomes
unstable it becomes unstable in many
ways in terms of the performance but
what is more sinister about it it
becomes almost impossible to debug a
system when it is rendered unstable
I don't not sure how many of you have
got to the situation where a system is
so oversubscribed that you can't even
use the keyboards you've tried hitting
away at the keyboard and no response
time if you can't get any keyboard
response the chance of you actually
getting any effective tracing
information to escalate and find out
what went on and you've probably also
found that things like Enterprise
Manager and your operating system
utilities and now reporting some fairly
strange statistics because if the actual
monitoring utility is a struggle to
getting subscribe to get scheduled
there's a as will the database requests
you have an unstable system so to be
proactive on these side of things if you
could actually manage the system a
little bit better and actually stop the
system from running out of control and
let's face it this is becoming more and
more important where we have all our
systems in memory and systems aren't
being stalled on i/o and every process
becomes runnable immediately this
becomes it is going to become more and
more important as we move forward and
even more important as we start putting
more and more workloads onto the same
database or have more databases on a
common coast we are effectively going to
want to govern and control how much
resources a database can take so we're
looking for here for two things
we wanted to and dial down the amount of
resources of database users not only
from a resource planning but also for a
staying in control now one of the tools
we have within Oracle is the resource
manager and a facility known as instance
caging and what I'd like to show you
here on the demo is an idea of just
being able to literally control via a
throttle how much the database is
capable of doing and how many resources
it's taking up so we have the same
workload as we ran before and what we
haven't done is impose some instance
caging what we've done is we've used
instance caging on this demo to make
sure that there's no more than 24
database processes running at one point
in time now this is our throttle okay
because there's 24 cores on this system
24 processes means that I will only ever
get to subscribe a core one to one now
of course I may need to be sharing this
host with somebody else and other
database and other set of applications
or I may want to leave some CPU left
lying around such that I can guarantee
that I get keyboard interrupts if I have
to debug the database so I can literally
dial down the performance at will so I'm
just going to reduce this number a
little bit and you can see that
basically now if I make this number 18
we're going to start seeing a little bit
of reduction in throughput as you would
expect you're starting to see the CPU
drop a little bit and as a result
because I'm starting to constrain the
application and not let it have as much
CPU as you would expect we're seeing an
impact on the user response time the
database response time is remaining
fairly constant on each call but we're
seeing more queuing in the application
server so you can see fairly quickly I'm
now beginning to turn the throttle and I
can be more aggressive with this as I
wish and in fact I can take bring it
down to actually say I'm only actually
going to allow half the cause on the
system to get active
and you can see the response time is
proportionately increasing the
throughput is dropping and so is the CPU
dropping at this point in time I'm very
much in control and staying in control
of the system rather than the system
controlling me as a result if there's
something going wrong on the system just
say something like an execution plan
going awry I will have enough CPU to go
in and get the tracing information find
out which plan went wrong take
corrective measures and fix the system
we've got to the situation where we were
so CPU starved I would never find out
that information
and so actually debugging the root cause
of your system outage becomes part of
conjecture rather than the fact-based
led process and just to give you another
example I can take it to the next
extreme and I can drop it down to only
use a quarter of the Machine and as
again you can see a proportional
response throughput dropping response
time going up and CPU getting reduced
back and likewise I can wake it up
to go back and use all 24 cores at will
at the same time so now I'm in control
of what the database does rather than
what it does to me this is we're going
to be again reinforced this is going to
be extremely important when we have all
memory resident systems where every
process becomes runnable and people
migrating from databases that are mainly
in disk - all in memory will need to
start thinking about resource management
in advance of the migration because in
reality slow storage is a hardware
Resource Manager it stops everything and
puts things to sleep and so it stops the
procedure use running out of control
when you're not doing any i/o every
process will run and run and run until
it over subscribes the machine so we
need to start thinking about some
resource management moving forward when
migrating to very fast i/o systems and
memory resident systems
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>