<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Oracle Enterprise Data Quality - Writing Reference Data Demo | Coder Coacher - Coaching Coders</title><meta content="Oracle Enterprise Data Quality - Writing Reference Data Demo - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Learning-Library/">Oracle Learning Library</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Oracle Enterprise Data Quality - Writing Reference Data Demo</b></h2><h5 class="post__date">2014-07-18</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/Xy6ozQW1dz8" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">let me show you an example of how you
can use edy cues reference data writing
functionality to create a set of
reference data from an e DQ process that
can then be used to inform a subsequent
edq process okay so we're going to work
with this example here this project
called learn name gender map and let me
just show you in coming into this
practice project we have some stage data
called mortgage 100k process - now this
actually has 90,000 rows despite the
name and the key thing about this is
it's customer data and it has in it some
first names in their own field Gordon
Christopher Patrick David Katrina Ronald
etc and it has genders mm-mm F for
Katrina M okay etc now what we want to
do is to look at this set of staged data
and we want to work out based upon this
whether each first name is generally a
male or generally a female what's the
relationship between the first name and
the gender in other words we're going to
do that in a process and the process is
that two processes are going to populate
some reference data for us and the key
piece of reference data is this name
gender map reference data so note at the
moment it's empty we're going to
populate it with the first name and then
agenda either M or F based upon the
stage data I showed you and there are
two other sets of intermediate reference
data that we're going to use to get to
that point one called name frequencies
it's empty at the moment and no one
called name gender frequencies also
empty at the moment okay
so how are we going to do this well
there are two processes which will
populate those reference data sets and
the first one is this one called prepare
names profile names and name gender
combinations and I'm going to run that
process and whilst it's running it'll
take a little while to run I'll walk you
through a copy of that process and I've
just made a copy so I
can show it to you as the the originals
running and here it is so it's reading
in from a data interface and in our
original version that data interface is
mapped to the mortgage customers stage
data that I showed you with the names
and genders in it okay so it's reading
in that stage data that I showed you
it's doing some preparation of the data
so it's doing some basic denoising here
taking any noise characters obviously
and it's doing some other things I won't
go into great detail but it's excluding
instances where we have joint names in a
name field so we might have Jeff and
Wilma Smith Jeff and Wilma being the
first name field so it's excluding those
etc the key thing that it's doing here
is it's creating a new attributes
through a concatenation is concatenating
the first name field and the gender
field things putting together
Christopher and M for male or Anita and
F for female or Katrina and F for female
and in between the two values it's just
putting a separator string which is
three tildes so we'll have Christopher
tilde tilde tilde M Anita tilde tilde
tilde F and so on okay so it's doing
that and then finally here there's a
frequency profiler that frequency
profiler is profiling two attributes the
name gender field which we've just
created holding the concatenation of the
name and gender Christopher tilde tilde
tilde M and so on and it's also
frequency profiling just the first name
field the original first name field so
from that frequency profiler we're going
to get the number of occurrences of each
name gender combination so we're going
to get you know Christopher region M 100
times in this data set and we're going
to get the number of times that each
name appears in the data set Christopher
appears hundred times okay all right
so those are the two pieces of
information this profiler will give us
and you might be able to see we have
this little symbol like a database here
that is showing us that the results of
this frequency profiler are being
written out okay and in fact they're
being written out to reference data and
that frequency profiler is going to
populate our first two sets of reference
data you can probably see because the
process is nearly finished they're now
populated so here here is our name
gender frequencies reference data so we
can see Aaron appears as a male then
five times in the data set Abdulla as
appears as a male 16 times and del ad
ele appears as a female 20 times etc and
it also populates this name frequencies
reference data as well that's just
showing us the the frequency with which
each name appears so Aaron appears five
times the data set Abdullah 16 times
Adel 20 times so from there we have our
raw material to work out a relationship
between each name and agenda because we
know for example Adel appears 20 times
and we know that in all twenty
occurrences Adele is marked as a female
from our frequency profiling but we
still need to put the pieces together
and we do that in our second process
which is called create name gender map
reference data this is where we're going
to create this name gender mat reference
date is still empty at the moment let's
run that second process so it's now
running down here and whilst it's
running I'll just walk you through a
copy of it that I've made again just so
I can show it to you so here's the
here's the process and let's look at all
this thing in fact I'll show you the
original because it's just finished
running so I'll miss all that show you
that and then we can look at some
results at the top here should make this
a little bit bigger so we can see a bit
more
it's reading in and it's reading in from
reference data from our name gender
frequencies reference date ryx reading
in the name gender field so that will be
the Christopher tilde tilde tilde M or
the Adele tilde tilde tilde F etc and
it's reading in the count of the name
gender field so how many times does each
combination of name and gender appear
okay it's adding two variables why
called threshold percentage which is set
to 91 called cutoff point which is set
to 10 I'll tell you about how those
variables are used in a minute
it's then doing some parsing and what
this parser is doing and I won't walk
you through how but it's not very hard
anyway what it's doing is it's looking
at the name gender field and it's simply
parsing out the name into its own field
so it's putting that back in the field
on its own their name dot parse and it's
marking it as either Y or f depending on
whether we have an M sorry as male yes
or female yes depending on whether we
have an M or an F at the end of the
string here okay all right now having
done that it's doing a lookup and return
it's looking up the name field so that's
just the errand or the adele on its own
that was created by the parser it's
looking up on our name frequencies
reference data which remember was
created in the previous process as well
and it's going to return we just have a
look at the results here
the count of name so now we know Aaron
for each row we know Aaron appeared five
times as a male and Aaron appeared five
times in total in the data set okay we
know for example Adele appeared 20 times
as a female and 20 times in the data set
more interestingly Agnes appeared 113
times as a female but 115 times in the
data set in all and there were two
occurrences of Agnes which were actually
male okay all right so we know how many
times each name occurred and how many
times it occurred as a male and how many
times is a female but from that we can
calculate percentages that's what we're
doing here so we're just doing a little
value check here we're looking at the
male duck pars actually if that's set to
Y then we're saying write calculate the
percentage male and this is taking in
the name gender count of name gender and
count of name how many times does it is
it does it appear as a male how many
times does it appear in total and it's
just working out a percentage okay so
out of that we can see that for example
Abdullah appears 16 times it's male 16
times so therefore 100% of the
occurrences are marked as male
agnus there appears 115 times only twice
as a male so 1.7 percent only of Agnes
is marked as male in this stream we're
doing the same thing for females so here
where the parser has seen that there's
an F then we're working out the female
percentage so just have a quick look at
this and we'll go down to take a look at
Agnes there there's the 113 female
likenesses out of the toad 115 98.3%
Magnus's or female okay
so we have the percentage of male and
female we're merging those datasets
together there again just the sort of
two streams we split up emerging them
here if we go down a little bit in our
process we're then doing a group
immersion at the moment we have a row
for each name gender combination so we
have one row for Agnes M and one row for
Agnes F what we're doing this group of
merge is for grouping on the name so
that will mean we just have a single row
for Agnes but in our merge we're taking
in both the percentage male and the
percentage female so now we can have one
row for Agnes and we're going to know
that Agnes is male 1.7% at the time and
female 98.3% of time or whatever those
percentages were they've slightly
different to that actually okay this is
where our two variables come in then so
we added a threshold percentage set to
90 there and it's used here and here
we're looking at the percentage of each
row which are male and we're comparing
two threshold percentage across actually
checks and each male threshold
percentage if the percentage male is
greater than or equal to the threshold
percentage which was set to 90 then we
are passing so a site is at least not
are at least 90 percent of the
occurrences of each name male and just
below that like this slightly bigger
again we're doing the same thing for
female they're exactly the same thing
we're saying our is at least 90 percent
of the occurrences of 1/9 female so
Agnes should pass the female test
Abdullah should pass the male test for
example okay then we bring in our other
variable the cutoff point which was set
to 10 so we're saying here are there at
least let's just have a look at this so
again cross attribute check count of
name and the cutoff point again greater
than or equal to so are there at least
10 occurrences of a name that's what
we're saying there
because it could be that we get a
hundred percent of let's say
Christopher's are male but there's only
one Christopher on our data set that's
not really a big enough sample to make a
decision on whether Christopher is male
or female so it exclude names that
appear less than 10 times okay by the
way both these variables are
externalized which means that if you run
this process within a job you can set
the percentage or the cutoff point as a
variable in a run profile okay so you
can change the 90 or the 10 at run time
in a run profile if you want to that's
just to buy the bike anyway if 90% or
more of the occurrences of a name are
male and if we've got 10 or more
occurrences of that name then we add the
male gender so we're just going to add a
string attribute called male gender with
a value M if naive set or more of the
occurrences of a name are female and
there are more than 10 occurrences then
we add a string attribute called female
gender with a value F and there here we
just merge those two attributes so only
one or the other should be true they
can't both be true so we're just going
to merge them here into a new attribute
called gender doesn't really matter at
the order of the merge since not me both
those things can't possibly be true okay
at the same time for the same same name
so now we have a new attribute here we
go
there it is set to M or F so mmm F mMmmm
ffff etc okay
finally here's the key processor the one
that it's all really about the writer
and the writer processor is writing out
the results from this process the name
into a name field the number of times
the name occurred the percentage that
will mail the percentage of a female and
the gender that we've learned from those
percentages so remember if more than if
90% or more will male we can have an M
in there if 90% or more female we're
gonna have an F in there it could be
that we can't make a decision because
perhaps is 50/50 split
yeah or perhaps we have less than 10
currents of a name so we're only going
to make a decision if there's a you know
a fairly overwhelming percentage male or
female but you can change that
percentage just need to change the
variable and we're writing that out and
we're writing it out to reference data
and to our name gender map reference
data okay so having run this process
then if we just take a look at that name
gender map reference data and just click
on it here it is and it's populated now
so Abdul appears 138 times since 90
spots 7.8 percent of the occurrences
have the male gender it's marked as male
agnes appears 115 times since 98.3%
were marked as female is marked as
female so that's our name gender map
reference states we've created that
reference data from our stage data
having done that we can use that
reference data to inform a downstream
process having learned about the
relationship between the name and gender
we can use that in a downstream process
so
here is our downstream process is called
agenda check using learn gender what's
it doing well it's just simply reading
in it's actually using a data interface
but that is mapped to a web service so
it's going to work in real-time it's
just doing some and it's reading in by
the way a title first name last name
agenda and it's doing some basic
preparation of that application the
first name but then it's doing a lookup
and return on our name gender map okay
on our reference data we created in the
previous process it's going to look up
the first name and it's going to return
the gender the learned gender if you
like from the reference data and the
percentage that were male and the
percentage that were female okay
and it's going to write that out
ultimately back to the web service here
okay
it could be that we supply it with a
name which isn't in the name gender map
reference data because we said that you
know sometimes we might not be able to
make a decision because some names may
have sort of 50/50 split or at least not
not not enough of that name being either
male or female to make a decision or it
might be that some names weren't in our
incoming stage data that we created the
map from and in that case we fall back
on a different process which sure is
just going to derive the gender using
the title okay anyway let's run this
process this real-time process that's
running now okay so we're now in the web
service tester and let's try out our
process so here we've got the gender
chat web service from our name gender
check Project let's put in some data in
the input so I'm going to put in mrs.
first name Abdul
last night doesn't really matter what I
put in there because it's not really
using that anyway and gender F now
what's going to happen then is the
process will go off and it will look up
the first name Abdul in our name gender
map reference data which was created now
pre
to processes and it should return agenda
from that reference data and it should
tell us it's using that reference data
and it should tell us the percentage
tell us hit Send
here we go so it's saying well actually
Abdul in my name gender map reference
data this is marked as a male I'm using
that reference data and 97.8% of the
occurrences of Abdul in that reference
data are male okay so using our learned
reference data let's try one more this
time we'll take out the the title and
gender and let's put Agnes in and see
what happens hit Send and this time is
correctly saying Agnes is a female yes I
used the the learned the the reference
data and 98.3% of Agnes is a female and
yeah we could keep on doing this let's
put John in and see what it says about
John and it says that's a male 99.8% of
the occurrences in my reference data
were male okay so there's a good example
of how we can create reference data
using Edie Q's reference data writing
capability and then we can actually use
that reference we've created in a
downstream process so it's enabling us
if you like to teach edq it's enabling
ezq to learn about the world if you like
and to create reference data through its
processes it's tremendously useful thing
to be able to do</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>