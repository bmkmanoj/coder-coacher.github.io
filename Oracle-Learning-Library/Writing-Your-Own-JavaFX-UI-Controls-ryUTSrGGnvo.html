<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Writing Your Own JavaFX UI Controls | Coder Coacher - Coaching Coders</title><meta content="Writing Your Own JavaFX UI Controls - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Learning-Library/">Oracle Learning Library</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Writing Your Own JavaFX UI Controls</b></h2><h5 class="post__date">2013-02-04</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/ryUTSrGGnvo" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">thank you all for coming along today my
name is Chavan Giles I'm co-presenting
with a colleague of mine proves on
machaca we both work in the UI controls
team inside Oracle where we own quite a
few other controls that we're going to
talk about today but also we develop a
whole bunch more for today's talk so you
can contact us on other of these email
addresses if you have any questions
standard disclaimer don't do any
purchasing based on what we're going to
tell you today because we will change it
on you the agenda for today is quite
simple we're going to work through an
introduction to UI controls very very
quickly
we're going to go into some work
examples that we've done we're going to
look ahead to the future what java
fixate may look like and we're going to
try to have as much time as possible for
questions and answers I'd like to run
this as a pause so feel free to ask
questions as they suit I would be
interested to know who tuned up to the
session for about four hours earlier
with a Garrett Grunwald ok so not
meeting right so we're starting from it
what is a UI control kind of basis the
way I would define a UI control is
roughly what we have up here it's it's a
lot less stringent than you may think
it's basically a Java FX node that
allows for user interaction it doesn't
necessarily have to extend from the
control class the control classes taking
the control implementation go away to
the extreme and you don't have to do
that unless you need to it's not even
necessarily reusable maybe you'll just
creating the user interface control for
your own internal users and that's
totally fine more often than not as
styled using CSS if you're in Garrett's
talk earlier on he tried a few other
ways to do it using canvas and code
approaches so the three ways we're going
to walk through today first which is the
simplest basically it takes an existing
UI control and changes the look of it
this is not a very common approach
normally you're going to do the second
approach which is basically to extend
for example an aged box for a region and
to add children to it and restyle it
using CSS the third approach is what we
do in the UI control stem and you're
more more than welcome to use this
approach is to basically extend from the
control class and create skins and
behaviors and of course you're going to
use CSS in most of those cases so the
first approach is basically looking at
what we have in our Casspi and CSS file
and restyling it to suit your needs if
you haven't ever looked at the Caspian
CSS file I recommend you do is a very
long file last time I looked it was
about 4,000 lines of CSS but basically
that details how all the UI controls
look inside jar effects and that
includes things such as the shapes the
fields the strokes and in your special
effects for example we quite often use
drop shadows on controls like menus and
certainly if you're going to modify the
looks of how things are the first thing
you need to know is how they currently
style so that you can change it so
here's an image I had for last year's
Java 1 basically it's an employee
manager application and I've got my own
specific UI style it's probably why I'm
not one of the UI designers inside
Oracle but this is how the application
look like just by dumping in the
controls for my employee manager
application and personally I want to
change how it looks a little bit some of
the problems I have with the default
look of Java fix UI controls is for
example up the top right I don't like
the fact that buttons around it
especially when the rest of my UI is
very square I also know that the border
color of the buttons are slightly
lighter than it is everywhere everywhere
else in the UI the divider in the middle
is irrelevant
the way I like to do dividers is that
they're just white space then the color
behind the tabs is not exactly how I
would like it I'd prefer it to blend in
with the table view headers up above and
then there's this weird border going
down vertically on the other side of the
middle column there that you can you
shouldn't be able to see basically and
so right this is the end result of flip
between them a few times so you can see
that for example the buttons are now
square
they've got a darker border there's no
divider or vertical lines between the
table our table view and the charts and
the grading behind the table the tab
pane there is a better look as a
gradient other than just a solid gray
color so this is right or I've got a
question sure right so I which I'd my
laser pointer on me but you can see
behind the tab pane area as a dark gray
now it's a grating and it looks
consistent with the table column headers
at the top then if you look between
where the tabs and above that and below
the table view you can see there's a
divider for the split pane and there's
also great thank you and there's also
these little lines here and here and
when we go forward
I've got rid of the divider and those
vertical lines same obviously the
buttons here a light color and they're
rounded and now there are darker color
consistent with the rest of the user
interface which is by default a dark
grey color and they're square so one of
these things is I'm finna key about
pixels I like things looking just right
and fortunately that we can do this all
through CSS so just I'll just step
through those changes that I made so the
first one here is not entirely clear
what it does but the tab content area is
doesn't have a border around the right
the left in the bottom area by default
it doesn't have a border here here and
here so basically this first bit of CSS
here basically puts a border in the
right at the bottom and the left the
next bit of code here just putting the
gradient and for the header background
so we have a we use FX body color rather
than the solid gray
so basically I'm here what I'm doing is
I'm hiding the border around the split
pane as I know that there was those two
vertical lines that were kind of out of
place and the user interface so I'm just
making the encierro and I'm making the
opacity of the divider itself which is
the horizontal bar they're invisible so
it's still functioning as a tirely
functional divider we can grab it and
move up and down to resize the table
view all the charts beneath it you just
can't see it which is actually quite
handy because in my style preference
I'll just like that white bar there I
know that that's going to be resized and
the cursor changes I'm sure the UX
people in the room will hate that design
because you can actually don't have any
visual hints then we're doing a little
so this last bit of code here is a I
looked in Caspian and I realize that was
doing some special casing around winner
table views inside a split pane so I'm
just aren't doing that special that's
special casing and finally this is
making the the colors of the buttons a
darker gray you can see in the middle of
the third line there and making the
borders square rather than having a any
radius so if you bundle that all that
CSS code there and you you want to use
it in your application what you do is
you create a CSS file and then you set
that inside your application so you can
see here the bold lines near the bottom
we're finding the CSS file in this case
it's called Java one CSS and then inside
the scene we're giving the style sheets
list and we're setting or we're adding
the Java one CSS and that will take
precedence over the the user-agent
stylesheet which is of course a Caspian
now if lender Peru in it because she's
going to take over in toilet option two
and three thanks Jonathan
so I'm covered the next two approaches
option two an option three so option two
is an option you would pick if you want
some more functionality that's already
offered in an existing control but you
don't necessarily want to provide this
part of a library for others to use so
you can start by extending a layout
container
the upsides to this approach is that
it's far less overhead compared to the
next approach we'll be talking about
where you have to provide the separate
skin and stuff and so you don't have to
lower the note count etc but the
downside is that you have to tell the
user of your control to manually install
your CSS into the scene so that Jonathan
just talked about how you do that using
the syndicate style sheets let's look at
an example here's a segmented button
demo basically a segmented button is a
horizontal button with a bunch of
segments and you can think of each
segment showing its own special view
when clicked the way we went about doing
this was we extended each box and we
added a bunch of toggle buttons to it
and we added more style classes to these
toggle buttons to style them differently
based on where they were in the in the
horizontal age box so basically you can
have as many number of buttons you want
on this 1 2 3 or as many as you want
let's it's actually a nice approach to
using tab instrument use this it's more
eye candy compared to using a tab
control and it's used very often these
days and mobile and tablets I think
let's look at the code segment a button
extends H box and it has a observable
list of buttons basically observable
here means that you're tracking changes
to this list and updating accordingly
and in the constructor you can pass in
the number of buttons that you want in
this list and what it does is it it adds
a style class segmented button to the
container
so a layout container and JavaFX is like
any other node it and and what that
means is you can access it via CSS
because any node and scene graph you can
up you can add a style class to it so
that's what we do here so we can style
the container itself and then it's
setting the buttons and it also adds a
listener on these buttons too so that
when anything changes dynamically you
call this update muttons to update
yourself let's see what that looks like
so the crux of the code is in this
method basically it's iterating through
the buttons and it's saying if I'm at
the end of the iteration and my index is
zero then I'm the only button so I add
an only button style class if not I'm
the last button so I'll add this last
button style class if I'm not at the end
and my index is zero then I'm the first
button or I'm somewhere in the middle so
I'm a middle button so all it's doing is
you know traversing through the toggle
buttons and adding a bunch of style
classes so that from here on we just
style them through CSS very simple let's
look at the CSS so there's I just picked
up these three from the entire file
first button last button middle button
the the first in the last we'll have you
know the nice rounded edges so we have
the radius and the background in set set
accordingly and the middle one the
radius set to zero because they don't
have the rounded corners and these are
toggle buttons so we're already making
use of the selected pseudo class that
toggle button already has and we're
styling it so that you get this nice
look when sorry
get this nice look when you select it so
there are we adding background colors
with shadow highlight color and some
linear gradients to make it look this
way very simple let's look at another
example this is a toggle switch you've
all seen it on phones I'm sure so you
can basically it's interrupt it it shows
on an off state you can click on
anywhere in this control on the slider
or on the label and it'll toggle it'll
animate to the other state and the way I
did this the other day was to extend
region region is a base class to all the
layout containers and JavaFX
and it basically is the guy that you can
style using backgrounds and borders and
images and it also has some nice layout
functions that you can override and do
your own custom layout it's also at
least resizable node so the three
components that are part of this this
little switch is if there's an on button
and on label and off label and then
there's a stack pane for the slider part
and it just animates the way the
animation is accomplished is by setting
a clip on this node so this is how it
actually looks the there's a region
which has the often the on and there's
that staff pane in between and there's a
clip that's set to match the area that's
just either the offer the on along with
that stack pane which is a slider and
what happens is the way the animation
happens is that the entire container
moves in one direction and the clip
moves in the other so you gives you this
impression that you're actually sliding
back and forth let's look at the code so
toggle switch extends region has two
labels for on and off it has a stack
pane and it instantiates a timeline and
in the constructor it's just adding
these three guys into the children and
also sets a clip clip here is just a
rectangle
this like I just said the animation
there are two two parts the animation
where the clip is also animating along
with the layout container so the
timeline has three keyframes
it's specifying the initial positions at
time zero for the clip rectangle as well
as the layout X for the region itself
and it's moving at the end of say 400
milliseconds to a width and there's a
negative width for the container because
that's moving the opposite direction and
basically before it plays it just sets
the rate it specifies the direction on
the timeline based on you know if you
have already gone in one direction or
the other toggles between this there's a
boolean property for toggle it just
keeps toggling that's it and we have our
animation so the CSS looks like this
it's um the toggle switch is the region
itself you styled that there's an on
label and off label and an off slider I
just wanted to point out that you know
when I first started doing this it was a
it was a big rectangle and the the stack
pane itself was a rectangle it wasn't
looking that good and all I had to do
was add those back round radius and they
all match each other and so you get this
nice rounded appearance for the slider
as well as the edges of the region
the other day I was talking to Jasper
and he goes well toggle switches just
another checkbox so you should be able
to swap in another skin to change all
the instances of checkbox if you want it
so I said that's a cool idea sure it's
it's nothing but a checkbox so if you
wanted to do that in your application
then you would just convert that toggle
switch cord to be a skin basically
implement the skin interface and add the
toggle switch style style class to the
checkbox so whenever you instantiate
your checkbox you just get the style
class and do a set all to the toggle
switch so you're just replacing checkbox
and you're adding toggle switch and then
you swap in the toggle switch skin for
checkbox by specifying it in CSS in the
following way so we have this FX skin
property that you can give the pads to
the skin so what happens now is even
though you're instantiating a checkbox
in your application you're going to see
a toggle switch instead because it's
just on and off right but there is a
little hitch to this because that you
know not not all the API of the checkbox
may actually make sense in your toggle
switch because you have this label what
does that mean well you can take that to
match your on state maybe so Jonathan
wasn't too happy and I'm sure ritual
sitting at the back there also there not
be too happy with this approach but I
think it's something that you can think
about doing if you want to swap in a
different skin ok that's option 2 now
moving to the next approach this is a
more involved detailed approach we do
this in our UI controls group for all
the JavaFX UI controls we extend from
control class and we provide a custom
skin you would you would want to do this
if you want to make your controls part
of a library for others to use what's
the control it's basically a node and
what that means is that all the nice
transformations on a node applies here
as well you can set opacity rotate it
set effects blurs and stuff like that
and control has a skin and skin is just
a visual appearance of the control and
it has behavior that handles the
interaction like event handling so this
picture sort of gives a nice idea of how
they work it's basically a Model View
controller approach if you will the
control is the model the skin is the
view and the behavior is the controller
if you notice there's public API private
API specified here so control and skin
today is public but behavior is not it's
private there are some changes coming in
that for a dot or release and unlike
jonathan talked about it when he'll talk
about looking ahead section and the
thing that the interesting part here is
that the control has a bunch of states
and the skin listens to those changes in
that state and it updates as visuals if
anything in this control changes and
what it does is it hands off all the
behavior actions to the behavior class
and the behavior directly
changes the control properties and again
the sense the skin is listening to it
updates as visual so there's this chain
of events going around going on
so let's look at some steps on how to do
this so we'll try to see how we'll build
a range slider class the other day I was
on MLS listening and just trying to look
at some properties and it was just a
pain to enter you know minimum price
maximum price number of bathrooms number
of bedrooms and I just wish they had
some range slider said I could just
slide and say ok this is this is the
range in which I'm looking for a
property I show all of you have been on
that website it would be nice to have a
range lighter for that purpose I think
anyway let's assume we're going to
implement this what we recommend you do
is start from the skin create a class
let's say in this case let's say it's
range slider skin which implements the
skin think of all the visuals that
you're going to put it and put in there
and then create a skin class call this
the range slider CSS say for example and
create a section in there for the range
slider and the first thing that you want
to add is the FX skin property which is
the path to the range slider skin and
third step is you create the control
call it range slider and you extend from
control in this control you set a style
class exactly the same that you had in
your CSS which is the range slider and
control has a method called get user
agent style sheet that you can override
to specify your style sheet that you
just created so that's pretty much it
once you've done these steps you wired
up everything together your control nose
bouts skin and the CSS all they are all
wired up together and from now on it's
just a matter of completing your
implementation for the visuals and
behavior and adding a bunch of CSS so
you'd sort of go through this process
for all the controls that you do in this
approach ok
just a little bit more about how we went
about doing range slider what we figured
was range lighter had all the function a
lot of the functionality that slider
already had so one way you could think
is to subclass slider but that's not the
best thing to do because some of the API
and slider now doesn't make sense
because slider has this one value and it
has a value changing and that doesn't
make any sense with range slider so a
better option is to actually extend from
control and what you can do is just copy
paste everything that you have in slider
and then just sort of remove stuff that
doesn't make sense and add the stuff
that you want to add for range slider
and that's what we did so rate slider
extends from control we had a skin that
implements skin and behavior and a lot
of the skin and behavior looks a lot
like the slider skin and behavior this
is how it looks so basically in the
horizontal and the vertical mode the
textbox is just not part of the control
itself but it's in the demo if you look
at the code range slider extends from
control so we added these four new
properties the low value low value
changing that's if something is changing
the low values it's the low value
changing will be true and similarly high
value and high value changing all the
other properties of slider for example
block increment snap two ticks show tick
marks or dick labels we just regained
all of that because all of that makes
sense we just removed value and value
changing and the constructor we set the
style class and again we override this
method get user rate instantiate and
we'll give the path to the range slider
CSS so that's the control class
for the skin the Rings lighter skin
extends from skin based so we've been
saying all along implement the skin
interface actually in all our skins in
the JavaFX UI controls we extend from
skin base which actually implements the
skin interface skin base is in a private
package it's not public but there are
again some changes coming in that for a
dato and I like Jonathan talk about it
right and for our purpose we'll just say
it extends from skin base there's a
bunch of stack beans for the different
parts of this range slider there's the
low thumb the high thumb the range bar
on the track and the constructor just
sets a bunch of style classes for these
and the behavior pretty much looks a lot
like the ring the slider behavior
weather if you have any questions feel
free to ask jonathan is itching to
answer those questions
he loves answering questions anyway so
the the CSS for the range slider looks
again very similar to the slider CSS if
you've seen it there's the low and the
high Tom there styled
similarly there is now the new range bar
which is the bar between the low and the
high tongue and we've set a background
color a focus color here is actually
blue in Caspian so it's using that and
the track is different whether it's a
horizontal or vertical mode it's saying
that if it's in vertical pseudo-class is
set on range slider then use this style
okay let's look at another example
rating control rating is you know to
rate something all used in I'm sure
there are some interesting properties
that you can have in your control you
can you can have as many number of stars
as you want so that's the property max
and rating it's the rating itself and
you can have horizontal or vertical
orientation and once again it overrides
the user-agent style sheet and returns
the path to the rating CSS again the
rating skin extends from skin base and
it has a what it does is that if it's an
horizontal grade in each box or if it's
vertical it creates a V box and
basically it's just adding a bunch of
toggle buttons all those stars are
actually toggle buttons and this method
update rating what it does is that it
goes it traverses this list of buttons
that it has and it says okay if my rate
is say 4 and I have 5 as my max then
I'll go from 1 to 4 and and I'll add
strong style class to it and for the
rest if if it already has a strong and
remove it so your CSS will now style how
these buttons look like and so the here
it says that because they are all toggle
buttons by default style it says in
rating and in this container if it's a
toggle button have we're styling using
images here and it's using an unselected
star and now if you have the strong
style class the way it's specified is
toggle button not strong you replace
that with a selected star and that's it
and you you can click on it and it will
it'll update the rate and then the
strong side has a they removed or added
and get this effect also we added this
drop shadow effect on for however so
when you're happening or we get this
nice drop shadow effect
that's it so that's more doing some
sample switch - I'll show a couple and
Jonathan will show a couple okay let me
run the toggle switch okay so that's the
switch gets this nice little animation
and you know it snaps back or if you go
all the way and slap the other side and
stuck very simple and the code for that
toggle switch so it extends region has
can you see that yes sure okay the code
for that is here it's just got two
labels and a stack thing like I said
before it has a whole bunch of event
handling going on here because you could
click on any part of that thing could
click on the stack pin will click on the
label and it's doing a lot of neat just
yeah that's better
okay so it's bring a bunch of event and
handling here and the interesting part
is the timeline here that it does if you
click on one of the stack pin or the
label which we already talked about and
it overrides the layout children and the
interesting thing here is that it
matches the clip to the the art width of
the clip is it matches the same thing as
we had for the region itself so it gives
a nice flipping effect that's it okay
how are we doing on time well that's the
CSS I think I showed most of it on label
the off label and then the that the
on/off slider is the stack pane the
thing I also want to run the checkbox
one so I just replaced
let me show hello checkbox first the
code for it so here what I did was I
said instantiate at a check box and I
took the style class and set it to
toggle switch if I run this instead of
seeing a check box I'm going to see a
toggle switch and the values bound for
that text string there so it says it's
on or off simple
okay I'll do range slider
so you can move the thumb you can do it
programmatically or you can move the
range itself all that stuff works in the
vertical mode as well so here I don't
think I want to go through the skin code
it's pretty elaborate I'll just let you
take over
I don't know about you guys why I'm sick
of looking cards so I'm going to talk
about the future I'll come back to the
demos later on a fifth time and we're
through all the questions
all right so looking ahead there's a lot
plan for JavaFX eight especially in the
UI controls team pro and i are going to
be very busy along with the rest of our
teammates some of those things plans for
Java effects eight include the following
having a public API for custom UI
controls so as per we're saying things
like skin base are going to become
public and we're going to be changing
API and we're going to be a breaking all
the GA of extras people but well I'm
sure will help them come right again as
well another thing that we want to have
is public API for both reading and
writing your CSS properties so this is
something that I've wanted for a long
time because as many of you probably
also you come from the swing world where
everything's done by a setter or getter
and you don't have CSS so having a Java
based API that lets you modify the
styling of all your user interface just
will be very nice and the same as having
to dig down until you know that designer
II stuff that we don't have to worry
about a lot of stuff's going on in the
RTL so the right to left and the
bi-directional tech support area at the
moment I've got one or two images to
show you as well as accessibility
support so accessibility is a big driver
for the JavaFX
8 release as well as RTL and by day if
you're in my hello
sorry my hacking tableview talk
yesterday I demonstrated tree table
support that may or may not be part of
Java FX 8 or depends on how quickly we
get through everything else I'm not too
sure what the plans are for charts I
guess maybe logarithmic charts and date
charts and all those kind of things
Peru owns charts so if you've got charts
complaints she's happy to hear them
miscellaneous features and tweaks we've
done a whole bunch of performance work
and of course I've been getting bug
reports and real-time from all of you
so injera fix 2.2 we have we tell people
use the skin interface and the skin
interfaces that's interface with one or
two method with maybe three methods I
think and no one ever does it you know
the Jap extras folks they're using skin
base and that's private API so we've
always recommended against it but I can
see your code I know you're using it and
so we need to make it better we need to
commit to a P I and we need to make you
know make a final basically you know
once it's the ones that's committed to
we will never change it and that's
something we're planning for JavaFX
eight and already there are a few
changes that we can talk about well I
can talk about them I'm not right you
should talk about them because they
might change so this is the JIRA issue
for public API for custom UI controls
main things in bit are t21 596 if
everyone's got their carry-on
so the way controls work presently is
that control extends from parent parent
allows for you to have children by
that's about it and the skin on the
other hand acts seen as a skin the skin
base extends from region and 8.0 skin
base is no longer extending from
anything other than object and
conversely control changes from
extending instead of extending from
parent and now extends from region and
we did this for a variety of reasons but
at the time we were in a big performance
making things work faster and noisier
expensive they take time and memory and
all this and so having the control be a
node and the skin be a node wasn't the
smartest idea so now the controls are
node and the skin is just laying out the
control basically so it makes them later
way there now conceptually is simpler as
well previously you would have a
situation for example with the slider
control the slider control would have a
style class slider and the slider
controls skin would also have a style
class of slider so you had this weird
issue where CSS was going down and been
applied to two places at once and we
were doing that copying behind the
scenes but conceptually now basically
the control is a container of all the
children and the skin is responsible for
laying out those children and as I say
the corners that I've broken all the
naughty Jeff extra spokes but I will
work with you to fix it in fact when I
did this change a month or two ago I
redid all the UI controls that we
currently show up in gyro fix 8 or 2.2
and of them take too long I retained
most of the api's I've just works with
minimal first the next one that's
proposed it hasn't happened it sitting
on my machine back of the hotel is that
behavior is currently something and skin
based that's kind of inherent in the API
is built into the generic type and you
have to have it in your constructor and
all this and for those that I know the
behavior as prevention is as a classic
it responds to Mouse events and key
events so the approach that I'm taking
and I'm
telling a rich back there for the first
time is that I'd like to use annotations
I'd like to simplify things considerably
and the reason is is because say you
want to respond to a button press with a
keyword combination that's not normal
for example it's control shift H
whatever it is for you to do that
currently you have to add a mouse sorry
a key event handler and do it that way
which is not the greatest we really want
you to be able to modify the input
actions or even more so if you want to
remove an action so for example you
don't want it to respond on the intro
space key presses how would you do that
and so like I say annotations are one
approach I'm pursuing at the moment and
this is a working prototype I've got on
my machine basically what you would do
is as we have now a bit of behavior
class and the behavior class at the very
top of every single behavior class are
two big chunks of code the first chunk
of code basically says when this key
events pressed use this objects which is
normally a string like the strings and
we like to select all and then the next
bit of big block of code says when
select all is passed into this method
cool this method which is the selectable
function further on down so it's just a
big chunk of code and basically you can
think of it as an input map the first
bit and an action map is second bit and
what I'm wanting to move towards is
getting rid of both those chunks of code
because they're not very nice and
instead what we're going to do is inside
our behavior class which is just a class
now doesn't extend from behavior we can
annotate in a way such as that this code
here is taken straight from button
behavior basically what saying is the
key pressed method is an action method
its invoked when the space key is
pressed or when the enter key is pressed
on all operating systems other than the
Mac operating system because the Mac
doesn't like to I don't know ask the
u.s. people about that I don't use a Mac
so I don't even know if that's true but
and but the thing is we've got this
we've still got the behavior class it
just doesn't is not a behavior it's just
a collection on methods that are
annotated that specify key inputs and
the method to call which is obviously
the method that's been annotated
now what you do is basically that first
chunk of code so the skin will now
basically be asked to process the button
behavior class which now has all these
nicely annotated methods and check them
into the button class and the button
class is going to get two new maps it's
going to get the input map what you see
there is basically a key combination
there maps to an object and then it's
going to action map that map's the
objects to the action and it for those
as longtime swing users you probably may
know that this API because I borrowed it
from swing and when I was first looking
into it I was I asked Roche why do we
see Fred out the input map from the
action map why don't we just go key
combination to action and the answer is
in some cases people want to be able to
say we use the input map or reuse the
action map in multiple places and they
just you know add it to the other areas
other controls for example and also the
nice thing about this approach is that
these maps are now publicly exposed on
site on the control so if you want to
change what the key combinations are
you've got them all accessible in the
input map and if you want to change what
they map to they're all available in
those two maps there so what we're doing
is bringing behavior all the way to the
very forefront and we're making it far
simpler right so write RTL support this
is a screenshot of a teammate of miner
Kinsley Wong seem to sing to us the
other day
and this is the ensembl application just
flipped around and so he's been working
on a prototype that very simply very
minimally impacts the API but the end
result is everything's kind of reversed
and flipped around and of course are
still a work in progress and there's a
lot to be done but you can see it
actually it actually kind of gave me a
fright you also did a version for people
in New Zealand in Australia
and for the first time I realize I'm
working on a UI toolkit previously I
just had all the stuff that was the
wrong way around I've always had to to
my monitor upside down alright so I
spoke about the tree table view
yesterday I hope you're all there if you
weren't feel free to get in touch with
me I'm not sure no I haven't got the
link to it but there's a Jarrett issue
on is the most second most highly voted
issue very very popular lots of
discussion lots of people watching it if
you're interested in the tree table view
contact me on JIRA bio that issue is the
best way to kind of get this discussion
rolling along like I see that
accessibility is very important that's
also handled by my team the plan is to
support Windows and Mac for the next
release I believe basically the plan is
to use the API is that the operating
systems exposed so they've got the you
know their screen readers and keyboard
navigations and all that kind of stuff
that's specific to each operating system
and we're going to expose the JavaFX
applications to those a to those ap is
look at that we're at the end I've
clearly of time for questions I'm more
than happy to answer as many questions
and defer them all to Peru and otherwise
you know feel free to call it a day and
go find some coffee thank you
and if anyone wants to look at some more
code I can bring up some you know Java
effects controls code or I can bring up
some of our work examples so whatever
you want so right so my team's the one
responsible for the CSS there's one
developer that's full-time CSS has a
goal is to basically be CSS compliant
you know fully it's I believe CSS to two
or three in that area at the moment
we're not entirely we have all these -
FX before all the properties and that
was because at the time we weren't
entirely sure how complained we were
going to be and we didn't want to kind
of have a situation where for example we
were embedded inside a web page and we
were have having a the CSS being applied
in both cases and being misinterpreted
by the web browser for example because
of the so we put the statics at the
front so that it couldn't be mistaken
for CSS that should be applied to the
website for example the intention is to
become a lot more compliant as time goes
on certainly I think he's going to be
working on things like animations and
we've heard a lot of bug reports this
week as well so multiple effects on a
single node for example from carrot
have a different layout and paint isn't
the same ethics for example if I add a
class to my control that
the namespace
so the question was and creeped me
because I'm not sure I got it if you
change the styling of the class does
that impact on the layout alright so yes
so yes it will be applied but
immediately is in the sense that we were
implied on the next pulse so it pulses
are very quick
correct
so I've heard there's a lot of times
rich can probably give a better answer
but design time API is kind of our
long-term solution for that right yeah
right so it's basically so yes so there
is an intention certainly so that people
write in third party controls gf extras
for example can annotate or you know
there are control such that they can be
in the pallet with the other controls
and seen Bella soon leave that's the
intent and the intention it's been
something at waiting in the wings to be
done for some time right I don't know I
we've got a developer in our team that
does a virtual keyboard I'm the
technical leader my team theoretically
but you know mostly we're just all it
equals and you know I just don't know
where how he's done it yep
right so that's another thing that's in
the wings is waiting to be done there's
a whole bunch of stuff around you know
selecting the right node via CSS that
just hasn't been done yet there's one of
those things like I keep I seem to be
inventing people because CSS guy a
virtual keyboard guy we've also got a
focus guy and so he's focusing on these
kind of focus issues he's very good at
focusing on things there's two is 2d
traversal
so basically arrows move to the next
most you know node and is the
traditional tab shift tab to move back
and forwards between the the nodes as
they are in the scene graph
so there's kind of real focus and fake
focus and so when real focus goes so for
example my table view control and table
view has focus and these type pressing
the arrows around to move the focus
table who's going to just move the focus
internally the focus remains on table
view even though internally we're
shifting the focus on to wrap probably
sorry I'm kind of quiet
all right so can we so let me get this
right countless so can we make a CSS
five it looks like swing alright
the problem is what swing do you want it
to look like so Windows Mac Linux metal
is a lot of work and certainly when you
when you're trying to emulate Windows
you can never be right you know Josh
Marin actually spent a year doing little
tweaks back when the swing days there's
a lot of work to be done for there and
III don't it's not high variety you
should see the size of our list of
things to do for the all you know eight
nine ten whatever you know we've got a
lot of things to do unfortunately you
know on however there is the Jeff extras
Styles project we are accepting submit
or they are submitting submissions for
styles there are some CSS files
appearing for various styles some people
have tried Mac looks and iPhone looks so
certainly I'm sure they'll love to have
some submissions but no there's no plans
proof you got some questions to answer
making some cat public would you suggest
more an opportunity for a president
controls or should give you
do the evil thing you know yeah I'll be
doing it yeah you know I don't do that
do it that way because it's the best way
to do it we will break you I'm making it
very very clear but I did all our
controls and then you know I did all the
API changes I did all the research I
change all their controls in a week and
you know we've got quite a few controls
probably if I was timing properly to 2
days of kind of thing you know the APA
you know what I was doing at that time
was I was kind of getting rid of all
this API that skin base no longer has
because it's no longer a region you know
the sizing and the layout of children
and all these kind of things and I kind
of made API in there that forwards it
over to the control so in many cases
you've got minimal changes so certainly
make controls I want to see more UI
controls just be aware that we're going
to break you cool so do people want to
look at more code or do you just want to
break because we've got about 15 minutes
now the question
tap on one of the sessions and open
it's not a dialogue it's know that
and
also the scene builder help about his
dialogue
some of the other options that hold the
message
what do you think about that is that
so the pattern of so just to make sure I
understand the pattern of opening up a
modal kind of you know proper windows
native dialog or your Mac dialog versus
having a popup on you know on the screen
that comes down to your personal
preference personally and I prefer the
ones that I that pop out of the window
you know I prefer a proper window that
yeah
that's lit both possible no no it's got
always on top you can you can change the
modality over the pop-up such that it's
always on top and stops things well you
can't come find me we'll find it is it
Steve yes on stage is you answer this
means with building a more well-designed
system because we now I should prep
serving
right
right so in my hacking I have created an
action you can see it's there on the
action map and basically the action
method annotation there creates actions
behind the scenes so that that's my
current approach so that's my intention
certainly I come from the swing world
and I loved actions I thought they were
a bit broken but I like them a lot so
certainly my intentions to bring them
back I'm pretty sure rich likes them as
well
so we'll try to bring them back for a
future release and they struggled with
it doesn't make sense to create multiple
instances of a single action that's the
problem I always had so I always thought
they should really become Singleton's
but we had had to do something about it
but yeah there's problems with them gyro
fix is a chance to make them right so
certainly there isn't a JIRA issue on a
year
feel free to file a JIRA issue I would
like to start a discussion
right so small image large image those
kind of things you know I really liked
it so that I would like to bring them
back so certainly the way we've
developed our API is always been to be a
single method for inside the interface
such that when we do have lambdas that
all that anonymous inner class code
disappears and you can basically have
lambdas from the get-go so all the event
handling and the key events and you know
all these kind of API by far and away is
single methods so we use callbacks and
all those kind of single abstract
methods which is really cool because I
can't wait to cut down the amount of
code we've got and it's across all of
geography it's not just you know your
eye controls will it be usable with all
the Java as well John seven
I believe the answer is no I believe
Java ethics yes JavaFX 8 and correct me
if I'm wrong but Java fix 8 will work on
Java right and you know I'm not on the
deployment team and I don't I don't have
these problems but my understanding is
that creates a nightmare for them you
know trying to support multiple java's
is difficult but yeah that's my extend
to my understanding ok do people want to
look at some code now I can go back and
show you some code if you want oh I see
a cute threatening to show your Co and I
get more questions it runs like a code
yeah sure
Oh
I don't know I don't know if the
documentation people have a sample on a
example in there I'm sure there must be
um you know this yeah yeah so certainly
there are ways to do that and I'm more
than happy to you know have a chat with
you offline probably about how to do
that but certainly basically what you do
is you create a you know when you do the
whole bind expression you normally just
pass in a property you create a binding
and then the constructor you basically
say what you want to bind to so it's
just a generic a sorry a variable
argument constructor that takes however
many things you want to bind to so you
just pass in the properties of three or
four things and when any of them change
i compute value methods called and you
can update the binding so it's quite
simple
certainly it's nice to have sometimes
I've got a meeting tomorrow about
validation we haven't stopped thinking
about validation a great tip and great
div we did have discussion and the open
GFX dear mailing list two three months
ago and it threw up a lot of good
discussion certainly the way I would
have liked to have gone was vetoed the
community spoke and we have heard and
we're currently still very early in that
research but one options to go down the
beans validation path where you apply
annotations to your beans which specify
whether it should be non null or valid
or how it should be positive whether it
should be an email all these kind of
things but I kind of see that as an
answer for one kind of validation
problem certainly when I was doing
validation for my own applications and
the dark old days of swing I would
basically be lazy getting the text out
of a text field and I want to have a
mechanism to validate it which is more
of the J Gordy's approach we basically
have a validator and you validator
return some validation results so
certainly I would be disappointed if we
didn't also support that kind of
approach so validation is one of these
things that's very much up in the air
and a lot of discussion has been had on
the open G a fixative mailing list
there's been no internal discussion
certainly I would
more public discussion in the next few
months my list is incredibly long I
don't think of each average I think more
last night rich has an answer
we at all
Java during odd degree people laughing
because all they offer
community has already
the community got to the point where
they kind of told us their preference
and what they liked and what they needed
that and there was a lot of things we
didn't know about so I was very
informing but there's always a next
hurdle of turning you know talk into
action and we would love to get more
people doing you know providing patches
I would happily work with as many people
as there are basically to support us and
give us fill in the gaps you know you
wouldn't believe how many times I hear I
would use jar effects if only and the F
only is always a different if only so we
have a lot to do we have to prioritize
our lists are all very long Richard
surprised me on Monday when you said
when we released Jer affix to a year ago
that felt like such a long time ago that
I released that we release Java fix 2
and things we work incredibly hard but
we're always you know working - for the
next release and for all the features
that we hear that people want
but for those
Hey
so it's still very much at the learning
how to do a proper validation framework
you know with we don't profess to know
how to do everything in validations one
of those things that we do want to do
right I think in general we've done
almost all about api's and char effects
very very well and I wouldn't want to
have something that were disappointed
because we're all very proud about api's
right
yes that's totally true so we don't it
doesn't need to be a you know a gyro fix
library either so someone some start jf
x goodies and start doing validation
frameworks and Java all right cool well
we're going to go four minutes to go so
I'm not going to show any more code but
we'll survive you've just you've just
made if you're one more minute I would
have said showing code but I'm more than
happy you know to you know answer any
more questions otherwise I hope you've
had a good job of one I hope you
continue to have a good job of one and
thank you very much
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>