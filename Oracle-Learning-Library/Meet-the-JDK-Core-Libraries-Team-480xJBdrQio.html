<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Meet the JDK Core Libraries Team | Coder Coacher - Coaching Coders</title><meta content="Meet the JDK Core Libraries Team - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Learning-Library/">Oracle Learning Library</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Meet the JDK Core Libraries Team</b></h2><h5 class="post__date">2013-03-01</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/480xJBdrQio" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">good evening this is the JDK core team
meet the team off we're going to just do
this as kind of a question and answer
session and have people who are
participating on the panel talk about
what they're working on and feel free to
answer any questions about or ask any
questions you can answer questions to
about anything related to a core jdk
platform i'll start with my own
introduction I'm Mike do we go I work in
core libraries group Myers a work our
things like collections I'm working on
the lambda library support for java aid
also pick up some areas like uuid and
other assorted things along the way when
you do have questions they are recording
the session so unless you're talking at
one of the mics it won't be on the
recording so we'll have to repeat the
question is if you don't want to ask
them yourself to a mic go ahead I'm Jed
arcia I've worked on floating point
libraries in jdk 7 i push this change
that for dr evil objects various math
related things most recently I've been
working on the juror migration for the
jetty hey bug database which recently
went live last week so it's quite happy
about that good job I'm Roger eggs I'm
sort of recently contributing to the
core libraries in the context of working
on Jace are 10 and the date and time API
so it's been interesting working with a
separate expert group and an open source
project for something's got to come into
the JDK yeah my name is michael mcmahon
i work on the java networking team they
maintain i'm working out the moment is
the is a new HTTP client for JDK 8
there's a
I talk on that on Thursday at eleven
o'clock we can just start with questions
there's another person or two expected
on the panel that haven't quite arrived
yet but a lot of amenities themselves as
they get here but we just go ahead with
with questions mr. Arnie sure go ahead
the changes that I've ever
collection
face almost suggests that adorable in
their faces yes
it was kind of important teaspoon of
Forestry important message
so I guess what getting at is if we want
to have computer book about somebody
want to what would be useful collection
and still
how would it be impossible sorry I had
to repeat the question was mostly a
question about if you have immutable
collections that are not part of the JDK
how would you use them within the
context of lambda is that pretty
accurate but actually you know
lesson 6 signature
I did not everything that expense
collection of the majority of the
moratorium
oh yeah the main way that that will work
is via the defaults mechanism that we've
added so for the any collection class
which is not one of the standard JDK
ones or that overrides it'll use a
default implementation the default
implementation you know of for each is
just to get an iterator and call a new
style for loop on those elements that's
correct the easiest way is to is to
implement stream and if you can
implement stream and or split erable or
splitter ater then you can access the
full lambda libraries
implementations of those all those
interfaces execute that
well there is a there is a rapper on
iterator and iterable for creating a
stream out of it but the default
behavior for things like splitting on it
is very weak so it's not going to have
optimal decomposition right another
question over the side
come on bring it to sound like a puzzler
maybe I'm visits in a suit I don't think
so these are the puzzler okay so it's on
it's on pastebin I think we have a
browser but can you try typing in that
in Joe so while we get that try and get
that up we have any other other
questions just I'm just curious up in
there java or socket me i was talking to
eat time off just curious why isn't
there a socket right time option
peace I haven't found one reading good
documentation
can't can't see it get the cluster the
front there isn't that job adult
that she gave up
it's a political statement usually shy
away from that it got one
I'm not go see it's a regex if the
rednecks question
can understand what
when
let's at runtime it generates an error
or
s might be something better to take
offline
we had another question over here
did you speak up please
you're asking 24 to take a primitive
list and convert it into a something
beyond what arrays dot as list would
offer an array of primitive types right
like a ray of int yep
yeah there's kind of a mismatch there
between the the box types and the
primitive types but it's tedious but not
difficult it's tedious but not difficult
to do so allocating the rain manager for
that arrays done to it there's some
utility of having it in a standard
libraries but it's not there so my
question was i I was reading about
socket
and I upon donation for something to eat
i watch what
I don't know that there would be a
separate time out for Fort discreetly
but I was under the impression of the
general socket timeout would also apply
that is cylinders or download options
only works on a read but if i'm a server
don't start going to write
yeah maybe you can do that through
through the Nile api's through through
through the non-blocking channels you
can probably abstract fact you can
solution I am falling everywhere to use
an i/o but still that thread that's
blocked on the right is forever
implementation to use an i/o which has
its own level of issues rewriting if
you're using
the open source and somebody's already
written like a good examples HTTP client
libraries that you on every many people
use which has a socket timeout option
now all of us are moving into an ir
because you don't have a right time yeah
well the the sucker options they tend to
mirror the the equivalent options at the
native level so that's probably the
historical explanation we did go out and
find SC native level code and it does
have a right time adoption for some
reason from the socket later it's not
being passed with a native layer so just
go skeeters and there is also i believe
it's hero or something that's or take it
down submit but that's always that's
been left open for years
yeah if you'd like to come up to me
afterwards we can take a look up the
aura fee and then see what can be done
so to give you some ideas maybe about
the questions to ask or future things
coming in Java we put up on the on the
slide there a list of the are called
Java enhancement proposals these are
proposals for features in Java 8 and
later that are being worked on by both
well anybody most of them would be
Oracle but there's other ones from IBM
and redhat it and others for
contributing to Java some of these are
48 some of them are for later but maybe
some ideas there go ahead go ahead
election literal it's not going to be
part of Java 8 there's I you'd have to
ask Brian gets that is in the in the
language Boff which is next he's the one
person who could definitively answer
what's going on with that I think
they're a good idea we want to have
support a larger variety of literals in
the language but not deuter in such way
that we only do one particular sort of
literal versus another so we have some
ideas about how to do that but there's
too much going into a to put them in
there um has already been said elsewhere
you know we're moving to trying to move
java to a more regular release schedule
with more of a train model you know some
of these chefs here are proposals for
things but it's not even clear what
release they're going to go into when
they're baked they'll be put in you know
collection literals i don't know if
there's a jet for it yet but there will
be at some point and when it gets done
it'll get slotted into a release it is
kind of the way that something like that
would go and you know pressure and raise
the importance of it does help it get
done sooner but one reason we're
thinking we're not trying to put it into
eight is because we want to take
advantage of some the other language
changes going into a such as type
inference so if we have typing more type
inference available in the language and
the compiler we can have a richer set of
literals then say the project coin
proposals for similar features in 50 k 7
which did not assume type inference
being available
right so this could be related to are
you good yeah absolutely we communicate
them fairly regularly and in fact the
guava lead Kevin beryllium is on the
lambda libraries expert group will be
bringing a very small amount of guava
features over into Java 8 this is mostly
the static utility methods and optional
class we haven't got any plans for any
of their collection classes at this time
our original proposal the time JEP 108
was specified said that if we did need
any of the guava implementations for the
lambda implementation we would make
those public mostly because we knew that
we put it in jdk and didn't make it
public people would just use it anyway
so as it turned out thus far we haven't
needed as an absolute requirement
anything from guava in terms of their
collection classes so we haven't
imported any of those things in but
there will be some of the small niceties
that they had we've already stole 147
that we were able to get in which was
the required non-null they have a
different name for it I've forgotten
what their name is but you know some
other things like the utility class that
lets you get the hash code of a
primitive without having to make a box
value where you know it just makes sense
to have that so some of those type of
functionality will be bringing in from
guava will go there he's hasn't answered
when you asked one yet go ahead
is there any plans to add us for the
special value signaling not another the
double class and more importantly we had
support from all the special values
right so the question was relating to a
few things one is the signaling man
value so I happen to have served on the
utterly 74 2008 revision committee I was
editor of the spec for a while so one of
the problems with signaling and while
they were defined in the standard there
is not a bitwise portable encoding of
signaling ads across processors so say
your spark your x86 your PA risk your Rs
6000 will have different it is loud by
these standards have different encodings
for signaling that so we will not have a
portable signaling that value plus since
Java doesn't provide access to the
environmental flags such as invalid you
can't really tell the difference between
a signaling man and a non signaling man
because the values returned as floating
point values are the same in either case
also one of the reasons we have not
supported access to the I Triple E
environmental flags is because they
would greatly complicate or greatly
limit the sort of optimizations how
jitsu could do and very few people want
them so it's a high cost little benefit
very few per glass for it so it's not
the sort of thing we'd be inclined to
provide the other question was really to
the big decibel class and will that
support the special value is defined by
i triple e 74 which includes decimal
floating point so we don't have plans
for that there are a few values that
aren't supported in in the big decimal
class one of which is negative zero
which people find it be a bit odd you
you there is a good reason 4-0 you need
minus zero because we have signed
infinities so that when you divide one
by one by minus infinity you don't get
the same thing as if you divide one by
positive infinity
you can actually have systems where
instead of adding to infinity is you out
a single infinity but then the infinity
it doesn't have a sign so you kind of
have to pick your poison so we don't
plan on adding infinities and sign zeros
to bigdecimal but it's just a small
matter of programming to you know add
those special values yourself and have
as a wrapper around the core arithmetic
logic and bigdecimal there are not at
this time not alive
well my personal opinion which is not
shared by everyone certainly not
everyone in this room let alone everyone
in the traffic community is that limited
operator overloading would be a fine
addition to the Java language but that
is a contentious point it is a often a
religious issue meaning people have very
strongly held opinions and you can't
necessarily reason with them but so I
would not i would not plan on seeing
operator overloading for bigdecimal and
begin inter anytime soon although first
thing I think it'd be a fine fine
edition let's go over this is almost
like Java chill scanner swear it was
slow in farce with personal files really
could you repeat the question please
there have been one small set of
suggested improvements which isn't
directly to scanner but is to integer
parse int and others which allow you to
use as a character sequence rather than
a string and scanner currently passes
the string subset off to parse in order
to do this to do that parsing by using a
character sequence it wouldn't need to
generate a substring in order to do that
which might have some improvement in
performance but it won't solve the
problem completely
eats like underpass posture he's
probably the way to uses record spaces
it didn't know hadn't heard this was a
problem report before I was never here
like if you look like teleporter style
like every elevators competition where
people have to actually write costco to
parse files he's coming common knowledge
in this narrow that gap you scan like
you would even see like people cost like
recommendation doctors can java sea is
that one of the cases where it recompile
the breaks every time I don't know that
you look at the car I believe it's there
oh yeah it's in simple judges charge of
ours like it follows himself
interest rate for just this kind of
mixing
as we thought of
just how the question like how you touch
with you yet but as I just denote the
processes oh you actually make sure
those
I mean certainly bug reports and or
observational analysis you know beyond
what we put in a bug report you know
encore lids dev would be a place to
start we go ahead I really the one is
right in the application for my son is
four years old to learn typing and
playing along so what I want is what I
was thinking of was I just need to
basically a grid of most based on
characters and first I even want to do
that on the console so looking at the
support for console
six or seven people can seem like this
was there was about from different
things with Jeff did allow the user
enter a password and so then they seem
to be back at increases java that pretty
old and I am so I was looking for a
thicker and maybe I was looking in the
wrong place maybe I should have looked
at something on top or swimming or so
like the text pane but yeah why would
you send me a Viking with such a simple
idea for
let his dog I probably FX authoring
tools which FFX would be just entering
text in a textbox whom which can be
pretty straightforward to make a control
that did that go ahead dialing g6 pain
yeah he could write vt100 character
sequences out to the terminal which has
color and positioning in terminal and
Evan those vocal yeah that's why we got
rid of that crap just open up a scanner
to system in and then
without worrying about any exceptions or
anything just read stuff in from the
console exit the currently scanners slow
a four-year-old probably can't out
goddess but but I want to yeah probably
off on the bracket probably happier
there for that moment
go over to this side here for another
question so strings as the problem that
the ashpit up first string is already in
it so Wisel your unwisely the
specification for how to calculate a
strings hashcode as part of its
specification and in seven you six we
introduced a feature that the Java core
hash-based maps which is hashmap hash
table linked hashmap concurrent hash map
and weak hashmap when they encounter a
string key will now instead of calling
the strings hash function will call a
different hash function it's actually
based on murmur three which is a fairly
well respected though apparently not as
well as it was when it we chose it in
January that's the life of hash
functions is still more than adequate
for what we're using it for but it's
gone downhill a bit it'll generate a
hash using murmur three instead of the
standard string cash code and then it
will use that for putting the string key
into the map so we delivered this
feature in seven you six it's not
enabled by default in part because early
in the seven you six cycle we generated
a build where we change the default
implementation so that every map would
use this behavior and actually a lot of
stuff broke internally as in the JDK in
jdk test Suites and in JCK tests as well
as some of our the apps we use for
performance testing apache and
everything and as it turns out there's a
lot of applications which have implicit
assumptions on implicit or explicit
there were some explicit cases on
the order that you'll get keys out in an
iterator what does the specification say
about that point the specification says
nothing that you shouldn't expect any
particular order at all but some things
like service loaders we actually found
that the smaller the hashmap the higher
the it was a small fixed hash map it was
almost certain that there was a a
dependent upon iteration order service
loader would be an example and that
you've got four or five services they
have interdependencies well the first
time I worked you stop thinking about it
and now if the iteration order changes
and they get initialized in a different
order well they may not work anymore so
we weren't able to enable it by default
in seven u6 we decided that for the
purposes compatibility it wasn't
advisable you can still turn it on with
a system property switch and the system
property switch actually lets you
control the size of a hash table has to
grow to before the alternative hashing
is turned on so we recommend somewhere
around 512 elements we assume that after
you've got 500 elements in a hash table
you're no longer expecting a particular
iteration order if you had a static hash
table that you were loading with the
same set of elements every time you
might actually still have an implicit
assumption which is why we make it
tunable so that if you have to crank it
up to a thousand or whatever you can in
eight will probably be using a different
solution it will have a current thought
is it will have predictable iteration
order but it won't be the same one as
Java 6 7 or the alternative hashing it's
also possible that for security and
depth reasons it may still have a random
iteration order if somebody does define
find a collision attack having a random
mask that is applied to each hash map
instance so that only full collisions
are useful to them does make it
sometimes harder particularly if it's
hard to find collisions
the default way hatch there's a lot of
detail in this but the default way that
hash maps are populated it masks off the
low bits of the hash code in order to
find the index position so if you only
need if you know that you only need to
find a partial collision on a hash code
of the low index bits you you don't have
hired a problem if you have a randomized
hash function such that a random values
chosen each time and it's used for
seeding you don't have the same ability
to generate partial collisions so it's
possible an eight that it'll still be
unpredictable for iteration order it's
kind of very advisable that people start
testing with this now because you will
find that your code has implicit and or
explicit assumptions as to the ordering
the explicit assumptions as it turned
out were x509certificate extension
ordering they assumed that they would
come out in some particular order and
they didn't and if people wanted to test
this now Mike if there's somewhere they
could go to get JD ke builds the
solution that's in current JDK 8 builds
is by default enabled but it doesn't
isn't currently the solution we expect
to use in the end after we prepared the
initial solution which we gave a lot of
bacon test time before when in the seven
you six Doug Lee had been thinking about
this problem and came up with a new
solution around the end of May and had
since that time has been coding it up
and he's just about done our
anticipation is that his solution which
is technically superior to the one that
we included in seven you six will need
to be back ported from his concurrent
hashmap implementation of it into the
regular other mainline main JDK map
collections or hash based collections so
you can try the one that's in jdk 8
bills and or turn the switch on in seven
you'll still get the benefits of the
unpredictable behavior but some of the
performance characterization stuff but
it won't be the same as what probably in
jdk 8 final that's true regardless
system proper we don't have a way to
dynamically add remove fields
unfortunately under control of assistant
property as it turns out that they do in
the native side on hot spot hot spot
does magic things with strings and they
could do that but we we can't in Java so
right now there is an additional field
on string for the secondary hashcode
because string hash values are cashing
is absolutely critical to anything
involving string performance we notice
that even simple things like a copy
constructor of string didn't currently
copy over the hash code value when you
copied a string if you add that if you
if you copy over the hash code value of
addition to the string it's actually
noticeable on some benchmarks that's how
heavily string hash code is used so we
did have to add it as an additional
field and there's absolutely no way that
they could share the same field because
even if we use only hash code or the new
murmur three for your maps there's lots
of other uses of hash code by other
things that we don't have any control
over there was a lot of concern about
the increase in size of string that this
would would incur so as it turned out we
had another long-standing change which
was planned for string which is to
remove the offset and count fields which
is related to substring sharing so
currently when you call substring you
actually get a special string which
refers to the same backing character
array but with an offset and count we've
known for a long time that that actually
is a bad trade-off for
general business type workloads there's
some parsing cases that it turns out to
be quite important for but in general
removing this count offset feature of
sub shared backing arrays as turns out
to be a win so in order to get the space
for that extra hash code field we
finally did the chop and and substrings
are no longer shared with their origin
string just one or two other quick
comments on that changing the iteration
order hash map and update release is
usually outside of our ability policy
for behavioural compatibility even if it
is allowed by the spec we have changed
the iteration order of hash map and hash
set in previous major releases and will
do so again this time so please don't
rely on it in four classes in the JDK in
general Java classes it's we've learned
over time is generally a bad idea to
specify the hashing algorithm if you
don't have two cases where you have to
include when you have multiple
implementations of interfaces that have
to interoperate in collections and
you're not using identity as a quality
in that kind of case you would have to
define the hash code so the hash maps
for instance could work but if you don't
have to define the hashcode algorithm
it's better not to have to
one other key point that comes out of
all that work on alternative hashing was
is that the job of the hash based java
maps are entirely dependent upon the
quality of the hash functions that
they're provided by the objects in a
normal you know other other hash map
implementations the hashmap does the map
does the hashing of the data object
itself so it could change the hash
function that's used in Java it has to
rely on the object to provide a quality
hash function it is worth doing some
analysis on your own objects if you're
putting them as keys in maps to see if
your hash function is of reasonable
quality you know one thing we noticed
with switch to murmur three is that we
thought that there would be some
performance penalty because murmur three
is somewhat more expensive to calculate
than the current string hash function as
it turned out the overall performance
there was an overall performance benefit
to switching the reason is that murmur
three has better distribution so that
the hashmap was laid out more evenly you
had fewer cases where there was buckets
chaining or linear chaining in buckets
of the hash map because of of collisions
so it was kind of it for us a
demonstration note ed the better the
quality or your your hash code function
the higher performance of your hash maps
go ahead
ready to be routed over the whole brain
elements
9
well if you're going to do a hashmap
that had let's say only 20 elements but
they were distributed clean a thousand
you know modulus 20 would be just a fine
hash function because you're going to
get even distribution in that case you
want is even a distribution as possible
over the whole range yeah
go ahead as anything change singer for
our deprecation
deprecated code
I'm not totally up to date on that but
seems that
especially for examples in your day time
coming search answer
from the day
things like that just in New
why isn't it generalizes he just keep
everything because someone like our
policy for the last several years has
been for things to have deprecation
added to them they have to be actively
harmful as opposed to just ill-advised
so if they're not actively dangerous
we're probably not going to deprecate
them so we haven't deprecated very much
recently because of that the reason one
of the reasons the deprecated methods
and classes have been left in the
platform so so long even though we
recommend they not be used is to keep
the buying a binary compatibility
contract of the platform which is that
existing class files continue to link
it's trivial to remove these things from
the JDK but if they are removed then you
know old class files will no longer
linked in people get upset that happen
so to date we've chosen to keep them
around
good is there a way to get a list of
network interfaces
base
now that's that's the only way to get
the list of network interfaces how is it
inadequate is that on a particular
platform or zero bug yeah I mean there
have been issues with that before but
have you filed a bug on that or yeah oh
okay well we can check into that
well we can we can check into that
spot to available go ahead anyone go
ahead
substring new strategy develop our team
is there are there any other libraries
for every way you know they're good it
hasn't actually been rather it hasn't
actually been necessary the one place
where we noticed it had the worst
performance was a inspect JVM 98 was
that there's a component they're called
Jack which is actually an older version
of the Java Sea c compiler suite or
compiler builder sweet and that they
fixed the problem in in in the new Java
CC they don't use the same technique
that they use the jack there are some
people who were doing not it's not XSL
XML based on graphics SVG that had their
SVG parser which was using substring
heavily they had to convert that and it
it took them about a week in order to do
the conversion and then they found out
that the result was much more memory
efficient anyway because the and faster
because they weren't creating objects
they were just using a string in place
for doing their they're processing so
avoiding creating sub-objects whether
they shared a backing array or not it
turned out to be a performance problem
for their code anyway so we haven't
found it absolutely necessary to come up
with an alternative plan there is some
suggestions for better implementation of
substring than we're currently using now
right now it just makes a copy of the
subsection we had a couple suggestions
for better than that but haven't come up
with haven't done anything with those
yet there was some discussion on core
libs about it and you can follow up
there and
follow that if it's if it's important
good job with
and he in turn
when you follow
what is the recommended
okay both kidneys can be used in don't
jump don't know the answer at all my
answer would be netbeans I meant to just
build the application those are two
technologies the people on the panel
aren't necessarily experts on we are we
don't necessarily experts on dependency
injection and FX I have a few questions
for the audience what version of Java
are you running jdk 7 a few hands it's
good in production sort of okay a few
okay jdk six no towing you all in a few
months right so you should try seven now
jdk 5142 great great release 1131 or
earlier that's good idea in price use
we've had a big 131 or 142 contingent
one dot one first java one tending
second three or more for 5 10 or more
yes yes I'm going to mention anyone here
with more than 25 years ago have
experienced there's jobs on dice
apparently it only feels like it okay
well thank you for coming let me see you
next year</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>