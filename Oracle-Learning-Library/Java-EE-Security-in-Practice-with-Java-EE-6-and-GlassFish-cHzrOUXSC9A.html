<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Java EE Security in Practice with Java EE 6 and GlassFish | Coder Coacher - Coaching Coders</title><meta content="Java EE Security in Practice with Java EE 6 and GlassFish - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Learning-Library/">Oracle Learning Library</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Java EE Security in Practice with Java EE 6 and GlassFish</b></h2><h5 class="post__date">2013-01-31</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/cHzrOUXSC9A" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">you here to learn a lot about security
today you're all obviously interested in
glassfish that's a good message I really
love that to hear we brought a little
bit of an agenda today I hate doing that
kind of stuff and presentations but yeah
I had to so we're talking about roughly
three topics today a little bit like
warm up for our speakers to get used to
you to get get into the mood of speaking
then we have the main session content
that talks about the ten most important
security flaws you probably are going to
face with your applications and
furthermore and a little bit of a take
away just to keep you entertained and
happy as I said I'm I'm the yellow one
today i am marcos izola right beside me
is Massoud and yeah I don't know if you
won't like to introduce yourself a
little bit come on over i'm at oracle at
glassfish team and I before joining
class 50 my rota book on Hawaii and
glassfish security and that's the
subject that I lied I usually blog at
that but that blog address that you have
there and till you have the tutor others
that you got there so if you're
interested you can just follow that and
take some some blogs that I write on
security and glass fish and Joey in
general thanks I give you two days yeah
okay the ACE is obviously the friendly
one or reckless though yeah I mean
you're all know read now I'm just
kidding we love Oracle that's why we're
here right thank you okay what am i
doing i'm i'm part of the java ee
ecosystem since a few years few of you
probably have seen me before speaking
around at some conferences i try to
extend that whenever there's a chance
you've probably seen me on twitter my
account name is my fear so yeah whatever
you like to know and keep updated with
security java ee and last version in
general just take a look there the
session title holds out something like
secure
to you with glassfish that is a little
lie I mean we're talking a little bit
about glassfish as a kind of an example
but obviously everything we show you
today is not tight to glassfish it's
tied to java ee so you end up using some
kind of container honestly I don't care
if it's glass fish or not if it's
websphere if it's jay was or whatever is
out there so take it as an example for
things to look at we all love glassfish
by the way so it's a reference
implementation you have the tightest and
freshest bits available during the whole
time frame even the specification
development so whenever you have a
chance just take a look at a glassfish
org yeah talking about security is
boring not not for the speaker I mean we
always excited to be in front of all of
you and have the microphone here and do
some stuff but yeah for the audience it
is boring so I thought I tried to
introduce a nice example how many of you
have heard about the galleria java e6
application nobody that's a surprise we
don't have a lot of good examples out
there full-blown examples about what
Java EE 6 is able to deliver you've all
seen the Java tutorials what's your
impression yeah that's mine I mean it's
it's a very slight example and the
galleria is done by vineet reynolds a
fellow friend of mine and yeah he tried
to do some domain driven approach with
java ee 6 and by the way he developed a
not too trivial very nice application
which is freely available on the apache
software license so you can take a look
at it it's running down on bitbucket and
i also did some documentation on how to
set it up and get it running the big
issue here is testing so the complete
project also contains a good set of
achillion test tests you can also run
and have a good experience whether
I definitely not going to show you the
galleria and action today because that
is not the main goal but what I'm going
to show you is how galleria looks like
if you take a first look and this is
obviously the domain model the core
entities are you see within the galleria
project that's not much it's a very nice
but we're talking about security today
right you notice that one are you
feeling looking at that kind of things
in a domain model who's feeling
comfortable today nobody okay any good
idea Laird come here you're the only one
I know come on you're feeling good with
that yes or no you're not okay perfect
fine let's look at the architecture I
love some fancy tools out there this is
done by structure 101 without any any
more tweaks so this is what comes out of
the tool do you notice any security
related stuff they're not really right I
could I can promise you there isn't any
so no module sub components or whatever
you like to call them that actively care
with security let me give you some more
information about gallery in general
just to keep you warm we have kind of a
form based authentication we're using a
JDBC real behind that and we do a fancy
feature that's called programmatic login
with in glassfish so all the bag and is
secured by roles allowed annotation so
what's that is that good is that enough
do we all feel comfortable with that
who's feeling comfortable with what
you've seen from the gallery until now
nobody surprised who is feeling really
worried about the galleria at least two
hands and all the rest is kind of don't
know right okay
yeah let's look at that a little bit
deeper what was the motivation behind
that talk the basic idea is yeah we
would like to share what we know
security is kind of a boring topic and
don't kill me for one of those people
are really interested in being boring or
talking to talking about boring things
so but what we what I actually do is I
see a lot of stuff out there I'm part of
a research and development department
and we tend to come in when people hit
the walls so we only job mostly is just
to fill the holes in the walls after the
project's left up so yeah and that tends
to be 30 projects a year coming down the
road with different kind of problems not
all security related but enough to share
some of the insights and I know a good
good percentage of the problems could be
solved by people like you by being aware
about them just front up you're not
having to love security up to the
deepest holes but you should be aware
about it and that's the main goal of
that talk just to point you to the top
10 issues and yeah beside that I'm
obviously going to solve that gallery a
puzzle for you today so I'm really
curious to see how your impression was
talking about the top 10 floors is isn't
easy as with all top 10 lists you have
to find any kind of reliable source this
is so this is a good first first graph i
guess it was heard about the owa SP guys
okay they're carrying a lot about web
application security since a while
exactly since roughly 2000 so they have
a lot of stuff to offer a lot of boring
stuff a lot to read but also some more
practical hands-on api's and libraries
so those guys publish a top 10
year by year so it's a good idea to just
look at what they have as I said it's a
top 10 list so you could expand that
list by any number of items you'd like
to so this is really a first first tip
of the iceberg to look at yeah that's
what we're going to do today we are
getting through every single one of
those ten steps and I try to present
what the actual attack is what the
security flaw is about and then we look
at it how to prevent it come on in you
happy okay injection who heard about the
injection before okay angry that's a
that's a quite popular topic I'm
surprised to see that on number one
still I mean it's not that nobody would
knows about that kind of things but it's
all about manipulating data in in any
form so whatever interface you expose
might be user interface or some kind of
servers to based on any technology you
know it's all about manipulating the
data behind that doing some unintended
readings doing some unintended
manipulations dropping tables and all
that stuff that really is nice you
basically have two areas and the Java EE
space in general where they could affect
you that's well like leave the
validation side all that happens on the
UI if you have a user interface and this
is definitely the database the data
layer stuff okay what could you do to
spot that this is one of the examples
everybody knows in every security
awareness practice you could even
achieve that kind of stuff with jpa
which is by default very safe but you
still could use some really fancy
methods out there to do things like you
shouldn't do so if you come across some
kind of unvalidated user input that
directly goes into your sequel selects
that's definitely a good good idea about
having a problem here what you do about
that obviously first really important
part is any ties input and that is some
that isn't fun for good reason the first
point here you probably come across this
on other slides also but the basic
message is don't trust any user there
are no good users out there they all try
it the hay i'll try even you try that
before I mean you've seen some fancy
idea that obviously pulled some fancy
file from any of those fancy download
sites so you try to change that number
right I mean you even try to access some
other user names via their URLs or get
at the data so we all do that and
everybody is doing that do whatever you
can to prevent that that's not easy I'll
show you in a minute but that's the
first basic stuff another good idea is
to escape and quote safe whatever you
have so not only doing some very high
level sanitizing you could also simply
put all all you get in there and escape
it until a decent amount that it no
longer hurts you in the on the database
bound parameters are obviously the best
idea to use here I've talked to security
guys real security guys those working
for the FBI or any of the other
organizations out there they are insane
and they come up with really high
security solutions and they wouldn't
even mind if we use some kind of
prepared statements and doesn't do
anything with a user at all or at least
don't do anything in the middle where so
if anybody comes up with you using some
prepared statements or whatever yeah I
mean prepared statements is fine but
what about stored procedures yeah that's
it I mean whatever you can shift to the
database do it another good idea is to
configure the the reporting accordingly
just look out for that kind of floors
that kind of attacks try to find a way
just to bring that to any error log so
that you can have a look at cross-site
scripting is probably one of the most
well-known attacks out there this is not
about injecting data or manipulating
data in the first hand but injecting
some kind of malicious code into what
you have in your own user interfaces to
get access to some security relevant
information stored in cookies or at
least the HTTP session which is kind of
a key to your application so you could
do anything on behalf of any user if you
if you know it's HTTP session ID so
that's a real big misconception the
technology you should look at that's
obviously the jsf or JSP or whatever you
I technology you are using here what
could you do to spot some kind of things
look out for explicit settings that do
set anything that sounds like escaping
or sanitizing to false you could even do
that with jsf jsf itself does some kind
of sanitizing but beware they only can
be that intelligent like somebody put it
in the framework so make a good guess
about what's doing that line below
what's happening what's happening if
somebody clicks on that link any idea
that's definitely also kind of
cross-site scripting so even jsf doesn't
know that kind of data text injured and
obviously doesn't sanitize it so I could
do a lot more with your applications
than you ever thought of and I believe
you thought they are safe so keep a good
look on every kind of weird data that
could come from the client and yeah the
top one point sanitize it and if you
haven't learned that already um only
safe escaping and quoting probably isn't
enough there are a lot of more good
frameworks out there one from the owa SP
guys and they have a good good coverage
of all the most common problems you
experience even if i don't believe that
they get those in line HTML or text data
encoding is right but i mean that's
probably the thing to look after if
you're running around that topic number
three is my absolute personal highlight
I don't know who have you ever had to do
with kind of high security applications
in Java EE okay then you probably know
what I was going through while
developing something like that on my own
on behalf of customers so we had really
fancy data in it that was kind of
training platform for industrial
insurances that is basically some stuff
no insurance that would take without
doing a kind of 500 letter contract on
that so that's our those are the
contracts behind the world trade center
fire insurance okay it's not a good
example but you know what I mean so and
you heard about all the stories behind
the World Trade Center and their
insurers and what happened after
everything went down if you don't work
securely and safely with what you have
then you could screw up a lot so
it's all about doing the right things
with the configuration of the security
itself so it's about how the container
validate security information it's all
about your passwords how you store them
how you generate them which encryption
mechanisms you do you use and it's all
about the number of factors to
authenticate I hope you all using google
mail and you all edit the second factor
authentication there I mean that's a
good starting point mail is very
sensitive data and you could say what
you want but having a second factor in
place you have to carry with you nobody
else has is a real good and secure
requirement but at the end of the day
you have to take care for that there's
nothing java ee could do for you out of
the box to enables that kind of features
so you would have to look at what the
container provides in terms of
frameworks jazz or just pick and you
some even could come up with their own
solutions a kind of a servlet filter
approach so how would you probably spot
issues with that that's a good question
the obvious place to have issues here is
using HTTP without any transport layer
security at all I don't know if you well
that HTTP isn't encrypted at all I still
see people running around HTTP is safe
that's definitely not try to attach a
sniffer to your network interface and
see what's going over the wire that's
clear text another good good point is
custom security implementations I've
seen them all and some of them really
fancy stuff big libraries very decent
api's but who tested them did you
develop that on your own did you use a
third-party library it all depends if
you're brave enough to use that if
you have a high-security implementation
then you probably want to stick what
anybody has to offer so whatever is out
there as a third-party library yeah that
could be a big flaw what else do we have
password strength requirements I still
see pages around there requiring people
to enter password shorter than XX
characters I don't know why they do that
but that also could be a good indication
about a security problem in an
application at all if you're thriving up
the wall and you have more higher
security requirements then you probably
would end up having to manipulate the
HTTP session handling mechanism you know
that the HTTP session or if it's
authenticated in some way by the
container is your key to the application
so all the container does is checking if
that session is still valid so you don't
get real fit negated with every request
if i come across the wire sniff a little
bit at your network interfaces get your
HTTP session ID and fire up a request
against the container with your ID i'm
basically you so you have to find any
idea of binding additional information
to that session that could be anything
that could be kind of a browser
footprint you know about remote IP
addresses everything that distinct the
requests from each other so if you don't
have any additional HTTP session
bindings mechanisms and plays that also
could be a good place to look at if
you're looking for security flaws in
that category who's testing security and
their project oh okay with which cases
if I'm curious only the admin cases all
the complete security metrics
okay and in terms of unit tests do you
do role based tests okay okay you're
definitely at the one percent level i
mean ninety-nine percent of the projects
out there simply have some admin work
around and only do all the unit tests
with an admin account only so yeah
switch that be a good programmer and try
to add security to your automated
testing as i said 'yes what the
container has to offer in the terms of
glassfish that are probably the security
realm's that are already out there there
are some pre-configured ones I don't
know if my suit is digging into that
later but as you've seen with a galleria
JDBC realm also his is one of those
standard realms are they using if you
actually have custom security stuff in
place please do test it I mean don't
don't accept it would be nice and simply
work it doesn't it's software even if
its security related and transport layer
security is mandatory okay there isn't a
way around that you could use some kind
of fancy additional cookie flags but
honestly yeah that doesn't work and it's
not a solution as a single point of
thing to do a4 is something that
actually does influence you as a
developer this is all about those fancy
rest style URLs where you start
accessing domain objects without direct
ID references so whenever you have some
kind of you i'll get a user number 21 or
user number one then everybody is trying
to play around with that and it's quite
easy for attacker or possible attack
adjust to make a good guess and find
find out about ways to tweak that and it
also opens every door for parameter
value tampering so yeah that's basically
what it is
you find that in all layers you could do
a lot how to spot that have a look at
the data separation on your database do
you actually have some kind of tenant
separation some fancy where ID so
looking at customers or whatever if not
then you could probably run into trouble
here do you have any kind of request
mode data access controller something
like that in place looking at who should
read its own data who should read data
in general if you don't have them you
probably a fund a place to look for
security flows what about additional
query constraints if they are not there
also a good place to have a look at and
probably add some more if you don't have
them you could do a lot to prevent that
everybody is recommending to do some
kind of access reference map here the
idea is basically to have any kind of
application so no direct reference to
the objects behind in your database you
could do that randomly you could do that
anyway you like so instead of showing
that you would show something like that
instead of showing that you would show
something like that I don't know I don't
don't like it that much but it's
obviously a good way and a safe way to
do that you could also do some
additional validation on the on the
parameters that were passed into those
features you could use some kind of
data-driven security approach I don't
like all that stuff because it's not
back by java ee standards in any way
that's one of the biggest drawbacks i
find i tend to see in recent java ee
implementations that we don't have lots
at hand to address those top 10 security
flaws I mean we're not talking about the
fancy little five things in the corner
those are definitely the top ten
risks you have with your application so
especially at this one you don't have
anything to support you take a good look
at it and spend some more minutes to
think about the content concepts behind
that data-driven security is probably
the best way but it's also the hardest
way to implement so I couldn't make a
good guess what would be the best
solution for you that's already my last
my last slide from my half right nearly
nearly through so you're probably
digging into the GlassFish server stuff
in a few minutes who ever heard about
cross-site request forgery before well
that's actually far more than the
Scandinavian area we have been less
given that talk yet as you might know a
CAPTCHA replay attack so anybody is
sending you any prepared link and you
executed within the scope of your
actually authenticated session and those
attackers do force you to do stuff with
your actual session which you shouldn't
be allowed to do the more deeper links
you have in the application the easier
it is for the attacker to identify his
his goal identify the relevant urls the
easier that stuff gets this is more or
less only you I relevant so you could
try to spot security flaws like this the
obvious flaw is that you don't have
anything in place about that or you
simply don't know about that kind of
risk also some kind of fancy secret
secret little cookies that get set by an
application somewhere might be a good
hint that somebody was thinking about
that but simply doing it wrong also
another good prevention technology you
find out there is that somebody decided
to switch all the application requests
to post only that's completely weird I
mean it doesn't matter in terms of
sniffing
if it's a post request our get request
so that doesn't help you at all but was
it has been used as a prevention method
quite a lot out there other think about
doing some kind of wizard like
transaction so you simply have a first
step where you identify your bank
account a second step where you enter
the amount you're going to transfer and
the search stuff where you actually do
the transformation but as you guessed
that also doesn't work I mean we could
do capture replay on that too simple URL
rewriting also a nice and decent way to
try to protect you from that all those
ways doesn't work but you have a good
good place to look at for that kind of
security flaw what you actually should
do is add some kind of unpredictability
to your forms do something that make
your forms unique do this by adding any
kind of token and you could do a lot of
stuff here you could even develop some
hidden token you can use some kind of
unique URLs and add some kind of token
to the UL parts you're very open in the
way to implement that it has a big
influence on usability of your
application whatever browser navigation
is out there is broken with that
approach so keep that in mind but that
tends to be a general topic with
security in general the more secure
things get the less usable they get try
to be the mediator there okay keep in
mind what kind of stuff you have to
protect and find the right solutions to
your protection needs without breaking
usability at any kind you could do that
by your own which you obviously
shouldn't if you would like to have a
look at my blog owa SP also has
something in stock for that and if you
have some time and you're using jsf two
decks at the moment then you probably
willing to wait for what e 7 has to
offer with a jsf to
to their will finally have some
out-of-the-box solutions for that
problem already so they are basically
adding some kind of token to the form
components and would save you another
good idea you could add here is prevent
those double submits by users so that's
also good good area to add here and that
point now it comes to configuration
that's obviously something glassfish has
to offer right now it should every
should be every application server so I
just hand on to you mazut have a great
time okay security miss configuration
probably a source for a common source
for many of the security flaws that we
saw here and there and that is the first
topic that I am going to cover between
the 10 top security concern for a wasp
okay emmys configuration can applies to
lots of things but basically it can be
at operating system level which covers a
filesystem the user management and
anything that can be restrained for part
for a particular user it can be at your
middleware or application server level
or it can be at your database or any
other service that you're hosting or
you're providing or you're running to
address a request that the user sent to
your system what it includes really it
includes everything because any any kind
of Miss configuration can be a source to
a security breach but basically the most
important one are the one that are
directly related to security which
includes something like listeners file
system user permissions the way that you
authenticate and etc etc missing patches
if if you are running a middleware or
any kind of other services it's a good
idea to be off today with the latest
patches because a patch may bring some
some new updates to cover security hole
that already exists or it may bring some
updates that may prevent some someone to
discover a hole that that is not already
is covered and the default accounts that
I'm going to go into details in
that one and is something that people
usually tend to live impact which is not
a good idea again okay worst practices
in this case I am going to give the
sample over glassfish but you can extend
that to any other service that you are
running the worst thing to do is to not
creating a user for each one of the
services that you are running if you're
running a glassfish and NM q and a
database on the same box the best idea
is to have separate users for each one
of those and make sure that each one of
those users is properly restricted from
accessing any part of the file system
that they do not need to access so if
you are running glassfish class which
doesn't need to take a peek at a
directory that you have your bash data
coming every week so if for any reason
or for any kind of flaw in an
application deployed in your glass fish
someone get preached at then they won't
be able at least to take a look at your
data what they are going to get is what
you have with the GlassFish user and not
everything on your file system or or on
your network or anything of that soap
network interfaces and circuit access
control is something really interesting
to take a look at basically i'm talking
about glass fish again but it can be
extended to other other application
server and other services that you mean
is all they usually listen on 0 0 0 0
which means that all interfaces that are
available to this particular system are
going to be bind to the circuit that
that glass fish or your service is going
to listen to so if your machine got four
interfaces and you're running glassfish
on that class which is going to be fine
to all of those four interfaces let's
say that one of them is in your land one
of them is going to be connected to your
van there is no reason for glass fish
that is going to listen for the land
request to be bind it to that socket
that is connected to the one so
basically what we do is at glassfish
level or at your middle red level you
should take a look at the circuit
address that it is listening on and
ensure that it's listening on the right
one not on all of them relax relax file
system access control can be another
a good bit for long as I mentioned we
usually create a particular user for
each service that we are running and
it's it's usually on a mixed machine
that Windows machine and you can have
all sort of access control on the file
system you should put a quota for the
user to ensure that it's not going to
just eat all of the diskette space if
there is a flaw somewhere in the logging
or anything of that sort it's not going
to cause a problem for the services to
stop functioning because the disk is
running out using the default the
default almost like all our services
competed with an administrative user and
that mistretta vuser usually have a
default password i don't know welcome
one admin admin or whatever that is is
it's a good idea to completely remove
the default user which is named admin
with whatever passport remove that put a
put that aside create a user of your own
with the name that you prefer and your
passport complex password that you
prefer so no one should be able to guess
that you're if you're if you are running
EG glassfish you have a default user
with the admin which is going to have
the administrative right on your class
we should just remove that and create a
new user with a new passport and use
that network interface I already
explained and then certificates that you
may use for your outbound and inbound
connection with your clients it's a good
idea to get a real certificate rather
than self signed certificate which comes
with your mirror because people need to
trust that they are connected to the
right host not something that shows up
that little little red thingy on your
browser so get the right certificate and
install it in your mirror or your web
server or anything you have I am sure
that you will find find how you install
a certificate for glassfish because or
fair deal of data on that okay and
finally using not a hard and oil that's
something that Marcus life make sure
that you are using an operating system
that is suitable for serving as a server
not not an operating system which is
suited for the clients I already
mentioned that you can restrict your
middleware or your services at operating
system level by creating a user
for each one of those services and then
restricting that user to whatever you
know that the user should have access
that includes the file system that
includes the network interfaces or
anything of that sort but that doesn't
mean that you should not take other
precautions java java sea provides you
with something called a security manager
and the security manager take can take
care of permitting or not permitting a
specific set of specific set of classes
perform a specific set of tasks so a
policy file you can use a policy file to
say okay I don't want this particular gr
which is not signed to have access to
the file system or I don't want this set
of jar files to perform anything like
system that exit or system that exact to
execute something at at the shell level
there are four policy files that you can
tweak and we usually do this at data at
the more generic one we put less
restraint and as we go to get more
particular we add more restriction to
ensure that that if the wider
restriction is not going to affect
everyone so the first one is the global
policy file which is located on there
that directory the second one is the
user policy file if you have a JVM that
is shared between multiple users in the
system you can tweak a policy file for
each one of these users to make sure
that permissions that are given to that
particular users are the ones that the
user require then we came to become the
GlassFish at glassfish we have a domain
level policy file which lets you tweak
the permissions that can be given to to
the codes that are being executed at at
one particular domain and finally we
have something at application level so
if you have deployed several
applications in a domain and you want to
fine tune that the the permissions that
is given to one particular application
you can use the generate the granted dot
policy file which is located in the
directory that is like noted there too
to ensure that for example application a
doesn't get the chance to to open a
socket or application a doesn't get the
chance to run system that exact or
system dot execute
for glassfish another thing is to use
the latest version always enable secure
at mean if if you are going to use the
CLI to remotely communicate with
glassfish make sure that you enable the
security for the admin service admin
service is a restful service that is
running in glassfish and the CLI that
you are using is going to communicate
with that without service if you do not
enable the security for that the
communication that is happening between
these two is going to be on clear text
and clear text as explained by the ace
is going to be easily a sniffed glass
which provides something like password
aliasing and it is going to be it is i
think provided on all other application
server at least i hope that is that way
password releasing lets you store the
passwords for example a database
password that is going to be used by
connection pool and you don't want that
database password to be included in the
GlassFish domain that XML or your
middleware configuration file you can
create an alias for that and this alias
is going to represent the passport the
alias is going to a store is going to
represent represent the passport but the
password itself is going to be stored in
something we call the key file in an
encrypted manner so no one is going to
ever take a peek at your database
password or any of the any other eai
that you have by just looking at the
domain at XML so yeah enabling security
managers are already mentioned and put
forth a proper security policy file the
security policy file actually let you
let me give gives you this control over
the codes that are executing inside your
jvm from one end you are already applied
some constraint through the operating
system and from the other end you are
applying some constraint through the JVM
to make sure that no code is going to do
something that it is not intended to do
and I already mentioned okay the policy
files I I said that the policy file take
precedence so whatever included in the
in the in the global policy file can be
overwritten by the user participial and
whatever is included in the user policy
file can be all written by that that
domain policy file in glassfish
in a sense and probably the mid and
immediate way that you have can provide
you with that function to to override
the policy file and finally the
application level policy file override
whatever included in that domain policy
file it's a good idea to document your
change and and write what you have done
and one you why have you done that so
for a later time you can take a look at
the documents you see what I have you
added a particular rule at the policy
file failure to restrict a URL axis
that's that's something else that that's
interesting and and I'm going to cover
that as you know URL or are the address
to your data or whatever resource you
have at your back end and failure to
restrict the access to the URL is
failure to restrict access to your
resources which are sitting behind the
URL it is directly related to a for that
mark is already went into details for
and and I'm going to cover something
around hawaii in that the worst practice
here is to use a homegrown security
feature in a sort of whatever that
container provide because something that
is provided by the container is already
tested and proven to be properly working
so you don't need to be worried that
okay if i'm using container security i
need to double test that and three
people tested to be sure that it's
working and it is doing what is
promising to do because it's already
been taken care of and assuming that
people won't know some urls to try them
that's wrong because people would know
and they ever guess that and they will
try that and they'll make sure that they
find something that that you have forgot
to put a restriction on and they will
use that to do something harmful to your
application and your data and assuming
that someone would want miss use the
extra permission that they got that's
that's not a good assumption because
generally people are good but some
people may not be that good and if they
are given an extra permission they may
misuse that so be sure that you're
properly restricting applying
restriction on on every URL that you
have that that point to a resource that
has any kind of importance what to do to
prevent a for includes
use container security and we have
security constraint that you can use and
don't be a stingy with that because it's
not going to affect any any performance
or anything just group your URL patterns
as fine-grained as possible and assign
them proper rules in a way very
accurately and very carefully I don't
think that if you have 50 or 55 security
constrain element your domain detrix
that XML is going to affect anything
it's not going to be any performance but
rather is going to improve your security
at the finer level use programmatic
login after a six if the forum base or
or basic authentication is not going to
be enough and as Marcus it for in
galleria don't don't don't go back to
some to some custom way of performing
authentication because form base is not
pretty enough for basic is not it's not
nice enough for you to use just do the
login using programmatic way that that
is provided properly configure the
security rooms no yeah but but the point
is you can simply implement whatever you
want and plug that but it is not
supported out of the box the
programmatic login is exactly performed
the same as the four more basic so it is
just the two tokens username and
password you can have them and you put
them on but you cannot have a sam'l
assertion to be used for the login
method unless you know how to convert
that to something authentic a table
against the security realm that you have
configured because sam'l assertion is
not going to to be working with the with
the jdbc layer because jdbc realm for
example is is to be used with a username
and password yeah properly configure
security realms it is something that
that every application server comes with
some some precum some built-in security
realms a glass which comes with a with a
JDBC file jdbc file ldap etc etc just
make sure that you are using the right
one
you should never use a firearm for
production and you should never use a
jdbc reham or any kind of frame that
doesn't have a proper hashing or salted
hashing for the password pole there is
one thing that is interesting and that's
the way that we we let the HTTP verbs to
be handled if you have a resource or a
collection of resources that only
support get make sure that you have
restricted the access only to get method
and not all other metals like post
delete option none of them is going to
be required and let the let that let the
container take care of that and let the
container handle any any matter that
that is not supported okay yeah best
practices any non-public URL should be
protected that's that's obvious use
container authentication authorization
feature or extend on top of them all of
the middle where's at least that's about
classification and weblogic prop can be
easily extended for adding new
authentication mechanism through jsr 115
or container authorization mechana to
jsr 115 so if you know that that the
current out of the box feature is not
enough just go and plug your own
mechanism into the container rather than
doing the entire thing on your own if it
is not enough if you don't want to
develop something and plug it into your
container and you want to use a
framework out other than what what
container provides you just make sure to
pick the right one do not pick something
that is not properly tested properly
used by a wide user base because if you
do that you will be one of the people
who are here is going to test that and
you will be one of the people is going
to be affected by the security hole that
arguing that are included or or place in
that particular framework something I'm
sure
your own staff and then because because
may be implementing a haagen dazs beyond
okay sure definitely I mean the issue
you have is that roll your own isn't
something everybody should do security
is it's quite binary you know it or you
don't there's nothing like a union
security specialist I mean you only have
guys knowing about what they're doing or
not so the message here is if you're
rolling your own get somebody knowing
about that that's definitely clear I
mean it's not like take what you get
definitely not security is binary I mean
that should be some kind of a bullet on
some slide things something that they
should add to to what Marcus already
mentioned is that plugging on top of
container security gives you all of the
benefits that can't be the container and
the most important one is subject
propagation container will propagate
your subject authenticate the subject
from one container for example the web
container back to the EJB container and
the same subject is going to be used for
that while if you do something
completely custom without plugging it
into in a standard way into your
container you are not going to benefit
from that so first do not do anything on
your own do not implement it second if
you are going to implement it
implemented in a standard way and plug
it into your container rather than doing
your own a filter several filter but if
none of this is going to be enough go
and get a proper properly tested
properly very received framework to take
care of your security requirement yeah
and at the end something that already
Marcus mentioned that that's that if
someone has access to an order ID with
one that doesn't mean that that someone
has access to order ID to so you will
need to implement that in a way that
suits your application at the data level
in secure cryptographic a storage I
think we have seen about this enough the
last incident i think was linked in with
the bridge that took away like a couple
of thousand hundreds of their passwords
so sensitive data being unprotected
that's wrong any kind of sensitive data
should be increased should be protected
I'll tell you what the protection is and
since its data should not be exposed to
the wrong personal it is not that okay i
have this sensitive data and I've
encrypted them but I let anyone in the
team to just take a peek at unencrypted
data that's wrong sensitive data can be
anything that has a personal value or
financial value personal value like like
your your health care data and financial
like financially their credit cards
passports and things like that okay the
worst practices are restoring that the
sensitive data unencrypted or you're
storing comparative data encrypted if
you have comparative data you don't need
to assort them encrypt it you need to
double hash double salt it and in creep
n and store that because what you are
going to do is to compare it with
something that comes from another
application or from the user you don't
need to know that that particular set of
data it especially applies to password
and security questions answer because
for any reason if if you have a bridge
and someone take a peek at those you
don't want them to have the password of
all your user because people usually
tend to use the same password for all of
your accounts and the same applies for
any other kind of comparative data if
you have comparative data just double
hash it and double double salt hash it
and and let it be keeping clear copies
of encrypted data is strong if if there
are sensitive data and you have
encrypted them already it is wrong to
keep a clear copy of them anywhere it
doesn't matter is offside onside is on a
disk is on a safe or whatever yeah
offered and the worst thing is you have
encrypted your data properly but you are
not keeping the keys or the password
safe you have just have it in stock USB
disk and the USB disk is in your thrower
that's wrong you should not do that you
should follow in a specific procedure I
think there are standards for that on
how to keep the password or the keys
safe for glassfish it comes to
protecting the Q source and pertaining
glassfish accounts
which glassfish accounts you can protect
them using the alias ink and are using
again depends on how good you are in
protecting your kiss or ignoring digest
or hashed passwords so it is another
issue that you may stay away from so if
you are using any of the security room
in glassfish except the fire realm which
doesn't support hashing I think all
other rhythm support hashing just just
make sure that you have like that
identifying sensitive data to prevent
this you need to take some some steps
including identifying your sensitive
data identifying the sensitive data
doesn't is not just being used for
cryptographic and on disk storage
bicycling to be used on what pages or
what resources should be interact should
be transferred over SSL or FCPS and what
resources can be transferred or just
data integrity rather than encryption
wisely encryptions if data on every
level so in application application
server and database based on how
sensitive the data is use the right
algorithm and right mechanism unless you
are a good mathematician and a brilliant
computer scientist go and use the
algorithm that already already properly
implemented and designed not your own
algorithm don't keep clear text copies
already mention that and make sure that
decrypting and viewing the clear text
data is restricted to authorized
personal and okay insufficient transport
layer protection which a little bit tied
to the previous step which is
identifying the sensitive data I'm going
to come back to this slide this is
another slide which is Marcus favorite
I'm going to get back to this one worst
practices are using the basic of formal
education video to sell that that means
that your data is going to be
transmitted over clear text so so anyone
can just take a peek at at the HTTP a
message and take a look at your password
and the username which should not happen
i'm not using HCPs pay for pages with
the private information you should you
should know what pages are going to have
your sensitive data because you already
identified the sensitive data and then
you know what
just contain sensitive data if you'd
apply proper data transfer security on
those particular pages or or particular
URL patterns using default self-signed
certificate is wrong just get just get
get a certificate from one of the CAS
and add that your application server
storing unencrypted cookies is not a
good idea if you are storing some
cookies just make sure that you are
encrypting the content that you are
putting into the cookies if you are if
you have a cookie that is going to be
transmitted or an unsecured page make
sure that you have secured through so
that the cookie is going to be
transmitted securely while the pages on
secure forgetting about rest of the
infrastructure which I'm going to go
back to so in any setup it is not only
to have a https between your your
clients and outward facing server that
that's not going to be enough if you
have if you have a multi-layer setup you
need to have proper zoning between those
setup and proper protection between each
layer because if something happens to
one layer you don't want the other layer
to be compromised as well for glassfish
properly configure hcps listeners
because an HCP a listener usually take a
look use a key that you have in your
kissed or two to do encrypt the data and
sign it make sure that you are assigning
the right right key Elias for hdb
listeners or over SSL is really
important make sure that if you are
using or or your client are going to
access glassfish or hear middleware or
or they are using ssl and your listener
are properly configured to choose the
right key based on what the what based
on the alias that that you specify
enable auditing under security and
access log under HTTP service that's for
glassfish but whatever application
server you are using is going to have an
access log and auditing already in place
so just go and enable that and that you
can take a look at your log and see
what's happening in terms of when
someone logged in when someone logged
out how many times a login has failed
when Sarah started stopped at the Robin
and ejb invoked whatever you want if
auditing module for glass fish is is a
pretty detailed but you can simply
extend that by adding some rules of your
own for example if a user of a
particular IP has tried to login to five
accounts in one hour you need to get an
email to say okay someone is trying to
log into different accounts from one
single IP that you can simply extend the
log the auditing module and add that
functionality the same goes for the
access log it's really easy to extend
that and add some intelligence of your
own to the access log am I going front
of time okay okay group the resources
are you all ready as you already
identified your sensitive data make sure
that you group your resources that that
map to those data properly and apply
right data right user data constraint on
that particular set of URLs and don't be
a stingy with that use as many security
constrained element as you need to
properly configure it in a finer grain
level possible just make sure that you
know that there are restriction in
different countries about regulations on
what key limbs you can apply on the data
before you send the data out of the
country's boundary you may check with
with the country's regulation to make
sure that you are not breaking the law
okay use TLS on all connection with
sensitive data individually encrypt the
message if your client server knows how
to how to decrypt the message signed
sign the messages if your clients ever
know how to have to verify the signature
use a proven mechanism when sufficient
okay unvalidated redirects and forwards
okay read everything and forwarding is
something that you really need to verify
and validate before performing them
especially it comes handy when with the
forwarding if if you are forming your
next resource uri using the user
provided values which basically you
should never do that but if you need to
do that for some reason make sure that
you properly validate up the input
parameter from the user because when
you're when you're
forwarding a user to a new resource
nothing is going to prevent it from
accessing that resource if you have set
forward this going to happen why will be
three direct is going to go through
another access control check but but
with the forward is not going to go
through another another access access
control before it's happening so first
of all do not use forward or or redirect
but if you are using that forward or
redirect foreign based on user provided
parameter but if you are using that make
sure that you verify and validate those
parameters before actually forwarding
the user to that particular resource ok
ok I'm done is hurrying up ok let me do
the quick wrap-up I know that we have a
session to follow up so how do you feel
like looking back at the galleria with
all the stuff you know today better
don't know ok let's reveal that secret
according to what we see and what the
owa speech stuff is saying the galleria
didn't score that that but at the end of
the day you have a good idea what java e
is able to to capture out of the box
without doing anything additional on top
one last remark if there aren't any
additional questions regarding the
GlassFish and Sam old stuff you could
look at least at the commercial
distribution of glassfish and look at
what Oracle has to offer in terms of
products glassfish as an open source
product will probably never have that
but there are some decent integrations
for the commercial version with all the
Oracle Enterprise Manager and security
things if you're tied to glassfish then
that is a good option thanks for
listening if you don't have any
additional questions then we are happy
and hope you had a great time here
thanks a lot
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>