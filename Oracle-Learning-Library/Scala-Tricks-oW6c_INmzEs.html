<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Scala Tricks | Coder Coacher - Coaching Coders</title><meta content="Scala Tricks - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Learning-Library/">Oracle Learning Library</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Scala Tricks</b></h2><h5 class="post__date">2013-02-01</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/oW6c_INmzEs" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">welcome to the session on Scala tricks
my name is Venkat Subramanyam we got to
talk just a little bit about Scala and
then I'll go into quite a few examples
to show some of the benefits this
language has to offer it's things that
we can do in Scala literally speaking
compared to what we do in Java how we
could make use of it best time to ask a
question or make a comment is when you
have it so please don't wait till the
end just about any time is a great time
for questions comments just about
anything you want to share so don't
hesitate at all definitely love to you
know what are you participating in it so
let's talk about Scala here what Scala
and why should we use it
so Scala is a is a hybrid functional
fully object-oriented language on the
JVM
it is a statically typed language it's
more statically typed than Java
I would I would say calling it Scala is
statically typed like Java is an insult
you should actually think about static
typing where there's quite a bit of type
inference that's provided in Scala as
well and I didn't mention that Scala is
fully object-oriented what does that
mean you could you could do methods on
primitive types as much as you want to
and the reason for that is in Scala
everything is an object it's fully
object-oriented now of course you may
say wait a second if that's true or we
can lose on performance no not really
because Scala is smart enough to realize
when we treat a primitive as a primitive
versus when we treat primitive as an
object and is smart enough to generate
the appropriate byte code under the
covers for us it is a functional
language but it's a hybrid functional
language and the reason for being hybrid
functional is you can write functional
style of coding with higher-order
methods like we normally do but we can
also write imperative code like we do in
Java in a traditional style as well so
it gives us the flexibility to do this
as we please and you can use Scala
anywhere you use Java you can use it and
and generally speaking you're looking at
about 40 to 60 percent less code in Java
then you would need in Scala for a for
writing code
the code I'm gonna write here you can
download it on my website the link is
given on line number five right there
I'll leave this up here also if I
remember towards the very end or just
remind me um so we got to talk a little
bit about Scala here but one of the
interesting things about Scala is that
you would be able to make use of Scala
efficiency it compiles down to byte code
you can intermix Java with scarlet Scala
with Java but what's also interesting is
that Scala is extremely concise and it's
also very expressive it'sit's a fun
language to use but it also takes a bit
of an effort and there's a bit of a
learning curve but what doesn't let's
look at some examples of what we're
gonna do here what you're gonna learn in
this presentation is rather than going
through a language syntax are you know
what step-by-step what you can do with
it I'm gonna pull some examples and show
how you would build that in Scala and as
I come up with examples I'll talk a
little bit about how that would be in
Java for example and then we'll take a
look at how we would build that in Scala
so let's get started the first thing I
want to talk about is reading a file now
everybody here who has written golden
Java remember how painful it is to read
a file I can see already a few people
smiling already right and and if you
want to read a file what do you do you
have to start saying new file reader but
that's not the real problem when you get
the content out you gotta start looping
through and extract the content out well
that's not as already a problem we have
to put exception handling code around it
all the try and catch blocks we have to
write remember that and that kind of
gets a little messy so a simple code to
read a file and get the content out can
easily become 30 lines or so right and
that's pretty tedious for us to work
with now how do we go about to read a
file in Scala let's take a look at an
example maybe I just want to read this
file itself so I'm gonna first of all
import Scala dot I hope akka cheer and
and the underscore in Scala simply by
the way underscore in Scala stands for
different things they based on the
context in which we are using it but in
this context we are saying just bring
everything from that particular package
it's kind of like the star in this
particular context that we use
in Java so I'm going to simply say
console is an object that we can use to
it's kinda like the system object and I
want to print out stuff from it and what
do I want to print out in here I'm gonna
go to the source object and I'm gonna
ask him to read from file and the file
I'm interested is sampled art scholar
file that I have given to him and once
he gets the content I'm gonna ask him to
combine that into a string make string
joins the content together as a
concatenated string if you will so you
can see that when I'm running this code
it just pulled in the content of the
file itself and displayed it for us and
that was kind of fairly easy to do as
you can see if I lower the font here you
can see the actual code I wrote here and
that's the line of code I wrote here as
you can see very simple so all that I
did was I said print out and we could
store this as a content if you want to
do say here for example I will say stuff
equals and this is basically solar start
from file and I gave the file name to
him and then asked him to concatenate
that into a string using the make string
function and then once we are done with
that we could just print it by ask him
to print the stuff and we can see the
code printing the content itself now we
can take a look at that right here so
very simple a higher level of
abstraction as you can see here couple
of things we didn't have to do what
about exceptions
now think about exceptions for a minute
what does Java say Java says there are
runtime exceptions and there are checked
exceptions right now it seemed like a
great idea when Java va's introduced but
over the years we have realized the
checks the checked exceptions burden us
now what do we do in Java for a minute
imagine for a minute something as
trivial as thread darts sleep for
example right you say thread darts sleep
can you call thread not sleep just like
that and Java says no you got to handle
the exception isn't it then you put a
try block around it I mean I have spent
sleepless nights calling thread dart
sleep and wondering what I'll do with
that exception right how frustrating
that is and then you say catch exception
and what programmers do you know Java
programmers are very smart right you
can't force a pro
to do something and so when you say
exception you have to handle exceptions
and and the Java compiler says you will
handle the exception and the programmer
says let me show you who is in power
here and puts an empty catch block
around it right there's no way to win
this game right so Scala says enough of
that let's give responsibility to the
programmer we'll treat them with the
respect let them handle exceptions they
care about otherwise they'll deal with
it in any other way that they have to
deal with right so we don't have to go
through all of that so you don't have to
check the exceptions in this so it turns
out check the exhibition was not a
concept on the JVM it is something
imposed by the Java compiler and the JVM
cares less actually so the Scala
compiler doesn't have checked exceptions
that minimizes quite a bit of code we
have to write as well so that helps
quite a bit did you also notice one more
thing I did here I just started writing
the code to read the file and this is
one of the beautiful things that I
really like about Scala is that there is
no ceremony to deal with now think about
this for a minute in Scala you could
write as little code as you want to or
you can write as much code as you want
to you know sometimes people say what
does the word Scala mean well the word
Scala actually is really meaning it's a
scalable language and you say what does
Caleb ility mean in this context well
the word scalability is loaded isn't it
different means different things to
different people well in one context the
word scalability means you can write a
two-line code in this language if you
want to or are 20 million lines of code
if you want to write it's in scale up
and down but did you notice one thing
already notice this this is the lack of
ceremony if you will now what a ceremony
ceremony is where you have to do stuff
you don't want to do before you can get
to do what you really want to do and
anybody here who loves ceremonies know
you know he was not raising the hand
right now absolutely not he was coughing
abs yeah you know that's something
really dams us my good friend Stuart
Holloway has a blog entry he talks about
essence where's a ceremony and and a lot
of times when we have ceremonies it
becomes a real big problem let's look at
a ceremony that we have
illuminated here anybody who had to
teach Java to other people have you done
that before it's okay among friends we
could raise the hand yeah absolutely
right and how do you feel about it it
was kind of really challenging wasn't it
you had a captive audience in front of
you and you said I will teach you Java
and the person said he's Java really
hard to learn you said no honey it's
very easy to learn because all the books
say Java is simple it's got to be simple
right it's like okay teach me something
simple how about a hello world and you
said great idea so what did you do first
you said public and the hands goes up
what does public mean well you don't
need to know that right now okay all
right fine and then you said class
immediately the hand goes up what does
class mean you don't need to know that
right now also and the person you know
good student notes down no need to know
what public is right now no need to know
what class is right now and then the
person said hello world and you type
hello well that's a glimmer of hope it's
like yes and then you put a curly and
that came crashing down there like what
now then you said public and the person
immediately looks up the notes okay I
don't need to know what that is right
now then you said static and that said
you drove this person crazy right is
that something I don't need to know
right now either right and they don't
even know this main coming next you can
imagine what is that that is ceremony
right you say wait a second but Rankine
you cannot run a piece of code on the
JVM unless there is a static void main
somewhere that's correct
and Scala says that's the genuine
problem not your problem
so Scala says you don't have to do
anything you don't care to do if you
want to put HelloWorld
get down to hello world right so you
just say hello world and what a scholar
do what Scala says I will take this
piece of code and write a class for you
write a public voice main function for
you stick that code inside compile it
down to the bytecode and I will run it
so you don't have to waste your effort
so that is essence versus ceremony you
don't have to do anything that you don't
care to do so you can focus on doing
what you really like to do and get your
work done so that is again something
that Scala has really
built-in and that's why we were able to
simply say you know file open the file
using source start from file and just do
the work rather than dancing around
giving classes and main which doesn't
doesn't give us any value at all so that
is an example of reading files and how
we can get the content out now I want to
be able to create objects obviously we
want to create objects and use them how
do I create objects really now this is
one of my favorite features in Scala and
this is basically a concept of tuples
now how many times have you been writing
code in Java and you wanted to return a
pair of values from the function and you
wanted to return two things and Scala
see as you can only Java says you can
turn only one thing and you sit there
and scratch your head how do we return
two things when it can only return one
and I'm sure you'll try to return arrays
or maps and stuff like that and nothing
really felt right when you do did that
right
well here is Scala I'm gonna say for
example create and I want to create an
object let's say create agent right so
because Scala is just like this agent
it's really powerful and what do I want
to do here in this method I simply want
to return and what do I want to return I
want to return the agents name here
right so I'm saying James Bond right
absolutely so that's how simple it is no
ceremonies again but what did we do on
line number two on line number two we
created what is called at couple now a
couple basically is what are the coolest
objects in my opinion because it is very
lightweight we were able to create it
very easily and it is immutable so you
don't have to worry about somebody
messing with it and you can just create
this and throw it across the fence what
do I mean throw it across the fence what
I mean by that is tuples are really nice
objects when we want to call across
actors for example if you want to
concurrent programming you can send them
and send them as messages across there
are very nice candidates if you will so
I'm gonna say over here agent equals and
in this case I'm gonna say create agent
so guard the agent back from the call
and I can now print out the agents name
for example I can say agent dart
underscore one plus and then I could say
plus agent
underscore - to get the last name in
this particular case so I'm able to go
call these methods on this object and
get the stuff I need from this object
and this is basically a tuple that I'm
dealing with now you may look at this
and say gosh that's underscore one looks
a little hard well I have to tell you
something yes it does look hard okay so
but but just but my there's a very easy
way to deal with it my recommendation is
get over it right so I mean it's that's
way it is but but it's the beauty of it
right look at the positive aspect of it
you can't get a compile-time error if
you go out of index now think about that
for a minute right if you're using a
collection like a list and you say get
me the seventh element what would the
compiler do the compiler would say good
luck right and calculate the binary for
you at runtime it blows up with index
out of exceptions because it doesn't
have as many elements but the beauty
here is if I go to the agent and say
give me the third element notice the
code is not running at this point it
gives you a compile error saying I don't
have a clue what underscore three is
because there is no such element so this
is a compile time error why because when
we created this tuple it knows that this
tuple only contains two values and not
three values on the other hand if I do
modify this and maybe specify a
double-oh-seven here I'm sure I can now
say agent and get the index number three
right now but Scala is smart enough to
figure that out
so it gives a compile time error when
you step out of the index at this point
so so we took what could be otherwise a
runtime error and made it a compile time
error and we can do some kind of
checking at the compile time as well so
that is an example of how we can use
tuples and tuples really are very
lightweight and they're immutable that's
the part I really like about it you
cannot change it once you create it all
right you say that's kind of kind of
nice but I still want to be able to call
this with meaningful names like a first
name or last name how do I do that now
typically when you have to do that what
do you have to do you got to create a
class and you got to create an object of
the class right and that
becomes a burden for us to create
classes and objects let's talk about
creating classes first but then we will
see how even more simple this becomes by
removing that burden and we have what
are called anonymous classes in Scala we
can use them also but before we get to
anonymous classes let's talk about
classes itself now we all have created
classes in Java right how many of you
are excited about creating classes in
Java
well well more in this year I'm so glad
to see you here all right
so well I got a lower lower lower my
places for Scala now knowing that he is
here in this room did not notice so so
so one of the things I really like about
Scala is that it really removes the
ceremony I mentioned talk about Java for
a minute right well how do you write a
class in Java you say public and then
you say class car and then what do you
say you say well private in miles and
then you say private in ear and then you
say public int get ear you get the ear
value and then say return ear right and
then you say oh I forgot to put final
after all look at how the ceremony that
goes into it right then you have to
write public void SEC miles to set the
miles and you know where this is going
right and that's a lot of work isn't it
I know what you're thinking you're
thinking no venket that's really unfair
I never do that I only type this word
miles and then I gently right-click on
it and before I couldn't blink the ID
vomits the rest of Java code for me
right so what you're telling me is not
only do you need a language which is
complex but it has a ship with an ID
that constantly vomits right and who is
going to be dealing with advantage every
day no no we don't have to do that so
one of the things that Scala does is if
that is what we normally do that should
be part of the language right it's a
sensible way of writing code so
basically you say class car you say wait
a second how many times do you make a
class non-public well very rarely well
then it's public don't say otherwise
right so if you want it to be something
other than public say so otherwise don't
bother
saying it so you say class car and then
you basically say in this case I want
the year of course but I want the year
to be a final so this is one of the
things I really like about Scala is you
have to make a clear decision whether
you want something to be final or not
now in Java that kind of comes after the
fact like you'd saw me do right I wrote
the ear and said oh darn it I forgot to
make it final when I was writing the
concurrency book I had I recommended
that when you're coding in Java make all
variables as much final as possible easy
recommendation to say isn't it but
before the book went to the printers
one afternoon I spent the entire
afternoon combing through the Java code
looking for places where I forgot to put
final that was the lowest point of
writing that book right there finding
where I forgot to put final and whenever
the book came out one guy tweeted saying
oh my gosh I found out that venket uses
the word final 350 times in his book and
I tweeted back saying but you still
don't know where I still missed it right
and that is frustrating but we don't
have to go through that you want to make
a clear decision in Scala says you must
decide right now whether you want this
to be a value of art but even better if
you decide to make it a Val that's good
but if you make it a var we can easily
identify it why because we can do a grep
quickly and say grep - our VAR star it
will tell me every place you're using a
var in your code how do you grab for
forgetting final that's one heck of a
regular expression to write isn't it so
it makes it a lot easier to find stuff
also in this case and then of course I
can say miles is a variable and then I
can say miles colon and then int and it
becomes really easy to provide it you
say wait a second
what about the getter for the ear well
that's done what about the getter and
setter for miles that's done hey what
about the constructor for the car that's
done as well I know what you're thinking
what do I do with my free time go home
right
don't have to be sitting in the writing
stupid code the language takes care of
it for you right and that is the beauty
of it so in a sense in Scala you don't
write a class in Scala what you do is
you write a nice constructor so in this
case if you notice over here I sit here
for a minute and I'm gonna just call
this constructor right now and if I say
a new car let's say two thousand twelve
and zero miles you can see that the code
is gonna run through and it's going to
call this particular ear that I'm gonna
use here and and and execute it at this
point so the point really is that you
are really writing a healthy constructor
a primary constructor and that takes
care of rest of the things in a sense I
view this as Scot in in JavaScript you
don't create classes you create a
constructor function and Scala kind of
falls on that line saying create a
constructor kind of becomes like a
factory object method and then you can
rely upon it so that becomes really
healthy to you know use it so that is an
example of how we could use this but you
say alright this is already great but I
really want to return back this
particular lightweight object but I want
to be able to call first name and last
name on it does it mean I have to call
create a class called person and then
put a first name in it and last name in
it and the answer is no we don't have to
do that it's even more simpler than that
so I can say create agent one more time
and if you recollect we had this a
minute ago where we said here's James
and we had bond over here and I created
a agent over here so I said agent equals
a create agent and of course I want to
print out in this case the values of
this agent itself so in this case I'm
gonna say agent dot let's say underscore
1 and then of course we said here's the
agents underscore 2 and we printed it
out now what I want to really do is to
minimize that effort right so I can
simply say I don't really have a use for
this class outside of this context so
rather than wasting time creating
classes will simply create a new object
on the fly this becomes an anonymous
instance we can create and I say simply
first-name equals and I can put a value
into this and of
I can say last name equals and then put
a value into it and now we have created
an anonymous instance on the fly to send
it across so what can I do here I can
simply say first name and then of course
I wanted to get the other value in this
case I can simply say last name and
print the value out so this is an
anonymous instance so not only is it
easier to create classes Scala makes it
very optional even to create classes and
yet you can have this you know compile
time verification very nicely so we
looked at a couple of interesting
features now now here's a feature that
is pretty interesting but also a little
bit scary sometimes for people to use
and and one of the things about this is
you can provide a bit of a fluent
interface by using some of these
features for example let's say I want to
say something like this dude our days
start ago that would be so cool to do
isn't it but it doesn't work
unfortunately
why because it says I don't have a clue
what days means but remember we already
talked about this right Scala is fully
object-oriented which means you can call
methods on any object and primitives are
treated as objects in a very sensible
way and so there's no overhead to
treating them as objects you know in the
context of treating them as objects but
why not enjoy the fluency well we got to
make that code work but not yet I will
eventually make that code work but let's
see how simple it is to make something
like that work very nicely so let's take
an example here I want to simply say a
class called let's call it as in util
for lack of better words and this is
going to take a number as a parameter
which is an integer so I'm going to pass
this as a constructor so we learned how
to write classes a few minutes ago I'm
creating this class here called in to
tell and what is this gonna do it's
gonna take a number as a parameter so
how would I call this and I'm gonna
simply call this as new int util and
send the two to it
not quite the syntax we were hoping for
in line number seven but we will see how
we can refactor so there in a few
minutes so so this really creates an
instance for us alright it did that now
I define a method called days over here
and this day's method is going to simply
return the
object so now I can go back and say dot
this and in this particular example
that's adequate for what we want to do
and I'm going to just call the days over
here
Scala makes it optional to put
parentheses in different places so we
are leveraging that feature then I write
a method called ago and what I'm gonna
do in this method is simply create a
calendar object let's say two equals
again this is purely an implementation
you can use whatever implementation you
want to use and I'm going to say
Calendar over over here and let's say
get instance so I create an instance and
I'm gonna return from here today a dart
let's say get time on this now of course
I want to bring in the calendar so I'm
gonna say import Java dot util over here
so we are intermixing that right here
nothing wrong with that and now I can
simply say get returned that date but in
this context I want to say today dot add
and I want to add a calendar dart days
off month and the I'm gonna go a past so
I'm gonna say minus number and I've
stepped back in time in the calendar
object itself so if I go back and try
this out now calendar dot is a day of
month right so I'm just stepping back in
time how does this work so I'm gonna
call the dot I go over here and that
tells us it's two days ago hey that's
cool and all that but that syntax kind
of looks a little ugly I really wanted
to get to that syntax how do I do that
so here comes an interesting way to deal
with it so what I could do is I can
define a function and the function I'm
gonna define in this case is let's call
it as int to int you tell right so you
can call it whatever you want to call it
there's you know whatever logical name
you use and this is going to be a number
I'm gonna pass in and all that this is
going to return is a new and I'm gonna
return it in util with that number you
gave me right so just a small function
I'm gonna use so what am I going to do
how do I use that now so what I'll do
here is I will simply say in this case
int to an int util past the to do it and
then call that method in there and that
seems to be doing the work and you
say yeah but that still is the noise I
want to get rid of that noise what can I
do and here comes a feature that I
believe border lines between extremely
cool and extremely scary and the reason
why it borders line that is it is a very
convenient feature but this also kind of
may introduce a little bit of a magic if
you're not kind of watchful where the
code is coming from so you can you can
simply say in this case you can say
implicit so this is a hint to the Scala
compiler to say hey whenever you see a
value being used like a - for example
why don't you go ahead and look for a
case where this could be promoted to an
object which in turn can support our
satisfy this following property or
method for me and of course Scala will
go through and check for these implicit
if there's a collision of ambiguity it
will report it for you and say don't do
this so that's not too bad but but you
kind of have to know where this magic is
being pulled in from especially if this
is being pulled in from an import that
you have it may appear a little
surprising to you where this is coming
from but this also is a great feature
for improving job security as well right
so you can definitely use that so so
that is basically an implicit import and
you can use that very nicely so we
looked at some of these interesting
features to use now the next feature I'm
going to show you here is one of my
favorites now imagine for a minute that
you want to use a function to do some
regular operation you could write an
iteration right so for example I could
write a factorial method and in the
factorial method I could say number is
going to be an integer and I want to
return a big int for example and I could
say in the big end I could just loop
through and implement this and say
return the factorial of that number but
looping through would introduce probably
a mutable variable or you got to use
other constructs and eventually you say
recursions would be really cool right
only a few love recursions of course
most of us love recursion because that
helped impress people in school right
they wanted hang out with you because
you could solve problem using solution
to subproblems how cool that is
right so recursions are awesome the day
I learned about recursion I ran out in
the street and I celebrated this is
awesome right how cool that is to use
recursion but unfortunately recursions
are you know nice but the next morning I
was not that happy what's wrong with
recursions Stack Overflow that's right
so for example I could say here if n is
equal to let's say 1 what do I want to
do just return n else return n times
factorial of let's say n minus n minus 1
right we could we could have a big
integer being returned for us we could
say big end on this one and return it
right so this could be just a 1 in this
case so let's go ahead and try this I
say factorial and say this is gonna be
for example let's say 5 right so that
should be very easy to run through but
what if I say 5,000 ok that kind of
worked as well what about 10,000 right
kept pushing it a little bit and then it
blows up with the stack overflow
exception how sad doctor is right
something as powerful as recursion just
it's within reach but you cannot use it
right so so you say what can I do well
here comes an interesting thing there's
a fantastic book out there called sicp
which stands for structure and
interpretation of computer programs and
sicp talks about how you can you know
well remember first of all anytime you
compile your code there's a
transformation happening right the
source code you write in Java is not the
source code that gets compiled into
bytecode the JIT compiler takes a stab
at it
so lot of optimization happens already
sicp talks about a difference between a
procedure versus a process and a
procedure is the code we write and the
process is the code that runs write code
that runs and so the essence really is
that you can write an iterative
procedure and it runs as an iterative
process there's no surprise there right
you write iteration runs as an iteration
you can write a recursive recursive
procedure and like we just did it runs
as a recursive process and blows up when
the stack is to you
large but we're really the funders is we
write it as a recursive procedure and it
runs us a iterative process then you
have the best of both worlds because it
looks at the code and says gosh this is
so easy I could optimize this into a
real iteration under the covers and you
will never blow up your stack so let's
look at an example of how this would
work now what I'm going to do is to do
this we need TC or tail call
optimization so notice what I'm gonna do
at this point I take this factorial and
I'm gonna say let's say F is the
factorial I'm gonna bring in here so in
this case F is going to be a big int and
then I'm gonna say n is the value that I
want to bring in here so we start with
that so if n is 1 I want to turn begin
tough one but what if I don't have a
value of 1 then I say return of
factorial of F times n comma n minus 1
notice the last call we make in here is
the tail call itself meaning the call to
itself a minute ago the last thing we
did was a multiply so we had to hold the
stack and say I got a multiply but I
need the result from the previous level
of the stack now we are saying we'll do
the multiply ahead of time push that on
the on the parameter list and call the
method itself and the Scala compiler
looks at this and says hey look at this
it's a tail call position I can optimize
this so rather than calling the method I
can turn this into a while loop and say
as long as you're calling the method
keep calling it with the parameters and
the minute you are not calling this
anymore
and returning a result returned that
result back to the caller
this is purely a compile time
optimization that happens at this level
so I can go back and make sure I send a
1 and a 5 to this function and you can
see in this particular case well the
first one is the factory let me make
sure I did this right so stay there
again for me
oh of course so in this case return F
thank you for fixing that so right there
we are returning the value itself so
that seems to work but what if I try a
10,000 remember that blew up the stack
the last time and I run this
now and that seems to work fine don't
memorize that result you don't need to
know that so so that worked really well
isn't it you say wait a second but
that's kind of cool but I'm not too
happy with this because I have a
colleague who has this absolute need to
mess up things and he wants to send a
mindless one what's gonna happen you
gotta explain no don't don't send a
minus one you could use a default
parameter if you want to right but the
beauty of this is you don't have to go
to that length in Scala for example you
can just go back to this and say I want
to create a define a factorial method
which takes a number as a parameter and
what this is going to do is it is going
to encapsulate this is a functional
style remember so we have a function
within a function so you don't have to
run to a class to encapsulate how cool
is that right so put the function within
the function you cannot reach into this
function from the outside but then you
can just call into this function right
here and send the number that you want
to send and ask him to produce the
result for you so as a result we don't
have to go through the trouble of class
level encapsulation but we use the
function level encapsulation because
it's after all functional style language
so which means you can stand function to
functions but it can create functions
within functions and return function
from functions as well and you are able
to do this you say all right this is
kind of cool so far but what if I make a
mistake and this is no longer a tail
call is there a way to fix it and yes
absolutely you can say Scala dot
annotation dot and can say tail break
over here and Scala compiler now keeps
an eye on you so if you were to make a
change the code later on and if it's no
longer tail recursive the Scala compiler
will immediately ask you what are you
trying to smoke this is not a tail
called recursion anymore right
so I gives you an alert of that very
nicely now how is this really working
this entire thing works based on the
compile time optimization now at this
point usually somebody gets very curious
in the audience and they raise the hand
and say this is so awesome
can I do that in Java and I got good
news for you absolutely you can do this
in Java write the code in Scala and call
it from Java and you can definitely do
that right so absolutely
because you say well but when will Java
have this you know it'll be really cool
to have tail call optimization add the
bytecode level right but the good news
is tail call optimization will be
available in Java between Java 9 and
Java 23 but before that right we can
definitely use it here in the compiler
by using it in the Java compiler I'm
sorry the Scala compiler absolutely we
can make use of it so again this is a
compile time optimization which we can
benefit very clearly ok great now we
looked at a way to manage the methods
with tail call we looked at ways to
create objects create lightweight
objects we can read files very easily is
there is there more things we can do and
and absolutely there are some other fun
things we can do let's talk about XML
for a minute I want to create an XML so
I'm going to say let's say XML equals
and I'm going to say greet and let's say
hello slash greet right so right there
is XML and I want to print this XML so
let's go ahead and print it alright so
that looks familiar isn't it what do you
think of that XML is it that's no XML
right and we have been cheating XML all
these years we keep putting it into a
string and deal with it I mean honestly
how would you feel if you're put in a
string all the time right
then we complain that XML misbehave well
wouldn't you misbehavior to string all
the time so a scholar says XML needs the
you know the respect it deserves
so XML is a first-class citizen we
dropped an XML right there and XML can
be handled just like a value can be
handled right so you can create for
example some value equals 25 similarly
you can put a well-formed XML and you
can use that as well but the beauty of
this is you can go a step further from
this not only can you create XML in the
code where it makes sense you can do xml
match for example and you can apply
pattern matching on it as well for
example I would like to extract greet
and then I want to get the message out
of it and in this case I'm gonna say
tell me what the message is and I can
print the message as an extraction and
ask you to give me the content of the
message as well in this particular
so you can see that it gives us a fairly
interesting way to extract the content
and I'm merely scratching the surface
here you can also ask for a pattern
matching with the XPath query and of
course in XPath we use a forward slash
or double forward slashes because those
are comments in Scala use a backward
slash or a backward double slash too to
get the you know XPath query itself but
let's say for a minute you really want
to create an XML content out of your you
know data that you have in memory how
many of you I have created code that
spits out XML a lot of us how many of
you want to go back and do more of that
tonight no right because having done it
once you know that producing code that
spits XML should be given to people in
the prison right nobody in the real free
world should do that right well it's not
that bad actually let's take a look at
that in in Scala so let's say for a
minute that I want to have a little map
here that I want to use so this map here
contains a couple of stock symbols and
their share values right so how would I
create an XML out of this so let's give
it a try real quick so I'm going to say
over here XML equals and I'm going to
just start with a little string to begin
with so I'm going to say here you know
let's call it as stocks so this talks
basically is simply a XML document and
and and no need to put it in a double
quote have it's die hard if you saw me
do that but it just makes them all
content right so I'm gonna print this
XML out right here but I'm gonna build
this into a Content that is gonna have
the data so what do I want to put inside
of this the beauty is you can put a
little Scala code right here so I'm
putting a string here and you can see
that it came out here as a string so
this X and the little XML fragment
contains a little Scala code fragment if
you will so what I can do at this point
is rather than putting this here I could
say create elements let's call it
function call create elements what does
the function call create elements do
okay let's take baby steps on it create
elements is just a function and all that
I'm going to do in this function is just
return that variable that the value you
can see that part is working but instead
of that
I'm gonna say stalks dart and I'm going
to go ahead and ask him to create a set
of data right in this case I'm calling a
map method on it
what does the map method take it takes
an element as a parameter fought from us
and I'm going to simply return from this
again just a you know little text over
here and just to kind of see how this is
manifesting itself and and and and
working right so this is just looping
through the content it's it's tough
stuff because I had two elements in my
map well but I really want to get the
real content out isn't it so rather than
putting stuff over here I'm gonna create
an XML content and I'm gonna say symbol
over here right there and you would
notice that in this case it's got two
symbols the first symbol ending the
symbol and the second symbol well of
course I need a value in here so I'm
gonna say picker or equals and this is
going to be the picker but what is the
ticker so I'm gonna say this is gonna be
a thicker and up and up and a prize or a
value let's call it as a mount and this
is going to be simply equal to element
now we have extracted that picker value
out of it and you can see how it prints
the ticker out and now of course I can
introduce the value if I'm interested in
and I can simply say amount over here
and that could be the tickers amount and
value you can see that its case symbol
ticker Apple six 55 is the value and
then the other element is hidden right
behind the scenes so what am I really
doing here
all that I'm doing is simply embedding
the XML content but I can also have
Scala code to fill in the details along
the way so this becomes extremely simple
to produce XML content you're not
sitting there and working through
creating strings of strings of strings
and suffering through it like we do in
Java it becomes a lot more simpler to
work with the data and then it can
intermix this content fairly easily so
all that said I'm going to show you two
more features that I find it to be very
very cool one of them is the traits now
how many of you have ever used something
like a multiple inheritance in C++ have
you done that some of us how many of you
like to do more of that tonight not
again these are kind of patterns of
stuff suffering we're gone through right
because multiple inheritance is like a
gorilla
it is cute when you see it in the zoo
but don't bring it home right it really
causes a havoc on projects we don't want
that on our projects right but to be
fair it's not the problem with multiple
inheritance the problem really is in how
C++ implemented it now what is what are
the two problems we have the first
problem is method collision right you
inherit from two classes they have the
same method name and they end up
colliding how do you deal with it what
if the methods tell you that they won't
collide but they would cooperate with
each other that would be awesome
isn't it so what are traits first of all
a scholar doesn't have interfaces plates
or interfaces in Scala so if you only
write a trait a no implementation in air
it pops out on the other side as just an
interface but if you put implementation
in place it becomes a pair of interface
and implementation now what is going on
in this case so if you think about how
would you design this in Java let's
think about this for a minute right
let's take an example and then we'll
contemplate how we would design this in
in Java so let's say I have a class
called human and my human contains a
listen method and the listen method
simply stays print and I'm gonna say I'm
listening right so it just says I'm
listening and maybe I'll put a name here
so we know who is listening
so plus name and then I would simply say
plus listening so right there I say I am
name and listening so I want to call
this so I'm gonna say Val let's say Sam
equals new human will say Sam is the
name of this person so I will simply say
Val name is a string there we go
so we created an object and I'm gonna
say Sam dart listen and I'm gonna call
that method over here so it says I'm Sam
listening great now what does the method
listen have to do with the human that
doesn't make any sense is that right so
but why did I put a listen in there well
okay humans kind of listen who listens
by the way he listens there was one guy
in my in my one of my presentations he
was kind of eager he said the wife and
we all laughed at him really
and then he kind of woke up a few
minutes because like oh sorry right I
mean those have a spare
selective hearing right the other day
this is kind of sad but my wife was
talking to me and I was kept nodding and
coding and then finally she asked me a
question that's when she found out I'm
not listening and then she said you're
not going to answer me so let's send you
a email and she says being emailed so I
would respond this is really troubling
right but anyway we don't we don't
listen right
some people listen cure but so who
listens to you a friend listens to you
would you agree that's what a friend's
job is to listen to you you go from work
and say you know what this job sucks and
what does your friend do your friend
says tell me about it how does your job
suck or you say no it's not my job that
suck is my boss that sucks and your
friends say is tell me about your boss
not so good friend says maybe you suck
not your boss right that's how you know
who your friends are so a friend listens
so how would you do this in in Java you
would clear how do you you say well I
want a friend but there's another friend
very important friend who always listens
to you but never talks back to you who's
that dogs absolutely now we have to
introduce a dog hmm
the listen is in the human hey bright
idea inherit a dog from human no dogs
don't like it any other suggestions how
would you solve this in Java a friend
double interphase right then you create
a human and you create a dog you say the
method is common but I cannot put it in
the interface what would you do create
an abstract base class and then you
would bring that method over there and
30 lines of code later you're like that
was a lot of effort well if that is a
good pattern to use why can't the
language do that for you that's the
beauty right that's exactly what scholar
does let's take a look at an example how
it does that so I'm going to write the
human class leave it alone here for a
minute and then I'm gonna say trait
called friend and the trait friend has a
listen method and I'm going to define a
name which is a string which is
unbounded at this time right so I've
just got a trait and I've just listed
that right here then what I'm gonna do
here is to create a human class and to
the human class I'm gonna simply say
this human extends from friend
and notice now I can run this code it
says I'm listening but the beauty is I
can create a class called let's create
an animal first and my animal has a name
also string then I create a class called
dog and notice the dog overrides the
name so I'm gonna say string but it
extends from animal right so animal and
now I'm gonna say Val buddy equals new
dog and I'm gonna create a dog called
buddy
and I'm gonna say buddy Dart listen
which doesn't work obviously because we
haven't finished this code yet so how do
I make this code work so I'm gonna say
okay dog is gonna be entertaining this
particular idea well it's okay sorry I
need to say this is going to be a Val
extends well I'm an amen' gotten there
yet I'm extending from animal at this
point so I need to tell him this is the
name I want to pass to him right so
that's the method I want to pass to him
well there so what do I do
I say width friend and I tell him that
this is gonna run with friend now one
thing I really wish we could do in Scala
was that rather than using extends here
I would have liked to use width that way
it's consistent to say I'm bringing in a
trait right so but anyway I have said
that this is a width over here and that
pulls it end right here and says I'm
gonna use that
but notice how we are able to simply use
it if you compile this down to the byte
code and take a look at it what Scala
does is exactly what you would have done
in Java code with all the efforts you
put it it creates an interface for the
friend
it creates an abstract base class with
that implementation and nicely mixes
Aaron
ah that's the word right there it's a
traits or a compile-time mixin let's go
a step further with this let's try one
more thing if you will allow me so let's
go ahead and say i have a class called
cat how nice is that now i create a
class called cat alpha equals new cat
you know where this is going right and
alpha dart listen will that work
right so class can't simply extends from
animal that doesn't work why because
cats are not friends right in fact you
go home and a cat kind of looks at you
and says why don't you go back to work
right it doesn't want you there right
anybody with a cat here you do you what
do you think your cat is friendly to you
know anybody else what about you
sometimes know anybody with a friendly
cat here yours it hates you yeah that's
what cats do right so but but you know I
have a cat and and I I would like to
feel that it's a it's a friendly cat so
we'll call it venkat all right no not
that cat
okay so then cats cat right equals new
well okay Alf is a lost cause don't mess
with them but what about when cats cat
oh let's try cat and we'll say van cats
cat and let's say van cats cat dark
listen no I tried sorry that doesn't
work either but what you can do is not
only can you inject traits into classes
you can inject traits into specific
instances as well so what you're doing
here is you're saying I have this
instance all cats are evil but my cat is
special right it is one of its kind
literally it's one of its kind
meaning scala creates a inner class from
the cat which implements the friend and
so it's really one of its kind very
different altered DNA sequence and it
has a listen method that it can support
so not only can you have this at a class
level you can have it at the instance
level also makes sense how would we put
this to use this is my final example I
want to show you say we have a class an
abstract class for a minute right called
writer and imagine there are several
types of writers so it's got a write
method takes a message over here message
which is a string and all that this
message is going to do it's an abstract
class I can have different types of
writers string
later filed writer socket writer log
file writer and corporate writer
thousands of them who cares right
but let's create one here called a
string writer and the string writer
simply extends from the writer and it's
got a method called write and that's
gonna take a message and all that I'm
gonna do here is simply say target dot
append the message what in the world is
that target target equals new string
builder right so I'm creating a string
builder and I'm gonna also write one
more method here define override to
string and this method simply says
target dot to string right it's going to
just give us the strings content let's
go try this real quick so I'm gonna
write a method called
write stuff which takes a writer as a
parameter and the writer basically takes
right there is a writer and all that
this method is going to do is simply say
writer dot write and I'm gonna write
something very important this is stupid
and then I'm going to just print out the
writer right so writer let's make sure
this is working first so override there
we go fix that so let's make sure this
is working so right stuff and I'm gonna
send a new string writer so run back
through and make sure that's working
right so what did I do so far I got an
abstract class called writer I've got a
string writer on my hand which extends
the writer prints something to this
string builder and now I'm just calling
it right nothing really great now my
requirement changes they want me to
normally print the string but they want
me to print the string in uppercase hmm
where do I put the function called print
in uppercase
let's look at some design options one
idea I can put that into the writer
abstract class what do you think no
that's going to pollute that interface
right the abstract class and you come
from vacation and get twenty methods
hanging in there it's like what happened
right so no you don't want to do that I
can put that in the string writer what
do you think no not a good idea because
there are twenty other types of writers
right and we
stick in each one of them and that's not
going to be pleasing the dryy principle
right will be duplicating the code so
here's an idea why don't we use a trait
so trait and the trait is going to be
uppercase filter which extends from
writer so what does that mean it says I
can mix the straight in into any class
that has a writer implementation and I'm
gonna define over here a right method
and this takes a message as a parameter
and what does it do it says I am going
to take the message and do to uppercase
on it right so it converts that to
uppercase but that's not the destination
so in other words what scholar does is
when you have multiple traits being
mixed in rather than that rather than
them colliding at each other it forms a
nice strain of these traits so they all
kind of connect to one another and when
you invoke a method it nicely flows
through from the right to the left
LS as the call goes through so rather
than the objects colliding they form in
a line and cooperate nicely decorating
this particular thing so it becomes nice
decorator pattern to use so let's see
how that's gonna work in a minute so
what do I put this result from so I say
super dot right and ask him to put it to
the object to the left the word super
here doesn't mean super it means send us
to the object in the chain to my left as
you traverse through it right and of
course for this to work there are two
contracts we have to establish one
contract is this is not an arbitrary
method this is a method that actually
comes from this writer the other
contractors the destination object
should have it also so to emphasize that
we have a deadly combination of words
called abstract override the only way to
deal with it is not to look at it again
okay so just put those two words in
there and that simply says you want to
kind of say emphasize those two
requirements you want to draw how would
this really help notice what I can do
now I wanted to just print this string
out star out that's all I wanted to do
let's fix
error first of all line 21 so super dot
right and I'm taking the message and
printing it out so this is going to be
abstract override app oh part of me so
this should be right right here this one
here there we go
so now you know the reason for having
that right excellent so so right there
we wrote that
thanks will help so right stuff new
string writer with uppercase filter and
you see how that's working so far so
good you say all right but what if I
have another kind of this filter well
let me give you an example of that it
turns out this was a hard day in my life
when I learned that I'm the bad guy in
my house I mean I travel a lot I hang
out with guys like here what do you
expect right and I went home one day and
I said something and my little boy runs
to my wife and says mommy daddy is
saying bad words and my wife had to come
and discipline me she came to me and
said did you use a bad word I said of
course not what kind of bad what would I
say she leans over and said did you use
the S word and I said you mean that word
not that word you did say stupid I said
of course I said stupid what's wrong
with that
and she said I'm teaching my children
not to use words like that to be polite
and well-mannered and you come back from
your trips and teach them all the bad
stuff you know how difficult that was
right to put my head down and say I'm
sorry ma'am I would not say that word
anymore so from now on I have to filter
what I say at my home I cannot use the
word stupid does it happen to you also
in your houses yeah that's kind of hard
isn't it
so we'll do we'll fix it so I'm gonna
say a trait profanity filter right so
profanity filter extends from writer and
what does this do here is the abstract
override define right message which
takes a string and in this case all that
I'm gonna do is super dot right and what
do I say message start Lee plays the
word stupid with the word
all right so let's try that so right
stuff new string writer with profanity
filter there we go so run that through
that seems to work you know where I'm
going with this right so right stuff new
string writer with upper case filter
with profanity filter isn't that awesome
so we mix them together and you can see
that it printed that in uppercase I'll
move this up here it printed that in
uppercase and it removed the word at the
fending word you say wait a second
but how does this really go through well
it goes through from the right to left
so it forms a chain of these objects so
when you call this you are first sending
it to the profanity filter which removes
the offending word sensor to the
uppercase filter which converts to
uppercase which then sends it to the
string writer which puts through the
target makes sense you say a hobbit we
found a issue with the code if I put the
profanity filter first and the uppercase
filter next what's going to happen it is
not going to remove this right but no
worries this is perfectly fine because
the other day I was very upset and I
screamed this is stupid
and my immediately my son's eyes wired
up and he goes to my wife and she says
daddy's upset right now so be quiet so
this is perfectly fine right so this
fits that domain really well so as you
can see here we looked at quite a number
of interesting features that Scala
provides and when you go examine Scala
you will notice that scholar does a lot
of things really nicely and when you
look at those things it's to a certain
extent things done right and in fact I
would argue if anybody programs in Java
I would not let them program in Java if
they are not read effective Java right
and then as you're reading through
effective Java you kind of wonder if
this is the effective way to write Java
why can't they fix Java to do it so I
got some secret news for you
they actually fixed Java but when they
got it done they
with Scala that's all I have thank you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>