<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Leverage the Power of Oracle from the Browser | Coder Coacher - Coaching Coders</title><meta content="Leverage the Power of Oracle from the Browser - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Learning-Library/">Oracle Learning Library</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Leverage the Power of Oracle from the Browser</b></h2><h5 class="post__date">2017-07-11</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/ft0QnL1nr-g" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello and welcome to leveraging the
power of the Oracle database from the
browser
I'm Scotsman Delaney the president and
founder of Sumner technologies and I'll
walk you through this session today but
before we start a brief safe harbor
statement the following is intended to
outline Oracle's general product
direction it is intended for information
purposes only and may not be
incorporated to any contract it is not a
commitment to deliver any material code
or functionality and should not be
relied upon in making purchasing
decisions the development release and
timing of any features of functionality
described for Oracle products remains at
the sole discretion of Oracle now that
we're through with that let's talk a
little bit about Who I am I went to
Syracuse University graduated with a
dual degree in management information
studies as well as communications and I
do bleed Syracuse Orange and have an
avid fan if you do follow me on Twitter
you are well aware of that right after
University I actually worked at Oracle
for about ten years the last three three
and a half of which I was the senior
product manager for what was then called
Oracle HTML DB which of course today is
known as Oracle apex roughly 2005 I
parted ways with Oracle to found my
first company called sunder technologies
ironically the same name as as it is
today we focused on Apex
Solutions training as well as product we
rebranded to a company called Sam neva
and then were acquired by a relatively
small company about a hundred employees
called Inca Tech who focused on Oracle
DBA developer and exudative solutions
later on and katuk was acquired by
Accenture and after about a year or so
there I branched back out in rebooted
Sumner and again it's still known as
Sumner technologies I'm also an Oracle
ace director which means that I work
pretty closely with the Oracle apex
product management team which in my case
is my old manager and most much of my
old teammates we provide community
feedback we advise the product team on
features that we think would benefit the
product and basically act as a conduit
between Oracle and the greater apex
community wrote a chapter in pro Oracle
apex for a few years back and then wrote
or expert Oracle application
security a couple years as well and if
you need to get in touch with me there's
my email address and just as easy as my
handle on Twitter is simply add as
spindle so again briefly we were founded
in 2005 relaunched again in 2015 just a
couple years ago and we focus on Oracle
application Express whether it's
architecture design and reviews security
reviews health checks education whether
it's on site online custom mentoring
even Oracle database cloud consulting is
in our wheelhouse we're also the
curators of the open source security
tool called apex cert so what we're
going to talk about today is an
application Express but it focuses more
on the Oracle database and something
called Ords or Oracle restful data
services so we'll go over the highlights
of what we're going to talk about and
then I'd like to spend most of the time
doing a demonstration at the end we'll
conclude and open it up to any questions
and answers front end developers spend a
lot of time with JavaScript as well as
obviously CSS and HTML in almost every
case they've adopted some sort of
JavaScript framework whether it's an
older framework like jQuery or something
a little newer like angular or react Jas
really doesn't matter because the
adoption of a framework regardless of
the framework is really for the same
reasons it saves a ton of time makes
coding a whole heck of a lot easier and
it also allows these developers some
leverage libraries to do things that
they probably couldn't easily do on
their own for instance with jQuery to
fade a region in and out it's pretty
easy to do you could do it in a single
command if you were writing that excuse
me in raw JavaScript it would take a lot
longer it would be a lot more painful
now frameworks are great but they
obviously have some severe limitations
when it comes to managing data in
securing data inside a database however
a lot of these front-end developers have
tried to take those tasks on and time
and time again it gets more and more
difficult and although they may have
solutions to do this they're not optimal
so for instance securing data access if
I just want to see records that
map to my department I shouldn't bring
any other records down to the middle
tier or especially to the client and
then parse them out there the query that
runs should only returns the records on
authorized to see encryption is also
something important data at rest data in
motion
everything should be encrypted
end-to-end where on the front-end it
tends not to be encrypted because we
need to see the data and interact with
it processing large amounts of data if
you do have a million rows or two
million rows you don't want to bring all
two million rows down that would be
devastating for the network the client
doesn't have enough horsepower to
process that you need something in the
backend to help you to assist and say of
these two million rows here the ten that
you want and then lastly maybe the ten
that you want aren't just simple
searches maybe we need some sort of
analytic I want to see the top ten paid
employees across ten different
departments or I want to see how much
more somebody makes then the next
highest paid employee in any department
or in a specific department so complex
analytics is definitely not a good
front-end activity so let's shift gears
just a little bit here and talk about
something called data longevity and I
know this has very little to do with
front ends but it all ties together in
just a couple slides here think about
your organization and how long they've
had data if you've been around for 50 60
70 100 years your first customer was
probably written in a ledger if you're a
newer company maybe 10 15 20 years your
first customer record was probably put
into a database the interfaces and the
technologies used have changed over time
dramatically in some cases so let's not
go back 100 years but maybe let's go
back 30 or 40 years
mainframes many people who've had
businesses that have been around for 30
40 years or so have used mainframes in
some cases they still may be using
mainframes to store their data the
interface was done on these little green
screens these VT terminals all text and
if you were lucky maybe you got an amber
one as technology evolved and PCs
dropped underneath that $2,000 price
point in the 80s you can get this really
slick dual three and a half inch drive
IBM PC and run DOS based applications
still character mode but with the
advantage of multiple colors enter the
90s in something called client-server
became tremendously popular the idea
here is you'd install a whole bunch of
stuff on the client as well as on the
server and when those two pieces of code
or chunks of code ran they'd interact
with each other so the server didn't
have to do all the heavy lifting the
client can handle much of the interface
as well as some of the initial
validation and even business rules and
then we have the web which is
essentially where most of our
technologies are being deployed today as
the web got more powerful and browsers
got more capable with internet speeds
increased we turn to building HTML based
applications which again is how most
systems run today one caveat is we also
have a mobile realm mobile first I'm
sure to turn that in almost everyone's
heard is that companies and
organizations are trying to push out
their applications to mobile devices it
could be a native application it could
simply be a responsive HTML application
but today we tend to live in that web
and mobile space when we build anything
new think about now how many updates you
would have to do to update what are
largely the same business rules over all
these different technologies so you'd
have to write it once for the mainframe
you'd have to rewrite it for ms-dos
systems you have to rewrite it for
client-server rewrite it again for the
web and then rewrite it yet again for
mobile the data hasn't changed you still
have customers you still have orders
the business rules probably haven't
changed a lot but definitely have had
some enhancements to them and that had
to be done over and over and over and
over again so back to the front end
we're in this space right we have a
challenge we're front-end technologies
are going to continue to change they're
going to evolve at a much more rapid
pace than what we just saw that last
slide spanned over 40 years new
frameworks get released almost daily it
seems data security and management
requirements today are much more
sophisticated and much more important
than they've ever been
there's laws today that didn't exist
10-15 years ago that dictates how data
needs to be stored and managed and at
the end of the day is front-end
developers there's only so many hours in
the day to do all this stuff we already
have challenges to build the front end
to build the validations to build the
user experience so your challenge is
difficult how can you assure that your
data is being managed properly given
that you have all these different things
to worry about and a constant flux in
your toolset one answer here is
obviously the Oracle database this is a
tribe matured platform that's been
around for over 30 years if you wrote
business rules maybe 15 years ago 20
years ago and peele sequel there's
really not a lot you'd have to change
over time as far as would they still
continue to work sure the rules would
change and they need to be updated but
those core business rules would have
survived all these different
technologies so Oracle is very stable in
a very low risk choice for front-end
developers who need a place to securely
manage your data to put their their
business rules in and not have to worry
about changing it as you go from
technology to technology or in your case
from framework to framework if we take a
look at that slide again Oracle probably
came into the picture give or take
around the character mode side of DMS
top systems perhaps on the client-server
side depending on when your organization
adopted it so Oracle's kept pace as well
Oracle forms character mode was one of
the first development tools and
released that did run on das machines as
client-server became more popular Oracle
forms client-server came out and
developers were able to use rich
interfaces and build nice-looking apps
that ran in Windows as the web became
more and more popular tools like Oracle
application Express
ADF or portal basically gave data in an
Oracle database an easy path to be
displayed securely and scale and scale
quite well on a webpage and now as we're
in the mobile era Oracle apex being a
responsive system or the mobile
application framework toolset allows us
to build native applications on mobile
devices running on top of an Oracle
database so if we look at the world
through a slightly different lens and
understand that these frameworks are
changing a lot they're developing at a
much faster pace than we've ever seen
Oracle can still fit underneath
everything here and using tools such as
the ords listener or the Ords service
which is the Oracle restful data
services we can provide very easy access
to the Oracle database yet secure it in
any way we deem necessary so that
front-end developers have little
difficulty building their applications
on top of the Oracle database now one
thing that a lot of people are worried
about when they hear the word Oracle
database is the high price that comes
with it this isn't always true so let's
talk about a couple different ways that
we could run oracle on-premise is
probably the most popular way it's has
been going on that way for years now
you could run oracle in your data center
on your servers have complete control
over everything but obviously we're in
the cloud era now and oracle does
provide a fully hosted cloud-based
version of their database that you can
run easy to set up takes just a couple
minutes to configure and you're up and
running third parties also offer oracle
cloud based services such as azure as
well as Amazon Web Services cost in the
cloud is also a lot less than most
people assume and I'm not going to go
through all the different pricing
options here but suffice to say you can
get in the game for as little as 175
dollars a month using the X data Express
service which is what we're going to use
for the demonstrations that will be
starting here in just a second so for
the demonstration we're going to build a
pretty simple web application that does
some pretty sophisticated things on the
back end just start we're just going to
do some pretty simple queries we're
going to pull the data up and display it
on a page
we'll use jQuery and the reason why I
pick jQuery here it is an older
framework but most people are relatively
comfortable with it and you could take
the simple HTML files that we're going
to use and adapt them to really any
framework you'd like we're also going to
use oracle jet which is called the
javascript javascript extension toolkit
to use to do some visualizations so
you'll see a chart on our web page as
well that's all being rendered via the
jet libraries so the first thing we'll
do is we're going to connect to our
database we'll create some sample tables
and put some data in them we're then
going to create the necessary web
services using ords we're going to do
that through a tool called sequel
developer will then create some simple
HTML reports and forms that interact
with those web services and then lastly
we'll turn on all the different database
features once we get to that point all
of the changes of this application are
going to be done on the back end in fact
once we copy and paste the HTML pages
we're done making changes there
everything we do from a functionality
and a business rule point of view will
be managed on the back end again
minimizing what you need to worry about
on the front end and letting the Oracle
database do the heavy lifting so for
this demonstration I'm going to use the
very tried and true legacy perhaps
demonstration objects called
M in-depth for those new to Oracle these
tables have been around forever they're
very simple and has 14 records depth has
4 records but they're sophisticated
enough and elegant enough in their
simple design that you could do a lot of
complicated type queries with them and a
lot of examples around the internet if
you wanted to search for Oracle examples
and pin depth you find lots of different
documentation using these tables for
those who've been using Oracle for a
while this should not be anything new
you've seen these tables hundreds
not thousands of times so as I mentioned
before we're going to use the Oracle
Exadata Express cloud service to conduct
all the demonstrations here it's quick
and easy if you want to request a free
trial simply navigate to the URL
underneath the last bullet point here on
the slide and you could be up and
running with your own personal PDB or a
pluggable database in just a few minutes
so let's jump into the first
demonstration on running oracle sequel
developer which is Oracle's free IDE for
the Oracle database you can see here I
currently have two connections PDB admin
and one called scott again for those new
to Oracle I'm not using Scott because
it's my name but Scott is one of the
original demo schemas so it's almost
second nature to me as I've been using
this for almost twenty years or so
so pdb admin is more of an administrator
account again we're running in a PDB or
a pluggable database on an exadata
machine so this account is going to give
me privileges to manage things I'm going
to go ahead and connect to it and all I
need to do is click on that little plus
icon it's going to use the credentials
that I've already stored and it's going
to make a secure connection to the
database and in just a second we'll see
a window that will allow us to interact
with the different objects in the PDB
admin schema if you look now on the left
hand side of the screen you can see all
the different object types that sequel
developer supports from tables to views
to indexes
packages etc what we want to do here is
create our demonstration user we don't
want to use the admin user for the demo
we want a brand new user so I'm going to
go ahead and open up a script called
Scott dot sequel and then if I click
execute here what we're going to do is
run this entire script as the PDB admin
user and it'll go through drop the user
recreate the user using a tablespace
called DB cloud it'll then allow me to
create database objects by creating
printing an unlimited quota I'm going to
grant create session and resource to
this user which is going to allow it to
also have privileges to connect to the
database as well as create common
database objects
and then over here the next three grants
DBMS redact DBMS RLS and DBMS fga each
one of those grants does have to be made
by an administrator and those will give
me access to different security features
of the database we'll get into that a
little bit later but suffice to say
these commands need to be run if you
want some of the later exercises to work
now that I have stop created I'm simply
going to minimize my PDB admin
connection and open up my scott
connection and it'll take a second or
two here is it connects to the database
and verifies its credentials and once
that does connect I'm going to run a
script that script is essentially going
to create two tables and then populate
those two tables with some data so this
time I'll go locate a script called
empty equal notice I drop those tables
first just in case they existed then I
create the depth table then I create the
empty table and if you scroll down and
up you'll see all the different records
we're going to insert into those tables
again anyone who's used Oracle for any
amount of time this is very familiar
those that are new this is basically
some of the standard data demonstration
tables that Oracle uses so I'll go ahead
and run the script but this time not as
PDB admin but as Scott and you'll see
it'll go through insert all the records
and to double check on things even
though I didn't see any error messages I
can always navigate to one of the tables
click on the table name see the
definition of the table but also click
on data and ensure that there were
actual rows inserted into the table so
it looks like we got our four
departments and if we click on em my
guess is going to be we're going to see
all 14 employee records once it queries
the database and there they are
next thing we're going to do is create
the web services to expose the tables
that we just created and we're going to
do that using words or Oracle restful
data services this product used to be
called the apex listener way back when
but it's been recently renamed towards
because apex is not a requirement to use
it it is a fully supported product that
has been associated with the Oracle
database for seven years now you can log
s ARS against it as long as you have a
corresponding database CSI really what
Ords does and I know there's a lot of
acronyms in this sentence is it Maps
HTTP restful gets and posts to sequel
and PL sequel what that really means is
it's an interface layer so that I can
write a very simple or perhaps
sophisticated query in sequel and have
ords translate that into either JSON or
CSV and hand that back to whichever
client is calling it whether it's a java
application a react application jquery
HTML or it simply doesn't care
it'll go ahead and produce that document
and hand it off based on which resources
requested so this gives us the ability
that's basically securely web enable any
Oracle database within just a few
minutes so a basic architecture slide
here again we've got our client which
makes a request or Maps and binds that
to a sequel statement or perhaps a PL
sequel procedure that will go query the
database assemble the results just like
any other sequel query and then Ord says
all the transformations for us so in
this case it will hand back a JSON
document which we can then do is we
please with words is a java application
so it does currently need an application
server and it's certified with oracle
weblogic server GlassFish or tomcat in a
future release 4.0 ords will also have
jetty embedded in it so you don't even
need an application server but as it
stands today any one of those three
works just fine so we'll use Ords nack
in the next part of our demo here to
create a few web services that will be
consumed by our HTML page we're going to
get a list of all the employees so we're
going to query all those employees out
of the imp table we're also going to
create a web service to get details for
only a specific employee because we're
going to want to edit one record not any
arbitrary record or all the records we
also want a web service that's going to
allow us to make updates to an employee
perhaps change their job title change
their Commission or their salary and
then lastly we'll have another web
service that gets a list of departments
that we're going to use for our select
list so we edit employees or does
support security via OAuth or basic
authentication
we're not implementing that in this
demonstration just as an interest in an
interest of time or lack thereof time in
this case but it does have full support
to produce secured web services so let's
go ahead and create those web services
in orange and again we're going to use
sequel developer to do this as a first
step before I do anything what I want to
do is enable rest services on the schema
and in this case it's the Scott schema
so I'm going to go ahead and click
enable restful services it's a really
good idea to not expose the name of the
schema through the URI that we're going
to create so in this case what I like to
do is just call it DB or something not
the name of the schema while that end of
itself is in a security risk it does
give a malicious user or a hacker some
information about what the schema name
is and while they can't do much with
that that may be very beneficial
elsewhere for them so we're not going to
give them anything that they don't need
we're not going to worry again about the
authorization so I'll uncheck that box
and hit next basically we get a summary
of what's going to happen here and I'll
hit finish and you know that we get a
success message successfully process
equal command so our schema is now ready
to be or it's enabled so the next step
we need to do is basically scroll down
and find the rest data services node in
our tree and it
expand the modules node there shouldn't
be any modules here this is a brand new
schema with no information so what I'm
going to do is right-click it and select
new module this will pop open a wizard
that I'm going to go through and specify
a couple different options here we're
simply going to call the module name as
well as the URI prefix that I'm going to
refer to this in the URL demo just to
keep things simple and easy to remember
I could choose whether or not I want to
publish this and make it available for
use so if I was just building it but I
didn't want anyone to use it yet I could
simply unselect publish but in this case
we do want to publish it we'll hit next
for the URI pattern what this is looking
for is the actual thing it's going to
call right and this is usually named
after the object or the table or the
view that the web service refers to
although you're free to call it pretty
much anything you'd like in our case
we're going to simply call this M and as
you see here the URL or my schema demo M
becomes our URI we'll take all the
defaults for priority as well as the
entity tag we get another summary screen
here and I'll go ahead and click finish
and we get another success message and
notice in our tree we now have an M
template underneath the demo module what
I want to do next is add a handler this
is where we decide whether it's a get
post put or delete or what mechanism we
want to use or method we want to use
we're going to keep this one to a get
because this is our basic query for all
employees and I'm going to basically
select query here I could return CSV but
in this case we want to return JSON I'll
go ahead and hit apply where we are now
is we've got a worksheet where I can
write the query that I want to use for
this web service so I'm going to go in
in the document here I'm going to select
the sequel and I'm going to paste it
inside this worksheet now we could run
it here to make sure that there are no
errors and as you can see we're
kind of selecting all the different
employees right now we're hard coding in
the salary difference column we're going
to use that later we're also looking for
Commission and making sure that if there
is no Commission we just simply display
a zero and then we're joining the m-pin
the depth table on the common key which
is deaf no you can see the results are
all fourteen records with the column
headings in place once that works we're
going to go ahead and click on the Save
icon and we now have that method set
underneath the empty mplet which is part
of the demo module at this point we may
want to test this web service out and in
order to do that because it's a get we
can actually get away with using a
browser I'm going to go ahead and switch
over to Chrome and what I'm going to do
here is simply paste in the URL to our
web service again I've got my exadata
Express server name here
apex being the next piece of my URL
really depends on how the server is
configured maybe apex it maybe orgs DB
is the alias that we created when we
actually created the first module demo
being the module name and then enter
being the template because this is a get
we don't need anything else on the URL I
could simply hit enter and in a second
or so we'll see a JSON document with all
of that data now this is a little
difficult to read I'll be the first to
admit that so you may want to use a tool
such as postman postman is a free tool
that allows you to basically test web
service results and what I mean by that
is if we run that same get postman is
going to display it in a much easier to
read format we could also see the raw
format if we were looking for something
specific that dictated us to use that
view or if this were some sort of HTML
rather than JSON we can get a preview of
what it might look like in the browser
typically without any style Shin style
sheets tied to it but we're going to
stick them stick with a pretty view here
and understand it already detected that
it is a JSON document so our first web
service is working just great let's go
ahead and create the next couple so that
we can get over to the HTML page as soon
as we can so the next one we're going to
create is going to be very similar but
this one is going to be for the Deaf
tables what we're going to do is create
another template under demo and I'm
going to right click and select add
template this time we'll simply call it
depth hit next and hit finish we'll then
right-click and add another get handler
this is also going to be a query and
I'll go ahead and paste in the simple
sequel statement that we're going to use
for the depth table let's test it first
and it looks good I'll go ahead and save
that and then just to be thorough what I
want to do is come back over here to
postman switch this to depth and make
sure that it is in fact working and it
looks like we're in good shape
the third web service we need is going
to be slightly different so what we're
going to do here is again create another
module another template excuse me and
we're going to call this amp slash curly
bracket amp no curly bracket that
denotes towards that we're going to pass
in a parameter here so we'll go ahead
and finish this web service and just
like we've done in the past we're going
to add another handler it's going to be
a get this time it's going to be query
one row rather than a query that returns
multiple rows and I'll grab the sequel
here paste it in when I run this it's
going to error because we've yet to
define this variable and no so we need
to set a parameter for this query to
work and it's pretty simple click the
plus sign
enter empty no as the name empty no is
the bind parameter it's an in method
it's going to be part of the HTTP header
and in this case we could select this to
be integer since we're passing in
employee numbers once we save the web
service reference now and we go ahead
and run this it still doesn't work
so this is where postman is going to
come in handy and help us out here I'm
going to switch over I'm going to grab
the URL that we use for the original
employee query and create a new request
but this time I'm going to include 7839
which is one of the employee IDs and run
my query now notice that we get back
that specific record we're not getting
back all the records anymore we're just
getting back one if I were to do 77 88
which is another ID we would get back a
different record so that web service is
in fact up and running let's add one
more web service that we're going to use
as the source for the chart so if we
navigate back to sequel developer I'm
going to create another template and the
name of this template is going to be sal
by job we'll hit next we'll hit finish
and then of course we'll add a handler
called a type get this will be a query
when I run it you can see here it's
actually simply producing the job name
and then the sum of all the total salary
for that specific job so we don't need
any more parameters or anything on this
one this one's pretty basic we've gone
ahead and saved it again let's just make
a hundred percent sure that it's working
we'll copy this URL open up a new one
and then sell by job should return a
couple different value attribute pairs
one for each job now we've got for get
based web services and each one of these
is fetching data we do however need to
create a web service to send data back
so that we can update our employees we
can actually reuse this template here
and simply create a new handler in this
case we're going to create a post
handler for the mplet the mime type that
we want to be able to work with here is
going to be
JSON so applications slash JSON will be
our mime type and we'll hit apply what
we could do now is write a little bit of
PL sequel that's going to basically
update the record based on the values
that have been submitted so if we look
at our update statement here it's going
to update M set Sal equal Sal definite
equals def know etc etc where the
employee numbers match so we've got to
create at least one parameter and we've
done this before empty no empty no oops
and this will in fact be an integer but
the truth is we've actually got to
create five additional parameters so
that we can handle all the different
values being passed in when we post that
request so the next one we need to
create after nth know is a name and that
will be a string def know the department
number of the specific employee will be
an integer Sal for salary will be an
integer comm for Commission will also be
an integer and last but not least job
job title essentially will be a string
and we'll go ahead and save that so now
we've got both again in a post on M
switch back over here to postman we need
to change postman just a little bit in
order to test this so I'm going to grab
that original URL pop it in here but set
the get to a post what this is going to
allow us to do is specify different
values that we want to update so infact
Mpho will be 77 88 and we can pretty
much go back over here to see a specific
employee so department is 20 name is
scott salary 3000 etc next we'll do def
no 20 Sal was 3,000
komm with zero and then he name was
Scott and job was analyst now what we've
done here is basically mapped the same
values that already exist so if we were
to send this we shouldn't notice any
difference but let's change it up a
little bit
let's give him a hundred-dollar
commissioned verify that there is no
Commission here I'm going to go ahead
and click send now and then I'm going to
rerun this web service here and we
should see that the Commission has been
increased to 100 just to prove a hundred
percent certainty that this did work if
we go back to the amp table and select
the data tab find the Scott employee and
you'll notice here that the Commission
has in fact been set to 100 so all of
our plumbing is working our web services
are set up at this point we don't need
to make any more changes here what we're
going to do next is configure the HTML
file that interacts with these web
services so the front end is going to
consist of two HTML files in a
JavaScript file one HTML file is the
report which will contain the
visualization that makes reference to
the JavaScript file and the other one is
the form we're going to use jQuery as I
mentioned before pretty basic any
front-end developer who's been around
for a while has probably used it at some
point and it wouldn't be too difficult
to basically adapt these HTML files to
use any popular framework now Oracle jet
is going to be a piece that we use for
the visualization this is a relatively
new open source JavaScript toolkit that
Oracle provides for free it gives a lot
of components that you could use for
SBA's or spas or single page
applications built in accessibility
support which is more and more important
these days as well as a rich set of UI
components for more information on jet
simply visit the URL listed here in the
slide so let's take a look at our HTML
files and then
on them up in chrome the first one our
PT is basically the report notice at the
top we've got a few references here to
JavaScript libraries and whatnot but for
the most part we're calling this get
JSON call and we're referencing the
first web service the nth web service
that brings back all of our records down
here a little further we have the
reference to the container that's going
to contain our visualization the form
HTML again has a bunch of configuration
details and a couple api's it also has a
select list which gets its source from
that depth web service that we created
and then down here at the bottom you'll
see the post action that also references
the m p-- endpoint that we created so as
we see the records we could make changes
to them and then send those results back
to the database
lastly chart J S is simply a JavaScript
library that also has a couple different
references in this case Sal my job is
going to be the JSON document that it
uses as its source and the rest here
will simply feed back the JSON and then
we'll generate the pie chart so let's go
back over to Chrome and what I'm going
to do now is open that HTML file so I'm
going to locate it in our demo folder
here it is our Petey HTML and once I
open it you're going to notice that the
data gets populated from the database as
well as the pie chart gets populated
based on the salary summarization report
if I look at any of these employees
let's take a look at 77 88 and hit edit
it'll pull those records out of the
database and if I were to say let's move
Scott from research into sales and
reduce his commission back down to zero
and hit save notice that Scott even
though he's an analyst is now in the
sales department and has a commission of
zero so it looks like all the plumbing
is working our standard static HTML
files do in fact display the data and we
could edit records make changes and have
as records impact the database next
let's add some database features to
change things up from here on out we're
not going to touch the HTML all we're
going to do in term is make slight
changes to the web services so we're
going to do four different things we're
going to create an analytic function or
use an analytic function we're going to
use Oracle's redaction feature we're
going to use Virtual Private database
and then we'll turn on auditing so
analytic functions are pretty powerful
things what these do is compute
aggregates which return multiple rows so
for instance rank and dense rank of
these records ranked them in order and
then we can partition those ranks say in
this case by department first value and
last value so give me some data sets but
I want to know the first and the last
value of those data sets
Lag and lead right so give me any row in
any data set and show me the road right
before it and show me the row right
after it lots of powered that these
analytical functions provide for us and
they're very easy to use so let's go in
to our web service and the one we want
to look at here is the amp get so if we
select that in sequel developer and
select edit we'll see the query that we
had in here before we're going to change
that query ever so slightly so that now
instead of having rank as simply one two
three four five we're going to rank
partition by the department number and
we're going to order that by salary
descending what this means if we run the
query here is we now have all the
accounting department employees ranked
from the high salary to the low salary
we then go to the research department
and rank all their salaries from the
high salary to the low salary and for
each department that iterates through
all I have to do is save this and flip
back over to Chrome and reload the page
and watch
rank changes from 1 to 14 now we see 1 2
3 1 2 3 4 1 2 3 4 5 5 7 because these
two were the same they're both rank 5
but of course the last value gets rank 7
because there are 7 rows in the data set
all that power from one single change
one simple single change to our query
another function that we could use here
is the lag function so if you notice now
solved if doesn't really change and we
hard-coded that to 0 initially on
purpose if we go back over into sequel
developer and paste in the next query
what we're going to do here is get the
previous salary subtract that from the
current salary to determine what the
difference between that person salary
and the next highest paid person salary
is if we run the query here whoops there
we go you'll notice now salary
difference here 5,000 well the
difference is 5,000 it's the first one
but the next salary of 2450 has a
difference of 25 50 the next one of
1,300 has a difference of 1150 because
it's looking back one row and one row
only then we go to research and we
repeat the process once we've saved this
and now we've got our second analytic
function in place reloading the page
will now display those values in the
salad if column again no changes down to
the front end all the changes are being
done on the back end here which makes it
a lot easier to manage a lot more
powerful and a lot faster because the
database is doing the heavy lifting
we're not relying on any client-side
library to do that
redaction is another security feature of
the Oracle Database 12c but it's also
available in 1104 what redaction does is
it masks sensitive data returned
inquiries we could do full redaction
which hides all the data altogether
partial redaction so for instance if we
wanted to only show the last four digits
of a credit card number just to verify
with the customer it's the proper card
we could use a regular expression to do
some pattern matching and only redact
parts that match the pattern or we could
do random redaction in our case we're
simply going to do full redaction on the
Commission column so if you notice here
we've got three employees who are
currently receiving Commission's once we
turn on redaction we're not going to
change the data but we're essentially
going to redact that data when we run it
through this report so I'm going to
switch back over to sequel developer and
this time I'm going to go to my sequel
worksheet here for the scott user this
opened up when we originally connected
to the schema and i'm going to go ahead
and run DBMS redact ad policy we're
going to redact the empty Abel in the
Scott schema the name that I'm using is
simply arbitrary I called it recom which
is rIDOT Commission our expression to
run this is one equals one meaning
always run it and the column name that
we want to redact is calm the type will
be full so in this case because it's a
number column every value will be 0 let
me simply run this DBMS redact add
policy command and as soon as I flip
back over and REE query our table notice
all of the Commission's are set to 0
again back end command very simple it's
going to work everywhere even if we edit
a user that we know how to Commission
the redaction is still going to apply at
the Forum level the next thing I want to
talk about is something called Virtual
Private database this is a security
feature that allows you to filter data
based on predefined rules typically we
use this to filter data based on whether
or not a user has a role is a member of
a department has some sort of access
privilege we apply a VPD rule to a table
or view and then any transaction that
ever touches that table or view will
have the VPD function applied to it
regardless of where that transaction
originates from this is the proper way
to secure your data because you only
have to do it once and if you remember
back to the slide where we talked about
the evolution of different technology
and interfaces have you done VPD way
back when with Oracle forms as you
migrated to client-server forms to the
web to iPhone or Android based apps all
your VPD rules are still in place and
are still respected so what we're going
to do this is a two-part demo here is we
have to create what's called a policy
function the policy function is the
little bit of business rule that
determines what we want to append to the
query when the VPD rule is invoked so
again we're going to use our sequel
worksheet here and the function is going
to be pretty basic we're going to
restrict what we see by department in
this case we're simply hard-coding in
department number equals 30 but this
could be dynamic and lookup which user
is connected to the system what their
department is and then fill in that
value so that users will only see data
within their own departments
let's go ahead and run this and create
the function now that only created a
function and this function is nothing
special it's not unlike any other
function until we register the VPD
policy it simply won't do anything just
like redaction we're calling DBMS RLS ad
policy we're putting it into Scott dot M
table we've given it a name restrict by
depth we referred to our function
restrict by depth and in this case we're
only going to worry about select
statements so let's Institute that VPD
command when we go back and look at our
data set now I'm going to require it
again notice that we only see the
records from sales notice over on the
right-hand side
we never talked about the chart we never
talked about the web service that the
chart uses but because that web service
touches the empty able the VPD rule is
in effect if we edit an employee it
should work just fine but if we were to
go over and say 7839 we know that
employee exists but we're not seeing the
record because VPD is simply returning
no values so it's doing its job and it's
doing its job well on the backend close
to the database where the data resides
now as the last security measures I want
to talk about something called auditing
pretty simple we could name balada ting
almost anywhere in the database oracle
database 12c makes it even easier using
something called unified auditing where
you don't have to create more complex
rules you basically say I want to turn
on auditing for a specific table and I
can even include conditions now so don't
audit every transaction I really don't
care how the system is running day to
day but I do care if someone's updating
a salary above a certain threshold or I
do care if the IP address is not one of
my internal users but is an external
user so let's add that one last piece
here which is the call to turn on
auditing and we'll do that through
sequel workshop as well we'll go ahead
and paste in DBMS fga for fine-grained
auditing add policy same Vince Kemp
we're going to call this web service and
we're going to monitor inserts and
updates only we don't care about selects
we only care when the records change
when salary exceeds 4,000 is our trigger
and the column that we're watching for
that is going to be Sal there we go and
now if I switch back over and let's edit
Scott and give him a nice raise of
$5,000 and hit save nothing changes here
we see the salaries now 5,000
but if we were to query the unified
audit trail which we do have to do from
the PDB admin user so let's go back over
here and paste in select star from
unified audit trail where the policy
name equals web service and we'll sort
by the time stamp descending we'll run
this query and the top result should be
the transaction that we just instituted
once this query comes back and if we
take a look at the host here it is
coming from Oracle cloud calm as we tab
over we can see that it did use a
database username Scott or its public
user is the proxy username which is
going through the the ords
server apex listener again we said
that's the old name for Ords still a
little bit of legacy name in the tables
here but as we scroll over we're
eventually going to see the actual
sequel that was run and there it is
update M set Sal equals : b5 so bind
variable and you could see that the bind
used was in fact 5000 so there's your
first bind it did audit that transaction
so as an administrator is a DBA we could
turn this on
perhaps on all of our web service
interactions or only those that exceed
or have some sort of value so that we
could be aware of what's occurring on
our system very easily without having to
build our own audit infrastructure why
build your own there's already a very
robust easy-to-use easy to manage
infrastructure for auditing that comes
with the Oracle database
to summarize here we're all aware that
front-end developers have all kinds of
change more than enough change in their
lives to be concerned about things like
whether or not the function they wrote
works right whether or not the security
routines that they implemented are going
to work when the database scales up
Oracle can provide all these different
utilities business rules data management
security etc it can store them
efficiently it can store them securely
manage and maintain any size of data set
and only return those rows that are
necessary for the end user and provide
all kinds of enterprise class security
features any security feature that
you've seen with any Oracle presentation
for the most part will work when
implemented in this manner at this time
if there's any questions we'll be happy
to address those I'd like to thank you
for taking time and spending it with us
today to learn more about how you could
leverage the power of the database
through your browser thank you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>