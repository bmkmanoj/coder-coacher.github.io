<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Take Your Mobile Applications Tests to the Next Level: Continuous Integration | Coder Coacher - Coaching Coders</title><meta content="Take Your Mobile Applications Tests to the Next Level: Continuous Integration - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Learning-Library/">Oracle Learning Library</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Take Your Mobile Applications Tests to the Next Level: Continuous Integration</b></h2><h5 class="post__date">2013-02-01</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/MDKtAiBdMBc" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">alright good afternoon everyone my name
is a young and then a quality engineer
with into it apparently I'm quite
vertically challenged so I'm going to
try the ca everyone so today's topic is
how do we get mobile applications in to
see I environment and just out of
curiosity how many of you have actually
integrated test into your CI environment
mobile mobile applications tests show
hands not many oh very good so I'm
hopefully the people who have done it
will be great to compare notes and also
you know and the majority of you would
be have you have some practical tips
that I try to include in this session so
that is something you can take away and
apply to your day-to-day work all right
so what are we going to cover today the
main part of our presentation will be
about the basics but we're going to
start looking at the challenges that you
will face what are the challenges in
mobile applications space which is
different from web applications that
makes it more difficult for us to
integrate into all the environment then
we'll take a look at the two main part
of presentation which is trying to
understand what is a basic android and
iOS the two main platforms are going to
pick how do we interact with the
simulators and how do we you know setup
install and all the challenges that your
face when you try to integrate a mobile
application test in to see our
environment the next part of it is that
you after you get your environment setup
you need to have tests to run and what
are the tools available and what are the
choices you have and you know provide a
sip like a guideline as and you know
what tools might be suitable for your
application and hopefully they'll help
and finally I'll put all have a demo to
show you how a test can run and see I
for both Android and iOS and in so you
reusable test as well so let's take a
look at first section so the challenges
for mobile test as we all know your
mobile applications house would have you
start off with Android or iPhone and
maybe you have more windows and so on
and so forth and within each platform
you would have challenges like the
device manufacturers it is different you
have the operating system get
resolution your screen sizes you know
whether the phone has tints you know and
all that you know all the different
hardware that comes with your your your
you know along with all the setup
challenges in going to have and not just
for smart phones you have to think about
tablets how are testicles to run on
tablets as well and the next part is it
is how you integrate that the choice
that you make you know choosing a
platform and which OS and also on into a
CI environment the challenge is going to
face is pretty much standard you're
going to find out that you need to know
how to set up your test how do you set
up your emulator how you're going to
install uninstall how you're going to
make sure that the connectivity to the
emulator devices it's reliable and
consistent and once you got that you
would have to go ahead and try to
execute your test and tear down and make
sure that your test can be run reliably
over and over again then you also have
to think about what your test results
are they going to recite in your
emulator and how you're going to pull
that out and actually display it into
Jenkins or any CI environment right how
you're going to display and publish the
results from the device so these are
some of the challenges in a phase and it
makes such challenging their faces you
know there are so many technologies so
many tools they are available on the
market right now especially fast past
few years there they have you know ton
that's surfaced and you don't think
about what is the right tool for your
application really and we're going to
visit that so that brings us to we're
going to try to tackle the mobile
integration as well as the technology in
this session mostly for as far as
platforms it's really app dependent so
if your mobile app you know has features
that really relies on the device then
you have to pick the device to integrate
in your into operating system into your
tests in CI but if your tests can run as
much as you can testing functionality
wise on the emulators and simulators the
advice is rule of thumb is run as much
as you can in your
or you know you know simulators
environment because it's inexpensive and
you can run it in your you know
day-to-day built and as often as you can
so so that's one option so that's why
the focus of the presentation will be
mostly on simulators and how you can
actually integrate that into your CI
Marvin right so so let's take a look at
how to set up set up on Android iOS I'm
include I'm clean quite a few tips that
these are practical tips that you know
some problems you'll find some real
earnings I got when overcoming try a lot
of the hurdles trying to integrate
Android into I in to see I so the first
thing you need to do is to set up right
you have to run the emulator and a come
on you give it as you know with input of
Android virtual device this is basically
just a properties file that you know you
can configure your operating system you
can configure your resolution memory and
sort so forth and you can you know
create that you the Android at all so
once you have that you know you can also
configure it with multiple options you
can have you know you can be set user
data you can have new animation on the
startup no audio and so on and so forth
the first tip you you know would be
great if you could use the android
emulator plugin so i know that this
comes with Jenkins and my question
whether it comes with any other CI
environments you might want to check it
out so what this does is that it helps
you start your emulator it helps you
install uninstall ask you does the clean
up for you and it's it's you know it's
something that you know you could have a
you you want user interface in oci
environment to just pick and choose what
you want you know you can choose your
you know startup options and so on so
far this is really you know it's really
clean way of doing things the only
limitation I found so far is that if
you're using a geolocation yeah if your
app uses a GPS feature so what you want
to do is you want to actually test with
a mock locations so you're sending in to
Android your geolocation fits so you
know that's a common that you tell that
to your you know device and say gee off
it's you know let it your longitude when
you do that you have to start up a app
and pass in all these data you're not
able to connect that during run time
you're not able to connect to the
emulator because Android arm emberley a
plug-in uses a random port render prefer
to start the emulator as well as a
random port to start with a DB so this
poses challenged so you know as open
source goes you know it would be great
to have that fix in the future and then
this will be a seamless integration
until see I all right so at least in two
is you know when you use when you use an
emulator you know to start up or what
Android is quite notorious that it takes
forever it takes about a minute and a
half if you if you start from a clean
slate you know sweep clean image so what
you want to do is actually use the
snapshot image so snapshot image is only
you know pretty recent actually that
Google supported that and what you want
to do is you know just give a snapshot
the default dash boot is the default
snapshot image but you can always create
your own and option which is new
snapshot safe it's useful when you don't
want to save the last state of your
emulator when it closes so this is a
default feature if you don't specify the
kumon you can be saved however that's
what a limitation about it when you save
your snapshot what happens is that it
saves the time and date when you reopen
the emulator it's going to be you know
the day that you save the snapshot it
could be like a month ago a year ago so
what happened is that this you know this
is a limitation if your test requires
your current time the end time so that
brings us to the next two so how do we
get out how can we overcome that so the
adb shell is a command line tool you
know if you're familiar unix this is
really simple when you when you type adb
shell you actually turn into a shell
that you can shoot type different
commands and and and it will interact
with the emulator directly in this case
all you have to do is set a date come on
and you actually you'll see the change
of the date on the emulator to the
current date and time the next thing is
if you can't
if you can't use the emulator plugin
like one of the examples I quotes it
before you want to use the emulator
c'mon you want to start up the the
emulator what you want to do too is that
you might not check the status of a me
later sometimes you can't connect to it
you know you run adb devices and great
emulator and you get nothing so so what
you want to do actually is to restart
the Android debug bridge I knew that for
a fact that i think the amulet plug-in
does to automatically for you it checks
the status and it doesn't it just
restarts the server so this is something
to keep in mind if you have to run it
you know do the manual you know start up
yourself and if you can't use if you
can't use a synapse or image the the
useful tip to new is that when you start
up your emulator first thing it happens
is it loves the emulator right you have
to unlock it so what you want to do is
actually stand a menu come on a key
event such that it will actually unlock
your emulator and that's the key code 82
the the next key event is actually a
mask key what it does is that it
prevents the d emulator to to to go back
into you know to to prevent us from
using the touch screen mode because the
previous it was a key event so you just
want to revert that and make sure that
they touch screen still works alright so
now we've seen all the tips for android
how about iOS there couple of ways to
start iOS you can use the open come on
which is a generic Mac OS come on or you
could use um if you want to use iPhone
simulator just purely on consumer you
can use this iphone sim come on this you
have to download from github it's
basically just a Xcode project you just
built and it's really easy if people
don't want to use the instruments come
on they could just yeah you know you can
build a binary for them and it can just
easily launch your app so I found that
some you know some people wants to check
out our app you know we could we could
just ask them to just much just like
that so it's really simple the other way
is to launch with instruments
instruments is a developer's to that
comes with Xcode
so what you want to do on not just sex
clip but just Mac OS so what you want to
do is actually create an automation
trace template so you just want to open
instruments create an automation
template and save it and pass it as an
input two instruments and just give it
your app name yet may have some fool
path name if it's on the device you just
have a specified you app mean app and
device if you have if you are connecting
to device you need the UID of the device
and so also for and also an iOS it makes
it really easy for you to just launch
your tests you can launch will test
using you know instruments as well so
basically you're launching the simulator
and you're also launching a test with a
single man and you can pass in your way
of script location is as well as your
results where you want the results to be
all right it's a couple of things um so
one one thing about when you reboot when
you reboot your your Mac or you use the
iPhone simulator first time you see this
prompt like the virus to try and gain
control of your of your buying in the
process and you have time your password
so sometimes you just type in passer and
forgot but this happens like if you
would be a machine or you know you know
you reinstall Xcode so what do you want
to do is actually two ways of going
about solving for this the first way is
to add user into the developers group
the other way is what's listed here
which looks generically for everybody
who use the built machine which is to
just at the to change the the allow root
key in system privilege transport the
true this will prevent you know the this
time you know you will see you won't see
this prompts again so this rule is
really useful winning a CI environment
and this thing is if your app uses
profitez caches in C poll where can you
find it in your simulator so this is
also advantage when you use the
simulator versus divides because you
need a jailbroken device actually to
access all these data but in a simulator
you can actually you know
it's a dist directory and find where
your data is and you can do your clean
out you can find out you can verify your
data and so on and so forth so we've
seen how to set up so is one of more
complex ways of solving for integrating
CI but when we have left is also install
and launch so let's take a look at that
so on install android has a separate
command which is to adb install all you
have to do is gave the APK file and you
can also install multiple a bill so if
you have multiple bills that you create
with different configurations of apps
and that's what we do and we can all
install the same time for uninstall you
actually needs a package name so what
can you find package name is in your
Android manifest file it's the package
is in package to write right at very top
so you need to figure it out to to plug
it in and see I as you've seen early iOS
you don't need that because all
instruments come on or in iphone sim
come on so you can just directly use
that so how do we launch in android
android again the adb shell has this
come on which is activity manager and
what it does is you know it starts the
activity again you need to figure out
what your activity is and once you
figure out you can just launch the
activity of your app a quick way to find
out is that when you start off your app
you can write have DDMS running which is
a debug console that you can actually
see you know what activities being
started and you can actually plug that
into your stock come on and similarly
for iOS you don't need that because
that's part of a setup so we've seen
install launch and setup how does that
all fit in into Jenkins I'll see I sorry
about part about that so in mobile tests
and see I you know first thing you is a
standard thing you have to create your
new job project and you want to have
built triggers you want to have built
steps right and part of built steps
would be you know when you want to use
when it really injector the
the commands to start emulator its
uninstall your app install your app and
launch your tests and xq a test and
finally to publish your results so this
is a standard a procedure that you want
to complete when you integrate at snc I
so with that we've seen the first part
of how to solve the problem integrating
your emulator and similar in to see I
for intro and iOS the next key part is
to figure out what other tests to
execute right how do you automate your
test so that's why I'm going to look at
we're going to look at in general first
try to understand what other automation
technologies I can bucket the most all
the technologies in the marketplace into
two different categories the instruments
in a non instrument approach what I mean
by instrumentation so instrumentation
itself has a strict form and a less
street phone for example a strict form
requires you to have the source code of
application which means that you want to
actually you know compile your tests
with your source code your actual mobile
application and you also want to launch
your test together with your mobile
application so a good example of that
would be robbo tube robotium you know
requires you that you create a test
project and you add a your your source
code your mobile application as a
dependency to your tests and and and if
that both you know if you're cooking
compile your Testament compile and
you'll cast won't be able to install so
that's a dependency there and that's a
strict form of instrumentation that
requires your source code as as well as
you you know it to be included as part
of a test then we'll talk about less
strict form it would still sometimes
require source code and we still need to
modify the source code in order for your
test to run a good example of that is
iOS the UI automation library so what it
does is that it uses the accessibility
feature to allow you to have hooks into
your mobile application such that you
could use those hooks to drive your test
so this you've seen the command that the
reason why we're not
running our tests in the app is because
of this feature that enables your tests
to run however your test your mobile
application would have to enable the
accessibility feature for this to work
this is a hook this is a hope that makes
the your test runnable so it's the last
strict form of instrumentation but
nevertheless instrumentation and the
final two characteristics are generic
for all mobile application test is that
only one application can be executed at
same time as they also known as white
pulse approach so it's instrumentation
is as well you know you've noticed that
if you want to switch between different
apps you want to work in multiple apps
you can't do that with instrumentation
because your test recites either in the
sandbox of your your your application or
it's a resize in the device right it's
not able to reach out to another app or
reach out to external externally at all
so so hopefully helping to understand
what is instrumentation you can also
flip the coin and you know what non
instrumentation is sewn on
instrumentation doesn't require you to
have source code it doesn't require that
you compile your tests you know together
your source code and you can also access
multiple different applications because
it doesn't recite in the sandbox of your
tests in your application order device
so you're seeing this as a external
party and it's also known as a black box
approach so it's not always we
understand what are the characteristics
of both techniques can we be a diving
deeper to look at the advantages of two
different techniques so you can look
through and you you know the advantages
just go through the advantages of an on
instrumentation technique is actually
the advantage of the advantages of non
instrumentation technique is a
disadvantage of an honest instrumental
technique so you can see it that's a
different way so so for example a
non-institutional technique is devised a
platform and not state so you can run
your tests on multiple different
platforms I can have a set of tests it
runs on Android itself test the same
Tesla's test run on iphone
and why is that because it's outside the
sandbox of the application and it's not
tied into the platform that you have to
run your chess in just makes you allow
you to the user code and you can have
you know test language and harness
autonomy and also we talked about having
you know that you can test with multiple
applications the other thing is custom
UI you probably have seen if you were to
mobile applications a lot this typically
there will be custom user interface in
your application and what happens in
custom user interface is that when you
when you're in the sandbox and you try
to see the elements in a custom user
interface you are not able to see
anything because you know it's a custom
UI that is not exposed to the api's and
say you know off instrumental technique
if that's the case you know yeah not
you're not able to run your tests you're
running the tests like randomly your
liking the only thing you can do this
all the different gestures so you had
coded so this is so that's the
limitation instrumentation technique
that becomes a advantage of an on
instrumentation technique and also if
you need to do database and API
assertions server-side API assertions or
your external libraries like if you're
if you have a lot of images that you
want to verify and all that and there
are so many different image libraries
that you could use but you can't use
that in an instrumented technique
because you don't have those libraries
in your application so so that's an
advantage of using an on instrumentation
technique you can see all these
advantages it's also the advantages of
non instrumentation it's also a
disadvantage for an instrumentation vice
versa the key is the key advantage of
instrumentation technique is that you
can access the elements what it what
does it mean that because when you can
access elements you can see what type of
elements your UI your application is
using for example is it a text is it a
text view is that a button is it a table
view all the different UI elements
you're able to see the type the name of
the elements you can see the content
what is the text you know to verify and
so on so forth so it does have its
advantages and
also the ability to it comes typically
in the instrumentation approach you can
you know it's built in it's so much
easier to install you know uninstall
launch your app and so on so forth the
other key features that you can do a
quick coverage you can't do that with a
non instrumentation approach because you
need a hooks in order to to access how
much you know code you hit as particle
coverage so now we've seen you know both
techniques you know now you know we have
to understand what technique is better
for your app it's really the two sides
of a coin it doesn't mean that one side
is better the other but it really
depends on what your application is
about if your application is more suited
to use the non instrumentation technique
your summer features cannot be tested
with instrumentation technique you have
no choice but used on instrumentation
and vice versa right so so what I just
generalize and offer you a better
understanding of how which technique to
use so maybe this pie chart would help
so you can see that if your application
is mostly txt space you need to verify
for example a tweet a user's activity a
user's you know account name you know
billable balance and so on so forth you
want to validate the exact text you want
the instrumentation technique because
then you can get you can get to the data
and validate and you can be sure that
it's hundred percent correct so hands
down with text-based features you want
to just go with instrumentation
technique but if your if your app has
many features that you know includes
images images custom UI you know the
external validation thing you have to do
and as well as external interaction for
example we have a feature that requires
a user to log into your mobile device
and the user has to validate they are
they are identity with SMS messages
message or email so then the user is
step out and go to you know to a web
to a web app to validate a user and
comes back to the mobile app to continue
the process so so this is also known as
out-of-band authentication and this
approach cannot be used using
instrumentation because you have to step
out and you know you have to step off
your app and and and welcome some events
before you can carry on your mobile
device so this is just one example so
have you known these two techniques well
you know we can take a look at the the
tools that are pocketed in these two
areas and they are very distinct we can
see you have a set of tools you know in
instrumentation and for Android and iOS
and these tools I can be grouped into
multiple you know this this is by no
means exhaustive list now basically the
mostly open sores and it was a deception
of a plan and and UI automation so what
the the tools are available in
instrumentation I mostly can't be
grouped into different languages they
vary from you know Ruby cucumber and
coffee script and Objective C as well as
Java scripts as well as Java so you can
have a choice of you know different
languages you know that you're more your
team is more comfortable with the only
Java basis I should be a podium and if
you look at non instrumentation it was a
section of eggplant you you can see that
every tool listed that is based on Java
so that's what I mean I used for our
demo which is actually to be able to use
the tools that we can run your tests on
both Android and iOS and actually use
same test harness to build drive the
test and if time allows I can just do a
quick you know walk through a 40 booty
on tesson and see I NCI as well so have
you learn all these tools will just jump
in to look at three different tools will
pick will be monkey runner securely and
moet right so what is monkey runner so
monkey neurones API that controls the
Android device emulator outside the
Android code so
a monkey in runner by virtue of its
design allows you to continue no to use
the same command to run on emulator as
well as a device which is you know is
fantastic not only that it does a lot of
different you know it does all the user
actions that you you know you can
possibly do on Android device it
captures screenshots you know you can
also do admin work which is you know
start stop kony connect configure your
logging it also does multiple you know
device interaction you can actually
connect to multiple emulators and
devices with a device ID it's kind of
cool however how do we use monkey run in
Java this very little little
documentation around that so so the next
few slides will help you integrate that
into Java easier a couple of things you
need to set up is of course download the
android sdk tool the sdk has a set of
tools in plaque on to this all tools
directory you need both of them and then
these are the switch ours and list of
classes that will you want to would be
of interest to you want to integrate
that into in your java and Gromit and
how do we actually use these these
classes you look at this set of code
there is this really important object in
Hansel instantiate which is the ADV
back-end connectivity so this will
connect to the emulator or device you
may need to make an instance of that and
you basically call the wait for
connection and we're giving your time
out and your device ID I think device ID
is optional if you only have one device
running on your system and it would give
you an instance of a device and with
that device you could actually you know
connect to connect to it with different
commands and that allows you that you
can do on the command prompt so you can
execute adb shell commands pretty much
any come on in shell for example you
know killing a even killing process ID
start an activity and different key
events like you know touch screens drag
so on so forth keyboard events as well
and the last thing of course you can
type in any you know text that you want
in the fuels so you can see more of
different different AP is the sort of
integrated into a simple Java come on
that you can use and like dragging
getting screenshots and all that that
utilizes monkey runner and make it
easier for you to integrate into your
Java code java test so we've seen that
monkey runner does let's look at what
securely is securely is a visual
technology that you can use to automate
and test user interface using images
Cecilia is more of a generic tool
compared to monkey runner monkey runner
is just where I enjoyed so securely it's
pretty neat to that you can not just
automate your mobile app you can
actually automate all the events in your
in your operating system you know if you
need to control you know different apps
you need to control you know different
you know commands or you know you know
or you can need to verify database and
all that you can do all that separately
but securely it's just a set of commands
that you allow you to recognize images
and around your desktop and control
anything that is a like a user
behavioral technique and it can mimic
that and you know you can use it easily
as part of your test so keep the nice
thing about securities as platform in OS
depend on a stick so you can control
your desktop you can control your
similar end devices via VNC so it does a
standard you know some of the actions
that you'll be useful for mobile testing
is capturing screenshots detecting
screen changes keystrokes and finding
images that you can tap on and as well
as immature OCR the OCR is kind of a
pretty rudimentary but nevertheless if
you have a really simple you know text
which is a you know clear image you can
actually get the full text pretty
consistently how do we use to kill in
Java
so if the one thing you want to do is to
just install the IDE you have to install
the IDE it's not just a jar file because
it has a quite a few dynamic libraries
link runtime linking library so you need
to link to and then once you install the
app you can you want to import the
script jahil and start using you know
the API is in the script class a couple
interim you know important classes here
let's take a look at how we can actually
use secure in Java so the key thing here
is that you want to make an instance of
application the application is say for
example iPhone simulator is your your
iPhone simulator app so that the
security will know that it has to focus
on this application alone and you can
you can you can set the screen you know
once you set the once you get the
application you can set your screen to
zoom into your app and whatever activity
is going to happen just in your
application screen so then you can do
things like you can click you can type
you can capture screenshot and so on so
fall so so again for more now I'm API so
you can check it out at calm down into a
calm calm down moet come down into the
moet iphone java and get help and i have
the resources at the end of the
presentation so the next tool i'm going
to take a look at is moet what is
mouette moya is a I want to see it as a
design pattern most people just jump in
and design but when we think about the
mobile apps task we have a suite of
tests that runs the same same way on
different application because your
application exactly the same on all
mostly the same on on different
platforms so so if you like to have a
same set of tests that can run on
different you know different platforms
you want to think about design you want
to think about how you can reuse your
tests on you know all these different
platforms and to do so you want to think
about using a creational pattern which
means that you know that you can at
runtime instantiate a you're the right
device and bind it to your tests for to
run your tests
and I'll show you how to love you how to
do that and in this way you can actually
reuse your your tests and you can also
use the same language and st. s hunters
to run your tests and this gives an
example of a login test so a login test
can be specified in as a part of a
interface write your application
interface and and in order when you
implement this interface you can
implement an iphone you can play in plan
an android and so on so forth so when
you implement this interface is when you
implement how you complete your action
of login on iphone so this example shows
you that you touch the screen and
students you know at the user name and
enter username and so on so forth until
submit but for Android you might have a
different way of implementation so then
you have to implement a different way
but this means that if you if you follow
this interface and all your test is
based on this interface you can create
as many implementations on different
platforms as you want but you can be
used to test on these different
platforms so how does the architects you
look like so we talked about the
application interface this is a top
layer you define all the business logic
say for example get accounts you know do
a transfer do a bill pay you know for
financial application these are login
you define that as part of inter
interface your application interface and
then you base your tests off that so
because your test is based on this
interface you know for a fact that these
are being implemented in different
platforms you know that that you know
that you have so what you have is an
implementation of Android and it will
reuse all the features this part of the
monkey library like monkey run around
library and are not iphone application
you can reuse all the securely libraries
that you have built already what a mix
is interesting is that you can you're
actually abstracting two things you're
abstracting the device right you
wouldn't know what device you're running
right because it's sort of encapsulated
in the you know in during run time you
know in the simulator layer that you
want to know what device you're running
dinner thing is so encapsulating the
user logic on how
you implement the business logic and
your how it is being implemented on
device so this two forms of abstraction
helps you to you know just be able to
run your tests on multiple devices so
now we will take a look at the demo so
what I'm going to do is actually run a
mobile chess NCI with monkey runner moet
on android and securely my on iphone you
see that will be able to run it install
an app launch an app run tests and stop
the app and publish the results right
see so I'm going to do you can see so
this is a Jenkins built I have non
instrumentation approach and an
instrumentation approach I start with
the non instrumentation approach and
look at how I configure it so as a
standard you know you would include
saucepan management but I don't have and
Boop triggers what I want to show is
this this feature here as part of the
android emulator plugin you can choose
to run emulator doing build and you can
choose to have a VD file that you
created or you can run it with
properties so you can actually specify
all these properties and you know in
doing a bill so what do you also have is
able to show the window use a snapshot
and also reset estate and some more
advanced features that you can put in
your emulator options so then it comes
to build steps but build steps i have i
have the michelle come one that i
mentioned earlier to set it to the right
time the current date and time and the
next step is to actually run at and
target it's just the android built
script it's really simple i can quickly
show you what that is and finally is to
publish your your HTML report and this
is actually a task in your aunt bill is
to publish an HTML report just do a
quick what happened
alright so it can quickly show you what
Android build is g-unit so this includes
all the cha files there wasn't necessary
and the report reporting part is
actually using the j unit report there
we go right here so this is a standard
towson if you can find it from auntie
patchy fog and similarly this is exactly
the same for iphone is to half the jigga
new report is probably the ants to ask
okay so let's go ahead and start running
it so built now did it built there we go
ticularly console output sure this is
the right one let's go back to project
there you go so you can see this
actually using a snapshot image see so
it's using a snapshot image that's why
it boots up so fast what the next thing
is try and do is connect to a DB there
is a defect in in monkey runner really
that the first time you start out the
emulator you will have a connectivity
problem so basically have a sort of
setup test that we initialize the
emulator make sure that a DB is running
this only happens once if you run
subsequent tests you don't have to do
that the connectivity will be available
and what it does this test is going to
do is add a contact you add a contact
find a contact and delete a contact and
you see the same tattoo run an iphone is
acting this house so let's go ahead and
just add a name hello we'll go ahead and
find and contact and this is all using
monkey runner
so it's found a contact and try to
delete a contact
alright and you can see that the test is
being published the results and you can
take a look at the cebu my team the HTML
report just go back again there we go so
this is part of app address with the
test and you can even get the screenshot
the ant name only test that past the
screenshot of the device and last screen
that that a part of the part of the test
this you will have to configure this is
just you know using a stylesheet in j
unit that you can change the display and
include the snapshot as part of your
results so let's take a look at iphone 4
iphone 4 iphone let's look at how i
configure it it's pretty much the same
because there's a non instrumentation
approach you would run it this pretty
much the same way as as the android and
this shell scream is basically just to
start it you don't have to really start
it you can start a spark test but i just
want to make sure that these consistent
and reliable that i started and then
have to test just launched and run and
again the bill script bill file is
exactly the same as Android set for
different jobs let me included and then
you publish your test result so let's go
ahead and built that
and while you're going to see it's the
same tests that's being run so you will
you will your add a contact find a call
you know find a contact and delete a
contact and this is using securely and
what is the same test that's been
running to add this you know same user
data have you seen hello world and
that's it and it runs really fast in iOS
okay and you can take a look at actually
can take a look at the results so as iOS
and again the tests and you can see the
screenshot that's the last screen shot
at what's being saved and you can also
take a look at the console output that
is compiling and running a test the
scene tests DC earlier and it does a
dump of the screen the screen text that
you see and does all the clicks and
typing is typing events so that's four
that's for iOS and how instrumented so
just want to quickly run through what is
that for instrumentation approach and
that's I'm not going to run it but just
going to show you what how it was and
this is a robotium test and what I do is
because I have a location test I need to
run so I can't use the emulator plug-in
so I just have to start with my own come
on it's own shell script that I create
just to start it up and check the status
and before I launch my test and then
just the ecology shell dates come on to
set current day next thing I want to do
is uninstall just in case that there are
previous you know packages that was part
of the snapshot I just want uninstall
first next thing is to clean debug and
install so this is part of server a boat
iam
you know steps you know that you you can
follow all I want to do is clean debug
install I want to run my tests
separately I don't want it to run my
tests I know test is an option in it the
reason why I don't want to run the test
is because I want to run it with a J
unit test runner so this will actually
run the test with a argument to specify
where my report follows the jig unit
report file and the since the tests have
been run on emulator i want to have to
pull it out i have to pull it out to my
local drive you local drive and then i
publish the results right j in a report
so the difference is that you have to
pull the results is because this is
instrumented your results are on the
emulator or device but non instrumental
approach your test results besides on
your your system can take a look at
quickly at the latest test results so
you can see that this is standard j unit
Jane it uh you know test reporting since
we have a little bit of time i'll show
you what instrument edition for iOS
configuration is it's all about
challenging because i'm using the UI
automation framework and in and the UI
automation is not a really full fledged
harnessed per se is actually just a
billy for you to run your tests so what
do you have to do is actually that you
have to you know have a script such that
you know or you know right in java you
know alright a junk junk see i plug in
you know would be great that users could
actually you know find all the tests the
javascript test that you want to run and
it will pick so this this is basically
the script that picks out all the tests
in this folder course essence or the GS
tests the javascript tests will run it
and and then it will you will pull it
will actually you know have enough
script to translate those results what
what you are automated does this
actually has a plist file results file
that you have to choose keyvaluepair you
you have to translate that or you have
to you know parse that such that you
becomes a gene uniform at if not you
know you you just get a plist
keypad impaired and so then you can't
see the test results as that's exactly
like a J unit and then you have a test
you know test name and so on so forth so
exactly the same all right so let's go
back to a presentation
so far as these are the resources that
would be of interest so that's covering
the presentation and then we'll have
some time for questions just guess
there's no mic just shut up
sure hmm okay so the question is the
test that was being shown takes about
you know a minute to run or some takes
half a minute to run so this is what
I've noticed in an you know on mobile
elevation test that does take quite a
bit of time to run them so what we try
to do is to limit the setup so so if you
are logged in already then you want to
you know validate a screen in one test
as much as possible and so you don't
repeat the login over and over again it
takes a long time to run so what we tend
to do is having acceptance tests have a
user logged in and then we go through
all the different checks on different
screens and then log out and done so
this will shot on your test quite a bit
yeah it's definitely a limitation in
mobile as in you know it doesn't it's
not as fast as a web app the other
option is what you've seen here is that
I'm actually showing an emulator window
so what I heard is that if you run in
Hitler's it might be faster so that's
one option but I haven't really looked
at
it is open source but I'll there are
many options you know as Hudson and you
know electric cloud or you know now many
different options that you know you can
take a look at it but there's this one
one option that I use just for a demo to
show that you can integrate that into a
CI environment so pretty much any cfi
runs you should go integrate it because
all the commands are standalone right if
you install the adb commands you should
go access it so you can shoot as a most
CI tools should allow you to integrate
built steps that includes executing ants
tasks and so on so forth okay so the
question is the tests are they recorded
as an a record and play back to us in
this case the tests are not record and
playback is the user has to
programmatically say whether you want to
enter your tats where you want to you
know click and so on so forth so it's
not a record and playback tool but there
are options to allow you to do a record
and playback it's just that I you know
prefer to have it a in such a way that
you know we can be reusing a test so
that it's the the app changes you know
in different ways we can we can try to
minimize that code change in our test
oh sorry correct so so the question is
you know how do you click button on so
on so forth so instrumental technique
you actually will know what the button
is the name of a button so you can
actually you know find a button and
click not instrumental technique you can
click based on a location button or you
know you can you can find fine image or
you can you know if the image if the
text of the button is not it's easy to
get a get texts that securely can
actually find the text in which you
press it is not it is clear of text so
we're question the bag
okay so the question is how you know is
that possibly to actually record as a
video so that it you know users could
see the the advance to happen and video
fall and not just images you can
definitely do that you can integrate
that you can because it's a non
instrumented approach you can definitely
do that because you can start off your
your recording session and you know stop
at the very end but no instrumentation
or you can do this to a party I you can
have it as part of built step before you
xq a test the only problem is the size
right you know I mean it's the same as
web application right how much memory
you have to store and your your your
built machine that's definitely doable
it's just that we actually try not to do
that we try to save PNG files images
because we want to limit the amount of
data that we have keeping and the amount
of maintenance that comes with it
uh-huh
okay so the question is around android
OS s than many multiple different os's
and how do we test test all of them so
right mm-hmm okay so what we found so
far is that we've we've been trying to
do more functional testing around the
that runs continuously in CI with the
most prevalent OS so once at least we
know that that prev Louis does you know
nothing breaks on that prevalence OS and
and now features stable then we looked
at different os's especially the new
features but so far we have seen that
you know it's the only you know very
minor issues with different os's it was
not one of our biggest pain points I
think the biggest pain point is actually
functional verification on you know that
you know that we have to repeat all the
time if their server site changes
database changes and all that that we
have to validate the client side sorry a
monk passionate back
so we have for mac for for iOS we would
have a Mac machine that the cell built
and run all tests at the same time yeah
Android you can pretty much run any any
systems yep yes so the question is where
the setup is so if you go to so you're
talking about the CI setup or so the
oldest all code is actually in github in
/ more tree under the tree so I actually
have all the address book test the
source code is being checked in so you
can so a look about Jenkins said I was
really have you seen earlier preached a
4 it's just the ant and the the the the
android emulator plugin so i can't
really check that in some anyhow because
it's a really a Jenkins environment yeah
you can serve reviews of the
presentation yep that's good thank you
any other questions all right one last
one Co coverage the question is around
Co coverage so at this point we haven't
attempted to look at Co forage because
we are actually trying to get as many
tests automated as most possible and
trying to get it in to see I running
consistently and reliably so so I think
next step would be to look at Co
coverage yep so thank you everyone for
your attendance thank you so much</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>