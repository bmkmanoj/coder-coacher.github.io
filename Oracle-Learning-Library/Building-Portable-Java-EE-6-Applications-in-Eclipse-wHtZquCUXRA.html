<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Building Portable Java EE 6 Applications in Eclipse | Coder Coacher - Coaching Coders</title><meta content="Building Portable Java EE 6 Applications in Eclipse - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Learning-Library/">Oracle Learning Library</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Building Portable Java EE 6 Applications in Eclipse</b></h2><h5 class="post__date">2013-01-29</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/wHtZquCUXRA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">well welcome everyone so this is a one
of the first sessions of Java one this
week so this is a talk on building a
pajama e6 applications and Eclipse and
then we'll also look at how we can build
them in a way that they're portable
across different application servers so
this is going to be kind of a demo
driven talk so we'll start off just by
kind of reviewing some of the changes
that happened in Java EE 6 p-6 been out
for a little while now you know starting
to get some previews as to what's going
to be at EE 7 actually but we'll talk
about what was new in de 6 or what is
new in EE 6 we'll do some demonstrations
on building e6 applications in in
Eclipse and then we'll look at ways that
we can tune these applications to make
them you know portable across different
application servers things that we can
do with the descriptors things that we
can do in our persistence file things
like that just to show of hands how many
Eclipse users are in the room awesome
okay makes sense eclipse is the most
popular ID right now released for Java
development how many people are already
doing java ee 6 development so some any
still doing e5 okay ejb two dot one okay
none okay good all right so so at the
end we'll stall waiter at the end for
questions as well so feel free to talk
to me at the end but one of the main
things about e6 is they're really trying
to make it more of a lightweight spec
what we saw and this is in a number of
different ways one is bringing in this
concept of profiles on the first profile
that they defined was the web profile
they've also gone through and removed a
handful of of the AP is that were kind
of legacy so these are things like Oh
Jack's jax-ws web services has been out
for at least two releases of Java EE so
they finally are deprecating jacks
PC it's a the old way of doing what web
services ejv 21 which doesn't seem like
anyone is doing in this room there's
also being pruned whereas announced
deprecation in Java EE 6 so you will
know no longer have to worry about
container managed persistence and all
those kinds of things entity beans oh
yeah so hav two dot one entity beans are
gone jsr 88 is also been marked as
deprecated for java ee 6 so the idea was
that they were just trying to kind of
remove some of the book the the bloat
that they've been packing along for the
last two or three releases of Java EE
and then the other as part of the web
profile one of the big enhancements is
they're really trying to make java ee 6
enable you to build applications which
has a lot less code what we find is that
in least in java ee 5 if you're building
you know kind of a standard tier
application where you're creating a jpa
entity to do your entity access than
you're doing creating an ejb then if
using javaserver faces you're creating a
managed bean there's a lot of your kind
of copying the same code over and over
again across layers and so with EE 6
they've tried to try to simplify that or
flatten it out allowing you to reuse
these components at the different layers
and so one of the things that makes that
easier is the ability to do ejb
development in a war so traditionally
even if you're just doing a simple web
application your entities yuri jb's or
in some kind of utility project or
utility module within your ear and then
your web application is in your war but
no longer any six you can do the whole
thing in a web application this makes it
easier to do lighter deployments to
lighter weight servers and they've also
made some of the descriptors more
optional any e5 we started to see a lot
of configuration through annotation and
they've taken that step to another level
by allowing you to do a lot more of your
configuration of your applications
through annotations so you no longer
necessarily need a web XML you can do
things like you can configure servlets
be an annotation throughout servlet you
actually don't even need a faces
configure they
that you would normally put in phases
config like your managed beans
annotation or your managed beans your
navigation rules in cases things like
that can all be configured within your
classes themselves their annotations and
then they've also added things like
dependency injection and so that was
introduced through two new specs in java
ee 6 one is context and dependency
injection that's jsr 299 so that allows
us to basically inject objects within
our components and then use them in our
view layer in our expression language
we've all they've also added bean
validation so a bean validation tries to
do is when they were looking at the way
you're typically doing validation you're
doing you're probably writing code at
the at the web layer to do validation on
user inputs you're probably doing some
more logic to do validation you know in
your business logic or your ejb you
might even be writing more validation at
your entity level and so what they found
is that you're doing a lot of
duplication of code and you're having to
keep these validations in sync and so
what they did with being validation is
give you they're trying to give you a
single API to do validation at the
entity level so at the last place where
data goes before it goes before it makes
its way to the database and so this is
done through annotations on you can
define custom constraints of your in
being validation and it's all done at
the entity level and so we also have in
java ee 6 some updates to the existing
specs so JSF was updated the major
enhancement around javaserver faces is
just out of interest how many JSF users
are there in this room oh good quite a
few so in jsf 10 JSF 12 you most likely
were using facelets the faceless was an
external library now facelets has been
brought into to jsf as part of JSF todo
so that will give you a very nice
templating engine and we'll show some
demonstrations of that servlets were
also updated
EG abs were also changed so that you can
as i mentioned before you can do u JV
development and web apps so let's take a
look at some of this in action so i'm
using eclipse juno and i have a few
additional plugins installed so i have
the GlassFish server plugins installed
so i can deploy a glassfish i also have
web logics plugins installed just so i
can show you some of the portability
between app servers and so this is
coming from some free plug-ins that we
develop at oracle enterprise pack for
eclipse so the pieces here is glassfish
that's what i'm going to use for the
first part of the demo and then what
logic i'll use for the second part so i
have glassfish already configured it's
already running i'm using oracle
database just using the standard HR
schema so let's create a project just to
get started here i'm going to create a
new dynamic web project so this is
caught my employees will target it to
the GlassFish server and then we'll
modify our facets so for those who
aren't that familiar with facets this is
something that we develop in Eclipse to
make it easier to configure your
projects it's based on the faceted
framework it's part of web tools
platform with facets our vests are nice
for an eclipse developer because it'd
allow us to make changes to your project
you can do things like add additional
jars to your classpath you can do fast
it you can add additional files maybe
configuration files things like that so
i'm going to add a javaserver faces
facet i'm going to have JP a facet so
what this will do is it will install
though I guess we'll walk through the
wizard but it will step it will create
it will add the jpa persistence.xml to
my class path that allow my face is
config files as well as entries into
web.xml
I'm just going to use Clips link and I'm
going to assign this or connect it to my
oracle database so web.xml is optional
but if i'm using jsf i do need to
declare the faces faces servlet um so I
will need to actually put an entry in
web.xml and then we'll just go with the
defaults here so I'm just using some of
Eclipse wtp score tooling for jpa and
for a javaserver faces and so this will
give me some additional enhancements
you'll see it as we're kind of building
up our application one of the things is
it makes it easy to map a database to
entities let's just I'll just review my
database real quick so anyone that's
familiar with oracle database probably
knows the HR schema so i'll bring that
up just for those who aren't that
familiar with it so the HR schema gives
me you know an employee's and it gives
me relationships between departments and
jobs and locations so it's just you're
kind of a very simple HR schema so I'm
using just the standard data source
Explorer justjust dtp from eclipse some
of the things we can do with dtp is you
can create new tables you can define
your schemas I can edit and load data so
for example here this country's if I
want to go and look at what the data is
I can review that make edits to it push
changes I can even generate DD else from
this to go and create the schema
somewhere else in a different database
so it's pretty pretty useful and then I
can also do querying so if i wanted to
you know do a quick query
I can run it
so that kind of thing so just basic
database to lean on bullets take this
and let's take one of these tables and
less map them so we'll actually build
something out of this so I'm going to
create an entity from this employees
table so what we're using here is
actually the Dally tools this is part of
Eclipse wtp so this gives us a way to
very easily map entities from tables or
the other way around if we have as an
object model that we want to map to a
database we can kind of go from top down
we can also mean the middle so these
wizards are pretty flexible so by
default we observe the or eclipse will
introspect into the schema to look at
the entity relationships so if you have
a complex schema it will try and discern
what the what the default relationships
are in your schema and then it will try
and create entities that will mimic that
schema now you can always edit those
modify them create your own custom
associations create your own made it in
many relationships all those kinds of
things but I'm just going to go with the
defaults here so we'll just put in a
default package it's all fine and then
even if I wanted to go down to the point
where I want to customize how the
generated java class maps to specific
columns I can do that through this
wizard as well and the wizard keeps its
state so if I'm have a quite a few
entities that I'm generating and are
doing a lot of custom configuration of
this wizard the next time I launched it
will remember my settings so it's nice
if I had to something changes and I need
to go and read you regenerate makes it
easy so what I should get here is an
employee's and so my employee is my
entity so it's JP a 20 I can get some
content assist because I have a live
database connection if I go and make a
mistake something like that then I get
instantly alerted that things are broken
even get content assist when you're
writing your name queries things like
that
okay so maybe what we'll do is we'll
just do a quick test of this entity so
let's create a servlet so we'll use some
of the features of servlet 30 so
typically if I'm defining my servlet
I'll have to put some sort of entry my
web.xml in this case because i'm using
servlet 30 i'm going to just use my URL
mapping and use a configure through an
annotation okay so maybe we'll put some
information here and do get so it
actually displays something and actually
have a cheat sheet here I don't want to
have to write a ton of print line
statements
and let's fix our imports okay so we've
got a basic servlet so when working with
the GlassFish how many folks here are
doing development with glassfish okay so
one of the conveniences of the GlassFish
server plugin is and it sometimes as a
convenience and sometimes it can be a
little annoying to be perfectly honest
but as you're doing your development you
can set it to automatically publish as
your resources change so as you're
coding then it's doing it's not doing
real like best wap hot deployment but
it's you know a sure it's reacting to to
save state changes and then redeploying
the application for you so i have that
set to have that set as on so as I'm
making changes to configuration files or
Java classes I don't have to go and
explicitly do a full deploy
so its publishing and then we should get
a servlet come upon our own it didn't
work
it's trying to rebuild
let's try it again
see what I do I
I have a server the devs does work
someone just run that real quick so you
can see what the results are
alright well that one's working let's
try this again well let's go on and
actually i'll try and fix this on the
next part
oh ok
thank you
all right well let's move on I'll use
this project that's true i will look
we'll take a look at the next piece all
right so i have an entity so maybe i
want to test it a little bit so let's go
in and get an entity manager and then
we'll try and return some do a query in
returns and values
so we'll get our energy manager and then
we'll do a query
so we'll get our employee and let's
create our energy manager to query
and we use j PQ el so we'll save return
all of the employees i return all the
rows from employee basically
so we have our list that we want
and then we'll get one of the items will
get the first row
I need to cast this
nits and then we'll just go in and print
out this big boy's name
so see enough coming from so anyway I
have the same code here we'll just
Richard will just run this again
see if we get it to work
so that we get the employee well
hopefully my experience with the demo
gods will translate through to revolve i
will have taken all of the the brunt of
the demo God's wrath so that all future
speakers in this room will be ok alright
so let's so we've got a servlet I had
some syntax error so it didn't quite
work as well as I wanted it to but
basically what we did was made a servlet
we didn't have to register it in web.xml
because we used the web service
annotation and then we just use it
grabbed an entity manager and just
returned back all the employees and just
printed one of the employee values
Melissa let's crane ejb because probably
not doing all of your development and
servlet you're probably doing it in
something more mature like jsf or
something like that so we'll create an
ejb in this class which will do a
similar type of functionality basically
do some kind of query return a list and
then we'll use that in our facelets so
another of the new features or new
aspects of Java EE 6 is the ability to
develop ejbs in a web app so I'm just in
a war so I'm going to create a new
session bean
and so it's going to be a stateless
session bean we won't create any of the
interfaces this is another aspect of EE
6 and so notice here we have stateless
and local bean so these are some of the
annotations that will describe this as a
DJ be so let's create a method to return
the list of employees and then we'll use
this in our web in a web app or in some
webpages to display this in a table just
some more convenience methods to get an
integer
and then we're going to use the Senate a
manager get these imports right
just turn it off for now just so those
things Thompson barking at me okay so
you can see this one of the drawbacks of
having this like constant deployment of
the GlassFish server plugin so if I
default it's set to on just double-click
on the server and said to never publish
automatically or publish after a build
event or something like that if it's you
know if you find it too annoying if it's
being too verbose all right so let's do
this query again so
so just like we do in the servlet or
create a query and we'll use your GV q l
or JP q l
and we'll get the result list all right
this is basic ejb it's in our web app so
let's actually use it in a page so I'm
going to use facelets for this example
and because I want to take advantage of
some of the templating capabilities so
in eclipse juno within the JSF tools
project we added support for jsf 20 and
facelets and so if you're creating ex
HTML files creating facelets files
you'll see we start to have some
templates we're starting to give you
some content assist and we also started
to build some content to sister on CD I
so these are some of the things that
we've been doing within the JSF tools
project so i'm going to create a new
template i'm going to create a new
template file here this is going to go
on my web M because I don't want this
template to be exposed like to the
outside world so I'm just going to put
the template in web-inf and then build
all my content pages outside of it so
I'm going to be using X HTML pages and
then we can see here some of the
templates that we're providing by
default so here we have a facelet
template you can see some of the code
here so it's going to create a header a
Content a Content area and a footer for
those who aren't that familiar with
templating and eclipse this is all
editable so if you wanted to define your
additional templates you just click the
hyperlinks here for HTML templates and
then if you had your own you know custom
headers or custom footers or some
certain styles that you have to conform
to you can create them within eclipse
and then they'll show up in your new
gallery so it's pretty nice it's
basically how we define these kinds of
facelets templates for wtp so i'll
create a template here and then I'm
going to override some of the files here
are some of the kha content here so I'm
going to create a header just call it
Employee List
and we'll keep the content blank because
that's what we're going to override in
our content pages and then we'll provide
a footer no just say created in corp
something like that so we have our
template so let's create some content
pages that will use this template so
once again I'm going to go back and
create a new page call this list HTML so
we will create a new composition page
basically and so what the composition
page will allow us to do is import a
template so here I can go into this
composition element y'all get rid of the
design view here so from the
compositional element I'll do a control
space and I can start to get some
content to sisters so look in web in and
I'll pull in my template dot X it's
XHTML that I just created so the way
this is laid out I have the header the
content in the footer element defined so
these would override any existing
elements that I've created in my
template but I actually want to use
those elements from my template so I'm
going to remove header and just default
to the template header I'm going to
remove footer default to the template
footer and let's just run it let's see
let's see if it'll run yeah so we see
our header and our footer and then just
the the default content message here so
let's actually reference use rajv here
and then use that get employees method
so I'm going to be invoking I'm going to
be using CDI for that so this is going
to basically be injecting from my ejb
into my page and so in order to do that
I have
a little bit additional configuration of
my ejb so one thing I have to do is add
an app named annotation this will enable
this ejb to be used in my pages so me
and that and then the other
configuration for CDI in EE 6 is you
need a beans that XML file in your web
INF directory and that could be an empty
file I'm it's just one of the
configuration requirements so create a
baby instead xml file as well
and it can be a 0 kb file so I'm just
going to delete it delete the contents
ok and then lastly I guess what i should
do also before i try and deploy anything
and use the c jb is i'm going to change
my transaction type so by default your
jpa tools within eclipse always try and
do a resource local but in this case
because we're using ejv we want to use
JTA as our resource manager and one of
the nice things about the GlassFish
tools in Eclipse is that you can
actually browse without having to go to
the admin console um you can look at
here you can pull up your resources so I
know here that i have 1 i'd already
created this ahead of time but at least
sometimes sometimes you may forget what
the what the exact naming pattern was
that he used so that makes it easy
alright so we have our ejb ready for
injection I've got everything so I think
we should be able to build this now so
let's create a data table and we'll just
pull in that list
let's give order one give it a newer
bowl so there's a few different
obviously you know many ways that you
can develop your web pages so one is
through drag-and-drop so in Eclipse we
have a few different editors for web
pages when is a JSP editor which just
gives you content assist and syntax
highlighting we also have what I'm using
here is called the web page editor I
think by default eclipse will always
give you the JSP editor but if you
wanted to see the web page editor it's
here what the web page editor also
allows you to do is it gives you some
design views so if you prefer to work
more in a design way you can and then
the other thing is it synchronize with
the clips is palette so if you prefer to
do kind of drag and drop to build your
pages on you can use that so that's a
feature of the web page editor and
that's been around since the clips 34 i
think is when we created it I think
something like that or maybe Eclipse 33
so it's been a while around for quite a
while so I'm going to add a jsf data
table and the reason that this shows up
in my palate is that because I have all
of the tag load declarations at the top
of my page then it knows to pull them in
and display them in the palette for me
be done please call this anyone okay so
i've got a data table i'm going to pull
in a reference to my ejb to my get
employees method and i'm going to give
it a variable of e1 and so now we'll
just pull in values for you to populate
the the different columns I'll do one
more drag and drop in that will do the
rest just by code
do another column
and then we'll do one more column let's
see how does that look she all right
let's just double-check my entity make
sure that I've got the names correctly
ah so its first name last name Carter on
this and of course so let's try this
here
let's take a look at those wars working
what was the question that what was it
oh and alpha oh there's no wood yeah the
output text was just just a test I mean
I can do that here we could just do it
output to explain yeah but it's not
necessary
yeah okay well let's try in this moment
and it's was working
so that's the way it works okay so what
we've done is we've created in any
entity use in jp-a 20 create an ejb
using the ejb 31 speck in a web app
display that in facelets page and by
Nick your CD I so that's kind of the
different parts of this spec demo
so the tools that we were using as I
mentioned before was just some free
Eclipse plugins from from Oracle so
that's what gives us the GlassFish
plugins some of the JSF plugins some of
the java ee 6 stuff so it's enterprise
pack for eclipse is that if anyone is
interested especially for the GlassFish
server plugin as well as the JSF plugin
so let's talk about portability so
starting in it in both glassfish three
dot one in weblogic server 1200 that can
now accept each other's deployment
descriptors so if I'm building an
application that originally was designed
for glassfish I can take this
application and run it with some
modifications not not every descriptor
element is supported but many of them
are rented directly in weblogic and vice
versa so here's just some of the
examples of the the top level elements
that are supported across both
application servers so if I am coming
from glassfish and going to weblogic if
I have in my glassfish web.xml or in my
son web.xml it basically gets translated
over to a weblogic XML behind the scenes
and so security ejb so my jsf
configurations the class loader which
would describe where I want my compiled
classes to come from all of these types
of elements that I would set in
glassfish glass fishes version of
web.xml will get carried over to
weblogic XML or to weblogic without
having to create the weblogic
descriptors so I can take this
application that I'm building against
glass fish and then just run it straight
against weblogic and these these slides
will be shared afterwards so you can get
them if you I also included a docs link
to the full set of elements so if you
need if you want to see exactly what's
what is um portable you can get that
conversely if you're going in the other
direction so you originally developed an
application against weblogic and you're
moving to glass fish well you have the
same set of elements in weblogic xml and
glassfish web.xml but weblogic has many
more descriptors right it has a weblogic
application XML it has descriptors for
your web services for JMS for your JDBC
glassfish doesn't have associated
descriptors on for them but basically
what you end up doing is a lot of these
things can be added to glassfish done
xml so you have a very large web blaster
descriptor one thing I wanted to point
out here though is that on the web
services side if I'm setting when there
are a handful of elements that exist in
weblogic configurations that don't have
a companion configuration on the
GlassFish side so an example is here in
web services where I can configure this
via XML but on the GlassFish shadow and
actually have to configure it in my
class so let's see an example of that
let's see if this demo is going to work
that's me so I have the same project and
it's got weblog weblogic act EDX an
element configured to run against
weblogic so my targeted runtime is
weblogic 12 11 it just has some basic
configuration just the context room so I
copied over my son web application xml
and so i'm using some of the items that
we had in this table so for example the
context route we're using session config
class loader all of those are in here so
i'm going to say class lower is going to
set will set it to false meaning i'm
just going to use i'm not going to
delegate to or not prefer the classes
that come out of webbing classes i'll
provide a different context route since
this is the name as employees to and
i'll keep my generated jsf JSP files so
let's which is going to delete weblogic
Ted XML and then we'll deploy this to my
running weblogic server so essentially
what we have here is this same project
so it's the same so we'll go in and
add employees to
and let's try running one of these pages
so it works just the same so so just to
reiterate some new features that were
introduced both in glassfish 31 and in
the weblogic 12 11 time frame you can
just take the same deployment
descriptors and run them against on the
the companion app server so where do we
go from here well java ee 7 was supposed
to be announced this week I don't think
it actually was but or at least the spec
was supposed to be final this week but
there are sessions where they are giving
previews of some of the changes in java
ee 7 one of the new things will be
additional enhancements around the web
profile enhancements to enable html5 and
json style kind of in server development
if you want more information I would
check oracle com / java ee that'll get
you some of the latest news on the java
ee changes and java ee news if you want
to get Eclipse plug-ins for glass fish
that we were using today it's just
oracle com /o a PE and that's it thank
you for coming</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>