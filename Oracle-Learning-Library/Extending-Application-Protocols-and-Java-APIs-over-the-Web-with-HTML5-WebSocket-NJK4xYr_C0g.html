<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Extending Application Protocols and Java APIs over the Web with HTML5 WebSocket | Coder Coacher - Coaching Coders</title><meta content="Extending Application Protocols and Java APIs over the Web with HTML5 WebSocket - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Learning-Library/">Oracle Learning Library</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Extending Application Protocols and Java APIs over the Web with HTML5 WebSocket</b></h2><h5 class="post__date">2013-01-30</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/NJK4xYr_C0g" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">you're in the extending Java API is over
the web with html5 websocket just to
make sure you're in the right room this
is not intro to PHP or anything like
that if you're still awake my name is
Frank cracker I'm director of technology
for cos Inge I'm here with my colleague
Peter moskovits and just a brief
description of cos Inge our expertise is
in high-performance web computing and
you're going to see a couple of
eye-popping demos to prove that we are
experts in that field and just a quick
indulgence in ourselves that's me
anybody from the New York Java sagir oh
bummer I thought least be one person
beside myself where the the word outside
of Brazil or the biggest one the Brazil
guys kick our ass somebody have 50,000
members we only have 75 hundred members
and also I'm director of technology for
Ferguson corporation let me introduce my
colleague Peter thank you Frank hi
everyone I'm Peter and I magazine's
developer evangelist and one of my
passions is to make invisible things
things that are covered deep under
various layers visible and visualize it
and show what it can do for you so in
this session one of our objectives is to
do just that and we also wanted to give
you some ideas how you can extend the
reach of your enterprise messaging all
the way to the web so we are going to
get there as we build up the
presentation so first i wanted to show a
quick demo how we can visualize this web
messaging and web communication platform
so what you see here is a public URL on
demo dot cos inc com / racer this is
something you can try from home this is
rendered in a browser using WebGL
without any plugins whatsoever it's
quite impressive only 15 or 20 years ago
we used to render these realistic images
frame by frame and it took minutes if
not dozens of minutes to render each
frame and now we get these very pretty
images but this is not what we do what
we are doing is
the real-time communication over the web
so you can control this car using the
keyboard you can turn the wheel you can
move it forward you can drive it around
as you would expect so when we saw this
demo we figure that maybe this would be
a good way to demonstrate what you can
do with the real time web so what you
can do is you can take your phone and
that's what this is what I'm going to do
right now on the bottom of the screen
there is an ID that I'm going to use to
connect to the screen and all I have
running on my phone is a browser the
out-of-the-box default safari browser on
my iPhone and if the demo gods are nice
to us then we will be able to connect
and what I'm doing right now is I'm
tilting my phone here and with the tilt
of the phone I'm driving the car
so if you're interested how you can
build something like this and how this
works behind the under the covers then
you are at the right session just to
give you a very quick we can switch back
a very quick idea what's happening here
we have a browser running here on the
screen and I have a browser running here
on my phone and as I'm tilting my phone
I'm detecting the tilt information on
the phone using javascript each API
html5 api's and as often as I can I'm
sending messages to a special server a
WebSocket server we call it a gateway
that in turn sends the message back to
our desktop or to our laptop that is
sitting here and just so you know the
server is running on the East Coast in
New Jersey and we were driving it from
here so basically our messages were
traveling across the continent back and
forth that twice it went there once and
it came back once so this is the
technology that we are going to talk
about first we'll have a very quick
review of html5 i would think that most
of us have a pretty understanding what
html5 is so it's going to take only a
few seconds we will talk a little bit
about the communication means that are
available to us in this new world and
then we'll move on to the actual api's
and after discussing the API is it's
going to be very important and
interesting to see how the architecture
of the applications that we can build is
this new world is changing or is
possibly changing and what are the
things that you need to look out for and
then we move on and talk about how you
can layer extra capabilities extra api's
and protocols on top of this very nice
communication web sockets and then in
the last third of the presentation I'm
going to show a handful of additional
examples more enterprising examples that
highlight what the technology is capable
of doing so what is html5 html5 is an
umbrella term
the main objective of html5 is to create
a platform in the browser that allows us
to build and run that's not like
applications we have always wanted to
build rich applications and html5 has
set this goal without using any kinds of
plugins in the past anytime you wanted
to build something rich you probably had
to use flash or you want you have to use
silverlight or if you were a true java
person then you have to use applet or
javafx so now with html5 there's a lot
more that we can hopefully do and we are
going to see a few examples for that in
order to achieve this html5 address is a
number of areas of the browser-based
world ranging all the way from video and
audio through two-dimensional
three-dimensional graphics offline
storage and connectivity so every one of
these can be a all of these topics can
fill libraries by themselves the one
that we are focusing on in this talk is
in the bottom right it's a connectivity
when we talk of html5 one of the
challenges that we often face is it's
new it's modern but how about the rest
of the internets that's out there how do
you support old browsers how do you
support all my mobile browsers and so on
so the good news is on one hand that
browsers are racing to to support the
latest and the greatest of the standard
so if you take a look at pretty much any
of the modern browsers all of the
production ones they do have very good
support for many many aspects of html5
what is the situation with older
browsers what is the situation with
mobile browsers well it goes feature by
feature and functionality by
functionality causing the company we
work for has put a lot of IP and a lot
of emphasis on making sure that the
connectivity aspect if you're using
our product the connectivity aspect is
working seamlessly and connectivity is
not simply a matter of whether the
browser has native support for a given
functionality and here I'm primarily
talking about web sockets but it also
boils down to things like network
connectivity if you are accessing your
application through a mobile device you
are going through very different kinds
of network intermediaries then when you
access your your application from home
or from your office there are different
kinds of firewalls and routers and
proxies in the way that can affect this
communication so this is a very
important topic because most of the
things tend to work in a lab environment
but once you get out in production then
then it can be a very challenging world
so a couple of words in a nutshell about
the html5 connectivity features in the
world of html5 before html5 we have
primarily been using HTTP HTTP being a
request response based protocol all it
does is it allows the user to click on a
link in the browser or submit a URL in
the browser send the request to the
server and the server is going to send a
response to that there are a lot of
improvements for HTTP if speedy is just
one of the examples where it reduces the
amount of overheads it forces you to use
use as a cell and it becomes a way more
efficient way of implementing request
response kinds of applications however
the fundamental real change in html5
definitely from a communications
perspective what we believe in general
is actually web sockets so what web
sockets provide you is a full-duplex
permanent connection between your
browser and a server component we like
to call it a WebSocket gateway others
call it a WebSocket server and by having
this full duplex connectivity between
your browser and the server you don't
have to worry about building up that
connection all the time it's just there
for you that you can use for two-way
communication so your browser can always
send messages to the server
your server can always send messages to
the browser if you think of HTTP it has
always been a request-response half
duplex and asymmetric communication
where it's always the browser that has
to initiate it and then the server sends
a response to that there are additional
communication techniques and security
improvements in html5 cross-origin
resource sharing allows you to use
resources from different kinds of
domains in your applications cross
document messaging allows you if your
document is built up of multiple frames
that these frames can nicely talk to
each other server sent events support
the notion of sending data pretty
efficiently from the server side to the
browser the one we are focusing on is a
web sockets so what is WebSocket all
about and what is it really it's
actually two things it has two main
natures one of them is an API so if you
are a developer that's what you are
you're really interested in it is a set
of AP is that allow you to build these
these message oriented applications the
other dimension of web sockets is a
communication protocol controlled by
IETF so IETF handles the bits and bytes
the protocol that is going on the wire
and w3c is responsible for the API the
RFC was accepted end of last year in
December 2011 and you can build these
WebSocket enabled applications web
applications very quickly and very
easily what is very important is that
web socket is trying to address the
problems or the workarounds that we have
been trying to come up with in the world
of HTTP so probably many of you are
familiar with the notion of polling and
comet and Ajax technologies the need has
always been there to provide the
richness and the responsiveness in the
applications but we the only tool we had
was HTTP and now finally the industry
has come together to support a new open
standard that allows us
to do just that in a way more efficient
manner than we are going to talk a
little bit more about it now the term
WebSocket itself is a very nice term we
really like it partly because we
contributed a very significant part to
the standard partly because actually we
claim credit for the first three letters
of of the name web in a WebSocket
indicates that it is a web friendly
communication that means that it starts
its life as an HTTP connection and then
and we are going to talk a little more
about it as we go on in the talk then we
upgrade the the communication to a new
protocol to WebSocket also we are using
the standard out of the box HTTP and
HTTPS port numbers port 80 and port 443
that helps web sockets to to be
conformed to the already existing web
standards and we strongly believe that
this is the most powerful and the most
important API in html5 in general so now
that we have web sockets what can we do
with it why is it important to us so
let's take a very quick look at how the
architecture is changing and how the
architecture evolved back in the
client-server world we didn't quite like
the idea of deploying applications to
every individual thick client so we came
up with the web one of the main
inventions of the web was the web
browser the browser allowing us to
render HTML documents to the user and
allow the user to click around and enter
URLs so in this world of web we have
this half duplex communication that is
served up by a web server web server
sitting up there in the weft here
original the web was designed for static
documents in academia but very quickly
we realized that we wanted to make it
dynamic so the way to make it dynamic is
that instead of serving up static HTML
files from the web server with
some sort of an application logic their
application server middleware that is
responsible for generating the markup on
the fly based on the request based on
the user's identity time zone and so on
and then return that to the browser so
you can see there is a full duplex
connectivity between you between your
middleware and your back-end server but
you only have a half duplex connectivity
between your browser and your
application server so what this means is
that you on the application server node
are generating a dumbed-down view a
dumbed-down you I of your application
that you can get across and you also
have this limitation of the of the half
duplex nature how does it change in the
world of web sockets so as I mentioned
web socket is a connectivity between
your your client and a WebSocket server
so those clients can be mobile or
desktop clients and by having a full
duplex connectivity between your clients
and a WebSocket gateway you basically
have an end-to-end full duplex
connectivity but this is just one aspect
of the story probably an even more
important and interesting aspect of this
story is that in the upper diagram your
actual application is running on the
middle layer on the application server
node so as your user population is
growing you need to scale that out and
you are not using the power of the
browser because the browser is assumed
to be dumb in this world with the
evolution of the capabilities that I
mentioned in the html5 or five world the
capabilities of the browser become
really powerful now you have the ability
to run your applications on the browser
and you can use a full duplex
connectivity between your your browser
and your backends using web sockets so
that means that from the weft here the
application is actually moving to the
browser and you are using a very simple
and a high-throughput gateway here to
get the communication done and this also
allows you to scale out way better
simply because it's not your
responsibility to run the app but you
can run it over on the on the on the
browser side so the yeah you're
if you think of the race car that's
exactly what was happening we have the
race car running in the browser and then
it was getting messages that indicated
how it should how it should do and then
it knew what to do it was not that it
got like static HTML render somewhere in
the middle tier and then downloaded
every time it was an app running there
so we are moving from this document
centric kind of setting more to an appt
centric world so I think this is one
thing to think about and now I hand it
over to Frank thanks Peter hope we're
not get anybody dizzy by doing this so
what can you do with web socket and it's
kind of a funny thing to say that
because what can't you do with web
socket like if i go to you when you work
in an enterprise and i give you a socket
you can basically do anything right so
here's here's a hypothetical thing so
I'm your manager and I tell you that you
have to write this really high
performance application for our group or
for our company and you have the choice
of using a socket or using raw socket or
using HTTP which one would you use
socket right so now on the web you have
the alternative of using HTTP like
you've been doing for past 17 years or
you now have socket behavior which one
would you use it's pretty obvious what
you use right so and we saw some of the
interesting things from our friends at
Oracle yesterday morning at the keynote
Arun showed the web socket what was it
called Project easel from NetBeans Lucas
is very very cool and the ability to add
WebSocket behavior to pojos is a very
very cool thing but but the point about
this slide is that you can do anything
with WebSocket that's the point don't
think of this as like another comet this
is not you know to thousands not calm
and this is a push technology just think
about I can do anything I want to
bidirectional secure fat pipe over the
web so there's a lot of cool things that
you can build so the API is trivially
easy and here we'll look at the w 3
a formal standard for the for the API
there's there's three callbacks there's
five methods there's there's three
callbacks and two other other messages i
can show you unopened on message on
clothes are the callbacks there's
certainly there's the instantiation of
WebSocket this is of course there's uses
javascript a common mistake is that you
try to use the web socket right after
you say new web socket and notice
there's an unopened that you should wait
for so that's a common mistake when
you're doing web socket programming
remember now you're going over the web
it's not the latency from creating a
socket and websites a little different
so you have to make sure you have the
WebSocket connection before you go
forward okay and of course there's sand
and clothes like you would expect so so
the API is very easy it's a it's
deceptively easy right if we can go back
in our history books and we look at TCP
from late 60s early 70s TCP was very
easy it look like well just program in
TCP for the rest of our lives right how
did that work out who programs in TCP
anymore low-level TCP right we want to
extrapolate you know go up the ladder
and use higher level abstractions we
want to use our friendly API so we
wouldn't know in love over past like 30
40 years and that was the only API that
we had as Peter point out there was that
there's the protocol right the bits and
bytes over the wire and then there's the
API or it does the IETF guys and then
there's a w3c so the first
implementation of the protocol obviously
it's a protocol you could implement
other interfaces to the protocol as many
as you want the first one was JavaScript
because here comes the html5 train and
we know that the html5 train is a very
powerful fast-moving train just a lil
anak the last year there was one talk on
html5 this year there were 27 and what
most I'm talking about web socket so you
can see the acceleration and interest in
this technology now thankfully we have
an upcoming standard with API okay jsr
356 so this is very interesting Jace are
to follow you guys it's not quite right
if I get but you just follow the files
guy gives us a formal API for job which
obviously will follow the w3c
suggestions
the other eight jsr to follow is the JMS
2 point 0 spec which is jsr 343 if
memory serves so just beware that one so
how does this all work as Peter point
out one of the contributions of cos Inc
to this technology it was making this
web friendly ok and the first connection
that you make to a WebSocket capable
server is through HTTP and part of the
HTTP one dot one specification was to
ask to upgrade to another protocol right
so here's a client it goes to the
servants as a do you have WebSocket if
you do let me know so our product does
glassfish does other other servers do so
yeah I have a WebSocket I'm going to
upgrade you and give you the handshake
back at that point HTTP drops out of the
way so now you have a fat pipe you
effectively have a socket so I mean
since we're all world text here there's
web sockets on top of TCP HTTP was on
taste EP let me say that more correctly
web stock on TCP and HTTP on top of TCP
right we're all aware that had stack
works ok and the overhead to doing web
socket is very minimal if you do a lot
of web programming you know that there's
a lot of overhead with HTTP especially
for small payloads right at the metadata
is phenomenally large and if you're
building an application and html5 is all
about application it's the changing
we're at the start of the next phase of
the web right it's changing from a
document centric thing where we're
trying to tweak it to make it do real
real cool things and we're still
tweaking right html5 is now changing the
web into a programmatic framework we're
at the start of that cycle so this is a
really really cool time very exciting
time so with HTTP there's a lot of this
metadata stuff you know this could be
the overhead of a thousand bytes to one
bite right the overhead is phenomenal
but now the overhead is down to between
0 and 6 bytes effectively not negligible
all right so it's a huge huge difference
and if you're if you're building things
like trading systems this becomes very
Gordon I skip the slide here so what we
want to do is that we want to take this
is so much to slide we showed before we
want to take some sort of Java servers
in the back end the TCP doesn't have to
be JMS could be any java java service
and we want to make it web friendly so
we want to take things like JMS since
it's a very popular api things like amqp
X and P P ftp all these other nice
protocols will be known for past 40
years and make them web friendly ok we
don't want to take the some data change
it using some API convert it inside the
app server and then lunge it and send it
over we want to avoid that right because
it's a lot of overhead so we want to do
is we want to convert the low level
protocol the TCP socket into web socket
and give you the familiar API on the
endpoint so would it be cool if you had
the JMS API in JavaScript dealing with
the back end is not cool right and we'll
show you examples so in case you've been
living under a rock for the past 13
years JMS is it it's a pub sub API it's
not our protocols and API i was there
adorn the battles but making it a
protocol and never worked out so it's
just an API it's just you subscribe
interest into an object and typically a
string and then when data it gets sent
out associated with that object
typically a string you get the message
you guys know what that is right so it's
very very easy to do JMS hopefully
hopefully JMS to point out we'll upgrade
JMS oh it's more modern but that's this
is basically how you do pub sub so how
does that now apply to what we do ok so
it's certainly very very popular API and
and I was about to say protocol but
another protocol API and what we want to
do is we want to take JMS tcp on the
right hand side so I'm Java internal
enterprise service that you have it
could be market data it could be
notifications it could be something and
we want to some
converted so now its web friendly and it
goes over into a browser right now
before it up until recently we'd say
like we have to do something with a
plug-in right maybe an applet but now as
of this conference ends Oracle
themselves have said we're moving away
from Java and the browser right and now
we stated very very clearly yesterday
moving away from Java matter of fact
everybody's moving away from plugins
their browser right that's part of html5
is no plugins and what's the reason for
that while reducing the number of input
in some vectors coming into the browser
because there's a lot of security I mean
you have to deal with like security four
or five times because there's different
vectors coming in well get rid of them
all just have you know the web that's
one of the driving reasons okay so what
we want to do is that we want to take
JMS from the inside of the enterprise
and make it go over the web and this is
really cool that means that inside you
can offer JMS through an application or
through an API to your customers and
users so you can offer API to your
customers to build applications that use
your service cloud services this is a
very very powerful concept so are our
goal and what we do is make that middle
part disappear make it transparent so
that all you're thinking about is in
this example is JMS or whatever the
protocol is it could be you know MTP or
chat XMPP just think about the
application that's what you want to do
why who thinks of TCP anyone your
program you don't do that anymore right
we haven't done that in 40 years we're
doing the same thing a WebSocket
WebSocket is TCP for the web ok so we
want to make the entire Middle disappear
so let me turn it back over to Peter go
over some code examples
so what you see here doesn't Mike work
okay so what you see here is a six
simple steps how to get started with a
JMS based application first you need to
create a connection this is a JMS based
application running on top of web
sockets so first you create a connection
the connection can either be unencrypted
WebSocket connection and you see the
protocol is WS or it can be a WebSocket
over SSL over TLS then it's a WSS
WebSocket secure then you have the
ability to create a session you can see
the API down here and here you can
specify properties like whether you want
to make your transaction your your
session transacted or not and then you
have the ability to create JMS objects
things like topics and Q's JMS topic
provides a one-to-many kind of
communication cues allow you one-to-one
communication so in our case we are
going to take a look at a quick example
after this we are going to create a
topic and then you can start sending
messages into that topic you can think
of the of this topic as a as a as a pipe
like as a as a physical pipe you put
stuff in on one end and on the other end
it comes out and you can it can
distribute it to multiple readers on the
consumer side you need to create the
consumers who are going to take the
messages read these messages and then in
the world of JavaScript you have the
requirement to create message listeners
these are the functions that get invoked
when for example a message is coming in
or when an error happens or when a
connection closes these are the special
events that that are invoked and a very
important thing from a development
perspective is that this is this is a an
event-driven environment and
event-driven architecture if you think
of HTTP polling very often what you have
to do is you have to send a request to
see if there is anything on the server
for you and you never know if there is
something there for you so you get back
most of the time old there is nothing
there for me every now and then you do
get back some information that yes there
is something useful for you here in this
world you
you are getting messages and whenever
there's a message for you you get
notified there is a function that gets
invoked and then you can react to that
so it's a very nice nice model and very
nice paradigm and then after you have
established your your connection with
the producers and consumers you can
start sending messages so here in the
first code sample we show how you can
set message properties this is basically
header information in JMS so in our case
we are setting a string property as part
of this JMS message and then we send the
message and then here is the listener
the message listener the function that
gets invoked when a message is coming in
so if you think of the race car I'm a
message producer with my phone I'm
sending messages every time I am tilting
the phone the the sand function is
invoked and on the car every time there
is a message coming in for me then the
handle topic message is the function
that gets involved in this is example so
I get notified that hey I need to turn
the wheels to the left or to right so
it's very very straightforward so let me
show you a couple of examples and now
I'd like to switch to the other
microphone the the attached one thank
you
so we put together a very simple
tutorial the tutorial you can check it
out as on tutorial that causing calm and
what the tutorial shows is a set of code
samples that we built in a tool called
jsfiddle jsfiddle is a very nice browser
based java script editing environment
that allows you to specify your HTML
code your javascript code your CSS here
in the top right and then the rendered
code is down here in the in the corner
so what we are doing is we have a slider
here on the top and we can start let me
reload this page we can start
interacting with the image and as you
can see as I'm moving the slider the
image changes but what is more important
is that here in the logs you can see
that every time there's a change in the
image size in the slider position we
send a message out there where do we
send it while we send it on a JMS topic
so anybody who's interested in it can
listen to that so let's just give that a
try I'm going to start a new browser
with the same URL and here i have the
same code so i start changing start
changing the move the slider in one
browser and you can see the other one
nicely receives it and and resizes
accordingly let me go over here and if i
can adjust these guys then you can see
it's working nicely so what we have done
here is an interesting paradigm you can
send messages from a browser to the
server you can send messages from the
server to the to the client and then you
can come up with all sorts of
combinations so the combination that we
came up with here is a kind of a
reflector pattern I'm sending a message
from one browser to the server and then
it publishes it back to all the
interested subscribers so if I had three
four five browsers all of them would be
nicely animating here so we have
implemented a very
simple using JMS a very simple
peer-to-peer kind of communication a
pattern all the code the entire
application code is running here in the
browser the only thing we use on that
from the server side is that it supports
JMS that it's JMS we have basically a
topic and looks like somebody has joined
in so with JMS you can send messages and
receive messages and then you can
actually so you can go ahead and on the
iPad you can start moving the slider or
just if you can it's a little tricky to
get the get yeah there you go you are
moving the slider very cool very nice
excellent ok so if again if you are
interested you can go to tutorial that
causing calm and there is a series of
blog posts that explain what it takes to
build an application like this and every
step is documented in jsfiddle with a
code sample sitting there so it's very
straightforward to follow and I
encourage you to take a look at at that
ok let me show you another demonstration
and i'm going to use i'm going to show
you a recording of this what you see
here is my left laptop on the left hand
side with a browser open and on the
right hand side you see my ipad and in
the ipad i am starting a browser and i'm
pointing the browser to the same URL
that was invoked over on the left-hand
side and these are images coming from
flickr these are the 10 popular most
popular images of the day and i'm
interacting in one on one device moving
the images around and through web
sockets the other one is following it so
you can see how they are mirroring so
this is one yet another example of a
kind of a similar pattern but another
example for something like a
collaboration like real-time
collaboration k
it is where I am working in one corner
of the of this screen and you are
working in the other you see multi-touch
here and then here I move over to the
left-hand side and I I move I use the my
laptop's mouse or or a touch screen to
to make the two to resize the images and
the icing on the cake is that with one
hand i am using i'm controlling the
laptop with the other hand i'm
controlling the ipad and it's you see
the full duplex nature of the right so
if you have ever used google docs where
two people or multiple people that are
editing the same document that this is
kind of similar from a functionality
perspective probably a little more more
visual than that yes it really depends
so basically we we are relying on the on
the on the underlying connectivity so
when it comes when we use the race car
the server is running on the east coast
we get 10 to 12 messages per second so
there's quite a bit of latency there
what I used here in this demonstration I
was running a gateway on my machine i
created a shared network basically i
created my own Wi-Fi network that's what
the iPad connected to and then it was
very very smooth I think it was it was
close to 40 maybe even higher than that
yes on ipad so very good question not
all browsers support web sockets the
latest version of iOS and Safari do have
native support for web sockets web
sockets had multiple versions and
multiple releases to be perfectly honest
I don't even know if safaris on the very
latest i think on iOS 6 it probably is
on iOS 5 it was not on the latest but
thanks to the to the to the research and
development that we put into our server
it's completely hidden from us so i
could have run this demo in ie6 simply
because of the emulation that we put in
place it's completely hidden from me as
a developer so what you do as a
developer you write your code using the
web socket API you include a library and
that like
does the heavy lifting if there is no no
native web socket support there for you
then it uses clever emulation that comes
very very close in performance to the
native web socket connectivity we are
going to do a Q&amp;amp;A at the end so i take
this last question but so i did see some
over our our company Wi-Fi network but
when i created my own little network
there was no no such problem here so it
really it really depends yes i mean we
are sitting on top of the TCP layer so
if there is a if if that layer is
congested then then yes you are seeing
so basically you can't go faster than
light or you cannot go faster than what
the physical connectivity allows if that
answer answers your question ok let me
show you another demonstration how do I
do this
so before actually no I can I can start
this and then explain so what given that
we are at javaone we figured we wanted
to do some Java code even in the in the
browser so what you see here is NetBeans
72 and we built a simple javafx app
Frank mentioned that one of the types of
applications that that many of our
customers are our building is trading
kind of applications where you have
trading data available on a server and
then you want to get that very quickly
and in a fair manner to all your clients
so out of curiosity we wanted to see
what it looks like in in javafx now in
order to do that you need Java API so
this is one of the things that we have
done is we have built in addition to the
JavaScript API we support java flash and
flex silverlight so basically i was
using the Java API is here and this is
what is going to get standardized with
with a new jsr that's coming out and you
can see the the data changing in the in
the JavaFX appear on the right on the
left-hand side we have a JavaScript
application that uses the exact same
data feed so this is a nice example of
going from different kinds of client
applications against the same servers so
we have a kind of a fake or a demo
stream that plays back or our streams
random random trading info and then you
can access that from a java client or
from a from a JavaScript client ok
wanted to show a last demo if you go to
demo that cousin calm /
for X so this is a foreign-exchange
demonstration what you see here is large
amount of data coming in here here you
can go 20 messages per second 50
messages per second or hundred messages
per second this is not something that
you can do with in a scalable fashion
with with other technologies and then
you can take these currency pairs and
then you can drop them here and they
will they will pick up the the data so
it just shows the performance and the
rates that you can achieve and again
there is no trick this is an
out-of-the-box chrome running here and
you can get the same experience at home
when you go home and go to the cuisine
demo site on demo that causing calm and
you can try it out for yourself ok so
last but not least I wanted to talk a
little bit about the presentation tool
that we are using here press the wrong
button oh yes I trixie a two number
three
so you probably notice that we're doing
these fancy animations not only because
we like these fancy animations but
because we wanted to show something with
this anybody who knows Prezi as a
presentation tool okay so those of you
who don't know Prezi is a very cool tool
it gives you a an endless two
dimensional canvas you put your objects
on it you can rotate them and the way
you go through your presentation is that
you move a an imaginary camera over the
various objects you zoom in you zoom out
and it's very nice and very cool and
somebody built an open-source version of
this in JavaScript so what you see here
is based on this library that's called
impress jas and it's all very nice and
when we saw this just like with the race
car we went like okay maybe we can do
some interesting things with this so
here I have my iPad and what the ipad is
doing it's connecting to the exact so
basically here i'm in a maximized chrome
running and the ipad is connecting to
the same URL and connects to the same
presentation so when I am navigating on
my machine i'm doing a previous slide or
next slide the ipad is nicely following
it so what's happening is I have an app
written in HTML and JavaScript and CSS
that's running on my on my laptop and
the exact same app is running here as
well and they are just sending messages
through the WebSocket server to each
other again another example for
peer-to-peer communication and you can
take this to the next level I was always
envious I've always been envious about
people who had remote controls and I was
like that's not fair that we cannot have
a remote control so i'm starting a
browser safari on my phone and i'm
connecting to the presentation here on
the top left you see a presentation ID
so i'm connecting to this URL and if you
have an iPad you can give it a try as
well and I have a URL for the remote
control function
that I connected my phone too so now I'm
using my phone to advance the slides go
back and forth so what is actually
happening is actually I think we have a
slide about that yes so what's happening
is I have a presenter machine the
presenter machine is the laptop that's
here on the podium and every time I
press on the on the arrow case it sends
a next or a previous message and then
anybody who is interested in that
typically the clients maybe your iPad's
that you have here or my iPad over here
the Grays over in this side are
receiving the message is next and
previous obviously beforehand you should
have the basically the same application
downloaded and then the next and
previous message drives not only my
presentation but your presentation as
well and then I took my phone phone is
on the bottom left corner as a as a
remote and I'm sending next and previous
messages and the only one who is
subscribed to that is the presenter
machine so the presenter machine is
subscribed to the remote control
messages next and previous and then on
my behalf sent sends it out to all the
other clients so it's a it's again a
very very different kind of application
than your regular banking app or your
your regular library application right
in those applications those apps
actually are running on an app server
they are generating dynamic HTML and
they give you the mark-up they give you
the HTML and your browser is stupid here
in these cases the browser is smart the
browser runs actual code HTML and first
primarily JavaScript and it's capable of
listening messages sending messages and
that influences and effects what it does
so we are actually running true apps
here and when you remember if you
remember the slide that Frank showed you
a couple of slides back here what you
see here is there is this full duplex
connection and communication between
your clients and your back-end so if you
kind of think after this this resembles
much more a client-server world
than a three-tier or a multi-tier
architecture we are at a point where we
have the same power as we had in a
client-server world so that's very very
powerful and very capable okay so this
concludes the demos and I'll hand it
back to Frank thanks Peter I think we
have a few minutes left so as someone
point out what about older browsers that
don't don't understand WebSocket and
what about intermediate proxies SS you
know single sign-on all the enterprise
stuff and certainly that's a very
interesting discussion and as a company
we can have that discussion with you but
this is that the appropriate forum this
is a technical conference so if you're
interested you can contact us offline to
get the additional information but all
the enterprise features is something
that kissing has added to the standards
so what are the next steps and as you
can see this is not your father's
comment right this is next generation
stuff this is very very powerful stuff
this is an inflection point in the web
this is really really cool stuff and
what we've done is that we've given you
back your API is that you're familiar
with because we've seen you know web
socket API it seems very easy just like
the TCP API was very easy so when you're
back in school and you learn about
distributed computing you learn about
socket wow this is really cool right
what do you learn a second day protocols
so you can't just use web socket by
itself it's difficult right you have
five simple methods it looks easy but
it's really not you have to worry about
out of order you know packets coming in
you have to worry about the epi is
things like that so what we're giving
you is we're giving you back the
familiar API is the JMS API the XMPP a
PID amqp API things that you all know
and love that's that's a big benefit so
thing to think of what we have here is
sort of like you know butterfly flaps
its wings like it seems like a little
thing has changed but it really changes
everything completely changes everything
and gives you this this really powerful
feature that you where you can black
book applications and as we go forward
into other other areas especially things
like Internet of Things which was
mentioned yesterday during the the
keynote when the word job is moving
towards this is a very powerful tool to
use at the Internet of Things world and
certainly now with cloud and mobile it's
it's very very appropriate so I think at
this point we have 10 minutes for Q&amp;amp;A so
anybody have any questions we will start
with the back this time our web sockets
affected by HTTP timeouts well they're
not HTTP that's right they're not HTTP
right so just to just elaborate on that
the way a WebSocket connection gets
established is that there is a the
browser initiates the WebSocket
connection says I want to create I want
to create a WebSocket connection and
then sends a sends a request to thee to
the server there's a special header in
we didn't go into all these details
because we wanted to focus on how you
can eventually use it but there's a
there's a special header that indicates
that I want to use web sockets and then
a server has to accept that has to say
ok I'm happy to use web socket so sends
back an HTTP response and that's where
the HTTP part of the story ends this is
the web friendly part of establishing a
WebSocket connection and then HTTP goes
away and then web sockets comes into
place possibly on the same chords port
80 or port 443 so HTTP is very little
plays a little part in in basically
plays a part in the in establishing
establishment of the connection but it's
it's it's a different it's a different
beast as Frank said
the that's true and perhaps some of the
356 might address some of that so we're
hoping to see what where that takes us
also just in terms of security the URI
scheme is WS colon slash slash there's
also WSS calling / last just like HTTPS
for encrypted and in production all of
our customers use WSS not WS just to get
a question sir that's right
the civil side I
well well first you need a web socket
capable client right whether its native
like all the modern browsers let's be
let's be fair the other than ie they
will support it but with older browsers
you need some sort of emulation
technology and that's what we provide as
a as a product so you can fold back to
http long polling there's open source
things you can use but if you want high
performance we have a solution for that
that's a product well there's there's
various methods for it we have a certain
philosophy that we use that we have a
stand-alone java process that connects
to any TCP service that there might be
another product that uses some other
mechanism but it is a WebSocket server
you do you need you do need a website at
Gateway that is capable of communicating
with the WebSockets right room
our solution is separate there are other
solutions it might be part of the you
know app server you know glassfish I
presume is part of the app server just
different implementations just the
standard is on the API in a protocol
part me cure a topic oh you mean terms
of JMS yes you're right I'm sorry yes
get a question
well in terms of scalability so there's
many implementations of WebSocket
servers we have ours there's there's
other open source product glassfish has
it right so we all have we're all
competing for scalability we believe we
have the best and we scale too many met
week we have in our lab we can go up to
a million connections is all obviously
all depending upon your network if you
have a fast network will go fast if you
have a slowpoke we're just going to slow
as your network we sit on top of TCP so
we stand on the shoulders of the guys
underneath so whatever if you have a
fast Nick and you a fast driver TTP
driver we're going to go blazingly fast
you're an architect I've Ark Royal Java
architects right so we dissolve
different components into the puzzle
right there's our this is our gateway
the website gateway there's a back-end
service there's the Nick there's the Met
there's memory so it as an architect you
have to weigh all that we provide you
the best WebSocket server obviously you
have to consider the other components to
the solution ok but I would decide if
there's a fellow up so concurrency
that's up to your application so depend
we you get the communication mechanisms
right and then it's up to your
application to handle those those kinds
of things so JMS has certain level of
support but then your it's your
applications responsibility let's say
you have a higher level business object
that cannot be manipulated by multiple
people at the same time you would have
to to take care of that actually just
brings up an interesting point so we get
a question often well how reliable is
WebSocket remember WebSocket is at the
low level so reliabilities added
abounded additional protocols above that
for example JMS has its notion of
reliable transmission you know xmpp has
its own ftp has its own so it's not that
web sockets providing that no it gives
you just like TCP does the guarantee is
sort of like it guarantees a connect
it's not
t of the functionality so it's up to the
protocol at this level to give you
reliable or liability this gentleman
over there
so part of the html5 communication
standard there's WebSocket their server
sent events there's post message there's
something called cross-origin resource
sharing which basically allows you to go
past the number of connections and we I
don't get into a product picture but we
offer that an older browser so it gets
you past that connection limit one more
thing to add to that is that we have
clustering as well so we can scale out
to pretty much at a number of users
using using very sophisticated
clustering and these are these are the
the services that you get from an
enterprise-grade server versus and from
an open source project right
well tcp guarantees or during its
ordering sort of that message delivery
don't don't assume that tcp gives you
message delivery guarantee yeah JMS JMS
that other protocols do right right and
that's one of this is what we offer so I
think I have time for one more question
does gentleman back there like that you
get
so what we offer is we offer very
standard oriented so we offer the Jazz
plugin in our product that jazz
authentication authorization service
system service so you can write your own
login module that does authentication
and we also offer authorization so if
you want to track for JMS specifically
who can pub who can sub who can transact
blah blah blah blah blah so we offer you
the interfaces so you can implement that
and plug it into our gateway so every
company does that differently some
people use cookies and Senate cookies as
part of the URL to or to the login
module in login module you parse it and
you do something with it I can go into
details how you do that but yeah we give
you the interfaces and you it's up to
you to implement that okay thank you
very much guys better the conference</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>