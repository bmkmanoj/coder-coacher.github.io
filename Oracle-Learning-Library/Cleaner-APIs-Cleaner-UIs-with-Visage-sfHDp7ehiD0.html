<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Cleaner APIs, Cleaner UIs with Visage | Coder Coacher - Coaching Coders</title><meta content="Cleaner APIs, Cleaner UIs with Visage - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Learning-Library/">Oracle Learning Library</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Cleaner APIs, Cleaner UIs with Visage</b></h2><h5 class="post__date">2013-02-05</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/sfHDp7ehiD0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">welcome everybody to the visage session
my name is Steven Chen I were and I'm
co-presenting with William Antonio
secara how do you how do you say your
name you should you should also grab a
mic hello can you turn on the table Mike
okay dragon hello hello hello everyone
my name is William I'm from Brazil em
joog lead from Duke Valley am I will
talk with stupid today about the visage
okay so just to get this over with early
here's the obligatory disclaimer slide
which if you have really good vision you
can you can read I promise all of the
code samples and the talk will be in
much larger font sizes and some photos
of myself and my co-presenter Antonio so
he actually he has the tee shirt to show
he just founded a new jug in Brazil jug
veil so congratulations on the formation
of a new Java user group thank you thank
you and this is me on my motorcycle and
I actually I wrote in this morning i
live in the peninsula but there's a
there's a reason i am in full motorcycle
garb today and one of the things i'm
going to be doing in october is a
motorcycle tour through Europe that's
the the route i'm going to follow and
along the way i'll be interviewing java
leaders and java user groups and live
streaming the whole thing over camera
so if anyone's a camera geek this is a
regular DSLR camera but it has hdmi out
and the tarot deck on top does h.264
encoding and live streaming to Wi-Fi
ethernet or 3g networks so it should be
fun i'll be posting on the website here
night hacking calm and you guys can
either if you if you happen to be in
europe you can join me and if you're not
in europe then you guys can watch it
live or i'll have recordings online
afterwards
and these are some of the folks I've
I've pre-arranged to drop by and visit
so you might you might recognize some of
these folks either from other sessions
you've been attending here at javaone or
the java community alright so a little
bit about the vizag language this is
this is the reason we're here all today
so vizag is a domain-specific language
designed to build user interfaces
there's lots of different languages
fortress as an example of a mathematic
domain-specific language what were to
some other good dsl's out there schol
effects and groovy effects are JavaFX
dsl's Gradle is an example of a build
system built using a DSL unlike those
visage is actually a whole compiler
chain built from the ground up it's
based on a lot of the Java Sea
infrastructure but it's an entire
language and you can use it on any
platform where the Java Virtual Machine
runs a little bit of background so it's
a statically compiled language just like
Java the compiler will throw compilation
errors if you get your types wrong if
you make any syntax occurs it's based on
the f3 and JavaFX script languages for
anybody who who knows about some of that
heritage oh and thank you Michael that's
the bag yeah you didn't miss much of the
talk because we're just on the first
slide now so so give give Michael a
round of applause he's the reason you
guys are getting handouts at the end we
have prizes from people who who win our
little challenge and also for a lot of
other people too since we have more than
we have questions all right so and we
also plan on supporting different
platforms we're going to show you
tonight we're going to show you javafx
20 we're going to show you vaadin with
visage as a UI tier on top of it we're
not going to show you a popular Linux
based tablet operating system this is
the wrong conference for that but go to
our website if you want more details
about that alright so what does visage
look like so this is this is a really a
really simple visage application this
this will actually compile minus imports
I left off the imports but you can see
it's quite terse and so the things to
note is there's kind of a it has an
object literal syntax so you can see the
hierarchy of the user interface by
looking at the code itself and so for
those of you not familiar with JavaFX
this is a JavaFX example the outer stage
is the the window the inner scene is
your scene graph definition and then the
text box is one of the many UI controls
available in javafx the bind operator is
a nice feature for programming user
interfaces it what it allows you to do
is bind from your user interface
components to the model whenever the
model changes the UI will automatically
update or vice versa if you do inverse
binding it's also useful even to sync
different UI elements and quite a good
alternative in a lot of situations to
event handler callbacks you can do a lot
of the similar things by adding
callbacks when different events happen
but binding is a more natural syntax to
express a lot of the same constructs and
then we have built-in constructs for a
building user interfaces so this is an
example the pound ddc c33 which you know
looks like standard hexadecimal for
color actually is code so the visage
compiler recognizes the syntax treats
this as a color constant and it will
correctly type it if you use this
anywhere else it'll through a type error
we also have constructs for
or durations and angles and other things
you would commonly use in a user
interface so the theme here is this is a
language built for writing user
interfaces you could use it for other
purposes but it wouldn't be as suitable
of a language alright and the last one
that I'll mention now is by default
visage will never throw a null pointer
exception for user interfaces this is
quite convenient because you know if you
if you have an application and there's
some random condition where objects not
available or something's not initialized
yet you probably don't want to know
pointer thrown in the Java log window
behind all this other stuff happening
where nobody's actually going to see it
and your application crawls to a to a
halt what it will do is wherever it
would normally throw an MP it'll use
default values so for like integer
values that will use eros four objects
it'll return null but then if you
execute a null it skips the line so you
know same thing in this case you can see
that we haven't actually initialized
input yet so we're binding to input so
normally this would throw a null pointer
exception in visage it won't and later
on when it gets updated the bind will
automatically get the new value for the
text box so this is a nice way where you
can actually set up yours your interface
without worrying about MPs along the way
there are some cases where you actually
want no pointers for debug ability
asserting that things should never be
null and you can do that with an
exclamation point it for dereference
instead of a normal job so this will
give you a Java like syntax the program
would blow up with an MP and halt
alright so um let's show some examples
of you want to know step up here just
some examples of javafx with visage
hello so first thing we want to show you
is a comparison between a visage coach
and Java coach here we have a program on
left side that is a Dodge program and on
the right side we have a Java program as
you can see the difference is visible
but if we will put in numbers the
difference we will see that visage is
much less verbose than Java and the most
interns finger is that not about the
Linus its characters as well in front is
we can't see that visage there is not
too much things of the language to learn
to create interface the desired language
lets you build interface it freely
giving you more Fox on the interface in
not too much fox on the language
specific things so that's here an
example of how not where buzz is visage
so someone told chief that XML has an
advantage under advantage over visage
because XML has default parameters and
what she did was change the compiler so
now we can avoid the declaration of some
parameters and make the default so we
save a lot of line of code and the code
is more visible for interface are any of
you guys done any flex development I'm
XML hacking okay yeah so what am I one
of my Flex buddies gave me grief because
mxml essentially it's xml-based but it
lets you ness things inside of each
other without attributes or or tags for
everything so this gives you similar
syntactical elegance for visage but in
an actual statically compiled language
so that is a demo dead I Stevie will
show you yes we're going to we're going
to prove that some of this technology
actually works this is a this is a port
of the vanishing circles application
it's it's slightly modified version of
one which comes with the javafx runtime
and here I'm coding in netbeans we don't
have a full plug-in for netbeans for
visage yet we're working on updating it
but we do have a full syntax highlighter
in skype which you can use for
developing and will also show some live
coding examples as well to show you what
language is like but this is just a
really quick example you know it's
javafx program has circles that are
animating event handler so you roll over
these and highlight the circle and if
you click on one of these it will get
rid of the circle okay did you want you
to code all right let me think what is
this code in a slider yeah
all right so remember I said we'd have
big fonts how how about that okay so
here is the vanishing circles well Java
code and this boot straps the visage
file for the same thing and you can see
that it has a similar object literal
syntax to what we showed in the earlier
code saying width and height of the
scene the fill having a group of circles
the way that the mouseover works when
you mouse over the individual boxes is
the stroke width let me get it higher
for folks in the back the stroke width
is bound so when you hover over it it
will adjust the width of the stroke to
give it the highlight and the clicking
the animation happens based on a
timeline here vizag has a dedicated
animation syntax as well which makes it
quite easy to build animations in
whatever user interface technology you
happen to be using
alright
so Vizag comes from Java fact script the
original language to build two double
effects application now you can create
to Java javafx application using
straight Java but this ash is based on
Java effect script but each has changed
a little to make it even more easier to
create a user interface one thing that
we just show it is a default parameters
and Stevie also is working on new
literal syntax angles colors and lengths
which means that you don't have to use a
class from visage to such a color or a
mango or the length and you can just
write the code using this notation and
that we understand that this is a color
or a nagl or length and as to be short
we also have now a way to throw and no
point except if you want this is I think
that the guy who work at with the
effects which you wanted because if you
want to show blue point except she helps
you to the book because if you have some
problem but my personal in my personal
opinion I don't like no point except I
like the way that desire is without
discrimination mark because you create
the things in Vizag and if it's not you
neutralize it you will not know that so
it's a good thing you should not concern
about until the Asian or other things
and they new feature that stupids work
now is maps that will be built in on the
language as well yes sir this is a good
question for anybody who's a language
geek and and versed in many different
languages there's a few different maps
in taxes groovy has its own map syntax
and a bunch the other JPM languages do
it differently but that's the proposal
were working on implementing now where
you'd have map equals and you would
quote
the map key if it's a string have a call
in and then you'd have your map value in
those cases those are variables apple
and banana groovy kind of has a similar
syntax but it cheats on type slightly it
assumes keys if they're not quoted our
strings which I think it fits in nicely
with a groovy syntax but it it's not it
gives a weird feel in a statically typed
language but if you have any feedback on
the map syntax feel free to let me know
shoot me a tweet at Steve on Java okay
and then some other things about Vizag
which make it particularly well-suited
for using with javafx to sew the binding
support in Vizag there's also language
level binding in javafx the difference
is JavaFX 20 uses an API so you're
calling through a bunch of methods and
chaining together your bind expression
Vizag does it in the compiler it
compiles your binds the advantage of the
latter approach is you can actually get
better performance for especially
complicated bind expressions and also
have quite a bit more expressive power
with simple bind expressions where
JavaFX 20 is somewhat limited in how
complicated your buying expression can
get before you have to break it out to a
dinner class integrated collection so
actually having integrated support for
sequences and maps maps upcoming and the
built-in animation syntax which I showed
you guys a a quick sample of inside of
the vanishing circles application the
equivalent code in Java is quite a bit
longer because you have to construct the
timeline construct the keyframes and
glue it all together so something we're
going to show you which is new this was
done just in the last couple months is
we have so I guess it's a good time to
mention who works on this yes
so so I kicked off the project last year
and in my spare time mostly but I'm very
interested to keep the compiler portion
of it going a bunch of the guys with jug
Chennai are also kicking in on the
compiler and they did this the Gradle
vizag plugin and we also have a bunch of
community leaders in brazil helping out
so William and I mean Elaine Elaine
Elaine and different folks contributing
from around the globe so it's kind of a
a global collection of folks pooling
together we're crowdsourcing and then
compile our development what it means is
that a lot of the decisions we make you
know we're striving to keep the codebase
clean and then keep things elegant for
the end user but progress is not as
quick as you would have if you had a
company sponsor like a big jboss or
Oracle sponsored project so you could
bear with us on actually integrating and
doing stuff the right way as different
people around the globe have spare time
to work on this so they did this cool
work on actually building a Gradle
plug-in for visage and we're going to
switch
alright so we're going to switch to
Williams machine and he's actually going
to do a little live coding demonstration
using the Gradle plug-in yeah so the
first thing I'm going to do is create a
visage effects project so at this plugin
they each add some Gradle will change
things to we create of that product I
should I should probably explain this
before but you you guys all know the
Gradle cradles essentially the groovy
groovy build system a build system
ridden in groovy and it's useful for a
whole compiling a whole bunch of
different languages it compiles java
groovy scala now visage and you can have
your own compiler plugins for just about
anything but it is it's a fairly elegant
build system compared to writing and XML
scripts so even if you take nothing away
from nothing else away for this
presentation I hope you'll give Gradle a
try because it's an excellent build
system for all your Java needs can you
will see the comments name type in so
okay so I'm creating a large project it
will ask me a few information just like
maven but I don't have to go to the to
configure a xml file loading loading as
the plugin and when i try to do things
he will check through the internet and
he will download the plugin so that's
white layer is low
so my projects creator now I'm ready to
write visage code a finger that I need
to do is to inform the Gradle what is
the main class that we will run my code
so I widget a file to do this
now i'm i will use one text editor to
create a simple application to show you
do you know this editorial site very
cool and it has syntax highlighter for
visage
so I am imparting you hear the classes
that we created Eve Asajj for job
effects yes you can you can see that
William William types pretty quickly
this this is this is why he can deal
with having a day job and helping out on
open source projects because he's pretty
fast it yeah faster than me so I will
see here at we formed a color you will
see that I'm not importing any class i'm
using a visage factory so i will use the
color of the senior will be white the
point is that i didn't have between
parts any class from Vizag our class
from Java fact it's natural from Vizag
the use of color literals so now I will
run this product
this compile visage you will just
compile so i will add another another
blue green plug-in fitori that is to run
the program so we figure a low which
makes verily it to you create
application and pack and put it in in
distribute it I would like to show you a
more complex application I will be
releasing our complex application or
blog it soon so entering visage dash
land you are in your groups and we've
announced that some more complicated
applications so we haven't hear a very
basic application that does nothing so I
will add some interface controls to you
see how visage works
so on that V box is a javafx vertical
box layout and he's adding children with
the visage sequence syntax square
brackets and visage are sequences which
is the built-in list construct and a
label with hella Java one being added
so next when just finished there when
this simple program run I will show ok
it will have an AI think I didn't impart
to the vbox ok
so while each compile that will show you
their bind on live code
so the text field component is the right
yes the javafx control for having
editable text yep there we go hello
javaone see your computer's too slow for
you yeah I'm Iranian a brutal machine
that's why it's very slow I don't like
to program on windows this person now
what now what I'm going to do is to make
my label change the text according the
text that it's in my text fuge so to do
this I just have to use the bind
this may this may seem a very simple
example but for example if you have
domain objects that you are bring
different database and you want to chop
your day to the interface automatically
this is very useful because you you may
bind all the interface controls to
domain objects so if you bring the
Domino blacks from database or from a
server remotely it will update you the
interface automatically now as you can
see my label is behaving as I type it
here because of the binding keyword so
with one key words I could make two
components oph automatically with no
much pain should I show event even just
disclosed alright so that's a quick
example foot back to that that's a quick
example of what you can do with visage
with very little code so using java
effects controls doing binding between
controls but it's good for more than
just javafx one of the things which we
want as a goal of Asajj project was to
get the the scripting language away from
untie it from the underlying UI toolkit
visage or the javafx script language is
useful for a whole bunch of different
domains and one of the other things
which we've been doing with it is
building web applications if you're not
familiar with vaadin it is a java ee
framework for building user interfaces
on the server side has a rich set of UI
controls the important part is it sits
on top of GWT so it has a full Java to
JavaScript compiler which means that
since you're now writing your entire
user interface or your tire web
application in Java it's easy to stick
besoj at the front end of the tool chain
so code your UI and visage as there
domain-specific language that compiles
down to bytecode and the bytecode then
gets converted into JavaScript so
combination of Baden and visage lets you
bring all this technology to the web all
right so here's a really simple job of
aden application you extend the
application class create a new window
add a label and then make it the main
window so really straightforward now if
you did a direct port of this to visage
this is this is what the equivalent code
would look like I mean this is not that
much different it it highlights some of
the language differences between visage
and Java but you're not really getting
much advantage here so what we did is we
we put a little wrapper library on top
of Aden so that you can use Vaadin in a
more functional declarative way and
using that library this is what your
baden application would end up looking
like so you can see we're taking
advantage of the object literal syntax
for creating the window setting
properties on the object now so a
caption here and then a nested label and
then content inside of that and then
since i don't have labels here then
we're also using default parameters in
vizag so let me show you a quick sample
of some of the stuff running so
basically what I did is I took the clips
so I took the vought in address book
demo and i went ahead and ported that to
Vizag
let's see here i think i'm alright well
we'll restart jetty it's using an
internal and internal jetty process and
of course guess guess what Bill system
we're using for botton I have a nice I
have a nice Gradle script in here as
well that kicks off everything great old
off properties there we go here's the
the entire Gradle script so visit vaadin
has some really great Gradle examples
for bootstrapping their stuff it gets
all dependencies for you and I wrote a
quick rapper script in Gradle which will
compile and do the front-end toolchain
for besoj alright so let's go ahead and
launch our Gradle build
ok so it's compiling our stuff making
sure everything's update wiring it up
and now jetty jetty should be running
all right let's give this Oh what do you
know it's the visage home page on Google
Code well we'll have the URL up on the
on the slides as well but I think I
think we've got high enough page rank
now that if you just type visage and
Google you'll you'll hit us
8 / massage bottom all right and this is
the quick address book sample from visit
from Baden but it shows you it's an
actual web application compiled through
visage and using all of the vaad and
controls for editing stuff so it just
gives you an example of using visage
outside of the context of javafx oh and
there's our demo slide alright so um now
we we get to the fun part of the talk I
guess fun for us but possibly work for
you guys okay so this is a little
slightly unfair because I haven't I
haven't fully explained the entire
visage sequence syntax but these are
these are some little puzzlers about how
sequences in vizag work and it uncovers
some little subtleties about how null
pointers are handled in vizag how empty
lists are handled and those sort of
things so i'm not expecting you guys to
get this right we have more books than
questions but i'm going to give you guys
a chance to rationalize what you think
the answers to these should be so just
for a little bit of background right so
the sequence syntax in visage it can be
used for things like enumerates so like
one to ten will give you a sequence back
with items 1 2 3 4 5 6 7 8 9 10 there's
some cute things you can do with
predicate clauses so this thing will
evaluate to a sequence this predicate
Clause limits the amount of items in the
sequence the only things which are
greater than 17 and there's also some
special rules about the size of operator
which gives you the size of a sequence
oh and a hint for the last one is the
size of any object in besoj that's not a
sequence is one
okay all right anyone want to take a
guess at the the first an answer for the
first all right so yeah in the back
infinite okay so so infinite sequences
are computationally difficult to model
but that's that's that's a one possible
that's one possible result yes okay so
that's another art someone's or second
and i saw a on the back 10 okay simple
simple who's up zero all right Michael
UK one of the books you / hut all right
so for the first one the reason the
reason besoj treats it as 0 is um so
it's you know if you think of it as a
set you're trying to get all the
elements from one to ten that are going
to meet the condition for stepping
backwards so what actually what you
actually get is kind of an empty
sequence back since no numbers meet that
condition and then the size of an empty
sequence is zero so all right good job
Michael
devauden okay so second question anyone
want take a stab oh yeah did you did you
peek at the slides yeah so so that's
that's that's anticlimactic a-- because
you guys you he was supposed to say 18
and I was supposed to say well no that's
absolutely wrong because the first one
says what's the size of the sequence the
second one says what is its evaluative
but yeah you're absolutely right so yeah
okay so I right applause
alright and hope play didn't give it
away but last last question what's the
size of this sequence size of 20 21
step- 37 okay that's one answer hired
six I heard one who said one what why'd
you say one yeah excellent all right all
right so like it's a double right so I
have size of here which the size of the
seven actually i think is the answer I
think I'd have to I have to calculate in
my head but yes I think it's about seven
is the is the size of the list and the
question says what is the size of and
the size of anything is on one so all
right great job size of the boys returns
a numeric value so technically my
questions</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>