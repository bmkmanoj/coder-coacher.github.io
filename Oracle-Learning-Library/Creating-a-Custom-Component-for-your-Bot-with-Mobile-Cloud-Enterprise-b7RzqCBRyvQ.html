<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Creating a Custom Component for your Bot with Mobile Cloud Enterprise | Coder Coacher - Coaching Coders</title><meta content="Creating a Custom Component for your Bot with Mobile Cloud Enterprise - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Learning-Library/">Oracle Learning Library</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Creating a Custom Component for your Bot with Mobile Cloud Enterprise</b></h2><h5 class="post__date">2017-12-20</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/b7RzqCBRyvQ" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">in a previous video we showed you how to
create a bot but we left out how to
create a custom component custom
components allow your bot to communicate
with back-end systems such as an
inventory system suppose the bot from
the previous video takes an order for
five small green t-shirts you want to
confirm that you have the order in stock
and if so return an order number to the
customer if you're out of stock for that
t-shirt size in color then you want to
return a back order number custom
components are implemented by an API
that the bot can call we won't go too
deep into the process of creating an API
we'll only focus on the endpoints that
are required for a custom component so
let's get started create an API in
Oracle mobile cloud and call it t-shirt
order-taker make a copy of the api's URL
for use later create two endpoints again
and a post the get end point must be
components and the post end point must
be components slash component name don't
forget the brackets the bots UI calls
the get endpoint at design time to
discover the components parameters and
its possible responses in the post
definition click Add media type and make
sure that it's set to application JSON
go to the security page and turn off the
login required switch now create the
backend for the API think of the backend
is a kind of web server it handles the
communication between the API and
clients such as your bought copy both
the back-end ID and the anonymous key
you'll need these when setting up the
bot to call the API to finish the setup
add the t-shirt order-taker API that you
created earlier to the backend before
you start coding download a few
artifacts first get the implementation
scaffold from the API
click implementation then click
JavaScript scaffold extract it to a
convenient location on your hard drive
some files that come with a scaffold are
not needed for this project so go ahead
and delete them now they are readme
samples swagger tools config and the
Ramo file you'll also need the bots
DK download it from OTN oh this is the
17 point 4.3 SDK which is the latest
version at the time that this video was
made open the SDK and copy the registry
SDK and shall JavaScript files to your
implementation directory now we can
start coding create the file order
number J s which is where you'll put the
code for the custom component the
metadata function is called when a get
request comes in the bot UI needs this
information at design time the invoke
function is called whenever a post to
the component name endpoint comes in
normally this is where you'd make calls
out to your inventory system or other
services to get the order number and
availability and but for now we'll just
return a random number we'll also do
some trickery to allow for testing of
the dialog flow we'll set the next state
depending on the value of the prefix in
the bots dialog flow you'll see how that
works later when we modify the dialogue
flow a next add order number to the
registry by opening registry j s and
adding order number to the list of
components you'll see shortly why it's
needed and how it fits into the overall
system one of the files that came with
the scaffold is t-shirt order-taker J s
it has the code that handles the
processing of the get and post endpoints
right now it has boilerplate so we'll
make it a bit more useful replace the
boilerplate with the following code we
need to import shell dot J s because we
hand off the get and post request to it
before we continue let's take a look at
shell J s it imports the registry and
it's get all component metadata function
uses the registry to find all the custom
components retrieve their metadata and
respond to the get request that's sent
by the bot UI at design time the last
file to modify is package JSON open it
up and add a dependency for joy which is
a library that the SDK uses to validate
the body of the post request that the
bot supplies to your custom component
with that done open a command window
change to the directory that contains
your code and run NPM install this
resolves the joy dependency
zip up the t-shirt order-taker folder
the zip file is the implementation
package that you upload in the next step
go back to imce and open the t-shirt
order-taker
api click implementation and then upload
the package after the package is
finished uploading the backend is ready
to take calls from the bots and pass
them to the api now go to the bots UI to
add the custom component to the bot
click the components icon then use
service use t-shirts for the name and
select use anonymous access paste in the
backend ID and anonymous key that you
copied earlier from the backend settings
page also paste in the metadata URL that
you copied when creating the api and add
slash components to the URL when you
click create the bots UI issues a get
request to the components endpoint in
your api which returns the properties
and supported actions information now
it's time to update your bots dialogue
flow definition to incorporate the order
number component in the context section
and the order number variable of type
string and next add the states that will
handle the order number process the bot
needs to display a message that the
order is being processed and set an
initial value for the order number
variable remember the trickery and order
number yes well here's where it's used
if the prefix in get order number is TS
the API returns in stock however if the
prefix is anything but TS the API
returns back order this allows you to
test the dialogue flow to make sure it
works as expected and that's it test the
bot with the prefix TS and some other
prefix TS one for example
you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>