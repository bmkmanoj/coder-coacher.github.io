<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>JDBC Community Discussion | Coder Coacher - Coaching Coders</title><meta content="JDBC Community Discussion - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Learning-Library/">Oracle Learning Library</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>JDBC Community Discussion</b></h2><h5 class="post__date">2013-02-04</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/T-lAj3SoIo8" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">alright good afternoon everyone my name
is Lance Anderson this is Mark Matthews
and this is Douglas server that was the
marketer members of the jdbc expert
group and I'm the specification lead for
that and for the rosettes spec so what
we're going to do today is it's a little
bit give you a little bit of overview of
what we're thinking about the JDBC 42
which is going to be part of java SE 8
which would be a small release and then
we'll kind of just open up a little bit
to questions and things and feedback and
things you'd like to see in jdbc
so one of the things that were we're
going to be adding the jdbc is a generic
setter method generic setter and update
method based off of get object so that
as new data types have to get added to
JDBC that we're not constantly having to
extend the energy interfaces for all of
a prepared statement callable statements
and was all set so what we're going to
be doing in order to make this easy for
us is we're adding a new method in this
release to set object which is going to
look similar to all the other set object
methods that we have except the data
type is going to be an interface called
sequel type so any for example this
would allow you or any DBC vendor to
create their own types and if you had
your drivers or wrappers around your
drivers will be able to process process
that data type in however you chose to
from the JBC perspective what we're
doing is we're adding a new enum which
is going to implement sequel type called
JDBC types so basically you would have
there if you lookin types that jabba you
have all the currently supported data
types we have today integer VAR char
char etc and they'll all be part of this
enum and instead of having to pass the
integer values in you'll just use this
this this enum type now the advantage on
this is it's one of the problems we've
had today with the jdbc drivers is some
of the vendors have had to add their own
data types in to support their own
databases and the Oracle has some
postgres has some some additional data
types I believe db2 does and
occasionally we've run into collisions
with the the numbering scheme there
amongst the vendors in some cases the
numbers they chose happen to collide
with some of the numbers we had we hope
to use for new data types as they were
attitude to JDBC proper fact we kind of
ran into that
jdbc 40 and we had a couple last-minute
changes to just a couple of the value
types so we didn't run into some
problems with Oracle remember that that
was so what this will again the nice
thing about this is that the the ordinal
value in from jdbc types will match up
today with the values that is in type
stud Java today so don't kind of how you
to have a little bit of a seamless
migration path for your apps and for the
driver vendors when they go to actually
implement this new this new method on
these on the on the interfaces now one
of the things we're thinking about doing
as part of this and this was kind of
proposal that was came up with and we
saw to talk a little bit further about
this in the expert group is to add a
value of method to these new types you
want to talk about the Headless yeah
generic gather so how many of you are
familiar with the generic Jenner method
in jdk 7 anyone no one in here it is
used JD case jvc and jdk 7 not yet ok
well it's partly my fault because we
haven't released jdk 7 more private
again I apologize to 12 anyway in jdk 7
Java JDBC 41 there is a generic get
object method that takes a class as an
argument that get object method will
return an instance of that class so if
you have instead of saying get string 3
you will say get object three string
class and as functionally identical tis
calling get string so that is the
extension for supporting arbitrary
future types for example in jdk 8 there
will be a new day time api that will
introduce a number of new daytime
classes one of which is going to be
local date so instead of having to add
get local date the generic get object
method which is what we're going to be
encouraging everyone to use all the get
XXX methods are basically you know no
longer best practice so you'll write get
object three local date class and that's
the equivalent of the non-existent but
conceptual method get local date does
that make sense I'm seeing a few nodded
heads so that's the get object side oh
that exists that's in jdbc 41 in jdk 7
not in Oracle's drivers yet sorry so the
generic center that Lance was referring
to is the other side of that we didn't
get that in 241 so but in 42 we need
some way to set a local date so we need
some way to say instead of set string
and set set in set big big integer or
bigdecimal we need a generic setter now
the interesting thing about setters is
you don't want to set a Java type you
know the Java type because you've got
the argument you want to set the sequel
type you want to say what the type is
when you push it to the database so the
additional argument to the generic
setter is a sequel type so if you say
set object 3 a string a number sequel
type number that means convert this
string to a number and send it to the
database now the conversion may happen
on the client it may happen on the
database but the point is you're trying
to get a number out of that string value
so set object is going is the generic
set object is going the other direction
and again to support the new local date
type that's going to be in jdk 8 you
would say said object 3 my local date
and then time stamp waste time zone
again does this make sense yes
it's it's vendor driver dependent yes
and I'm sure you know the vendors may or
may not specify and in some sense you
don't care well it shouldn't make any
minute I mean it should you if you if
you can tell if it matters to you it
should be documented how's that if it's
if it it may not matter it may be it may
vary from situation to situation even
within the same for the same right now
okay so that's the generic setter now
let's back up to the generic get object
one of the things that that I have
proposed for 42 is an extension to the
generic get object method that accepts
not just well understood classes you
can't go kit in jdk 7 jdbc 41 you can't
go off and create a class you know it's
my strange and unique class and then say
get object 3 my strange and unique class
class that's not going to work okay I
mean the driver doesn't know what to do
with your class so it's it has to be
basically one of the types in table be
three of the jdbc spec which you don't
care but it's just a list of types that
jdbc understands so what I have proposed
for 42 is to use the value of idiom if
you look at most of the jdbc core types
they have static value of methods take a
single argument so integer value alt
strip and takes a string argument and
that will construct an integer from that
strength so what I have proposed is that
if you pass in a class object that has a
public static value of method with one
argument and the type of that argument
is one of the be three types then the
driver will convert to that b3 type and
pass that converted value to your to the
value of our
it so you have my strange and unique
class and you say get object 3 my
strange and unique class class the
driver will look cat use reflection look
at the class say yes it has a public
static value of method with one argument
in fact it has to let's say and one of
them takes a string as an argument and
the other one takes a number now the
spec says my proposed spec says the
driver picks one it's unspecified how it
picks one and it attempts to convert the
value it has to that so it tries to
convert it to a string and then calls
value of string and you get back my
strange and you need an instance of my
strange and unique class so this is your
way to take data base values and get
them into your domain specific classes
does this make sense is this useful yes
it's not a constructor it's a static
method value factory method it's a
factory method no it's a static factory
method so i can i can type in java you
know standard java capital I
integer.valueof and pass in a string so
that's a static value of method so what
I'm saying is if you when you can create
my strange class if you have a static
value of method that takes one argument
and that argument is one of the list of
types that jdbc drivers can convert to
then it will use reflection to find that
method and then convert whatever came
from the database to the appropriate
type and call the value of method via
reflection the value of those whatever
it does and if the value of you know
throws an exception that's your problem
but the driver will at least call it and
if it if it does return oh yes the other
requirement on the value of course is it
has to return an instance of that class
sorry i forgot that but that is also a
requirement so you need a public static
value of method with one argument that
argument is of a b3 type and it returns
an instance of the class
it could because I might want a
domain-specific type for example
currency that's a real common one so
that I have especially if I'm using
advanced data types I might have a named
type that is currency it may only have
one field but it comes back as a name
type which means a struct and I say
value of and it passes in that struct
which is a map which has one field and
it returns your domain type currency
rather than Java sequel struct which is
not very useful and it doesn't there's
no performance benefit you know it's
still doing the double conversion from
the database representation to a struct
and then from a struct into your type so
it's not about performance but it
certainly simplifies the writing of the
code for you to say currency x equals
result set get object 30 currency class
I mean that's pretty readable as opposed
to you know currency x equals new
currency resultset get object struct and
again this isn't something you mean this
we need to use in a day-to-day right but
this is there will be certain cases
where you might have niche needs as I
listen describing or something like this
may come in handy so what we're trying
to do is give you another quilt another
arrow in your quill to give you may keep
make it a little bit more productive out
there without having to jump through
some hoops and take advantage of some
infrastructure to be able to do that so
here's the question how many of you can
envision using this so about half the
other half word all right now how many
of you can't envision using it you just
don't see it happening one and the rest
of you have no opinion okay how many of
you need to see a more concrete example
where you can make that determination
whether it's useful we're not new
environments
right
but remember whether your arms have to
do what what rm7 top of jdbc right so
there could be ways where you know a
handshake in between the two can become
easier or you know you look at things
like Mike's talk about converters in
there you know so to be ways that these
could fit nicely into the java
persistence model for adding some
additional functionality as well and all
your custom type converters like in
hibernate can be really cleaned up right
and a lot of people don't use our embers
yeah
of
it's very
I mean another common one for us with
GIS types yeah there is no there is no
standard and jdbc for it and there isn't
really one in Java there's competing
ones so you may write go back and forth
between those in a clean way yep exactly
so I kind of gives you a little bit of a
taste thanks that was one we were trying
to do with that again we still have to
have a little bit more of a discussion
on them and that's one of the things
that's on our whisk to try to flush out
before we go before we wrap up so
Douglas was talking about jsr 310
support junius aw is anybody not know
what jsr 310 is ok so one of the one of
the big complaints with java SE is the
lack of quality of date time and because
that's that's a pretty complex topic i
mean to most of us in the states it's
pretty basic but there's a lot of
nuances that go into to being able to
really properly deal with dat arithmetic
especially started getting into some
different locales so java.util.date of
course was the first generation and that
had its weaknesses and then we came with
calendars system which came out jobs too
and that's been had a lot of problems
including lot of performance problems
Yoda was next and that was something
that came through out of the Apache I
think right and jsr 310 is an offshoot
from you Akane cleaning up some of the
things that they found there that they
thought they could have done better and
build upon some of the learning lessons
they had with that to try to standardize
in a more effective way for java a
better day time system so one of the
challenges we've had with jdbc is
there's a lot of sequel data types that
we don't actually support well for
example date with x
right a constant with time zone without
times and we have a date we have time
but that's all we have and what we don't
want to do on the jdbc side is reinvent
the wheel right I mean date states at
times aren't our domain of expertise
we're kind of we're kind of the sexy
plumbing guess you go jdbc sexy night
that's a joke so the goal was really to
wet like jsr 310 handle the data types
and then we just support those types
within jdbc so what we didn't want to do
because of that was to follow the same
model that we had going back to jdbc one
where every every data type was a new
method on the interfaces so that's why
on the previous slide and jdbc 41 we
started adding and refining the generic
setter getters and update methods so
that we can take actual objects and on
half the each time we need to chart a
new a new data type or at it we're not
having to muck with the interfaces as
much so when JD beats when jsr 310 comes
out we'll be able to support the
following data types using the jsr 310
data types which you see on the
left-hand side their local date local
time local dane time offset time offset
date time simply by adding the new
methods and then updating types of java
for for the old code in adding these to
the enums to have these types and then
the drivers will be
handle a pretty easily there's actually
two more there's interval your your day
or your month and interval day second
that will be supported by a java time I
so period okay so maybe this one fun and
flush them out well that's the current
name is is ISO period that could change
because everyone thinks it so that would
you ever see who will support the were
missing yes the sequel cool so I season
awesome positive time I think that means
time zone yes for the Oracle time zone
beat it okay that's that's take off my
expert group at put on my Oracle jdbc
hat ah that's an R of a proprietary type
that's not part of an c sequel so it
doesn't go into the jdbc the you know
the standard SCE jdbc spec or propriety
colorful right no time at me know the
time stamp with time zone isn't
according to NC sequel timestamp what
time zone is an offset there is no no no
talent no named time zone in NC sequel
ok now Oracle supports a proprietary
extension of named time zones ok so the
Oracle jdbc driver in order to fully
support the database will support get
object three what is it zone daytime
class where's own daytime is the name of
the of the times daytime class that uses
a named time zone but that's not part of
the jdbc spec because as an Oracle
proprietary extension switching my hat
back but what we
but the nice thing about it is because
we really tried to try to push these
standardized generic methods and we're
making it easier to use it's going to
get easier for say just say acne type
now becomes something standard or more
vendors pick it up then we can look to
add it as an official type with him
within JDBC so we end up showing up in
JDBC types of java in the code would be
a little bit more consistent the nice
thing about when using the sequel type
is there could be multiple vendors that
were supporting the same type it could
be an Oracle type that unique all's a
wysiwyg datetime type right in mark
might be able to support that in some
fashion when he sees that in mysql
because the enum has but a bunch of
standard methods you can call to see
what the vendor is or what you're
actually trying to do with it so again
just you know we have some more
flexibility of what we can do which we
didn't have before by just using the
integer type okay ref cursor we're
adding before to finally standardizing
support for ref cursor which really
became apparent to me that we needed to
do with working with Linda d mikkel on
flushing out this store procedures
support for JP a 2-1 so what we'll be
doing is the will specify ref cursor is
via register output parameter method on
probable statements and it's going to
return you to read only forward results
so your code in this example I'm still
using types the old types that Java
Python get you can also use JDBC types
be the same type of thing you'll create
just to a procedure register your output
parameter using the ref cursor execute
your query then use the generic get
object to get back a result set and then
you can traverse through the
so at that point in time okay okay this
is a totally ansi standard but there's
three or four database funders that
support this and they all have kind of
slightly different ways of how you
actually get to the result sets and we
just want to make sure we have a
standard way for one stop codon we're
also as part of 42 we're going to be
cleaning up the required data source
properties for java ee environment and
that's merely as simple as in the JDBC
spec there's a section that talks about
requirements for Java EE and we're going
to be spelling out that with the minimal
set of driver properties for data source
that must be supported in a Java EE
environment makes a little bit easier
for some of the the admin tools and
gooey goo ease for things like I used to
give you one with a standard front end
in addition to all you to set set
proprietary properties we're looking to
add as a set escape processing property
on at the connection level so you can
turn it on or off or suggest that the
statement level as it is today also
talking about adding some form of strict
JDBC compliance property so when that
set it's almost like a fixed flagger and
will tell you hey this is until we want
fully standard JDBC compliance here so
these methods are going to act identical
to the specification which what that
does is that allows in some cases for
vendors to fix long outstanding bugs to
get in sync with some of the
clarifications that we've tried to make
with spec
in database metadata we're going to add
support for sequel type to some of the
existing methods so for example there's
a database metadata method call it
supports converts which will tell you if
this data type can convert from data
type int data type be that currently
just works on values and types of java
will overload that the support sequel
type there are some other methods i get
columns that returns you a data type and
we're going to we're going to work to
support the JDBC types they are not just
the integer type that's coming back from
as it is today looking to add enhance
get info index info so that it can
support cardinality pages whose type is
long today we kind of we hit a we hit a
max window for certain dated for seven
tables so we're trying to clean that up
also going to be adding a method to to
return back the logical maximum size for
a la bonne for that given database or
what it actually is set to for that
given database looking to do a fair
amount of spec clarification there's a
lot of JDBC was one of the really old
original specs and as Mark and Douglas
can contest there's a lot of places
where it didn't say a whole hell of a
lot and it was left to a lot of
interpretation so as we've been going
forward we're trying to clear things up
you know since simple things is you know
what happens if you if the URL is no
when you call driver manager you know
what's supposed to happen in those types
of cases as an example new one say some
Devils yeah so what he means is the
vendor is made up a lot of stuff and we
didn't all make up the same stuff yeah
there you go we've had some fun meetings
discussing some of this stuff
let's sit there and scratch your head
you did what you want me to unwind what
exact okay yeah yeah I'm going to send
my bugs to you is the general yes I
think I've heard you say that once or
twice to me oh one of the things I'm
hoping to do to try to make this easier
for the people that are migrating to
jdbc 42 from a driver perspective is
lambda scan allow us to create some
default implementations for on
interfaces so most of these methods that
we're adding will probably have a
default method on there which will throw
a sequel exception if the if the method
that hasn't been implemented yet so in
most cases today that the spec if it's
optional functionality it's allowed to
throw a sequel feature not supported
exception I just have to figure out what
the exception is going to be for four
methods that must be implemented it
might just be a straight sequel
exception or or yet implemented
exception so that that gets flagged
differently the compliance tests but one
of the challenges we've always had with
jdbc is there's no easy way and you'll
see it with jpa too but JP does have
quite the same number of drivers out
there where the migration path can be
long and we want to make it a little bit
more seamless for people to upgrate
update their drivers and still compiling
older versions
the code so that's kind of a rundown of
what we're looking at for 42 42 again is
meant to be pretty much small release
because we haven't had a whole lot of
time for variety reasons due to the java
SE 8 schedule is changing a little bit
so on that i like to open it up to you
folks if you have questions for any of
us input on things you'd like to see in
jdbc your things you don't like in j to
be sitting or whatever yes sir
to do lunch are you wanting to get this
truck query string from a prepared
statement do you mean just this query
string itself or something more
digestible the very streaming south even
possible see how the parameters on the
AP aqua
no there's no way to do it some vendors
implemented for two string I know we do
but some others the way they bind
parameters in they can't tell you what
it's going to be no I mean the specific
oracle DB to mysql the JDBC driver
vendors the way the protocol works some
of us can give you something like we do
it be a two-string printed to string on
a minus 12 prepared statement you'll see
what would get sent to the database but
others others can't I mean it's not that
they you know does just at camp and in
some cases on some of that we'd have to
think if even we were able to do that we
have to think a little bit carefully
about how we would secure that because
if if anybody could just go and grab a
prepared statement query it could give
you a little bit of keys to stand East
or in some cases so we wouldn't want to
do anything that could necessarily cause
more harm than good I mean I can see the
need for things like that but we also
kind of have to figure out how we would
protect it a little bit as well
side so we need
d gamma square
but a runtime on the job
yeah no no I just understand the need
there's just you know for especially for
precompile things it gets a little
challenging there I mean there are other
tools you can use to get to that
depending whether your vendor supports
it and how it shows up in the back end
like the set client info you could set
specific things in different parts of
your code so that your dbas can see that
query came in this is where it came from
yes sir question for Douglas up as a
gent email exchange almost two years ago
now about how to an unchecked method on
seating time that would signify that
percent object you didn't want the
terminal conversion and Kirk just want
like four vibrator example set up on the
vibrator this is mainly inevitable in
the character growth set things right we
already know the data in the proper
character set you just want to show shut
about the student of the database and
let the database decide whether it's
going to take it and not too many
conversions right because that would be
really useful for us because we're doing
moving game back and corporate
containers so I wondered that went
anywhere so that your
yes I remember that no it didn't go
anywhere I'm sorry but that's that's
best vertical propriÃ©taire that we have
been based on our conversation Oracle
proprietary and know it we we did not do
it and it's act actually I know where
that email exchange is in my email files
okay it just didn't happen I'm sorry so
happy whoa oh yeah that's a long time no
I wouldn't say that um I wanted projects
tension I'd like to see the parking
right well I think what you what is I
recall what we were really talking about
more was bulk loading to an extent yes
so that's definitely on the spec to-do
list to do bulk loading it you know it's
I don't think that's going to happen in
42 is not yet Stefan I can happen for
two is you know what we've talked about
in is having some form of generic bulk
load facility within jdbc we did a
direct has one today that they've kind
of they've kind of crafting a little bit
you know we've had I had a lot of
conversations we all have with Jesse
when they were first going down that
path because it's you know it's it's it
seems like a simple problem up front but
there's a lot of challenges when you go
to implement it you know because if
you're not just dealing with one vendor
you're dealing with a whole smorgasbord
so to really be able to fine-tune it so
it's optimized you know it's it's it's a
live iterative process so it's
definitely something that we're looking
it at doing it just hasn't risen to to
the top of the list yet based on you
know in some cases its resources and
priorities of other things that are that
are jumping and jumping in the way but
we haven't forgot about it and again
putting on my oracle hat that is
something that that is for the Oracle
product we think is really important is
doing bulk loading but and I've got a
fair amount of pressure to do that but
I'm resisting that pressure because
I don't want to invent another Oracle
proprietary API the child will then
deprecated because I know that it's on
the to-do list for the spec and so far
no one has compelled me yet in a way
that says we have to do something now
for oracle regardless of what the smack
does yeah and I think for things like
that is I mean between you know the Java
DB the MySQL the Oracle databases of
some of the other databases of ripple
houses we want to look at we want to
look at these things and make sure that
what we're doing is how we're designing
is is isn't just going to work for for
the Oracle database that's going for
mysql it's going to work for Derby you
know for sybase and be be effective so
it's not something you can just do quick
and dirty about giving it some thought
that's what i want to so don't don't do
it to get the right that's definitely
not just work well we like the fact for
Melissa do some of these things like
sent character sets fire
we like to see anymore yeah I mean in
this in the short term you know what you
and what I would suggest is maybe taking
working with DataDirect has the offering
kick its tires and see well but I guess
what I'm saying is if you try it and see
what see what it is because again worth
of work we have a graphical point yet
we're actually starting to design the
API but if there are things that you
find there from looking at that you can
talk to Brody Brody's birdies in the
front there you know what you see
doesn't work in that implementation or
what what would make it more effective
and efficient for you you know it's then
it gives us some idea something you got
street on the feet that they've kind of
tried it and it will improve on on what
they've done to make it more generic and
you know in word from what they've done
and you know they've taken feedback as
they were developing it from all of us
for some input we just haven't gone to
the point yet where we're taking to the
next step in making it in a part of the
quarter release other questions yes sir
around
give the parameters and create another
one responding really well it you would
think it's easy but it's not necessarily
it's not necessarily that easy to
implement depending on all the databases
because you have to because depending on
what the database supports for the
protocol the driver may actually have to
do the parsing and you know that that
could get a little bit heavy right I
mean in here right so I mean that's
we've actually had those discussions and
you know if you look at if you look at
you know yeah JP ajp does do that they
handle that parsing up at their lair but
that's a way level of abstraction above
jdbc so again you think you're jdbc is
really being your fast conduit so if we
start having to do even more parsing and
that's one of the reasons why we're
looking at being able to flip off the
escape level processing at the
connection level versus just on a per
statement level to make that a little
bit more efficient
no no oh no a lot of times you're still
got to make up I mean he stops around
for a trip and depending on the protocol
on the wire but again you still have
this query if I put in you know a chris
that's understand right but that song
has to be parsed understand but me yes
boolean okay Oracle supports that is an
Oracle proprietary extension we support
it is but it's totally client-side
because the protocol that we talk to the
database is by position there is no
named there is no name two parameters if
you familiar with OC I the sea protocol
it looks like it has named parameters it
doesn't they're positional that's how it
goes to the database so that both the OC
IC library and the JDBC driver have to
parse the sequel string in order to find
those name parameters and then turn your
name bindings into positional bindings
so if you say you know update table
values equals you know colon Bob colon
Bob colon Bob colon bob cole and Bob and
then you say set in by name which is the
Oracle proprietary extension Bob equals
three then we send 35 times there is no
savings on the network because it's
positional and you said Bob three times
you only had to call set once but
because the protocol is positional we
send those values three times and if the
value you said is a you know a huge
string because it's long it's expensive
we send it five times so and you know it
I understand the probe the code
maintenance value there's no question I
understand it but the cost to the driver
is pretty substantial and we've had this
discussion about you know the parsing on
the client side the driver reverse
is what the server is actually support
and there's some some database vendors
so you know for and I understand the
reasons they just don't want to
implement that because they don't want
to take the performance it because the
first thing that's going to happen is
you know an application programmer is
going to call that tech support saying
hey this thing is a snail fix it and
they're going to say I can't fix it well
well why do I have this feature so well
you asked for it but there's you know
it's that chicken and the egg in that
case right unless the the lower level
protocol I'm going to the database
changes in the backend can actually
support that there's only so much the
driver can do it be efficient may I
think we all wish we had that and you
know but it's just not one of those
things that we can do easily and be be
performing at this lower level the
Oracle driver has it and I tell people
don't use it I mean I know how its
implemented don't use it the market sure
you've had requests for that too that
because people use it in hibernate and
they're like why isn't it in jdbc know
and same thing I can't actually really
give you you know my scroll can't give
you prepared statement metadata for
parameters we have to fake it up because
server just doesn't give it or if it
does give it to you it's all lies anyway
this was all the wrong types and so so
again it's not until kids it's not the
lack of wanting to do some of this it's
you know you've got the client side
which is kind of where we're at but you
also have to get the server side folks
to feel this as a priority that they can
change their protocol to be able to make
some of this some of this work more
effectively because otherwise it's just
you know you're going to be frustrated
with us in some cases consistency
because we'll do it out at the client
side then somebody that's great I use it
all the time and I want to use it in my
store procedure right database doesn't
support it internally then again you
know when you get up to the ORM level
you know you can
little bit more way of abstraction surf
a little bit more of a performance that
you can kind of somewhat justify it more
than came down to driver level no it's
it's actually to the protocol and the
National vendors to but well be kind of
two part but if I don't SQL does not
specify parameterised sequel like we do
prepared statements that's not in if
they changed it right that was as well
yeah if you but that but that's not just
a change to the standard does it that's
a huge scope change and then you know
just to take that one step further is
even if it makes the sequel standard
there's a lot of databases that are
barely sequel 92 entry level compliant
you know what I mean there's mean they
kind of pick and choose what what they
want so it's I mean I again it's it's
worth you know if you have ways to
communicate with that to ask them to
consider it but then it's a matter of
pushing it through your user groups to
try to get the databases you work with
to try to find some fun some form of
importance on that but thank you for the
feedback other questions comments yes
sir
how long's taping
sequel but I mean system that get nanos
I mean you could wrap a time around it
yourself there's nothing the spec that
well yeah both now I mean there's yeah
there's really nothing and probably
would probably want to do that more than
network level anyways look at it at that
because that's going to be your biggest
time sink would be down you're creating
creating a socket artifact know creating
the socket is cheap compared to doing
authentication well yeah I guess depends
on where we were I want to report it
yeah but in that case you'd have to do a
mark shed and you kind of write your own
little timer method it just try now that
being said you know to flip your
question around are you asking what it
be possible in some future version of
jdbc to have a standardized set of
performance metrics as an API possible
uh fuel you know lobby your vendor and
see I mean it's kind of an interest of
mine I mean our driver has some of that
stuff internally and will log it if you
turn the right things on but it's in no
way standardized
I have
it is so I'd like to know
time out before I get anywhere close
then we can we can add that to our wish
list yes sir
three
so the question is is you have any best
practices for how to how to maximize
your performance with with your jdbc
drivers I get paraphrase so to go back
to private prior discussion use numeric
arguments where applicable wherever you
can yes is one thing so anything that
could take a string or a number for
positional argument or something use the
number because there's a lot of metadata
has to move around to get parsed to make
the nice string of five versions of get
yeah it's good object caller get value
get xxx column name don't use that said
xxx call our parameter name for stored
procedure calls for callable statements
don't use that those are all heavyweight
operations a way to think of it and
again I'm trying to keep my jdbc expert
group hat on as opposed to falling into
oracle specific stuff but a way to think
of it is the JDBC spec does not define
an abstract database it you can't write
code just to the JDBC spec I mean Jake
it's not it doesn't tell you enough it
doesn't tell you what a sequel string
does for example I mean if you you can
sort of guess if you really know the
ANSI sequel spec really well but even
then that's not enough you can't write a
whole lot a real world application was
just antsy sequel so what you need to do
is write the most bog standard stuff you
can that is clearly accessing database
features of your underlying vendor
database so right standard jdbc that
uses the vendor database so if your
vendor database for example supports
scrollable cursors which db2 does then
right standard jdbc that use the
scrollable result sets and can scroll
through your your cursors now if your
vendor doesn't support scrollable
cursors which Oracle doesn't then don't
write scrollable cursors so the basic
thing is think about what your vendor
database is doing
and then write as much as possible jdbc
standard code to make maximum use of the
database features that are exposed and
that's probably going to that's as far
as I would go in a you know a
vendor-neutral way about how to maximize
performance would you say that's yeah
I'd say that I'd say know your type
system pretty well know what ya dealing
with don't do unnecessary conversion
some of those are also very expensive
yeah again it its knowledge of the
backend database is really critical
because the driver a lot of a lot of the
drivers try to hide what's going on to
the backend database and they try to
make that look like it has all these
features that's almost invariably really
expensive I mean to throw us on to throw
the driver vendors under the bus we
perform best when we're treated like
we're dumb yes that's basically the
simplest way to put it we've got a
couple more yes yes sir
Kevin
explore yourself mentally
type of gowns names get your name
whether if I want to know that of each
car is that I have results alien results
at medidata will give that to you so
once you have your results that you have
the metadata from the results yeah now
again some you know depending on the
database some of that information may be
more accurate than others but are more
expensive well there's that too but but
that's but that's certainly how you
would do that is using results at
metadata in that case sir available
results as versus single statements is
there a generic was always asked
it's really the database I mean like to
get back to to Douglases comment you
know if you're using something that
supports rollable cursors updateable
result sets could probably be blindingly
fast because of the cursors position
they're right back out it goes out there
for me for MySQL we have to figure out
what you do in craft a sequel statement
make it look like a cursor so you get
back and fake it fake it til we make it
yep no saint since the Oracle database
doesn't support scrollable cursors we
don't support updateable result sets the
driver fakes it and so first of all if
you're going to create an updatable
result set that means we have to stick a
row ID into your query we have to go and
parse your query and rewrite it thank
you very much and stick a road ID in
there and this totally sucks because
there are a lot of really obvious
queries that don't work like select star
from him it doesn't work because you
can't add you can't say select row ID
come a start brakes so you know there's
a lot of things that go on to support
updateable result sets that you won't
like so don't do it which included
calling all those methods we told you
not to get all those United yes have to
do that too yeah yeah the other thing to
think sometimes gets lost when people
were using jdbc is processing your
result sets too is you see what there's
a ton of apps out there that are
constantly building strings or they use
string string buffer but they're so so
small when the buffers are using so
you've got a lot of memory being
reallocated for for the wrong reasons so
what you can also think about the
optimization there's your processing
your results I think another one that
actually ran into this with three
customers over the weekend in our
conference if you're porting legacy apps
this has been very common from apps that
have survived since the days of the HSM
type databases that databases that
support scrollable cursors people poured
it into them and they'll have these look
up swear it will select basically the
entire table and look for the first
three rows and then stop when it finds
what it needs that doesn't work very
well most jdbc drivers I still get
support
calls out in bugs no this isn't fence
well of course not you had me sucked
down the entire resultset looking for
something so much time anyway one last
question
the value of is just for the getters now
this the the corresponding setter
concept would be to use the 2xxx
paradigm like because you see two string
is the canonical example but there's
also a lot of things like to integer to
whatever or as as is another idiom that
you see for converting an object of one
type to another we haven't discussed
using that um as yet so
we'd have to know which columns because
right right you know I can see how to
extend the concepts to a multi argument
how you can use their varargs where the
last bar arc is the indices of the
columns will use or subjects so you'd
say get XXX class name and then we'll
number 104 7 and nine so that would work
but notice that's certainly not gonna be
in for to AVI thank you yes thank you
everybody a few times we appreciate it</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>