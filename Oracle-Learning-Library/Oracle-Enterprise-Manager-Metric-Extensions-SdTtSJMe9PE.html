<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Oracle Enterprise Manager: Metric Extensions | Coder Coacher - Coaching Coders</title><meta content="Oracle Enterprise Manager: Metric Extensions - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Learning-Library/">Oracle Learning Library</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Oracle Enterprise Manager: Metric Extensions</b></h2><h5 class="post__date">2016-12-02</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/SdTtSJMe9PE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">welcome to the Oracle Enterprise Manager
video training series my name is
karellen lui and I'm a principal product
manager for Enterprise Manager this is a
video recording of enterprise managers
metric extensions overview Enterprise
Manager is Oracle's integrated IT
operations management product line by
engineering management capabilities
together with the underlying technology
being managed Oracle is able to deliver
efficiency gains there are unprecedented
in the IT industry the Enterprise
Manager there are three main pillars
which make up the core features of the
product the first pillar on the left is
monitoring the second pillar in the
middle is cloud and on-premise tech
management in the third pillar on the
right is lifecycle management in am 13c
we built on top of the 12c foundation
and enhanced each of the pillars in the
first pillar we've introduced a new
always-on monitoring which allows
continuous monitoring of targets even
when Enterprise Manager is down in the
second pillar we've introduced a new
infrastructure management feature which
brings together the software and
hardware management capabilities of iam
to provide you with a single pane of
glass in the third pillar we've made
enhancements to the lifecycle management
of your on-premise hybrid and cloud
environments together these three
pillars provide a single solution to
manage all of your IT assets whether it
be on premise hybrid or in the cloud our
program agenda is as follows we will
cover metric extensions and also talk
about repository side metric extensions
following that we will cover the new
metric extension features released in AM
13c we will review some use cases for
metric extensions and then have a short
demo to cover what can be done after a
metric extension is published and
deployed to a target many of our
customers who have used oder
e/m releases such as 10g and 11g are
using user
Metrix user-defined metric is the first
generation of custom self defined
metrics which extends enterprise
managers monitoring capability it is
available in iam 10g and 11g but has
some limitations for example user define
metrics only collects point values
through execution of OS scripts and
sequel scripts if the OS or sequel
script requires dependent files the user
needs to manually transfer these files
to the targets filesystem user-defined
metrics using OS scripts cannot model
child objects of servers by returning
multiple rows from a metric due to this
multiple pieces of data must be
collected by creating multiple user
defined metrics
finally the biggest limitation is that
user defined metrics only supports host
and database target types to overcome
these limitations in iam 12c we
introduced metric extensions as the next
generation of user defined metrics
metric extensions are full-fledged
metrics similar to EMS out-of-the-box
metrics they are handled in the same way
as a metric provided by Enterprise
Manager in addition metric extensions
are exposed in all monitoring features
which means you can see them in the all
metrics page and view historical graphs
and reports for them metric extensions
allow you to extend your monitoring
scope because you can create your own
metrics to suit your needs with the new
metrics defined you can set up warning
and critical thresholds to be alerted on
and take advantage of EMS out-of-the-box
capabilities such as historical trending
and reporting unlike user-defined
metrics metric extensions can be built
for all target types after selecting a
target type there is one or more
adapters available to build a metric
extension examples of these adapters are
OS command where a shell script is run
at the OS level if the target type is a
database we have a sequel adapter that
can run PL sequel scripts on the
database we also have adapters for SNMP
and
IMX to support management information
base files and middleware servers metric
extensions has a full life cycle support
there are three phases involved first
you develop your metric extension then
you test it and then you deploy it the
nice thing about metric extensions is
that you can export and import them that
means you can create at once and import
it into other e/m instances there are
many use cases and examples that you can
find on my Oracle support for metric
extensions if you search for Enterprise
Manager metric extension on the internet
you will find many examples there also
we will cover some of these use cases at
the end of this video
in summary you are free to create your
own metric and define alerting
thresholds for notification purposes
there are a couple of tutorials
available online to walk you through the
metric extension creation and deployment
process these videos are extremely
helpful and walk you through the
creation and deployment process step by
step please reveal the videos if you are
not familiar with metric extensions user
defined metrics that exist in oder am
releases will still be available after
upgrading to enterprise manager 12c they
can be propagated to new targets in e/m
12c using monitoring templates however
starting with M 12c new user defined
metrics can no longer be created if you
are using user defined metrics we
strongly recommend that you convert them
to metric extensions in iam 12c there is
a set of command line interface verbs
available in IAM 12 and 13 C to help you
migrate your user-defined metrics to
metric extensions step-by-step
instructions and examples on how to do
this can be found in the converting user
defined metrics to metric extensions
chapter from the Enterprise Manager
administrators guide please note that
user defined metrics is not supported in
Ian's 13c and will no longer work in
Ian's 13 see the user defined metrics UI
is no longer available in 13 C we
strongly encourage all customers to
migrate user-defined metrics to metric
extensions in am 12c prior to upgrading
to 13 see in am 12 104 we introduced
repository site metric extensions this
type of metric extension allows you to
use sequel scripts to extract
information directly from the enterprise
manager repository and raise alerts for
the target against which the repository
site extension is run repository site
metrics allows you to send alerts based
on multiple metric alerts on the same
target or on different targets for
example you can use repository side
metric extensions to alert when both CPU
utilization and total percentage disk
available metrics have crossed the
threshold for critical state or you can
use repository side metric extensions to
calculate average tablespace usage per
minute or alert when someone locks into
e/m ask the system and user repositories
and metrics allows you to monitor your
infrastructure with greater flexibility
starting with am flirting c you can now
calculate a metric column based on the
value from another metric column this
new feature is called compute
expressions with compute expressions you
can do arithmetic operations between
columns in the same metric extension an
example of this is you want to get the
percentage free space to give this value
first we use a script to get to use this
space in total disk space then we get
the free disk space by subtracting total
disk space from used disk space
finally we divide free disk space by
total disk space and multiply that by a
hundred to get the percentage free space
this feature extends metric extensions
capabilities further by allowing users
to compute values within the metric
extension itself on this slide the left
hand side shows the operators available
for compute expressions
there are many operators available to
suit your needs
on the right hand side is a screenshot
of the space usage metric extension
while mission on the previous slide
notice the compute expression column
shows the calculations derived from
other available columns in the metric
extension another enhancement in Ian's
13c is there is a new advanced
properties for database metric
extensions in 13c you can now specify
the scope of the metric extension to be
at the database instance or container
level the new advanced properties option
will only appear if you are creating a
metric extension for a database instance
or cluster database target type when you
create the metric extension you can
specify what type of database the metric
extension can be deployed to a sample
use case for this feature is you want to
use a monitoring template to deploy a
metric extension only to rack instance
database but not to a single instance
database to achieve this you can select
rack instance only ask the instance
scope you can even further refine the
scope of the database target by
specifying the container database scope
to be cdb only or exclude cdb this
feature can also be used to instruct the
metric extension to be applied to a
group of databases based on its data
guard status the available option for
each property is listed to the left of
the screenshot please know that this
feature is only available starting with
iam 13:1 the first use case we will
review is a runaway query metric
extension a runaway query is a query
whose execution time is taking longer
than the time estimated by the optimizer
runaway queries can consume too much CPU
or other resources during its execution
it is critical to find and eliminate
these types of issues from the
application code to ensure good
application performance to achieve that
you can deploy a metric extension to
your database targets the metric
extension runs a sequel query on the
database target to find sequels that
consume too much CPU or takes too long
to execute the query only captures
equals there are either finish
or in a running State it is up to the
DPA to define the warning and critical
thresholds for this metric extension in
the example below the critical threshold
is 300 seconds as you can see alerts
were generated when one of the sequel
execution time reached 614 seconds at
this point the next step would be to
take the sequel ID generated from their
alert and investigate further into the
problem the second use case is a
pluggable database status metric
extension in a multi-tenant environment
when a pluggable database goes down the
open load is changed from readwrite to
mounted this metric extension runs a
sequel query on the container database
to get the status of the pluggable
database what a pluggable database goes
down this status changes to mounted the
metric extension will generate an alert
and report the pluggable database is
down on the cluster database in this
example there is a pluggable database
called test PDB which is down as you can
see this triggered an alert and the
administrator will be notified the third
use case is a batch job elapsed time
metric extension this use case was
provided by an Oracle product manager
for the Oracle utilities product he
created in metric extension to query a
custom view for the batch run tree the
metric extension gets the minimum
average and maximum elapsed time and
throughput of each batch job running on
the Oracle utilities application
framework as with any metric an alert is
generated when the defined thresholds
are crossed in this example an alert was
triggered for the f1 batch job as the
average elapsed time is unusually high
for the demo we will explore how to
navigate to the target home page from
the metric extensions page from the
target home page we will look at the
results of a metric extension which has
been deployed to that target following
that we will look at the features
available to modify the threshold
compare targets and compare keys to go
to the metric extensions page
click on enterprise monitoring and their
metric extensions metric extensions will
have a name prefixed with a dollar sign
so here we have a metric extension named
runaway sequel this metric extension is
published which means it has been tested
and is ready for use
as you can see the metric extension has
been deployed to one target to see the
list of deployed targets click on the
link in the deploy targets column let's
go ahead and click on the link for the
target now that we are in the target
homepage go to monitoring and then all
metrics in the all metrics page you will
see a list of all the metrics available
for the target in this case since this
is a container database you will see
metrics related to the database metric
extensions will have a yellow star icon
in front of the metric name for example
database version and runaway sequel or
both metric extension metrics whereas
the rest of the metrics are
out-of-the-box metrics available for the
target let's go ahead and expand the
runaway sequel metric here we will see a
list of columns available for the metric
extension to see detail information for
each of the columns simply highlighted
number of executions is a number column
which means you will see an average
value low value high value and last
known value columns for it current
severity alert triggered and last
collection timestamp our default data
available for all columns within the
metric extension another type of column
is a string column for the metric
extension for example sample user is a
string column in this case you will see
the last collected value column for it
it looks like we have a critical alert
for the total CPU time let's go ahead
and highlight that to get more
information as you can see there is a
critical alert for
two of the sequels that are running on
this target let's go ahead and highlight
one of them to get more details in the
bottom pane you will see more
information about the sequel for example
you have the sequel ID as well as the
last known value collection timestamp
average value and low high value on the
right hand side you will see the
thresholds defined for this metric as
well as the comparison operator
occurrences before alert in corrective
actions you can modify the thresholds by
clicking on the modify thresholds button
in the modify thresholds pop-up window
you can change the warning threshold in
critical threshold as well as
occurrences before alert and test the
new thresholds the threshold suggestion
chart is a visual diagram to show you if
your current historical data will
trigger a warning or a critical alert
you can choose how much historical data
you want to see by clicking on the day
week month or all links right now what
we are seeing is the past days data
let's go ahead and click on week to see
more as you can see right now we are
looking at the past weeks data if you
want to zoom in to a particular day's
data you can click on two hours or 15
minutes going back to the past day data
we can expand the slider bar in order to
pick and choose how much data we want to
see
here we've expanded a slider bar to show
the past three weeks worth of data in
addition there is also a color door icon
that you can click on to pick and choose
exactly what the start date start time
end date and end time is for the
threshold suggestion chart finally after
you have modify your thresholds to suit
your needs you can click on safe
thresholds in the new threshold will
take effect the compare Keys button will
allow you to compare the selected row of
data with other rows of data let's go
ahead and pick one to compare with
looking at the legend for the graph the
blue line is for sequel id starting with
a HPP and the green line is for sequel
id starting with c3h one please note
that the compare Keys button will only
be available for metric extensions of
which there is a key column to see the
metric value history for only to select
a row of sequel ID click on reset graph
the compare targets button is available
for all metrics containing numerical
data this feature is available for
out-of-the-box metrics in addition to
metric extensions the compare targets
feature will compare metric data
collected for the current target with
the metric data collected from other
targets to demo this feature we will
look at the database time center seconds
per second metric which is a standard
database metric that comes out of the
box with e/m let's click on compare
targets this will bring us to the select
targets pop-up where we can select one
or more targets to compare with we will
select the IVA three target to compare
similar to the compare key feature the
compare targets feature will display
metric data for the selected targets on
the same metric value history graph this
gives us a quick visual cue as to which
database is consuming more database time
as a standard functionality for all
graphs you can hover over any point in
the graph to see the data value you can
also click on the table View link to see
the data in a linear table format for
more information about metric extensions
please refer to the online documentation
this concludes the video for metric
extensions thank you for watching</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>