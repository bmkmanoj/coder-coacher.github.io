<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Monitoring and Managing a Complex Data Cloud | Coder Coacher - Coaching Coders</title><meta content="Monitoring and Managing a Complex Data Cloud - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Learning-Library/">Oracle Learning Library</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Monitoring and Managing a Complex Data Cloud</b></h2><h5 class="post__date">2013-02-01</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/uOMLOQBY4jk" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">so um you know I sumo so you're here
because you're doing something with
databases you're either planning to
chard or sharding your relational
database or you're you know using no
sequel developing on top of no sequel
you know something along those lines
so why why am I here I work for app
dynamics it's an APM company application
performance management we we helped
hundreds of customers since running some
of the biggest websites out there help
them to monitor their website and keep
it up and running monitor performance
SLA those kind of things work with
customers like like Netflix expedia
orbitz william sonoma Union Pacific all
across the board and one of the areas we
monitor is is is there their day layer
so we actually work closely with our
customers and we see how they scale and
how they're trying to scale and we know
solution we see all kinds of industries
out there and different technologies you
know what works what doesn't and also of
course our product you know we collect a
lot of metrics we monitor every note
every gvm every every every is instance
out there we collect millions of metrics
from tens of thousands of nodes so
obviously we accumulate a lot of data we
stored all my sequel so we ourselves
have embarked on in a horizontal scaling
so I'm here to kind of share some of our
experiences and describe especially the
operational into it you know since ties
all together myself I've worked in this
industry for two decades both on the
database server side of things I've also
last few years our company I've scaled
our data layer and I've worked with our
biggest good I'm customers and together
help them in terms of scaling and
monitoring that scale so that's all
about me like picture if you can't see
so what's the data card I keep referring
to this data cloud right so data cloud
is is is is you know a lot of nodes
working together to to manage a single
single instance of data right so all
these nodes are working together on one
data set it's distributed across your
clout whatever maybe and maybe I a
rental cloud like Amazon Rackspace right
maybe your own internal cloud but
there's a big difference here between
this this cloud and the cloud you're
probably used to hearing about you know
this is not a cluster of app servers or
web servers right this is a stateful
clout so you know
not the same it'sit's we'll talk about
it it's quite a bit different because
now you have a stateful clout and while
the nodes are resilient and yes they can
come down there is a lot of data you
probably have terabytes petabytes of
data across these nodes and indeed it
does have to be preserved unlike all
this other kind of cloud stuff where
things are stateless they can appear
reappear can you restart it you know
there's a lot more challenging is this
this data cloud right so I don't think
it many people don't talk about this as
much but this is kind of the focus of a
talk and and the operational end of it
and how to how to manage and monitor it
so be so so before data cod you know and
I'm sure all of you you know have worked
with with with the pre call days of
databases right you know monolithic
database or silos and many of them and
how do you do everything well there's
monitoring tools out there cacti you
know nagios in orick obvious a lot of
enterprise tools and there's stuff like
quest fog light some are open source
some are very expensive you know but
they're well-known right and short many
of you use them and you know there once
you have it running it's pretty easy to
understand what to do how to looks or
database and people spent decades in
this area right um you know also
learning right these tools obviously or
you yourself have alerting so when the
database has trouble you know alert it
goes to your knock your emergency or
dba's right you know it's for your big
database everyone can rush over there
and help take a look at the database
right in terms of managing the database
you know you all have query tools right
pick up your sequel shell or you have
your viewer you know your toad or
whatever right kind of to look at the
data right you know you have hot backups
or lvm snapshot it you know it's pretty
well proven technology right and you
know things like scheme upgrades are
pretty easy just connect the database
your application does it makes it
changes to a table structure and you're
done so you know pretty well understood
you know you know a lot of tools out
there a lot of lot of other ways to do
this over the last few decades but
you know mal so the data cloud so so why
do we need a data on the first place um
you know we we went along a mini our
customers went with with vertical
scaling at first it's easier you know
obviously you can stay with one database
you don't worry about this data cloud
thing but there are limits you know we
have our biggest host instance runs on a
fifty-thousand-dollar dell box it's it's
a 32 core cpu 2 2 260 gigabyte RAM a lot
of disks i'll have terabytes the
problems was we use my sequel it doesn't
scale it's not able to utilize 32 cpu
cores just you know too much locking you
know a lot of exclusive locks and the
colonel stuff like that you know about 8
22 to 12 cores is about good for it so
the rest are wasted also it's expensive
you know obviously and if you're if
you're using it if you're gonna if
you're building applications also test
it first so we needed one for production
we need one for each a we need one for
QA right it gets really expensive and
and they're easy to to manage these
boxes now many people are used to having
running such big boxes so it's it's a
nightmare you know and we we had eight
terabytes of data is growing quickly in
a chair versus is hard to move around
and copy and backup and any kind of
maine's task you have to do for
operations it was also quite hassle and
just took a long time it wasn't very
there's no quick way to do anything with
that data right
and you know there's no real there's no
options to grow right there you know
nowadays there are 40 core boxes but
there's this you can double or triple
quadruple there's no box with hundreds
of CPUs right so you know just the look
no matter how much you try you just hit
the limits just there's nowhere to go
forward right you have secondary
problems in my sequel or application
your runs a single thread it starts
falling behind all kinds of problems so
of course you know we bit the bullet and
you know we realize the advantages of
horizontal skoura zontal scale right
complete commodity Hardware out there we
standardize eight core boxes 40 gig ram
just because we're what kind of RAM
intensive on our database usage but you
know these are simple boxes everyone has
them it's easy to buy quickly easily
maintain replace and all that kind of
stuff and my sequel is able to utilize
you know for those of you using a
database like that you know it's able to
utilize all the cores you don't really
have to push it to its limits rights
it's a pretty standard way to run the
database so that's why we went on
viously with horizontal scale I'm sure
all of you have dealt with these these
various aspects so this is the a shell
debate I'm sure all of you have read
blogs and talks about whether it's no
sequel is good or bad or and this is not
I'm not gonna get into that you know I'm
sure we have your opinions you know
obviously the choices though that we
looked at are you know we have Mexico we
had a relational database we could
either shard it and if sharding we have
two choices right either we basically
change the application code so our
application was aware and we could
optimally use all the shards that meant
a lot of code changes for development
you write a lot of new code lot of you
testing that kind of thought the other
option was using a proxy I mean this is
a big new industry coming out products
like scale based DB shards others right
they're coming out more and more coming
out there that way we don't have to
change code or not much code but but we
rely on a different kind of system of
endor basically to help us to manage
these shards of course isn't them the
you know the no sequel route you know
obviously if you're braver and on you
can accept some some loss of
section allergy some stability you know
you do gain a lot automatic failover
recharging it grows out of the box
there's a lot about a box that you get
right so we chose the first option we
chose the shard based on for various
reasons it really doesn't matter you
know whether charging the sequel this
kind of about data cloud either way you
still have a data cloud right you still
have a lot of nodes managing your data
the details are just an implementation
whether it's starting or no sequel right
so the thing oh we went to work and
basically we had a implementation from
development so what next do we just we
throw it out operations and say run this
I mean you know yeah so I'm counting
like no sequel under the no psycho
umbrella I'm kind of County I mean these
are all vendors that you know just to
let sure that we could we could have
easy right we could use Oracle RAC we
could have used some db2 type tool I
mean they're very very expensive you
know for company cars were startup
obviously there are financial
limitations which are not infinite they
also karlovic internal expertise I'll
talk a little bit later we you know we
outsource some of our DBA duties we
don't have a staff of DBS to run these
systems so so yes there is right there
is another option yeah yeah that's
something we thought going offline but
yeah there's definitely another I mean
there's there there there there are more
vendor options that you know are
somewhere in between the sharding in the
no sequel like that we can talk about
later yeah so basically you know we
finished we finished kind of what we
plan to do right and put the product the
you know the problem was we couldn't
really handoff to to ops because they
need to run this thing you know we
looked around and there is really no
off-the-shelf tools if you look for
tools then the manager data called you
you you're not going to find very much
while there's an infinite number of
tools to help you manage a database
database there's really nothing in area
of a data cloud itself if you look at
talks from facebook linkedin those guys
have huge shard environments they have
no sequel environments together right
they all built their own so
unfortunately you know it is it's do
yourself kind project and so that's what
really want to share with you is kind of
our how we did ourselves so what do we
do you know we we we had one my sequel I
kept growing right we decided to charge
so we chose just for various reasons to
just to start with seven replicas
basically seven sets of my sequel divide
up the data that way which be which was
seven because it wouldn't conflict with
other numbers and was primary iners
various issues are on that won't get
into problems we can release his
operations until operations could run in
24 by 7 that was that was really the
hardest part right how do we support
this development how do we help
operations and operations how do you how
do you make sure runs otherwise this
whole project would one succeed right so
we built out the glue basically you know
you have focus as a do yourself project
you have to build is glue to hold that
data cloth together right it doesn't
just magically were all on its own so we
didn't want to really build a winning
we're not a huge company and we're not
really in the business of running
websites you know we provide a product
to our customers so we don't want to
spend a lot of time writing as glue so
we did two things one is we either on
dog food we have a we have a product
them that that can monitor right add a
layer can monitor anything and we
basically use that to help us monitor
the performance of our data cloud you
know we we put our agent every node and
I'll show later example of how it looks
like and then we need something for
management and the management we
partnered you know we partner with
vendors and so we decided to let you
know and we push them for new features
and so that helps a lot so there's a lot
less that we have to build a lot more
they built for us the main vendor we use
for for sharding is scale based we chose
scale ways they were going in the right
direction they had the kind of
functionality we needed and they're
really too
they took away a lot of the work that we
would have had done ourselves so how do
we use escape scale bass you know they
are the the the the central point of
management so everything is a registered
with scale based scale based it knows
about all these all these shards all the
replicas you know and all the backup
replicas it knows where to find them you
know IP numbers can finish everything
and that's it so in so we so we abstract
that out to us no one else has to know
about where these things are everything
everything goes to a scale based so
there's our centralized management
system really the main piece of our glue
for our starter system right you know so
if you ever want to find out what you
know what's going on in your shower
system you first can look at scale base
to see you know where your shards are if
you want to add a shard you know stuff
like that right this is our management
console for scale based so we can see
you know what's going on are any of the
shards producing errors you know what
the rates they're going on how much how
much load is taking right things like
that so and also I'll show later we you
know can add operations in there to on
different on different chart so that's
so we start with scale base so it
provides us a single point of access so
whenever we wanted to query the system
you know we no longer have one database
to query right we basically we point to
scale based and we can specify they want
data from a certain replica if that's
what we're soon or we can just say get
the data right and it'll go to all the
you know replicas and i'll decide where
it is and bring it bring it bring it
together for us it also allows us to do
operations like like D in a DML
basically we can just change a table and
it knows you know all the shards they
can perform that change on all the
shards simultaneously you're right for
us so we no longer have to worry about
keeping everything in sync cables would
do for us so we basically and basic and
can say I want to do something on chart
3 we have to know where shard 3 is or
what you know what kind of system
exactly it is so really provides
abstraction it's a quick way to get your
data well once your data is no longer in
one one single place right you know and
also our third-party tools we obviously
have other other tools that connect
the data I mean besides our own
application there's other third-party
tools those can can go through our
centralized into tho those don't have to
be aware of this data card right they
just connect through the centralized
system and that basically was proxy over
the query so that the so stirred party
tools this issue sequel right that
sequel will get translated to the right
place in our data cloud right so that's
that's a great way to we don't have to
throw away you know our investment other
tools whether it's a UI just creating
tool whether it's some configuration
tool right things like that so this is
our system this is a dashboard that we
built to monitor our cloud basically
again we we sit on every node then we
can monitor these both infrastructure
you know in the database start running
and so we have an instant visibility
across the whole across our cloud right
so this is our appt dynamic surrounding
right so this gives us a quick view for
both operations and development right on
how how the house the cloud how's it
doing and you can see aberrations so
here you can see on you know all the
basically this is this is the you know
the load the load by replica and you can
see there's one replica that's that's
not in the pattern right so we knew
there's a problem right right there one
rep book is taking a lot more load you
know then they weren't authorized so
it's easy to do the correlation things
like that um so once once we know that
once once you've isolated problem 211
specific you know I'm sure shard or
replica you know then we go back to our
old fashioned its database monitoring
tools right so we use we happen to use
DB tuna it's a great tool for for my
sequel monitoring sure all of you have
your own right so then we go back again
we don't need to reinvent the wheel
right we have a database financial and
if one one knows in trouble because we
kept our investment in my sequel right
we know how to monitor that right so
once we've drilled in let me go back to
handle tool you know if you're curious
but about DB tuning here's a summary
screen you can see the top you know the
top will wait events right what's it you
know we'll see there any problem there
you can see the top sequel you can drill
in by time period by weight of
and by sequel and do investigations in
the same way we've always done before so
that's you know it's pretty pretty
standard so it's a nice little tool
alerting rightness of this is very
important as used to data cause you even
more important that you think I'm
practically monitor the system that
requires alerts so the problem with the
learning or anything cuz is that you
know you've got facilities like a NOC
they're running 24 x seven then i was
familiar right with your system they're
not probably as expert in the database
or your application right so it's really
important that when they can alert for
them to know where to look you know so
they can do easy cheesy and put
troubleshooting it needs no thing to
escalate the problem or not right so the
nice thing with this is again we you
know we're through scale based we you
know we have the centralized system so
that i can throw alerts and we can also
throw dirts to our epidemic system but
we know we can pinpoint what what node
the parmesan unless it's system wide
right and that goes through the
pagerduty with another great system we
use i recommend all of you if you
haven't use it to try it out paid your
duties is a basic alert routing system
you can specify who's on call that night
what the schedule is who'd escalate to
so we funnel or so paid your duty and it
goes to the people on call that night
right or whatever it is and then
escalates up to up through management
right but basically those emails those
alerts have embedded them information
about about wearing your data called the
polymers and then when the NOC doesn't
receive those alerts right they can
easily connect clicks it before you know
they just connect to one such Oh system
they don't have to know where these guys
are right if they get alert the replica
three is in trouble they just connect
and say I want to connect the replica
three right the details are not
important unless you get into hardware
issues right so it allows them to do
really quickly the query you know the
data see what's going on a database see
you know try and investigate do some
basic desiccation of the problem right
it allows them to respond to if there is
a problem of some day this you know if
some roni's be deleted or there some
config changes to be done right again
they can basically issue issue a sequel
they can they can do a d-mail operation
on just that one I'm just a one-note or
they can do system-wide if they want
yeah you know the day basically but
they're all connecting to one system so
it's really easy for emergencies staff
to 10 you know one central point of
contact basically for this data club
that means a lot easier to respond um
you know backups obvious they're
important you know when you have a
single big databases I guess that's
pretty easy right but now I have a data
clog you want to synchronize it ideal is
that so that your backups across the
nodes right point using this you can
restore the whole dataset versus just
one node hopefully you want to do that
very often but it is a good thing to do
so the keys synchronization and what we
did is it in scale based there and so
there's a job system so we just defined
our backup as a job in the central
system basically right and once defined
this could be scheduled to run
everything we do it every eight hours or
so right and so this basically it locks
down for briefs briefs second all the
all the backup replicas you know so
guess one copy of each data set right
and begins to back them up once or flush
the out right so that you know the whole
across the whole the cross whole system
we have a single back up and then those
nodes independently they back up to the
you know the the backup machine right
now weakness and we track these jobs so
nice thing is we have reporting we can
see what succeed with failed right so
that's important to a lot of times I've
seen people do backup some backups and
then they realize the backups the
neighbors were successful right whether
half successful right so it's good to
know when your backup succeed and fail
especially it's good to know when they
fail all right so we know what sales we
can always go back and we know what
state were in and as the data call gets
bigger and bigger it's really important
to have a quick review of the status of
your backups right you know you really
want to make sure your data is backed up
because you probably have a data club
because you have a lot of data and
especially on no sequel systems you know
they're there has been a lot of issues
of data loss data corruption sabacc has
become even more important
you know and then there's other kind of
tasks like you know um you know scheme
upgrades you know we're an application
right we just keep upgrades every
release right so before is easy we
connect it to the database so now we
just connect the centralized system you
know so we don't have to redo our whole
upgrade system right it still does this
normal up great task whether it's on
stored procedures or just drag our
sequel but pushes them on to the
centralized system and that propagates
it out you know it knows what the logic
is right and those you know basically
what you know what's in what tables and
pushes out to all the all data sets so
we didn't have to redo our whole kind of
upgrade in a process right that really
you know that really helps a lot you
know so as long as you have a
centralized point it makes everything
you know a lot easier than that i'm also
configuration changes there are times
when you know both things that are
seeing can also just we meet we leave we
me the chip to manually change some
tables and again we connector through
scale bass with no we don't we don't
wobble disconnect our database and
change some rows right because it's very
dangerous and you know it violates the
whole abstraction system so that's kind
of the whole you know the maiden cycle
the week three device right um yeah
I'm sorry can you repeat that well if it
if if if it's a query right i mean
basically right i mean i mean you you
you you you you want to see one
transactional state right just like you
wouldn't want database right so it
basically it has to it has to be a
synchronous result set right and so in
scale basis is that bring the sino
queers all the nose and brings together
data or if it knows that's that you know
the the shard key basically you can go
out to the right place and get the data
back right so it should be singer else
right if is if it's a DML that's kind of
that's a different no I'm topic that
that that may be a little less important
depending on what you're doing if it's
if if it's maintenance right there's no
the ordering is not important right
which gives you use you push it out
asynchronously and it just runs right
the query though is singer you need the
result sets to match from from your hold
eight o'clock right so it depends on
what you're doing you know kind of how
it how it works out so before I go
inclusion I just wanted to say so so
basically what we did here is we you
know we made a data cloud look as much
as possible like a single instance right
and that that saved us a lot of effort
and that made a lot safer to run and
operations that made it easier foot to
have kind of a DevOps environment where
you know where more operations could run
together with Devon and have a single
view of the system and everyone can
understand it right and basically be
able to report off it and be able to
maintain it and operate it right and in
case of emergency to be able to quickly
fix it 24 by 7 right so it's kind of
unified the whole whole scheme you know
otherwise you know their other option
would have been to build everything
ourselves everything you see here you
know when you need to do operations just
not it's not it's not that easy right
even yeah you know people run no sequel
because they've you know they assume
they get everything kind of out of the
box right but there's still a lot of
things like the backups and maintenance
that are not that they're not that
simple enough out of the box you know
people spend a lot of times
covering it recovering the data you know
you know I'm you know just trying to
find data in this especially the cloud
gets bigger and bigger you have a
question so anyway so this is kind of
what we went with and and I guess the
conclusions whether we learn from this
exercise we started basically for from a
development standpoint I mean you know
as a development team we need to scale
the system right so we even off we work
with vendors we built this thing right
and then we brought in operations
because obviously we need them to run
this for us and then we brought in QA
because I would you know they did they
won't let us run this until it was
tested so the problem was then you know
each of these groups kind of got onto
the bandwagon later and later especially
in QA they start to test this right
they're not familiar with it they don't
know really why we decided what we did
you know why we went with this why we
went with this vendor you know who are
these guys right and so they they what
they lacked off confidence you know as
they were testing it you know when you
have something this this radically
different right there's going to be some
bugs and me some issues and they lack
the confidence because they really
didn't know as much about it so in high
inside you know we should have probably
worked all together on making these
decisions or include them in these
decisions so that you know they they
fell out more moral you know more
comfort with the you know with the
changes that were made in the system
right they would've it took us a little
longer to do the whole cycle especially
for through tests because we you know we
have to rebuild the comments and
re-educate the QA team on why we're
doing what we're doing you know like why
it was really gonna work out exactly as
he got into performance QA you know
cutie basically right they really have
to certify that the performance wasn't
it graded and that's one of the main
reasons you scale or write it is just to
keep the performance improve performance
right and so that requires that require
don't really understand the system in
depth into do performance analysis it's
not just a question of running some unit
tests right so I recommend all your
teams to kind of get aligned on these
you know these kind of systems the other
thing is that other the even inside the
you know
development kind of the data team worked
on this right but other people they
build the rest of the product out and
they sit on top of the data t so
whenever there's a bug now you know
they're not familiar with this they
assume it must be this weird new
concoction right that we built so you
know nice again we would have educate
them more and we have now you know
they're more familiar they're
comfortable they know that not all the
bugs come from that new system right so
that you know that that was another
thing we learned right that this is new
and people talk about no sequel and
charting but but thought oh they
obviously horn and database will don't
understand listen need to really know
what's going on it's inside the product
the application you're building this is
really the key reason for my talk while
I like is because most the problems they
come from operations they don't come
from development you know when we look
for bugs when we went through the whole
QA cycle you know when we're trying to
run this thing you know there's there's
obviously developers makes bugs but most
a pause or in production you know
because it's you have a lot of even even
be before with the Chardon right because
systems running 24 by 7 accumulating
data there are a lot of things in motion
right and you know when we're not a huge
corporations we don't have a massive
operational staff you know and this is
something new all right so you know most
issues we found most the problems we
have separation you know you know make
sure all data is backed up did you know
make sure I'm gonna for room to back up
the datas you know you know what happens
if machines I'm crash you know how to
make how the hell utilize the system for
automatic failover operations when the
people actually have to have to know
where the data really is so you can't
just tell them shard three they have to
go the hardware and check the problems
right so you know they are the ones have
to break abstractions you know is the
network fast enough is the pipe broken
so you know really the I find a lot of
the the efforts are focused on
development actually don't think that's
that hard right you know developers can
write code its operational part that's
really the tricky part and I think if
developments if it's been more effort
worrying about operations you have much
more successful efforts here now that
really is the the area I think that of
focus and the vendors
i I've been pointing all these vendors
right let's not talk about AppDynamics
right because the vendors are really
made a difference I mean it wasn't a lot
of work for us to not use vendors and
also with a lot of work for us to use
the wrong vendors you know so we're in a
reasonably small company or about 150
employees at this point we were less
much less worse starting this when
growing very rapidly but you know we
didn't go with big vendors because they
just don't work for company our size we
don't get there their attention you know
we stuck with small vendors that were
very agile and we're very responsive to
our needs and we mean we got the we got
the features we needed we got em in
there i times we were able to utilize
them you know they were all negotiate
but basically you know we by using the
right vendors are really made things
easier basics of having only the team we
have we have all these kind of virtual
teams other companies really you know
that really makes a big difference you
know pick your vendors if you're if you
want to deliver yourself you decide
these vendors you should really use
vendors they're aligned to how you do
things because they have the you know
they they have to be an you're kind of
on your wavelength okay so some of the
things we're exploring in the I'm in the
future here is um so we have automatic
failover you know with the centralized
system we use so if a note goes down
gets a heartbeat it fails all the
traffic will be the sense other nodes
that works but then of course you have
to repair it and bring it back up right
and so that's the manual process so
working on kind of an automatic fail
back where we have some hot spare hot
spares brought in as a replacement that
the old machines you know recycled
somewhere right so it's not it's not as
manually dependent you know that's once
that we don't have yet there's one
surviving us it's important right to
kind of remove the last vestiges of
manual intervention and we're also
looking at new technology always of
course the most most interesting one
thing is you know from Percona is
actually being a cluster right it's
based on galera but basically it's you
know it's it's it's it's a way to run a
few of these are a few nodes is one
replica set basically you know
they handle the kind of nevada's was was
one day the unit so each replica you
know becomes one of these clusters so I
find that particularly interesting that
it helps with the the failover it fail
back with us even having to kind of deal
with it as much you know it does require
at least three nodes parameter so it's a
little pricey in terms of the hardware
so in our vendors again you know scale
based I talked about their startup out
Boston DB tuna there in London you saw
the tool we use them for we either we
use sky SQL as our remote remote DBA
resources except we don't have a big d
be 18 so you know just to make sure all
our systems are up and running and the
database are healthy we use sky sequel
per cone is the you know are the
smartest people on my sequel we've used
them always for consulting for you know
for improving our performance and then
page or do I mentioned there are great
system for operations team for alarming
right there really they make emails I
mean make emails lot easier than punch
of spam it goes to the right people at
the right time it's a hosted system it
works it's really easy to configure and
it just makes everything a lot easier so
you know those that's kind of our vendor
list so any questions on what we did or
what our customers do I kind even talk
as much of our customers you know but
we've had like I said we you know we do
see a lot of a lot of big websites out
there to it you know that you know they
face the same challenges just on a
bigger scale we take a good
well there is there so the system so
some earth through a system like scale
bass you can get there there are pushed
on things like that and you know more
advanced features and talk about but
you're right like I said it's a cost
issue I mean for furtive for enough
money you can buy so yeah so it didn't
take this you didn't think that it
didn't take that long you know it took
probably mean the number i would say it
took probably one man you you know to do
this project from our side obviously you
know there's the you know the the vendor
side operations already had a lot of the
basics like you talk about we reuse a
lot of stuff we had right except we are
a small company so this is not you know
when you know when we're not as big as
Google or Facebook just we you know we
didn't need that level of scale right so
the click the cost year was not that
much honestly it's you know I would say
you know less than a few hundred
thousand dollars right to do this thing
you know I mean I've talked about the
pieces but all of them just they come
for for free because of what you have
but you're absolutely right i mean this
is not the only way to do it you know
there's their software you can buy well
like I said it's about operations it's
not so much about development you know I
kind of I have to I just show the way we
did things just to give you a background
but it's not about the development
process right it's about operations
right it's about how ops can can
maintain all these notes or anything
right so you're right there are some
systems that can provide some of this
for you some of the queering aspects of
it but you still have to maintain you
know these notes are running right
there's no operational problems right
these databases whether it's oracle RAC
seven they don't just run by themselves
unfortunately I wish they did yeah yeah
and so I'm just saying yes so from our
summer it wasn't that simple as just
using me
we have our own system we only as long
as we have a panics but it wasn't we we
didn't find it that simple so that's
just our perspective again you know
obviously there's other ways to think of
this is there any other other other
question yeah
well basically each each each data set
right i mean it resides over more than
one node right so in those are
replicating and synchronized right so we
be we don't stop any in your replica
replica I'm set but we you know we do
instantaneous if freeze one of the
replicas one copy of each piece of data
yes and so you lose out you know for a
split second you you lose that kind of
that you know multiplexing that's all so
this it stays online it there are also
questions yeah
so the question you know there's no
there's no I mean perfect answer you
know from what we studied and look at
other customers doing we found that one
terabytes CCC seems to be the goal so we
started with half a terabyte allowing us
room to grow the one terabyte and then
right and then when you want material
you split right out again right so we
found one terabyte is just it's eating
anything anything as bigger than that
becomes unwieldy r right but there's no
there's no absolute number but it just
it makes all their cable easier you know
that your tables are smaller everything
is just easier so so we chose that as
our French mark but you know that's kind
of what we've seen it in the industry
today is it's between half a terabyte in
one ther but if people don't like to go
over that area right dis or standard at
that point and you know it everything's
easier who else someone else other
question yeah
yeah so so they're not that's the key
they're not aware we basically we we as
designers architects decide hahahaha the
shark so we the you know there's a big
table we have big tables a little table
so the little tables aren't charted you
know they're there you know there's one
metadata my sequel to handle stuff and
she's and scale this is aware of that
but but all the big tables like our
metrics you know our call graphs things
that just you know we accumulate across
or you know when we monitor our customer
stuff right
yes
CSU's is seriously what happens if data
is distributed during one join that has
to go out to different shards to pull
together yes
because the joint
so we were lucky we kind of our saw our
schema structure a little bit simpler
terms it joins big tables of small
tables we don't join because we've
always have my sequel in my sigil could
never have that very well we never join
a big table to a big table we slightly
denormalize to avoid that so since we
have these huge joins across the tables
and you don't want to avoid that there's
no magic solution i've seen for that
right you just need to architect your
schema kind in a way where it's data
same place we actually made sure that
would the way we charted that that what
was in one join would stay as much as
possible and with in one in one chart
right
you're right so so so we are with the
schema definition we are aware it's not
operations it's awesome development but
when we design this scheme and we
maintain this kimmy yes we are where
you're right we are aware that joins
even one my sickle are always very bad
so so you know we don't use a work also
so basically we were all we were always
aware that's begin what kind of it was
easy when we went to Charlotte be right
but we do get what we get with with
scale base so that they can do a joint
so if there is a small table is in to
join too we don't worry about that our
application it's not aware of that right
as long as the scheme is right but all
the rest of is unknown to the
application issues a query and scale
based can can you know decide where the
data is whether it's in one place where
multiple skip skip the schema design is
very important as you get distributed I
mean I mean you can make it much much
harder and much easier depending on how
you design your scheming yes that's very
true and insured columns are important
mean what column you shard on how you
shard you know we we have we you know we
got away with what's with simple hashing
of the of an ID of a metric at you
something else but de pena we want to
make sure it's it's it's it's it's well
distributed right that's another nice
thing of scale based we you know we can
issue a query to do a count star across
all the shards in each table and we will
see it all in one screen right we can
see how else to do we don't have to do a
big report or something like that so
that was a great thing you know we can
inspect the chart very quickly all
together so you can do a count star on
all charred so that's the great thing
there any other questions everyone
everyone happy in their clouds the
design of comments about their own their
own projects or what the how far they've
gotten or what what database systems do
they use I I supposed to be are in kind
of this this general area operations or
a database or Jeff well I'll be here so
if anyone wants to privately discuss our
company or what we've done our customers
we we've got this these little ones like
Netflix and stuff so yeah anyways thank
Sarah for coming appreciate your time</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>