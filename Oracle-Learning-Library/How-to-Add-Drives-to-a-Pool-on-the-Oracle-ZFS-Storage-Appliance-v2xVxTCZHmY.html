<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>How to Add Drives to a Pool on the Oracle ZFS Storage Appliance | Coder Coacher - Coaching Coders</title><meta content="How to Add Drives to a Pool on the Oracle ZFS Storage Appliance - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Learning-Library/">Oracle Learning Library</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>How to Add Drives to a Pool on the Oracle ZFS Storage Appliance</b></h2><h5 class="post__date">2014-10-10</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/v2xVxTCZHmY" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hi this is Dairy sangani
now I'm going to spend a little bit of
time quickly showing you how to add new
drives to a new pool or to an existing
pool so if you go into a storage pool
yeah you could see it here and say for
instance you purchased new drives and
you plug them in so I have an existing
pool and say it's using these first
three shelves which a mine is using a
few drives from each of those shelves
all you have to do is plug those in you
can hop plug those in you have to bring
it in down as data is going you click
the Add button you select the pool you
want to add drives to and select the Add
button and what this will do is go out
and scan all the drives and see what
drives are available and have not been
added to a pool it's going to show us
that list so here's the list as you can
see it actually showed me all six
shelves and the reason why is these
first few shelves only 10 of the 20
drives have been used so there's still
10 available so I could use those or I
could pick these other shelves that have
not been used in this case and so you
see the first three each have half gone
I'm gonna go ahead and pick 10 from the
other three shelves just because usually
I would you know use half the shelves
for one pool on one controller and the
other half for half on the other
controller I could also add extra right
SSDs to this phone too because those are
available I also have a cash device or I
could not in this case I'm not going to
I'm just going to add 30 new drives and
get myself a bunch more space so I
select those 10 those 30 drives I want
to add and I hit commit then I'll add
the drives whatever the raid size is of
the existing pools that's automatically
going to assume that same tape same raid
type something nice about the ZFS is
because of the way it's configured so
it's telling you hey this is already a
mirrored no single point of failure pool
and it's going to be the same exact
thing
so we'll go ahead and hit commit so it's
also showing you I'm adding 20 new
drives it's gonna take two hot spares of
these new 28 drives as well and add this
into the pool then show you how much
extra space I'm gonna get with the pool
so basically I had roughly at 50
terabytes pull before I'm gonna end up
now was it roughly a hundred terabyte
pool just about complete here yes it is
so again like I mentioned here's a 98.42
right pool is roughly about 50 terabytes
before yes and I've doubled the size
it's nice about ZFS is everything is
basically thin provisioned so when you
create a share by default it sees all
the pool available so unless you give it
a quota which would basically and none
of them said hopeful but anybody had
this file system fs1 mounted they would
see incidentally well we got a whole
bunch more space available they wouldn't
have to do anything to carve out new
space for these pools and that would be
for all the file systems on the Box all
the thin provisioned Lunz all that space
would immediately that are in that pool
would immediately be available to use
that space I something else of interest
you may want to know just ZFS do any
load balancing or anything like that in
the background when you add new drives
it does sort of so what happens is all
new writes that come in the ZFS will try
and load balance those and send those to
the new devices to balance out how much
of the space is used by all the drives
to get them all at an even state it
doesn't restriping like that and
typically doesn't have to to be honest
because all of our rights are buffered
by the right SSDs in the hybrid storage
pool and so it works extremely well very
easy to add you can add multiple size
drives in the same pool and you will get
all the space as long as you had the
same size drive at the same time like if
you had a mix in my case I have all four
terabyte drives
mix of three and four terabytes I
wouldn't want to mix adding three
terabyte drive and a fortune edge right
because then it's kind of downsize to
the smallest but if I say added all my
three terabyte drives first and then
added all my four terabyte drives I
would maximize using all that space even
though they're on the same pool so that
is adding new drives to an existing pool
thank you very much</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>