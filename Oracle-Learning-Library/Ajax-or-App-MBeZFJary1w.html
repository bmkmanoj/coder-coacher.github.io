<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Ajax or App? | Coder Coacher - Coaching Coders</title><meta content="Ajax or App? - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Learning-Library/">Oracle Learning Library</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Ajax or App?</b></h2><h5 class="post__date">2013-01-25</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/MBeZFJary1w" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">I'm dead daughter time with I soft
technologies I'm the chief architect and
we work on a variety of projects there
we have ice faces which you might be
familiar with how many people are using
ice faces ok XO that's good because I'd
like to introduce that to a little bit
and we have a new project called
icemobile which is all mobile
technologies that's all open source just
as ice faces was now about let's see how
many people are using GSF javaserver
faces and how about GSP okay that's more
ok so this icefaces is strictly a jsf
technology but ice mobile is is both as
both a JSP and the DSF technology and we
create GSP tags that near the JSF tags
that we create so you can do all the
same things in each but of course you
know three different styles of
development so why don't we get into
this what I'm going to talk now
everything I'm going to show you today
is really fundamentally a web app
there's there's extensions that we
create through ice mobile to the kind of
broad know what you can do with the web
app but as a developer you strictly work
at in your in your web app realm oh no
how many people are considered
themselves swinging developers primarily
oh come on must be somebody okay well
alright so we're a home web developers
and I I really like the web development
model I think it's an excellent way to
develop applications and its really
where Java has hit its strength so let's
continue to do that let's continue to
develop web apps no we can't do this
this demo live because the networking
well what we'll do it live but not on
the real world Internet we're going to
do it here locally
if I'm connected
exciting part of the demo I reconnect to
the wireless network
okay so maybe this is working is that
there's a a Wi-Fi network from my laptop
and the the phone is connecting to it
and this is this is the demo that you
would be able to see on the internet you
know what I want to do it from scratch
so let me show you the process clear my
cookies
so what this demo starts out this is the
spring and Safari and as I'll explain
there's there's some issues with getting
apt into the App Store and it can be a
painful process so what we've done is
we've developed an expander for for
Safari on android and blackberry
blackberry platforms we have what we
call a container I'll explain all of
this the way that the way that you use
it is you can download or enable from
this and what this step now here is
registering the expander with the web
app in a session this is jsf application
and now we see that that that request to
enable it is gone because now the the
web app is aware that Safari has been
expanded with the ice mobile
capabilities so this is blurry usually
it focuses a little better but now I'm
going to take a photo now just to show
you how the this works
so here's the same demo running our
desktop browser you see the theme is
slightly different now I can take a
picture on here take a picture use it
I'll attach the picture
you can see that the picture was pushed
this browser so the groom was not listed
there before so now I'll do the demo
again yes you go somebody was too moved
its kind of blurred okay so let's let's
try this from here this time I'll just
take a picture the top of the box so it
took a photo of this camera in estes
play this is this camera as a jsf
component you there's a GSP component
that does exactly the same thing what
this does is this launches the browser
expander now we have a camera capability
within our web app there to see this is
what's inside the box you were curious
weren't you can you use that okay this
is the photo has been captured I'll
explain how that that's the picture of
the other camera and it's spelled wrong
that's okay you just have to attach it
and then let's make sure we see it
pushed here and we'll share that okay so
there there that was pushed to the other
browser with the desktop user it was
actually a lot of a lot of little kind
of pieces that fit together to make this
work so why don't I go on to explain
actually when I show you one other
feature since I've got this demo running
now for you in here I'm going to go into
the feed view oh you're not even looking
at that right now are you okay we're
going to feed now you this augmented
reality feature where reality now this
is this going to be highly variable
because not only did the wireless
networking not work too well in this
room well GPS is going to work even
worse but anybody seasick yet so as I
pan around the trick will be defined but
it would it is if the the GPS locations
are really close then there there we are
okay so it you can see the little icon
hovering that was the the image placed
in space for the photograph that we took
now this is work a lot better if I
wasn't in the same room where I took the
picture the intent of this feature is
sorry I'll stop that okay so the intent
of this feature is that you can go and
you can take pictures maybe throughout
the city somewhere and now as you
capture each of those pictures they have
a distinct GPS location and then when
the photo is uploaded it's tagged with
that location and then when you view it
in augmented reality you will see the
icon for that photo superimposed
according to where that photo was taken
relative to where you are
so that makes sense if ective Lee you're
able to place these markers in space and
then the augmented reality view shows
you where they are well as a developer
what would you actually get well you get
the capability to say i want this
augmented reality view of JSP or a JSF
component here are the icons and here
are their locations here are their GPS
coordinates so that when the user views
them in that augmented reality view then
they see them super imposed in space
correctly so that I think that's a fun
feature actually now that we got still
doing this let's do one more augmented
reality feature here
another exciting phase bro I load the
URLs okay and I did that again all right
inside of the box so this is the mobile
showcase you can also connect to this
and there's an augmented reality so
they're there to augmented reality
variants that we provide one is with the
location superimposed on a view and
another one is with markers so now we're
going to do this again so this this is
based on a an SDK called V Fauria from
Qualcomm and what we've done is we've
taken that Qualcomm SDK and
unfortunately we strive to make
everything in ice mobile and I spaces
open source the Qualcomm SEK is free but
it's not open source so the way that
you'll be able to get at this feature
will be through a binary but you know
like a binary that's on the app store
the other thing about this SDK which
there it goes I didn't have to talk too
long is it takes awhile to load all
right so what I have here I have these
little these are these markers for
augmented reality you see it there's
really nothing floating there right do
you see it that's just a piece of paper
but
when we view it on the phone it creates
a three-dimensional object that is
anchored to that point and then there's
even a little a little cube puzzle that
I maybe you can come and try that cube
puzzle at our booth so it's as hard for
me too I've got only two hands here I'll
show you the you can see that there's
the three-dimensional object that's the
ice mobile logo oops sorry Logan 3d
attached to that marker all right so how
does that work there there are 500 into
there are different ways to use this
augmented reality technology but there
are 512 of these markers defined by the
black and white square patterns around
the outside and what that gives us is an
index so we say so we give you a
component where the component will let
you associate a three-dimensional object
as a wavefront file you can say this
wavefront object is associated with
marker number zero or mercury number
three and then you can display those to
the user so you can dynamically define
those three dimensional objects on the
server whatever shapes you want in three
dimensions text to them and then in your
web app you say i want the the logo to
be displayed when marker number three is
is visible in the view so you can make a
lot of interesting applications like
that for instance you could go and you
could scan a QR code this QR code would
indicate the group of markers that's
displayed on the the part shelves here
and now when I when I hover over the
marker I would see a three-dimensional
view of the part that's in the box at
that point because using that QR code
you could you could define an
association between those those only get
512 markers so they're scarce so you
have to you have to preload them in some
way like that you could then display an
image of that part floating over the box
I think I think that this augmented
reality is so interesting because it's a
way to bring
the computer and our real life
experience together and one day I I
think that this is actually how will use
computers in the future is that they
will be kind of seamlessly integrated
with everything that we do in the
physical world at least that's what i
saw in Star Trek anyway so alright so
now let's go into the more mainstream
part of the talk those are X I don't
have any better demos than those that's
that's it now i'm going to explain how
it works but let's first find out what
you're after in a mobile application
what are you trying to do and and I'd
like people to raise their hands for
these things that so just kind of look
over this list and just just pick the
one thing that maybe is the most
important to you and raise your hand for
that so an integrated mobile app is one
that does something that's unique to the
mobile capability of the device and for
me personally this is the most exciting
thing because this is something we can
do totally new with with mobile
applications that we couldn't before and
what's so unusual is these devices are
equivalent to super computers like a
prey to so I don't think we're really
getting what we're supposed to out them
right now given what people did with
those super computers back when they
were the top things now one way that we
can do it i think is is by augmented
reality technologies and speech
recognition and this sort of thing but
some more simple things well you've got
you've got a location you've got a
camera all that so how many people are
interested in mobile applications we
integrate with device specific features
we have a few people now another thing
when you what do you deploy maybe you've
got a very standard web app that you're
using it some human resources app lets
people booked booked rooms somewhere in
the office building but when they run it
on their android device and when you
rent it on their iphone you want it to
look like android or iphone now how many
of you have that as the main quality the
theming I am so some of the number
portability is really important actually
portability I don't think of this as a
trade-off but we'll see how many people
you're going to write a web app for the
desktop but you're also are going to
have mobile users so it's really
important that you can reuse as much
code as possible and you certainly don't
want to build a new screen for every
single mobile resolution so we'll talk
about techniques that let us do that but
how many people have portability between
desktop and probably dominant desktop
but portable to mobile that's important
I think for enterprise applications this
this is an extremely important quality
because most of you users will be on
desktop but now people gradually are
bringing in their devices and it needs
to work there well okay but we also have
the question of what do you think of as
a mobile device let's say we will do
this has two questions is it a phone is
a mobile device of phone nobody okay so
is a mobile device a tablet I don't know
I don't know how to interpret that
there's SAT yet some other category that
the audience who is tired of answering
questions has has determined okay well
what are our constraints these these
aren't absolute hard rules it's not like
well if you're going to make a mobile
application then you must make the HTML
the smallest you possibly can these are
just considerations because your users
might might have a good quality Wi-Fi
network they might be in the office but
they're using a mobile device or maybe
not maybe they're your users are
attempting to do something like we did
here and we've got maybe 10 bytes that
we're able to transfer before we lose
the Wi-Fi connection actually I don't
think we can work under those conditions
more likely though maybe you've got the
user and they're on the train and they
have intermittent Wi-Fi connect the two
probably have their cellular
connectivity and even though under ideal
conditions the cellular connectivity is
really good when people out in the real
world it's often not very good so you
kind of have to design for the the worst
case but these are all just things to
think about because your users might
have these constraints on the mother
might not well it says less ram than a
modern desktop but it's like a desktop
machine from the past or a supercomputer
even so we can't do impressive things
still though that mobile user is running
off a battery so maybe you don't want to
do too many transitions and use of the
camera and stuff maybe suck up their
battery power if they can't conveniently
get to the charger within within a
reasonable amount of time one thing
we've noticed a lot about wireless
networks is even though they might have
high bandwidth they also have much
higher latency than a regular Ethernet
connection that you'd have within your
office so you really do have to account
for that one interesting way to to deal
with that is to use push features
because if you know that the user is
going to need something well rather than
waiting for them to ask for it if you
could push it to them using a push
feature in the application you can kind
of hide that latency just a little bit
first it's pretty obvious about the UI
differences between mobile and desktop
screen is smaller there is no hover
which it's I'm not sure it's hard to say
what really is killing flash but the
lack of the hover event is certainly a
big difference I think in a lot of cases
in web apps the hover event you know
closely you use something like a click
all right so how do we how do we
confront these limitations in ice mobile
whatever what are we trying to do I
think maybe these be good advice in
general always we try to minimize the
size of JavaScript and HTML because it
still takes the more of this stuff you
transfer well it takes longer to
transfer the device has to store it has
to store it somewhere it has to parse it
it just large sending large things to
the device CSS JavaScript whatever just
kind of are magnified it at every stage
using more power more power to use the
network more power to use the parser so
try and make it small that's kind of a
good guideline the server is probably
plugged into the wall somewhere so
doesn't have the same battery
limitations that the the phone or the
tablet does if you can do some
processing
server and save the user's phone battery
that's that's good so we talked about
latency you small JavaScript using Ajax
push and cloud notification I I won't be
able to demo that but I'll tell you
about it and I have some slide details
on that cloud notification is just using
the device specific notification
capabilities that will give you a
notification dropping down on your
device that's integrated to accommodate
the UI differences now that there's a
bit of your own personal aesthetics and
your your style guidelines that you have
in some cases you might want to really
simplify the style and make the the page
load as quickly as possible after all
it's been it's kind of funny how we seen
of this pressure on us to build the most
elaborate looking user interfaces with
fade in fade out random rounded corners
and gradients all this stuff on this
tiny little device with battery power we
never did that on our desktop
applications we didn't make them so
elaborate but for some reason users
expect them well you don't necessarily
have to do that you can use a more
streamline style if you want on the
device and the Vice mobile we provide
these variants we provide one that looks
as much as possible like the say the
iphone theme but we also provide one
that's just strictly CSS to and is as
small as possible with no gradients so
that it runs faster and takes up less
screen space it's it's really just
something to consider do you want the
elaborate user interface or do you want
the more streamlined run and that's just
a choice for your application all right
well maybe we don't need to build a web
app maybe we should just all build a
native app just get out xcode or the
android sdk well so how many people here
what to build a native app as their main
thing right now okay so i think that
indicates either people really are tired
of raising their hands well let's do it
how many people want to build a web app
okay yes all right
more people want to build up web app
well white is the four people why
wouldn't you just go ahead and build a
native app it's in a lot of ways okay so
on the iphone it's a totally different
language it's not java at all its
objective c that's what it looks like
here we can use a URL when android
blackberry those are java supposedly it
is the Java language but the API is
totally different we have an Android
specific class or we have a rim specific
class and that you can you can learn
these api's but it's it's a nuisance
actually you have to maintain separate
code for all these different vices and
now but the most difficult problem that
we've faced is that especially for the
apple app store your app can be rejected
and it can be rejected for whatever
reason they want now they do publish
guidelines on is sort of two tiers of
guidelines there's the guidelines they
are easily readable on the internet and
then there's another set of guidelines
that you agree to when you sign on as a
developer and that other list is much
larger and includes the details about
how you're not allowed to use scripting
and those sorts of features that's what
happened with ice mobile as I explained
I'll explain the ice mobile architecture
but our app was rejected that's what
last javaone it was weeks coming up to
Java one and I was hoping to have ice
mobile iphone app accepted and it was
rejected just before java one well now
we do have an app as you saw on the App
Store but it works in a different way
and the way it works in a different way
on the iphone because of these
sandboxing qualities and the the fact
that you're not allowed to use scripting
now this this has been half way this
restriction has been halfway relax just
recently you're now allowed to use other
languages for scripting other than the
JavaScript interpreter that's present on
the iPhone but those scripts cannot
fundamentally alter the features of the
application in other words you can't
really build a web app because the whole
great thing about the web app is you can
fundamentally alter what the application
does on
by changing the code on the server
that's I think a lot of the reason why
we do this is because we can actually
deploy a new version of the app to the
server and fix whatever bugs or add new
features or do whatever we want well
that in itself is somehow going against
the the business model of the App Store
where you could in theory you could open
your own app store that had these new
features or had other applications in it
and I I do hope that over time that will
become less important in in the app
store for the iPhone because it would be
nice if we could just submit general
general applications that have whatever
features groupon as long as they're not
harmful to anyone certainly if you have
to run your app even now in this case
the android and blackberry stores are
have no such scripting limitations or
anything like that they're more directly
concerned with are you actually doing
harm to the network or harm to the user
if so then it would be rejected
otherwise you can get your app in there
but it still means that you have to
submit your app and then there's there
some time delay in there you're not
really in control of that process so
that's where the web app is so nice
because you're you're in control of the
process well the solution as we see it
is a hybrid architecture where you have
some native features and we it's like
it's like we take the native features
that we want and get them down into a
little kernel and then that kernel is
accepted and available on the App Store
and it never has to change so now we
know that we can create our web app
redeploy it do whatever we want and that
kernel of features is available we'll
use our existing skills will develop a
web app but we'll get some cool mobile
features so here's the architecture all
explained in this simple diagram
sarcastic I don't think this diagram so
simple but it does have everything in it
all right so you have your device over
here you have your server over there on
the left this is this is a diagram for
jsf and on dice faces but GSP works in
the same way on the device we have
something that we call a container and
what the container is is a native
application that has been extended
through a very specific JavaScript API
to give us some interesting features so
that's where the container has a
JavaScript API for augmented reality
feature or a JavaScript API to display
the camera capture an image and make it
available back to the server and so
that's the kernel that I talk to you
about we take the the ice move all
features build this into a container and
now when you run your web app in that
container you have access to device
specific features my container is then
on the app store and you can count on it
another interesting part of this is the
cloud up there so when you use ice push
ice push is an ajax push technology and
one of the features is that when the
device is say the user has left the
application and they've gone to the home
screen then we can use the cloud
notification and they'll get a
notification on the home screen so what
we do is instead of sending that that
Ajax push through the xmlhttprequest we
send it up into the cloud infrastructure
with the servers that are owned by
Google or a polar or rim and then that's
delivered to the device as a
notification supported devices iphone
blackberry and Android and right now
with ice mobile we're just sort of
targeting the current devices and if
people want wider device support you
could either take the source and you
could build it in yourself or just let
us know why what are some of the
advantages of having this containing
yourself well I think one is get rid of
that pesky URL and back button users
cause all kind of havoc with these
things if you build your own container
has your own browser with the extensions
you don't have to have a URL bar or back
button it can be a very spacious Pacific
kind of set of features to it you can
change its icon give it a new splash
screen maybe build in some certificates
by having control of the environment
that the web browser runs in you can do
a lot of that okay but that container
idea of having a browser inside another
application that gives us some script
extensions that didn't fly with the App
Store for iPhone violated the not
downloading code to fundamentally change
the application policy so we didn't know
what to do for a few months actually and
then came up with the idea of expanding
the browsers capabilities what we do is
we have icemobile sx which is a separate
application now that separate
application has no scripting capability
but it can handle urls that are
dispatched to it from the browser in iOS
you can register a URL scheme and so now
this separate application has just
camera and augmented reality and QR code
scanning features and so you can use it
from your web app and you can just use
the GSF components or GSP tags to
automatically invoke those features the
details how it works is we have an ice
mobile prefixed URL and you say what
command you want it's it's a basically
we're filling in a webform hear you say
here's its ID here's a return URL so
that when when we come back into the
browser what should we show to the user
might need SJ set jsessionid because you
want it that this is a nuisance because
the this expander is running outside the
browser so it knows nothing about the
user session means we have to pass
information about the user session if
you don't want to use sessions you just
maybe use some support of other
identifiers as a parameter you can do
that then it has to post it to somewhere
some more technical details if you want
to get into it we use the on hash change
event so that when you come back into
the browser you don't necessarily want
to reload that whole page that's not a
very Ajax thing to do so you can detect
the fact that some action has occurred
outside the browser with the hash change
they could do some Ajax update in that
point but the difficulty and it just
takes a bit of getting used to is that
what will happen is that user will be
happily doing their application in the
browser then they'll I invoke the camera
the camera will be displayed an image
will be uploaded by this separate
application which is ice mobile
forgot the same jsessionid then that
image can go into their session and be
stored somewhere now you come back and
it returns to the browser and the
browser has to look for those resources
that were uploaded on this separate
paths so probably something you'd need
to digest if you were actually working
with it but just to give you the flavor
of it there now I've already shown the
camera so let's just look at the code
for it this is GSF version of it GSP
looks fairly similar we say we have a
camera give it an ID binded it back into
the the beam then there's a thumbnail
thumbnail is for a certain camera with a
certain ID command button to actually do
the upload and there's an action on it
and then the graphic image to here we're
just what we do is we we take the the
upload on the server to store it to the
file system maybe you don't want to do
that maybe you'd put it in a database
and use a resource loader mechanism you
could do that too but it's easy just to
put it on the file system and tomcat
will serve it from a URL and that's
that's all we need to do in order to add
the camera feature using these
components and either the android
container for x mobile or the blackberry
container or icemobile sx or there is
also an iOS container it's just that and
it's open source so you can download it
use it install it onto your own phone or
redistribute it yourself to your own
enterprise so if you don't need to put
it on the public App Store there's no
problem whatsoever you can build
whatever app you want you can take that
icemobile container and use it customize
it freely now what does the bean look
like you had the the camera button
component way we provide the upload as
we provide a map so you don't just to
give us a nice pojo styled in the bean
and then the map has a file which will
be an actual file object and then we can
get its name do whatever we want store
it get its URL send it out so that's all
the code that you need to write in order
to use the camera using the ice mobile
jsf components now if since you haven't
seen icefaces I'd like to just show you
this this is the icefaces philosophy GSF
has a very nice property to it and that
it's page design is declarative and some
techniques of using Ajax require you to
wire up the the JSF page with events and
say when somebody clicks on this I want
you to rerender this other part of the
page well it's very easy to forget what
event associated with which part of the
page in which part in page to the update
with icefaces you don't do any of that
because I spaces automatically figures
out what parts of the page have changed
and it updates the browser so this is a
very very we think is a very good merge
with JSF because it lets you work in jsf
the way that it was always intended to
from the beginning of a cheapo Joe's you
rate your your page all you do is you
put your components in the page and I
spaces figures out the Ajax part so you
can be very productive the way that it
does it is we maintain a Dom on the
server the DOM is like a mirror of the
the client Dom when the page is rendered
and taking the deltas from that Dom on
the server and send just the deltas to
the browser it's true that that uses a
little bit more memory but the GSF
componentry already uses memory and the
fact is is that the sweet spot for jsf
is highly interactive enterprise
applications so this really fits in
quite well with the intended scalability
realm for jsf there's just the mobile
components that we provide with ice
mobile these are the ice icefaces
components they will automatically adapt
if if users not using the container if
they just have a regular browser
something like the moon while camera
will turn into a file upload so then
they could just upload an image from
their file system so that even desktop
users can adaptively use it so we've got
augmented reality camera components
thumbnails view location and cue
code scanning here is what they look
like there's a wide variety of
components these are you can see they're
actually some different themes here
mostly the iOS theme but also android
theme displayed their variety of
components how do these components would
work you'll probably you may not want to
write your own but this is you may also
want to because you may want to extend
the native capabilities that are on the
device and and Rachel in component so
you define a JavaScript API that gives
you access to some device specific
feature and when it's detected as an
enhanced browser meaning that it has
these extra features then you would
render out those scripts that make use
of those features otherwise maybe you
just render an input file component or a
button or something so those those
features those specific native features
would be added to a javascript file
that's on the device and when when the
page starts up those are injected into
the page so that you have access to that
JavaScript API and then of course you
have to write your native code for all
of the different platforms that you want
to support to actually say use the
address book or whatever it is that you
want to have use as a as an expanded web
capability there's actually interesting
working with the the camera component
because here you have the the JavaScript
realm which is where the user is
interacting with the buttons and they're
generating events and then you capture
the camera image or maybe even capture a
video file which could be gigabytes in
size you don't want to transfer all of
those gigabytes back into the into
JavaScript I don't know base64 encode
them and then send that to the server
over an xml httprequest that's just
that's just too much for the JavaScript
to send back and forth so the way that
it works with ice mobile is that the
container remembers I've captured these
bulk data objects these are files and
they're stored in the flash file system
on the phone and I've told JavaScript
their identifiers
then when the form from javascript is to
be posted from the server you don't post
it directly through the browser you ask
the container to post the form for you
so the container goes ah I have files
associated with certain of these hidden
fields in the forum and then it does a
multi-part post that includes everything
so the actual heavy lifting is all
occurring in native code making it very
efficient and here actually is we some
people probably wondering well how is
ice moval different from phonegap and
this is actually the departure from
phonegap phonegap is very strongly
focused on giving you access to native
features strictly from javascript I
small vial is focused on giving you
access to native features when you're
developing a web application and that's
why it needs this mechanism for doing
these bulk data posts to the server
cloud push i would i would like to demo
this but you'll just have to imagine we
need we need network connectivity to the
outside world for this demo but what is
Ajax push let's see we have two people
different computers Neil he does
something it goes to the server sort of
processes it and then pushes it to me
and if the user is not connected with
the web application pushes it through
the cloud so that this means that it
will did be displayed as a notification
drop down on on his phone by using that
cloud mechanism well what's the API for
it so simple API this is the API that
was used when you saw they vary the
beginning we did the demo and I captured
a photo and it was pushed to my desktop
screen this is the same API that we use
here if you look at the groups of
sessions or groups of views and then you
can of course you want to update your
your model in your application and then
you asked a group to be rendered in
icefaces when you when you render a
group what that will do is it will cause
all of those pages to be rendered
actually the process is all of the the
browser's will be notified
and then the browsers will connect to
the server and asks well what are the
current updates based on this
notification and then the pages will be
rendered on the server and the updates
will be sent down to the browser if
you're using just GSP then you would be
using the ice push API directly and you
would work with the notifications
directly if you want a notification to
actually invoke a cloud push then you
will add a push message because you want
some little message to be displayed in
the notification bar or on an alert
depending on what the user has chosen so
you would add this message and that's it
that's that's all you have to learn in
order to add push features to your this
is a nice faces application but the the
push nice push API for GSP is is very
similar and it's equally simple so we
have the cloud push capability supports
the various Apple push notification is
not called I should update the slide
c2dm google has renamed their service
and blackberry push feature one thing I
mentioned that the wireless network has
high latency so the heartbeat has to be
dynamically adapted to the latency
conditions and those latency conditions
might change so it does that that's what
it looks like we actually haven't
implemented any of these icon badge or
sound identifier capabilities but that's
certainly within possible possibility
for the API it's flexible right now we
just we just have the message text and
their current implementation but the
point is that it's device specific and
you
now there is this this this is one thing
that is actually the the cloud push
capability is actually not open source a
nice push and the reason for that is
that you require SDKs from the
individual vendors in order to do that
and that they are not all open source
friendly licenses so that is that is a
commercial feature now when we were
working on this as well we wanted to
scale and the the cloud push is actually
kind of tricky when you bring it to a
cluster because whatever possible you
want to make your cluster implementation
symmetric so that the user can connect
alternately to one cluster node and
connect to a different cluster node but
what happens is how do you decide that
you should send a notification to the
user via a banner or you should send the
notification within the web app well the
way that you would decide to send a
banner is you say well I haven't heard
from that user in a while I think I
should send a banner because they're
somehow offline because you can't really
count on getting an event from the user
when they go offline because they might
just go offline suddenly because their
network was dropped so you have to base
it on not having heard from them for a
while well let's say you're on cluster
node a now they're talking to cluster
node B you don't want cause to know
today to decide hmm I haven't heard from
that user for a while I'm going to send
them a notification banner because
they're really talking to node B and
they're happily using that application
whether we do it is we use timestamps
within the cluster so that's a pretty
reasonable criteria I mean in some ways
you try to say that using timestamps is
violating physics in some way with
moving observers and they can't agree on
the time special relativity that's not
really a factor here at all we really
within a cluster within a data center
it's not a problem to have a
synchronized reasonably synchronized
clock and say to millisecond accuracy
across that cluster in and google has
recently done this with some of their
api's as well here if you have claw
that are synchronized within the cluster
you're able to do some interesting
things so why not why not make use of
that definitely for some applications
it's important that they look like
they're running on the device that
they're running on so how do you do that
let's use some some CSS detect the
device on the server using the user
agent and and append CSS modifications
for it that are appropriate for that
device this CSS theming is not something
that you need the container that I've
talked about this is a pure web app if
you just want to run in safari or chrome
on a mobile device the ice mobile style
sheets can be loaded and will have the
right appearance for that device now
there's Android for whatever reason oh
okay I said why did I put up two iphones
a new blackberry it's just to show that
there are a variety of button types the
blackberry theme is fairly Spartan
because a lot of blackberries have a
small screen so it's it's even more
Spartan than the Android team now it's
also important to get portability
between the desktop and mobile devices
how can you do this but for sure you can
use your beans because your Java beans
contain logic and that logic doesn't
need to change although maybe they might
have some slightly different features
for the mobile users those can all be
built into the same javabean so most of
the time your pages these mobile devices
they may have a amazingly capable
browsers and actually then the amusing
thing is there's no I a6 here I mean
there's not even I 7 this is an html5
browser on here running WebKit so in
fact mobile devices have far greater or
at least the class of devices that we're
targeting for ice mobiles for modern
smartphones they have the most advanced
browsers that we have today and in many
ways the most consistent browsers I
guess until the windows phone becomes
popular if that happens then maybe maybe
that will be trouble but prep will
accommodate it in the same way that we
do nowadays when we handle ie6 through
i9 through firefox and WebKit but so
that but what that means is that you you
really have a lot of nice html5
capabilities and the other thing is
these devices are sort of forced to be
updated so there's these automatic
updates that roll out keeping modern
browser capabilities so in a way you
think here's this small device but the
great thing is got a modern browser so
that makes web development easier in
that sense what what do you want to do
about that that general mobile user
interface drag and drop is kind of
awkward on touchscreen just because of
the way that people use such pain for
scrolling it but it can be done you
don't want it to be cluttered because
the screen is small now here this one's
this has changed you know say you only
want to serve small images to mobile
devices which is mostly true except now
that mobile device has a retina display
so it needs an image that has twice the
dimensions of the image that you're
going to serve before just so it looks
really good on that screen so I what
that means is that now we have to
accommodate retina display resolution as
well as trying to save bandwidth here
this is important with with Ajax for
today Jack's come from the real idea
behind Ajax was to make applications
more usable it would to make people more
productive because all that whole page
reload blank staring at a blank page
waiting for the forum to be posted that
that was very unproductive phase of
trading web apps it's even more
important on a small screen so yes using
using Ajax well is really important with
mobile applications with a nice mobile
we give you some components that help
you to do this so there's a device
resource that will load device specific
resources javascript and CSS images
specific image is less how you build up
your theme let me give a view selector
that lets you have large and small no I
really think that this is where we
should stop with this view selection is
between large and small it doesn't seem
good to have a hundred different
variants for every screen in order to
build them as separate pages so
hopefully that's that's not where where
it goes large being a desktop or tablet
view and small being a phone view that
you know in terms of maintaining code
that's enough I don't know how big your
development team is but it's it
stretches us to maintain large and small
views for all the different variants of
the application but the other the
reality is is that a tablet view and a
phone view our are fairly different as
you can do a lot of tricks with some
newer CSS techniques so that's there's
ways to balance it progressive here's
how do you how do you actually do this
that these are the different sort of
adjectives to describe techniques that
you work with different devices from the
same web application progressive is to
once you get your JavaScript down on the
device you say it says what do I have
here and then it tries to adapt itself
to what it would it discovers based it
within in the device adaptive that's
like the the view selection technique
where you say yeah I detected that from
the user agent that this is a large view
all serve down the content for that then
responsive is is a sort of a specific
term where we use proportional grids and
images media selectors I think what we
want to do is really just borrow ideas
from all of these and use the techniques
as appropriate not get too hung up on
some sort of personal philosophy of CSS
just use what works how do you how do
you actually deal with images I'll go
into a lot of detail here I use Java 2d
and you can scale images this all works
very nicely you can run that on the
server and use Java 2d one thing we ran
into recently for we had a demo that
used some text so make sure you have
your fonts
loaded in or you load the right fonts
but then you can still use Java 2d
easily on a headless server let's look
at an example this is this an older
application but we were really happy
with how the adaptive quality of it
turned out so this would be the desktop
view of a it's a slideshow app you
notice that it has a number of features
his chat and his slides mr. participants
then we just strip out some of that
other stuff and it's really the same
application but adapted down to a mobile
user interface it's it's very usable so
you want to just kind of look at your
application sometimes and switch out
certain pieces and that's that's a very
effective way to do the different views
and an adaptive strategy how do you do
that in jsf well one way is with the new
eyes mobile view selector component you
can have different facets to load in
different different pages or a different
parts of those pages you may or may not
want to do this on your mobile
application in some cases you want it to
look like a screen that's their fixed on
the mobile display the users not allowed
to scroll they're not allowed to resize
it as it's your choice but the way that
you can do that is with meta tag set the
scale use symbolic constants here we are
JSP what I try to the JSP demo let's see
if i can connect
now this the GSP demo that we have
currently if I'm not able to connect you
should definitely try it because it's a
contest ok I was able to connect so what
you want to do is go to this this this
one is all written in JSP using the ice
world components connect to it and use
the ice mobile capabilities like I
showed you in media cast to capture an
image with your camera fill in your
email address and then get your friends
to vote for your your image and then the
winner on Wednesday winds an iPad that's
I think that will make it a good demo
now if if you can connect to this demo
now I was able to how do I just leave
that up on the screen and I'll see what
will happen is as as new images come in
they'll be pushed into that there so you
can try that it's it's that demo is
basically it's basically the media cast
demo except it's implemented in GSP and
it uses the ice mobile GSP tags so how
does the code for that look a lot like
the GSF version you get user is mobile
taglib put a form in it now in this case
we were using spring to do that actually
who hates them how many people here use
spring MVC okay just about everybody
who's using GSP so that's that makes
sense now there's a geolocation GSP tag
there's a camera tag and then there's a
thumbnail tag all like you saw in the
media cast demo and then you use your
spring controller which I didn't put the
source up for that just wanted to show
you how you do the augmented reality
feature in GSP use an augmented reality
tag and give it an ID so that it comes
back into your controller uses see for
each or iterate over a list of locations
because each of the photographs that we
took as a location associated with it it
has
has GPS coordinates and then we say what
label we want to display but its
latitude longitude and altitude are
because all of those are factored into
when the user views that location in
space and its icon and that's all there
is to it to get that augmented reality
feature on there and what do we take
some questions and I can throw excited
we believe in throwing I don't know how
to work these things here's some
boomerangs no there how's that maybe
goes this way yeah stay awake no there
you go you picked the front row for a
reason didn't you throw them back I'm
terrible with those ok any questions ok
that's good like to thank everybody for
coming just come up here or</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>