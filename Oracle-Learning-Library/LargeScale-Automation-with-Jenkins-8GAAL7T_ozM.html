<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Large-Scale Automation with Jenkins | Coder Coacher - Coaching Coders</title><meta content="Large-Scale Automation with Jenkins - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Learning-Library/">Oracle Learning Library</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Large-Scale Automation with Jenkins</b></h2><h5 class="post__date">2013-01-30</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/8GAAL7T_ozM" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">well thank you very much for coming this
early in Monday I ain't having hard time
myself coming up here today so I really
appreciate that so many of you came
today so hopefully most of you who are
here already are using or at least no
Dinkins but just to make sure the
Jenkins is the most adapted open-source
continuous integration server and the
reason we are in Java one his body -
written in Java and that we talked about
the 47,000 installations worldwide and
then each piece of 3d doors number of
slaves the project itself is about seven
years old so we being so that we came a
long way in terms of functionality so we
put mainly two emphases on the project
one is that the tools like this needs to
be easy to install and easy to use
because you know it is a tool about
productivity and making you do more with
this and also this product it pride
itself in the extensibility so because
there is this incredible diversity in
the kind of tools that we are using for
a single tool to support all of these
different environments we need to be
able to sort of develop the integration
separately without stepping on each
other so that's what we mean by
accessibility and today we have more
than 600 plugins in our play center so
what I wanted to talk about today is
when I go see how people are using
Jenkins and I get a reasonable number of
opportunities to do it you know the
first steps of doing it seems to be
pretty straightforward and then widely
shared in that you know people have some
build of the projects that they will put
up on Jenkins they'll be executed
frequently maybe on every commit and
then from the next step is from there
the next step it might be running the
test automatically on on Jenkins kind of
like how you do the build and then some
of the users would then start running a
code analysis created things these
things should give you or the more
importantly give managers some insight
about what the status of the project is
but I often see the use of Jenkins time
stop there and then people
seems to be a loss a people doesn't seem
to realize that there are so much more
you can do with Jenkins
so today I wanted to talk about you know
what is it that we wanted you know what
is it that I think people should be
doing what is it that body that I see in
Jenkins that the people should be able
to do so that's a bit I kind of wanted
to build a talk out of it
so when I asked you know what's the next
step from there English in a single
world I think that'd be the workflow and
when I say workflow I kind of mean the
world very loosely it's sort of in my
mind it's about creating a whole bunch
of Jenkins jobs and then have them work
together to do some interesting things
because most of the actual software
development workflow is a lot more
complicated than just building the
binary out of the source code as there's
a whole bunch more involved in actually
delivering that source code into the
running server for to the hands of the
users and then part of the reason why I
think this is good for Jenkins is one
because they often involves lot of
manual processes and then that is that
is also partly related to the fact that
these things often need to cross team
boundaries so you know the development
team might want to hand out a hand off
the binary to the QA guys and where I
used to work before that was done more
or less manually you know by our sending
email is the link to the straight server
or something like that so the Jenkins is
actually pretty good at doing these
things automating these things and also
the design of Jenkins is such that it
sort of wants you not to put too much
stuff into a single job it's sort of an
anti-pattern instead it's easier for
many reasons if you have one job that
but that's one thing well and then try
to derive bodies by interconnecting them
and in that way you get a better
reusability out of this stuff so there
are a number of so let's start with
something simpler I mean something
simple they in terms of the building
blocks there are a number of building
blocks available in Jenkins and it's
plugins that help you is this so the
first easy one I think is the
parametrized builds so
if you already use thinkings I think you
already know that when you configure the
job you're basically telling dinking is
what they do and the way you can think
of if it was a programming language you
can almost think of it as a procedure
without any parameter right so you tell
Jenkins that well go check out the
source code from these places and then
run these cells gift on those and when
they are over here's where the test
reporter and then the binary I produced
years of these grab those and so on and
so forth now and Sode did when you when
you run this procedure over and over the
what I mean the only thing that's
changing is the set of the source code
being checked out now but sometimes as
especially when we think about Java the
building dog into the rock so it is
actually a very convenient to be able to
define some parameters that affects the
way the build would run so you know
indeed if I were to carry on this the
procedural analogy that's like really
like defining a parameter to this
function and then you can see that as a
programmer we can all see the value in
being able to do this so the defining a
parameter I mean the parameterizing
build is actually pretty easy there is
this one one check box that's sort of
very nice-looking in the job
configuration UI and then this is
telling Jenkins that you could
parameterize the job so the if you click
the menu button down below you can add
different kinds of parameters here I am
adding a string parameter I'm giving it
a name which is I'm going to use this
name to refer to this parameter later
and I'm also typing in a description so
that my users can understand what what
body is supposed to type in here and
then just to make life easier I also
have a default bodies in this but say
but there are a number of parameter
types available so for example instead
where a text box it can give you the a
checkbox or you can ask the user to
upload a file or maybe you can give the
user choice from the drop-down list box
and in some extreme case example we have
a parameter that allows you to list
subversion tags so if you wanted to do
some release operation on the tags that
the developer
being provided then you can very easily
do this so that's the kind of the
extensivity that we provide I mean we
get out of this
but anyway so once you define the
parameter the next step is to defer to
the primary values from within the build
so the we use the I guess the normal
variable expansion syntax and then so
maybe you can use this in places like
let's say subversion URL to the earth to
check that the source code from or maybe
it's going to be the effective branch
that you're checking out or might be but
it could affect the parameters that
you're passing to the shell script and
that these variables are also exposed as
the environment variables so that's
often another easy way to access these
things and then change the way you do
the build or run the tests and yeah so
there are some some some exception to
these rules for example when you upload
a file other part of the parameter
that's not going to fit into the
environment variables so the way we're
going to do it is Jenkins is going to
put the file into your workspace so that
you can access it later to do stuff and
then so with that change Navin the user
wants to do the build and then when they
click the build Nambotin they all come
to instead of build starting right away
that the UI show up and then ask them to
type in the bodies and where other in
other places where they we can kick the
build like in the rest api or at the CLI
build command there will be
corresponding options they allow people
to type in these parameters so once you
have parameterize jobs be another very
useful building block is called
parameterize trigger build
and somewhat confusing so this name is
somewhat confusing in the sense that it
was originally developed to do something
else and we can extend it into doing
something else and we realize that the
latter extension really drastically
changed the nature of it but anyway so
what this is capable of is you know
calling other jobs and in particular
waiting for the completion of the result
and obviously the reason it's called
parameterize trigger is because if the
jobs that you're coding is parameterize
then you can pass in the parameters so
make quite I mean simply put this allows
you to create this summary
semantics you can call it another Java
defeat a function and then you can wait
for the completion of it so one of the
common useful pattern is that you could
have a you can have a you know the
sequence of jobs so executing internal
so maybe you start with the set up so
you did deliver service it I mean
deliver binary various places and the
second step you might execute the load
test and then when that's over you have
a teardown step and in the third step or
you can if you can fork over multiple
children's concurrently and then wait
for them all to to end at the same time
so you know I guess this this kind of
makes I think the Jenkins children
complete right because it's a lambda
calculus right so you got there you can
basically do anything with these things
except it doesn't really there are a
number of other common enough primitives
that justify their own idioms so so i'ma
let me talk about some of those so the
one such common idiom that you often see
in Jenkins is this ability to more or
less do the same thing with slightly
different variations so maybe it is very
common in C++ projects that they need to
be I mean the cross compile into all
kinds of different target platforms so
and that's are not one of these things
right
it's basically running the same build
but on different platforms or maybe you
are testing a java web app is selenium
on the through the browsers in which
case you know you're basically running a
same test but with different browser on
possibly on different machines and
different operating systems so the
generalization of this is that when we
think of it it's like a you got a number
of for loops that did variables going
over a range of actual bodies so maybe
the browser are going over Internet
Explorer or Firefox and so on and and
then maybe you have you can have a
number of arbitrary number of the nested
loops and then you do something they see
basically you're building executing
Jenkins so so this is a common enough
idiom that we have a dedicated feature
called them multi configuration project
and I often call it a matrix product so
the way you define this is um you define
we call even video individual for loop
and axis so for every positive axis of
every for loop you define one axis and
then you can define the types of the
axis and the actual values now so the
most common one would be the generic
axis that says you know just worthy the
the person defining the job would
specify the string values and then
whatever that means in case doesn't need
akarin and then pass it on to the build
but there are also other kinds of axis
that's a lot more semantically tied to
the waging is behaves so for example you
can have the slave axis which says you
know the executed disturb on these
machines you can most have a jdk access
which already to say well run this thing
your multiple versions of jdk so
actually so the before ice so instead of
talking too much in the slide them is
just a show this to you so so here's
well let's see so i can so i created a
matrix top which you can do from here a
new job to the multi conservation
product and in the UI when i well in the
configuration page rather there this
section that defines the axis so I
define a three kind of axis the one is
so let's say let's pretend that I'm
doing some kind of testing so I'm gonna
test the my web app is the three
different backends and then on the three
different versions of JD case because
sometimes takes no passwords will behave
funny depending on the versions and
maybe something else is like a two
different architecture of the CPUs so
let me cut down some of these guys and
then here instead of doing the attribute
to make things fast enough I'm gonna
just skip asleep for three seconds and
then they clear that has to be done so
I'm using this notice that I'm using
variable references here that's
referring to the actor in Bali so the
parameter so
this I have now three axes so three by
three by two so that makes it 18
different combination and when I execute
this guy you'll see that in a kiri that
the whole bunch of stuff that's not cued
up and then they are executing in turn
and eventually they'll be old over and
then we you get the results so naturally
in this case we expect them all to
succeed or actually not to go I think
okay now it's all done so we can go look
at the individual results so for example
the one that I'm right now looking up is
the 32-bit the Java five is MySQL so
sure enough you look at the the how the
variables have been expanded you see the
body that we expect maybe I need to do I
need to make this bigger can people in
the back see kind of okay yeah so that's
the basics now the when you start
building this it's kind of easy to get
carried over and carried away and start
defining a larger matrix study if so the
18 if you have enough computers to throw
at the program that's good but the 18
confluent combinations are still pretty
large number especially if you you know
if each one takes say 30 minutes to run
so one of the things that we drink
instead is it provides you a means to
filter down the things that you can
execute so in the access configuration
you can define this combination future
so the one way to tip so there the help
that explains what you can do here and
it's all these sample syntax and whatnot
but what I wanted to show here is let's
say we wanted to cut down on the number
of situations we have I could use this
magic variable called index and I took
the module to drill it down to half and
so what the thing is to do is you notice
that there is a like a semi I mean very
semi greyed out blue and unreal blue I
so what it's doing is this time around
it's only executing this the the one in
this real blue so it's the Jenkins had
kind of figured that which combination
can be removed without removing the
covered so if you look at the individual
axis you see that they all almost always
have even coverage because you know if
if it wasn't more than that me if it if
it ends up removing all the 32-bit tests
and they only leave the 64-bit test it's
still 50% of the combination but that's
useless so the link is there some
arithmetic internally to get this right
another common thing you can do is is to
run a few things first before span span
that I found out and execute all kinds
of stuff so it's not sequential way so
it is sometimes it happens that this
imma make a very silly mistake that make
the entire test fail everywhere and then
that's bit silly because I mean each of
these execution is constant some CPU
cycles so what we could say is the
declared is I'm sorry the touchstone
build which basically says let's try
these guys first and when only after
verifying that they work we'll gonna run
the whole combination so if we schedule
this and then if I'm creepy nothing my
separation you see that in my skewer is
building forest so that's what declared
that the touchstone and then I'm only
after that successful it exactly start
executing the rest and if they fail they
need the other guys won't be even
executed and the beauty they clear the
failure so that's sort of the simpler I
guess the quick introduction of this
matrix build feature it's been around
for some time but it's it's not as often
used as I thought it should be so that's
one now so I was talking about you know
some of the common idioms that worse
that justifies having better support and
another common idiom in these
choreography is the the act of joining
so imagine you have number of jobs just
triggering each other so let's say maybe
you had some like a build here and then
after that you got the test execution in
code sorry the code quality analysis at
the same time and then once both are
done you could you can you can tell them
to wait for both of these and then after
that is done you could maybe execute the
report job so this kind of thing is
common enough that you have a joint
plugin now as we will see later in today
you know once you start doing more
complex choreography trying to sort of
figure back into the number of primitive
idioms that we discussed thus far it's
bit painful but if this is if something
if what you're doing is simple enough
that in a year you'll only need to use
this to get it and I mean these are
still very useful tools because it's
pretty simple to understand now so when
you start using multiple jobs and then
have them work together one of the very
useful thing you want to do is to be
able to copy binaries from one build to
another so let's say you know you got a
one job that does the mean produces a
build the binary and I mean the compiles
and packages after your file and stuff
like that and then let's say you have
another job that executes the test right
so because these teams I mean there are
these often followed two different I
mean they follow onto the different set
of teams so it makes sense to have them
in few jobs and so when you have set
setup like that what you want to be able
to do what you should be doing is to be
able to copy the files from the the bill
that has completed into the test that's
being executing I mean that's currently
executing the leads so the plug-in that
does this is the copy called the copy
artifact plug-in so you can by using a
various criteria you could specify where
the copy bits from and then you can also
control where the bits will appear those
the files that were copied will appear
in your workspace so that you can use
them in your test execution so in my
previous life I've I've used this a lot
too because I have we had this ant paste
build script which had the every dog
house in the library folder so this was
very useful in getting the newer version
of the libraries that we depend on
overwrite the check that copy and then
run the test to verify that this new
version of library still works with us
and so on so this is a basic building
block of the entire interior I mean the
interacting jobs
so the the thing that makes this
interesting and and I touched on at this
little incredible slide when I said
various criteria is that when we think
about copying files from one of the
bills and there are all kinds of bills
going on I mean so you might have you
know it's almost like it's almost like
these binaries or volume control I do
have a you know you had this bill 10
that had certain set of changes in the
next build contains more changes so you
see this it's almost like you know just
like the source code is boarding
controller you can see that the
artifacts in Jenkins build records is
like a binary being version controlled
now so when you use copy or tax planning
or some of the other plugins the way you
specify which one of these five guys you
want to pick up the build from is by
using something like label likely there
is that you could say you could imagine
that that's a built for teen was the
last stable build meaning the build has
a blue ball or you could there the other
kinds of labels that people could mark
manually mark the build as important by
preventing it from getting garbage
collected and then you get the lock icon
in the deal history and then that's
called last saved build so often
sometimes people use that to indicate
like a quality signal so if they you
know some developers did know that this
is a good quality build they would mock
that and then that's basically telling
the other guys the other teams that this
is a bill that they want to be picking
up not a random last successful build
which may or may not be a good quality
so this ability the attached kind of
labels to these numbers because the
numbers by themselves doesn't really
mean much disability to attach stuff is
even more useful when they have the
semantics that make sense to you as a
positive somehow something that's baked
into Jenkins like last say build so
again going back to this example of
having the QA team and they're having a
separate QA team and developers you know
the there's this informal notion of
signing of the binary from the
development team to the testing team all
right sir
that's the kind of late or that we can
attach the build so because if the
developers think that the build 12 is
what the TVA guys should be using it'd
be very handy if you have a label that
designates that kind of thing and maybe
if you can have another label that says
this is a binary that's deployed to
production that's also useful because
when the bug reports come from
production you can tell that what this
is about I mean which what exactly what
changes it contained and what not now so
the what and this is further more useful
if you can actually automate the
attachment of this kind of label into
the bills so let's say again the back to
the signed off the QA level so let's say
if the development team has come up with
two jobs they develop our unit tests and
then maybe find wax execution and then
if we could say if those both which both
of these guys have passed then the build
gets this sign of the QA label
automatically in that way you don't have
to manually maintain this label of
figuring at which field is supposed to
be currently handed off to the QA but
you could entirely automate this so
that's what we do in the promoted bills
club in which the reason it's called
promotion is I guess that's the sort of
the jargon that we used in in son and I
actually don't know why but I guess the
build is saying that in that environment
I'd be the build was produced like a
more or less regularly like every every
night and then after the QA team has
tested and signed of the that those
previous build house is sort of given
the higher quality they though like a
beta or the Alpha or something like that
so this act of making it more visible is
I guess it's called promotion so when
you automate this feed sort of you
specify the promotion criteria meaning
how you'd when you know what's necessary
which dogs need to pass for the binary
TV for the bill to be pro most promote
it and you can also control what happens
after a promotion you could take there
you can specify Jenkins that we've has
to do certain things
after the promotion happens and the
reason I like this is that the this
label is a really a nice handle point
between teams but if you think about how
different teams work together right so
the QA team doesn't need you actually
care hire the double pentene came to the
clear that this particular build is
ready for the handoff and it that sort
of they have a trust between them that
this anything that sort of handed off as
as this ready for QA consumption the
robot he must have done some reasonable
ground work to make sure that it is the
case and insulator if the development
team has decided example India the
example that they wanted to add another
set of test execution to the mix then
the QA team really didn't care about
this so by having say you know when both
team automate stuff on Jenkins having
these two teams not depending each other
stuff configuration is a good thing and
that's what this promoted build plug-in
provides so I'm clearly going bit slower
than I want it so I'm going to run this
quickly so here let's say we have this
CI job which is pretend that let's
pretend that this is building every time
a new commit happens and then I'm
configuring a promotion here so this is
a promoted when so that's the that's the
entry point into this promotion
subsystem and I'm creating one promotion
process named and it off to QA and then
that happens when the double protest had
successfully passed so then well there
that I didn't think if you and I'm just
creating a bogus jar file and then I'm
taking the I'm archiving this foul and
the fingerprinting it it will come back
to King up in later but that's basically
what it does oh and then after the build
is done I'm gonna execute the test and
my test to simulate the realistic well
so simulate the realistic test I'm
making it succeed and fail in 50/50
chance by using a little bit of groovy
script so I have to try a bit of luck
but here before I get the into executing
the test I'm using this copy
artifact plug-in to grab the last
successful build but this isn't the file
that I wanna test and then I'm also
recording it in Europe into the file
that's being tested so I'm going back to
the CI so I pretend that someone put a
commit by ammonia leak in the buildin a
button so the build 15 should happen and
then now that's executing the test ok so
that succeeded so that so this build 15
was tested by tester D and then that
succeeded so if you go back to the page
you get you see this star icon
indicating that the promotion will
happen like sometimes I should get
unlucky and then let the tested fail in
which case I wouldn't need to get
anything ok well you see that's
activities let me try it one more the
problem is random numbers is that it
almost seems to have the life of its own
it's like sleeping again
I know you can do it yes so now it fails
so I don't get the promotion
so as IQ I mean the now let's pretend
that I'm now a QA team so what I want to
do is I have a job that executes a more
expensive QA test and then I only want
to deal with the binary that's handed
off to QA so this is a job that the QA
guys control and I have a trigger that
says this job is supposed to run every
time a new promotion happens in the CI
job and then in the actual build I am
first copying of the same a door jar but
not from the last successful bill but
I'm copying it from the last promoted
bill that satisfy this criteria so in
this way the QA team will not be a
bothered by you know whatever a
successful job but it only deals with
the hundred or fields so if you look at
the time stamp I guess I we had a number
of success here today because I guess
our da we had a promotions so that's how
you know how these whole things are put
together so again the point that I
wanted to
is that the treaty the development team
doesn't really care about how other
teams are consuming in the binaries all
it's doing is that the giving satyr
stamp of approval to certain bills that
qualifies talent criteria so this demo
that I showed kind of depends on the
copy artifact plugin which doesn't
really work well for maven or IB that
wants to download binaries from the
depository right so that's where the UM
the mailroom the upholstery plug-in
comes in and what it does is it exposes
the virtual memory and upholstery from
every build in in Jenkins so you know
come after all the memory upholstery
system HTTP server responding to certain
inbound requests that follows some
structures so it's relatively easy for
Jenkins to fake a real Mabel server but
without having the Australian it and not
only can it serve artifacts of the build
that's produced it could also sort of
show you all the dependency that was
used in the field so it creates a single
virtual repository that contains every
dependency that this particular booth
has been produced which makes it very
convenient to run the test so you could
say if this test execution uses this
particular last successful thing is
build a CI build as I'm maybe and
upholstery and then there if you go to
the wiki site you'll see how you can
update them create a poem that that's
just that then the whole scheme could be
made to work is made and reasonably well
now so so that's about the I think
that's well studied so that's about half
the puzzle the other half is that the
mouse okay I'm sorry so let me try again
so so far we proved that you can do
interesting choreography between jobs
but the other part of the important
challenges actually makes the data more
visible to your users because if you
look at how we've configured stuff yes
if you see the configuration screen you
kind of get the sense of what's going on
but if people just come to the UI they
only see like related naval jobs and
they don't it's very difficult to get
the whole picture of what's going on so
often you end up having
I mean just a building engineer knowing
the entire picture and everyone else is
kind of clueless which is kind of good
for job security but it's really not
good for the teens so there's a number
of tagging in this space the one that I
wanted to show you first is this
dependency graph to your plugin
so what it does is actually and I can
show you live here is that it
understands the relationships between
different jobs and then I mean we plot
that in your graph okay so so what it's
doing is because the CI job was
completed
GI Joe maybe I shouldn't press this
button so the CI job is supposedly
triggering this guy so you get a black
line and this being copied so you see
the relationships between who is
consuming what outputs and few is
triggering what the other ones and so
that gives you some good insights into
what's going on and this is available
also for a job so I mean for abuse if
you create some views you get a smaller
subset of it which is a bit more
comprehensible I wanted to also make
this extensible so that the other
plugins could add interesting laughs but
that still be done later now another
very useful visualization tool is called
the build pipeline plug-in and so it's a
it's sort of brings in your different
aspects into different dimension into
how you to get that so if you go back to
um so this is a visualization of this is
a visualization of what we were just
doing in the CI and dev test so in the
configuration I was saying I was telling
this plug-in that in a go figure at the
pipeline that starts from the CI job and
then it was smart enough to recognize
that is the other word another job was
cooked downstream it kind of supports
the parallel execution stuff like that
which is nice but so the what this
emphasizes is that is there is a certain
context that carries from the CI build
to the test execution that's the way you
should read about the I mean the way you
should read this picture is I mean
every box like that off shouldn't touch
this every every box here is sort of a
new present a change so if you are
developing the team you're committing
some changes and then that would show up
here and then it's going to test it by
one guy and then it's gonna test it by
another so that individual engineer
working in the team you actually don't
care about it and you care more about
these relationships as opposed to these
relationships right so that's why this
emphasized in this direction so if we
start the build it's I guess more
realistic Elite happen by someone
kicking it and then this happiness to
see I drove and then should execute
should be executing a test so I wanted
to show the failure so that you could
this so that you can see the retry of
course I'm still subject to the got the
randomness I'm not guessing away I'm
lucky but in a way I'm not lucky because
I know having builds fail I wish I'm
this lucky in the actual production test
goes okay let me try a few more and if
this was our the ski bus okay good
and so if it fell off example I could
just rerun this portion and then that
means just it will you know ad execute
the test against the bill 20 of the CI
job and then it will update its status
so this has me used very successfully by
a number of people and it's one of the
plugin that's highly recommended okay so
the fingerprint now i touched briefly
touched on this audio in the demo but
this is yet another angle to look at the
data I mean yeah it's it's a bit of a
stretch they call it the visualization
because that's the actual it's sort of
3d output is somewhat limited but it's
very interesting so the the way you
think of fingerprint is like the life
log for for a blob when I say blob it's
things like file
jar file or whatever things that you
care about normally it's attached to
make up a binary that you wanted you
want to track so you know I hope suspect
many of you have
- here and now if you think about I
tried to draw some analogy between the
air travel in Jenkins and so you know in
the airline I mean in the air travel you
have a number of things in species in
the work flow like the airline check-in
counters and then TSA security points
and immigration officers and so on so
these things it's kind of like a dinky
stove in a way that they have a set
processor what needs to be done and then
defeat this thing over and over against
different travelers and then they put
together this interesting way so if I'm
you know sat on the airport ready I mean
I guess most of us Airport reduce things
in this order but sometimes there's
extra security checkpoint after you go
through the immigration like if you fly
to Israel and so on so you have a
workflow that combine these building
blocks into pieces and then people are
supposed to follow this which is not
unlike our binaries being born in the
built up and it goes through the test
and then maybe it goes through the find
bugs and so on and so forth so if you
look at the built history you have a
single job you see that could build 12
build 13 built 14 and that's like
individual traveler going through the
same checkpoint so you get you get to
see some interesting things like energy
statistically speaking how much bills
are passing and whatnot but so in this
some of the the way you think of the
fingerprint is like if you think of a
single traveler like like me going
through all these processes and then the
it bill the fingerprint sort of keeps
track of what that binary has gone
through you know when did he go through
the airport when did it go through the
air for checking when did it go through
the TSA if you have a pat-down he goes
through the immigration which passport
he had and stuff like that I mean so
what the in context of CI what it does
is well you know what changes that this
binary have what was the test set of
tests that was executed against it when
did it happen who started it and stuff
like that was it swear did it fell did
it manually distort
so on and so forth so you get a lot
accurate sort of audit trail to the
given binary it is very useful when
actually binaries blows up in production
and so it's kind of like a
respond in the airplane and if he wants
to figure if the government must figure
out where he came from and how did he
manage to go through the security so we
provide that kind of the auditability
the forensic analysis trail when things
go bad so the actual mechanism of this
is ideas the md5 checksums so if every
time the Jenkins was told to record a
fingerprint it checks the md5 I mean
give grabs the md5 checksum and then
they called the the build that had seen
the file against it so if we notice that
the same file has appeared between the
bill 15 and verse 13 if they have the
exact same md5 checksums they are
obviously the same file and so that's
how we can tell the relationships and
that what's interesting about this and
the reason this is useful is it doesn't
really care if or how these two jobs
related it doesn't have to be and so you
know maybe these files have been copied
through the copy artifact plugin maybe
this file have been uploaded to external
repository manager and they showed up
later it doesn't needi care but the Big
Brother studies Jenkins is always
watching where the files are going so
yeah I guess I talked about why this is
useful that it is provides you the
tracking down the audit trail now in
production it often happens that the M
there's a small shared components
between different teams that's consuming
the into gradually consumed into the
bigger product but because the
integration between these teams it runs
slowly by the time your component is
used by this evil product X Y Z it could
be running like a couple of version
behind or like the one that's produced a
year behind so as a maintainer of this
component when the production team
discovers a bug you know you're not
entirely without this accurate audit
trail you can't be really sure what
binary has been used the word statistics
has been already committed or something
like that
so with fingerprints for example you can
record it against the bills that I mean
the binaries that's going through the
system you can for example come to this
project relationship let's see project
relationships UI
and then you can you can sort of have
these jobs appear side by side so this
is created this up front so that some of
this are more meaningful so here for
example you can see that I think I
wasn't supposed to Christmas so the sum
of this is what what I wanted to show in
some here is that this and the build one
for example looks cool because it's got
blue but if you look if we compare this
is if you contrast this with what have
happened in a test cycle you see that
this was actually bad that the tests
have failed now and then it looks like
it was fixing well they we can also tell
that the build number TV wasn't used
anywhere so this probably was ignored
but the the other build 3 had kind of
brought the test back into good shape
but similarly here the if you look at
the build 11 looks like the test 11 had
fail so maybe this actually was a bad
build but then you notice that the test
guys have we exceeded the test and in
ours okay so you can tell that this
doesn't sound like a cold problem but
it's more like the test environment
issue or the hiccup for some so so by
bringing those money for project side by
side you get a lot more insight into
what has happened as opposed to compared
to when you're looking at the individual
things so that's why I think this is a
part of the visualization so the so far
we kind of looked at the aggregation the
result which is what TM which is what
the visualization was all about but the
next step I wanted to touch on is how
you can define workflow in a single
place that is so far the oldest
configuration was spread into individual
jobs and in certain stations that is
useful if these jobs belong to different
people like the QA team owning their
sets of jobs against the developer team
owning their set of jobs this separation
I think is actually a feature not a bug
but if the dev team needs to manage like
a dozen job that scintillated but these
things are spread apart it kind of makes
it hard to see them so this is a another
area where there's a lot of activity in
going on right now and then one plug-in
that I wanted to highlight was the
beautiful opening so the Jenkins people
and groovy friends are good and groovy
people
good friends naturally we wanted to come
with Ruby DSL for executing the bills so
the reason it's called DSL is this
because it provides a high level
primitives for Jenkinson editing so you
see that the build is called like a
function what it's doing is it's
executed in a build wait for its
completion and then then have the result
assigned to B so that we don't boy if
you wanted to look at the result and
then depending on it if you wanted to do
different things you can you also notice
that there's a Guard rescue block which
is kind of like a try-catch except
racket is a reserved world so we
couldn't design different semantic state
so so we have to come up with our own
but you can it so that's a convenient
way to execute the theater because you
want to make sure that the teardown will
happen regardless of the actual test
success or failure you can also have
like a things like parallel that
executes multiple steps in parallel and
then so these are all the DSL constructs
but on top of that this is a gravy so
you can define an arbitrary abstractions
that you want if you wanted to loop
through some stuff if you want to add
some external data define functions so
that you could call them you can do all
kind of things with it so you know it's
what you can do is this is almost
unparalleled and it the other nice thing
about this is that it also comes with a
good visualization so here I have this
beautiful oh job type and then so the
the real meat of this is in this that so
here's my DSL I am so the C so if my
group if you will so correct what this
is doing is actually let me could be
water of this the owner here so I'm
actually I mean reading through this
list up for things and then executing
the say hello build by passing name as a
parameter okay so this would be a
sequential execution ensuring a fig here
on the build oops
okay that wasn't good
looks like yes my gravy that's not as
good as I thought oh I see it's missing
we closed parentheses so I guess thought
to myself you need to add this syntax
validation but you see that it executed
these four guys in sequence and then I
see already seen it but it also shows
you what has happened and if they were
running in parallel they work correctly
it's a lot of hats off to D the new
class you made it is actually already
here today
another plugging in this space that I
wanted to show that's also very
interesting to me is the Jenko plugin
and so what this does is that it
actually embeds the full-blown bpmn
workflow engine into Jenkins and
executed
so the BPMN is a standard and there's a
lots of tool that allows you to create
these things and what this guy made it
possible was to define some of the
workflow steps as the Jenkins tasks I
mean I say Jenkins tasks here that means
executing job and wait for it
completions and this being like a
full-blown work for anything you have
all kinds of constructs that you can
imagine for this sort of stuff you know
the beginning is you have this fork and
join stack that you can have a time that
you could have external event you grab
like a sub work so more than you
probably want to know but it's sort of
it really is capable of dealing mr.
cotton code real-world complexity and
there so I don't think I have time to
actually demo discs but you see comes
with the Eclipse plugin so if you
install this plugin you will see an
update Center on Jenkins you will see
the Eclipse update Center on thankings
and if you add this guy to your Eclipse
you get the nice GUI editor and the
workflow is available in the git
repository that exposed from Jenkins so
Jenkins itself is a good server and then
you can check out a workflow as I get
upholstery from the engines make a local
edits by using the Eclipse IDE
I'm actually I let me just show you the
ID part it is really nifty here so you
see that there's an ID editor that
allows you to do stuff like drag and
drop to create things and then you could
sort of chain them together it's kind of
fun to play with these diagrams for a
while and then you can commit a change
and if we appreciate the drinking's and
these definitions you'll be loaded up to
the system for executions so it's across
the whole work so like that and then you
know you can the other common tasks
ending at the emails and wait for him
and three vowels and whatever have you
so um so now we looked at the defining
choreography in one place but the I
think the another next step is sort of
well so for so we had this dog
definitions defined individually and
then we are talking about aggregating
their relationships into one place but
if but you could actually also put
really everything including the
individual job definitions into one
place so I wanted to touch that a little
and so this is also another new planet
so they can well so yeah as you can see
there's a lot of this lots of these
Platina than showing today is relatively
new so this is sort of showing the
degree of high interest among thinking
scissors in the workforce to make these
kind of things easier which is I think
is really exciting what this plug-in
does anyway is to create a DSL yet again
a gravy DSL Ruby people are you here the
so what we are doing is that you can
execute the DSL that different dialects
that create a new job in Jenkins so one
of the common requests in Jenkins is
that you wanted when a people added a
new branch to the repository
you wanted to create a new jobs for this
branch without that they were for
worrying about manually creating it so
scripts like this would do that you can
go to this API endpoint to be stuff the
branches and for each branch it creates
a job and the only variation here
that is passing in the brands name well
so the brands brands name
yeah yeah well I think I got the type of
here but I mean I was checking out the
brand of it should be just be I think
anyway so there I'm passing the brand
name and it's creating a new maven job
and if there's already existing job so
you're simply update the definition of
it you can also use this to make a small
adjustments to all the existing jobs so
it doesn't instead of defining every job
in DSL you might want to just hand code
one template job manually and by using
this using command you could load it up
as a basis and then you make the minor
tweak where you need to change it so
this would be a lot easier if you are
not very comfortable you know creating
this I mean the using in the DSL without
help of IDE and then you could also and
there are some gimmicks that allows
people to go down to a lower level if
you're seasoned Jenkins admin you
probably already have touched to think
it's plug in the XML you could do those
things and then the neat thing about it
is this evaluation of these scripts can
be packaged as a Jenkins job itself so
let's say in this other example of
looking at the branches and then
figuring out when the they created
create the jobs you can set this up as a
separate job that gets executed whenever
the commit happens you for in this way
instant as soon as someone creates a
linear near upholstery you can check out
the the build right away so the the
other one yes is the it's bit more crude
on the audio plug-in but there's a
Jenkins has a CLI job and the CLI
interface that you can access via set
and then example you can get job meaning
grab the definition of job in XML and a
little bit of a CD command it can be
placed whatever you wanna do and then
you use the update job command to send
back the new definition to the server so
you can vary with a little bit of you
know scripting ability I mean the only
aside like a shell script or power it
can vary
a lot of useful stuff is this again it's
bit crude but often it works very well
and then yet another thing is the
another approach to this problem is the
templates plug-in that we developed and
then this is what we put in the Jenkins
Enterprise like lobbies and it's kind of
shared the same trade which of these the
idea being that you want to define the
bus and then use slight variation of
this in number of places and kind of
like a cookie cutter form and then you
also want to be able to update the
definition once and then have the change
reflected everywhere where the differs
from job DSL that means that it allows
you to define templates in GUI not in a
groovy so that's I think that both
blessing and chorus in some way and it
also allows the individual users to type
in the actual difference is the UI in
the form and so on to fill in the blanks
so to speak as opposed to like the DSL
where everything is generated from this
single program executions so to wrap
this up there's a lots of useful
building blocks some very simple and
long-running to the emerging man that
can handle lots of complexity going on
in Jenkins and in sub I so these things
that allow you to automate kind of
interaction between different teams and
different jobs and in doing so you can
free up a lot more work and then offload
that into Jenkins and I think the other
important point is that the the amount
of new development in this space
indicates that a lot of Jenkins is are
actively seeking this kind of thing
which I think further validates the
reason I'm talking about this here today
it's not just me speaking that this is a
good idea but it's actually many users
in the workforce trying to do this so I
will say hopefully you try some of this
and there you will be able to take your
automation to the next level so that's
it of my talk I believe so thank you
very much and I if you have any question</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>