<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>How RESTful Is Your REST? | Coder Coacher - Coaching Coders</title><meta content="How RESTful Is Your REST? - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Learning-Library/">Oracle Learning Library</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>How RESTful Is Your REST?</b></h2><h5 class="post__date">2013-01-30</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/GQMfR0_t4H8" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">alright let's get started this is our
restful is your rest for those of you
who are not local welcome to California
beautiful weather today little hotter
than than expected
very unusual for San Francisco but my
name is abdel rahman ii my handle on
twitter means Polymathic coder this is a
little bit about me I'm a software
architect that just me I have been
speaking and this is my father before
time speaking at JavaOne I speaking at
our conferences big open source advocate
and I founded and started a bunch of
useless groups along the years Java
users group a spring one Mike torta head
again it's Polymathic coder and that's
my email at the very bottom if you're
interested in emailing me and if you'd
like that information I can give it to
you again at the end of the talk this
presentation is licensed under the
creative comments so use it as much as
you know just don't as long as you'll
make money off of it and and you and as
long as you're nice enough to site that
it's might work
so before I start over 1 disclose to you
guys that you're not going to see a lot
of code in this presentation if you're
here to learn how to build risk web
services using Jack's Rx or using any
other technology this is not the talk
for you that's going to walk you through
api's and walk you through all those
annotations this is a design this is a
talk that would walk you through how you
would do things right in a way there is
a little bit abstracted and independent
of any of those technologies out there
so then the first thing I would like to
talk about you know in the next few
slide is define one an API is an API
application programming interface I'm
sure that 100% of you of this room know
that already
but you would say that you have an API
when the functionality of your system is
exposed in the form of a well defined
interface of services that are external
external and externally accessible
whether to everybody else or whether
a trial component with a new company and
that these services have to be
programmatically consumables consumable
through some kind of for protocol this
could be only calls or method calls
within the language itself and we would
say that you have a Web API when the
functionality of your system is exposed
in the form of a Cova collection of web
services and that are publicly
accessible through a set of web
endpoints URL at this point and are
programmatically consumable through the
HTTP protocol so why bother web 2.0
again web 2.0 brought in a lot of
technologies that made access to data
very convenient and standardized in a
way what this did is all that data and
those services that were just sitting
there made them accessible to everybody
and caused this explosion of web api so
we have location-based weather data and
social data government data and
everything is accessible for us to use
all sudden what did this is it gave
birth to this new type of hybrid web
applications that we called mashups they
would go and combine all of these
services to create value added for the
user aggregated and visualize all the
ADIZ data in am very interesting ways
and he resulted in this four years of
base that demands a lot more than a
single service can offer so we have me
and one and then what you see the
closest Moroccan restaurants to my
current location on a map along with
consumer ratings and whether any of my
friends has recently checked in in the
last 30 days and stuff like that another
thing is mobile a lot we have now right
now a lot more apps than browsers out
there we in one move out mobile phone
it's not usual to have somebody install
30 or like 35 or even like 50
applications that they actually use
mobile traffic is diminishing web
traffic exponentially we could see that
reflected in the problem that both
Google and Facebook are having right now
in monetizing their their traffic
because they were not 100% model they're
still looking at the word they looking
at their users as people that actually
sit down on the desktop and use the
browser so you can think of mobile is
mashup 2.0 right so now your goal behind
exposing an API of your organization is
not for people to use your service
uniquely or like for you to give people
an application on their iPhone to
conveniently use your your services but
your goal should be for your service to
be matched up with other service and
it's 100% beneficial to you because it
would drive traffic in your direction
they will allow you to learn a lot about
your own service and how they are being
used it would expose the things that the
user really want and that need for them
that that need to create that mashup it
would make you realize whether that's
something that is included in your
vision you want to improve your product
to include or not any will also create a
lot of good wealth with new potential
users if I'm a user of LinkedIn and some
mint I happen to come across not a
mash-up that uses Yelp for some reason I
am gonna kind of get a relationship
create create you know maybe installed
yet application later on because I
actually like it because I got that
exposure through that mashup but what
this implies is that the majority of
traffic is not going through your own
app for your website but it will be
through that API you use that you expose
which make the API which which make your
application it's the API which makes
your API the most important thing in
your application itself so the
challenges that we face that these empty
implications bring is that you have very
little control on how your API is being
used you do not have control how your
services are we are going to be
orchestrated or used in in combination
and and that once you expose that API
forever for everybody to use it's there
forever the minute you have customer
number one using your API you can't
change it and change it anymore because
you want to be backward compatible or
you're going to face a bunch of people
off that aisle spinning a lot of money
consuming it so you better get it again
right the first time so getting it right
what makes a good API I did a lot of
reading out there I've written a bunch
of web services and libraries out there
but they're all like things that the
most important thing that I learned is
that an API must be very easy to learn
and use how can we do that if we want it
to be intuitive you know the principle
the least astonishment you don't want to
go too cute and do something that is out
of the ordinary you want anybody that
you would given the API kind of figure
out a way how to use it like an iPod
give it to a five-year-old kinda find it
finds its way its way to it and you want
it to be consistent consistent by basing
it on standards that everybody else
knows and users already and if there are
no standards you want to adhere to a
very strict conventions the conventions
that you would document anyone also to
be hard to misuse as well and you want
to make sure that you have a really good
documentation documentation out there
well this presentation is about rest so
I guess we're gonna have the slide to
tell everybody what the rest is now that
you haven't heard it already but a risk
stands for representational state
transfer this came out of a dissertation
of Rahway Roy fielding the link is all
is on the slides if you're interested in
media practically chapter 5 mainly in
chapter 6 it's pretty good and the
dissertation was titled the
architectural styles and the design of
network based software architectures so
what mysterious was about leveraging the
web as a platform in creating this
architecture that is based on the HTTP
protocol where the goal so certain goals
first of all who want something that can
scale what's something that has
interfaces that are very very generic
what something is independent that has
an independent component and will have
something that has these intermediary
components that would deal with
cross-cutting concerns like the fact
that we want to put a load balancer in
between our users and our servers or
want to improve performance who want to
put some kind of caching server and
in between so he came up to achieve
those goals he came up with a set of
constraints that we should work with it
to make our or to call our API is at
risk and these constraints have us
follow that this must be a client-server
architecture in the sense that the
server is being them it can be changed
independently from the client itself and
it should be stateless stateless
conversion and no state is maintained
between sessions it should be something
that is cashable and it should have a
uniform interface and this is the most
important thing because while writing
code that's what you're gonna have to
deal with is the creation of a uniform
interface we're going to drain into that
later and it should be a layered system
as we talked about I mean you have your
load balancer and your application
servers and such and he was this thing
called code of demand that he said that
it's very on the Menace and it's very
optimal this is something like you know
executable code downloadable code from
the server that can be executed on the
client like a Java applet and whatnot so
the main part of the presentation is API
design see how am i doing in time toys
on API design right so you not there is
for you to say you like to realize
whether how our restful api is
Richardson came up with this vist
maturity model for you to judge the
maturity of your API and the widgets
Richardson's maturity model is that from
four levels zero which to say that you
are completely not arrests level one
which is here a little like we're sea
level two which is you know you kind of
rest and level three which is where
where some of us or a lot of us wants to
go right so before we drill into the
detail or details of which it's at
maturity model I want to presented you
guys with this address book application
this API that we're going to design
during this presentation simple address
book application allows users to man
the contact info user has a user name
and its associated with set of contacts
and a contact it's constant constitutes
of a unique ID and name and a phone
number
we have the requirement in the form of
user stories I want more to add contacts
view all can or contacts view a specific
contact modify specific contact delete
one and we'll also to email specific
contact to somebody else right so
according to register Richardson's
maturity model if you are in level zero
if you are only using a single single
URL that means and you are using a
single HTTP verb to expose this
functionality or this piece of
functionality and say is a web service
all right so what you want would what
you want to do if you desire to be a
level zero is you want to go and
identify all possible operations or
functionality that you are would that
you want to expose and you want to
indicate what kind of operation you want
to do in the payload right and you're
only dealing with one endpoint an
example of that would be a soap soap
based our RPC would service when you
have one endpoint for that particular
web service called
address book and you have some kind of
the description language with go in this
case that would pretty much describe all
the operations that that is being
offered through this particular endpoint
like I have a method called add contact
of Bob or like in the address book of
Bob of abdel-rahman you with this
information look up all contacts it in
all contacts delete contacts and such
such mark as favorite so then the point
is one URL right and your operations are
specified in the payload good old so
that would be level zero all right so
moving up get in making things a little
better and then would be level one of
Richardson's maturity model right and in
level one you would be leveraging
to Purls that means that per one of that
firm method for one of the functionality
that you are deciding to expose as a web
service you're gonna have a URL and
you're going to encode all those
operations their parameters and
everything in there in the URL itself
and you'd end up using a single verb
because it would be you're just pretty
much getting that URL I would make sense
in the next slide and level one the
example that we'll use or what it is is
you're all tunneling so if I want to add
a user to my address book I hit the URL
WW slash address book which is my
service right there and slash add
contact and this is where my operation
is so on level zero we had that in the
soap body that we had the operation and
soap body right now just move that to
the URL we did like add contact and then
we provided all the data that it's
necessary to carry this operation as
query parameters all right all that kind
of stuff over there so what advantage
does this pretty much give us is you can
just hit HT port 80 and in you don't
have to worry about firewalls or any any
or any of that mess all right so the
problem with this is it violates the
violate some to get the fact that get
should not be used to to change state
that get is a safe operations in all of
those Web Services all out there that
implement HTTP our medium is a term
called item and item potent so it
violates that because when you hit that
you are all would get something changes
in the service so it's not it's not the
greatest thing out there the next one is
level two level two says only as you
have many URLs and you leverage multiple
HTTP verbs out there right if you are at
level two you might start calling
yourself mist full at this point right
what this involve is involved
you are you're going to have to create
this uniform rest interface that we were
talking about that was bolded at the
previous slide when we're talking about
what it is is right so the next section
or actually most of this presentation is
going to be focused around creating this
uniform interface based on the HTTP
protocol - so you can call yourself rest
so the first thing that we want to do on
the first portion of this one is you
need to actually identify what your
resources are all right so a very simple
trick to do that is to just lay down all
your your use cases right there and try
to go and find all the names or like all
the nouns at that particular use case
that you use cases that you have all of
them this this could be a simple job
with a lot of these thing will be not
very very much the same way as you would
create a domain model for your entire
application you can your entire user
stories and find the nouns some of that
sometimes if all of them are explicit
sometimes some of them are actually
implicit in our case we have two nouns
we have the concept of the business
concept of the noun of a user and we
have a contact so just went and made a
bunch of circles around all of all of
these guys alright so after we identify
our resources we say that we have a user
and this user is uniquely identifiable
by a user name and we have the concept
of a contact contact that is uniquely
identifiable by an ID all right so now
what we need to do is create a URI
namespace for these resources that we
just identified well something that they
could be uniquely referred to within our
application where there are our own API
right so first thing that we want to do
is want to start with the URIs that
would identify the collection of
resources of the same kind all right
so for users we just started doing slash
users with an S this is very important
right there that you include an S there
by convention you might have a diff
opinion but that's okay and if I forgot
to disclose that a lot of the stuff in
these presentations of just my own
opinions and and my the convention that
I decided to adopt being as close as
possible to any standard out there
whether it's relevant or not and because
there are no standards yet so I didn't
we have slash users and slash contacts
as to you are aur eyes that would refer
to the collections of resources over the
the collections of users and collections
of contacts right the next thing we want
to do is we want to actually go and
create URIs for the individual resources
within these collections all right so
let's assume that there is a user of
this application called
Abdel somebody whose username Isabel
right so what you would do is you would
do simply slash users slash Abdel and
this would point you to the user whose
username is Abdel we do the same thing
for contact and we say slash contacts
with an S slash 1 2 or 3 and this would
suppose to point within our applications
to that particular person of that
particular entity with that would that
ID right so the next thing is that if
you've created a system there was always
this association between these
components there's these relationships
that get created naturally right so you
want to ask yourself the next questions
that you identified these now these
nouns and you created this you our eyes
is there any association between any of
our resources resources so the answer
here is that a user has many contacts
and that a user is kind of the parent
resource of a of a of a particular
contact so we model this we create this
URI by using what we call chaining
resources together right that slash that
you use within a particular URI imply
that that then implies a hierarchy so
right now we found one so to be able to
refer uniquely refer to the contact
whose ID is one two three
and whose owner is the user whose
username is abdel we use the following
slash users slash Abdel slash contacts
slash one two three all right great
so next time it is then we ended up with
actually two URI is referring to the
same entity in same contact resource
with IEDs one two three all right
we have slash contacts one two three and
we have slash users slash
abdel slash contacts one two three
they're both pointing to the exact same
resource so is this right is this good
or not so it depends you should ask
yourself the question very important
question can I contact resource exists
independently from a user resource
within your application can you ever
have a contact just floating around that
is not associated with a a particular a
particular user and for this particular
use case no so what we do is we go in
and we cross over contact / one two
three right and then we refer from now
on to the contacts by their the username
they are associated with and their ideas
well these are really important
questions that you you might want to ask
yourself and you want to have the
minimum number possible of you are eyes
of I their point into your resource
because that's just gonna make your life
a lot easier right so um this is you
would be your your we identified the
resources the next thing in building a
uniform interface is leveraging the HTTP
verbs right and going back to our user
stories what we're going to do again is
just go in and actually underlining all
the birds at this time all the verbs
that would that are in our user stories
so I have add here I have view all
viewers specific modify is specific the
leader specific I have email a specific
to a friend make a specific marker
specific as a
favorite right so this would be the
equivalent if you are building this
application she'll be the equivalent of
identifying the methods who are going to
be a part of your service layer alright
so now we have them all before we move
on and go back to the example I want to
let you know that actually crud
operations which is read create update
and delete are something that can be
mapped to your HTTP that are methods for
your HTTP verbs so every time you're
reading a particular resource right you
would use a get every time you create an
every source you would use a post every
time you are obtain a particularly
useful a resource you would want to use
a foot every time you're deleting it if
you want to delete something we use the
delete HTTP method right this being said
right to view all abdel's contact
contacts and fulfill that particular use
case you would do get slash users slash
of those last contacts we would get the
collection of our contacts who that the
user that Abell owns all right if you
want to view one all you have to do is
just do a slash 123 and use get as well
if you want to add a new one you need to
use the post method and add it to user
slash abdel slash contacts if you want
to update it you would use the foot but
this time you would update a specific a
specific resource one two three not a
collection in this case I think you want
to delete a contact from abdel's address
book you would delete slash user slash
Abdel contacts one two three right so
it's a problem right now is that not all
we have not called operations that do
not really map to HTTP verbs we you know
in our case we have two of them we have
email in a particular contact and the
second one we have marking somebody as
your favorite all right so to email
Abdul so what the old solution for this
one is to use descriptive verbs in your
URLs and what we we might call our
controller calls right so
it is okay for you in that case you do
users abdel contacts with an S one two
three email and then you use a query
parameter to indicate who you would want
to email that particular resource right
there
so we'll email in the one two three
contacted up there owns two Sandia
Polymathic coder comm marking a bells
contact whose ID is one two three as a
favorite will be done through a foot
right here users abdel contacts one two
or three mark as favorite notice two
things right here a lot of us would be
very tempted to use a get operation
right here right it is wrong because you
use a get operation you change the state
of that particular resource you are then
you are violating the fact that get
should be a safe operation and that can
be called as many times as possible in
the state of the server server is not
going to be changed so what you want to
do is you want to kind of use but to
convey that particular operation right
so the next thing i want to talk about
which is kind of going a little off over
tangent is the convention for you you
are eyes for your urls
right so keep in mind that urls are case
sensitive
right and then using you know upper
cases lower case it's just gonna
introduce a lot of confusions for you
and for your users so what you want to
do is just use everything lower case all
together you know at once so you don't
even have to create that confusion i
mean you don't want slash users with a
big you and somebody else is calling it
with like an lower lower case you and
they've completely different resources
as far as HD HTTP is concerned so avoid
caps at all but again my opinion so one
another thing is links are usually
underlined in browsers and a lot of us
would end up using end of scores and
there are nothing and nothing wrong with
using end of scores but the problem with
that it can't the end of score would be
a right on right above that that the
underlining and it becomes really hard
to read so you can avoid
then just start using hyphens from that
point on so you see right here instead
of mark as favorite as one word to
improve readability I use hyphens and
they did not use camel casing to and
they did not use use camel case and
instead so um the next thing of the
European in this uniform interface is
what is called a referred to invoice
Fielding's paper as resource
representation right so for any resource
or a resource that is identified by the
same URI right represented we want this
to be represented in the form of a mime
and we're talking about representation
in the form of a mime type JSON XML you
know whatever data even comma-separated
value whatever makes you happy
alright that's the kind of
representation that we're talking about
but for you to have a restful api you
want to support multiple data or
presentation right and give the user the
client of your particular API the
ability to say return me this particular
resource as JSON or we turn me this
particular resource as XML or anything
you might not support every type in the
universe but that's completely you can
you're gonna respond accordingly but you
want to have that capability built in
and my favorite way of doing it is to
use in you accept HTTP header and
sitting the mime type of the out there
to explicitly for your client you say
give me XML or give me JSON hate file
extensions avoid using file extensions a
lot of people who use them they're like
dot JSON or XML avoid ears in those my
own opinion a lot of people tend to
favor that as well for easy so I might
I'm probably being right now little
little too true dogmatic and as far as
address goes and also what you want to
do is
wanna support the manipulation of these
resources through different data
representations you want to be able to
add to a particular collection
collection and give the client the
capability to give you xml give you JSON
or give you anything else and he would
indicate what's there or the exact mime
type by specifying the content type in
the HTTP header right so um the last
thing that I would like to talk about is
leveraging HTTP status codes as a
feedback and a lot of us don't do that
but there are a lot of them there are
like pretty much five families the 100
and the 200 for success the 300 for
directions the 400 for client errors and
the 500 for several server errors this
is a short list that you might want to
be aware of and kind of use in your API
to give feedback the 200 okay it's
something that you would use to indicate
the success of a particular operation if
somebody hits your API to say mark as
favorite you will be Turner 200 okay as
an indication for the client that that
actually that that the operation that he
or she requested I was carried
successfully but at the same time a 200
okay might be able to return an error in
the body it's completely okay for you to
give 200 okay with adjacent body or an
XML body saying that this operation was
not carried and here is the error as
long as you document that there are a
lot of them you would return at 201
created if you post in response to any
post to a particular collection accepted
is this assume that you expose this web
service that would start or kick off an
asynchronous operation so the best way
to say that the operation the
asynchronous operation was kicked off
successfully is returning at 202
accepted bad request is bad request all
right I'm authorized forbidden you
familiar with those there on security
not found let's assume that somebody did
slash user nine nine nine seven I do not
have that particular ID I would be
and a not found with a 404 and in the
body I would say that that particular
media that particularly use oral contact
is not there it is not was not found in
my database
alright method not allowed not
acceptable conflict for example on
somebody was trying to do an operation
that that would cause the server to go
into an inconsistent state and
precondition failed if you require the
operation one has to have API one has to
be called before API to and somebody
called to before you might want to say a
precondition failed you're trying to do
something that that is not possible
right now given the current state enough
warn you guys with this slide and let's
talk about the level for the restful of
the rest which is Hatillo so hey DL so I
can't say but what this stands for is
for hypermedia as the engine of the
application state and what this pretty
much says is modeling the business
workflow and capturing the different
state of a particular resource right and
using the different possible endpoints
to to transition from one state to
another one alright and what this pretty
much entails it's very simple as long
let's assume that we have this business
process I'm going to make up something
right now hopefully it would make sense
so forgive me in advance that you've got
an employee he needs to be hired and
before we have that it's particularly
employee before he starts working on day
one he needs to go through some kind of
HR process to make sure that this guy
has the proper work authorization to
work in the u.s. whoever it is so we
have this application this API that's
being exposed for start working or pay
this guy all right so we first of all we
we hit the first API to kind of say that
we're interested in the guy alright the
second API says that complete
the work authorization document and the
third API is start working right so if
you were if you go and hit the second
APL that says complete work
authorization what you get back is you
get a link to start working right and if
you go and you hit them you start
working you get like another link of you
know fire this guy or promote this guy
or demote this guy so what it is is
depending on the current state of the
resource itself the server responds with
a series of links given the possible the
other possible API is that can be called
giving that particular state because if
you go and hit start working with that
completely
if you hit if somebody did not complete
the document and hit start starts
working you would respond with saying
that you know precondition failed or
something like that all right it won't
make much sense and you would get a link
directing you back to the state that
you're supposed to complete before
before proceeding and this is a simple
state machine so for the sake of being
brief and to disclose that you don't
really have to go and take it and take
things to level four and go to this
extent to call yourself festival this is
very beneficial if you're doing system
integration right there and this is very
good if you are if you have machines
consuming the api's that you are
exposing it's very beneficial that way
then next thing that I would like to
talk about is it's not enough to say
slash users slash it down slash contact
one two three and get all that JSON
right there sometimes we have a very
deep hierarchy of objects and you don't
want to dump 50 Meg's of JSON on the
user once you have 1 million records on
your data when your contacts database
that's guys a popular guy has so many
friends you know and we can't do that we
can't afford that server server load so
something that comes to mind is to just
fascinate I
a lot of years of passion and only give
people you know the data that they
actually need how do we deal with
pagination and creatives you are your
eyes without violating the rest
principle a lot of people out there are
doing it differently Twitter is doing it
differently than Google and such but one
thing that I I hate and that you must
not do is slash page /
hierarchy and we're talking only about a
subset of the data subject subset of the
use of not page 1 page 1 is meaningless
it's just like you find in that
particular particular that particular
page that's one two is that if this guy
keeps adding contact is page one of
today might not be page one of tomorrow
and especially if you are mobile and you
know you went to page one and the next
day you decided to actually click the
next button which takes you to page two
he and all these confusing data is
completely inconsistent so some people
do it inspired by the way sequel does it
by using limit as a query parameter and
remember that you always want to hide
all this complexity behind this little
you know in the query parameters behind
the question the question mark they
would say limit 20 and offset 20 that
means from number 20 you know give me
the to give me 20 records from that
point on I don't think it's enough so I
was going through all these standards
and specifications to find the way that
is that would be most intuitive and most
natural then I stumbled upon RFC 5 0 0 5
which is feed paging and archiving for
like atom and all of those things you
know for syndication now these people
use and they found these little charms
that they use these the concept of next
they have next and previous which is
very good because if you're paginate and
you also want to have some sense of
direction
alright and they have this concept of
item right and so I decided to start
using those again this is not a standard
this is my own opinion so be very
natural for me to say slash contacts
then give me the next 22 item and this
is the ID of the contact contact and I
would say whether it's inclusive or
exclusive right so my pages are kind of
not dynamic but they've anchored and
they are relative to the actual to the
actual ad item I want the next 20 I want
the previous 20 in relation to this
particular item all right not page 1
page 2 that thing they really hate with
passion but a lot of people are doing it
out there I forgot I was doing it but
you know your comic awesome right
anyways the next thing that actually
matters that you might be interested in
when you're dealing with collection is
the concept of ordering sorting and
filtering right so I'm in ornament
because when you get a collection you
they would be ordered a certain way and
sometimes it won't matter to you but
sometimes you would actually care right
so you would say like order by
popularity sorted as descendant or order
by first name and sorted as ascending so
when you actually go and read your URI
it makes perfect sense to you you know
you say give me this one ordered by this
one descend then I want the previous 22
item this this is that so you would sum
it with them how you would do read it as
English you won't be confusing your API
people in the API clients will love you
and they start using your API because
that's the goal again alright filtering
filter by is a generic one filter by I
don't know people who have like 20 years
of age whoever it is I honestly don't
have an actual solution for that one but
you might include an expectorant
expression and inside filter life right
then next thing is the concept of views
and they borrow this term from sequel
like in the views of both tables and
what you want to do is you want to
support custom views of the data at the
schema level right so and you want to
use some kind of an easy express
expression to do that
it happens to be for a particular you
have this user has all this information
it has its account data and its profile
data and all of this stuff but you know
that your whoever is gonna be using your
API is only interested in the first name
and last name so what you do is you
would give him like a name view it would
say give me only a profile extract so
you would do slash users and you would
query and say you know view give me a
brief which only is gonna have therefore
a first name and last name or give me a
full view of the actual resource that
I'm interested in and these are
predefined right you want to also
support these custom views through this
is no bueno
so let me get the children up so
hopefully this won't turn off anyways so
you would assume and lead the user to
actually cherry-pick and say in this
resource called user I only want first
name and phone number or I want eat
everything but last names right here and
there is no standards out there a lot of
people are doing it differently LinkedIn
and in particular has a very
sophisticated expression language that
they actually parse and do themselves
thank you how are we good max saved the
day so um yeah anyways um one thing that
you might want to keep in mind is for
new Legacy clients it's always these
people that draw a drag it's 1% right
now using IE 4.0 ever it is no but that
don't have support for all the HTTP
methods all right I personally say let
them go to help kind of get a bunting
but you know some of you might be a lot
more you know benevolent than me and say
alright we gotta take care of these guys
okay D'Amato we can't keep him on in the
ring and the way you would do that is
actually add in another query parameter
called methods that would allow them to
get
around that and actually use a post to
send you data but say that it is a post
and HTTP POST but what I actually mean
is a put if you right next thing
security I promise you won't slide all
right
security remember that web services must
be stateless I saw all that extremely
important if you have stayed carried
over for one request to another one
you're just making your life difficult
and you're not visible right this means
that no cookies no sessions right which
means which implies that the client must
send you their credentials every single
time they hit an end point of your API
every single time it would make your
life extremely easy if you are behind
the load balancer you don't have to use
session stickiness or any of that
business right there you just have a
load balancer and doesn't matter what
service they end up in you're good all
right so you don't want to have that but
and you have multiple options of course
if if you decide to just stick with HTTP
security you want them to pre enter
preemptively said the authorization HTTP
header
which we'd have them username and
password what every single request basic
which is base64 encoding or digest which
is I believe the second md5 hash every
time make sure that this thing this
thing is very insecure so you wanna you
might want to consider using HTTPS for
that all right if you are brave and they
highly recommend this you want to use
OAuth they believe there are a few
presentations in Java one about OAuth
one I think was in this room in the
previous session I guess you missed down
one final test in your API there are two
main projects that actually stand up if
you want to test your web services right
and the first one is the spring risk
template and that's a use over there's
things that is very nice this sense that
would conveniently not only allow you to
actually fire those requests here and
there but it would actually marshal from
XML from JSON
stuff for you into Java objects you
don't have to do any of that code and
not to monkey around we're doing that
yourself
but the coolest one it's a rest assured
it's an open source project from that J
way I apologize this is the slide I was
talking about all that's for the people
in the back but this is straight from
their home page so you didn't miss much
that would allow you to say literally in
a way in an API is very fluent give in
authentication basic with user name and
password expect status code 200 when you
get or post to slash secured and it
would failure J unit test on that basis
or passive it's great it's literally
like a one-liner that that sounds very
much like like English right versioning
tremely important one of the slides that
we said it's once you go public API is
are forever you couldn't change right
people do it differently they do it the
first most of them do it this way which
extremely hate because says like ApS
like v1 and it just messes up this whole
concept of that the slash is supposed to
signify hierarchy v1 some people would
use Facebook I think uses the question
mark equals v1 which is horrible as well
and it was like different like v1 point
one you know there's the these guys I
think 2000 uses this and we'd actually
have like the date it was weird I was
like what then it's this movie actually
would use like the date to version
version there ap is um you might have a
different opinion by I really don't like
that what you don't want everyone you
want to make sure is you want to make
sure that this is not optional that
whoever's using your API explicitly
specifies what version of that
particular API that they use you don't
want this to be optional and there any
circumstances my favorite way is
actually to use vendor-specific mind
types right you could go online and
register I think for free
actual mind type that is specific to
your API or specific to your application
this is my Jason this is my mind to my
Jason of VND for vendor Polymathic coder
dot address book specified specific to
the Animus book application that we're
building plus Jason all this says that
this is the JSON of Polymathic coder and
I actually forgot you would include v1
here or v2 or v3 to say and that's how
you would version you API so every time
somebody hits your end point you know
you read that except header and it's
your specific mind type and then you say
and you read the version off of it and
then you would direct them to the
controllers in your code or the
resources of your code that are there to
handle that particular mind type that
particular JSON right documentation we
all hate it but we must have it what to
document first documentation when you go
online you know Twitter by far has the
best documentation I've ever seen out
there but what your document is
extremely important think about it from
a client's standpoint what does this guy
need to do to call one of my endpoints
and you would document that but you also
want to include some kind of metadata to
kind of let them know what's the purpose
and what kind of operation is carried by
that particular endpoint and you say the
endpoint itself you know they give it a
name some description whether there was
a prerequisite or not the endpoint that
tells the guy to pay the guy
it's prereq is that he completed the
immigration paperwork and whatever it is
before so you would say that this is a
prereq if you're hideous
so like Patos or whatever that thing is
however that thing is pronounced if
you're that you that would be in your
bin there as a link in your body as well
just to tie it back to that and actually
the request and response
what does request the response mean
the quest want to give him you you are I
want to give him the past parameters
that I make you didn't that you are I by
path parameter I mean / user / Abdel
that say that Abdel is actually a
variable of the a of the guy query
parameters any query parameters that
you're supporting whether the for
pagination the partials whoever it is
want to explicitly state them they're
telling me there they are optional none
optional give them any defaults when
they actually don't use them tell them
whether they have defaults for them or
not don't actually document HTTP method
you want to document the HTTP headers
that you need set content type except
the authorization as well and you want
to document the body what's the object
in that body the schema and and give him
actually some giving some sample I'm
going to show you a very nice demo in a
little bit but of a documentation a
model of documentation a little bit so a
response you want to document two things
in case of a success
what is the HTTP status code and also
the body and the failures the different
HTTP status codes that you have in the
failures the different errors and the
bodies that they come with
in case of documentation is refer to the
big guys they have outstanding
documentation but I would point you to
this open source projects iio Docs for
mastery that is very nice so I'll just
show you a little example over there of
what I'm talking on this is horrible
well I'm talking about so what you end
up with you end up with things like that
a documentation that is very interactive
if you want to get a DVD list of top
rentals from my rotten tomato
alright you just go right here and click
on it it will drop down these are all
the parameters right there and this is
the country and you get to try it
sorry about this you'll get to try it
and you will actually go and make the
call in the background I don't
Wi-Fi sucks sorry guys no internet limit
Oracle
well actually blame me I didn't say
often to me but anyways um you can go
and do get top rentals and then you get
to try that particular API we know I see
so I have about seven minutes right now
we're almost through the slides and
they'll have some times for question
questions right after so the links on
the slides as well so how I suppose your
rest a lot of you walked into this talk
to get an answer for this question again
the Richardson's maturity model as a
reference that should tell you where you
actually stand with a view 11 1 0 3 or
even if you want to take it and before
there's also this very this balance
between being dogmatic versus pragmatic
and then in the English common log comma
common law there's this concept of the
reasonable man and by reasonable in law
it means that the concept of beer is not
very relative and then and that you take
into consideration people who are in
similar situation people who are within
your space of technology or product and
what is the custom and what is the usage
as well and a lot of these things like
paginations and all of these things are
just custom there that's what however
you choose them to be and however you
you know whichever makes the most sense
to you Mitch ever you think would be
easier and more intuitive would use or
you should go you should go with
questions if you have open it for
questions right now but if you'd like
access to the slides I will try to put
up some sample code online in the next
maybe few weeks and it will tweet it so
if you follow up automatic code there
you get access to that one or you can
talk to me afterwards if you're not a
Twitter guy you know
we can you can I can email you can give
me your email and they can get back to
you so I'll open it for the floor for
any questions and if not have a good job
on one any questions of 100y Doc's yeah
I love that thing Oh quick there it is
you literally just go and put put up
some JSON you find some JSON you get
that nice dropdowns and all of those
things you just pretty much going it's
very declarative and very nice thank you</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>