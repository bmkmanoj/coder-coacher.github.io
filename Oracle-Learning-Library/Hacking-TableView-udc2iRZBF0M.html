<!DOCTYPE html><html lang="en"><head><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114897551-4"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-114897551-4');
</script><script type="text/javascript" src="//platform-api.sharethis.com/js/sharethis.js#property=5ac2443d1fff98001395ab6c&amp;product=sticky-share-buttons" async="async"></script><title>Hacking TableView | Coder Coacher - Coaching Coders</title><meta content="Hacking TableView - All technical stuff in one place" name="description"><meta name="keywords" content="education, coding, programming, technology, nodejs, mongodb, software, computer science, engineering, teaching, coaching, coder, learning, java, kotlin, machine learning, AI, ML, tech talks, angular, javascript, js, typescript"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/bootstrap.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/coder-coacher.css"></head><body><div class="container-fluid"><h1 class="site-title"><a href="/">Coder Coacher</a></h1><hr><h4 class="site-subtitle text-right">Coaching Coders</h4></div><div id="amzn-assoc-ad-99d6751e-2392-4004-ad16-73aa8385d9d0"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=99d6751e-2392-4004-ad16-73aa8385d9d0"></script><div class="post__breadcrumb"><div class="container"><ol class="breadcrumb"><li><a href="/">Coder Coacher</a></li><li><a href="/Oracle-Learning-Library/">Oracle Learning Library</a></li><li class="active">â¤µ</li></ol></div></div><h2 class="post__title"><b>Hacking TableView</b></h2><h5 class="post__date">2013-02-04</h5><div class="container"><div class="video-responsive"><iframe width="560" height="315" src="https://www.youtube.com/embed/udc2iRZBF0M" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div><div class="post__text">hello everyone thank you for coming
along today my name is Jonathan Giles
I'm going to be talking about hacking
the table view control hacking might be
a slightly strong term what I probably
should see this hacking with the tape of
you I'm a juror fix UI controls
technical leads so my job is focusing on
all the UI controls that we ship
specifically I develop a number of them
one of which is the table view control
if you want to reach me you can reach me
at charcoal doc jars at our calm or I
liked I use Twitter so you can supply me
at at Charlie Charles before we start
I'll be interested to know where people
are around the table you people if you
could show your hands if you have any
news table view or if you're very new to
it they'll kind of inform me how much
times okay okay so we were all pretty
new to it so I'll spend more time on the
interest sequencing as per usual don't
buy the table view control or any
component of Jeremy's based on what I'm
going to tell you today so what I wanted
to do was a brief introduction to table
view control I might make that a bit
longer and I'm gonna have a Q&amp;amp;A session
at the end but I'm really kind of try to
run this as a ball so if you've got
questions feel free to shout them out I
might ask you to wait till the end but
sir please don't be offended by that
table view is a control where I which
I've built and it has a little care in
it but it's not necessarily clear to
people just by looking at the API what
some of the API does so I want to talk
about some of the hidden public API then
I want to talk about some hacks that
I've done that we can use and at this
time I'm happy to answer as many
questions as there are one other no I'm
a Kiwi
sorry for the AP and hopefully I don't
talk too quickly if I am talking too
quickly town with slow down I will not
be open about that my wife Cal Ghetts
find out all the time so how would you
summarize what a table view controllers
for one I like to say it's got support
for infinite rows and that's kind of you
know marketing's term but what I what
I'm trying to say is doesn't create a
node for every single row of data
you're observable list what it does is
create the borough is just for the
visible area of your table view and as
the content Scrolls up and the top
content goes out of you it's now reused
at the bottom of your tail so it's
exceedingly efficient in that direction
but however when we designed it it was
designed for a small number of columns
and basically the reason is is because
even though we virtualized and
wonderings and we don't vote she lies in
the other direction well if anyone's
interested I just did if you got over 30
you gonna start having a bit pain but
like I said there's ways that I've done
to virtualize in that direction as well
so you can have theoretically infinite
table columns as well so like I said
it's paths we only have the cells for
the visible area and we virtualized them
so they're extremely efficient the tail
view is also style and basically every
direction you want to style it you can
solve just the single cell a entire row
an entire column or the column headers
it's all star level via CSS and that's
how we style table view control that we
ship in Java fix so done by our caspian
sea is his file and finally is the api
developer of the table view control I
think it is exceedingly more better to
use than the J table control but I may
somehow be biased on that alright and I
want people on Twitter a few weeks ago
this presentation is by far the most
Aero heavy presentation I've done so if
you like arrows you're in for a treat
this is a table view it consists of two
columns a first name column in the last
name column and we're going to work
through how this table view was built
first of all kind of behind the scenes
the way the table view is structured is
that you define table columns but it's
the table column that actually also
specifies how the data is retrieved
so unlike swing where you have a table
model and the table model as asks you to
return the value for a row column index
the table of you has table columns and
the table column for the first thing
column
has to know how to get the first name
out of the data model so we're dealing
with person objects here so first name
column has to know how to get the first
name property out of the person object
each table of you basically in the
visible area has a table row associated
with it and each table row has one table
cell for each table column that exists
and so not only as a table column
responsible for getting the data and
should bring it to the user
I was also responsible for rendering the
so each table cell for a column is
created by that table column and we're
going to listen a lot more team shortly
and so ensure a table view consists of
zero zero or more table columns and they
visualize a list of items so what I
wanted to show here was basically on the
left hand side we've got a person class
that has two properties the first name
property and the last name property and
I've kind of implied there that there's
a Kia Tara cesar and a property meter
and if you aren't familiar with what the
property me that is and genre because
extended javabeans pattern we you have
for example first name property as a
meeting and basically that will return
the string property that you see there
and the reason why we do this is so that
you can do all your nice binding that we
do behind the scenes and on the right
hand side we have what we want to
finally end up with which is that table
of view from earlier on so of course the
table view doesn't want to deal with
just a single person object it wants to
deal with an observable list of person
objects and so tell you it doesn't use
an advanced data structure for the table
model it just uses observable list and
the reason why we do this is basically
so that we get a whole bunch of stuff
happening for you for free
so if you've owned observable list of
person and these this personalist
changes for example you add you
people or you remove people or Yuri or
other people the tableview turn it
automatically fine to that list for you
so that they will automatically cut that
visually for you and what I'm doing here
is I'm just been a bit lazy and I'm just
creating an observable ArrayList with
the data in it the next thing we do is
we start preparing our table columns so
we're going to create a table column for
the first name and a table card for the
last moment to get the data into the
table view we basically call the sip
items meeting and the scene items mean
that just takes an observable list them
off the type of your table D and you end
up with what you see on the right hand
side that's pretty much a summary of how
you populate a table view with columns
and data so if we were to dive into a
bit of code now first line of code there
basically it's creating a new instance
of a tableau the one generic type that
you see there is specifying the type of
the items list then when we see it
inside the table view control and it's
always nice to users in New York's if
you can because it makes the code
completion a lot easier then we started
finding out table homes and there's two
generic types here the first generic
type is of the type of the table you
identity to columns here to go and
through so it's presently and this first
name column is going to be dealing with
strengths you see on the right hand side
they were passing in the string first
name that's just specify what will be
seen at the top of your table column so
it's just a pretty string it's a
shortcut you can do that as a separate
operation if you want the second line is
something I'm going to dive into a bit
later on but basically what it's saying
is for this first name column you have
to go get the first name for obviously
out of the person objects that this
table view is visualizing and we do
exactly the same thing for the last name
column everywhere that we had first last
time we now have last anything when the
table view we get their columns and the
columns is just an observer
listen this is a pattern that we use
throughout genre face API we observe we
return up an observable list that you
can be change so in this case we get the
columns list and we add in the first
name column and the last name column and
then in this case I'm seeing the items
to be collection of three person objects
and the end result is what we've seen in
that work times already it's a table new
with two table columns and 3 rows of
data and each column knows how to get
the first name in the last name there
congratulations sorry that's right but
you guys get a short preview of what's
coming up
so congratulations you now know
everything can even know about the table
view control we can all go home and
except of course like I said there's
plenty more that we can talk about so I
thought I'd to stop now in case there's
an equations about the first part okay
so this is like we should I get very
very often this is not a column this is
an absence of any other actual column so
this is just an MD area when we continue
the alternate row highlighting and it is
by far the most highly a secretion I
ever received and I will one day just
get rid of that alternate row
highlighting but like I say that is not
a column that's the absence of a natural
color so any other questions
show them so so this is what's known as
a : recycle to rephrase a question is
there any column resizing policy to
specify what the column width should be
and the answer is yes there's two
predefined with table view there's a
constrained resize policy and an
unconstrained resize policy the
constraint or size policy always makes
all the columns that are visible to
equal the width of the table column us
are in the tail of U and the
unconstrained one just needs to be
whatever what they won't need to be
whether it's wider than the table view
or shorter which is when you get the MD
non-existent Airport yes
this is part of the hidden public API
that I'll be getting on to you very
shortly
but men street properties and history
robbery
right so the question is if you don't
have a POJO that has strength cropsy or
a JavaFX property
what can you do and I'll cover that
shortly all right so so basically the
way we do it at the moment we've got a
property value Factory which I'll cover
shortly one thing I'm not going to cover
is we also support them there so you can
put a map in and as long as you can tell
that each tab will column where to get
the data from for a row so say you've
got a list of maps and each each item in
the list is a row so we have a met value
factory just like I'm going to talk
about that later on the property value
separate display as you can
and so the question was because when we
used the data mall as the visual model
that doesn't let you have separate
models and the answer to that really is
injera fix to a turtles Eric when we
released that the intention was to have
blacking blazed lists if you're familiar
with close lists you have a sorted list
in the filter list and you kind of wrap
these things the intention was to go
down that path except people start
poking holes and the implementation of
those classes so we haven't gone down
that path year but still in the works
and might be for eight and then in those
situations you can start you know having
murid collections and things like that
but we haven't gone a long way down
there and it certainly it's not my job
I'm the high level visual someone else's
the low level data collections
curious when you move things around an
observer holders
sorting order in the table
so basically the question is if you
change the observable list around does
it change the view and if you change the
sort order then that impacts the visual
sight does that change the collection
and the answers used to both so there's
a one-to-one mapping and certainly I've
got a big thing on my to-do list
sometime in the future to make sorting
even beautiful a situation where we
don't want to change the underlying data
list and it might be this class list
approach like token I was talking about
where we wrap a normal list with a
sorted list
and so the sorted list is changing but
the underlined list doesn't change if
you don't mind I'll carry on sure right
so there's four things I wanted to
quickly talk about and there are
property value category that are alluded
to earlier on sale factories nested
columns and multi-column sorting so a
thing that trips people up is that
there's two properties of table column
there named very similarly there's a
cell Factory in the cell value Factory
so first thing I wanted to do is clarify
what they each mean and the most
important one of the two is the sale
value factory because that tells the
table column what the data is that it
needs to retrieve so when it's given a
person object the cell value Factory is
the thing that's extracting out the
first name value from that person object
you can if you want also forgive a cell
factory and the cell factory is
responsible for altering how that data
is presented to the user so table column
doesn't have a default cell value
Factory if you don't give a cell value
factory you're not going to see anything
in that column it does have a default
cell Factory basically it's just going
to cool to string on your node or on the
object and presenting there as a label
so this is the short-form I showed you
earlier on and basically what this code
is saying is there's a nice property
value Factory and the reason why I've
created it is so that you don't have to
write that every time you want to
specify the cell value factory inside a
table column so the first bit of card
there with the property value Factory
what we're basically saying is find the
first name property
or geta on the person object and return
me there so in the case of a person
object if you can cook if we can find a
method called first named proxy our this
probably the only factor is going to
give me back there inside the table view
and if I can't find the first name
property is going to return get first
name then it's just a string so it's not
going to do anything special the nice
thing about returning the first name
property method is that the table of you
is going to bind to that first name
property so if you all of a sudden got a
table of you with the first name and a
last name and you replace rename one of
your persons from Tom to Jerry that the
name is going to automatically change
from Tom to Jerry on the screen without
you having to set up any bindings if we
only get if we can't find the first name
property method and we have to return
the geared first name that's just a
string and so there's no point in
binding to that because we're not going
to get notified at wing tom is renamed
progeria the second approach is
basically exactly the same you can see
what's going on behind the scenes - a
lot of reflection so the downside of the
first approach is technically it might
be a little bit slower I haven't had a
chance to meet up the performance quite
year but if you want really high
performance go for the bottom-up
approach but I would doubt that anyone's
going to notice that and so you can see
them in their bottom a bit of code there
you can see what it is actually
happening behind the scenes the pea is
just the sale data features object and
that basically encapsulates the table
view the table column and the the value
for the row that's being rendered and
then so you return the value and in this
case it's the person object and then the
person object we're just going to return
the first name property so we can
automatically bind to it
Tom had a question yeah
thank you
right so as we scroll up and it was
super right so the question was we
created all these bindings isn't that
you know kind of cost a lot of memory or
trouble and equipment the answer is
basically we only create the bindings
for the visual area and there's things
scroll out of you the bindings are
released and we put new bindings on the
things that are individual areas and if
you don't want to be bound to don't
return another property basically if you
are wanting to do the bottom approach
but you don't have a property because
you have to return a observable value
basically you wrap your string for
example your first name and the
read-only object property so it's a bit
of a bit of a I agree I think that those
so ideally you would use either the
first approach there or you would have
properties inside your genre things so
now that we've covered cell Valley
factories and the next part is cell
factories and they let you customize the
visual representation of the data so
some examples are showing a pro respire
if you've got downloaded applications
between 0 and 100% for example having a
text field when they user double-click
sonic our cell all those kind of things
and there's two kinds of cell factory
and the tale of you there's there's a
row factory and on the table view and
it's a cell factor it on the table
column I'm certain that 999 times out of
thousand did not want to use the rori
battery by firing large you use that
cell factory on the table column because
basically what you're doing with a cell
factory on its have a column is
specifying the rendering for one single
column and your tale with you the first
approach that bro factory on the talib
you is specifying the rendering for a
single row and so that that brings with
all the responsibilities of having to
lay out the cells for all the columns in
that row
no not really
so the question was would you use a row
factory in a special situation it try
not to because of whether the Royal
factory comes a responsibility of laying
out all those cells and that's you know
there's a big responsibility to have the
cell to match the headers and this is
going into the implementation but the
head is a separate from the actual cells
inside the tail group area so you've got
to size them properly and you've got to
lay them out in the right order and all
that so really if you're wanting to
customize on a row by row basis is
probably better options and that's
probably to do with having great cell
factories on the table columns so the
intent of cell factories even though
there's a slightly scary API is that
anybody should be able to do it for your
specific use case so the goal is to make
it easy and powerful once you get over
the API and the way to do it for a tail
of you if you're going to do it on a
table column by table column basis is to
extend from the table cell class and the
one we think you want to get to know is
the update item method and that takes
two arguments the item itself and the T
is a type of that column so for example
the first name and last name columns the
t would be a string and whether it's
empty not and when we say empty what
we're basically meaning is that we've
got to the end of the data and there's
no more data to show so for example
hover highlights shouldn't work on empty
cells and so this is a really good time
for you to be told the items changed
time to about green green so for example
change the text of the label or perhaps
route change entirely for example if the
editing state has become true since the
last time that this was called now would
be a good time to start showing for
example a text field and take out the
label so a cell is basically a label and
so it has a text and a are graphic and
when we say graphic almost always we
mean a node or a scene graph and a zone
right so when you set the graphic inside
a
we'll sell there can be any node or any
seen graph of nodes so it could be a
text spell for example and so it's a
good a good approaches normally to have
one or the other so you have a label the
show the text and if it becomes an
editing you take the label away you see
that's now and you are see the text
field to be at their graphic one thing I
did rant about geography x2 was build a
whole bunch of cells and in 2.2 I was
allowed to bring them in so there's now
cell factories for this view tree view
and table view and they exist in this
package here the JavaFX scene control
cell package so what that leads to do is
create cells a whole heap easier so you
can see here there's a this is a table
view with a progress column and like I
said before this might be like a
download application for example and
rather than try to use a zero to 100% as
numbers might be visually slightly more
pleasing to show them a progress bar so
the way we do this the first two lines I
has per usual you create your new column
you can set the label at the top of the
column you sell value factory in this
case we're just going to pull out the
progress number from the back in object
and then we're going to set the cell
Factory and what we do is just use the
strawberry current we say we go to the
progress bar table cell and we say this
is for a table column and so this is
going to do a whole bunch of code behind
the scenes that basically shows what you
see a lot of hand side there and the
last thing about this is that as a
numbers go because we're binding to it
so as the progress number is changed
inside you've been it would have
originally been changing just as a label
now because it's a progress bar of
course it's going to animate across with
no actual need for you to do anything
more is
like it has to go to the back into
vegetative showing the fungus MRSA and
then it's fine
so I might've got your question wrong
but you want to be updated from behind
the scenes as a separate three right
right so this is something I would like
to do where you can kind of create to
sell factories but it's not something
I've done year it's kind of clunky so in
many regards if you want to have a
combination of cells you can actually go
to like the progress bar table cell and
use that sometimes and another one other
times but you've got to create your own
ourself a tree to kind of switch between
them when they're Mexicans so just to
clarify it there's there's two concepts
is a table cell and then you have to
create our cell Factory and the South
Factory is basically a call back that's
given to the table view or the table
column and the table column is that
we'll call that call back when a table
cell is needed so it's basically a call
back that returns a table cell and so
basically the progress bar table cell
our full table column that you see there
is creating a call back that written
that on demand will return table
salesmen this was normally called at
startup so we create enough cells for
the visual area for that idle table
column but if the user resizes the table
column height and we need more cells
that callback will be called more time
to create tables of cells so another
example that's very common is of course
I mean they use a type and at East input
and so we do the same two things on
first two rows this time we're dealing
with something slightly different in
there that we're dealing with sales and
so sales is a number is a double in fact
it's not a string so in those last well
block of code there we're seeing the
cell factory to be a text field table
cell and we're saying that this is once
again for a table column but because
we're dealing with numbers and the users
type in as a string we need to provide a
string converter and the string commode
is quite simple it's got two methods
from string and a to string the one we
care about really is a from string so
that when the user types in a string a
new number and they press Enter from
string will be called to return a double
however one thing I did injera fix I
think 2.2
2.1 was I provided a whole bunch of
string converters so rather than write
all that code on the previous slide you
just have to write a new number string
converter so my job is trying to make
you write as little code as possible
sorry what's that
so in this case here you can handle the
input so you know you can do it from
string and you can return an invalid
number negative 1 or something that you
that your application will understand
so that
so in terms of validation and that's
basically the questions about I've got a
meeting on Friday with the beans
validation people and we're going to be
looking into validation over the next
few months that's something that we have
inside looking into year
that's something I've discussed very
briefly on the open GFX deer mailing
list if you have being part of that that
we're meeting with the beans of
validation people to see if we can get a
proper validation using their approach
trail and having to rewrite everything
so another example just briefly quite
often when you have a table view some
some columns represent that the user for
example is of a 14 a full-time employee
or a part-time employee casual or
contractor so oftentimes you just want
to present a constrained number of
choices so in this case what we're doing
at the very bottom line is we create a
cell factory that uses the choice box
table cell and we're saying for the
table column and we pass in the values
of the enumeration above so the employee
type values and because I've created a
constructor inside the new enumeration
and that's the true string mean that has
been overridden when it comes out on the
screen basically is pretty rigid so you
can see a nice bit full strength
powerful full time rather than the ugly
upper case full underscore time yes
people
yes yes so there's a tip so for one I
don't know what I'm just I wrote the
combo box but I can square it came on to
adopt one crew do you know I came into
it on one so it's a cube you never quite
sometime
see time boys when you're a API
developer and but yes so so there's all
just like there's a choice box table
cell there's a combo box table cell and
also this also is the same concept for a
list of you entry of you so uh so it
comes down entirely to one your
preference but to more importantly as
how many options you're presenting to
the user so a twist box is basically a
button that when clicked brings up a
menu and the meaning is vertically
shifted so that as a selected item is
above the button no there's not but if
you're going to create a twist box with
a thousand choices it's going to be a
menu that is very hard to use really
iceytina less richard the other 8250 all
these I would say 10 of these 20 of the
most and then go to a combo box because
combo box is popping up all this for you
and you can do all kinds of cool things
what'll it be so someone asked about
nests of columns and that's something
that whilst developing the table view I
kind of realized that if I don't make it
into the very beginning of the table
view control we would have pain later on
so fortunately I had that foresight and
we've got nisa columns by default inside
table view so I'm just going to create a
short example here we've got a table
column that represents say that the
person's bank balance or something now
we see at the cell value factory as per
usual as a property value factory are
taking the balance strength then what we
do is we create a name column and it's
just the first lines as per usual table
column with a name text the next layer
is the interesting one so we're eating
the columns list from the the name
column and we're adding into that the
first name column and the last name
column so previously what we did was
what you see at the bottom here we added
everything into the columns list at the
table view so what we're basically doing
a scene of this needs to hierarchy of
table columns and what that Texas from
is that what we had earlier on with
dispersed
last name or animations - what we've got
on the right hand side there and you
hopefully the code that you see you can
see how we got our sneeze - a situation
going on and this can go on as deeply as
you want it to go although I would
suggest that if you go too much many
more levels and three levels deep you
might be going too far and we've got I'm
already column sorting as well sorry did
we have a question no okay
multi-column sorting so I'm pretty sure
you hold down the control space command
button whilst you're clicking on the
columns to see that multi-column sorting
as you can see there it's kind of reined
in a bit differently the first sort of
columns a dot the second sort of columns
two dots and the third ones three dots
the thing out for that theme starts
using numbers and if you don't like that
you can always change it you can replace
sort node for the table columns the
other nice thing about sorting is that
the table view class has a collection of
sort as a collection called sort node
sort columns and what that represents is
there's a list of table columns that are
the current sort table columns the first
item in that list is the most highly
ranked sort column and as it goes down
they become recent least important and
as the user clicks on these columns that
all that's happening is that the list
has been modified so that we and the
table view is watching that list to be
told when to change the sorting and so
if you want to come in programmatically
and change the sort order all you do is
you go to their soar columns a list and
take in or out table columns yes
so each table column has a comparative
property so you can see it the
comparator on the table column there's
been a long time since I wrote it so
don't quote me on that
I would honestly hip dive into the code
to have a look I wrote this pre 2.0 so
the question was are we using it what
what are we doing for the comparators
I'm pretty sure we're doing something
smart
if by default Windows not expand but I'd
have to look into the code and by all
means come on up and we can have a look
but it's also going to open jfx dev so
everything that I do and my teammates do
with is open source you can find all
that open GFX div all right I wanted to
talk a bit about hacks I'm not too sure
the timers so let's keep going
I'm racing through this so that we've
got time for questions later on and what
hex could we talk about and I get a lot
of emails I get a lot of Twitter
messages I get a lot of OT and florrum
questions and by far the most common is
complaints that I received whiz by on
Twitter so I kind of came up with a bit
of a list of things that I've seen
people talk about so we could talk about
three table view cell spanning having a
table view Factory so what these are so
I hope everyone knows what the treat our
viewers if not we're going to talk about
that shortly I hope people know what
self spending those otherwise we'll talk
about that shortly other things that we
could have talked about would tailor
viewfactory which is basically an API
that will introspect a beam and provide
you with table columns based on the
properties that finds inside that beam
having a table model or something a
barking guide David somewhere in the
room being able to customize a table
menu which is something that the menu is
something that appears on top right hand
corner so it appears above the scroll
bars and there's a whole bunch of
customizing a scrolling so remember one
of them is removing the MP column that
everyone complains to me about it's
going to dog me forever that thing like
I say I'm gonna talk about the first two
but I'm incredibly sorry I wish they
would just give me a five hours law and
I will talk to you guys forever this is
you know this is my brain about this is
what I do every day
I've got a whole bunch of stuff I don't
know how many of you know that there's a
perfect experienced website as one of
the websites that I run along with
Jasper and Richard and I'll try to give
as many things up there as possible
there are some things out there already
but they're quite all one of them is
like removing the alternate highlighting
and various other things and I'll try my
best to blog about them now you won't
believe how hard Oracle work
I see some smiling faces from our
employees in the room so first question
is alright so I'm gonna I'm gonna talk
about tree table view and self spending
if some can tell me the time that would
be great
3:30 okay right so what does a tree
table view and this is a tree table view
you'll see that it's obviously being
rendered in jar effects because I do
have a demo to show and it's basically
surprise surprise it's a treat where the
table father Don or is a table with a
tree bonnet on depending on your
philosophical points of view but
basically in my in my point of view it's
a table view with indentation for tree
like features on the left hand side and
obviously expand and collapse and what
you actually see there is a screenshot
of my tree table control browsing my
file system so I hope for something to
embarrassing it sorry what an ugly name
tree table do I hate it I probably will
be released as that because we can't
really start pulling things tree tables
when we've got tail of you how this view
and tree view so I'm sorry for that
maybe I'm the only one offended so tree
table view exists quick hack proof of
concept on my machine a slightly better
on my machine but there is an older
version on the JavaFX 8 developer
previews I promise I will break that API
I've already broken it on my machine and
it may even ship in Java fixate but I'm
not making any promises because my boss
is Paula on the work this is a deer
issue you want to go to especially the
last bit RT 1 7 to 88 if you want to
partake in this discussion it's the
second most highly voted issue or
feature requests on jera they're the
only one above it the last time I look
worse as a month or two ago was Android
support but I'm not gonna talk about
that today sir
how do you make a tree table of you and
my point of view is beliefs new API
people have to learn the better so what
I've done that what in my version and as
your version if you download Java
graphics 8 as I've taken the tree item
API and I've taken the table column API
and then most places I smashed it
together
and then on the implementation slide
I've smashed it together even more so
what's good about treat view a tree view
just describes an hierarchy of data and
does it using the tree item API and so
tree view has a root a root node and the
root node is a tree item and the tree
item has a value and has children and
those children are further tree items so
you have this kind of you can see there
it's basically a hierarchy being built
of tree items and what's good about
table view is of course the table
columns and it's exactly what we need
for at retail of you so we reuse the
table column API at the moment and
basically the table column is being used
exactly as it is already has been used
to ask how do we extract the information
out of these tree items for every row
that's visible to the user and so what
we've done what I've done at the moment
is tree table view extends from tree
view don't complain I'm going to cross
the house second all that does at the
moment is add a columns list just like
an table view has got a columns a list
for you to put the columns into so very
very similar tree table column extends
from table column doesn't add any API
it's just there to kind of signify it
does modify the to modify the generics
hype slightly but I won't get into there
and this sounds good a question and then
we create a tree table row and then it
scenes from table row so what you're
kind of seen is that we're basically
merging these two things together and in
the case of this tree table row we've
taken the extended table row
I'm smashed in the tree cell this is all
very very ugly so where's a really nice
quick proof
cippec and it works nicely the JavaFX
act a developer preview has exactly this
approach but I've trust them all out
because you start ending up with these
situations for example the tree table of
you shouldn't really be offering a cell
factory that returns tree cells and
that's what it will get at the extends
from tree view nor should attack the
tree table column or the tree table row
be referring to table columns because
table column is entirely separate bus
our table view is entirely separate from
a tree table view so we get a situation
we've got this API there has to be null
because there's nothing to put inside it
so my current thinking is we have to get
rid of that we might have to do some
code duplication hopefully we'll get at
retail view at the end and that's mainly
and on the private you know back inside
we've got this tree table view skin
basically all it does and for people not
familiar with the controls we're gonna
have to do a whole bunch of talks
tomorrow about it Pro and I have a talk
and Garrett Grunwald has a talk as well
so check those out but basically a
control has a visual representation
that's the skin and all we do in the
tree table view skin case as we throw in
a table view and we make take up the
full size and the other thing that we
need to do is but obviously a tree table
view has tree items and we need to map
those somehow into a list so that the
table you can obviously so that so what
I've basically done is just a has a bit
of a list that you know when gate is
caught on it them dicks we return the
right tree item from the view and the
size is obviously accurate based on your
current expansion basically one of my
jobs to make things fast as well so
that's exceedingly fast
shree table roschin is a very ugly class
at the moment and the source code is
probably out there if you can get the
8.0 repos I'm not sure they're out here
and it's just those two classes merged
together so it lays out all the table
cells but the first column is a bit
special in the tree table view because
it has to have the indentation on the
left-hand side but the column can extend
past the width of the header so it's
kind of shrunk and it's
just deal with that yes sir on my
machine this one here so don't steal it
is a lot of work to extract out the
common functionality I don't know how
well it's going to go but hopefully I
have some time to do it so are the
interest of know if anyone has any
complaints if they think I should
totally rewrite everything I've done
everything is ok cool sorry filtering so
this one yes so the intent is probably
to have a tree table column offer beta
filtering API and sorting API because
certainly in the case of sorting when
you're sorting a tree like structure
sometimes you just want to sort the
children sometimes you want to sort
higher up so certainly there has been
some discussion on that gerra issue that
i linked to earlier on about how to do
there and chances are my opinion at the
moment is that we will do it on the tree
table column class because it's thing
you can specify things how to filter in
sort a column in the right place
yeah so I have to apologize my machines
incredibly low resolution
for some reason
it's Windows 8 so what does I felt
oops
so this is the tree view tree table view
sorry this is my file system we can go
into Program Files oops it's gone out so
we can see what I can stall on my
machine so it's basically what you would
expect thanks buddy it was what you can
expect as a tree as a table view and a
tree so if we resize that the size
crashing my machine is crashing here we
go all right so you can see that sorta
changed probably this makes more sense
this so it works as you would expect
basically
it's still longer I kind of blew my mind
a little bit prevailed sweet version
where one column had like
branches and leaves and those rows are
based on the parent
those branches
so you move science over and then if
it's nice in a spot for example right
but then I wasn't expecting expanded
okay you make them to stay with the name
column well I mean right so counting
table column 0 1 2 if we're on the 0th
column we're going to put the arrows
that's basically what I've done if that
would I mean I've been coming to this
user experience haven't spoken up
tasting haven't spoken up my boss
doesn't notice on there I hope is on the
road so this is how I would do it
there's a long road from where I would
do things to how mind up this is how I
go
certainly this is my favorite
so big plus 100
yep but I inside
and sizes if you spent what those
there's nothing in my backup folder I'm
pretty bad at that sorry
and I close my machine it's crime very
slow for some reason yeah yeah there we
go all right eclipse so basically
tree item just like a tree new tree item
knows the extent expanded or collapsed 8
so it's the tree item that's recording
that the clips folder which happens to
have a modified out of there some size
that's irrelevant it's just that the
tree items expand so the selection or
the question was what kind of X models
do we have and does it survive changes
to the data model the answer is for a
tree view list view and table view we
have a multiple selection model that's
the API that we have and the model
multiple selects model obviously lets
you specify whether something should
know the selection model should be
single or multiple it also need to
specify whether it should be Roy basal
cell based yeah so that there's a
selection all that we have for this tree
and tail and same with tree table
because it's just a table view basically
and in terms of surviving changes that
the intention is yes or every time we
don't have a release out right now I
would rather fix a everything breaks
because we're working on the next
release so at the moment I mean if you
look at this I I hope you know moment no
sorry ma'am something's gonna rot slower
on my machines so but at the moment it
pops down when you expand the selection
pops down and that's just the step
because I'm hacking things at the moment
but I certainly the intention is if the
data model changes the selection will
update to know where the signal should
be is Kyle
laughs
harvest
so
all right so everyone's styling so
certainly we expose everything by CSS so
you can style how things look you can
also specify in the case of the tree
view and the theory of a tree table
column the amount of indentation so I
think it's our team pixels which is on
this very small side you can easily made
that shrink 20 or 30 pixels and then
things shut out far more obviously
all right so sure I mean all that we're
doing basically is showing so that the
arrow is just what we call a disclosure
node and the arrow is specified CSS so
if you want to put lines and what you're
basically going to do is have lines go
to the top of the row and the bottom of
the row such that they are in the right
place and you're going to do that by CSS
and with a SVG shapes
so this is one of the feature of quests
I've had for a very long time so
freezing columns right right exactly and
there's something I've had for a very
long time it's a something I have got
around to you I think Tom may have asked
me for that feature so no it's not
something we have you certainly is on my
to-do list but my to-do list has
exceedingly long yes basically that
would be the best approach for now
because you've got this columns list you
can observe the columns a list and as
the columns change you will be notified
if you add a listener and if you don't
like the order you can change it to
something else right so if you don't
mind I'll carry on no more questions yes
sorry speak up
there's a tableview component yep
so this is the philosophical difference
I was speaking about earlier on my
intent for doing it this way it was so
that we have API that's entirely
consistent in fact that file system
browser that see in the trie tablet view
was taken from my tree view sample that
I can browse my file system in tree view
I took the code that creates the
hierarchy for my file system and I took
some I put some table columns and that's
beside that the name the last modified
day and the size and just smash together
really nicely so that was the intent to
try to make it so that was easy to do
unfortunately like I said earlier on my
slides I don't know that it's going to
survive because it ends up with some
kolache api we're slowly running out of
time but the next thing I want to talk
about was self spanning so what is self
spanning and this is a trick picture
because it doesn't have any cells pain
in it
this is a normal table view conversely
this is a table view that has the eerie
third row has the middle column spanning
two rows so you can see there what that
looks like
conversely you can have a column
spanning where in this guy's area third
a row
spans two rows the first column spans
two sort of spans two columns or you're
gonna call a man row spanning where that
happens in both directions
Souths panting was something I ignored
in table view for JavaFX 2.0 and it came
down to the classic too much work not
enough time
and I also argued that there was a
philosophical difference between a
database table and the spreadsheet table
and what I was building was a database
table as so there are the differences if
you can imagine that how they kind of
work a database table does not span rows
or columns it's it shows that it
precisely the way the tail view shows it
now Oh am i hearing on objection okay
okay
okay well I'm Nev but turns out is
actually quite simple to create a a
table view that support of self spanning
which is why those pictures that you saw
previously exists and if you're
interested in joining this discussion
this is the juror to go to it's RT two
four seven four seven the big problem I
had was always when I was trying to
think how would I do cell spanning as
the user of the API how would I tell the
table be where the span should appear
and if you think about it there's not a
clear answer to me anyway at least you
separate the data from the spanning and
unfortunately that's the way I've gone I
follow the direction of a giant table
view control that supports this so I
introduced this band model and that's
the API there and it's very simple it
might change of course if this is not
anything we're committing to and it says
is a self span unable to report it's
true then we're going to start caring
about what other method says otherwise
we're just going to go on as per usual
now so you can method returns to get our
self span object which I'll cover
shortly and basically we get the self
span apt given row index and carmindy's
and I'll go through listen a bit more
detail shortly
so itself sounds very simple as a final
class to property or to fields it's the
row span and a column span and if you
think about when when you're talking
about cell span and it spans one column
that means that spanning just the column
that it would have done anyway if it
spans two columns it's going to span
that one
and the one next to it and same with
Rosso one means don't span you think
more than usual so how would you use
this and in my case what you have is a
cell spam tableview class that basically
extends from tableview ads in the span
model and what you do is you set the
span model on it and of course it's me
this cell span enabled return true the
way I do is I start trying these cell
spans and so this one spans two rows and
then you put your logic inside the kit
cell span abs method so at the row index
is cleanly divisible by three and we're
in the first column second column span
two rows otherwise return null which
basically means don't say anything and
the end result is what you see here you
can see in the middle column the last
name column this cells expand two rows
sure so that's just I mean as the count
is from the table columns so regardless
of if you're scrolling horizontally
that's from the table columns so again
I'm interested to hear people's thoughts
this is not something we've committed to
in the least for eight chances are my
boss will reject it for a long well but
it's very easy to make an automatic
open-source project out of this so I'll
probably do that and in fact I'm trying
to set up a jar of xlab's project much
like swing labs so more news on that
soon hopefully
poverty
I say the last name
so the question is can you use table
column instances rather than and the
index or honestly this is a quick head
so I'm certainly open to any suggestions
on how this can be made better yep
so if you know there's a gyro issue it's
being very quiet because I just started
very recently certainly I would
entertain you know I suggest people go
there and yeah two four seven four seven
any other comments on selfs penny
okay so now there's a difference between
self spanning and Sal emerging I had to
search Wikipedia the other day to learn
what the differences but the difference
is that self spanning which is what I've
done has tasted such that the cell and
for example when we're looking at bond
which is the first spam cell in the
middle row bond is taken from the top
row and the bottom row beneath it but it
starts Billy
there's mill : what just doesn't exist
so self spanning means you take it from
the point of origin which is in this
case bond a cell emoji means you kind of
collapse them together and you'll get
bond and whatever is belonging to Billy
all right sir right yeah carob okay do a
quick demo cuz I'm running out of time
all right so this is a standard table T
this is one with RESP and so you can see
I can click here to get there or there
to get there
so it's as you would expect keyboard
navigation works as you would exceed to
go to row by row we can do cell based as
well sure I mean I haven't done that but
there's no reason why not the cell if we
say were to show a text field at what
sales are always expanded to fill the
entire area so in case of you know bond
again a text field would probably be
expanded to fill the whole area unless
you plant in the next inside so it
doesn't grow I call them spanning the
same thing so Jeannie is the first name
so it belongs to this one up here and
this person here is entirely wiped out
so I said I am really bad at demos I
just found the dynasty and threw it into
my demos ok so this is really bad this
makes no sense
I'm fully aware of this but for the sake
of a demo of mixing its you know I like
to write code on don't really like to
write demos so you can see it works as
you would expect all right
no not really I mean the thing is with
multiple nested columns there's actually
just a graphical thing by everything
other than the very leaf state of table
columns it's just a nice kind of visual
thing it doesn't impact anything you
can't sort on those you can rearrange on
those but you're gonna take all the
children with it so no I see no problem
with that
like I said earlier on I needed to do it
and tail of you to get needs to columns
from from the beginning otherwise the
API changes quite significantly and I
probably could have done it very cleanly
all right I'm running low on time so
much quickly go through this so I create
some API cells fantail boot span more
cell span the way I did it and this is
the same with the tree view as well as
the cell spending as I took the table
Rose skin and I had to do stuff so in
the case of the tree view of tree table
view the table Rose skin put on the
Indian and shrunk down the first column
and the case of self spending basically
modifies how the cells are laid out such
that they're banning correctly and to
make this happen
basically I throw in a bit of CSS where
for every self span table view that's
created and for every table row that's
created that belongs to us health span
table view use the self span table row
skin rather than the default table row
skin so sort spittle CSCS text me
replace the skin so all the hard work
was handled by the cells fantail Rose
skin all I didn't like I say was over
override we'll modify the layout
children our class and allow children
classes totally responsible for how the
children are painted so here's my
graphics pretty
pretty good graphic something so a
tableviews laid our table row by table
row and each table rose wait lay it out
column by column so you kind of get this
kind of thing going on when you lay out
a tale of you I know some of you might
be thinking if I have rose painting and
say south spans three rows isn't the
rose they're going to be painted next
just going to paint over it and of
course the answer is true so there's a
little of hacking going on there with
making things transparent and picking on
different bounds and all that that the
end result is that you give the result
that we want so here's a very simple
diagram basically as we're going to tell
my cell we kind of look at it and we go
what do you want to be get the cell span
at this and X and then we can lay out
things so this previous one obviously
wants to be two columns wide so we asked
we asked there as tell us I want to be
two columns wide so we get the width of
that column and the next column and then
we move on to the next column so ain't
things out it turns out the next column
actually wants to span two rows so we
lay out all the other cells and they're
always big usually every thing's just
normal and so the next thing we do is we
realize actually we've just I got a cell
or iam there we don't want to lay
something else on top of it so we just
jump over we just ignore the content
that should be in there and of course it
makes us lighter if we have a cell it
spans the entire width and height of the
table view we're gonna only gonna have
one cell and then the everything else is
happy so that's that took me so long so
I hope you appreciate there
that you won't believe how hard that was
about anyway that does everything I
wanted to say so I thank you very much
for attending I hope you've got plenty
of equations feel free to email me at
Jonathan Giles at Morecambe or on
Twitter at Jonathan Giles thank you very
much</div></div><div class="container-fluid bottom-ad"><div id="amzn-assoc-ad-6a809dda-347a-4187-8a86-91faf94575da"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&amp;adInstanceId=6a809dda-347a-4187-8a86-91faf94575da"></script></div><div class="text-center">We are a participant in the Amazon Services LLC Associates Program, an affiliate advertising program designed to provide a means for us to earn fees by linking to Amazon.com and affiliated sites.</div><script>(function(w, d){
    var b = d.getElementsByTagName('body')[0];
    var s = d.createElement("script"); s.async = true;
    var v = !("IntersectionObserver" in w) ? "8.6.0" : "10.4.2";
    s.src = "https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/" + v + "/lazyload.min.js";
    w.lazyLoadOptions = {};
    b.appendChild(s);
}(window, document));</script></body></html>